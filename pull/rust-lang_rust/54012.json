{"url": "https://api.github.com/repos/rust-lang/rust/pulls/54012", "id": 213764866, "node_id": "MDExOlB1bGxSZXF1ZXN0MjEzNzY0ODY2", "html_url": "https://github.com/rust-lang/rust/pull/54012", "diff_url": "https://github.com/rust-lang/rust/pull/54012.diff", "patch_url": "https://github.com/rust-lang/rust/pull/54012.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/54012", "number": 54012, "state": "closed", "locked": false, "title": "rustc_codegen_llvm: traitification of LLVM-specific CodegenCx and Builder methods", "user": {"login": "denismerigoux", "id": 1766128, "node_id": "MDQ6VXNlcjE3NjYxMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1766128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denismerigoux", "html_url": "https://github.com/denismerigoux", "followers_url": "https://api.github.com/users/denismerigoux/followers", "following_url": "https://api.github.com/users/denismerigoux/following{/other_user}", "gists_url": "https://api.github.com/users/denismerigoux/gists{/gist_id}", "starred_url": "https://api.github.com/users/denismerigoux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denismerigoux/subscriptions", "organizations_url": "https://api.github.com/users/denismerigoux/orgs", "repos_url": "https://api.github.com/users/denismerigoux/repos", "events_url": "https://api.github.com/users/denismerigoux/events{/privacy}", "received_events_url": "https://api.github.com/users/denismerigoux/received_events", "type": "User", "site_admin": false}, "body": "This PR is the continuation of https://github.com/rust-lang/rust/pull/52461 in the grand plan of https://github.com/rust-lang/rust/issues/45274 to allow for multiple codegen backends. A first attempt at this was https://github.com/rust-lang/rust/pull/52987 but since @irinagpopa is no longer working on it I'm taking ownership of the PR.\r\n\r\n## State of the code before the refactoring\r\n\r\nAll the code related to the compilation of MIR into LLVM IR was contained inside the `rustc_codegen_llvm` crate. Here is the breakdown of the most important elements:\r\n* the `back` folder (7,800 LOC) implements the mechanisms for creating the different object files and archive through LLVM, but also the communication mechanisms for parallel code generation;\r\n* the `debuginfo` (3,200 LOC) folder contains all code that passes debug information down to LLVM;\r\n* the `llvm` (2,200 LOC) folder defines the FFI necessary to communicate with LLVM using the C++ API;\r\n* the `mir` (4,300 LOC) folder implements the actual lowering from MIR to LLVM IR;\r\n* the `base.rs` (1,300 LOC) file contains some helper functions but also the high-level code that launches the code generation and distributes the work.\r\n* the `builder.rs` (1,200 LOC) file contains all the functions generating individual LLVM IR instructions inside a basic block;\r\n* the `common.rs` (450 LOC) contains various helper functions and all the functions generating LLVM static values;\r\n* the `type_.rs` (300 LOC) defines most of the type translations to LLVM IR.\r\n\r\nThe goal of this refactoring is to separate inside this crate code that is specific to the LLVM from code that can be reused for other rustc backends. For instance, the `mir` folder is almost entirely backend-specific but it relies heavily on other parts of the crate. The separation of the code must not affect the logic of the code nor its performance.\r\n\r\nFor these reasons, the separation process involves two transformations that have to be done at the same time for the resulting code to compile :\r\n\r\n1. replace all the LLVM-specific types by generics inside function signatures and structure definitions;\r\n2. encapsulate all functions calling the LLVM FFI inside a set of traits that will define the interface between backend-agnostic code and the backend.\r\n\r\nWhile the LLVM-specific code will be left in `rustc_codegen_llvm`, all the new interfaces and backend-agnostic code will be moved in `rustc_codegen_ssa` (name suggestion by @eddyb).\r\n\r\n## Generic types and structures\r\n\r\n@irinagpopa started to parametrize the types of `rustc_codegen_llvm` by a generic `Value` type, implemented in LLVM by a reference `&'ll Value`. This work has been extended to all structures inside the `mir` folder and elsewhere, as well as for LLVM's `BasicBlock` and `Type` types.\r\n\r\nThe two most important structures for the LLVM codegen are `CodegenCx` and `Builder`. They are parametrized by multiple liftime parameters and the type for `Value`.\r\n\r\n```rust\r\nstruct CodegenCx<'ll, 'tcx: 'll, V : 'll> {\r\n  /* ... */\r\n}\r\n\r\nstruct Builder<'a, 'll: 'a, 'tcx: 'll, V: 'll> {\r\n  cx: &'a CodegenCx<'ll, 'tcx, V>,\r\n  /* ... */\r\n}\r\n```\r\n\r\n`CodegenCx` is used to compile one codegen-unit that can contain multiple functions, whereas `Builder` is created to compile one basic block.\r\n\r\nThe code in `rustc_codegen_llvm` has to deal with multiple explicit lifetime parameters, that correspond to the following:\r\n* `'tcx` is the longest lifetime, that corresponds to the original `TyCtxt` containing the program's information;\r\n* `'a` is a short-lived reference of a `CodegenCx` or another object inside a struct;\r\n* `'ll` is the lifetime of references to LLVM objects such as `Value` or `Type`.\r\n\r\nAlthough there are already many lifetime parameters in the code, making it generic uncovered situations where the borrow-checker was passing only due to the special nature of the LLVM objects manipulated (they are extern pointers). For instance, a additional lifetime parameter had to be added to `LocalAnalyser` in `analyse.rs`, leading to the definition:\r\n\r\n```rust\r\nstruct LocalAnalyzer<'mir, 'a: 'mir, 'f: 'mir, 'll: 'a + 'f, 'tcx: 'll> {\r\n  /* ... */\r\n}\r\n```\r\n\r\nHowever, the two most important structures `CodegenCx` and `Builder` are not defined in the backend-agnostic code. Indeed, their content is highly specific of the backend and it makes more sense to leave their definition to the backend implementor than to allow just a narrow spot via a generic field for the backend's context.\r\n\r\n## Traits and interface\r\n\r\nBecause they have to be defined by the backend, `CodegenCx` and `Builder` will be the structures implementing all the traits defining the backend's interface. These traits are defined in the folder `rustc_codegen_ssa/interfaces` and all the backend-agnostic code is parametrized by them. For instance, let us explain how a function in `base.rs` is parametrized:\r\n\r\n```rust\r\npub fn codegen_instance<'a, 'll: 'a, 'tcx: 'll, Bx: BuilderMethods<'a, 'll, 'tcx>>(\r\n    cx: &'a Bx::CodegenCx,\r\n    instance: Instance<'tcx>\r\n) where &'a Bx::CodegenCx :\r\n  LayoutOf<Ty = Ty<'tcx>, TyLayout=TyLayout<'tcx>> + HasTyCtxt<'tcx> {\r\n    /* ... */\r\n}\r\n```\r\n\r\nIn this signature, we have the three lifetime parameters explained earlier and the master type `Bx` which satisfies the trait `BuilderMethods` corresponding to the interface satisfied by the `Builder` struct. The `BuilderMethods` defines an associated type `Bx::CodegenCx` that itself satisfies the `CodegenMethods` traits implemented by the struct `CodegenCx`. This prototype contains a `where` clause because the `LayoutOf` trait is satisfied by a reference (`&'a Bx::CodegenCx`) of the associated type and that we can't specify that in the trait definition of `BuilderMethods`. Finally, we have to specify that the associated types inside `LayoutOf` are the actual types of Rust, using the `Ty = Ty<'tcx>` syntax.\r\n\r\nOn the trait side, here is an example with part of the definition of `BuilderMethods` in `interfaces/builder.rs`:\r\n\r\n```rust\r\npub trait BuilderMethods<'a, 'll :'a, 'tcx: 'll> : HasCodegen<'a, 'll, 'tcx> +\r\n    DebugInfoBuilderMethods<'a, 'll, 'tcx> + ArgTypeMethods<'a, 'll, 'tcx> +\r\n    AbiBuilderMethods<'a, 'll, 'tcx> + IntrinsicCallMethods<'a, 'll, 'tcx> +\r\n    AsmBuilderMethods<'a, 'll, 'tcx>\r\n    where &'a Self::CodegenCx :\r\n        LayoutOf<Ty = Ty<'tcx>, TyLayout = TyLayout<'tcx>> + HasTyCtxt<'tcx>\r\n{\r\n    fn new_block<'b>(\r\n        cx: &'a Self::CodegenCx,\r\n        llfn: <Self::CodegenCx as Backend<'ll>>::Value,\r\n        name: &'b str\r\n    ) -> Self;\r\n    /* ... */\r\n    fn cond_br(\r\n        &mut self,\r\n        cond: <Self::CodegenCx as Backend<'ll>>::Value,\r\n        then_llbb: <Self::CodegenCx as Backend<'ll>>::BasicBlock,\r\n        else_llbb: <Self::CodegenCx as Backend<'ll>>::BasicBlock,\r\n    );\r\n    /* ... */\r\n}\r\n```\r\n\r\nFinally, a master structure implementing the `ExtraBackendMethods` trait is used for high-level codegen-driving functions like `codegen_crate` in `base.rs`. For LLVM, it is the empty `LlvmCodegenBackend`. `ExtraBackendMethods` should be implemented by the same structure that implements the `CodegenBackend` defined in `rustc_codegen_utils/codegen_backend.rs`.\r\n\r\nDuring the traitification process, certain functions have been converted from methods of a local structure to methods of `CodegenCx` or `Builder` and a corresponding `self` parameter has been added. Indeed, LLVM stores information internally that it can access when called through its API. This information does not show up in a Rust data structure carried around when these methods are called. However, when implementing a Rust backend for `rustc`, these methods will need information from `CodegenCx`, hence the additional parameter (unused in the LLVM implementation of the trait).\r\n\r\n## State of the code after the refactoring\r\n\r\nThe traits offer an API which is very similar to the API of LLVM. This is not the best solution since LLVM has a very special way of doing things: when addding another backend, the traits definition might be changed in order to offer more flexibility.\r\n\r\nHowever, the current separation between backend-agnostic and LLVM-specific code has allows the reuse of a significant part of the old `rustc_codegen_llvm`. Here is the new LOC breakdown between backend-agnostic (BA) and LLVM for the most important elements:\r\n\r\n* `back` folder: 3,800 (BA) vs 4,100 (LLVM);\r\n* `mir` folder: 4,400 (BA) vs 0 (LLVM);\r\n* `base.rs`: 1,100 (BA) vs 250 (LLVM);\r\n* `builder.rs`: 1,400 (BA) vs 0 (LLVM);\r\n* `common.rs`: 350 (BA) vs 350 (LLVM);\r\n\r\nThe `debuginfo` folder has been left almost untouched by the splitting and is specific to LLVM. Only its high-level features have been traitified.\r\n\r\nThe new `interfaces` folder has 1500 LOC only for trait definitions. Overall, the 27,000 LOC-sized old `rustc_codegen_llvm` code has been split into the new 18,500 LOC-sized new `rustc_codegen_llvm` and the 12,000 LOC-sized `rustc_codegen_ssa`. We can say that this refactoring allowed the reuse of approximately 10,000 LOC that would otherwise have had to be duplicated between the multiple backends of `rustc`.\r\n\r\nThe refactored version of `rustc`'s backend introduced no regression over the test suite nor in performance benchmark, which is in coherence with the nature of the refactoring that used only compile-time parametricity (no trait objects).\r\n\r\nOne test is failing after the refactoring : `src/test/run-pass/thinlto/thin-lto-inlines.rs`. It tests whether ThinLTO inlining is working via the indirect property that two raw function pointers are equal. This regression happens after the splitting of the `back` folder introduced by the commit \"Separating the back folder between backend-agnostic and LLVM-specifc code\". I double-checked that I did not alter the logic of the code when doing the splitting and it seems not, so maybe this is a more subtle LLVM ThinLTO bug like https://github.com/rust-lang/rust/issues/53912.\r\n", "created_at": "2018-09-06T22:11:00Z", "updated_at": "2018-11-04T17:36:31Z", "closed_at": "2018-11-04T17:36:31Z", "merged_at": null, "merge_commit_sha": "73fd22e73bc49d36434850278f022aa785ae5581", "assignee": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 583426710, "node_id": "MDU6TGFiZWw1ODM0MjY3MTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-waiting-on-review", "name": "S-waiting-on-review", "color": "d3dddd", "default": false, "description": "Status: Awaiting review from the assignee but also interested parties."}], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/54012/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/54012/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54012/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/1cdea08ebe9f7dc93262e476e01be71185642157", "head": {"label": "denismerigoux:cg-llvm-gen", "ref": "cg-llvm-gen", "sha": "1cdea08ebe9f7dc93262e476e01be71185642157", "user": {"login": "denismerigoux", "id": 1766128, "node_id": "MDQ6VXNlcjE3NjYxMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1766128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denismerigoux", "html_url": "https://github.com/denismerigoux", "followers_url": "https://api.github.com/users/denismerigoux/followers", "following_url": "https://api.github.com/users/denismerigoux/following{/other_user}", "gists_url": "https://api.github.com/users/denismerigoux/gists{/gist_id}", "starred_url": "https://api.github.com/users/denismerigoux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denismerigoux/subscriptions", "organizations_url": "https://api.github.com/users/denismerigoux/orgs", "repos_url": "https://api.github.com/users/denismerigoux/repos", "events_url": "https://api.github.com/users/denismerigoux/events{/privacy}", "received_events_url": "https://api.github.com/users/denismerigoux/received_events", "type": "User", "site_admin": false}, "repo": {"id": 138780061, "node_id": "MDEwOlJlcG9zaXRvcnkxMzg3ODAwNjE=", "name": "rust", "full_name": "denismerigoux/rust", "private": false, "owner": {"login": "denismerigoux", "id": 1766128, "node_id": "MDQ6VXNlcjE3NjYxMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1766128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denismerigoux", "html_url": "https://github.com/denismerigoux", "followers_url": "https://api.github.com/users/denismerigoux/followers", "following_url": "https://api.github.com/users/denismerigoux/following{/other_user}", "gists_url": "https://api.github.com/users/denismerigoux/gists{/gist_id}", "starred_url": "https://api.github.com/users/denismerigoux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denismerigoux/subscriptions", "organizations_url": "https://api.github.com/users/denismerigoux/orgs", "repos_url": "https://api.github.com/users/denismerigoux/repos", "events_url": "https://api.github.com/users/denismerigoux/events{/privacy}", "received_events_url": "https://api.github.com/users/denismerigoux/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/denismerigoux/rust", "description": "A safe, concurrent, practical language.", "fork": true, "url": "https://api.github.com/repos/denismerigoux/rust", "forks_url": "https://api.github.com/repos/denismerigoux/rust/forks", "keys_url": "https://api.github.com/repos/denismerigoux/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/denismerigoux/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/denismerigoux/rust/teams", "hooks_url": "https://api.github.com/repos/denismerigoux/rust/hooks", "issue_events_url": "https://api.github.com/repos/denismerigoux/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/denismerigoux/rust/events", "assignees_url": "https://api.github.com/repos/denismerigoux/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/denismerigoux/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/denismerigoux/rust/tags", "blobs_url": "https://api.github.com/repos/denismerigoux/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/denismerigoux/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/denismerigoux/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/denismerigoux/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/denismerigoux/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/denismerigoux/rust/languages", "stargazers_url": "https://api.github.com/repos/denismerigoux/rust/stargazers", "contributors_url": "https://api.github.com/repos/denismerigoux/rust/contributors", "subscribers_url": "https://api.github.com/repos/denismerigoux/rust/subscribers", "subscription_url": "https://api.github.com/repos/denismerigoux/rust/subscription", "commits_url": "https://api.github.com/repos/denismerigoux/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/denismerigoux/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/denismerigoux/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/denismerigoux/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/denismerigoux/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/denismerigoux/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/denismerigoux/rust/merges", "archive_url": "https://api.github.com/repos/denismerigoux/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/denismerigoux/rust/downloads", "issues_url": "https://api.github.com/repos/denismerigoux/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/denismerigoux/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/denismerigoux/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/denismerigoux/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/denismerigoux/rust/labels{/name}", "releases_url": "https://api.github.com/repos/denismerigoux/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/denismerigoux/rust/deployments", "created_at": "2018-06-26T18:52:25Z", "updated_at": "2021-06-03T07:28:43Z", "pushed_at": "2021-06-03T07:28:36Z", "git_url": "git://github.com/denismerigoux/rust.git", "ssh_url": "git@github.com:denismerigoux/rust.git", "clone_url": "https://github.com/denismerigoux/rust.git", "svn_url": "https://github.com/denismerigoux/rust", "homepage": "https://www.rust-lang.org", "size": 640627, "stargazers_count": 0, "watchers_count": 0, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "rust-lang:master", "ref": "master", "sha": "d74b40205f7ecf30c680dc77e62cf4f127f2db09", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-20T08:05:17Z", "pushed_at": "2023-06-20T08:42:32Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 930628, "stargazers_count": 82767, "watchers_count": 82767, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10964, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9624, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10964, "open_issues": 9624, "watchers": 82767, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/54012"}, "html": {"href": "https://github.com/rust-lang/rust/pull/54012"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/54012"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/54012/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/54012/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/54012/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/1cdea08ebe9f7dc93262e476e01be71185642157"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": null, "comments": 32, "review_comments": 1, "maintainer_can_modify": false, "commits": 76, "additions": 11274, "deletions": 8065, "changed_files": 76}