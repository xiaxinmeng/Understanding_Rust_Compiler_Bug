{"url": "https://api.github.com/repos/rust-lang/rust/pulls/3069", "id": 1941184, "node_id": "MDExOlB1bGxSZXF1ZXN0MTk0MTE4NA==", "html_url": "https://github.com/rust-lang/rust/pull/3069", "diff_url": "https://github.com/rust-lang/rust/pull/3069.diff", "patch_url": "https://github.com/rust-lang/rust/pull/3069.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/3069", "number": 3069, "state": "closed", "locked": false, "title": "std::net::url - adding encoding/decoding of components and forms (from erickt/rust-uri) and more compliant parsing", "user": {"login": "dbp", "id": 569509, "node_id": "MDQ6VXNlcjU2OTUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/569509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbp", "html_url": "https://github.com/dbp", "followers_url": "https://api.github.com/users/dbp/followers", "following_url": "https://api.github.com/users/dbp/following{/other_user}", "gists_url": "https://api.github.com/users/dbp/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbp/subscriptions", "organizations_url": "https://api.github.com/users/dbp/orgs", "repos_url": "https://api.github.com/users/dbp/repos", "events_url": "https://api.github.com/users/dbp/events{/privacy}", "received_events_url": "https://api.github.com/users/dbp/received_events", "type": "User", "site_admin": false}, "body": "This includes both a merge of @erickt's url / form encoding/decoding code into net::url and a bunch of work to make the parsing a lot more robust. It (obviously) builds off of the rough draft that I wrote a couple weeks ago. In particular, it now actually follows the RFC in terms of what characters are allowed where, as far as I am aware. It also produces error messages when invalid urls are encountered (they could probably use improvement).\n\nIn terms of reading the diff, the first couple hundred lines are @erickt's encoding/decoding code, with the only changes being some naming and type updates (mainly using @~strs instead of @strs). The core of the new code is in the get_\\* functions - which do the parsing of various components; only get_authority has significant logic in it (which is primarily caused by the use of ':' in the spec - it can separate a user from password, parts of an ipv6 host, or a host from a port). And of course `from_str` was rewritten to use this new code; it serves as a guide of the order things happen in (and the names follow the convention in the RFC).\n\nFinally, there are a bunch of new tests - all the ones from @erickt's repo for encoding/decoding, and some to test individual component parsing and some more full url tests.\n\n@brson made some changes to the type of query a couple days ago to make it sendable - presumably those changes should also be made to the encoding/decoding functions for forms, but I'm not sure how it would be best to handle it (straight vectors/tuples, or something else?), and I wanted to have erickt's code mostly intact for this pull request (to try to keep the new code limited). \n\n(I have run the local tests and the lint check from make check - I'm running the full make check now, but it takes forever on my slow machine and since this code is not used anywhere as far as I know, I doubt there would be anything elsewhere that could cause a failure; if there is, I will obviously update this).\n", "created_at": "2012-08-01T03:35:01Z", "updated_at": "2014-07-28T02:51:03Z", "closed_at": "2012-08-03T18:44:36Z", "merged_at": null, "merge_commit_sha": "aab714ad9ca22d2fd9811c076e339f350d0ce028", "assignee": null, "assignees": [], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/3069/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/3069/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3069/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/3301bf048c4ec612219c9a084ec2720cb9212f68", "head": {"label": "dbp:url", "ref": "url", "sha": "3301bf048c4ec612219c9a084ec2720cb9212f68", "user": {"login": "dbp", "id": 569509, "node_id": "MDQ6VXNlcjU2OTUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/569509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbp", "html_url": "https://github.com/dbp", "followers_url": "https://api.github.com/users/dbp/followers", "following_url": "https://api.github.com/users/dbp/following{/other_user}", "gists_url": "https://api.github.com/users/dbp/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbp/subscriptions", "organizations_url": "https://api.github.com/users/dbp/orgs", "repos_url": "https://api.github.com/users/dbp/repos", "events_url": "https://api.github.com/users/dbp/events{/privacy}", "received_events_url": "https://api.github.com/users/dbp/received_events", "type": "User", "site_admin": false}, "repo": {"id": 4932133, "node_id": "MDEwOlJlcG9zaXRvcnk0OTMyMTMz", "name": "rust", "full_name": "dbp/rust", "private": false, "owner": {"login": "dbp", "id": 569509, "node_id": "MDQ6VXNlcjU2OTUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/569509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbp", "html_url": "https://github.com/dbp", "followers_url": "https://api.github.com/users/dbp/followers", "following_url": "https://api.github.com/users/dbp/following{/other_user}", "gists_url": "https://api.github.com/users/dbp/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbp/subscriptions", "organizations_url": "https://api.github.com/users/dbp/orgs", "repos_url": "https://api.github.com/users/dbp/repos", "events_url": "https://api.github.com/users/dbp/events{/privacy}", "received_events_url": "https://api.github.com/users/dbp/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/dbp/rust", "description": "a safe, concurrent, practical language", "fork": true, "url": "https://api.github.com/repos/dbp/rust", "forks_url": "https://api.github.com/repos/dbp/rust/forks", "keys_url": "https://api.github.com/repos/dbp/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/dbp/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/dbp/rust/teams", "hooks_url": "https://api.github.com/repos/dbp/rust/hooks", "issue_events_url": "https://api.github.com/repos/dbp/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/dbp/rust/events", "assignees_url": "https://api.github.com/repos/dbp/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/dbp/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/dbp/rust/tags", "blobs_url": "https://api.github.com/repos/dbp/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/dbp/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/dbp/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/dbp/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/dbp/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/dbp/rust/languages", "stargazers_url": "https://api.github.com/repos/dbp/rust/stargazers", "contributors_url": "https://api.github.com/repos/dbp/rust/contributors", "subscribers_url": "https://api.github.com/repos/dbp/rust/subscribers", "subscription_url": "https://api.github.com/repos/dbp/rust/subscription", "commits_url": "https://api.github.com/repos/dbp/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/dbp/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/dbp/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/dbp/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/dbp/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/dbp/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/dbp/rust/merges", "archive_url": "https://api.github.com/repos/dbp/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/dbp/rust/downloads", "issues_url": "https://api.github.com/repos/dbp/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/dbp/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/dbp/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/dbp/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/dbp/rust/labels{/name}", "releases_url": "https://api.github.com/repos/dbp/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/dbp/rust/deployments", "created_at": "2012-07-06T22:55:39Z", "updated_at": "2014-06-16T21:56:02Z", "pushed_at": "2012-11-05T04:34:05Z", "git_url": "git://github.com/dbp/rust.git", "ssh_url": "git@github.com:dbp/rust.git", "clone_url": "https://github.com/dbp/rust.git", "svn_url": "https://github.com/dbp/rust", "homepage": "http://www.rust-lang.org", "size": 36110, "stargazers_count": 1, "watchers_count": 1, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": true, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 1, "default_branch": "master"}}, "base": {"label": "rust-lang:incoming", "ref": "incoming", "sha": "c9c3a49bfccf03e53f70cfaaaa85a622c50e5d2b", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-19T06:22:53Z", "pushed_at": "2023-06-19T06:22:45Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 919635, "stargazers_count": 82735, "watchers_count": 82735, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10953, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9628, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10953, "open_issues": 9628, "watchers": 82735, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/3069"}, "html": {"href": "https://github.com/rust-lang/rust/pull/3069"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/3069"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/3069/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/3069/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/3069/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/3301bf048c4ec612219c9a084ec2720cb9212f68"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": null, "comments": 3, "review_comments": 0, "maintainer_can_modify": false, "commits": 16, "additions": 792, "deletions": 48, "changed_files": 1}