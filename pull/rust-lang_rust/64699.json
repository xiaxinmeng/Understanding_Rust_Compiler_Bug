{"url": "https://api.github.com/repos/rust-lang/rust/pulls/64699", "id": 320118786, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIwMTE4Nzg2", "html_url": "https://github.com/rust-lang/rust/pull/64699", "diff_url": "https://github.com/rust-lang/rust/pull/64699.diff", "patch_url": "https://github.com/rust-lang/rust/pull/64699.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/64699", "number": 64699, "state": "closed", "locked": false, "title": "[WIP] Attempting to handle case insensitive case.", "user": {"login": "avborhanian", "id": 1761237, "node_id": "MDQ6VXNlcjE3NjEyMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1761237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avborhanian", "html_url": "https://github.com/avborhanian", "followers_url": "https://api.github.com/users/avborhanian/followers", "following_url": "https://api.github.com/users/avborhanian/following{/other_user}", "gists_url": "https://api.github.com/users/avborhanian/gists{/gist_id}", "starred_url": "https://api.github.com/users/avborhanian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avborhanian/subscriptions", "organizations_url": "https://api.github.com/users/avborhanian/orgs", "repos_url": "https://api.github.com/users/avborhanian/repos", "events_url": "https://api.github.com/users/avborhanian/events{/privacy}", "received_events_url": "https://api.github.com/users/avborhanian/received_events", "type": "User", "site_admin": false}, "body": "This is an attempt at dealing with #25879.\r\n\r\nBasically ensure_dir and item_path both now use a map to identify what path to use where it's like \r\n```\r\n{\r\n    lower_case_path_to_item: {\r\n         original_path: correct_value_to_use\r\n    }\r\n}\r\n```\r\nIf the item isn't in the map, then we can use the original location. If something already points to that location, I append a number based on how many other items are in the map to the folder name or item name, store that in the map, and then return said path / item name. ensure_dir gained a sibling function called ensure_dir_lower because if a path overlaps but it's technically a different module, we need to give a new destination to use.\r\n\r\nSo as an example of how this works, if we're seeing the situation\r\n\r\n```\r\npub struct FoO;\r\npub struct Foo;\r\n```\r\n\r\nThen the first one is entered as struct.FoO.html. The second struct Foo would be considered overlapping since they share the same lowered version, and its url becomes struct.foo.1.html. This works with the modules too, so if two modules had the same names as the structs above, we'd see a folder created for foo and foo.1\r\n\r\nThings I have questions about:\r\n1. Is there a better naming method to use? I know Windows generally does things as \" (1)\", but don't know what would be appropriate for the web.\r\n\r\n2. Should I potentially be using different variables for things like cached_dir?\r\nI had to wrap cached_dir with a mutex because I wanted to make sure we didn't run into a situation with parallelization where two overlapping paths check and see if the folder path had been created, see it hasn't, and then both create the same path. But that mutex would now affect the case sensitive path too. Is there a better way of locking just the lowered version of the function, or maybe another way of handling that situation in general?\r\n\r\n3. The way I have to build the new url in `fn append` feels pretty inefficient, and didn't know if there was a better way of handling it.\r\n\r\nAlso definitely need to update that option to not always be true.", "created_at": "2019-09-23T03:44:08Z", "updated_at": "2020-09-20T00:55:24Z", "closed_at": "2019-09-27T03:06:53Z", "merged_at": null, "merge_commit_sha": "94403026813769fbca63c4d3005e9de124b2782e", "assignee": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 583436937, "node_id": "MDU6TGFiZWw1ODM0MzY5Mzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-waiting-on-author", "name": "S-waiting-on-author", "color": "d3dddd", "default": false, "description": "Status: This is awaiting some action (such as code changes or more information) from the author."}], "milestone": null, "draft": true, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/64699/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/64699/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/64699/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/a14aee0b46a5c29a9ae3dd2bb47992a883fbfff1", "head": {"label": "avborhanian:master", "ref": "master", "sha": "a14aee0b46a5c29a9ae3dd2bb47992a883fbfff1", "user": {"login": "avborhanian", "id": 1761237, "node_id": "MDQ6VXNlcjE3NjEyMzc=", "avatar_url": "https://avatars.githubusercontent.com/u/1761237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avborhanian", "html_url": "https://github.com/avborhanian", "followers_url": "https://api.github.com/users/avborhanian/followers", "following_url": "https://api.github.com/users/avborhanian/following{/other_user}", "gists_url": "https://api.github.com/users/avborhanian/gists{/gist_id}", "starred_url": "https://api.github.com/users/avborhanian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avborhanian/subscriptions", "organizations_url": "https://api.github.com/users/avborhanian/orgs", "repos_url": "https://api.github.com/users/avborhanian/repos", "events_url": "https://api.github.com/users/avborhanian/events{/privacy}", "received_events_url": "https://api.github.com/users/avborhanian/received_events", "type": "User", "site_admin": false}, "repo": null}, "base": {"label": "rust-lang:master", "ref": "master", "sha": "0b1521ffb73133999c378c434b41046d673377d9", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-19T14:15:21Z", "pushed_at": "2023-06-19T13:59:09Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 920473, "stargazers_count": 82749, "watchers_count": 82749, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10956, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9634, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10956, "open_issues": 9634, "watchers": 82749, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/64699"}, "html": {"href": "https://github.com/rust-lang/rust/pull/64699"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/64699"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/64699/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/64699/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/64699/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/a14aee0b46a5c29a9ae3dd2bb47992a883fbfff1"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 8, "review_comments": 0, "maintainer_can_modify": false, "commits": 5, "additions": 368, "deletions": 534, "changed_files": 45}