{"url": "https://api.github.com/repos/rust-lang/rust/pulls/100969", "id": 1035914312, "node_id": "PR_kwDOAAsO6M49vsxI", "html_url": "https://github.com/rust-lang/rust/pull/100969", "diff_url": "https://github.com/rust-lang/rust/pull/100969.diff", "patch_url": "https://github.com/rust-lang/rust/pull/100969.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/100969", "number": 100969, "state": "open", "locked": false, "title": "lower baseline for i686 on unixlike targets", "user": {"login": "goshhhy", "id": 37872995, "node_id": "MDQ6VXNlcjM3ODcyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37872995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goshhhy", "html_url": "https://github.com/goshhhy", "followers_url": "https://api.github.com/users/goshhhy/followers", "following_url": "https://api.github.com/users/goshhhy/following{/other_user}", "gists_url": "https://api.github.com/users/goshhhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/goshhhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goshhhy/subscriptions", "organizations_url": "https://api.github.com/users/goshhhy/orgs", "repos_url": "https://api.github.com/users/goshhhy/repos", "events_url": "https://api.github.com/users/goshhhy/events{/privacy}", "received_events_url": "https://api.github.com/users/goshhhy/received_events", "type": "User", "site_admin": false}, "body": "experimental, draft PR for rust-lang/compiler-team#548\r\n\r\nthis commit lowers the baseline for i686 from 'pentium4' to 'pentiumpro'\r\non the following targets to match their expected baseline for i686:\r\n\r\n- i686-unknown-linux-gnu\r\n- i686-unknown-linux-musl\r\n- i686-unknown-freebsd\r\n- i686-unknown-openbsd\r\n- i686-unknown-netbsd\r\n- i686-unknown-haiku\r\n\r\nthe pentium4 is not i686-class, and setting it as baseline results\r\nin Rust using SSE2, which i686-class processors never had. this\r\nchange enables users of these platforms, with their expected\r\nbaseline, to use the upstream Rust host tools, and binaries built\r\nfor their platform. I fall into this category of users.\r\n\r\nat least Debian and Gentoo have issues relating to this, and at least\r\nDebian and FreeBSD patch Rust in order to make a similar change and\r\nenable Rust to work correctly on their expected baseline. Users with\r\ni686 hardware running distributions that do not distribute their own\r\nmodified toolchain are left unable to use Rust or software written\r\nin it. as an aside, Rust is now a de-facto requirement to have a usable\r\nGNU/Linux installation with a GUI.\r\n\r\nRust has an existing issue rust-lang/rust#82435, which this patch\r\nresolves; this patch also obviates the need for the MCP i filed as\r\nrust-lang/compiler-team#543.\r\n\r\nNetBSD (and i believe OpenBSD) normally targets i486 where possible,\r\nand i586 where atomics make that difficult (which includes all Rust\r\nprograms); if targeting i686, these operating systems would also\r\nexpect a lower baseline than pentium4.\r\n\r\nHaiku normally targets i586, but would also expect a lower baseline\r\nthan pentium4 for an i686 target.\r\n\r\nDistributions such as Fedora which do not have a 32-bit version and\r\nonly use i686 for multilib can easily alter their build system to\r\nenable SSE2, to match their expected baseline of x86_64 processors\r\nrunning in 32-bit compatibility mode (all of which have SSE2).\r\n@cuviper has expressed willingness to make this patch in Fedora.\r\n\r\nTargets not changed are left as-is for the following reasons:\r\n\r\n- Rust supports no earlier than Windows 7; Windows 7 and later all\r\n  require SSE2, and so a minimum of Pentium 4 or similar.\r\n- UEFI was not introduced until 2004 and not common until ~2011,\r\n  well after the Pentium 4's heyday, and does not self-host\r\n- I am aware of no scenario under which VxWorks would be running\r\n  on a 32-bit x86 processor with a lower featureset than pentium4,\r\n  unless it is a Vortex86, which is i586-class. even then, these\r\n  would not be compiling programs for themselves, and the party\r\n  building programs for that platform would have the ability to\r\n  set target flags that make sense for their situation.", "created_at": "2022-08-24T19:39:32Z", "updated_at": "2023-05-16T13:41:13Z", "closed_at": null, "merged_at": null, "merge_commit_sha": "9601ae8e2693f720c82d2c600fc01c7e052f8383", "assignee": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 583436937, "node_id": "MDU6TGFiZWw1ODM0MzY5Mzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-waiting-on-author", "name": "S-waiting-on-author", "color": "d3dddd", "default": false, "description": "Status: This is awaiting some action (such as code changes or more information) from the author."}], "milestone": null, "draft": true, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/100969/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/100969/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100969/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/1778dc4f190fc7db338c11e6e05a623b5fadaaba", "head": {"label": "goshhhy:master", "ref": "master", "sha": "1778dc4f190fc7db338c11e6e05a623b5fadaaba", "user": {"login": "goshhhy", "id": 37872995, "node_id": "MDQ6VXNlcjM3ODcyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37872995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goshhhy", "html_url": "https://github.com/goshhhy", "followers_url": "https://api.github.com/users/goshhhy/followers", "following_url": "https://api.github.com/users/goshhhy/following{/other_user}", "gists_url": "https://api.github.com/users/goshhhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/goshhhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goshhhy/subscriptions", "organizations_url": "https://api.github.com/users/goshhhy/orgs", "repos_url": "https://api.github.com/users/goshhhy/repos", "events_url": "https://api.github.com/users/goshhhy/events{/privacy}", "received_events_url": "https://api.github.com/users/goshhhy/received_events", "type": "User", "site_admin": false}, "repo": {"id": 524218101, "node_id": "R_kgDOHz7u9Q", "name": "rust", "full_name": "goshhhy/rust", "private": false, "owner": {"login": "goshhhy", "id": 37872995, "node_id": "MDQ6VXNlcjM3ODcyOTk1", "avatar_url": "https://avatars.githubusercontent.com/u/37872995?v=4", "gravatar_id": "", "url": "https://api.github.com/users/goshhhy", "html_url": "https://github.com/goshhhy", "followers_url": "https://api.github.com/users/goshhhy/followers", "following_url": "https://api.github.com/users/goshhhy/following{/other_user}", "gists_url": "https://api.github.com/users/goshhhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/goshhhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/goshhhy/subscriptions", "organizations_url": "https://api.github.com/users/goshhhy/orgs", "repos_url": "https://api.github.com/users/goshhhy/repos", "events_url": "https://api.github.com/users/goshhhy/events{/privacy}", "received_events_url": "https://api.github.com/users/goshhhy/received_events", "type": "User", "site_admin": false}, "html_url": "https://github.com/goshhhy/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": true, "url": "https://api.github.com/repos/goshhhy/rust", "forks_url": "https://api.github.com/repos/goshhhy/rust/forks", "keys_url": "https://api.github.com/repos/goshhhy/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/goshhhy/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/goshhhy/rust/teams", "hooks_url": "https://api.github.com/repos/goshhhy/rust/hooks", "issue_events_url": "https://api.github.com/repos/goshhhy/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/goshhhy/rust/events", "assignees_url": "https://api.github.com/repos/goshhhy/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/goshhhy/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/goshhhy/rust/tags", "blobs_url": "https://api.github.com/repos/goshhhy/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/goshhhy/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/goshhhy/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/goshhhy/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/goshhhy/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/goshhhy/rust/languages", "stargazers_url": "https://api.github.com/repos/goshhhy/rust/stargazers", "contributors_url": "https://api.github.com/repos/goshhhy/rust/contributors", "subscribers_url": "https://api.github.com/repos/goshhhy/rust/subscribers", "subscription_url": "https://api.github.com/repos/goshhhy/rust/subscription", "commits_url": "https://api.github.com/repos/goshhhy/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/goshhhy/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/goshhhy/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/goshhhy/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/goshhhy/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/goshhhy/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/goshhhy/rust/merges", "archive_url": "https://api.github.com/repos/goshhhy/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/goshhhy/rust/downloads", "issues_url": "https://api.github.com/repos/goshhhy/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/goshhhy/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/goshhhy/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/goshhhy/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/goshhhy/rust/labels{/name}", "releases_url": "https://api.github.com/repos/goshhhy/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/goshhhy/rust/deployments", "created_at": "2022-08-12T20:36:22Z", "updated_at": "2022-08-24T19:37:16Z", "pushed_at": "2023-03-04T01:10:20Z", "git_url": "git://github.com/goshhhy/rust.git", "ssh_url": "git@github.com:goshhhy/rust.git", "clone_url": "https://github.com/goshhhy/rust.git", "svn_url": "https://github.com/goshhhy/rust", "homepage": "https://www.rust-lang.org", "size": 1070266, "stargazers_count": 0, "watchers_count": 0, "language": "Rust", "has_issues": false, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 0, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 0, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": [], "visibility": "public", "forks": 0, "open_issues": 0, "watchers": 0, "default_branch": "master"}}, "base": {"label": "rust-lang:master", "ref": "master", "sha": "999ac5f7770bff68bd65f490990d32c3ec1faaa6", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-20T05:47:10Z", "pushed_at": "2023-06-20T05:58:11Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 930404, "stargazers_count": 82764, "watchers_count": 82764, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10964, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9622, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10964, "open_issues": 9622, "watchers": 82764, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/100969"}, "html": {"href": "https://github.com/rust-lang/rust/pull/100969"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/100969"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/100969/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/100969/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/100969/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/1778dc4f190fc7db338c11e6e05a623b5fadaaba"}}, "author_association": "NONE", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 4, "review_comments": 0, "maintainer_can_modify": true, "commits": 1, "additions": 6, "deletions": 6, "changed_files": 6}