{"url": "https://api.github.com/repos/rust-lang/rust/pulls/76098", "id": 475853748, "node_id": "MDExOlB1bGxSZXF1ZXN0NDc1ODUzNzQ4", "html_url": "https://github.com/rust-lang/rust/pull/76098", "diff_url": "https://github.com/rust-lang/rust/pull/76098.diff", "patch_url": "https://github.com/rust-lang/rust/pull/76098.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/76098", "number": 76098, "state": "closed", "locked": false, "title": "Stabilize the \"IP\" feature", "user": {"login": "caass", "id": 25358963, "node_id": "MDQ6VXNlcjI1MzU4OTYz", "avatar_url": "https://avatars.githubusercontent.com/u/25358963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caass", "html_url": "https://github.com/caass", "followers_url": "https://api.github.com/users/caass/followers", "following_url": "https://api.github.com/users/caass/following{/other_user}", "gists_url": "https://api.github.com/users/caass/gists{/gist_id}", "starred_url": "https://api.github.com/users/caass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caass/subscriptions", "organizations_url": "https://api.github.com/users/caass/orgs", "repos_url": "https://api.github.com/users/caass/repos", "events_url": "https://api.github.com/users/caass/events{/privacy}", "received_events_url": "https://api.github.com/users/caass/received_events", "type": "User", "site_admin": false}, "body": "Latest Status Update: https://github.com/rust-lang/rust/pull/76098#issuecomment-760841554\r\n\r\n-----\r\n\r\nContinuation of #66584, since it seems to be dead. This is my first time contributing and I did my best to read through the rustc-dev-guide, but I'll be honest I kind of skipped around a little bit. If there's anything I need to do that hasn't been done yet in terms of process, please let me know and I'll do it \ud83d\ude04 \r\n\r\nThe old PR seemed to me (could be wrong) to be almost done, but there were two issues that were left unresolved. I [left a comment](https://github.com/rust-lang/rust/pull/66584#issuecomment-683348800) on the PR, but I'll copy/paste it here for convenience:\r\n\r\nIf I understand correctly, the blockers currently are:\r\n\r\n1. There should be some checking for IPv4 addresses mapped it IPv6 space ([comment](https://github.com/rust-lang/rust/pull/66584#issuecomment-597543156))\r\n\r\n[From the RFC](https://tools.ietf.org/html/rfc4291#section-2.5.5):\r\n\r\n>    Two types of IPv6 addresses are defined that carry an IPv4 address in the low-order 32 bits of the address.  These are the \"IPv4-Compatible IPv6 address\" and the \"IPv4-mapped IPv6 address\".\r\n>\r\n> [...]\r\n>\r\n> The \"IPv4-Compatible IPv6 address\" was defined to assist in the IPv6 transition.  The format of the \"IPv4-Compatible IPv6 address\" is as follows:\r\n> \r\n> | 80 bits | 16 bits | 32 bits |\r\n> | - | - | - |\r\n> | 0000..............................0000 | 0000 | IPv4 address |\r\n> \r\n> [...]\r\n>\r\n>    A second type of IPv6 address that holds an embedded IPv4 address is defined. This address type is used to represent the addresses of IPv4 nodes as IPv6 addresses. The format of the \"IPv4-mapped IPv6 address\" is as follows:\r\n> | 80 bits | 16 bits | 32 bits |\r\n> | - | - | - |\r\n> | 0000..............................0000 | FFFF | IPv4 address |\r\n\r\nIf we already have capability to check IPv4 addresses, I feel like it's almost trivial to implement these rules for IPv6 as well if we just need to pad it with some extra bytes? Famous last words, I know...\r\n\r\n2. There's some concern over the need for both `is_unicast_link_local_strict` and `is_unicast_link_local` ([comment](https://github.com/rust-lang/rust/pull/66584#issuecomment-574036125))\r\n\r\nFrom [the commit that introduced the change](https://github.com/rust-lang/rust/commit/1f0aa4043b6051602f016b61a393ef5981b5b831):\r\n\r\n> RFC 4291 is a little unclear about what is a unicast link local address.\r\n> According to section 2.4, the entire fe80::/10 range is reserved for\r\n> these addresses, but section 2.5.3 defines a stricter format for such\r\n> addresses.\r\n>\r\n> After a [discussion](https://github.com/rust-lang/rust/issues/27709#issuecomment-400370706) is has been decided to add a different method for\r\n> each definition, so this commit:\r\n> \r\n>   - renames is_unicast_link_local() into is_unicast_link_local_strict()\r\n>   - relaxed the check in is_unicast_link_local()\r\n\r\nFrom [section 2.4](https://tools.ietf.org/html/rfc4291#section-2.4):\r\n\r\n> | Address type | Binary prefix | IPv6 notation | Section |\r\n> |-|-|-|-|\r\n> | Unspecified | 00...0 (128 bits) | ::/128 | 2.5.2 |\r\n> | Loopback | 00...1 (128 bits) | ::1/128 | 2.5.3 |\r\n> | Multicast | 11111111 | FF00::/8 | 2.7 |\r\n> | **Link-Local unicast** | **1111111010** | **FE80::/10** | **2.5.6** |\r\n> | Global Unicast | (everything else) |  |  |\r\n\r\nSection [section 2.5.3](https://tools.ietf.org/html/rfc4291#section-2.5.3) seems...unrelated? It has to do with the loopback address. [Section 2.5.6](https://tools.ietf.org/html/rfc4291#section-2.5.6) however, is where the problem lies:\r\n\r\n> Link-Local addresses are for use on a single link. Link-Local addresses have the following format:\r\n> | 10 bits | 16 bits | 64 bits |\r\n> | - | - | - |\r\n> | 1111111010 | 0 | interface ID |\r\n\r\nSo the difference in the spec is this:\r\n\r\n| Spec | CIDR | Start | End | Available |\r\n|-|-|-|-|-|\r\n| 2.4 | FE80::/10 | fe80:0:0:0:0:0:0:0 | febf:ffff:ffff:ffff:ffff:ffff:ffff:ffff | 2^118 |\r\n| 2.5.6 | FE80::/64 | fe80:0:0:0:0:0:0:0 | fe80:0:0:0:ffff:ffff:ffff:ffff | 2^64 |\r\n\r\nThis does seem like an issue, so I did some more digging to figure out what's going on. I found [this draft](https://tools.ietf.org/html/draft-petrescu-6man-ll-prefix-len-05), which appears to have [died](https://datatracker.ietf.org/doc/draft-petrescu-6man-ll-prefix-len/). It does however point us in the right direction:\r\n\r\n>    The RFC \"IPv6 Address Archi\" illustrates the format of the link-local addresses.  From the illustration it MAY be understood that the length of the link-local prefix is 10 bits of value 1111111010 and 54 0 bits.\r\n> \r\n>    [IANA](https://www.iana.org/assignments/ipv6-address-space/ipv6-address-space.xhtml) lists the \"IPv6 prefix\", and \"Address Block\", to be \"fe80::/10\" on its website.  It is possible that in the future the IETF could decide to use the bits 11-53.\r\n> \r\n>    The [RFC 2464](https://tools.ietf.org/html/rfc2464#section-5) \"IPv6-over-Ethernet\" states that the prefix for link-local addresses is \"fe80::/64\".\r\n> \r\n>    [RFC 6874](https://tools.ietf.org/html/rfc6874#section-4), \"Representing IPv6 Zone Identifiers in Address Literals and Uniform Resource Identifiers\" specifies the link-local addresses to be under prefix \"fe80::/10\".\r\n\r\n~I'm not an expert in reading IETF material -- far from it -- but I am vaguely aware of the passage of time. Most documents  linked here that specify /64 are more recent than those specifying /10, unless I've missed some -- which is totally possible. Additionally, there are countless secondhand sources (blogs, stackoverflow, etc) online all talking about how /64 is what's commonly used.~\r\n\r\n~Again, not an expert. I posted all this info here so someone more versed than me can evaluate and decide what the best course of action is. Without further input, I'd personally go ahead with just the one `is_unicast_link_local` that validates against /64, since it's a more strict subset of /10, and if someone runs into trouble with running custom link-local addresses outside of /64 space I kind of feel like that is a problem outside the scope of the Rust programming language, and is something they should talk to their network administrator about.~\r\n\r\n***Edit: Per further discussion [here](https://github.com/rust-lang/rust/pull/76098#issuecomment-705928605) and [here](https://github.com/rust-lang/rust/pull/76098#issuecomment-706916840), I've decided to simply remove the `_strict` check to bring Rust's functionality more in line with other similar features in other languages (e.g. Go, C, Python) as well as the Linux kernel.***\r\n\r\nAt the moment, this PR is just fast-forwarding the existing work done by @little-dude to be up-to-date with rust-lang/rust. I wanted to get some confirmation that this hasn't been implemented yet in some other way / i'm not duplicating work / this feature is still needed before I get started on the code. Thanks in advance for your time! :heart:", "created_at": "2020-08-30T02:40:17Z", "updated_at": "2021-05-22T23:35:38Z", "closed_at": "2021-05-17T04:02:47Z", "merged_at": null, "merge_commit_sha": "996ca1ed01334a92b7dc64480b786903b37fa9d1", "assignee": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 223796632, "node_id": "MDU6TGFiZWwyMjM3OTY2MzI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/relnotes", "name": "relnotes", "color": "fad8c7", "default": false, "description": "Marks issues that should be documented in the release notes of the next release."}, {"id": 583436937, "node_id": "MDU6TGFiZWw1ODM0MzY5Mzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-waiting-on-author", "name": "S-waiting-on-author", "color": "d3dddd", "default": false, "description": "Status: This is awaiting some action (such as code changes or more information) from the author."}], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/76098/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/76098/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76098/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/a1d4e70aa27367f8700370478efb1f35c2d10ae9", "head": {"label": "caass:revive-66584", "ref": "revive-66584", "sha": "a1d4e70aa27367f8700370478efb1f35c2d10ae9", "user": {"login": "caass", "id": 25358963, "node_id": "MDQ6VXNlcjI1MzU4OTYz", "avatar_url": "https://avatars.githubusercontent.com/u/25358963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caass", "html_url": "https://github.com/caass", "followers_url": "https://api.github.com/users/caass/followers", "following_url": "https://api.github.com/users/caass/following{/other_user}", "gists_url": "https://api.github.com/users/caass/gists{/gist_id}", "starred_url": "https://api.github.com/users/caass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caass/subscriptions", "organizations_url": "https://api.github.com/users/caass/orgs", "repos_url": "https://api.github.com/users/caass/repos", "events_url": "https://api.github.com/users/caass/events{/privacy}", "received_events_url": "https://api.github.com/users/caass/received_events", "type": "User", "site_admin": false}, "repo": null}, "base": {"label": "rust-lang:master", "ref": "master", "sha": "1b1d85fd4cc6ace45d5ec95cd95ce2ccbe6f2e17", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-20T10:12:00Z", "pushed_at": "2023-06-20T10:13:00Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 930869, "stargazers_count": 82769, "watchers_count": 82769, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10964, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9625, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10964, "open_issues": 9625, "watchers": 82769, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/76098"}, "html": {"href": "https://github.com/rust-lang/rust/pull/76098"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/76098"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/76098/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/76098/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/76098/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/a1d4e70aa27367f8700370478efb1f35c2d10ae9"}}, "author_association": "CONTRIBUTOR", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": null, "rebaseable": null, "mergeable_state": "unknown", "merged_by": null, "comments": 54, "review_comments": 69, "maintainer_can_modify": false, "commits": 23, "additions": 3545, "deletions": 195, "changed_files": 5}