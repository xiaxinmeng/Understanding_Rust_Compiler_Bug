{"url": "https://api.github.com/repos/rust-lang/rust/pulls/26493", "id": 38200785, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgyMDA3ODU=", "html_url": "https://github.com/rust-lang/rust/pull/26493", "diff_url": "https://github.com/rust-lang/rust/pull/26493.diff", "patch_url": "https://github.com/rust-lang/rust/pull/26493.patch", "issue_url": "https://api.github.com/repos/rust-lang/rust/issues/26493", "number": 26493, "state": "closed", "locked": false, "title": "Add an alternative build system written in Rust", "user": {"login": "cl91", "id": 3608694, "node_id": "MDQ6VXNlcjM2MDg2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3608694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cl91", "html_url": "https://github.com/cl91", "followers_url": "https://api.github.com/users/cl91/followers", "following_url": "https://api.github.com/users/cl91/following{/other_user}", "gists_url": "https://api.github.com/users/cl91/gists{/gist_id}", "starred_url": "https://api.github.com/users/cl91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cl91/subscriptions", "organizations_url": "https://api.github.com/users/cl91/orgs", "repos_url": "https://api.github.com/users/cl91/repos", "events_url": "https://api.github.com/users/cl91/events{/privacy}", "received_events_url": "https://api.github.com/users/cl91/received_events", "type": "User", "site_admin": false}, "body": "This pull request adds an alternative build system written in Rust. This adds a Cargo package, `build-rust`, which will be compiled (by Cargo) before the build system itself runs throught the build process for bootstrapping the compiler.\n\nThe primary reason for this new build system, apart from being much easier to understand and to hack than the old one, is to enable building Rust under Windows outside a MSYS shell. This implements one of the items in the [tracking Windows issue](https://github.com/rust-lang/rfcs/issues/1061).\n\nWith the new build system, the only dependencies that one needs in order to compile Rust (on any platform) are:\n- `cmake` and `python2`: for building LLVM\n- `git`: for cloning the repo\n- `curl`, `tar`, and `bzip2`: for downloading and unpacking the stage0 snapshot\n- Appropriate C/C++ toolchain (such as `gcc`)\n\nThis is tested under Windows (win7-x64-mingw64), Linux (x86_64-gcc-5.0) and Darwin (x86_64-clang-3.6). In all cases the build system is able to build LLVM and all runtime libraries and bootstrap a working stage2 compiler from the stage0 snapshot.\n\nThis is only the first step towards a fully-functional build system for the Rust compiler. Below is a list of missing features/functions in the build system as it currently stands:\n- [ ] MSVC build doesn't work currently as compiler-rt cannot be compiled by MSVC (`cl` is missing a few important C99/C11 features such as `_Atomic` and `_Complex`). One solution is to use mingw (or gcc) to compile compiler-rt.\n- [ ] The build system doesn't build docs nor run compiler tests. This can be added quite easily.\n- [ ] Cross-bootstrapping is not tested and will not work.\n- [ ] The build system can only run parallel jobs for building LLVM and external libraries. It cannot parallelize building of the `rustc` compiler. To do this reliably one would need the dependency information on the various `librustc` and `libstd` crates. This is best done by converting them into Cargo packages and invoke Cargo to build them.\n\n@retep998 \n\nr? @alexcrichton \n", "created_at": "2015-06-22T05:18:23Z", "updated_at": "2015-07-09T05:10:09Z", "closed_at": "2015-06-25T02:08:24Z", "merged_at": null, "merge_commit_sha": "49596c4fd9eb464e5a9550b131a4f130dfc20bd2", "assignee": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}], "requested_reviewers": [], "requested_teams": [], "labels": [], "milestone": null, "draft": false, "commits_url": "https://api.github.com/repos/rust-lang/rust/pulls/26493/commits", "review_comments_url": "https://api.github.com/repos/rust-lang/rust/pulls/26493/comments", "review_comment_url": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26493/comments", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/d01f3dddedd823600097eac45a334fe755fb55f7", "head": {"label": "cl91:master", "ref": "master", "sha": "d01f3dddedd823600097eac45a334fe755fb55f7", "user": {"login": "cl91", "id": 3608694, "node_id": "MDQ6VXNlcjM2MDg2OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3608694?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cl91", "html_url": "https://github.com/cl91", "followers_url": "https://api.github.com/users/cl91/followers", "following_url": "https://api.github.com/users/cl91/following{/other_user}", "gists_url": "https://api.github.com/users/cl91/gists{/gist_id}", "starred_url": "https://api.github.com/users/cl91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cl91/subscriptions", "organizations_url": "https://api.github.com/users/cl91/orgs", "repos_url": "https://api.github.com/users/cl91/repos", "events_url": "https://api.github.com/users/cl91/events{/privacy}", "received_events_url": "https://api.github.com/users/cl91/received_events", "type": "User", "site_admin": false}, "repo": null}, "base": {"label": "rust-lang:master", "ref": "master", "sha": "ba7f79e9f8f2da008796ae0f8006c5cf3a24434e", "user": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "repo": {"id": 724712, "node_id": "MDEwOlJlcG9zaXRvcnk3MjQ3MTI=", "name": "rust", "full_name": "rust-lang/rust", "private": false, "owner": {"login": "rust-lang", "id": 5430905, "node_id": "MDEyOk9yZ2FuaXphdGlvbjU0MzA5MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5430905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-lang", "html_url": "https://github.com/rust-lang", "followers_url": "https://api.github.com/users/rust-lang/followers", "following_url": "https://api.github.com/users/rust-lang/following{/other_user}", "gists_url": "https://api.github.com/users/rust-lang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-lang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-lang/subscriptions", "organizations_url": "https://api.github.com/users/rust-lang/orgs", "repos_url": "https://api.github.com/users/rust-lang/repos", "events_url": "https://api.github.com/users/rust-lang/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-lang/received_events", "type": "Organization", "site_admin": false}, "html_url": "https://github.com/rust-lang/rust", "description": "Empowering everyone to build reliable and efficient software.", "fork": false, "url": "https://api.github.com/repos/rust-lang/rust", "forks_url": "https://api.github.com/repos/rust-lang/rust/forks", "keys_url": "https://api.github.com/repos/rust-lang/rust/keys{/key_id}", "collaborators_url": "https://api.github.com/repos/rust-lang/rust/collaborators{/collaborator}", "teams_url": "https://api.github.com/repos/rust-lang/rust/teams", "hooks_url": "https://api.github.com/repos/rust-lang/rust/hooks", "issue_events_url": "https://api.github.com/repos/rust-lang/rust/issues/events{/number}", "events_url": "https://api.github.com/repos/rust-lang/rust/events", "assignees_url": "https://api.github.com/repos/rust-lang/rust/assignees{/user}", "branches_url": "https://api.github.com/repos/rust-lang/rust/branches{/branch}", "tags_url": "https://api.github.com/repos/rust-lang/rust/tags", "blobs_url": "https://api.github.com/repos/rust-lang/rust/git/blobs{/sha}", "git_tags_url": "https://api.github.com/repos/rust-lang/rust/git/tags{/sha}", "git_refs_url": "https://api.github.com/repos/rust-lang/rust/git/refs{/sha}", "trees_url": "https://api.github.com/repos/rust-lang/rust/git/trees{/sha}", "statuses_url": "https://api.github.com/repos/rust-lang/rust/statuses/{sha}", "languages_url": "https://api.github.com/repos/rust-lang/rust/languages", "stargazers_url": "https://api.github.com/repos/rust-lang/rust/stargazers", "contributors_url": "https://api.github.com/repos/rust-lang/rust/contributors", "subscribers_url": "https://api.github.com/repos/rust-lang/rust/subscribers", "subscription_url": "https://api.github.com/repos/rust-lang/rust/subscription", "commits_url": "https://api.github.com/repos/rust-lang/rust/commits{/sha}", "git_commits_url": "https://api.github.com/repos/rust-lang/rust/git/commits{/sha}", "comments_url": "https://api.github.com/repos/rust-lang/rust/comments{/number}", "issue_comment_url": "https://api.github.com/repos/rust-lang/rust/issues/comments{/number}", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/{+path}", "compare_url": "https://api.github.com/repos/rust-lang/rust/compare/{base}...{head}", "merges_url": "https://api.github.com/repos/rust-lang/rust/merges", "archive_url": "https://api.github.com/repos/rust-lang/rust/{archive_format}{/ref}", "downloads_url": "https://api.github.com/repos/rust-lang/rust/downloads", "issues_url": "https://api.github.com/repos/rust-lang/rust/issues{/number}", "pulls_url": "https://api.github.com/repos/rust-lang/rust/pulls{/number}", "milestones_url": "https://api.github.com/repos/rust-lang/rust/milestones{/number}", "notifications_url": "https://api.github.com/repos/rust-lang/rust/notifications{?since,all,participating}", "labels_url": "https://api.github.com/repos/rust-lang/rust/labels{/name}", "releases_url": "https://api.github.com/repos/rust-lang/rust/releases{/id}", "deployments_url": "https://api.github.com/repos/rust-lang/rust/deployments", "created_at": "2010-06-16T20:39:03Z", "updated_at": "2023-06-20T08:05:17Z", "pushed_at": "2023-06-20T08:02:50Z", "git_url": "git://github.com/rust-lang/rust.git", "ssh_url": "git@github.com:rust-lang/rust.git", "clone_url": "https://github.com/rust-lang/rust.git", "svn_url": "https://github.com/rust-lang/rust", "homepage": "https://www.rust-lang.org", "size": 930628, "stargazers_count": 82767, "watchers_count": 82767, "language": "Rust", "has_issues": true, "has_projects": true, "has_downloads": true, "has_wiki": false, "has_pages": false, "has_discussions": false, "forks_count": 10964, "mirror_url": null, "archived": false, "disabled": false, "open_issues_count": 9622, "license": {"key": "other", "name": "Other", "spdx_id": "NOASSERTION", "url": null, "node_id": "MDc6TGljZW5zZTA="}, "allow_forking": true, "is_template": false, "web_commit_signoff_required": false, "topics": ["compiler", "hacktoberfest", "language", "rust"], "visibility": "public", "forks": 10964, "open_issues": 9622, "watchers": 82767, "default_branch": "master"}}, "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/26493"}, "html": {"href": "https://github.com/rust-lang/rust/pull/26493"}, "issue": {"href": "https://api.github.com/repos/rust-lang/rust/issues/26493"}, "comments": {"href": "https://api.github.com/repos/rust-lang/rust/issues/26493/comments"}, "review_comments": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/26493/comments"}, "review_comment": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/comments{/number}"}, "commits": {"href": "https://api.github.com/repos/rust-lang/rust/pulls/26493/commits"}, "statuses": {"href": "https://api.github.com/repos/rust-lang/rust/statuses/d01f3dddedd823600097eac45a334fe755fb55f7"}}, "author_association": "NONE", "auto_merge": null, "active_lock_reason": null, "merged": false, "mergeable": false, "rebaseable": false, "mergeable_state": "dirty", "merged_by": null, "comments": 18, "review_comments": 2, "maintainer_can_modify": false, "commits": 3, "additions": 2222, "deletions": 1, "changed_files": 16}