{"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97", "repository_url": "https://api.github.com/repos/Rust-GCC/gccrs", "labels_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97/labels{/name}", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97/comments", "events_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97/events", "html_url": "https://github.com/Rust-GCC/gccrs/issues/97", "id": 773721765, "node_id": "MDU6SXNzdWU3NzM3MjE3NjU=", "number": 97, "title": "GCC Rich Locations", "user": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 61372777, "node_id": "MDU6TGFiZWw2MTM3Mjc3Nw==", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 2551090364, "node_id": "MDU6TGFiZWwyNTUxMDkwMzY0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/GCC", "name": "GCC", "color": "d6d62c", "default": false, "description": ""}, {"id": 2628548177, "node_id": "MDU6TGFiZWwyNjI4NTQ4MTc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/diagnostic", "name": "diagnostic", "color": "9A6A99", "default": false, "description": "diagnostic static analysis"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-12-23T12:33:37Z", "updated_at": "2021-04-12T16:26:23Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "This relates to something I had thought about doing, but not in enough detail to open an enhancement issue. gcc supports something called \"rich locations\" in which three actual locations are encoded - a \"start\" location, a \"caret\" location, and an \"end\" location - basically like a location range with a specified value highlighted. \r\n\r\nI couldn't find the page that I thought I originally read this in, but here's a quote from [here](https://gcc.gnu.org/onlinedocs/gccint/Guidelines-for-Diagnostics.html):\r\n\r\n> As of GCC 6, ordinary locations changed from supporting just a point in the user\u2019s source code to supporting three points: the caret location, plus a start and a finish: \r\n```\r\n      a = foo && bar;\r\n          ~~~~^~~~~~\r\n          |   |    |\r\n          |   |    finish\r\n          |   caret\r\n          start\r\n```\r\n\r\nInstead of accessing `start_location` and `end_location` separately, these could be integrated into a single location value. There's also the technicality that the current definition of `get_closing_locus()` technically gets the beginning location of the last statement rather than the end location of the block (i.e. the right curly bracket), assuming that this would be the preferred behaviour. \r\n\r\nThe lexer would have to be modified to reflect this rich location system, and the parser and AST probably would have to be too (i.e. make a new location from the \"start\" location from one token and the \"end\" location of a different one). Also, the backend-independent `Location` abstraction would have to be modified to support this.\r\n\r\n_Originally posted by @SimplyTheOther in https://github.com/Rust-GCC/gccrs/pull/90#discussion_r547865061_", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/97/timeline", "performed_via_github_app": null, "state_reason": null}