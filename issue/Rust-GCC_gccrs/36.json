{"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36", "repository_url": "https://api.github.com/repos/Rust-GCC/gccrs", "labels_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36/labels{/name}", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36/comments", "events_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36/events", "html_url": "https://github.com/Rust-GCC/gccrs/issues/36", "id": 627725172, "node_id": "MDU6SXNzdWU2Mjc3MjUxNzI=", "number": 36, "title": "Link error on x86_64-pc-cygwin", "user": {"login": "fd00", "id": 1175375, "node_id": "MDQ6VXNlcjExNzUzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1175375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fd00", "html_url": "https://github.com/fd00", "followers_url": "https://api.github.com/users/fd00/followers", "following_url": "https://api.github.com/users/fd00/following{/other_user}", "gists_url": "https://api.github.com/users/fd00/gists{/gist_id}", "starred_url": "https://api.github.com/users/fd00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fd00/subscriptions", "organizations_url": "https://api.github.com/users/fd00/orgs", "repos_url": "https://api.github.com/users/fd00/repos", "events_url": "https://api.github.com/users/fd00/events{/privacy}", "received_events_url": "https://api.github.com/users/fd00/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 61372775, "node_id": "MDU6TGFiZWw2MTM3Mjc3NQ==", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-30T12:48:42Z", "updated_at": "2021-01-21T21:59:31Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Link error on x86_64-pc-cygwin occurs.\r\n\r\nIs configure option wrong?\r\nOr gcc's bug?\r\n\r\n```\r\n$ cat hello.rs\r\nfn main() {\r\n    println!(\"Hello, world!\");\r\n}\r\n\r\n$ TMPDIR=/tmp /tmp/gcc-rust/usr/local/bin/gccrs.exe -v hello.rs\r\nUsing built-in specs.\r\nCOLLECT_GCC=/tmp/gcc-rust/usr/local/bin/gccrs\r\nCOLLECT_LTO_WRAPPER=/tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/lto-wrapper.exe\r\nTarget: x86_64-pc-cygwin\r\nConfigured with: ./configure --disable-bootstrap --enable-multilib --enable-languages=c,c++,rust\r\nThread model: single\r\nSupported LTO compression algorithms: zlib zstd\r\ngcc version 10.0.0 20191127 (experimental) (GCC)\r\nCOLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64'\r\n /tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/rust1.exe hello.rs -quiet -dumpbase hello.rs -mtune=generic -march=x86-64 -auxbase hello -version -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0 -L/tmp/gcc-rust/usr/local/bin/../lib/gcc -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../.. -o /tmp/ccr9IdMy.s\r\nGNU Rust (GCC) version 10.0.0 20191127 (experimental) (x86_64-pc-cygwin)\r\n        compiled by GNU C version 9.3.0, GMP version 6.2.0, MPFR version 4.0.2-p6, MPC version 1.1.0, isl version isl-0.22.1-GMP\r\n\r\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\r\nGNU Rust (GCC) version 10.0.0 20191127 (experimental) (x86_64-pc-cygwin)\r\n        compiled by GNU C version 9.3.0, GMP version 6.2.0, MPFR version 4.0.2-p6, MPC version 1.1.0, isl version isl-0.22.1-GMP\r\n\r\nGGC heuristics: --param ggc-min-expand=30 --param ggc-min-heapsize=4096\r\nPreparing to parse files.\r\nabout to parse expr (in expr without block method)\r\nbeginning null denotation identifier handling\r\ncurrent peek token when starting path pratt parse: '!'\r\ncurrent token (just about to return path to null denotation): '!'\r\nfinished null denotation identifier path parsing - next is branching\r\nnew delim token tree parsing begun\r\nast token created with str 'Hello, world!'\r\nfinished parsing new delim token tree - peeked token is now ';' while t is ')'\r\nsuccessfully parsed macro invocation (via partial)\r\nfinished parsing null denotation\r\nnull denotation is not null - going on to left denotation\r\ninitial rbp: '0', initial lbp: '0' (for ';')\r\nsuccessfully parsed expr in parse_expr - returning\r\nsuccessfully parsed expr (in expr without block method)\r\nabout to call the impl for clone expr without block\r\nexpr to expr without block conversion didn't error\r\nexpr to expr without block conversion was successful; returning\r\nSUCCESSFULLY PARSED CRATE\r\nran register_plugins (with no body)\r\nSUCCESSFULLY REGISTERED PLUGINS\r\nstarted injection\r\nfinished injection\r\nSUCCESSFULLY FINISHED INJECTION\r\nstarted expansion\r\nfinished expansion\r\nSUCCESSFULLY FINISHED EXPANSION\r\nstarted name resolution\r\nfinished name resolution\r\nSUCCESSFULLY FINISHED RESOLUTION\r\nCOLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64'\r\n as -o /tmp/ccpwggue.o /tmp/ccr9IdMy.s\r\nCOMPILER_PATH=/tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/:/tmp/gcc-rust/usr/local/bin/../libexec/gcc/\r\nLIBRARY_PATH=/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/:/tmp/gcc-rust/usr/local/bin/../lib/gcc/:/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../../:/lib/:/usr/lib/\r\nCOLLECT_GCC_OPTIONS='-v' '-shared-libgcc' '-mtune=generic' '-march=x86-64'\r\n /tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/collect2.exe -plugin /tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/cyglto_plugin-0.dll -plugin-opt=/tmp/gcc-rust/usr/local/bin/../libexec/gcc/x86_64-pc-cygwin/10.0.0/lto-wrapper.exe -plugin-opt=-fresolution=/tmp/ccHmliAY.res -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lcygwin -plugin-opt=-pass-through=-ladvapi32 -plugin-opt=-pass-through=-lshell32 -plugin-opt=-pass-through=-luser32 -plugin-opt=-pass-through=-lkernel32 -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lgcc -m i386pep --wrap _Znwm --wrap _Znam --wrap _ZdlPv --wrap _ZdaPv --wrap _ZnwmRKSt9nothrow_t --wrap _ZnamRKSt9nothrow_t --wrap _ZdlPvRKSt9nothrow_t --wrap _ZdaPvRKSt9nothrow_t -Bdynamic --dll-search-prefix=cyg --tsaware /lib/../lib/crt0.o /tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/crtbegin.o -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0 -L/tmp/gcc-rust/usr/local/bin/../lib/gcc -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/../../.. /tmp/ccpwggue.o -lgcc_s -lgcc -lcygwin -ladvapi32 -lshell32 -luser32 -lkernel32 -lgcc_s -lgcc /lib/../lib/default-manifest.o /tmp/gcc-rust/usr/local/bin/../lib/gcc/x86_64-pc-cygwin/10.0.0/crtend.o\r\n/usr/bin/ld: /lib/../lib/libcygwin.a(libcmain.o): in function `main':\r\n/usr/src/debug/cygwin-3.1.4-1/winsup/cygwin/lib/libcmain.c:37: undefined reference to `WinMain'\r\n/usr/src/debug/cygwin-3.1.4-1/winsup/cygwin/lib/libcmain.c:37:(.text.startup+0x7f): relocation truncated to fit: R_X86_64_PC32 against undefined symbol `WinMain'\r\ncollect2: error: ld returned 1 exit status\r\n\r\n$ TMPDIR=/tmp /tmp/gcc-rust/usr/local/bin/gccrs.exe -c hello.rs\r\n$ objdump -t hello.o | grep __main\r\n$\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/36/timeline", "performed_via_github_app": null, "state_reason": null}