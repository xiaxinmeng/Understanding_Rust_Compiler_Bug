{"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129", "repository_url": "https://api.github.com/repos/Rust-GCC/gccrs", "labels_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129/labels{/name}", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129/comments", "events_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129/events", "html_url": "https://github.com/Rust-GCC/gccrs/issues/1129", "id": 1207207238, "node_id": "I_kwDOANBUbM5H9IVG", "number": 1129, "title": "Incorrect \"error: expected [[u8]] got [[u8:CAPACITY]]\"", "user": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 61372775, "node_id": "MDU6TGFiZWw2MTM3Mjc3NQ==", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/bug", "name": "bug", "color": "fc2929", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-04-18T16:20:10Z", "updated_at": "2022-04-22T10:34:54Z", "closed_at": "2022-04-22T10:34:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nI tried this code:\r\n\r\n```rust\r\npub trait Hasher {\r\n    fn finish(&self) -> u64;\r\n    fn write(&mut self, bytes: &[u8]);\r\n    fn write_u8(&mut self, i: u8) {\r\n        self.write(&[i])\r\n    }\r\n}\r\n\r\nstruct SipHasher;\r\n\r\nimpl Hasher for SipHasher {\r\n    #[inline]\r\n    fn write(&mut self, msg: &[u8]) {\r\n        loop {}\r\n    }\r\n\r\n    #[inline]\r\n    fn finish(&self) -> u64 {\r\n        0\r\n    }\r\n}\r\n```\r\n\r\nI expected to see this happen: It compiles.\r\n\r\nInstead, this happened:\r\n\r\n```\r\n<source>:5:21: error: expected [[u8]] got [[u8:CAPACITY]]\r\n    3 |     fn write(&mut self, bytes: &[u8]);\r\n      |                                 ~\r\n    4 |     fn write_u8(&mut self, i: u8) {\r\n    5 |         self.write(&[i])\r\n      |                     ^\r\n<source>:5:20: error: expected [& [u8]] got [& [u8:CAPACITY]]\r\n    3 |     fn write(&mut self, bytes: &[u8]);\r\n      |                                ~\r\n    4 |     fn write_u8(&mut self, i: u8) {\r\n    5 |         self.write(&[i])\r\n      |                    ^\r\n<source>:5:20: error: Type Resolution failure on parameter\r\n<source>:5:9: error: failed to lookup type to MethodCallExpr\r\n    5 |         self.write(&[i])\r\n      |         ^\r\n<source>:5:9: error: failed to type resolve expression\r\n<source>:4:35: error: expected [()] got [<tyty::error>]\r\n    4 |     fn write_u8(&mut self, i: u8) {\r\n      |                            ~      ^\r\nCompiler returned: 1\r\n```\r\n\r\nNote that the `Hasher` trait needs to be used to get this error. Rustc checks default method bodies even when a trait is not used.\r\n\r\n### Meta\r\n\r\n- What version of Rust GCC were you using, git sha if possible.\r\n\r\n\r\n", "closed_by": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/1129/timeline", "performed_via_github_app": null, "state_reason": "completed"}