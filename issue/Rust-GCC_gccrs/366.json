{"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366", "repository_url": "https://api.github.com/repos/Rust-GCC/gccrs", "labels_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366/labels{/name}", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366/comments", "events_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366/events", "html_url": "https://github.com/Rust-GCC/gccrs/issues/366", "id": 855404215, "node_id": "MDU6SXNzdWU4NTU0MDQyMTU=", "number": 366, "title": "Mappings improvements", "user": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 61372777, "node_id": "MDU6TGFiZWw2MTM3Mjc3Nw==", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 2591793259, "node_id": "MDU6TGFiZWwyNTkxNzkzMjU5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/good-first-pr", "name": "good-first-pr", "color": "A9A76D", "default": false, "description": ""}, {"id": 2642482874, "node_id": "MDU6TGFiZWwyNjQyNDgyODc0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/labels/cleanup", "name": "cleanup", "color": "E22959", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-04-11T20:48:42Z", "updated_at": "2023-03-01T11:47:23Z", "closed_at": "2023-03-01T11:47:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "https://github.com/Rust-GCC/gccrs/blob/edc4a9549145861a2e71c552f06e53c860e39d9a/gcc/rust/util/rust-hir-map.h#L117\r\n\r\nFor the compiler to be query-based we keep mappings to IDs for all AST nodes and Hir Mappings for all HIR trees. This means we can look up any node at any time.\r\n\r\nInstead of having to do lookup_{expr, stmt....} etc to lookup a node we should have a generic:\r\n\r\n```c++\r\nbool lookup_hir_node (CrateNum crateNum, HirId id, HIRLookupVisitor& vis);\r\n```\r\n\r\nThis should take a vistior and attempt to lookup item if that fails lookup impl item etc if no node was found return false to indicate an error in lookup.\r\n\r\nThe visitor should be something like:\r\n\r\n```c++\r\nclass HIRLookupVisitor {\r\n  void visit(HIR::Item&) = 0;\r\n  void visit(HIR::InherentImplItem&) = 0;\r\n  // fill the rest out with the available mappings we have    \r\n};\r\n```\r\n\r\nThis would be helpful for PR #365 ", "closed_by": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Rust-GCC/gccrs/issues/366/timeline", "performed_via_github_app": null, "state_reason": "completed"}