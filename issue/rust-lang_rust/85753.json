{"url": "https://api.github.com/repos/rust-lang/rust/issues/85753", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/85753/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/85753/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/85753/events", "html_url": "https://github.com/rust-lang/rust/issues/85753", "id": 903966345, "node_id": "MDU6SXNzdWU5MDM5NjYzNDU=", "number": 85753, "title": "Lints for target_* cfg", "user": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-27T16:28:10Z", "updated_at": "2022-12-16T07:08:38Z", "closed_at": "2022-12-16T07:08:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Inspired by seeing #85738 fixing a typo by replacing `target_os = \"opensbd\"` with `target_os = \"openbsd\"`.\r\n\r\nI wonder whether cases like this could be discovered by lints. There are multiple [`target_*` values that rustc sets](https://doc.rust-lang.org/reference/conditional-compilation.html#set-configuration-options), and it would be interesting to think about validating them.\r\n\r\nRust has support for custom target json files, and ideally you would want to have older rustc versions not warn about code supporting targets added by future rustc versoins, making a warn-by-default lint that complains about any non-builtin `target_*` value a bit tricky.\r\n\r\nHowever, one could think about an allow-by-default `non_builtin_target_cfg` lint, as well as a warn-by-default `target_cfg_typo` lint that checks for targets in a close edit distance to a builtin target. If you enable the `non_builtin_target_cfg` lint, maybe the `target_cfg_typo` could be silenced.\r\n\r\nAs prior art I [was only able to find a clippy lint](https://github.com/rust-lang/rust-clippy/issues/3949).", "closed_by": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/85753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/85753/timeline", "performed_via_github_app": null, "state_reason": "completed"}