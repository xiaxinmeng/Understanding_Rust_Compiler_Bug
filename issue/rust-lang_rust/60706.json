{"url": "https://api.github.com/repos/rust-lang/rust/issues/60706", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60706/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60706/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60706/events", "html_url": "https://github.com/rust-lang/rust/issues/60706", "id": 442805629, "node_id": "MDU6SXNzdWU0NDI4MDU2Mjk=", "number": 60706, "title": "Request: Format change for doc test cli output", "user": {"login": "phrohdoh", "id": 4861023, "node_id": "MDQ6VXNlcjQ4NjEwMjM=", "avatar_url": "https://avatars.githubusercontent.com/u/4861023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phrohdoh", "html_url": "https://github.com/phrohdoh", "followers_url": "https://api.github.com/users/phrohdoh/followers", "following_url": "https://api.github.com/users/phrohdoh/following{/other_user}", "gists_url": "https://api.github.com/users/phrohdoh/gists{/gist_id}", "starred_url": "https://api.github.com/users/phrohdoh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phrohdoh/subscriptions", "organizations_url": "https://api.github.com/users/phrohdoh/orgs", "repos_url": "https://api.github.com/users/phrohdoh/repos", "events_url": "https://api.github.com/users/phrohdoh/events{/privacy}", "received_events_url": "https://api.github.com/users/phrohdoh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 630810559, "node_id": "MDU6TGFiZWw2MzA4MTA1NTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-libtest", "name": "A-libtest", "color": "f7e101", "default": false, "description": "Area: #[test] related"}, {"id": 1118559391, "node_id": "MDU6TGFiZWwxMTE4NTU5Mzkx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-doctests", "name": "A-doctests", "color": "f7e101", "default": false, "description": "Area: Documentation tests, run by rustdoc"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-10T16:44:59Z", "updated_at": "2019-05-10T20:47:20Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "_Originally filed at https://github.com/rust-lang/cargo/issues/6927_\r\n\r\n---\r\n\r\nWhen running `cargo test` on a project with some doc tests I see the following output:\r\n\r\n```\r\n$ cargo test   \r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.06s\r\n     Running target/debug/deps/tq_parser-9edae091aa940c1c\r\n\r\nrunning 1 test\r\ntest tokenizer::tests::string_literal::simple ... ok\r\n\r\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\r\n\r\n   Doc-tests tq-parser\r\n\r\nrunning 3 tests\r\ntest src/tokenizer.rs - tokenizer::Tokenizer<'text>::new (line 158) ... ok\r\ntest src/tokenizer.rs - tokenizer::Tokenizer (line 36) ... ok\r\ntest src/tokenizer.rs - tokenizer::Token (line 122) ... ok\r\n\r\ntest result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\r\n```\r\n\r\nThis ticket is focusing on this portion:\r\n\r\n```\r\n   Doc-tests tq-parser\r\n\r\nrunning 3 tests\r\ntest src/tokenizer.rs - tokenizer::Tokenizer<'text>::new (line 158) ... ok\r\ntest src/tokenizer.rs - tokenizer::Tokenizer (line 36) ... ok\r\ntest src/tokenizer.rs - tokenizer::Token (line 122) ... ok\r\n```\r\n\r\nI believe this output could be more useful, perhaps at the cost of being 'pretty', if the line numbers were joined to the source file path with a `:` to produce a clickable (in some environments) path.\r\n\r\nFor example, if the output were the following\r\n\r\n```\r\n   Doc-tests tq-parser\r\n\r\nrunning 3 tests\r\ntest src/tokenizer.rs:158 - tokenizer::Tokenizer<'text>::new ... ok\r\ntest src/tokenizer.rs:36 - tokenizer::Tokenizer ... ok\r\ntest src/tokenizer.rs:122 - tokenizer::Token ... ok\r\n```\r\n\r\nI could cmd-click on `src/tokenizer.rs:158` and be taken, in my editor, directly to the doc test instead of having to open the file then navigate to the line.\r\n\r\nThis is more useful in the case of errors.\r\n\r\nIf I change the `tokenizer::Tokenizer<'text>::new` test to fail I get\r\n\r\n```\r\ntest src/tokenizer.rs - tokenizer::Tokenizer<'text>::new (line 158) ... FAILED\r\n```\r\n\r\nWhich could be\r\n\r\n```\r\ntest src/tokenizer.rs:158 - tokenizer::Tokenizer<'text>::new ... FAILED\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60706/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60706/timeline", "performed_via_github_app": null, "state_reason": null}