{"url": "https://api.github.com/repos/rust-lang/rust/issues/98407", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98407/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98407/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98407/events", "html_url": "https://github.com/rust-lang/rust/issues/98407", "id": 1280866325, "node_id": "I_kwDOAAsO6M5MWHgV", "number": 98407, "title": "Tracking Issue for `Exclusive`", "user": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-06-22T20:43:31Z", "updated_at": "2023-02-20T15:51:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for creating a tracking issue!\r\n\r\nTracking issues are for tracking a feature from implementation to stabilization.\r\n\r\nMake sure to include the relevant RFC for the feature if it has one.\r\n\r\nIf the new feature is small, it may be fine to skip the RFC process. In that\r\ncase, you can use use `issue = \"none\"` in your initial implementation PR. The\r\nreviewer will ask you to open a tracking issue if they agree your feature can be\r\nadded without an RFC.\r\n-->\r\n\r\nFeature gate: `#![feature(exclusive_wrapper)]`\r\n\r\nThis is a tracking issue for the `Exclusive` wrapper struct.\r\n\r\nThis structure can be used to upgrade non-`Sync` objects into `Sync` ones, by only offering mutable access to the underlying object. This can be useful with `Send`-but-not-`Sync` futures (like `BoxFuture`s)\r\n\r\n\r\n### Public API\r\n\r\n```rust\r\n// core::sync\r\n#[derive(Default)]\r\nstruct Exclusive<T: ?Sized> { ... }\r\n\r\nimpl<T: ?Sized> Sync for Exclusive {}\r\n\r\nimpl<T> Exclusive<T> {\r\n    pub const fn new(t: T) -> Self;\r\n    pub const fn into_inner(self) -> T;\r\n}\r\n\r\nimpl<T: ?Sized> Exclusive<T> {\r\n    pub const fn get_mut(&mut self) -> &mut T;\r\n    pub const fn get_pin_mut(Pin<&mut self>) -> Pin<&mut T>;\r\n    pub const fn from_mut(&mut T) -> &mut Exclusive<T>;\r\n    pub const fn from_pin_mut(Pin<&mut T>) -> Pin<&mut Exclusive<T>>;\r\n}\r\n\r\nimpl<T: Future> Future for Exclusive { ... }\r\n\r\nimpl<T> From<T> for Exclusive<T> { ... }\r\nimpl<T: ?Sized> Debug for Exclusive { ... }\r\n```\r\n\r\n\r\n### Steps / History\r\n\r\n\r\n- [x] Implementation: https://github.com/rust-lang/rust/pull/97629\r\n- [ ] Determine other nice-to-have trait impls\r\n- [ ] Final comment period (FCP)\r\n- [ ] Stabilization PR\r\n\r\n\r\n### Unresolved Questions\r\n\r\n\r\n- None yet.\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98407/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 2, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98407/timeline", "performed_via_github_app": null, "state_reason": null}