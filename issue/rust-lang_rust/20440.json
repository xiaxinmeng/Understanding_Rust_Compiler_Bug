{"url": "https://api.github.com/repos/rust-lang/rust/issues/20440", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20440/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20440/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20440/events", "html_url": "https://github.com/rust-lang/rust/issues/20440", "id": 53275585, "node_id": "MDU6SXNzdWU1MzI3NTU4NQ==", "number": 20440, "title": "Infinite recursive panic on old Linux", "user": {"login": "ebadf", "id": 10213343, "node_id": "MDQ6VXNlcjEwMjEzMzQz", "avatar_url": "https://avatars.githubusercontent.com/u/10213343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebadf", "html_url": "https://github.com/ebadf", "followers_url": "https://api.github.com/users/ebadf/followers", "following_url": "https://api.github.com/users/ebadf/following{/other_user}", "gists_url": "https://api.github.com/users/ebadf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebadf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebadf/subscriptions", "organizations_url": "https://api.github.com/users/ebadf/orgs", "repos_url": "https://api.github.com/users/ebadf/repos", "events_url": "https://api.github.com/users/ebadf/events{/privacy}", "received_events_url": "https://api.github.com/users/ebadf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 123110, "node_id": "MDU6TGFiZWwxMjMxMTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-linux", "name": "O-linux", "color": "6e6ec0", "default": false, "description": "Operating system: Linux"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-01-02T20:24:59Z", "updated_at": "2015-04-04T00:37:12Z", "closed_at": "2015-01-20T04:13:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "machine:\n\n```\nLinux 2.6.38-13-generic-pae #53-Ubuntu SMP Mon Nov 28 19:41:58 UTC 2011 i686 GNU/Linux\n```\n\nrustc, installed from official binaries (`rust-nightly-i686-unknown-linux-gnu.tar.gz`):\n\n```\nrustc 0.13.0-nightly (39d740266 2015-01-01 15:51:08 +0000)\nbinary: rustc\ncommit-hash: 39d74026663597a8d4ad0ab04e6d117bf9fd6ad4\ncommit-date: 2015-01-01 15:51:08 +0000\nhost: i686-unknown-linux-gnu\nrelease: 0.13.0-nightly\n```\n\ntest file:\n\n```\nfn main() {\n    println!(\"Hello, world!\");\n}\n```\n\nexpected result: duh!\n\nactual result:\n\n```\n$ rustc main.rs\n$ ls -al\n-rwxr-xr-x 1 user user 810590 2015-01-02 21:39 main\n-rw-r--r-- 1 user user     49 2015-01-02 21:39 main.rs\n$ ./main \nIllegal instruction\n```\n\nsame code built with the official 0.12.0 binaries on the same machine works like a charm.\n\nGDB:\n\n```\n$ gdb main\nGNU gdb (GDB) 7.2-ubuntu\n    ...   \n(gdb) run\nStarting program: /work_dir/main \n[Thread debugging using libthread_db enabled]\n\nProgram received signal SIGBUS, Bus error.\n0xb7f854d3 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n(gdb) bt\n#0  0xb7f854d3 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n#1  0xb7faf5b5 in rust_begin_unwind ()\n#2  0xb7fdc7b4 in panicking::panic_fmt::h54f05751f027ad53eCl ()\n#3  0xb7fb0218 in failure::on_fail::hebe4057108e7dc03xLz ()\n#4  0xb7f85405 in rt::unwind::begin_unwind_inner::h420b24b59a4d3530ypz ()\n#5  0xb7f856a2 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n#6  0xb7faf5b5 in rust_begin_unwind ()\n#7  0xb7fdc7b4 in panicking::panic_fmt::h54f05751f027ad53eCl ()\n#8  0xb7fb0218 in failure::on_fail::hebe4057108e7dc03xLz ()\n#9  0xb7f85405 in rt::unwind::begin_unwind_inner::h420b24b59a4d3530ypz ()\n#10 0xb7f856a2 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n#11 0xb7faf5b5 in rust_begin_unwind ()\n#12 0xb7fdc7b4 in panicking::panic_fmt::h54f05751f027ad53eCl ()\n#13 0xb7fb0218 in failure::on_fail::hebe4057108e7dc03xLz ()\n#14 0xb7f85405 in rt::unwind::begin_unwind_inner::h420b24b59a4d3530ypz ()\n#15 0xb7f856a2 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n#16 0xb7faf5b5 in rust_begin_unwind ()\n    ...\n```\n\n\u00a0 \u00a0 #28141 0xb7faf5b5 in rust_begin_unwind ()\n\u00a0 \u00a0 #28142 0xb7fdc7b4 in panicking::panic_fmt::h54f05751f027ad53eCl ()\n\u00a0 \u00a0 #28143 0xb7fb0218 in failure::on_fail::hebe4057108e7dc03xLz ()\n\u00a0 \u00a0 #28144 0xb7f85405 in rt::unwind::begin_unwind_inner::h420b24b59a4d3530ypz ()\n\u00a0 \u00a0 #28145 0xb7f856a2 in rt::unwind::begin_unwind_fmt::h82a51dddeba5bd4bdnz ()\n\u00a0 \u00a0 #28146 0xb7faf5b5 in rust_begin_unwind ()\n\u00a0 \u00a0 #28147 0xb7fdc7b4 in panicking::panic_fmt::h54f05751f027ad53eCl ()\n\u00a0 \u00a0 #28148 0xb7f95901 in io::stdio::println_args::h52ef5a95413979d5RFg ()\n\u00a0 \u00a0 #28149 0xb7f84910 in main::hf6c852484e660412eaa ()\n\u00a0 \u00a0 #28150 0xb7fb466b in rust_try_inner ()\n\u00a0 \u00a0 #28151 0xb7fb4644 in rust_try ()\n\u00a0 \u00a0 #28152 0xb7fb1745 in rt::lang_start::h91083a532c18f2e8kFz ()\n\u00a0 \u00a0 #28153 0xb7f8496a in main ()\n\nstrace:\n\n```\n$ strace -f -ff ./main \nexecve(\"./main\", [\"./main\"], [/* 40 vars */]) = 0\nbrk(0)                                  = 0xb7a96000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb77e4000\n    ...   \nmmap2(0xbf048000, 4096, PROT_NONE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xbf048000\nrt_sigaction(SIGSEGV, {0xb7835830, [], SA_STACK|SA_SIGINFO}, NULL, 8) = 0\nrt_sigaction(SIGBUS, {0xb7835830, [], SA_STACK|SA_SIGINFO}, NULL, 8) = 0\nmmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb77e2000\nsigaltstack({ss_sp=0xb77e2000, ss_flags=0, ss_size=8192}, NULL) = 0\nmmap2(NULL, 4194304, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6c00000\nrt_sigaction(SIGPIPE, {SIG_IGN, [PIPE], SA_RESTART}, {SIG_DFL, [], 0}, 8) = 0\n--- SIGBUS (Bus error) @ 0 (0) ---\nrt_sigaction(SIGBUS, {SIG_DFL, [BUS], SA_RESTART}, {0xb7835830, [], SA_STACK|SA_SIGINFO}, 8) = 0\ntgkill(29939, 29939, SIGBUS)            = 0   \n--- SIGILL (Illegal instruction) @ 0 (0) ---\n+++ killed by SIGILL +++\nIllegal instruction\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20440/timeline", "performed_via_github_app": null, "state_reason": "completed"}