{"url": "https://api.github.com/repos/rust-lang/rust/issues/54874", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/54874/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54874/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/54874/events", "html_url": "https://github.com/rust-lang/rust/issues/54874", "id": 367483501, "node_id": "MDU6SXNzdWUzNjc0ODM1MDE=", "number": 54874, "title": "rustc 1.30 beta 12 incremental compilation hangs on win 7", "user": {"login": "sinesc", "id": 4408591, "node_id": "MDQ6VXNlcjQ0MDg1OTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4408591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinesc", "html_url": "https://github.com/sinesc", "followers_url": "https://api.github.com/users/sinesc/followers", "following_url": "https://api.github.com/users/sinesc/following{/other_user}", "gists_url": "https://api.github.com/users/sinesc/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinesc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinesc/subscriptions", "organizations_url": "https://api.github.com/users/sinesc/orgs", "repos_url": "https://api.github.com/users/sinesc/repos", "events_url": "https://api.github.com/users/sinesc/events{/privacy}", "received_events_url": "https://api.github.com/users/sinesc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2018-10-06T18:33:20Z", "updated_at": "2018-11-30T02:09:04Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I'm seeing frequent rustc freezes (0% CPU) with incremental compilation enabled on Windows 7. This happens about every 2nd or 3rd build attempt. Once this happens (and after killing the frozen rustc), any further attempts hang forever as well (i.e. I waited 5 minutes). `cargo clean` resolves the issue until it happens again a few builds later, setting CARGO_INCREMENTAL=0 appears to completely prevent it.\r\n\r\nThis might be a duplicate of/related to #54627.\r\n\r\nI have attached a debugger to get the traces, but I don't have any symbols for rustc, so this is probably useless:\r\n\r\n```\r\n>\tntdll.dll!NtWaitForKeyedEvent\u001e()\r\n \tntdll.dll!RtlSleepConditionVariableSRW\u001e()\r\n \tkernel32.dll!SleepConditionVariableSRW\u001e()\r\n \tstd-955ac6734338b235.dll!000007fedb3c7fa4()\r\n \tstd-955ac6734338b235.dll!000007fedb3a7781()\r\n \trustc_codegen_llvm-llvm.dll!000007fed71f49d2()\r\n \trustc_codegen_llvm-llvm.dll!000007fed71c8283()\r\n \trustc_codegen_llvm-llvm.dll!000007fed718739c()\r\n \trustc_codegen_llvm-llvm.dll!000007fed71c2720()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc915108()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9384ac()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc8d8fb3()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc8d4e36()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc987961()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9e27e0()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc92e728()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9c7908()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc92c325()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9c6588()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc92b665()\r\n \tstd-955ac6734338b235.dll!000007fedb3da2a2()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9c37b3()\r\n \trustc_driver-7ae0c7f4e267e2e6.dll!000007fedc9d5f8e()\r\n \trustc.exe!000000013f071056()\r\n \tstd-955ac6734338b235.dll!000007fedb3a8477()\r\n \tstd-955ac6734338b235.dll!000007fedb3da2a2()\r\n \tstd-955ac6734338b235.dll!000007fedb3ba4c3()\r\n \trustc.exe!000000013f07104a()\r\n \trustc.exe!000000013f071299()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!NtWaitForMultipleObjects\u001e()\r\n \tKernelBase.dll!WaitForMultipleObjectsEx()\r\n \tkernel32.dll!WaitForMultipleObjects\u001e()\r\n \trustc-cfefa64b59573cce.dll!000007fedbea2476()\r\n \trustc-cfefa64b59573cce.dll!000007fedbea2768()\r\n \tstd-955ac6734338b235.dll!000007fedb3da2a2()\r\n \trustc-cfefa64b59573cce.dll!000007fedbe9e662()\r\n \tstd-955ac6734338b235.dll!000007fedb3d8672()\r\n \tstd-955ac6734338b235.dll!000007fedb3b48e9()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!NtWaitForKeyedEvent\u001e()\r\n \tntdll.dll!RtlSleepConditionVariableSRW\u001e()\r\n \tkernel32.dll!SleepConditionVariableSRW\u001e()\r\n \tstd-955ac6734338b235.dll!000007fedb3c7fa4()\r\n \tstd-955ac6734338b235.dll!000007fedb3a7781()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70cfb2a()\r\n \trustc_codegen_llvm-llvm.dll!000007fed71c78f8()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70c9384()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70e3346()\r\n \tstd-955ac6734338b235.dll!000007fedb3da2a2()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70d4e59()\r\n \tstd-955ac6734338b235.dll!000007fedb3d8672()\r\n \tstd-955ac6734338b235.dll!000007fedb3b48e9()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af53a0()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af564b()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af554e()\r\n \tntdll.dll!RtlProcessFlsData\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrGetProcedureAddressEx\u001e()\r\n \tntdll.dll!LdrGetProcedureAddress\u001e()\r\n \tKernelBase.dll!GetProcAddress()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af6236()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af6bdc()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af2e9a()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8ad3d7d()\r\n \trustc_codegen_llvm-llvm.dll!000007fed73bc2fe()\r\n \trustc_codegen_llvm-llvm.dll!000007fed73bc203()\r\n \trustc_codegen_llvm-llvm.dll!000007fed73bb9e1()\r\n \trustc_codegen_llvm-llvm.dll!000007fed752c6e7()\r\n \trustc_codegen_llvm-llvm.dll!000007fed7c20cbc()\r\n \trustc_codegen_llvm-llvm.dll!000007fed7c19b56()\r\n \trustc_codegen_llvm-llvm.dll!000007fed7c239d3()\r\n \trustc_codegen_llvm-llvm.dll!000007fed733a810()\r\n \trustc_codegen_llvm-llvm.dll!000007fed72469f9()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70f40bf()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70cd5d2()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70e3399()\r\n \tstd-955ac6734338b235.dll!000007fedb3da2a2()\r\n \trustc_codegen_llvm-llvm.dll!000007fed70d4b9a()\r\n \tstd-955ac6734338b235.dll!000007fedb3d8672()\r\n \tstd-955ac6734338b235.dll!000007fedb3b48e9()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af53e0()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af5533()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af5926()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af13c9()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8ad0bf6()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8ad0471()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8ad06a1()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af53a0()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af564b()\r\n \trustc_codegen_llvm-llvm.dll!000007fed8af554e()\r\n \tntdll.dll!RtlProcessFlsData\u001e()\r\n \tntdll.dll!LdrShutdownThread\u001e()\r\n \tntdll.dll!RtlExitUserThread\u001e()\r\n \tkernel32.dll!BaseThreadInitThunk\u001e()\r\n \tntdll.dll!RtlUserThreadStart\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n\r\n>\tntdll.dll!ZwWaitForSingleObject\u001e()\r\n \tntdll.dll!RtlpWaitOnCriticalSection\u001e()\r\n \tntdll.dll!RtlEnterCriticalSection\u001e()\r\n \tntdll.dll!LdrpInitializeThread\u001e()\r\n \tntdll.dll!_LdrpInitialize\u001e()\r\n \tntdll.dll!LdrInitializeThunk\u001e()\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/54874/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/54874/timeline", "performed_via_github_app": null, "state_reason": null}