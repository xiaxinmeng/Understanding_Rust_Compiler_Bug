{"url": "https://api.github.com/repos/rust-lang/rust/issues/55072", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55072/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55072/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55072/events", "html_url": "https://github.com/rust-lang/rust/issues/55072", "id": 369925960, "node_id": "MDU6SXNzdWUzNjk5MjU5NjA=", "number": 55072, "title": "Cargo uses absolute paths somewhere", "user": {"login": "Phaiax", "id": 1649278, "node_id": "MDQ6VXNlcjE2NDkyNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1649278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Phaiax", "html_url": "https://github.com/Phaiax", "followers_url": "https://api.github.com/users/Phaiax/followers", "following_url": "https://api.github.com/users/Phaiax/following{/other_user}", "gists_url": "https://api.github.com/users/Phaiax/gists{/gist_id}", "starred_url": "https://api.github.com/users/Phaiax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Phaiax/subscriptions", "organizations_url": "https://api.github.com/users/Phaiax/orgs", "repos_url": "https://api.github.com/users/Phaiax/repos", "events_url": "https://api.github.com/users/Phaiax/events{/privacy}", "received_events_url": "https://api.github.com/users/Phaiax/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-14T17:48:14Z", "updated_at": "2019-03-23T13:25:08Z", "closed_at": "2019-03-23T13:25:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying some embedded rust programming and figured out that the cargo/rustc cache does not survive a move of the project folder. (This is the `cortex-m-quickstart` project but I think that does not really matter.)\r\n\r\nThere are no absolute paths neither in .cargo/config nor in Cargo.toml. After a cargo clean I can do a build again.\r\n\r\n```\r\nPS C:\\Users\\danie_000\\Code\\RE\\ABC> rustc --version\r\nrustc 1.30.0-beta.15 (590121930 2018-10-12)\r\nPS C:\\Users\\danie_000\\Code\\RE\\ABC> cargo --version\r\ncargo 1.30.0-beta (05e9b01fc 2018-09-21)\r\n```\r\nThe rust version is set by `rustup default beta` and not overwritten for any of these folders.\r\n\r\nAfter the rename of the Project folder, cargo summons rustc with some references to the ABC path that does not exist anymore.\r\n\r\n```\r\nPS C:\\Users\\danie_000\\Code\\RE> cd .\\ABC\\\r\nPS C:\\Users\\danie_000\\Code\\RE\\ABC> cargo clean\r\nPS C:\\Users\\danie_000\\Code\\RE\\ABC> cargo build\r\n   Compiling proc-macro2 v0.4.20\r\n   Compiling unicode-xid v0.1.0\r\n   Compiling rand_core v0.3.0\r\n   Compiling cortex-m-rt v0.6.4\r\n   Compiling cortex-m-semihosting v0.3.1\r\n   Compiling cortex-m v0.5.7\r\n   Compiling vcell v0.1.0\r\n   Compiling myapp v0.1.0 (C:\\Users\\danie_000\\Code\\RE\\ABC)\r\n   Compiling bare-metal v0.2.3\r\n   Compiling r0 v0.2.2\r\n   Compiling aligned v0.2.0\r\n   Compiling panic-halt v0.2.0\r\n   Compiling rand_core v0.2.2\r\n   Compiling volatile-register v0.2.0\r\n   Compiling rand v0.5.5\r\n   Compiling quote v0.6.8\r\n   Compiling syn v0.15.11\r\n   Compiling cortex-m-rt-macros v0.1.2\r\n    Finished dev [unoptimized + debuginfo] target(s) in 28.77s\r\nPS C:\\Users\\danie_000\\Code\\RE\\ABC> cd ..\r\nPS C:\\Users\\danie_000\\Code\\RE> mv ABC XYZ\r\nPS C:\\Users\\danie_000\\Code\\RE> cd .\\XYZ\\\r\nPS C:\\Users\\danie_000\\Code\\RE\\XYZ> cargo -v build\r\n       Fresh unicode-xid v0.1.0\r\n       Fresh rand_core v0.3.0\r\n       Fresh vcell v0.1.0\r\n       Fresh r0 v0.2.2\r\n       Fresh aligned v0.2.0\r\n       Fresh bare-metal v0.2.3\r\n   Compiling myapp v0.1.0 (C:\\Users\\danie_000\\Code\\RE\\XYZ)\r\n       Fresh panic-halt v0.2.0\r\n     Running `rustc --edition=2018 --crate-name build_script_build build.rs --color always --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=3a754d4070599644 -C extra-filename=-3a754d4070599644 --out-dir C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\build\\myapp-3a754d4070599644 -C incremental=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\incremental -L dependency=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\deps`\r\n       Fresh rand_core v0.2.2\r\n       Fresh volatile-register v0.2.0\r\n       Fresh proc-macro2 v0.4.20\r\n       Fresh rand v0.5.5\r\n       Fresh cortex-m-semihosting v0.3.1\r\n       Fresh cortex-m v0.5.7\r\n       Fresh quote v0.6.8\r\n       Fresh syn v0.15.11\r\n       Fresh cortex-m-rt-macros v0.1.2\r\n       Fresh cortex-m-rt v0.6.4\r\n     Running `C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\build\\myapp-3a754d4070599644\\build-script-build`\r\n     Running `rustc --edition=2018 --crate-name myapp src\\main.rs --color always --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=7f9cdf275b22bd50 -C extra-filename=-7f9cdf275b22bd50 --out-dir C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps --target thumbv7m-none-eabi -C incremental=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\incremental -L dependency=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps -L dependency=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\deps --extern cortex_m=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m-6d95ef6e4550c4c8.rlib --extern cortex_m_rt=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m_rt-03e440f58d1c0555.rlib --extern cortex_m_semihosting=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m_semihosting-26e2b9dfbd5c7e3b.rlib --extern panic_halt=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libpanic_halt-8d085ea03dce307c.rlib -C link-arg=-Tlink.x -L C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\build\\myapp-b0e16e01c22428a8\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-765dfe6812e223ce\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-rt-1387b5ad4b26cfa2\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-semihosting-cb2469f22b42a1d7\\out`\r\nerror: linking with `rust-lld` failed: exit code: 1\r\n  |\r\n  = note: \"rust-lld\" \"-flavor\" \"gnu\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\.rustup\\\\toolchains\\\\beta-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\thumbv7m-none-eabi\\\\lib\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\\\\myapp-7f9cdf275b22bd50.57siomzwzet2ykzc.rcgu.o\" \"-o\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\\\\myapp-7f9cdf275b22bd50\" \"--gc-sections\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\build\\\\myapp-b0e16e01c22428a8\\\\out\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\ABC\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\build\\\\cortex-m-765dfe6812e223ce\\\\out\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\ABC\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\build\\\\cortex-m-rt-1387b5ad4b26cfa2\\\\out\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\ABC\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\build\\\\cortex-m-semihosting-cb2469f22b42a1d7\\\\out\" \"-L\" \"C:\\\\Users\\\\danie_000\\\\.rustup\\\\toolchains\\\\beta-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\thumbv7m-none-eabi\\\\lib\" \"-Bstatic\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\\\\libcortex_m_rt-03e440f58d1c0555.rlib\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\\\\libr0-e3b5285d82ebc9ad.rlib\" \"--start-group\" \"C:\\\\Users\\\\danie_000\\\\Code\\\\RE\\\\XYZ\\\\target\\\\thumbv7m-none-eabi\\\\debug\\\\deps\\\\libpanic_halt-8d085ea03dce307c.rlib\" \"C:\\\\Users\\\\danie_000\\\\.rustup\\\\toolchains\\\\beta-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\thumbv7m-none-eabi\\\\lib\\\\libcore-47bba88e05b648a7.rlib\" \"--end-group\" \"C:\\\\Users\\\\danie_000\\\\.rustup\\\\toolchains\\\\beta-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\thumbv7m-none-eabi\\\\lib\\\\libcompiler_builtins-1eaa5842cd3f5019.rlib\" \"-Tlink.x\" \"-Bdynamic\"\r\n  = note: rust-lld: error: cannot find linker script link.x\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `myapp`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name myapp src\\main.rs --color always --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=7f9cdf275b22bd50 -C extra-filename=-7f9cdf275b22bd50 --out-dir C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps --target thumbv7m-none-eabi -C incremental=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\incremental -L dependency=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps -L dependency=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\debug\\deps --extern cortex_m=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m-6d95ef6e4550c4c8.rlib --extern cortex_m_rt=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m_rt-03e440f58d1c0555.rlib --extern cortex_m_semihosting=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libcortex_m_semihosting-26e2b9dfbd5c7e3b.rlib --extern panic_halt=C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\deps\\libpanic_halt-8d085ea03dce307c.rlib -C link-arg=-Tlink.x -L C:\\Users\\danie_000\\Code\\RE\\XYZ\\target\\thumbv7m-none-eabi\\debug\\build\\myapp-b0e16e01c22428a8\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-765dfe6812e223ce\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-rt-1387b5ad4b26cfa2\\out -L C:\\Users\\danie_000\\Code\\RE\\ABC\\target\\thumbv7m-none-eabi\\debug\\build\\cortex-m-semihosting-cb2469f22b42a1d7\\out` (exit code: 1)\r\nPS C:\\Users\\danie_000\\Code\\RE\\XYZ>\r\n```", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55072/timeline", "performed_via_github_app": null, "state_reason": "completed"}