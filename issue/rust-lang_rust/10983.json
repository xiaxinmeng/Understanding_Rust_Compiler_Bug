{"url": "https://api.github.com/repos/rust-lang/rust/issues/10983", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10983/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10983/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10983/events", "html_url": "https://github.com/rust-lang/rust/issues/10983", "id": 24311020, "node_id": "MDU6SXNzdWUyNDMxMTAyMA==", "number": 10983, "title": "Tutorial's owned linked list has minor inefficiency (and is non-idiomatic C)", "user": {"login": "ezyang", "id": 13564, "node_id": "MDQ6VXNlcjEzNTY0", "avatar_url": "https://avatars.githubusercontent.com/u/13564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezyang", "html_url": "https://github.com/ezyang", "followers_url": "https://api.github.com/users/ezyang/followers", "following_url": "https://api.github.com/users/ezyang/following{/other_user}", "gists_url": "https://api.github.com/users/ezyang/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezyang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezyang/subscriptions", "organizations_url": "https://api.github.com/users/ezyang/orgs", "repos_url": "https://api.github.com/users/ezyang/repos", "events_url": "https://api.github.com/users/ezyang/events{/privacy}", "received_events_url": "https://api.github.com/users/ezyang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2013-12-15T13:13:06Z", "updated_at": "2013-12-16T12:43:38Z", "closed_at": "2013-12-15T21:50:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The tutorial's definition of linked lists takes advantage of Rust's enums in order to write a very elegant definition, reminiscent of a standard inductive definition of a linked list:\n\n``` rust\nenum List<T> {\n    Cons(T, ~List<T>),\n    Nil\n}\n```\n\nAs List<T> is not a nullable data type, Rust can avoid a tag word by representing empty list cells as `Cons(_, NULL)`. (If I understand the null-enum optimization correctly, though I do appreciate that Rust reserves the right to do whatever it wants here.) From the perspective of the bits being shuffled around, this definition is a bit weird. For one, no self-respecting C programmer would actually represent an empty list as a cons-cell with the link field nulled out. Furthermore, it means that in order to test if a list is null, an extra pointer-dereference must occur.\n\nOf course, one might say, \"Well, this is just the tutorial: it's OK if the data-structures are not optimal, as long as they demonstrate important concepts.\" But, all other things being equal, we should try to pick examples that more closely reflect what real-world practice might look like. Here is an \"idiomatic\" owned linked list definition:\n\n``` rust\nstruct List<T> {\n    elem: T,\n    link: Option<~List<T>>\n}\n```\n\nWhile the algorithmic structure of operations operating on the two structures is roughly the same, the exact details of the syntax, matching, etc. look different, and for people who will naturally gravitate to writing definitions in the latter form, a tutorial which talks about this representation would probably be more useful.\n\nOf course, it is a long-standing bug that the tutorial should be rewritten from scratch. I suspect that whatever rewrite happens, however, it will probably include a linked list example, so I simply want to register this observation for posterity. I'm happy to provide rewritten variants of this section of the tutorial using this alternate definition.\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10983/timeline", "performed_via_github_app": null, "state_reason": "completed"}