{"url": "https://api.github.com/repos/rust-lang/rust/issues/45216", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45216/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45216/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45216/events", "html_url": "https://github.com/rust-lang/rust/issues/45216", "id": 264693367, "node_id": "MDU6SXNzdWUyNjQ2OTMzNjc=", "number": 45216, "title": "make easier/possible to detect `derive` attributes after expansion", "user": {"login": "zackmdavis", "id": 1076988, "node_id": "MDQ6VXNlcjEwNzY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1076988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zackmdavis", "html_url": "https://github.com/zackmdavis", "followers_url": "https://api.github.com/users/zackmdavis/followers", "following_url": "https://api.github.com/users/zackmdavis/following{/other_user}", "gists_url": "https://api.github.com/users/zackmdavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/zackmdavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zackmdavis/subscriptions", "organizations_url": "https://api.github.com/users/zackmdavis/orgs", "repos_url": "https://api.github.com/users/zackmdavis/repos", "events_url": "https://api.github.com/users/zackmdavis/events{/privacy}", "received_events_url": "https://api.github.com/users/zackmdavis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-10-11T18:42:46Z", "updated_at": "2018-02-06T00:08:53Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "In the spirit of #44942, it would be nice if the `missing_debug_implementations` and `missing_copy_implementations` lints suggested adding a derive attribute (in the case where one does not already exist) or adding `Debug` (respectively `Copy`) to the list of traits in the derive attribute (in the case where it already exists). (This mostly for the sake of RLS and [other tools](https://github.com/killercup/rustfix), but the span highlighting is pretty, too.) But while the lints (obviously, necessarily) know how to look up whether the trait has been implemented, it's not clear how to make them detect an existing derive attribute (and its span): `cx.tcx.get_attrs` doesn't work because we apparently strip off the attribute during expansion ~~(it _looks_ like this happens twice, which is confusing: [1](https://github.com/rust-lang/rust/blob/c0d40a190/src/libsyntax/ext/expand.rs#L310-L311) [2](https://github.com/rust-lang/rust/blob/cbf5d39cca/src/libsyntax/ext/derive.rs#L25-L27))~~. But I can't modify the expansion code because I'm still not smart enough to understand it.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45216/timeline", "performed_via_github_app": null, "state_reason": null}