{"url": "https://api.github.com/repos/rust-lang/rust/issues/60997", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60997/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60997/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60997/events", "html_url": "https://github.com/rust-lang/rust/issues/60997", "id": 446420971, "node_id": "MDU6SXNzdWU0NDY0MjA5NzE=", "number": 60997, "title": "feature external_doc not traversed by rustfmt", "user": {"login": "kentfredric", "id": 44790, "node_id": "MDQ6VXNlcjQ0Nzkw", "avatar_url": "https://avatars.githubusercontent.com/u/44790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kentfredric", "html_url": "https://github.com/kentfredric", "followers_url": "https://api.github.com/users/kentfredric/followers", "following_url": "https://api.github.com/users/kentfredric/following{/other_user}", "gists_url": "https://api.github.com/users/kentfredric/gists{/gist_id}", "starred_url": "https://api.github.com/users/kentfredric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kentfredric/subscriptions", "organizations_url": "https://api.github.com/users/kentfredric/orgs", "repos_url": "https://api.github.com/users/kentfredric/repos", "events_url": "https://api.github.com/users/kentfredric/events{/privacy}", "received_events_url": "https://api.github.com/users/kentfredric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 602425123, "node_id": "MDU6TGFiZWw2MDI0MjUxMjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-dev-tools", "name": "T-dev-tools", "color": "bfd4f2", "default": false, "description": "Relevant to the dev-tools subteam, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 2586902954, "node_id": "MDU6TGFiZWwyNTg2OTAyOTU0", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-external_doc", "name": "F-external_doc", "color": "f9c0cc", "default": false, "description": "`#![feature(external_doc)]`"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-21T05:17:44Z", "updated_at": "2021-06-26T01:34:59Z", "closed_at": "2021-06-26T01:34:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the nightly external doc feature #44732 , `rustfmt` ceases to be able to tidy code blocks in the documentation.\r\n\r\nAs a test, I put a documentation code block that was previously in a `.rs` file into an `include=`'d `.md` file, intentionally made it a mess, and observed that `rustfmt` no longer made it look readable:\r\n\r\n<pre>\r\n```no_run\r\nuse grease::repository::CategoryFileIterator;let iterator = CategoryFileIterator::for_file( \"/usr/portage\",  \"/usr/portage/profiles/categories\",);for item_result in iterator.unwrap() {  println!(\"{}\", item_result.unwrap().name());}\r\n```\r\n</pre>\r\n\r\nAnd rustfmt did not indicate any attempts to format this file:\r\n\r\n```\r\nrustfmt --edition 2018 /home/kent/rust/grease/src/lib.rs --verbose\r\nUsing rustfmt config file /home/kent/rust/grease/rustfmt.toml for /home/kent/rust/grease/src/lib.rs\r\nFormatting /home/kent/rust/grease/src/lib.rs\r\nFormatting /home/kent/rust/grease/src/repository/category.rs\r\nFormatting /home/kent/rust/grease/src/repository/ebuild.rs\r\nFormatting /home/kent/rust/grease/src/repository/package.rs\r\nFormatting /home/kent/rust/grease/src/repository.rs\r\nSpent 0.002 secs in the parsing phase, and 0.009 secs in the formatting phase\r\n```\r\n\r\nI imagine being able to format these external files would be something that should work prior to this feature being stabilized, or at very least, rustfmt should gain options so that it can do this.", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60997/timeline", "performed_via_github_app": null, "state_reason": "completed"}