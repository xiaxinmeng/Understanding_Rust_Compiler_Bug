{"url": "https://api.github.com/repos/rust-lang/rust/issues/28344", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28344/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28344/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28344/events", "html_url": "https://github.com/rust-lang/rust/issues/28344", "id": 105930452, "node_id": "MDU6SXNzdWUxMDU5MzA0NTI=", "number": 28344, "title": "Type parameter `Self/SelfSpace.0` (Self/SelfSpace/0) out of range when substituting", "user": {"login": "ranweiler", "id": 515835, "node_id": "MDQ6VXNlcjUxNTgzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/515835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ranweiler", "html_url": "https://github.com/ranweiler", "followers_url": "https://api.github.com/users/ranweiler/followers", "following_url": "https://api.github.com/users/ranweiler/following{/other_user}", "gists_url": "https://api.github.com/users/ranweiler/gists{/gist_id}", "starred_url": "https://api.github.com/users/ranweiler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ranweiler/subscriptions", "organizations_url": "https://api.github.com/users/ranweiler/orgs", "repos_url": "https://api.github.com/users/ranweiler/repos", "events_url": "https://api.github.com/users/ranweiler/events{/privacy}", "received_events_url": "https://api.github.com/users/ranweiler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-09-11T01:52:48Z", "updated_at": "2015-09-15T08:09:24Z", "closed_at": "2015-09-15T08:09:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! I'm reporting an apparent compiler error stemming from a typo.\n\n**Version**\n\n``` sh\n$ rustc --version --verbose\nrustc 1.4.0-nightly (7bf626a68 2015-09-07)\nbinary: rustc\ncommit-hash: 7bf626a68045be1d1a4fac9a635113bb7775b6bb\ncommit-date: 2015-09-07\nhost: x86_64-apple-darwin\nrelease: 1.4.0-nightly\n```\n\n**Repro**\nIt suffices to attempt compilation of the following:\n\n_Ex. 1_\n\n``` rust\nuse std::ops::BitXor;\n\nfn f() {\n    let x: u8 = BitXor::bitor(0 as u8, 0 as u8);\n}\n```\n\nThe above _does_ compile if the obvious typo is fixed. I tried to find an even smaller example which failed similarly. A smaller example which does _not_ compile if the typo is fixed, but as is, also fails with an error similar to Ex. 1:\n\n_Ex. 2_\n\n``` rust\nuse std::ops::BitXor;\n\nfn f() {\n    let g = BitXor::bitor;\n}\n```\n\nMy build invocation was `cargo build`.\n\n**Expected behavior**\nFor Ex 1., I would expect to see some sort of name resolution error. That example compiles if `bitor` is replaced with `bitxor`. For Ex. 2, I have a less certain expectation, but would still expect some sort of name resolution error.\n\n**Observed behavior**\nBoth snippets fail to compile with the following error message:\n\n```\nerror: internal compiler error: Type parameter `Self/SelfSpace.0` (Self/SelfSpace/0) out of range when substituting (root type=Some(Self)) substs=Substs[types=[[];[];[]], regions=[[];[];[]]]\n```\n\nBacktraces follow below.\n\n_Ex. 1_\n\n```\n$ RUST_BACKTRACE=1 cargo build\n   Compiling bugreport v0.1.0 (file:///Users/joe/devel/bugreport)\nsrc/lib.rs:4:17: 4:30 error: internal compiler error: Type parameter `Self/SelfSpace.0` (Self/SelfSpace/0) out of range when substituting (root type=Some(Self)) substs=Substs[types=[[];[];[]], regions=[[];[];[]]]\nsrc/lib.rs:4     let x: u8 = BitXor::bitor(0 as u8, 0 as u8);\n                             ^~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/diagnostic.rs:176\n\nstack backtrace:\n   1:        0x111eab820 - sys::backtrace::tracing::imp::write::h8eb606f0676b1c68Sqs\n   2:        0x111eb263b - panicking::on_panic::h439344cab6a0722eKXw\n   3:        0x111e74362 - rt::unwind::begin_unwind_inner::h208ecd91d43787c9Msw\n   4:        0x10f71977a - rt::unwind::begin_unwind::h544928616495927122\n   5:        0x10f719742 - diagnostic::SpanHandler::span_bug::hd65799bd4f0c505a6NA\n   6:        0x10eb9bcfe - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h93ff7eb3e9afebb7TYQ\n   7:        0x10e5c1df0 - check::FnCtxt<'a, 'tcx>.AstConv<'tcx>::ty_infer::hb0bb190e00a198c90Cq\n   8:        0x10e63f435 - iter::Map<I, F>.Iterator::next::h1142259025829094402\n   9:        0x10e63e41e - astconv::create_substs_for_ast_path::hd4dfccf714bc74f4q2v\n  10:        0x10e6466e9 - astconv::create_substs_for_ast_trait_ref::h4368114ff2eab34dfrw\n  11:        0x10e64431c - astconv::ast_path_to_poly_trait_ref::h29bb903d881cbabdAow\n  12:        0x10e63455c - astconv::finish_resolving_def_to_ty::habd24143c000f312Phx\n  13:        0x10e532532 - check::resolve_ty_and_def_ufcs::h94d5f667283b3292wVt\n  14:        0x10e62e174 - check::check_expr_with_unifier::h17434517167852192102\n  15:        0x10e5c3877 - check::callee::check_call::heb2226e51ebba80aGUm\n  16:        0x10e618052 - check::check_expr_with_unifier::h7638636721109620462\n  17:        0x10e636fd5 - check::check_decl_initializer::h60197528b46dd3ddB2t\n  18:        0x10e637083 - check::check_decl_local::hada2f84316d1a260P3t\n  19:        0x10e6374a7 - check::check_stmt::ha7821baa526c3cf6I5t\n  20:        0x10e5edd77 - check::check_block_with_expected::h008ebf27f3d681a9F9t\n  21:        0x10e5c3010 - check::check_fn::h73e2f75c353c138drJp\n  22:        0x10e5e4bac - check::check_bare_fn::h9d4937e09659b1ff0yp\n  23:        0x10e5e2903 - check::check_item_body::hbee3397a0255ef56k0p\n  24:        0x10e69d3e1 - check_crate::hfc612f2e81e3f3ec1BE\n  25:        0x10de1d74a - driver::phase_3_run_analysis_passes::closure.21870\n  26:        0x10ddff38a - middle::ty::ctxt<'tcx>::create_and_enter::h10730255013514676807\n  27:        0x10ddfab95 - driver::phase_3_run_analysis_passes::h3370851894325132430\n  28:        0x10dddb585 - driver::compile_input::h88f9e5d56c3193e90ba\n  29:        0x10df40250 - run_compiler::h0bd793d9ea569018qqc\n  30:        0x10df3db49 - boxed::F.FnBox<A>::call_box::h4277668881798780915\n  31:        0x10df3d542 - rt::unwind::try::try_fn::h17584184833201088243\n  32:        0x111eb21f8 - __rust_try\n  33:        0x111e9e400 - rt::unwind::try::inner_try::h1851ddf9ecd93c2fFow\n  34:        0x10df3d6f2 - boxed::F.FnBox<A>::call_box::h5084478766513466170\n  35:        0x111eb156d - sys::thread::Thread::new::thread_start::hc131c4deb753ff20oNv\n  36:     0x7fff8de30267 - _pthread_body\n  37:     0x7fff8de301e4 - _pthread_start\n\nCould not compile `bugreport`.\n```\n\n_Ex. 2_\n\n```\n$ RUST_BACKTRACE=1 cargo build\n   Compiling bugreport v0.1.0 (file:///Users/joe/devel/bugreport)\nsrc/lib.rs:9:13: 9:26 error: internal compiler error: Type parameter `Self/SelfSpace.0` (Self/SelfSpace/0) out of range when substituting (root type=Some(Self)) substs=Substs[types=[[];[];[]], regions=[[];[];[]]]\nsrc/lib.rs:9     let g = BitXor::bitor;\n                         ^~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/diagnostic.rs:176\n\nstack backtrace:\n   1:        0x1081f2820 - sys::backtrace::tracing::imp::write::h8eb606f0676b1c68Sqs\n   2:        0x1081f963b - panicking::on_panic::h439344cab6a0722eKXw\n   3:        0x1081bb362 - rt::unwind::begin_unwind_inner::h208ecd91d43787c9Msw\n   4:        0x105a7177a - rt::unwind::begin_unwind::h544928616495927122\n   5:        0x105a71742 - diagnostic::SpanHandler::span_bug::hd65799bd4f0c505a6NA\n   6:        0x104efbcfe - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h93ff7eb3e9afebb7TYQ\n   7:        0x104922df0 - check::FnCtxt<'a, 'tcx>.AstConv<'tcx>::ty_infer::hb0bb190e00a198c90Cq\n   8:        0x1049a0435 - iter::Map<I, F>.Iterator::next::h1142259025829094402\n   9:        0x10499f41e - astconv::create_substs_for_ast_path::hd4dfccf714bc74f4q2v\n  10:        0x1049a76e9 - astconv::create_substs_for_ast_trait_ref::h4368114ff2eab34dfrw\n  11:        0x1049a531c - astconv::ast_path_to_poly_trait_ref::h29bb903d881cbabdAow\n  12:        0x10499555c - astconv::finish_resolving_def_to_ty::habd24143c000f312Phx\n  13:        0x104893532 - check::resolve_ty_and_def_ufcs::h94d5f667283b3292wVt\n  14:        0x10497c667 - check::check_expr_with_unifier::h7638636721109620462\n  15:        0x104997fd5 - check::check_decl_initializer::h60197528b46dd3ddB2t\n  16:        0x104998083 - check::check_decl_local::hada2f84316d1a260P3t\n  17:        0x1049984a7 - check::check_stmt::ha7821baa526c3cf6I5t\n  18:        0x10494ed77 - check::check_block_with_expected::h008ebf27f3d681a9F9t\n  19:        0x104924010 - check::check_fn::h73e2f75c353c138drJp\n  20:        0x104945bac - check::check_bare_fn::h9d4937e09659b1ff0yp\n  21:        0x104943903 - check::check_item_body::hbee3397a0255ef56k0p\n  22:        0x1049fe3e1 - check_crate::hfc612f2e81e3f3ec1BE\n  23:        0x10417974a - driver::phase_3_run_analysis_passes::closure.21870\n  24:        0x10415b38a - middle::ty::ctxt<'tcx>::create_and_enter::h10730255013514676807\n  25:        0x104156b95 - driver::phase_3_run_analysis_passes::h3370851894325132430\n  26:        0x104137585 - driver::compile_input::h88f9e5d56c3193e90ba\n  27:        0x10429c250 - run_compiler::h0bd793d9ea569018qqc\n  28:        0x104299b49 - boxed::F.FnBox<A>::call_box::h4277668881798780915\n  29:        0x104299542 - rt::unwind::try::try_fn::h17584184833201088243\n  30:        0x1081f91f8 - __rust_try\n  31:        0x1081e5400 - rt::unwind::try::inner_try::h1851ddf9ecd93c2fFow\n  32:        0x1042996f2 - boxed::F.FnBox<A>::call_box::h5084478766513466170\n  33:        0x1081f856d - sys::thread::Thread::new::thread_start::hc131c4deb753ff20oNv\n  34:     0x7fff8de30267 - _pthread_body\n  35:     0x7fff8de301e4 - _pthread_start\n\nCould not compile `bugreport`.\n```\n\n**Notes**\nSimilar errors can be elicited with other imports (e.g. using `BitOr` instead of `BitXor`) or when the qualified identifier will _definitely_ not be found elsewhere (e.g. referring to `BitXor::nonexistent_name` instead of `BitXor::bitor`).\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28344/timeline", "performed_via_github_app": null, "state_reason": "completed"}