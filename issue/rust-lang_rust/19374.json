{"url": "https://api.github.com/repos/rust-lang/rust/issues/19374", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19374/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19374/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19374/events", "html_url": "https://github.com/rust-lang/rust/issues/19374", "id": 50356965, "node_id": "MDU6SXNzdWU1MDM1Njk2NQ==", "number": 19374, "title": "ICE with unboxed closures: !substs.has_regions_escaping_depth(0)", "user": {"login": "tomaka", "id": 1412254, "node_id": "MDQ6VXNlcjE0MTIyNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomaka", "html_url": "https://github.com/tomaka", "followers_url": "https://api.github.com/users/tomaka/followers", "following_url": "https://api.github.com/users/tomaka/following{/other_user}", "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions", "organizations_url": "https://api.github.com/users/tomaka/orgs", "repos_url": "https://api.github.com/users/tomaka/repos", "events_url": "https://api.github.com/users/tomaka/events{/privacy}", "received_events_url": "https://api.github.com/users/tomaka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 122406831, "node_id": "MDU6TGFiZWwxMjI0MDY4MzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-closures", "name": "A-closures", "color": "f7e101", "default": false, "description": "Area: closures (`|args| { .. }`)"}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2014-11-28T09:46:08Z", "updated_at": "2014-12-15T13:17:43Z", "closed_at": "2014-12-15T13:17:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Minimal test case:\n\n``` rust\n#![feature(unboxed_closures)]\n\nstruct A<'a> {\n    val: &'a int\n}\n\nenum X {\n    Y(Box<FnOnce(A) -> () + Send>)\n}\n```\n\n```\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'assertion failed: !substs.has_regions_escaping_depth(0)', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/librustc/middle/typeck/check/mod.rs:2109\n\nstack backtrace:\n   1:     0x7fd03cf4ef90 - rt::backtrace::imp::write::hef97d2b7b4481e2fW6s\n   2:     0x7fd03cf52060 - failure::on_fail::h9b598fcb939318f7Bxt\n   3:     0x7fd03cbb1670 - unwind::begin_unwind_inner::hf72462897f10dfac4ad\n   4:     0x7fd03b764b80 - unwind::begin_unwind::h18402204983521630185\n   5:     0x7fd03bb512d0 - middle::typeck::check::FnCtxt<'a, 'tcx>::add_trait_obligations_for_generics::h5d0b978643006544njl\n   6:     0x7fd03bb4f8f0 - middle::typeck::check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hca149489e5d69a8btQh\n   7:     0x7fd03ba59430 - vec::Vec<T>.FromIterator<T>::from_iter::h14318962915192687915\n   8:     0x7fd03bb539c0 - middle::ty_fold::super_fold_sty::h12970736008578661148\n   9:     0x7fd03bb4f8f0 - middle::typeck::check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hca149489e5d69a8btQh\n  10:     0x7fd03bb538a0 - middle::ty_fold::VecPerParamSpace<T>.TypeFoldable<'tcx>::fold_with::closure.107305\n  11:     0x7fd03ba58f80 - middle::subst::VecPerParamSpace<T>::map_enumerated::h13858992608945859188\n  12:     0x7fd03bb535c0 - middle::ty_fold::TypeFolder::fold_substs::h13915338047366102487\n  13:     0x7fd03bb539c0 - middle::ty_fold::super_fold_sty::h12970736008578661148\n  14:     0x7fd03bb4f8f0 - middle::typeck::check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hca149489e5d69a8btQh\n  15:     0x7fd03bb539c0 - middle::ty_fold::super_fold_sty::h12970736008578661148\n  16:     0x7fd03bb4f8f0 - middle::typeck::check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hca149489e5d69a8btQh\n  17:     0x7fd03bb4b0b0 - middle::typeck::check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>::check_type_defn::closure.107075\n  18:     0x7fd03bb48be0 - middle::typeck::check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>::with_fcx::h58aaf089e5fd2e9bvCh\n  19:     0x7fd03bb4dd50 - middle::typeck::check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>.Visitor<'v>::visit_item::h2cf8a83e75805833KMh\n  20:     0x7fd03bba2c30 - middle::typeck::check::check_item_types::h194caebf769e20cbtOi\n  21:     0x7fd03bf46650 - util::common::time::h4022043216362661590\n  22:     0x7fd03bf45860 - middle::typeck::check_crate::h23e3f0edbff8b71ecwM\n  23:     0x7fd03d4e5840 - driver::driver::phase_3_run_analysis_passes::hc4c79fc604c5886b2eS\n  24:     0x7fd03d4da710 - driver::driver::compile_input::hac264b2ee6a5298a8VR\n  25:     0x7fd03d55eee0 - driver::run_compiler::haa8f6fb10b50e123gUT\n  26:     0x7fd03d55edd0 - driver::run::closure.59673\n  27:     0x7fd03d36bdc0 - task::TaskBuilder::try_future::closure.38928\n  28:     0x7fd03cedcf30 - task::TaskBuilder::spawn_internal::closure.24286\n  29:     0x7fd03cbaf130 - task::Task::spawn::closure.6102\n  30:     0x7fd03cc09590 - rust_try_inner\n  31:     0x7fd03cc09580 - rust_try\n  32:     0x7fd03cbaf210 - unwind::try::h7e59352c5994e9d5pZc\n  33:     0x7fd03cbaefd0 - task::Task::run::hf30215495b09adaey6b\n  34:     0x7fd03cbaebc0 - task::Task::spawn::closure.6078\n  35:     0x7fd03cbb0970 - thread::thread_start::ha9152079db62ba4dlqc\n  36:     0x7fd03769d0c0 - start_thread\n  37:     0x7fd03c875f89 - __clone\n  38:                0x0 - <unknown>\n```\n\nrustc `fac5a0767 2014-11-26 22:37:06 +0000`\n", "closed_by": {"login": "tomaka", "id": 1412254, "node_id": "MDQ6VXNlcjE0MTIyNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomaka", "html_url": "https://github.com/tomaka", "followers_url": "https://api.github.com/users/tomaka/followers", "following_url": "https://api.github.com/users/tomaka/following{/other_user}", "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions", "organizations_url": "https://api.github.com/users/tomaka/orgs", "repos_url": "https://api.github.com/users/tomaka/repos", "events_url": "https://api.github.com/users/tomaka/events{/privacy}", "received_events_url": "https://api.github.com/users/tomaka/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19374/timeline", "performed_via_github_app": null, "state_reason": "completed"}