{"url": "https://api.github.com/repos/rust-lang/rust/issues/87938", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/87938/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/87938/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/87938/events", "html_url": "https://github.com/rust-lang/rust/issues/87938", "id": 966816698, "node_id": "MDU6SXNzdWU5NjY4MTY2OTg=", "number": 87938, "title": "Suggest a missing field when the rest of the field is found", "user": {"login": "hkmatsumoto", "id": 57856193, "node_id": "MDQ6VXNlcjU3ODU2MTkz", "avatar_url": "https://avatars.githubusercontent.com/u/57856193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hkmatsumoto", "html_url": "https://github.com/hkmatsumoto", "followers_url": "https://api.github.com/users/hkmatsumoto/followers", "following_url": "https://api.github.com/users/hkmatsumoto/following{/other_user}", "gists_url": "https://api.github.com/users/hkmatsumoto/gists{/gist_id}", "starred_url": "https://api.github.com/users/hkmatsumoto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hkmatsumoto/subscriptions", "organizations_url": "https://api.github.com/users/hkmatsumoto/orgs", "repos_url": "https://api.github.com/users/hkmatsumoto/repos", "events_url": "https://api.github.com/users/hkmatsumoto/events{/privacy}", "received_events_url": "https://api.github.com/users/hkmatsumoto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-08-11T14:22:59Z", "updated_at": "2021-09-19T13:44:15Z", "closed_at": "2021-09-19T13:44:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nGiven the following code: https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=2c9af7b21295b19d151a109261981cd2\r\n\r\n```rust\r\nenum Foo {\r\n    Bar { alpha: u8, bravo: u8, charlie: u8 },\r\n}\r\n\r\nfn foo(foo: Foo) {\r\n    match foo {\r\n        Foo::Bar {\r\n            alpha,\r\n            beta, // `bravo` miswritten as `beta` here.\r\n            charlie,\r\n        } => todo!(),\r\n    }\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0026]: variant `Foo::Bar` does not have a field named `beta`\r\n --> src/lib.rs:9:13\r\n  |\r\n9 |             beta, // `bravo` miswritten as `beta` here.\r\n  |             ^^^^ variant `Foo::Bar` does not have this field\r\n\r\nerror[E0027]: pattern does not mention field `bravo`\r\n  --> src/lib.rs:7:9\r\n   |\r\n7  | /         Foo::Bar {\r\n8  | |             alpha,\r\n9  | |             beta, // `bravo` miswritten as `beta` here.\r\n10 | |             charlie,\r\n11 | |         } => todo!(),\r\n   | |_________^ missing field `bravo`\r\n   |\r\nhelp: include the missing field in the pattern\r\n   |\r\n10 |             charlie, bravo } => todo!(),\r\n   |                    ^^^^^^^^^\r\nhelp: if you don't care about this missing field, you can explicitly ignore it\r\n   |\r\n10 |             charlie, .. } => todo!(),\r\n   |                    ^^^^^^\r\n\r\nerror: aborting due to 2 previous errors\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally the output should look like:\r\n\r\n```\r\nerror[E0026]: variant `Foo::Bar` does not have a field named `beta`\r\n --> src/lib.rs:9:13\r\n  |\r\n9 |             beta, // `bravo` miswritten as `beta` here.\r\n  |             ^^^^ help: maybe replacing this for a missing field: `bravo`\r\n```\r\n\r\nWe already provide a suggestion for similar names, for example, `brav0` is suggested to replace it for `bravo`.\r\nAnalogous to that, when the rest of the field (`alpha` & `charlie`) is mentioned, suggesting to replace the miswritten field (`beta`) for the missing field (`bravo`) can be helpful for users.\r\n<!--\r\nIf the problem is not self-explanatory, please provide a rationale for the\r\nchange.\r\n-->\r\n\r\n<!--\r\nIf dramatically different output is caused by small changes, consider also\r\nadding them here.\r\n\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions. The output might also be\r\ndifferent depending on the Edition.\r\n-->\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/87938/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/87938/timeline", "performed_via_github_app": null, "state_reason": "completed"}