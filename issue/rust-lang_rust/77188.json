{"url": "https://api.github.com/repos/rust-lang/rust/issues/77188", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/77188/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/77188/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/77188/events", "html_url": "https://github.com/rust-lang/rust/issues/77188", "id": 709020880, "node_id": "MDU6SXNzdWU3MDkwMjA4ODA=", "number": 77188, "title": "rustc panic during cargo check", "user": {"login": "aruediger", "id": 243903, "node_id": "MDQ6VXNlcjI0MzkwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/243903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aruediger", "html_url": "https://github.com/aruediger", "followers_url": "https://api.github.com/users/aruediger/followers", "following_url": "https://api.github.com/users/aruediger/following{/other_user}", "gists_url": "https://api.github.com/users/aruediger/gists{/gist_id}", "starred_url": "https://api.github.com/users/aruediger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aruediger/subscriptions", "organizations_url": "https://api.github.com/users/aruediger/orgs", "repos_url": "https://api.github.com/users/aruediger/repos", "events_url": "https://api.github.com/users/aruediger/events{/privacy}", "received_events_url": "https://api.github.com/users/aruediger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}, {"id": 583436937, "node_id": "MDU6TGFiZWw1ODM0MzY5Mzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-waiting-on-author", "name": "S-waiting-on-author", "color": "d3dddd", "default": false, "description": "Status: This is awaiting some action (such as code changes or more information) from the author."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-09-25T15:18:56Z", "updated_at": "2020-12-11T22:28:35Z", "closed_at": "2020-12-11T22:28:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "I ran `cargo check` on a rather large workspace which crashed. After running `cargo clean` it worked again.\r\n<!--\r\nThank you for finding an Internal Compiler Error! \ud83e\uddca  If possible, try to provide\r\na minimal verifiable example. You can read \"Rust Bug Minimization Patterns\" for\r\nhow to create smaller examples.\r\n\r\nhttp://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/\r\n\r\n-->\r\n\r\n### Code\r\n\r\ncan't share/minimize\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.46.0 (04488afe3 2020-08-24)\r\nbinary: rustc\r\ncommit-hash: 04488afe34512aa4c33566eb16d8c912a3ae04f9\r\ncommit-date: 2020-08-24\r\nhost: x86_64-apple-darwin\r\nrelease: 1.46.0\r\nLLVM version: 10.0\r\n```\r\n\r\n### Error output\r\n\r\n```\r\nthread 'rustc' panicked at 'index out of bounds: the len is 201074 but the index is 4303669', /rustc/04488afe34512aa4c33566eb16d8c912a3ae04f9/src/librustc_query_system/dep_graph/graph.rs:1110:15\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\n   0:        0x116bd251e - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h24bb64d98a7e25d6\r\n   1:        0x116c0af5c - core::fmt::write::h8fdc9cddb01cd8b2\r\n   2:        0x116bc3659 - std::io::Write::write_fmt::hcc3030013983bab6\r\n   3:        0x116bd6f45 - std::panicking::default_hook::{{closure}}::h95817712c5ff0736\r\n   4:        0x116bd6c82 - std::panicking::default_hook::h34e085f4e0b1062d\r\n   5:        0x10fc0e2a8 - rustc_driver::report_ice::hfdd22d24e7049cd8\r\n   6:        0x116bd75fd - std::panicking::rust_panic_with_hook::haf571858f996ac45\r\n   7:        0x116bd71a2 - rust_begin_unwind\r\n   8:        0x116c2e21f - core::panicking::panic_fmt::h11676ba6a846d9f4\r\n   9:        0x116c2e1e6 - core::panicking::panic_bounds_check::hcf74fad13e3ef2bb\r\n  10:        0x11222b8b4 - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_previous_green::h362db272e8b1d1bc\r\n  11:        0x11222b695 - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_previous_green::h362db272e8b1d1bc\r\n  12:        0x11222b695 - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_previous_green::h362db272e8b1d1bc\r\n  13:        0x11222b695 - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_previous_green::h362db272e8b1d1bc\r\n  14:        0x11222b695 - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_previous_green::h362db272e8b1d1bc\r\n  15:        0x11222b3ce - rustc_query_system::dep_graph::graph::DepGraph<K>::try_mark_green_and_read::h28f8bbf620e97fac\r\n  16:        0x1121d4966 - rustc_query_system::query::plumbing::ensure_query_impl::hcbfedf4515bc8619\r\n  17:        0x1120bf954 - rustc_typeck::check::typeck_item_bodies::he8b96cfdeeb56be3\r\n  18:        0x1122f1cc5 - rustc_middle::ty::query::<impl rustc_query_system::query::config::QueryAccessors<rustc_middle::ty::context::TyCtxt> for rustc_middle::ty::query::queries::typeck_item_bodies>::compute::h23f57413802f3312\r\n  19:        0x11213903a - rustc_middle::dep_graph::<impl rustc_query_system::dep_graph::DepKind for rustc_middle::dep_graph::dep_node::DepKind>::with_deps::ha1018702ca70e213\r\n  20:        0x112227504 - rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl::haae931d56e91db0d\r\n  21:        0x1122318a0 - rustc_data_structures::stack::ensure_sufficient_stack::hd4465b1a8c425fc1\r\n  22:        0x1121bb5b3 - rustc_query_system::query::plumbing::get_query_impl::hbe887bcc811887c5\r\n  23:        0x11226a564 - rustc_typeck::check_crate::h38efe851004fd758\r\n  24:        0x10fd5d3e8 - rustc_interface::passes::analysis::ha9bb7a4b24796f8b\r\n  25:        0x10fbf7b6a - rustc_middle::ty::query::<impl rustc_query_system::query::config::QueryAccessors<rustc_middle::ty::context::TyCtxt> for rustc_middle::ty::query::queries::analysis>::compute::h78420953c1685a80\r\n  26:        0x10fbf9194 - rustc_middle::dep_graph::<impl rustc_query_system::dep_graph::DepKind for rustc_middle::dep_graph::dep_node::DepKind>::with_deps::h32382a451221245f\r\n  27:        0x10fc58064 - rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl::hd831873ea1cb9bd1\r\n  28:        0x10fbd665d - rustc_query_system::query::plumbing::get_query_impl::h9034f3536f8e7867\r\n  29:        0x10fbf8415 - rustc_middle::ty::context::tls::enter_global::he93ce98e5ebc4597\r\n  30:        0x10fbcc869 - rustc_interface::queries::<impl rustc_interface::interface::Compiler>::enter::h0012ae73340d6403\r\n  31:        0x10fc5668e - rustc_span::with_source_map::h0844cc4c4f7b7613\r\n  32:        0x10fbcd92a - rustc_interface::interface::create_compiler_and_run::h483a0c43939b3f88\r\n  33:        0x10fbf5839 - scoped_tls::ScopedKey<T>::set::h37546a7eac193ee1\r\n  34:        0x10fc17d97 - std::sys_common::backtrace::__rust_begin_short_backtrace::habd480e85cc2cc75\r\n  35:        0x10fbda5fc - core::ops::function::FnOnce::call_once{{vtable.shim}}::h292fd0e0bfb32d51\r\n  36:        0x116be4b9d - std::sys::unix::thread::Thread::new::thread_start::hf8a0ec6cfa81ff3d\r\n  37:     0x7fff6b01c2eb - AssociationsManager::_map\r\n  38:     0x7fff6b01f249 - AssociationsManager::_map\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/77188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/77188/timeline", "performed_via_github_app": null, "state_reason": "completed"}