{"url": "https://api.github.com/repos/rust-lang/rust/issues/30462", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30462/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30462/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30462/events", "html_url": "https://github.com/rust-lang/rust/issues/30462", "id": 122972372, "node_id": "MDU6SXNzdWUxMjI5NzIzNzI=", "number": 30462, "title": "target_features for bit manipulation instruction sets", "user": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-12-18T15:51:13Z", "updated_at": "2018-09-24T18:04:04Z", "closed_at": "2018-09-24T18:04:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are currently no target features for bit manipulation instruction sets, in particular:\n- AMD's Advanced Bit Manipulation (ABM) and Trailing Bit Manipulation (TBM) instructions, and\n- Intel's Bit Manipulation Instructions (BMI1 and BMI2).\n\nSince clang has macros to detect these I guess llvm offers the ability to obtain this functionality from the CPUID as well. \n\n[Wikipedia](https://en.wikipedia.org/wiki/Bit_Manipulation_Instruction_Sets) offers a pretty good and brief review of the situation. Basically all modern processors support ABM and BMI1. Modern Intel CPUs support BMI2, and next generation AMD CPUs will as well. \n\nAMD also has TBM but these won't be supported anymore in future CPUs. \n\nHuon's [llvmin](https://github.com/huonw/llvmint) offers intrinsics for all these instruction sets but without a target config macro there is no way of wrapping these into a higher level safer abstraction portably.\n\nSo basically I would like to have target features to use in `#[cfg(_)]` for: `amb`, `bmi1`,`bmi2`, and `tmb`.\n", "closed_by": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30462/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30462/timeline", "performed_via_github_app": null, "state_reason": "completed"}