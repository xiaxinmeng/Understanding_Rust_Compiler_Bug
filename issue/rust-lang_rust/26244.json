{"url": "https://api.github.com/repos/rust-lang/rust/issues/26244", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26244/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26244/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26244/events", "html_url": "https://github.com/rust-lang/rust/issues/26244", "id": 87733517, "node_id": "MDU6SXNzdWU4NzczMzUxNw==", "number": 26244, "title": "Separate to_lowercase() into correct Unicode and simple implementations", "user": {"login": "kornelski", "id": 72159, "node_id": "MDQ6VXNlcjcyMTU5", "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kornelski", "html_url": "https://github.com/kornelski", "followers_url": "https://api.github.com/users/kornelski/followers", "following_url": "https://api.github.com/users/kornelski/following{/other_user}", "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions", "organizations_url": "https://api.github.com/users/kornelski/orgs", "repos_url": "https://api.github.com/users/kornelski/repos", "events_url": "https://api.github.com/users/kornelski/events{/privacy}", "received_events_url": "https://api.github.com/users/kornelski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-06-12T13:42:29Z", "updated_at": "2017-11-15T08:51:00Z", "closed_at": "2017-11-15T08:50:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think there are two distinct use cases for string lowercasing:\n1. to display a lowercased string to a user\n2. to manipulate strings in string algorithms (e.g. building a \"case-insensitive\" trie or other kind of index. Only having Unicode-aware case-insensitive comparison function is often not enough.)\n\nCurrently the locale-unaware `to_lowercase` tries to do both, but doesn't do either one quite right. It isn't quite correct for the first case (it handles Greek #26035, but doesn't handle Turkish), and it's quirky which makes it difficult to be used [safely](https://labs.spotify.com/2013/06/18/creative-usernames/) in the second case.\n\nTherefore I suggest splitting this function into two, e.g., `to_locale_lowercase(locale)` and `to_partial_lowercase()`: one that fully implements Unicode (requires locale specified and is good for displaying strings to people), and another which is incorrect in many cases, shouldn't be displayed to users, but preserves simple invariants of ASCII lowercasing that make it useful and safe for algorithms that need code-point-wise lowercasing.\n\nThe partial implementation should meet invariants for every valid string `a` and `b`:\n\n```\nlower(a) == lower(upper(a)) // No \u00df/SS\nlower(a) == lower(lower(a))\nlower(a) == lower(b) <=> upper(a) == upper(b)\nlower(a + b) == lower(a) + lower(b) // No \u03a3/\u03c3/\u03c2\n```\n", "closed_by": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26244/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26244/timeline", "performed_via_github_app": null, "state_reason": "completed"}