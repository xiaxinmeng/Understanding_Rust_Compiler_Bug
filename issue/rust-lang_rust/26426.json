{"url": "https://api.github.com/repos/rust-lang/rust/issues/26426", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26426/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26426/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26426/events", "html_url": "https://github.com/rust-lang/rust/issues/26426", "id": 89531531, "node_id": "MDU6SXNzdWU4OTUzMTUzMQ==", "number": 26426, "title": "casting enum to itself results in an ICE", "user": {"login": "whitequark", "id": 54771, "node_id": "MDQ6VXNlcjU0Nzcx", "avatar_url": "https://avatars.githubusercontent.com/u/54771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whitequark", "html_url": "https://github.com/whitequark", "followers_url": "https://api.github.com/users/whitequark/followers", "following_url": "https://api.github.com/users/whitequark/following{/other_user}", "gists_url": "https://api.github.com/users/whitequark/gists{/gist_id}", "starred_url": "https://api.github.com/users/whitequark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whitequark/subscriptions", "organizations_url": "https://api.github.com/users/whitequark/orgs", "repos_url": "https://api.github.com/users/whitequark/repos", "events_url": "https://api.github.com/users/whitequark/events{/privacy}", "received_events_url": "https://api.github.com/users/whitequark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-19T10:43:37Z", "updated_at": "2015-06-19T12:00:07Z", "closed_at": "2015-06-19T12:00:07Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Excerpt:\n\n``` rust\n#[derive(Copy, Clone, PartialEq, Eq, Debug)]\n#[repr(i32)]\npub enum Flicker {\n    AC_60Hz         = 0,\n    AC_50Hz         = 1,\n    DC              = 2,\n}\nextern {\n    fn Toupcam_get_HZ(h: *mut Handle, nHZ: *mut Flicker) -> HRESULT;\n}\nstruct Handle;\nstruct Toupcam { handle: *mut Handle };\nimpl Toupcam {\n    pub fn flicker_compensation(self: &mut Toupcam) -> Flicker {\n        unsafe {\n            let mut hz: Flicker = std::mem::zeroed();\n            accept(Toupcam_get_HZ(self.handle, &mut hz));\n            hz as Flicker\n            // hz \u2190 this works\n        }\n    }\n}\n```\n\nrustc:\n\n```\nrustc 1.1.0-nightly (c033d9828 2015-05-09) (built 2015-05-09)\n```\n\nBacktrace:\n\n```\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:230\n\nstack backtrace:\n   1:     0x7f95e0cee149 - sys::backtrace::write::hf630cda5c057d925shs\n   2:     0x7f95e0cf60c9 - panicking::on_panic::h3cbeeb6d9cf9a057vXw\n   3:     0x7f95e0cb62a2 - rt::unwind::begin_unwind_inner::ha89a41e3e4923fa0FCw\n   4:     0x7f95de093c6d - rt::unwind::begin_unwind::h7315671891021698504\n   5:     0x7f95de09432b - diagnostic::Handler::bug::h1cc046814848dce7f8B\n   6:     0x7f95dec8e60b - session::Session::bug::hfdd24549514c30bfUOq\n   7:     0x7f95dfb8bf4b - trans::expr::trans_imm_cast::hf676a2bafa8a3d58OpC\n   8:     0x7f95dfb80807 - trans::expr::trans_unadjusted::haa8fe9f5b3216facvCA\n   9:     0x7f95dfb553ed - trans::expr::trans_into::h5aace87d45cda18fl9z\n  10:     0x7f95dfad92e6 - trans::controlflow::trans_block::h83622bcb20d2285cw3u\n  11:     0x7f95dfb8179b - trans::expr::trans_rvalue_dps_unadjusted::h3e4f1c626cf22366Y7A\n  12:     0x7f95dfb553cc - trans::expr::trans_into::h5aace87d45cda18fl9z\n  13:     0x7f95dfad92e6 - trans::controlflow::trans_block::h83622bcb20d2285cw3u\n  14:     0x7f95dfad7bb6 - trans::base::trans_closure::h1623429c4a8ffbebjHh\n  15:     0x7f95dfad98da - trans::base::trans_fn::hc7a5cef88d3731c91Rh\n  16:     0x7f95dfadd6b2 - trans::base::trans_item::h1a43519c5bd06690dgi\n  17:     0x7f95dfaead07 - trans::base::trans_crate::hadadeed95ebf196004i\n  18:     0x7f95e1245d6a - driver::phase_4_translate_to_llvm::h7a1973fec1c0688cnOa\n  19:     0x7f95e121e136 - driver::compile_input::h020e6002d10336a4Qba\n  20:     0x7f95e12d7d61 - run_compiler::he8fc8a587311be2465b\n  21:     0x7f95e12d55b2 - boxed::F.FnBox<A>::call_box::h13553308903082253150\n  22:     0x7f95e12d4b79 - rt::unwind::try::try_fn::h3807368746205497482\n  23:     0x7f95e0d69068 - rust_try_inner\n  24:     0x7f95e0d69055 - rust_try\n  25:     0x7f95e12d4e14 - boxed::F.FnBox<A>::call_box::h15011448770904444204\n  26:     0x7f95e0cf4e61 - sys::thread::Thread::new::thread_start::h8bc03e8ed99cab4d1Iv\n  27:     0x7f95dad8f0a3 - start_thread\n  28:     0x7f95e094104c - clone\n  29:                0x0 - <unknown>\n```\n", "closed_by": {"login": "whitequark", "id": 54771, "node_id": "MDQ6VXNlcjU0Nzcx", "avatar_url": "https://avatars.githubusercontent.com/u/54771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whitequark", "html_url": "https://github.com/whitequark", "followers_url": "https://api.github.com/users/whitequark/followers", "following_url": "https://api.github.com/users/whitequark/following{/other_user}", "gists_url": "https://api.github.com/users/whitequark/gists{/gist_id}", "starred_url": "https://api.github.com/users/whitequark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whitequark/subscriptions", "organizations_url": "https://api.github.com/users/whitequark/orgs", "repos_url": "https://api.github.com/users/whitequark/repos", "events_url": "https://api.github.com/users/whitequark/events{/privacy}", "received_events_url": "https://api.github.com/users/whitequark/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26426/timeline", "performed_via_github_app": null, "state_reason": "completed"}