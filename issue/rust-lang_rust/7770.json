{"url": "https://api.github.com/repos/rust-lang/rust/issues/7770", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7770/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7770/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7770/events", "html_url": "https://github.com/rust-lang/rust/issues/7770", "id": 16712544, "node_id": "MDU6SXNzdWUxNjcxMjU0NA==", "number": 7770, "title": "ICE with sibling methods containing same-name-enum containing same-name-member", "user": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-07-13T08:33:59Z", "updated_at": "2013-09-17T10:25:48Z", "closed_at": "2013-09-17T10:25:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If you have two methods in an impl block, each containing an enum (with the same name), each containing at least one value with the same name, rustc gives the same LLVM symbol for the two of them and fails, as it does not include the method name in the symbol name.\n\nMinimal test case:\n\n``` rust\npub struct Foo;\nimpl Foo {\n    pub fn foo() {\n        enum Panic { Common };\n    }\n    pub fn bar() {\n        enum Panic { Common };\n    }\n}\nfn main() {\n}\n```\n\n```\nerror: internal compiler error: duplicate LLVM symbol: _ZN14__extensions__5Panic6Common7descrim17_32f9788ad4163dc87_0$x2e0E\nrust: task failed at 'explicit failure', /home/chris/vc/rust/src/libsyntax/diagnostic.rs:95\nrust: task failed at 'explicit failure', /home/chris/vc/rust/src/librustc/rustc.rs:355\nrust: domain main @0x19ffd90 root task failed\nleaked memory in rust main loop (1 objects)\nrustc: /home/chris/vc/rust/src/rt/memory_region.cpp:192: memory_region::~memory_region(): Assertion `false' failed.\n```\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/7770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7770/timeline", "performed_via_github_app": null, "state_reason": "completed"}