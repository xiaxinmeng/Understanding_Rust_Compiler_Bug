{"url": "https://api.github.com/repos/rust-lang/rust/issues/59861", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59861/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59861/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59861/events", "html_url": "https://github.com/rust-lang/rust/issues/59861", "id": 431752427, "node_id": "MDU6SXNzdWU0MzE3NTI0Mjc=", "number": 59861, "title": "Rust should error when move is not required", "user": {"login": "xixixao", "id": 1473433, "node_id": "MDQ6VXNlcjE0NzM0MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1473433?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xixixao", "html_url": "https://github.com/xixixao", "followers_url": "https://api.github.com/users/xixixao/followers", "following_url": "https://api.github.com/users/xixixao/following{/other_user}", "gists_url": "https://api.github.com/users/xixixao/gists{/gist_id}", "starred_url": "https://api.github.com/users/xixixao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xixixao/subscriptions", "organizations_url": "https://api.github.com/users/xixixao/orgs", "repos_url": "https://api.github.com/users/xixixao/repos", "events_url": "https://api.github.com/users/xixixao/events{/privacy}", "received_events_url": "https://api.github.com/users/xixixao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-04-10T22:46:49Z", "updated_at": "2019-04-11T17:50:28Z", "closed_at": "2019-04-11T13:54:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "From a few days playing with Rust, this seems to be the biggest fundamental issue with the language. I am using Atom IDE, it's splendid. Lint warnings are great, auto fixes are great. Here's the problem. Consider this program:\r\n\r\n```rust\r\nfn main() {\r\n    let x = \"hello\".to_string();\r\n    let z = g(x);\r\n    println!(\"{}\", z);\r\n}\r\n\r\nfn g(x: String) -> usize {\r\n    x.len()\r\n}\r\n```\r\nThis program has no warnings or compile errors. But it has one serious problem. I am moving `x` into `g`, but I don't have to! Consider an evolution of the program:\r\n\r\n```rust\r\nfn main() {\r\n    let x = \"hello\".to_string();\r\n    let z = g(x);\r\n    let y = x;\r\n    println!(\"{}{}\", y, z);\r\n}\r\n\r\nfn g(x: String) -> usize {\r\n    x.len()\r\n}\r\n```\r\nNow I get an error about borrowing after move. First of all, the compiler doesn't guide me to change `g`. That is probably the main reason why Rust is so hard for new comers. It's not obvious how to satisfy the checker. This might not be always easily \"suggestable\".\r\n\r\nThe real trouble is, that `g` in reality can be a library function. Now we have to rely on people designing their libraries in a way that is usable. I'm not sure (because I'm super new to the ecosystem) how this works out in reality.\r\n\r\nThere are legitimate use cases to violate this rule (mainly `drop` itself), there could be a way to ignore this lint/error.\r\n\r\nMaybe I'm missing something obvious. Would love to hear about it, as I'm just learning.\r\n\r\nP.S.: If it turns out this is not an issue at all, I'm voting for the lack of string interpolation to be the second most obvious gap in the language.", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59861/timeline", "performed_via_github_app": null, "state_reason": "completed"}