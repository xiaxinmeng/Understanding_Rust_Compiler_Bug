{"url": "https://api.github.com/repos/rust-lang/rust/issues/15228", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15228/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15228/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15228/events", "html_url": "https://github.com/rust-lang/rust/issues/15228", "id": 36708135, "node_id": "MDU6SXNzdWUzNjcwODEzNQ==", "number": 15228, "title": "Make Rust cross-compiler for i686-unknown-linux-gnu target fails", "user": {"login": "Virtlink", "id": 647530, "node_id": "MDQ6VXNlcjY0NzUzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/647530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Virtlink", "html_url": "https://github.com/Virtlink", "followers_url": "https://api.github.com/users/Virtlink/followers", "following_url": "https://api.github.com/users/Virtlink/following{/other_user}", "gists_url": "https://api.github.com/users/Virtlink/gists{/gist_id}", "starred_url": "https://api.github.com/users/Virtlink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Virtlink/subscriptions", "organizations_url": "https://api.github.com/users/Virtlink/orgs", "repos_url": "https://api.github.com/users/Virtlink/repos", "events_url": "https://api.github.com/users/Virtlink/events{/privacy}", "received_events_url": "https://api.github.com/users/Virtlink/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-06-27T22:13:22Z", "updated_at": "2015-01-10T10:29:32Z", "closed_at": "2014-09-12T20:15:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to build Rust to cross-compile to _i686-unknown-linux-gnu_, but I keep running into errors.\n\nOn a fresh installation of [Linux Mint 17 Qiana MATE 64-bit](http://www.linuxmint.com/download.php) (in VirtualBox), I execute the following series of commands ([from here](https://github.com/pczarn/rustboot/blob/master/README.md#setup)):\n\n```\nsudo apt-get install g++\nsudo apt-get install curl\ncd\nmkdir src\ncd src\ngit clone https://github.com/rust-lang/rust.git\ncd rust\n./configure --target=i686-unknown-linux-gnu --llvm-root=/usr\nmake rustc-stage1\n```\n\nThen I get this error:\n\n```\nopening snapshot dl/rust-stage0-2014-06-21-db9af1d-linux-x86_64-bd8a6bc1f28845b7f4b768f6bfa06e7fbdcfcaae.tar.bz2\nextracting rust-stage0/bin/rustc\nmake: *** No rule to make target `x86_64-unknown-linux-gnu/rt/arch/x86_64/morestack.o', needed by `x86_64-unknown-linux-gnu/rt/libmorestack.a'.  Stop.\n```\n\nI'm using:\n- g++ 4.8.2-19ubuntu\n- clang++ not installed\n- python 2.7.6\n- perl 5.18.2\n- make 3.81\n- curl 7.35.0\n- git 1.9.1\n\n---\n\nAs [kwantam](https://github.com/rust-lang/rust/issues/15228#issuecomment-47407300) pointed out, I needed to remove `--llvm-root`.\n\nThen I got another error:\n\n```\nmake[1]: Entering directory `/home/lennard/src/rust/src/compiler-rt'\n  MKDIR:     /home/lennard/src/rust/i686-unknown-linux-gnu/rt/compiler-rt/triple/builtins/i386/SubDir.lib__builtins\n  COMPILE:   triple/builtins/i386: /home/lennard/src/rust/src/compiler-rt/lib/builtins/absvdi2.c\nIn file included from /usr/include/limits.h:25:0,\n                 from /usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/limits.h:168,\n                 from /usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/syslimits.h:7,\n                 from /usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/limits.h:34,\n                 from /home/lennard/src/rust/src/compiler-rt/lib/builtins/int_lib.h:44,\n                 from /home/lennard/src/rust/src/compiler-rt/lib/builtins/absvdi2.c:15:\n/usr/include/features.h:374:25: fatal error: sys/cdefs.h: No such file or directory\n #  include <sys/cdefs.h>\n                         ^\ncompilation terminated.\nmake[1]: *** [/home/lennard/src/rust/i686-unknown-linux-gnu/rt/compiler-rt/triple/builtins/i386/SubDir.lib__builtins/absvdi2.o] Error 1\nmake[1]: Leaving directory `/home/lennard/src/rust/src/compiler-rt'\nmake: *** [i686-unknown-linux-gnu/rt/libcompiler-rt.a] Error 2\n```\n\nTo solve this, I had to do [`sudo apt-get install libc6-dev-i386`](http://askubuntu.com/a/485634/247990).\n\n---\n\nThen I got another error:\n\n```\nchecking whether utrace(2) is compilable... no\nchecking whether valgrind is compilable... no\nchecking whether a program using __builtin_ffsl is compilable... no\nchecking whether a program using ffsl is compilable... no\nconfigure: error: Cannot build without ffsl(3) or __builtin_ffsl()\nmake: *** [i686-unknown-linux-gnu/rt/jemalloc/lib/libjemalloc_pic.a] Error 1\n```\n\nIt is a mistake on my end? Or am I missing some other dependency?\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15228/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15228/timeline", "performed_via_github_app": null, "state_reason": "completed"}