{"url": "https://api.github.com/repos/rust-lang/rust/issues/101337", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101337/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101337/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101337/events", "html_url": "https://github.com/rust-lang/rust/issues/101337", "id": 1360482685, "node_id": "I_kwDOAAsO6M5RF1F9", "number": 101337, "title": "Support for showing explicit enum discriminant values in rustdoc", "user": {"login": "Enselic", "id": 115040, "node_id": "MDQ6VXNlcjExNTA0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/115040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Enselic", "html_url": "https://github.com/Enselic", "followers_url": "https://api.github.com/users/Enselic/followers", "following_url": "https://api.github.com/users/Enselic/following{/other_user}", "gists_url": "https://api.github.com/users/Enselic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Enselic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Enselic/subscriptions", "organizations_url": "https://api.github.com/users/Enselic/orgs", "repos_url": "https://api.github.com/users/Enselic/repos", "events_url": "https://api.github.com/users/Enselic/events{/privacy}", "received_events_url": "https://api.github.com/users/Enselic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-09-02T18:09:49Z", "updated_at": "2022-09-02T20:59:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, enum discriminant values are not included in the HTML output. The code\r\n\r\n```rust\r\npub enum E {\r\n    V = 42,\r\n}\r\n```\r\n\r\nrenders like this:\r\n<img width=\"353\" alt=\"187080081-aa71e5f4-8304-4574-8de1-a16a7aefccd4\" src=\"https://user-images.githubusercontent.com/115040/188211722-21f88777-3404-44b6-b87d-9ae1f8e902cd.png\">\r\n\r\nHowever, it is easy to imagine a public API where the discriminant value matters. For example, some lib code could look like this:\r\n\r\n```rust\r\n#[repr(u8)]\r\npub enum Key {\r\n    A = 65, // the value is the ASCII code for 'A'\r\n}\r\n```\r\n\r\nand client code like this:\r\n\r\n```rust\r\nlet key = std::io::stdin().bytes().next().unwrap().unwrap();\r\nif key == Key::A as u8 {\r\n    println!(\"A was typed\")\r\n}\r\n```\r\n\r\nIn this example, the enum discriminant value is part of the public API of the library, so it would make sense to somehow make rustdoc include enum discriminant values in the rendered HTML.\r\n\r\nDepending on the context, it is however perfectly reasonable to consider enum discriminant values to be an implementation detail, even explicit enum discriminant values. So it should also be supported to make sure they are NOT displayed.\r\n\r\nThe exact mechanism for this is still to be decided. See [Zulip](https://rust-lang.zulipchat.com/#narrow/stream/266220-rustdoc/topic/Enum.20discriminant.20values.20in.20HTML.20output) for some discussion on this. But most likely rustdoc should *never* show the enum discriminant value if they are not explicitly defined.\r\n\r\n@rustbot label T-rustdoc", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101337/timeline", "performed_via_github_app": null, "state_reason": null}