{"url": "https://api.github.com/repos/rust-lang/rust/issues/23106", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23106/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23106/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23106/events", "html_url": "https://github.com/rust-lang/rust/issues/23106", "id": 60066411, "node_id": "MDU6SXNzdWU2MDA2NjQxMQ==", "number": 23106, "title": "empty `# ` in doc-test causes failure", "user": {"login": "Byron", "id": 63622, "node_id": "MDQ6VXNlcjYzNjIy", "avatar_url": "https://avatars.githubusercontent.com/u/63622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Byron", "html_url": "https://github.com/Byron", "followers_url": "https://api.github.com/users/Byron/followers", "following_url": "https://api.github.com/users/Byron/following{/other_user}", "gists_url": "https://api.github.com/users/Byron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Byron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Byron/subscriptions", "organizations_url": "https://api.github.com/users/Byron/orgs", "repos_url": "https://api.github.com/users/Byron/repos", "events_url": "https://api.github.com/users/Byron/events{/privacy}", "received_events_url": "https://api.github.com/users/Byron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2015-03-06T06:50:59Z", "updated_at": "2015-04-10T20:44:19Z", "closed_at": "2015-04-10T19:17:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When using the following as module level or item level doc test (module level shown in example) ...\n\n``````\n//! ```test_harness,norun\n//! # // This is hidden, but the following empty hidden line causes trouble. \n//! # // There is indeed a space after '#'\n//! # \n//! # #[test] fn egal() {\n//! // visible\n//! # }\n``````\n\n... the generated markdown looks like this ... \n![screen shot 2015-03-05 at 13 03 10](https://cloud.githubusercontent.com/assets/63622/6504468/03f35f36-c338-11e4-8c48-02c8bbd47d4f.png)\n... and the output of `cargo test` like that:\n\n``` bash\n[...]\n---- _0 stdout ----\n        <anon>:5:1: 5:2 error: expected one of `!` or `[`, found `#`\n<anon>:5 #[test] fn egal() {\n         ^\nthread '_0' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:92\n[...]\n```\n\nIf the empty hidden line `#` is removed, it will work such as in the following:\n\n``````\n//! ```test_harness,norun\n//! # // The hidden empty line was removed, which fixes the issue.\n//! # #[test] fn egal() {\n//! // visible\n//! # }\n``````\n\nThis is a minor issue, but one that can cause some headaches as people might just not understand what's wrong that easily, at least when looking at the error messages.\n\nDesired behaviour would be to just ignore empty hidden lines entirely.\n### Meta\n\n``` bash\n\u2717 cargo --version\ncargo 0.0.1-pre-nightly (5773064 2015-02-25) (built 2015-02-25)\n\u2717 rustc --version --verbose\nrustc 1.0.0-nightly (4db0b3246 2015-02-25) (built 2015-02-25)\nbinary: rustc\ncommit-hash: 4db0b32467535d718d6474de7ae8d1007d900818\ncommit-date: 2015-02-25\nbuild-date: 2015-02-25\nhost: x86_64-apple-darwin\nrelease: 1.0.0-nightly\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23106/timeline", "performed_via_github_app": null, "state_reason": "completed"}