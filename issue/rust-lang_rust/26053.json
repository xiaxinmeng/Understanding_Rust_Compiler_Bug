{"url": "https://api.github.com/repos/rust-lang/rust/issues/26053", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26053/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26053/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26053/events", "html_url": "https://github.com/rust-lang/rust/issues/26053", "id": 85745740, "node_id": "MDU6SXNzdWU4NTc0NTc0MA==", "number": 26053, "title": "\"Dynamic Symbol Retrieval Error\" using node.js mixed with rust dll file under windows", "user": {"login": "liuwa666", "id": 12774287, "node_id": "MDQ6VXNlcjEyNzc0Mjg3", "avatar_url": "https://avatars.githubusercontent.com/u/12774287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuwa666", "html_url": "https://github.com/liuwa666", "followers_url": "https://api.github.com/users/liuwa666/followers", "following_url": "https://api.github.com/users/liuwa666/following{/other_user}", "gists_url": "https://api.github.com/users/liuwa666/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuwa666/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuwa666/subscriptions", "organizations_url": "https://api.github.com/users/liuwa666/orgs", "repos_url": "https://api.github.com/users/liuwa666/repos", "events_url": "https://api.github.com/users/liuwa666/events{/privacy}", "received_events_url": "https://api.github.com/users/liuwa666/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-06-06T12:29:23Z", "updated_at": "2019-08-19T08:05:50Z", "closed_at": "2015-06-06T17:36:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\uff0c\nI'm a new user of rust. I'm learning rust language recently. So firstly I read \"The Rust Programming Language\" eBook from its official website. In the meantime I want use nodejs libs to develop my app because there are no useful rust libs for web development. So I still use nodejs. But there are some heavy computation in my apps, So in these parts i want to use rust instead. fortunately, In the section 3.3(https://doc.rust-lang.org/stable/book/rust-inside-other-languages.html), they introduce the ffi module can support my idea. So I followed the introduce of section 3.3 to validate this method. However, running the example always generates the following message: \n![image](https://cloud.githubusercontent.com/assets/12774287/8019622/74d2ee42-0c8a-11e5-9516-f39925a14c7d.png)\n\nMy environment is windows 8.1 64bits. io.js x64 2.2.1, ffi 1.3.1, rust 1.0.0. my machine has installed vs 2013 update 4 community version, so the node-gyp works well and the ffi module has installed successfully. the rust example code is:\n\nuse std::thread;\n\nfn process() {\nlet handles: Vec<> = (0..10).map(|| {\nthread::spawn(|| {\nlet mut _x = 0;\nfor _ in (0..5000001) {\n_x += 1\n}\n})\n}).collect();\n\nfor h in handles {\n    h.join().ok().expect(\"Could not join a thread!\");\n}\n}\n\nit is same with the The Rust Programming Language ebook. And the node.js code is same with the ebook:\n\nvar ffi = require('ffi');\n\nvar lib = ffi.Library('target/release/embed', {\n'process': [ 'void', [] ]\n});\n\nlib.process();\n\nconsole.log(\"done!\");\n\nThe dll file generated by the rust source file is called \"embed.dll\". It is generated by the command \"cargo build --release\".\n\nI want your's solution as quick as posiible, thank you very much!!\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26053/timeline", "performed_via_github_app": null, "state_reason": "completed"}