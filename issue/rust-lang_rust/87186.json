{"url": "https://api.github.com/repos/rust-lang/rust/issues/87186", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/87186/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/87186/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/87186/events", "html_url": "https://github.com/rust-lang/rust/issues/87186", "id": 946162753, "node_id": "MDU6SXNzdWU5NDYxNjI3NTM=", "number": 87186, "title": "Not detailed error message when trying to move self-referential vector", "user": {"login": "safinaskar", "id": 859494, "node_id": "MDQ6VXNlcjg1OTQ5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/859494?v=4", "gravatar_id": "", "url": "https://api.github.com/users/safinaskar", "html_url": "https://github.com/safinaskar", "followers_url": "https://api.github.com/users/safinaskar/followers", "following_url": "https://api.github.com/users/safinaskar/following{/other_user}", "gists_url": "https://api.github.com/users/safinaskar/gists{/gist_id}", "starred_url": "https://api.github.com/users/safinaskar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/safinaskar/subscriptions", "organizations_url": "https://api.github.com/users/safinaskar/orgs", "repos_url": "https://api.github.com/users/safinaskar/repos", "events_url": "https://api.github.com/users/safinaskar/events{/privacy}", "received_events_url": "https://api.github.com/users/safinaskar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 171502053, "node_id": "MDU6TGFiZWwxNzE1MDIwNTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-borrow-checker", "name": "A-borrow-checker", "color": "f7e101", "default": false, "description": "Area: The borrow checker"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}, {"id": 1839565265, "node_id": "MDU6TGFiZWwxODM5NTY1MjY1", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-terse", "name": "D-terse", "color": "c9f7a3", "default": false, "description": "A diagnostic that doesn't give enough information about the problem at hand"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-07-16T10:36:27Z", "updated_at": "2021-07-16T17:17:43Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Given the following code: https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=30b9592e45402507ee43723a5ddd6146\r\n\r\n```rust\r\nenum Foo<'a>{Bar, Baz(&'a Foo<'a>)}\r\n\r\nfn main() {\r\n    let mut v = vec![Foo::Bar, Foo::Bar];\r\n    {\r\n        let r = &mut v[..];\r\n        match r.split_first_mut() {\r\n            None => panic!(\"Impossible\"),\r\n            Some((head, tail)) => {\r\n                tail[0] = Foo::Baz(head);\r\n            },\r\n        };\r\n    };\r\n    let v2 = v;\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nwarning: unused variable: `v2`\r\n  --> src/lib.rs:14:9\r\n   |\r\n14 |     let v2 = v;\r\n   |         ^^ help: if this is intentional, prefix it with an underscore: `_v2`\r\n   |\r\n   = note: `#[warn(unused_variables)]` on by default\r\n\r\nerror[E0505]: cannot move out of `v` because it is borrowed\r\n  --> src/lib.rs:14:14\r\n   |\r\n6  |         let r = &mut v[..];\r\n   |                      - borrow of `v` occurs here\r\n...\r\n14 |     let v2 = v;\r\n   |              ^\r\n   |              |\r\n   |              move out of `v` occurs here\r\n   |              borrow later used here\r\n```\r\n\r\nI used 1.55.0-nightly, Rust 2018.\r\n\r\nThis code, of course, should not work. But error message is too small. The error says \"borrow later used here\", but it doesn't explain how the borrow used there.\r\n\r\nThe message surely doesn't print all context that caused the error. If I comment line 10, the error will disappear. But the original error doesn't mention line 10!", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/87186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/87186/timeline", "performed_via_github_app": null, "state_reason": null}