{"url": "https://api.github.com/repos/rust-lang/rust/issues/7740", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7740/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7740/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7740/events", "html_url": "https://github.com/rust-lang/rust/issues/7740", "id": 16666031, "node_id": "MDU6SXNzdWUxNjY2NjAzMQ==", "number": 7740, "title": "ICE when declaring static char inside a function", "user": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-07-12T04:25:36Z", "updated_at": "2013-09-05T13:00:48Z", "closed_at": "2013-09-05T13:00:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Minimal test case:\n\n``` rust\nfn main() {\n    static A: &'static char = &'A';\n}\n```\n\nAlso tried a couple of other types; crashes with a `u8`, doesn't crash with a `str`.\n\n```\n$ RUST_LOG=rustc=1,::rt::backtrace rustc bad.rs\nrust: task failed at 'No enclosing scope for id 7', /home/chris/vc/rust/src/librustc/middle/region.rs:121\n/home/chris/opt/rust/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fa7f8d9076b]\n/home/chris/opt/rust/bin/../lib/librustrt.so(+0x2c0c9)[0x7fa7f8da20c9]\n/home/chris/opt/rust/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7fa7f8d927b8]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x59b)[0x7fa7fa8e22db]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dd32)[0x7fa7fa8e1d32]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dc61)[0x7fa7fa8e1c61]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dcec)[0x7fa7fa8e1cec]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dc61)[0x7fa7fa8e1c61]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys14__extensions__10meth_109519fail_with17_d96679812a86c36714_0$x2e8$x2dpreE+0x7b)[0x7fa7fa838fbb]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle6region14__extensions__10meth_7153210encl_scope16_07d3310c43b907714_0$x2e8$x2dpreE+0xcf)[0x7fa7f95c08af]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x6314eb)[0x7fa7f95f84eb]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle18mem_categorization14__extensions__10meth_7377119cat_expr_unadjusted17_683e145e9333e52a14_0$x2e8$x2dpreE+0xb6c)[0x7fa7f95f702c]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle18mem_categorization14__extensions__10meth_737698cat_expr17_683e145e9333e52a14_0$x2e8$x2dpreE+0x16b)[0x7fa7f95f639b]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle18mem_categorization8cat_expr17_8bc74df1a33e285114_0$x2e8$x2dpreE+0x5b)[0x7fa7f95ef9fb]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck14__extensions__10meth_713678cat_expr17_683e145e9333e52a14_0$x2e8$x2dpreE+0x47)[0x7fa7f95baeb7]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck12gather_loans20gather_loans_in_expr17_9ac743166529fa5c14_0$x2e8$x2dpreE+0x1d07)[0x7fa7f95b7bf7]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c9819)[0x7fa7f9190819]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c958a)[0x7fa7f919058a]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1cd5c6)[0x7fa7f91945c6]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1cbc50)[0x7fa7f9192c50]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck12gather_loans15add_stmt_to_map16_e77dfbedc63106514_0$x2e8$x2dpreE+0x12a)[0x7fa7f95b9bba]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1bdfed)[0x7fa7f9184fed]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck12gather_loans21gather_loans_in_block17_b194266daf4fe94614_0$x2e8$x2dpreE+0xf5)[0x7fa7f95b93f5]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck12gather_loans12gather_loans17_d9b64e693c94523614_0$x2e8$x2dpreE+0x4ee)[0x7fa7f95b1afe]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck11borrowck_fn17_a5de7b93bc5f209c14_0$x2e8$x2dpreE+0x178)[0x7fa7f95e3388]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c9970)[0x7fa7f9190970]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c958a)[0x7fa7f919058a]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c8865)[0x7fa7f918f865]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x1c85f5)[0x7fa7f918f5f5]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x5b23d4)[0x7fa7f95793d4]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle8borrowck11check_crate17_23db9f9f8380cf2d14_0$x2e8$x2dpreE+0x4da)[0x7fa7f95df58a]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x815ad1)[0x7fa7f97dcad1]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver12compile_rest16_a7f24595f9c1d7f14_0$x2e8$x2dpreE+0x1e1b)[0x7fa7f97d9c0b]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84e3b4)[0x7fa7f98153b4]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver12compile_upto17_ac70fe6818e1c68914_0$x2e8$x2dpreE+0x13c)[0x7fa7f97dd0bc]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver13compile_input16_a54eace447e7c4014_0$x2e8$x2dpreE+0xd5)[0x7fa7f97dd455]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN12run_compiler17_e4c098586c60ab4f14_0$x2e8$x2dpreE+0x18e9)[0x7fa7f97fd1a9]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84e0de)[0x7fa7f98150de]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84ace1)[0x7fa7f9811ce1]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84044b)[0x7fa7f980744b]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84e3b4)[0x7fa7f98153b4]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0xebbb9)[0x7fa7fa8afbb9]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x18ea8c)[0x7fa7fa952a8c]\n/home/chris/opt/rust/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7fa7f8d910fb]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/chris/vc/rust/src/librustc/rustc.rs:355\n/home/chris/opt/rust/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fa7f8d9076b]\n/home/chris/opt/rust/bin/../lib/librustrt.so(+0x2c0c9)[0x7fa7f8da20c9]\n/home/chris/opt/rust/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7fa7f8d927b8]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x59b)[0x7fa7fa8e22db]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11e422)[0x7fa7fa8e2422]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dc61)[0x7fa7fa8e1c61]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11e3dc)[0x7fa7fa8e23dc]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11dc61)[0x7fa7fa8e1c61]\n/home/chris/opt/rust/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x8ba84)[0x7fa7fa84fa84]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN7monitor17_1ce38b927b935cbd14_0$x2e8$x2dpreE+0x2af5)[0x7fa7f9800825]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x84e3b4)[0x7fa7f98153b4]\n/home/chris/opt/rust/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN4main15_f3d16eaf7d573814_0$x2e8$x2dpreE+0x69)[0x7fa7f9815009]\n/home/chris/opt/rust/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7fa7f8d910fb]\nrust: domain main @0x160fd70 root task failed\n```\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/7740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7740/timeline", "performed_via_github_app": null, "state_reason": "completed"}