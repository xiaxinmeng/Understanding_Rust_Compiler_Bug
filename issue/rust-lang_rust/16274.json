{"url": "https://api.github.com/repos/rust-lang/rust/issues/16274", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16274/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16274/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16274/events", "html_url": "https://github.com/rust-lang/rust/issues/16274", "id": 39545449, "node_id": "MDU6SXNzdWUzOTU0NTQ0OQ==", "number": 16274, "title": "Infinite recursion in rustdoc", "user": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-08-05T18:00:35Z", "updated_at": "2014-09-25T09:17:48Z", "closed_at": "2014-09-25T09:17:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running rustdoc on [Servo\u2019s style crate](https://github.com/servo/servo/tree/c37ad696fc1b7d8b43c6718e998e0af640ba8ee5/src/components/style), it currently exists with `task '<unknown>' has overflowed its stack`. Running it in gdb, the stack trace repeats these four lines a large number of times:\n\n```\n#100 0x00007ffff793300d in visit_ast::RustdocVisitor$LT$$x27a$GT$::visit_item::h868ff071f9f54492HFr ()\n   from /home/simon/tmp/servo-build/x86_64-unknown-linux-gnu/rust_snapshot/rust-0.12.0-pre-x86_64-unknown-linux-gnu/lib/librustdoc-4e7c5e5c.so\n#101 0x00007ffff793802d in visit_ast::RustdocVisitor$LT$$x27a$GT$::resolve_id::hbba5c6cb8d56390bDCr ()\n   from /home/simon/tmp/servo-build/x86_64-unknown-linux-gnu/rust_snapshot/rust-0.12.0-pre-x86_64-unknown-linux-gnu/lib/librustdoc-4e7c5e5c.so\n#102 0x00007ffff7931316 in visit_ast::RustdocVisitor$LT$$x27a$GT$::visit_view_item::h500efb8576c4bd72Cyr ()\n   from /home/simon/tmp/servo-build/x86_64-unknown-linux-gnu/rust_snapshot/rust-0.12.0-pre-x86_64-unknown-linux-gnu/lib/librustdoc-4e7c5e5c.so\n#103 0x00007ffff792c960 in visit_ast::RustdocVisitor$LT$$x27a$GT$::visit_mod_contents::hfd92063fb62d99ackwr ()\n   from /home/simon/tmp/servo-build/x86_64-unknown-linux-gnu/rust_snapshot/rust-0.12.0-pre-x86_64-unknown-linux-gnu/lib/librustdoc-4e7c5e5c.so\n```\n\nRunning it with `RUST_LOG=rustdoc::visit_ast` after adding `debug!()` lines in `visit_mod_contents()` and `resolve_id()`, this is a repeating pattern in the output after piping it through `cut -d'\"' -f 1-2`\n\n```\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"longhands\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"longhands\nDEBUG:rustdoc::visit_ast: Resolve ID: 10021\nDEBUG:rustdoc::visit_ast: Resolve ID: 8287\nDEBUG:rustdoc::visit_ast: Resolve ID: 8295\nDEBUG:rustdoc::visit_ast: Resolve ID: 8296\nDEBUG:rustdoc::visit_ast: Resolve ID: 8297\nDEBUG:rustdoc::visit_ast: Resolve ID: 8298\nDEBUG:rustdoc::visit_ast: Resolve ID: 8302\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"one_component_value\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"get_ident_lower\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Resolve ID: 8303\nDEBUG:rustdoc::visit_ast: Resolve ID: 8311\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"CSSFloat\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"DEFAULT_LINE_HEIGHT\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"specified\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"specified\nDEBUG:rustdoc::visit_ast: Resolve ID: 8327\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PX\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_IN\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_CM\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_MM\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PT\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PC\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"computed\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"computed\nDEBUG:rustdoc::visit_ast: Resolve ID: 9115\nDEBUG:rustdoc::visit_ast: Resolve ID: 9116\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"computed_as_specified\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Resolve ID: 9119\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Context\nDEBUG:rustdoc::visit_ast: Visiting struct\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_Au\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_Au_with_font_size\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"parse_url\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Resolve ID: 8305\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"PropertyBitField\nDEBUG:rustdoc::visit_ast: Visiting struct\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"common_types\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"common_types\nDEBUG:rustdoc::visit_ast: Resolve ID: 8311\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"CSSFloat\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"DEFAULT_LINE_HEIGHT\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"specified\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"specified\nDEBUG:rustdoc::visit_ast: Resolve ID: 8327\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PX\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_IN\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_CM\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_MM\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PT\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"AU_PER_PC\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Length\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"computed\nDEBUG:rustdoc::visit_ast: Visiting module Some(\"computed\nDEBUG:rustdoc::visit_ast: Resolve ID: 9115\nDEBUG:rustdoc::visit_ast: Resolve ID: 9116\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"computed_as_specified\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Resolve ID: 9119\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"Context\nDEBUG:rustdoc::visit_ast: Visiting struct\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_Au\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_Au_with_font_size\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentage.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentage\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrAuto.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentageOrAuto\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting enum\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::clone::Clone\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"LengthOrPercentageOrNone.::std::cmp::PartialEq\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"compute_LengthOrPercentageOrNone\nDEBUG:rustdoc::visit_ast: Visiting fn\nDEBUG:rustdoc::visit_ast: Visiting item Item { ident: \"parse_url\nDEBUG:rustdoc::visit_ast: Visiting fn\n```\n\nI don\u2019t know how to go from here. I don\u2019t really understand what\u2019s going on in the above log.\n\nCC: @eddyb\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16274/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16274/timeline", "performed_via_github_app": null, "state_reason": "completed"}