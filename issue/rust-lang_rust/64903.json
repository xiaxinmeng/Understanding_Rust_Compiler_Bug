{"url": "https://api.github.com/repos/rust-lang/rust/issues/64903", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/64903/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/64903/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/64903/events", "html_url": "https://github.com/rust-lang/rust/issues/64903", "id": 499955480, "node_id": "MDU6SXNzdWU0OTk5NTU0ODA=", "number": 64903, "title": "rust-1.38: bootstrap linker=clang: error: failed to run custom build command for `ryu v1.0.0` // Caused by: process didn't exit successfully: `.../work/rustc-1.38.0-src/build/bootstrap/debug/build/ryu-deb3460cf2bb47d1/build-script-build` (signal: 11, SIGSEGV [...]", "user": {"login": "perfect7gentleman", "id": 7080018, "node_id": "MDQ6VXNlcjcwODAwMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7080018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfect7gentleman", "html_url": "https://github.com/perfect7gentleman", "followers_url": "https://api.github.com/users/perfect7gentleman/followers", "following_url": "https://api.github.com/users/perfect7gentleman/following{/other_user}", "gists_url": "https://api.github.com/users/perfect7gentleman/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfect7gentleman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfect7gentleman/subscriptions", "organizations_url": "https://api.github.com/users/perfect7gentleman/orgs", "repos_url": "https://api.github.com/users/perfect7gentleman/repos", "events_url": "https://api.github.com/users/perfect7gentleman/events{/privacy}", "received_events_url": "https://api.github.com/users/perfect7gentleman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-09-29T18:56:02Z", "updated_at": "2023-02-05T12:14:13Z", "closed_at": "2023-02-05T10:24:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nrunning: /tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/cargo build --manifest-path /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/Cargo.toml --verbose --locked --frozen\r\n   Compiling proc-macro2 v0.4.30\r\n   Compiling unicode-xid v0.1.0\r\n   Compiling syn v0.15.35\r\n   Compiling serde v1.0.92\r\n   Compiling libc v0.2.60\r\n   Compiling ryu v1.0.0\r\n   Compiling fixedbitset v0.1.9\r\n   Compiling cc v1.0.35\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name build_script_build /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/proc-macro2/build.rs --color always --crate-type bin --emit=dep-info,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' --cfg 'feature=\"proc-macro\"' -C metadata=73b233e31e645dad -C extra-filename=-73b233e31e645dad --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/proc-macro2-73b233e31e645dad -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name unicode_xid /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/unicode-xid/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' -C metadata=adf96169a1a7ea00 -C extra-filename=-adf96169a1a7ea00 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name build_script_build /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/syn/build.rs --color always --crate-type bin --emit=dep-info,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"clone-impls\"' --cfg 'feature=\"default\"' --cfg 'feature=\"derive\"' --cfg 'feature=\"parsing\"' --cfg 'feature=\"printing\"' --cfg 'feature=\"proc-macro\"' --cfg 'feature=\"quote\"' --cfg 'feature=\"visit\"' -C metadata=edd26050ab2cbf16 -C extra-filename=-edd26050ab2cbf16 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/syn-edd26050ab2cbf16 -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name build_script_build /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/serde/build.rs --color always --crate-type bin --emit=dep-info,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' --cfg 'feature=\"derive\"' --cfg 'feature=\"serde_derive\"' --cfg 'feature=\"std\"' -C metadata=3382a5780ebba442 -C extra-filename=-3382a5780ebba442 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/serde-3382a5780ebba442 -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name build_script_build /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/libc/build.rs --color always --crate-type bin --emit=dep-info,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' --cfg 'feature=\"std\"' -C metadata=382d8539f85e2a38 -C extra-filename=-382d8539f85e2a38 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/libc-382d8539f85e2a38 -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name build_script_build /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/ryu/build.rs --color always --crate-type bin --emit=dep-info,link -C debug-assertions=off -C overflow-checks=on -C metadata=deb3460cf2bb47d1 -C extra-filename=-deb3460cf2bb47d1 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/ryu-deb3460cf2bb47d1 -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name fixedbitset /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/fixedbitset/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=5dc644754f6e93a5 -C extra-filename=-5dc644754f6e93a5 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name cc /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/cc/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=029dea8777d25e5d -C extra-filename=-029dea8777d25e5d --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling unicode-width v0.1.5\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name unicode_width /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/unicode-width/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' -C metadata=8d9ae87263799cf8 -C extra-filename=-8d9ae87263799cf8 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling cfg-if v0.1.8\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name cfg_if /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/cfg-if/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=ef75cc763ff14f71 -C extra-filename=-ef75cc763ff14f71 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling ordermap v0.3.5\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name ordermap /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/ordermap/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=1f4b95adccf76dea -C extra-filename=-1f4b95adccf76dea --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling itoa v0.4.4\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name itoa /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/itoa/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on --cfg 'feature=\"default\"' --cfg 'feature=\"std\"' -C metadata=561c85ccf52c7602 -C extra-filename=-561c85ccf52c7602 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling lazy_static v1.3.0\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name lazy_static /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/lazy_static/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=3edae4655874533f -C extra-filename=-3edae4655874533f --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n   Compiling build_helper v0.1.0 (/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/build_helper)\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --edition=2018 --crate-name build_helper src/build_helper/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=428217be61cb03b8 -C extra-filename=-428217be61cb03b8 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -C incremental=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/incremental -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -Cdebuginfo=2 -C linker=clang`\r\n   Compiling getopts v0.2.19\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/rustc --crate-name getopts /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/vendor/getopts/src/lib.rs --color always --crate-type lib --emit=dep-info,metadata,link -C debug-assertions=off -C overflow-checks=on -C metadata=818a0bd779e64845 -C extra-filename=-818a0bd779e64845 --out-dir /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps -L dependency=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps --extern unicode_width=/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/deps/libunicode_width-8d9ae87263799cf8.rlib --cap-lints allow -Cdebuginfo=2 -C linker=clang`\r\n     Running `/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/ryu-deb3460cf2bb47d1/build-script-build`\r\nerror: failed to run custom build command for `ryu v1.0.0`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/build/bootstrap/debug/build/ryu-deb3460cf2bb47d1/build-script-build` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\nTraceback (most recent call last):\r\n  File \"./x.py\", line 11, in <module>\r\n    bootstrap.main()\r\n  File \"/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/bootstrap.py\", line 866, in main\r\n    bootstrap(help_triggered)\r\n  File \"/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/bootstrap.py\", line 837, in bootstrap\r\n    build.build_bootstrap()\r\n  File \"/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/bootstrap.py\", line 648, in build_bootstrap\r\n    run(args, env=env, verbose=self.verbose)\r\n  File \"/tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/bootstrap.py\", line 141, in run\r\n    raise RuntimeError(err)\r\nRuntimeError: failed to run: /tmp/portage/dev-lang/rust-1.38.0/work/rust-stage0/bin/cargo build --manifest-path /tmp/portage/dev-lang/rust-1.38.0/work/rustc-1.38.0-src/src/bootstrap/Cargo.toml --verbose --locked --frozen\r\n```\r\nLLVM/Clang-9.0\r\n```\r\n ~ $ clang -v\r\nclang version 9.0.0 (tags/RELEASE_900/final)\r\nTarget: x86_64-pc-linux-gnu\r\nThread model: posix\r\nInstalledDir: /usr/lib/llvm/9/bin\r\nSelected GCC installation: /usr/lib/gcc/x86_64-pc-linux-gnu/9.2.0\r\nCandidate multilib: .;@m64\r\nSelected multilib: .;@m64\r\n```\r\n```\r\n~ $ llvm-config --version\r\n9.0.0libcxx\r\n```\r\n```\r\nsys-devel/clang-9.0.0::gentoo was built with the following:\r\nUSE=\"default-compiler-rt default-libcxx -debug -doc -static-analyzer -test -xml\" LLVM_TARGETS=\"(X86) -AArch64 -AMDGPU -ARM -BPF -Hexagon -Lanai -MSP430 -Mips -NVPTX -PowerPC -RISCV -Sparc -SystemZ -WebAssembly -XCore\" PYTHON_SINGLE_TARGET=\"python3_7 -python2_7 -python3_5 -python3_6\" PYTHON_TARGETS=\"python3_7 -python2_7 -python3_5 -python3_6\"\r\nCFLAGS=\"-march=native -mtune=native -O2 -pipe -fomit-frame-pointer -fno-plt -fno-stack-protector -flto=thin\"\r\nCXXFLAGS=\"-march=native -mtune=native -O2 -pipe -fomit-frame-pointer -fno-plt -fno-stack-protector -flto=thin -stdlib=libc++\"\r\nFEATURES=\"strict distlocks parallel-install preserve-libs ipc-sandbox unmerge-logs binpkg-logs usersync assume-digests sfperms xattr unmerge-orphans protect-owned userfetch config-protect-if-modified unknown-features-warn usersandbox merge-sync binpkg-dostrip multilib-strict news network-sandbox binpkg-docompress pid-sandbox sandbox userpriv ebuild-locks parallel-fetch fixlafiles\"\r\nLDFLAGS=\"-Wl,-O2 -Wl,--as-needed -Wl,--strip-debug -Wl,--thinlto-jobs=9 -flto=thin -fuse-ld=lld\"\r\n```\r\n", "closed_by": {"login": "perfect7gentleman", "id": 7080018, "node_id": "MDQ6VXNlcjcwODAwMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7080018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfect7gentleman", "html_url": "https://github.com/perfect7gentleman", "followers_url": "https://api.github.com/users/perfect7gentleman/followers", "following_url": "https://api.github.com/users/perfect7gentleman/following{/other_user}", "gists_url": "https://api.github.com/users/perfect7gentleman/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfect7gentleman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfect7gentleman/subscriptions", "organizations_url": "https://api.github.com/users/perfect7gentleman/orgs", "repos_url": "https://api.github.com/users/perfect7gentleman/repos", "events_url": "https://api.github.com/users/perfect7gentleman/events{/privacy}", "received_events_url": "https://api.github.com/users/perfect7gentleman/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/64903/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/64903/timeline", "performed_via_github_app": null, "state_reason": "completed"}