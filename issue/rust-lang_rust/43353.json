{"url": "https://api.github.com/repos/rust-lang/rust/issues/43353", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/43353/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/43353/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/43353/events", "html_url": "https://github.com/rust-lang/rust/issues/43353", "id": 244254172, "node_id": "MDU6SXNzdWUyNDQyNTQxNzI=", "number": 43353, "title": "Closure/lifetime errors could be more informative/user friendly", "user": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-07-20T06:04:48Z", "updated_at": "2019-09-14T22:21:21Z", "closed_at": "2019-09-14T22:21:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In particular, they could tell you which captured variable(s) cause the lifetime issue\r\n\r\nE.g.,\r\n\r\n```\r\nerror[E0477]: the type `[closure@src/build/rustc.rs:60:13: 66:10 args:&[std::string::String], controller:build::rustc::RlsRustcCalls, changed:std::collections::HashMap<std::path::PathBuf, std::string::String>, buf:std::sync::Arc<std::sync::Mutex<std::vec::Vec<u8>>>]` does not fulfill the required lifetime\r\n  --> src/build/rustc.rs:60:9\r\n   |\r\n60 |         run(move || {\r\n   |         ^^^\r\n   |\r\n   = note: type must satisfy the static lifetime\r\n```\r\n\r\nIn this case `args` is the issue, but this is not described in the error.\r\n\r\nIn general, I think we could do much better here by specialising the error message for closures and deconstructing the type, rather than using the hidden struct type. I.e., given information about captured variables. The current message means you need to understand the implementation of closures to make sense of the error.\r\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/43353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/43353/timeline", "performed_via_github_app": null, "state_reason": "completed"}