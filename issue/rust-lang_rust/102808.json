{"url": "https://api.github.com/repos/rust-lang/rust/issues/102808", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/102808/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/102808/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/102808/events", "html_url": "https://github.com/rust-lang/rust/issues/102808", "id": 1401918635, "node_id": "I_kwDOAAsO6M5Tj5Sr", "number": 102808, "title": "Confusing hexadecimal floating point numbers", "user": {"login": "porky11", "id": 11576385, "node_id": "MDQ6VXNlcjExNTc2Mzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11576385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/porky11", "html_url": "https://github.com/porky11", "followers_url": "https://api.github.com/users/porky11/followers", "following_url": "https://api.github.com/users/porky11/following{/other_user}", "gists_url": "https://api.github.com/users/porky11/gists{/gist_id}", "starred_url": "https://api.github.com/users/porky11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/porky11/subscriptions", "organizations_url": "https://api.github.com/users/porky11/orgs", "repos_url": "https://api.github.com/users/porky11/repos", "events_url": "https://api.github.com/users/porky11/events{/privacy}", "received_events_url": "https://api.github.com/users/porky11/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-08T11:36:52Z", "updated_at": "2022-10-14T15:36:09Z", "closed_at": "2022-10-14T15:36:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "```rust\r\nfn main() {\r\n    let x = -0x10_f32;\r\n    println!(\"{x}\");\r\n}\r\n```\r\n\r\nI would expect this to be of type f32.\r\nOr I would expect an error message, which indicates that hexadecimal numbers or numbers without dot are not valid integers.\r\n\r\nBut this just works. It's interpreted as some integer. But not hexadecimal 10 (decimal 16), but some random huge number.\r\n\r\nAnd it's not really a bug. It's just a valid hexadecimal integer, since F is just a hexadecimal digit, and `_` can be written inside numbers at any place anyway.\r\n\r\nSo when writing this code instead, it should be clearer, why it just works as expected.\r\n\r\n```rust\r\nfn main() {\r\n    let x = -0x10F32;\r\n    println!(\"{x}\");\r\n}\r\n```\r\n\r\nIt's just the valid hexadecimal number `10F32`.\r\n\r\nTo me this seems like type annotations in rust are totally broken. And it cannot be fixed without a breaking change.\r\n(for example forcing some specific symbol before the type annotation, which cannot appear at other places in the number, like `1.0:f32` or `0x10:u32` or forcing hexadecimal to be uppercase)\r\n\r\n`_f32` can mean different things.\r\nIt can be hexadecimal digits or type annotations.\r\nIt's not wrong. You could interpret the type annotation not as a generic thing, but as something specific to number literals.\r\n\r\nBut it's still very confusing, and I don't know, what to do about it.", "closed_by": {"login": "porky11", "id": 11576385, "node_id": "MDQ6VXNlcjExNTc2Mzg1", "avatar_url": "https://avatars.githubusercontent.com/u/11576385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/porky11", "html_url": "https://github.com/porky11", "followers_url": "https://api.github.com/users/porky11/followers", "following_url": "https://api.github.com/users/porky11/following{/other_user}", "gists_url": "https://api.github.com/users/porky11/gists{/gist_id}", "starred_url": "https://api.github.com/users/porky11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/porky11/subscriptions", "organizations_url": "https://api.github.com/users/porky11/orgs", "repos_url": "https://api.github.com/users/porky11/repos", "events_url": "https://api.github.com/users/porky11/events{/privacy}", "received_events_url": "https://api.github.com/users/porky11/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/102808/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/102808/timeline", "performed_via_github_app": null, "state_reason": "completed"}