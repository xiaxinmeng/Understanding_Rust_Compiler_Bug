{"url": "https://api.github.com/repos/rust-lang/rust/issues/23178", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23178/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23178/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23178/events", "html_url": "https://github.com/rust-lang/rust/issues/23178", "id": 60253603, "node_id": "MDU6SXNzdWU2MDI1MzYwMw==", "number": 23178, "title": "OpenOptions::tuncate(true)   !=   File::open_mode(..., io::Truncate, ...)", "user": {"login": "dan-t", "id": 750714, "node_id": "MDQ6VXNlcjc1MDcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/750714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dan-t", "html_url": "https://github.com/dan-t", "followers_url": "https://api.github.com/users/dan-t/followers", "following_url": "https://api.github.com/users/dan-t/following{/other_user}", "gists_url": "https://api.github.com/users/dan-t/gists{/gist_id}", "starred_url": "https://api.github.com/users/dan-t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dan-t/subscriptions", "organizations_url": "https://api.github.com/users/dan-t/orgs", "repos_url": "https://api.github.com/users/dan-t/repos", "events_url": "https://api.github.com/users/dan-t/events{/privacy}", "received_events_url": "https://api.github.com/users/dan-t/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-03-08T12:01:48Z", "updated_at": "2015-03-08T17:55:07Z", "closed_at": "2015-03-08T17:55:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm porting some code to Rust 1.0 and found a difference in the current and\nthe previous behaviour of truncating files.\n\nPreviously I had:\n\n```\nFile::open_mode(file, io::Truncate, io::ReadWrite)\n```\n\nand now I have:\n\n```\nOpenOptions::new()\n    .truncate(true)\n    .read(true)\n    .write(true)\n    .open(file)\n```\n\nThe previous version also worked if the file at 'file' wasn't present,\nin this case the file was created. \n\nThe new version doesn't work if the file isn't present and I'm getting -\nthe unfortunately not very telling - error:\n\n```\nError { repr: Os(2) }\n```\n\n~> rustc --version --verbose\n    rustc 1.0.0-nightly (270a677d4 2015-03-07) (built 2015-03-07)\n    binary: rustc\n    commit-hash: 270a677d4d698916f5ad103f0afc3c070b8dbeb4\n    commit-date: 2015-03-07\n    build-date: 2015-03-07\n    host: x86_64-unknown-linux-gnu\n    release: 1.0.0-nightly\n\n~> lsb_release -a\n    No LSB modules are available.\n    Distributor ID: Ubuntu\n    Description:    Ubuntu 14.04.1 LTS\n    Release:        14.04\n    Codename:       trusty\n\nWhat is the right behaviour here, the previous one or the current?\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23178/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23178/timeline", "performed_via_github_app": null, "state_reason": "completed"}