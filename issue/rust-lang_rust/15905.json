{"url": "https://api.github.com/repos/rust-lang/rust/issues/15905", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15905/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15905/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15905/events", "html_url": "https://github.com/rust-lang/rust/issues/15905", "id": 38463852, "node_id": "MDU6SXNzdWUzODQ2Mzg1Mg==", "number": 15905, "title": "ICE in subst.rs (task 'rustc' failed at 'index out of bounds: the len is 1 but the index is 1', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/librustc/middle/subst.rs:420", "user": {"login": "pythonesque", "id": 923144, "node_id": "MDQ6VXNlcjkyMzE0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythonesque", "html_url": "https://github.com/pythonesque", "followers_url": "https://api.github.com/users/pythonesque/followers", "following_url": "https://api.github.com/users/pythonesque/following{/other_user}", "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions", "organizations_url": "https://api.github.com/users/pythonesque/orgs", "repos_url": "https://api.github.com/users/pythonesque/repos", "events_url": "https://api.github.com/users/pythonesque/events{/privacy}", "received_events_url": "https://api.github.com/users/pythonesque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-07-22T23:20:46Z", "updated_at": "2014-10-01T00:50:07Z", "closed_at": "2014-10-01T00:50:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Edited with a (reasonably) minimal testcase below.  Reproducible with rustc 0.12.0-pre-nightly (f15d6d28396e8700b6c3f2704204a2769e710403 2014-07-20 22:46:29 +0000) on ArchLinux on a Macbook Pro on https://github.com/pythonesque/mud.rs/blob/cee7a78e449a507f3faacf4de16232fed7df5d29/src/main.rs\n\n``` rust\n#![feature(unsafe_destructor)]\n\nfn main() {\n    trait Trait<T> {}\n    struct Struct<S>(S);\n\n    #[unsafe_destructor]\n    impl<S, T: Trait<S>> Drop for Struct<T> {\n        fn drop(&mut self) {}\n    }\n    Struct(());\n}\n```\n\n---\n\n```\n% RUST_BACKTRACE=1 cargo build          \n   Compiling mud v0.1.0 (file:/home/$HOME/dev/personal/mud.rs)\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'index out of bounds: the len is 1 but the index is 1', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/librustc/middle/subst.rs:420\n\nstack backtrace:\n   1:     0x7fc6f7010d80 - rt::backtrace::imp::write::h86f9dc98984aaec9A7p\n   2:     0x7fc6f7014220 - failure::on_fail::h03e0e71824a692d7Psq\n   3:     0x7fc6fb06b5d0 - unwind::begin_unwind_inner::h9ad6a00aad1794b670d\n   4:     0x7fc6fb06b230 - unwind::begin_unwind_fmt::ha76f7ed4dc0c1e80AYd\n   5:     0x7fc6fb06b1f0 - rust_begin_unwind\n   6:     0x7fc6fb0aecf0 - failure::begin_unwind::hb5438e30e14a068bKsj\n   7:     0x7fc6fb0b25a0 - failure::fail_bounds_check::hc18c7c2fe9e6f28aWqj\n   8:     0x7fc6fbc49ad0 - middle::typeck::check::vtable::lookup_vtables::h23a9c732dd2dfb40HZI\n   9:     0x7fc6fbb58ae0 - middle::typeck::check::vtable::trans_resolve_method::h924e60b00e7cb248zFK\n  10:     0x7fc6fbac4d40 - middle::trans::base::get_res_dtor::h148cab4191686935MYa\n  11:     0x7fc6fbac4650 - middle::trans::glue::trans_struct_drop::h6344c728b401d014seY\n  12:     0x7fc6fbac45e0 - middle::trans::glue::trans_struct_drop_flag::closure.$x22closure$x22$LP$115800$RP$\n  13:     0x7fc6fbac4290 - middle::trans::base::with_cond::hf7e5084ee7d2350c9Rb\n  14:     0x7fc6fbabe570 - middle::trans::glue::make_drop_glue::as_closure.$x22as_closure$x22$LP$115766$RP$\n  15:     0x7fc6fbabda10 - middle::trans::glue::make_generic_glue::he9f27f4c0d1a742eIHY\n  16:     0x7fc6fbab9aa0 - middle::trans::glue::get_drop_glue::h54121c91b866dd1dL4X\n  17:     0x7fc6fbab9930 - middle::trans::glue::drop_ty::h21df00a92156d02dr2X\n  18:     0x7fc6fbbec520 - middle::trans::cleanup::DropValue.Cleanup::trans::h2dd9d2d61ef253daEJv\n  19:     0x7fc6fbaae220 - middle::trans::cleanup::FunctionContext<'a>.CleanupMethods<'a>::pop_and_trans_ast_cleanup_scope::h8ca861c1072d0b147ou\n  20:     0x7fc6fbaad280 - middle::trans::controlflow::trans_stmt::h378fa113b41a1fa4jqX\n  21:     0x7fc6fbaaee80 - middle::trans::controlflow::trans_block::h10c5d442d00e4096zvX\n  22:     0x7fc6fbb62290 - middle::trans::base::trans_closure::h7e6f5cbf01f38b24Fwc\n  23:     0x7fc6fbaa2310 - middle::trans::base::trans_fn::hac67266cb4b6c569lJc\n  24:     0x7fc6fba9d2d0 - middle::trans::base::trans_item::h1d4f0e354901b9f6H1c\n  25:     0x7fc6fbb72200 - middle::trans::base::trans_crate::h59305eb6a53411cbAUd\n  26:     0x7fc6fbf934d0 - driver::driver::phase_4_translate_to_llvm::h163f2ef73368e89dbxw\n  27:     0x7fc6fbf8a1d0 - driver::driver::compile_input::h2714688c818fc93cD9v\n  28:     0x7fc6fc035640 - driver::run_compiler::hdc3f7737fe0af6fbDiz\n  29:     0x7fc6fc035550 - driver::main_args::closure.$x22closure$x22$LP$138065$RP$\n  30:     0x7fc6fc048bf0 - task::TaskBuilder<S>::try_future::closure.$x22closure$x22$LP$139209$RP$\n  31:     0x7fc6fc0489b0 - task::TaskBuilder<S>::spawn_internal::closure.$x22closure$x22$LP$139186$RP$\n  32:     0x7fc6fb3cc210 - task::spawn_opts::closure.$x22closure$x22$LP$8165$RP$\n  33:     0x7fc6fb0c2ab0 - rust_try\n  34:     0x7fc6fb068680 - unwind::try::h0fa4943ea00a482ewPd\n  35:     0x7fc6fb0683e0 - task::Task::run::hf8555f915ed22c94S0c\n  36:     0x7fc6fb3cc000 - task::spawn_opts::closure.$x22closure$x22$LP$8111$RP$\n  37:     0x7fc6fb06a660 - thread::thread_start::he6fee52c0ee35cbcqnd\n  38:     0x7fc6f6378060 - start_thread\n  39:     0x7fc6fad33489 - __clone\n  40:                0x0 - <unknown>\n```\n\nCould not execute process `rustc /home/$HOME/dev/personal/mud.rs/src/main.rs --crate-name mud --crate-type bin --out-dir /home/$HOME/dev/personal/mud.rs/target -L /home/$HOME/dev/personal/mud.rs/target -L /home/$HOME/dev/personal/mud.rs/target/deps` (status=101)\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15905/timeline", "performed_via_github_app": null, "state_reason": "completed"}