{"url": "https://api.github.com/repos/rust-lang/rust/issues/28397", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28397/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28397/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28397/events", "html_url": "https://github.com/rust-lang/rust/issues/28397", "id": 106255279, "node_id": "MDU6SXNzdWUxMDYyNTUyNzk=", "number": 28397, "title": "Internal compiler error involving boxing a closure...", "user": {"login": "Proksima", "id": 1414085, "node_id": "MDQ6VXNlcjE0MTQwODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1414085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Proksima", "html_url": "https://github.com/Proksima", "followers_url": "https://api.github.com/users/Proksima/followers", "following_url": "https://api.github.com/users/Proksima/following{/other_user}", "gists_url": "https://api.github.com/users/Proksima/gists{/gist_id}", "starred_url": "https://api.github.com/users/Proksima/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Proksima/subscriptions", "organizations_url": "https://api.github.com/users/Proksima/orgs", "repos_url": "https://api.github.com/users/Proksima/repos", "events_url": "https://api.github.com/users/Proksima/events{/privacy}", "received_events_url": "https://api.github.com/users/Proksima/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-09-14T01:29:41Z", "updated_at": "2015-09-14T08:41:09Z", "closed_at": "2015-09-14T08:41:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\ndamien@fx-8150 ~/Documents/mkt $ cargo build\n   Compiling mkt v0.1.0 (file:///home/damien/Documents/mkt)\nerror: internal compiler error: no type for node 1423: local stock (id=1423) in fcx 0x7ff9de3f1358\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', src/libsyntax/diagnostic.rs:249\n\n\nCould not compile `mkt`.\n```\n\n```\ndamien@fx-8150 ~/Documents/mkt $ export RUST_BACKTRACE=1; cargo build --verbose\n       Fresh traitobject v0.0.1\n       Fresh winapi v0.2.2\n       Fresh rustc-serialize v0.3.16\n       Fresh pkg-config v0.3.5\n       Fresh unicase v1.0.0\n       Fresh winapi-build v0.1.1\n       Fresh bitflags v0.3.2\n       Fresh typeable v0.1.2\n       Fresh lazy_static v0.1.14\n       Fresh libc v0.1.10\n       Fresh httparse v0.1.6\n       Fresh matches v0.1.2\n       Fresh language-tags v0.0.7\n       Fresh gcc v0.3.13\n       Fresh log v0.3.2\n       Fresh num_cpus v0.2.6\n       Fresh url v0.2.37\n       Fresh mime v0.1.0\n       Fresh hpack v0.2.0\n       Fresh advapi32-sys v0.1.2\n       Fresh kernel32-sys v0.1.4\n       Fresh solicit v0.4.3\n       Fresh openssl-sys v0.6.5\n       Fresh rand v0.3.11\n       Fresh time v0.1.32\n       Fresh openssl v0.6.5\n       Fresh num v0.1.27\n       Fresh cookie v0.1.21\n       Fresh chrono v0.2.16\n       Fresh hyper v0.6.11\n   Compiling mkt v0.1.0 (file:///home/damien/Documents/mkt)\n     Running `rustc src/main.rs --crate-name mkt --crate-type bin -g --out-dir /home/damien/Documents/mkt/target/debug --emit=dep-info,link -L dependency=/home/damien/Documents/mkt/target/debug -L dependency=/home/damien/Documents/mkt/target/debug/deps --extern hyper=/home/damien/Documents/mkt/target/debug/deps/libhyper-919a4d2425d9fde3.rlib --extern chrono=/home/damien/Documents/mkt/target/debug/deps/libchrono-0b07bc02e75d4749.rlib -L native=/usr/lib64 -L native=/home/damien/Documents/mkt/target/debug/build/openssl-sys-e0bd245bf09b1a3f/out`\nerror: internal compiler error: no type for node 1423: local stock (id=1423) in fcx 0x7f602fff1358\nCould not compile `mkt`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name mkt --crate-type bin -g --out-dir /home/damien/Documents/mkt/target/debug --emit=dep-info,link -L dependency=/home/damien/Documents/mkt/target/debug -L dependency=/home/damien/Documents/mkt/target/debug/deps --extern hyper=/home/damien/Documents/mkt/target/debug/deps/libhyper-919a4d2425d9fde3.rlib --extern chrono=/home/damien/Documents/mkt/target/debug/deps/libchrono-0b07bc02e75d4749.rlib -L native=/usr/lib64 -L native=/home/damien/Documents/mkt/target/debug/build/openssl-sys-e0bd245bf09b1a3f/out` (signal: 4)\n```\n\nThe code that triggered this was:\n\n``` rust\nstruct StockFeature {\n    identifier : String,\n    routine    : Box<Fn(&market::Stock, &Option<usize>) -> market::Ratio>,\n    period     : Option<usize>\n}\n\nfn parse_arguments(arguments: &Vec<String>) -> Vec<StockFeature> {\n    const FEATURES: &'static [StockFeature] = &[\n        StockFeature {\n            identifier : \"\".to_string(),\n            routine    : Box::new(|stock, period| price_to_yearly_range(stock)),\n            period     : None\n        }\n    ];\n}\n\nfn price_to_yearly_range(stock: &market::Stock) -> market::Ratio { ... }\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28397/timeline", "performed_via_github_app": null, "state_reason": "completed"}