{"url": "https://api.github.com/repos/rust-lang/rust/issues/66187", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66187/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66187/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66187/events", "html_url": "https://github.com/rust-lang/rust/issues/66187", "id": 519230988, "node_id": "MDU6SXNzdWU1MTkyMzA5ODg=", "number": 66187, "title": "ICE: believer crate, DepNode should have been pre-allocated but wasn't", "user": {"login": "maxtremblay", "id": 52462375, "node_id": "MDQ6VXNlcjUyNDYyMzc1", "avatar_url": "https://avatars.githubusercontent.com/u/52462375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxtremblay", "html_url": "https://github.com/maxtremblay", "followers_url": "https://api.github.com/users/maxtremblay/followers", "following_url": "https://api.github.com/users/maxtremblay/following{/other_user}", "gists_url": "https://api.github.com/users/maxtremblay/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxtremblay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxtremblay/subscriptions", "organizations_url": "https://api.github.com/users/maxtremblay/orgs", "repos_url": "https://api.github.com/users/maxtremblay/repos", "events_url": "https://api.github.com/users/maxtremblay/events{/privacy}", "received_events_url": "https://api.github.com/users/maxtremblay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-07T12:16:24Z", "updated_at": "2019-11-14T11:42:07Z", "closed_at": "2019-11-14T11:42:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "The compiler panics when compiling with the debug profile. Everything is fine when compiling with the release profile. \r\n\r\nThe whole project is there : \r\n\r\nhttps://github.com/matrem94/believer\r\n\r\nAnd the problem seems to be related to the simulation.rs file.\r\n\r\n\r\n```\r\n\u25b6 RUST_BACKTRACE=full cargo build\r\n   Compiling believer v0.1.5 (/Users/maximetremblay/Git/Doctorat/Codes/believer)\r\nerror: internal compiler error: src/librustc/dep_graph/graph.rs:688: DepNode Hir(believer[4397]::simulation[0]::Simulator[0]::decoder[0]) should have been pre-allocated but wasn't.\r\n\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:644:9\r\nstack backtrace:\r\n   0:        0x1100aac92 - std::panicking::default_hook::{{closure}}::h3f994bbc901f9889\r\n   1:        0x1100aa95d - std::panicking::default_hook::h6c261b7dad1af707\r\n   2:        0x10edfd183 - rustc::util::common::panic_hook::h7c64d7dc9f7bd472\r\n   3:        0x1100ab551 - std::panicking::rust_panic_with_hook::hd3c20890ac648923\r\n   4:        0x10f18f4a1 - std::panicking::begin_panic::h8de4aea8b62195f6\r\n   5:        0x10f1aacde - rustc_errors::Handler::bug::h9d8aa8edd529723f\r\n   6:        0x10eaefaeb - rustc::util::bug::opt_span_bug_fmt::{{closure}}::h5b2519026bbdd0f6\r\n   7:        0x10eaec036 - rustc::ty::context::tls::with_opt::{{closure}}::hbb53e149407d2413\r\n   8:        0x10eaeba24 - rustc::ty::context::tls::with_context_opt::h678861175c64aedc\r\n   9:        0x10eaeba52 - rustc::ty::context::tls::with_opt::he4eaecd4870bc122\r\n  10:        0x10eaefa08 - rustc::util::bug::opt_span_bug_fmt::hd0b56a5d1fb36624\r\n  11:        0x10eaef95b - rustc::util::bug::bug_fmt::hf8d5fd955211b74e\r\n  12:        0x10e8a44fc - rustc::dep_graph::graph::DepGraph::try_mark_previous_green::hb5659560bd93332c\r\n  13:        0x10e8a3ca2 - rustc::dep_graph::graph::DepGraph::try_mark_green::h9f502b3e9f93891a\r\n  14:        0x10e8a3b22 - rustc::dep_graph::graph::DepGraph::try_mark_green_and_read::hd7f8251f84c51b20\r\n  15:        0x10dcacf1b - rustc::ty::query::plumbing::<impl rustc::ty::context::TyCtxt>::get_query::h2cb68508528db73c\r\n  16:        0x10dd74aaa - <rustc_typeck::outlives::implicit_infer::InferVisitor as rustc::hir::itemlikevisit::ItemLikeVisitor>::visit_item::ha1155bd4939bfa7c\r\n  17:        0x10dbe6c6b - rustc::hir::Crate::visit_all_item_likes::hf4e9b3c2ef2aecff\r\n  18:        0x10dbfadab - rustc_typeck::outlives::inferred_outlives_crate::h21c2b5eef3b828cf\r\n  19:        0x10e88a5cc - rustc::dep_graph::graph::DepGraph::with_task_impl::h9d694d868db5893f\r\n  20:        0x10ec6b335 - rustc::ty::query::plumbing::<impl rustc::ty::context::TyCtxt>::force_query::h501a0ebb21651054\r\n  21:        0x10e8e8da0 - rustc::ty::query::plumbing::force_from_dep_node::he36efb14725f1607\r\n  22:        0x10e8a3f1a - rustc::dep_graph::graph::DepGraph::try_mark_previous_green::hb5659560bd93332c\r\n  23:        0x10e8a3e76 - rustc::dep_graph::graph::DepGraph::try_mark_previous_green::hb5659560bd93332c\r\n  24:        0x10e8a3e76 - rustc::dep_graph::graph::DepGraph::try_mark_previous_green::hb5659560bd93332c\r\n  25:        0x10e8a3e76 - rustc::dep_graph::graph::DepGraph::try_mark_previous_green::hb5659560bd93332c\r\n  26:        0x10e8a3ca2 - rustc::dep_graph::graph::DepGraph::try_mark_green::h9f502b3e9f93891a\r\n  27:        0x10e8a3b22 - rustc::dep_graph::graph::DepGraph::try_mark_green_and_read::hd7f8251f84c51b20\r\n  28:        0x10dc23fda - rustc_typeck::check_crate::{{closure}}::{{closure}}::h88859f37f778beb0\r\n  29:        0x10dc0660d - rustc::util::common::time::h5574fc4109df1e79\r\n  30:        0x10ddb350e - rustc_typeck::check_crate::hd3d3536fbf3b0e49\r\n  31:        0x10d74be02 - rustc_interface::passes::analysis::hcad3f12816e9eca0\r\n  32:        0x10d64e54e - rustc::ty::query::__query_compute::analysis::hb0de0a970c57cbb2\r\n  33:        0x10d64f95b - rustc::dep_graph::graph::DepGraph::with_task_impl::he88cd5126531ce81\r\n  34:        0x10d65ee22 - rustc::ty::query::plumbing::<impl rustc::ty::context::TyCtxt>::get_query::h42557a88787d6bc6\r\n  35:        0x10d66c3bc - rustc_interface::passes::BoxedGlobalCtxt::access::{{closure}}::h82da36dc80c179a1\r\n  36:        0x10d7c03cb - rustc_interface::passes::create_global_ctxt::{{closure}}::h7c5122f9e1f92a0c\r\n  37:        0x10d66e5a4 - rustc_interface::interface::run_compiler_in_existing_thread_pool::hccd2bcadbc139216\r\n  38:        0x10d6a1d84 - std::thread::local::LocalKey<T>::with::hbac3e7e9261fbd2e\r\n  39:        0x10d6b7938 - syntax::with_globals::hfe34f7386578f1b1\r\n  40:        0x10d649807 - std::sys_common::backtrace::__rust_begin_short_backtrace::h8c72b957923268ac\r\n  41:        0x1100ba7cf - __rust_maybe_catch_panic\r\n  42:        0x10d6701d7 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h9e905121832ca0e9\r\n  43:        0x11008e62e - <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once::h04257f365502db2d\r\n  44:        0x1100b95ce - std::sys::unix::thread::Thread::new::thread_start::haec1a494f7a7ae67\r\n  45:     0x7fff78eea2eb - _pthread_body\r\n  46:     0x7fff78eed249 - _pthread_start\r\nquery stack during panic:\r\n#0 [type_of] processing `simulation::Simulator::decoder`\r\n#1 [inferred_outlives_crate] computing the inferred outlives predicates for items in this crate\r\n#2 [analysis] running analysis passes on this crate\r\nend of query stack\r\nerror: aborting due to previous error\r\n\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.38.0 (625451e37 2019-09-23) running on x86_64-apple-darwin\r\n\r\nnote: compiler flags: -C debuginfo=2 -C incremental --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nerror: Could not compile `believer`.\r\n```", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66187/timeline", "performed_via_github_app": null, "state_reason": "completed"}