{"url": "https://api.github.com/repos/rust-lang/rust/issues/16998", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16998/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16998/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16998/events", "html_url": "https://github.com/rust-lang/rust/issues/16998", "id": 42003283, "node_id": "MDU6SXNzdWU0MjAwMzI4Mw==", "number": 16998, "title": "Implement an inline-only growable (bounded) 'vector'", "user": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 166999014, "node_id": "MDU6TGFiZWwxNjY5OTkwMTQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-collections", "name": "A-collections", "color": "f7e101", "default": false, "description": "Area: std::collections."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2014-09-05T01:04:09Z", "updated_at": "2015-02-15T19:02:18Z", "closed_at": "2015-02-15T19:02:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Something like `[T, .. n]` but with a `length` field (and the correct destructor), so it's valid to store anywhere from 0 upto `n` `T`s in it. This can have `T`s dynamically pushed and popped, but attempting to push more than `n` would be an error. I.e.\n\n``` rust\nlet mut x = FourBoundedArray::new(); // n == 4\nprintln!(\"{}\", x); // []\nx.push(1);\nprintln!(\"{}\", x); // [1]\nx.push(2);\nx.push(3);\nx.push(4);\nprintln!(\"{}\", x); // [1, 2, 3, 4]\nx.pop();\nprintln!(\"{}\", x); // [1, 2, 3]\n\nx.push(5);\nx.push(6); // error\n```\n\n(The error could either be `fail!` or a `Result<(), ...>` return value.)\n\nThis is useful for data structures like 2-4-trees, B-trees etc., where they have internal nodes that store a sequence of keys with variable, but bounded, length. At the moment the only safe way to encode this is either a heap allocation (`Vec`) or with `[Option<T>, .. n]` where the \"length\" is modeled by storing `[Some(x_1), Some(x_2), ..., Some(x_length), None, ..., None]` (this leads to a lot of `unwrap` and unnecessary branches).\n\nhttps://github.com/rust-lang/rfcs/pull/197 is related, to make the destructors work right. For full generality we would need integer type params, but we can certainly have an internal abstraction of this form in `collections` (for use in btree etc.) with the lengths required hard-coded, and generalise/publish it later.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16998/timeline", "performed_via_github_app": null, "state_reason": "completed"}