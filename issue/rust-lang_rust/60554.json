{"url": "https://api.github.com/repos/rust-lang/rust/issues/60554", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60554/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60554/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60554/events", "html_url": "https://github.com/rust-lang/rust/issues/60554", "id": 440413983, "node_id": "MDU6SXNzdWU0NDA0MTM5ODM=", "number": 60554, "title": "single-use-lifetime warning not satisifiable with '_ , \" `'_` is a reserved lifetime name \"", "user": {"login": "kentfredric", "id": 44790, "node_id": "MDQ6VXNlcjQ0Nzkw", "avatar_url": "https://avatars.githubusercontent.com/u/44790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kentfredric", "html_url": "https://github.com/kentfredric", "followers_url": "https://api.github.com/users/kentfredric/followers", "following_url": "https://api.github.com/users/kentfredric/following{/other_user}", "gists_url": "https://api.github.com/users/kentfredric/gists{/gist_id}", "starred_url": "https://api.github.com/users/kentfredric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kentfredric/subscriptions", "organizations_url": "https://api.github.com/users/kentfredric/orgs", "repos_url": "https://api.github.com/users/kentfredric/repos", "events_url": "https://api.github.com/users/kentfredric/events{/privacy}", "received_events_url": "https://api.github.com/users/kentfredric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 3942537418, "node_id": "LA_kwDOAAsO6M7q_ljK", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-lint-single_use_lifetimes", "name": "F-lint-single_use_lifetimes", "color": "f9c0cc", "default": false, "description": "`single_use_lifetimes` lint"}], "state": "closed", "locked": false, "assignee": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-05-05T07:49:04Z", "updated_at": "2022-05-20T18:21:24Z", "closed_at": "2022-05-20T18:21:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Minimal Proof:\r\n\r\n```rust\r\n\r\n\r\nuse std::borrow::Cow;\r\n#[warn(single_use_lifetimes)]\r\npub fn good<'a,S>( value: S ) -> String \r\n    where S: Into<Cow<'a,str>>\r\n{\r\n    value.into().into_owned()\r\n}\r\n\r\nfn main() -> () {\r\n    println!(\"{}\",good(\"pass\"));\r\n}\r\n```\r\n\r\n```\r\nrustc -v mcve.rs \r\nwarning: lifetime parameter `'a` only used once\r\n --> mcve.rs:3:13\r\n  |\r\n3 | pub fn good<'a,S>( value: S ) -> String \r\n  |             ^^ this lifetime...\r\n4 |     where S: Into<Cow<'a,str>>\r\n  |                       -- ...is used only here\r\n  |\r\nnote: lint level defined here\r\n --> mcve.rs:2:8\r\n  |\r\n2 | #[warn(single_use_lifetimes)]\r\n  |        ^^^^^^^^^^^^^^^^^^^^\r\n```\r\n\r\nAlas, doing what is natural ( and what people will tell you to do on IRC channels, only to find that it doesn't work, and writing:\r\n\r\n```rust\r\nuse std::borrow::Cow;\r\n#[warn(single_use_lifetimes)]\r\npub fn good<S>( value: S ) -> String \r\n    where S: Into<Cow<'_,str>>\r\n{\r\n    value.into().into_owned()\r\n}\r\n\r\nfn main() -> () {\r\n    println!(\"{}\",good(\"pass\"));\r\n}\r\n```\r\n\r\nTrips up E0637\r\n```\r\nerror[E0637]: `'_` cannot be used here\r\n --> mcve.rs:4:23\r\n  |\r\n4 |     where S: Into<Cow<'_,str>>\r\n  |                       ^^ `'_` is a reserved lifetime name\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\nI looked at all the other open bugs in this area and I saw several that looked similar( #55057 was closest ), but none were close enough to this, in particular, the error about using a reserved lifetime is particularly odd.\r\n\r\nOther examples I saw of this understandably complained about an inferred lifetime in a *return* value,  but having problems with it in *input* values is very curious.\r\n\r\nSo apologies if this is \"a dupe\"\r\n\r\n```shell\r\nrustc -V\r\n# rustc 1.36.0-nightly (a3404557c 2019-05-03)\r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60554/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60554/timeline", "performed_via_github_app": null, "state_reason": "completed"}