{"url": "https://api.github.com/repos/rust-lang/rust/issues/49773", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49773/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49773/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49773/events", "html_url": "https://github.com/rust-lang/rust/issues/49773", "id": 312266058, "node_id": "MDU6SXNzdWUzMTIyNjYwNTg=", "number": 49773, "title": "incremental compilation: could not create session directory lock file: No locks available (os error 37)", "user": {"login": "szignal", "id": 34333653, "node_id": "MDQ6VXNlcjM0MzMzNjUz", "avatar_url": "https://avatars.githubusercontent.com/u/34333653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/szignal", "html_url": "https://github.com/szignal", "followers_url": "https://api.github.com/users/szignal/followers", "following_url": "https://api.github.com/users/szignal/following{/other_user}", "gists_url": "https://api.github.com/users/szignal/gists{/gist_id}", "starred_url": "https://api.github.com/users/szignal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/szignal/subscriptions", "organizations_url": "https://api.github.com/users/szignal/orgs", "repos_url": "https://api.github.com/users/szignal/repos", "events_url": "https://api.github.com/users/szignal/events{/privacy}", "received_events_url": "https://api.github.com/users/szignal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 26, "created_at": "2018-04-08T02:56:44Z", "updated_at": "2022-04-20T17:17:42Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I was unable to incrementally compile using cargo build.\r\n\r\nI had added the rand dependency to the toml file, per the advice of the Guessing Game exercise in Rust Programming Language (Second Edition).\r\n\r\nBefore this particular error, I had just finished setting up a synced folder with NFS on my vagrant box (ubuntu 16.04)  where rust was installed. There is some issue using the default vagrant shared folder setup with rust.\r\n\r\nI tried this code:\r\n\r\n```rust\r\nuse std::io;\r\n\r\nfn main() {\r\n    println!(\"Guess the number\");\r\n\r\n    println!(\"Please input your guess.\");\r\n\r\n    let mut guess = String::new();\r\n\r\n    io::stdin().read_line(&mut guess)\r\n        .expect(\"Failed to read line\");\r\n\r\n    print!(\"You guessed: {}\", guess);\r\n}\r\n```\r\n\r\nI expected to see this happen:\r\n\r\ncompile\r\n\r\nInstead, this happened:\r\n\r\n```\r\n    Updating registry `https://github.com/rust-lang/crates.io-index`\r\n Downloading rand v0.3.22                                                       \r\n Downloading libc v0.2.40                                                       \r\n Downloading rand v0.4.2                                                        \r\n   Compiling libc v0.2.40                                                       \r\n   Compiling rand v0.4.2\r\n   Compiling rand v0.3.22\r\n   Compiling guessing_game v0.1.0 (file:///Rust/projects/guessing_game)\r\nerror: incremental compilation: could not create session directory lock file: No locks available (os error 37)\r\n\r\nthread 'rustc' panicked at 'librustc/session/mod.rs:727: Trying to get session directory from IncrCompSession `NotInitialized`', librustc/session/mod.rs:1180:26\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.25.0 (84203cac6 2018-03-25) running on x86_64-unknown-linux-gnu\r\n\r\nerror: Could not compile `guessing_game`.\r\n```\r\n\r\n`rustc --version --verbose`:\r\n\r\n```\r\nrustc 1.25.0 (84203cac6 2018-03-25)\r\nbinary: rustc\r\ncommit-hash: 84203cac67e65ca8640b8392348411098c856985\r\ncommit-date: 2018-03-25\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.25.0\r\nLLVM version: 6.0\r\n```\r\n\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'librustc/session/mod.rs:727: Trying to get session directory from IncrCompSession `NotInitialized`', librustc/session/mod.rs:1180:26\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nstack backtrace:\r\n   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace\r\n             at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::_print\r\n             at libstd/sys_common/backtrace.rs:71\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at libstd/sys_common/backtrace.rs:59\r\n             at libstd/panicking.rs:380\r\n   3: std::panicking::default_hook\r\n             at libstd/panicking.rs:396\r\n   4: std::panicking::rust_panic_with_hook\r\n             at libstd/panicking.rs:576\r\n   5: std::panicking::begin_panic\r\n   6: rustc::session::opt_span_bug_fmt::{{closure}}\r\n   7: rustc::ty::context::tls::with_opt\r\n   8: rustc::session::opt_span_bug_fmt\r\n   9: rustc::session::bug_fmt\r\n  10: rustc::session::Session::incr_comp_session_dir\r\n  11: rustc_incremental::persist::fs::garbage_collect_session_directories\r\n  12: rustc_driver::driver::phase_2_configure_and_expand_inner::{{closure}}\r\n  13: rustc_driver::driver::phase_2_configure_and_expand_inner\r\n  14: rustc_driver::driver::compile_input\r\n  15: rustc_driver::run_compiler\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49773/timeline", "performed_via_github_app": null, "state_reason": null}