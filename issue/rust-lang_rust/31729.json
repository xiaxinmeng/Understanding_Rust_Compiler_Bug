{"url": "https://api.github.com/repos/rust-lang/rust/issues/31729", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31729/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31729/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31729/events", "html_url": "https://github.com/rust-lang/rust/issues/31729", "id": 134325725, "node_id": "MDU6SXNzdWUxMzQzMjU3MjU=", "number": 31729, "title": "Panic after unresolved import: at 'attempted .def_id() on invalid def", "user": {"login": "wolfgang42", "id": 2261204, "node_id": "MDQ6VXNlcjIyNjEyMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2261204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolfgang42", "html_url": "https://github.com/wolfgang42", "followers_url": "https://api.github.com/users/wolfgang42/followers", "following_url": "https://api.github.com/users/wolfgang42/following{/other_user}", "gists_url": "https://api.github.com/users/wolfgang42/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolfgang42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolfgang42/subscriptions", "organizations_url": "https://api.github.com/users/wolfgang42/orgs", "repos_url": "https://api.github.com/users/wolfgang42/repos", "events_url": "https://api.github.com/users/wolfgang42/events{/privacy}", "received_events_url": "https://api.github.com/users/wolfgang42/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-02-17T16:15:22Z", "updated_at": "2016-02-17T18:38:35Z", "closed_at": "2016-02-17T18:38:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "`rustc --version --verbose`:\n\n```\nrustc 1.8.0-nightly (fae516277 2016-02-13)\nbinary: rustc\ncommit-hash: fae516277b6da46b6c1cf568765c90fad2f9ae4b\ncommit-date: 2016-02-13\nhost: i686-unknown-linux-gnu\nrelease: 1.8.0-nightly\n```\n\nRust panicked on me while I was trying to set up a module. Here's a minimal testcase:\n\n`lib.rs`:\n\n``` rust\nmod m;\npub extern fn rust_main() {\n    m::A::new();\n}\n```\n\n`m/mod.rs`:\n\n``` rust\npub use A;\n```\n\nBacktrace:\n\n```\nm/mod.rs:1:9: 1:10 error: unresolved import `A`. There is no `A` in `???`. Did you mean to use `m`? [E0432]\nm/mod.rs:1 pub use A;\n                   ^\nm/mod.rs:1:9: 1:10 help: run `rustc --explain E0432` to see a detailed explanation\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'attempted .def_id() on invalid def: Err', ../src/librustc/middle/def.rs:142\nstack backtrace:\n   1: 0xb730834c - sys::backtrace::tracing::imp::write::h387a32948d611c79yru\n   2: 0xb7311a31 - panicking::default_handler::_$u7b$$u7b$closure$u7d$$u7d$::closure.43392\n   3: 0xb73114f8 - panicking::default_handler::hbf5aa91fdd0e1426mZy\n   4: 0xb72d6339 - sys_common::unwind::begin_unwind_inner::hea259e071eb3dc55ngt\n   5: 0xb72d6dd7 - sys_common::unwind::begin_unwind_fmt::had5362fd9bafeb0ctft\n   6: 0xb60084b4 - middle::def::Def::def_id::hef18388ebff5ec86tys\n   7: 0xb6caed36 - Resolver<'a, 'tcx>::resolve_path::h1ce47674c3a213038Sf\n   8: 0xb6cb346a - Resolver<'a, 'tcx>::resolve_possibly_assoc_item::ha95ba1347bcc1bbbMQf\n   9: 0xb6c8c28e - Resolver<'a, 'tcx>::resolve_expr::hb74f3c390e893b10cmg\n  10: 0xb6cb9812 - intravisit::walk_expr::h1636770688153136850\n  11: 0xb6c8e92d - Resolver<'a, 'tcx>::resolve_expr::hb74f3c390e893b10cmg\n  12: 0xb6c8b998 - Resolver<'a, 'tcx>::resolve_block::h1690ef974f337496qof\n  13: 0xb6c9468b - Resolver<'a, 'tcx>::resolve_function::h467d20f519802367S3e\n  14: 0xb6ca2129 - intravisit::walk_item::h6828430058389820728\n  15: 0xb6c89afc - Resolver<'a, 'tcx>::resolve_item::h6a78afdf3910c505yQe\n  16: 0xb6cba644 - resolve_crate::h5df60da85863a96eKUg\n  17: 0xb762084e - driver::phase_3_run_analysis_passes::h17332131489947047735\n  18: 0xb75f560c - driver::compile_input::h9355f12a614fab1eBca\n  19: 0xb75e575a - run_compiler::h3b7dbf7e780f38ff8Gc\n  20: 0xb75e29b9 - sys_common::unwind::try::try_fn::h12326713950973088752\n  21: 0xb7305d07 - __rust_try\n  22: 0xb72fd876 - sys_common::unwind::inner_try::hb7a6267c6246d1cepdt\n  23: 0xb75e32ef - boxed::F.FnBox<A>::call_box::h13838458491994583776\n  24: 0xb730febb - sys::thread::Thread::new::thread_start::hbf982ddd460a42b7GWx\n  25: 0xb2666f6f - start_thread\n  26: 0xb718abed - clone\n  27:        0x0 - <unknown>\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31729/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31729/timeline", "performed_via_github_app": null, "state_reason": "completed"}