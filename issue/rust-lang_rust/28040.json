{"url": "https://api.github.com/repos/rust-lang/rust/issues/28040", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28040/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28040/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28040/events", "html_url": "https://github.com/rust-lang/rust/issues/28040", "id": 103467083, "node_id": "MDU6SXNzdWUxMDM0NjcwODM=", "number": 28040, "title": "Panic in libsyntax/ext/quote.rs", "user": {"login": "SeanRBurton", "id": 7056847, "node_id": "MDQ6VXNlcjcwNTY4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7056847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanRBurton", "html_url": "https://github.com/SeanRBurton", "followers_url": "https://api.github.com/users/SeanRBurton/followers", "following_url": "https://api.github.com/users/SeanRBurton/following{/other_user}", "gists_url": "https://api.github.com/users/SeanRBurton/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanRBurton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanRBurton/subscriptions", "organizations_url": "https://api.github.com/users/SeanRBurton/orgs", "repos_url": "https://api.github.com/users/SeanRBurton/repos", "events_url": "https://api.github.com/users/SeanRBurton/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanRBurton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-08-27T09:27:59Z", "updated_at": "2016-05-06T17:13:38Z", "closed_at": "2016-05-06T17:13:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using a macro argument (e.g. $x) inside of quote_expr! causes an internal compiler error.\n## Testcase\n\n```\n#![feature(quote)]                                                              \nfn main() {                                                                     \n    macro_rules! foo {                                                          \n        ($bar:expr)  => {{                                                      \n            quote_expr!(cx, {                                                   \n                $bar                                                            \n            })                                                                  \n        }}                                                                      \n    }                                                                           \n    foo!(0);                                                                    \n}                                                                               \n```\n## Meta\n\n`rustc --version --verbose`:\n\nrustc 1.5.0-nightly (32a8567ea 2015-10-05)\nbinary: rustc\ncommit-hash: 32a8567ea4ded47ac4cfd39bc808bb8d6f2e119c\ncommit-date: 2015-10-05\nhost: x86_64-unknown-linux-gnu\nrelease: 1.5.0-nightly\n\nBacktrace:\n\n   1:     0x7f99dd582940 - sys::backtrace::tracing::imp::write::he27ef2eb40e30753Plt\n   2:     0x7f99dd589215 - panicking::log_panic::_<closure>::closure.39293\n   3:     0x7f99dd588c85 - panicking::log_panic::h20a17353a34447751lx\n   4:     0x7f99dd54d783 - sys_common::unwind::begin_unwind_inner::hf876a8bedc1a7d89gds\n   5:     0x7f99d72f3e3f - sys_common::unwind::begin_unwind::begin_unwind::h8566091144643397121\n   6:     0x7f99d75e3346 - ext::quote::expr_mk_token::h739fb902b08199ffVPe\n   7:     0x7f99d75e55eb - ext::quote::statements_mk_tt::hc13e258339eab598x3e\n   8:     0x7f99d75e88e0 - iter::_<impl>::next::next::h11015572762128041720\n   9:     0x7f99d75e8148 - vec::_<impl>::from_iter::from_iter::h13593900259474011105\n  10:     0x7f99d75e47e0 - ext::quote::statements_mk_tt::hc13e258339eab598x3e\n  11:     0x7f99d75df3bf - ext::quote::statements_mk_tts::ha204cd8774c6b5cbPff\n  12:     0x7f99d75dcf39 - ext::quote::expand_tts::h9307c2288d757f70Kgf\n  13:     0x7f99d75de3dc - ext::quote::expand_parse_call::h5e17b10e57da8b04rjf\n  14:     0x7f99d74d4d9d - ext::quote::expand_quote_expr::h46e9f6ebc9a4485azFe\n  15:     0x7f99d74d82f8 - ext::base::_<impl>::expand::h16087092572269147898\n  16:     0x7f99d753a46b - ext::expand::expand_expr::_<closure>::closure.68518\n  17:     0x7f99d7536ebf - ext::expand::expand_expr::h14fbac08b20b87c28mb\n  18:     0x7f99d757d9be - ext::expand::expand_block_elts::_<closure>::closure.69190\n  19:     0x7f99d7546fe3 - ext::expand::expand_block_elts::h8d61523b3ef4a0eaVec\n  20:     0x7f99d757d578 - ext::expand::expand_block::h65394bbf166baee8gec\n  21:     0x7f99d75424fa - fold::noop_fold_expr::h7291925385286886789\n  22:     0x7f99d7537147 - ext::expand::expand_expr::_<closure>::closure.68518\n  23:     0x7f99d7536ebf - ext::expand::expand_expr::h14fbac08b20b87c28mb\n  24:     0x7f99d7577b88 - fold::noop_fold_stmt::h12973173759275708851\n  25:     0x7f99d755a968 - ext::expand::expand_stmt::hd9da59f648bb2e0513b\n  26:     0x7f99d755d223 - iter::_<impl>::next::next::h14693761281653209511\n  27:     0x7f99d755cc67 - util::small_vector::_<impl>::from_iter::h2230188101519163904\n  28:     0x7f99d755bc1c - ext::expand::expand_stmt::hd9da59f648bb2e0513b\n  29:     0x7f99d757e87e - ext::expand::expand_block_elts::_<closure>::_<closure>::closure.69195\n  30:     0x7f99d757e61d - iter::_<impl>::next::next::h7445701304088993935\n  31:     0x7f99d757dcdf - vec::_<impl>::from_iter::from_iter::h1124164702553681919\n  32:     0x7f99d757d8dc - ext::expand::expand_block_elts::_<closure>::closure.69190\n  33:     0x7f99d7546fe3 - ext::expand::expand_block_elts::h8d61523b3ef4a0eaVec\n  34:     0x7f99d757d578 - ext::expand::expand_block::h65394bbf166baee8gec\n  35:     0x7f99d7546981 - ext::expand::expand_and_rename_fn_decl_and_block::h0d444361d4f5f425XCc\n  36:     0x7f99d754c399 - ext::expand::expand_item_underscore::hc4243a869f3a877bGSb\n  37:     0x7f99d759d98e - fold::noop_fold_item_simple::h8462865063037887524\n  38:     0x7f99d759d4f0 - fold::noop_fold_item::h5328529649720349753\n  39:     0x7f99d754a650 - ext::expand::expand_annotatable::hcdfa58fbdd2db5e45oc\n  40:     0x7f99d7547178 - ext::expand::expand_item::h33ee80d897456d7c5Rb\n  41:     0x7f99d7552291 - iter::_<impl>::next::next::h1430176632510595140\n  42:     0x7f99d7551e1e - vec::_<impl>::from_iter::from_iter::h11440913854378754314\n  43:     0x7f99d7551b33 - fold::noop_fold_mod::h9501230011530116417\n  44:     0x7f99d754cc79 - ext::expand::expand_item_underscore::hc4243a869f3a877bGSb\n  45:     0x7f99d759d98e - fold::noop_fold_item_simple::h8462865063037887524\n  46:     0x7f99d759d4f0 - fold::noop_fold_item::h5328529649720349753\n  47:     0x7f99d754b709 - ext::expand::expand_annotatable::hcdfa58fbdd2db5e45oc\n  48:     0x7f99d7547178 - ext::expand::expand_item::h33ee80d897456d7c5Rb\n  49:     0x7f99d75a6c5f - ext::expand::expand_crate::h9eb355faa0bd8654MNc\n  50:     0x7f99dda8faec - driver::phase_2_configure_and_expand::_<closure>::closure.27382\n  51:     0x7f99dda22b8d - driver::phase_2_configure_and_expand::h8ccfec5c5aca214aAua\n  52:     0x7f99dda10883 - driver::compile_input::h7f85a10f04a664a63ba\n  53:     0x7f99ddb6b19b - run_compiler::haabf54047e5bdb33wsc\n  54:     0x7f99ddb68a26 - boxed::_<impl>::call_box::call_box::h4754854141470810202\n  55:     0x7f99ddb68334 - sys_common::unwind::try::try_fn::try_fn::h3587750331620889526\n  56:     0x7f99dd580668 - __rust_try\n  57:     0x7f99dd574deb - sys_common::unwind::try::inner_try::hbe46f56ef602f07cO9r\n  58:     0x7f99ddb684ce - boxed::_<impl>::call_box::call_box::h8143133644679331252\n  59:     0x7f99dd587ce3 - sys::thread::_<impl>::new::thread_start::h13325138c3b56c4cdEw\n  60:     0x7f99d6bec181 - start_thread\n  61:     0x7f99dd20547c - __clone\n  62:                0x0 - <unknown>\n", "closed_by": {"login": "SeanRBurton", "id": 7056847, "node_id": "MDQ6VXNlcjcwNTY4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7056847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanRBurton", "html_url": "https://github.com/SeanRBurton", "followers_url": "https://api.github.com/users/SeanRBurton/followers", "following_url": "https://api.github.com/users/SeanRBurton/following{/other_user}", "gists_url": "https://api.github.com/users/SeanRBurton/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanRBurton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanRBurton/subscriptions", "organizations_url": "https://api.github.com/users/SeanRBurton/orgs", "repos_url": "https://api.github.com/users/SeanRBurton/repos", "events_url": "https://api.github.com/users/SeanRBurton/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanRBurton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28040/timeline", "performed_via_github_app": null, "state_reason": "completed"}