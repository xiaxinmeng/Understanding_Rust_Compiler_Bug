{"url": "https://api.github.com/repos/rust-lang/rust/issues/1741", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1741/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1741/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1741/events", "html_url": "https://github.com/rust-lang/rust/issues/1741", "id": 3073953, "node_id": "MDU6SXNzdWUzMDczOTUz", "number": 1741, "title": "Cycle collector is still turned off", "user": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/4", "html_url": "https://github.com/rust-lang/rust/milestone/4", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/4/labels", "id": 14773, "node_id": "MDk6TWlsZXN0b25lMTQ3NzM=", "number": 4, "title": "old 1.0 milestone", "description": "this milestone used to be tracking \"1.0\" bugs in aggregate; we've now broken them down into various maturity milestones so it's no longer relevant.", "creator": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 297, "state": "closed", "created_at": "2011-06-08T18:20:12Z", "updated_at": "2013-07-18T01:03:49Z", "due_on": null, "closed_at": "2013-07-18T01:03:49Z"}, "comments": 3, "created_at": "2012-02-02T20:37:11Z", "updated_at": "2012-12-13T19:55:17Z", "closed_at": "2012-12-13T19:55:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`maybe_cc` in `rust_cc.cpp` contains this:\n\n```\n    // FIXME: Needs a snapshot.\n#if 0\n    if (task->cc_counter++ > RUST_CC_FREQUENCY) {\n        task->cc_counter = 0;\n        do_cc(task);\n    }\n#endif\n```\n\nRemoving the `#if` causes the stage1 compiler to crash with the following backtrace:\n\n```\n\n#0  0x00007ffff6026d05 in *__GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n#1  0x00007ffff602aab6 in *__GI_abort () at abort.c:92\n#2  0x00007ffff69d7b5c in walk_vec2 (is_pod=<optimized out>, this=0x7ffff3f1b950, sp_size=<optimized out>) at ./src/rt/rust_cc.cpp:315\n#3  walk_vec1 (sp_size=5, is_pod=true, this=0x7ffff3f1b950) at ./src/rt/rust_shape.h:878\n#4  shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_vec0 (this=0x7ffff3f1b950) at ./src/rt/rust_shape.h:440\n#5  0x00007ffff69d763e in walk_box_contents2 (box_dp=..., sub=..., this=<optimized out>) at ./src/rt/rust_cc.cpp:383\n#6  shape::data<cc::mark, shape::ptr>::walk_box_contents1 (this=<optimized out>) at ./src/rt/rust_shape.h:947\n#7  0x00007ffff69d77b2 in walk_box2 (this=0x7ffff3f1ba10) at ./src/rt/rust_cc.cpp:330\n#8  walk_iface2 (this=0x7ffff3f1ba10) at ./src/rt/rust_cc.cpp:363\n#9  walk_iface1 (this=0x7ffff3f1ba10) at ./src/rt/rust_shape.h:895\n#10 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk (this=0x7ffff3f1ba10) at ./src/rt/rust_shape.h:381\n#11 0x00007ffff69d7b88 in walk_struct2 (end_sp=0x7ffff7443c5d \"\\r\\016\", this=0x7ffff3f1ba10) at ./src/rt/rust_cc.cpp:388\n#12 walk_struct1 (end_sp=0x7ffff7443c5d \"\\r\\016\", this=0x7ffff3f1ba10) at ./src/rt/rust_shape.h:874\n#13 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_struct0 (this=0x7ffff3f1ba10) at ./src/rt/rust_shape.h:510\n#14 0x00007ffff69d763e in walk_box_contents2 (box_dp=..., sub=..., this=<optimized out>) at ./src/rt/rust_cc.cpp:383\n#15 shape::data<cc::mark, shape::ptr>::walk_box_contents1 (this=<optimized out>) at ./src/rt/rust_shape.h:947\n#16 0x00007ffff69d767e in walk_box2 (this=0x7ffff3f1bad0) at ./src/rt/rust_cc.cpp:330\n#17 walk_box1 (this=0x7ffff3f1bad0) at ./src/rt/rust_shape.h:881\n#18 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_box0 (this=0x7ffff3f1bad0) at ./src/rt/rust_shape.h:488\n#19 0x00007ffff69d7b88 in walk_struct2 (end_sp=0x7ffff7443c5d \"\\r\\016\", this=0x7ffff3f1bad0) at ./src/rt/rust_cc.cpp:388\n#20 walk_struct1 (end_sp=0x7ffff7443c5d \"\\r\\016\", this=0x7ffff3f1bad0) at ./src/rt/rust_shape.h:874\n#21 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_struct0 (this=0x7ffff3f1bad0) at ./src/rt/rust_shape.h:510\n#22 0x00007ffff69d763e in walk_box_contents2 (box_dp=..., sub=..., this=<optimized out>) at ./src/rt/rust_cc.cpp:383\n#23 shape::data<cc::mark, shape::ptr>::walk_box_contents1 (this=<optimized out>) at ./src/rt/rust_shape.h:947\n#24 0x00007ffff69d767e in walk_box2 (this=0x7ffff3f1bba0) at ./src/rt/rust_cc.cpp:330\n#25 walk_box1 (this=0x7ffff3f1bba0) at ./src/rt/rust_shape.h:881\n#26 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_box0 (this=0x7ffff3f1bba0) at ./src/rt/rust_shape.h:488\n#27 0x00007ffff69d7b88 in walk_struct2 (end_sp=0x7ffff7443c6f \"\", this=0x7ffff3f1bba0) at ./src/rt/rust_cc.cpp:388\n#28 walk_struct1 (end_sp=0x7ffff7443c6f \"\", this=0x7ffff3f1bba0) at ./src/rt/rust_shape.h:874\n#29 shape::ctxt<shape::data<cc::mark, shape::ptr> >::walk_struct0 (this=0x7ffff3f1bba0) at ./src/rt/rust_shape.h:510\n#30 0x00007ffff69d683f in cc::mark::do_mark (task=0x626170, roots=..., marked=...) at ./src/rt/rust_cc.cpp:444\n#31 0x00007ffff69d6e31 in cc::do_cc (task=0x626170) at ./src/rt/rust_cc.cpp:654\n#32 0x00007ffff69c84b8 in upcall_s_malloc (args=0x6551d0) at ./src/rt/rust_upcall.cpp:126\n#33 0x00007ffff69dc139 in __morestack () from /home/marijn/src/rust/x86_64-unknown-linux-gnu/stage1/bin/../lib/librustrt.so\n#34 0x00007ffff69c8878 in call_shim_on_c_stack (fn_ptr=0x7ffff69c8450, args=0x6551d0, this=<optimized out>) at ./src/rt/arch/x86_64/context.h:59\n#35 call_upcall_on_c_stack (fn_ptr=0x7ffff69c8450, args=0x6551d0) at ./src/rt/rust_upcall.cpp:52\n#36 upcall_malloc (td=<optimized out>) at ./src/rt/rust_upcall.cpp:144\n#37 0x00007ffff71be06b in syntax::parse::parser::mk_expr::_6c35a4f2e274aebe ()\n   from /home/marijn/src/rust/x86_64-unknown-linux-gnu/stage1/bin/../lib/librustc-4171d83aef249987-0.1.so\n#38 0x00007ffff71be9d2 in syntax::parse::parser::mk_pexpr::_f82e5d709d2cbe83 ()\n[more]\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1741/timeline", "performed_via_github_app": null, "state_reason": "completed"}