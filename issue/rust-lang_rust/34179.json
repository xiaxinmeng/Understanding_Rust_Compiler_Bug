{"url": "https://api.github.com/repos/rust-lang/rust/issues/34179", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34179/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34179/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34179/events", "html_url": "https://github.com/rust-lang/rust/issues/34179", "id": 159413563, "node_id": "MDU6SXNzdWUxNTk0MTM1NjM=", "number": 34179, "title": "Paths to source files for inlined items from extern crates not absolute in debuginfo", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2016-06-09T13:53:41Z", "updated_at": "2016-06-16T21:58:38Z", "closed_at": "2016-06-16T21:58:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@eddyb and I have been poking at this on IRC for a little bit. For code that's linked in from an extern crate, the source file paths that wind up in the debug info have relative paths, like:\n\n```\n< 4><0x000000ab>          DW_TAG_subprogram\n                            DW_AT_low_pc                0x00005570\n                            DW_AT_high_pc               <offset-from-lowpc>170\n                            DW_AT_frame_base            len 0x0001: 56: DW_OP_reg6\n                            DW_AT_linkage_name          \"_ZN16rust_bin_example4iter8Iterator23count<std::env::ArgsOs>E\"\n                            DW_AT_name                  \"count<std::env::ArgsOs>\"\n                            DW_AT_decl_file             0x00000003 ../src/libcore/iter.rs\n                            DW_AT_decl_line             0x000001d0\n```\n\nFor the debug symbols that we generate from Firefox binaries, we wind up interpreting these relative to the compilation dir of the rust crate we're compiling that imports them, so the paths wind up completely wrong, like `/build/debug-mozilla-central/media/libstagefright/../src/libcore/option.rs` (actual output from my local Firefox build).\n\nIf there were absolute paths, they'd be persisted all the way through, and then we could do something useful with them.\n\nLonger-term it'd be great if we also persisted info about what source repository and revision they were built from, or something like that, but we'd be inventing things there, since there's no analogue in existing DWARF produced by C compilers, AFAIK.\n\n/cc @rillian \n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34179/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34179/timeline", "performed_via_github_app": null, "state_reason": "completed"}