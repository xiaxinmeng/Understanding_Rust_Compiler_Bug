{"url": "https://api.github.com/repos/rust-lang/rust/issues/105572", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105572/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105572/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105572/events", "html_url": "https://github.com/rust-lang/rust/issues/105572", "id": 1490447098, "node_id": "I_kwDOAAsO6M5Y1mr6", "number": 105572, "title": "Tracking issue for `IMPLIED_BOUNDS_ENTAILMENT` lint", "user": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-12-11T21:11:27Z", "updated_at": "2023-03-01T05:30:16Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a tracking issue for the `IMPLIED_BOUNDS_ENTAILMENT` lint, which was added in #105575. The lint detects cases where the arguments of an impl method have stronger implied bounds than those from the trait method it's implementing.\r\n\r\n### Example\r\n\r\nThis warning will trigger for code like:\r\n\r\n```rust,compile_fail\r\n#![deny(implied_bounds_entailment)]\r\n\r\nuse std::borrow::Cow;\r\n\r\npub trait Decoder { type Error; }\r\n\r\npub trait Decodable: Sized {\r\n   fn decode<D: Decoder>(d: &mut D) -> Result<Self, D::Error>;\r\n}\r\n\r\nimpl<'a, T: ?Sized> Decodable for Cow<'a, T>\r\nwhere T: ToOwned, T::Owned: Decodable\r\n{\r\n    fn decode<D: Decoder>(d: &mut D) -> Result<Cow<'static, T>, D::Error> {\r\n        Ok(Cow::Owned(Decodable::decode(d)?))\r\n    }\r\n}\r\n```\r\n\r\n### Unsoundness Exploitation\r\n\r\nThis can be used to implement an unsound API if used incorrectly. While the previous example is sound, it can result in undefined behavior not previously caught by the compiler:\r\n\r\n```rust,compile_fail\r\n#![deny(implied_bounds_entailment)]\r\n\r\ntrait Trait {\r\n    fn get<'s>(s: &'s str, _: &'static &'static ()) -> &'static str;\r\n}\r\n\r\nimpl Trait for () {\r\n    fn get<'s>(s: &'s str, _: &'static &'s ()) -> &'static str {\r\n        s\r\n    }\r\n}\r\n\r\nlet val = <() as Trait>::get(&String::from(\"blah blah blah\"), &&());\r\nprintln!(\"{}\", val);\r\n```\r\n\r\n#### Explanation\r\n\r\nNeither the trait method, which provides no implied bounds about `'s`, nor the impl, which can't name `'s`, requires the main function to prove that 's: 'static, but the impl method is able to assume that 's: 'static within its own body.\r\n\r\n---\r\n\r\nSee: #105483, #105295", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105572/timeline", "performed_via_github_app": null, "state_reason": null}