{"url": "https://api.github.com/repos/rust-lang/rust/issues/72783", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72783/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72783/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72783/events", "html_url": "https://github.com/rust-lang/rust/issues/72783", "id": 627742781, "node_id": "MDU6SXNzdWU2Mjc3NDI3ODE=", "number": 72783, "title": "\"Unnecessary\" braces have an influence", "user": {"login": "vandenheuvel", "id": 20440137, "node_id": "MDQ6VXNlcjIwNDQwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/20440137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vandenheuvel", "html_url": "https://github.com/vandenheuvel", "followers_url": "https://api.github.com/users/vandenheuvel/followers", "following_url": "https://api.github.com/users/vandenheuvel/following{/other_user}", "gists_url": "https://api.github.com/users/vandenheuvel/gists{/gist_id}", "starred_url": "https://api.github.com/users/vandenheuvel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vandenheuvel/subscriptions", "organizations_url": "https://api.github.com/users/vandenheuvel/orgs", "repos_url": "https://api.github.com/users/vandenheuvel/repos", "events_url": "https://api.github.com/users/vandenheuvel/events{/privacy}", "received_events_url": "https://api.github.com/users/vandenheuvel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-05-30T14:27:47Z", "updated_at": "2023-01-06T22:07:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On `1.45.0-nightly (2020-05-29 4bd32c98047a809ba5fd)`\r\n```rust\r\nfn f() -> usize {\r\n    {1usize} - 1usize\r\n}\r\n```\r\nIntuitively, I would expect these braces to be redundant **and also have no influence**, but they do. The compiler expects a `()` type and then considers the minus sign a unary operator.\r\n```\r\nwarning: unnecessary braces around block return value\r\n --> src/lib.rs:6:5\r\n  |\r\n6 |     {1usize} - 1usize\r\n  |     ^^^^^^^^ help: remove these braces\r\n  |\r\n  = note: `#[warn(unused_braces)]` on by default\r\n\r\nerror[E0308]: mismatched types\r\n --> src/lib.rs:6:6\r\n  |\r\n6 |     {1usize} - 1usize\r\n  |      ^^^^^^ expected `()`, found `usize`\r\n\r\nerror[E0600]: cannot apply unary operator `-` to type `usize`\r\n --> src/lib.rs:6:14\r\n  |\r\n6 |     {1usize} - 1usize\r\n  |              ^^^^^^^^ cannot apply unary operator `-`\r\n  |\r\n  = note: unsigned values cannot be negated\r\n```\r\n\r\nIt seems to me that either the error message about the braces being redundant is incorrect or misleading, or something more nefarious seems to be going on with scopes, expressions, etc.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72783/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72783/timeline", "performed_via_github_app": null, "state_reason": null}