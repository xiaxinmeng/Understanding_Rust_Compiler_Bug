{"url": "https://api.github.com/repos/rust-lang/rust/issues/40760", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40760/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40760/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40760/events", "html_url": "https://github.com/rust-lang/rust/issues/40760", "id": 216494190, "node_id": "MDU6SXNzdWUyMTY0OTQxOTA=", "number": 40760, "title": "Compiler panic", "user": {"login": "ineiti", "id": 1545067, "node_id": "MDQ6VXNlcjE1NDUwNjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1545067?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ineiti", "html_url": "https://github.com/ineiti", "followers_url": "https://api.github.com/users/ineiti/followers", "following_url": "https://api.github.com/users/ineiti/following{/other_user}", "gists_url": "https://api.github.com/users/ineiti/gists{/gist_id}", "starred_url": "https://api.github.com/users/ineiti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ineiti/subscriptions", "organizations_url": "https://api.github.com/users/ineiti/orgs", "repos_url": "https://api.github.com/users/ineiti/repos", "events_url": "https://api.github.com/users/ineiti/events{/privacy}", "received_events_url": "https://api.github.com/users/ineiti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-03-23T16:39:09Z", "updated_at": "2017-04-13T19:11:03Z", "closed_at": "2017-04-13T19:11:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm a rust-noob. When compiling my experiments, I get a compiler-panic and it asked me to report here.\r\n\r\nI tried this code:\r\n\r\n```rust\r\n// This probably own't work - I added the \"inputs::\" myself for reference what is taken below.\r\npub struct inputs::Element {\r\n    pub source: String,\r\n    pub date: String,\r\n    pub name: String,\r\n}\r\n\r\npub fn new(path: String, inform: Sender<inputs::Element>){\r\n    loop {\r\n        let paths = match fs::read_dir(&path).unwrap(){\r\n            fs::ReadDir(r) => r,\r\n            _ => panic!(\"Got error while reading {}\", &path)\r\n        };\r\n\r\n        for p in paths {\r\n            let pa = p.unwrap().path();\r\n            let name = String::from(pa.to_str().unwrap());\r\n            let e = inputs::Element{source: String::from(\"file:\") + &path,\r\n                date: String::from(\"Constant\"), name: name};\r\n            inform.send(e).unwrap();\r\n        }\r\n\r\n        thread::sleep(time::Duration::new(1,0));\r\n    }\r\n}\r\n```\r\n\r\nI expected to see this happen: ponies - it compiles!\r\n\r\nInstead, this happened:\r\n\r\n```\r\n   Compiling cybermind v0.1.0 (file:///Users/ineiti/IdeaProjects/CyberMind)\r\n     Running `rustc --crate-name cybermind src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=eeee6312c843e5a7 -C extra-filename=-eeee6312c843e5a7 --out-dir /Users/ineiti/IdeaProjects/CyberMind/target/debug/deps -L dependency=/Users/ineiti/IdeaProjects/CyberMind/target/debug/deps`\r\nerror: internal compiler error: src/librustc/middle/stability.rs:547: encountered unmarked API\r\n  --> src/inputs/files.rs:16:33\r\n   |\r\n16 |             let pa = p.unwrap().path();\r\n   |                                 ^^^^\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:375\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: Could not compile `cybermind`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name cybermind src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=eeee6312c843e5a7 -C extra-filename=-eeee6312c843e5a7 --out-dir /Users/ineiti/IdeaProjects/CyberMind/target/debug/deps -L dependency=/Users/ineiti/IdeaProjects/CyberMind/target/debug/deps` (exit code: 101)\r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n\r\n```\r\nrustc 1.16.0\r\nbinary: rustc\r\ncommit-hash: unknown\r\ncommit-date: unknown\r\nhost: x86_64-apple-darwin\r\nrelease: 1.16.0\r\nLLVM version: 3.9\r\n```\r\n\r\nBacktrace:\r\n\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:375\r\nstack backtrace:\r\n   1:        0x10e9bf0cc - std::sys::imp::backtrace::tracing::imp::write::h11f6264c06c3c690\r\n   2:        0x10e9cba2e - std::panicking::default_hook::{{closure}}::hcac54d7a3d5c4b83\r\n   3:        0x10e9cb5d3 - std::panicking::default_hook::h5b17330436c00b98\r\n   4:        0x10e9cbee7 - std::panicking::rust_panic_with_hook::h715d6f06ce39d1b2\r\n   5:        0x10be2bd1b - std::panicking::begin_panic::h6a48cb4b1a8bf951\r\n   6:        0x10bfd95a3 - rustc::session::opt_span_bug_fmt::{{closure}}::h80ebd6c236885f5d\r\n   7:        0x10bfd93f9 - rustc::session::opt_span_bug_fmt::hd7f34411b6a25c2f\r\n   8:        0x10bfd9207 - rustc::session::span_bug_fmt::hdfe86a9067534e75\r\n   9:        0x10bfb49d8 - rustc::middle::stability::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::check_stability::hceb9b9cca27cc17f\r\n  10:        0x10b2946c2 - rustc_typeck::check::method::<impl rustc_typeck::check::FnCtxt<'a, 'gcx, 'tcx>>::lookup_method::hf91914e563f8efe7\r\n  11:        0x10b2e0737 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  12:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  13:        0x10b2eec27 - rustc_typeck::check::FnCtxt::check_decl_initializer::h28040fc7cd58838a\r\n  14:        0x10b2eed2d - rustc_typeck::check::FnCtxt::check_decl_local::hfff6384269570989\r\n  15:        0x10b2ef066 - rustc_typeck::check::FnCtxt::check_stmt::h7a9d4f0ec3b2a971\r\n  16:        0x10b2ef3ce - rustc_typeck::check::FnCtxt::check_block_with_expected::h953c0a2c08f0272b\r\n  17:        0x10b2de2a4 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  18:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  19:        0x10b267e50 - rustc_typeck::check::_match::<impl rustc_typeck::check::FnCtxt<'a, 'gcx, 'tcx>>::check_match::hb4f662d23ea82672\r\n  20:        0x10b2de5b6 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  21:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  22:        0x10b2ef40e - rustc_typeck::check::FnCtxt::check_block_with_expected::h953c0a2c08f0272b\r\n  23:        0x10b2de450 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  24:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  25:        0x10b267e50 - rustc_typeck::check::_match::<impl rustc_typeck::check::FnCtxt<'a, 'gcx, 'tcx>>::check_match::hb4f662d23ea82672\r\n  26:        0x10b2de5b6 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  27:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  28:        0x10b2eec27 - rustc_typeck::check::FnCtxt::check_decl_initializer::h28040fc7cd58838a\r\n  29:        0x10b2eed2d - rustc_typeck::check::FnCtxt::check_decl_local::hfff6384269570989\r\n  30:        0x10b2ef066 - rustc_typeck::check::FnCtxt::check_stmt::h7a9d4f0ec3b2a971\r\n  31:        0x10b2ef3ce - rustc_typeck::check::FnCtxt::check_block_with_expected::h953c0a2c08f0272b\r\n  32:        0x10b2de2a4 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  33:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  34:        0x10b2ef000 - rustc_typeck::check::FnCtxt::check_stmt::h7a9d4f0ec3b2a971\r\n  35:        0x10b2ef3ce - rustc_typeck::check::FnCtxt::check_block_with_expected::h953c0a2c08f0272b\r\n  36:        0x10b2de450 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  37:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  38:        0x10b2ef40e - rustc_typeck::check::FnCtxt::check_block_with_expected::h953c0a2c08f0272b\r\n  39:        0x10b2de2a4 - rustc_typeck::check::FnCtxt::check_expr_kind::h62c70b8e8b437560\r\n  40:        0x10b2ddded - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::hca6b8e27e1ae0714\r\n  41:        0x10b2c4fd4 - rustc_typeck::check::check_fn::hcd7f2f03085c6497\r\n  42:        0x10b2c3fde - rustc_typeck::check::check_bare_fn::hb58864524100eeaf\r\n  43:        0x10b2c17ca - rustc_typeck::check::check_item_bodies::hb7db7fdf60331b5f\r\n  44:        0x10b32ca64 - rustc_typeck::check_crate::h688f35d2b29429e7\r\n  45:        0x10aefd040 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hfe04819b98fd637c\r\n  46:        0x10aee9717 - rustc_driver::driver::phase_3_run_analysis_passes::he434e73ce659d302\r\n  47:        0x10aeced20 - rustc_driver::driver::compile_input::hafc1bdff3e824474\r\n  48:        0x10af1671e - rustc_driver::run_compiler::h28dd1122848b0db9\r\n  49:        0x10ae2e288 - std::panicking::try::do_call::he3322c3e215f35d0\r\n  50:        0x10e9ceafa - __rust_maybe_catch_panic\r\n  51:        0x10ae56ba3 - <F as alloc::boxed::FnBox<A>>::call_box::hb607dad48bf6d166\r\n  52:        0x10e9cab54 - std::sys::imp::thread::Thread::new::thread_start::h598266263fa7f71c\r\n  53:     0x7fff879bb99c - _pthread_body\r\n  54:     0x7fff879bb919 - _pthread_start\r\n```", "closed_by": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40760/timeline", "performed_via_github_app": null, "state_reason": "completed"}