{"url": "https://api.github.com/repos/rust-lang/rust/issues/63329", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63329/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63329/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63329/events", "html_url": "https://github.com/rust-lang/rust/issues/63329", "id": 477472028, "node_id": "MDU6SXNzdWU0Nzc0NzIwMjg=", "number": 63329, "title": "remap-path-prefix affects dep-info", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 116993, "node_id": "MDU6TGFiZWwxMTY5OTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-driver", "name": "A-driver", "color": "f7e101", "default": false, "description": "Area: rustc_driver that ties everything together into the `rustc` compiler"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-08-06T16:13:32Z", "updated_at": "2019-08-08T20:59:14Z", "closed_at": "2019-08-08T20:59:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `--remap-path-prefix` flag affects paths in dep-info files. This causes some problems witth Cargo.\r\n\r\nCargo uses these paths to detect if any source file has been modified.  Since the common use case for `--remap-path-prefix` is to rewrite to some artificial path (like `/rustc/$HASH` which rust distributions use), this causes them to point to non-existent paths, which Cargo cannot check.\r\n\r\nIn some cases, this doesn't matter.  Workspace members are built with relative paths which (usually) won't match the remap value.  However, registry or vendored paths will get remapped.  Cargo won't find the path, so it will always assume it needs to rebuilt, breaking it's rebuild detection.\r\n\r\nI think dep-info paths should not be remapped. I think it keeps with the spirit of reproducible builds (the binaries aren't affected, this is just a side-channel build-system file).  However, I'm not certain.  I also don't know how hard this will be to implement.\r\n\r\nOh, and `-Z binary-dep-depinfo` *doesn't* seem to be affected by `--remap-path-prefix`.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63329/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63329/timeline", "performed_via_github_app": null, "state_reason": "completed"}