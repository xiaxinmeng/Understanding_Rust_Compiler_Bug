{"url": "https://api.github.com/repos/rust-lang/rust/issues/19452", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19452/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19452/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19452/events", "html_url": "https://github.com/rust-lang/rust/issues/19452", "id": 50611919, "node_id": "MDU6SXNzdWU1MDYxMTkxOQ==", "number": 19452, "title": "ICE - task 'rustc' panicked at 'struct variant kind unexpected in get_item_val'", "user": {"login": "daramos", "id": 1821444, "node_id": "MDQ6VXNlcjE4MjE0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1821444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daramos", "html_url": "https://github.com/daramos", "followers_url": "https://api.github.com/users/daramos/followers", "following_url": "https://api.github.com/users/daramos/following{/other_user}", "gists_url": "https://api.github.com/users/daramos/gists{/gist_id}", "starred_url": "https://api.github.com/users/daramos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daramos/subscriptions", "organizations_url": "https://api.github.com/users/daramos/orgs", "repos_url": "https://api.github.com/users/daramos/repos", "events_url": "https://api.github.com/users/daramos/events{/privacy}", "received_events_url": "https://api.github.com/users/daramos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-12-02T04:40:45Z", "updated_at": "2014-12-14T11:32:35Z", "closed_at": "2014-12-14T11:32:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While trying something new I ran across this compiler panic. I was able to create the following minimal test case:\n\n``` rust\nenum TestEnum {\n    NonValue,\n    Value {val1: uint}\n}\n\nfn main() {\n    let mut tmp = TestEnum::NonValue;\n    tmp = TestEnum::Value\n}\n```\n\n```\nrustc 0.13.0-nightly (fac5a0767 2014-11-26 22:37:06 +0000)\nbinary: rustc\ncommit-hash: fac5a07679cac21a580badc84b755b8df0f975cf\ncommit-date: 2014-11-26 22:37:06 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 0.13.0-nightly\n```\n\n```\ntask 'rustc' panicked at 'struct variant kind unexpected in get_item_val', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/librustc_trans/trans/base.rs:2858\n\nstack backtrace:\n   1:     0x7f011935c3b0 - rt::backtrace::imp::write::h753be74b825f61ed19x\n   2:     0x7f011935f480 - failure::on_fail::h7418e5cabf6c549ekCy\n   3:     0x7f0118fb5320 - unwind::begin_unwind_inner::h21b15480bba8536c0Qc\n   4:     0x7f01197c5b60 - unwind::begin_unwind::h2131595671141106281\n   5:     0x7f0119801d70 - trans::base::get_item_val::h07c1542a8cc17e2c7Gv\n   6:     0x7f011983b100 - trans::callee::trans_fn_ref_with_substs::h6e3a101edcd458250Ig\n   7:     0x7f0119838f70 - trans::callee::trans_fn_ref::hdcbcf0a826d12eabYwg\n   8:     0x7f011985cab0 - trans::expr::trans_def::h6b990a449f274953wdj\n   9:     0x7f01198531a0 - trans::expr::trans_unadjusted::h0241b45889b366e7iJi\n  10:     0x7f0119812a00 - trans::expr::trans::hc5e4f3c1c8708fa0dUh\n  11:     0x7f0119857a20 - trans::expr::trans_rvalue_stmt_unadjusted::hb710868ffa4bd9bfBhj\n  12:     0x7f01198110d0 - trans::expr::trans_into::hfd54d60c945a0fc8hQh\n  13:     0x7f01198116a0 - trans::controlflow::trans_block::he010926f525ec62dk2d\n  14:     0x7f01198c47e0 - trans::base::trans_closure::h8f4dac4e13bf4972tDu\n  15:     0x7f01198036a0 - trans::base::trans_fn::h0a1b95c8abed202bjPu\n  16:     0x7f0119800690 - trans::base::trans_item::h4f3b35bce9ae51243av\n  17:     0x7f01198c9160 - trans::base::trans_mod::h18114d50e28ae38eygv\n  18:     0x7f01198cff80 - trans::base::trans_crate::hc608c93243bdc3cfn9v\n  19:     0x7f011997cad0 - driver::driver::phase_4_translate_to_llvm::ha275ee9ba36f38d9PvS\n  20:     0x7f011996a2f0 - driver::driver::compile_input::h342f6a27db36679d12R\n  21:     0x7f01199ee280 - driver::run_compiler::h817060b002a7c16090T\n  22:     0x7f01199ee170 - driver::run::closure.59904\n  23:     0x7f01197f5d10 - task::TaskBuilder::try_future::closure.39020\n  24:     0x7f011932d010 - task::TaskBuilder::spawn_internal::closure.30320\n  25:     0x7f0118fb3100 - task::Task::spawn::closure.5727\n  26:     0x7f011900d470 - rust_try_inner\n  27:     0x7f011900d460 - rust_try\n  28:     0x7f0118fb31e0 - unwind::try::h75fe9090402d7736lFc\n  29:     0x7f0118fb2fa0 - task::Task::run::h1f2cd4b02103da7aeOb\n  30:     0x7f0118fb2b90 - task::Task::spawn::closure.5703\n  31:     0x7f0118fb45e0 - thread::thread_start::h60b7b4aa191da867h6b\n  32:     0x7f0113d1b0c0 - start_thread\n  33:     0x7f0118c7a2d9 - __clone\n  34:                0x0 - <unknown>\n```\n\nThis compiles just fine:\n\n``` rust\nenum TestEnum {\n    NonValue,\n    Value {val1: uint}\n}\n\nfn main() {\n    let mut tmp = TestEnum::NonValue;\n    tmp = TestEnum::Value{ val1: 1 }\n}\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19452/timeline", "performed_via_github_app": null, "state_reason": "completed"}