{"url": "https://api.github.com/repos/rust-lang/rust/issues/3685", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3685/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3685/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3685/events", "html_url": "https://github.com/rust-lang/rust/issues/3685", "id": 7401342, "node_id": "MDU6SXNzdWU3NDAxMzQy", "number": 3685, "title": "num::Num implementations not searched for binary operation implementations", "user": {"login": "andymatuschak", "id": 2771, "node_id": "MDQ6VXNlcjI3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andymatuschak", "html_url": "https://github.com/andymatuschak", "followers_url": "https://api.github.com/users/andymatuschak/followers", "following_url": "https://api.github.com/users/andymatuschak/following{/other_user}", "gists_url": "https://api.github.com/users/andymatuschak/gists{/gist_id}", "starred_url": "https://api.github.com/users/andymatuschak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andymatuschak/subscriptions", "organizations_url": "https://api.github.com/users/andymatuschak/orgs", "repos_url": "https://api.github.com/users/andymatuschak/repos", "events_url": "https://api.github.com/users/andymatuschak/events{/privacy}", "received_events_url": "https://api.github.com/users/andymatuschak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-10-06T23:34:33Z", "updated_at": "2012-10-07T18:09:47Z", "closed_at": "2012-10-07T18:09:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Perhaps this is behaving as designed, but I found it surprising. I guess I imagined that `+` was just syntax sugar for `num::Num`'s `add()` method.\n\nI implemented num::Num on (T, T), where T's bound by num::Num and Copy. But I couldn't add two such tuples together with `+` (see compile error, below), only with `add()`.\n\nThe source:\n\n```\ntype Duple<T: num::Num Copy> = (T, T);\nimpl<T: num::Num Copy> Duple<T>: num::Num {\n    pure fn add(other: &Duple<T>) -> Duple<T> { \n        let (a1, b1) = self;\n        let (a2, b2) = *other;\n        (a1 + a2, b1 + b2)\n    }\n    pure fn sub(other: &Duple<T>) -> Duple<T> { \n        let (a1, b1) = self;\n        let (a2, b2) = *other;\n        (a1 - a2, b1 - b2)\n    }\n    pure fn mul(other: &Duple<T>) -> Duple<T> { \n        let (a1, b1) = self;\n        let (a2, b2) = *other;\n        (a1 * a2, b1 * b2)\n    }\n    pure fn div(other: &Duple<T>) -> Duple<T> { \n        let (a1, b1) = self;\n        let (a2, b2) = *other;\n        (a1 / a2, b1 / b2)\n    }\n    pure fn modulo(other: &Duple<T>) -> Duple<T> { \n        let (a1, b1) = self;\n        let (a2, b2) = *other;\n        (a1 % a2, b1 % b2)\n    }\n    pure fn neg() -> Duple<T> { \n        let (a1, b1) = self;\n        (-a1, -b1)\n    }\n\n    pure fn to_int() -> int { \n        let (a, b) = self;\n        a.to_int()*a.to_int() + b.to_int()*b.to_int()\n    }\n    static pure fn from_int(n: int) -> Duple<T> {\n        let a: T = num::from_int(n);\n        (a, a)\n    }\n}\n\nfn Duple<T: num::Num Copy>(a: T, b: T) -> Duple<T> { (a, b) }\n\nfn main() {\n    let a = Duple(3, 4);\n    let b = Duple(4, 5);\n    // The following line causes a compile error:\n    //let c = a + b;\n    // But this works fine:\n    let c = a.add(&b);\n    io::println(int::str(c.to_int()));\n}\n```\n\nThe compile error in question:\n\n```\nduple.rs:49:16: 49:21 error: binary operation + cannot be applied to type `(int,int)`\nduple.rs:49         let c = a + b;\n```\n\nThis is on Rust built from f96a2a2ca1 on Mac OS 10.8.2.\n", "closed_by": {"login": "andymatuschak", "id": 2771, "node_id": "MDQ6VXNlcjI3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andymatuschak", "html_url": "https://github.com/andymatuschak", "followers_url": "https://api.github.com/users/andymatuschak/followers", "following_url": "https://api.github.com/users/andymatuschak/following{/other_user}", "gists_url": "https://api.github.com/users/andymatuschak/gists{/gist_id}", "starred_url": "https://api.github.com/users/andymatuschak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andymatuschak/subscriptions", "organizations_url": "https://api.github.com/users/andymatuschak/orgs", "repos_url": "https://api.github.com/users/andymatuschak/repos", "events_url": "https://api.github.com/users/andymatuschak/events{/privacy}", "received_events_url": "https://api.github.com/users/andymatuschak/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3685/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3685/timeline", "performed_via_github_app": null, "state_reason": "completed"}