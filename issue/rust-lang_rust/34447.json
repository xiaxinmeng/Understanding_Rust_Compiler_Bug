{"url": "https://api.github.com/repos/rust-lang/rust/issues/34447", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34447/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34447/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34447/events", "html_url": "https://github.com/rust-lang/rust/issues/34447", "id": 162072549, "node_id": "MDU6SXNzdWUxNjIwNzI1NDk=", "number": 34447, "title": "Tracking issue for sorting by expensive-to-compute keys (feature slice_sort_by_cached_key)", "user": {"login": "dato", "id": 73768, "node_id": "MDQ6VXNlcjczNzY4", "avatar_url": "https://avatars.githubusercontent.com/u/73768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dato", "html_url": "https://github.com/dato", "followers_url": "https://api.github.com/users/dato/followers", "following_url": "https://api.github.com/users/dato/following{/other_user}", "gists_url": "https://api.github.com/users/dato/gists{/gist_id}", "starred_url": "https://api.github.com/users/dato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dato/subscriptions", "organizations_url": "https://api.github.com/users/dato/orgs", "repos_url": "https://api.github.com/users/dato/repos", "events_url": "https://api.github.com/users/dato/events{/privacy}", "received_events_url": "https://api.github.com/users/dato/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2016-06-24T04:09:46Z", "updated_at": "2019-02-18T00:19:54Z", "closed_at": "2019-02-17T10:14:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi\u2014\n\nIdeally, the implementation of [sort_by_key()](https://doc.rust-lang.org/std/primitive.slice.html#method.sort_by_key) would invoke the received key function exactly once per item. This is highly beneficial when a costly computation (e.g., a distance function) needs to be used for sorting.\n\nBut Rust\u2019s implementation as of 1.9 ([link](https://github.com/rust-lang/rust/blob/1.9.0/src/libcollections/slice.rs#L784)) calls the key function each time:\n\n``` rust\n pub fn sort_by_key(&mut self, mut f: F)\n{\n    self.sort_by(|a, b| f(a).cmp(&f(b)))\n}\n```\n\nFor comparison, on its day Python highlighted this in the release notes for [2.4](https://docs.python.org/3/whatsnew/2.4.html#other-language-changes). As per their current [Sorting HOW TO](https://docs.python.org/3/howto/sorting.html):\n\n> The value of the _key_ parameter should be a function that takes a single argument and returns a key to use for sorting purposes. This technique is fast because the key function is called exactly once for each input record.\n\nMany thanks for considering. It\u2019d be great if Rust could behave the same way.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34447/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34447/timeline", "performed_via_github_app": null, "state_reason": "completed"}