{"url": "https://api.github.com/repos/rust-lang/rust/issues/32996", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32996/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32996/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32996/events", "html_url": "https://github.com/rust-lang/rust/issues/32996", "id": 148713005, "node_id": "MDU6SXNzdWUxNDg3MTMwMDU=", "number": 32996, "title": "using `extern crate syntax` produces a binary dynamically linked to libstd.so that fails with \"cannot open shared object file\" when executed", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-04-15T16:54:40Z", "updated_at": "2016-04-15T22:15:58Z", "closed_at": "2016-04-15T18:34:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### STR\n\n```\n$ rustup default nightly\n\n$ cat foo.rs\n#![feature(rustc_private)]\n\nextern crate syntax;\n\nfn main() {}\n\n$ rustc foo.rs\n\n$ ldd foo\n        linux-vdso.so.1 =>  (0x00007ffdfafd2000)\n        libstd-cb705824.so => not found\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007ff4359e1000)\n        /lib64/ld-linux-x86-64.so.2 (0x0000559219c45000)\n\n$ ./foo\n./foo: error while loading shared libraries: libstd-cb705824.so: cannot open shared object file: No such file or directory\n\n$ find ~/.multirust -name 'libsyntax*'\n/root/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/libsyntax-cb705824.so\n/root/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/libsyntax_ext-cb705824.so\n/root/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib/libsyntax-cb705824.so\n/root/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib/libsyntax_ext-cb705824.so\n```\n\nI was sort of expecting the compilation to fail because there is no `libsyntax.rlib` in `~/.multirust` and `rustc` produces binaries statically linked to all the Rust bits. But perhaps `syntax` is special because of syntax extensions?\n### Meta\n\n```\n$ rustc -Vv\nrustc 1.10.0-nightly (2174bd97c 2016-04-14)\nbinary: rustc\ncommit-hash: 2174bd97c1458d89a87eb2b614135d7ad68d6f18\ncommit-date: 2016-04-14\nhost: x86_64-unknown-linux-gnu\nrelease: 1.10.0-nightly\n```\n\ncc @alexcrichton \n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32996/timeline", "performed_via_github_app": null, "state_reason": "completed"}