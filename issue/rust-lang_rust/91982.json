{"url": "https://api.github.com/repos/rust-lang/rust/issues/91982", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91982/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91982/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91982/events", "html_url": "https://github.com/rust-lang/rust/issues/91982", "id": 1081608634, "node_id": "I_kwDOAAsO6M5AeAm6", "number": 91982, "title": "rustdoc: add support for --emit=dep-info", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-15T23:27:18Z", "updated_at": "2022-01-22T00:09:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When running rustdoc, cargo currently doesn't know which files are used for each cargo target. Because of this, cargo conservatively assumes that a modification to *any* file in the project will require rebuilding the documentation for all targets. When running `rustc`, cargo uses the dep-info file to know which files each target is built from, so that it can know to only track for changes in those files. It would be helpful if rustdoc had a similar ability so that cargo could more precisely track the files.\r\n\r\nSince we probably don't want to pollute the output directory with this dep-info file, it would be good to ensure that it supports the `--emit dep-info=PATH` syntax that `rustc` has so that cargo could squirrel away the file somewhere else in the target directory.\r\n\r\nIt might be nice if this also included paths passed to CLI options like `--extend-css`, though that is a stretch goal.\r\n\r\nIdeally it would be essentially the same as `rustc`, supporting the `# env-dep:` comments as well to track environment variables that were used.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91982/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91982/timeline", "performed_via_github_app": null, "state_reason": null}