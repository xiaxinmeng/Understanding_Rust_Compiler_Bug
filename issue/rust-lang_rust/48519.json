{"url": "https://api.github.com/repos/rust-lang/rust/issues/48519", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48519/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48519/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48519/events", "html_url": "https://github.com/rust-lang/rust/issues/48519", "id": 299982547, "node_id": "MDU6SXNzdWUyOTk5ODI1NDc=", "number": 48519, "title": "[Internal compiler error] missing MIR for `DefId(7/0:8 ~ cortex_m_rt[ba29]::lang_items[0]::start[0])`", "user": {"login": "niklasad1", "id": 14157425, "node_id": "MDQ6VXNlcjE0MTU3NDI1", "avatar_url": "https://avatars.githubusercontent.com/u/14157425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niklasad1", "html_url": "https://github.com/niklasad1", "followers_url": "https://api.github.com/users/niklasad1/followers", "following_url": "https://api.github.com/users/niklasad1/following{/other_user}", "gists_url": "https://api.github.com/users/niklasad1/gists{/gist_id}", "starred_url": "https://api.github.com/users/niklasad1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niklasad1/subscriptions", "organizations_url": "https://api.github.com/users/niklasad1/orgs", "repos_url": "https://api.github.com/users/niklasad1/repos", "events_url": "https://api.github.com/users/niklasad1/events{/privacy}", "received_events_url": "https://api.github.com/users/niklasad1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-02-24T23:40:14Z", "updated_at": "2018-02-25T08:17:43Z", "closed_at": "2018-02-25T00:08:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Summary\r\nHi,\r\nI tried building the crate [cortex-m-quickstart](https://github.com/japaric/cortex-m-quickstart)\r\n\r\n### Issue\r\nBy using the following option\r\n```bash\r\n$ xargo build --target thumbv7m-none-eabi --example hello\r\n```\r\nThe compiler crashes\r\n\r\n### Backtrace\r\n```\r\nerror: internal compiler error: librustc_metadata/cstore_impl.rs:131: get_optimized_mir: missing MIR for `DefId(7/0:8 ~ cortex_m_rt[ba29]::lang_items[0]::start[0])`\r\n\r\nthread 'rustc' panicked at 'Box<Any>', librustc_errors/lib.rs:535:9\r\nstack backtrace:\r\n   0:     0x7f91f34a0dd3 - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::h8b81594645a24a27\r\n                               at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1:     0x7f91f3498284 - std::sys_common::backtrace::_print::h9bc07d566820e560\r\n                               at libstd/sys_common/backtrace.rs:71\r\n   2:     0x7f91f349d9dd - std::panicking::default_hook::{{closure}}::h8061f115b067df97\r\n                               at libstd/sys_common/backtrace.rs:59\r\n                               at libstd/panicking.rs:380\r\n   3:     0x7f91f349d6e2 - std::panicking::default_hook::hd067eb3eb1a62c48\r\n                               at libstd/panicking.rs:396\r\n   4:     0x7f91f349de50 - std::panicking::rust_panic_with_hook::h45183031f05ee04c\r\n                               at libstd/panicking.rs:576\r\n   5:     0x7f91ef035458 - std::panicking::begin_panic::h70fa20d14e5a4ddc\r\n   6:     0x7f91ef0570e5 - rustc_errors::Handler::bug::h2904d9bdcd541660\r\n   7:     0x7f91f020883f - rustc::session::opt_span_bug_fmt::{{closure}}::h4c61b14203cd7ef9\r\n   8:     0x7f91f02bfb35 - rustc::ty::context::tls::with_opt::{{closure}}::ha844ec3aba1227ce\r\n   9:     0x7f91eff076af - <std::thread::local::LocalKey<T>>::try_with::hcb9878a339eb8184\r\n  10:     0x7f91eff07246 - <std::thread::local::LocalKey<T>>::with::h0e7a6f77ef5003ad\r\n  11:     0x7f91f02bf846 - rustc::ty::context::tls::with::h76fef2b9234bce83\r\n  12:     0x7f91f02bfae7 - rustc::ty::context::tls::with_opt::hcffffd6da58fec15\r\n  13:     0x7f91f0208744 - rustc::session::opt_span_bug_fmt::h2670479fe31ed596\r\n  14:     0x7f91f0208606 - rustc::session::bug_fmt::hcb5a7103fba7bc90\r\n  15:     0x7f91f1bf5559 - rustc_metadata::cstore_impl::provide_extern::optimized_mir::h2b8092d8086279cf\r\n  16:     0x7f91f00b1839 - rustc::dep_graph::graph::DepGraph::with_task_impl::hea0bff9ad23e8d9d\r\n  17:     0x7f91f0378909 - rustc::ty::maps::<impl rustc::ty::maps::queries::optimized_mir<'tcx>>::force::h2a013a1ceee4a829\r\n  18:     0x7f91f0379466 - rustc::ty::maps::<impl rustc::ty::maps::queries::optimized_mir<'tcx>>::try_get::he58f4a5856cbcfcd\r\n  19:     0x7f91f04871da - rustc::ty::maps::TyCtxtAt::optimized_mir::hf8d473ea184aa7da\r\n  20:     0x7f91f02d750d - rustc::ty::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::instance_mir::h05068563e01c8813\r\n  21:     0x7f91f0ed3845 - rustc_mir::monomorphize::collector::collect_items_rec::hb5c49ef42474d3b7\r\n  22:     0x7f91f0ed3053 - rustc_mir::monomorphize::collector::collect_crate_mono_items::h43e3331c1491c656\r\n  23:     0x7f91e86c36b1 - rustc_trans::base::collect_and_partition_translation_items::h667c557b0c893845\r\n  24:     0x7f91f0098afc - rustc::dep_graph::graph::DepGraph::with_task_impl::h7d3113ca1706e263\r\n  25:     0x7f91f045eca1 - rustc::ty::maps::<impl rustc::ty::maps::queries::collect_and_partition_translation_items<'tcx>>::force::hdb41ca31cf6c6f5d\r\n  26:     0x7f91f045f823 - rustc::ty::maps::<impl rustc::ty::maps::queries::collect_and_partition_translation_items<'tcx>>::try_get::h866a092f65a06f6b\r\n  27:     0x7f91f048c775 - rustc::ty::maps::TyCtxtAt::collect_and_partition_translation_items::h034204a218ee8b34\r\n  28:     0x7f91f048573e - rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::collect_and_partition_translation_items::h73a73cb71fea4e24\r\n  29:     0x7f91e86bf07b - rustc_trans::base::trans_crate::ha8659d307fbf5033\r\n  30:     0x7f91e871bd27 - <rustc_trans::LlvmTransCrate as rustc_trans_utils::trans_crate::TransCrate>::trans_crate::he1083cc248ab0e98\r\n  31:     0x7f91f3852562 - rustc_driver::driver::phase_4_translate_to_llvm::hfdc184ff560761c5\r\n  32:     0x7f91f384b80e - rustc_driver::driver::compile_input::{{closure}}::ha4254b2145dd86d8\r\n  33:     0x7f91f37e68fe - rustc::ty::context::TyCtxt::create_and_enter::he3e4f3930d406ef0\r\n  34:     0x7f91f38497bb - rustc_driver::driver::compile_input::hd2a6444b7fba6805\r\n  35:     0x7f91f38665fa - rustc_driver::run_compiler::h23eec633cdb60fc2\r\n  36:     0x7f91f379271a - std::sys_common::backtrace::__rust_begin_short_backtrace::h8832fd8a58b18629\r\n  37:     0x7f91f34b6b8e - __rust_maybe_catch_panic\r\n                               at libpanic_unwind/lib.rs:102\r\n  38:     0x7f91f37cb896 - <F as alloc::boxed::FnBox<A>>::call_box::hbb7d5a5401bfb959\r\n  39:     0x7f91f34ade1b - std::sys::unix::thread::Thread::new::thread_start::hdd261da30813e955\r\n                               at /checkout/src/liballoc/boxed.rs:798\r\n                               at libstd/sys_common/thread.rs:24\r\n                               at libstd/sys/unix/thread.rs:90\r\n  40:     0x7f91ee3987fb - start_thread\r\n  41:     0x7f91f3166b5e - clone\r\n  42:                0x0 - <unknown>\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.25.0-nightly (4d2d3fc5d 2018-02-13) running on x86_64-unknown-linux-gnu\r\n```\r\n\r\n### Meta\r\nTested toolchains:\r\n* ```rustc 1.24.0-nightly (8e7a609e6 2018-01-04)```\r\n* ```rustc 1.25.0-nightly (4d2d3fc5d 2018-02-13)```\r\n```bash\r\n$ xargo -V                           \r\nxargo 0.3.8\r\ncargo 0.24.0 (45043115c 2017-12-05)\r\n```\r\n\r\ncc @japaric ", "closed_by": {"login": "niklasad1", "id": 14157425, "node_id": "MDQ6VXNlcjE0MTU3NDI1", "avatar_url": "https://avatars.githubusercontent.com/u/14157425?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niklasad1", "html_url": "https://github.com/niklasad1", "followers_url": "https://api.github.com/users/niklasad1/followers", "following_url": "https://api.github.com/users/niklasad1/following{/other_user}", "gists_url": "https://api.github.com/users/niklasad1/gists{/gist_id}", "starred_url": "https://api.github.com/users/niklasad1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niklasad1/subscriptions", "organizations_url": "https://api.github.com/users/niklasad1/orgs", "repos_url": "https://api.github.com/users/niklasad1/repos", "events_url": "https://api.github.com/users/niklasad1/events{/privacy}", "received_events_url": "https://api.github.com/users/niklasad1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48519/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48519/timeline", "performed_via_github_app": null, "state_reason": "completed"}