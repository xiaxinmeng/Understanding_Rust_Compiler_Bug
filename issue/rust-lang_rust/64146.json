{"url": "https://api.github.com/repos/rust-lang/rust/issues/64146", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/64146/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/64146/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/64146/events", "html_url": "https://github.com/rust-lang/rust/issues/64146", "id": 489228891, "node_id": "MDU6SXNzdWU0ODkyMjg4OTE=", "number": 64146, "title": "rustdoc generates illegal <h3> in <span> for struct-like enums", "user": {"login": "kentfredric", "id": 44790, "node_id": "MDQ6VXNlcjQ0Nzkw", "avatar_url": "https://avatars.githubusercontent.com/u/44790?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kentfredric", "html_url": "https://github.com/kentfredric", "followers_url": "https://api.github.com/users/kentfredric/followers", "following_url": "https://api.github.com/users/kentfredric/following{/other_user}", "gists_url": "https://api.github.com/users/kentfredric/gists{/gist_id}", "starred_url": "https://api.github.com/users/kentfredric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kentfredric/subscriptions", "organizations_url": "https://api.github.com/users/kentfredric/orgs", "repos_url": "https://api.github.com/users/kentfredric/repos", "events_url": "https://api.github.com/users/kentfredric/events{/privacy}", "received_events_url": "https://api.github.com/users/kentfredric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-09-04T15:19:55Z", "updated_at": "2019-09-06T11:36:51Z", "closed_at": "2019-09-06T11:36:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "See also #7529, #60403 and #60865\r\n\r\nWhen using a struct-like enum, rustdoc generates the following code for the enums fields:\r\n\r\n(hand formatted)\r\n```html\r\n<span class='autohide sub-variant' id='variant.ParseU64Error.fields'>\r\n  <h3>Fields of <b>ParseU64Error</b></h3>\r\n  <div>\r\n    <span id=\"variant.ParseU64Error.field.input_value\" class=\"variant small-section-header\"><a href=\"#variant.ParseU64Error.field.input_value\" class=\"anchor field\"></a><code id='ParseU64Error.v.input_value.v'>input_value:&nbsp;<a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/alloc/string/struct.String.html\" title=\"struct alloc::string::String\">String</a></code></span>\r\n    <div class='docblock'><p>The string that was attempted to be parsed</p></div>\r\n    <span id=\"variant.ParseU64Error.field.input_line\" class=\"variant small-section-header\"><a href=\"#variant.ParseU64Error.field.input_line\" class=\"anchor field\"></a><code id='ParseU64Error.v.input_line.v'>input_line:&nbsp;<a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.usize.html\">usize</a></code></span>\r\n    <div class='docblock'><p>The line of the file that was trying to be decoded</p></div>\r\n    <span id=\"variant.ParseU64Error.field.input_file\" class=\"variant small-section-header\"><a href=\"#variant.ParseU64Error.field.input_file\" class=\"anchor field\"></a><code id='ParseU64Error.v.input_file.v'>input_file:&nbsp;<a class=\"struct\" href=\"https://doc.rust-lang.org/nightly/std/path/struct.PathBuf.html\" title=\"struct std::path::PathBuf\">PathBuf</a></code></span>\r\n    <div class='docblock'><p>The file that was being read</p></div>\r\n  </div>\r\n</span>\r\n```\r\n\r\n`htmltidy` hates this.\r\n```\r\nline 18 column 7 - Warning: missing </span> before <h3>\r\nline 18 column 80 - Warning: inserting implicit <span>\r\nline 18 column 120 - Warning: inserting implicit <span>\r\nline 18 column 120 - Warning: missing </span> before <div>\r\nline 21 column 13 - Warning: discarding unexpected </span>\r\nline 1 column 3935 - Warning: <a> attribute \"href\" lacks value\r\n```\r\n\r\nSpans may only contain [Phrasing Content](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content) but h1 et. al is only \"Heading Content\". \r\n\r\nSo what htmltidy ends up doing is closing the first `<span>` before the `<h3>`, and this breaks the layout substantially :)\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/64146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/64146/timeline", "performed_via_github_app": null, "state_reason": "completed"}