{"url": "https://api.github.com/repos/rust-lang/rust/issues/19675", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19675/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19675/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19675/events", "html_url": "https://github.com/rust-lang/rust/issues/19675", "id": 51497325, "node_id": "MDU6SXNzdWU1MTQ5NzMyNQ==", "number": 19675, "title": "rustc crashing", "user": {"login": "ragingSloth", "id": 3530278, "node_id": "MDQ6VXNlcjM1MzAyNzg=", "avatar_url": "https://avatars.githubusercontent.com/u/3530278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ragingSloth", "html_url": "https://github.com/ragingSloth", "followers_url": "https://api.github.com/users/ragingSloth/followers", "following_url": "https://api.github.com/users/ragingSloth/following{/other_user}", "gists_url": "https://api.github.com/users/ragingSloth/gists{/gist_id}", "starred_url": "https://api.github.com/users/ragingSloth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ragingSloth/subscriptions", "organizations_url": "https://api.github.com/users/ragingSloth/orgs", "repos_url": "https://api.github.com/users/ragingSloth/repos", "events_url": "https://api.github.com/users/ragingSloth/events{/privacy}", "received_events_url": "https://api.github.com/users/ragingSloth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-12-09T23:27:47Z", "updated_at": "2015-10-23T21:06:56Z", "closed_at": "2015-10-23T21:06:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I just built rust v.13 from master, but when I try to compile I experience a variety of errors. I experienced a panic trying to compile something with `#![no_std]`.\n\n```\n$rustc `RUST_BACKTRACE=1` -O --target i686-unknown-linux-gnu --crate-type lib -o main.o --emit obj main.rs\nerror: requires `copy` lang_item\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'called `Result::unwrap()` on an `Err` value: ErrorReported', /root/Downloads   /rust/src/libcore/result.rs:744\n```\n\nwhen I implement an empty Clone trait to fix the initial error the same command errors with.\n\n```\n...\n\n<premain>: CommandLine Error: Option 'unroll-runtime' registered more than once!\n\n<premain>: CommandLine Error: Option 'unroll-allow-partial' registered more than once!\n\n<premain>: CommandLine Error: Option 'unroll-count' registered more than once!\n\n<premain>: CommandLine Error: Option 'unroll-threshold' registered more than once!\n\n<premain>: CommandLine Error: Option 'enable-lsr-phielim' registered more than once!\n\n<premain>: CommandLine Error: Option 'rotation-max-header-size' registered more than once!\n...\n```\n\nwhen I try to compile other programs I get `illegal hardware instruction (core dumped)`. I ran it under gdb and it appears to be segfaulting.\n\n```\n$rustc test2.rs\nzsh: illegal hardware instruction (core dumped)  rustc test2.rs\n$gdb rustc\n$(gdb) run ./test2.rs\nStarting program: /usr/local/bin/rustc ./test2.rs\nwarning: Could not load shared library symbols for linux-vdso.so.1.\nDo you need \"set solib-search-path\" or \"set sysroot\"?\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\n[New Thread 0x7fffec7fef00 (LWP 3343)]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x7fffec7fef00 (LWP 3343)]\n0x00007ffff4fa1a7d in llvm::StringRef::find_last_not_of(llvm::StringRef, unsigned long) const () from /usr/lib/libLLVM-3.5.so\n$(gdb) backtrace\n#0  0x00007ffff4fa1a7d in llvm::StringRef::find_last_not_of(llvm::StringRef, unsigned long) const () from /usr/lib/libLLVM-3.5.so\n#1  0x00007ffff47a49a3 in llvm::object::ArchiveMemberHeader::getSize() const () from /usr/lib/libLLVM-3.5.so\n#2  0x00007ffff47a4d3e in llvm::object::Archive::Child::Child(llvm::object::Archive const*, char const*) () from /usr/lib/libLLVM-3.5.so\n#3  0x00007ffff47a4f6c in llvm::object::Archive::child_begin(bool) const () from /usr/lib/libLLVM-3.5.so\n#4  0x00007fffefdb0684 in llvm::object::Archive::Archive(llvm::MemoryBufferRef, std::error_code&) () from /usr/local/lib/librustc_llvm-4e7c5e5c.so\n#5  0x00007fffefdb0c3a in llvm::object::Archive::create(llvm::MemoryBufferRef) () from /usr/local/lib/librustc_llvm-4e7c5e5c.so\n#6  0x00007fffef1eb1a8 in LLVMRustOpenArchive (path=<optimized out>) at /root/Downloads/rust/src/rustllvm/RustWrapper.cpp:727\n#7  0x00007fffef1e7a89 in archive_ro::ArchiveRO::open::hd9ea27a23da59518eba () from /usr/local/lib/librustc_llvm-4e7c5e5c.so\n#8  0x00007ffff24dc0ab in metadata::loader::get_metadata_section::closure.99492 () from /usr/local/lib/librustc-4e7c5e5c.so\n#9  0x00007ffff686dfff in time::duration::Duration::span::h1fa98e12f2fbff11Ckm () from /usr/local/lib/libstd-4e7c5e5c.so\n#10 0x00007ffff24db086 in metadata::loader::get_metadata_section::h24866dbeb8244841N4w () from /usr/local/lib/librustc-4e7c5e5c.so\n#11 0x00007ffff24d9001 in metadata::loader::Context$LT$$x27a$GT$::extract_one::hd01bceaa88606378wDw () from /usr/local/lib/librustc-4e7c5e5c.so\n#12 0x00007ffff24d246a in metadata::loader::Context$LT$$x27a$GT$::find_library_crate::h6fa989b5256c5d2bStw () from /usr/local/lib/librustc-4e7c5e5c.so\n#13 0x00007ffff24cd371 in metadata::creader::PluginMetadataReader$LT$$x27a$GT$::read_plugin_metadata::h7a2e000abef9475d4kv () from /usr/local/lib/librustc-4e7c5e5c.so\n#14 0x00007ffff2503619 in plugin::load::PluginLoader$LT$$x27a$GT$.Visitor$LT$$x27v$GT$::visit_view_item::ha8f421e39f6571fbldA ()from /usr/local/lib/librustc-4e7c5e5c.so\n#15 0x00007ffff25029bb in plugin::load::load_plugins::ha983792bed43042fbcA () from /usr/local/lib/librustc-4e7c5e5c.so\n#16 0x00007ffff6cc2644 in driver::phase_2_configure_and_expand::h144116dfb381b551Qha () from /usr/local/lib/librustc_driver-4e7c5e5c.so\n#17 0x00007ffff6cb62f7 in driver::compile_input::hb468db38392e01fbpba () from /usr/local/lib/librustc_driver-4e7c5e5c.so\n#18 0x00007ffff6d53fb8 in run_compiler::h5606ffa1609782a3kYb () from /usr/local/lib/librustc_driver-4e7c5e5c.so\n#19 0x00007ffff6d528ac in run::closure.21400 () from /usr/local/lib/librustc_driver-4e7c5e5c.so\n#20 0x00007ffff6d6427b in task::TaskBuilder::try_future::closure.22849 () from /usr/local/lib/librustc_driver-4e7c5e5c.so\n#21 0x00007ffff686fa33 in task::TaskBuilder::spawn_internal::closure.30601 () from /usr/local/lib/libstd-4e7c5e5c.so\n#22 0x00007ffff64df532 in task::Task::spawn::closure.5727 () from /usr/local/lib/librustrt-4e7c5e5c.so\n#23 0x00007ffff6546a5c in rust_try_inner () from /usr/local/lib/librustrt-4e7c5e5c.so\n#24 0x00007ffff6546a46 in rust_try () from /usr/local/lib/librustrt-4e7c5e5c.so\n#25 0x00007ffff64df5e3 in unwind::try::hf5f28d8a62a70e27Tyc () from /usr/local/lib/librustrt-4e7c5e5c.so\n#26 0x00007ffff64df3dc in task::Task::run::hcf1e7066a54e37dcfKb () from /usr/local/lib/librustrt4e7c5e5c.so\n#27 0x00007ffff64df028 in task::Task::spawn::closure.5703 () from /usr/local/lib/librustrt-4e7c5e5c.so\n#28 0x00007ffff64e0a25 in thread::thread_start::ha3032c35fbd5a75cw1b () from /usr/local/lib/librustrt-4e7c5e5c.so\n#29 0x00007ffff3ef4314 in start_thread () from /usr/lib/libpthread.so.0\n#30 0x00007ffff61b65bd in clone () from /usr/lib/libc.so.6\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19675/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19675/timeline", "performed_via_github_app": null, "state_reason": "completed"}