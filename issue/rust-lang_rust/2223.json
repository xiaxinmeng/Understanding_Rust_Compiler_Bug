{"url": "https://api.github.com/repos/rust-lang/rust/issues/2223", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2223/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2223/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2223/events", "html_url": "https://github.com/rust-lang/rust/issues/2223", "id": 4145178, "node_id": "MDU6SXNzdWU0MTQ1MTc4", "number": 2223, "title": "Consider prioritising crate search directories", "user": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-04-17T00:14:12Z", "updated_at": "2013-05-22T23:49:46Z", "closed_at": "2013-05-22T23:49:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The way crates are resolved now is by searching all known library paths for libraries with matching metadata. If there is exactly one match then it is used. If there are multiple matches then it's an error. This creates occasional situations where there are (for good reason) multiple crates in different directories with the exact same name, causing compilation to fail.\n\nThe most obvious example is when somebody installs the same crate to `./.cargo` and to `~/.cargo`, making it unusable. One possible scheme is to break the paths up into 'priority groups' and if there are multiple matches _with the exact same metadata_ then the higher priority one wins. If there are muliple matches with different metadata then, even if they are different priorities, it's still an error.\n\nPriority groups from lowest to highest:\n- sysroot target libs - where core/std, rustc, etc live\n- sysroot cargo libs - if such a thing exists\n- user cargo libs - in `~/.cargo`\n- local cargo libs - in `./.cargo`\n- all user provided search paths\n\nMost of these groups consist of a single path, except for 'all user provided search paths', i.e. the `-L` flag. If a user explicitly says where to look for crates then there really shouldn't be dupes.\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2223/timeline", "performed_via_github_app": null, "state_reason": "completed"}