{"url": "https://api.github.com/repos/rust-lang/rust/issues/19646", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19646/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19646/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19646/events", "html_url": "https://github.com/rust-lang/rust/issues/19646", "id": 51366452, "node_id": "MDU6SXNzdWU1MTM2NjQ1Mg==", "number": 19646, "title": "Feature gates at the top of a file silently ignored in module context", "user": {"login": "sp3d", "id": 4684824, "node_id": "MDQ6VXNlcjQ2ODQ4MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4684824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sp3d", "html_url": "https://github.com/sp3d", "followers_url": "https://api.github.com/users/sp3d/followers", "following_url": "https://api.github.com/users/sp3d/following{/other_user}", "gists_url": "https://api.github.com/users/sp3d/gists{/gist_id}", "starred_url": "https://api.github.com/users/sp3d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sp3d/subscriptions", "organizations_url": "https://api.github.com/users/sp3d/orgs", "repos_url": "https://api.github.com/users/sp3d/repos", "events_url": "https://api.github.com/users/sp3d/events{/privacy}", "received_events_url": "https://api.github.com/users/sp3d/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234948, "node_id": "MDU6TGFiZWwyMzQ5NDg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-attributes", "name": "A-attributes", "color": "f7e101", "default": false, "description": "Area: #[attributes(..)]"}, {"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-12-08T23:16:57Z", "updated_at": "2015-10-13T22:13:05Z", "closed_at": "2015-10-13T22:13:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For example, create two files:\n\ngate.rs:\n\n```\n#![feature(globs)]\n#![crate_type=\"lib\"]\n\nuse std::*;\n\npub fn foo()\n{\n    let _=os::args();\n}\n```\n\nm.rs:\n\n```\nmod gate;\n\nfn main()\n{\n    gate::foo()\n}\n```\n\nRunning `rustc m.rs` will result in complaints about the glob being used in gate.rs, but will not mention that there are ignored feature flags in the file (which are the real cause of the problem). Running `rustc gate.rs` succeeds.\n\nIt would be nice if rustc warned when it encountered feature flags or crate attributes in a context where they are ignored.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19646/timeline", "performed_via_github_app": null, "state_reason": "completed"}