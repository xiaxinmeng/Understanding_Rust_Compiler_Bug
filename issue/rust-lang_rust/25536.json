{"url": "https://api.github.com/repos/rust-lang/rust/issues/25536", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25536/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25536/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25536/events", "html_url": "https://github.com/rust-lang/rust/issues/25536", "id": 77323474, "node_id": "MDU6SXNzdWU3NzMyMzQ3NA==", "number": 25536, "title": "ICE: Type aliases, nested types, and Fn cause panic", "user": {"login": "pierzchalski", "id": 1725294, "node_id": "MDQ6VXNlcjE3MjUyOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierzchalski", "html_url": "https://github.com/pierzchalski", "followers_url": "https://api.github.com/users/pierzchalski/followers", "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}", "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions", "organizations_url": "https://api.github.com/users/pierzchalski/orgs", "repos_url": "https://api.github.com/users/pierzchalski/repos", "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}", "received_events_url": "https://api.github.com/users/pierzchalski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-05-17T14:41:00Z", "updated_at": "2015-09-24T23:26:51Z", "closed_at": "2015-09-24T23:26:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "A simple example involving a type alias, a nested type, and `Fn` causes an ICE.\n\nI tried this code:\n\n``` rust\nstruct C<A> { a: A }\n\ntype T<A, B> = C<Fn(A) -> B>;\n\nfn id<A, B>(t: T<&A, B>) -> T<&A, B> { t }\n```\n\nI expected to see either no error, or at most an error about lifetime elision.\n\nInstead, when compiled with `rustc --crate-type=lib` I get an ICE. The effect persists when `C` is replaced by `Box`, but disappears if `Fn` is replaced by another two-parameter type.\n\nThe ICE:\n\n```\nerror: internal compiler error: unexpected panic\nthread 'rustc' panicked at \n'assertion failed: !predicates.has_escaping_regions()',\n/build/rust/src/rustc-1.0.0/src/librustc_typeck/check/mod.rs:1698\n```\n\nThe backtrace output is:\n\n```\nstack backtrace:\n   1:     0x7f892d092189 - sys::backtrace::write::h85e36588f6ec519ed4r\n   2:     0x7f892d099e96 - <unknown>\n   3:     0x7f892d05d1a2 - rt::unwind::begin_unwind_inner::h58d8677c31c147e6t6v\n   4:     0x7f892be6090e - <unknown>\n   5:     0x7f892bead693 - <unknown>\n   6:     0x7f892bee43d1 - check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hf49f58e50ffe027105k\n   7:     0x7f892bee619b - <unknown>\n   8:     0x7f892bee46c8 - check::wf::BoundsChecker<'cx, 'tcx>.TypeFolder<'tcx>::fold_ty::hf49f58e50ffe027105k\n   9:     0x7f892bedb8d7 - <unknown>\n  10:     0x7f892bfc628d - <unknown>\n  11:     0x7f892bfc16e0 - check_crate::h5570390160d0735dXcC\n  12:     0x7f892d5cca18 - driver::phase_3_run_analysis_passes::h8472d32b1f7cb2d6nGa\n  13:     0x7f892d5adb15 - driver::compile_input::hee759950e4b56686Qba\n  14:     0x7f892d66efe1 - run_compiler::h57ce534eedce4c58z4b\n  15:     0x7f892d66cc32 - <unknown>\n  16:     0x7f892d66c169 - <unknown>\n  17:     0x7f892d103b28 - <unknown>\n  18:     0x7f892d103b15 - rust_try\n  19:     0x7f892d66c418 - <unknown>\n  20:     0x7f892d098d81 - <unknown>\n  21:     0x7f8927b22373 - start_thread\n  22:     0x7f892ccf227c - clone\n  23:                0x0 - <unknown>\n```\n\nThe output of `rustc --version --verbose` is:\n\n```\nrustc 1.0.0-beta.5 (built 2015-05-16)\nbinary: rustc\ncommit-hash: unknown\ncommit-date: unknown\nbuild-date: 2015-05-16\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-beta.5\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25536/timeline", "performed_via_github_app": null, "state_reason": "completed"}