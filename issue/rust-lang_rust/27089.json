{"url": "https://api.github.com/repos/rust-lang/rust/issues/27089", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27089/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27089/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27089/events", "html_url": "https://github.com/rust-lang/rust/issues/27089", "id": 95679957, "node_id": "MDU6SXNzdWU5NTY3OTk1Nw==", "number": 27089, "title": "The generic-enum-with-different-disr-sizes test fails in LLDB", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-17T15:28:48Z", "updated_at": "2023-04-05T17:45:40Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Add in https://github.com/rust-lang/rust/pull/27070 I merged the test in with https://github.com/rust-lang/rust/pull/27076 but ignored the LLDB failure to land the LLVM update ahead of time. This test fails in LLDB currently, and it'd be good to know why! For posterity the error is:\n\n```\n---- [debuginfo-lldb] debuginfo/generic-enum-with-different-disr-sizes.rs stdout ----\n    NOTE: compiletest thinks it is using LLDB version 310\n\nerror: line not found in debugger output: [...]$1 = Variant1(101)\nstatus: exit code: 0\ncommand: \"/usr/bin/python2.7\" \"/Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/etc/lldb_batchmode.py\" \"x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin\" \"x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.debugger.script\"\nstdout:\n------------------------------------------\nLLDB batch-mode script\n----------------------\nDebugger commands script is 'x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.debugger.script'.\nTarget executable is 'x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin'.\nCurrent working directory is '/Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/obj'\nCreating a target for 'x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin'\nsettings set auto-confirm true\n\nversion\nlldb-310.2.37 \ncommand script import /Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/./src/etc/lldb_rust_formatters.py\ntype summary add --no-value --python-function lldb_rust_formatters.print_val -x \".*\" --category Rust\ntype category enable Rust\n\nbreakpoint set --line 88\nBreakpoint 1: where = generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin`generic_enum_with_different_disr_sizes::main + 151 at generic-enum-with-different-disr-sizes.rs:88, address = 0x0000000100000da7 \nrun\nHit breakpoint 1.1: where = generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin`generic_enum_with_different_disr_sizes::main + 151 at generic-enum-with-different-disr-sizes.rs:88, address = 0x0000000100000da7, resolved, hit count = 1 \nProcess 55204 launched: '/Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/obj/x86_64-apple-darwin/test/debuginfo-lldb/generic-enum-with-different-disr-sizes.stage2-x86_64-apple-darwin' (x86_64) \nprint eight_bytes1\n(generic_enum_with_different_disr_sizes::Enum<f64>) $0 = Variant1(100) \nprint four_bytes1\n(generic_enum_with_different_disr_sizes::Enum<i32>) $1 = { = Variant1(101) = Variant2(101) } \nprint two_bytes1\n(generic_enum_with_different_disr_sizes::Enum<i16>) $2 = Variant1(102) \nprint one_byte1\n(generic_enum_with_different_disr_sizes::Enum<u8>) $3 = { = Variant1('A') = Variant2('A') } \nprint eight_bytes2\n(generic_enum_with_different_disr_sizes::Enum<f64>) $4 = Variant2(100) \nprint four_bytes2\n(generic_enum_with_different_disr_sizes::Enum<i32>) $5 = { = Variant1(101) = Variant2(101) } \nprint two_bytes2\n(generic_enum_with_different_disr_sizes::Enum<i16>) $6 = Variant2(102) \nprint one_byte2\n(generic_enum_with_different_disr_sizes::Enum<u8>) $7 = { = Variant1('A') = Variant2('A') } \ncontinue\nquit\n\n\n------------------------------------------\nstderr:\n------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/etc/lldb_rust_formatters.py\", line 155, in print_val\n    return print_val(lldb_val.GetChildAtIndex(discriminant_val), internal_dict)\n  File \"/Library/PrivateFrameworks/LLDB.framework/Versions/A/Resources/Python/lldb/__init__.py\", line 10192, in GetChildAtIndex\n    return _lldb.SBValue_GetChildAtIndex(self, *args)\nNotImplementedError: Wrong number of arguments for overloaded function 'SBValue_GetChildAtIndex'.\n  Possible C/C++ prototypes are:\n    GetChildAtIndex(lldb::SBValue *,uint32_t)\n    GetChildAtIndex(lldb::SBValue *,uint32_t,lldb::DynamicValueType,bool)\n\nTraceback (most recent call last):\n  File \"/Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/etc/lldb_rust_formatters.py\", line 155, in print_val\n    return print_val(lldb_val.GetChildAtIndex(discriminant_val), internal_dict)\n  File \"/Library/PrivateFrameworks/LLDB.framework/Versions/A/Resources/Python/lldb/__init__.py\", line 10192, in GetChildAtIndex\n    return _lldb.SBValue_GetChildAtIndex(self, *args)\nNotImplementedError: Wrong number of arguments for overloaded function 'SBValue_GetChildAtIndex'.\n  Possible C/C++ prototypes are:\n    GetChildAtIndex(lldb::SBValue *,uint32_t)\n    GetChildAtIndex(lldb::SBValue *,uint32_t,lldb::DynamicValueType,bool)\n\n\n------------------------------------------\n\nthread '[debuginfo-lldb] debuginfo/generic-enum-with-different-disr-sizes.rs' panicked at 'explicit panic', /Users/rustbuild/src/rust-buildbot/slave/auto-mac-64-opt/build/src/compiletest/runtest.rs:1490\n\n\n\nfailures:\n    [debuginfo-lldb] debuginfo/generic-enum-with-different-disr-sizes.rs\n```\n\ncc @michaelwoerister \n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27089/timeline", "performed_via_github_app": null, "state_reason": null}