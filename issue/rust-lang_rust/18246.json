{"url": "https://api.github.com/repos/rust-lang/rust/issues/18246", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18246/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18246/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18246/events", "html_url": "https://github.com/rust-lang/rust/issues/18246", "id": 46574995, "node_id": "MDU6SXNzdWU0NjU3NDk5NQ==", "number": 18246, "title": "ICE: Index out of bounds error after argument type mismatch.", "user": {"login": "michaelsproul", "id": 4452260, "node_id": "MDQ6VXNlcjQ0NTIyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelsproul", "html_url": "https://github.com/michaelsproul", "followers_url": "https://api.github.com/users/michaelsproul/followers", "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}", "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions", "organizations_url": "https://api.github.com/users/michaelsproul/orgs", "repos_url": "https://api.github.com/users/michaelsproul/repos", "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelsproul/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-10-22T23:59:41Z", "updated_at": "2014-10-23T00:08:10Z", "closed_at": "2014-10-23T00:08:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm working on `TrieMap` at the moment, and hit an ICE when I passed an argument of the wrong type.\n\nI don't have much experience with the compiler's internals, but here's a backtrace...\n\n```\ntrie.rs:1703:25: 1703:29 error: mismatched types: expected `&trie::TrieNode<<generic #494>>`, found `&trie::TrieMap<uint>` (expected struct trie::TrieNode, found struct trie::TrieMap)\ntrie.rs:1703         check_integrity(&map);\n                                     ^~~~\n<std macros>:8:12: 1707:42 error: mismatched types: expected `bool`, found `uint` (expected bool, found uint)\n<std macros>:8         if !$cond {\n<std macros>:9             fail!($($arg),+)\n<std macros>:10         }\n<std macros>:11     );\n<std macros>:12 )\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'index out of bounds: the len is 12 but the index is 12', /home/michael/Local/Programming/rust/src/libsyntax/lib.rs:1\n\nstack backtrace:\n   1:     0x7f4b860cbb10 - rt::backtrace::imp::write::h6e8b78303d8814faFKq\n   2:     0x7f4b860cec40 - failure::on_fail::h68e799587531299925q\n   3:     0x7f4b8a4ad220 - unwind::begin_unwind_inner::haf49510935d26c3e8yd\n   4:     0x7f4b8a4acd60 - unwind::begin_unwind_fmt::h1c84114572a88560Awd\n   5:     0x7f4b8a4acd20 - rust_begin_unwind\n   6:     0x7f4b8a504290 - failure::fail_fmt::h0337350253fe46d49ek\n   7:     0x7f4b8a504130 - failure::fail_bounds_check::ha0a2903d612efc16Idk\n   8:     0x7f4b86bf5ff0 - codemap::FileMap::get_line::hc7582239b93506ffqQE\n   9:     0x7f4b86c2c980 - diagnostic::emit::hf89699a6e67518dbmrG\n  10:     0x7f4b86c29b50 - diagnostic::EmitterWriter.Emitter::emit::h4c95b09f551649b8bnG\n  11:     0x7f4b86c28340 - diagnostic::Handler::emit::h98e945dc13487948C5F\n  12:     0x7f4b86bf2850 - diagnostic::SpanHandler::span_err::hf3ef21bb8eb5efe0CTF\n  13:     0x7f4b8b01b5b0 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message_str_with_expected::h1be9c48142591c09hpg\n  14:     0x7f4b8b0b3090 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message::h86e67aaa61fad7b2Avg\n  15:     0x7f4b8b01fa90 - middle::typeck::check::demand::suptype::hfd893e0a5dff867eQPQ\n  16:     0x7f4b8b0c2760 - middle::typeck::check::check_expr_has_type::closure.132497\n  17:     0x7f4b8b0b8350 - middle::typeck::check::check_expr_with_unifier::he4306fd7f0f00e01SFX\n  18:     0x7f4b8b0b8350 - middle::typeck::check::check_expr_with_unifier::he4306fd7f0f00e01SFX\n  19:     0x7f4b8b10b150 - middle::typeck::check::check_stmt::h87112b0f71b1bb270MZ\n  20:     0x7f4b8b0803d0 - middle::typeck::check::check_block_with_expected::h90b59d8d44bdf31cdRZ\n  21:     0x7f4b8b0c3ff0 - middle::typeck::check::check_block_no_value::hcdaea54acaf4bbe38PZ\n  22:     0x7f4b8b0b8350 - middle::typeck::check::check_expr_with_unifier::he4306fd7f0f00e01SFX\n  23:     0x7f4b8b0803d0 - middle::typeck::check::check_block_with_expected::h90b59d8d44bdf31cdRZ\n  24:     0x7f4b8b07b8a0 - middle::typeck::check::check_fn::hea46e7c687ffcb43BtU\n  25:     0x7f4b8b07b5e0 - middle::typeck::check::check_bare_fn::h35548e9fbaccd943JiU\n  26:     0x7f4b8b076a30 - middle::typeck::check::check_item::h39df893b3a14d5f1ACU\n  27:     0x7f4b8b0798e0 - visit::walk_item::h12528687834172216328\n  28:     0x7f4b8b0798e0 - visit::walk_item::h12528687834172216328\n  29:     0x7f4b8b07b0b0 - middle::typeck::check::check_item_types::h0bfaa26697cac95fThU\n  30:     0x7f4b8ab1b650 - util::common::time::h11267775215304567966\n  31:     0x7f4b8b35d740 - middle::typeck::check_crate::h49e5ccb2edaef88a83m\n  32:     0x7f4b8b3c9db0 - driver::driver::phase_3_run_analysis_passes::hddb8506836ada980rHz\n  33:     0x7f4b8b3c4ef0 - driver::driver::compile_input::h646a92ac90852c70doz\n  34:     0x7f4b8b450320 - driver::run_compiler::hd5c22de8b8d06a94xbD\n  35:     0x7f4b8b4501d0 - driver::run::closure.145571\n  36:     0x7f4b8ab354e0 - task::TaskBuilder<S>::try_future::closure.102977\n  37:     0x7f4b8ab352c0 - task::TaskBuilder<S>::spawn_internal::closure.102948\n  38:     0x7f4b8a8030d0 - task::spawn_opts::closure.8464\n  39:     0x7f4b8a512350 - rust_try_inner\n  40:     0x7f4b8a512340 - rust_try\n  41:     0x7f4b8a4aaae0 - unwind::try::hd979bd38fee1e0c1Qnd\n  42:     0x7f4b8a4aa960 - task::Task::run::h95374a59f92fb2f0uDc\n  43:     0x7f4b8a802e10 - task::spawn_opts::closure.8404\n  44:     0x7f4b8a4ac230 - thread::thread_start::h797beb6a46e8a213FXc\n  45:     0x7f4b85474250 - start_thread\n  46:     0x7f4b8a1853b9 - clone\n  47:                0x0 - <unknown>\n```\n\nSeems slightly related to https://github.com/rust-lang/rust/issues/14091?\n\nSorry I don't have a small sample to reproduce it.\n", "closed_by": {"login": "michaelsproul", "id": 4452260, "node_id": "MDQ6VXNlcjQ0NTIyNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelsproul", "html_url": "https://github.com/michaelsproul", "followers_url": "https://api.github.com/users/michaelsproul/followers", "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}", "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions", "organizations_url": "https://api.github.com/users/michaelsproul/orgs", "repos_url": "https://api.github.com/users/michaelsproul/repos", "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelsproul/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18246/timeline", "performed_via_github_app": null, "state_reason": "completed"}