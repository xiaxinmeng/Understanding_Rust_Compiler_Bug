{"url": "https://api.github.com/repos/rust-lang/rust/issues/102996", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/102996/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/102996/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/102996/events", "html_url": "https://github.com/rust-lang/rust/issues/102996", "id": 1406995970, "node_id": "I_kwDOAAsO6M5T3Q4C", "number": 102996, "title": "rustdoc: inconsistent number of blank lines rendered top/bottom", "user": {"login": "ojeda", "id": 1054456, "node_id": "MDQ6VXNlcjEwNTQ0NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1054456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ojeda", "html_url": "https://github.com/ojeda", "followers_url": "https://api.github.com/users/ojeda/followers", "following_url": "https://api.github.com/users/ojeda/following{/other_user}", "gists_url": "https://api.github.com/users/ojeda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ojeda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ojeda/subscriptions", "organizations_url": "https://api.github.com/users/ojeda/orgs", "repos_url": "https://api.github.com/users/ojeda/repos", "events_url": "https://api.github.com/users/ojeda/events{/privacy}", "received_events_url": "https://api.github.com/users/ojeda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-10-13T01:22:07Z", "updated_at": "2022-10-19T10:16:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried this code:\r\n\r\n```rust\r\n/// ```\r\n/// # use c::f;\r\n///\r\n///\r\n/// f()?;\r\n///\r\n///\r\n/// # Ok::<(), i32>(())\r\n/// ```\r\n```\r\n\r\nI expected to see this happen: the same number of blank lines rendered on the top and bottom (0, 1 or 2 depending on what rule is followed).\r\n\r\nInstead, this happened: currently it renders 2 on top, but 1 at the bottom, which is confusing.\r\n\r\nI assume the idea is that the user does not add any blank line at all. However, since leaving 1 line in the bottom renders fine (even if the generated HTML does contain an extra newline), users may assume that it also works for the top, especially in projects that e.g. group hidden/not hidden `use`s at the top. For instance, the following appears to work fine:\r\n\r\n```rust\r\n/// ```\r\n/// # use c::very_common_thing;\r\n/// use c::f;\r\n///\r\n/// f(very_common_thing)?;\r\n///\r\n/// # Ok::<(), i32>(())\r\n/// ```\r\n```\r\n\r\n### Meta\r\n\r\nSeems to have happened since a while ago, see https://github.com/rust-lang/rust/issues/78695 for a related feature request that would fix this bug by leaving 0 lines on both top and bottom (which would be consistent).", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/102996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/102996/timeline", "performed_via_github_app": null, "state_reason": null}