{"url": "https://api.github.com/repos/rust-lang/rust/issues/9240", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9240/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9240/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9240/events", "html_url": "https://github.com/rust-lang/rust/issues/9240", "id": 19589188, "node_id": "MDU6SXNzdWUxOTU4OTE4OA==", "number": 9240, "title": "rustpkg: no_rebuilding_dep test failure", "user": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2013-09-17T00:39:25Z", "updated_at": "2014-06-16T21:56:42Z", "closed_at": "2013-09-23T18:51:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My debian x64 fails on `make check`:\n\n```\n$ rust -v\nrust 0.8-pre (2562f48 2013-09-16 06:30:51 -0700)\nhost: x86_64-unknown-linux-gnu\n\n$ RUST_LOG=rustpkg make check TESTNAME=no_rebuilding_dep 2> out\n<snip>\nrunning 1 test\ntest tests::no_rebuilding_dep ... FAILED\n\nmetrics saved to: tmp/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-rustpkg-metrics.json\nfailures:\n    tests::no_rebuilding_dep\n\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured\n\n$ cat out\nCreated /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1 and does it exist? true\nmk_workspace: creating /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1\nCreated /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1 and does it exist? true\nCreated empty package dir for foo-0.1, returning /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1\nCreated /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1 and does it exist? true\n cd /tmp/d5lF0kcJw3ifff0Wtemp_workspace; /home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/bin/rustpkg build foo\nOutput from command /home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/bin/rustpkg with args &[~\"build\", ~\"foo\"] was WARNING: The Rust package manager is experimental and may be unstable\nnote: Installed package bar-0.1 to /tmp/d5lF0kcJw3ifff0Wtemp_workspace\n {Using sysroot: /home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu\nWill store workcache in /tmp/d5lF0kcJw3ifff0Wtemp_workspace/.rust\nWorkcache database file: /tmp/d5lF0kcJw3ifff0Wtemp_workspace/.rust/rustpkg_db.json\nDidn't find foo-0.1 in /tmp/d5lF0kcJw3ifff0Wtemp_workspace/.rust\nFound foo-0.1 in /tmp/d5lF0kcJw3ifff0Wtemp_workspace\nfound pkg foo-0.1 in workspace /tmp/d5lF0kcJw3ifff0Wtemp_workspace, trying to build\nChecking package source for package ID foo-0.1, workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace\nChecking dirs: ~\"/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo\"\nFor package id foo-0.1, returning /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1\npkgsrc: Returning {/tmp/d5lF0kcJw3ifff0Wtemp_workspace|/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1|foo-0.1}\npackage source = Package ID foo-0.1 in start dir /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1 [workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace]\npackage_script_option: checking whether /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/pkg.rs exists\nexec_work: looking up foo-0.1 and extra::workcache::WorkMap(extra::treemap::TreeMap<~str,extra::workcache::KindMap>{root: None, length: 0u})\n\"Cache miss!\"\nbuild: workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace (in Rust path? true is git dir? false pkgid = foo-0.1 pkgsrc start_dir = /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1\nPackage source directory = Package ID foo-0.1 in start dir /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1 [workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace]\npackage_script_option: checking whether /tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/pkg.rs exists\nCalling pkg_script_option on None\npacka[...]\nlib_output_file_name: given /tmp/d5lF0kcJw3ifff0Wtemp_workspace and parent .rust and short name bar\nlibrary_in_workspace: checking whether a library named bar exists\nshort_name = bar where = Build workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace prefix = build\nListing directory /tmp/d5lF0kcJw3ifff0Wtemp_workspace/build/x86_64-unknown-linux-gnu/bar\ndir has 4u entries\nlib_prefix = libbar and lib_filetype = .so\np = barbench, p's extension is None\np = bar, p's extension is None\np = libbar-40b5eb3af07a7a64-0.1.so, p's extension is Some(\".so\")\nMaybe 0.1 is a version\nAttempting to parse: 0.1\nMaybe libbar equals libbar\np = bartest, p's extension is None\nresult_filename = /tmp/d5lF0kcJw3ifff0Wtemp_workspace/build/x86_64-unknown-linux-gnu/bar/libbar-40b5eb3af07a7a64-0.1.so\n cd /tmp/d5lF0kcJw3ifff0Wtemp_workspace; /home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/bin/rustpkg build foo\nOutput from command /home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/bin/rustpkg with args &[~\"build\", ~\"foo\"] was WARNING: The Rust package manager is experimental and may be unstable\nworkcache: discovered input binary:/home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libextra-a7c050cfd46b2c9a-0.8-pre.so is fresh\nworkcache: discovered input binary:/home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd-6c65cf4b443341b1-0.8-pre.so is fresh\nworkcache: discovered input binary:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/bin/bar is fresh\nworkcache: discovered input binary:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/lib/x86_64-unknown-linux-gnu/libbar-40b5eb3af07a7a64-0.1.so is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1/bench.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1/lib.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1/main.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1/test.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/bench.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/lib.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/main.rs is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/foo-0.1/test.rs is not fresh\nworkcache: discovered input binary:/home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libextra-a7c050cfd46b2c9a-0.8-pre.so is fresh\nworkcache: discovered input binary:/home/lime/src/rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib/libstd-6c65cf4b443341b1-0.8-pre.so is fresh\nworkcache: discovered input file:/tmp/d5lF0kcJw3ifff0Wtemp_workspace/src/bar-0.1/bench.rs is fr[...]\nlib_output_file_name: given /tmp/d5lF0kcJw3ifff0Wtemp_workspace and parent .rust and short name bar\nlibrary_in_workspace: checking whether a library named bar exists\nshort_name = bar where = Build workspace = /tmp/d5lF0kcJw3ifff0Wtemp_workspace prefix = build\nListing directory /tmp/d5lF0kcJw3ifff0Wtemp_workspace/build/x86_64-unknown-linux-gnu/bar\ndir has 4u entries\nlib_prefix = libbar and lib_filetype = .so\np = barbench, p's extension is None\np = bar, p's extension is None\np = libbar-40b5eb3af07a7a64-0.1.so, p's extension is Some(\".so\")\nMaybe 0.1 is a version\nAttempting to parse: 0.1\nMaybe libbar equals libbar\np = bartest, p's extension is None\nresult_filename = /tmp/d5lF0kcJw3ifff0Wtemp_workspace/build/x86_64-unknown-linux-gnu/bar/libbar-40b5eb3af07a7a64-0.1.so\ntask <unnamed> failed at 'assertion failed: foo_date_1 < foo_date_2', /home/lime/src/rust/src/librustpkg/tests.rs:959\ntask <unnamed> failed at 'Some tests failed', /home/lime/src/rust/src/libextra/test.rs:131\nmake: *** [tmp/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-rustpkg.ok] Error 101\n```\n\nbors also failed on pr #9211, [auto-linux-64-nopt-t build log](http://buildbot.rust-lang.org/builders/auto-linux-64-nopt-t/builds/612). (buildbot succeeded after retrial)\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/9240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9240/timeline", "performed_via_github_app": null, "state_reason": "completed"}