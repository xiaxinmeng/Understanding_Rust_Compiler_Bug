{"url": "https://api.github.com/repos/rust-lang/rust/issues/33192", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/33192/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/33192/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/33192/events", "html_url": "https://github.com/rust-lang/rust/issues/33192", "id": 150745971, "node_id": "MDU6SXNzdWUxNTA3NDU5NzE=", "number": 33192, "title": "DWARF regression with `impl` on nightly", "user": {"login": "tromey", "id": 1557670, "node_id": "MDQ6VXNlcjE1NTc2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tromey", "html_url": "https://github.com/tromey", "followers_url": "https://api.github.com/users/tromey/followers", "following_url": "https://api.github.com/users/tromey/following{/other_user}", "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}", "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tromey/subscriptions", "organizations_url": "https://api.github.com/users/tromey/orgs", "repos_url": "https://api.github.com/users/tromey/repos", "events_url": "https://api.github.com/users/tromey/events{/privacy}", "received_events_url": "https://api.github.com/users/tromey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-04-25T04:40:37Z", "updated_at": "2016-05-20T07:34:54Z", "closed_at": "2016-05-20T07:34:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a function in an `impl` like:\n\n```\npub struct HasMethods {\n    value: i32\n}\n\nimpl HasMethods {\n    pub fn take(self) -> HasMethods {\n        self\n    }\n}\n```\n\nWith nightly, I get DWARF like this:\n\n```\n <2><178>: Abbrev Number: 3 (DW_TAG_namespace)\n    <179>   DW_AT_name        : (indirect string, offset: 0x3d0): {{impl}}\n    <17d>   DW_AT_decl_file   : 1\n    <17e>   DW_AT_decl_line   : 40\n...\n <3><1c8>: Abbrev Number: 11 (DW_TAG_subprogram)\n    <1c9>   DW_AT_low_pc      : 0x54c0\n    <1d1>   DW_AT_high_pc     : 0x12\n    <1d5>   DW_AT_frame_base  : 1 byte block: 56    (DW_OP_reg6 (rbp))\n    <1d7>   DW_AT_linkage_name: (indirect string, offset: 0x481): _ZN7methods8{{impl}}4takeE\n    <1db>   DW_AT_name        : (indirect string, offset: 0x49c): take\n    <1df>   DW_AT_decl_file   : 1\n    <1e0>   DW_AT_decl_line   : 50\n    <1e1>   DW_AT_type        : <0x90>\n```\n\nThere are a few problems with this.\n\nFirst, the namespace `{{impl}}` does not seem very useful.  In 1.8 the namespace was named `HasMethods`, after the struct -- this made it quite easy for gdb to find methods associated with a type.\n\nSecond, the `{{impl}}` in the linkage_name also seems peculiar.  This is also another situation where the linkage name attribute differs from the real linkage name -- rendering the attribute useless.\n\nif this change was intentional, then I think gdb will need some other way to find the methods in an `impl` of a particular type.  I don't see any way to get that information now.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/33192/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/33192/timeline", "performed_via_github_app": null, "state_reason": "completed"}