{"url": "https://api.github.com/repos/rust-lang/rust/issues/60726", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60726/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60726/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60726/events", "html_url": "https://github.com/rust-lang/rust/issues/60726", "id": 442965200, "node_id": "MDU6SXNzdWU0NDI5NjUyMDA=", "number": 60726, "title": "rustdoc:ICE with field that has a conditional Send impl.", "user": {"login": "rodrimati1992", "id": 18036327, "node_id": "MDQ6VXNlcjE4MDM2MzI3", "avatar_url": "https://avatars.githubusercontent.com/u/18036327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rodrimati1992", "html_url": "https://github.com/rodrimati1992", "followers_url": "https://api.github.com/users/rodrimati1992/followers", "following_url": "https://api.github.com/users/rodrimati1992/following{/other_user}", "gists_url": "https://api.github.com/users/rodrimati1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/rodrimati1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rodrimati1992/subscriptions", "organizations_url": "https://api.github.com/users/rodrimati1992/orgs", "repos_url": "https://api.github.com/users/rodrimati1992/repos", "events_url": "https://api.github.com/users/rodrimati1992/events{/privacy}", "received_events_url": "https://api.github.com/users/rodrimati1992/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-11T07:39:09Z", "updated_at": "2019-05-23T01:51:12Z", "closed_at": "2019-05-23T01:51:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Edited:\r\nPlease [look at this comment](https://github.com/rust-lang/rust/issues/60726#issuecomment-491535962) for a self-contained example that reproduces the ICE.\r\n\r\n<br>\r\n\r\nIn the process of finishing the 0.3 release of abi_stable,I got this ICE:\r\n```\r\n Documenting abi_stable v0.2.3 (/home/matias/Documents/eclipse_workspace/abi_stable_workspace/abi_stable)\r\nthread 'rustc' panicked at 'Unable to fulfill trait DefId(2/0:850 ~ core[3726]::marker[0]::Send[0]) for 'std_types::map::iterator_stuff::IntoIter<K, V>': [FulfillmentError(Obligation(predicate=Binder(ProjectionPredicate(ProjectionTy { substs: [std_types::map::iterator_stuff::ValIterInterface<u32, u32>], item_def_id: DefId(0/0:4989 ~ abi_stable[8787]::erased_types[0]::traits[0]::InterfaceType[0]::Send[0]) }, core_extensions::type_level_bool::True)),depth=2),MismatchedProjectionTypes(Sorts(ExpectedFound { expected: core_extensions::type_level_bool::False, found: core_extensions::type_level_bool::True })))]', src/librustc/traits/auto_trait.rs:208:17\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.34.0 (91856ed52 2019-04-10) running on i686-unknown-linux-gnu\r\n```\r\nTrying it out again in nightly (rustc 1.36.0-nightly (d595b1135 2019-05-10) running on i686-unknown-linux-gnu) ,I got:\r\n```\r\n Documenting abi_stable v0.3.0 (/home/matias/Documents/eclipse_workspace/abi_stable_workspace/abi_stable)\r\nthread 'rustc' panicked at 'Unable to fulfill trait DefId(2:1386 ~ core[4c06]::marker[0]::Send[0]) for 'std_types::map::iterator_stuff::IntoIter<K, V>': [FulfillmentError(Obligation(predicate=Binder(ProjectionPredicate(ProjectionTy { substs: [std_types::map::iterator_stuff::ValIterInterface<u32, u32>], item_def_id: DefId(0:7003 ~ abi_stable[8787]::erased_types[0]::traits[0]::InterfaceType[0]::Send[0]) }, core_extensions::type_level_bool::True)),depth=2),MismatchedProjectionTypes(Sorts(ExpectedFound { expected: core_extensions::type_level_bool::False, found: core_extensions::type_level_bool::True })))]', src/librustc/traits/auto_trait.rs:202:17\r\nstack backtrace:\r\n   0: 0xb5cded4c - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::h88d972f6f6e46c24\r\n                       at src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:39\r\n   1: 0xb5cd70fb - std::sys_common::backtrace::_print::h83aca1574431bbad\r\n                       at src/libstd/sys_common/backtrace.rs:71\r\n   2: 0xb5cdb1aa - std::panicking::default_hook::{{closure}}::h54e8f04261c4c0b1\r\n                       at src/libstd/sys_common/backtrace.rs:59\r\n                       at src/libstd/panicking.rs:197\r\n   3: 0xb5cdaef4 - std::panicking::default_hook::h66422ac1b55ce676\r\n                       at src/libstd/panicking.rs:211\r\n   4: 0xb5db9c38 - proc_macro::bridge::client::<impl proc_macro::bridge::Bridge>::enter::{{closure}}::{{closure}}::h581fccc42b4d0f71\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/boxed.rs:718\r\n                       at src/libproc_macro/bridge/client.rs:304\r\n   5: 0xb5cdb9f6 - std::panicking::rust_panic_with_hook::hbf2738690e9f5989\r\n                       at src/libstd/panicking.rs:478\r\n   6: 0xb5cdb476 - std::panicking::continue_panic_fmt::hcbef7b43feb6b8d9\r\n                       at src/libstd/panicking.rs:381\r\n   7: 0xb5cdb3b9 - std::panicking::begin_panic_fmt::hfafa0a0090d76a4e\r\n                       at src/libstd/panicking.rs:336\r\n   8:   0x63531f - rustc::traits::auto_trait::AutoTraitFinder::find_auto_trait_generics::{{closure}}::{{closure}}::h3076052a80a2b2be\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e//<::std::macros::panic macros>:8\r\n   9:   0x634d23 - rustc::ty::context::tls::with_context::{{closure}}::h68c2c2610d54ace6\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/result.rs:766\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/traits/auto_trait.rs:201\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/infer/mod.rs:529\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1726\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1966\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1899\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1965\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1725\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:2071\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:2055\r\n  10:   0x6338d2 - rustc::ty::context::GlobalCtxt::enter_local::h90af253d10758aa1\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:2045\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:2055\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:2067\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1717\r\n  11:   0x6553f8 - rustc::traits::auto_trait::AutoTraitFinder::find_auto_trait_generics::h42ee2645b594cb59\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/infer/mod.rs:528\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/traits/auto_trait.rs:119\r\n  12:   0x4c5725 - core::ops::function::impls::<impl core::ops::function::FnMut<A> for &mut F>::call_mut::h25ad1904ab0b7bc3\r\n                       at src/librustdoc/clean/auto_trait.rs:50\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/ops/function.rs:269\r\n  13:   0x73a13a - <core::iter::adapters::chain::Chain<A,B> as core::iter::traits::iterator::Iterator>::try_fold::hb3e3d5b042f42891\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1572\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/chain.rs:88\r\n  14:   0x54dcb1 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter::ha8605cbc824c8642\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1609\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:812\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1809\r\n  15:   0x718bdd - rustdoc::clean::get_auto_trait_and_blanket_impls::h6b2119eea5d33f2b\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1721\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1465\r\n                       at src/librustdoc/clean/auto_trait.rs:33\r\n                       at src/librustdoc/clean/mod.rs:3787\r\n  16:   0x7545b6 - <rustdoc::passes::collect_trait_impls::SyntheticImplCollector as rustdoc::fold::DocFolder>::fold_item::h01bd6abc37807d9a\r\n                       at src/librustdoc/passes/collect_trait_impls.rs:158\r\n  17:   0x54a448 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter::hf3f69d672ddf9615\r\n                       at src/librustdoc/fold.rs:100\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1572\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1609\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:812\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1929\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1821\r\n  18:   0x75109e - rustdoc::fold::DocFolder::fold_inner_recur::h3b90485174c31fb1\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1721\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1465\r\n                       at src/librustdoc/fold.rs:100\r\n                       at src/librustdoc/fold.rs:27\r\n  19:   0x7548ad - <rustdoc::passes::collect_trait_impls::SyntheticImplCollector as rustdoc::fold::DocFolder>::fold_item::h01bd6abc37807d9a\r\n                       at src/librustdoc/fold.rs:90\r\n                       at src/librustdoc/passes/collect_trait_impls.rs:166\r\n  20:   0x54a448 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter::hf3f69d672ddf9615\r\n                       at src/librustdoc/fold.rs:100\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1572\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1609\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:812\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1929\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1821\r\n  21:   0x75109e - rustdoc::fold::DocFolder::fold_inner_recur::h3b90485174c31fb1\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1721\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1465\r\n                       at src/librustdoc/fold.rs:100\r\n                       at src/librustdoc/fold.rs:27\r\n  22:   0x7548ad - <rustdoc::passes::collect_trait_impls::SyntheticImplCollector as rustdoc::fold::DocFolder>::fold_item::h01bd6abc37807d9a\r\n                       at src/librustdoc/fold.rs:90\r\n                       at src/librustdoc/passes/collect_trait_impls.rs:166\r\n  23:   0x54a448 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter::hf3f69d672ddf9615\r\n                       at src/librustdoc/fold.rs:100\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1572\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1609\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/adapters/mod.rs:812\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1929\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1826\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1821\r\n  24:   0x75109e - rustdoc::fold::DocFolder::fold_inner_recur::h3b90485174c31fb1\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/vec.rs:1721\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/iter/traits/iterator.rs:1465\r\n                       at src/librustdoc/fold.rs:100\r\n                       at src/librustdoc/fold.rs:27\r\n  25:   0x7548ad - <rustdoc::passes::collect_trait_impls::SyntheticImplCollector as rustdoc::fold::DocFolder>::fold_item::h01bd6abc37807d9a\r\n                       at src/librustdoc/fold.rs:90\r\n                       at src/librustdoc/passes/collect_trait_impls.rs:166\r\n  26:   0x751f8d - rustdoc::passes::collect_trait_impls::collect_trait_impls::h7ddbb0578e71ca0e\r\n                       at src/librustdoc/fold.rs:105\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/option.rs:624\r\n                       at src/librustdoc/fold.rs:105\r\n                       at src/librustdoc/passes/collect_trait_impls.rs:17\r\n  27:   0x653622 - rustc::ty::context::tls::enter_global::h0352a121287a69cf\r\n                       at src/librustdoc/core.rs:465\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/passes.rs:807\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1999\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1966\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1899\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1965\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1998\r\n  28:   0x6841d6 - rustc_interface::passes::BoxedGlobalCtxt::access::{{closure}}::h37af13ddc5734fca\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/passes.rs:807\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e//<::rustc_data_structures::box_region::declare_box_region_type macros>:17\r\n  29: 0xb7c04368 - rustc_interface::passes::create_global_ctxt::{{closure}}::ha0f95b1f2df7a5e5\r\n  30:   0x68524a - rustc_interface::interface::run_compiler_in_existing_thread_pool::hb0e8f2e4ea5e07c3\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/boxed.rs:910\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_data_structures/box_region.rs:52\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e//<::rustc_data_structures::box_region::declare_box_region_type macros>:19\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/passes.rs:807\r\n                       at src/librustdoc/core.rs:354\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/interface.rs:122\r\n  31:   0x7923f7 - rustdoc::core::run_core::h828402703fcc17cc\r\n                       at src/librustdoc/core.rs:340\r\n  32:   0x636b2e - <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h7b9fd07b2b1ea2c8\r\n                       at src/librustdoc/lib.rs:450\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panic.rs:309\r\n  33:   0x57b815 - std::panicking::try::do_call::hb936f360df81fcbb\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panicking.rs:293\r\n  34: 0xb5ceb447 - __rust_maybe_catch_panic\r\n                       at src/libpanic_unwind/lib.rs:85\r\n  35:   0x7582cc - rustc_driver::report_ices_to_stderr_if_any::h7f9579b20d11e238\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panicking.rs:272\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panic.rs:388\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_driver/lib.rs:1114\r\n  36:   0x509438 - rustdoc::main_args::ha7dd5c6ee7b5b640\r\n                       at src/librustdoc/lib.rs:447\r\n                       at src/librustdoc/lib.rs:404\r\n  37:   0x733dda - std::thread::local::LocalKey<T>::with::ha9c7da692a148e8b\r\n                       at src/librustdoc/lib.rs:98\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/option.rs:416\r\n                       at src/librustdoc/lib.rs:98\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/util.rs:186\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1954\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/local.rs:299\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/local.rs:245\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1946\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/local.rs:299\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/local.rs:245\r\n  38:   0x688c42 - std::sys_common::backtrace::__rust_begin_short_backtrace::ha4de48f9125e55bb\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc/ty/context.rs:1938\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/util.rs:186\r\n                       at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-1.0.0/src/lib.rs:137\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/util.rs:182\r\n                       at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-1.0.0/src/lib.rs:137\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libsyntax/lib.rs:101\r\n                       at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-1.0.0/src/lib.rs:137\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libsyntax/lib.rs:100\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/util.rs:181\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/librustc_interface/util.rs:159\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/sys_common/backtrace.rs:136\r\n  39:   0x57b980 - std::panicking::try::do_call::hcb704b420ba15158\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/mod.rs:469\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panic.rs:309\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panicking.rs:293\r\n  40: 0xb5ceb447 - __rust_maybe_catch_panic\r\n                       at src/libpanic_unwind/lib.rs:85\r\n  41:   0x75ff8b - core::ops::function::FnOnce::call_once{{vtable.shim}}::h71980ce26ab01d54\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panicking.rs:272\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/panic.rs:388\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libstd/thread/mod.rs:468\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/libcore/ops/function.rs:231\r\n  42: 0xb5cbe208 - <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once::h2e642aeea9c9581f\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/boxed.rs:704\r\n  43: 0xb5ce9e50 - std::sys::unix::thread::Thread::new::thread_start::ha576c140cc0cd745\r\n                       at /rustc/d595b113584f8f446957469951fd5d31adc2a44e/src/liballoc/boxed.rs:704\r\n                       at src/libstd/sys_common/thread.rs:13\r\n                       at src/libstd/sys/unix/thread.rs:79\r\n  44: 0xb5c37294 - start_thread\r\n  45: 0xb5b440ad - __clone\r\n  46:        0x0 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.36.0-nightly (d595b1135 2019-05-10) running on i686-unknown-linux-gnu\r\n```\r\n\r\n\r\nFor the abi_stable::std_types::map::IntoIter type,with this type definition:\r\n\r\n```\r\n#[repr(transparent)]\r\npub struct IntoIter<K,V>{\r\n    iter:DynTrait<'static,RBox<()>,ValIterInterface<u32,u32>>,\r\n    _marker:PhantomData<Tuple2<K,V>>,\r\n}\r\n```\r\nIt compiles if I add a `PhantomData<Rc<()>>` field to IntoIter.\r\n\r\n### Context\r\nThe Send impl of DynTrait:\r\n```\r\nimpl<'borr, P, I> Send for DynTrait<'borr, P, I> where\r\n    P: Send,\r\n    I: InterfaceBound<'borr, Send = True>, \r\n{}\r\n```\r\n[Definition of InterfaceBound](https://docs.rs/abi_stable/0.3.0/abi_stable/erased_types/trait.InterfaceBound.html)\r\n[Definition of InterfaceType](https://docs.rs/abi_stable/0.3.0/abi_stable/erased_types/traits/trait.InterfaceType.html)\r\nThe `InterfaceType` impl of `ValIterInterface`:\r\n```\r\ncrate::impl_InterfaceType!{\r\n    impl<K,V> crate::InterfaceType for ValIterInterface<K,V> {\r\n        type Send=False;\r\n        type Sync=False;\r\n        type Iterator=True;\r\n    }\r\n}\r\n```\r\nThe `impl_InterfaceType` macro just sets the unmentioned associated types to `False`.\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60726/timeline", "performed_via_github_app": null, "state_reason": "completed"}