{"url": "https://api.github.com/repos/rust-lang/rust/issues/14541", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14541/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14541/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14541/events", "html_url": "https://github.com/rust-lang/rust/issues/14541", "id": 34634675, "node_id": "MDU6SXNzdWUzNDYzNDY3NQ==", "number": 14541, "title": "error message claims struct does not have field that it clearly does have", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-05-30T10:34:36Z", "updated_at": "2014-05-31T19:56:38Z", "closed_at": "2014-05-31T19:56:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is one of those bugs where an earlier error is leading to poor error reporting later on in the output.  So it should not be considered high priority.\n\nNonetheless, it would be nice if we could strive for error messages to be sane when considered in isolation, which this example violates:\n\nbug.rs\n\n``` rust\n#![crate_type=\"lib\"]\n\npub struct vec2 { y: f32, }\npub struct vec3 { y: f32, z: f32, }\n\npub trait Foo { fn make(self); }\n\nimpl Foo for vec2 {\n    fn make(self) {\n        let vec3{y:_,z:_} = self;\n    }\n}\n```\n\nTranscript:\n\n```\n% rustc /tmp/bug.rs\n/tmp/bug.rs:10:13: 10:26 error: mismatched types: expected `vec2` but found `vec3`\n/tmp/bug.rs:10         let vec3{y:_,z:_} = self;\n                           ^~~~~~~~~~~~~\n/tmp/bug.rs:10:13: 10:26 error: struct `vec3` does not have a field named `z`\n/tmp/bug.rs:10         let vec3{y:_,z:_} = self;\n                           ^~~~~~~~~~~~~\nerror: aborting due to 2 previous errors\n```\n\nThe issue is that the second message claims that `vec3` does not have a field named `z`, but it clearly does.  I could understand this message if it said _vec2_ does not have a field named `z`.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/14541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14541/timeline", "performed_via_github_app": null, "state_reason": "completed"}