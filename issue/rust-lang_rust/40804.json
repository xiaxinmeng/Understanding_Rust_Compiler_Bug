{"url": "https://api.github.com/repos/rust-lang/rust/issues/40804", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40804/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40804/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40804/events", "html_url": "https://github.com/rust-lang/rust/issues/40804", "id": 216895963, "node_id": "MDU6SXNzdWUyMTY4OTU5NjM=", "number": 40804, "title": "Overall cycle time has regressed ~25% from 2hrs to 2.5hrs", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-24T20:25:57Z", "updated_at": "2017-04-15T06:26:38Z", "closed_at": "2017-04-05T23:12:45Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Over the past few weeks it looks like our overall cycle time has regressed from ~2hrs to ~2.5 hours (roughly). The main contributing factors to this seem to be:\r\n\r\n* OSX has [regressed](https://github.com/rust-lang/rust/issues/40802) - I don't know how to easily solve this other than identifying the regression here. More discussion on the issue hopefully.\r\n* Doubled-up dist builders are taking much longer - This is an unfortunate consequence of https://github.com/rust-lang/rust/pull/39917. Compiling Cargo takes ~10 minutes so that's an extra 20 minutes right off the bat b/c we double-up dist builders. Furthermore compiling Cargo *also* requires a stage1 x86_64-unknown-linux-gnu compiler, which previously wasn't needed. That means that the doubled up dist builders are compiling one more rustc. This means that instantly the builders are taking an extra ~40-50 minutes. \r\n\r\nAppVeyor in general looks pretty steady around or under 2 hrs, and all other builds are steadily under 2 hours as well. Note that 2 hours I'm taking as the \"hard limit\" here because that's how much time our absolute slowest builder, android, takes. I don't know how to optimize android any further so my goal has been to keep everything faster than Android.\r\n\r\nI don't know how to solve the doubled up dist builder problem other than not doubling up dist builders. That would require an extra 8 builders on Travis. Currently we're using 33/45 slots. This is an unexpected increase in the number of builders so only 4 extra isn't great but it seems better than requiring all PRs to take longer.\r\n\r\nNote that I'm considering this somewhat more urgent due to our desire to [land the RLS in the distribution](https://github.com/rust-lang/rust/pull/40584) in the same manner as Cargo. Compiling the RLS takes ~10 minutes which would regress the doubled-up builders *another* 20 minutes, which is likely too unacceptable.", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40804/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40804/timeline", "performed_via_github_app": null, "state_reason": "completed"}