{"url": "https://api.github.com/repos/rust-lang/rust/issues/6458", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6458/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6458/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6458/events", "html_url": "https://github.com/rust-lang/rust/issues/6458", "id": 14283736, "node_id": "MDU6SXNzdWUxNDI4MzczNg==", "number": 6458, "title": "ICE in ty_fn_sig() with polymorphic values", "user": {"login": "ssbr", "id": 356788, "node_id": "MDQ6VXNlcjM1Njc4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/356788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbr", "html_url": "https://github.com/ssbr", "followers_url": "https://api.github.com/users/ssbr/followers", "following_url": "https://api.github.com/users/ssbr/following{/other_user}", "gists_url": "https://api.github.com/users/ssbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbr/subscriptions", "organizations_url": "https://api.github.com/users/ssbr/orgs", "repos_url": "https://api.github.com/users/ssbr/repos", "events_url": "https://api.github.com/users/ssbr/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2013-05-13T21:50:05Z", "updated_at": "2013-08-22T04:41:30Z", "closed_at": "2013-08-22T04:41:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sorry, I don't know a good title for this. (EDIT(bblum): better title)\n\nI was playing with Rust and types and so on, and ended up with the following minimal test case for my problem:\n\n```\npub struct TypeWithState<State>;\npub struct MyState;\n\npub fn foo<State>(_: TypeWithState<State>) {}\n\npub fn bar() {\n    foo(TypeWithState); // I guess I was meant to write \"::<MyState>\"\n}\n```\n\nThe following is the result of compilation:\n\n```\n$ RUST_LOG=rustc=1,::rt::backtrace rustc --lib testsrc/ice1.rs\nrust: task failed at 'ty_fn_sig() called on non-fn type: &ty_err', /home/devin/local_programming/rust/src/librustc/middle/ty.rs:3004\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fe053350ccb]\n/usr/local/bin/../lib/librustrt.so(+0x2c869)[0x7fe053361869]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fe053352c80]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7fe0553a7513]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x1294a2)[0x7fe0553a74a2]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys14__extensions__9meth_89449fail_with17_ac9eb45dc42bd6906_07preE+0x6b)[0x7fe0552e6bab]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle2ty9ty_fn_sig16_47bf22f8112582a6_07preE+0x209)[0x7fe0539987d9]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x5504a8)[0x7fe053ad54a8]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x548cf6)[0x7fe053acdcf6]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23eee2)[0x7fe0537c3ee2]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23ebc9)[0x7fe0537c3bc9]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x22f7ea)[0x7fe0537b47ea]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x54ba05)[0x7fe053ad0a05]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck5check8regionck11regionck_fn17_1cbda8e01e29b9ee6_07preE+0x1bc)[0x7fe053ac5f1c]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck5check13check_bare_fn14_db4ccfa8eddcf6_07preE+0x303)[0x7fe053b10963]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck5check10check_item17_3b3d66d6c0e681126_07preE+0x56a)[0x7fe053b0f75a]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x58a04d)[0x7fe053b0f04d]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0xfd2d7)[0x7fe0545f12d7]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0xfc8ba)[0x7fe0545f08ba]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2e1b21)[0x7fe053866b21]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck5check16check_item_types17_9b946a891a2a91716_07preE+0x43e)[0x7fe053b0edde]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x720d32)[0x7fe053ca5d32]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x720a89)[0x7fe053ca5a89]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck11check_crate17_54349f39c7ca78196_07preE+0x295)[0x7fe053ca3115]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_rest17_32718fb030861ff16_07preE+0x1555)[0x7fe053fbf975]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_upto16_3b13f5438b2e4f86_07preE+0x192)[0x7fe053fc5bd2]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver13compile_input17_812b75735864b8556_07preE+0x107)[0x7fe053fc6057]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN12run_compiler17_e6dc2544c438b05b6_07preE+0x2bbb)[0x7fe053ff5a4b]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa834fe)[0x7fe0540084fe]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa80eac)[0x7fe054005eac]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa7a8dc)[0x7fe053fff8dc]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa837d8)[0x7fe0540087d8]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xf26c5)[0x7fe0553706c5]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x16e8a8)[0x7fe0553ec8a8]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7fe053351674]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/devin/local_programming/rust/src/librustc/rustc.rc:355\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fe053350ccb]\n/usr/local/bin/../lib/librustrt.so(+0x2c869)[0x7fe053361869]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fe053352c80]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7fe0553a7513]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x1295c2)[0x7fe0553a75c2]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xc9484)[0x7fe055347484]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN7monitor15_f69b167efde7bb6_07preE+0x2415)[0x7fe053ff9045]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa837d8)[0x7fe0540087d8]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN4main15_c4de63b748e03d6_07preE+0x69)[0x7fe054008439]\nrustc(_rust_main+0x2e)[0x400c8e]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7fe053351674]\nrust: domain main @0x10a5410 root task failed\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6458/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6458/timeline", "performed_via_github_app": null, "state_reason": "completed"}