{"url": "https://api.github.com/repos/rust-lang/rust/issues/111910", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/111910/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/111910/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/111910/events", "html_url": "https://github.com/rust-lang/rust/issues/111910", "id": 1724172638, "node_id": "I_kwDOAAsO6M5mxMle", "number": 111910, "title": "let-else does not support `else if`", "user": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 3186331060, "node_id": "MDU6TGFiZWwzMTg2MzMxMDYw", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-let-else", "name": "F-let-else", "color": "f9c0cc", "default": false, "description": "Issues related to let-else statements (RFC 3137)"}, {"id": 3471276000, "node_id": "LA_kwDOAAsO6M7O53fg", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-lang-nominated", "name": "I-lang-nominated", "color": "e10c02", "default": false, "description": "Indicates that an issue has been nominated for discussion during a lang team meeting."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-05-24T14:45:32Z", "updated_at": "2023-06-20T19:40:44Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```rust\r\nfn main() {\r\n    let Some(x) = Some(1)\r\n    else if true {\r\n        return;\r\n    } else {\r\n        return;\r\n    }\r\n}\r\n```\r\nresults in the following error but should compile imo:\r\n```\r\nerror: conditional `else if` is not supported for `let...else`\r\n --> src/main.rs:3:10\r\n  |\r\n3 |     else if true {\r\n  |          ^^ expected `{`\r\n  |\r\nhelp: try placing this code inside a block\r\n  |\r\n3 ~     else { if true {\r\n4 |         return;\r\n5 |     } else {\r\n6 |         return;\r\n7 ~     } }\r\n  |\r\n```\r\nthe improved diagnostic has been added in #89974 which refers to https://github.com/rust-lang/rust/issues/87335#issuecomment-944888160 by @joshtriplett:\r\n\r\n> `let ... else if` definitely isn't something the RFC specifies, and I don't think we should. A better error message might make sense, though (\"cannot use `else if` with `let ... else`\").\r\n\r\nI personally disagree with \"and I don't think we should\". For me this not working was fairly surprising and conflicts with my intuition of `let else` as a shorthand for\r\n```rust\r\nlet Some(var) = expr else { return; }\r\n\r\nlet var = if let Some(var) = expr {\r\n    var\r\n} else {\r\n    return\r\n}\r\n```\r\nor as stated in the RFC\r\n\r\n> This is a counterpart to `if let` expressions, and the pattern matching works identically, except that the value from the pattern match is assigned to the surrounding scope rather than the block's scope.\r\n\r\nI would like to add support for this myself or mentor someone adding this. I am not sure what process is required here. If not desired, please FCP close this.\r\n\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/111910/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/111910/timeline", "performed_via_github_app": null, "state_reason": null}