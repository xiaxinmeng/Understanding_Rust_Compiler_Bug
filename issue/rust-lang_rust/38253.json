{"url": "https://api.github.com/repos/rust-lang/rust/issues/38253", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38253/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38253/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38253/events", "html_url": "https://github.com/rust-lang/rust/issues/38253", "id": 194474969, "node_id": "MDU6SXNzdWUxOTQ0NzQ5Njk=", "number": 38253, "title": "Type in non-public module leaks out to public interface", "user": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-08T23:41:10Z", "updated_at": "2016-12-08T23:57:33Z", "closed_at": "2016-12-08T23:57:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If I have a public type in a non-public module that type is not part of the crate's public interface. However, if I use this type in the public interface of the crate rustc does not complain and the crate compiles.\r\n\r\nIn this state it will not be possible to call that function, since the type can't be used. Also the documentation looks strange as the private type will be listed as part of the public interface, but it won't be a link to the page about that type, since there is no such page.\r\n\r\nCode producing the problem:\r\n\r\n```rust\r\nmod secrets {\r\n    pub struct Secret;\r\n}\r\n\r\npub fn fail(_: secrets::Secret) {}\r\n```\r\n\r\nI expect this to happen: Compiler error similar to `can't leak private type`\r\n\r\n## Meta\r\nThe problem exists on both stable and nightly. These versions:\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nbinary: rustc\r\ncommit-hash: 2c6933acc05c61e041be764cb1331f6281993f3f\r\ncommit-date: 2016-11-07\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.13.0\r\n```\r\n```\r\nrustc 1.15.0-nightly (daf8c1dfc 2016-12-05)\r\nbinary: rustc\r\ncommit-hash: daf8c1dfce3b448fc581cc319f64632ec22bd0e1\r\ncommit-date: 2016-12-05\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-nightly\r\nLLVM version: 3.9\r\n```\r\n", "closed_by": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38253/timeline", "performed_via_github_app": null, "state_reason": "completed"}