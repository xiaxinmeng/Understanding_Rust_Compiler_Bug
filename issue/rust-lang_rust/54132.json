{"url": "https://api.github.com/repos/rust-lang/rust/issues/54132", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/54132/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54132/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/54132/events", "html_url": "https://github.com/rust-lang/rust/issues/54132", "id": 359125737, "node_id": "MDU6SXNzdWUzNTkxMjU3Mzc=", "number": 54132, "title": "Include type signature for errors involving mutable borrow of immutable (borrowed) content", "user": {"login": "mqudsi", "id": 606923, "node_id": "MDQ6VXNlcjYwNjkyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/606923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mqudsi", "html_url": "https://github.com/mqudsi", "followers_url": "https://api.github.com/users/mqudsi/followers", "following_url": "https://api.github.com/users/mqudsi/following{/other_user}", "gists_url": "https://api.github.com/users/mqudsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mqudsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mqudsi/subscriptions", "organizations_url": "https://api.github.com/users/mqudsi/orgs", "repos_url": "https://api.github.com/users/mqudsi/repos", "events_url": "https://api.github.com/users/mqudsi/events{/privacy}", "received_events_url": "https://api.github.com/users/mqudsi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-09-11T16:31:06Z", "updated_at": "2020-06-11T18:00:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "For the code fragment\r\n\r\n```rust\r\npub struct Dispatcher {\r\n    ...\r\n    threads: Vec<Arc<Mutex<WorkerThread>>>,\r\n}\r\n\r\n...\r\n\r\n    pub fn join(&mut self) -> () {\r\n        for mut thread in self.threads.iter_mut() {\r\n            let mut thread = thread.get_mut();\r\n            match thread.join_handle {\r\n                Some(mut x) => x.join(),\r\n                None => Ok(()),\r\n            };\r\n        }\r\n    }\r\n```\r\n\r\nSample error:\r\n\r\n```rust\r\nerror[E0596]: cannot borrow immutable borrowed content as mutable\r\n   --> src/backup/mod.rs:112:30\r\n    |\r\n112 |             let mut thread = thread.get_mut();\r\n    |                              ^^^^^^ cannot borrow as mutable\r\n\r\nerror[E0507]: cannot move out of borrowed content\r\n   --> src/backup/mod.rs:113:19\r\n    |\r\n113 |             match thread.join_handle {\r\n    |                   ^^^^^^ cannot move out of borrowed content\r\n114 |                 Some(mut x) => x.join(),\r\n    |                      ----- hint: to prevent move, use `ref x` or `ref mut x`\r\n```\r\n\r\nThis error would be more helpful if the type signature of the item that cannot be mutably borrowed were included in the error message, so that the developer could see where in the type definition the missing `mut` is.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/54132/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/54132/timeline", "performed_via_github_app": null, "state_reason": null}