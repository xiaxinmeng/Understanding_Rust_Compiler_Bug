{"url": "https://api.github.com/repos/rust-lang/rust/issues/55539", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55539/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55539/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55539/events", "html_url": "https://github.com/rust-lang/rust/issues/55539", "id": 375989286, "node_id": "MDU6SXNzdWUzNzU5ODkyODY=", "number": 55539, "title": "Rust 1.29.0->1.30.0 breaks compilation on OSX", "user": {"login": "EelcoHoogendoorn", "id": 1799429, "node_id": "MDQ6VXNlcjE3OTk0Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1799429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EelcoHoogendoorn", "html_url": "https://github.com/EelcoHoogendoorn", "followers_url": "https://api.github.com/users/EelcoHoogendoorn/followers", "following_url": "https://api.github.com/users/EelcoHoogendoorn/following{/other_user}", "gists_url": "https://api.github.com/users/EelcoHoogendoorn/gists{/gist_id}", "starred_url": "https://api.github.com/users/EelcoHoogendoorn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EelcoHoogendoorn/subscriptions", "organizations_url": "https://api.github.com/users/EelcoHoogendoorn/orgs", "repos_url": "https://api.github.com/users/EelcoHoogendoorn/repos", "events_url": "https://api.github.com/users/EelcoHoogendoorn/events{/privacy}", "received_events_url": "https://api.github.com/users/EelcoHoogendoorn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123111, "node_id": "MDU6TGFiZWwxMjMxMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-macos", "name": "O-macos", "color": "6e6ec0", "default": false, "description": "Operating system: macOS"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-31T14:27:16Z", "updated_at": "2019-01-27T01:10:44Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Sadly I dont think a minimal example is feasible; but I have a build involving some annoying binary dependencies like lapack; its been working fine on both linux and OSX for a year now no problem, but updating to rust 1.30.0 broke the OSX build with various seemingly unrelated compilation errors and complaints about lapack. On linux, everything is fine regardless of the rust version.\r\n\r\nThat is, using OSX and the following rust package:\r\nrust:            1.30.0-1000             conda-forge\r\nThis is what happens.\r\n```\r\n   Compiling num-traits v0.2.6\r\n   Compiling proc-macro2 v0.4.20                                                                                                                                          \r\n   Compiling cc v1.0.25                                                                                                                                                   \r\n   Compiling version_check v0.1.5                                                                                                                                         \r\ndyld: Library not loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib                               \r\ndyld: Library not loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib                               \r\n  Referenced from: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib                                               \r\n  Reason: Incompatible library version: vecLib requires version 1.0.0 or later, but libLAPACK.dylib provides version 0.0.0                                                \r\n  Referenced from: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib                                               \r\n  Reason: Incompatible library version: vecLib requires version 1.0.0 or later, but libLAPACK.dylib provides version 0.0.0                                                \r\nerror: Could not compile `proc-macro2`.                                                                                                                                   \r\nwarning: build failed, waiting for other jobs to finish...\r\ndyld: Library not loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib                               \r\n  Referenced from: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib                                               \r\n  Reason: Incompatible library version: vecLib requires version 1.0.0 or later, but libLAPACK.dylib provides version 0.0.0                                                \r\ndyld: Library not loaded: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib                               \r\n  Referenced from: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib                                               \r\n  Reason: Incompatible library version: vecLib requires version 1.0.0 or later, but libLAPACK.dylib provides version 0.0.0                                                \r\nerror: Could not compile `cc`.                                                                                                                                            \r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: Could not compile `version_check`.                                                                                                                                 \r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: Could not compile `num-traits`.                                                                                                                                    \r\n```\r\n\r\nPinning the rust version to 1.29.0, everything is totally fine.\r\n\r\nNow to be fair getting this to build on both OSX and linux was originally a challenge and it may have been more through luck than best practice that we got it to work; so there probably is a way to get this to work again using the newer rust.... but maybe this error also contains actionable information for some of you. The package versions of the packages mentioned under 1.30.0 are the same under 1.29.0, and fiddling around with the seeming offending packages was to no avail. ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55539/timeline", "performed_via_github_app": null, "state_reason": null}