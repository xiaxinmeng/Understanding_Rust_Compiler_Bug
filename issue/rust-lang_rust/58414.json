{"url": "https://api.github.com/repos/rust-lang/rust/issues/58414", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/58414/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/58414/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/58414/events", "html_url": "https://github.com/rust-lang/rust/issues/58414", "id": 409603252, "node_id": "MDU6SXNzdWU0MDk2MDMyNTI=", "number": 58414, "title": "Hello World App crashes with 'Illegal Instruction' in 32-bit environment on a 64-bit SoC", "user": {"login": "venkag", "id": 14304605, "node_id": "MDQ6VXNlcjE0MzA0NjA1", "avatar_url": "https://avatars.githubusercontent.com/u/14304605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/venkag", "html_url": "https://github.com/venkag", "followers_url": "https://api.github.com/users/venkag/followers", "following_url": "https://api.github.com/users/venkag/following{/other_user}", "gists_url": "https://api.github.com/users/venkag/gists{/gist_id}", "starred_url": "https://api.github.com/users/venkag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/venkag/subscriptions", "organizations_url": "https://api.github.com/users/venkag/orgs", "repos_url": "https://api.github.com/users/venkag/repos", "events_url": "https://api.github.com/users/venkag/events{/privacy}", "received_events_url": "https://api.github.com/users/venkag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 55301954, "node_id": "MDU6TGFiZWw1NTMwMTk1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-Arm", "name": "O-Arm", "color": "6e6ec0", "default": false, "description": "Target: 32-bit Arm processors (armv6, armv7, thumb...), including 64-bit Arm in AArch32 state"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-02-13T03:05:06Z", "updated_at": "2019-03-19T11:54:23Z", "closed_at": "2019-03-19T11:54:23Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to build Hello World Application and run on a cortex-a53 based processor. The userspace environment is 32-bit (with the all libraries, binaries built in 32-bit mode). The Kernel however, is built in 64-bit mode.\r\n\r\n### Code:\r\n$ cat hello.rs \r\nfn main() {\r\n    println!(\"Hello World!\");\r\n}\r\n\r\n### Compile\r\n$ rustc --target arm-unknown-linux-gnueabi -C target-cpu=cortex-a53 hello.rs\r\n\r\nThe output is that the string 'Hello World!' prints and crashes during the cleanup phase with 'illegal instruction'. gdb points to atomic_sub<usize>. I am suspecting that there is alignment issue with the memory pointers. One example of the GDB backtrace is:\r\n\r\n### gdb Backtrace\r\n\\#0  atomic_sub<usize> () at /rustc/9fda7c2237db910e41d6a712e9a2139b352e558b/src/libcore/sync/atomic.rs:2077\r\n2077    /rustc/9fda7c2237db910e41d6a712e9a2139b352e558b/src/libcore/sync/atomic.rs: No such file or directory.\r\n(gdb) quit", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/58414/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/58414/timeline", "performed_via_github_app": null, "state_reason": "completed"}