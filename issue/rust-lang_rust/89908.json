{"url": "https://api.github.com/repos/rust-lang/rust/issues/89908", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/89908/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/89908/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/89908/events", "html_url": "https://github.com/rust-lang/rust/issues/89908", "id": 1027303355, "node_id": "I_kwDOAAsO6M49O2e7", "number": 89908, "title": "debug build on M1 CPU: large arrays on stack fail with fatal runtime error: stack overflow", "user": {"login": "smoothdeveloper", "id": 87944, "node_id": "MDQ6VXNlcjg3OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/87944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoothdeveloper", "html_url": "https://github.com/smoothdeveloper", "followers_url": "https://api.github.com/users/smoothdeveloper/followers", "following_url": "https://api.github.com/users/smoothdeveloper/following{/other_user}", "gists_url": "https://api.github.com/users/smoothdeveloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoothdeveloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoothdeveloper/subscriptions", "organizations_url": "https://api.github.com/users/smoothdeveloper/orgs", "repos_url": "https://api.github.com/users/smoothdeveloper/repos", "events_url": "https://api.github.com/users/smoothdeveloper/events{/privacy}", "received_events_url": "https://api.github.com/users/smoothdeveloper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-10-15T10:24:10Z", "updated_at": "2021-11-10T13:41:32Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nI tried this code:\r\n\r\n```rust\r\n    #[test]\r\n    pub fn notpass() {\r\n        let t = [0f32;526398];\r\n        for i in 1 .. 20 {\r\n            println!(\"{}\", t[i]);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nIt crashes with\r\n\r\n> thread 'checkptrcast::tests::notpass' has overflowed its stack\r\n> fatal runtime error: stack overflow\r\n\r\nwhen testing without the `--release` flag.\r\n\r\nI'm running on Mac M1 and not tried yet on x64 architecture.\r\n\r\nI'm looking to allocate much larger multidimensional array in the actual code and not sure how to proceed to make it work in debug builds.\r\n\r\nNot sure if this is related: #40862 and if something could be done to help users troubleshooting this if the limitation in the compiler can't be fixed; maybe it could warn that the stack size is going to blow on the target arch?\r\n\r\n> warning: a stack allocated array of size X is defined here but it may panic at runtime on the Y target architecture.\r\n\r\nor maybe not even compile and provide the user with approaches to replace usage of stack allocated array.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/89908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/89908/timeline", "performed_via_github_app": null, "state_reason": null}