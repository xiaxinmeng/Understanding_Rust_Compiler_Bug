{"url": "https://api.github.com/repos/rust-lang/rust/issues/12293", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12293/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12293/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12293/events", "html_url": "https://github.com/rust-lang/rust/issues/12293", "id": 27649201, "node_id": "MDU6SXNzdWUyNzY0OTIwMQ==", "number": 12293, "title": "Add emit_binary() to serialize::Encoder trait", "user": {"login": "mneumann", "id": 34112, "node_id": "MDQ6VXNlcjM0MTEy", "avatar_url": "https://avatars.githubusercontent.com/u/34112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mneumann", "html_url": "https://github.com/mneumann", "followers_url": "https://api.github.com/users/mneumann/followers", "following_url": "https://api.github.com/users/mneumann/following{/other_user}", "gists_url": "https://api.github.com/users/mneumann/gists{/gist_id}", "starred_url": "https://api.github.com/users/mneumann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mneumann/subscriptions", "organizations_url": "https://api.github.com/users/mneumann/orgs", "repos_url": "https://api.github.com/users/mneumann/repos", "events_url": "https://api.github.com/users/mneumann/events{/privacy}", "received_events_url": "https://api.github.com/users/mneumann/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-02-15T13:38:34Z", "updated_at": "2015-01-23T02:53:54Z", "closed_at": "2015-01-23T02:53:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My proposal is to extend trait <code>serialize::Encoder</code> with:\n\n``` rust\npub trait Encoder {\n    fn emit_binary(&mut self, bin: &[u8]);\n}\n```\n\nWhich special cases <code>emit_seq</code> for <code>u8</code>'s. Msgpack for example support both binaries and sequences of values, while sequences of values incur more overhead because it needs to encode the elements type for each element.\n\nRight now it is not possible to efficiently emit binary type, like <code>type bin = ~[u8]</code> using the Encoder trait. With this change it would be possible. Orthogonally a read_binary() should be added to the Decoder trait, but it is not that important, as read_seq can be overloaded accordingly to read both binaries or sequences.\n\nThe default behaviour of emit_binary() could be made to emit a sequence, so almost no code need to be changed.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/12293/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12293/timeline", "performed_via_github_app": null, "state_reason": "completed"}