{"url": "https://api.github.com/repos/rust-lang/rust/issues/48025", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48025/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48025/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48025/events", "html_url": "https://github.com/rust-lang/rust/issues/48025", "id": 294591801, "node_id": "MDU6SXNzdWUyOTQ1OTE4MDE=", "number": 48025, "title": "monolithic lto link time very slow when building with several codegen units", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-02-06T00:35:17Z", "updated_at": "2018-02-15T16:42:55Z", "closed_at": "2018-02-15T16:42:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I noticed my project https://github.com/matthiaskrgr/cargo-cache took noticeably longer to build with \"lto=true\" at some point.\r\nI benchmarked link time (touch src/main.rs; cargo build --release) which appear to blow up as soon as we have several codegen units.\r\n\r\n link times:\r\n\r\n| release | stable: 1.23   |   beta: 1.24  | nightly:  1.25 |\r\n| - | - | - | - | \r\n| profile.release, lto=true, codegen-units=1  | 45s | 65s  | 48s |\r\n| profile.release, lto=true  |  46s | 278s | 244s |\r\n| profile.release (default) | 6.3s | 6.39 | 6.43s |\r\n\r\nSo it seem codegen-units=1 makes for bad parallelism while building but speeds up lto because less translation units need to be merged.\r\n\r\nMaybe it is possible to dynamically use as little codegen units as possible (but still enough to utilize all cores) when building? //cc https://github.com/rust-lang/rust/pull/46910\r\n", "closed_by": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48025/timeline", "performed_via_github_app": null, "state_reason": "completed"}