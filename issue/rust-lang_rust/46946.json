{"url": "https://api.github.com/repos/rust-lang/rust/issues/46946", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46946/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46946/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46946/events", "html_url": "https://github.com/rust-lang/rust/issues/46946", "id": 284174366, "node_id": "MDU6SXNzdWUyODQxNzQzNjY=", "number": 46946, "title": "Enforce informal properties of traits such as `PartialEq`", "user": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 13836860, "node_id": "MDU6TGFiZWwxMzgzNjg2MA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-traits", "name": "A-traits", "color": "f7e101", "default": false, "description": "Area: Trait system"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-12-22T14:20:24Z", "updated_at": "2023-04-05T17:40:47Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "The trait `PartialEq` represents a partial equivalence \u2014 that is, a relation that is symmetric and transitive. However, Rust doesn't currently enforce these properties in any way. This means we get issues like this:\r\n```rust\r\nstruct A;\r\nstruct B;\r\n\r\nimpl PartialEq<B> for A {\r\n    fn eq(&self, _other: &B) -> bool {\r\n        true\r\n    }\r\n}\r\n\r\nfn main() {\r\n    let a = A {};\r\n    let b = B {};\r\n    a == b; // Works\r\n    b == a; // Error (B does not implement PartialEq<A>)\r\n}\r\n```\r\nThis is confusing, but it's usually not so much of an issue in user code, because it's easy to flip the operands. However, when attempting to write generic functions over these traits, you run into problems (for example in https://github.com/rust-lang/rust/pull/46934).\r\n\r\nAt the very least there should be a lint warning/error for this. It'd be nice to have a generic solution for properties of traits, though that could come later. It'd be even nicer if the symmetric case for `PartialEq`, for instance, could be automatically implemented by Rust, though this could require quite a bit more machinery.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46946/timeline", "performed_via_github_app": null, "state_reason": null}