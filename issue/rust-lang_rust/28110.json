{"url": "https://api.github.com/repos/rust-lang/rust/issues/28110", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28110/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28110/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28110/events", "html_url": "https://github.com/rust-lang/rust/issues/28110", "id": 103960424, "node_id": "MDU6SXNzdWUxMDM5NjA0MjQ=", "number": 28110, "title": "chars() iterator no longer compiling", "user": {"login": "CodingAnarchy", "id": 5926159, "node_id": "MDQ6VXNlcjU5MjYxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5926159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CodingAnarchy", "html_url": "https://github.com/CodingAnarchy", "followers_url": "https://api.github.com/users/CodingAnarchy/followers", "following_url": "https://api.github.com/users/CodingAnarchy/following{/other_user}", "gists_url": "https://api.github.com/users/CodingAnarchy/gists{/gist_id}", "starred_url": "https://api.github.com/users/CodingAnarchy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CodingAnarchy/subscriptions", "organizations_url": "https://api.github.com/users/CodingAnarchy/orgs", "repos_url": "https://api.github.com/users/CodingAnarchy/repos", "events_url": "https://api.github.com/users/CodingAnarchy/events{/privacy}", "received_events_url": "https://api.github.com/users/CodingAnarchy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-08-30T22:40:18Z", "updated_at": "2015-08-30T23:30:32Z", "closed_at": "2015-08-30T23:30:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Back a couple weeks ago, I had a program with this code here:\n\n``` rust\nfor ch in msg.chars() {\n        if !ch.is_alphabetic() { continue; }\n        let s = caesar_shift(ch, key);\n        e.push(s);\n    }\n```\n\nThis code compiled just fine, where msg is an `&str` parameter to the function in question.\n\nNow, having duplicated the same code with the same variable as:\n\n``` rust\nfor ch in msg.chars() {\n            if !ch.is_alphabetic() { continue; }\n            let p = ch.to_digit(36).unwrap() - 10;  // Need to shift down by 10 for range of 0-25\n            let c = alpha.chars().nth(p as usize).unwrap();\n            e.push(c);\n        }\n```\n\nthe compiler presents this error:\n\n```\nsrc/lib/classical.rs:163:9: 168:10 error: mismatched types:\n expected `collections::string::String`,\n    found `()`\n(expected struct `collections::string::String`,\n    found ()) [E0308]\nsrc/lib/classical.rs:163         for ch in msg.chars() {\nsrc/lib/classical.rs:164             if !ch.is_alphabetic() { continue; }\nsrc/lib/classical.rs:165             let p = ch.to_digit(36).unwrap() - 10;  // Need to shift down by 10 for range of 0-25\nsrc/lib/classical.rs:166             let c = alpha.chars().nth(p as usize).unwrap();\nsrc/lib/classical.rs:167             e.push(c);\nsrc/lib/classical.rs:168         }\nnote: in expansion of for loop expansion\nsrc/lib/classical.rs:163:9: 168:10 note: expansion site\nsrc/lib/classical.rs:163:9: 168:10 help: run `rustc --explain E0308` to see a detailed explanation\n```\n\nThis was using the nightly build in both cases:\n\nNow: `rustc 1.4.0-nightly (f3f23bf9c 2015-08-30)`\nThen: `rustc 1.4.0-nightly (ab450ef22 2015-08-14)`\n\nStrangely, the old code does not cause the compiler to error out, but I see literally no difference in the new code to speak of that would cause it to not understand what type msg is.\n", "closed_by": {"login": "CodingAnarchy", "id": 5926159, "node_id": "MDQ6VXNlcjU5MjYxNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5926159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CodingAnarchy", "html_url": "https://github.com/CodingAnarchy", "followers_url": "https://api.github.com/users/CodingAnarchy/followers", "following_url": "https://api.github.com/users/CodingAnarchy/following{/other_user}", "gists_url": "https://api.github.com/users/CodingAnarchy/gists{/gist_id}", "starred_url": "https://api.github.com/users/CodingAnarchy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CodingAnarchy/subscriptions", "organizations_url": "https://api.github.com/users/CodingAnarchy/orgs", "repos_url": "https://api.github.com/users/CodingAnarchy/repos", "events_url": "https://api.github.com/users/CodingAnarchy/events{/privacy}", "received_events_url": "https://api.github.com/users/CodingAnarchy/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28110/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28110/timeline", "performed_via_github_app": null, "state_reason": "completed"}