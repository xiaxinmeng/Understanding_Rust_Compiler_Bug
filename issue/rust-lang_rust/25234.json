{"url": "https://api.github.com/repos/rust-lang/rust/issues/25234", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25234/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25234/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25234/events", "html_url": "https://github.com/rust-lang/rust/issues/25234", "id": 74557100, "node_id": "MDU6SXNzdWU3NDU1NzEwMA==", "number": 25234, "title": "ICE when accessing non-existent enum variant", "user": {"login": "cyderize", "id": 8522468, "node_id": "MDQ6VXNlcjg1MjI0Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/8522468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cyderize", "html_url": "https://github.com/cyderize", "followers_url": "https://api.github.com/users/cyderize/followers", "following_url": "https://api.github.com/users/cyderize/following{/other_user}", "gists_url": "https://api.github.com/users/cyderize/gists{/gist_id}", "starred_url": "https://api.github.com/users/cyderize/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cyderize/subscriptions", "organizations_url": "https://api.github.com/users/cyderize/orgs", "repos_url": "https://api.github.com/users/cyderize/repos", "events_url": "https://api.github.com/users/cyderize/events{/privacy}", "received_events_url": "https://api.github.com/users/cyderize/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-05-09T01:49:28Z", "updated_at": "2015-05-10T03:22:40Z", "closed_at": "2015-05-10T03:22:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "ICE when accessing a non-existent enum variant through a reference.\n\nTest case 1 (`Bar` is a struct, not even an enum):\n\n``` rust\nfn foo<T>(t: &T) {}\n\nstruct Bar;\n\nfn main() { \n    foo(&Bar::Baz);\n}\n```\n\nTest case 2 (Bar::Baz is a non-existent enum variant):\n\n``` rust\nfn foo<T>(t: &T) {}\n\nenum Bar {\n    NotBaz\n}\n\nfn main() { \n    foo(&Bar::Baz);\n}\n```\n\nICE backtrace:\n\n```\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'path not fully resolved: PathResolution { base_def: DefTy(DefId { krate: 0, node: 12 }, false), last_private: LastMod(AllPublic), depth: 1 }', C:/bot/slave/nightly-dist-rustc-win-64/build/src/librustc\\middle\\def.rs:81\n\nstack backtrace:\n   1:         0x711b8f12 - sys::backtrace::write::hdb51798d383e2c695rs\n   2:         0x711c2376 - rt::unwind::register::hef1903092323c9734Yv\n   3:         0x71185220 - rt::unwind::begin_unwind_inner::h2fa0652062c22375eWv\n   4:         0x71185c27 - rt::unwind::begin_unwind_fmt::h13657eb4ac5da50ekVv\n   5:           0xee0c56 - middle::ty::resolve_expr::h51d7abf3a2732b230v6\n   6:          0x1026a06 - middle::ty::expr_kind::he8d8b524640e8d6b6x6\n   7:          0x10267f9 - middle::ty::expr_is_lval::h9fe5b61c1e6534c03w6\n   8:          0x163fff5 - check::UnresolvedTypeAction...std..clone..Clone::clone::hf4c3a245578662abVEp\n   9:          0x161ae79 - check::callee::CallResolution<'tcx>.DeferredCallResolution<'tcx>::resolve::he161ac943e0493a8hcm\n  10:          0x161884a - check::FnCtxt<'a, 'tcx>.AstConv<'tcx>::projected_ty::h240f52ba63e8d53aBNo\n  11:          0x16173ef - check::FnCtxt<'a, 'tcx>.AstConv<'tcx>::projected_ty::h240f52ba63e8d53aBNo\n  12:          0x166c818 - check::UnresolvedTypeAction...std..clone..Clone::clone::hf4c3a245578662abVEp\n  13:          0x162f1e1 - check::GatherLocalsVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::h575c0a1a31f9fe703Rn\n  14:          0x161525a - check::FnCtxt<'a, 'tcx>.AstConv<'tcx>::projected_ty::h240f52ba63e8d53aBNo\n  15:          0x162abac - check::CheckItemBodiesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::h93ccea520f14b38cXEn\n  16:          0x1628d8f - check::CheckItemBodiesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::h93ccea520f14b38cXEn\n  17:          0x16dec1b - check_crate::hc2ca7a846886762c5CC\n  18:          0x16d7c29 - check_crate::hc2ca7a846886762c5CC\n  19:         0x652e24a2 - driver::phase_3_run_analysis_passes::h6baa270e309301b6tGa\n  20:         0x652c2b40 - driver::compile_input::h26af5f3f80d0ca83Qba\n  21:         0x65378e23 - run_compiler::h08ad06f8fc43c8db65b\n  22:         0x653769af - run::h3d20f7e70be2f675M5b\n  23:         0x65375f69 - run::h3d20f7e70be2f675M5b\n  24:         0x711f727c - rust_try\n  25:         0x711f7259 - rust_try\n  26:         0x653761e5 - run::h3d20f7e70be2f675M5b\n  27:         0x711c0624 - sys::process2::Command::cwd::h53354db0f20fd45brGu\n  28:         0x775a59cd - BaseThreadInitThunk\n\nCould not compile `rust-test`.\n\nTo learn more, run the command again with --verbose.\n```\n## Meta\n\n```\nrustc 1.1.0-nightly (7bd71637c 2015-05-06) (built 2015-05-06)\nbinary: rustc\ncommit-hash: 7bd71637ca40910dbd310813a19abf76db84f8f6\ncommit-date: 2015-05-06\nbuild-date: 2015-05-06\nhost: x86_64-pc-windows-gnu\nrelease: 1.1.0-nightly\n```\n", "closed_by": {"login": "cyderize", "id": 8522468, "node_id": "MDQ6VXNlcjg1MjI0Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/8522468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cyderize", "html_url": "https://github.com/cyderize", "followers_url": "https://api.github.com/users/cyderize/followers", "following_url": "https://api.github.com/users/cyderize/following{/other_user}", "gists_url": "https://api.github.com/users/cyderize/gists{/gist_id}", "starred_url": "https://api.github.com/users/cyderize/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cyderize/subscriptions", "organizations_url": "https://api.github.com/users/cyderize/orgs", "repos_url": "https://api.github.com/users/cyderize/repos", "events_url": "https://api.github.com/users/cyderize/events{/privacy}", "received_events_url": "https://api.github.com/users/cyderize/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25234/timeline", "performed_via_github_app": null, "state_reason": "completed"}