{"url": "https://api.github.com/repos/rust-lang/rust/issues/38280", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38280/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38280/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38280/events", "html_url": "https://github.com/rust-lang/rust/issues/38280", "id": 194756631, "node_id": "MDU6SXNzdWUxOTQ3NTY2MzE=", "number": 38280, "title": "Internal compiler error for unwrap_or(type)", "user": {"login": "mattiasnilsen", "id": 4082428, "node_id": "MDQ6VXNlcjQwODI0Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4082428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattiasnilsen", "html_url": "https://github.com/mattiasnilsen", "followers_url": "https://api.github.com/users/mattiasnilsen/followers", "following_url": "https://api.github.com/users/mattiasnilsen/following{/other_user}", "gists_url": "https://api.github.com/users/mattiasnilsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattiasnilsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattiasnilsen/subscriptions", "organizations_url": "https://api.github.com/users/mattiasnilsen/orgs", "repos_url": "https://api.github.com/users/mattiasnilsen/repos", "events_url": "https://api.github.com/users/mattiasnilsen/events{/privacy}", "received_events_url": "https://api.github.com/users/mattiasnilsen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-10T09:47:06Z", "updated_at": "2016-12-14T23:23:15Z", "closed_at": "2016-12-14T23:23:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiling this code:\r\n\r\n```rust\r\nlet result: Result<_, _> = Ok(10);\r\nresult.unwrap_or(i32);\r\n```\r\n\r\nGives me the following error\r\n\r\n`error: internal compiler error: ../src/librustc_typeck/check/mod.rs:4396: unexpected definition: PrimTy(TyInt(i32))`\r\n\r\nThe error is not limited to just the i32 type.\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\nrustc 1.15.0-nightly (daf8c1dfc 2016-12-05)\r\nbinary: rustc\r\ncommit-hash: daf8c1dfce3b448fc581cc319f64632ec22bd0e1\r\ncommit-date: 2016-12-05\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-nightly\r\nLLVM version: 3.9\r\n\r\n\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', ../src/librustc_errors/lib.rs:423\r\nstack backtrace:\r\n   1:     0x7fc429b2e7ba - std::sys::imp::backtrace::tracing::imp::write::hbea47d9dd19b523c\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:     0x7fc429b3d68f - std::panicking::default_hook::{{closure}}::h6875a2976258b020\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:247\r\n   3:     0x7fc429b3d22d - std::panicking::default_hook::h88ffbc5922643264\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:257\r\n   4:     0x7fc429b3db37 - std::panicking::rust_panic_with_hook::hc790e47d4ecc86cd\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:451\r\n   5:     0x7fc4225b368a - std::panicking::begin_panic::h264cdc75d51b518b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:413\r\n   6:     0x7fc4225c63ad - rustc_errors::Handler::bug::h620f7270292f0095\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_errors/lib.rs:423\r\n   7:     0x7fc426ee5a71 - rustc::session::opt_span_bug_fmt::{{closure}}::h4a9b70c3df8b4b3a\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:783\r\n   8:     0x7fc426ee588e - rustc::session::opt_span_bug_fmt::h7d83586c6e2c7ae6\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1062\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:779\r\n   9:     0x7fc426ee54f2 - rustc::session::bug_fmt::he2d2f00a4afa9d1e\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:763\r\n  10:     0x7fc4275bd9b9 - rustc_typeck::check::FnCtxt::instantiate_value_path::h4229ac945aebfa55\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:4396\r\n  11:     0x7fc4275abcff - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3630\r\n  12:     0x7fc4275aaa32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n  13:     0x7fc4275a04d1 - rustc_typeck::check::FnCtxt::check_argument_types::he03b7446217ca4c2\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2660\r\n  14:     0x7fc42759fba6 - rustc_typeck::check::FnCtxt::check_method_argument_types::hdd878fadf267f630\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2479\r\n  15:     0x7fc4275ad2cb - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2904\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3816\r\n  16:     0x7fc4275aaa32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n  17:     0x7fc4275bc2c3 - rustc_typeck::check::FnCtxt::check_stmt::h155d968e61fdfae6\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2805\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:4170\r\n  18:     0x7fc4275bc66e - rustc_typeck::check::FnCtxt::check_block_with_expected::he90dd72b6855e5e4\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:4204\r\n  19:     0x7fc4275aaf02 - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3810\r\n  20:     0x7fc4275aaa32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n  21:     0x7fc427591c4d - rustc_typeck::check::check_fn::h96bd864b4d4fc711\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2795\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2788\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:824\r\n  22:     0x7fc42759087b - rustc_typeck::check::check_bare_fn::h87386ea43f4e272e\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:661\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:502\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/infer/mod.rs:441\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1033\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1030\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:846\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/infer/mod.rs:441\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:502\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:651\r\n  23:     0x7fc427593723 - rustc_typeck::check::check_item_body::h1e039ede2f960fb9\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:926\r\n  24:     0x7fc42758e0cd - rustc_typeck::check::check_item_bodies::hd22adb7703cc56d7\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:565\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/dep_graph/visit.rs:45\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/hir/mod.rs:456\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/dep_graph/visit.rs:67\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/mod.rs:2681\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:591\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:232\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:589\r\n  25:     0x7fc4275f9a92 - rustc_typeck::check_crate::h92f6bdfe03b6afba\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/lib.rs:350\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/util/common.rs:34\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/lib.rs:350\r\n  26:     0x7fc429ee4a51 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hd97ec26bf3a98036\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:896\r\n  27:     0x7fc429ecd628 - rustc_driver::driver::phase_3_run_analysis_passes::h6d446abb74c09795\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1033\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1030\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1017\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1014\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:782\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:866\r\n  28:     0x7fc429ebd3d2 - rustc_driver::driver::compile_input::h8e119234b60571d5\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:172\r\n  29:     0x7fc429f03418 - rustc_driver::run_compiler::h57c4f233cd1a0c04\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:221\r\n  30:     0x7fc429e1d938 - std::panicking::try::do_call::hf679f17bf3b43b0b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:1117\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:137\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:1051\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panic.rs:295\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:356\r\n  31:     0x7fc429b4807a - __rust_maybe_catch_panic\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libpanic_unwind/lib.rs:97\r\n  32:     0x7fc429e40558 - <F as alloc::boxed::FnBox<A>>::call_box::h21b5b32059700da6\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:332\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panic.rs:351\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/mod.rs:287\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/liballoc/boxed.rs:595\r\n  33:     0x7fc429b3c4f4 - std::sys::imp::thread::Thread::new::thread_start::h8084b1107992ae5b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/liballoc/boxed.rs:605\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys_common/thread.rs:21\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys/unix/thread.rs:84\r\n  34:     0x7fc421d5f453 - start_thread\r\n  35:     0x7fc4298037de - __GI___clone\r\n  36:                0x0 - <unknown>\r\n\r\n```\r\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38280/timeline", "performed_via_github_app": null, "state_reason": "completed"}