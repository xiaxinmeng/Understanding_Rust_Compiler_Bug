{"url": "https://api.github.com/repos/rust-lang/rust/issues/958", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/958/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/958/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/958/events", "html_url": "https://github.com/rust-lang/rust/issues/958", "id": 1705618, "node_id": "MDU6SXNzdWUxNzA1NjE4", "number": 958, "title": "ret guard makes the LLVM verifier sad", "user": {"login": "jruderman", "id": 692547, "node_id": "MDQ6VXNlcjY5MjU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jruderman", "html_url": "https://github.com/jruderman", "followers_url": "https://api.github.com/users/jruderman/followers", "following_url": "https://api.github.com/users/jruderman/following{/other_user}", "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions", "organizations_url": "https://api.github.com/users/jruderman/orgs", "repos_url": "https://api.github.com/users/jruderman/repos", "events_url": "https://api.github.com/users/jruderman/events{/privacy}", "received_events_url": "https://api.github.com/users/jruderman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2011-09-21T22:25:00Z", "updated_at": "2011-09-23T09:12:00Z", "closed_at": "2011-09-23T09:12:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\nfn main() {\n    alt 2 {\n      x when (ret) { x; }\n    }\n}\n```\n\nLLVM dies saying:\n\n```\nPHINode should have one entry for each predecessor of its parent basic block!\n  %6 = phi i32* [ %3, %9 ]\nBroken module found, compilation aborted!\nStack dump:\n0.      Running pass 'Function Pass Manager' on module 'rust_out'.\n1.      Running pass 'Module Verifier' on function '@_ZN4main17_58aa485ede601b15E'\n```\n\nwith the stack:\n\n```\n0   librustllvm.dylib               0x0161ca67 abort + 39\n1   librustllvm.dylib               0x015b8563 (anonymous namespace)::Verifier::abortIfBroken() + 211\n2   librustllvm.dylib               0x015c9fc7 (anonymous namespace)::Verifier::runOnFunction(llvm::Function&) + 1927\n3   librustllvm.dylib               0x01599f1f llvm::FPPassManager::runOnFunction(llvm::Function&) + 655\n4   librustllvm.dylib               0x0159a02c llvm::FPPassManager::runOnModule(llvm::Module&) + 156\n5   librustllvm.dylib               0x0159986f llvm::MPPassManager::runOnModule(llvm::Module&) + 639\n6   librustllvm.dylib               0x01599b4c llvm::PassManagerImpl::run(llvm::Module&) + 172\n7   librustllvm.dylib               0x01599c8b llvm::PassManager::run(llvm::Module&) + 27\n8   librustllvm.dylib               0x009fc5a0 LLVMRustWriteOutputFile + 768 (RustWrapper.cpp:96)\n9   rustc                           0x00009007 _ZN3lib4llvm4llvmE681 + 119\n10  rustc                           0x00632a86 back::link::write::run_passes::anon7290::anon7291 + 150\n11  libstd.dylib                    0x00908cc6 str::as_buf + 294\n12  rustc                           0x006329cb back::link::write::run_passes::anon7290 + 187\n13  libstd.dylib                    0x00908cc6 str::as_buf + 294\n14  rustc                           0x004e3d77 back::link::write::run_passes + 14391\n15  rustc                           0x0064106e driver::rustc::compile_input::thunk8003 + 158\n16  rustc                           0x00557ea0 driver::rustc::time + 352\n17  rustc                           0x0055f3c7 driver::rustc::compile_input + 23431\n18  rustc                           0x0057ddb8 driver::rustc::main + 45960\n19  rustc                           0x0057f90f _rust_main + 63\n20  rustc                           0x00645b1f _rust_main_wrap + 31\n21  librustrt.dylib                 0x0088af4c task_start_wrapper + 60 (rust_task.cpp:149)\n```\n", "closed_by": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/958/timeline", "performed_via_github_app": null, "state_reason": "completed"}