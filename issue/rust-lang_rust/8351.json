{"url": "https://api.github.com/repos/rust-lang/rust/issues/8351", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8351/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8351/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8351/events", "html_url": "https://github.com/rust-lang/rust/issues/8351", "id": 17713558, "node_id": "MDU6SXNzdWUxNzcxMzU1OA==", "number": 8351, "title": "ICE while checking `match` with struct-like patterns", "user": {"login": "dim-an", "id": 88889, "node_id": "MDQ6VXNlcjg4ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/88889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dim-an", "html_url": "https://github.com/dim-an", "followers_url": "https://api.github.com/users/dim-an/followers", "following_url": "https://api.github.com/users/dim-an/following{/other_user}", "gists_url": "https://api.github.com/users/dim-an/gists{/gist_id}", "starred_url": "https://api.github.com/users/dim-an/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dim-an/subscriptions", "organizations_url": "https://api.github.com/users/dim-an/orgs", "repos_url": "https://api.github.com/users/dim-an/repos", "events_url": "https://api.github.com/users/dim-an/events{/privacy}", "received_events_url": "https://api.github.com/users/dim-an/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-08-06T20:41:26Z", "updated_at": "2013-10-08T02:56:41Z", "closed_at": "2013-10-08T02:56:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "ICE while compiling following code:\n\n```\nenum E {\n    Foo{f: int},\n    Bar\n}\n\npub fn main() {\n    let e = Foo{f: 1};\n    match e {\n        Foo{f: 0} => fail!(),\n        Foo{_} => (),\n        _ => fail!(),\n    }\n}\n```\n\n```\n~ \u00bb RUST_LOG=rustc=1,::rt::backtrace rustc test.rs\nrust: task failed at 'index out of bounds: the len is 0 but the index is 0', /home/ermolovd/workspace/rust/src/librustc/middle/check_match.rs:231\n/home/ermolovd/.local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f142848673b]\n/home/ermolovd/.local/bin/../lib/librustrt.so(+0x2ad59)[0x7f1428497d59]\n/home/ermolovd/.local/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f14284887b8]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys6rustrt16rust_upcall_fail17_f25e955198ccc5c014_0$x2e8$x2dpreE+0x37)[0x7f142abcf8d7]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x71)[0x7f142abcfe61]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x91a0e)[0x7f142aaa9a0e]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1cc66a)[0x7f142abe466a]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x17ee09)[0x7f142ab96e09]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0xe350a)[0x7f142aafb50a]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11174d)[0x7f142ab2974d]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x17ebc0)[0x7f142ab96bc0]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN8unstable4lang17fail_bounds_check17_7112ff25e39642a214_0$x2e8$x2dpreE+0x211)[0x7f142aab64e1]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match9is_useful16_1efec9c180b8af314_0$x2e8$x2dpreE+0x4b7)[0x7f142909b467]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match21is_useful_specialized17_a8ff93c88f76c27914_0$x2e8$x2dpreE+0x430)[0x7f14290a3580]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match9is_useful16_1efec9c180b8af314_0$x2e8$x2dpreE+0x240f)[0x7f142909d3bf]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match10check_arms17_1c832619b9e2589c14_0$x2e8$x2dpreE+0x64b)[0x7f142909539b]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match10check_expr17_7a4496e893c2d5d114_0$x2e8$x2dpreE+0x3bb)[0x7f142909275b]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x9d4feb)[0x7f1429091feb]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67f939)[0x7f1428d3c939]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67f5a1)[0x7f1428d3c5a1]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67f23f)[0x7f1428d3c23f]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x68adb7)[0x7f1428d47db7]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match8check_fn17_85bb11c86427ffcc14_0$x2e8$x2dpreE+0x151)[0x7f14290944c1]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x9d728e)[0x7f142909428e]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67c694)[0x7f1428d39694]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67ba23)[0x7f1428d38a23]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67acf7)[0x7f1428d37cf7]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x67a884)[0x7f1428d37884]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x4222be)[0x7f1428adf2be]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle11check_match11check_crate17_3edff8522e9cc9ee14_0$x2e8$x2dpreE+0xbca)[0x7f142909181a]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0xf57836)[0x7f1429614836]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x9b95d9)[0x7f14290765d9]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver27phase_3_run_analysis_passes17_1b99c65643aa108b14_0$x2e8$x2dpreE+0x139b)[0x7f1429611c5b]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver13compile_input15_4c53e9c6f69a0114_0$x2e8$x2dpreE+0x7e4)[0x7f1429617904]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN12run_compiler16_0184613adfc5db914_0$x2e8$x2dpreE+0x27c7)[0x7f1429653637]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0xfd24ea)[0x7f142968f4ea]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0xfcc48c)[0x7f142968948c]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0xfb9e06)[0x7f1429676e06]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x16aaf7)[0x7f142ab82af7]\n/home/ermolovd/.local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7f14284870fb]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/ermolovd/workspace/rust/src/librustc/rustc.rs:358\n/home/ermolovd/.local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f142848673b]\n/home/ermolovd/.local/bin/../lib/librustrt.so(+0x2ad59)[0x7f1428497d59]\n/home/ermolovd/.local/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f14284887b8]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys6rustrt16rust_upcall_fail17_f25e955198ccc5c014_0$x2e8$x2dpreE+0x37)[0x7f142abcf8d7]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x71)[0x7f142abcfe61]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b853f)[0x7f142abd053f]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7ccb)[0x7f142abcfccb]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7a90)[0x7f142abcfa90]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b79e9)[0x7f142abcf9e9]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7944)[0x7f142abcf944]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b84e8)[0x7f142abd04e8]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7ccb)[0x7f142abcfccb]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7a90)[0x7f142abcfa90]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b79e9)[0x7f142abcf9e9]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x1b7944)[0x7f142abcf944]\n/home/ermolovd/.local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0xb24d3)[0x7f142aaca4d3]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN7monitor17_b5614286b08b504b14_0$x2e8$x2dpreE+0xa22)[0x7f1429655fa2]\n/home/ermolovd/.local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN4main15_f3d16eaf7d573814_0$x2e8$x2dpreE+0x88)[0x7f142968f328]\nrustc[0x400c0e]\nrustc(_rust_main+0x2e)[0x400c3e]\n/home/ermolovd/.local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7f14284870fb]\nrust: domain main @0x16a6db0 root task failed\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8351/timeline", "performed_via_github_app": null, "state_reason": "completed"}