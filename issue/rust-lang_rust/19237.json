{"url": "https://api.github.com/repos/rust-lang/rust/issues/19237", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19237/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19237/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19237/events", "html_url": "https://github.com/rust-lang/rust/issues/19237", "id": 49818628, "node_id": "MDU6SXNzdWU0OTgxODYyOA==", "number": 19237, "title": "Compiler panic: Yet another 'index out of bounds: the len is 12 but the index is 12'", "user": {"login": "IvanUkhov", "id": 57440, "node_id": "MDQ6VXNlcjU3NDQw", "avatar_url": "https://avatars.githubusercontent.com/u/57440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IvanUkhov", "html_url": "https://github.com/IvanUkhov", "followers_url": "https://api.github.com/users/IvanUkhov/followers", "following_url": "https://api.github.com/users/IvanUkhov/following{/other_user}", "gists_url": "https://api.github.com/users/IvanUkhov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IvanUkhov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IvanUkhov/subscriptions", "organizations_url": "https://api.github.com/users/IvanUkhov/orgs", "repos_url": "https://api.github.com/users/IvanUkhov/repos", "events_url": "https://api.github.com/users/IvanUkhov/events{/privacy}", "received_events_url": "https://api.github.com/users/IvanUkhov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-23T08:27:49Z", "updated_at": "2014-11-23T09:41:28Z", "closed_at": "2014-11-23T09:41:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello,\n\nThe following [code](http://is.gd/zPTDbV):\n\n``` rust\nuse std::default::Default;\n\ntype Foo = u16;\n\n#[deriving(Default)]\nstruct Bar {\n    pub foo: Foo,\n}\n\nfn main() {\n    let baz = 0u;\n    match baz {\n        _ => assert!(0, 0),\n    }\n}\n```\n\nmakes the compiler panic:\n\n```\n<std macros>:8:12: 13:23 error: mismatched types: expected `bool`, found `_` (expected bool, found integral variable)\n<std macros>:8         if !$cond {\n<std macros>:9             panic!($($arg),+)\n<std macros>:10         }\n<std macros>:11     );\n<std macros>:12 )\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'index out of bounds: the len is 12 but the index is 12', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/libsyntax/lib.rs:1\n```\n\nThe backtrace is as follows:\n\n```\n   1:        0x105e915f2 - rt::backtrace::imp::write::he31e36fe59b39292ugt\n   2:        0x105e946ad - failure::on_fail::h7c2689f722982652nCt\n   3:        0x1060ff575 - unwind::begin_unwind_inner::h09866e00e97d31fbI2c\n   4:        0x1060ff1bf - unwind::begin_unwind_fmt::h443e47d11b48984fTZc\n   5:        0x1060fef62 - rust_begin_unwind\n   6:        0x106149bfc - panicking::panic_fmt::hc979f6c0b0157f68RQl\n   7:        0x106152341 - panicking::panic_bounds_check::hfad71607541b5567pPl\n   8:        0x103e5a1e5 - codemap::FileMap::get_line::h40447e4b57225531m4E\n   9:        0x103e888d3 - diagnostic::emit::hd3a2cf9de9dee335wvG\n  10:        0x103e85168 - diagnostic::EmitterWriter.Emitter::emit::h8d15319a02e5e7a2lrG\n  11:        0x103e83955 - diagnostic::Handler::emit::h444f90359ca9a887F8F\n  12:        0x103e5637b - diagnostic::SpanHandler::span_err::he607876660b5f38fEWF\n  13:        0x103208f8d - middle::typeck::infer::error_reporting::InferCtxt<'a, 'tcx>.ErrorReporting<'tcx>::report_type_error::h295fd9075d7add0fEMv\n  14:        0x1030a12d4 - middle::typeck::check::demand::suptype::h60784e61bbbd5b6eyCd\n  15:        0x1031b806d - middle::typeck::check::check_expr_has_type::closure.110801\n  16:        0x1031b6216 - middle::typeck::check::check_expr_with_unifier::h8837607ae16c10b8Nzm\n  17:        0x1031b0442 - middle::typeck::check::check_expr_with_unifier::h8837607ae16c10b8Nzm\n  18:        0x1030a44c2 - middle::typeck::check::_match::check_match::h405380e6f6849c885P8\n  19:        0x1031b06f3 - middle::typeck::check::check_expr_with_unifier::h8837607ae16c10b8Nzm\n  20:        0x10316a4cf - middle::typeck::check::check_block_with_expected::he7085b8c57c115ecvzo\n  21:        0x103143f70 - middle::typeck::check::check_fn::h604cf1058f7c9abce0i\n  22:        0x103166b1e - middle::typeck::check::check_bare_fn::h42d50bc38b24ab59jPi\n  23:        0x103162ad1 - middle::typeck::check::check_item::ha935ead12b2c5b2ft9i\n  24:        0x103166840 - middle::typeck::check::check_item_types::h466c6c16edcec5c9tOi\n  25:        0x1034ea896 - util::common::time::h12864813766357117792\n  26:        0x1034e9d14 - middle::typeck::check_crate::h1acd5e14d073c903cwM\n  27:        0x102ad79a3 - driver::driver::phase_3_run_analysis_passes::h098de55f4a14acee2eS\n  28:        0x102acbecc - driver::driver::compile_input::h814765d870318dcf8VR\n  29:        0x102b49e65 - driver::run_compiler::h54cbb685f3e65071gUT\n  30:        0x102b4863e - driver::run::closure.59668\n  31:        0x1029605ae - task::TaskBuilder::try_future::closure.38921\n  32:        0x105e1f2e4 - task::TaskBuilder::spawn_internal::closure.24355\n  33:        0x1060fcddd - task::Task::spawn::closure.5917\n  34:        0x1061616ac - rust_try_inner\n  35:        0x106161696 - rust_try\n  36:        0x1060fceb7 - unwind::try::h207282f5be16daac3Qc\n  37:        0x1060fcc8c - task::Task::run::h7eee475ba5444e2993b\n  38:        0x1060fc98f - task::Task::spawn::closure.5893\n  39:        0x1060fe627 - thread::thread_start::hc58864c152053492Wnc\n  40:     0x7fff986072fc - _pthread_body\n  41:     0x7fff98607279 - _pthread_body\n```\n\n[It seems](https://github.com/rust-lang/rust/issues?q=is%3Aissue+is%3Aopen+index+out+of+bounds%3A+the+len+is+12+but+the+index+is+12) there are quite many bug reports with similar panic messages. I hope my snippet of code can shed some more light on the problem. Thank you.\n\nRegards,\nIvan\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19237/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19237/timeline", "performed_via_github_app": null, "state_reason": "completed"}