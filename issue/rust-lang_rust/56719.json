{"url": "https://api.github.com/repos/rust-lang/rust/issues/56719", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56719/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56719/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56719/events", "html_url": "https://github.com/rust-lang/rust/issues/56719", "id": 389914978, "node_id": "MDU6SXNzdWUzODk5MTQ5Nzg=", "number": 56719, "title": "Lifetime trouble with hidden Self when going to edition 2018", "user": {"login": "vorner", "id": 11783500, "node_id": "MDQ6VXNlcjExNzgzNTAw", "avatar_url": "https://avatars.githubusercontent.com/u/11783500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vorner", "html_url": "https://github.com/vorner", "followers_url": "https://api.github.com/users/vorner/followers", "following_url": "https://api.github.com/users/vorner/following{/other_user}", "gists_url": "https://api.github.com/users/vorner/gists{/gist_id}", "starred_url": "https://api.github.com/users/vorner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vorner/subscriptions", "organizations_url": "https://api.github.com/users/vorner/orgs", "repos_url": "https://api.github.com/users/vorner/repos", "events_url": "https://api.github.com/users/vorner/events{/privacy}", "received_events_url": "https://api.github.com/users/vorner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 930400927, "node_id": "MDU6TGFiZWw5MzA0MDA5Mjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rust-2018-preview", "name": "A-rust-2018-preview", "color": "f7e101", "default": false, "description": "Area: The 2018 edition preview"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-11T19:20:34Z", "updated_at": "2019-08-08T21:29:01Z", "closed_at": "2019-08-08T21:29:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "OK, so I'm not sure this is a bug or annoyance, but it still acts a bit weird. And I don't know what to search for if it was already reported.\r\n\r\nAnyway, let's have this code that compiles under edition 2015:\r\n\r\n```rust\r\nstruct Parsed<'a> {\r\n    parts: Vec<&'a str>,\r\n}\r\n\r\nimpl<'a> Parsed<'a> {\r\n    fn parse(s: &'a str) -> Self {\r\n        let parts = s.split_whitespace().collect();\r\n        Parsed {\r\n            parts\r\n        }\r\n    }\r\n\r\n    fn len(&self) -> usize {\r\n        self.parts.len()\r\n    }\r\n\r\n    fn parsed_len(s: &str) -> usize {\r\n        Self::parse(s).len()\r\n    }\r\n}\r\n\r\nfn process<F: Fn(&str) -> usize>(f: F) {\r\n    unimplemented!()\r\n}\r\n\r\nfn main() {\r\n    process(Parsed::parsed_len)\r\n}\r\n```\r\n\r\nWhen I switch to 2018, it starts complaining that the `s` parameter of `parsed_len` needs the `'a` lifetime. Well, I guess that's because of `Self` in there (if I use `Parsed` instead, it is OK with it).\r\n\r\nBut if I obey, the `process` no longer wants to accept the associated function, it says: `expected bound lifetime parameter, found concrete lifetime`. Putting it into a closure (`process(|s| Parsed::parsed_len(s))`) fixes that. Which is strange, it's still the same function, isn't it?\r\n\r\nShould it be doing this? I'd hope the `process` would still accept the associated function, even though the lifetime is on the struct, not only on the parameter.\r\n\r\nAlso, `cargo fix` doesn't help with this transition (though I don't know what it should do about it).", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56719/timeline", "performed_via_github_app": null, "state_reason": "completed"}