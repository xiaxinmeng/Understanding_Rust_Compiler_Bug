{"url": "https://api.github.com/repos/rust-lang/rust/issues/84698", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/84698/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/84698/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/84698/events", "html_url": "https://github.com/rust-lang/rust/issues/84698", "id": 871080200, "node_id": "MDU6SXNzdWU4NzEwODAyMDA=", "number": 84698, "title": "Intereleaved text in \"cargo test\" output", "user": {"login": "dralley", "id": 2751996, "node_id": "MDQ6VXNlcjI3NTE5OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/2751996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dralley", "html_url": "https://github.com/dralley", "followers_url": "https://api.github.com/users/dralley/followers", "following_url": "https://api.github.com/users/dralley/following{/other_user}", "gists_url": "https://api.github.com/users/dralley/gists{/gist_id}", "starred_url": "https://api.github.com/users/dralley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dralley/subscriptions", "organizations_url": "https://api.github.com/users/dralley/orgs", "repos_url": "https://api.github.com/users/dralley/repos", "events_url": "https://api.github.com/users/dralley/events{/privacy}", "received_events_url": "https://api.github.com/users/dralley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 630810559, "node_id": "MDU6TGFiZWw2MzA4MTA1NTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-libtest", "name": "A-libtest", "color": "f7e101", "default": false, "description": "Area: #[test] related"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-04-29T04:46:13Z", "updated_at": "2022-12-12T17:09:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Problem**\r\n\r\nThe following image is two screenshots, side by side, of the output of \"cargo test\" from two test runs seconds apart with the same code.  As you can see, there seems to be a race (or race-like behavior) causing text written to the stdout buffer to be interleaved together.\r\n\r\nThis is exclusive to when `--nocapture` is specified.  I cannot reproduce if `--nocapture` is not specified.\r\n\r\n![Screenshot from 2021-04-29 00-35-07](https://user-images.githubusercontent.com/2751996/116503142-5e3a6700-a883-11eb-89d4-3082ef0a9f86.png)\r\n\r\nUsually it works \"correctly\" but I can I can do this over and over and continue getting different versions of incorrectly printed output each time.\r\n\r\n![Screenshot from 2021-04-29 00-42-25](https://user-images.githubusercontent.com/2751996/116503475-2f70c080-a884-11eb-9df2-085fb60d7cec.png)\r\n\r\nAnother one\r\n\r\n![Screenshot from 2021-04-29 00-48-33](https://user-images.githubusercontent.com/2751996/116503700-bf166f00-a884-11eb-85a0-d29431bf6448.png)\r\n\r\n\r\n**Notes**\r\n\r\nOutput of `cargo version`:\r\n\r\ncargo 1.53.0-nightly (0ed318d18 2021-04-23)\r\nrustc 1.53.0-nightly (42816d61e 2021-04-24)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/84698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/84698/timeline", "performed_via_github_app": null, "state_reason": null}