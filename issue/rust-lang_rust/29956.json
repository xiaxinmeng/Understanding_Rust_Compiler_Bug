{"url": "https://api.github.com/repos/rust-lang/rust/issues/29956", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29956/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29956/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29956/events", "html_url": "https://github.com/rust-lang/rust/issues/29956", "id": 118062287, "node_id": "MDU6SXNzdWUxMTgwNjIyODc=", "number": 29956, "title": "build failed with `libstd-71b07a99.so: undefined symbol: clock_gettime`", "user": {"login": "alsam", "id": 5341924, "node_id": "MDQ6VXNlcjUzNDE5MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5341924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alsam", "html_url": "https://github.com/alsam", "followers_url": "https://api.github.com/users/alsam/followers", "following_url": "https://api.github.com/users/alsam/following{/other_user}", "gists_url": "https://api.github.com/users/alsam/gists{/gist_id}", "starred_url": "https://api.github.com/users/alsam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alsam/subscriptions", "organizations_url": "https://api.github.com/users/alsam/orgs", "repos_url": "https://api.github.com/users/alsam/repos", "events_url": "https://api.github.com/users/alsam/events{/privacy}", "received_events_url": "https://api.github.com/users/alsam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-11-20T15:22:43Z", "updated_at": "2015-11-21T19:56:51Z", "closed_at": "2015-11-21T19:56:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello All,\nUsed to build the nightly smoothly, but today it failed with the messages:\n\n``` sh\ntail make.LOG2\ncp x86_64-unknown-linux-gnu/rt/libcompiler-rt.a x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcompiler-rt.a\nMATCHES=\"\"; if [ -n \"$MATCHES\" ] ; then echo \"warning: removing previous\" \\'libcore-*.so\\' \"libraries:\" $MATCHES; rm $MATCHES ; fi\nMATCHES=\"\"; if [ -n \"$MATCHES\" ] ; then echo \"warning: removing previous\" \\'libcore-*.rlib\\' \"libraries:\" $MATCHES; rm $MATCHES ; fi\nCFG_LLVM_LINKAGE_FILE=/home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/rt/llvmdeps.rs LD_LIBRARY_PATH=/home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib:$LD_LIBRARY_PATH   x86_64-unknown-linux-gnu/stage1/bin/rustc --cfg stage1  -O --cfg rtopt -C prefer-dynamic --target=x86_64-unknown-linux-gnu  -D warnings -L \"x86_64-unknown-linux-gnu/rt\" -L native=\"/home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/llvm/Release/lib\"      --out-dir x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib -C extra-filename=-71b07a99 src/libcore/lib.rs\ninfo: now are following matches for libcore-*.so libraries:\ninfo: now are following matches for libcore-*.rlib libraries:\nx86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-71b07a99.rlib\nLD_LIBRARY_PATH=/home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib:$LD_LIBRARY_PATH   x86_64-unknown-linux-gnu/stage1/bin/rustc --cfg stage1  -O --cfg rtopt -C prefer-dynamic --target=x86_64-unknown-linux-gnu  --emit=obj -o x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/rsbegin.o /home/asamoilo/work/github/rust/src/rtstartup/rsbegin.rs\nx86_64-unknown-linux-gnu/stage1/bin/rustc: symbol lookup error: /home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib/libstd-71b07a99.so: undefined symbol: clock_gettime\nmake: *** [x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/rsbegin.o] Error 127\n```\n\nrunning it manually:\n\n``` sh\nD_LIBRARY_PATH=/home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib:$LD_LIBRARY_PATH   x86_64-unknown-linux-gnu/stage1/bin/rustc --cfg stage1  -O --cfg rtopt -C prefer-dynamic --target=x86_64-unknown-linux-gnu  --emit=obj -o x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/rsbegin.o /home/asamoilo/work/github/rust/src/rtstartup/rsbegin.rs\nx86_64-unknown-linux-gnu/stage1/bin/rustc: symbol lookup error: /home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib/libstd-71b07a99.so: undefined symbol: clock_gettime\n```\n\n```\nldd /home/asamoilo/work/github/rust/x86_64-unknown-linux-gnu/stage1/lib/libstd-71b07a99.so\n        linux-vdso.so.1 =>  (0x00007fff5f5ff000)\n        libdl.so.2 => /lib64/libdl.so.2 (0x00007f68f345e000)\n        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f68f3240000)\n        libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f68f302a000)\n        libc.so.6 => /lib64/libc.so.6 (0x00007f68f2c97000)\n        /lib64/ld-linux-x86-64.so.2 (0x00000031c6600000)\n        libm.so.6 => /lib64/libm.so.6 (0x00007f68f2a12000)\n```\n\nDon't you think adding `-lrt` to `libstd-*.so` solve the problem?\nThanks!\n", "closed_by": {"login": "alsam", "id": 5341924, "node_id": "MDQ6VXNlcjUzNDE5MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5341924?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alsam", "html_url": "https://github.com/alsam", "followers_url": "https://api.github.com/users/alsam/followers", "following_url": "https://api.github.com/users/alsam/following{/other_user}", "gists_url": "https://api.github.com/users/alsam/gists{/gist_id}", "starred_url": "https://api.github.com/users/alsam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alsam/subscriptions", "organizations_url": "https://api.github.com/users/alsam/orgs", "repos_url": "https://api.github.com/users/alsam/repos", "events_url": "https://api.github.com/users/alsam/events{/privacy}", "received_events_url": "https://api.github.com/users/alsam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29956/timeline", "performed_via_github_app": null, "state_reason": "completed"}