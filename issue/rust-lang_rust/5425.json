{"url": "https://api.github.com/repos/rust-lang/rust/issues/5425", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/5425/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/5425/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/5425/events", "html_url": "https://github.com/rust-lang/rust/issues/5425", "id": 12145327, "node_id": "MDU6SXNzdWUxMjE0NTMyNw==", "number": 5425, "title": "ICE: when no library name is given", "user": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 13242248, "node_id": "MDU6TGFiZWwxMzI0MjI0OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-metadata", "name": "A-metadata", "color": "f7e101", "default": false, "description": "Area: crate metadata"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-03-18T17:51:47Z", "updated_at": "2014-06-16T21:56:42Z", "closed_at": "2013-09-04T11:31:03Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "$ rustc --version\nrustc 0.6 (ebba8b4 2013-03-15 22:39:42 -0700)\nhost: x86_64-unknown-linux-gnu\n\n$ rm -f test.rs && touch test.rs && RUST_LOG=rustc=1,::rt::backtrace rustc test.rs --lib -o \"\"\nwarning: missing crate link meta `name`, using ``as default\nwarning: missing crate link meta`vers`, using`0.0` as default\nrust: task failed at 'assertion failed: !ecx.link_meta.name.is_empty()', /home/lime/src/rust/src/librustc/metadata/encoder.rs:1148\n/home/lime/usr/rust/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f569710b75b]\n/home/lime/usr/rust/bin/../lib/librustrt.so(+0x2c039)[0x7f569711c039]\n/home/lime/usr/rust/bin/../lib/librustrt.so(upcall_fail+0x190)[0x7f569710d550]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1064db)[0x7f569a42f4db]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x106482)[0x7f569a42f482]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_7cd364c41f10422f3_06E+0x71)[0x7f569a37afa1]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys11fail_assert15_7ab993b54e9a433_06E+0x230)[0x7f569a384550]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x82ebc6)[0x7f569937fbc6]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8ac164)[0x7f56993fd164]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN8metadata7encoder15encode_metadata17_eac9ebefd2dd983c3_06E+0x759)[0x7f5698dfad89]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base14write_metadata17_9473cd474ecf143d3_06E+0x8a)[0x7f5698dfa10a]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base11trans_crate17_cad9f57a7299f4c43_06E+0x12cc)[0x7f5698dfff9c]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x86ca10)[0x7f56993bda10]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_rest17_4f584da1f267ffac3_06E+0x417a)[0x7f56993ba8fa]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8ac164)[0x7f56993fd164]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_upto17_b3a99447756d7d313_06E+0x108)[0x7f56993bdbc8]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8ac164)[0x7f56993fd164]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver13compile_input17_894c3210c26b27423_06E+0xca)[0x7f56993be00a]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN12run_compiler17_3e88db675ebe9e253_06E+0x214a)[0x7f56993edc1a]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8a9aa1)[0x7f56993faaa1]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8a5edb)[0x7f56993f6edb]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8ac164)[0x7f56993fd164]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0xd015e)[0x7f569a3f915e]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14ffa4)[0x7f569a478fa4]\n/home/lime/usr/rust/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f569710bfa4]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/lime/src/rust/src/librustc/rustc.rc:359\n/home/lime/usr/rust/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f569710b75b]\n/home/lime/usr/rust/bin/../lib/librustrt.so(+0x2c039)[0x7f569711c039]\n/home/lime/usr/rust/bin/../lib/librustrt.so(upcall_fail+0x190)[0x7f569710d550]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1064db)[0x7f569a42f4db]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x106482)[0x7f569a42f482]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_7cd364c41f10422f3_06E+0x71)[0x7f569a37afa1]\n/home/lime/usr/rust/bin/../lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14ffa4)[0x7f569a478fa4]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN7monitor17_c8b32a4d18d0ac153_06E+0x1645)[0x7f56993f02d5]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(+0x8ac164)[0x7f56993fd164]\n/home/lime/usr/rust/bin/../lib/librustc-c84825241471686d-0.6.so(_ZN4main16_706f4ee7413ae583_06E+0x7e)[0x7f56993fcd7e]\n/home/lime/usr/rust/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f569710bfa4]\nrust: domain main @0x15cf3c0 root task failed\n## \n\nIt fails because no library name is given anywhere. There should be some user-friendly error message instead of `fail_unless!`.\n(What I actually tried at first is `-o .` which gives same error.)\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/5425/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/5425/timeline", "performed_via_github_app": null, "state_reason": "completed"}