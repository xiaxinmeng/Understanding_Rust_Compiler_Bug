{"url": "https://api.github.com/repos/rust-lang/rust/issues/52725", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52725/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52725/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52725/events", "html_url": "https://github.com/rust-lang/rust/issues/52725", "id": 344686251, "node_id": "MDU6SXNzdWUzNDQ2ODYyNTE=", "number": 52725, "title": "thumbv7em-none-eabi build with no-std fails with missing references to standard library functions", "user": {"login": "mqudsi", "id": 606923, "node_id": "MDQ6VXNlcjYwNjkyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/606923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mqudsi", "html_url": "https://github.com/mqudsi", "followers_url": "https://api.github.com/users/mqudsi/followers", "following_url": "https://api.github.com/users/mqudsi/following{/other_user}", "gists_url": "https://api.github.com/users/mqudsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mqudsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mqudsi/subscriptions", "organizations_url": "https://api.github.com/users/mqudsi/orgs", "repos_url": "https://api.github.com/users/mqudsi/repos", "events_url": "https://api.github.com/users/mqudsi/events{/privacy}", "received_events_url": "https://api.github.com/users/mqudsi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-07-26T03:56:53Z", "updated_at": "2019-03-23T13:55:43Z", "closed_at": "2019-03-23T13:55:43Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```fish\r\nmqudsi@Blitzkrieg /m/d/G/r/cortex-m-quickstart> rustc --version\r\nrustc 1.29.0-nightly (6a1c0637c 2018-07-23)\r\nmqudsi@Blitzkrieg /m/d/G/r/cortex-m-quickstart> cargo --version\r\ncargo 1.29.0-nightly (506eea76e 2018-07-17)\r\nmqudsi@Blitzkrieg /m/d/G/r/cortex-m-quickstart> arm-none-eabi-gcc --version\r\narm-none-eabi-gcc (15:4.9.3+svn231177-1) 4.9.3 20150529 (prerelease)\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n\r\nAttempting to compile the `hello.rs` example from the `cortex-m-quickstart` crate without xargo after `rustup target add thumbv7em-none-eabi`:\r\n\r\n```fish\r\nmqudsi@Blitzkrieg /m/d/G/r/cortex-m-quickstart>\r\nenv (env |sed '/^\\(PATH\\|HOME\\|PWD\\|USER\\)/b;s/=.*/=/g') cargo build --example hello --target thumbv7em-none-eabi\r\n   Compiling vcell v0.1.0\r\n   Compiling bare-metal v0.2.0\r\n   Compiling aligned v0.2.0\r\n   Compiling r0 v0.2.2\r\n   Compiling cortex-m-semihosting v0.3.0\r\n   Compiling volatile-register v0.2.0\r\n   Compiling cortex-m-rt v0.5.1\r\n   Compiling cortex-m v0.5.2\r\n   Compiling panic-semihosting v0.3.0\r\n   Compiling cortex-m-quickstart v0.3.2 (file:///mnt/d/GIT/rustcortex/cortex-m-quickstart)\r\nerror: linking with `arm-none-eabi-gcc` failed: exit code: 1\r\n  |\r\n  = note: \"arm-none-eabi-gcc\" \"-L\" \"/home/mqudsi/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabi/lib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5.16u6js6g0l3k1ic6.rcgu.o\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5.3l0398fjltevyo2h.rcgu.o\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5.4xq48u46a1pwiqn7.rcgu.o\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5.544l4wfz89vbhoea.rcgu.o\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5.8xzrsc1ux72v29j.rcgu.o\" \"-o\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/examples/hello-2e4ab7277541a4c5\" \"-Wl,--gc-sections\" \"-nodefaultlibs\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/debug/deps\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/build/cortex-m-quickstart-2ffd5f18bb7dccbd/out\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/build/cortex-m-d10fc233ba5cdde4/out\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/build/cortex-m-rt-58a8c9b30748ebc9/out\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/build/cortex-m-rt-58a8c9b30748ebc9/out\" \"-L\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/build/cortex-m-semihosting-c3793594fbee2f1e/out\" \"-L\" \"/home/mqudsi/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabi/lib\" \"-Wl,--start-group\" \"-Wl,-Bstatic\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libpanic_semihosting-c0c60999560899c9.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libcortex_m-28e4aedd6ab537f5.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libvolatile_register-77c52ea100a229e1.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libvcell-2d535a4f29ff87af.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libbare_metal-49c8e733c6ec9713.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libaligned-6534e90a0ad3fa07.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libcortex_m_semihosting-fe101d1603d37137.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libcortex_m_rt-82216ff9b050a0f8.rlib\" \"/mnt/d/GIT/rustcortex/cortex-m-quickstart/target/thumbv7em-none-eabi/debug/deps/libr0-3132ffbfc74c8f3e.rlib\" \"/home/mqudsi/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabi/lib/libcore-f30fde47d896be92.rlib\" \"-Wl,--end-group\" \"/home/mqudsi/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabi/lib/libcompiler_builtins-b77dbe465d544924.rlib\" \"-Wl,-Bdynamic\"\r\n  = note: /usr/lib/gcc/arm-none-eabi/4.9.3/../../../arm-none-eabi/lib/crt0.o: In function `_start':\r\n          /build/newlib-5zwpxE/newlib-2.2.0+git20150830.5a3d536/build/arm-none-eabi/libgloss/arm/../../../../libgloss/arm/crt0.S:419: undefined reference to `atexit'\r\n          /build/newlib-5zwpxE/newlib-2.2.0+git20150830.5a3d536/build/arm-none-eabi/libgloss/arm/../../../../libgloss/arm/crt0.S:421: undefined reference to `__libc_init_array'\r\n          /build/newlib-5zwpxE/newlib-2.2.0+git20150830.5a3d536/build/arm-none-eabi/libgloss/arm/../../../../libgloss/arm/crt0.S:427: undefined reference to `exit'\r\n          /build/newlib-5zwpxE/newlib-2.2.0+git20150830.5a3d536/build/arm-none-eabi/libgloss/arm/../../../../libgloss/arm/crt0.S:427: undefined reference to `__libc_fini_array'\r\n          collect2: error: ld returned 1 exit status\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `cortex-m-quickstart`.\r\n```", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52725/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52725/timeline", "performed_via_github_app": null, "state_reason": "completed"}