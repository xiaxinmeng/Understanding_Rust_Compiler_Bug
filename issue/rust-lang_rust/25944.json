{"url": "https://api.github.com/repos/rust-lang/rust/issues/25944", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25944/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25944/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25944/events", "html_url": "https://github.com/rust-lang/rust/issues/25944", "id": 83610712, "node_id": "MDU6SXNzdWU4MzYxMDcxMg==", "number": 25944, "title": "rustdoc pads spaces in doctest multiline string literals", "user": {"login": "sru", "id": 2485892, "node_id": "MDQ6VXNlcjI0ODU4OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2485892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sru", "html_url": "https://github.com/sru", "followers_url": "https://api.github.com/users/sru/followers", "following_url": "https://api.github.com/users/sru/following{/other_user}", "gists_url": "https://api.github.com/users/sru/gists{/gist_id}", "starred_url": "https://api.github.com/users/sru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sru/subscriptions", "organizations_url": "https://api.github.com/users/sru/orgs", "repos_url": "https://api.github.com/users/sru/repos", "events_url": "https://api.github.com/users/sru/events{/privacy}", "received_events_url": "https://api.github.com/users/sru/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-06-01T17:20:37Z", "updated_at": "2016-05-11T06:38:50Z", "closed_at": "2016-05-11T06:38:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using multiline string literal in doctest, rustdoc pads spaces after the newline. The doc renders perfectly fine:\n\n![screen shot 2015-06-01 at 12 15 37 pm](https://cloud.githubusercontent.com/assets/2485892/7918571/f703b7f2-0857-11e5-89b4-ffad6a6e8302.png)\n\nI tried this code:\n\n``````\n//! Hello world.\n//!\n//! # Examples\n//!\n//! ```rust\n//! let s = \"\n//! Hello\n//! World\";\n//! assert_eq!(\"\\nHello\\nWorld\", s);\n//! ```\n//!\n//! ```rust\n//! let s = r#\"\n//! Hello\n//! World\"#;\n//! assert_eq!(\"\\nHello\\nWorld\", s);\n//! ```\n\nfn main() {\n    println!(\"hello world!\");\n}\n``````\n\nI expected to see this happen: The test should pass.\n\nInstead, this happened: The test failed.\n\n```\nrunning 2 tests\ntest _0 ... FAILED\ntest _1 ... FAILED\n\nfailures:\n\n---- _0 stdout ----\n    thread '_0' panicked at 'test executable failed:\n\nthread '<main>' panicked at 'assertion failed: `(left == right)` (left: `\"\\nHello\\nWorld\"`, right: `\"\\n    Hello\\n    World\"`)', <anon>:5\n', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustdoc/test.rs:255\n\n\n---- _1 stdout ----\n    thread '_1' panicked at 'test executable failed:\n\nthread '<main>' panicked at 'assertion failed: `(left == right)` (left: `\"\\nHello\\nWorld\"`, right: `\"\\n    Hello\\n    World\"`)', <anon>:5\n', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustdoc/test.rs:255\n\n\n\nfailures:\n    _0\n    _1\n\ntest result: FAILED. 0 passed; 2 failed; 0 ignored; 0 measured\n```\n\n```\n\"\\n    Hello\\n    World\"\n```\n\nDid you notice it?\n## Meta\n\n`rustc --version --verbose`:\n\n```\nrustc 1.2.0-nightly (9cb7b3ffb 2015-06-01) (built 2015-05-31)\nbinary: rustc\ncommit-hash: 9cb7b3ffb6522a5fa4d3666b5859d4122c918e44\ncommit-date: 2015-06-01\nbuild-date: 2015-05-31\nhost: x86_64-apple-darwin\nrelease: 1.2.0-nightly\n```\n\n`rustdoc --version --verbose`:\n\n```\nrustdoc 1.2.0-nightly (9cb7b3ffb 2015-06-01) (built 2015-05-31)\nbinary: rustdoc\ncommit-hash: 9cb7b3ffb6522a5fa4d3666b5859d4122c918e44\ncommit-date: 2015-06-01\nbuild-date: 2015-05-31\nhost: x86_64-apple-darwin\nrelease: 1.2.0-nightly\n```\n\nBacktrace (I don't know if it'd be useful, but):\n\n```\nrunning 2 tests\ntest _1 ... FAILED\ntest _0 ... FAILED\n\nfailures:\n\n---- _1 stdout ----\n    thread '_1' panicked at 'test executable failed:\n\nthread '<main>' panicked at 'assertion failed: `(left == right)` (left: `\"\\nHello\\nWorld\"`, right: `\"\\n    Hello\\n    World\"`)', <anon>:5\nstack backtrace:\n   1:        0x100d057b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x100d0e754 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x100cc8948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x100cc974c - rt::unwind::begin_unwind_fmt::h040c464af8329e70qcw\n   5:        0x100cba5b1 - main::hfc3806f6c4ab636deaa\n   6:        0x100d96bf8 - rust_try_inner\n   7:        0x100d96be5 - rust_try\n   8:        0x100d0f1d0 - rt::lang_start::h5cc5e69c1f0d126e6pw\n   9:        0x100cbac2e - main\n', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustdoc/test.rs:255\n\nstack backtrace:\n   1:        0x109c997b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x109ca23f0 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x109c5c948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x109c5d74c - rt::unwind::begin_unwind_fmt::h040c464af8329e70qcw\n   5:        0x105fd28ee - test::runtest::h7eeaa468bba23544cJt\n   6:        0x105fd7633 - boxed::F.FnBox<A>::call_box::h15201770880915052160\n   7:        0x1062c52ff - boxed::F.FnBox<A>::call_box::h12651187332831451207\n   8:        0x1062c2af7 - rt::unwind::try::try_fn::h7876007015214846326\n   9:        0x109d2abf8 - rust_try_inner\n  10:        0x109d2abe5 - rust_try\n  11:        0x109c8c315 - rt::unwind::try::inner_try::hc500934c7d7e0757d9v\n  12:        0x1062c2d52 - boxed::F.FnBox<A>::call_box::h17944427202448439759\n  13:        0x109ca0eed - sys::thread::Thread::new::thread_start::h5ee5677e14d769eaMxv\n  14:     0x7fff870cc898 - _pthread_body\n  15:     0x7fff870cc729 - _pthread_start\n\n---- _0 stdout ----\n    thread '_0' panicked at 'test executable failed:\n\nthread '<main>' panicked at 'assertion failed: `(left == right)` (left: `\"\\nHello\\nWorld\"`, right: `\"\\n    Hello\\n    World\"`)', <anon>:5\nstack backtrace:\n   1:        0x1057357b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x10573e754 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x1056f8948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x1056f974c - rt::unwind::begin_unwind_fmt::h040c464af8329e70qcw\n   5:        0x1056e85b1 - main::h3811a6db7063b18feaa\n   6:        0x1057c6bf8 - rust_try_inner\n   7:        0x1057c6be5 - rust_try\n   8:        0x10573f1d0 - rt::lang_start::h5cc5e69c1f0d126e6pw\n   9:        0x1056e8c2e - main\n', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustdoc/test.rs:255\n\nstack backtrace:\n   1:        0x109c997b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x109ca23f0 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x109c5c948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x109c5d74c - rt::unwind::begin_unwind_fmt::h040c464af8329e70qcw\n   5:        0x105fd28ee - test::runtest::h7eeaa468bba23544cJt\n   6:        0x105fd7633 - boxed::F.FnBox<A>::call_box::h15201770880915052160\n   7:        0x1062c52ff - boxed::F.FnBox<A>::call_box::h12651187332831451207\n   8:        0x1062c2af7 - rt::unwind::try::try_fn::h7876007015214846326\n   9:        0x109d2abf8 - rust_try_inner\n  10:        0x109d2abe5 - rust_try\n  11:        0x109c8c315 - rt::unwind::try::inner_try::hc500934c7d7e0757d9v\n  12:        0x1062c2d52 - boxed::F.FnBox<A>::call_box::h17944427202448439759\n  13:        0x109ca0eed - sys::thread::Thread::new::thread_start::h5ee5677e14d769eaMxv\n  14:     0x7fff870cc898 - _pthread_body\n  15:     0x7fff870cc729 - _pthread_start\n\n\nfailures:\n    _0\n    _1\n\ntest result: FAILED. 0 passed; 2 failed; 0 ignored; 0 measured\n\nthread '<unnamed>' panicked at 'Some tests failed', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libtest/lib.rs:255\nstack backtrace:\n   1:        0x109c997b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x109ca2754 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x109c5c948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x10629d43f - rt::unwind::begin_unwind::h16661391803926304236\n   5:        0x1062a088e - test_main::h4adc4874d4cee238R0a\n   6:        0x105fc9890 - test::run::ha93ed6fea45d1225kCt\n   7:        0x105fdd955 - main_args::hfa89131528ad43189fu\n   8:        0x105fda0f5 - boxed::F.FnBox<A>::call_box::h543229893963805859\n   9:        0x105fd9257 - rt::unwind::try::try_fn::h8218846930259623130\n  10:        0x109d2abf8 - rust_try_inner\n  11:        0x109d2abe5 - rust_try\n  12:        0x109c8c315 - rt::unwind::try::inner_try::hc500934c7d7e0757d9v\n  13:        0x105fd94d7 - boxed::F.FnBox<A>::call_box::h132574837825853843\n  14:        0x109ca0eed - sys::thread::Thread::new::thread_start::h5ee5677e14d769eaMxv\n  15:     0x7fff870cc898 - _pthread_body\n  16:     0x7fff870cc729 - _pthread_start\nthread '<main>' panicked at 'called `Result::unwrap()` on an `Err` value: Any', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libcore/result.rs:729\nstack backtrace:\n   1:        0x109c997b5 - sys::backtrace::write::h6ede916059f8deceM9r\n   2:        0x109ca2754 - panicking::on_panic::ha49f13d0ffb0f10e2uw\n   3:        0x109c5c948 - rt::unwind::begin_unwind_inner::hf0bdcaef6fa2453akdw\n   4:        0x109c5d74c - rt::unwind::begin_unwind_fmt::h040c464af8329e70qcw\n   5:        0x109ca1f4c - rust_begin_unwind\n   6:        0x109cf6cb5 - panicking::panic_fmt::he351326af800e539i5B\n   7:        0x105fd8e1c - main::h7b823c409ceca183Wbu\n   8:        0x109d2abf8 - rust_try_inner\n   9:        0x109d2abe5 - rust_try\n  10:        0x109ca31d0 - rt::lang_start::h5cc5e69c1f0d126e6pw\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25944/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25944/timeline", "performed_via_github_app": null, "state_reason": "completed"}