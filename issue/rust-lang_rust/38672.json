{"url": "https://api.github.com/repos/rust-lang/rust/issues/38672", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38672/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38672/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38672/events", "html_url": "https://github.com/rust-lang/rust/issues/38672", "id": 197973840, "node_id": "MDU6SXNzdWUxOTc5NzM4NDA=", "number": 38672, "title": "stability.rs:516: encountered unmarked API (the compiler unexpectedly panicked. this is a bug.)", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-29T08:51:05Z", "updated_at": "2016-12-29T12:46:45Z", "closed_at": "2016-12-29T12:46:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n% cargo build\r\n   Compiling bug v0.1.0 (file:///home/nanosankaku/projects/bug/bug)\r\nerror: internal compiler error: /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/middle/stability.rs:516: encountered unmarked API\r\n --> src/lib.rs:1:76\r\n  |\r\n1 | pub const INIT_MUTEX: std::cell::UnsafeCell<i32> = std::cell::UnsafeCell { value: 0 };\r\n  |                                                                            ^^^^^^^^\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_errors/lib.rs:382\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: Could not compile `bug`.\r\n```\r\n\r\n% cat src/lib.rs\r\n```rust\r\npub const INIT_MUTEX: std::cell::UnsafeCell<i32> = std::cell::UnsafeCell { value: 0 };\r\n````\r\n## Meta\r\nTried nightly and beta, same error\r\n\r\n% rustc --version --verbose\r\nrustc 1.15.0-beta.1 (d9a0f0df7 2016-12-19)\r\nbinary: rustc\r\ncommit-hash: d9a0f0df7051c603011d6b60fbdd155318fc47f3\r\ncommit-date: 2016-12-19\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-beta.1\r\nLLVM version: 3.9\r\n\r\n% rustc --version --verbose\r\nrustc 1.15.0-nightly (71c06a56a 2016-12-18)\r\nbinary: rustc\r\ncommit-hash: 71c06a56a120a0d5e3b224105ee3e6754f83e5fa\r\ncommit-date: 2016-12-18\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-nightly\r\nLLVM version: 3.9\r\n\r\n`rustc --version --verbose`:\r\n\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_errors/lib.rs:382\r\nstack backtrace:\r\n   1:     0x7f643e07939a - std::sys::imp::backtrace::tracing::imp::write::hc924c01e14fdf084\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:     0x7f643e08770f - std::panicking::default_hook::{{closure}}::h3c7e4ff009c61db6\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:349\r\n   3:     0x7f643e0872ad - std::panicking::default_hook::h4684c234c8ae64c1\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:359\r\n   4:     0x7f643e087bb7 - std::panicking::rust_panic_with_hook::h03d5a3ece8e80bc6\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:553\r\n   5:     0x7f643b283b7b - std::panicking::begin_panic::had99e9b5f3114af5\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:515\r\n   6:     0x7f643b427023 - rustc::session::opt_span_bug_fmt::{{closure}}::h4ba716f3654cf892\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/obj/<panic macros>:3\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/session/mod.rs:782\r\n   7:     0x7f643b426e7c - rustc::session::opt_span_bug_fmt::h178e4a512d9654c9\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1062\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/session/mod.rs:779\r\n   8:     0x7f643b426d52 - rustc::session::span_bug_fmt::h9c6c6664f7d87df9\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/session/mod.rs:772\r\n   9:     0x7f643b405d6f - rustc::middle::stability::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::check_stability::h388c8da62cf0b6f4\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/middle/stability.rs:516\r\n  10:     0x7f643baec010 - rustc_typeck::check::FnCtxt::check_expr_struct_fields::h23d64a14be17ace9\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:3246\r\n  11:     0x7f643baf12fd - rustc_typeck::check::FnCtxt::check_expr_kind::h6728cb2fc0c0f35e\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:3410\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:3958\r\n  12:     0x7f643baee65c - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h665bf8010bc589a2\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:3462\r\n  13:     0x7f643badbc4f - rustc_typeck::check::check_const_with_type::hde77eb4865aa78e4\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:2803\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:2797\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:2790\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:1259\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:502\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/infer/mod.rs:442\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1033\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1030\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:846\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/infer/mod.rs:442\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:502\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:1249\r\n  14:     0x7f643bad5eb2 - rustc_typeck::check::check_item_type::hcd7883623c025771\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:1276\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:852\r\n  15:     0x7f643bacf9df - <rustc_typeck::check::CheckItemTypesVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_item::h941c32e1354ec13f\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:547\r\n  16:     0x7f643bad1a57 - rustc_typeck::check::check_item_types::h31bc53364132279f\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/hir/itemlikevisit.rs:80\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/dep_graph/visit.rs:45\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/hir/mod.rs:456\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/dep_graph/visit.rs:67\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/mod.rs:2681\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:583\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/session/mod.rs:232\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/check/mod.rs:581\r\n  17:     0x7f643bb3dbc0 - rustc_typeck::check_crate::habece8484d859582\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/lib.rs:345\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/util/common.rs:34\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_typeck/lib.rs:345\r\n  18:     0x7f643e40df81 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::h26fb48e320a3a494\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/driver.rs:895\r\n  19:     0x7f643e401398 - rustc_driver::driver::phase_3_run_analysis_passes::h27dce08dd080b784\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1033\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1030\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1017\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/thread/local.rs:245\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:1014\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc/ty/context.rs:782\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/driver.rs:865\r\n  20:     0x7f643e3f1162 - rustc_driver::driver::compile_input::h301204ca2777f65d\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/driver.rs:171\r\n  21:     0x7f643e436ad7 - rustc_driver::run_compiler::hc42fda54b73636c8\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/lib.rs:221\r\n  22:     0x7f643e354fd8 - std::panicking::try::do_call::h2dfbc0654fb30278\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/lib.rs:1117\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/lib.rs:137\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/librustc_driver/lib.rs:1051\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panic.rs:295\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:458\r\n  23:     0x7f643e0903da - __rust_maybe_catch_panic\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libpanic_unwind/lib.rs:98\r\n  24:     0x7f643e3762b8 - <F as alloc::boxed::FnBox<A>>::call_box::h1672b04377c8074b\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panicking.rs:434\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/panic.rs:351\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/thread/mod.rs:301\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/liballoc/boxed.rs:605\r\n  25:     0x7f643e086574 - std::sys::imp::thread::Thread::new::thread_start::h29f4c99db4339ba7\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/liballoc/boxed.rs:615\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/sys_common/thread.rs:21\r\n                        at /buildslave/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libstd/sys/unix/thread.rs:84\r\n  26:     0x7f6436f60463 - start_thread\r\n  27:     0x7f643dd509de - __clone\r\n  28:                0x0 - <unknown>\r\n```", "closed_by": {"login": "apasel422", "id": 8644784, "node_id": "MDQ6VXNlcjg2NDQ3ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apasel422", "html_url": "https://github.com/apasel422", "followers_url": "https://api.github.com/users/apasel422/followers", "following_url": "https://api.github.com/users/apasel422/following{/other_user}", "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}", "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions", "organizations_url": "https://api.github.com/users/apasel422/orgs", "repos_url": "https://api.github.com/users/apasel422/repos", "events_url": "https://api.github.com/users/apasel422/events{/privacy}", "received_events_url": "https://api.github.com/users/apasel422/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38672/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38672/timeline", "performed_via_github_app": null, "state_reason": "completed"}