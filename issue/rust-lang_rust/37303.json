{"url": "https://api.github.com/repos/rust-lang/rust/issues/37303", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37303/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37303/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37303/events", "html_url": "https://github.com/rust-lang/rust/issues/37303", "id": 184189249, "node_id": "MDU6SXNzdWUxODQxODkyNDk=", "number": 37303, "title": "On Debian using llvm 3.9 upstream packages fails to link", "user": {"login": "sylvestre", "id": 733326, "node_id": "MDQ6VXNlcjczMzMyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/733326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylvestre", "html_url": "https://github.com/sylvestre", "followers_url": "https://api.github.com/users/sylvestre/followers", "following_url": "https://api.github.com/users/sylvestre/following{/other_user}", "gists_url": "https://api.github.com/users/sylvestre/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylvestre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylvestre/subscriptions", "organizations_url": "https://api.github.com/users/sylvestre/orgs", "repos_url": "https://api.github.com/users/sylvestre/repos", "events_url": "https://api.github.com/users/sylvestre/events{/privacy}", "received_events_url": "https://api.github.com/users/sylvestre/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-10-20T10:15:44Z", "updated_at": "2016-10-21T12:33:28Z", "closed_at": "2016-10-21T12:33:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\ninfo: now are following matches for librustc_driver-*.so libraries:\nx86_64-unknown-linux-gnu/stage1/lib/librustc_driver-40393716.so\nerror: linking with `cc` failed: exit code: 1\n  |\n  = note: \"cc\" \"-Wl,--as-needed\" \"-Wl,-z,noexecstack\" \"-m64\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/bin/rustc.0.o\" \"-o\" \"x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/bin/rustc\" \"-Wl,--gc-sections\" \"-pie\" \"-Wl,-O1\" \"-nodefaultlibs\" \"-L\" \"/usr/lib/llvm-3.9/lib\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-Wl,-Bstatic\" \"-Wl,-Bdynamic\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_driver-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"syntax_ext-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_typeck-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_trans-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_save_analysis-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_resolve-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_privacy-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_plugin-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_metadata-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_passes-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_borrowck-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_mir-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_platform_intrinsics-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_lint-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_const_eval-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_incremental-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_const_math-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_data_structures-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_back-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_llvm-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rbml-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"graphviz-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"getopts-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"fmt_macros-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"flate-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"arena-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"syntax-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"rustc_errors-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"syntax_pos-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"term-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"serialize-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"log-40393716\" \"-L\" \"/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-l\" \"std-40393716\" \"-l\" \"LLVM-3.8\" \"-l\" \"stdc++\" \"-l\" \"dl\" \"-l\" \"pthread\" \"-l\" \"gcc_s\" \"-l\" \"pthread\" \"-l\" \"c\" \"-l\" \"m\" \"-l\" \"rt\" \"-l\" \"util\" \"-Wl,-rpath,$ORIGIN/../lib\" \"-Wl,-rpath,/usr/lib/rustlib/x86_64-unknown-linux-gnu/lib\" \"-Wl,--enable-new-dtags\" \"-Wl,-z,relro\" \"-l\" \"compiler-rt\"\n  = note: /build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::object::Archive::child_begin(llvm::Error&, bool) const'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `vtable for llvm::ErrorList'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::DIBuilder::createCompileUnit(unsigned int, llvm::StringRef, llvm::StringRef, llvm::StringRef, bool, llvm::StringRef, unsigned int, llvm::StringRef, llvm::DICompileUnit::DebugEmissionKind, unsigned long)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::Type::print(llvm::raw_ostream&, bool, bool) const'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::DIBuilder::createSubroutineType(llvm::DITypeRefArray, unsigned int, unsigned int)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::NewArchiveMember::getOldMember(llvm::object::Archive::Child const&, bool)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::NewArchiveMember::getFile(llvm::StringRef, bool)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::ErrorInfoBase::ID'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::cl::ParseCommandLineOptions(int, char const* const*, char const*, bool)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::errorCodeToError(std::error_code)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::createInternalizePass(std::function<bool (llvm::GlobalValue const&)>)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::writeArchive(llvm::StringRef, std::vector<llvm::NewArchiveMember, std::allocator<llvm::NewArchiveMember> >&, bool, llvm::object::Archive::Kind, bool, bool, std::unique_ptr<llvm::MemoryBuffer, std::default_delete<llvm::MemoryBuffer> >)'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::ErrorList::ID'\n/build/rustc-1.12.0+dfsg1/x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_llvm-40393716.so: undefined reference to `llvm::Module::setPIELevel(llvm::PIELevel::Level)'\ncollect2: error: ld returned 1 exit status\n\n\nerror: aborting due to previous error\n\n/build/rustc-1.12.0+dfsg1/mk/target.mk:220: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/bin/rustc' failed\n```\n\nWorking with LLVM 3.8 but fails with 3.9\n", "closed_by": {"login": "sylvestre", "id": 733326, "node_id": "MDQ6VXNlcjczMzMyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/733326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sylvestre", "html_url": "https://github.com/sylvestre", "followers_url": "https://api.github.com/users/sylvestre/followers", "following_url": "https://api.github.com/users/sylvestre/following{/other_user}", "gists_url": "https://api.github.com/users/sylvestre/gists{/gist_id}", "starred_url": "https://api.github.com/users/sylvestre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sylvestre/subscriptions", "organizations_url": "https://api.github.com/users/sylvestre/orgs", "repos_url": "https://api.github.com/users/sylvestre/repos", "events_url": "https://api.github.com/users/sylvestre/events{/privacy}", "received_events_url": "https://api.github.com/users/sylvestre/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37303/timeline", "performed_via_github_app": null, "state_reason": "completed"}