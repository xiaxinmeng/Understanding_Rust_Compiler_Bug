{"url": "https://api.github.com/repos/rust-lang/rust/issues/75804", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/75804/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/75804/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/75804/events", "html_url": "https://github.com/rust-lang/rust/issues/75804", "id": 683981021, "node_id": "MDU6SXNzdWU2ODM5ODEwMjE=", "number": 75804, "title": "\"hello world\" binary size increase in each release", "user": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1049491442, "node_id": "MDU6TGFiZWwxMDQ5NDkxNDQy", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-heavy", "name": "I-heavy", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to binary size of generated code."}, {"id": 1791937891, "node_id": "MDU6TGFiZWwxNzkxOTM3ODkx", "url": "https://api.github.com/repos/rust-lang/rust/labels/ICEBreaker-Cleanup-Crew", "name": "ICEBreaker-Cleanup-Crew", "color": "74cc28", "default": false, "description": "Helping to \"clean up\" bugs with minimal examples and bisections"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-08-22T11:33:57Z", "updated_at": "2021-02-15T14:12:55Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The binary size of \"hello world\" program increased in each release:\r\n![image](https://docs.google.com/spreadsheets/d/e/2PACX-1vQOtA1FI_zXtYKCIKoi07FfqafIEJvzjgUyMuTFFIDgZG1l4NBX6rhxJlSLvldogAeXVPLwgQXu4uqg/pubchart?oid=805282086&format=image)\r\n![image](https://docs.google.com/spreadsheets/d/e/2PACX-1vQOtA1FI_zXtYKCIKoi07FfqafIEJvzjgUyMuTFFIDgZG1l4NBX6rhxJlSLvldogAeXVPLwgQXu4uqg/pubchart?oid=1650008857&format=image)\r\n\r\n<details><summary>Detail table</summary>\r\n\r\nRust version | debug    | debug - stripped  | release   | release - stripped\r\n-------------|----------|------------------ |-----------|-------------------\r\n1.32.0 | 2382904 | 199096 | 2375720 | 199016\r\n1.40.0       | 2595400  | 215464            | 2588264   | 215384\r\n1.41.0       | 2637336  | 215464            | 2629832   | 215384\r\n1.42.0       | 2659672  | 211368            | 2652488   | 211288\r\n1.43.0       | 2729192  | 223584            | 2722128   | 223504\r\n1.44.0       | 2584120  | 248160            | 2579144   | 248080\r\n1.45.0       | 2847440  | 244064            | 2842464   | 243984\r\nbeta         | 2848152  | 244064            | 2843168   | 243984\r\nnightly      | 3210208  | 293200            | 3203712   | 293112\r\n\r\n</details>\r\n\r\n<details><summary>main.rs</summary>\r\n\r\n```rust\r\nfn main() {\r\n    println!(\"hello world\");\r\n}\r\n```\r\n</details>\r\n\r\n<details><summary>Script to reproduce</summary>\r\n\r\n```bash\r\nrustup set profile minimal\r\nrustup toolchain install 1.{40..45}.0 beta nightly\r\n\r\nRUST_DBG_FLAGS='-C debuginfo=1 -C panic=abort -C opt-level=0'\r\nRUST_REL_FLAGS='-C debuginfo=0 -C panic=abort -C opt-level=3'\r\n\r\nmkdir -p build/debug\r\nmkdir -p build/release\r\nfor ver in 1.{40..45}.0 beta nightly; do\r\n    bin_dbg=build/debug/main-$ver\r\n    bin_rel=build/release/main-$ver\r\n    rustc +$ver $RUST_DBG_FLAGS main.rs -o $bin_dbg\r\n    echo \"-- $ver\"\r\n    before=$(stat --printf=\"%s\" $bin_dbg)\r\n    strip $bin_dbg\r\n    after=$(stat --printf=\"%s\" $bin_dbg)\r\n    printf \"    dbg: %d, stripped: %d\\n\" $before $after\r\n\r\n    rustc +$ver $RUST_REL_FLAGS main.rs -o $bin_rel\r\n    before=$(stat --printf=\"%s\" $bin_rel)\r\n    strip $bin_rel\r\n    after=$(stat --printf=\"%s\" $bin_rel)\r\n    printf \"    release: %d, stripped: %d\\n\" $before $after\r\ndone\r\n\r\n# rustup toolchain uninstall 1.{40..45}.0 beta nightly\r\n```\r\n</details>\r\n\r\n### Meta\r\n\r\nbeta:\r\n```\r\nrustc 1.46.0-beta.5 (cfbc6d4cf 2020-08-21)\r\nbinary: rustc\r\ncommit-hash: cfbc6d4cf1acbac5c025acf8ed68929caa551df3\r\ncommit-date: 2020-08-21\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.46.0-beta.5\r\nLLVM version: 10.0\r\n```\r\n\r\nnightly:\r\n```\r\nrustc 1.47.0-nightly (de521cbb3 2020-08-21)\r\nbinary: rustc\r\ncommit-hash: de521cbb303c08febd9fa3755caccd4f3e491ea3\r\ncommit-date: 2020-08-21\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.47.0-nightly\r\nLLVM version: 10.0\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/75804/reactions", "total_count": 8, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 4, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/75804/timeline", "performed_via_github_app": null, "state_reason": null}