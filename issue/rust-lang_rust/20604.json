{"url": "https://api.github.com/repos/rust-lang/rust/issues/20604", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20604/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20604/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20604/events", "html_url": "https://github.com/rust-lang/rust/issues/20604", "id": 53470138, "node_id": "MDU6SXNzdWU1MzQ3MDEzOA==", "number": 20604, "title": "Associated types may not all be normalized", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-01-06T01:27:21Z", "updated_at": "2015-01-06T11:31:42Z", "closed_at": "2015-01-06T11:31:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "(or so niko told me)\n\nI believe this code should compile, but it does not compile. Trawling through some logs made Niko think that something wasn't normalized one way or the other, so opening an issue!\n\n``` rust\n#![feature(associated_types)]\n\ntrait Hasher {\n    type Output;\n    fn finish(&self) -> Self::Output;\n}\n\ntrait Hash<H: Hasher> {\n    fn hash(&self, h: &mut H);\n}\n\ntrait HashState {\n    type Hasher: Hasher;\n    fn hasher(&self) -> Self::Hasher;\n}\n\nstruct SipHasher;\nimpl Hasher for SipHasher {\n    type Output = u64;\n    fn finish(&self) -> u64 { 4 }\n}\n\nimpl Hash<SipHasher> for int {\n    fn hash(&self, h: &mut SipHasher) {}\n}\n\nstruct SipState;\nimpl HashState for SipState {\n    type Hasher = SipHasher;\n    fn hasher(&self) -> SipHasher { SipHasher }\n}\n\nstruct Map<S> {\n    s: S,\n}\n\nimpl<S> Map<S>\n    where S: HashState,\n          <S as HashState>::Hasher: Hasher<Output=u64>,\n{\n    fn foo<K>(&self) where K: Hash< <S as HashState>::Hasher> {}\n}\n\nfn foo<K: Hash<SipHasher>>(map: &Map<SipState>) {\n    map.foo();\n}\n\nfn main() {}\n\n```\n\n```\nfoo.rs:45:9: 45:14 error: type `&Map<SipState>` does not implement any method in scope named `foo`\nfoo.rs:45     map.foo();\n                  ^~~~~\nerror: aborting due to previous error\n```\n\ncc @nikomatsakis \ncc #17307\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20604/timeline", "performed_via_github_app": null, "state_reason": "completed"}