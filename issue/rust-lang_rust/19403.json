{"url": "https://api.github.com/repos/rust-lang/rust/issues/19403", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19403/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19403/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19403/events", "html_url": "https://github.com/rust-lang/rust/issues/19403", "id": 50432443, "node_id": "MDU6SXNzdWU1MDQzMjQ0Mw==", "number": 19403, "title": "libstd: io::File cannot produce CR+LF texts even on Windows", "user": {"login": "nodakai", "id": 90726, "node_id": "MDQ6VXNlcjkwNzI2", "avatar_url": "https://avatars.githubusercontent.com/u/90726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nodakai", "html_url": "https://github.com/nodakai", "followers_url": "https://api.github.com/users/nodakai/followers", "following_url": "https://api.github.com/users/nodakai/following{/other_user}", "gists_url": "https://api.github.com/users/nodakai/gists{/gist_id}", "starred_url": "https://api.github.com/users/nodakai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nodakai/subscriptions", "organizations_url": "https://api.github.com/users/nodakai/orgs", "repos_url": "https://api.github.com/users/nodakai/repos", "events_url": "https://api.github.com/users/nodakai/events{/privacy}", "received_events_url": "https://api.github.com/users/nodakai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-11-29T17:54:01Z", "updated_at": "2015-02-17T16:09:48Z", "closed_at": "2015-02-11T18:42:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is because `std::sys::fs::open()` (on Win32) is hardcoded not to pass `_O_TEXT` to MSVCRT `_open_osfhandle()` (In C, the C runtime is typically responsible for encoding the abstract \"newline\" character to platform-specific byte sequence.)\n- https://github.com/rust-lang/rust/blob/master/src/libstd/sys/windows/fs.rs#L172\n- http://msdn.microsoft.com/en-us/library/bdts1c9x.aspx `_open_osfhandle`\n\nThe symptom is, `notepad.exe` cannot correctly read text files produced by `io::File`.   It is associated to `.TXT` files on Windows by default.\n\nTo our (un?)luck, the `cmd.exe` console starts a new line with only an LF character.\n\nJava and .NET address this issue by defining utilities to specifically handle \"stream of characters/texts\" in addition to those for byte stream:\n- https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html\n- http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19403/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19403/timeline", "performed_via_github_app": null, "state_reason": "completed"}