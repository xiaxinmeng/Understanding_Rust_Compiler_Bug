{"url": "https://api.github.com/repos/rust-lang/rust/issues/23220", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23220/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23220/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23220/events", "html_url": "https://github.com/rust-lang/rust/issues/23220", "id": 60338422, "node_id": "MDU6SXNzdWU2MDMzODQyMg==", "number": 23220, "title": "Doc: closure confusion in the intro", "user": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-09T12:51:07Z", "updated_at": "2015-03-27T18:51:42Z", "closed_at": "2015-03-27T18:51:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The intro has this code example:\n\nhttps://github.com/rust-lang/rust/blob/14ce607d9b96ab3c8d5564bcddd553d6f8e175c7/src/doc/intro.md#concurrency\n\n``` rust\nuse std::thread::Thread;\n\nfn main() {\n    let guards: Vec<_> = (0..10).map(|_| {\n        Thread::scoped(|| {\n            println!(\"Hello, world!\");\n        })\n    }).collect();\n}\n```\n\n```\n7:25: 10:6 error: cannot move out of captured outer variable in an `FnMut` closure\n7     Thread::scoped(move || {\n8       numbers[i] += 1;\n9       println!(\"numbers[{}] is {}\", i, numbers[i]);\n10     });\nerror: aborting due to previous error\n```\n\n> It mentions that \"captured outer variable in an FnMut closure\". Because we declared the closure as a moving closure, and it referred to numbers, the closure will try to take ownership of the vector.\n\nI _think_ that the `FnMut` closure the error message refers to is the argument of `map`, but the text of the intro then talks about the argument of `Thread::scoped` (which is a `FnOnce`). The move happens (or would) at the creation of the inner closure, but it\u2019s the outer one that captures and can not be moved out of.\n\nWhether or not my understanding is correct, this paragraph should avoid using \u201cthe closure\u201d since there are two of them involved.\n\nCC @steveklabnik\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23220/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23220/timeline", "performed_via_github_app": null, "state_reason": "completed"}