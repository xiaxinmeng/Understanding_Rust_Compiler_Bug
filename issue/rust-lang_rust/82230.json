{"url": "https://api.github.com/repos/rust-lang/rust/issues/82230", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/82230/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/82230/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/82230/events", "html_url": "https://github.com/rust-lang/rust/issues/82230", "id": 810412992, "node_id": "MDU6SXNzdWU4MTA0MTI5OTI=", "number": 82230, "title": "`x.py test --bless` should not ignore tests", "user": {"login": "richkadel", "id": 3827298, "node_id": "MDQ6VXNlcjM4MjcyOTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3827298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richkadel", "html_url": "https://github.com/richkadel", "followers_url": "https://api.github.com/users/richkadel/followers", "following_url": "https://api.github.com/users/richkadel/following{/other_user}", "gists_url": "https://api.github.com/users/richkadel/gists{/gist_id}", "starred_url": "https://api.github.com/users/richkadel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richkadel/subscriptions", "organizations_url": "https://api.github.com/users/richkadel/orgs", "repos_url": "https://api.github.com/users/richkadel/repos", "events_url": "https://api.github.com/users/richkadel/events{/privacy}", "received_events_url": "https://api.github.com/users/richkadel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 2345380158, "node_id": "MDU6TGFiZWwyMzQ1MzgwMTU4", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-contributor-roadblock", "name": "A-contributor-roadblock", "color": "f7e101", "default": false, "description": "Area: Makes things more difficult for new contributors to rust itself"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-02-17T18:03:21Z", "updated_at": "2021-02-17T20:32:55Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some `ignore` directives in tests (such as `needs-profiler-support`) direct `compiletest` to skip over tests when certain conditions are not present.\r\n\r\nIf a compiler change also requires rebuilding \"blessed\" (expected) test results, those results may need to be rebuild, regardless of the developer's local configuration choices.\r\n\r\nFor instance, tests that include `needs-profiler-support` will be ignored if the developer has not enabled `profiler = true`. When the developer runs `x.py test --bless`, the subject tests will not run, and updated results will not be generated, but the `x.py test` run will appear to have succeeded.\r\n\r\nFor some tests that only run under a full `bors` CI run, the test will eventually fail (perhaps hours or days later), with potentially mysterious results (to the developer), since they passed locally.\r\n\r\nI suggest ignoring \"ignore\" when \"--bless\" is specified.\r\n\r\nIf the developer is unable to recreate all required configurations, the developer should at least get feedback, via error messages, about the tests that failed, and can either adjust their environment to compensate, or visually verify that their changes should not affect the failed tests (and may not require blessing them).\r\n\r\ncc: @jyn514 ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/82230/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/82230/timeline", "performed_via_github_app": null, "state_reason": null}