{"url": "https://api.github.com/repos/rust-lang/rust/issues/5516", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/5516/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/5516/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/5516/events", "html_url": "https://github.com/rust-lang/rust/issues/5516", "id": 12356353, "node_id": "MDU6SXNzdWUxMjM1NjM1Mw==", "number": 5516, "title": "getopts should use grapheme clusters for text alignment ", "user": {"login": "Kimundi", "id": 2903206, "node_id": "MDQ6VXNlcjI5MDMyMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kimundi", "html_url": "https://github.com/Kimundi", "followers_url": "https://api.github.com/users/Kimundi/followers", "following_url": "https://api.github.com/users/Kimundi/following{/other_user}", "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions", "organizations_url": "https://api.github.com/users/Kimundi/orgs", "repos_url": "https://api.github.com/users/Kimundi/repos", "events_url": "https://api.github.com/users/Kimundi/events{/privacy}", "received_events_url": "https://api.github.com/users/Kimundi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2013-03-23T13:52:45Z", "updated_at": "2015-01-21T21:33:50Z", "closed_at": "2015-01-21T21:33:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It should at minimum align to number of codepoints (characters), (and now that PR #8710 has landed, it should be doing that minimum), but the only correct thing would be to align to grapheme clusters.\n\ntest case\n\n```\nextern mod extra;\nuse extra::getopts::groups;\n\nfn main() {\n    let optgroups = ~[\n        groups::optflag(\"a\", \"apple\",        \"apple description\"),\n        groups::optflag(\"b\", \"banana\\u00AB\", \"banana description\"),\n        groups::optflag(\"c\", \"br\\xfbl\\xe9e\", \"br\\xfbl\\xe9e quite long description\"),\n        groups::optflag(\"k\", \"kiwi\\u20AC\",   \"kiwi description\"),\n        groups::optflag(\"o\", \"orange\\u2039\", \"orange description\"),\n        groups::optflag(\"r\",\n                        \"raspberry-but-making-this-option-way-too-long\",\n                        \"raspberry description is also quite long indeed longer than every other piece of text we might encounter here and thus will be automatically broken up\"),\n    ];\n    println(usage(\"Usage: fruits\", optgroups));\n}\n\n```\n\ncurrent output:\n\n```\n% rustc /tmp/issue5516.rs && /tmp/issue5516 --help\nwarning: no debug symbols in executable (-arch x86_64)\nUsage: fruits\n\nOptions:\n    -a --apple          apple description\n    -b --banana\u00ab        banana description\n    -c --br\u00fbl\u00e9e         br\u00fbl\u00e9e quite long descripti\n    -k --kiwi\u20ac          kiwi description\n    -o --orange\u2039        orange description\n    -r --raspberry-but-making-this-option-way-too-long \n                        raspberry description is also quite long indeed longer\n                        than every other piece of text we might encounter here\n                        and thus will be automatically broken up\n\n\n```\n\nNote that in addition to things failing to line up, it is also cutting off the end of the text for the br\u00fbl\u00e9e case.  That issue should also be fixed.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/5516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/5516/timeline", "performed_via_github_app": null, "state_reason": "completed"}