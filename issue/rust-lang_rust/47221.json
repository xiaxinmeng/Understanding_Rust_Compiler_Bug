{"url": "https://api.github.com/repos/rust-lang/rust/issues/47221", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47221/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47221/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47221/events", "html_url": "https://github.com/rust-lang/rust/issues/47221", "id": 286351845, "node_id": "MDU6SXNzdWUyODYzNTE4NDU=", "number": 47221, "title": "Wasm build works in debug mode, fails with --release", "user": {"login": "ndarilek", "id": 1172, "node_id": "MDQ6VXNlcjExNzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ndarilek", "html_url": "https://github.com/ndarilek", "followers_url": "https://api.github.com/users/ndarilek/followers", "following_url": "https://api.github.com/users/ndarilek/following{/other_user}", "gists_url": "https://api.github.com/users/ndarilek/gists{/gist_id}", "starred_url": "https://api.github.com/users/ndarilek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ndarilek/subscriptions", "organizations_url": "https://api.github.com/users/ndarilek/orgs", "repos_url": "https://api.github.com/users/ndarilek/repos", "events_url": "https://api.github.com/users/ndarilek/events{/privacy}", "received_events_url": "https://api.github.com/users/ndarilek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 509440702, "node_id": "MDU6TGFiZWw1MDk0NDA3MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-asmjs", "name": "O-asmjs", "color": "6e6ec0", "default": false, "description": "Target: asm.js - http://asmjs.org/"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-01-05T17:22:30Z", "updated_at": "2020-01-09T22:54:25Z", "closed_at": "2020-01-09T22:54:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm hacking on wasm-based game development in [this repository](https://gitlab.com/ndarilek/rust-wasm-gamedev). The master branch of the above repository successfully builds in debug mode on stable and nightly if I run:\r\n\r\n```\r\nexport RUSTFLAGS=\"-C link-arg=-s -C link-arg=USE_SDL=2\"\r\ncargo build --target=\"wasm32-unknown-emscripten\"\r\n```\r\n\r\nBut if I run:\r\n\r\n```\r\ncargo build --target=\"wasm32-unknown-emscripten\" --release\r\n```\r\n\r\nI get:\r\n\r\n```\r\n  = note: WARNING:root:emcc: cannot find library \"SDL2\"\r\n          WARNING:root:object /tmp/emscripten_temp_75vQ5__archive_contents/recs-c24c169ddc07da30.recs0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_75vQ5__archive_contents/recs-c24c169ddc07da30.recs0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_1RHLlw_archive_contents/alto-32a6704552f5fb58.alto0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_1RHLlw_archive_contents/alto-32a6704552f5fb58.alto0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cTzX_D_archive_contents/nphysics2d-2e16980c0c81cc7c.nphysics2d0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cTzX_D_archive_contents/nphysics2d-2e16980c0c81cc7c.nphysics2d0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_ERvIDk_archive_contents/parking_lot-c261a91d82f23854.parking_lot0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_ERvIDk_archive_contents/parking_lot-c261a91d82f23854.parking_lot0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_HwU6cy_archive_contents/owning_ref-84acb8553a658820.owning_ref0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_FgJ_7r_archive_contents/parking_lot_core-905428f789805305.parking_lot_core0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_FgJ_7r_archive_contents/parking_lot_core-905428f789805305.parking_lot_core0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Vvbc1A_archive_contents/smallvec-37f32ce66f63d893.smallvec0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_zdJvJX_archive_contents/lewton-c506aceeb5edae50.lewton0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_zdJvJX_archive_contents/lewton-c506aceeb5edae50.lewton0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_UmwnFr_archive_contents/sdl2-774c6f83df1849a0.sdl20.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_UmwnFr_archive_contents/sdl2-774c6f83df1849a0.sdl20.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_obHxWs_archive_contents/bitflags-5abdbf62d355981e.bitflags0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vLO9OM_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vLO9OM_archive_contents/num-6cfc17ceaa54ff0e.num0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_lKPc3e_archive_contents/num_iter-81eea78158cd5d73.num_iter0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_V8z0Xu_archive_contents/failure-8be8cb0c478d307e.failure0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_V8z0Xu_archive_contents/failure-8be8cb0c478d307e.failure0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_X5J0Qj_archive_contents/backtrace-747d90696f19176f.backtrace0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_X5J0Qj_archive_contents/backtrace-747d90696f19176f.backtrace0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_bSOqR2_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_bSOqR2_archive_contents/rustc_demangle-b34068dccbe1202d.rustc_demangle0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_bSOqR2_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_bSOqR2_archive_contents/rustc_demangle-b34068dccbe1202d.rustc_demangle0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Mk0hDA_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Mk0hDA_archive_contents/cfg_if-a7fd0fe9ff9fd6cb.cfg_if0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Idk1ip_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Idk1ip_archive_contents/ncollide-ebe71d9bb775f163.ncollide0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_OX3RlD_archive_contents/ncollide_pipeline-e76a47562ea4db98.ncollide_pipeline0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_OX3RlD_archive_contents/ncollide_pipeline-e76a47562ea4db98.ncollide_pipeline0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6sWI5u_archive_contents/ncollide_transformation-b4d8518a97fa9f99.ncollide_transformation0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_1fJidp_archive_contents/ncollide_procedural-a60a5c6112ce6f6a.ncollide_procedural0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_FddB5q_archive_contents/ncollide_geometry-462a72a897d83c59.ncollide_geometry0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_FddB5q_archive_contents/ncollide_geometry-462a72a897d83c59.ncollide_geometry0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6ST1nC_archive_contents/ncollide_utils-abc94fe08523afdf.ncollide_utils0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6ST1nC_archive_contents/ncollide_utils-abc94fe08523afdf.ncollide_utils0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Gp1Suq_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Gp1Suq_archive_contents/ncollide_math-8b52198f3449fffc.ncollide_math0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Gp1Suq_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_Gp1Suq_archive_contents/ncollide_math-8b52198f3449fffc.ncollide_math0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_gkSH0E_archive_contents/nalgebra-5d2c70f5540a5bc7.nalgebra0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_WshJ9q_archive_contents/matrixmultiply-b4aec5b2a99f9c2c.matrixmultiply0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_naHgoQ_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_naHgoQ_archive_contents/rawpointer-6362b3a0187cc424.rawpointer0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_GTvbTJ_archive_contents/generic_array-0df6567777d1adbd.generic_array0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_s4MY1R_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_s4MY1R_archive_contents/nodrop-e0ba5fbbf029a224.nodrop0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_8dNk_s_archive_contents/typenum-97e6ba0c00176e21.typenum0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_xJFYUb_archive_contents/rand-18dd4d115d1a7fe9.rand0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_xJFYUb_archive_contents/rand-18dd4d115d1a7fe9.rand0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_UtnKVf_archive_contents/libc-463e29423bc365b9.libc0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6EgvMV_archive_contents/alga-a30302d0f7ebf310.alga0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp__PzRUh_archive_contents/num_complex-ffa5fd74cd58485e.num_complex0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_ZxKGRu_archive_contents/approx-3ff8b90b9c8e97df.approx0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_A5jx91_archive_contents/rustc_serialize-0163f6b4ae10d21a.rustc_serialize0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_YxFwBy_archive_contents/stdweb-90c5f6e93da5b9ce.stdweb0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_YxFwBy_archive_contents/stdweb-90c5f6e93da5b9ce.stdweb0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_mDqxDr_archive_contents/serde_json-4c0e8bce188320b1.serde_json0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_bIt0ce_archive_contents/dtoa-c6fe42da0e171c9d.dtoa0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_peIAZr_archive_contents/serde-5192932ad7d38ade.serde0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_peIAZr_archive_contents/serde-5192932ad7d38ade.serde0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6pmoWB_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_6pmoWB_archive_contents/itoa-27dc9f6b2ff5bcf6.itoa0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_b4hP3b_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_b4hP3b_archive_contents/lazy_static-f20787c324f8972c.lazy_static0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_qS1Om9_archive_contents/stable_deref_trait-14823485b98f7337.stable_deref_trait0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_2EChTe_archive_contents/al_sys-fb34f5693085e370.al_sys0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_2EChTe_archive_contents/al_sys-fb34f5693085e370.al_sys0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_hXu0DU_archive_contents/ogg-52d188d37fddfa25.ogg0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_hXu0DU_archive_contents/ogg-52d188d37fddfa25.ogg0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_x_6B4P_archive_contents/byteorder-564bf00960afabb3.byteorder0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_MFQkdM_archive_contents/num_integer-804f3c47caf4d67c.num_integer0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_023egM_archive_contents/num_traits-49299b980a496015.num_traits0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_ci3nlH_archive_contents/sdl2_sys-74a498dd593ced55.sdl2_sys0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_ci3nlH_archive_contents/sdl2_sys-74a498dd593ced55.sdl2_sys0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_P6tkn2_archive_contents/std-827ddea93328ae2d.std0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_P6tkn2_archive_contents/std-827ddea93328ae2d.std0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vkeEjT_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vkeEjT_archive_contents/panic_unwind-8cb97051d8238386.panic_unwind0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vkeEjT_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_vkeEjT_archive_contents/panic_unwind-8cb97051d8238386.panic_unwind0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cEIXbe_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cEIXbe_archive_contents/unwind-25cc9b024a02d330.unwind0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cEIXbe_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_cEIXbe_archive_contents/unwind-25cc9b024a02d330.unwind0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_r8ohgK_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_r8ohgK_archive_contents/alloc_system-751808ba756769d5.alloc_system0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_r8ohgK_archive_contents/rust.metadata.bin is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_r8ohgK_archive_contents/alloc_system-751808ba756769d5.alloc_system0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_c4yBK8_archive_contents/libc-d42e80cee81b06ce.libc0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_nbpEv__archive_contents/alloc-78c21267a2dc15c1.alloc0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_nbpEv__archive_contents/alloc-78c21267a2dc15c1.alloc0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_DaXLET_archive_contents/std_unicode-0e1b544c94586415.std_unicode0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_DaXLET_archive_contents/std_unicode-0e1b544c94586415.std_unicode0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_7o8hCz_archive_contents/rand-3d7b10e850a67e89.rand0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_7o8hCz_archive_contents/rand-3d7b10e850a67e89.rand0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_aYbLv8_archive_contents/core-0c5e3d6c117f8c44.core0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_aYbLv8_archive_contents/core-0c5e3d6c117f8c44.core0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          WARNING:root:object /tmp/emscripten_temp_J55lnQ_archive_contents/compiler_builtins-bd7cc5ada1e908e0.compiler_builtins0.rust-cgu.bytecode.encoded is not valid, cannot link\r\n          \r\n          /home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:272\r\n                  throw new JS_Parse_Error(message, line, col, pos);\r\n                  ^\r\n          TypeError: (intermediate value) is not a function\r\n              at new JS_Parse_Error (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:261:21)\r\n              at js_error (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:272:15)\r\n              at croak (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:742:17)\r\n              at token_error (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:749:17)\r\n              at unexpected (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:755:17)\r\n              at Object.semicolon (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:775:51)\r\n              at prog1 (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:1314:29)\r\n              at simple_statement (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:906:35)\r\n              at /home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:816:35\r\n              at block_ (/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/eliminator/node_modules/uglify-js/lib/parse-js.js:999:32)\r\n          Traceback (most recent call last):\r\n            File \"/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/emcc\", line 13, in <module>\r\n              emcc.run()\r\n            File \"/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/emcc.py\", line 1849, in run\r\n              wasm_text_target, misc_temp_files, optimizer)\r\n            File \"/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/emcc.py\", line 2391, in do_binaryen\r\n              emit_symbol_map=emit_symbol_map)\r\n            File \"/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/shared.py\", line 2295, in minify_wasm_js\r\n              js_file = Building.js_optimizer_no_asmjs(js_file, passes)\r\n            File \"/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/shared.py\", line 2168, in js_optimizer_no_asmjs\r\n              subprocess.check_call(NODE_JS + [js_optimizer.JS_OPTIMIZER, filename] + passes, stdout=open(next, 'w'))\r\n            File \"/usr/lib64/python2.7/subprocess.py\", line 186, in check_call\r\n              raise CalledProcessError(retcode, cmd)\r\n          subprocess.CalledProcessError: Command '['/home/nolan/opt/home/nolan/opt/emsdk-portable/node/4.1.1_64bit/bin/node', '/home/nolan/opt/home/nolan/opt/emsdk-portable/emscripten/incoming/tools/js-optimizer.js', '/tmp/tmp47hhYu/tts.bc.o.js.mem.js', 'noPrintMetadata', 'AJSDCE', 'minifyWhitespace']' returned non-zero exit status 1\r\n          \r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `tts`.\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nThere are no other changes in the codebase. Not sure why it finds SDL when compiled in debug mode but fails with `--release`. I'm currently running emsdk as of late December. Not sure at what point this started, as I only recently began attempting release builds. Some initial debugging work was done at koute/cargo-web#31 but this is clearly not a cargo-web error.\r\n\r\nSorry if this is a dupe, I'm in a bit over my head with this one and don't know what to look for. :)", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47221/timeline", "performed_via_github_app": null, "state_reason": "completed"}