{"url": "https://api.github.com/repos/rust-lang/rust/issues/95494", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95494/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95494/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95494/events", "html_url": "https://github.com/rust-lang/rust/issues/95494", "id": 1186876056, "node_id": "I_kwDOAAsO6M5GvkqY", "number": 95494, "title": "[strict provenance] make panic_unwind conform", "user": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 3983786342, "node_id": "LA_kwDOAAsO6M7tc8Fm", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-strict-provenance", "name": "A-strict-provenance", "color": "f7e101", "default": false, "description": "Area: Strict provenance for raw pointers"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-03-30T19:08:40Z", "updated_at": "2023-04-05T17:43:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This issue is part of the Strict Provenance Experiment - https://github.com/rust-lang/rust/issues/95228\r\n\r\nThe [panic_unwind](https://github.com/rust-lang/rust/tree/master/library/panic_unwind/src) component is full of lots of pointer provenance crimes.\r\n\r\nIn particular, I noticed that dwarf/eh.rs is just a complete hairball of uniformly mixing pointers and integers: https://github.com/rust-lang/rust/blob/bb5c437a2ce9ccf2204c974300c5ea9eb32d3635/library/panic_unwind/src/dwarf/eh.rs#L144-L148\r\n\r\nAnd seh.rs has some sketchy stuff too:\r\n\r\nhttps://github.com/rust-lang/rust/blob/bb5c437a2ce9ccf2204c974300c5ea9eb32d3635/library/panic_unwind/src/seh.rs#L129-L134\r\n\r\nI ran into this fairly early, so these seemed like pretty overwhelmingly hard problems at the time, but with a bit of time to sleep on it I think it might be possible to fix a lot of this by just making everything be pointers by default and then if you \"notice\" something is actually an offset, only cast it to an integer at that point.\r\n\r\nIn general it's ok for integers to pretend to be pointers \"for fun\", and if anything is ever `int | ptr` the valid union of these types is `ptr`.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95494/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95494/timeline", "performed_via_github_app": null, "state_reason": null}