{"url": "https://api.github.com/repos/rust-lang/rust/issues/100262", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/100262/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100262/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/100262/events", "html_url": "https://github.com/rust-lang/rust/issues/100262", "id": 1331455484, "node_id": "I_kwDOAAsO6M5PXGX8", "number": 100262, "title": "On bin crates with both lib.rs and main.rs, recursion_limit hint is correct only for lib.rs", "user": {"login": "nappa85", "id": 7566389, "node_id": "MDQ6VXNlcjc1NjYzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/7566389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nappa85", "html_url": "https://github.com/nappa85", "followers_url": "https://api.github.com/users/nappa85/followers", "following_url": "https://api.github.com/users/nappa85/following{/other_user}", "gists_url": "https://api.github.com/users/nappa85/gists{/gist_id}", "starred_url": "https://api.github.com/users/nappa85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nappa85/subscriptions", "organizations_url": "https://api.github.com/users/nappa85/orgs", "repos_url": "https://api.github.com/users/nappa85/repos", "events_url": "https://api.github.com/users/nappa85/events{/privacy}", "received_events_url": "https://api.github.com/users/nappa85/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-08T07:32:16Z", "updated_at": "2022-08-09T06:24:00Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "On bin crates with both lib.rs and main.rs, when the compiler overflows evaluating the requirement of a type, it correctly prints an hint like\r\n```\r\n    = help: consider increasing the recursion limit by adding a `#![recursion_limit = \"256\"]` attribute to your crate (`foo`)\r\n    = note: required because it appears within the type `Foo`\r\n   [...really long list of type requirements...]\r\n```\r\n\r\nIf you put it only on main.rs, the error message doesn't change at all, so the first thing the user will think it's the directive has been put on the wrong fiile.\r\nPutting it only on lib.rs changes the error, that loses all the hints and becomes a really concise\r\n```\r\nerror: overflow representing the type `Unique<dyn futures_core::stream::Stream<Item = Result<Foo, Bar>> + Send>`\r\n\r\nerror: could not compile `foo` due to previous error\r\n```\r\n\r\nAt this point the user is lost, the solution is to put the directive on both main.rs and lib.rs, but it's not obvious, the compilerr should hint it\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/100262/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/100262/timeline", "performed_via_github_app": null, "state_reason": null}