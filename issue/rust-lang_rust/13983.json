{"url": "https://api.github.com/repos/rust-lang/rust/issues/13983", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13983/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13983/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13983/events", "html_url": "https://github.com/rust-lang/rust/issues/13983", "id": 32910666, "node_id": "MDU6SXNzdWUzMjkxMDY2Ng==", "number": 13983, "title": "rustdoc could use some LD_LIBRARY_PATH handling cleanup", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37234, "node_id": "MDU6TGFiZWwzNzIzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}, {"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-05-06T16:46:42Z", "updated_at": "2023-02-03T08:53:06Z", "closed_at": "2023-02-03T08:53:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Spawned off of #13732.\n\nMuch like our `run-make` tests, rustdoc has a problem where it sometimes wants to be using the host's `LD_LIBRARY_PATH` to resolve dynamic library dependencies, and sometimes it wants to be using the target's `LD_LIBRARY_PATH`.  (This largely comes up e.g. when running the testable code blocks embedded within rustdoc documentation blocks.)\n\nThis issue is not normally exposed under normal uses of rustdoc because most people run it against a stage2 build or a rust distribution.  The problem really only arises when running the documentation against stage1.\n\nFor the `run-make` tests, PR #13753 is taking the approach of feeding in two distinct environment variables (one for the host and one for the target) and relying on tooling within the makefile select the appropriate option.  Presumably some similar approach would work for rustdoc.\n\n(But in the short term @pnkfelix is just going to disable the incompatible uses of rustdoc for stage1 and point them at this ticket.)\n", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13983/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}