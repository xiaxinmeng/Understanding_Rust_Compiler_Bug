{"url": "https://api.github.com/repos/rust-lang/rust/issues/40687", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40687/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40687/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40687/events", "html_url": "https://github.com/rust-lang/rust/issues/40687", "id": 215563673, "node_id": "MDU6SXNzdWUyMTU1NjM2NzM=", "number": 40687, "title": "Rustdoc: Visual indentation of function return type looks funky", "user": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-03-20T21:40:37Z", "updated_at": "2017-06-13T16:35:21Z", "closed_at": "2017-06-13T16:35:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I have [a function](https://docs.rs/waltz/0.3.0/waltz/fn.extract_code_blocks.html) with this signature:\r\n\r\n```rust\r\npub fn extract_code_blocks<'md, I: Iterator<Item=Event<'md>>>(md_events: I) -> Result<Vec<CodeBlock>, Error>\r\n```\r\n\r\nSo far so good. In the original source, it's all on one line, but Rustdoc uses quite a large font, so it makes sense to split it up. The problem is with the way it tries to reformat the signature, i.e., by putting the return type directly beneath the opening bracket of the arguments:\r\n\r\n<img width=\"920\" alt=\"bildschirmfoto 2017-03-20 um 22 05 26\" src=\"https://cloud.githubusercontent.com/assets/20063/24122359/d5473bfa-0dbb-11e7-9c4c-1397c8049d46.png\">\r\n\r\nAnd while it doesn't look great on a wide screen, resizing the window makes it look just broken:\r\n\r\n<img width=\"673\" alt=\"bildschirmfoto 2017-03-20 um 22 05 31\" src=\"https://cloud.githubusercontent.com/assets/20063/24122376/e88cb9c4-0dbb-11e7-9bd7-ce6f9120245d.png\">\r\n\r\n<img width=\"485\" alt=\"bildschirmfoto 2017-03-20 um 22 05 38\" src=\"https://cloud.githubusercontent.com/assets/20063/24122377/e8aef8a4-0dbb-11e7-9196-d7d48e2f412f.png\">\r\n\r\nTo get a good idea how to format functions it might be wise to check the discussion of the fmt team in <https://github.com/rust-lang-nursery/fmt-rfcs/issues/39>, but I don't think Rustdoc has the same constraints as rustfmt.\r\n\r\nIn particular, I would render the function signature quoted above as:\r\n\r\n```rust\r\npub fn extract_code_blocks<'md, I: Iterator<Item=Event<'md>>>(\r\n    md_events: I,\r\n) -> Result<Vec<CodeBlock>, Error>\r\n```\r\n\r\nalternatively,\r\n\r\n```rust\r\npub fn extract_code_blocks<'md, I: Iterator<Item=Event<'md>>>\r\n    (md_events: I)\r\n    -> Result<Vec<CodeBlock>, Error>\r\n```\r\n\r\nor even (introducing where clauses):\r\n\r\n```rust\r\npub fn extract_code_blocks<'md, I>(md_events: I)\r\n    -> Result<Vec<CodeBlock>, Error>\r\n    where I: Iterator<Item=Event<'md>>\r\n```", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40687/timeline", "performed_via_github_app": null, "state_reason": "completed"}