{"url": "https://api.github.com/repos/rust-lang/rust/issues/48579", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48579/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48579/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48579/events", "html_url": "https://github.com/rust-lang/rust/issues/48579", "id": 300581368, "node_id": "MDU6SXNzdWUzMDA1ODEzNjg=", "number": 48579, "title": "[Clippy] internal compiler error: unexpected panic", "user": {"login": "Kibouo", "id": 25766329, "node_id": "MDQ6VXNlcjI1NzY2MzI5", "avatar_url": "https://avatars.githubusercontent.com/u/25766329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kibouo", "html_url": "https://github.com/Kibouo", "followers_url": "https://api.github.com/users/Kibouo/followers", "following_url": "https://api.github.com/users/Kibouo/following{/other_user}", "gists_url": "https://api.github.com/users/Kibouo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kibouo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kibouo/subscriptions", "organizations_url": "https://api.github.com/users/Kibouo/orgs", "repos_url": "https://api.github.com/users/Kibouo/repos", "events_url": "https://api.github.com/users/Kibouo/events{/privacy}", "received_events_url": "https://api.github.com/users/Kibouo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-27T10:53:55Z", "updated_at": "2018-02-27T11:35:29Z", "closed_at": "2018-02-27T11:35:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "<short summary of the bug>\r\n\r\n[I tried this code](https://github.com/Kibouo/particles/tree/8df6789cfba0726f644b76097239652ab59d5bbb)\r\n\r\nReproduce: clone repo, then in the root run `cargo clippy`\r\n\r\nI expected to see this happen: clippy to run over my code\r\n\r\nInstead, this happened: unexpected panic of compiler\r\n\r\n```\r\nbin: particles\r\n   Compiling either v1.4.0\r\n   Compiling winapi-build v0.1.1\r\n   Compiling scopeguard v0.3.3\r\n   Compiling bitflags v0.9.1\r\n   Compiling lazy_static v1.0.0\r\n   Compiling typenum v1.9.0\r\n   Compiling matrixmultiply v0.1.14\r\n   Compiling adler32 v1.0.2\r\n   Compiling memoffset v0.2.1\r\n   Compiling siphasher v0.2.2\r\n   Compiling dtoa v0.4.2\r\n   Compiling vulkano v0.7.2\r\n   Compiling bitflags v1.0.1\r\n   Compiling cfg-if v0.1.2\r\n   Compiling cc v1.0.4\r\n   Compiling libc v0.2.36\r\n   Compiling rawpointer v0.1.0\r\n   Compiling winapi v0.2.8\r\n   Compiling lazy_static v0.2.11\r\n   Compiling color_quant v1.0.0\r\n   Compiling pkg-config v0.3.9\r\n   Compiling serde v0.9.15\r\n   Compiling quote v0.3.15\r\n   Compiling unicode-xid v0.0.4\r\n   Compiling lzw v0.10.0\r\n   Compiling half v1.0.2\r\n   Compiling crossbeam v0.3.2\r\n   Compiling scoped_threadpool v0.1.8\r\n   Compiling num-traits v0.2.0\r\n   Compiling bitflags v0.7.0\r\n   Compiling smallvec v0.4.4\r\n   Compiling fnv v1.0.6\r\n   Compiling nodrop v0.1.12\r\n   Compiling rustc-serialize v0.3.24\r\n   Compiling approx v0.1.1\r\n   Compiling rayon-core v1.4.0\r\n   Compiling itoa v0.3.4\r\n   Compiling byteorder v1.2.1\r\n   Compiling vk-sys v0.3.3\r\n   Compiling kernel32-sys v0.2.2\r\n   Compiling xml-rs v0.6.1\r\n   Compiling inflate v0.3.4\r\n   Compiling phf_shared v0.7.21\r\n   Compiling crossbeam-utils v0.2.2\r\n   Compiling rand v0.4.2\r\n   Compiling shared_library v0.1.8\r\n   Compiling num_cpus v1.8.0\r\n   Compiling cmake v0.1.29\r\n   Compiling x11-dl v2.17.2\r\n   Compiling syn v0.10.8\r\n   Compiling gif v0.9.2\r\n   Compiling num-integer v0.1.36\r\n   Compiling num-traits v0.1.43\r\n   Compiling arrayvec v0.4.7\r\n   Compiling deflate v0.7.17\r\n   Compiling num-complex v0.1.42\r\n   Compiling wayland-scanner v0.9.10\r\n   Compiling phf v0.7.21\r\n   Compiling rand v0.3.22\r\n   Compiling glsl-to-spirv v0.1.4\r\n   Compiling num-iter v0.1.35\r\n   Compiling num-rational v0.1.42\r\n   Compiling serde_json v0.9.10\r\n   Compiling enum_primitive v0.1.1\r\n   Compiling crossbeam-epoch v0.3.0\r\n   Compiling alga v0.5.2\r\nthread 'rustc' panicked at 'assertion failed: `(left != right)`\r\n  left: `ParamEnv(Binder(ProjectionPredicate(ProjectionTy { substs: Slice([<Self as linear::vector::EuclideanSpace>::Coordinates, <Self as linear::vector::EuclideanSpace>::Real]), item_def_id: DefId(2/0:893 ~ core[4840]::ops[0]::arith[0]::Mul[0]::Output[0]) }, <Self as linear::vector::EuclideanSpace>::Coordinates)))`,\r\n right: `ParamEnv(Binder(ProjectionPredicate(ProjectionTy { substs: Slice([<Self as linear::vector::EuclideanSpace>::Coordinates, <Self as linear::vector::EuclideanSpace>::Real]), item_def_id: DefId(2/0:893 ~ core[4840]::ops[0]::arith[0]::Mul[0]::Output[0]) }, <Self as linear::vector::EuclideanSpace>::Coordinates)))`', librustc/traits/project.rs:146:17\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.26.0-nightly (bedbad611 2018-02-26) running on x86_64-unknown-linux-gnu\r\n\r\nerror: Could not compile `alga`.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`: \r\n```\r\nrustc 1.26.0-nightly (bedbad611 2018-02-26)\r\nbinary: rustc\r\ncommit-hash: bedbad61195d2eae69b43eca49c6d3e2aee8f208\r\ncommit-date: 2018-02-26\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.26.0-nightly\r\nLLVM version: 6.0\r\n```\r\n\r\nBacktrace:\r\n```\r\nstack backtrace:\r\n   0:     0x7f8bc7824ff3 - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::h92c858273beca9db\r\n                               at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1:     0x7f8bc781c534 - std::sys_common::backtrace::_print::h6cb1e7663c70c510\r\n                               at libstd/sys_common/backtrace.rs:71\r\n   2:     0x7f8bc7821c7d - std::panicking::default_hook::{{closure}}::h46fa0787be3918b6\r\n                               at libstd/sys_common/backtrace.rs:59\r\n                               at libstd/panicking.rs:206\r\n   3:     0x7f8bc7821979 - std::panicking::default_hook::h7dddf112a45a90f8\r\n                               at libstd/panicking.rs:222\r\n   4:     0x7f8bc897aa5d - core::ops::function::Fn::call::h3cb97c4162eec9f6\r\n   5:     0x7f8bc7822119 - std::panicking::rust_panic_with_hook::h42848144b6747469\r\n                               at libstd/panicking.rs:401\r\n   6:     0x7f8bc7821f02 - std::panicking::begin_panic_fmt::h14c37c5e3685a2bb\r\n                               at libstd/panicking.rs:347\r\n   7:     0x7f8bc8c8ca22 - rustc::traits::project::ProjectionTyCandidateSet::push_candidate::h2672d39becc9aba3\r\n   8:     0x7f8bc8c91012 - rustc::traits::project::opt_normalize_projection_type::h1fb7b886d286337f\r\n   9:     0x7f8bc8c8ff83 - rustc::traits::project::normalize_projection_type::hfdd96356f7e979d2\r\n  10:     0x7f8bc8c8f86c - <rustc::traits::project::AssociatedTypeNormalizer<'a, 'b, 'gcx, 'tcx> as rustc::ty::fold::TypeFolder<'gcx, 'tcx>>::fold_ty::h27356651973a3854\r\n  11:     0x7f8bc8d16e7a - rustc::ty::subst::<impl rustc::ty::fold::TypeFoldable<'tcx> for &'tcx rustc::ty::Slice<rustc::ty::subst::Kind<'tcx>>>::super_fold_with::hcb4c12f430c98df5\r\n  12:     0x7f8bc8d3ddee - rustc::ty::structural_impls::<impl rustc::ty::fold::TypeFoldable<'tcx> for rustc::ty::Predicate<'tcx>>::super_fold_with::h81d9e56dd0820402\r\n  13:     0x7f8bc8cbc4dc - rustc::traits::structural_impls::<impl rustc::ty::fold::TypeFoldable<'tcx> for rustc::traits::Obligation<'tcx, O>>::super_fold_with::h4c9a7f60e6f745db\r\n  14:     0x7f8bc8c8e432 - rustc::traits::project::normalize_with_depth::h3d391e0ed1f21835\r\n  15:     0x7f8bc8d19e82 - rustc::ty::wf::WfPredicates::normalize::{{closure}}::hc5c71bc5bb70f84c\r\n  16:     0x7f8bc8ade979 - <core::iter::FlattenCompat<I, U> as core::iter::iterator::Iterator>::next::h7b6fc964cbd4c975\r\n  17:     0x7f8bc8967bc7 - <alloc::vec::Vec<T>>::extend_desugared::h4a9cc89317e1b0b9\r\n  18:     0x7f8bc8ad4782 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T, I>>::from_iter::h09c60980fbd8ae5d\r\n  19:     0x7f8bc8d19c74 - rustc::ty::wf::predicate_obligations::h74ece49687a4a4e1\r\n  20:     0x7f8bc936b593 - rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor::check_where_clauses::h343cb02e7c27c865\r\n  21:     0x7f8bc93638b3 - rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor::check_item_well_formed::hd49e4e9035d32eeb\r\n  22:     0x7f8bc936c788 - <rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'v>>::visit_item::h2fd643ee2fb8da76\r\n  23:     0x7f8bc93d4a68 - rustc_typeck::check_crate::{{closure}}::h65bc6b2cde8fc8d8\r\n  24:     0x7f8bc93d077c - rustc_typeck::check_crate::h6a4b56b529504aab\r\n  25:     0x7f8bc9afbe99 - rustc::ty::context::TyCtxt::create_and_enter::hc45b3a73dd46ae96\r\n  26:     0x7f8bc9b6073e - rustc_driver::driver::compile_input::h60b5346f3903c44c\r\n  27:     0x7f8bc9b7ce8a - rustc_driver::run_compiler::h606ede5b4fb41a6e\r\n  28:     0x55c351d39332 - std::sys_common::backtrace::__rust_begin_short_backtrace::h05349bd197cb4a29\r\n  29:     0x55c351d3cffb - std::panicking::try::do_call::h4ff3a0b63aa97ca1\r\n  30:     0x7f8bc783abde - __rust_maybe_catch_panic\r\n                               at libpanic_unwind/lib.rs:102\r\n  31:     0x55c351d3cded - <F as alloc::boxed::FnBox<A>>::call_box::he296a72685a7aca0\r\n  32:     0x7f8bc7831f9b - std::sys::unix::thread::Thread::new::thread_start::h15b68dbc19e967f4\r\n                               at /checkout/src/liballoc/boxed.rs:793\r\n                               at libstd/sys_common/thread.rs:24\r\n                               at libstd/sys/unix/thread.rs:90\r\n  33:     0x7f8bc759f08b - start_thread\r\n  34:     0x7f8bc70bfe7e - __GI___clone\r\n  35:                0x0 - <unknown>\r\n```", "closed_by": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48579/timeline", "performed_via_github_app": null, "state_reason": "completed"}