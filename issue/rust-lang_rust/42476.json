{"url": "https://api.github.com/repos/rust-lang/rust/issues/42476", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42476/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42476/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42476/events", "html_url": "https://github.com/rust-lang/rust/issues/42476", "id": 233856060, "node_id": "MDU6SXNzdWUyMzM4NTYwNjA=", "number": 42476, "title": "1.17.0 powerpc64le: \"LLVM ERROR: Undefined temporary symbol\" after disabling optimisation", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 515028847, "node_id": "MDU6TGFiZWw1MTUwMjg4NDc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-PowerPC", "name": "O-PowerPC", "color": "6e6ec0", "default": false, "description": "Target: PowerPC processors"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-06-06T11:06:20Z", "updated_at": "2023-04-05T17:38:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Build log: https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=ppc64el&ver=1.17.0%2Bdfsg2-1&stamp=1495038619&raw=0 - but it also happens when I try to cross-compile from amd64 to ppc64el.\r\n\r\n~~~~\r\n   Compiling rustc v0.0.0 (file:///<<BUILDDIR>>/rustc-1.17.0+dfsg2/src/librustc)\r\n     Running `/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/bootstrap/debug/rustc --crate-name rustc src/librustc/lib.rs --crate-type dylib --emit=dep-info,link -C prefer-dynamic -C debug-assertions=off -C metadata=2dbabbd65e8c1fb6 -C extra-filename=-2dbabbd65e8c1fb6 --out-dir '/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps' --target powerpc64le-unknown-linux-gnu -L 'dependency=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps' -L 'dependency=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/debug/deps' --extern 'fmt_macros=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libfmt_macros-0ae3a1110c5d6a59.so' --extern 'graphviz=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libgraphviz-69f251278e17c653.so' --extern 'log=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/liblog-2d7ede29ab054d41.so' --extern 'log=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/liblog-2d7ede29ab054d41.rlib' --extern 'syntax=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libsyntax-ee039db76fa2c9bd.so' --extern 'rustc_back=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_back-d3da270de1cf5da2.so' --extern 'rustc_data_structures=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_data_structures-e81620800e45ed83.so' --extern 'syntax_pos=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libsyntax_pos-64299e60f35ddd83.so' --extern 'rustc_errors=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_errors-6033144335693d9c.so' --extern 'arena=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libarena-b26c5a582e48af8e.so' --extern 'serialize=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libserialize-2a05f301b8174a1d.so' --extern 'serialize=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libserialize-2a05f301b8174a1d.rlib' --extern 'rustc_llvm=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_llvm-ad254c719b9de2ea.so' --extern 'rustc_const_math=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_const_math-3ce64b122f5b797c.so' --extern 'rustc_bitflags=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_bitflags-af221885a3a0a71c.rlib' -C link-args=-Wl,-z,relro -L 'native=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/build/rustc_llvm-345e2146446b30f9/out' -L native=/usr/lib/llvm-3.9/lib`\r\nLLVM ERROR: Undefined temporary symbol\r\nerror: Could not compile `rustc`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/bootstrap/debug/rustc --crate-name rustc src/librustc/lib.rs --crate-type dylib --emit=dep-info,link -C prefer-dynamic -C debug-assertions=off -C metadata=2dbabbd65e8c1fb6 -C extra-filename=-2dbabbd65e8c1fb6 --out-dir /<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps --target powerpc64le-unknown-linux-gnu -L dependency=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps -L dependency=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/debug/deps --extern fmt_macros=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libfmt_macros-0ae3a1110c5d6a59.so --extern graphviz=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libgraphviz-69f251278e17c653.so --extern log=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/liblog-2d7ede29ab054d41.so --extern log=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/liblog-2d7ede29ab054d41.rlib --extern syntax=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libsyntax-ee039db76fa2c9bd.so --extern rustc_back=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_back-d3da270de1cf5da2.so --extern rustc_data_structures=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_data_structures-e81620800e45ed83.so --extern syntax_pos=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libsyntax_pos-64299e60f35ddd83.so --extern rustc_errors=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_errors-6033144335693d9c.so --extern arena=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libarena-b26c5a582e48af8e.so --extern serialize=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libserialize-2a05f301b8174a1d.so --extern serialize=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/libserialize-2a05f301b8174a1d.rlib --extern rustc_llvm=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_llvm-ad254c719b9de2ea.so --extern rustc_const_math=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_const_math-3ce64b122f5b797c.so --extern rustc_bitflags=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/deps/librustc_bitflags-af221885a3a0a71c.rlib -C link-args=-Wl,-z,relro -L native=/<<BUILDDIR>>/rustc-1.17.0+dfsg2/build/powerpc64le-unknown-linux-gnu/stage0-rustc/powerpc64le-unknown-linux-gnu/debug/build/rustc_llvm-345e2146446b30f9/out -L native=/usr/lib/llvm-3.9/lib` (exit code: 1)\r\n\r\n\r\ncommand did not execute successfully: \"/usr/bin/cargo\" \"build\" \"-j\" \"4\" \"--target\" \"powerpc64le-unknown-linux-gnu\" \"-v\" \"--frozen\" \"--features\" \" jemalloc\" \"--manifest-path\" \"/<<BUILDDIR>>/rustc-1.17.0+dfsg2/src/rustc/Cargo.toml\"\r\nexpected success, got: exit code: 101\r\n\r\n\r\nBuild completed unsuccessfully in 0:53:22\r\n~~~~\r\n\r\nThe differences between Debian and Rust LLVM are [here](https://gist.github.com/infinity0/873566481db105fea47630da88e1b632) but I couldn't see anything relevant to powerpc64le.\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42476/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42476/timeline", "performed_via_github_app": null, "state_reason": null}