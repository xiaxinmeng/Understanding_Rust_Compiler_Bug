{"url": "https://api.github.com/repos/rust-lang/rust/issues/56576", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56576/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56576/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56576/events", "html_url": "https://github.com/rust-lang/rust/issues/56576", "id": 388426944, "node_id": "MDU6SXNzdWUzODg0MjY5NDQ=", "number": 56576, "title": "1.31.0 source dist fails to build miri", "user": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 808123953, "node_id": "MDU6TGFiZWw4MDgxMjM5NTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-release", "name": "T-release", "color": "bfd4f2", "default": false, "description": "Relevant to the release subteam, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2018-12-06T22:34:13Z", "updated_at": "2018-12-08T09:57:02Z", "closed_at": "2018-12-08T09:57:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I am seeing the following failure in what should be a clean build.\r\n\r\n```console\r\n$ wget https://static.rust-lang.org/dist/rustc-1.31.0-src.tar.gz\r\n$ tar xf rustc-1.31.0-src.tar.gz\r\n$ cd rustc-1.31.0-src\r\n$ sed 's/#extended = false/extended = true/' config.toml.example > config.toml\r\n$ ./x.py build\r\n\r\n...\r\nBuilding stage2 tool miri (x86_64-unknown-linux-gnu)\r\n   Compiling num-traits v0.2.5                                                                                      \r\n   Compiling num-integer v0.1.39                                                                                    \r\n   Compiling bitflags v1.0.4                                                                                        \r\n   Compiling byteorder v1.2.3                                                                                       \r\n   Compiling time v0.1.40                                                                                           \r\n   Compiling failure v0.1.2                                                                                         \r\n   Compiling chrono v0.4.4                                                                                          \r\n   Compiling vergen v3.0.3                                                                                          \r\n   Compiling miri v0.1.0 (rustc-1.31.0-src/src/tools/miri)               \r\nerror: failed to run custom build command for `miri v0.1.0 (rustc-1.31.0-src/src/tools/miri)`\r\nprocess didn't exit successfully: `rustc-1.31.0-src/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/miri-ffcc0501a1e0abe7/build-script-build` (exit code: 101)\r\n--- stdout\r\ncargo:rustc-env=PROFILE=release\r\ncargo:rerun-if-changed=build.rs\r\ncargo:rustc-env=VERGEN_SEMVER_LIGHTWEIGHT=0.1.0\r\ncargo:rustc-env=VERGEN_TARGET_TRIPLE=x86_64-unknown-linux-gnu\r\ncargo:rustc-env=VERGEN_SHA_SHORT=\r\ncargo:rustc-env=VERGEN_SEMVER=0.1.0\r\ncargo:rustc-env=VERGEN_BUILD_TIMESTAMP=2018-12-06T22:22:03.560705685+00:00\r\ncargo:rustc-env=VERGEN_COMMIT_DATE=\r\ncargo:rustc-env=VERGEN_SHA=\r\ncargo:rustc-env=VERGEN_BUILD_DATE=2018-12-06\r\n\r\n--- stderr\r\nthread 'main' panicked at 'Unable to generate vergen keys!: Os { code: 2, kind: NotFound, message: \"No such file or directory\" }', libcore/result.rs:1009:5\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\ncommand did not execute successfully: \"rustc-1.31.0-src/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"build\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-j\" \"28\" \"--release\" \"--manifest-path\" \"rustc-1.31.0-src/src/tools/miri/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101\r\nBuild completed successfully in 0:06:23\r\n```\r\n\r\nMentioning @oli-obk in case you know of an easy fix.\r\nMentioning @zachreizner who hit this upgrading Chrome OS to Rust 1.31.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56576/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56576/timeline", "performed_via_github_app": null, "state_reason": "completed"}