{"url": "https://api.github.com/repos/rust-lang/rust/issues/30679", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30679/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30679/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30679/events", "html_url": "https://github.com/rust-lang/rust/issues/30679", "id": 124616556, "node_id": "MDU6SXNzdWUxMjQ2MTY1NTY=", "number": 30679, "title": "Allow expressions to be followed by blocks in macro arguments", "user": {"login": "LFalch", "id": 1416084, "node_id": "MDQ6VXNlcjE0MTYwODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1416084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LFalch", "html_url": "https://github.com/LFalch", "followers_url": "https://api.github.com/users/LFalch/followers", "following_url": "https://api.github.com/users/LFalch/following{/other_user}", "gists_url": "https://api.github.com/users/LFalch/gists{/gist_id}", "starred_url": "https://api.github.com/users/LFalch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LFalch/subscriptions", "organizations_url": "https://api.github.com/users/LFalch/orgs", "repos_url": "https://api.github.com/users/LFalch/repos", "events_url": "https://api.github.com/users/LFalch/events{/privacy}", "received_events_url": "https://api.github.com/users/LFalch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-01-02T23:08:30Z", "updated_at": "2020-02-20T20:00:22Z", "closed_at": "2020-02-20T20:00:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "~~Rust macros try to be hygienic, so~~To make sure you don't break Rust's syntax, it restricts what you can write after an expression, which means you can't do something like this:\n\n``` rust\nmacro_rules! do_if_true{\n    ($e:expr $b:block) => {\n        if $e $b\n        else {\n            println!(\"got false\");\n        }\n    };\n}\n```\n\nSince a block always has curly braces, I would expect an expression could be followed by a block but instead, you get this error:\n\n``` text\nerror: `$e:expr` is followed by `$b:block`, which is not allowed for `expr` fragments\n```\n\nI tested this on both stable (rustc 1.5.0 (3d7cd77e4 2015-12-04)) and nightly (rustc 1.7.0-nightly (2b8e96dad 2015-12-21)), but got the same result.\n", "closed_by": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30679/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30679/timeline", "performed_via_github_app": null, "state_reason": "completed"}