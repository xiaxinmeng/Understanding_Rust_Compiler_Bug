{"url": "https://api.github.com/repos/rust-lang/rust/issues/22314", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22314/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22314/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22314/events", "html_url": "https://github.com/rust-lang/rust/issues/22314", "id": 57673993, "node_id": "MDU6SXNzdWU1NzY3Mzk5Mw==", "number": 22314, "title": "ICE: None unwrap in trans::expr::trans_rvalue_dps_unadjusted", "user": {"login": "jshs", "id": 7040048, "node_id": "MDQ6VXNlcjcwNDAwNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7040048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jshs", "html_url": "https://github.com/jshs", "followers_url": "https://api.github.com/users/jshs/followers", "following_url": "https://api.github.com/users/jshs/following{/other_user}", "gists_url": "https://api.github.com/users/jshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jshs/subscriptions", "organizations_url": "https://api.github.com/users/jshs/orgs", "repos_url": "https://api.github.com/users/jshs/repos", "events_url": "https://api.github.com/users/jshs/events{/privacy}", "received_events_url": "https://api.github.com/users/jshs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-02-14T01:01:34Z", "updated_at": "2015-04-22T02:41:06Z", "closed_at": "2015-04-22T02:41:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiling this code:\n\n``` rust\ntrait SomeTrait { }\nstruct SomeStruct(i32);\nimpl SomeTrait for SomeStruct { }\n\nfn main() {\n    let tobj: Box<SomeTrait> = Box::new(SomeStruct(1));\n    let ptr = &*tobj as *const _;\n    println!(\"{}\", ::std::mem::size_of_val(&ptr));\n}\n```\n\nresults in the following error:\n\n```\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'called `Option::unwrap()` on a `None` value', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/option.rs:362\nstack backtrace:\n   1:     0x7feec5e19750 - sys::backtrace::write::h49b06c4e5fa1765dZTA\n   2:     0x7feec5e3e3e0 - failure::on_fail::h128a61ca90111ec2JFJ\n   3:     0x7feec5d96350 - rt::unwind::begin_unwind_inner::h142cc6242e7988934jJ\n   4:     0x7feec5d96e60 - rt::unwind::begin_unwind_fmt::h9f6d3c7c640c0421AiJ\n   5:     0x7feec5e3e240 - rust_begin_unwind\n   6:     0x7feec5e887a0 - panicking::panic_fmt::h21faf6f60b06c77cSvw\n   7:     0x7feec5e85b50 - panicking::panic::ha9020d5f11b70868Vtw\n   8:     0x7feec4af3920 - trans::expr::trans_rvalue_dps_unadjusted::he612c9f9091d08b2YZi\n   9:     0x7feec4aaa890 - trans::expr::trans_into::h9f3ed4622867868fYFh\n  10:     0x7feec4bac500 - trans::_match::mk_binding_alloca::h10325022381919103877\n  11:     0x7feec4aa9f30 - trans::base::init_local::hb32959235ca17746Cpt\n  12:     0x7feec4aaaea0 - trans::controlflow::trans_block::h7a9017bd6dd61f5cQee\n  13:     0x7feec4b76180 - trans::base::trans_closure::hbc1e838a851464b4ofu\n  14:     0x7feec4a96550 - trans::base::trans_fn::h89cdd4576220c5b2Equ\n  15:     0x7feec4a916f0 - trans::base::trans_item::h821a1d8c2f3bd0d2tPu\n  16:     0x7feec4b7d730 - trans::base::trans_crate::hbc3532ac87923bc6NMv\n  17:     0x7feec644c280 - driver::phase_4_translate_to_llvm::he2aa9fc36a75551bwPa\n  18:     0x7feec6425190 - driver::compile_input::h2199f07dd067a038Eba\n  19:     0x7feec64f6360 - run_compiler::h7807f450e003c3f65bc\n  20:     0x7feec64f49c0 - thunk::F.Invoke<A, R>::invoke::h10965480741658827823\n  21:     0x7feec64f38b0 - rt::unwind::try::try_fn::h9927690981525442750\n  22:     0x7feec5eaaa70 - rust_try_inner\n  23:     0x7feec5eaaa60 - rust_try\n  24:     0x7feec64f3b60 - thunk::F.Invoke<A, R>::invoke::h17448596242061042531\n  25:     0x7feec5e2a050 - sys::thread::thread_start::h76415ad3898ce7eaaOE\n  26:     0x7feebfe182b0 - start_thread\n  27:     0x7feec5a1e249 - __clone\n  28:                0x0 - <unknown>\n```\n\nVersion information:\n\n> rustc 1.0.0-nightly (ba2efe96a 2015-02-13 02:09:15 +0000)\n> binary: rustc\n> commit-hash: ba2efe96aeada34c1e2dc267a1a35948bdda91f8\n> commit-date: 2015-02-13 02:09:15 +0000\n> host: x86_64-unknown-linux-gnu\n> release: 1.0.0-nightly\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22314/timeline", "performed_via_github_app": null, "state_reason": "completed"}