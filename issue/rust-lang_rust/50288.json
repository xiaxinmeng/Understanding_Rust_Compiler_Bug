{"url": "https://api.github.com/repos/rust-lang/rust/issues/50288", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50288/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50288/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50288/events", "html_url": "https://github.com/rust-lang/rust/issues/50288", "id": 318492314, "node_id": "MDU6SXNzdWUzMTg0OTIzMTQ=", "number": 50288, "title": "Building the rust code in librsvg 2.42.3 fails with rust compiler panic on powerpc-linux-unknown-gnu", "user": {"login": "sajanki", "id": 3280325, "node_id": "MDQ6VXNlcjMyODAzMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/3280325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sajanki", "html_url": "https://github.com/sajanki", "followers_url": "https://api.github.com/users/sajanki/followers", "following_url": "https://api.github.com/users/sajanki/following{/other_user}", "gists_url": "https://api.github.com/users/sajanki/gists{/gist_id}", "starred_url": "https://api.github.com/users/sajanki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sajanki/subscriptions", "organizations_url": "https://api.github.com/users/sajanki/orgs", "repos_url": "https://api.github.com/users/sajanki/repos", "events_url": "https://api.github.com/users/sajanki/events{/privacy}", "received_events_url": "https://api.github.com/users/sajanki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 515028847, "node_id": "MDU6TGFiZWw1MTUwMjg4NDc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-PowerPC", "name": "O-PowerPC", "color": "6e6ec0", "default": false, "description": "Target: PowerPC processors"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-27T17:41:05Z", "updated_at": "2018-06-04T15:31:05Z", "closed_at": "2018-06-04T15:31:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I try to build librsvg 2.42.3 on powerpc-linux-unknown-gnu (my unofficial port of Slackware Linux) I get a trace.\r\n\r\nI expected the build to be successful but rustc appears to crash during the build process causing the build to fail. This looks like a problem with the rust compiler on 32-bit big-endian ppc targets.\r\n\r\nBacktrace:\r\n\r\nLive child 0x10405cf0 (/tmp/build/librsvg-2.42.3/target/release/librsvg_internals.a) PID 25687 \r\nNeed a job token; we have children\r\nLive child 0x10405cf0 (/tmp/build/librsvg-2.42.3/target/release/librsvg_internals.a) PID 25687 \r\n   Compiling libc v0.2.36\r\nthread 'rustc' panicked at 'unexpected getrandom error: Invalid argument (os error 22)', /cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.4.2/src/os.rs:130:21\r\nstack backtrace:\r\n   0:   0x33c223 - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::hb3a58eaff737b110\r\n                       at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1:   0x2fc2b3 - std::sys_common::backtrace::print::hb71ae1aa3b7afa21\r\n                       at libstd/sys_common/backtrace.rs:71\r\n                       at libstd/sys_common/backtrace.rs:59\r\n   2:   0x322453 - std::panicking::default_hook::{{closure}}::h56d96e643c7b50f5\r\n                       at libstd/panicking.rs:207\r\n   3:   0x322127 - std::panicking::default_hook::hb9c821975771e728\r\n                       at libstd/panicking.rs:223\r\n   4:   0x31f53b - core::ops::function::Fn::call::he9b119d883710ae5\r\n                       at /checkout/src/libcore/ops/function.rs:73\r\n   5: 0xf610c1db - core::ops::function::Fn::call::h34e4f804d6924b1f\r\n   6:   0x322d43 - std::panicking::rust_panic_with_hook::h5d34088f4977ec54\r\n                       at libstd/panicking.rs:403\r\n   7:   0x322a8b - std::panicking::begin_panic_fmt::h938d0b34a89a4ee2\r\n                       at libstd/panicking.rs:349\r\n   8: 0xf533fc3b - rand::os::imp::getrandom_fill_bytes::hf1399d2ae0fa6448\r\n   9: 0xf533d48f - <rand::prng::isaac::IsaacRng as rand::Rand>::rand::h70826ebfa4b0a2c6\r\n  10: 0xf533d9ef - rand::StdRng::new::h0d7a19e31210fa1e\r\n  11: 0xf533e2f7 - rand::thread_rng::THREAD_RNG_KEY::__init::hb5c157ec7e7cf832\r\n  12: 0xf533f73b - <std::thread::local::LocalKey<T>>::with::h05abd8de02ff26c5\r\n  13: 0xf533e00f - rand::thread_rng::hd51d81d733885406\r\n  14: 0xf0cdd68f - tempdir::TempDir::new::hf2ce294195c1e22b\r\n  15: 0xf0b8303b - rustc_trans::back::link::link_binary::h8e42441f01644f4c\r\n  16: 0xf0cc3c67 - <rustc_trans::LlvmTransCrate as rustc_trans_utils::trans_crate::TransCrate>::join_trans_and_link::{{closure}}::h19bedb8e12704e91\r\n  17: 0xf0cb95db - rustc::util::common::time::haf53181b9485c23f\r\n  18: 0xf0b762cf - <rustc_trans::LlvmTransCrate as rustc_trans_utils::trans_crate::TransCrate>::join_trans_and_link::h8b68bb63758d357e\r\n  19:   0x4c4c1b - rustc_driver::driver::compile_input::hac41cf70071113a3\r\n  20:   0x58bcc3 - rustc_driver::run_compiler_impl::h0a76bdb64dc5f186\r\n  21:   0x49c8d3 - syntax::with_globals::hf2c0cc5a677b63f7\r\n  22:   0x4e25df - std::sys_common::backtrace::__rust_begin_short_backtrace::h5cf029d260e6d182\r\n  23:   0x5aa1d7 - std::panicking::try::do_call::h0f6a3894848aec8a\r\n  24:   0x356173 - __rust_maybe_catch_panic\r\n                       at libpanic_unwind/lib.rs:102\r\n  25:   0x4f0223 - <F as alloc::boxed::FnBox<A>>::call_box::hb68972c8e72b2afe\r\n  26:   0x348a6f - std::sys_common::thread::start_thread::h98ff28575cf99248\r\n                       at /checkout/src/liballoc/boxed.rs:794\r\n                       at libstd/sys_common/thread.rs:24\r\n  27:   0x34ee8f - std::sys::unix::thread::Thread::new::thread_start::hea2c78355cd038d6\r\n                       at libstd/sys/unix/thread.rs:90\r\n  28: 0xf5237403 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.26.0-beta.1 (18aaa1d2c 2018-04-03) running on powerpc-unknown-linux-gnu\r\n\r\nnote: compiler flags: -C opt-level=3 --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nObtained token for child 0x103f9580 (librsvg/librsvg-enum-types.h).\r\nerror: Could not compile `libc`.\r\nwarning: build failed, waiting for other jobs to finish...\r\n\r\n[build.log](https://github.com/rust-lang/rust/files/1956067/build.log)\r\n\r\nroot@darkstar:~# rustc --version --verbose\r\nrustc 1.26.0-beta.1 (18aaa1d2c 2018-04-03)\r\nbinary: rustc\r\ncommit-hash: 18aaa1d2cd03b61567969a97d062b1407f07d9c9\r\ncommit-date: 2018-04-03\r\nhost: powerpc-unknown-linux-gnu\r\nrelease: 1.26.0-beta.1\r\nLLVM version: 6.0\r\n\r\nI am willing to help out to fix rust for 32-bit big-endian powerpc targets on linux and maybe other operating systems such as freebsd/openbsd but I am new to rustc, so that may take a while.", "closed_by": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50288/timeline", "performed_via_github_app": null, "state_reason": "completed"}