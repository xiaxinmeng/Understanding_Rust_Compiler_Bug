{"url": "https://api.github.com/repos/rust-lang/rust/issues/21942", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21942/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21942/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21942/events", "html_url": "https://github.com/rust-lang/rust/issues/21942", "id": 56572760, "node_id": "MDU6SXNzdWU1NjU3Mjc2MA==", "number": 21942, "title": "ICE: coherence failed to report ambiguity", "user": {"login": "andbass", "id": 8582554, "node_id": "MDQ6VXNlcjg1ODI1NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8582554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andbass", "html_url": "https://github.com/andbass", "followers_url": "https://api.github.com/users/andbass/followers", "following_url": "https://api.github.com/users/andbass/following{/other_user}", "gists_url": "https://api.github.com/users/andbass/gists{/gist_id}", "starred_url": "https://api.github.com/users/andbass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andbass/subscriptions", "organizations_url": "https://api.github.com/users/andbass/orgs", "repos_url": "https://api.github.com/users/andbass/repos", "events_url": "https://api.github.com/users/andbass/events{/privacy}", "received_events_url": "https://api.github.com/users/andbass/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-02-04T19:12:22Z", "updated_at": "2015-04-06T19:01:14Z", "closed_at": "2015-04-06T19:01:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm currently attempting to compile a library called nalgebra (https://github.com/sebcrozet/nalgebra), but I am met with the following ICE each time I try to compile the project:\n\n```\nCompiling nalgebra v0.2.2 (https://github.com/sebcrozet/nalgebra#39fd7c1a)\n/home/abass/.cargo/git/checkouts/nalgebra-38f5c573aa675d18/master/src/lib.rs:612:7: 612:19 error: internal compiler error: coherence failed to report ambiguity: cannot locate the impl of the trait `traits::structure::Mat<N, LV, LV>` for the type `<R as traits::geometry::RotationMatrix<N, LV, AV>>::Output`\n/home/abass/.cargo/git/checkouts/nalgebra-38f5c573aa675d18/master/src/lib.rs:612     r.to_rot_mat()\n                                                                                       ^~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:129\n\nstack backtrace:\n   1:     0x7fe43b75ae80 - sys::backtrace::write::h84a1347ec8a3d425Aru\n   2:     0x7fe43b77e4a0 - failure::on_fail::h1cb2299eb5e255ae9GB\n   3:     0x7fe43b6e92d0 - rt::unwind::begin_unwind_inner::ha34a1c7f0630f466IlB\n   4:     0x7fe438aeabf0 - rt::unwind::begin_unwind::h12804436560652988965\n   5:     0x7fe438aeab80 - diagnostic::SpanHandler::span_bug::h7782d96edbc369daAME\n   6:     0x7fe439831890 - middle::traits::error_reporting::report_fulfillment_errors::h9d98ce1dd7e3fcdeGnN\n   7:     0x7fe43ae2ea20 - check::vtable::select_all_fcx_obligations_or_error::hc5e5e8e652f479efRvb\n   8:     0x7fe43aede680 - check::check_bare_fn::h306f8ecc226858bctAm\n   9:     0x7fe43aed5e70 - check::check_item::h7d555ba822408851KTm\n  10:     0x7fe43afa4d10 - check_crate::closure.34569\n  11:     0x7fe43af9f850 - check_crate::h2469153404b647bauEA\n  12:     0x7fe43bceb710 - driver::phase_3_run_analysis_passes::h198ed79d6101094dtGa\n  13:     0x7fe43bcd22b0 - driver::compile_input::h08caf95be513bd6bBba\n  14:     0x7fe43bd9cdd0 - run_compiler::hf1a36c26381910e09ac\n  15:     0x7fe43bd9b460 - thunk::F.Invoke<A, R>::invoke::h6996223324138754953\n  16:     0x7fe43bd9a390 - rt::unwind::try::try_fn::h16059966258548481805\n  17:     0x7fe43b7e9910 - rust_try_inner\n  18:     0x7fe43b7e9900 - rust_try\n  19:     0x7fe43bd9a640 - thunk::F.Invoke<A, R>::invoke::h12998514134271589737\n  20:     0x7fe43b76aca0 - sys::thread::thread_start::h756cedb2df1b4200Pnx\n  21:     0x7fe435970460 - start_thread\n  22:     0x7fe43b379769 - clone\n  23:                0x0 - <unknown>\n\nCould not compile `nalgebra`.\n\nTo learn more, run the command again with --verbose.\n```\n\nHere is the code for the trait definition of RotationMatrix, if it helps:\n\n```\n pub trait RotationMatrix<N, LV, AV> : Rotation<AV> {\n    type Output: Mat<N, LV, LV> + Rotation<AV>;\n\n     /// Gets the rotation matrix represented by `self`.\n      fn to_rot_mat(&self) -> Self::Output;\n149 }\n```\n\nAnd lastly, here's what rustc gave me when I ran it with --version and --verbose:\n\n```\nrustc 1.0.0-nightly (eaf4c5c78 2015-02-02 15:04:54 +0000)\nbinary: rustc\ncommit-hash: eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a\ncommit-date: 2015-02-02 15:04:54 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-nightly\n```\n\nI'm pretty new to Rust, so if the issue is with the code and I do not realize it, then I apologize in advance.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21942/timeline", "performed_via_github_app": null, "state_reason": "completed"}