{"url": "https://api.github.com/repos/rust-lang/rust/issues/100233", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/100233/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100233/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/100233/events", "html_url": "https://github.com/rust-lang/rust/issues/100233", "id": 1331024656, "node_id": "I_kwDOAAsO6M5PVdMQ", "number": 100233, "title": "apfloat bug: incorrect handling of infinities in FMA", "user": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2139259423, "node_id": "MDU6TGFiZWwyMTM5MjU5NDIz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-floating-point", "name": "A-floating-point", "color": "f7e101", "default": false, "description": "Area: Floating point numbers and arithmetic"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-08-07T14:00:18Z", "updated_at": "2023-01-27T07:42:25Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "The Rust port of LLVM's apfloat has a bug in its FMA (fused-multiply-add) implementation. See https://github.com/rust-lang/miri/issues/2468#issuecomment-1207310464 for details, but basically it fails this assertion:\r\n```rust\r\n    let neg_inf: f32 = f32::NEG_INFINITY;\r\n    assert_eq!((-3.2f32).mul_add(2.4, neg_inf), neg_inf);\r\n```\r\n\r\nAFAIK we don't use apfloat FMA anywhere (Miri stopped using them to work around this bug), but this should still be tracked, and will need to be fixed before we can allow FMA in `const`.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/100233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/100233/timeline", "performed_via_github_app": null, "state_reason": null}