{"url": "https://api.github.com/repos/rust-lang/rust/issues/79054", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/79054/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/79054/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/79054/events", "html_url": "https://github.com/rust-lang/rust/issues/79054", "id": 743073306, "node_id": "MDU6SXNzdWU3NDMwNzMzMDY=", "number": 79054, "title": "Call macro error depending on the context", "user": {"login": "botika", "id": 2625545, "node_id": "MDQ6VXNlcjI2MjU1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2625545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/botika", "html_url": "https://github.com/botika", "followers_url": "https://api.github.com/users/botika/followers", "following_url": "https://api.github.com/users/botika/following{/other_user}", "gists_url": "https://api.github.com/users/botika/gists{/gist_id}", "starred_url": "https://api.github.com/users/botika/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/botika/subscriptions", "organizations_url": "https://api.github.com/users/botika/orgs", "repos_url": "https://api.github.com/users/botika/repos", "events_url": "https://api.github.com/users/botika/events{/privacy}", "received_events_url": "https://api.github.com/users/botika/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-11-14T20:24:21Z", "updated_at": "2020-11-15T18:58:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Details in https://github.com/botika/yarte/pull/195/commits/3a54fa5da4bc01d8c2f12b7eeff5bb5e332b9d42,\r\n\r\nWhen I use `ascii!`, built this way:\r\n```rust\r\nmacro_rules! ascii_builder {\r\n    ($($n:literal)+) => {\r\n        #[macro_export]\r\n        macro_rules! ascii {\r\n            $(($n) => { unsafe { Ascii::new($n) } };)+\r\n            ($t:tt) => {\r\n                compile_error!(\r\n                    concat!(\"No valid ascii token select another or report: \", stringify!($t))\r\n                );\r\n            };\r\n        }\r\n    };\r\n}\r\n\r\nascii_builder!(\r\n    b'!' b'\"' b'#' b'$' b'%' b'&' b'\\'' b'(' b')' b'*' b'+' b',' b'-' b'.' b'/' b'\\\\'  \r\n);\r\n```\r\n\r\nIt returns the compile error according to this inside or outside the crate. That is to say, in the tests it works correctly while in the crate, uncommenting the line, returns the compilation error that I have marked.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/79054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/79054/timeline", "performed_via_github_app": null, "state_reason": null}