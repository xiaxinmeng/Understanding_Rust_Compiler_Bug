{"url": "https://api.github.com/repos/rust-lang/rust/issues/35479", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/35479/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/35479/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/35479/events", "html_url": "https://github.com/rust-lang/rust/issues/35479", "id": 169824237, "node_id": "MDU6SXNzdWUxNjk4MjQyMzc=", "number": 35479, "title": "std::process::Command is inconsistent between platforms", "user": {"login": "nicka101", "id": 1499871, "node_id": "MDQ6VXNlcjE0OTk4NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1499871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicka101", "html_url": "https://github.com/nicka101", "followers_url": "https://api.github.com/users/nicka101/followers", "following_url": "https://api.github.com/users/nicka101/following{/other_user}", "gists_url": "https://api.github.com/users/nicka101/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicka101/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicka101/subscriptions", "organizations_url": "https://api.github.com/users/nicka101/orgs", "repos_url": "https://api.github.com/users/nicka101/repos", "events_url": "https://api.github.com/users/nicka101/events{/privacy}", "received_events_url": "https://api.github.com/users/nicka101/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-08-08T00:11:45Z", "updated_at": "2017-05-10T21:41:00Z", "closed_at": "2017-05-10T21:40:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using std::process::Command with a clean environment (i.e. using env_clear when building the command), the behaviour of spawn is not consistent between Windows and Unix-like OSes. On Unix-like OSes, it behaves as expected and manages to spawn the process based on its working directory, however on Windows it always returns an error with the message \"other os error\", which seems to be related to the fix for #15149 in src/libstd/sys/windows/process.rs on line 130, and it failing to handle a lack of PATH variable properly.\n\nI have confirmed that simply adding a PATH variable back after env_clear (with just the working directory for contents), does resolve the issue and allows the process to spawn.\n\nFor reference my tests were run on:\nWindows 10 - rustc 1.11.0-beta.1 (8dc253bcf 2016-07-05)\nDebian Jessie - rustc 1.10.0 (cfcb716cf 2016-07-03)\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/35479/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/35479/timeline", "performed_via_github_app": null, "state_reason": "completed"}