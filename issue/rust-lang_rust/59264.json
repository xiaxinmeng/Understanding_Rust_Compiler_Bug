{"url": "https://api.github.com/repos/rust-lang/rust/issues/59264", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59264/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59264/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59264/events", "html_url": "https://github.com/rust-lang/rust/issues/59264", "id": 421966685, "node_id": "MDU6SXNzdWU0MjE5NjY2ODU=", "number": 59264, "title": "compiletest should be built with the stage2 compiler not the stage0 compiler", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-03-17T20:07:42Z", "updated_at": "2020-01-10T23:26:21Z", "closed_at": "2020-01-10T23:26:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See #57709. Unfortunately the \"fix\" to that bug breaks the build when building using 1.31.0 and you have to unapply the patch to make it work against 1.31.0.\r\n\r\ne.g. from https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=amd64&ver=1.32.0%2Bdfsg1-1&stamp=1548672224&raw=0 :\r\n\r\n~~~~\r\nrustc command: \"LD_LIBRARY_PATH\"=\"/usr/lib:/<<BUILDDIR>>/rustc-1.32.0+dfsg1/build/x86_64-unknown-linux-gnu/stage0-bootstrap-tools/release/deps:/usr/lib\" \"/usr/bin/rustc\" \"--crate-name\" \"compiletest\" \"\r\n~~~~\r\n\r\nThe problem here is that if stage0 is 1.31.0 then the patch MUST be unapplied, if stage0 is 1.32.0 then the patch MUST be applied. Obviously we can't do both at once.\r\n\r\nHowever in both Debian and Fedora we occasionally use either the current or the previous version of rustc to build a given version of rustc, and both of these versions should work.\r\n\r\ncc @cuviper ", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59264/timeline", "performed_via_github_app": null, "state_reason": "completed"}