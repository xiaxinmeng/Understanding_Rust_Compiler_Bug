{"url": "https://api.github.com/repos/rust-lang/rust/issues/101280", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101280/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101280/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101280/events", "html_url": "https://github.com/rust-lang/rust/issues/101280", "id": 1358820580, "node_id": "I_kwDOAAsO6M5Q_fTk", "number": 101280, "title": "Stand-in lifetime names for printing HRTs doesn\u2019t avoid name collisions. ", "user": {"login": "steffahn", "id": 3986214, "node_id": "MDQ6VXNlcjM5ODYyMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3986214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steffahn", "html_url": "https://github.com/steffahn", "followers_url": "https://api.github.com/users/steffahn/followers", "following_url": "https://api.github.com/users/steffahn/following{/other_user}", "gists_url": "https://api.github.com/users/steffahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/steffahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steffahn/subscriptions", "organizations_url": "https://api.github.com/users/steffahn/orgs", "repos_url": "https://api.github.com/users/steffahn/repos", "events_url": "https://api.github.com/users/steffahn/events{/privacy}", "received_events_url": "https://api.github.com/users/steffahn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2022-09-01T13:07:10Z", "updated_at": "2022-09-26T22:38:50Z", "closed_at": "2022-09-26T22:38:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "E.g.\n```rs\nuse std::cell::Cell;\n\nfn f<'a>(f: fn(Cell<(&'a i32, &i32)>)) -> for<'l> fn(Cell<(&'l i32, &'l i32)>) {\n    f\n}\n```\nchooses the lifetime name \u201c`'r`\u201d for the fn-pointer type of the argument `f` and prints\n```\nerror[E0308]: mismatched types\n --> src/lib.rs:4:5\n  |\n3 | fn f<'a>(f: fn(Cell<(&'a i32, &i32)>)) -> for<'l> fn(Cell<(&'l i32, &'l i32)>) {\n  |                                           ------------------------------------ expected `for<'l> fn(Cell<(&'l i32, &'l i32)>)` because of return type\n4 |     f\n  |     ^ one type is more general than the other\n  |\n  = note: expected fn pointer `for<'l> fn(Cell<(&'l i32, &'l i32)>)`\n             found fn pointer `for<'r> fn(Cell<(&'a i32, &'r i32)>)`\n\nFor more information about this error, try `rustc --explain E0308`.\n```\n---\nHowever, rewriting the code into\n```rs\nuse std::cell::Cell;\ntype Ty = for<'r> fn(Cell<(&'r i32, &'r i32)>);\nfn f<'r>(f: fn(Cell<(&'r i32, &i32)>)) -> Ty {\n    f\n}\n```\ndoes ***not*** currently make the compiler reconsider the choice of \u201c`'r`\u201d in the lifetime name, resulting in an unhelpful error message\n```\nerror[E0308]: mismatched types\n --> src/lib.rs:4:5\n  |\n3 | fn f<'r>(f: fn(Cell<(&'r i32, &i32)>)) -> Ty {\n  |                                           -- expected `for<'r> fn(Cell<(&'r i32, &'r i32)>)` because of return type\n4 |     f\n  |     ^ one type is more general than the other\n  |\n  = note: expected fn pointer `for<'r> fn(Cell<(&'r i32, &'r i32)>)`\n             found fn pointer `for<'r> fn(Cell<(&'r i32, &'r i32)>)`\n```\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"b-naber\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101280/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101280/timeline", "performed_via_github_app": null, "state_reason": "completed"}