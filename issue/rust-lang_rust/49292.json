{"url": "https://api.github.com/repos/rust-lang/rust/issues/49292", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49292/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49292/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49292/events", "html_url": "https://github.com/rust-lang/rust/issues/49292", "id": 307889494, "node_id": "MDU6SXNzdWUzMDc4ODk0OTQ=", "number": 49292, "title": "Diagnostics in MIR passes are not caught with `cargo check`", "user": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-23T03:23:53Z", "updated_at": "2018-03-28T11:55:44Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I just tried to ran the compile-fail suite without trans, and these tests failed:\r\n\r\n```\r\nfailures:\r\n    [compile-fail] compile-fail/array_const_index-0.rs\r\n    [compile-fail] compile-fail/array_const_index-1.rs\r\n    [compile-fail] compile-fail/asm-src-loc.rs\r\n    [compile-fail] compile-fail/bad-intrinsic-monomorphization.rs\r\n    [compile-fail] compile-fail/cdylib-deps-must-be-static.rs\r\n    [compile-fail] compile-fail/const-err-early.rs\r\n    [compile-fail] compile-fail/const-err-multi.rs\r\n    [compile-fail] compile-fail/const-err.rs\r\n    [compile-fail] compile-fail/const-err2.rs\r\n    [compile-fail] compile-fail/const-err3.rs\r\n    [compile-fail] compile-fail/const-eval-overflow2.rs\r\n    [compile-fail] compile-fail/const-eval-overflow2b.rs\r\n    [compile-fail] compile-fail/const-eval-overflow2c.rs\r\n    [compile-fail] compile-fail/const-slice-oob.rs\r\n    [compile-fail] compile-fail/dupe-symbols-1.rs\r\n    [compile-fail] compile-fail/dupe-symbols-2.rs\r\n    [compile-fail] compile-fail/dupe-symbols-3.rs\r\n    [compile-fail] compile-fail/dupe-symbols-4.rs\r\n    [compile-fail] compile-fail/dupe-symbols-5.rs\r\n    [compile-fail] compile-fail/dupe-symbols-6.rs\r\n    [compile-fail] compile-fail/dupe-symbols-7.rs\r\n    [compile-fail] compile-fail/huge-array.rs\r\n    [compile-fail] compile-fail/huge-enum.rs\r\n    [compile-fail] compile-fail/huge-struct.rs\r\n    [compile-fail] compile-fail/impl-trait/infinite-impl-trait-issue-38064.rs\r\n    [compile-fail] compile-fail/infinite-instantiation.rs\r\n    [compile-fail] compile-fail/issue-10755.rs\r\n    [compile-fail] compile-fail/issue-11154.rs\r\n    [compile-fail] compile-fail/issue-15919.rs\r\n    [compile-fail] compile-fail/issue-17913.rs\r\n    [compile-fail] compile-fail/issue-22638.rs\r\n    [compile-fail] compile-fail/issue-26548.rs\r\n    [compile-fail] compile-fail/issue-44578.rs\r\n    [compile-fail] compile-fail/issue-8460-const.rs\r\n    [compile-fail] compile-fail/issue-8727.rs\r\n    [compile-fail] compile-fail/linkage2.rs\r\n    [compile-fail] compile-fail/linkage3.rs\r\n    [compile-fail] compile-fail/lint-exceeding-bitshifts.rs\r\n    [compile-fail] compile-fail/lint-exceeding-bitshifts2.rs\r\n    [compile-fail] compile-fail/nolink-with-link-args.rs\r\n    [compile-fail] compile-fail/non-interger-atomic.rs\r\n    [compile-fail] compile-fail/panic-runtime/abort-link-to-unwind-dylib.rs\r\n    [compile-fail] compile-fail/panic-runtime/libtest-unwinds.rs\r\n    [compile-fail] compile-fail/panic-runtime/transitive-link-a-bunch.rs\r\n    [compile-fail] compile-fail/panic-runtime/two-panic-runtimes.rs\r\n    [compile-fail] compile-fail/panic-runtime/want-abort-got-unwind.rs\r\n    [compile-fail] compile-fail/panic-runtime/want-abort-got-unwind2.rs\r\n    [compile-fail] compile-fail/panic-runtime/want-unwind-got-abort.rs\r\n    [compile-fail] compile-fail/panic-runtime/want-unwind-got-abort2.rs\r\n    [compile-fail] compile-fail/recursion.rs\r\n    [compile-fail] compile-fail/required-lang-item.rs\r\n    [compile-fail] compile-fail/rmeta_lib.rs\r\n    [compile-fail] compile-fail/simd-intrinsic-generic-arithmetic.rs\r\n    [compile-fail] compile-fail/simd-intrinsic-generic-cast.rs\r\n    [compile-fail] compile-fail/simd-intrinsic-generic-comparison.rs\r\n    [compile-fail] compile-fail/simd-intrinsic-generic-elements.rs\r\n    [compile-fail] compile-fail/simd-intrinsic-generic-reduction.rs\r\n    [compile-fail] compile-fail/simd-type-generic-monomorphisation.rs\r\n    [compile-fail] compile-fail/symbol-names/basic.rs\r\n    [compile-fail] compile-fail/symbol-names/impl1.rs\r\n    [compile-fail] compile-fail/type_length_limit.rs\r\n```\r\n\r\nAll of those happens somewhere inside librustc_mir, most of them being monomorphization. This corresponds to `translation item collection` pass, which takes nontrivial amount of time.\r\n\r\nThough, we should to try to evaluate things like struct layout, symbols even when we're doing `check` to catch all kind of errors.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49292/timeline", "performed_via_github_app": null, "state_reason": null}