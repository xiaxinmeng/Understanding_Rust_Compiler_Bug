{"url": "https://api.github.com/repos/rust-lang/rust/issues/98248", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98248/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98248/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98248/events", "html_url": "https://github.com/rust-lang/rust/issues/98248", "id": 1275953997, "node_id": "I_kwDOAAsO6M5MDYNN", "number": 98248, "title": "Get rid of doc(primitive)", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-06-19T04:57:22Z", "updated_at": "2022-08-01T00:47:10Z", "closed_at": "2022-08-01T00:47:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I was chatting with @compiler-errors on twitter about https://github.com/rust-lang/rust/pull/87073. In retrospect I think the whole thing was overcomplicated and we can get the equivalent behavior much more simply by treating documentation on the re-exports in core::primitive as docs for the primitive items themselves, just like for normal re-exports.\r\n\r\nThis does mean we have to do something like\r\n```rust\r\npub use core::primitive::usize;\r\npub use core::primitive::isize;\r\n// ...\r\n```\r\nin std::primitive rather than just `use core::primitive::*;`. But that seems pretty simple compared to all the current special casing.\r\n\r\nThe last thing to deal with here is overwriting the docs instead of appending - I think that would need a new nightly rustdoc feature, but it would be pretty simple to implement, basically just an `if` condition in `try_inline` for this line: https://github.com/rust-lang/rust/blob/3b98c08288528c243973a54934e4be75bcf20c31/src/librustdoc/clean/inline.rs#L304\r\n\r\nSo, an overview of all that:\r\n1. Treat docs on re-exports of primitives as docs for the primitive themselves. This should probably be behind a feature gate.\r\n2. Add a way to overwrite docs instead of appending in rustdoc, rather than special casing primitives only. This is probably useful just on its own, but should still be feature gated at first.\r\n3. Remove all the `mod bool` hackery in std and rustdoc; add docs to the re-exports in `core::primitive`.\r\n\r\n@rust-lang/rustdoc I don't plan to work on this, but does it make sense / sound like a good idea?", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98248/reactions", "total_count": 3, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98248/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}