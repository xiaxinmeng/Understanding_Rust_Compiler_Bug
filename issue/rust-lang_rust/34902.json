{"url": "https://api.github.com/repos/rust-lang/rust/issues/34902", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34902/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34902/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34902/events", "html_url": "https://github.com/rust-lang/rust/issues/34902", "id": 166138307, "node_id": "MDU6SXNzdWUxNjYxMzgzMDc=", "number": 34902, "title": "Bit-for-bit deterministic / reproducible builds", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 1508600909, "node_id": "MDU6TGFiZWwxNTA4NjAwOTA5", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-reproducibility", "name": "A-reproducibility", "color": "f7e101", "default": false, "description": "Area: Reproducible / Deterministic builds"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 76, "created_at": "2016-07-18T16:40:21Z", "updated_at": "2020-08-10T05:29:30Z", "closed_at": "2020-08-06T04:00:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "It would be good if rustc could generate bit-for-bit reproducible results, even in the presence of minor system environment differences. [Currently](https://tests.reproducible-builds.org/debian/rb-pkg/unstable/amd64/rustc.html) we have quite a large diff: e.g. see [txt diff for 1.9.0](https://tests.reproducible-builds.org/debian/dbdtxt/unstable/amd64/rustc_1.9.0+dfsg1-1.diffoscope.txt) or perhaps [txt diff for 1.10.0](https://tests.reproducible-builds.org/debian/dbdtxt/unstable/amd64/rustc_1.10.0+dfsg1-1.diffoscope.txt) a few days after I'm posting this. (You might want to \"save link as\" instead of displaying it directly in the browser.)\n\nMuch of the diff output is due to build-id differences, which can be ignored since they are caused by other deeper issues and will go away once these deeper issues are fixed. One example of a deeper issue is this:\n\n```\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 ./usr/lib/i386-linux-gnu/librustc_data_structures-e8edd0fd.so\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 readelf --wide --file-header {}\n\u2502   \u2502   \u2502   \u2502   \u2502 @@ -6,15 +6,15 @@\n\u2502   \u2502   \u2502   \u2502   \u2502    OS/ABI:                            UNIX - System V\n\u2502   \u2502   \u2502   \u2502   \u2502    ABI Version:                       0\n\u2502   \u2502   \u2502   \u2502   \u2502    Type:                              DYN (Shared object file)\n\u2502   \u2502   \u2502   \u2502   \u2502    Machine:                           Intel 80386\n\u2502   \u2502   \u2502   \u2502   \u2502    Version:                           0x1\n\u2502   \u2502   \u2502   \u2502   \u2502    Entry point address:               0x4620\n\u2502   \u2502   \u2502   \u2502   \u2502    Start of program headers:          52 (bytes into file)\n\u2502   \u2502   \u2502   \u2502   \u2502 -  Start of section headers:          338784 (bytes into file)\n\u2502   \u2502   \u2502   \u2502   \u2502 +  Start of section headers:          338780 (bytes into file)\n\u2502   \u2502   \u2502   \u2502   \u2502    Flags:                             0x0\n\u2502   \u2502   \u2502   \u2502   \u2502    Size of this header:               52 (bytes)\n\u2502   \u2502   \u2502   \u2502   \u2502    Size of program headers:           32 (bytes)\n\u2502   \u2502   \u2502   \u2502   \u2502    Number of program headers:         8\n\u2502   \u2502   \u2502   \u2502   \u2502    Size of section headers:           40 (bytes)\n\u2502   \u2502   \u2502   \u2502   \u2502    Number of section headers:         30\n\u2502   \u2502   \u2502   \u2502   \u2502    Section header string table index: 29\n\u2502   \u2502   \u2502   \u2502   \u251c\u2500\u2500 readelf --wide --program-header {}\n```\n\n[Here](https://tests.reproducible-builds.org/debian/index_variations.html) are the system variations that might be causing these issues. I myself am not that familiar with ELF, but perhaps someone else here would know why the section header is 4 bytes later in the first vs second builds.\n", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34902/reactions", "total_count": 65, "+1": 54, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 11, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34902/timeline", "performed_via_github_app": null, "state_reason": "completed"}