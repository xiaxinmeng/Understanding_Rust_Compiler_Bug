{"url": "https://api.github.com/repos/rust-lang/rust/issues/6865", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6865/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6865/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6865/events", "html_url": "https://github.com/rust-lang/rust/issues/6865", "id": 15007561, "node_id": "MDU6SXNzdWUxNTAwNzU2MQ==", "number": 6865, "title": "Manually calling trait function from other crate causes ICE", "user": {"login": "DoctorAlpaca", "id": 1626428, "node_id": "MDQ6VXNlcjE2MjY0Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1626428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DoctorAlpaca", "html_url": "https://github.com/DoctorAlpaca", "followers_url": "https://api.github.com/users/DoctorAlpaca/followers", "following_url": "https://api.github.com/users/DoctorAlpaca/following{/other_user}", "gists_url": "https://api.github.com/users/DoctorAlpaca/gists{/gist_id}", "starred_url": "https://api.github.com/users/DoctorAlpaca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DoctorAlpaca/subscriptions", "organizations_url": "https://api.github.com/users/DoctorAlpaca/orgs", "repos_url": "https://api.github.com/users/DoctorAlpaca/repos", "events_url": "https://api.github.com/users/DoctorAlpaca/events{/privacy}", "received_events_url": "https://api.github.com/users/DoctorAlpaca/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-05-31T18:25:59Z", "updated_at": "2013-06-02T04:10:08Z", "closed_at": "2013-06-02T04:10:08Z", "author_association": "NONE", "active_lock_reason": null, "body": "These two files cause an ICE:\n\n```\n// foo.rs\n#[link(name = \"foo\", vers = \"1.0\")];\n#[crate_type = \"lib\"];\n\npub trait Greeter {\n    pub fn greet(&self);\n}\n\npub struct NumberGreeter {\n    a: int\n}\nimpl Greeter for NumberGreeter {\n    fn greet(&self) { std::io::println(fmt!(\"Hello, %i!\", self.a)); }\n}\n\n// test.rs\nextern mod foo;\n\nfn main() {\n    let g = foo::NumberGreeter { a: 3 };\n    foo::Greeter::greet(g);\n}\n```\n\nOutput:\n\n```\n$ rustc foo.rs\n$ RUST_LOG=rustc=1,::rt::backtrace rustc test.rs -L .\nrust: ~\"failed to find block with tag 12\"\nrust: task failed at 'explicit failure', /build/rust-incoming-git/src/rust/src/libextra/ebml.rs:204\n/usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f89fda04bcb]\n/usr/lib/librustrt.so(+0x2b081)[0x7f89fda16081]\n/usr/lib/librustrt.so(upcall_fail+0x198)[0x7f89fda06bc8]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_17_bdd0fd58907ecc496_07preE+0x366)[0x7f89ffdff0c6]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x1c2992)[0x7f89ffdff992]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x1c2941)[0x7f89ffdff941]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x7e656)[0x7f89ffcbb656]\n/usr/lib/libextra-4782a756585a81-0.7-pre.so(_ZN4ebml6reader7get_doc16_773f51e14cfb1cf6_07preE+0x2c0)[0x7f89ff7baef0]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xd1f13e)[0x7f89fe95913e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN8metadata7decoder9item_type17_ec3419b7806188186_07preE+0x9b)[0x7f89fe95985b]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN8metadata7decoder8get_type16_c2228267d7a1e5d6_07preE+0xda)[0x7f89fe95f60a]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN8metadata7csearch8get_type17_6e1364c78614b9176_07preE+0x16d)[0x7f89fde6ee3d]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x524f1e)[0x7f89fe15ef1e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle2ty16lookup_item_type17_6e1364c78614b9176_07preE+0x6d9)[0x7f89fdd87789]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check30ty_param_bounds_and_ty_for_def17_866090de7172cb286_07preE+0x316)[0x7f89fe3beec6]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check23check_expr_with_unifier17_7c7049a11bf1107d6_07preE+0xa18d)[0x7f89fe3823ed]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check10check_expr17_7e31961a3c21a4596_07preE+0xb7)[0x7f89fe3a46f7]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check23check_expr_with_unifier17_7c7049a11bf1107d6_07preE+0x53e7)[0x7f89fe37d647]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check10check_expr17_7e31961a3c21a4596_07preE+0xb7)[0x7f89fe3a46f7]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check10check_stmt16_ebe5585d7823b456_07preE+0x2dd)[0x7f89fe3c7b8d]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x78f94a)[0x7f89fe3c994a]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x1b9dfb)[0x7f89fddf3dfb]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x78e669)[0x7f89fe3c8669]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check25check_block_with_expected17_8c2cc7ba3f33507c6_07preE+0x32e)[0x7f89fe32e96e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check8check_fn17_cad51265fe34e7166_07preE+0x1b56)[0x7f89fe32d466]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check13check_bare_fn15_7fcb80fdd13b3d6_07preE+0x1f4)[0x7f89fe32b3b4]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check10check_item17_652b98865639a38f6_07preE+0x9b8)[0x7f89fe329e18]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x6ef2b9)[0x7f89fe3292b9]\n/usr/lib/libsyntax-db358e1e4f18873e-0.7-pre.so(+0x1409f8)[0x7f89ff03e9f8]\n/usr/lib/libsyntax-db358e1e4f18873e-0.7-pre.so(+0xedc9e)[0x7f89fefebc9e]\n/usr/lib/libsyntax-db358e1e4f18873e-0.7-pre.so(+0x7bc6b)[0x7f89fef79c6b]\n/usr/lib/libsyntax-db358e1e4f18873e-0.7-pre.so(+0xedb08)[0x7f89fefebb08]\n/usr/lib/libsyntax-db358e1e4f18873e-0.7-pre.so(+0x14031d)[0x7f89ff03e31d]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x367aec)[0x7f89fdfa1aec]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck5check16check_item_types17_61ca3b4993c45ec46_07preE+0x434)[0x7f89fe329074]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x91973e)[0x7f89fe55373e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0x91934d)[0x7f89fe55334d]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6middle6typeck11check_crate15_9ba0502a48787d6_07preE+0x2de)[0x7f89fe55008e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6driver6driver12compile_rest17_e22d716d87a8ddff6_07preE+0x1885)[0x7f89fe9989c5]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6driver6driver12compile_upto15_ca4bfd79cad62b6_07preE+0x1a5)[0x7f89fe99eaf5]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN6driver6driver13compile_input17_ec2c213e98ad63496_07preE+0x105)[0x7f89fe99ef85]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN12run_compiler17_af5fd37f675e80386_07preE+0x5fcd)[0x7f89fe9e2ecd]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xdd133e)[0x7f89fea0b33e]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xdcdbd6)[0x7f89fea07bd6]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xdbf58c)[0x7f89fe9f958c]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xdd1614)[0x7f89fea0b614]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x16c3c2)[0x7f89ffda93c2]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x24ad8c)[0x7f89ffe87d8c]\n/usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x22)[0x7f89fda05542]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /build/rust-incoming-git/src/rust/src/librustc/rustc.rc:400\n/usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f89fda04bcb]\n/usr/lib/librustrt.so(+0x2b081)[0x7f89fda16081]\n/usr/lib/librustrt.so(upcall_fail+0x198)[0x7f89fda06bc8]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_17_bdd0fd58907ecc496_07preE+0x366)[0x7f89ffdff0c6]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x1c2992)[0x7f89ffdff992]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x1c2941)[0x7f89ffdff941]\n/usr/lib/libstd-c3ca5d77d81b46c1-0.7-pre.so(+0x7e656)[0x7f89ffcbb656]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN7monitor17_e75279d14384c68f6_07preE+0x15e7)[0x7f89fe9e5867]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(+0xdd1614)[0x7f89fea0b614]\n/usr/lib/librustc-e786add3fc752ef5-0.7-pre.so(_ZN4main17_97e178e84d833ffa6_07preE+0x75)[0x7f89fea0b275]\nrustc(_rust_main+0x2e)[0x400bfe]\n/usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x22)[0x7f89fda05542]\nrust: domain main @0x21a0c80 root task failed\n```\n", "closed_by": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6865/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6865/timeline", "performed_via_github_app": null, "state_reason": "completed"}