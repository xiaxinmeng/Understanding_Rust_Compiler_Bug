{"url": "https://api.github.com/repos/rust-lang/rust/issues/67141", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/67141/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/67141/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/67141/events", "html_url": "https://github.com/rust-lang/rust/issues/67141", "id": 534485673, "node_id": "MDU6SXNzdWU1MzQ0ODU2NzM=", "number": 67141, "title": "rustc 1.39 crashed when compile code which using an unknown attribute", "user": {"login": "flier", "id": 61618, "node_id": "MDQ6VXNlcjYxNjE4", "avatar_url": "https://avatars.githubusercontent.com/u/61618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flier", "html_url": "https://github.com/flier", "followers_url": "https://api.github.com/users/flier/followers", "following_url": "https://api.github.com/users/flier/following{/other_user}", "gists_url": "https://api.github.com/users/flier/gists{/gist_id}", "starred_url": "https://api.github.com/users/flier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flier/subscriptions", "organizations_url": "https://api.github.com/users/flier/orgs", "repos_url": "https://api.github.com/users/flier/repos", "events_url": "https://api.github.com/users/flier/events{/privacy}", "received_events_url": "https://api.github.com/users/flier/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-12-08T03:17:08Z", "updated_at": "2019-12-11T08:11:50Z", "closed_at": "2019-12-11T08:11:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "rustc crashed when compile code which using an unknown attribute\r\n\r\nI tried this code:\r\n\r\n```rust\r\n/// Client request to connect to Server\r\n#[repr(transparent)]\r\n#[derive(Clone, Debug, PartialEq, Deref, DerefMut)]\r\npub struct Connect<'a, P>(\r\n    #[deref]\r\n    #[deref_mut]\r\n    packet::Connect<'a>,\r\n    PhantomData<P>,\r\n);\r\n\r\n```\r\n\r\nI expected to see this happen: \r\n\r\na compile warning \r\n```\r\nerror: cannot determine resolution for the derive macro `Deref`\r\n  --> mqtt-proto/src/connect.rs:38:35\r\n   |\r\n38 | #[derive(Clone, Debug, PartialEq, Deref, DerefMut)]\r\n   |                                   ^^^^^\r\n   |\r\n   = note: import resolution is stuck, try simplifying macro imports\r\n```\r\n\r\nInstead, this happened: <explanation>\r\n\r\nrustc crashed\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.39.0 (4560ea788 2019-11-04)\r\nbinary: rustc\r\ncommit-hash: 4560ea788cb760f0a34127156c78e2552949f734\r\ncommit-date: 2019-11-04\r\nhost: x86_64-apple-darwin\r\nrelease: 1.39.0\r\nLLVM version: 9.0\r\n```\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'no entry found for key', src/libcore/option.rs:1190:5\r\nstack backtrace:\r\n   0:        0x1044df165 - <unknown>\r\n   1:        0x104515e10 - <unknown>\r\n   2:        0x1044d27bb - <unknown>\r\n   3:        0x1044e34aa - <unknown>\r\n   4:        0x1044e31b5 - <unknown>\r\n   5:        0x10544c762 - <unknown>\r\n   6:        0x1044e3ce2 - <unknown>\r\n   7:        0x1044e374d - <unknown>\r\n   8:        0x1044e3649 - <unknown>\r\n   9:        0x10450f3bf - <unknown>\r\n  10:        0x10450f4ce - <unknown>\r\n  11:        0x106746a19 - <unknown>\r\n  12:        0x1057fccdf - <unknown>\r\n  13:        0x1058244d0 - <unknown>\r\n  14:        0x106e13fa5 - <unknown>\r\n  15:        0x106e114da - <unknown>\r\n  16:        0x106e0c4f3 - <unknown>\r\n  17:        0x10552205c - <unknown>\r\n  18:        0x10551c30d - <unknown>\r\n  19:        0x1054e2032 - <unknown>\r\n  20:        0x1055573a2 - <unknown>\r\n  21:        0x10552ad17 - <unknown>\r\n  22:        0x1054def35 - <unknown>\r\n  23:        0x1054c8120 - <unknown>\r\n  24:        0x105593eec - <unknown>\r\n  25:        0x10541c062 - <unknown>\r\n  26:        0x10544e284 - <unknown>\r\n  27:        0x1054525c2 - <unknown>\r\n  28:        0x10546b765 - <unknown>\r\n  29:        0x1053ead1d - <unknown>\r\n  30:        0x1044f2f8f - <unknown>\r\n  31:        0x10540ff97 - <unknown>\r\n  32:        0x1044c500e - <unknown>\r\n  33:        0x1044f1d9e - <unknown>\r\n  34:     0x7fff6abaad36 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n```", "closed_by": {"login": "flier", "id": 61618, "node_id": "MDQ6VXNlcjYxNjE4", "avatar_url": "https://avatars.githubusercontent.com/u/61618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flier", "html_url": "https://github.com/flier", "followers_url": "https://api.github.com/users/flier/followers", "following_url": "https://api.github.com/users/flier/following{/other_user}", "gists_url": "https://api.github.com/users/flier/gists{/gist_id}", "starred_url": "https://api.github.com/users/flier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flier/subscriptions", "organizations_url": "https://api.github.com/users/flier/orgs", "repos_url": "https://api.github.com/users/flier/repos", "events_url": "https://api.github.com/users/flier/events{/privacy}", "received_events_url": "https://api.github.com/users/flier/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/67141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/67141/timeline", "performed_via_github_app": null, "state_reason": "completed"}