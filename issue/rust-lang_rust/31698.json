{"url": "https://api.github.com/repos/rust-lang/rust/issues/31698", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31698/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31698/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31698/events", "html_url": "https://github.com/rust-lang/rust/issues/31698", "id": 133915005, "node_id": "MDU6SXNzdWUxMzM5MTUwMDU=", "number": 31698, "title": "rustc crash in nightly from 2016-02-16", "user": {"login": "mischief", "id": 1487996, "node_id": "MDQ6VXNlcjE0ODc5OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1487996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mischief", "html_url": "https://github.com/mischief", "followers_url": "https://api.github.com/users/mischief/followers", "following_url": "https://api.github.com/users/mischief/following{/other_user}", "gists_url": "https://api.github.com/users/mischief/gists{/gist_id}", "starred_url": "https://api.github.com/users/mischief/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mischief/subscriptions", "organizations_url": "https://api.github.com/users/mischief/orgs", "repos_url": "https://api.github.com/users/mischief/repos", "events_url": "https://api.github.com/users/mischief/events{/privacy}", "received_events_url": "https://api.github.com/users/mischief/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-02-16T08:31:17Z", "updated_at": "2017-01-26T19:21:42Z", "closed_at": "2017-01-26T16:45:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "hi, i have updated to rustc nightly from 2016-02-16. rustc crashes and i got the following backtrace.\n\nmy full codebase is not online but if i can provide more info i'll see what i can do.\n\noutput of `echo \"thread apply all bt\" | coredumpctl gdb 19425`\n\n```\nGNU gdb (Gentoo 7.9.1 vanilla) 7.9.1\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<https://bugs.gentoo.org/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/rustc-999...Reading symbols from /usr/lib64/debug//usr/bin/rustc-999.debug...done.\ndone.\n\nwarning: core file may not match specified executable file.\n[New LWP 19426]\n[New LWP 19425]\n\nwarning: Could not load shared library symbols for linux-vdso.so.1.\nDo you need \"set solib-search-path\" or \"set sysroot\"?\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nCore was generated by `rustc -O -g --cfg disable_float -Z no-landing-pads -C soft-float -C relocation-'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x0000000000001000 in ?? ()\n(gdb) \nThread 2 (Thread 0x7fee72159a00 (LWP 19425)):\n#0  0x00007fee6a1b149d in pthread_join (threadid=0x7fee677ff700, thread_return=0x0) at pthread_join.c:90\n#1  0x00007fee719eb64d in run::hc5b115a7ccd2f2621Fc () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#2  0x00007fee71a1319a in main::h6e5539831e2be46aoUd () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#3  0x00007fee71524355 in sys_common::unwind::try::try_fn::h10696708910190307609 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#4  0x00007fee715195ec in __rust_try () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#5  0x00007fee71523ddf in rt::lang_start::h7565091ad71d6d78kRy () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#6  0x00007fee710e5865 in __libc_start_main (main=0x563a84dea900 <main>, argc=0x16, argv=0x7ffc7730d818, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7ffc7730d808) at libc-start.c:289\n#7  0x0000563a84dea7e9 in _start ()\n\nThread 1 (Thread 0x7fee677ff700 (LWP 19426)):\n#0  0x0000000000001000 in ?? ()\n#1  0x00007fee7152c37f in backtrace_pcinfo (state=0x7fee72195000, pc=0x7fee7151bcc0, callback=0x7fee7151ba20 <sys_common::gnu::libbacktrace::print::pcinfo_cb::h63b6230d3b69a3d4meu>, error_callback=0x7fee7151ba10 <sys_common::gnu::libbacktrace::print::error_cb::hdecfd2f27a29ccadxdu>, data=0x7fee677eef60) at /var/tmp/portage/dev-lang/rust-999/work/rustc-nightly/src/libbacktrace/fileline.c:176\n#2  0x00007fee7151c2b1 in sys::backtrace::tracing::imp::write::trace_fn::h42b6903bcf2417f4jtu () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#3  0x00007fee69ca9219 in _Unwind_Backtrace (trace=0x7fee7151be50 <sys::backtrace::tracing::imp::write::trace_fn::h42b6903bcf2417f4jtu>, trace_argument=0x7fee677ef308) at /var/tmp/portage/sys-devel/gcc-4.9.3/work/gcc-4.9.3/libgcc/unwind.inc:295\n#4  0x00007fee7151bcc1 in sys::backtrace::tracing::imp::write::hbf8d2257618d378dqru () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#5  0x00007fee71524c8c in panicking::default_handler::_$u7b$$u7b$closure$u7d$$u7d$::closure.43421 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#6  0x00007fee715247e4 in panicking::default_handler::hb793602b9422be75eZy () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#7  0x00007fee714ed5fd in sys_common::unwind::begin_unwind_inner::h391eab452fb14020fgt () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#8  0x00007fee714ee099 in sys_common::unwind::begin_unwind_fmt::h502cd44897ebb542lft () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#9  0x00007fee71519662 in rust_begin_unwind () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#10 0x00007fee7156c370 in panicking::panic_fmt::h62352977d16cc5446YL () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#11 0x00007fee6ed62c8a in result::unwrap_failed::h14539027973648016517 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_metadata-gentoo-nightly.so\n#12 0x00007fee6ed61fe2 in astencode::decode_inlined_item::hee2fe2583f864854Eha () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_metadata-gentoo-nightly.so\n#13 0x00007fee6ee8423a in fn$LP$$RF$cstore..crate_metadata$C$$u20$$RF$rustc..middle..ty..context..ctxt$C$$u20$collections..vec..Vec$LT$rustc..front..map..PathElem$GT$$C$$u20$collections..vec..Vec$LT$rustc..front..map..definitions..DisambiguatedDefPathData$GT$$C$$u20$rbml..Doc$C$$u20$rustc..middle..def_id..DefId$RP$$u20$.$GT$$u20$core..result..Result$LT$$RF$rustc..middle..cstore..InlinedItem$C$$u20$$LP$collections..vec..Vec$LT$rustc..front..map..PathElem$GT$$C$$u20$collections..vec..Vec$LT$rustc..front..map..definitions..DisambiguatedDefPathData$GT$$RP$$GT$$u20$$u7b$astencode..decode_inlined_item$u7d$::fn_pointer_shim.39742::hbe4049cf904d9987 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_metadata-gentoo-nightly.so\n#14 0x00007fee6ee40c9e in decoder::maybe_get_item_ast::h626b5a0dd737fa2bAqi () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_metadata-gentoo-nightly.so\n#15 0x00007fee6ee8418b in csearch::cstore..CStore.CrateStore$LT$$u27$tcx$GT$::maybe_get_item_ast::h8c804a730565c43fTal () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_metadata-gentoo-nightly.so\n#16 0x00007fee6e4f8ba6 in middle::const_eval::lookup_const_fn_by_id::h0d3fe38fac21ea7aevk () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc-gentoo-nightly.so\n#17 0x00007fee70b5956a in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$::handle_const_fn_call::hbad5b44bc4c2a277Cva () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#18 0x00007fee70b5e9eb in consts::check_expr::h27a5c901d29d1e3aMTa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#19 0x00007fee70b57433 in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$.Visitor$LT$$u27$v$GT$::visit_expr::hb80ccb819911d18dELa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#20 0x00007fee70b57730 in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$.Visitor$LT$$u27$v$GT$::visit_expr::hb80ccb819911d18dELa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#21 0x00007fee70b58251 in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$::fn_like::_$u7b$$u7b$closure$u7d$$u7d$::closure.14206 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#22 0x00007fee70b5803b in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$::fn_like::hf43b027c1dfe7bf79sa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#23 0x00007fee70b5d284 in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$.Visitor$LT$$u27$v$GT$::visit_impl_item::h6d0256204ae45588xGa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#24 0x00007fee70b5c882 in consts::CheckCrateVisitor$LT$$u27$a$C$$u20$$u27$tcx$GT$.Visitor$LT$$u27$v$GT$::visit_item::h56875304bdc29f99FBa () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#25 0x00007fee70b60361 in consts::check_crate::h31ae73cb2b5e2ebdbjb () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_passes-gentoo-nightly.so\n#26 0x00007fee71a351d1 in driver::phase_3_run_analysis_passes::_$u7b$$u7b$closure$u7d$$u7d$::closure.28172 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#27 0x00007fee71a329b5 in middle::ty::context::ctxt$LT$$u27$tcx$GT$::create_and_enter::h6765774387974243667 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#28 0x00007fee71a2eb12 in driver::phase_3_run_analysis_passes::h9526789550963600942 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#29 0x00007fee719ff9fb in driver::compile_input::heade30ae8be10fcbBca () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#30 0x00007fee719ef904 in run_compiler::had4c89bf23ca47f38Gc () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#31 0x00007fee719ece32 in sys_common::unwind::try::try_fn::h1666047548222215700 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#32 0x00007fee715195ec in __rust_try () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#33 0x00007fee71511c1e in sys_common::unwind::inner_try::hcc1c3a81232c2718hdt () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#34 0x00007fee719ed681 in boxed::F.FnBox$LT$A$GT$::call_box::h6775546185631175077 () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-gentoo-nightly.so\n#35 0x00007fee71523251 in sys::thread::Thread::new::thread_start::had420cf669f283d4yWx () from /usr/lib64/rust-999/rustlib/x86_64-unknown-linux-gnu/lib/libstd-gentoo-nightly.so\n#36 0x00007fee6a1b0324 in start_thread (arg=0x7fee677ff700) at pthread_create.c:333\n#37 0x00007fee711aba1d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n(gdb) quit\n           PID: 19425 (rustc)\n           UID: 1000 (mischief)\n           GID: 1000 (mischief)\n        Signal: 11 (SEGV)\n     Timestamp: Tue 2016-02-16 00:12:24 PST (15min ago)\n  Command Line: rustc -O -g --cfg disable_float -Z no-landing-pads -C soft-float -C relocation-model=pic -C linker=x86_64-efi-pe-ld --target=target.json --out-dir libs --crate-type=rlib --crate-name=uefi --emit=link -L crate=libs ext/libuefi/src/lib.rs\n    Executable: /usr/bin/rustc-999\n Control Group: /\n         Slice: -.slice\n       Boot ID: 69bff6bcd5ba4b2e9c59fa67a3f488c8\n    Machine ID: 3e310db65944761151d9320054fe225b\n      Hostname: delta\n      Coredump: /var/lib/systemd/coredump/core.rustc.1000.69bff6bcd5ba4b2e9c59fa67a3f488c8.19425.1455610344000000.lz4\n       Message: Process 19425 (rustc) of user 1000 dumped core.\n\n                Stack trace of thread 19426:\n                #0  0x0000000000001000 n/a (n/a)\n\n```\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31698/timeline", "performed_via_github_app": null, "state_reason": "completed"}