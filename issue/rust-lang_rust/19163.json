{"url": "https://api.github.com/repos/rust-lang/rust/issues/19163", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19163/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19163/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19163/events", "html_url": "https://github.com/rust-lang/rust/issues/19163", "id": 49626208, "node_id": "MDU6SXNzdWU0OTYyNjIwOA==", "number": 19163, "title": "Code that misuses the `write!` macro hangs rustc for 1 minute and then SIGILLs (OOM)", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2014-11-20T22:21:20Z", "updated_at": "2015-05-04T20:48:57Z", "closed_at": "2015-05-04T20:48:57Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### STR\n\n``` rust\nfn main() {\n    let mut v = vec![];\n    write!(&v, \"Hello world\");\n}\n```\n### Output\n\n``` rust\n$ time rustc write.rs\n<std macros>:3:24: 3:14 error: cannot borrow immutable dereference of `&`-pointer as mutable\n<std macros>:3         let dst = &mut *$dst;\n[2]    2803 illegal hardware instruction (core dumped)  rustc write.rs\nrustc write.rs  58.66s user 4.81s system 99% cpu 1:03.86 total\n```\n### Backtrace\n\n``` rust\n#0  0x00007ffff7351560 in oom::h6671a0e79ac45df3RTa () from /usr/lib64/librustrt-4e7c5e5c.so\n#1  0x00007ffff499c535 in ?? () from /usr/lib64/libsyntax-4e7c5e5c.so\n#2  0x00007ffff4a3fd27 in ?? () from /usr/lib64/libsyntax-4e7c5e5c.so\n#3  0x00007ffff4a3b083 in diagnostic::EmitterWriter.Emitter::emit::h8944016a574210b0lrG ()\n   from /usr/lib64/libsyntax-4e7c5e5c.so\n#4  0x00007ffff4a398f9 in diagnostic::Handler::emit::hef6d94e096dac3f1F8F ()\n   from /usr/lib64/libsyntax-4e7c5e5c.so\n#5  0x00007ffff4a0c3ed in diagnostic::SpanHandler::span_err::he4174115bd82cc5fEWF ()\n   from /usr/lib64/libsyntax-4e7c5e5c.so\n#6  0x00007ffff5a77fea in middle::borrowck::BorrowckCtxt$LT$$x27a$C$$x20$x27tcx$GT$::report::h3050434306868883rEh () from /usr/lib64/librustc-4e7c5e5c.so\n#7  0x00007ffff5a7d524 in middle::borrowck::gather_loans::GatherLoanCtxt$LT$$x27a$C$$x20$x27tcx$GT$.euv..Delegate$LT$$x27tcx$GT$::borrow::hd3a8e951ce2e3945bef () from /usr/lib64/librustc-4e7c5e5c.so\n#8  0x00007ffff5a87421 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#9  0x00007ffff5a83d44 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#10 0x00007ffff5a830d0 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#11 0x00007ffff5a838d7 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#12 0x00007ffff5a876a9 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#13 0x00007ffff5a83091 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#14 0x00007ffff5a7ad31 in middle::borrowck::gather_loans::gather_loans_in_fn::ha2f120a3c6b6b70b96e ()\n   from /usr/lib64/librustc-4e7c5e5c.so\n#15 0x00007ffff5a9c574 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#16 0x00007ffff5a9961d in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#17 0x00007ffff5a9b666 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#18 0x00007ffff5a9a2f8 in ?? () from /usr/lib64/librustc-4e7c5e5c.so\n#19 0x00007ffff5a99cc5 in middle::borrowck::check_crate::h7908f5f01a09671eOPg ()\n   from /usr/lib64/librustc-4e7c5e5c.so\n#20 0x00007ffff76a9917 in ?? () from /usr/lib64/librustc_trans-4e7c5e5c.so\n#21 0x00007ffff7840568 in driver::driver::phase_3_run_analysis_passes::he238813c217c3b94efS ()\n   from /usr/lib64/librustc_trans-4e7c5e5c.so\n#22 0x00007ffff7833238 in driver::driver::compile_input::h117f94c1b348a398YVR ()\n   from /usr/lib64/librustc_trans-4e7c5e5c.so\n#23 0x00007ffff78b7cd7 in ?? () from /usr/lib64/librustc_trans-4e7c5e5c.so\n#24 0x00007ffff78b62fc in ?? () from /usr/lib64/librustc_trans-4e7c5e5c.so\n#25 0x00007ffff76c2f78 in ?? () from /usr/lib64/librustc_trans-4e7c5e5c.so\n#26 0x00007ffff76c2e83 in ?? () from /usr/lib64/librustc_trans-4e7c5e5c.so\n#27 0x00007ffff7bd6be2 in ?? () from /usr/lib64/libnative-4e7c5e5c.so\n#28 0x00007ffff7390fec in ?? () from /usr/lib64/librustrt-4e7c5e5c.so\n#29 0x00007ffff7390fd6 in rust_try () from /usr/lib64/librustrt-4e7c5e5c.so\n#30 0x00007ffff733f843 in unwind::try::h03ead95328113b2fIZc () from /usr/lib64/librustrt-4e7c5e5c.so\n#31 0x00007ffff733f70c in task::Task::run::hed7dc0cf620a0172y5b () from /usr/lib64/librustrt-4e7c5e5c.so\n#32 0x00007ffff7bd69e7 in ?? () from /usr/lib64/libnative-4e7c5e5c.so\n#33 0x00007ffff7340f35 in ?? () from /usr/lib64/librustrt-4e7c5e5c.so\n#34 0x00007ffff1e0e294 in start_thread () from /lib64/libpthread.so.0\n#35 0x00007ffff70181ed in clone () from /lib64/libc.so.6\n```\n### Version\n\n1d81776\n\nCan anyone reproduce? I find this bizarre...\n\ncc @alexcrichton @jakub- @sfackler \n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19163/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19163/timeline", "performed_via_github_app": null, "state_reason": "completed"}