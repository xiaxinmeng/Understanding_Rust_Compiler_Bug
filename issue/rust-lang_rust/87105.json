{"url": "https://api.github.com/repos/rust-lang/rust/issues/87105", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/87105/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/87105/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/87105/events", "html_url": "https://github.com/rust-lang/rust/issues/87105", "id": 943506580, "node_id": "MDU6SXNzdWU5NDM1MDY1ODA=", "number": 87105, "title": "Compiler should warn if \"unused\" shadowed variable is actually used in inner block", "user": {"login": "tp-m", "id": 3854464, "node_id": "MDQ6VXNlcjM4NTQ0NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3854464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tp-m", "html_url": "https://github.com/tp-m", "followers_url": "https://api.github.com/users/tp-m/followers", "following_url": "https://api.github.com/users/tp-m/following{/other_user}", "gists_url": "https://api.github.com/users/tp-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/tp-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tp-m/subscriptions", "organizations_url": "https://api.github.com/users/tp-m/orgs", "repos_url": "https://api.github.com/users/tp-m/repos", "events_url": "https://api.github.com/users/tp-m/events{/privacy}", "received_events_url": "https://api.github.com/users/tp-m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-07-13T14:52:00Z", "updated_at": "2021-08-31T16:18:32Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Given the following code: https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018\r\n\r\n```rust\r\npub fn main() {\r\n    let mut iter = [1u8, 3, 5, 7].iter().zip([2u8, 4, 6, 8].iter());\r\n    while let Some((a,b)) = iter.next() {\r\n        println!(\"a: {}, b: {}\", a, b);\r\n        if let Some((_a,b)) = iter.next() {\r\n            println!(\"a: {}, b: {}\", a, b);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe current output is: no warnings.\r\n\r\nIdeally the output should look like:\r\n\r\n```\r\nLine 5: variable `_a` is marked as unused but shadows variable `a` from line 3.\r\n\r\nDid you forget to change `_a` back to `a`?\r\n\r\nIf not, use `_` instead of `_a` in line 5.\r\n```\r\nRationale: This might happen if initially `a` from Line 5 wasn't used in the inner block (e.g. it was just `println!(\"b: {}\", b);`). In that case the compiler warns about the unused variable `a` and tells me to change it to `_a` to indicate that it's not used. Equally, the compiler should tell me now if I start using it again and forget to change it back!\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"theo-lw\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/87105/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/87105/timeline", "performed_via_github_app": null, "state_reason": null}