{"url": "https://api.github.com/repos/rust-lang/rust/issues/15855", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15855/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15855/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15855/events", "html_url": "https://github.com/rust-lang/rust/issues/15855", "id": 38300772, "node_id": "MDU6SXNzdWUzODMwMDc3Mg==", "number": 15855, "title": "no trailing `( )` error message presumes user wanted nullary enum", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-07-21T13:07:33Z", "updated_at": "2019-11-14T07:29:24Z", "closed_at": "2019-11-14T07:29:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Here is some code that someone learning Rust on IRC asked about:\n\n``` rust\npub fn factorial<T: One + PartialOrd + Add<T, T> + Sub<T, T>>(num: T) -> T {\n// This works\nif num == One::one() {\nnum\n}\nelse {\nfactorial(num-One::one())*num\n}\n\n// This doesn't\n// -> nullary enum variants are written with no trailing `( )` for line 13\n//match num {\n// One::one() => num,\n// _ => factorial(num-One::one())*num\n//}\n}\n```\n\nThe issue here is that the user didn't realize that `One::one()` is a function call rather than a constructor (or at least that's my mental model of what they were doing; its possible they did know it was a function call and don't understand how `match` works).\n\nSo the error message about nullary enum variants was confusing to them.\n\nSince we emit this error message before we have actually done any resolve, the compiler cannot confirm whether the pattern `N()` is actually an attempt to refer to a nullary enum variant `N`, or if it is a function call.\n\nWe should consider revising the error message to not assume that the end user was talking about a nullary enum variant.  E.g. perhaps text like:\n\n>  expected pattern but found path with trailing `( )`.\n> Note: function calls are not patterns, and nullary enum variants are written with no trailing `( )`.\n", "closed_by": {"login": "Dylan-DPC-zz", "id": 12371125, "node_id": "MDQ6VXNlcjEyMzcxMTI1", "avatar_url": "https://avatars.githubusercontent.com/u/12371125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC-zz", "html_url": "https://github.com/Dylan-DPC-zz", "followers_url": "https://api.github.com/users/Dylan-DPC-zz/followers", "following_url": "https://api.github.com/users/Dylan-DPC-zz/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC-zz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC-zz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC-zz/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC-zz/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC-zz/repos", "events_url": "https://api.github.com/users/Dylan-DPC-zz/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC-zz/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15855/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15855/timeline", "performed_via_github_app": null, "state_reason": "completed"}