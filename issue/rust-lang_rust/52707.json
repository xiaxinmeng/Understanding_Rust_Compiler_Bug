{"url": "https://api.github.com/repos/rust-lang/rust/issues/52707", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52707/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52707/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52707/events", "html_url": "https://github.com/rust-lang/rust/issues/52707", "id": 344532117, "node_id": "MDU6SXNzdWUzNDQ1MzIxMTc=", "number": 52707, "title": "`proc-macro` not distributed for target wasm32-unknown-unknown", "user": {"login": "lukaslueg", "id": 3148704, "node_id": "MDQ6VXNlcjMxNDg3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3148704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaslueg", "html_url": "https://github.com/lukaslueg", "followers_url": "https://api.github.com/users/lukaslueg/followers", "following_url": "https://api.github.com/users/lukaslueg/following{/other_user}", "gists_url": "https://api.github.com/users/lukaslueg/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaslueg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaslueg/subscriptions", "organizations_url": "https://api.github.com/users/lukaslueg/orgs", "repos_url": "https://api.github.com/users/lukaslueg/repos", "events_url": "https://api.github.com/users/lukaslueg/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaslueg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-07-25T17:13:32Z", "updated_at": "2018-07-29T09:01:00Z", "closed_at": "2018-07-29T09:01:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Coming over from https://github.com/koute/cargo-web/issues/125\r\n\r\n`proc-macro` is missing from the distribution for wasm32:\r\n\r\n    $ ls ~/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib | grep proc_macro\r\n    libproc_macro-1ea4ba9e4f6cdbc1.so\r\n\r\n    $ ls ~/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/wasm32-unknown-unknown/lib | grep proc_macro\r\n\r\n...which causes anything that depends on `proc-macro2` somewhere down the tree to be unable to compile to wasm:\r\n\r\n```\r\n$ cargo new foobar\r\n$ cd foobar\r\n$ echo 'proc-macro2 = \"*\"' >> Cargo.toml\r\n$ cargo build --target=wasm32-unknown-unknown\r\n   Compiling unicode-xid v0.1.0                                                                                                                                                                                                              \r\n   Compiling proc-macro2 v0.4.9\r\nerror[E0463]: can't find crate for `proc_macro`\r\n  --> /home/kou/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro2-0.4.9/src/lib.rs:50:1\r\n   |\r\n50 | extern crate proc_macro;\r\n   | ^^^^^^^^^^^^^^^^^^^^^^^^ can't find crate\r\n```\r\n\r\n... which in turn is very sad because `proc-macro2` is needed not just for procedural macros but also to \"just\" parse rust code and having anything depend on a crate which in turn depends on `proc-macro2` effectively prohibits compiling for the web. May it be possible to include `proc-macro` in the wasm32-target ?\r\n\r\nIn fact, all I need is `proc_macro2::{Delimiter, Ident, Literal, Punct, TokenStream}`", "closed_by": {"login": "lukaslueg", "id": 3148704, "node_id": "MDQ6VXNlcjMxNDg3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3148704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaslueg", "html_url": "https://github.com/lukaslueg", "followers_url": "https://api.github.com/users/lukaslueg/followers", "following_url": "https://api.github.com/users/lukaslueg/following{/other_user}", "gists_url": "https://api.github.com/users/lukaslueg/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaslueg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaslueg/subscriptions", "organizations_url": "https://api.github.com/users/lukaslueg/orgs", "repos_url": "https://api.github.com/users/lukaslueg/repos", "events_url": "https://api.github.com/users/lukaslueg/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaslueg/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52707/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52707/timeline", "performed_via_github_app": null, "state_reason": "completed"}