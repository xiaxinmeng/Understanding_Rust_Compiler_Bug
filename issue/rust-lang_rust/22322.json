{"url": "https://api.github.com/repos/rust-lang/rust/issues/22322", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22322/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22322/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22322/events", "html_url": "https://github.com/rust-lang/rust/issues/22322", "id": 57685981, "node_id": "MDU6SXNzdWU1NzY4NTk4MQ==", "number": 22322, "title": "SIGBUS while compiling libstd using stage1/rustc", "user": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-02-14T08:15:07Z", "updated_at": "2015-02-14T10:21:10Z", "closed_at": "2015-02-14T10:21:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The problem occurs under OpenBSD (x86_64-unknown-openbsd).\nThe building of f174bca fail with `SIGBUS`, when compiling libstd using stage1/rustc. The last known to work build was ba2efe9 (~10 commits before).\n\nHere the backtrace under gdb:\n\n```\nGNU gdb 6.3\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"amd64-unknown-openbsd5.7\"...(no debugging symbols found)\n\n(gdb) r\nStarting program: /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/bin/rustc --cfg stage1 -Z print-link-args -O --cfg rtopt --cfg debug --sysroot x86_64-unknown-openbsd/stage1 -C prefer-dynamic --target=x86_64-unknown-openbsd -D warnings -L x86_64-unknown-openbsd/rt -L /opt/llvm-32c27dda3ae2318b6897f00795009cd6f42ac4b3/lib -L '' --out-dir x86_64-unknown-openbsd/stage1/lib/rustlib/x86_64-unknown-openbsd/lib -C extra-filename=-4e7c5e5c /root/build/openbsd-master/src/libcore/lib.rs\n\nProgram received signal SIGBUS, Bus error.\n[Switching to thread 1002137]\n0x000005d798729cf0 in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::h6743774523963745181 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n(gdb) bt\n#0  0x000005d798729cf0 in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::h6743774523963745181 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#1  0x000005d79871593b in fold::noop_fold_item::h10734865051070155566 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#2  0x000005d798728157 in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::closure.20907 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#3  0x000005d798727f0d in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::h17973506744433351220 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#4  0x000005d798727298 in vec::Vec$LT$T$GT$.FromIterator$LT$T$GT$::from_iter::h11853285780444493736 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#5  0x000005d79871376c in fold::noop_fold_item::h10734865051070155566 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#6  0x000005d798728157 in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::closure.20907 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#7  0x000005d798727f0d in iter::FlatMap$LT$I$C$$u{20}U$C$$u{20}F$GT$.Iterator::next::h17973506744433351220 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#8  0x000005d798727298 in vec::Vec$LT$T$GT$.FromIterator$LT$T$GT$::from_iter::h11853285780444493736 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#9  0x000005d79871376c in fold::noop_fold_item::h10734865051070155566 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#10 0x000005d7987109d5 in driver::assign_node_ids_and_map::closure.20285 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#11 0x000005d7986ce543 in driver::assign_node_ids_and_map::h6bc19e47b471dcd8hDa ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#12 0x000005d7986be7c1 in driver::compile_input::h8dcb5e309d83154fEba ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#13 0x000005d79876e26f in run_compiler::h0831f82d312bd846jbc ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#14 0x000005d79876bd21 in thunk::F.Invoke$LT$A$C$$u{20}R$GT$::invoke::h15181002208922494184 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#15 0x000005d79876b042 in rt::unwind::try::try_fn::h10368191240528705449 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#16 0x000005d7dcbf35a9 in rust_try_inner () from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/libstd-4e7c5e5c.so\n#17 0x000005d7dcbf3596 in rust_try () from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/libstd-4e7c5e5c.so\n#18 0x000005d79876b61f in thunk::F.Invoke$LT$A$C$$u{20}R$GT$::invoke::h12343021353288682298 ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/librustc_driver-4e7c5e5c.so\n#19 0x000005d7dcbb00ce in sys::thread::thread_start::hd53a9aab8f83598fqHE ()\n   from /root/build/openbsd-master/build/x86_64-unknown-openbsd/stage1/lib/libstd-4e7c5e5c.so\n#20 0x000005d71b0e898e in _rthread_start (v=Variable \"v\" is not available.\n) at /usr/src/lib/librthread/rthread.c:145\n#21 0x000005d7eb2c059b in __tfork_thread () at /usr/src/lib/libc/arch/amd64/sys/tfork_thread.S:75\n#22 0x0000000000000000 in ?? ()\n(gdb) \n```\n\nThe builds are without jemalloc.\n", "closed_by": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22322/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22322/timeline", "performed_via_github_app": null, "state_reason": "completed"}