{"url": "https://api.github.com/repos/rust-lang/rust/issues/5883", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/5883/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/5883/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/5883/events", "html_url": "https://github.com/rust-lang/rust/issues/5883", "id": 13178590, "node_id": "MDU6SXNzdWUxMzE3ODU5MA==", "number": 5883, "title": "ICE: can't make T_opaque_trait with bare trait store", "user": {"login": "kvark", "id": 107301, "node_id": "MDQ6VXNlcjEwNzMwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/107301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kvark", "html_url": "https://github.com/kvark", "followers_url": "https://api.github.com/users/kvark/followers", "following_url": "https://api.github.com/users/kvark/following{/other_user}", "gists_url": "https://api.github.com/users/kvark/gists{/gist_id}", "starred_url": "https://api.github.com/users/kvark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kvark/subscriptions", "organizations_url": "https://api.github.com/users/kvark/orgs", "repos_url": "https://api.github.com/users/kvark/repos", "events_url": "https://api.github.com/users/kvark/events{/privacy}", "received_events_url": "https://api.github.com/users/kvark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2013-04-14T20:47:51Z", "updated_at": "2014-06-16T21:56:25Z", "closed_at": "2013-09-23T19:03:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Got an ICE while porting a big project from 0.5 to 0.6. Rust log says the following:\n\nRUST_LOG=rustc=1,::rt::backtrace rustc engine/engine.rs -L lib --out-dir lib\nerror: internal compiler error: can't make T_opaque_trait with bare trait store\nrust: task failed at 'explicit failure', /build/src/rust-0.6/src/libsyntax/diagnostic.rs:99\n/usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f74d607664b]\n/usr/lib/librustrt.so(+0x2a189)[0x7f74d6087189]\n/usr/lib/librustrt.so(upcall_fail+0x198)[0x7f74d60783a8]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1055db)[0x7f74d927e5db]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x105582)[0x7f74d927e582]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_61fe198059b9e3fc3_06E+0x71)[0x7f74d91c6651]\n/usr/lib/libsyntax-84efebcb12c867a2-0.6.so(_ZN10diagnostic14__extensions__9meth_84585fatal15_c79235bb6437b73_06E+0x196)[0x7f74d8734896]\n/usr/lib/libsyntax-84efebcb12c867a2-0.6.so(_ZN10diagnostic14__extensions__9meth_84813bug15_c79235bb6437b73_06E+0x6f)[0x7f74d873502f]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver7session14__extensions__10meth_188433bug17_b5f71376f9f489aa3_06E+0x80)[0x7f74d7a99e50]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6common14T_opaque_trait17_d487fd18f1d421363_06E+0x3f1)[0x7f74d7bb5691]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of14sizing_type_of15_c1bc195eb34bc63_06E+0xb8e)[0x7f74d7bc943e]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x11a75f)[0x7f74d7aa675f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34e4b7)[0x7f74d7cda4b7]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans3adt14represent_type17_cff2701782ac89703_06E+0x1789)[0x7f74d7b4c5c9]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x17bd)[0x7f74d7ae736d]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0xf5e)[0x7f74d7ae6b0e]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x11a75f)[0x7f74d7aa675f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f922)[0x7f74d7cdb922]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f4ce)[0x7f74d7cdb4ce]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans3adt9fields_of17_ffb4601ba2c964233_06E+0x3f)[0x7f74d7bd09df]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x17ec)[0x7f74d7ae739c]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x738)[0x7f74d7ae62e8]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0xf5e)[0x7f74d7ae6b0e]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x3da)[0x7f74d7ae5f8a]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x11a75f)[0x7f74d7aa675f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f922)[0x7f74d7cdb922]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f4ce)[0x7f74d7cdb4ce]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans3adt9fields_of17_ffb4601ba2c964233_06E+0x3f)[0x7f74d7bd09df]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x17ec)[0x7f74d7ae739c]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x738)[0x7f74d7ae62e8]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x11a75f)[0x7f74d7aa675f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f922)[0x7f74d7cdb922]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x34f4ce)[0x7f74d7cdb4ce]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans3adt9fields_of17_ffb4601ba2c964233_06E+0x3f)[0x7f74d7bd09df]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x17ec)[0x7f74d7ae739c]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x91a)[0x7f74d7ae64ca]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans7type_of7type_of15_c1bc195eb34bc63_06E+0x3da)[0x7f74d7ae5f8a]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4expr15trans_local_var17_f79ea779daedaa9f3_06E+0x163)[0x7f74d7b9e5b3]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x20d3f2)[0x7f74d7b993f2]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1f8b22)[0x7f74d7b84b22]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1f6ea0)[0x7f74d7b82ea0]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4expr14trans_to_datum17_e5e293cc226c2b7b3_06E+0x321)[0x7f74d7aee861]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x20cf52)[0x7f74d7b98f52]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1f8b22)[0x7f74d7b84b22]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1f6ea0)[0x7f74d7b82ea0]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4expr14trans_to_datum17_e5e293cc226c2b7b3_06E+0x321)[0x7f74d7aee861]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee14trans_arg_expr16_7c52c158fb4e7943_06E+0x9b3)[0x7f74d7b7f253]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth14trans_self_arg17_544359e931bae1b23_06E+0x120)[0x7f74d7c73920]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth19trans_method_callee17_63afa2148d7b3f823_06E+0x11f0)[0x7f74d7b65d60]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1e089f)[0x7f74d7b6c89f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1effe2)[0x7f74d7b7bfe2]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10with_scope16_42e4eeeae78c8643_06E+0x56e)[0x7f74d7b3910e]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee16trans_call_inner17_c39d6d201e1eca503_06E+0xc2)[0x7f74d7b6c182]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee17trans_method_call17_4be16fc4341e49e93_06E+0x1fa)[0x7f74d7b6c4aa]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1fd2d3)[0x7f74d7b892d3]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1f7171)[0x7f74d7b83171]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4expr14trans_to_datum17_e5e293cc226c2b7b3_06E+0x321)[0x7f74d7aee861]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee14trans_arg_expr16_7c52c158fb4e7943_06E+0x9b3)[0x7f74d7b7f253]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth14trans_self_arg17_544359e931bae1b23_06E+0x120)[0x7f74d7c73920]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth19trans_method_callee17_63afa2148d7b3f823_06E+0x11f0)[0x7f74d7b65d60]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1e089f)[0x7f74d7b6c89f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1effe2)[0x7f74d7b7bfe2]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10with_scope16_42e4eeeae78c8643_06E+0x56e)[0x7f74d7b3910e]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee16trans_call_inner17_c39d6d201e1eca503_06E+0xc2)[0x7f74d7b6c182]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans6callee17trans_method_call17_4be16fc4341e49e93_06E+0x1fa)[0x7f74d7b6c4aa]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x1fd2d3)[0x7f74d7b892d3]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4expr10trans_into16_54d763e594233573_06E+0xe97)[0x7f74d7aeb6c7]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10init_local15_3c07168daf987d3_06E+0x65f)[0x7f74d7bee32f]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x26461b)[0x7f74d7bf061b]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10trans_stmt17_2c2aa18584fe5be63_06E+0x5ae)[0x7f74d7aea3fe]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x15d43c)[0x7f74d7ae943c]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans11controlflow11trans_block16_a4e9a67bdd72ccb3_06E+0x19e)[0x7f74d7ae7bae]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base13trans_closure17_85d646a672f846683_06E+0x50e)[0x7f74d7bf96ee]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base8trans_fn17_fe1e7f81b93e452d3_06E+0x3b9)[0x7f74d7aa1449]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth12trans_method17_bea14be21fcde8563_06E+0x40d)[0x7f74d7adf21d]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x2e768d)[0x7f74d7c7368d]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4meth10trans_impl16_fe66dbbe5a7fa333_06E+0x14e)[0x7f74d7c0001e]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10trans_item16_ed7df62f5f126563_06E+0x69d)[0x7f74d7a98a2d]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base9trans_mod17_33f95ffa6ea6f19d3_06E+0xa3)[0x7f74d7c00263]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base10trans_item16_ed7df62f5f126563_06E+0x46e)[0x7f74d7a987fe]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base9trans_mod17_33f95ffa6ea6f19d3_06E+0xa3)[0x7f74d7c00263]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base11trans_crate15_aa5d2b86af98143_06E+0x13c4)[0x7f74d7c1ff14]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x87a290)[0x7f74d8206290]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_rest17_b2b258b84b35f3533_06E+0x331e)[0x7f74d820329e]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_upto17_12335154b455986e3_06E+0x108)[0x7f74d82064a8]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver13compile_input15_bb29edf7a232863_06E+0xca)[0x7f74d82068ea]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN12run_compiler17_64d52739a36d169c3_06E+0x20aa)[0x7f74d8235fca]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b6601)[0x7f74d8242601]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b2e2c)[0x7f74d823ee2c]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0xce08e)[0x7f74d924708e]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14dcb4)[0x7f74d92c6cb4]\n/usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f74d6076e64]\nrust: task failed at 'explicit failure', /build/src/rust-0.6/src/librustc/rustc.rc:357\n/usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f74d607664b]\n/usr/lib/librustrt.so(+0x2a189)[0x7f74d6087189]\n/usr/lib/librustrt.so(upcall_fail+0x198)[0x7f74d60783a8]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1055db)[0x7f74d927e5db]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x105582)[0x7f74d927e582]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_61fe198059b9e3fc3_06E+0x71)[0x7f74d91c6651]\n/usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14dcb4)[0x7f74d92c6cb4]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN7monitor17_78935df9ff9e1afa3_06E+0x1577)[0x7f74d82385f7]\n/usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8b34)[0x7f74d8244b34]\n/usr/lib/librustc-c84825241471686d-0.6.so(_ZN4main15_c4de63b748e03d3_06E+0x7e)[0x7f74d824474e]\n/usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f74d6076e64]\nrust: domain main @0x23743c0 root task failed\nmake: **\\* [engine-code] Error 101\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/5883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/5883/timeline", "performed_via_github_app": null, "state_reason": "completed"}