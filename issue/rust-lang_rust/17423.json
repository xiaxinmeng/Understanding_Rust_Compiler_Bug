{"url": "https://api.github.com/repos/rust-lang/rust/issues/17423", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17423/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17423/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17423/events", "html_url": "https://github.com/rust-lang/rust/issues/17423", "id": 43335677, "node_id": "MDU6SXNzdWU0MzMzNTY3Nw==", "number": 17423, "title": "GDB debuginfo tests depend on operating system locale", "user": {"login": "oskchaitanya", "id": 3662599, "node_id": "MDQ6VXNlcjM2NjI1OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3662599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oskchaitanya", "html_url": "https://github.com/oskchaitanya", "followers_url": "https://api.github.com/users/oskchaitanya/followers", "following_url": "https://api.github.com/users/oskchaitanya/following{/other_user}", "gists_url": "https://api.github.com/users/oskchaitanya/gists{/gist_id}", "starred_url": "https://api.github.com/users/oskchaitanya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oskchaitanya/subscriptions", "organizations_url": "https://api.github.com/users/oskchaitanya/orgs", "repos_url": "https://api.github.com/users/oskchaitanya/repos", "events_url": "https://api.github.com/users/oskchaitanya/events{/privacy}", "received_events_url": "https://api.github.com/users/oskchaitanya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-09-21T13:57:01Z", "updated_at": "2014-09-24T12:04:59Z", "closed_at": "2014-09-24T11:20:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While trying 'make check' on the latest revision (id mentioned in attachments), I get a bunch of failures in gdb debuginfo tests. Along with this, I see that 'make check' itself errors out and does not continue further.\n\n**Here is how the system info looks:**\n\n```\nrust$ uname -a\nLinux zanshin 3.13.0-35-generic #62-Ubuntu SMP Fri Aug 15 01:58:42 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n\nrust$ \nrust$ cat /etc/issue\nUbuntu 14.04.1 LTS \\n \\l\n\n\nrust$ gdb --version\nGNU gdb (Ubuntu 7.7-0ubuntu3.1) 7.7\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\n\n\nrust$ git log --oneline -1\nb8599ec auto merge of #17421 : anchovieshat/rust/move_lto, r=thestinger\n```\n\n**Also, the last few lines of output from the problem described above:**\n\n```\n---- [debuginfo-gdb] debuginfo/var-captured-in-sendable-closure.rs stdout ----\n        NOTE: compiletest thinks it is using GDB version 7.7\n\n        error: line not found in debugger output: $2 = {a = -2, b = 3.5, c = 4}\n\n        status: exit code: 0\n        command: gdb -quiet -batch -nx -command=x86_64-unknown-linux-gnu/test/debuginfo-gdb/var-captured-in-sendable-closure.debugger.script\n        stdout:\n        ------------------------------------------\n        GNU gdb (Ubuntu 7.7-0ubuntu3.1) 7.7\n        Copyright (C) 2014 Free Software Foundation, Inc.\n        License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n        This is free software: you are free to change and redistribute it.\n\n        There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n        and \"show warranty\" for details.\n        This GDB was configured as \"x86_64-linux-gnu\".\n        Type \"show configuration\" for configuration details.\n        For bug reporting instructions, please see:\n        <http://www.gnu.org/software/gdb/bugs/>.\n        Find the GDB manual and other documentation resources online at:\n        <http://www.gnu.org/software/gdb/documentation/>.\n        For help, type \"help\".\n        Type \"apropos word\" to search for commands related to \"word\".\n        Breakpoint 1 at 0x1260: file src/test/debuginfo/var-captured-in-sendable-closure.rs, line 71.\n        static void var-captured-in-sendable-closure::zzz(void);\n        [Thread debugging using libthread_db enabled]\n        Using host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\n        Breakpoint 1, var-captured-in-sendable-closure::zzz () at src/test/debuginfo/var-captured-in-sendable-closure.rs:71\n        71      fn zzz() {()}\n        fn\"fn\"(1188) () at src/test/debuginfo/var-captured-in-sendable-closure.rs:61\n        61              do_something(&constant, &a_struct.a, &*owned);\n        $1 = 1\n        $2 = {a = -2, b = 3,5, c = 4}\n        $3 = 5\n        A debugging session is active.\n\n                Inferior 1 [process 8577] will be killed.\n\n        Quit anyway? (y or n) [answered Y; input not from terminal]\n\n        ------------------------------------------\n        stderr:\n        ------------------------------------------\n\n        ------------------------------------------\n\n        task '[debuginfo-gdb] debuginfo/var-captured-in-sendable-closure.rs' failed at 'explicit failure', /home/riddler/cursus/rust/rust/src/compiletest/runtest.rs:1432\n\n\n---- [debuginfo-gdb] debuginfo/var-captured-in-stack-closure.rs stdout ----\n        NOTE: compiletest thinks it is using GDB version 7.7\n\n        error: line not found in debugger output: $3 = {a = -3, b = 4.5, c = 5}\n\n        status: exit code: 0\n        command: gdb -quiet -batch -nx -command=x86_64-unknown-linux-gnu/test/debuginfo-gdb/var-captured-in-stack-closure.debugger.script\n        stdout:\n        ------------------------------------------\n\n        GNU gdb (Ubuntu 7.7-0ubuntu3.1) 7.7\n        Copyright (C) 2014 Free Software Foundation, Inc.\n        License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n        This is free software: you are free to change and redistribute it.\n        There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n        and \"show warranty\" for details.\n        This GDB was configured as \"x86_64-linux-gnu\".\n        Type \"show configuration\" for configuration details.\n        For bug reporting instructions, please see:\n        <http://www.gnu.org/software/gdb/bugs/>.\n        Find the GDB manual and other documentation resources online at:\n        <http://www.gnu.org/software/gdb/documentation/>.\n        For help, type \"help\".\n        Type \"apropos word\" to search for commands related to \"word\".\n        Breakpoint 1 at 0x2130: file src/test/debuginfo/var-captured-in-stack-closure.rs, line 84.\n        static void var-captured-in-stack-closure::zzz(void);\n        [Thread debugging using libthread_db enabled]\n        Using host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\n        Breakpoint 1, var-captured-in-stack-closure::zzz () at src/test/debuginfo/var-captured-in-stack-closure.rs:84\n        84      fn zzz() {()}\n        fn\"fn\"(1554) () at src/test/debuginfo/var-captured-in-stack-closure.rs:78\n        78              variable = constant + a_struct.a + struct_ref.a + *owned + *managed;\n        $1 = 1\n        $2 = 2\n        $3 = {a = -3, b = 4,5, c = 5}\n        $4 = {a = -3, b = 4,5, c = 5}\n        $5 = 6\n        $6 = 7\n        A debugging session is active.\n\n                Inferior 1 [process 8592] will be killed.\n\n        Quit anyway? (y or n) [answered Y; input not from terminal]\n\n        ------------------------------------------\n        stderr:\n        ------------------------------------------\n\n        ------------------------------------------\n\n        task '[debuginfo-gdb] debuginfo/var-captured-in-stack-closure.rs' failed at 'explicit failure', /home/riddler/cursus/rust/rust/src/compiletest/runtest.rs:1432\n\n\n\nfailures:\n    [debuginfo-gdb] debuginfo/basic-types-globals.rs\n    [debuginfo-gdb] debuginfo/basic-types-mut-globals.rs\n    [debuginfo-gdb] debuginfo/basic-types.rs\n    [debuginfo-gdb] debuginfo/borrowed-basic.rs\n    [debuginfo-gdb] debuginfo/borrowed-managed-basic.rs\n    [debuginfo-gdb] debuginfo/borrowed-struct.rs\n    [debuginfo-gdb] debuginfo/borrowed-unique-basic.rs\n    [debuginfo-gdb] debuginfo/box.rs\n    [debuginfo-gdb] debuginfo/by-value-non-immediate-argument.rs\n    [debuginfo-gdb] debuginfo/by-value-self-argument-in-trait-impl.rs\n    [debuginfo-gdb] debuginfo/closure-in-generic-function.rs\n    [debuginfo-gdb] debuginfo/evec-in-struct.rs\n    [debuginfo-gdb] debuginfo/function-arg-initialization.rs\n    [debuginfo-gdb] debuginfo/function-prologue-stepping-no-split-stack.rs\n    [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs\n    [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums.rs\n    [debuginfo-gdb] debuginfo/generic-function.rs\n    [debuginfo-gdb] debuginfo/generic-functions-nested.rs\n    [debuginfo-gdb] debuginfo/generic-method-on-generic-struct.rs\n    [debuginfo-gdb] debuginfo/generic-static-method-on-struct-and-enum.rs\n    [debuginfo-gdb] debuginfo/generic-struct.rs\n    [debuginfo-gdb] debuginfo/lexical-scope-in-stack-closure.rs\n    [debuginfo-gdb] debuginfo/lexical-scope-in-unique-closure.rs\n    [debuginfo-gdb] debuginfo/method-on-generic-struct.rs\n    [debuginfo-gdb] debuginfo/method-on-tuple-struct.rs\n    [debuginfo-gdb] debuginfo/name-shadowing-and-scope-nesting.rs\n    [debuginfo-gdb] debuginfo/recursive-struct.rs\n    [debuginfo-gdb] debuginfo/self-in-generic-default-method.rs\n    [debuginfo-gdb] debuginfo/shadowed-argument.rs\n    [debuginfo-gdb] debuginfo/shadowed-variable.rs\n    [debuginfo-gdb] debuginfo/simd.rs\n    [debuginfo-gdb] debuginfo/simple-lexical-scope.rs\n    [debuginfo-gdb] debuginfo/simple-struct.rs\n    [debuginfo-gdb] debuginfo/simple-tuple.rs\n    [debuginfo-gdb] debuginfo/static-method-on-struct-and-enum.rs\n    [debuginfo-gdb] debuginfo/tuple-struct.rs\n    [debuginfo-gdb] debuginfo/var-captured-in-nested-closure.rs\n    [debuginfo-gdb] debuginfo/var-captured-in-sendable-closure.rs\n    [debuginfo-gdb] debuginfo/var-captured-in-stack-closure.rs\n\ntest result: FAILED. 54 passed; 39 failed; 5 ignored; 0 measured\n\ntask '<main>' failed at 'Some tests failed', /home/riddler/cursus/rust/rust/src/compiletest/compiletest.rs:265\nmake: *** [tmp/check-stage2-T-x86_64-unknown-linux-gnu-H-x86_64-unknown-linux-gnu-debuginfo-gdb.ok] Error 101\n\n```\n\nI mentioned this issue in #rust last evening and was advised to file it as an issue. Please let me know if I can help resolve this issue by providing more information or trying a different setting/config.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17423/timeline", "performed_via_github_app": null, "state_reason": "completed"}