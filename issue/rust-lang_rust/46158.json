{"url": "https://api.github.com/repos/rust-lang/rust/issues/46158", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46158/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46158/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46158/events", "html_url": "https://github.com/rust-lang/rust/issues/46158", "id": 275733674, "node_id": "MDU6SXNzdWUyNzU3MzM2NzQ=", "number": 46158, "title": "Miscompilation (illegal instruction)", "user": {"login": "vorner", "id": 11783500, "node_id": "MDQ6VXNlcjExNzgzNTAw", "avatar_url": "https://avatars.githubusercontent.com/u/11783500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vorner", "html_url": "https://github.com/vorner", "followers_url": "https://api.github.com/users/vorner/followers", "following_url": "https://api.github.com/users/vorner/following{/other_user}", "gists_url": "https://api.github.com/users/vorner/gists{/gist_id}", "starred_url": "https://api.github.com/users/vorner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vorner/subscriptions", "organizations_url": "https://api.github.com/users/vorner/orgs", "repos_url": "https://api.github.com/users/vorner/repos", "events_url": "https://api.github.com/users/vorner/events{/privacy}", "received_events_url": "https://api.github.com/users/vorner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-11-21T14:34:48Z", "updated_at": "2017-11-22T21:57:27Z", "closed_at": "2017-11-22T21:57:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello\r\n\r\nStarting with today's nightly, when I compile alacritty (maybe other things too, but I haven't found them yet), it crashes right at startup with \u201eIllegal instruction\u201c.\r\n\r\nSome things of note:\r\n* It works fine with yesterday's nightly.\r\n* I compile with RUSTC_FLAGS set to `-C target-cpu=native`. However, it still happens if I recompile without this env. variable (but I'm not sure if cargo caches something somewhere \u2012 it probably shouldn't, but I'm adding this info just in case). The CPU is this:\r\n\r\n```\r\nprocessor\t: 7\r\nvendor_id\t: GenuineIntel\r\ncpu family\t: 6\r\nmodel\t\t: 94\r\nmodel name\t: Intel(R) Xeon(R) CPU E3-1240 v5 @ 3.50GHz\r\nstepping\t: 3\r\nmicrocode\t: 0xa0\r\ncpu MHz\t\t: 3500.000\r\ncache size\t: 8192 KB\r\nphysical id\t: 0\r\nsiblings\t: 8\r\ncore id\t\t: 3\r\ncpu cores\t: 4\r\napicid\t\t: 7\r\ninitial apicid\t: 7\r\nfpu\t\t: yes\r\nfpu_exception\t: yes\r\ncpuid level\t: 22\r\nwp\t\t: yes\r\nflags\t\t: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf tsc_known_freq pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb intel_pt tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm mpx rdseed adx smap clflushopt xsaveopt xsavec xgetbv1 xsaves dtherm ida arat pln pts hwp hwp_notify hwp_act_window hwp_epp\r\nbugs\t\t:\r\nbogomips\t: 7010.00\r\nclflush size\t: 64\r\ncache_alignment\t: 64\r\naddress sizes\t: 39 bits physical, 48 bits virtual\r\npower management:\r\n```\r\n\r\nThis is the backtrace I get from gdb when it crashes, if it is of any help:\r\n\r\n```\r\n(gdb) r\r\nStarting program: /home/vorner/.cargo/bin/alacritty \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\r\nDwarf Error: Cannot find DIE at 0x5f referenced from DIE at 0x20b9a9 [in module /home/vorner/.cargo/bin/alacritty]\r\n(gdb) bt\r\n#0  0x00005555556f22e5 in winit::platform::platform::{{impl}}::deref::__static_ref_initialize::x_backend\r\n    () at .cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.7.6/src/platform/linux/mod.rs:48\r\n#1  0x00005555556f0bf5 in winit::platform::platform::{{impl}}::deref::__static_ref_initialize::{{closure}} () at .cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.7.6/src/platform/linux/mod.rs:67\r\n#2  core::result::Result<winit::platform::platform::UnixBackend, ()>::unwrap_or_else<winit::platform::platform::UnixBackend,(),closure> (self=..., op=...) at /checkout/src/libcore/result.rs:738\r\n#3  winit::platform::platform::{{impl}}::deref::__static_ref_initialize ()\r\n    at .cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.7.6/src/platform/linux/mod.rs:66\r\n#4  core::ops::function::FnOnce::call_once<fn() -> winit::platform::platform::UnixBackend,()> ()\r\n    at /checkout/src/libcore/ops/function.rs:223\r\n#5  lazy_static::lazy::{{impl}}::get::{{closure}}<winit::platform::platform::UnixBackend,fn() -> winit::platform::platform::UnixBackend> ()\r\n    at /home/vorner/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-0.2.11/src/lazy.rs:24\r\n#6  std::sync::once::{{impl}}::call_once::{{closure}}<closure> ()\r\n    at /checkout/src/libstd/sync/once.rs:228\r\n#7  0x00005555558571f4 in std::sync::once::Once::call_inner () at /checkout/src/libstd/sync/once.rs:341\r\nDwarf Error: Cannot find DIE at 0xdc56 referenced from DIE at 0x61c8c [in module /home/vorner/.cargo/bin/alacritty]\r\n```\r\n\r\nThe exact rustc version:\r\n\r\n```\r\n$ rustc --version --verbose\r\nrustc 1.23.0-nightly (33374fa9d 2017-11-20)\r\nbinary: rustc\r\ncommit-hash: 33374fa9d09e2a790979b31e61100dfed4b44139\r\ncommit-date: 2017-11-20\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.23.0-nightly\r\nLLVM version: 4.0\r\n```\r\n\r\nAnything more I can try to help pinpoint the problem?", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46158/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46158/timeline", "performed_via_github_app": null, "state_reason": "completed"}