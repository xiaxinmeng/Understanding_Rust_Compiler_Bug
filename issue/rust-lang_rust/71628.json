{"url": "https://api.github.com/repos/rust-lang/rust/issues/71628", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/71628/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/71628/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/71628/events", "html_url": "https://github.com/rust-lang/rust/issues/71628", "id": 607976890, "node_id": "MDU6SXNzdWU2MDc5NzY4OTA=", "number": 71628, "title": "Private types in public interface", "user": {"login": "gahag", "id": 7347561, "node_id": "MDQ6VXNlcjczNDc1NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/7347561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gahag", "html_url": "https://github.com/gahag", "followers_url": "https://api.github.com/users/gahag/followers", "following_url": "https://api.github.com/users/gahag/following{/other_user}", "gists_url": "https://api.github.com/users/gahag/gists{/gist_id}", "starred_url": "https://api.github.com/users/gahag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gahag/subscriptions", "organizations_url": "https://api.github.com/users/gahag/orgs", "repos_url": "https://api.github.com/users/gahag/repos", "events_url": "https://api.github.com/users/gahag/events{/privacy}", "received_events_url": "https://api.github.com/users/gahag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-04-28T02:30:41Z", "updated_at": "2020-04-28T08:27:43Z", "closed_at": "2020-04-28T08:27:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm using the [Surf crate](https://crates.io/crates/surf) (1.0.3), and I've hit a very rough edge: there is a [public method](https://docs.rs/surf/1.0.3/surf/struct.Request.html#method.new) whose return type is not public. Therefore, I can call this method and use the returned value directly, but I can't return it from my functions and neither have it as a parameter. I can't even store in a variable with explicit type signature, even though I can have a variable with implicit type.\r\n\r\nThe crate is already undergoing a new major release, and this issue has already been adressed. I'm curious about the language point of view of this behavior. Is this intended? Are there reasons why Rust should allow this? Has this been discussed already? It feels like something that really isn't right, and doesn't cope with the basic language mechanisms.\r\n\r\nHere is a short example that reproduces the issue: [playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=a47fce3835f4049ffa347ff99d41c695)\r\n\r\nI would expect Rust to disallow this kind of construct. A public opaque type would have the same effect, without restricting users from passing the value around.\r\n\r\n### Meta\r\nBoth on Stable (1.43.0) and Nightly (1.45.0-nightly).\r\n", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/71628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/71628/timeline", "performed_via_github_app": null, "state_reason": "completed"}