{"url": "https://api.github.com/repos/rust-lang/rust/issues/8310", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8310/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8310/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8310/events", "html_url": "https://github.com/rust-lang/rust/issues/8310", "id": 17645178, "node_id": "MDU6SXNzdWUxNzY0NTE3OA==", "number": 8310, "title": "Reorganize the various encodings in libextra", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-08-05T16:50:20Z", "updated_at": "2013-09-15T16:01:56Z", "closed_at": "2013-08-07T07:20:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently (pending #8287), libextra will have the following encodings\n- json\n- ebml\n- base64\n- hex\n\nAnd in theory we should add these in the future:\n- xml\n- base32\n- ASN.1\n\n(or at least those are the ones I could think of off the top of my head). Right now they're all placed directly inside the `libextra` folder, but they would probably benefit from a better organization scheme.\n\nCurrently all of the \"encodings\" can generally fall into two categories. One is \"bytes to strings and back\" and the other is a \"generic serialization format\".\n\nRight now I believe that the \"generic serialization format\" is captured nicely via the `serialize::{Encoder, Decoder}` traits, and it unifies json/ebml. @omasanori has brought up concerns about the naming scheme, and my proposal below might alleviate these concerns.\n\nOtherwise, the \"bytes to strings and back\" type of encoding isn't very well unified at this point. There should be a trait (in possibly a new `extra::encoding` module) which unifies base64/base32/hex and whatever else we come across. In my opinion, the trait should look like:\n\n``` rust\ntrait Text {\n  fn encode(&[u8]) -> ~str;\n  fn decode(&str) -> ~[u8];\n}\n```\n\nThis makes it clear what the \"encode\" procedure is and what the \"decode\" procedure is. Additionally, it's explicitly clear that bytes live on _one_ side, and strings live on the other, there's no intermingling between the two of them.\n\nFinally, I think we should move everything around into:\n- `extra::encoding::base64`\n- `extra::encoding::base32`\n- `extra::encoding::hex`\n- `extra::encoding::json`\n- `extra::encoding::ebml`\n\nAnd then `encoding/mod.rs` would define the traits\n- `Text` (is the name too short? if you reference it by `encoding::Text` I think it's clear but that's not always guaranteed)\n- `Serializer` (`serialize::Encoder` today)\n- `Deserializer` (`serialize::Decoder` today)\n\nWhat do others think about this? If this looks good, I'd be more than happy to reorganize everything!\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8310/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8310/timeline", "performed_via_github_app": null, "state_reason": "completed"}