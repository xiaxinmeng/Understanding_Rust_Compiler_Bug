{"url": "https://api.github.com/repos/rust-lang/rust/issues/37534", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37534/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37534/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37534/events", "html_url": "https://github.com/rust-lang/rust/issues/37534", "id": 186771198, "node_id": "MDU6SXNzdWUxODY3NzExOTg=", "number": 37534, "title": "Compiler crashes when trying to use std::ops::Sized", "user": {"login": "torkleyy", "id": 23152057, "node_id": "MDQ6VXNlcjIzMTUyMDU3", "avatar_url": "https://avatars.githubusercontent.com/u/23152057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/torkleyy", "html_url": "https://github.com/torkleyy", "followers_url": "https://api.github.com/users/torkleyy/followers", "following_url": "https://api.github.com/users/torkleyy/following{/other_user}", "gists_url": "https://api.github.com/users/torkleyy/gists{/gist_id}", "starred_url": "https://api.github.com/users/torkleyy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/torkleyy/subscriptions", "organizations_url": "https://api.github.com/users/torkleyy/orgs", "repos_url": "https://api.github.com/users/torkleyy/repos", "events_url": "https://api.github.com/users/torkleyy/events{/privacy}", "received_events_url": "https://api.github.com/users/torkleyy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-11-02T11:05:16Z", "updated_at": "2016-11-06T09:52:29Z", "closed_at": "2016-11-06T09:52:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Minimal example\r\n\r\n```rust\r\nuse std::ops::Sized;\r\n\r\nstruct Test<T: ?Sized>;\r\n\r\nfn main() {}\r\n```\r\n\r\nI tried to build a struct for a generic type T which does not have to be sized.\r\nAccidentally, I `use`d `std::ops::Sized` instead of `std::marker::Sized` so the compiler\r\ncrashed.\r\n\r\nJust doing `use std::ops::Sized;` without actually using it in the code does not crash the compiler.\r\n\r\n## Build platform\r\n\r\nOperating system: \r\n```\r\nelementary OS (based on Ubuntu)\r\n```\r\n\r\nrustc --version --verbose:\r\n```\r\nrustc 1.12.0 (3191fbae9 2016-09-23)\r\nbinary: rustc\r\ncommit-hash: 3191fbae9da539442351f883bdabcad0d72efcb6\r\ncommit-date: 2016-09-23\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.12.0\r\n```\r\n\r\n## Compiler output\r\nOutput:\r\n```\r\nCompiling sized_bug v0.1.0 (file:///home/thomas/Workspace/Idea/sized_bug)\r\n     Running `/home/thomas/.cargo/bin/rustc src/main.rs --crate-name sized_bug --crate-type bin -g -C metadata=f13e3628c6af8bb3 --out-dir /home/thomas/Workspace/Idea/sized_bug/target/debug --emit=dep-info,link -L dependency=/home/thomas/Workspace/Idea/sized_bug/target/debug/deps`\r\nerror[E0432]: unresolved import `std::ops::Sized`. There is no `Sized` in `std::ops`\r\n --> src/main.rs:1:5\r\n  |\r\n1 | use std::ops::Sized;\r\n  |     ^^^^^^^^^^^^^^^\r\n\r\nerror: internal compiler error: ../src/librustc/hir/def.rs:135: attempted .def_id() on invalid def: Err\r\n[Backtrace]\r\n```\r\n\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', ../src/librustc_errors/lib.rs:634\r\nstack backtrace:\r\n   1:     0x7f1b78d87d99 - std::sys::backtrace::tracing::imp::write::h00e948915d1e4c72\r\n   2:     0x7f1b78d985dc - std::panicking::default_hook::_{{closure}}::h7b8a142818383fb8\r\n   3:     0x7f1b78d969d4 - std::panicking::default_hook::h41cf296f654245d7\r\n   4:     0x7f1b78d97138 - std::panicking::rust_panic_with_hook::h4cbd7ca63ce1aee9\r\n   5:     0x7f1b72570ac7 - std::panicking::begin_panic::hd3e81d866d6c5b0a\r\n   6:     0x7f1b725816a5 - rustc_errors::Handler::bug::h60f29cdeff67c1a3\r\n   7:     0x7f1b75ff8054 - rustc::session::opt_span_bug_fmt::_{{closure}}::ha1319a72e07cd73b\r\n   8:     0x7f1b75f39545 - rustc::session::opt_span_bug_fmt::h4badbc71bfeea6f9\r\n   9:     0x7f1b75f39382 - rustc::session::bug_fmt::he780dcb9e1e8a7d5\r\n  10:     0x7f1b75dd04b1 - rustc::hir::def::Def::def_id::hee85e7d3aef08204\r\n  11:     0x7f1b774440ab - rustc_typeck::collect::compute_bounds::ha308332ebf513c1d\r\n  12:     0x7f1b7743fdac - rustc_typeck::collect::ty_generic_predicates::h20f4b7021c2bd11a\r\n  13:     0x7f1b7743db28 - rustc_typeck::collect::convert_typed_item::hee7e4ecf31154291\r\n  14:     0x7f1b7743488f - rustc_typeck::collect::convert_item::h3118362fcab2a9a8\r\n  15:     0x7f1b7742be1f - rustc_typeck::collect::collect_item_types::hd3ea446dd2da1ed8\r\n  16:     0x7f1b7745806b - rustc_typeck::check_crate::h5c76faa7ac951c22\r\n  17:     0x7f1b7917c1b3 - rustc_driver::driver::phase_3_run_analysis_passes::_{{closure}}::he5bb0058670d90b6\r\n  18:     0x7f1b790cd158 - rustc::ty::context::TyCtxt::create_and_enter::h1ad8faffb62f0367\r\n  19:     0x7f1b7913581f - rustc_driver::driver::compile_input::h4d6bc655b7baad10\r\n  20:     0x7f1b79162776 - rustc_driver::run_compiler::h9165e61fc2dd486f\r\n  21:     0x7f1b790a96e2 - std::panicking::try::do_call::hc52dd3bdae996640\r\n  22:     0x7f1b78da6746 - __rust_maybe_catch_panic\r\n  23:     0x7f1b790c2d7a - _<F as alloc..boxed..FnBox<A>>::call_box::h3aad53cfb9d2713a\r\n  24:     0x7f1b78d94d32 - std::sys::thread::Thread::new::thread_start::h4c0ad33b336bc6ea\r\n  25:     0x7f1b71d18709 - start_thread\r\n  26:     0x7f1b789d882c - clone\r\n  27:                0x0 - <unknown>\r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37534/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37534/timeline", "performed_via_github_app": null, "state_reason": "completed"}