{"url": "https://api.github.com/repos/rust-lang/rust/issues/96983", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/96983/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/96983/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/96983/events", "html_url": "https://github.com/rust-lang/rust/issues/96983", "id": 1234233495, "node_id": "I_kwDOAAsO6M5JkOiX", "number": 96983, "title": "many debuginfo tests fail with SIGSEGV, SIGILL, SIGABRT with gdb 11.2 on armhf (armv7-unknown-linux-gnueabihf)", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-05-12T16:34:50Z", "updated_at": "2022-11-14T16:25:25Z", "closed_at": "2022-11-14T16:25:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This seems like a separate issue from #94458 as it only happens on armhf in Debian:\r\n\r\n- good build with gdb 10 / armhf - https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=armhf&ver=1.59.0%2Bdfsg1-1%7Eexp1&stamp=1648671960&raw=0 (note: overall build failed for other reasons, but the debuginfo tests passed)\r\n- bad build with gdb 11.2 / armhf - https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=armhf&ver=1.59.0%2Bdfsg1-1&stamp=1652370219&raw=0\r\n- good build with gdb 11.2 / amd64 - https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=amd64&ver=1.59.0%2Bdfsg1-1&stamp=1652282324&raw=0\r\n\r\n~~~~\r\ntest [debuginfo-gdb] debuginfo/associated-types.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/by-value-self-argument-in-trait-impl.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/captured-fields-2.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/closure-in-generic-function.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/captured-fields-1.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/destructured-fn-argument.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/function-arguments.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generator-objects.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generator-locals.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generic-function.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generic-functions-nested.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generic-method-on-generic-struct.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/generic-static-method-on-struct-and-enum.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-for-loop.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-match.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-if.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-stack-closure.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-unconditional-loop.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-unique-closure.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-in-while.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/lexical-scope-with-macro.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/method-on-generic-struct.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/method-on-struct.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/method-on-tuple-struct.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/method-on-trait.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/multi-cgu.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/multiple-functions.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/multiple-functions-equal-var-names.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/name-shadowing-and-scope-nesting.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/self-in-default-method.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/self-in-generic-default-method.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/shadowed-argument.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/shadowed-variable.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/simple-lexical-scope.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/static-method-on-struct-and-enum.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/step-into-match.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/var-captured-in-sendable-closure.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/var-captured-in-nested-closure.rs ... FAILED\r\ntest [debuginfo-gdb] debuginfo/var-captured-in-stack-closure.rs ... FAILED\r\n~~~~\r\n\r\nExample errors:\r\n\r\n~~~~\r\nBreakpoint 1 at 0x6e4: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 111.\r\nBreakpoint 2 at 0x77c: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 118.\r\nBreakpoint 3 at 0x7d8: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 122.\r\nBreakpoint 4 at 0x874: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 130.\r\nBreakpoint 5 at 0x8e8: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 137.\r\nBreakpoint 6 at 0x90c: file /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs, line 140.\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/arm-linux-gnueabihf/libthread_db.so.1\".\r\n\r\nBreakpoint 1, associated_types::assoc_struct<i32> (arg=...) at /<<PKGBUILDDIR>>/src/test/debuginfo/associated-types.rs:111\r\n111         zzz(); // #break\r\n$1 = associated_types::Struct<i32> {b: -1, b1: 0}\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n0x004005b0 in _start ()\r\n\r\n------stderr------------------------------\r\n/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/associated-types.gdb/associated-types.debugger.script:17: Error in sourced command file:\r\nNo symbol 'inferred' in current context\r\n\r\n------------------------------------------\r\n\r\nerror: gdb failed to execute\r\nstatus: exit status: 1\r\ncommand: \"/usr/bin/gdb\" \"-quiet\" \"-batch\" \"-nx\" \"-command=/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/associated-types.gdb/associated-types.debugger.script\"\r\n~~~~\r\n\r\n~~~~\r\nBreakpoint 1 at 0x734: file /<<PKGBUILDDIR>>/src/test/debuginfo/by-value-self-argument-in-trait-impl.rs, line 52.\r\nBreakpoint 2 at 0x760: file /<<PKGBUILDDIR>>/src/test/debuginfo/by-value-self-argument-in-trait-impl.rs, line 64.\r\nBreakpoint 3 at 0x788: file /<<PKGBUILDDIR>>/src/test/debuginfo/by-value-self-argument-in-trait-impl.rs, line 71.\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/arm-linux-gnueabihf/libthread_db.so.1\".\r\n\r\nBreakpoint 1, by_value_self_argument_in_trait_impl::{impl#0}::method (self=1111) at /<<PKGBUILDDIR>>/src/test/debuginfo/by-value-self-argument-in-trait-impl.rs:52\r\n52              zzz(); // #break\r\n$1 = 1111\r\n\r\nProgram received signal SIGILL, Illegal instruction.\r\n0x004006b2 in __do_global_dtors_aux ()\r\n\r\n------stderr------------------------------\r\n/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/by-value-self-argument-in-trait-impl.gdb/by-value-self-argument-in-trait-impl.debugger.script:14: Error in sourced command file:\r\nNo symbol 'self' in current context\r\n\r\n------------------------------------------\r\n\r\nerror: gdb failed to execute\r\nstatus: exit status: 1\r\ncommand: \"/usr/bin/gdb\" \"-quiet\" \"-batch\" \"-nx\" \"-command=/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/by-value-self-argument-in-trait-impl.gdb/by-value-self-argument-in-trait-impl.debugger.script\"\r\n~~~~\r\n\r\nMost other failures are due to SIGSEGV or SIGILL, but we also have one SIGABRT:\r\n\r\n~~~~\r\nBreakpoint 1 at 0x1088: method-on-generic-struct.rs:137. (2 locations)\r\nBreakpoint 2 at 0x117c: method-on-generic-struct.rs:142. (2 locations)\r\nBreakpoint 3 at 0x12c4: file /<<PKGBUILDDIR>>/src/test/debuginfo/method-on-generic-struct.rs, line 147.\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/arm-linux-gnueabihf/libthread_db.so.1\".\r\n\r\nBreakpoint 1, method_on_generic_struct::Struct<(u32, i32)>::self_by_ref<(u32, i32)> (self=0xfffeeb2c, arg1=-1, arg2=-2) at /<<PKGBUILDDIR>>/src/test/debuginfo/method-on-generic-struct.rs:137\r\n137             zzz(); // #break\r\n$1 = method_on_generic_struct::Struct<(u32, i32)> {x: (8888, -8888)}\r\n$2 = -1\r\n$3 = -2\r\n\r\nProgram received signal SIGABRT, Aborted.\r\n0xf7d337d6 in ?? () from /lib/arm-linux-gnueabihf/libc.so.6\r\n\r\n------stderr------------------------------\r\n/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/method-on-generic-struct.gdb/method-on-generic-struct.debugger.script:16: Error in sourced command file:\r\nNo symbol 'self' in current context\r\n\r\n------------------------------------------\r\n\r\nerror: gdb failed to execute\r\nstatus: exit status: 1\r\ncommand: \"/usr/bin/gdb\" \"-quiet\" \"-batch\" \"-nx\" \"-command=/<<PKGBUILDDIR>>/build/armv7-unknown-linux-gnueabihf/test/debuginfo/method-on-generic-struct.gdb/method-on-generic-struct.debugger.script\"\r\n~~~~\r\n", "closed_by": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/96983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/96983/timeline", "performed_via_github_app": null, "state_reason": "completed"}