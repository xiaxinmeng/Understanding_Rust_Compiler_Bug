{"url": "https://api.github.com/repos/rust-lang/rust/issues/34562", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34562/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34562/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34562/events", "html_url": "https://github.com/rust-lang/rust/issues/34562", "id": 163009564, "node_id": "MDU6SXNzdWUxNjMwMDk1NjQ=", "number": 34562, "title": "Explicitly suggest dereferencing when type mismatch differs by reference only", "user": {"login": "kornelski", "id": 72159, "node_id": "MDQ6VXNlcjcyMTU5", "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kornelski", "html_url": "https://github.com/kornelski", "followers_url": "https://api.github.com/users/kornelski/followers", "following_url": "https://api.github.com/users/kornelski/following{/other_user}", "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions", "organizations_url": "https://api.github.com/users/kornelski/orgs", "repos_url": "https://api.github.com/users/kornelski/repos", "events_url": "https://api.github.com/users/kornelski/events{/privacy}", "received_events_url": "https://api.github.com/users/kornelski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-06-29T19:41:43Z", "updated_at": "2017-09-23T16:48:10Z", "closed_at": "2017-09-23T16:48:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Type mismatch error could be more specific and friendlier if it had special handling of case where the compiler found `&type`, but expected `type`.\n\n> error: mismatched types [--explain E0308]\n> \u2026\n> ^ expected enum `std::option::Option`, found &-ptr\n\nThe current message is correct and (with notes) it's possible to understand it, but \"expected `type`, **found &-ptr**\" obscures what type has actually been found (#25426), and makes it sound like a worse mismatch than it really is.\n\n> note: expected type `std::option::Option<_>`\n> note:    found type `&std::option::Option<foo>`\n\nNotes for this error make the problem clear, but they're repeating the first part of the message, so it's already using four lines to say one thing. Listing both types requires me to compare them and spot the difference myself.\n\nI hope there are no weird edge cases in this situation, and the compiler could simplify the message by proposing solution outright. Something like:\n\n> error: value must be dereferenced\n> Expected `std::option::Option<_>`. Use `*var` instead of `var` to dereference `&std::option::Option<foo>`.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34562/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34562/timeline", "performed_via_github_app": null, "state_reason": "completed"}