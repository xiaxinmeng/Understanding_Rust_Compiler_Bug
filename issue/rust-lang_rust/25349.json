{"url": "https://api.github.com/repos/rust-lang/rust/issues/25349", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25349/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25349/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25349/events", "html_url": "https://github.com/rust-lang/rust/issues/25349", "id": 75745837, "node_id": "MDU6SXNzdWU3NTc0NTgzNw==", "number": 25349, "title": "ICE possibly related to empty trait and type alias ", "user": {"login": "ragnard", "id": 882, "node_id": "MDQ6VXNlcjg4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ragnard", "html_url": "https://github.com/ragnard", "followers_url": "https://api.github.com/users/ragnard/followers", "following_url": "https://api.github.com/users/ragnard/following{/other_user}", "gists_url": "https://api.github.com/users/ragnard/gists{/gist_id}", "starred_url": "https://api.github.com/users/ragnard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ragnard/subscriptions", "organizations_url": "https://api.github.com/users/ragnard/orgs", "repos_url": "https://api.github.com/users/ragnard/repos", "events_url": "https://api.github.com/users/ragnard/events{/privacy}", "received_events_url": "https://api.github.com/users/ragnard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-12T21:28:51Z", "updated_at": "2015-08-14T20:34:10Z", "closed_at": "2015-08-14T20:34:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "I got a consistent ICE on a piece of code. I'm a rust newbie so I can't characterise the code well, but I've manage to narrow it down to the following:\n\n``` rust\nuse std::collections::HashMap;\n\ntrait Empty { }\n\nstruct S;\nimpl Empty for S { }\n\ntype U = HashMap<String, Empty>;\n\ntrait F {\n    fn f(self, u: U);\n}\n\nimpl F for S {\n    fn f(self, u: U) { }\n}\n```\n\nError message:\n\n```\nsrc/lib.rs:1:1: 1:1 error: internal compiler error: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(core::marker::Sized)),depth=2),Unimplemented)]` fulfilling during trans\nsrc/lib.rs:1 use std::collections::HashMap;\n             ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /tmp/nix-build-rustc-1.0.0-dev-g0cf99c3.drv-0/rust-0cf99c3/src/libsyntax/diagnostic.rs:149\n```\n## Meta\n\n```\nrustc 1.0.0-dev (built 2015-04-28)\nbinary: rustc\ncommit-hash: unknown\ncommit-date: unknown\nbuild-date: 2015-04-28\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-dev\n```\n\nStacktrace: If I run with `RUST_BACKTRACE=1` I don't get a stacktrace, only \"Illegal Instruction\":\n\n```\n$ RUST_BACKTRACE=1 rustc src/lib.rs --crate-name rust_ice --crate-type lib -g -C metadata=0fbc93cfda687298 -C extra-filename=-0fbc93cfda687298 --out-dir /home/ragge/projects/github/ragnard/rust-ice/target/debug --emit=dep-info,link -L dependency=/home/ragge/projects/github/ragnard/rust-ice/target/debug -L dependency=/home/ragge/projects/github/ragnard/rust-ice/target/debug/deps\nsrc/lib.rs:5:1: 5:10 warning: struct is never used: `S`, #[warn(dead_code)] on by default\nsrc/lib.rs:5 struct S;\n             ^~~~~~~~~\nsrc/lib.rs:15:16: 15:17 warning: unused variable: `u`, #[warn(unused_variables)] on by default\nsrc/lib.rs:15     fn f(self, u: U) { }\n                             ^\nsrc/lib.rs:1:1: 1:1 error: internal compiler error: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(core::marker::Sized)),depth=2),Unimplemented)]` fulfilling during trans\nsrc/lib.rs:1 use std::collections::HashMap;\n             ^\nIllegal instruction\n\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25349/timeline", "performed_via_github_app": null, "state_reason": "completed"}