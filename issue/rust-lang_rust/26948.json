{"url": "https://api.github.com/repos/rust-lang/rust/issues/26948", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26948/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26948/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26948/events", "html_url": "https://github.com/rust-lang/rust/issues/26948", "id": 94397416, "node_id": "MDU6SXNzdWU5NDM5NzQxNg==", "number": 26948, "title": "ICE with attempted functional record update on struct-like enum variant", "user": {"login": "comex", "id": 47517, "node_id": "MDQ6VXNlcjQ3NTE3", "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comex", "html_url": "https://github.com/comex", "followers_url": "https://api.github.com/users/comex/followers", "following_url": "https://api.github.com/users/comex/following{/other_user}", "gists_url": "https://api.github.com/users/comex/gists{/gist_id}", "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comex/subscriptions", "organizations_url": "https://api.github.com/users/comex/orgs", "repos_url": "https://api.github.com/users/comex/repos", "events_url": "https://api.github.com/users/comex/events{/privacy}", "received_events_url": "https://api.github.com/users/comex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-07-10T21:27:55Z", "updated_at": "2015-07-17T08:03:35Z", "closed_at": "2015-07-17T08:03:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\nfn main() {\n    enum Foo { A { x: u32 } }\n    let orig = Foo::A { x: 5 };\n    Foo::A { x: 6, ..orig };\n}\n```\n\nproduces:\n\n```\n% RUST_BACKTRACE=1 rustc huh.rs\nerror: internal compiler error: no type for node 21: expr orig (id=21) in fcx 0x7000007f2ce8\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/diagnostic.rs:249\n\nstack backtrace:\n   1:        0x1057b5f75 - sys::backtrace::write::hb7817e9439be7a84Gns\n   2:        0x1057be7a3 - panicking::on_panic::h335276ba539d8a1eXFw\n   3:        0x10577a552 - rt::unwind::begin_unwind_inner::hcfcf29e2fa5eb44c9nw\n   4:        0x1030aaaff - rt::unwind::begin_unwind::h5482025458621971206\n   5:        0x1030abc4c - diagnostic::Handler::bug::h3ca8647e914d551d8dB\n   6:        0x1026aa39b - session::Session::bug::h76ab16652152fc8ei4s\n   7:        0x10230a74c - check::FnCtxt<'a, 'tcx>::node_ty::hf31c976ee45b3100C5o\n   8:        0x10231cc43 - check::regionck::visit_expr::h2fc277490e85e226m8c\n   9:        0x10231e4ea - check::regionck::visit_expr::h2fc277490e85e226m8c\n  10:        0x10231b91b - check::regionck::Rcx<'a, 'tcx>::visit_fn_body::h8f06fa204a7fde3d7Kc\n  11:        0x10231aef7 - check::regionck::regionck_fn::h04aac3d991d57599xDc\n  12:        0x102385de2 - check::check_bare_fn::h11b31fc36de4a0d7pvn\n  13:        0x102383927 - check::check_item_body::h90e15c93a2c387792Vn\n  14:        0x102385742 - check::check_item_types::h4195788235c1d589Wsn\n  15:        0x1024451b7 - check_crate::h4fe29ecb63e75c6eWWC\n  16:        0x101ca9c99 - driver::phase_3_run_analysis_passes::closure.15876\n  17:        0x101ca8642 - middle::ty::ctxt<'tcx>::create_and_enter::h17917324662646128153\n  18:        0x101ca37dd - driver::phase_3_run_analysis_passes::h1675160521771497634\n  19:        0x101c82fa7 - driver::compile_input::hf806de40ef3c0497Tba\n  20:        0x101d68d5f - run_compiler::h2cc1d87c2af5b2f0A7b\n  21:        0x101d66613 - boxed::F.FnBox<A>::call_box::h15706803937188417864\n  22:        0x101d65dd7 - rt::unwind::try::try_fn::h12079950680435742787\n  23:        0x10584bb28 - rust_try_inner\n  24:        0x10584bb15 - rust_try\n  25:        0x1057a84e5 - rt::unwind::try::inner_try::h49b0c6a05a06a1fb2jw\n  26:        0x101d66008 - boxed::F.FnBox<A>::call_box::h4462154897920443805\n  27:        0x1057bd22d - sys::thread::Thread::new::thread_start::h7a7f95eb580d5892cIv\n  28:     0x7fff8e901c8e - _pthread_body\n  29:     0x7fff8e901c0b - _pthread_start\n```\n\nNote: omitting the field before the `, ..orig` yields a \"missing field\" error.\n\n(I can't find anything this would be a dupe of.)\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26948/timeline", "performed_via_github_app": null, "state_reason": "completed"}