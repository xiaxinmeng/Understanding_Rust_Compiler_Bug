{"url": "https://api.github.com/repos/rust-lang/rust/issues/72448", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72448/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72448/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72448/events", "html_url": "https://github.com/rust-lang/rust/issues/72448", "id": 622894949, "node_id": "MDU6SXNzdWU2MjI4OTQ5NDk=", "number": 72448, "title": "Stabilize core::panic::Location::caller", "user": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 919710011, "node_id": "MDU6TGFiZWw5MTk3MTAwMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-merge", "name": "disposition-merge", "color": "008800", "default": false, "description": "This issue / PR is in PFCP or FCP with a disposition to merge it."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}, {"id": 1606844895, "node_id": "MDU6TGFiZWwxNjA2ODQ0ODk1", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-track_caller", "name": "F-track_caller", "color": "f9c0cc", "default": false, "description": "`#![feature(track_caller)]`"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2020-05-22T01:57:12Z", "updated_at": "2020-10-09T12:35:35Z", "closed_at": "2020-10-09T12:35:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The lang FCP for `#[track_caller]` is happening in https://github.com/rust-lang/rust/pull/72445. This is a libs FCP for https://doc.rust-lang.org/nightly/std/panic/struct.Location.html#method.caller which is under the same feature gate and required for making use of `#[track_caller]` in library code.\r\n\r\nRefer to @anp's [stabilization report](https://github.com/rust-lang/rust/pull/72445#issue-421643817) and the [method's example code](https://doc.rust-lang.org/nightly/std/panic/struct.Location.html#method.caller).\r\n\r\nIn particular:\r\n\r\n- The return type is `&'static Location<'static>` which resembles the return type of [std::panic::PanicInfo::location](https://doc.rust-lang.org/nightly/std/panic/struct.PanicInfo.html#method.location) (`Option<&'a Location<'a>>`) but static and non-optional.\r\n\r\n- The location points to the outermost call site not inside of a `#[track_caller]` function.\r\n\r\n```rust\r\n#[track_caller]\r\nfn f() -> &'static Location<'static> {\r\n    Location::caller()\r\n}\r\n\r\nfn g() -> &'static Location<'static> {\r\n    f() /*\r\n    ^ calling g() gives a location whose file()/line()/column() point to here\r\n        */\r\n}\r\n```\r\n\r\n@rust-lang/libs", "closed_by": {"login": "Dylan-DPC-zz", "id": 12371125, "node_id": "MDQ6VXNlcjEyMzcxMTI1", "avatar_url": "https://avatars.githubusercontent.com/u/12371125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC-zz", "html_url": "https://github.com/Dylan-DPC-zz", "followers_url": "https://api.github.com/users/Dylan-DPC-zz/followers", "following_url": "https://api.github.com/users/Dylan-DPC-zz/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC-zz/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC-zz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC-zz/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC-zz/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC-zz/repos", "events_url": "https://api.github.com/users/Dylan-DPC-zz/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC-zz/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72448/reactions", "total_count": 3, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 3, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72448/timeline", "performed_via_github_app": null, "state_reason": "completed"}