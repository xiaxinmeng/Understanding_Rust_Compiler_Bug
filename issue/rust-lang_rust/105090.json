{"url": "https://api.github.com/repos/rust-lang/rust/issues/105090", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105090/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105090/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105090/events", "html_url": "https://github.com/rust-lang/rust/issues/105090", "id": 1469962897, "node_id": "I_kwDOAAsO6M5XndqR", "number": 105090, "title": "Iterating on an array of ranges looks syntactically plausible but is not, and the error message is nonsense to a beginner", "user": {"login": "Chris--B", "id": 1052157, "node_id": "MDQ6VXNlcjEwNTIxNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1052157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chris--B", "html_url": "https://github.com/Chris--B", "followers_url": "https://api.github.com/users/Chris--B/followers", "following_url": "https://api.github.com/users/Chris--B/following{/other_user}", "gists_url": "https://api.github.com/users/Chris--B/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chris--B/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chris--B/subscriptions", "organizations_url": "https://api.github.com/users/Chris--B/orgs", "repos_url": "https://api.github.com/users/Chris--B/repos", "events_url": "https://api.github.com/users/Chris--B/events{/privacy}", "received_events_url": "https://api.github.com/users/Chris--B/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-30T17:07:42Z", "updated_at": "2022-11-30T17:07:42Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nGiven the following code: https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=52eead7828aab2c2e36ac25556a721ff\r\n\r\n```rust\r\nfn main() {\r\n    let mut x = [[0; 3]; 3];\r\n    x[0][0] = 7; // works\r\n    for i in [0..3] {\r\n        for j in [0..3] {\r\n            x[i][j] = 7; // complains\r\n        }\r\n    }\r\n    dbg!(x);\r\n}\r\n```\r\n\r\nThe current output (on stable & nightly) is:\r\n\r\n```\r\nCompiling playground v0.0.1 (/playground)\r\nerror[[E0308]](https://doc.rust-lang.org/nightly/error-index.html#E0308): mismatched types\r\n --> src/main.rs:6:23\r\n  |\r\n6 |             x[i][j] = 7; // complains\r\n  |             -------   ^ expected slice `[[{integer}; 3]]`, found integer\r\n  |             |\r\n  |             expected due to the type of this binding\r\n\r\nerror[[E0277]](https://doc.rust-lang.org/nightly/error-index.html#E0277): the size for values of type `[[{integer}; 3]]` cannot be known at compilation time\r\n --> src/main.rs:6:13\r\n  |\r\n6 |             x[i][j] = 7; // complains\r\n  |             ^^^^^^^ doesn't have a size known at compile-time\r\n  |\r\n  = help: the trait `Sized` is not implemented for `[[{integer}; 3]]`\r\n  = note: the left-hand-side of an assignment must have a statically known size\r\n\r\nSome errors have detailed explanations: E0277, E0308.\r\nFor more information about an error, try `rustc --explain E0277`.\r\nerror: could not compile `playground` due to 2 previous errors\r\n```\r\nIdeally the output could recognize that what they *probably* meant was to iterate the range directly. I'm not sure why you would ever iterate over a temp array with a single element that's a range and then index using that. If you want the ranges, you won't be indexing. If you want the indexing, it would be nice for the compiler to suggest removing the `[` `]` around the range.\r\n\r\nI feel that the current error message confuses new developers, because while they're trying to figure out indexing in Rust, the error message is talking about a trait named `Size`, slices, and how something doesn't have compile-time known sizes. Totally out of their depth. In practice, this gets caught as soon as they ask for help but I was surprised at how unhelpful the error message here is.\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105090/timeline", "performed_via_github_app": null, "state_reason": null}