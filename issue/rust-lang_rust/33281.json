{"url": "https://api.github.com/repos/rust-lang/rust/issues/33281", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/33281/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/33281/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/33281/events", "html_url": "https://github.com/rust-lang/rust/issues/33281", "id": 151967873, "node_id": "MDU6SXNzdWUxNTE5Njc4NzM=", "number": 33281, "title": "\"constant expression should not reach expr::trans_def\" occurred during test run", "user": {"login": "Zephilim", "id": 2083615, "node_id": "MDQ6VXNlcjIwODM2MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2083615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zephilim", "html_url": "https://github.com/Zephilim", "followers_url": "https://api.github.com/users/Zephilim/followers", "following_url": "https://api.github.com/users/Zephilim/following{/other_user}", "gists_url": "https://api.github.com/users/Zephilim/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zephilim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zephilim/subscriptions", "organizations_url": "https://api.github.com/users/Zephilim/orgs", "repos_url": "https://api.github.com/users/Zephilim/repos", "events_url": "https://api.github.com/users/Zephilim/events{/privacy}", "received_events_url": "https://api.github.com/users/Zephilim/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-04-29T21:00:16Z", "updated_at": "2016-04-30T07:06:42Z", "closed_at": "2016-04-30T07:00:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm a Rust newbie (well experienced with C++/C#... tho), and I ran into this error whilst running tests with cargo.\n\nHere is a test case that causes this compiler fault to occur:\n\n```\n#[cfg(test)]\nmod tests {\n    const DUFF_EXPRESSION: &'static str = \"A STRING\";\n\n    #[test]\n    #[ignore]\n    fn bug_report_test() {\n        DUFF_EXPRESSION;\n    }\n}\n```\n\n... and this is the output (with BACK_TRACE set to 1):\n\n```\nc:\\dev\\sandpit\\rust\\expressions>cargo test\n   Compiling expressions v0.1.0 (file:///C:/dev/sandpit/rust/expressions)\nsrc\\lib.rs:22:9: 22:25 warning: path statement with no effect, #[warn(path_statements)] on by default\nsrc\\lib.rs:22         DUFF_EXPRESSION;\n                      ^~~~~~~~~~~~~~~~\nsrc\\lib.rs:22:9: 22:24 error: internal compiler error: constant expression should not reach expr::trans_def\nsrc\\lib.rs:22         DUFF_EXPRESSION;\n                      ^~~~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax\\errors/mod.rs:449\nstack backtrace:\n   0:         0x622bbbba - strncmp\n   1:         0x622c4262 - strncmp\n   2:         0x62285398 - strncmp\n   3:         0x6ea5bdea - strncmp\n   4:         0x6ea5b870 - strncmp\n   5:           0x9945f3 - strncmp\n   6:         0x6fe6314f - strncmp\n   7:         0x6fe5c207 - strncmp\n   8:         0x6fdcc8b9 - strncmp\n   9:         0x6fe3ac17 - strncmp\n  10:         0x6fdc8f2d - strncmp\n  11:         0x6fdc4128 - strncmp\n  12:         0x6fdc97f9 - strncmp\n  13:         0x6fdcdb95 - strncmp\n  14:         0x6fde70ca - strncmp\n  15:         0x6fde5289 - strncmp\n  16:         0x6fdd95fa - strncmp\n  17:         0x6fadb66e - strncmp\n  18:         0x6fad0133 - strncmp\n  19:         0x6fac980f - strncmp\n  20:         0x6fac4e90 - strncmp\n  21:         0x6fa951ba - strncmp\n  22:         0x6fa864d4 - strncmp\n  23:         0x6fa8395e - strncmp\n  24:         0x622aebef - strncmp\n  25:         0x6fa83e3c - strncmp\n  26:         0x622c230d - strncmp\n  27:         0x772d59bc - strncmp\n\nCould not compile `expressions`.\n```\n\nSome extra info:\n\n```\nc:\\dev\\sandpit\\rust\\expressions>rustc --version --verbose\nrustc 1.7.0 (a5d1e7a59 2016-02-29)\nbinary: rustc\ncommit-hash: a5d1e7a59a2a3413c377b003075349f854304b5e\ncommit-date: 2016-02-29\nhost: x86_64-pc-windows-gnu\nrelease: 1.7.0\n```\n", "closed_by": {"login": "Zephilim", "id": 2083615, "node_id": "MDQ6VXNlcjIwODM2MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/2083615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zephilim", "html_url": "https://github.com/Zephilim", "followers_url": "https://api.github.com/users/Zephilim/followers", "following_url": "https://api.github.com/users/Zephilim/following{/other_user}", "gists_url": "https://api.github.com/users/Zephilim/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zephilim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zephilim/subscriptions", "organizations_url": "https://api.github.com/users/Zephilim/orgs", "repos_url": "https://api.github.com/users/Zephilim/repos", "events_url": "https://api.github.com/users/Zephilim/events{/privacy}", "received_events_url": "https://api.github.com/users/Zephilim/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/33281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/33281/timeline", "performed_via_github_app": null, "state_reason": "completed"}