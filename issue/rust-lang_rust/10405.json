{"url": "https://api.github.com/repos/rust-lang/rust/issues/10405", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10405/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10405/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10405/events", "html_url": "https://github.com/rust-lang/rust/issues/10405", "id": 22415002, "node_id": "MDU6SXNzdWUyMjQxNTAwMg==", "number": 10405, "title": "Abort at program exist with RUST_LOG=debug and SIngleThreaded task", "user": {"login": "MicahChalmer", "id": 698400, "node_id": "MDQ6VXNlcjY5ODQwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/698400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MicahChalmer", "html_url": "https://github.com/MicahChalmer", "followers_url": "https://api.github.com/users/MicahChalmer/followers", "following_url": "https://api.github.com/users/MicahChalmer/following{/other_user}", "gists_url": "https://api.github.com/users/MicahChalmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/MicahChalmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MicahChalmer/subscriptions", "organizations_url": "https://api.github.com/users/MicahChalmer/orgs", "repos_url": "https://api.github.com/users/MicahChalmer/repos", "events_url": "https://api.github.com/users/MicahChalmer/events{/privacy}", "received_events_url": "https://api.github.com/users/MicahChalmer/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-11-10T19:11:46Z", "updated_at": "2013-11-11T01:06:07Z", "closed_at": "2013-11-11T01:06:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you set RUST_LOG=debug and run a program that spawns a task in SingleThreaded mode, the program will abort at the end with a lovecraft quote and the message \"thread-local pointer is null. bogus!\"  This program is sufficient to see the crash:\n\n``` rust\nuse std::task;\n\nfn main() {\n    let mut t = task::task();\n    t.sched_mode(task::SingleThreaded);\n    t.spawn(|| ());\n}\n```\n\nThe output, if run with RUST_LOG=debug:\n\n```\nspawn calling run_task\nboostrapping a 1:1 scheduler\n\n\nThe ocean ate the last of the land and poured into the smoking gulf, thereby\ngiving up all it had ever conquered. From the new-flooded lands it flowed\nagain, uncovering death and decay; and from its ancient and immemorial bed it\ntrickled loathsomely, uncovering nighted secrets of the years when Time was\nyoung and the gods unborn. Above the waves rose weedy remembered spires. The\nmoon laid pale lilies of light on dead London, and Paris stood up from its damp\ngrave to be sanctified with star-dust. Then rose spires and monoliths that were\nweedy but not remembered; terrible spires and monoliths of lands that men never\nknew were lands...\n\nfatal runtime error: thread-local pointer is null. bogus!\n```\n\nwithout RUST_LOG=debug it runs fine.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10405/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10405/timeline", "performed_via_github_app": null, "state_reason": "completed"}