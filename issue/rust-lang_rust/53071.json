{"url": "https://api.github.com/repos/rust-lang/rust/issues/53071", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/53071/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/53071/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/53071/events", "html_url": "https://github.com/rust-lang/rust/issues/53071", "id": 347645336, "node_id": "MDU6SXNzdWUzNDc2NDUzMzY=", "number": 53071, "title": "rustc SIGSEGV on AArch64 with nightly  in lib sysfs_gpio on Fedora 28", "user": {"login": "uwearzt", "id": 105293, "node_id": "MDQ6VXNlcjEwNTI5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/105293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uwearzt", "html_url": "https://github.com/uwearzt", "followers_url": "https://api.github.com/users/uwearzt/followers", "following_url": "https://api.github.com/users/uwearzt/following{/other_user}", "gists_url": "https://api.github.com/users/uwearzt/gists{/gist_id}", "starred_url": "https://api.github.com/users/uwearzt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uwearzt/subscriptions", "organizations_url": "https://api.github.com/users/uwearzt/orgs", "repos_url": "https://api.github.com/users/uwearzt/repos", "events_url": "https://api.github.com/users/uwearzt/events{/privacy}", "received_events_url": "https://api.github.com/users/uwearzt/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-04T20:14:24Z", "updated_at": "2018-08-14T15:58:07Z", "closed_at": "2018-08-14T15:57:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Howto reproduce:\r\n\r\n1. Create a new project ```cargo init --bin```\r\n2. Add sysfs_gpio as dependency\r\n```\r\n[dependencies]\r\nsysfs_gpio = \"0.5.3\"\r\n```\r\n3. compile\r\n```\r\n     Running `rustc --crate-name sysfs_gpio /home/uwe/.cargo/registry/src/github.com-1ecc6299db9ec823/sysfs_gpio-0.5.3/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=11ce9553bd486458 -C extra-filename=-11ce9553bd486458 --out-dir /home/uwe/rust-test/target/debug/deps -L dependency=/home/uwe/rust-test/target/debug/deps --extern nix=/home/uwe/rust-test/target/debug/deps/libnix-1532c76627b70904.rlib --cap-lints allow`\r\nerror: Could not compile `sysfs_gpio`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name sysfs_gpio /home/uwe/.cargo/registry/src/github.com-1ecc6299db9ec823/sysfs_gpio-0.5.3/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=11ce9553bd486458 -C extra-filename=-11ce9553bd486458 --out-dir /home/uwe/rust-test/target/debug/deps -L dependency=/home/uwe/rust-test/target/debug/deps --extern nix=/home/uwe/rust-test/target/debug/deps/libnix-1532c76627b70904.rlib --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\n```\r\n\r\nAdditional infos:\r\n```\r\ncoredumpctl list                                                                                                                          21:57:42\r\nTIME                            PID   UID   GID SIG COREFILE  EXE\r\nSat 2018-08-04 21:57:45 CEST   1548  1000  1000  11 present   /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/bin/rustc\r\n```\r\n\r\n```\r\ncoredumpctl gdb                                                                                                                           21:57:50\r\n           PID: 1548 (rustc)\r\n           UID: 1000 (uwe)\r\n           GID: 1000 (uwe)\r\n        Signal: 11 (SEGV)\r\n     Timestamp: Sat 2018-08-04 21:57:41 CEST (25s ago)\r\n  Command Line: /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/bin/rustc --crate-name sysfs_gpio /home/uwe/.cargo/registry/src/github.com-1ecc6299db9ec823/sysfs_gpio-0.5.3/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=11ce9553bd486458 -C extra-filename=-11ce9553bd486458 --out-dir /home/uwe/rust-test/target/debug/deps -L dependency=/home/uwe/rust-test/target/debug/deps --extern nix=/home/uwe/rust-test/target/debug/deps/libnix-1532c76627b70904.rlib --cap-lints allow\r\n    Executable: /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/bin/rustc\r\n Control Group: /user.slice/user-1000.slice/session-1.scope\r\n          Unit: session-1.scope\r\n         Slice: user-1000.slice\r\n       Session: 1\r\n     Owner UID: 1000 (uwe)\r\n       Boot ID: 8fc8e93af1d84b5aa43ba10d1a51e6e5\r\n    Machine ID: 8db0a625299b41ff83148b6a511913da\r\n      Hostname: leda.localdomain\r\n       Storage: /var/lib/systemd/coredump/core.rustc.1000.8fc8e93af1d84b5aa43ba10d1a51e6e5.1548.1533412661000000.lz4\r\n       Message: Process 1548 (rustc) of user 1000 dumped core.\r\n                \r\n                Stack trace of thread 1552:\r\n                #0  0x0000ffffac41a1e0 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #1  0x0000ffffac41a1e0 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #2  0x0000ffffac45def4 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #3  0x0000ffffac45e16c n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #4  0x0000ffffac77f260 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #5  0x0000ffffad048060 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #6  0x0000ffffad048138 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #7  0x0000ffffad047bc0 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n                #8  0x0000ffffab8c6600 n/a (/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so)\r\n\r\nGNU gdb (GDB) Fedora 8.1-25.fc28\r\nCopyright (C) 2018 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"aarch64-redhat-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n<http://www.gnu.org/software/gdb/documentation/>.\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/bin/rustc...(no debugging symbols found)...done.\r\n[New LWP 1552]\r\n[New LWP 1554]\r\n[New LWP 1555]\r\n[New LWP 1550]\r\n[New LWP 1549]\r\n[New LWP 1548]\r\nbt\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\r\nCore was generated by `/home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/bin/rustc --crat'.\r\nProgram terminated with signal SIGSEGV, Segmentation fault.\r\n#0  0x0000ffffac41a1e0 in llvm::AArch64RegisterBankInfo::getInstrMapping(llvm::MachineInstr const&) const ()\r\n   from /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n[Current thread is 1 (Thread 0xffffa7ddfe90 (LWP 1552))]\r\n(gdb) bt\r\n#0  0x0000ffffac41a1e0 in llvm::AArch64RegisterBankInfo::getInstrMapping(llvm::MachineInstr const&) const ()\r\n   from /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#1  0x0000ffffac45def4 in llvm::RegBankSelect::assignInstr(llvm::MachineInstr&) ()\r\n   from /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#2  0x0000ffffac45e16c in llvm::RegBankSelect::runOnMachineFunction(llvm::MachineFunction&) ()\r\n   from /home/uwe/.rustup/toolchains/nightly-aarch64-unknown-linux-gnu/lib/rustlib/aarch64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\r\n```\r\n\r\n```\r\nrustc -V                                                                                                                                  22:13:18\r\nrustc 1.30.0-nightly (3edb355b7 2018-08-03)\r\n```\r\n\r\n```\r\ncat /etc/os-release                                                                                                                       22:13:44\r\nNAME=Fedora\r\nVERSION=\"28 (Twenty Eight)\"\r\nID=fedora\r\nVERSION_ID=28\r\nPLATFORM_ID=\"platform:f28\"\r\nPRETTY_NAME=\"Fedora 28 (Twenty Eight)\"\r\nANSI_COLOR=\"0;34\"\r\nCPE_NAME=\"cpe:/o:fedoraproject:fedora:28\"\r\nHOME_URL=\"https://fedoraproject.org/\"\r\nSUPPORT_URL=\"https://fedoraproject.org/wiki/Communicating_and_getting_help\"\r\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\r\nREDHAT_BUGZILLA_PRODUCT=\"Fedora\"\r\nREDHAT_BUGZILLA_PRODUCT_VERSION=28\r\nREDHAT_SUPPORT_PRODUCT=\"Fedora\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=28\r\nPRIVACY_POLICY_URL=\"https://fedoraproject.org/wiki/Legal:PrivacyPolicy\"\r\n```", "closed_by": {"login": "uwearzt", "id": 105293, "node_id": "MDQ6VXNlcjEwNTI5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/105293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uwearzt", "html_url": "https://github.com/uwearzt", "followers_url": "https://api.github.com/users/uwearzt/followers", "following_url": "https://api.github.com/users/uwearzt/following{/other_user}", "gists_url": "https://api.github.com/users/uwearzt/gists{/gist_id}", "starred_url": "https://api.github.com/users/uwearzt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uwearzt/subscriptions", "organizations_url": "https://api.github.com/users/uwearzt/orgs", "repos_url": "https://api.github.com/users/uwearzt/repos", "events_url": "https://api.github.com/users/uwearzt/events{/privacy}", "received_events_url": "https://api.github.com/users/uwearzt/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/53071/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/53071/timeline", "performed_via_github_app": null, "state_reason": "completed"}