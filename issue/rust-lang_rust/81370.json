{"url": "https://api.github.com/repos/rust-lang/rust/issues/81370", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81370/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81370/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81370/events", "html_url": "https://github.com/rust-lang/rust/issues/81370", "id": 793046524, "node_id": "MDU6SXNzdWU3OTMwNDY1MjQ=", "number": 81370, "title": "Improve error reporting for #![feature(...)] in the wrong place", "user": {"login": "martindemello", "id": 16215, "node_id": "MDQ6VXNlcjE2MjE1", "avatar_url": "https://avatars.githubusercontent.com/u/16215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martindemello", "html_url": "https://github.com/martindemello", "followers_url": "https://api.github.com/users/martindemello/followers", "following_url": "https://api.github.com/users/martindemello/following{/other_user}", "gists_url": "https://api.github.com/users/martindemello/gists{/gist_id}", "starred_url": "https://api.github.com/users/martindemello/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martindemello/subscriptions", "organizations_url": "https://api.github.com/users/martindemello/orgs", "repos_url": "https://api.github.com/users/martindemello/repos", "events_url": "https://api.github.com/users/martindemello/events{/privacy}", "received_events_url": "https://api.github.com/users/martindemello/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1183099971, "node_id": "MDU6TGFiZWwxMTgzMDk5OTcx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-suggestion-diagnostics", "name": "A-suggestion-diagnostics", "color": "f7e101", "default": false, "description": "Area: suggestions generated by the compiler applied by cargo fix"}, {"id": 1596121013, "node_id": "MDU6TGFiZWwxNTk2MTIxMDEz", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-confusing", "name": "D-confusing", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error that should be reworked"}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-01-25T05:40:57Z", "updated_at": "2021-01-25T07:00:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I spent a while wondering why I was getting this error\r\n```\r\nerror[E0658]: use of unstable library feature 'array_map'\r\n  --> src/board.rs:67:17\r\n   |\r\n67 |         offsets.map(|(dx, dy)| {\r\n   |                 ^^^\r\n   |\r\n   = note: see issue #75243 <https://github.com/rust-lang/rust/issues/75243> for more information\r\n   = help: add `#![feature(array_map)]` to the crate attributes to enable\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0658`.\r\n```\r\n\r\neven when I added `!#[feature(array_map)]` to the top of my file, and even when the same thing was working fine in `main.rs`. I finally found [this stackoverflow post](https://stackoverflow.com/questions/27454761/what-is-a-crate-attribute-and-where-do-i-add-it) and [this reddit thread](https://www.reddit.com/r/rust/comments/2p4yuj/how_do_i_add_a_crate_attribute/) that said if I were using `cargo build` I had to add the directive to `lib.rs` instead, after which everything worked.\r\n\r\nI'm not sure where in the docs the best place for that would be (I had already read the section on attributes and crates in \"rust by example\" and not found the relevant hint), but it would be nice if it could be surfaced in the error message too.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81370/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81370/timeline", "performed_via_github_app": null, "state_reason": null}