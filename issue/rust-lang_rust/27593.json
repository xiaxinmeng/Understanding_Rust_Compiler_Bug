{"url": "https://api.github.com/repos/rust-lang/rust/issues/27593", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27593/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27593/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27593/events", "html_url": "https://github.com/rust-lang/rust/issues/27593", "id": 99772657, "node_id": "MDU6SXNzdWU5OTc3MjY1Nw==", "number": 27593, "title": "Error message for mutating field of immutable struct could be clearer", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-08-08T04:58:34Z", "updated_at": "2017-03-19T20:44:13Z", "closed_at": "2017-03-19T20:44:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "``` rust\nstruct Foo {\n    pub v: Vec<String>\n}\n\nfn main() {\n    let f = Foo { v: Vec::new() };\n    f.v.push(\"cat\".to_string());\n}\n```\n\nThe above code gives this compile error:\n\n``` rust\n<anon>:8:5: 8:8 error: cannot borrow immutable field `f.v` as mutable\n<anon>:8     f.v.push(\"cat\".to_string());\n             ^~~\n```\n\nFrom my perspective, this implies that the field somehow needs to be marked as mutable, when in fact the user error is that the struct is immutable.\n\nI believe the error message could be improved by saying something like `cannot borrow field `v` of immutable struct `f` as mutable`.\n#18150 is \"related\".\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27593/timeline", "performed_via_github_app": null, "state_reason": "completed"}