{"url": "https://api.github.com/repos/rust-lang/rust/issues/99143", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/99143/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/99143/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/99143/events", "html_url": "https://github.com/rust-lang/rust/issues/99143", "id": 1300185294, "node_id": "I_kwDOAAsO6M5Nf0DO", "number": 99143, "title": "Big file size regression on Windows", "user": {"login": "BlaCoiso", "id": 13855359, "node_id": "MDQ6VXNlcjEzODU1MzU5", "avatar_url": "https://avatars.githubusercontent.com/u/13855359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlaCoiso", "html_url": "https://github.com/BlaCoiso", "followers_url": "https://api.github.com/users/BlaCoiso/followers", "following_url": "https://api.github.com/users/BlaCoiso/following{/other_user}", "gists_url": "https://api.github.com/users/BlaCoiso/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlaCoiso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlaCoiso/subscriptions", "organizations_url": "https://api.github.com/users/BlaCoiso/orgs", "repos_url": "https://api.github.com/users/BlaCoiso/repos", "events_url": "https://api.github.com/users/BlaCoiso/events{/privacy}", "received_events_url": "https://api.github.com/users/BlaCoiso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1049491442, "node_id": "MDU6TGFiZWwxMDQ5NDkxNDQy", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-heavy", "name": "I-heavy", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to binary size of generated code."}, {"id": 1966877457, "node_id": "MDU6TGFiZWwxOTY2ODc3NDU3", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-critical", "name": "P-critical", "color": "eb6420", "default": false, "description": "Critical priority"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2022-07-11T04:20:32Z", "updated_at": "2022-07-14T22:11:08Z", "closed_at": "2022-07-14T21:50:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a regression report! \ud83d\udc1b A regression is something that changed between versions of Rust but was not supposed to.\r\n\r\nPlease provide a short summary of the regression, along with any information you feel is relevant to replicate it.\r\n-->\r\nBinary sizes on the latest nightlies are significantly larger than on stable and some previous nightly versions. This is caused by some extra sections in the binary and also an increase in the text and data sections\r\nStable (1.62.0):\r\n```\r\nnth paddr          size vaddr          vsize perm name\r\n\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\r\n0   0x00000400  0x19e00 0x140001000  0x1a000 -r-x .text\r\n1   0x0001a200   0x7600 0x14001b000   0x8000 -r-- .rdata\r\n2   0x00021800    0x200 0x140023000   0x1000 -rw- .data\r\n3   0x00021a00   0x1200 0x140024000   0x2000 -r-- .pdata\r\n4   0x00022c00    0x400 0x140026000   0x1000 -r-- .reloc\r\n```\r\nNightly (1.64.0-nightly c396bb3b8):\r\n```\r\nnth paddr          size vaddr          vsize perm name\r\n\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\r\n0   0x00000400  0x7d200 0x140001000  0x7e000 -r-x .text\r\n1   0x0007d600  0x29c00 0x14007f000  0x2a000 -r-- .rdata\r\n2   0x000a7200    0x200 0x1400a9000   0x1000 -rw- .data\r\n3   0x000a7400   0x5c00 0x1400aa000   0x6000 -r-- .pdata\r\n4   0x000ad000    0xc00 0x1400b0000   0x1000 -r-- .debug_a\r\n5   0x000adc00  0x9d000 0x1400b1000  0x9d000 -r-- .debug_i\r\n6   0x0014ac00   0x9000 0x14014e000   0x9000 -r-- .debug_a_1\r\n7   0x00153c00  0x68c00 0x140157000  0x69000 -r-- .debug_r\r\n8   0x001bc800  0xe8e00 0x1401c0000  0xe9000 -r-- .debug_s\r\n9   0x002a5600  0x5a000 0x1402a9000  0x5a000 -r-- .debug_p\r\n10  0x002ff600    0x200 0x140303000   0x1000 -r-- .debug_p_1\r\n11  0x002ff800  0x3a200 0x140304000  0x3b000 -r-- .debug_l\r\n12  0x00339a00  0x21400 0x14033f000  0x22000 -r-- .reloc\r\n```\r\n### Code\r\n\r\nI tried this code:\r\n\r\n```rust\r\nfn main() {}\r\n```\r\n\r\nI expected to see this happen: small binary size (143\u00a0360 bytes on 1.62.0)\r\n\r\nInstead, this happened: extremely large binary size (3\u00a0517\u00a0952 bytes)\r\n\r\n### Version it worked on\r\n\r\n<!--\r\nProvide the most recent version this worked on, for example:\r\n\r\nIt most recently worked on: Rust 1.47\r\n-->\r\n\r\nIt most recently worked on: Rust 1.64.0 (nightly) ddcbba036aee08f0709f98a92a342a278eae5c05 \r\n\r\n### Version with regression\r\n\r\n<!--\r\nProvide the version you are using that has the regression.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.64.0-nightly (c396bb3b8 2022-07-10)\r\nbinary: rustc\r\ncommit-hash: c396bb3b8a16b1f2762b7c6078dc3e023f6a2493\r\ncommit-date: 2022-07-10\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.64.0-nightly\r\nLLVM version: 14.0.6\r\n```\r\n\r\n<!--\r\nIf you know when this regression occurred, please add a line like below, replacing `{channel}` with one of stable, beta, or nightly.\r\n\r\n@rustbot modify labels: +regression-from-stable-to-nightly -regression-untriaged\r\n-->\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/99143/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/99143/timeline", "performed_via_github_app": null, "state_reason": "completed"}