{"url": "https://api.github.com/repos/rust-lang/rust/issues/99414", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/99414/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/99414/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/99414/events", "html_url": "https://github.com/rust-lang/rust/issues/99414", "id": 1307755932, "node_id": "I_kwDOAAsO6M5N8sWc", "number": 99414, "title": "Tracking issue for tracking licensing metadata with REUSE", "user": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 4234928242, "node_id": "LA_kwDOAAsO6M78a-By", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-licensing", "name": "A-licensing", "color": "f7e101", "default": false, "description": "Area: compiler licensing"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-07-18T10:44:43Z", "updated_at": "2023-04-06T12:15:15Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a tracking issue for [MCP 519: track licensing metadata with REUSE](https://github.com/rust-lang/compiler-team/issues/519)\r\n\r\n### Steps\r\n\r\n- [x] Implement scaffolding to track metadata with REUSE\r\n- [x] Add step in CI to verify REUSE can parse all the metadata in the repository.\r\n- [x] Import copyright metadata from the Debian rustc package.\r\n- [ ] Enhance the metadata with the existing text in the `COPYRIGHT` file and [issues labeled `A-licensing`](https://github.com/rust-lang/rust/labels/A-licensing).\r\n- [ ] Automatically include dependencies licensing in tarballs' `.reuse/dep5` in rustbuild.\r\n- [ ] Remove `LICENSE-MIT` and `LICENSE-APACHE`.\r\n- [ ] Auto-generate `src/librustdoc/html/static/COPYRIGHT.txt`\r\n- [ ] Auto-generate `COPYRIGHT` in source distributions and tarballs\r\n- [ ] Replace `COPYRIGHT` to explain we're using REUSE and instructions on how to lookup actual metadata. \r\n\r\n### Implementation history\r\n\r\n* https://github.com/rust-lang/rust/pull/99415\r\n* https://github.com/rust-lang/rust/pull/104139\r\n* https://github.com/rust-lang/rust/pull/104439\r\n* https://github.com/rust-lang/rust/pull/104527\r\n\r\n### Missing REUSE features\r\n\r\n#### Blockers\r\n\r\n* [x] https://github.com/fsfe/reuse-tool/pull/560\r\n      REUSE doesn't parse some LLVM license headers, logging errors to console instead.\r\n\r\n* [ ] https://github.com/fsfe/reuse-docs/issues/115\r\n      When a file's licensing information is defined in both the global `.reuse/dep5` and in the file headers, REUSE currently *merges* the two pieces of information rather than picking one. Since we're going to use the global `.reuse/dep5` and we can't remove file headers in some places (like `src/llvm-project`), we need REUSE not to misbehave when a file contains license headers.\r\n\r\n* [x] https://github.com/fsfe/reuse-tool/issues/586\r\n      The output of `reuse spdx` tries to parse the licensing information and output it in a different way, but in doing so it loses important metadata like parentheses, `WITH` relations and the difference between `OR` and `AND`. Since one of the goals of adopting REUSE is auto-generating our `COPYRIGHT` information, we need REUSE to output accurate licensing information. A better way to gather this data is [also being planned](https://github.com/fsfe/reuse-tool/issues/183), but it might be a way off.\r\n\r\n#### Can be worked around\r\n\r\n* [ ] https://github.com/fsfe/reuse-docs/issues/90\r\n      REUSE only reads \"global\" metadata (`.reuse/dep5`) from the root of the git repository, without checking if global metadata is also present in subdirectories. This kinda clashes with our monorepo approach, since in the future we might want to (for example) have the Cargo metadata be defined in the Cargo repository. A new [REUSE.yaml](https://github.com/fsfe/reuse-docs/issues/81) replacement that would support this is being developed. Also, for the time being we can add a pre-processing step similar to what we did with GitHub Actions, where we have our own tool scanning the repository for nested files and appending them to the `.reuse/dep5` in the root.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/99414/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/99414/timeline", "performed_via_github_app": null, "state_reason": null}