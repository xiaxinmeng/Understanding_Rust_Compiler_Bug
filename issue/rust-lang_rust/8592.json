{"url": "https://api.github.com/repos/rust-lang/rust/issues/8592", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8592/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8592/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8592/events", "html_url": "https://github.com/rust-lang/rust/issues/8592", "id": 18210753, "node_id": "MDU6SXNzdWUxODIxMDc1Mw==", "number": 8592, "title": "Confusing/incorrect error messages with respect to visibility and traits", "user": {"login": "SiegeLord", "id": 480550, "node_id": "MDQ6VXNlcjQ4MDU1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/480550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SiegeLord", "html_url": "https://github.com/SiegeLord", "followers_url": "https://api.github.com/users/SiegeLord/followers", "following_url": "https://api.github.com/users/SiegeLord/following{/other_user}", "gists_url": "https://api.github.com/users/SiegeLord/gists{/gist_id}", "starred_url": "https://api.github.com/users/SiegeLord/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SiegeLord/subscriptions", "organizations_url": "https://api.github.com/users/SiegeLord/orgs", "repos_url": "https://api.github.com/users/SiegeLord/repos", "events_url": "https://api.github.com/users/SiegeLord/events{/privacy}", "received_events_url": "https://api.github.com/users/SiegeLord/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2013-08-18T17:47:16Z", "updated_at": "2013-09-25T09:10:59Z", "closed_at": "2013-09-25T09:10:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are two sets of problematic messages here. First, take this code:\n\n``` rust\nstruct S;\n\ntrait A\n{\n    priv fn foo(); // Error 1\n}\n\npriv impl S // Error 2\n{\n\n}\n\npriv impl A for S // Error 3\n{\n    priv fn foo() {} // Error 4\n}\n```\n\nAll of the marked lines give this error:\n\n```\nerror: obsolete syntax: `priv` not necessary\nnote: an item without a visibility qualifier is private by default\n```\n\nThis is wrong in all those cases, as the said items are not private by default. In case of Error 1, the visibility is set by the visibility of the trait. In case of Error 2, there's no such thing as a private implementation, you're meant to put visibility on individual functions. In case of Error 3 there's no such thing as a private implementation of a trait, but unlike Error 2 you're not allowed to put visibility on individual functions as the visibility is inherited from the implemented trait. Error 4, thus, is also wrong. Obviously if the priv keyword goes (#8122) then these are invalidated.\n\nThe other problematic error comes from this code:\n\n``` rust\nstruct S;\ntrait A\n{\n    fn foo();\n}\n\npub impl A for S // Error 5\n{\n\n}\n```\n\nThe error text:\n\n```\nerror: obsolete syntax: visibility-qualified implementation\nnote: `pub` or `priv` goes on individual functions; remove the `pub` or `priv`\n```\n\nThis is not correct, as you're not allowed to put it on the individual functions either.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8592/timeline", "performed_via_github_app": null, "state_reason": "completed"}