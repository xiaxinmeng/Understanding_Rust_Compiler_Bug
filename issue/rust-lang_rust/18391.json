{"url": "https://api.github.com/repos/rust-lang/rust/issues/18391", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18391/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18391/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18391/events", "html_url": "https://github.com/rust-lang/rust/issues/18391", "id": 47019192, "node_id": "MDU6SXNzdWU0NzAxOTE5Mg==", "number": 18391, "title": "Resolve obligations more carefully", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-10-28T12:18:20Z", "updated_at": "2016-02-02T18:40:09Z", "closed_at": "2016-02-02T18:40:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Resolving trait obligations can be an important part of type inference. However, right now we do it in a bit of an ad-hoc way:\n- Every once in a while, we eagerly resolve new obligations that haven't been attempted yet.\n- If we are looking at a type variable and need more type information, we do a full resolve of all obligations. This helps in some cases.\n\nProbably we ought to avoid resolving obligations at all until we want more type information, and then we should do it only with obligations that will help with the variable in question. I am not sure if this is as simple as scanning for obligations that reference the variable somewhere -- I think not, we probably have to construct some kind of dependence graph. What can happen otherwise is something like:\n\n```\n$0 : Foo<$1>\n$1 : Bar<$2>\n```\n\nTo decide `$2`, we need to know `$1`, but to know `$1`, we have to resolve the first obligation.\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18391/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18391/timeline", "performed_via_github_app": null, "state_reason": "completed"}