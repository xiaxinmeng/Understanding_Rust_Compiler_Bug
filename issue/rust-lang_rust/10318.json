{"url": "https://api.github.com/repos/rust-lang/rust/issues/10318", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10318/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10318/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10318/events", "html_url": "https://github.com/rust-lang/rust/issues/10318", "id": 22208554, "node_id": "MDU6SXNzdWUyMjIwODU1NA==", "number": 10318, "title": "Implement dynamic string interpolation", "user": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-11-06T16:55:49Z", "updated_at": "2015-01-21T18:04:59Z", "closed_at": "2015-01-21T18:04:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In a perfect world, a minimal quine in Rust would look like this:\n\n``` rust\nfn main(){let S=\"fn main(){let S={1}{0}{1};println!(S,S,'{1}')}\";println!(S,S,'\"')}\n```\n\nSadly, this is impossible. Why? Because `println!` requires that the first argument not just be static; it must be a _string literal_.\n\nThere are other, non-contrived use cases for dynamic string interpolation; acrichto mentions internationalization as one example.\n\nSo what would be involved in implementing dynamic string interpolation?\n\nacrichto mentions (https://botbot.me/mozilla/rust/msg/7556963/) that the current machinery used to parse strings for `format!` provides an interface that could be reused (`std::fmt`). But that's only part of the solution.\n\nThe first issue is that we can't guarantee type safety for dynamic interpolation (can we???), so the syntax for dynamic format strings might need to be rethought. For now we should probably assume that all arguments to dynamic string interpolation will implement `ToStr` and just ignore any format string options that aren't for positional or named arguments.\n\nThe second issue is that we can't just simply have anything like a simple `.format()` method on strings, like Python has, since we don't have variadic functions. We'd need to either do something like pass an array of trait objects:\n\n``` rust\n\"ab{1}d{0}\".format([\"e\" as ~ToStr, \"c\" as ~ToStr]);  // gross\ndyn_format!(\"ab{1}d{0}\", \"e\", \"c\");  // maybe a little less gross\n```\n\n...or use method chaining and generics:\n\n``` rust\nfn push<T: Any>(&mut self, x: T) { self.vec.push(~x as ~Any) }\n\"ab{1}d{0}\".format().push(\"e\").push(\"c\").to_str()  // still kinda gross\n```\n\n(all code examples are just quick sketches, might be overlooking details (and don't worry about naming))\n\nAny thoughts?\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10318/timeline", "performed_via_github_app": null, "state_reason": "completed"}