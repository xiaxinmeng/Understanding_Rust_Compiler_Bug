{"url": "https://api.github.com/repos/rust-lang/rust/issues/45086", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45086/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45086/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45086/events", "html_url": "https://github.com/rust-lang/rust/issues/45086", "id": 263649991, "node_id": "MDU6SXNzdWUyNjM2NDk5OTE=", "number": 45086, "title": "All debuginfo-lldb tests fail (TypeError: expected string or buffer)", "user": {"login": "jacwah", "id": 3816754, "node_id": "MDQ6VXNlcjM4MTY3NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3816754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jacwah", "html_url": "https://github.com/jacwah", "followers_url": "https://api.github.com/users/jacwah/followers", "following_url": "https://api.github.com/users/jacwah/following{/other_user}", "gists_url": "https://api.github.com/users/jacwah/gists{/gist_id}", "starred_url": "https://api.github.com/users/jacwah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jacwah/subscriptions", "organizations_url": "https://api.github.com/users/jacwah/orgs", "repos_url": "https://api.github.com/users/jacwah/repos", "events_url": "https://api.github.com/users/jacwah/events{/privacy}", "received_events_url": "https://api.github.com/users/jacwah/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-07T15:39:04Z", "updated_at": "2017-10-10T11:07:37Z", "closed_at": "2017-10-10T11:07:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "All (non-ignored) debuginfo tests fail when I run\r\n\r\n    $ ./x.py test src/test/debuginfo\r\n\r\nBelow is the message for one of the tests. They all seem to be the same.\r\n\r\n```\r\n---- [debuginfo-lldb] debuginfo/vec.rs stdout ----\r\n\tNOTE: compiletest thinks it is using LLDB version 900\r\n\r\nerror: Error while running LLDB\r\nstatus: exit code: 1\r\ncommand: \"/usr/bin/python\" \"/Users/jacob/Code/rust/src/etc/lldb_batchmode.py\" \"/Users/jacob/Code/rust/build/x86_64-apple-darwin/test/debuginfo/vec.stage2-x86_64-apple-darwin\" \"/Users/jacob/Code/rust/build/x86_64-apple-darwin/test/debuginfo/vec.debugger.script\"\r\nstdout:\r\n------------------------------------------\r\nLLDB batch-mode script\r\n----------------------\r\nDebugger commands script is '/Users/jacob/Code/rust/build/x86_64-apple-darwin/test/debuginfo/vec.debugger.script'.\r\nTarget executable is '/Users/jacob/Code/rust/build/x86_64-apple-darwin/test/debuginfo/vec.stage2-x86_64-apple-darwin'.\r\nCurrent working directory is '/Users/jacob/Code/rust'\r\nCreating a target for '/Users/jacob/Code/rust/build/x86_64-apple-darwin/test/debuginfo/vec.stage2-x86_64-apple-darwin'\r\nsettings set auto-confirm true\r\n\r\n------------------------------------------\r\nstderr:\r\n------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/jacob/Code/rust/src/etc/lldb_batchmode.py\", line 211, in <module>\r\n    execute_command(command_interpreter, command)\r\n  File \"/Users/jacob/Code/rust/src/etc/lldb_batchmode.py\", line 84, in execute_command\r\n    print(normalize_whitespace(res.GetOutput()), end='\\n')\r\n  File \"/Users/jacob/Code/rust/src/etc/lldb_batchmode.py\", line 48, in normalize_whitespace\r\n    return re.sub(\"\\s+\", \" \", s)\r\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py\", line 155, in sub\r\n    return _compile(pattern, flags).sub(repl, string, count)\r\nTypeError: expected string or buffer\r\n\r\n------------------------------------------\r\n\r\nthread '[debuginfo-lldb] debuginfo/vec.rs' panicked at 'explicit panic', src/tools/compiletest/src/runtest.rs:2433:8\r\n```\r\n\r\nAdding a print call to debug the Python traceback reveals that `normalize_whitespace` is called with `None` as argument.\r\n\r\nI'm on the current master (cce93436d3628f5fa8288c7e84f4b695542c6ae3) running macOS 10.12.6 and `/usr/bin/python --version` is 2.7.10.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45086/timeline", "performed_via_github_app": null, "state_reason": "completed"}