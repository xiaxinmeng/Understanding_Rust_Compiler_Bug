{"url": "https://api.github.com/repos/rust-lang/rust/issues/95872", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95872/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95872/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95872/events", "html_url": "https://github.com/rust-lang/rust/issues/95872", "id": 1198852785, "node_id": "I_kwDOAAsO6M5HdQqx", "number": 95872, "title": "\"cannot construct with struct literal syntax due to inaccessible fields\" could use an explain", "user": {"login": "QuineDot", "id": 75067664, "node_id": "MDQ6VXNlcjc1MDY3NjY0", "avatar_url": "https://avatars.githubusercontent.com/u/75067664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QuineDot", "html_url": "https://github.com/QuineDot", "followers_url": "https://api.github.com/users/QuineDot/followers", "following_url": "https://api.github.com/users/QuineDot/following{/other_user}", "gists_url": "https://api.github.com/users/QuineDot/gists{/gist_id}", "starred_url": "https://api.github.com/users/QuineDot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QuineDot/subscriptions", "organizations_url": "https://api.github.com/users/QuineDot/orgs", "repos_url": "https://api.github.com/users/QuineDot/repos", "events_url": "https://api.github.com/users/QuineDot/events{/privacy}", "received_events_url": "https://api.github.com/users/QuineDot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": {"login": "hadrizi", "id": 28650696, "node_id": "MDQ6VXNlcjI4NjUwNjk2", "avatar_url": "https://avatars.githubusercontent.com/u/28650696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hadrizi", "html_url": "https://github.com/hadrizi", "followers_url": "https://api.github.com/users/hadrizi/followers", "following_url": "https://api.github.com/users/hadrizi/following{/other_user}", "gists_url": "https://api.github.com/users/hadrizi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hadrizi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hadrizi/subscriptions", "organizations_url": "https://api.github.com/users/hadrizi/orgs", "repos_url": "https://api.github.com/users/hadrizi/repos", "events_url": "https://api.github.com/users/hadrizi/events{/privacy}", "received_events_url": "https://api.github.com/users/hadrizi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "hadrizi", "id": 28650696, "node_id": "MDQ6VXNlcjI4NjUwNjk2", "avatar_url": "https://avatars.githubusercontent.com/u/28650696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hadrizi", "html_url": "https://github.com/hadrizi", "followers_url": "https://api.github.com/users/hadrizi/followers", "following_url": "https://api.github.com/users/hadrizi/following{/other_user}", "gists_url": "https://api.github.com/users/hadrizi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hadrizi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hadrizi/subscriptions", "organizations_url": "https://api.github.com/users/hadrizi/orgs", "repos_url": "https://api.github.com/users/hadrizi/repos", "events_url": "https://api.github.com/users/hadrizi/events{/privacy}", "received_events_url": "https://api.github.com/users/hadrizi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-04-10T03:08:30Z", "updated_at": "2022-06-24T04:37:21Z", "closed_at": "2022-06-24T04:37:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "[Given the following code:](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=9f3e3c29a1dd0db9008d9683c108b330)\n```rust\npub mod m {\n    pub struct S {\n        pub visible: bool,\n        private: (),\n        also_private: String,\n    }\n}\n\nfn main() {\n    let _ = m::S {\n        visible: true,\n        private: (),\n    };\n}\n```\n\nThe current output is:\n```\nerror: cannot construct `S` with struct literal syntax due to inaccessible fields\n  [--> src/main.rs:10:13\n](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=9f3e3c29a1dd0db9008d9683c108b330#)   |\n10 |     let _ = m::S {\n   |             ^^^^\n```\n\nIdeally, the output should\n* Explain more fully that there are private fields, perhaps via `--explain`\n* [Not occlude E0451](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=f5d9f7df78f71cb78471136384c92805) when some private fields are supplied (as in the above example)\n\nIn my opinion, the errors when you supply all the private fields are more understandable than those when you supply none or only some of the private fields.  See also [this URLO thread.](https://users.rust-lang.org/t/error-cannot-construct-animatedsprite-with-struct-literal-syntax-due-to-inaccessible-fields/74026)\n\nI believe the current output is a result of #87872.  \n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"hadrizi\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95872/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95872/timeline", "performed_via_github_app": null, "state_reason": "completed"}