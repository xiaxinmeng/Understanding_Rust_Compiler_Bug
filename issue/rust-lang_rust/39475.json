{"url": "https://api.github.com/repos/rust-lang/rust/issues/39475", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39475/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39475/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39475/events", "html_url": "https://github.com/rust-lang/rust/issues/39475", "id": 205035605, "node_id": "MDU6SXNzdWUyMDUwMzU2MDU=", "number": 39475, "title": "alloc_system is linked even if a custom allocator is present", "user": {"login": "liuzix", "id": 18745285, "node_id": "MDQ6VXNlcjE4NzQ1Mjg1", "avatar_url": "https://avatars.githubusercontent.com/u/18745285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuzix", "html_url": "https://github.com/liuzix", "followers_url": "https://api.github.com/users/liuzix/followers", "following_url": "https://api.github.com/users/liuzix/following{/other_user}", "gists_url": "https://api.github.com/users/liuzix/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuzix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuzix/subscriptions", "organizations_url": "https://api.github.com/users/liuzix/orgs", "repos_url": "https://api.github.com/users/liuzix/repos", "events_url": "https://api.github.com/users/liuzix/events{/privacy}", "received_events_url": "https://api.github.com/users/liuzix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-03T00:05:54Z", "updated_at": "2017-05-20T13:09:20Z", "closed_at": "2017-05-20T13:09:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "rustc 1.16.0-nightly (24055d0f2 2017-01-31)\r\nbinary: rustc\r\ncommit-hash: 24055d0f2aa8dce5caed7544e6006aa48dceaea5\r\ncommit-date: 2017-01-31\r\nhost: x86_64-apple-darwin\r\nrelease: 1.16.0-nightly\r\nLLVM version: 3.9\r\n\r\nI am writing an experimental OS in rust and of course it includes a custom allocator, so I added `#![allocator]` and implemented the allocating prototypes **__rust_allocate**, etc.\r\nHowever when I build it, the linker tries to link alloc_system, which results in undefined symbol \"**malloc**\", because alloc_system tries to use the libc allocator. \r\nI temporarily made the program work by manually implementing the libc malloc prototype, but this doesn't seem like an elegant solution.\r\nPlease see if this is a bug in the linking system.", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39475/timeline", "performed_via_github_app": null, "state_reason": "completed"}