{"url": "https://api.github.com/repos/rust-lang/rust/issues/60872", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60872/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60872/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60872/events", "html_url": "https://github.com/rust-lang/rust/issues/60872", "id": 444715187, "node_id": "MDU6SXNzdWU0NDQ3MTUxODc=", "number": 60872, "title": "\"Inherent\" \"impls\" save-analysis have empty \"value\"", "user": {"login": "asutherland", "id": 212206, "node_id": "MDQ6VXNlcjIxMjIwNg==", "avatar_url": "https://avatars.githubusercontent.com/u/212206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asutherland", "html_url": "https://github.com/asutherland", "followers_url": "https://api.github.com/users/asutherland/followers", "following_url": "https://api.github.com/users/asutherland/following{/other_user}", "gists_url": "https://api.github.com/users/asutherland/gists{/gist_id}", "starred_url": "https://api.github.com/users/asutherland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asutherland/subscriptions", "organizations_url": "https://api.github.com/users/asutherland/orgs", "repos_url": "https://api.github.com/users/asutherland/repos", "events_url": "https://api.github.com/users/asutherland/events{/privacy}", "received_events_url": "https://api.github.com/users/asutherland/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 602425123, "node_id": "MDU6TGFiZWw2MDI0MjUxMjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-dev-tools", "name": "T-dev-tools", "color": "bfd4f2", "default": false, "description": "Relevant to the dev-tools subteam, which will review and decide on the PR/issue."}, {"id": 632580625, "node_id": "MDU6TGFiZWw2MzI1ODA2MjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-save-analysis", "name": "A-save-analysis", "color": "f7e101", "default": false, "description": "Area: saving results of analyses such as inference and borrowck results to a file."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-05-16T01:40:30Z", "updated_at": "2023-02-19T14:33:06Z", "closed_at": "2023-02-19T14:33:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "For a rust `impl` block like `impl Loader {...}`, the current nightly toolchain generates an `impls` entry that has a `span` that references the position of \"Loader\" in the source file, but the `value` is the empty string \"\".\r\n\r\nAs a particular example, https://github.com/mozsearch/mozsearch/blob/7b87459eea1c0a24beb362b7627960260185034b/tests/tests/files/simple.rs#L36 produces the following prettified `impls` item:\r\n```json\r\n        {\r\n            \"span\": {\r\n                \"byte_start\": 748,\r\n                \"column_end\": 12,\r\n                \"column_start\": 6,\r\n                \"byte_end\": 754,\r\n                \"line_end\": 36,\r\n                \"file_name\": \"simple.rs\",\r\n                \"line_start\": 36\r\n            },\r\n            \"parent\": null,\r\n            \"kind\": \"Inherent\",\r\n            \"children\": [\r\n                {\r\n                    \"index\": 27,\r\n                    \"krate\": 0\r\n                },\r\n                {\r\n                    \"index\": 28,\r\n                    \"krate\": 0\r\n                },\r\n                {\r\n                    \"index\": 29,\r\n                    \"krate\": 0\r\n                },\r\n                {\r\n                    \"index\": 30,\r\n                    \"krate\": 0\r\n                },\r\n                {\r\n                    \"index\": 31,\r\n                    \"krate\": 0\r\n                }\r\n            ],\r\n            \"value\": \"\",\r\n            \"attributes\": [],\r\n            \"sig\": null,\r\n            \"id\": 1,\r\n            \"docs\": \"\"\r\n        }\r\n```\r\n\r\nThe context in which I'm concerned about this is for https://github.com/mozsearch/mozsearch.  The rust language indexer uses rls to load the analysis data and processes it at a low level.  I've hacked around the issue by extracting the contents of the span manually, but it seems useful to include the value.\r\n\r\nSuggested label:A-save-analysis", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60872/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}