{"url": "https://api.github.com/repos/rust-lang/rust/issues/45728", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45728/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45728/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45728/events", "html_url": "https://github.com/rust-lang/rust/issues/45728", "id": 270823101, "node_id": "MDU6SXNzdWUyNzA4MjMxMDE=", "number": 45728, "title": "rustc does not emit color output even with --color always with TERM=tmux-256color", "user": {"login": "mqudsi", "id": 606923, "node_id": "MDQ6VXNlcjYwNjkyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/606923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mqudsi", "html_url": "https://github.com/mqudsi", "followers_url": "https://api.github.com/users/mqudsi/followers", "following_url": "https://api.github.com/users/mqudsi/following{/other_user}", "gists_url": "https://api.github.com/users/mqudsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mqudsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mqudsi/subscriptions", "organizations_url": "https://api.github.com/users/mqudsi/orgs", "repos_url": "https://api.github.com/users/mqudsi/repos", "events_url": "https://api.github.com/users/mqudsi/events{/privacy}", "received_events_url": "https://api.github.com/users/mqudsi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36956, "node_id": "MDU6TGFiZWwzNjk1Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-frontend", "name": "A-frontend", "color": "f7e101", "default": false, "description": "Area: frontend (errors, parsing and HIR)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2017-11-02T22:06:48Z", "updated_at": "2020-01-14T10:27:44Z", "closed_at": "2020-01-14T10:27:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`rustc` does not emit color output when running under a tmux session with `TERM` set correctly to `tmux-256color` (supported by the latest versions of ncurses) even with `cargo +nightly build --color=always` when `TERM` is set to `tmux-256color`. On the machine in question (macOS) the term file for `tmux-256color` is installed and `infocmp` returns the following:\r\n\r\n```\r\n#\tReconstructed via infocmp from file: /usr/local/Cellar/ncurses/6.0_4/share/terminfo/74/tmux-256color\r\ntmux-256color|tmux with 256 colors,\r\n\tam, hs, km, mir, msgr, xenl,\r\n\tcolors#0x100, cols#80, it#8, lines#24, pairs#0x7fff,\r\n\tacsc=++\\,\\,--..00``aaffgghhiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~,\r\n\tbel=^G, blink=\\E[5m, bold=\\E[1m, cbt=\\E[Z, civis=\\E[?25l,\r\n\tclear=\\E[H\\E[J, cnorm=\\E[34h\\E[?25h, cr=\\r,\r\n\tcsr=\\E[%i%p1%d;%p2%dr, cub=\\E[%p1%dD, cub1=^H,\r\n\tcud=\\E[%p1%dB, cud1=\\n, cuf=\\E[%p1%dC, cuf1=\\E[C,\r\n\tcup=\\E[%i%p1%d;%p2%dH, cuu=\\E[%p1%dA, cuu1=\\EM,\r\n\tcvvis=\\E[34l, dch=\\E[%p1%dP, dch1=\\E[P, dim=\\E[2m,\r\n\tdl=\\E[%p1%dM, dl1=\\E[M, dsl=\\E]0;\\007, ed=\\E[J, el=\\E[K,\r\n\tel1=\\E[1K, enacs=\\E(B\\E)0, flash=\\Eg, fsl=^G, home=\\E[H,\r\n\tht=^I, hts=\\EH, ich=\\E[%p1%d@, il=\\E[%p1%dL, il1=\\E[L,\r\n\tind=\\n, is2=\\E)0, kDC=\\E[3;2~, kEND=\\E[1;2F, kHOM=\\E[1;2H,\r\n\tkIC=\\E[2;2~, kLFT=\\E[1;2D, kNXT=\\E[6;2~, kPRV=\\E[5;2~,\r\n\tkRIT=\\E[1;2C, kbs=^H, kcbt=\\E[Z, kcub1=\\EOD, kcud1=\\EOB,\r\n\tkcuf1=\\EOC, kcuu1=\\EOA, kdch1=\\E[3~, kend=\\E[4~, kf1=\\EOP,\r\n\tkf10=\\E[21~, kf11=\\E[23~, kf12=\\E[24~, kf13=\\E[1;2P,\r\n\tkf14=\\E[1;2Q, kf15=\\E[1;2R, kf16=\\E[1;2S, kf17=\\E[15;2~,\r\n\tkf18=\\E[17;2~, kf19=\\E[18;2~, kf2=\\EOQ, kf20=\\E[19;2~,\r\n\tkf21=\\E[20;2~, kf22=\\E[21;2~, kf23=\\E[23;2~,\r\n\tkf24=\\E[24;2~, kf25=\\E[1;5P, kf26=\\E[1;5Q, kf27=\\E[1;5R,\r\n\tkf28=\\E[1;5S, kf29=\\E[15;5~, kf3=\\EOR, kf30=\\E[17;5~,\r\n\tkf31=\\E[18;5~, kf32=\\E[19;5~, kf33=\\E[20;5~,\r\n\tkf34=\\E[21;5~, kf35=\\E[23;5~, kf36=\\E[24;5~,\r\n\tkf37=\\E[1;6P, kf38=\\E[1;6Q, kf39=\\E[1;6R, kf4=\\EOS,\r\n\tkf40=\\E[1;6S, kf41=\\E[15;6~, kf42=\\E[17;6~,\r\n\tkf43=\\E[18;6~, kf44=\\E[19;6~, kf45=\\E[20;6~,\r\n\tkf46=\\E[21;6~, kf47=\\E[23;6~, kf48=\\E[24;6~,\r\n\tkf49=\\E[1;3P, kf5=\\E[15~, kf50=\\E[1;3Q, kf51=\\E[1;3R,\r\n\tkf52=\\E[1;3S, kf53=\\E[15;3~, kf54=\\E[17;3~,\r\n\tkf55=\\E[18;3~, kf56=\\E[19;3~, kf57=\\E[20;3~,\r\n\tkf58=\\E[21;3~, kf59=\\E[23;3~, kf6=\\E[17~, kf60=\\E[24;3~,\r\n\tkf61=\\E[1;4P, kf62=\\E[1;4Q, kf63=\\E[1;4R, kf7=\\E[18~,\r\n\tkf8=\\E[19~, kf9=\\E[20~, khome=\\E[1~, kich1=\\E[2~,\r\n\tkind=\\E[1;2B, kmous=\\E[M, knp=\\E[6~, kpp=\\E[5~,\r\n\tkri=\\E[1;2A, nel=\\EE, op=\\E[39;49m, rc=\\E8, rev=\\E[7m,\r\n\tri=\\EM, ritm=\\E[23m, rmacs=^O, rmcup=\\E[?1049l, rmir=\\E[4l,\r\n\trmkx=\\E[?1l\\E>, rmso=\\E[27m, rmul=\\E[24m,\r\n\trs2=\\Ec\\E[?1000l\\E[?25h, sc=\\E7,\r\n\tsetab=\\E[%?%p1%{8}%<%t4%p1%d%e%p1%{16}%<%t10%p1%{8}%-%d%e48;5;%p1%d%;m,\r\n\tsetaf=\\E[%?%p1%{8}%<%t3%p1%d%e%p1%{16}%<%t9%p1%{8}%-%d%e38;5;%p1%d%;m,\r\n\tsgr=\\E[0%?%p6%t;1%;%?%p1%t;3%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;%?%p5%t;2%;m%?%p9%t\\016%e\\017%;,\r\n\tsgr0=\\E[m\\017, sitm=\\E[3m, smacs=^N, smcup=\\E[?1049h,\r\n\tsmir=\\E[4h, smkx=\\E[?1h\\E=, smso=\\E[7m, smul=\\E[4m,\r\n\ttbc=\\E[3g, tsl=\\E]0;,\r\n\r\n```\r\n\r\nPer https://github.com/rust-lang/cargo/issues/2877 cargo should be invoking rustc with the `--color always` flag, and indeed, `cargo rustc --color always -- --color always` returns 'Option color given more than once`.\r\n\r\nExecuting `env TERM=xterm-256color cargo build` also does not produce color output, but `env TERM=xterm-256color cargo build --color always` does.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45728/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45728/timeline", "performed_via_github_app": null, "state_reason": "completed"}