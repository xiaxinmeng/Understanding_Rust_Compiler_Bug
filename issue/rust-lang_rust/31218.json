{"url": "https://api.github.com/repos/rust-lang/rust/issues/31218", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31218/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31218/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31218/events", "html_url": "https://github.com/rust-lang/rust/issues/31218", "id": 128880878, "node_id": "MDU6SXNzdWUxMjg4ODA4Nzg=", "number": 31218, "title": "Add Invariant<T> marker type", "user": {"login": "bluss", "id": 3209739, "node_id": "MDQ6VXNlcjMyMDk3Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluss", "html_url": "https://github.com/bluss", "followers_url": "https://api.github.com/users/bluss/followers", "following_url": "https://api.github.com/users/bluss/following{/other_user}", "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluss/subscriptions", "organizations_url": "https://api.github.com/users/bluss/orgs", "repos_url": "https://api.github.com/users/bluss/repos", "events_url": "https://api.github.com/users/bluss/events{/privacy}", "received_events_url": "https://api.github.com/users/bluss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-01-26T17:06:36Z", "updated_at": "2016-01-26T22:10:32Z", "closed_at": "2016-01-26T20:00:51Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "From a discussion about different ways to write an Invariant type parameter marker; since we need to express it via `PhantomData`.\n\ncandidates were basically (although this was only used for `&'a ()` cases)\n1. `PhantomData<*mut T>`\n2. `PhantomData<Cell<T>>`\n3. `PhantomData<fn(T) -> T>`\n\nWhich all have different drawbacks and incidental other implications.\n\nThe source of the confusion was (3) case not passing my simple test for invariance.\n\nBecause of the drawbacks, it seems it would be useful to have a real invariance marker in rust's libstd.\n\n(1) and (2) make the type `!Sync`. (2) has owns-`T` implications (3) has bug #31200. All of (1), (2), (3) don't respond like `Invarant<T>` should to custom new OIBITS.\n\ncc @reem if you are interested.\n", "closed_by": {"login": "bluss", "id": 3209739, "node_id": "MDQ6VXNlcjMyMDk3Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluss", "html_url": "https://github.com/bluss", "followers_url": "https://api.github.com/users/bluss/followers", "following_url": "https://api.github.com/users/bluss/following{/other_user}", "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluss/subscriptions", "organizations_url": "https://api.github.com/users/bluss/orgs", "repos_url": "https://api.github.com/users/bluss/repos", "events_url": "https://api.github.com/users/bluss/events{/privacy}", "received_events_url": "https://api.github.com/users/bluss/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31218/timeline", "performed_via_github_app": null, "state_reason": "completed"}