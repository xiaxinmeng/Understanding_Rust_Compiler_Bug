{"url": "https://api.github.com/repos/rust-lang/rust/issues/55183", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55183/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55183/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55183/events", "html_url": "https://github.com/rust-lang/rust/issues/55183", "id": 371569204, "node_id": "MDU6SXNzdWUzNzE1NjkyMDQ=", "number": 55183, "title": "Internal compiler error, broken MIR, in latest Rust nightly", "user": {"login": "timvisee", "id": 856222, "node_id": "MDQ6VXNlcjg1NjIyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/856222?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timvisee", "html_url": "https://github.com/timvisee", "followers_url": "https://api.github.com/users/timvisee/followers", "following_url": "https://api.github.com/users/timvisee/following{/other_user}", "gists_url": "https://api.github.com/users/timvisee/gists{/gist_id}", "starred_url": "https://api.github.com/users/timvisee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timvisee/subscriptions", "organizations_url": "https://api.github.com/users/timvisee/orgs", "repos_url": "https://api.github.com/users/timvisee/repos", "events_url": "https://api.github.com/users/timvisee/events{/privacy}", "received_events_url": "https://api.github.com/users/timvisee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/56", "html_url": "https://github.com/rust-lang/rust/milestone/56", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/56/labels", "id": 3537666, "node_id": "MDk6TWlsZXN0b25lMzUzNzY2Ng==", "number": 56, "title": "Edition 2018 RC 2", "description": "", "creator": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 45, "state": "closed", "created_at": "2018-07-31T22:51:05Z", "updated_at": "2018-11-16T11:06:48Z", "due_on": "2018-10-25T07:00:00Z", "closed_at": "2018-11-16T11:06:48Z"}, "comments": 15, "created_at": "2018-10-18T14:50:03Z", "updated_at": "2018-10-21T10:41:40Z", "closed_at": "2018-10-19T22:54:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The latest Rust nightly (`rustc 1.31.0-nightly (1dceaddfb 2018-10-17)`) has introduced an compiler error, that causes the compiler to crash when compiling `nalgebra`. I'm not entirely sure posting this here is correct. The problem was introduced in a minor Rust nightly compiler update, and if the code is bad, I don't think the Rust compiler should crash the way it does now.\r\n\r\nHere is a snippet of errors that are coming up ([complete log](https://gist.github.com/timvisee/3ad2ede950bc9deb7b351a2fd9cc8645)):\r\n```\r\nerror: internal compiler error: broken MIR in DefId(0/0:8133 ~ nalgebra[ff9d]::base[0]::swizzle[0]::{{impl}}[0]::xx[0]) (const base::construction::<impl base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer>>::new): bad constant user type FnDef(DefId(0/0:8339 ~ nalgebra[ff9d]::base[0]::construction[0]::{{impl}}[47]::new[0]), Canonical { variables: [CanonicalVarInfo { kind: Ty(General) }, CanonicalVarInfo { kind: Ty(General) }, CanonicalVarInfo { kind: Ty(General) }], value: UserSubsts { substs: [_], user_self_ty: Some(UserSelfTy { impl_def_id: DefId(0/0:8338 ~ nalgebra[ff9d]::base[0]::construction[0]::{{impl}}[47]), self_ty: base::matrix::Matrix<_, base::dimension::U2, base::dimension::U1, base::matrix_array::MatrixArray<_, base::dimension::U2, base::dimension::U1>> }) } }) vs fn(N, N) -> base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer> {base::construction::<impl base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer>><N>::new}: NoSolution\r\n  --> src/base/swizzle.rs:14:30\r\n   |\r\n14 |                       $Result::new($(self[$i]),*)\r\n   |                                ^^^\r\n...\r\n21 | / impl_swizzle!(\r\n22 | |     where U0: xx() -> Vector2[0, 0];\r\n23 | |     where U1: xy() -> Vector2[0, 1];\r\n24 | |     where U2: xz() -> Vector2[0, 2];\r\n...  |\r\n66 | |     where U2: zzz() -> Vector3[2, 2, 2]\r\n67 | | );\r\n   | |__- in this macro invocation\r\n\r\nerror: internal compiler error: broken MIR in DefId(0/0:8135 ~ nalgebra[ff9d]::base[0]::swizzle[0]::{{impl}}[1]::xy[0]) (const base::construction::<impl base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer>>::new): bad constant user type FnDef(DefId(0/0:8339 ~ nalgebra[ff9d]::base[0]::construction[0]::{{impl}}[47]::new[0]), Canonical { variables: [CanonicalVarInfo { kind: Ty(General) }, CanonicalVarInfo { kind: Ty(General) }, CanonicalVarInfo { kind: Ty(General) }], value: UserSubsts { substs: [_], user_self_ty: Some(UserSelfTy { impl_def_id: DefId(0/0:8338 ~ nalgebra[ff9d]::base[0]::construction[0]::{{impl}}[47]), self_ty: base::matrix::Matrix<_, base::dimension::U2, base::dimension::U1, base::matrix_array::MatrixArray<_, base::dimension::U2, base::dimension::U1>> }) } }) vs fn(N, N) -> base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer> {base::construction::<impl base::matrix::Matrix<N, base::dimension::U2, base::dimension::U1, <base::default_allocator::DefaultAllocator as base::allocator::Allocator<N, base::dimension::U2>>::Buffer>><N>::new}: NoSolution\r\n  --> src/base/swizzle.rs:14:30\r\n   |\r\n14 |                       $Result::new($(self[$i]),*)\r\n   |                                ^^^\r\n...\r\n21 | / impl_swizzle!(\r\n22 | |     where U0: xx() -> Vector2[0, 0];\r\n23 | |     where U1: xy() -> Vector2[0, 1];\r\n24 | |     where U2: xz() -> Vector2[0, 2];\r\n...  |\r\n66 | |     where U2: zzz() -> Vector3[2, 2, 2]\r\n67 | | );\r\n   | |__- in this macro invocation\r\n\r\n# --- snip ---\r\n```\r\n\r\nThis error is coming up when `check`ing, `build`ing and when `build`ing for `--release`.\r\n\r\nI'm running this on `Ubuntu 18.04`, here's some more information:\r\n```bash\r\n$ rustc -Vv\r\nrustc 1.31.0-nightly (1dceaddfb 2018-10-17)\r\nbinary: rustc\r\ncommit-hash: 1dceaddfbe163e2d916c904b98923342730ba970\r\ncommit-date: 2018-10-17\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.31.0-nightly\r\nLLVM version: 8.0\r\n\r\n$ cargo -Vv\r\ncargo 1.31.0-nightly (5dbac9888 2018-10-08)\r\nrelease: 1.31.0\r\ncommit-hash: 5dbac98885199bbd7c0f189d7405b5523434d1e3\r\ncommit-date: 2018-10-08\r\n\r\n$ uname -srmo\r\nLinux 4.15.0-33-generic x86_64 GNU/Linux\r\n```\r\n\r\nTo reproduce this, ensure you've the same Rust nightly version installed as mentioned above. Then clone the [`nalgebra`](https://github.com/rustsim/nalgebra) repository and run `cargo check` (faster than compiling). The error should come up when checking `nalgebra` starts.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55183/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55183/timeline", "performed_via_github_app": null, "state_reason": "completed"}