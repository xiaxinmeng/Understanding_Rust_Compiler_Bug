{"url": "https://api.github.com/repos/rust-lang/rust/issues/2760", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2760/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2760/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2760/events", "html_url": "https://github.com/rust-lang/rust/issues/2760", "id": 5365300, "node_id": "MDU6SXNzdWU1MzY1MzAw", "number": 2760, "title": "Lambdas: |args| syntax should facilitate manually-curried functions.", "user": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235777, "node_id": "MDU6TGFiZWwyMzU3Nzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-grammar", "name": "A-grammar", "color": "f7e101", "default": false, "description": "Area: The grammar of Rust"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2012-06-30T03:12:46Z", "updated_at": "2012-08-08T08:15:54Z", "closed_at": "2012-08-08T08:15:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I brought up manually-currying functions with @eholk and @brson, and we discussed the relative merits/demerits of the new lambda syntax. I think everyone agrees that the braces shouldn't be required, so you can write stuff like:\n\n```\n|a||b||c| a+b+c;\n```\n\n<b>Edit: NOTE: My opinion has changed from what's written below - look in the comments.</b>\n\nBut I think it'd be better if they bound forever instead of stopping at the first semicolon. The downsides of binding forever:\n- You can't write \"for ... |i| { block }; after_loop();\" (you have to stick with the current braces-before syntax). Personally, I like the current syntax better anyway.\n- You have to use either braces or parens most of the time, like \"map2((|x,y|x+y),[1,2,3],[4,5,6])\".\n\nThe benefit is the following idiom for manually-curried functions.\n\n```\nfn zipWith<A,B,C>(f: fn(A,B) -> C) -> fn@([A]) -> fn@([B]) -> [C] {|list1||list2|\n    ... apply f to list1 and list2 with multiple statements ...\n}\n```\n\nIt expresses multi-staged computation really well to boot:\n\n```\nfn foo(x: X) -> fn@(Y) -> fn~(Z) {\n    stage0(x);\n|y|\n    stage1_partA(x,y);\n    stage1_partB(x,y);\n|z|\n    stage2(x,y,z);\n}\n```\n\nFoo does stage0, returns a @-callback which awaits y before performing stage1 and then returning a ~-callback which etc etc. If we require braces to get multi-statement lambdas, you won't be able to write this sort of thing without rightward drift.\n\nEven apart from this 'staged' pattern, I think we should make manually currying easier. It'd be good to have curried versions of map and fold, so you could write for example \"foldl(0, sum)\" and hand it to someone else who has a list of numbers. \n\nLambdas bind forever in haskell, in SML, in all renderings of lambda calculus I've seen. Brian says they only bind one expression in C#. In C++ they require braces, so that could go either way.\n\nAlso, I suspect every functionally-seasoned programmer will trip up over lambdas not binding forever. I realise our target audience is more the C++ crowd, but that's still an issue.\n", "closed_by": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2760/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2760/timeline", "performed_via_github_app": null, "state_reason": "completed"}