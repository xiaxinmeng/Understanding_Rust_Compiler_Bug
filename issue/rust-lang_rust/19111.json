{"url": "https://api.github.com/repos/rust-lang/rust/issues/19111", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19111/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19111/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19111/events", "html_url": "https://github.com/rust-lang/rust/issues/19111", "id": 49418272, "node_id": "MDU6SXNzdWU0OTQxODI3Mg==", "number": 19111, "title": "Rustdoc `--passes strip-priv` is broken", "user": {"login": "scialex", "id": 726053, "node_id": "MDQ6VXNlcjcyNjA1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/726053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scialex", "html_url": "https://github.com/scialex", "followers_url": "https://api.github.com/users/scialex/followers", "following_url": "https://api.github.com/users/scialex/following{/other_user}", "gists_url": "https://api.github.com/users/scialex/gists{/gist_id}", "starred_url": "https://api.github.com/users/scialex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scialex/subscriptions", "organizations_url": "https://api.github.com/users/scialex/orgs", "repos_url": "https://api.github.com/users/scialex/repos", "events_url": "https://api.github.com/users/scialex/events{/privacy}", "received_events_url": "https://api.github.com/users/scialex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-11-19T16:36:04Z", "updated_at": "2014-11-21T23:22:36Z", "closed_at": "2014-11-21T23:22:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "According to `rustdoc`'s help text and man page an invocation such as \n\n```\nrustdoc --no-defaults --passes unindent-comments --passes collapse-docs --passes strip-hidden lib.rs\n```\n\nshould produce a doc webpage with all modules and functions being documented (except those explicitly marked `doc(hidden)`).\n\nIt does not do this. Instead only the contents of public modules are displayed.\n\nFor example the rust code below:\n\n``` rust\npub use aaa::exp;\n\n/// The abc mod\npub mod abc {\n    /// This is public\n    pub fn def() {}\n\n    /// This is not\n    fn hij() {}\n}\n\n/// This should be seen with --no-defaults\nmod aaa {\n    /// So should this\n    fn kkk() {}\n    /// And this\n    pub fn lll() {}\n\n    /// This is exported\n    pub fn exp() {}\n}\n```\n\nWith the default `rustdoc` arguments (`rustdoc lib.rs`) we get [this page](http://scialex.github.io/rustdoc-example/doc_default/tester/index.html). We would expect that running the command `rustdoc --no-defaults --passes unindent-comments --passes collapse-docs --passes strip-hidden lib.rs` would produce a webpage where all items  are shown, instead it produces [this page](http://scialex.github.io/rustdoc-example/doc_allow_priv/tester/index.html). Note the absence of an `aaa` module in the page. Also note that `abc::hij` is shown. Finally note that although `abc::hij` is (correctly) included in the index nothing within the `aaa` module is.\n\n(Links may take a little bit to start working, they are github pages)\n\nThis seems to be because the html renderer is the one that is actually culling private modules from the page.\n\nThis is likely related to https://github.com/rust-lang/rust/issues/19106\n", "closed_by": {"login": "scialex", "id": 726053, "node_id": "MDQ6VXNlcjcyNjA1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/726053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scialex", "html_url": "https://github.com/scialex", "followers_url": "https://api.github.com/users/scialex/followers", "following_url": "https://api.github.com/users/scialex/following{/other_user}", "gists_url": "https://api.github.com/users/scialex/gists{/gist_id}", "starred_url": "https://api.github.com/users/scialex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scialex/subscriptions", "organizations_url": "https://api.github.com/users/scialex/orgs", "repos_url": "https://api.github.com/users/scialex/repos", "events_url": "https://api.github.com/users/scialex/events{/privacy}", "received_events_url": "https://api.github.com/users/scialex/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19111/timeline", "performed_via_github_app": null, "state_reason": "completed"}