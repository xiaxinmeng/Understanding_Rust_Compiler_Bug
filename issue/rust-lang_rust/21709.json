{"url": "https://api.github.com/repos/rust-lang/rust/issues/21709", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21709/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21709/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21709/events", "html_url": "https://github.com/rust-lang/rust/issues/21709", "id": 55701850, "node_id": "MDU6SXNzdWU1NTcwMTg1MA==", "number": 21709, "title": "core::marker::Send and raw pointers", "user": {"login": "drewcrawford", "id": 183400, "node_id": "MDQ6VXNlcjE4MzQwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/183400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drewcrawford", "html_url": "https://github.com/drewcrawford", "followers_url": "https://api.github.com/users/drewcrawford/followers", "following_url": "https://api.github.com/users/drewcrawford/following{/other_user}", "gists_url": "https://api.github.com/users/drewcrawford/gists{/gist_id}", "starred_url": "https://api.github.com/users/drewcrawford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drewcrawford/subscriptions", "organizations_url": "https://api.github.com/users/drewcrawford/orgs", "repos_url": "https://api.github.com/users/drewcrawford/repos", "events_url": "https://api.github.com/users/drewcrawford/events{/privacy}", "received_events_url": "https://api.github.com/users/drewcrawford/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-28T01:33:50Z", "updated_at": "2018-04-24T21:16:05Z", "closed_at": "2015-03-20T09:47:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The Rust book [says](http://doc.rust-lang.org/book/unsafe.html) that raw pointers \"are considered sendable (if their contents is considered sendable)\".\n\nHowever from what I can see, the compiler generates the error `the trait `core::marker::Send` is not implemented for the type` when it encounters a raw pointer to a Sendable type.\n\nIt could be that I am doing something wrong, it could be that the documentation is unclear or it could be that the error message isn't helpful at indicating whatever the real problem with this code is.\n\n``` rust\nextern crate core;\nuse std::thread::Thread;\n\nstruct ShouldBeSendable {\n    x: i32\n}\nunsafe impl core::marker::Send for ShouldBeSendable { }\n\n\nfn main() {\n    let sendablePtr : *const ShouldBeSendable = &ShouldBeSendable {x: 5};\n            let closure = move |:| {\n                *sendablePtr;\n            };\n    let something = Thread::spawn(closure);\n}\n```\n\nProduces an error:\n\n``` bash\ntest.rs:15:21: 15:34 error: the trait `core::marker::Send` is not implemented for the type `*const ShouldBeSendable` [E0277]\ntest.rs:15     let something = Thread::spawn(closure);\n                               ^~~~~~~~~~~~~\ntest.rs:15:21: 15:34 note: `*const ShouldBeSendable` cannot be sent between threads safely\ntest.rs:15     let something = Thread::spawn(closure);\n                               ^~~~~~~~~~~~~\nerror: aborting due to previous error\n```\n\n``` bash\n$ rustc --version\nrustc 1.0.0-dev (d15192317 2015-01-25 16:09:48 +0000)\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21709/timeline", "performed_via_github_app": null, "state_reason": "completed"}