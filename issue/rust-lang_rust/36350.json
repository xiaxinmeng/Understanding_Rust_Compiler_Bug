{"url": "https://api.github.com/repos/rust-lang/rust/issues/36350", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36350/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36350/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36350/events", "html_url": "https://github.com/rust-lang/rust/issues/36350", "id": 175789915, "node_id": "MDU6SXNzdWUxNzU3ODk5MTU=", "number": 36350, "title": "Tracking Issue for Incr. Comp. Regression Testing", "user": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 37977651, "node_id": "MDU6TGFiZWwzNzk3NzY1MQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/metabug", "name": "metabug", "color": "5319e7", "default": false, "description": "Issues about issues themselves (\"bugs about bugs\")"}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/30", "html_url": "https://github.com/rust-lang/rust/milestone/30", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/30/labels", "id": 1900003, "node_id": "MDk6TWlsZXN0b25lMTkwMDAwMw==", "number": 30, "title": "Incremental compilation beta", "description": "Reach a point where we offer people incremental compilation on stable and encourage them to use it. The idea is to have some minimal set of performance goals and good correctness testing.", "creator": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2016-07-23T09:15:43Z", "updated_at": "2017-03-06T17:46:30Z", "due_on": null, "closed_at": "2017-03-06T17:46:30Z"}, "comments": 0, "created_at": "2016-09-08T15:47:24Z", "updated_at": "2017-09-19T08:19:44Z", "closed_at": "2017-01-27T20:16:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Incremental compilation needs good regression testing, which can be split into the following components:\r\n- End-to-end tests for specific common cases, like already present to some extent in [test/incremental](https://github.com/rust-lang/rust/tree/master/src/test/incremental). These will use the `#[rustc_clean]`/`#[rustc_dirty]` and `#![rustc_partition_reused]` infrastructure.\r\n- Tests for the Incremental Compilation Hash (ICH) that we compute for input data (i.e. HIR and imported Metadata). I'll open individual issues for each of the below soon.\r\n  - [x] Test ICH for structs (see PR https://github.com/rust-lang/rust/pull/36370)\r\n  - [x] Test ICH for enums (#36674)\r\n  - [x] Test ICH for traits (#36681)\r\n  - [x] Test ICH for function interfaces (#36812)\r\n  - [x] Test ICH for function bodies\r\n     - [x] Test ICH for unary and binary expressions (#37520)\r\n     - [x] Test ICH for call expression (#37693)\r\n     - [x] Test ICH for `let` statements (#37654)\r\n     - [x] Test ICH for `match` expressions (#37654)\r\n     - [x] Test ICH for `if` expressions (#37694)\r\n     - [x] Test ICH for `while` loops and `loop` loops (#37841)\r\n     - [x] Test ICH for `for` loops (#37841)\r\n     - [x] Test ICH for closure expressions (#38202)\r\n     - [x] Test ICH for struct constructor expressions\r\n     - [x] Test ICH for enum constructor expressions (#38202)\r\n     - [x] Test ICH for slice/indexing expressions (#38202)\r\n     - [x] Test ICH for inline assembly (#38557)\r\n  - [x] Test ICH for `extern` blocks (#38479)\r\n  - [x] Test ICH for inherent impls/methods (#38502)\r\n  - [x] Test ICH for trait impls/methods (#38849)\r\n  - [x] Test ICH for `type` definitions (#37799)\r\n  - [x] Test ICH for statics (#37001)\r\n  - [x] Test ICH for constants (#37000)\r\n  - [x] Test ICH for command line arguments\r\n- Dependency graph oriented tests that make sure that certain edges are present or not present under certain circumstances. These will use the `#[rustc_if_this_changed]`/`#[rustc_then_this_would_need]` infrastructure.\r\n- Git history based tests that will walk the history of some selected crates, building each revision incrementally and from scratch and then comparing the two for equality. These tests will be based on [cargo incremental](https://github.com/nikomatsakis/cargo-incremental). See https://github.com/rust-lang/rust/issues/36809 for more information.\r\n\r\nIn order to make it easy to contribute in this area, we'll also want to\r\n- Compile links to the appropriate documentation of the test framework and some of the concepts and inner workings of incremental compilation\r\n- Provide well-documented examples of what test cases in various areas should look like\r\n- Expand the above list with as concrete as possible descriptions of individual test cases we are interested in, and open individual GH issues for them.\r\n", "closed_by": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36350/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36350/timeline", "performed_via_github_app": null, "state_reason": "completed"}