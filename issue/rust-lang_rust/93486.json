{"url": "https://api.github.com/repos/rust-lang/rust/issues/93486", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/93486/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/93486/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/93486/events", "html_url": "https://github.com/rust-lang/rust/issues/93486", "id": 1118632665, "node_id": "I_kwDOAAsO6M5CrPrZ", "number": 93486, "title": "Invalid Left-hand Assignment Provides Incorrect Syntax as Solution", "user": {"login": "KSBilodeau", "id": 22333708, "node_id": "MDQ6VXNlcjIyMzMzNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22333708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KSBilodeau", "html_url": "https://github.com/KSBilodeau", "followers_url": "https://api.github.com/users/KSBilodeau/followers", "following_url": "https://api.github.com/users/KSBilodeau/following{/other_user}", "gists_url": "https://api.github.com/users/KSBilodeau/gists{/gist_id}", "starred_url": "https://api.github.com/users/KSBilodeau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KSBilodeau/subscriptions", "organizations_url": "https://api.github.com/users/KSBilodeau/orgs", "repos_url": "https://api.github.com/users/KSBilodeau/repos", "events_url": "https://api.github.com/users/KSBilodeau/events{/privacy}", "received_events_url": "https://api.github.com/users/KSBilodeau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1596299768, "node_id": "MDU6TGFiZWwxNTk2Mjk5NzY4", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-invalid-suggestion", "name": "D-invalid-suggestion", "color": "c9f7a3", "default": false, "description": "A structured suggestion resulting in incorrect code"}], "state": "closed", "locked": false, "assignee": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-01-30T18:06:25Z", "updated_at": "2022-02-02T22:03:31Z", "closed_at": "2022-02-02T22:03:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was attempting to assign directly to the result of a vector's `last_mut()`, which caused this error to fire. That is when I discovered that the help section was telling me to do add an extra let to my while statement, which is not syntactically correct.\r\n\r\nI tried this code:\r\n\r\n```rust\r\n#[allow(dead_code)]\r\nuse logos::Logos;\r\n\r\n#[derive(Logos, Debug, PartialEq, Clone)]\r\nenum LexToken<'a> {\r\n    #[regex(r#\"\\p{L}[\\p{L}|_|\\\\p{N}]+\"#, |lex| lex.slice())]\r\n    Text(&'a str),\r\n    #[regex(\"-?[0-9]+\", |lex| lex.slice().parse())]\r\n    Integer(i64),\r\n    #[regex(r#\"-?[0-9]+\\.[0-9]+\"#, |lex| lex.slice().parse())]\r\n    Float(f64),\r\n    #[token(\"=\")]\r\n    Assignment,\r\n    #[token(\".\")]\r\n    Period,\r\n    #[token(\"{\")]\r\n    OpenBlock,\r\n    #[token(\"}\")]\r\n    CloseBlock,\r\n    #[token(\";\")]\r\n    LineTerminator,\r\n    #[regex(r\"[ \\t\\n\\f]+\", logos::skip, priority = 2)]\r\n    #[error]\r\n    Error,\r\n}\r\n\r\n#[derive(Debug, PartialEq, Clone)]\r\nenum ParseToken {\r\n    Keyword(String),\r\n    Identifier(String),\r\n    Integer(i64),\r\n    Float(f64),\r\n    Assignment,\r\n    Period,\r\n    Block(Vec<Statement>),\r\n}\r\n\r\n#[derive(Debug, PartialEq, Clone)]\r\nstruct Statement {\r\n    tokens: Vec<ParseToken>,\r\n}\r\n\r\nfn main() {\r\n    let mut lex = LexToken::lexer(\"let 1apple = 4.0;\").peekable();\r\n\r\n    let mut current_statement = vec![];\r\n\r\n    while let Some(current_token) = lex.next() {\r\n        match current_token {\r\n            LexToken::Integer(num) => {\r\n                if let Some(LexToken::Text(_)) = lex.peek() {\r\n                    panic!(\"\");\r\n                }\r\n\r\n                if let Some(ParseToken::Identifier(ident)) = current_statement.last() {\r\n                   current_statement.last_mut().unwrap() = ParseToken::Identifier(format!(\"{}{}\", ident, num));\r\n                }\r\n            },\r\n            LexToken::Error => panic!(\"\"),\r\n            _ => {},\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI expected to see this happen: \r\nThe code would fail to compile and the help message would tell me to dereference the left side, or at the least give me code that was syntactically correct.\r\n\r\nInstead, this happened: \r\nThe could failed to compile, and the help message gave syntactically incorrect code as seen in the backtrace section.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.60.0-nightly (6abb6385b 2022-01-26)\r\nbinary: rustc\r\ncommit-hash: 6abb6385b2cb7249f67b9b3ce7522527767dd907\r\ncommit-date: 2022-01-26\r\nhost: x86_64-apple-darwin\r\nrelease: 1.60.0-nightly\r\nLLVM version: 13.0.0\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary>Backtrace</summary>\r\n<p>\r\n\r\n```rust\r\nksbilodeau@keegans-mbp monch % RUST_BACKTRACE=1 cargo build\r\n   Compiling monch v0.1.0 (/Users/ksbilodeau/Documents/Programming Projects/Rust Projects/monch)\r\nerror[E0070]: invalid left-hand side of assignment\r\n  --> src/main.rs:56:58\r\n   |\r\n56 |                    current_statement.last_mut().unwrap() = ParseToken::Identifier(format!(\"{}{}\", ident, num));\r\n   |                    ------------------------------------- ^\r\n   |                    |\r\n   |                    cannot assign to this expression\r\n   |\r\nhelp: you might have meant to use pattern destructuring\r\n   |\r\n48 |     while let let Some(current_token) = lex.next() {\r\n   |           +++\r\n\r\nFor more information about this error, try `rustc --explain E0070`.\r\nerror: could not compile `monch` due to previous error\r\n```\r\n\r\n</p>\r\n</details>\r\n\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"compiler-errors\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/93486/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/93486/timeline", "performed_via_github_app": null, "state_reason": "completed"}