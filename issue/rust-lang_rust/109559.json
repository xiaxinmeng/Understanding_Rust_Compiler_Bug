{"url": "https://api.github.com/repos/rust-lang/rust/issues/109559", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/109559/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/109559/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/109559/events", "html_url": "https://github.com/rust-lang/rust/issues/109559", "id": 1639057281, "node_id": "I_kwDOAAsO6M5hsgeB", "number": 109559, "title": "False conflicting implementations error with associated types", "user": {"login": "nandesu-utils", "id": 70854931, "node_id": "MDQ6VXNlcjcwODU0OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/70854931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nandesu-utils", "html_url": "https://github.com/nandesu-utils", "followers_url": "https://api.github.com/users/nandesu-utils/followers", "following_url": "https://api.github.com/users/nandesu-utils/following{/other_user}", "gists_url": "https://api.github.com/users/nandesu-utils/gists{/gist_id}", "starred_url": "https://api.github.com/users/nandesu-utils/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nandesu-utils/subscriptions", "organizations_url": "https://api.github.com/users/nandesu-utils/orgs", "repos_url": "https://api.github.com/users/nandesu-utils/repos", "events_url": "https://api.github.com/users/nandesu-utils/events{/privacy}", "received_events_url": "https://api.github.com/users/nandesu-utils/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-24T09:45:28Z", "updated_at": "2023-04-11T01:30:19Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nI tried this code:\r\n\r\n```rust\r\nstruct Error;\r\n\r\n#[allow(unused_qualifications)]\r\nimpl std::convert::From<<u64 as std::str::FromStr>::Err> for Error {\r\n    #[allow(deprecated)]\r\n    fn from(source: <u64 as std::str::FromStr>::Err) -> Self {\r\n        Error\r\n    }\r\n}\r\n```\r\n\r\nI expected to see this happen: proper compilation and no errors\r\n\r\nInstead, this happened: error about conflicting implementations,\r\n```\r\nerror[E0119]: conflicting implementations of trait `From<Error>` for type `Error`\r\n --> a.rs:4:1\r\n  |\r\n4 | impl std::convert::From<<u64 as std::str::FromStr>::Err> for Error {\r\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |\r\n  = note: conflicting implementation in crate `core`:\r\n          - impl<T> From<T> for T;\r\n```\r\n\r\nSo compiler thinks this associated `Err` might be locally defined `Error` type.\r\n\r\nPerhaps there are few issues from different perspectives:\r\n\r\nThe trait and implementing `Self` (which is `u64`) type are both external (the `u64` is a primitive though but it acts as if it was external here since you wouldn't be able to implement the external trait on it), and cyclic dependencies aren't possible so there is no way this associated type may be equal to local `Error` struct.\r\n\r\nAnd this seems to be trivially resolvable since the implementation that is getting selected is selected via concrete types so the associated type may be resolved right away and checked for equality and, hence, conflicts.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.70.0-nightly (1459b3128 2023-03-23)\r\nbinary: rustc\r\ncommit-hash: 1459b3128e288a85fcc4dd1fee7ada2cdcf28794\r\ncommit-date: 2023-03-23\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.70.0-nightly\r\nLLVM version: 15.0.7\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n\r\n</p>\r\n</details>\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/109559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/109559/timeline", "performed_via_github_app": null, "state_reason": null}