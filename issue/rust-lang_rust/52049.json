{"url": "https://api.github.com/repos/rust-lang/rust/issues/52049", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52049/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52049/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52049/events", "html_url": "https://github.com/rust-lang/rust/issues/52049", "id": 338164103, "node_id": "MDU6SXNzdWUzMzgxNjQxMDM=", "number": 52049, "title": "Don't suggest `let` bindings if they don't help with borrows", "user": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": {"login": "PramodBisht", "id": 2766842, "node_id": "MDQ6VXNlcjI3NjY4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2766842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PramodBisht", "html_url": "https://github.com/PramodBisht", "followers_url": "https://api.github.com/users/PramodBisht/followers", "following_url": "https://api.github.com/users/PramodBisht/following{/other_user}", "gists_url": "https://api.github.com/users/PramodBisht/gists{/gist_id}", "starred_url": "https://api.github.com/users/PramodBisht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PramodBisht/subscriptions", "organizations_url": "https://api.github.com/users/PramodBisht/orgs", "repos_url": "https://api.github.com/users/PramodBisht/repos", "events_url": "https://api.github.com/users/PramodBisht/events{/privacy}", "received_events_url": "https://api.github.com/users/PramodBisht/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "PramodBisht", "id": 2766842, "node_id": "MDQ6VXNlcjI3NjY4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2766842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PramodBisht", "html_url": "https://github.com/PramodBisht", "followers_url": "https://api.github.com/users/PramodBisht/followers", "following_url": "https://api.github.com/users/PramodBisht/following{/other_user}", "gists_url": "https://api.github.com/users/PramodBisht/gists{/gist_id}", "starred_url": "https://api.github.com/users/PramodBisht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PramodBisht/subscriptions", "organizations_url": "https://api.github.com/users/PramodBisht/orgs", "repos_url": "https://api.github.com/users/PramodBisht/repos", "events_url": "https://api.github.com/users/PramodBisht/events{/privacy}", "received_events_url": "https://api.github.com/users/PramodBisht/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-07-04T07:43:08Z", "updated_at": "2018-07-08T16:16:25Z", "closed_at": "2018-07-08T16:16:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```rust\r\nfn foo(_: &'static u32) {}\r\n\r\nfn unpromotable<T>(t: T) -> T { t }\r\n\r\nfn main() {\r\n    foo(&unpromotable(5u32));\r\n}\r\n```\r\n\r\nsuggests\r\n\r\n```\r\nerror[E0597]: borrowed value does not live long enough\r\n --> src/main.rs:6:10\r\n  |\r\n6 |     foo(&unpromotable(5u32));\r\n  |          ^^^^^^^^^^^^^^^^^^ - temporary value only lives until here\r\n  |          |\r\n  |          temporary value does not live long enough\r\n  |\r\n  = note: borrowed value must be valid for the static lifetime...\r\n  = note: consider using a `let` binding to increase its lifetime\r\n```\r\n\r\nbut\r\n\r\n```rust\r\n    let x = unpromotable(5u32);\r\n    foo(&x);\r\n```\r\n\r\nstill won't give us a `'static` lifetime.\r\n\r\nWe should not emit the `note` if the required lifetime is `'static`\r\n\r\n# Instructions\r\n\r\n1. search for the `note` inside the source\r\n2. I presume there's some code already checking for producing the \"borrowed value must be valid for the static lifetime\" message, find that code and bubble up the knowledge about that until you have it in the scope of the \"consider using a `let` binding to increase its lifetime\" message\r\n3. Don't emit the message in that case\r\n4. This'll already fail a bunch of tests, I don't think you need any new tests. Running `./x.py test --stage 1 src/test/{ui,compile-fail} --bless` should succeed and give you a bunch of changes to commit. Check that all changes make sense and just commit them.", "closed_by": {"login": "PramodBisht", "id": 2766842, "node_id": "MDQ6VXNlcjI3NjY4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2766842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PramodBisht", "html_url": "https://github.com/PramodBisht", "followers_url": "https://api.github.com/users/PramodBisht/followers", "following_url": "https://api.github.com/users/PramodBisht/following{/other_user}", "gists_url": "https://api.github.com/users/PramodBisht/gists{/gist_id}", "starred_url": "https://api.github.com/users/PramodBisht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PramodBisht/subscriptions", "organizations_url": "https://api.github.com/users/PramodBisht/orgs", "repos_url": "https://api.github.com/users/PramodBisht/repos", "events_url": "https://api.github.com/users/PramodBisht/events{/privacy}", "received_events_url": "https://api.github.com/users/PramodBisht/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52049/timeline", "performed_via_github_app": null, "state_reason": "completed"}