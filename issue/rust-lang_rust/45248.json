{"url": "https://api.github.com/repos/rust-lang/rust/issues/45248", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45248/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45248/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45248/events", "html_url": "https://github.com/rust-lang/rust/issues/45248", "id": 265118833, "node_id": "MDU6SXNzdWUyNjUxMTg4MzM=", "number": 45248, "title": "infinite loop in a background thread turns into a segfault when building with cargo 1.21.0 --release mode", "user": {"login": "oconnor663", "id": 860932, "node_id": "MDQ6VXNlcjg2MDkzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/860932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oconnor663", "html_url": "https://github.com/oconnor663", "followers_url": "https://api.github.com/users/oconnor663/followers", "following_url": "https://api.github.com/users/oconnor663/following{/other_user}", "gists_url": "https://api.github.com/users/oconnor663/gists{/gist_id}", "starred_url": "https://api.github.com/users/oconnor663/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oconnor663/subscriptions", "organizations_url": "https://api.github.com/users/oconnor663/orgs", "repos_url": "https://api.github.com/users/oconnor663/repos", "events_url": "https://api.github.com/users/oconnor663/events{/privacy}", "received_events_url": "https://api.github.com/users/oconnor663/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-10-12T23:07:58Z", "updated_at": "2017-10-13T13:59:55Z", "closed_at": "2017-10-13T13:59:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Example:\r\n\r\n```rust\r\nfn main() {\r\n    let handle = std::thread::spawn(|| loop {});\r\n    handle.join().unwrap();\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n$ rustup run 1.21.0 cargo run --release\r\n   Compiling scratch v0.1.0 (file:///tmp/tmp.24DOIzzSMO/scratch)\r\n    Finished release [optimized] target(s) in 0.49 secs\r\n     Running `target/release/scratch`\r\nzsh: segmentation fault (core dumped)  rustup run 1.21.0 cargo run --release\r\n```\r\n\r\nThis doesn't repro on 1.20, beta, or nightly. In all the other compiler versions I've tried, the loop seems to get optimized out, and the program exits immediately. (In all the debug builds I've tried, including 1.21, the infinite loop stays in and the program pegs a core forever.)", "closed_by": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45248/timeline", "performed_via_github_app": null, "state_reason": "completed"}