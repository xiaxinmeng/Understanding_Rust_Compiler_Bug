{"url": "https://api.github.com/repos/rust-lang/rust/issues/42725", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42725/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42725/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42725/events", "html_url": "https://github.com/rust-lang/rust/issues/42725", "id": 236690673, "node_id": "MDU6SXNzdWUyMzY2OTA2NzM=", "number": 42725, "title": "API documentation suggestion - reduce usage of the ? operator", "user": {"login": "mistydemeo", "id": 780485, "node_id": "MDQ6VXNlcjc4MDQ4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/780485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mistydemeo", "html_url": "https://github.com/mistydemeo", "followers_url": "https://api.github.com/users/mistydemeo/followers", "following_url": "https://api.github.com/users/mistydemeo/following{/other_user}", "gists_url": "https://api.github.com/users/mistydemeo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mistydemeo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mistydemeo/subscriptions", "organizations_url": "https://api.github.com/users/mistydemeo/orgs", "repos_url": "https://api.github.com/users/mistydemeo/repos", "events_url": "https://api.github.com/users/mistydemeo/events{/privacy}", "received_events_url": "https://api.github.com/users/mistydemeo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}], "state": "closed", "locked": false, "assignee": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2017-06-17T23:48:21Z", "updated_at": "2018-03-29T08:13:18Z", "closed_at": "2017-12-06T17:28:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "The Rust std API documentation currently uses the `?` operator in a lot of examples. I think this is likely to be confusing to new Rust developers, who probably haven't encountered it before; it's a powerful shorthand, but it's also confusing and hard to look up.\r\n\r\nI think it's a particular problem because error messages surrounding `?` are unclear and hard to debug for someone who's new to Rust, and it's easy to make mistakes when borrowing from the examples in the API docs.\r\n\r\nFor example, say a new dev wants to write a function that opens a file and writes to it. That developer has probably already clicked through to the documentation for [std::result](https://doc.rust-lang.org/std/result/index.html), which most prominently shows using strings as the `Err` type for `Result`. Searching for writing a file, the user then finds the documentation for [std::fs::File](https://doc.rust-lang.org/std/fs/struct.File.html), and borrows the code in the example at the top of the page since it does what they wanted it to do. Their resulting code looks something like this:\r\n\r\n```rust\r\nuse std::fs::File;\r\nuse std::io::prelude::*;\r\n\r\nfn test() -> Result<(), &'static str> {\r\n    let mut file = File::create(\"foo.txt\")?;\r\n    file.write_all(b\"Hello, world!\")?;\r\n\r\n    return Ok(());\r\n}\r\n```\r\n\r\nWhen trying to build, they get the following errors:\r\n\r\n```\r\n --> test.rs:5:20\r\n  |\r\n5 |     let mut file = File::create(\"foo.txt\")?;\r\n  |                    ^^^^^^^^^^^^^^^^^^^^^^^^ the trait `std::convert::From<std::io::Error>` is not implemented for `&str`\r\n  |\r\n  = note: required by `std::convert::From::from`\r\n\r\nerror[E0277]: the trait bound `&str: std::convert::From<std::io::Error>` is not satisfied\r\n --> test.rs:6:5\r\n  |\r\n6 |     file.write_all(b\"Hello, world!\")?;\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `std::convert::From<std::io::Error>` is not implemented for `&str`\r\n  |\r\n  = note: required by `std::convert::From::from`\r\n```\r\n\r\nIt's not clear at all from this what the problem was, or how copying and pasting these examples caused an issue. As you can probably tell, this example's basically my own experience. \ud83d\ude05 I eventually found out what I was doing wrong, but it does feel a bit like I fell into a trap door that didn't need to be there.\r\n\r\ncc @steveklabnik ", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42725/reactions", "total_count": 3, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 2, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42725/timeline", "performed_via_github_app": null, "state_reason": "completed"}