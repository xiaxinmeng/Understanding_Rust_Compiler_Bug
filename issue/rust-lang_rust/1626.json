{"url": "https://api.github.com/repos/rust-lang/rust/issues/1626", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1626/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1626/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1626/events", "html_url": "https://github.com/rust-lang/rust/issues/1626", "id": 2944709, "node_id": "MDU6SXNzdWUyOTQ0NzA5", "number": 1626, "title": "Recursive enum type causes compiler task to run out of stack", "user": {"login": "jameshfisher", "id": 166966, "node_id": "MDQ6VXNlcjE2Njk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/166966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jameshfisher", "html_url": "https://github.com/jameshfisher", "followers_url": "https://api.github.com/users/jameshfisher/followers", "following_url": "https://api.github.com/users/jameshfisher/following{/other_user}", "gists_url": "https://api.github.com/users/jameshfisher/gists{/gist_id}", "starred_url": "https://api.github.com/users/jameshfisher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jameshfisher/subscriptions", "organizations_url": "https://api.github.com/users/jameshfisher/orgs", "repos_url": "https://api.github.com/users/jameshfisher/repos", "events_url": "https://api.github.com/users/jameshfisher/events{/privacy}", "received_events_url": "https://api.github.com/users/jameshfisher/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2012-01-24T01:29:51Z", "updated_at": "2012-01-24T01:50:19Z", "closed_at": "2012-01-24T01:50:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any `enum` type that references itself in a constructor appears to cause the compiler to run out of stack.  As a simple example, here's `ll.rs`:\n\n```\nenum list { nil, cons(int, list) }\nfn main() {}\n```\n\nOn compiling with backtrace:\n\n``` shell\n$ RUST_LOG=rustc=0,::rt::backtrace rustc ll.rs\nrust: task eaed20 ran out of stack\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task4failEv+0x25)[0x7f44bdd105f5]\n/usr/local/bin/../lib/librustrt.so(+0x199b5)[0x7f44bdd109b5]\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task9new_stackEmPvm+0x3c)[0x7f44bdd10d1c]\n/usr/local/bin/../lib/librustrt.so(upcall_s_new_stack+0x1d)[0x7f44bdd1305d]\n/usr/local/bin/../lib/librustrt.so(+0x2cd39)[0x7f44bdd23d39]\n/usr/local/bin/../lib/librustrt.so(upcall_new_stack+0x42)[0x7f44bdd14192]\n/usr/local/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(+0x5d7d5)[0x7f44be6517d5]\n/usr/local/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(_ZN3map7chained3get17_b22fd9d6e1cb5e02E+0x1dd)[0x7f44be62173d]\n/usr/local/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(+0x4ee94)[0x7f44be642e94]\n/usr/local/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty12tag_variants17_438379e850418683E+0x5c)[0x7f44be06e0bc]\n/usr/local/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_ebae492368cb31bcE+0xa5)[0x7f44be060fb5]\n/usr/local/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_ebae492368cb31bcE+0x27d)[0x7f44be06118d]\nerror: internal compiler error unexpected failure\nnote: The compiler hit an unexpected failure path. This is a bug. Try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: upcall fail 'explicit failure', src/comp/driver/rustc.rs:176\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task4failEv+0x25)[0x7f44bdd105f5]\n/usr/local/bin/../lib/librustrt.so(+0x2cd39)[0x7f44bdd23d39]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x39)[0x7f44bdd13ad9]\nrustc[0x405222]\nrustc[0x40545c]\n/usr/local/bin/../lib/librustrt.so(task_start_wrapper+0x32)[0x7f44bdd0f812]\nrust: domain main @0xe9cc60 root task failed\n$ rustc --version\nrustc 0.1\nhost: x86_64-unknown-linux-gnu\n$\n```\n\n(There appears to be many issues similar to this but I lack the expertise to determine whether they are the same bug.  Those issues include #742.  Is `tag` an old keyword for `enum`?  My compiler doesn't know about it.)\n", "closed_by": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1626/timeline", "performed_via_github_app": null, "state_reason": "completed"}