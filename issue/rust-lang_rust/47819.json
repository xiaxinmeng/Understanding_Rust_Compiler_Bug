{"url": "https://api.github.com/repos/rust-lang/rust/issues/47819", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47819/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47819/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47819/events", "html_url": "https://github.com/rust-lang/rust/issues/47819", "id": 292188897, "node_id": "MDU6SXNzdWUyOTIxODg4OTc=", "number": 47819, "title": "conditionally compile contents of debug_assert!", "user": {"login": "Emerentius", "id": 9992929, "node_id": "MDQ6VXNlcjk5OTI5Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/9992929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Emerentius", "html_url": "https://github.com/Emerentius", "followers_url": "https://api.github.com/users/Emerentius/followers", "following_url": "https://api.github.com/users/Emerentius/following{/other_user}", "gists_url": "https://api.github.com/users/Emerentius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Emerentius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Emerentius/subscriptions", "organizations_url": "https://api.github.com/users/Emerentius/orgs", "repos_url": "https://api.github.com/users/Emerentius/repos", "events_url": "https://api.github.com/users/Emerentius/events{/privacy}", "received_events_url": "https://api.github.com/users/Emerentius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-01-28T08:49:48Z", "updated_at": "2018-02-16T00:16:51Z", "closed_at": "2018-02-16T00:16:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The question came up in IRC why you cannot use a function annotated with `#[cfg(debug_assertions)]` inside `debug_assert!()` without compile error in release mode. This is because the macro is defined via\r\n```if cfg!(debug_assertions) { assert!(..) }```\r\nso it's always compiled but only called in debug builds. It could however just as well be defined as\r\n```#[cfg(debug_assertions)] { assert!(..) }```\r\n\r\nIf I am not missing anything this would be strictly more powerful. An unfortunate side-effect is that switching this now may (will) cause a flood of `unused_assignments` warnings in large projects. At the same time it's useful for readability when variables needed only for debugging are clearly marked as such.\r\n\r\nShould the change be done? Would this need an RFC? I've started patching up all the warnings in rustc that crop up due to the change but with the amount of them I'd like to know in advance whether this is even desired.", "closed_by": {"login": "Emerentius", "id": 9992929, "node_id": "MDQ6VXNlcjk5OTI5Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/9992929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Emerentius", "html_url": "https://github.com/Emerentius", "followers_url": "https://api.github.com/users/Emerentius/followers", "following_url": "https://api.github.com/users/Emerentius/following{/other_user}", "gists_url": "https://api.github.com/users/Emerentius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Emerentius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Emerentius/subscriptions", "organizations_url": "https://api.github.com/users/Emerentius/orgs", "repos_url": "https://api.github.com/users/Emerentius/repos", "events_url": "https://api.github.com/users/Emerentius/events{/privacy}", "received_events_url": "https://api.github.com/users/Emerentius/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47819/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47819/timeline", "performed_via_github_app": null, "state_reason": "completed"}