{"url": "https://api.github.com/repos/rust-lang/rust/issues/112011", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/112011/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/112011/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/112011/events", "html_url": "https://github.com/rust-lang/rust/issues/112011", "id": 1728258760, "node_id": "I_kwDOAAsO6M5nAyLI", "number": 112011, "title": "Cache LLVM between try runs", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 593503757, "node_id": "MDU6TGFiZWw1OTM1MDM3NTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-infra", "name": "T-infra", "color": "bfd4f2", "default": false, "description": "Relevant to the infrastructure team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2023-05-26T21:20:37Z", "updated_at": "2023-05-28T10:12:57Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "We currently spend an inordinate amount of time rebuilding LLVM on every try run. See for example https://github.com/rust-lang-ci/rust/actions/runs/5073748000/jobs/9113150676#step:25:38905, where building LLVM with PGO and BOLT takes up 111 out of 131 total minutes of the run.\r\n\r\nWe should cache LLVM between runs so perf runs don't take so long. It should be fine to cache LLVM until the next time the `src/llvm-project` is updated, the same way `download-ci-llvm` works today. To avoid having three different LLVM artifacts stored in S3 per commit, we'd replace the current artifacts with the BOLT artifacts, leaving the `-alt` builds as the unoptimized + debug-assertions build.\r\n\r\n@rust-lang/wg-llvm @Kobzol @rust-lang/infra ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/112011/reactions", "total_count": 6, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 3, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/112011/timeline", "performed_via_github_app": null, "state_reason": null}