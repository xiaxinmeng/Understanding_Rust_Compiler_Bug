{"url": "https://api.github.com/repos/rust-lang/rust/issues/42741", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42741/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42741/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42741/events", "html_url": "https://github.com/rust-lang/rust/issues/42741", "id": 236734247, "node_id": "MDU6SXNzdWUyMzY3MzQyNDc=", "number": 42741, "title": "Unhelpful error message for non-matching types from different versions of the same crate", "user": {"login": "Yorwba", "id": 6555947, "node_id": "MDQ6VXNlcjY1NTU5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/6555947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yorwba", "html_url": "https://github.com/Yorwba", "followers_url": "https://api.github.com/users/Yorwba/followers", "following_url": "https://api.github.com/users/Yorwba/following{/other_user}", "gists_url": "https://api.github.com/users/Yorwba/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yorwba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yorwba/subscriptions", "organizations_url": "https://api.github.com/users/Yorwba/orgs", "repos_url": "https://api.github.com/users/Yorwba/repos", "events_url": "https://api.github.com/users/Yorwba/events{/privacy}", "received_events_url": "https://api.github.com/users/Yorwba/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-18T17:27:22Z", "updated_at": "2017-06-19T08:52:10Z", "closed_at": "2017-06-19T08:52:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I hit this problem when trying to create a simple example using `gfx` and `gfx_app`. I put those as `*` dependencies in my Cargo.toml, currently essentially equivalent to the following:\r\n```toml\r\n[dependencies]\r\ngfx = \"=0.16.0\"\r\ngfx_app = \"=0.5.0\"\r\n```\r\nHowever, `gfx_app` 0.5.0 depends on `gfx` 0.15.0, so I ended up with two versions of the `gfx` crate. When compiling the following dummy trait implementation\r\n```rust\r\n#[macro_use]\r\nextern crate gfx;\r\nextern crate gfx_app;\r\n\r\nstruct App<R: gfx::Resources>(std::marker::PhantomData<R>);\r\n\r\nimpl<R: gfx::Resources> gfx_app::Application<R> for App<R> {\r\n    fn new<F: gfx::Factory<R>>(factory: &mut F, backend: gfx_app::shade::Backend, window_targets: gfx_app::WindowTargets<R>) -> Self {\r\n        App { }\r\n    }\r\n\r\n    fn render<C: gfx::CommandBuffer<R>>(&mut self, encoder: &mut gfx::Encoder<R, C>) { }\r\n\r\n    fn on_resize(&mut self, window_targets: gfx_app::WindowTargets<R>) { }\r\n}\r\n```\r\nthe error displayed was\r\n```\r\nerror[E0053]: method `render` has an incompatible type for trait\r\n  --> src/main.rs:12:5\r\n   |\r\n12 |     fn render<C: gfx::CommandBuffer<R>>(&mut self, encoder: &mut gfx::Encoder<R, C>) { }\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected struct `gfx::encoder::Encoder`, found struct `gfx::Encoder`\r\n   |\r\n   = note: expected type `fn(&mut App<R>, &mut gfx::encoder::Encoder<R, C>)`\r\n              found type `fn(&mut App<R>, &mut gfx::Encoder<R, C>)`\r\n```\r\nalthough `gfx` reexports `gfx::encoder::Encoder` as `gfx::Encoder`. The real problem appears to be that the `gfx_app::Application` trait defines the type as `gfx(version 0.15.0)::Encoder`, while the type in scope is `gfx(version 0.16.0)::Encoder`. (When setting `gfx = \"0.15.0\"` in Cargo.toml, the error disappears.)\r\nAs a rust-noob, this was all a bit difficult to figure out, and the error message was definitely not helping. It would be nice if this could somehow be detected, and disambiguated by e.g. annotating the types with their respective origins.\r\n\r\nIf you want to reproduce this locally, clone https://github.com/Yorwba/indirect_dependency_different_version/", "closed_by": {"login": "Yorwba", "id": 6555947, "node_id": "MDQ6VXNlcjY1NTU5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/6555947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yorwba", "html_url": "https://github.com/Yorwba", "followers_url": "https://api.github.com/users/Yorwba/followers", "following_url": "https://api.github.com/users/Yorwba/following{/other_user}", "gists_url": "https://api.github.com/users/Yorwba/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yorwba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yorwba/subscriptions", "organizations_url": "https://api.github.com/users/Yorwba/orgs", "repos_url": "https://api.github.com/users/Yorwba/repos", "events_url": "https://api.github.com/users/Yorwba/events{/privacy}", "received_events_url": "https://api.github.com/users/Yorwba/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42741/timeline", "performed_via_github_app": null, "state_reason": "completed"}