{"url": "https://api.github.com/repos/rust-lang/rust/issues/98690", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98690/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98690/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98690/events", "html_url": "https://github.com/rust-lang/rust/issues/98690", "id": 1289356641, "node_id": "I_kwDOAAsO6M5M2gVh", "number": 98690, "title": "Panic if invalid path used for -Z persist-doctests ", "user": {"login": "xd009642", "id": 3472518, "node_id": "MDQ6VXNlcjM0NzI1MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/3472518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xd009642", "html_url": "https://github.com/xd009642", "followers_url": "https://api.github.com/users/xd009642/followers", "following_url": "https://api.github.com/users/xd009642/following{/other_user}", "gists_url": "https://api.github.com/users/xd009642/gists{/gist_id}", "starred_url": "https://api.github.com/users/xd009642/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xd009642/subscriptions", "organizations_url": "https://api.github.com/users/xd009642/orgs", "repos_url": "https://api.github.com/users/xd009642/repos", "events_url": "https://api.github.com/users/xd009642/events{/privacy}", "received_events_url": "https://api.github.com/users/xd009642/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pinkforest", "id": 36498018, "node_id": "MDQ6VXNlcjM2NDk4MDE4", "avatar_url": "https://avatars.githubusercontent.com/u/36498018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pinkforest", "html_url": "https://github.com/pinkforest", "followers_url": "https://api.github.com/users/pinkforest/followers", "following_url": "https://api.github.com/users/pinkforest/following{/other_user}", "gists_url": "https://api.github.com/users/pinkforest/gists{/gist_id}", "starred_url": "https://api.github.com/users/pinkforest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pinkforest/subscriptions", "organizations_url": "https://api.github.com/users/pinkforest/orgs", "repos_url": "https://api.github.com/users/pinkforest/repos", "events_url": "https://api.github.com/users/pinkforest/events{/privacy}", "received_events_url": "https://api.github.com/users/pinkforest/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2022-06-29T22:11:55Z", "updated_at": "2022-07-02T01:36:17Z", "closed_at": "2022-07-02T01:36:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When setting the directory to persist doctests to if an UNC path is used on windows there's a segfault.\n\nThe offending setting of persist-doctests: ` --persist-doctests \\?\\C:\\Users\\danie\\Documents\\doc_coverage\\target\\doctests`. cargo-tarpaulin sets this programatically using a path it gets for the target directory from cargo-metadata. The path from cargo-metadata is an UNC path and this then causes a segfault. I'm going to detect UNC paths in my code and remove the `\\?` on windows, but I felt this warrants a bug report as someone else will hit it eventually. Also, I'm not sure if other parts of the compiler fall prey to this issue?\n\nCompiler version is: the latest nightly (1.64.0-nightly 830880640 2022-06-28) \n\nThe stack trace:\n\n```\n   Compiling doc_coverage v0.1.0 (C:\\Users\\olly\\Documents\\personal\\tarpaulin\\tests\\data\\doc_coverage)\n    Finished test [unoptimized + debuginfo] target(s) in 0.63s\n   Doc-tests doc_coverage\nthread 'rustc' panicked at 'Couldn't create directory for doctest executables: Os { code: 123, kind: InvalidFilename, message: \"The filename, directory name, or volume label syntax is incorrect.\" }', src\\librustdoc\\doctest.rs:1007:18\nstack backtrace:\n   0:     0x7ff93bd49fff - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h0f1df7adb4896e85\n   1:     0x7ff93bd8426a - core::fmt::write::h2c1465c3e28c942a\n   2:     0x7ff93bd3c4f9 - <std::io::IoSliceMut as core::fmt::Debug>::fmt::hb1a2ed0de2369014\n   3:     0x7ff93bd4d8eb - std::panicking::default_hook::haee1d1aa39f2f900\n   4:     0x7ff93bd4d56b - std::panicking::default_hook::haee1d1aa39f2f900\n   5:     0x7ff92d9570c6 - rustc_driver[ea556dad31370c9]::pretty::print_after_hir_lowering\n   6:     0x7ff93bd4e092 - std::panicking::rust_panic_with_hook::h721a2416feebc9e2\n   7:     0x7ff93bd4de2d - <std::panicking::begin_panic_handler::StrPanicPayload as core::panic::BoxMeUp>::get::h95f3ebdac3a8ee16\n   8:     0x7ff93bd4ac37 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h0f1df7adb4896e85\n   9:     0x7ff93bd4db09 - rust_begin_unwind\n  10:     0x7ff93bdba4c5 - core::panicking::panic_fmt::h89f1da2c4ab0f5ba\n  11:     0x7ff93bdba643 - core::result::unwrap_failed::hb29f524c99360ed5\n  12:     0x7ff7562b455e - <unknown>\n  13:     0x7ff7561419fb - <unknown>\n  14:     0x7ff7562b6334 - <unknown>\n  15:     0x7ff7562b5a3d - <unknown>\n  16:     0x7ff7560726ae - <unknown>\n  17:     0x7ff7560f4447 - <unknown>\n  18:     0x7ff7560311d0 - <unknown>\n  19:     0x7ff75612a1ef - <unknown>\n  20:     0x7ff75603357a - <unknown>\n  21:     0x7ff75628739a - <unknown>\n  22:     0x7ff75609f719 - <unknown>\n  23:     0x7ff93bd5e61c - std::sys::windows::thread::Thread::new::h544ff616ee18698f\n  24:     0x7ff9a7b87034 - BaseThreadInitThunk\n  25:     0x7ff9a84e2651 - RtlUserThreadStart\n```\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"pinkforest\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98690/timeline", "performed_via_github_app": null, "state_reason": "completed"}