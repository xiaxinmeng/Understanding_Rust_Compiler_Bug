{"url": "https://api.github.com/repos/rust-lang/rust/issues/104397", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104397/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104397/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104397/events", "html_url": "https://github.com/rust-lang/rust/issues/104397", "id": 1447719026, "node_id": "I_kwDOAAsO6M5WSnBy", "number": 104397, "title": "unused_parens: higher ranked self type in where bounds is incorrectly handled", "user": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1624891239, "node_id": "MDU6TGFiZWwxNjI0ODkxMjM5", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-incorrect", "name": "D-incorrect", "color": "c9f7a3", "default": false, "description": "A diagnostic that is giving misleading or incorrect information"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-14T09:42:18Z", "updated_at": "2022-11-25T02:54:42Z", "closed_at": "2022-11-25T02:54:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```rust\r\nstruct Inv<'a>(&'a mut &'a ());\r\n\r\ntrait Trait {}\r\nimpl Trait for for<'a> fn(Inv<'a>) {}\r\n\r\n\r\nfn with_bound()\r\nwhere\r\n    (for<'a> fn(Inv<'a>)): Trait,\r\n{}\r\n\r\nfn main() {\r\n    with_bound();\r\n}\r\n\r\n```\r\nresults in the following lint:\r\n```rust\r\nwarning: unnecessary parentheses around type\r\n --> src/main.rs:9:5\r\n  |\r\n9 |     (for<'a> fn(Inv<'a>)): Trait,\r\n  |     ^                   ^\r\n  |\r\n  = note: `#[warn(unused_parens)]` on by default\r\nhelp: remove these parentheses\r\n  |\r\n9 -     (for<'a> fn(Inv<'a>)): Trait,\r\n9 +     for<'a> fn(Inv<'a>): Trait,\r\n  |\r\n```\r\nfollowing the lint results in a compiler error however:\r\n```rust\r\nerror: implementation of `Trait` is not general enough\r\n  --> src/main.rs:13:5\r\n   |\r\n13 |     with_bound();\r\n   |     ^^^^^^^^^^^^ implementation of `Trait` is not general enough\r\n   |\r\n   = note: `for<'a> fn(Inv<'a>)` must implement `Trait`, for any lifetime `'0`...\r\n   = note: ...but `Trait` is actually implemented for the type `for<'a> fn(Inv<'a>)`\r\n```\r\nBy removing the parens this gets parsed as `for<'a> (fn(Inv<'a>): Trait)` instead of the original `(for<'a> fn(Inv(<'a>))): Trait`", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104397/timeline", "performed_via_github_app": null, "state_reason": "completed"}