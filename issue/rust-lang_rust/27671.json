{"url": "https://api.github.com/repos/rust-lang/rust/issues/27671", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27671/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27671/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27671/events", "html_url": "https://github.com/rust-lang/rust/issues/27671", "id": 100380779, "node_id": "MDU6SXNzdWUxMDAzODA3Nzk=", "number": 27671, "title": "try!() on iterator element cause compiler crash", "user": {"login": "magnusulf", "id": 6261088, "node_id": "MDQ6VXNlcjYyNjEwODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6261088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magnusulf", "html_url": "https://github.com/magnusulf", "followers_url": "https://api.github.com/users/magnusulf/followers", "following_url": "https://api.github.com/users/magnusulf/following{/other_user}", "gists_url": "https://api.github.com/users/magnusulf/gists{/gist_id}", "starred_url": "https://api.github.com/users/magnusulf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magnusulf/subscriptions", "organizations_url": "https://api.github.com/users/magnusulf/orgs", "repos_url": "https://api.github.com/users/magnusulf/repos", "events_url": "https://api.github.com/users/magnusulf/events{/privacy}", "received_events_url": "https://api.github.com/users/magnusulf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-08-11T18:51:02Z", "updated_at": "2015-08-11T19:20:43Z", "closed_at": "2015-08-11T19:20:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using the try!() macro, directly on an iterator element. The compiler crashes, and fails to tell what is wrong with the code.\n\nI tried this code:\n\n``` rust\nfor try!(element) in elements {\n// Do stuff here\n}\n```\n\nCargo crashed when attempting to compile the code. Commenting that part out, or removing the try!() call, caused the code to compile, so I think it is safe to assume that the \"try!(element)\" part is what is causing the issue.\n## Meta\n\n`rustc --version --verbose`:\nrustc 1.2.0 (082e47636 2015-08-03)\nbinary: rustc\ncommit-hash: 082e4763615bdbe7b4dd3dfd6fc2210b7773edf5\ncommit-date: 2015-08-03\nhost: x86_64-apple-darwin\nrelease: 1.2.0\n\nBacktrace:\n\nMagnuss-MacBook-Air:stocks Magnus$ RUST_BACKTRACE=1 cargo build --verbose\n       Fresh rustc-serialize v0.3.15\n   Compiling stocks v0.1.0 (file:///Users/Magnus/MagnusUlf/Rust/stocks)\n     Running `rustc src/main.rs --crate-name stocks --crate-type bin -g --out-dir /Users/Magnus/MagnusUlf/Rust/stocks/target/debug --emit=dep-info,link -L dependency=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug -L dependency=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug/deps --extern rustc_serialize=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug/deps/librustc_serialize-c1e8163a38ed3d54.rlib`\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'fold_mac disabled by default', ../src/libsyntax/fold.rs:190\n\nstack backtrace:\n   1:        0x10d92c7b5 - sys::backtrace::write::hf5ea20500b66cd24uns\n   2:        0x10d935013 - panicking::on_panic::hbe02cb0d925cad49iGw\n   3:        0x10d8f0dd2 - rt::unwind::begin_unwind_inner::h12ba0ba9dffdecc2uow\n   4:        0x10b59c1d6 - rt::unwind::begin_unwind::h2011421250315581831\n   5:        0x10b807e8c - ptr::P<T>::map::h3829385840473244073\n   6:        0x10b7f808b - ext::expand::expand_expr::closure.64700\n   7:        0x10b7f61b0 - ext::expand::expand_expr::h00bf5a43419a5a9b93a\n   8:        0x10b846b90 - fold::noop_fold_stmt::h4092105005077979799\n   9:        0x10b8228ae - ext::expand::expand_stmt::h8332ca149d4a1896QEb\n  10:        0x10b84f4a3 - ext::expand::expand_block_elts::closure.65407\n  11:        0x10b84f156 - iter::FlatMap<I, U, F>.Iterator::next::h7837221099035994564\n  12:        0x10b84e067 - vec::Vec<T>.FromIterator<T>::from_iter::h4964964009179316507\n  13:        0x10b84d66d - ext::expand::expand_block_elts::closure.65401\n  14:        0x10b8098ea - ext::expand::expand_block_elts::h962105c93a5677c6MPb\n  15:        0x10b84d322 - ext::expand::expand_block::ha3009aa3e00113ce7Ob\n  16:        0x10b8092bc - ext::expand::expand_and_rename_fn_decl_and_block::h281d482393d5142bbjc\n  17:        0x10b81085d - ext::expand::expand_item_underscore::h6f178e8b5a32d33fgtb\n  18:        0x10b8744f4 - fold::Folder::fold_item_simple::h6794700446803303180\n  19:        0x10b8740c3 - ptr::P<T>::map::h1211983651740850239\n  20:        0x10b80dd2d - ext::expand::expand_annotatable::hb4dbc2b7d2ec92e58Zb\n  21:        0x10b809a71 - ext::expand::expand_item::h3540f4af8f7fd9f8Fsb\n  22:        0x10b81697a - iter::FlatMap<I, U, F>.Iterator::next::h12102230822894758553\n  23:        0x10b815887 - vec::Vec<T>.FromIterator<T>::from_iter::h16893642646688759245\n  24:        0x10b81504f - fold::noop_fold_mod::h14542714455252956640\n  25:        0x10b810fee - ext::expand::expand_item_underscore::h6f178e8b5a32d33fgtb\n  26:        0x10b8744f4 - fold::Folder::fold_item_simple::h6794700446803303180\n  27:        0x10b8740c3 - ptr::P<T>::map::h1211983651740850239\n  28:        0x10b80e7ad - ext::expand::expand_annotatable::hb4dbc2b7d2ec92e58Zb\n  29:        0x10b809a71 - ext::expand::expand_item::h3540f4af8f7fd9f8Fsb\n  30:        0x10b87d79f - ext::expand::expand_crate::ha5b4cf319725184aGrc\n  31:        0x10a252402 - driver::phase_2_configure_and_expand::closure.21456\n  32:        0x10a206822 - driver::phase_2_configure_and_expand::hcb65c5920cf60903ita\n  33:        0x10a1f609d - driver::compile_input::hb6d2be5b0fa2247fTba\n  34:        0x10a2d313f - run_compiler::h21d74b88eec3fe3bx7b\n  35:        0x10a2d09f3 - boxed::F.FnBox<A>::call_box::h1689969825914258414\n  36:        0x10a2d01b7 - rt::unwind::try::try_fn::h11273853850686318048\n  37:        0x10d9bfcc8 - rust_try_inner\n  38:        0x10d9bfcb5 - rust_try\n  39:        0x10d91ec95 - rt::unwind::try::inner_try::h480e3107f6a4b5b9nkw\n  40:        0x10a2d03e8 - boxed::F.FnBox<A>::call_box::h888215220722514405\n  41:        0x10d933a9d - sys::thread::Thread:: new::thread_start::hdb3d925f69c5da4aHIv\n  42:     0x7fff81f3b267 - _pthread_body\n  43:     0x7fff81f3b1e4 - _pthread_start\n\nCould not compile `stocks`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name stocks --crate-type bin -g --out-dir /Users/Magnus/MagnusUlf/Rust/stocks/target/debug --emit=dep-info,link -L dependency=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug -L dependency=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug/deps --extern rustc_serialize=/Users/Magnus/MagnusUlf/Rust/stocks/target/debug/deps/librustc_serialize-c1e8163a38ed3d54.rlib` (exit code: 101)\n", "closed_by": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27671/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27671/timeline", "performed_via_github_app": null, "state_reason": "completed"}