{"url": "https://api.github.com/repos/rust-lang/rust/issues/12531", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12531/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12531/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12531/events", "html_url": "https://github.com/rust-lang/rust/issues/12531", "id": 28221096, "node_id": "MDU6SXNzdWUyODIyMTA5Ng==", "number": 12531, "title": "Better error message for wrong use of modules", "user": {"login": "Valloric", "id": 919444, "node_id": "MDQ6VXNlcjkxOTQ0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/919444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Valloric", "html_url": "https://github.com/Valloric", "followers_url": "https://api.github.com/users/Valloric/followers", "following_url": "https://api.github.com/users/Valloric/following{/other_user}", "gists_url": "https://api.github.com/users/Valloric/gists{/gist_id}", "starred_url": "https://api.github.com/users/Valloric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Valloric/subscriptions", "organizations_url": "https://api.github.com/users/Valloric/orgs", "repos_url": "https://api.github.com/users/Valloric/repos", "events_url": "https://api.github.com/users/Valloric/events{/privacy}", "received_events_url": "https://api.github.com/users/Valloric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-02-25T04:01:56Z", "updated_at": "2017-05-30T14:14:42Z", "closed_at": "2017-05-30T14:14:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In `test.rs`:\n\n``` rust\nmod submod;\n\nfn main() {\n  println!(\"{:?}\", submod::foo());\n}\n```\n\nIn `submod.rs`:\n\n``` rust\nmod submod {\n  pub fn foo() {\n    ~\"foo!\"\n  }\n}\n```\n\nRunning `rustc -o test test.rs` results in: \n\n```\ntest.rs:4:20: 4:31 error: unresolved name `submod::foo`.\ntest.rs:4   println!(\"{:?}\", submod::foo());\n                             ^~~~~~~~~~~\nnote: in expansion of format_args!\n<std macros>:2:23: 2:77 note: expansion site\n<std macros>:1:1: 1:1 note: in expansion of println!\ntest.rs:4:3: 4:35 note: expansion site\nerror: aborting due to previous error\n```\n\nNow, I know what the issue is: there's no need to wrap the contents of `submod.rs` with `mod submod {...}`, but as a Rust newbie I didn't know that and it took me a while to figure it out (and I've read the entire official tutorial and the whole manual). The error message did nothing to help me; something like  `did you mean submod::submod::foo?` (\u00e0 la Clang) would have pointed me in the right direction. It would be even better if the note had something more specific to this (I'd presume) common newbie mistake of misunderstanding that a file is also implicitly a module from the perspective of other files.\n\nAlso, the official tutorial _really_ didn't help out either; it led me astray with the very first sentence from the \"Files and Modules\" section: \n\n> One important aspect of Rust's module system is that source files and modules are not the same thing.\n\nIt made me think the exact opposite (\"I have to put the file's contents inside a `mod <name> {}` block.\") of how Rust actually works (\"Contents of `foo.rs` are inside `mod foo` from the perspective of other files.\").\n\nAll of this looks trivial and obvious in retrospect, but didn't at first. We should look into removing barriers to entry for people new to Rust, and a better error message for something like this should reduce the time spent scratching one's head.\n\nThis is all using the latest Rust nightly.\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/12531/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12531/timeline", "performed_via_github_app": null, "state_reason": "completed"}