{"url": "https://api.github.com/repos/rust-lang/rust/issues/13564", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13564/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13564/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13564/events", "html_url": "https://github.com/rust-lang/rust/issues/13564", "id": 31667831, "node_id": "MDU6SXNzdWUzMTY2NzgzMQ==", "number": 13564, "title": "Consider implementing \"two-dimensional\" index for ty::substs", "user": {"login": "edwardw", "id": 454049, "node_id": "MDQ6VXNlcjQ1NDA0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/454049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edwardw", "html_url": "https://github.com/edwardw", "followers_url": "https://api.github.com/users/edwardw/followers", "following_url": "https://api.github.com/users/edwardw/following{/other_user}", "gists_url": "https://api.github.com/users/edwardw/gists{/gist_id}", "starred_url": "https://api.github.com/users/edwardw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edwardw/subscriptions", "organizations_url": "https://api.github.com/users/edwardw/orgs", "repos_url": "https://api.github.com/users/edwardw/repos", "events_url": "https://api.github.com/users/edwardw/events{/privacy}", "received_events_url": "https://api.github.com/users/edwardw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-04-16T18:39:52Z", "updated_at": "2014-06-13T20:47:58Z", "closed_at": "2014-06-13T20:47:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "One core data structure of `rustc` is `ty::substs`:\n\n``` rust\npub struct substs {\n    pub self_ty: Option<ty::t>,\n    pub tps: Vec<t>,\n    pub regions: RegionSubsts,\n}\n```\n\nAnd, `ty::ty_param` and `ty::ReEarlyBound` variants of `ty::t` and `ty::Region` have indexes in them:\n\n``` rust\npub enum Region {\n    ReEarlyBound(ast::NodeId, uint, ast::Name),\n    ...\n}\npub enum sty {\n    ty_param(param_ty),\n    ...\n}\npub struct param_ty {\n    pub idx: uint,\n    pub def_id: DefId\n}\n```\n\nThese indexes are meant to distinguish type and lifetime parameters originated from trait, implementation and method bounds. In order to do so, they are monotonic so merging them from different bounds involves messy index manipulation, such as #13503.\n\n@nikomatsakis in IRC:\n\n> the fix I had planned was basically to make the index \"two-dimensional\": that is, first a namespace and then an index\n> using def-ids would be another option, I tried it once, found it was kinda messy\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13564/timeline", "performed_via_github_app": null, "state_reason": "completed"}