{"url": "https://api.github.com/repos/rust-lang/rust/issues/59063", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59063/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59063/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59063/events", "html_url": "https://github.com/rust-lang/rust/issues/59063", "id": 419173965, "node_id": "MDU6SXNzdWU0MTkxNzM5NjU=", "number": 59063, "title": "rustc panics documenting sr-api-macros", "user": {"login": "Matthias-Fauconneau", "id": 812566, "node_id": "MDQ6VXNlcjgxMjU2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/812566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matthias-Fauconneau", "html_url": "https://github.com/Matthias-Fauconneau", "followers_url": "https://api.github.com/users/Matthias-Fauconneau/followers", "following_url": "https://api.github.com/users/Matthias-Fauconneau/following{/other_user}", "gists_url": "https://api.github.com/users/Matthias-Fauconneau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matthias-Fauconneau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matthias-Fauconneau/subscriptions", "organizations_url": "https://api.github.com/users/Matthias-Fauconneau/orgs", "repos_url": "https://api.github.com/users/Matthias-Fauconneau/repos", "events_url": "https://api.github.com/users/Matthias-Fauconneau/events{/privacy}", "received_events_url": "https://api.github.com/users/Matthias-Fauconneau/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-10T11:14:27Z", "updated_at": "2019-03-10T11:17:05Z", "closed_at": "2019-03-10T11:17:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "From https://github.com/paritytech/substrate.git\r\n\r\n> matthias@Matthias:~/substrate$ RUST_BACKTRACE=1 cargo doc --open\r\n>    Compiling parity-codec-derive v3.1.0\r\n>    Compiling sr-api-macros v0.1.0 (/home/matthias/substrate/core/sr-api-macros)\r\n>  Documenting sr-api-macros v0.1.0 (/home/matthias/substrate/core/sr-api-macros)\r\n>  Documenting url v1.7.2\r\n>    Compiling vergen v3.0.4\r\n>  Documenting slog-json v2.3.0\r\n>    Compiling rayon v1.0.3\r\n>  Documenting rayon v1.0.3\r\n> error: internal compiler error: src/librustc/hir/def.rs:257: attempted .def_id() on invalid def: NonMacroAttr(Builtin)\r\n> \r\n> thread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:588:9\r\n> note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n> stack backtrace:\r\n>    0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace\r\n>              at src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:39\r\n>    1: std::sys_common::backtrace::_print\r\n>              at src/libstd/sys_common/backtrace.rs:70\r\n>    2: std::panicking::default_hook::{{closure}}\r\n>              at src/libstd/sys_common/backtrace.rs:58\r\n>              at src/libstd/panicking.rs:200\r\n>    3: std::panicking::default_hook\r\n>              at src/libstd/panicking.rs:215\r\n>    4: std::panicking::rust_panic_with_hook\r\n>              at src/libstd/panicking.rs:478\r\n>    5: std::panicking::begin_panic\r\n>    6: rustc_errors::Handler::bug\r\n>    7: rustc::util::bug::opt_span_bug_fmt::{{closure}}\r\n>    8: rustc::ty::context::tls::with_opt::{{closure}}\r\n>    9: rustc::ty::context::tls::with_context_opt\r\n>   10: rustc::ty::context::tls::with_opt\r\n>   11: rustc::util::bug::opt_span_bug_fmt\r\n>   12: rustc::util::bug::bug_fmt\r\n>   13: rustc::hir::def::Def::def_id::{{closure}}\r\n>   14: rustc::hir::def::Def::def_id\r\n>   15: rustdoc::clean::register_def\r\n>              at src/librustdoc/clean/mod.rs:3809\r\n>   16: <rustdoc::doctree::Import as rustdoc::clean::Clean<alloc::vec::Vec<rustdoc::clean::Item>>>::clean\r\n>              at src/librustdoc/clean/mod.rs:3824\r\n>              at src/librustdoc/clean/mod.rs:3586\r\n>   17: <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T, I>>::spec_extend\r\n>              at src/librustdoc/clean/mod.rs:591\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/ops/function.rs:279\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/option.rs:414\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/mod.rs:1428\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/mod.rs:2715\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/mod.rs:2552\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/liballoc/vec.rs:1933\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/liballoc/vec.rs:1830\r\n>   18: <rustdoc::doctree::Module as rustdoc::clean::Clean<rustdoc::clean::Item>>::clean\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/liballoc/vec.rs:1794\r\n>              at src/librustdoc/clean/mod.rs:591\r\n>   19: <rustdoc::doctree::Module as rustdoc::clean::Clean<rustdoc::clean::Item>>::clean\r\n>              at src/librustdoc/clean/mod.rs:597\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/mod.rs:1447\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/slice/mod.rs:2913\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/mod.rs:1447\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libcore/iter/iterator.rs:606\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/liballoc/vec.rs:1856\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/liballoc/vec.rs:1794\r\n>              at src/librustdoc/clean/mod.rs:597\r\n>   20: <rustdoc::visit_ast::RustdocVisitor<'a, 'tcx, 'rcx> as rustdoc::clean::Clean<rustdoc::clean::Crate>>::clean\r\n>              at src/librustdoc/clean/mod.rs:162\r\n>   21: rustdoc::core::run_core::{{closure}}::{{closure}}\r\n>              at src/librustdoc/core.rs:547\r\n>   22: <std::thread::local::LocalKey<T>>::with\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc_driver/driver.rs:1332\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1958\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1924\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1857\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1923\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1957\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1912\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libstd/thread/local.rs:299\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libstd/thread/local.rs:245\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1904\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libstd/thread/local.rs:299\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libstd/thread/local.rs:245\r\n>   23: rustc::ty::context::TyCtxt::create_and_enter\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1896\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1935\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc/ty/context.rs:1255\r\n>   24: rustc_driver::driver::phase_3_run_analysis_passes\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc_driver/driver.rs:1229\r\n>   25: <scoped_tls::ScopedKey<T>>::set\r\n>              at src/librustdoc/core.rs:491\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc_driver/driver.rs:65\r\n>              at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-0.1.2/src/lib.rs:155\r\n>   26: rustdoc::core::run_core\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/librustc_driver/driver.rs:64\r\n>              at src/librustdoc/core.rs:394\r\n>   27: <scoped_tls::ScopedKey<T>>::set\r\n>              at src/librustdoc/lib.rs:428\r\n>              at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-0.1.2/src/lib.rs:155\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libsyntax/lib.rs:111\r\n>              at /cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-0.1.2/src/lib.rs:155\r\n>   28: syntax::with_globals\r\n>              at /rustc/2aa4c46cfdd726e97360c2734835aa3515e8c858/src/libsyntax/lib.rs:110\r\n> \r\n> note: the compiler unexpectedly panicked. this is a bug.\r\n> \r\n> note: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n> \r\n> note: rustc 1.33.0 (2aa4c46cf 2019-02-28) running on x86_64-unknown-linux-gnu\r\n> \r\n> error: Could not document `sr-api-macros`.\r\n> \r\n> Caused by:\r\n>   process didn't exit successfully: `rustdoc --edition=2018 --crate-name sr_api_macros core/sr-api-macros/src/lib.rs --color always -o /home/matthias/substrate/target/doc -L dependency=/home/matthias/substrate/target/debug/deps --extern blake2_rfc=/home/matthias/substrate/target/debug/deps/libblake2_rfc-66a781f937f8fb35.rmeta --extern proc_macro_crate=/home/matthias/substrate/target/debug/deps/libproc_macro_crate-a5315f1e33e73818.rmeta --extern proc_macro2=/home/matthias/substrate/target/debug/deps/libproc_macro2-b7ee48ecc1c6fa1c.rmeta --extern quote=/home/matthias/substrate/target/debug/deps/libquote-fc84fd9546e2fa9b.rmeta --extern syn=/home/matthias/substrate/target/debug/deps/libsyn-5772549f280c3407.rmeta` (exit code: 1)\r\n> warning: build failed, waiting for other jobs to finish...\r\n> error: build failed", "closed_by": {"login": "Matthias-Fauconneau", "id": 812566, "node_id": "MDQ6VXNlcjgxMjU2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/812566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matthias-Fauconneau", "html_url": "https://github.com/Matthias-Fauconneau", "followers_url": "https://api.github.com/users/Matthias-Fauconneau/followers", "following_url": "https://api.github.com/users/Matthias-Fauconneau/following{/other_user}", "gists_url": "https://api.github.com/users/Matthias-Fauconneau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matthias-Fauconneau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matthias-Fauconneau/subscriptions", "organizations_url": "https://api.github.com/users/Matthias-Fauconneau/orgs", "repos_url": "https://api.github.com/users/Matthias-Fauconneau/repos", "events_url": "https://api.github.com/users/Matthias-Fauconneau/events{/privacy}", "received_events_url": "https://api.github.com/users/Matthias-Fauconneau/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59063/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59063/timeline", "performed_via_github_app": null, "state_reason": "completed"}