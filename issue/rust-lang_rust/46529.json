{"url": "https://api.github.com/repos/rust-lang/rust/issues/46529", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46529/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46529/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46529/events", "html_url": "https://github.com/rust-lang/rust/issues/46529", "id": 279590319, "node_id": "MDU6SXNzdWUyNzk1OTAzMTk=", "number": 46529, "title": "Safe API for constructing enum from an integer", "user": {"login": "kornelski", "id": 72159, "node_id": "MDQ6VXNlcjcyMTU5", "avatar_url": "https://avatars.githubusercontent.com/u/72159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kornelski", "html_url": "https://github.com/kornelski", "followers_url": "https://api.github.com/users/kornelski/followers", "following_url": "https://api.github.com/users/kornelski/following{/other_user}", "gists_url": "https://api.github.com/users/kornelski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kornelski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kornelski/subscriptions", "organizations_url": "https://api.github.com/users/kornelski/orgs", "repos_url": "https://api.github.com/users/kornelski/repos", "events_url": "https://api.github.com/users/kornelski/events{/privacy}", "received_events_url": "https://api.github.com/users/kornelski/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-12-06T01:15:11Z", "updated_at": "2021-09-29T02:03:21Z", "closed_at": "2017-12-06T04:00:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Creating an enum from an integer the long way using match on the integer is an awful proposition. It's long, requires keeping it in sync with the enum, and is error-prone:\r\n\r\n```rust\r\nenum Color {\r\nRed = 1,\r\nGreen = 2,\r\nBlue = 3,\r\n};\r\n\r\nmatch num {\r\n1 => Color::Blue,\r\n2 => Color::Green,\r\n3 => Color::Red,\r\n}\r\n```\r\n\r\nBecause Rust doesn't have a safe 1-liner, I've used seemingly-innocent `transmute` instead, which lead to [an awful bug](https://github.com/rust-lang/rust/issues/46458).\r\n\r\nRust really should have a built-in API that constructs a (field-less) enum from an integer. It could be `TryFrom` or something else that returns `Option<Enum>` (and of course `None` if the integer is not a valid value).\r\n\r\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46529/reactions", "total_count": 8, "+1": 8, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46529/timeline", "performed_via_github_app": null, "state_reason": "completed"}