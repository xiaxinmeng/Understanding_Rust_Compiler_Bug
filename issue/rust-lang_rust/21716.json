{"url": "https://api.github.com/repos/rust-lang/rust/issues/21716", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21716/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21716/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21716/events", "html_url": "https://github.com/rust-lang/rust/issues/21716", "id": 55713975, "node_id": "MDU6SXNzdWU1NTcxMzk3NQ==", "number": 21716, "title": "ICE while overriding default trait implementation", "user": {"login": "rohitjoshi", "id": 1570798, "node_id": "MDQ6VXNlcjE1NzA3OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1570798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohitjoshi", "html_url": "https://github.com/rohitjoshi", "followers_url": "https://api.github.com/users/rohitjoshi/followers", "following_url": "https://api.github.com/users/rohitjoshi/following{/other_user}", "gists_url": "https://api.github.com/users/rohitjoshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohitjoshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohitjoshi/subscriptions", "organizations_url": "https://api.github.com/users/rohitjoshi/orgs", "repos_url": "https://api.github.com/users/rohitjoshi/repos", "events_url": "https://api.github.com/users/rohitjoshi/events{/privacy}", "received_events_url": "https://api.github.com/users/rohitjoshi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-28T04:45:10Z", "updated_at": "2015-04-22T02:41:05Z", "closed_at": "2015-04-22T02:41:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I tried to override default implementation of `read_str()` method of json::Decoder trait,  I get error: internal compiler error: unexpected panic.  Ideally it should given me an error that you must implement all the trait methods.\n\n```\nimpl ::rustc_serialize::Decoder for AlertPayloadType {\n    fn read_str(&mut self) -> Result<String, Decoder::Error> {\n    match self.pop() {\n            Json::Null => Ok(\"\".to_string()),\n            value => Ok(format!(\"{}\", value)),\n           }\n    }   \n}\n```\n\n**Versions:**\n    rustc 1.0.0-nightly (458a6a2f6 2015-01-25 21:20:37 +0000)\n    cargo 0.0.1-pre-nightly (bb28e71 2015-01-22 06:06:34 +0000)\n\n**Back-trace:**\n\n<pre>\napns rohitjoshi$ RUST_BACKTRACE=1 cargo build  --verbose\n       Fresh log v0.2.0\n       Fresh gcc v0.1.6\n       Fresh libc v0.1.0\n       Fresh rustc-serialize v0.2.9\n       Fresh time v0.1.14\n       Fresh net-utils v0.0.1 (https://github.com/rohitjoshi/net-utils.git#6ddc194e)\n   Compiling apns v0.0.1 (file:///Users/rohitjoshi/projects/rust/apns)\n     Running `rustc src/lib.rs --crate-name apns --crate-type lib -g -C metadata=1fcee4f6b418c0da -C extra-filename=-1fcee4f6b418c0da --out-dir /Users/rohitjoshi/projects/rust/apns/target --emit=dep-info,link -L dependency=/Users/rohitjoshi/projects/rust/apns/target -L dependency=/Users/rohitjoshi/projects/rust/apns/target/deps --extern rustc-serialize=/Users/rohitjoshi/projects/rust/apns/target/deps/librustc-serialize-8214bc2e838e96ca.rlib --extern net-utils=/Users/rohitjoshi/projects/rust/apns/target/deps/libnet-utils-6b70e46a05f1d859.rlib --extern log=/Users/rohitjoshi/projects/rust/apns/target/deps/liblog-4e79c2d7625e8c6f.rlib -L native=/Users/rohitjoshi/projects/rust/apns/target/build/time-24f9c2dbbbc6f19b/out`\nERROR:rbml::reader: failed to find block with tag 7\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'explicit panic', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librbml/lib.rs:262\n\nstack backtrace:\n   1:        0x105240d5c - sys::backtrace::write::h926cb97ba8fab334dbu\n   2:        0x105264c8f - failure::on_fail::h85f0b0735db7566b8aB\n   3:        0x1051cebae - rt::unwind::begin_unwind_inner::hf6d52be0daf8a2f44SA\n   4:        0x1048260eb - rt::unwind::begin_unwind::h4549706688203109812\n   5:        0x104824f89 - reader::get_doc::hb8b500b3799ad176nLa\n   6:        0x10268d958 - metadata::decoder::item_type::h151361ae279f5ad3oVg\n   7:        0x10269dddb - metadata::decoder::get_type::h399c3a212cddd10ax7g\n   8:        0x10264ef5e - metadata::csearch::get_type::h304fcc3e5ae8f35anYj\n   9:        0x101f8e4d4 - collect::CollectCtxt<'a, 'tcx>.AstConv<'tcx>::get_item_type_scheme::h0d60851b0297f9f5Sgu\n  10:        0x101f7d691 - astconv::ast_path_to_ty::h112b74d43de603b0USs\n  11:        0x101f814f0 - astconv::ast_ty_to_ty::unboxed_closure.30770\n  12:        0x101f1c9f6 - astconv::ast_ty_to_ty::h6b3068569c155302Ejt\n  13:        0x101f77629 - vec::Vec<T>.FromIterator<T>::from_iter::h9935643277956187684\n  14:        0x101f757e6 - astconv::convert_angle_bracketed_parameters::h57532aaa51f9e9camts\n  15:        0x101f1c106 - astconv::ast_path_substs_for_ty::h66e57c5063ab1bd7tis\n  16:        0x101f7d78c - astconv::ast_path_to_ty::h112b74d43de603b0USs\n  17:        0x101f814f0 - astconv::ast_ty_to_ty::unboxed_closure.30770\n  18:        0x101f1c9f6 - astconv::ast_ty_to_ty::h6b3068569c155302Ejt\n  19:        0x101f7817f - astconv::convert_ty_with_lifetime_elision::h11d3d7b7dc3faf4dtxs\n  20:        0x101f830ff - astconv::ty_of_method_or_bare_fn::h2f9399575c080343uDt\n  21:        0x101f82451 - astconv::ty_of_method::h2a9720f484e0bc45QBt\n  22:        0x101fa5739 - collect::convert_methods::ty_of_method::h319fbc118542416bjFu\n  23:        0x101f967e3 - collect::convert::h94c751b0a7ed02fdpIu\n  24:        0x101f9a0d2 - visit::walk_item::h3534631790025090882\n  25:        0x101fcc8b2 - check_crate::unboxed_closure.31907\n  26:        0x101fca981 - check_crate::h911809ee92b3ea658My\n  27:        0x1019b2ace - driver::phase_3_run_analysis_passes::hf23cd54e255d7d22VFa\n  28:        0x101999ab6 - driver::compile_input::h3750206967d345b7Bba\n  29:        0x101a587e6 - run_compiler::hc084e5c048185791R8b\n  30:        0x101a55b33 - thunk::F.Invoke<A, R>::invoke::h3046682734678028285\n  31:        0x101a54998 - rt::unwind::try::try_fn::h12824457894967850961\n  32:        0x1052da3a9 - rust_try_inner\n  33:        0x1052da396 - rust_try\n  34:        0x101a54fd6 - thunk::F.Invoke<A, R>::invoke::h13746492197546964172\n  35:        0x105250621 - sys::thread::thread_start::hb385b609f87fbce2r3w\n  36:     0x7fff899342fc - _pthread_body\n  37:     0x7fff89934279 - _pthread_body\n\nCould not compile `apns`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/lib.rs --crate-name apns --crate-type lib -g -C metadata=1fcee4f6b418c0da -C extra-filename=-1fcee4f6b418c0da --out-dir /Users/rohitjoshi/projects/rust/apns/target --emit=dep-info,link -L dependency=/Users/rohitjoshi/projects/rust/apns/target -L dependency=/Users/rohitjoshi/projects/rust/apns/target/deps --extern rustc-serialize=/Users/rohitjoshi/projects/rust/apns/target/deps/librustc-serialize-8214bc2e838e96ca.rlib --extern net-utils=/Users/rohitjoshi/projects/rust/apns/target/deps/libnet-utils-6b70e46a05f1d859.rlib --extern log=/Users/rohitjoshi/projects/rust/apns/target/deps/liblog-4e79c2d7625e8c6f.rlib -L native=/Users/rohitjoshi/projects/rust/apns/target/build/time-24f9c2dbbbc6f19b/out` (status=101)\n\n\n</pre>\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21716/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21716/timeline", "performed_via_github_app": null, "state_reason": "completed"}