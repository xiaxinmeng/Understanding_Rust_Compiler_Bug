{"url": "https://api.github.com/repos/rust-lang/rust/issues/37673", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37673/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37673/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37673/events", "html_url": "https://github.com/rust-lang/rust/issues/37673", "id": 188328056, "node_id": "MDU6SXNzdWUxODgzMjgwNTY=", "number": 37673, "title": "(MIR?) ICE: unsupported target word size", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-09T19:11:56Z", "updated_at": "2016-11-15T12:42:35Z", "closed_at": "2016-11-15T12:42:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### STR\r\n\r\nUsing a `rustc` that includes #37672\r\n\r\n```\r\n$ rustc --target msp430 src/libcore/lib.rs\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'unsupported target word size', /shared/rust/checkouts/msp430/src/librustc_trans/mir/rvalue.rs:739\r\nstack backtrace:\r\n   1:     0x7fdfb5f681c3 - std::sys::imp::backtrace::tracing::imp::write::h0064f77c206681f1\r\n   2:     0x7fdfb5f7a7dd - std::panicking::default_hook::{{closure}}::hce6e6da7884521df\r\n   3:     0x7fdfb5f770b7 - std::panicking::default_hook::h08b777dd112812ee\r\n   4:     0x7fdfb5f777b8 - std::panicking::rust_panic_with_hook::h8aaf423b79a723ce\r\n   5:     0x7fdfb4a8dc0f - std::panicking::begin_panic::h80813978ef3663c6\r\n   6:     0x7fdfb4b6973e - rustc_trans::mir::rvalue::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_rvalue_operand::h78e9fde934aa9d95\r\n   7:     0x7fdfb4b54b8e - rustc_trans::mir::block::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_block::habef79617cb513b5\r\n   8:     0x7fdfb4b53068 - rustc_trans::mir::trans_mir::h7d5b1fcd394860ce\r\n   9:     0x7fdfb4af4790 - rustc_trans::base::trans_closure::h01b35e781bad1851\r\n  10:     0x7fdfb4b72a51 - rustc_trans::trans_item::TransItem::define::hb3a0bebc734605dd\r\n  11:     0x7fdfb4af7cfa - rustc_trans::base::trans_crate::h4b27c7ef3f8bd9b5\r\n  12:     0x7fdfb62cd677 - rustc_driver::driver::phase_4_translate_to_llvm::h30e5bcfd6c9e90e1\r\n  13:     0x7fdfb6306c9a - rustc_driver::driver::compile_input::{{closure}}::hff8e6ebec23ef81d\r\n  14:     0x7fdfb62f892e - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hd235265215af038a\r\n  15:     0x7fdfb62c5e05 - rustc_driver::driver::phase_3_run_analysis_passes::h58f5a849bb0812c0\r\n  16:     0x7fdfb62b23bd - rustc_driver::driver::compile_input::h9100f1ce0cf239dd\r\n  17:     0x7fdfb62df0fb - rustc_driver::run_compiler::h5d2f6d5267af76f1\r\n  18:     0x7fdfb620d2fb - std::panicking::try::do_call::hd0d49d99f786a858\r\n  19:     0x7fdfb5f80a96 - __rust_maybe_catch_panic\r\n  20:     0x7fdfb622cc91 - <F as alloc::boxed::FnBox<A>>::call_box::h5dfdb4de795e60b4\r\n  21:     0x7fdfb5f763b0 - std::sys::imp::thread::Thread::new::thread_start::hdf824b927fe0aa16\r\n  22:     0x7fdfaef66709 - start_thread\r\n  23:     0x7fdfb5c3382c - clone\r\n  24:                0x0 - <unknown>\r\n```\r\n\r\nWith this custom target definition:\r\n\r\n``` json\r\n{\r\n  \"arch\": \"msp430\",\r\n  \"data-layout\": \"\",\r\n  \"executables\": true,\r\n  \"data-layout\": \"e-m:e-p:16:16-i32:16:32-a:16-n8:16\",\r\n  \"linker\": \"msp430-gcc\",\r\n  \"llvm-target\": \"msp430\",\r\n  \"os\": \"none\",\r\n  \"relocation-model\": \"static\",\r\n  \"target-endian\": \"little\",\r\n  \"target-pointer-width\": \"16\"\r\n}\r\n```\r\n\r\nNote that for this target/architecture pointer size is 16 bit.\r\n\r\n### Meta\r\n\r\n```\r\n# HEAD is PR #37672\r\n$ git rev-parse HEAD~\r\n966c70085adc69eecf9c8cd1f128872e8d90614d\r\n```\r\n\r\ncc @eddyb ", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37673/timeline", "performed_via_github_app": null, "state_reason": "completed"}