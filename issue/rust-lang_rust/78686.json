{"url": "https://api.github.com/repos/rust-lang/rust/issues/78686", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/78686/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/78686/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/78686/events", "html_url": "https://github.com/rust-lang/rust/issues/78686", "id": 734850730, "node_id": "MDU6SXNzdWU3MzQ4NTA3MzA=", "number": 78686, "title": "Linking with LLD fails (on Windows) but only in 32-bit (due to space in path)", "user": {"login": "Boscop", "id": 535593, "node_id": "MDQ6VXNlcjUzNTU5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/535593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Boscop", "html_url": "https://github.com/Boscop", "followers_url": "https://api.github.com/users/Boscop/followers", "following_url": "https://api.github.com/users/Boscop/following{/other_user}", "gists_url": "https://api.github.com/users/Boscop/gists{/gist_id}", "starred_url": "https://api.github.com/users/Boscop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Boscop/subscriptions", "organizations_url": "https://api.github.com/users/Boscop/orgs", "repos_url": "https://api.github.com/users/Boscop/repos", "events_url": "https://api.github.com/users/Boscop/events{/privacy}", "received_events_url": "https://api.github.com/users/Boscop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 55301991, "node_id": "MDU6TGFiZWw1NTMwMTk5MQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-x86", "name": "O-x86", "color": "6e6ec0", "default": false, "description": "Target: x86 processors"}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 266005765, "node_id": "MDU6TGFiZWwyNjYwMDU3NjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-msvc", "name": "O-windows-msvc", "color": "6e6ec0", "default": false, "description": "Toolchain: MSVC, Operating system: Windows"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-11-02T21:47:05Z", "updated_at": "2023-03-03T18:05:27Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "The 32-bit build of my DLL fails to build with nightly-2020-10-19 when linking with LLD.\r\nIt was building fine with nightly-2020-04-12, but I'm not sure if I was using LLD back then already.\r\nLLD seems to have problems with a space in my rustup path, but it used to work before, also building for 32-bit!\r\nMy rustup folder is `D:\\Program Files\\.multirust`, but it tries to use `Files\\.multirust`.\r\nBtw, this DLL builds fine in 64-bit with this nightly!\r\n```\r\n  = note: lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libeasyvst-7a8738ccac37439f.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libarray_macro-2b71173e2a79656f.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblazy_static-0de2833aa4303022.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libitertools-75a9c1c17325349d.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libeither-aa94c37967e008e6.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libc_fixed_string-8d1124b1c76f7e82.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libmemchr-e2259ec4523fc568.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libsublime_fuzzy-de293d34669e9dd7.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libron-c6e5d0c14aa8afe7.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libbitflags-5c012e57ffbe56ea.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libbase64-213d31a37202d205.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libbyteorder-bad377bdb0120245.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libboolinator-551df7afa7ae84d2.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libasprim-4f82e6617c60293a.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libsimplelog-e76090bfe18f431e.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libtime-921d7a0f588c9276.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libterm-86609a00208a9c6c.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblog_panics-15dfb7bb59469c3c.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libvst-9d2979ff986da315.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libbitflags-1f6fef3ee32e9ef9.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblog-eb76fcb7f2706963.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblog-6e5ecb16eafd4862.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libcfg_if-f1f2b9528ae9a5cd.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblibloading-48abf4a37ee36207.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libkernel32-ad762fc204d97edb.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libwinapi-d625ce9a2ea76b4c.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\liblibc-718757e0ebf8be62.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libreaper_api-e562353af2768c3e.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libfoobar_config-9e73727d59b96661.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libserde-8aefc32c499e45ec.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libshortmsg-69ba7413354c2b0e.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libenum_count-1f7635dfbe93b412.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\librimd-ff9e02fb180febf9.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding-0ccebfb44cb5a5c6.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding_index_tradchinese-56975872a8aba386.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding_index_simpchinese-d1232a3197f07bc9.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding_index_japanese-e759b1dc9fd511b0.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding_index_korean-f497a323d30da112.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libencoding_index_singlebyte-5920c6926b714127.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum-a4c7b78d2b66d2a8.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_rational-95e67133f6cb485a.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_bigint-30601424daf18c22.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\librand-10bef9b973b67363.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libwinapi-950fd670bbb93895.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_complex-0346b25f5c728548.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\librustc_serialize-1634c57b3af99045.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_iter-92a87612c5b18cc0.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_integer-b8ef21ff533ffbdd.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libenum_primitive-3903f47e2541cb7b.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_traits-077d42f91afc67f7.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libbyteorder-c4286e542a8ca9c1.rlib\r\n          D:\\projects\\vstplugins\\foobar\\target\\i686-pc-windows-msvc\\release\\deps\r\n\\libnum_traits-6e3165eedd1a0e29.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libstd-7a1\r\n8ec7fc231bb29.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libpanic_u\r\nnwind-c544953d0d722951.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\librustc_d\r\nemangle-87350483bc38d2b1.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libhashbro\r\nwn-2efb755558a60d85.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\librustc_s\r\ntd_workspace_alloc-1337199bff2828b2.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libunwind-\r\n7409746f778811ad.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libcfg_if-\r\n73ba9bd83b75c6a4.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\liblibc-88\r\n089498ba09518c.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\liballoc-8\r\nd350847855f2cf5.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\librustc_s\r\ntd_workspace_core-945c601817cdaedc.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libcore-a9\r\n414fa6d2989d9c.rlib\r\n          D:\\Program': invalid argument\r\n\r\n          lld-link: error: could not open 'Files\\.multirust\\toolchains\\nightly-2\r\n020-10-19-x86_64-pc-windows-msvc\\lib\\rustlib\\i686-pc-windows-msvc\\lib\\libcompile\r\nr_builtins-fed5b7efac91cb5b.rlib\r\n          kernel32.lib\r\n          credui.lib\r\n          advapi32.lib\r\n          kernel32.lib\r\n          secur32.lib\r\n          advapi32.lib\r\n          ws2_32.lib\r\n          userenv.lib\r\n          msvcrt.lib\r\n          -fuse-ld=lld\r\n          ': no such file or directory\r\n\r\n\r\nerror: aborting due to previous error; 4 warnings emitted\r\n```\r\n\r\nAt first I posted on the forum:\r\nhttps://users.rust-lang.org/t/linking-with-lld-fails-but-only-in-32-bit-due-to-space-in-path/50521\r\nApparently it was only fixed for Wasm: https://github.com/rust-lang/rust/pull/77543#issuecomment-714836364\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/78686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/78686/timeline", "performed_via_github_app": null, "state_reason": null}