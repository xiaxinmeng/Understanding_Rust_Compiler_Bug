{"url": "https://api.github.com/repos/rust-lang/rust/issues/42390", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42390/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42390/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42390/events", "html_url": "https://github.com/rust-lang/rust/issues/42390", "id": 233289439, "node_id": "MDU6SXNzdWUyMzMyODk0Mzk=", "number": 42390, "title": "Add span to E0271 errors pointing at the \"found\" associated type bound", "user": {"login": "chabapok", "id": 4709480, "node_id": "MDQ6VXNlcjQ3MDk0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/4709480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chabapok", "html_url": "https://github.com/chabapok", "followers_url": "https://api.github.com/users/chabapok/followers", "following_url": "https://api.github.com/users/chabapok/following{/other_user}", "gists_url": "https://api.github.com/users/chabapok/gists{/gist_id}", "starred_url": "https://api.github.com/users/chabapok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chabapok/subscriptions", "organizations_url": "https://api.github.com/users/chabapok/orgs", "repos_url": "https://api.github.com/users/chabapok/repos", "events_url": "https://api.github.com/users/chabapok/events{/privacy}", "received_events_url": "https://api.github.com/users/chabapok/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-06-02T20:21:16Z", "updated_at": "2023-01-07T23:16:47Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "This code produce next error:\r\n\r\n```rust\r\nfn foo<F, R>(f: F)\r\n    where F: FnOnce() -> R,\r\n          R: IntoItem<Item=()> \r\n          { }\r\n\r\ntrait IntoItem {\r\n    type Item;\r\n}\r\n\r\nstruct S;\r\n\r\nimpl IntoItem for S {\r\n    type Item = u32;\r\n}\r\n\r\nfn main() {    \r\n    foo(|| S);\r\n}\r\n```\r\nerror:\r\n```\r\n 35 |     foo(|| S);\r\n    |     ^^^ expected u32, found ()\r\n    |\r\n    = note: expected type `u32`\r\n               found type `()`\r\n    = note: required by `foo`\r\n```\r\n\r\nThis is not correct, because expected type of foo is () (see functon signature).\r\nI'm ask to swap \"expected\" and \"found\" notes, because is very confused. For rust\r\nbeginners this is embarassing (e.g., an error often occurs when works with `tokio` crate).\r\n\r\nIt's also incorrect because underlining is on \"foo\" keyword, but should to argument.\r\n\r\nThis error might look like this:\r\n```\r\n35 |     foo(|| S);\r\n   |         ^^^^ expected (), found u32\r\n   |\r\n   = note: expected type `()`\r\n              found type `u32`\r\n   = note: required by `foo`\r\n```\r\n\r\nI suggest making a conclusion about this error easier, such as this:\r\n```rust\r\nfn foo(v:u8){ }\r\nfn main(){\r\n    foo(25u16); //expected u8, found u16 <-- this is correct\r\n}\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42390/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42390/timeline", "performed_via_github_app": null, "state_reason": null}