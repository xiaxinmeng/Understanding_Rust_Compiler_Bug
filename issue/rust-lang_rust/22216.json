{"url": "https://api.github.com/repos/rust-lang/rust/issues/22216", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22216/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22216/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22216/events", "html_url": "https://github.com/rust-lang/rust/issues/22216", "id": 57447704, "node_id": "MDU6SXNzdWU1NzQ0NzcwNA==", "number": 22216, "title": "Confusing error message with missing return", "user": {"login": "mrmonday", "id": 165689, "node_id": "MDQ6VXNlcjE2NTY4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/165689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrmonday", "html_url": "https://github.com/mrmonday", "followers_url": "https://api.github.com/users/mrmonday/followers", "following_url": "https://api.github.com/users/mrmonday/following{/other_user}", "gists_url": "https://api.github.com/users/mrmonday/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrmonday/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrmonday/subscriptions", "organizations_url": "https://api.github.com/users/mrmonday/orgs", "repos_url": "https://api.github.com/users/mrmonday/repos", "events_url": "https://api.github.com/users/mrmonday/events{/privacy}", "received_events_url": "https://api.github.com/users/mrmonday/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-02-12T11:21:49Z", "updated_at": "2017-05-10T21:06:41Z", "closed_at": "2017-05-10T21:06:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following code:\n\n``` rust\n#![allow(dead_code)]\n\nfn forgot_to_return() -> usize {\n    while 4 > 3 {\n        /* do something */\n    }\n}\n\nfn main() {\n    let _ = forgot_to_return();\n}\n```\n\nGives the error message:\n\n```\n<anon>:4:5: 6:6 error: mismatched types:\n expected `usize`,\n    found `()`\n(expected usize,\n    found ()) [E0308]\n<anon>:4     while 4 > 3 {\n<anon>:5         /* do something */\n<anon>:6     }\nerror: aborting due to previous error\n```\n\nPlaypen: http://is.gd/0sudKI\n\nThis is confusing, since it looks like the type of either `4` or `3` is `()` - it is not clear that the actual error is that the while loop is being treated as the final expression in the function, and its type does match the return type of the function.\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22216/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22216/timeline", "performed_via_github_app": null, "state_reason": "completed"}