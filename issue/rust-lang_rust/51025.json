{"url": "https://api.github.com/repos/rust-lang/rust/issues/51025", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51025/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51025/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51025/events", "html_url": "https://github.com/rust-lang/rust/issues/51025", "id": 326088117, "node_id": "MDU6SXNzdWUzMjYwODgxMTc=", "number": 51025, "title": "several ui tests need to be strengthened to properly test NLL mode", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-24T11:56:56Z", "updated_at": "2018-08-15T20:58:39Z", "closed_at": "2018-05-26T21:26:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following tests fail to report the intended errors (most often it is missing the intended *number* of errors; sometimes failing to report **any** error at all), not because of a bug in the compiler, but rather because the test was written in a manner that assumes lexical lifetimes.\r\n\r\nThis issue is just documenting these cases (and I will try to add to the list if more are discovered); a follow-up PR will have the necessary updates to the tests.\r\n\r\n(Some of the cases currently listed are only currently slated as \"needs investigation\", either to whether it should be strengthened, or what the original intent of the test even was, etc. As those questions are resolved, they will be either have their checkbox marked, or just crossed off entirely.)\r\n\r\n * [ ] borrowck/borrowck-report-with-custom-diagnostic.rs\r\n * [ ] borrowck/mut-borrow-outside-loop.rs\r\n * [ ] codemap_tests/issue-11715.rs\r\n * ~~codemap_tests/one_line.rs~~\r\n    * this is not an obvious instance of \"weak test\"; needs further review\r\n * ~~codemap_tests/overlapping_spans.rs~~\r\n    * this *is* a weak test (in the opinion of @pnkfelix ) but its not obvious what the right fix is in order to recover the (hypothesized) original intent.\r\n    * Thus, deferring to another issue (TBD).\r\n * [ ] dropck/dropck-eyepatch-extern-crate.rs\r\n    * Some of the \u0394behavior may be intended or at least preferred; see rust-lang/rust#51036\r\n * [ ] dropck/dropck-eyepatch-reorder.rs\r\n    * Some of the \u0394behavior may be intended or at least preferred; see rust-lang/rust#51036\r\n * [ ] dropck/dropck-eyepatch.rs\r\n    * Some of the \u0394behavior may be intended or at least preferred; see rust-lang/rust#51036\r\n * [ ] error-codes/E0499.rs\r\n * [ ] error-codes/E0502.rs\r\n * [ ] error-codes/E0503.rs\r\n * [ ] error-codes/E0505.rs\r\n * [ ] error-codes/E0597.rs\r\n * [ ] generator/dropck.rs\r\n * [ ] generator/pattern-borrow.rs\r\n * [ ] hygiene/fields-numeric-borrowck.rs\r\n * ~~issue-17263.rs~~\r\n    * this was miscategorized initially. I believe it is actually a case where NLL has reenabled smart reasoning about `Box`, which was intended.\r\n * [ ] issue-25793.rs\r\n * [ ] issue-42106.rs\r\n * [ ] lifetime-errors/ex3-both-anon-regions-2.rs (?)\r\n    * see rust-lang/rust#51029 in particular; its not 100% clear that this is merely a weak test.\r\n    * huh; I changed my mind. Found way to strengthen test I'm happy with. Should double-check original intent of test vs ifetime-errors/ex3-both-anon-regions.rs though.\r\n * [ ] lifetimes/borrowck-let-suggestion.rs\r\n * [ ] span/borrowck-let-suggestion-suffixes.rs\r\n * [ ] span/issue-36537.rs\r\n * [ ] span/mut-ptr-cant-outlive-ref.rs\r\n * [ ] span/range-2.rs\r\n * [ ] span/regionck-unboxed-closure-lifetimes.rs\r\n * [ ] span/send-is-not-static-std-sync.rs\r\n * [ ] span/slice-borrow.rs\r\n * [ ] span/vec_refs_data_with_early_death.rs\r\n\r\n(This list of tests is drawn from an [informal paper](https://paper.dropbox.com/doc/NLL-stderr-diagnostic-deviations-KzroSvNgQ7lip3WQyiLTa) document that I have been using to keep notes for myself as I work on this...)\r\n\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51025/timeline", "performed_via_github_app": null, "state_reason": "completed"}