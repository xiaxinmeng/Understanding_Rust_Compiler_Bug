{"url": "https://api.github.com/repos/rust-lang/rust/issues/60450", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60450/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60450/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60450/events", "html_url": "https://github.com/rust-lang/rust/issues/60450", "id": 439313890, "node_id": "MDU6SXNzdWU0MzkzMTM4OTA=", "number": 60450, "title": "assign to part of possibly uninitialized variable is flagged as UB (but only in 2018 edition)", "user": {"login": "jethrogb", "id": 1132307, "node_id": "MDQ6VXNlcjExMzIzMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1132307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jethrogb", "html_url": "https://github.com/jethrogb", "followers_url": "https://api.github.com/users/jethrogb/followers", "following_url": "https://api.github.com/users/jethrogb/following{/other_user}", "gists_url": "https://api.github.com/users/jethrogb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jethrogb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jethrogb/subscriptions", "organizations_url": "https://api.github.com/users/jethrogb/orgs", "repos_url": "https://api.github.com/users/jethrogb/repos", "events_url": "https://api.github.com/users/jethrogb/events{/privacy}", "received_events_url": "https://api.github.com/users/jethrogb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}, {"id": 867465998, "node_id": "MDU6TGFiZWw4Njc0NjU5OTg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/NLL-diagnostics", "name": "NLL-diagnostics", "color": "f799ea", "default": false, "description": "Working torwads the \"diagnostic parity\" goal"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-05-01T20:35:39Z", "updated_at": "2019-08-06T12:02:17Z", "closed_at": "2019-08-06T12:02:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Code sample:\r\n```rust\r\nfn main() {\r\n    let mut _tmp: (u64, u64);\r\n    \r\n    _tmp.0 = 1;\r\n    _tmp.1 = 1;\r\n}\r\n```\r\n\r\nWhen compiling this with `rustc +1.31.0 --edition 2018`, I get:\r\n```\r\nwarning[E0381]: assign to part of possibly uninitialized variable: `_tmp`\r\n --> t.rs:4:5\r\n  |\r\n4 |     _tmp.0 = 1;\r\n  |     ^^^^^^^^^^ use of possibly uninitialized `_tmp`\r\n  |\r\n  = warning: This error has been downgraded to a warning for backwards compatibility with previous releases.\r\n          It represents potential unsoundness in your code.\r\n          This warning will become a hard error in the future.\r\n```\r\n\r\nIn later versions, the warning message has been changed somewhat:\r\n```\r\n   = warning: this error has been downgraded to a warning for backwards compatibility with previous releases\r\n   = warning: this represents potential undefined behavior in your code and this warning will become a hard error in the future\r\n```\r\n\r\nIf I compile with `--edition 2015` I get no warnings at all. (Edit: this is still silent on 1.34.0 2015, but an warning *is* emitted in edition 2015 on the latest nightly).\r\n\r\nThere are several issues as far as I can see:\r\n* \u201cThis error has been downgraded to a warning\u201d: this is the first stable compiler for the 2018 edition, so when was this downgrade supposed to have happened? This code never generated an error, for any edition, on any previous stable compiler.\r\n* How can there be UB only when I'm compiling for the 2018 edition?\r\n* What actually is the UB? The compiler is already tracking validity of individual fields just fine (e.g. when moving out of structs).\r\n* The [explanation for E0381](https://doc.rust-lang.org/error-index.html#E0381) doesn't talk about assignment of uninitialized variables at all.\r\n\r\nEdit: I ran into this issue with inline assembly, where you may be required to specify an output register even if it's not used.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60450/timeline", "performed_via_github_app": null, "state_reason": "completed"}