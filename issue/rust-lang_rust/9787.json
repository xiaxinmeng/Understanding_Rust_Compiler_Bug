{"url": "https://api.github.com/repos/rust-lang/rust/issues/9787", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9787/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9787/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9787/events", "html_url": "https://github.com/rust-lang/rust/issues/9787", "id": 20777965, "node_id": "MDU6SXNzdWUyMDc3Nzk2NQ==", "number": 9787, "title": "rustpkg should pull updates for remote packages", "user": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-10-09T23:12:03Z", "updated_at": "2014-02-23T12:53:27Z", "closed_at": "2014-02-23T12:53:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On #9732, @brson asked: \"How does rustpkg allow sources of dependencies to be updated? What happens when they are read only and need to be updated?\"\n\nand I replied:\n\n\"What I think will happen right now is that rustpkg will never update sources once they're checked out. That's obviously not the desired behavior.\n\nWhat I think should happen is that rustpkg should always check for upstream changes unless a specific revision was requested [1]. If there are new changes, it should fetch them into a temporary directory, then force-rm the old checked-out sources [2] and move the temporary directory into the existing directory if everything succeeded.\n\nThis is hard to test for the same reason that we don't have tests for anything that makes network requests from a git server.\n\nAn alternative is to add a \"rustpkg freshen\" (or something) command that updates any git sources that are known about. Or, a --update flag that goes with build and install. Personally I'd rather not add more flags, though.\n\n[1] However, if there's no network connection available, it should continue gracefully, perhaps printing a warning.\n[2] To protect people against data loss if they accidentally made the files writable and made their own changes, perhaps it could also error out at this point if the existing files that are supposed to be read-only aren't?\"\n\nWe should decide what to do; then do it.\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/9787/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9787/timeline", "performed_via_github_app": null, "state_reason": "completed"}