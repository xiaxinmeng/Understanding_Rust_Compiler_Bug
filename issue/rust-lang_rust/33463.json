{"url": "https://api.github.com/repos/rust-lang/rust/issues/33463", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/33463/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/33463/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/33463/events", "html_url": "https://github.com/rust-lang/rust/issues/33463", "id": 153484356, "node_id": "MDU6SXNzdWUxNTM0ODQzNTY=", "number": 33463, "title": "LLVM assertion on cross compile to x86_64-pc-windows-msvc", "user": {"login": "Kimundi", "id": 2903206, "node_id": "MDQ6VXNlcjI5MDMyMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/2903206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kimundi", "html_url": "https://github.com/Kimundi", "followers_url": "https://api.github.com/users/Kimundi/followers", "following_url": "https://api.github.com/users/Kimundi/following{/other_user}", "gists_url": "https://api.github.com/users/Kimundi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kimundi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kimundi/subscriptions", "organizations_url": "https://api.github.com/users/Kimundi/orgs", "repos_url": "https://api.github.com/users/Kimundi/repos", "events_url": "https://api.github.com/users/Kimundi/events{/privacy}", "received_events_url": "https://api.github.com/users/Kimundi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-05-06T16:04:29Z", "updated_at": "2017-05-26T23:39:46Z", "closed_at": "2017-05-26T23:39:46Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Attempting to cross compile from 64Bit Arch after doing\n\n```\nrustup target add x86_64-pc-windows-msvc\ncargo build --release --target=x86_64-pc-windows-msvc --verbose\n```\n\nErrors with LLVM asserts:\n\n```\nmarvin@tp-marvin-arch ~/d/r/g/fun1> cargo build --release --target=x86_64-pc-windows-msvc --verbose\n       Fresh tuple_utils v0.2.0\n       Fresh winapi v0.2.6\n       Fresh fnv v1.0.2\n       Fresh atom v0.3.4\n   Compiling threadpool v1.0.0\n     Running `rustc /home/marvin/.cargo/registry/src/github.com-88ac128001ac3a9a/threadpool-1.0.0/src/lib.rs --crate-name threadpool --crate-type lib -C opt-level=3 -C metadata=0bb5a6ba1d0b4f62 -C extra-filename=-0bb5a6ba1d0b4f62 --out-dir /home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --emit=dep-info,link --target x86_64-pc-windows-msvc -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --cap-lints allow`\n       Fresh gdi32-sys v0.1.1\n       Fresh lazy_static v0.1.16\n       Fresh libc v0.2.11\n   Compiling rustc-serialize v0.3.19\n     Running `rustc /home/marvin/.cargo/registry/src/github.com-88ac128001ac3a9a/rustc-serialize-0.3.19/src/lib.rs --crate-name rustc_serialize --crate-type lib -C opt-level=3 -C metadata=3bc953984ed46e7f -C extra-filename=-3bc953984ed46e7f --out-dir /home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --emit=dep-info,link --target x86_64-pc-windows-msvc -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --cap-lints allow`\n   Compiling shared_library v0.1.4\n     Running `rustc /home/marvin/.cargo/registry/src/github.com-88ac128001ac3a9a/shared_library-0.1.4/src/lib.rs --crate-name shared_library --crate-type lib -C opt-level=3 -C metadata=8a12fcda5e4d258b -C extra-filename=-8a12fcda5e4d258b --out-dir /home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --emit=dep-info,link --target x86_64-pc-windows-msvc -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --extern lazy_static=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps/liblazy_static-5e6d9f365bf63baa.rlib --extern libc=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps/liblibc-38919d24e617a235.rlib --cap-lints allow`\n   Compiling rand v0.3.14\n     Running `rustc /home/marvin/.cargo/registry/src/github.com-88ac128001ac3a9a/rand-0.3.14/src/lib.rs --crate-name rand --crate-type lib -C opt-level=3 -C metadata=c724acb3942597d1 -C extra-filename=-c724acb3942597d1 --out-dir /home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --emit=dep-info,link --target x86_64-pc-windows-msvc -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --extern libc=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps/liblibc-38919d24e617a235.rlib --cap-lints allow`\nrustc: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/include/llvm/ADT/DenseMap.h:1025: llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type* llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::operator->() const [with KeyT = const llvm::MachineBasicBlock*; ValueT = int; KeyInfoT = llvm::DenseMapInfo<const llvm::MachineBasicBlock*>; Bucket = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>; bool IsConst = false; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::pointer = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>*; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>]: Assertion `isHandleInSync() && \"invalid iterator access!\"' failed.\nBuild failed, waiting for other jobs to finish...\nrustc: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/include/llvm/ADT/DenseMap.h:1025: llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type* llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::operator->() const [with KeyT = const llvm::MachineBasicBlock*; ValueT = int; KeyInfoT = llvm::DenseMapInfo<const llvm::MachineBasicBlock*>; Bucket = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>; bool IsConst = false; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::pointer = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>*; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>]: Assertion `isHandleInSync() && \"invalid iterator access!\"' failed.\nrustc: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/include/llvm/ADT/DenseMap.h:1025: llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type* llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::operator->() const [with KeyT = const llvm::MachineBasicBlock*; ValueT = int; KeyInfoT = llvm::DenseMapInfo<const llvm::MachineBasicBlock*>; Bucket = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>; bool IsConst = false; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::pointer = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>*; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>]: Assertion `isHandleInSync() && \"invalid iterator access!\"' failed.\nrustc: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/include/llvm/ADT/DenseMap.h:1025: llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type* llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::operator->() const [with KeyT = const llvm::MachineBasicBlock*; ValueT = int; KeyInfoT = llvm::DenseMapInfo<const llvm::MachineBasicBlock*>; Bucket = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>; bool IsConst = false; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::pointer = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>*; llvm::DenseMapIterator<KeyT, ValueT, KeyInfoT, Bucket, IsConst>::value_type = llvm::detail::DenseMapPair<const llvm::MachineBasicBlock*, int>]: Assertion `isHandleInSync() && \"invalid iterator access!\"' failed.\nerror: Could not compile `shared_library`.\n\nCaused by:\n  Process didn't exit successfully: `rustc /home/marvin/.cargo/registry/src/github.com-88ac128001ac3a9a/shared_library-0.1.4/src/lib.rs --crate-name shared_library --crate-type lib -C opt-level=3 -C metadata=8a12fcda5e4d258b -C extra-filename=-8a12fcda5e4d258b --out-dir /home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --emit=dep-info,link --target x86_64-pc-windows-msvc -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps -L dependency=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps --extern lazy_static=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps/liblazy_static-5e6d9f365bf63baa.rlib --extern libc=/home/marvin/dev/rust/graphics_fun_2016-05-05/fun1/target/x86_64-pc-windows-msvc/release/deps/liblibc-38919d24e617a235.rlib --cap-lints allow` (exit code: 1)\n\n```\n\nCompiler version:\n\n```\nrustc 1.10.0-nightly (8da2bcac5 2016-04-28)\nbinary: rustc\ncommit-hash: 8da2bcac5db1e091b90cceb19d0496f0f7501c88\ncommit-date: 2016-04-28\nhost: x86_64-unknown-linux-gnu\nrelease: 1.10.0-nightly\n```\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/33463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/33463/timeline", "performed_via_github_app": null, "state_reason": "completed"}