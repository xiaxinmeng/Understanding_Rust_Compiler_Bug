{"url": "https://api.github.com/repos/rust-lang/rust/issues/54583", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/54583/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54583/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/54583/events", "html_url": "https://github.com/rust-lang/rust/issues/54583", "id": 363858576, "node_id": "MDU6SXNzdWUzNjM4NTg1NzY=", "number": 54583, "title": "Release builds using AVX code produce incorrect output", "user": {"login": "vladglv", "id": 8117516, "node_id": "MDQ6VXNlcjgxMTc1MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8117516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vladglv", "html_url": "https://github.com/vladglv", "followers_url": "https://api.github.com/users/vladglv/followers", "following_url": "https://api.github.com/users/vladglv/following{/other_user}", "gists_url": "https://api.github.com/users/vladglv/gists{/gist_id}", "starred_url": "https://api.github.com/users/vladglv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vladglv/subscriptions", "organizations_url": "https://api.github.com/users/vladglv/orgs", "repos_url": "https://api.github.com/users/vladglv/repos", "events_url": "https://api.github.com/users/vladglv/events{/privacy}", "received_events_url": "https://api.github.com/users/vladglv/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-09-26T04:58:46Z", "updated_at": "2018-12-22T12:10:39Z", "closed_at": "2018-10-21T01:06:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "# Code \r\n\r\n```\r\n#[cfg(target_arch = \"x86_64\")]\r\nuse std::arch::x86_64::*;\r\n\r\nfn main() {\r\n    unsafe {\r\n        let f = _mm256_set_pd(2.0, 2.0, 2.0, 2.0);\r\n        let r = _mm256_mul_pd(f, f);\r\n\r\n        println!(\"{:?}\", r);\r\n    }\r\n}\r\n```\r\n# Output\r\n\r\nThe expected output is \r\n```\r\n__m256d(4.0, 4.0, 4.0, 4.0)\r\n```\r\nThe actual output is\r\n```\r\n__m256d(4.0, 4.0, 0.0, 0.0)\r\n```\r\n\r\n# Notes\r\n- The code built in debug mode produces the expected result. This issue only occurs in a release build.\r\n- Using `_mm` instead of `_mm256` results in correct output in both debug and release mode.\r\n- Code using only `_mm` or `_mm256` yields the same performance (I have another piece of code for that. I can provide it if needed).\r\n\r\n# Versions\r\nThe issue can be reproduced with 1.30.0-nightly (2018-09-24), 1.30.0-beta.7, 1.29.0.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/54583/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/54583/timeline", "performed_via_github_app": null, "state_reason": "completed"}