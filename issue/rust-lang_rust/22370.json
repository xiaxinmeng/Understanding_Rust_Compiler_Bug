{"url": "https://api.github.com/repos/rust-lang/rust/issues/22370", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22370/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22370/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22370/events", "html_url": "https://github.com/rust-lang/rust/issues/22370", "id": 57732414, "node_id": "MDU6SXNzdWU1NzczMjQxNA==", "number": 22370, "title": "Compiler panic: Type parameter out of range", "user": {"login": "mattias-p", "id": 1773045, "node_id": "MDQ6VXNlcjE3NzMwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1773045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattias-p", "html_url": "https://github.com/mattias-p", "followers_url": "https://api.github.com/users/mattias-p/followers", "following_url": "https://api.github.com/users/mattias-p/following{/other_user}", "gists_url": "https://api.github.com/users/mattias-p/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattias-p/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattias-p/subscriptions", "organizations_url": "https://api.github.com/users/mattias-p/orgs", "repos_url": "https://api.github.com/users/mattias-p/repos", "events_url": "https://api.github.com/users/mattias-p/events{/privacy}", "received_events_url": "https://api.github.com/users/mattias-p/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-02-15T14:43:29Z", "updated_at": "2015-04-09T23:52:03Z", "closed_at": "2015-04-09T23:52:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "I threw this at the nightly compilers of 2015-02-14 and 2015-01-30 and they both went down:\n\n``` rust\ntrait A<T=Self> {}\nfn f(a: &A) {}\n```\n\n```\n$ RUST_BACKTRACE=1 rustc src/lib.rs --crate-type lib\nsrc/lib.rs:3:10: 3:11 error: internal compiler error: Type parameter `Self/SelfSpace.0` (Self/SelfSpace/0) out of range when substituting (root type=Self) substs=Substs[types=[[];[];[]], regions=[[];[];[]]]\nsrc/lib.rs:3 fn f(a: &A) {}\n                      ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:129\n\nstack backtrace:\n   1:     0x7fc4094aca60 - sys::backtrace::write::h17046f691c944fd6wlB\n   2:     0x7fc4094d5650 - failure::on_fail::hc6163ed550dbd15faOK\n   3:     0x7fc40941be10 - rt::unwind::begin_unwind_inner::hf466231ca0fbfbbdvsK\n   4:     0x7fc4067659c0 - rt::unwind::begin_unwind::h15994696547183619422\n   5:     0x7fc406765950 - diagnostic::SpanHandler::span_bug::h0c67b2fba09c62ed74E\n   6:     0x7fc407525970 - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h908775383351c3a5i3N\n   7:     0x7fc408c59400 - astconv::create_substs_for_ast_path::hdccd006640bd406eYFu\n   8:     0x7fc408c5c1a0 - astconv::ast_path_to_trait_ref::h1257323b49beb5bc60u\n   9:     0x7fc408c5f2a0 - astconv::object_path_to_poly_trait_ref::hd7b8560856970dd3WZu\n  10:     0x7fc408c62620 - astconv::ast_ty_to_ty::closure.34297\n  11:     0x7fc408bff240 - astconv::ast_ty_to_ty::hbab41c4ba1c4c555vGv\n  12:     0x7fc408c62620 - astconv::ast_ty_to_ty::closure.34297\n  13:     0x7fc408bff240 - astconv::ast_ty_to_ty::hbab41c4ba1c4c555vGv\n  14:     0x7fc408c67750 - vec::Vec<T>.FromIterator<T>::from_iter::h16234516007305750142\n  15:     0x7fc408c66690 - astconv::ty_of_method_or_bare_fn::h4c06b626350f9d4bl0v\n  16:     0x7fc408c84900 - collect::type_scheme_of_item::h0ea8aabb691a5910QGx\n  17:     0x7fc408c903c0 - collect::convert_typed_item::h1cd4e74053e84bf1qLx\n  18:     0x7fc408c778a0 - collect::convert_item::h8870a96d91a2c7d338w\n  19:     0x7fc408cbaca0 - check_crate::closure.35369\n  20:     0x7fc408cb8c30 - check_crate::hc0209f9429b48ea8OxB\n  21:     0x7fc409aea080 - driver::phase_3_run_analysis_passes::h6f20ce0dd25ae952SGa\n  22:     0x7fc409ad0170 - driver::compile_input::h91ff1ed16e22d05cEba\n  23:     0x7fc409ba3ea0 - run_compiler::h9c581f85e29a6b265bc\n  24:     0x7fc409ba2500 - thunk::F.Invoke<A, R>::invoke::h5155567596601403298\n  25:     0x7fc409ba13f0 - rt::unwind::try::try_fn::h5629523784837248188\n  26:     0x7fc409541f20 - rust_try_inner\n  27:     0x7fc409541f10 - rust_try\n  28:     0x7fc409ba16a0 - thunk::F.Invoke<A, R>::invoke::h7807062886684583533\n  29:     0x7fc4094c1190 - sys::thread::thread_start::h57c9c75c73c301cbfVF\n  30:     0x7fc4034400c0 - start_thread\n  31:     0x7fc409091fd9 - __clone\n  32:                0x0 - <unknown>\n```\n\n```\n$ rustc --version --verbose                                                             \nrustc 1.0.0-nightly (b63cee4a1 2015-02-14 17:01:11 +0000)\nbinary: rustc\ncommit-hash: b63cee4a11fcfecf20ed8419bc3bd6859e6496bc\ncommit-date: 2015-02-14 17:01:11 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 1.0.0-nightly\n```\n\n```\n$ uname -a\nLinux rust-m2 3.13.0-45-generic #74+7.0trisquel2 SMP Sat Jan 31 14:07:55 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22370/timeline", "performed_via_github_app": null, "state_reason": "completed"}