{"url": "https://api.github.com/repos/rust-lang/rust/issues/84931", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/84931/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/84931/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/84931/events", "html_url": "https://github.com/rust-lang/rust/issues/84931", "id": 875921976, "node_id": "MDU6SXNzdWU4NzU5MjE5NzY=", "number": 84931, "title": "GAT: confusing diagnostic when missing where clause ", "user": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1485960423, "node_id": "MDU6TGFiZWwxNDg1OTYwNDIz", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-generic_associated_types", "name": "F-generic_associated_types", "color": "f9c0cc", "default": false, "description": "`#![feature(generic_associated_types)]` a.k.a. GATs"}, {"id": 1624891239, "node_id": "MDU6TGFiZWwxNjI0ODkxMjM5", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-incorrect", "name": "D-incorrect", "color": "c9f7a3", "default": false, "description": "A diagnostic that is giving misleading or incorrect information"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-05-04T23:32:36Z", "updated_at": "2021-08-14T01:12:25Z", "closed_at": "2021-08-14T01:12:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur. \r\n-->\r\n\r\nGiven the following code: [playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=a493199249734d2ce196cfc20b148245)\r\n\r\n```rust\r\n#![feature(generic_associated_types)]\r\n\r\ntrait StreamingIter {\r\n    type Item<'a> where Self: 'a;\r\n    fn next<'a>(&'a mut self) -> Option<Self::Item::<'a>>;\r\n}\r\n\r\nstruct StreamingSliceIter<'a, T> {\r\n    idx: usize,\r\n    data: &'a mut [T],\r\n}\r\n\r\nimpl<'b, T: 'b> StreamingIter for StreamingSliceIter<'b, T> {\r\n    type Item<'a> = &'a mut T;\r\n    fn next(&mut self) -> Option<&mut T> {\r\n        self.idx += 1;\r\n        Some(&mut self.data[self.idx - 1])\r\n    }\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0309]: the parameter type `T` may not live long enough\r\n  --> src/lib.rs:14:5\r\n   |\r\n13 | impl<'b, T: 'b> StreamingIter for StreamingSliceIter<'b, T> {\r\n   |          -- help: consider adding an explicit lifetime bound...: `T: 'a +`\r\n14 |     type Item<'a> = &'a mut T;\r\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ ...so that the reference type `&'a mut T` does not outlive the data it points at\r\n\r\nerror: aborting due to previous error;\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\n\r\nI'm not really sure what the correct output should be but it should mention that I forgot the `where Self: 'a` bound on the trait impl like I have it written in [this compiling code](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=23e8da2ef3ca912edf78263618843a15). It should also not suggest adding adding a `T: 'a` bound because that bound is not writeable :sweat_smile: \r\n\r\n<!--\r\nIf the problem is not self-explanatory, please provide a rationale for the\r\nchange.\r\n-->\r\n\r\n<!--\r\nIf dramatically different output is caused by small changes, consider also\r\nadding them here.\r\n\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions. The output might also be\r\ndifferent depending on the Edition.\r\n-->\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/84931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/84931/timeline", "performed_via_github_app": null, "state_reason": "completed"}