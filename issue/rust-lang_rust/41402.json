{"url": "https://api.github.com/repos/rust-lang/rust/issues/41402", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/41402/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/41402/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/41402/events", "html_url": "https://github.com/rust-lang/rust/issues/41402", "id": 222859747, "node_id": "MDU6SXNzdWUyMjI4NTk3NDc=", "number": 41402, "title": "rustc is unable to build for vendored toolchains by default", "user": {"login": "zachreizner", "id": 292711, "node_id": "MDQ6VXNlcjI5MjcxMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/292711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zachreizner", "html_url": "https://github.com/zachreizner", "followers_url": "https://api.github.com/users/zachreizner/followers", "following_url": "https://api.github.com/users/zachreizner/following{/other_user}", "gists_url": "https://api.github.com/users/zachreizner/gists{/gist_id}", "starred_url": "https://api.github.com/users/zachreizner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zachreizner/subscriptions", "organizations_url": "https://api.github.com/users/zachreizner/orgs", "repos_url": "https://api.github.com/users/zachreizner/repos", "events_url": "https://api.github.com/users/zachreizner/events{/privacy}", "received_events_url": "https://api.github.com/users/zachreizner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-04-19T20:21:03Z", "updated_at": "2022-10-24T23:43:29Z", "closed_at": "2022-10-24T23:43:28Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When rustc is given a target triple to compile for, the behavior, as defined by [librustc_back](https://github.com/rust-lang/rust/blob/9d11b089ad136432dff6c49c6eb3c48c7f6e5273/src/librustc_back/target/mod.rs), is to search the list of builtins for an exact match and then to search for the target triple as a file or a json configuration in some search directories. In every case, the target triple is treated as an opaque key to be searched for, contrary to the usual usage of a target triple.\r\n\r\nThe usual way is to parse the triple into its semantic parts (arch-vendor-system or arch-vendor-kernel-system) and use those parts to build up a target specification (i.e. a struct Target from librustc_back). The consequence of this deviation is that vendored toolchains (toolchains that have something other than a \"default\" vendor in their triple) won't be recognized by rustc, contrary to the purpose of having a vendor string, which is to allow vendors to use arbitrary toolchains.\r\n\r\nThe current workaround is either to explicitly add the needed vendor triple to rustc's list of builtins (which requires official support to get into master) or to add a TRIPLE.json to the appropriate path. Granted, these workaround are not onerous, but I believe the \"right\" way would be to handle the target triples properly by default. I'm putting this issue up for discussion.", "closed_by": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/41402/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/41402/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}