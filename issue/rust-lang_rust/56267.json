{"url": "https://api.github.com/repos/rust-lang/rust/issues/56267", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56267/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56267/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56267/events", "html_url": "https://github.com/rust-lang/rust/issues/56267", "id": 384602325, "node_id": "MDU6SXNzdWUzODQ2MDIzMjU=", "number": 56267, "title": "llvm lint: Undefined behavior: Memory reference address is misaligned", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}, {"id": 267612997, "node_id": "MDU6TGFiZWwyNjc2MTI5OTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-unsound", "name": "I-unsound", "color": "e11d21", "default": false, "description": "Issue: A soundness hole (worst kind of bug), see: https://en.wikipedia.org/wiki/Soundness"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-11-27T03:16:42Z", "updated_at": "2018-11-29T02:56:47Z", "closed_at": "2018-11-29T02:56:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "reduced from num_cpus:\r\n````rust\r\nextern crate libc;\r\n\r\n#[inline]\r\npub fn get_physical() -> usize {\r\n    get_num_physical_cpus()\r\n}\r\n\r\n#[cfg(target_os = \"linux\")]\r\nfn get_num_physical_cpus() -> usize {\r\n    use std::collections::HashSet;\r\n    use std::fs::File;\r\n    use std::io::BufRead;\r\n    use std::io::BufReader;\r\n\r\n    let file = File::open(\"/proc/cpuinfo\").unwrap();\r\n    let reader = BufReader::new(file);\r\n    let mut set = HashSet::new();\r\n    for _ in reader.lines().filter_map(|result| result.ok()) {\r\n        set.insert((0, 0));\r\n    }\r\n    4\r\n}\r\n````\r\nbuilt with\r\n` RUSTFLAGS=\"-C passes=lint\" cargo build --release  -j 1` yields\r\n````\r\n   Compiling libc v0.2.44\r\nUnusual: Return statement in function with noreturn attribute\r\n  ret void\r\n   Compiling num_cpus v1.8.0 (/tmp/num_cpus)\r\nUndefined behavior: Memory reference address is misaligned\r\n  %61 = load i32, i32* %60, align 8\r\nUndefined behavior: Memory reference address is misaligned\r\n  %132 = load i32, i32* %131, align 8\r\n    Finished release [optimized] target(s) in 1.12s\r\n````\r\ncc #7463\r\n\r\n````\r\nrustc 1.32.0-nightly (6bfb46e4a 2018-11-26)\r\nbinary: rustc\r\ncommit-hash: 6bfb46e4ac9a2704f06de1a2ff7a4612cd70c8cb\r\ncommit-date: 2018-11-26\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.32.0-nightly\r\nLLVM version: 8.0\r\n````", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56267/timeline", "performed_via_github_app": null, "state_reason": "completed"}