{"url": "https://api.github.com/repos/rust-lang/rust/issues/29490", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29490/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29490/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29490/events", "html_url": "https://github.com/rust-lang/rust/issues/29490", "id": 114415710, "node_id": "MDU6SXNzdWUxMTQ0MTU3MTA=", "number": 29490, "title": "beta/nightly fails against Debian LLVM 3.7", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2015-10-31T15:05:58Z", "updated_at": "2016-01-08T07:33:39Z", "closed_at": "2016-01-08T07:33:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, I can't build either the beta or the nightly (currently 1.6), with Debian's LLVM 3.7 (maintained by @sylvestre) I get these errors:\n\n```\ng++ -g -O2 -fstack-protector-strong -Wformat -Werror=format-security  -O2  -Wall -Werror -g -fPIC -m64 -fno-rtti -c -o  x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o  -I//usr//lib//llvm-3.7//include  -DNDEBUG -D_GNU_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -g -O2 -fomit-frame-pointer -std=c++11 -fvisibility-inlines-hidden -fno-exceptions -fPIC -ffunction-sections -fdata-sections -Wcast-qual   -I /usr/lib/llvm-3.7/include -I /build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/include /build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp\n/build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp: In function 'LLVMOpaqueValue* LLVMRustBuildLandingPad(LLVMBuilderRef, LLVMTypeRef, LLVMValueRef, unsigned int, const char*, LLVMValueRef)':\n/build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp:972:69: error: invalid conversion from 'LLVMValueRef {aka LLVMOpaqueValue*}' to 'unsigned int' [-fpermissive]\n     return LLVMBuildLandingPad(Builder, Ty, PersFn, NumClauses, Name);\n                                                                     ^\n/build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp:972:69: error: invalid conversion from 'unsigned int' to 'const char*' [-fpermissive]\n/build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp:972:69: error: too many arguments to function 'LLVMOpaqueValue* LLVMBuildLandingPad(LLVMBuilderRef, LLVMTypeRef, unsigned int, const char*)'\nIn file included from //usr//lib//llvm-3.7//include/llvm/IR/Value.h:17:0,\n                 from //usr//lib//llvm-3.7//include/llvm/IR/User.h:24,\n                 from //usr//lib//llvm-3.7//include/llvm/IR/Instruction.h:22,\n                 from //usr//lib//llvm-3.7//include/llvm/IR/BasicBlock.h:19,\n                 from //usr//lib//llvm-3.7//include/llvm/IR/IRBuilder.h:21,\n                 from /build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/rustllvm.h:11,\n                 from /build/rustc-1.5.0~beta.2.20151029+dfsg1/src/rustllvm/RustWrapper.cpp:11:\n//usr//lib//llvm-3.7//include/llvm-c/Core.h:2677:14: note: declared here\n LLVMValueRef LLVMBuildLandingPad(LLVMBuilderRef B, LLVMTypeRef Ty,\n              ^\n/build/rustc-1.5.0~beta.2.20151029+dfsg1/mk/rustllvm.mk:60: recipe for target 'x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o' failed\nmake[2]: *** [x86_64-unknown-linux-gnu/rustllvm/RustWrapper.o] Error 1\n```\n\nand the same error occurs for the nightly. However, 1.4 (current stable) builds fine, and 1.5 (nightly on 2015-09-18) also built fine.\n\nI see that rust includes a custom LLVM; I wonder if someone knows which patches we need to also back-port to Debian's LLVM to fix the build (or if it is [Debian's patches](https://anonscm.debian.org/viewvc/pkg-llvm/llvm-toolchain/branches/3.7/debian/patches/) that are at fault, even).\n", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29490/timeline", "performed_via_github_app": null, "state_reason": "completed"}