{"url": "https://api.github.com/repos/rust-lang/rust/issues/16973", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16973/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16973/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16973/events", "html_url": "https://github.com/rust-lang/rust/issues/16973", "id": 41860112, "node_id": "MDU6SXNzdWU0MTg2MDExMg==", "number": 16973, "title": "'rustc' failed at 'expected closure or fn'", "user": {"login": "rozaliev", "id": 120809, "node_id": "MDQ6VXNlcjEyMDgwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/120809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rozaliev", "html_url": "https://github.com/rozaliev", "followers_url": "https://api.github.com/users/rozaliev/followers", "following_url": "https://api.github.com/users/rozaliev/following{/other_user}", "gists_url": "https://api.github.com/users/rozaliev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rozaliev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rozaliev/subscriptions", "organizations_url": "https://api.github.com/users/rozaliev/orgs", "repos_url": "https://api.github.com/users/rozaliev/repos", "events_url": "https://api.github.com/users/rozaliev/events{/privacy}", "received_events_url": "https://api.github.com/users/rozaliev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-09-03T20:08:40Z", "updated_at": "2014-10-03T22:02:16Z", "closed_at": "2014-10-03T22:02:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'expected closure or fn', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/librustc/middle/trans/base.rs:305\n\nstack backtrace:\n   1:        0x106792fe5 - rt::backtrace::imp::write::h150660175692c039UUq\n   2:        0x106796313 - failure::on_fail::h95a4729ab9a2a9bbObr\n   3:        0x106a39593 - unwind::begin_unwind_inner::h3737d4a9d196707a4Zd\n   4:        0x1032899ff - unwind::begin_unwind::h5788052376205830406\n   5:        0x1036c71d8 - middle::trans::base::decl_rust_fn::h854efc37e2decf48HCc\n   6:        0x103627c18 - middle::trans::monomorphize::monomorphic_fn::closure.117721\n   7:        0x1036225d5 - middle::trans::monomorphize::monomorphic_fn::he3bbd7fa9994f7ee9OX\n   8:        0x10365a7bd - middle::trans::callee::trans_fn_ref_with_vtables::h7d1b1a744b096691Zk1\n   9:        0x103655e6a - middle::trans::callee::trans_fn_ref::h7e0fa20edea2c94a760\n  10:        0x103678b70 - middle::trans::expr::trans_def::hbbe6be87b7aaae78mN3\n  11:        0x10366ff77 - middle::trans::expr::trans_unadjusted::h89a34fef7383b2d0wn3\n  12:        0x10362e482 - middle::trans::expr::trans_into::h09d29598efbf785dmA2\n  13:        0x10363faea - middle::trans::controlflow::trans_ret::h3750127e6b487426GTY\n  14:        0x103672ded - middle::trans::expr::trans_rvalue_stmt_unadjusted::he49ce0645a5f7a32sR3\n  15:        0x10362e50d - middle::trans::expr::trans_into::h09d29598efbf785dmA2\n  16:        0x10362e736 - middle::trans::controlflow::trans_block::hc8b53bb9244ac926csY\n  17:        0x1036dc6bf - middle::trans::base::trans_closure::h9bc29c094da2b724vEe\n  18:        0x10361ff56 - middle::trans::base::trans_fn::h3ba23a0d7c2fadb5iQe\n  19:        0x1036de90a - middle::trans::meth::trans_impl::h6f58eda7cc516190tfk\n  20:        0x10361bcb9 - middle::trans::base::trans_item::h006320bd9523dfe6i8e\n  21:        0x10361b8f0 - middle::trans::base::trans_item::h006320bd9523dfe6i8e\n  22:        0x1036e58bc - middle::trans::base::trans_crate::h892f86f0d85e1e66J2f\n  23:        0x103ae29e1 - driver::driver::phase_4_translate_to_llvm::h852ef063c277d1acm7B\n  24:        0x103adbb6e - driver::driver::compile_input::h058e165e14cabd00uJB\n  25:        0x103b688ba - driver::run_compiler::hb8e0607ffbbf26e7UyF\n  26:        0x103b66b36 - driver::main_args::closure.141497\n  27:        0x103b794eb - task::TaskBuilder<S>::try_future::closure.142666\n  28:        0x103b793f3 - task::TaskBuilder<S>::spawn_internal::closure.142643\n  29:        0x10323f52c - task::spawn_opts::closure.8478\n  30:        0x106a9bc2c - rust_try_inner\n  31:        0x106a9bc16 - rust_try\n  32:        0x106a36b97 - unwind::try::h8a7680423deb53f7kOd\n  33:        0x106a36a0c - task::Task::run::h2190baa14c4bc9e4L0c\n  34:        0x10323f372 - task::spawn_opts::closure.8423\n  35:        0x106a385d6 - thread::thread_start::h462a1147c07ec9d7Sld\n  36:     0x7fff8cd30899 - _pthread_body\n  37:     0x7fff8cd3072a - _pthread_struct_init\n```\n\nOSX 10.9.4\nrustc 0.12.0-pre-nightly (2e3858179 2014-09-03 00:51:00 +0000)\nand rustc 0.12.0-pre-nightly (0bdac78da 2014-09-01 21:31:00 +0000)\n\nIt may be related to error msg i'm getting while running tests on one of the libs used \n\n```\n   Doc-tests ecs\ntask '<unnamed>' failed at 'Unimplemented type &TyUnboxedFn(box(GC) syntax::ast::UnboxedFnTy{kind: FnUnboxedClosureKind, decl: box(GC) syntax::ast::FnDecl{inputs: collections::vec::Vec<syntax::ast::Arg>{len: 1u, cap: 1u, ptr: (0x10b86fa00 as *mut ())}, output: box(GC) syntax::ast::Ty{id: 1246u32, node: TyNil, span: syntax::codemap::Span{lo: syntax::codemap::BytePos(6370u32), hi: syntax::codemap::BytePos(6370u32), expn_info: None}}, cf: Return, variadic: false}})', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/librustdoc/clean/mod.rs:1221\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16973/timeline", "performed_via_github_app": null, "state_reason": "completed"}