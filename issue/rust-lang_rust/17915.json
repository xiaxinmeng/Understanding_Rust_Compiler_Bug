{"url": "https://api.github.com/repos/rust-lang/rust/issues/17915", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17915/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17915/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17915/events", "html_url": "https://github.com/rust-lang/rust/issues/17915", "id": 45455042, "node_id": "MDU6SXNzdWU0NTQ1NTA0Mg==", "number": 17915, "title": "ICE `Unimplemented` selecting `<Inner as FooTrait>` during trans   ", "user": {"login": "dbalchev", "id": 3525601, "node_id": "MDQ6VXNlcjM1MjU2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/3525601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbalchev", "html_url": "https://github.com/dbalchev", "followers_url": "https://api.github.com/users/dbalchev/followers", "following_url": "https://api.github.com/users/dbalchev/following{/other_user}", "gists_url": "https://api.github.com/users/dbalchev/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbalchev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbalchev/subscriptions", "organizations_url": "https://api.github.com/users/dbalchev/orgs", "repos_url": "https://api.github.com/users/dbalchev/repos", "events_url": "https://api.github.com/users/dbalchev/events{/privacy}", "received_events_url": "https://api.github.com/users/dbalchev/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-10-10T07:58:38Z", "updated_at": "2014-12-09T11:04:58Z", "closed_at": "2014-12-09T11:04:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiled on Windows 8.1 with 64-bit compiler **rustc 0.12.0-nightly (b5ba2f551 2014-10-06 20:27:14 +0000)**.\n\n``` rust\nstruct Inner {\n    x:int\n}\ntype Foo = Box<Inner>;\n\nstruct Bar;\n\ntrait FooTrait {\n    fn foo_fun(&self);\n}\ntrait BarTrait {\n    fn bar_fun(&Self, &FooTrait);\n}\nimpl FooTrait for Foo {\n    fn foo_fun(&self) {\n\n    }\n}\nimpl BarTrait for Bar {\n    fn bar_fun(b:&Bar, f: &FooTrait) {\n\n    }\n}\n\nfn main() {\n    BarTrait::bar_fun(&Bar, &box Inner{x:72});\n}\n```\n\nErrors:\nbughunt.rs:1:1: 1:1 error: internal compiler error: Encountered error `Unimplemented` selecting `<Inner as FooTrait>` during trans\nbughunt.rs:1 \n\n```\n         ^\n```\n\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\n\nBacktrace:\ntask 'rustc' failed at 'Box<Any>', C:\\bot\\slave\\nightly-win-64\\build\\src\\libsyntax\\diagnostic.rs:113\n\nstack backtrace:\n   1:         0x66be29a8 - ZN2rt9backtrace3imp5write20hc5b481d5cd57af2aE9qE\n   2:         0x66be641b - ZN2rt4init20hffee7254612f46fffnrE\n   3:         0x668461cd - ZN6unwind18begin_unwind_inner20h484cd690c7389d13QhdE\n   4:         0x6a675f76 - ZN10diagnostic11SpanHandler8span_bug20h61400d8c039e9bc6GMFE\n   5:         0x6a675f20 - ZN10diagnostic11SpanHandler8span_bug20h61400d8c039e9bc6GMFE\n   6:         0x6d4c437a - ZN6driver7session7Session8span_bug20h2168907c2e4ca091kyxE\n   7:         0x6d6eccf6 - ZN6middle5trans6common18fulfill_obligation20heb3710fb7ef945524B6E\n   8:         0x6d76abbb - ZN6middle5trans5type_4Type6vtable20hd46d323115ea795edrvE\n   9:         0x6d76c320 - ZN4util5ppaux17ty..BareFnTy.Repr4repr20h89c8f0a6d9a94237TIGE\n  10:         0x6d6d0e03 - ZN6middle5trans4meth10get_vtable20h3e74db9548c22210KGkE\n  11:         0x6d6cff80 - ZN6middle2ty34AutoAdjustment...std..clone..Clone5clone20h9b1b6280b278f7184syE\n  12:         0x6d6d207a - ZN6middle2ty9unsize_ty20h89062c559ef98902zfGE\n  13:         0x6d6d2208 - ZN6middle2ty7mk_rptr20h0c96f17a65cdda7dwiEE\n  14:         0x6d6cf59a - ZN6middle2ty34AutoAdjustment...std..clone..Clone5clone20h9b1b6280b278f7184syE\n  15:         0x6d6cee3c - ZN6middle2ty34AutoAdjustment...std..clone..Clone5clone20h9b1b6280b278f7184syE\n  16:         0x6d693572 - ZN6middle5trans4expr5trans20ha48b94e0db233834pN2E\n  17:         0x6d6c41c4 - ZN6middle5trans6callee10trans_args20h88999b8991f24ca4kk2E\n  18:         0x6d699a70 - ZN6middle5trans6callee16trans_call_inner20hf94d81b3cc0dc994nZ1E\n  19:         0x6d6bd5e0 - ZN6middle5trans6callee10trans_call20h61df90c183273a62IT1E\n  20:         0x6d6cce3b - ZN6middle2ty9expr_kind20h949e0064a45a1e82ilGE\n  21:         0x6d691723 - ZN6middle5trans4expr10trans_into20h96733f5255894c9dvJ2E\n  22:         0x6d690ad0 - ZN6middle5trans11controlflow15trans_stmt_semi20h65a5128923d5c87e9VYE\n  23:         0x6d6901b9 - ZN6middle5trans11controlflow10trans_stmt20h6a327ed75a825439WRYE\n  24:         0x6d691969 - ZN6middle5trans11controlflow11trans_block20hc018d4181ef5114d2WYE\n  25:         0x6d735c90 - ZN6middle5trans4base13trans_closure20hfb78e3f15b7b784dTQeE\n  26:         0x6d68411d - ZN6middle5trans4base8trans_fn20h94c1533573410e77h2eE\n  27:         0x6d6817ec - ZN6middle5trans4base10trans_item20h7a9c36ad77c3fd91AlfE\n  28:         0x6d73f009 - ZN6middle5trans4base11trans_crate20ha6d41362f46fe1abQlgE\n  29:         0x6db6daf9 - ZN6driver6driver25phase_4_translate_to_llvm20hc8eefbd8dad9706cjZwE\n  30:         0x6db661f4 - ZN6driver6driver13compile_input20h0eef3c908953a111ewwE\n  31:         0x6dbe2dff - ZN6driver7monitor20hcdaa282087678b71SaBE\n  32:         0x6dbe1170 - ZN6driver7monitor20hcdaa282087678b71SaBE\n  33:         0x6d33bf55 - ZN6driver6driver35OutputFilenames...std..clone..Clone5clone20h22daf11eed536512ElxE\n  34:         0x6d33be97 - ZN6driver6driver35OutputFilenames...std..clone..Clone5clone20h22daf11eed536512ElxE\n  35:         0x7072945c - ZN4task10spawn_opts20hae91090f93dc8031FteE\n  36:         0x668aab5f - rust_try\n  37:         0x668aab39 - rust_try\n  38:         0x6684432e - ZN6unwind3try20hba110656f3557a7bU4cE\n  39:         0x66844189 - ZN4task4Task3run20hdb858a047ca67fa4kzcE\n  40:         0x707292b6 - ZN4task10spawn_opts20hae91090f93dc8031FteE\n  41:         0x66845807 - ZN4task11BlockedTask14cast_from_uint20hffe040d42c989c01XRcE\n  42:     0x7ff9177a16ad - BaseThreadInitThunk\n\nEdit: The bug persists on compiler version: rustc 0.13.0-nightly (15dd90b 2014-10-30 00:27:02 +0000)\n\nEdit 2: after some tracing with RUST_LOG=rustc::middle::traits::select=5, the following is reached\n\n``` rust\n        if candidates.len() == 0 {\n            return Err(Unimplemented);\n        }\n```\n\nwith `candidates.len() = 0`.\nlink to line: https://github.com/rust-lang/rust/blob/master/src/librustc/middle/traits/select.rs#L835\nthe error is printed by this line: https://github.com/rust-lang/rust/blob/77f44d4a7bf14805fda5fc41310a6aeffda30fd4/src/librustc/middle/trans/common.rs#L850\n", "closed_by": {"login": "dbalchev", "id": 3525601, "node_id": "MDQ6VXNlcjM1MjU2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/3525601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbalchev", "html_url": "https://github.com/dbalchev", "followers_url": "https://api.github.com/users/dbalchev/followers", "following_url": "https://api.github.com/users/dbalchev/following{/other_user}", "gists_url": "https://api.github.com/users/dbalchev/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbalchev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbalchev/subscriptions", "organizations_url": "https://api.github.com/users/dbalchev/orgs", "repos_url": "https://api.github.com/users/dbalchev/repos", "events_url": "https://api.github.com/users/dbalchev/events{/privacy}", "received_events_url": "https://api.github.com/users/dbalchev/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17915/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17915/timeline", "performed_via_github_app": null, "state_reason": "completed"}