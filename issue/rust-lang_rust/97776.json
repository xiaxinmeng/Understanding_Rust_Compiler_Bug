{"url": "https://api.github.com/repos/rust-lang/rust/issues/97776", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/97776/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/97776/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/97776/events", "html_url": "https://github.com/rust-lang/rust/issues/97776", "id": 1261279263, "node_id": "I_kwDOAAsO6M5LLZgf", "number": 97776, "title": "Macro expand too slowly,there some way to cache Macro like cache function.", "user": {"login": "unitsoftrover", "id": 45359384, "node_id": "MDQ6VXNlcjQ1MzU5Mzg0", "avatar_url": "https://avatars.githubusercontent.com/u/45359384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unitsoftrover", "html_url": "https://github.com/unitsoftrover", "followers_url": "https://api.github.com/users/unitsoftrover/followers", "following_url": "https://api.github.com/users/unitsoftrover/following{/other_user}", "gists_url": "https://api.github.com/users/unitsoftrover/gists{/gist_id}", "starred_url": "https://api.github.com/users/unitsoftrover/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unitsoftrover/subscriptions", "organizations_url": "https://api.github.com/users/unitsoftrover/orgs", "repos_url": "https://api.github.com/users/unitsoftrover/repos", "events_url": "https://api.github.com/users/unitsoftrover/events{/privacy}", "received_events_url": "https://api.github.com/users/unitsoftrover/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-06T03:01:18Z", "updated_at": "2023-04-26T02:23:16Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I use diesel crate to develope some ERP function,found macro \"Table!\" expand very slowly every time.  If it can store the expanded result in cache like \"function cache\" after the first time,  as long as the table definition is not modifie, it will improve the expanding speed a lot.\r\n\r\nlike:\r\n#[cached]\r\nfn fib(n: u64) -> u64 {\r\n    if n == 0 || n == 1 { return n }\r\n    fib(n-1) + fib(n-2)\r\n}\r\n\r\nas:\r\n#[cached] (first time to expand and store result)\r\nmacro_rules! table {\r\n    ($($tokens:tt)*) => {\r\n        $crate::__diesel_parse_table! {\r\n            tokens = [$($tokens)*],\r\n            imports = [],\r\n            meta = [],\r\n            sql_name = unknown,\r\n            name = unknown,\r\n            schema = public,\r\n            primary_key = id,\r\n        }\r\n    }\r\n}\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/97776/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/97776/timeline", "performed_via_github_app": null, "state_reason": null}