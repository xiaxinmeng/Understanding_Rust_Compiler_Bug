{"url": "https://api.github.com/repos/rust-lang/rust/issues/3586", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3586/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3586/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3586/events", "html_url": "https://github.com/rust-lang/rust/issues/3586", "id": 7127985, "node_id": "MDU6SXNzdWU3MTI3OTg1", "number": 3586, "title": "RFC: Irrefutable patterns in closure argument lists", "user": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2012-09-25T17:12:42Z", "updated_at": "2012-12-13T19:47:29Z", "closed_at": "2012-12-13T19:45:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pre-demoding, this sort of thing is valid:\n\n```\nfn main() {\n    for [\"Alice\", \"Bob\", \"Carol\"].each |name| {\n        do task::spawn {\n            let v = rand::Rng().shuffle([1, 2, 3]);\n            for v.each |num| {\n                io::print(fmt!(\"%s says: '%d'\\n\", name, num))\n            }\n        }\n    }\n}\n```\n\nThis looks very nice.\n\nBut post-demoding, it looks like this:\n\n```\nfn main() {\n    for [\"Alice\", \"Bob\", \"Carol\"].each |name| {\n        let name = *name;  // because `name` is now a pointer\n        do task::spawn {\n            let v = rand::Rng().shuffle([1, 2, 3]);\n            for v.each |num| {\n                io::print(fmt!(\"%s says: '%d'\\n\", name, *num))  // `num` is also a pointer\n            }\n        }\n    }\n}\n```\n\nCompared to the first example, this looks quite poor .\n\n@nikomatsakis has mentioned ([here](https://github.com/graydon/rust-www/pull/1#issuecomment-8727451)) that if Rust supported irrefutable patterns in argument lists, the example would instead become:\n\n```\nfn main() {\n    for [\"Alice\", \"Bob\", \"Carol\"].each |&name| {\n        do task::spawn {\n            let v = rand::Rng().shuffle([1, 2, 3]);\n            for v.each |&num| {\n                io::print(fmt!(\"%s says: '%d'\\n\", name, num))\n            }\n        }\n    }\n}\n```\n\nWhich looks rather nice.\n\nThe inability to do this has already resulted in #3550 as well as the loss of one very nice front-page code example. I can foresee a lot of grumbling over the lack of this feature.\n", "closed_by": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3586/timeline", "performed_via_github_app": null, "state_reason": "completed"}