{"url": "https://api.github.com/repos/rust-lang/rust/issues/55695", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55695/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55695/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55695/events", "html_url": "https://github.com/rust-lang/rust/issues/55695", "id": 377383528, "node_id": "MDU6SXNzdWUzNzczODM1Mjg=", "number": 55695, "title": "compiletest: tests using revisions treat files with just `//~ ERROR` has having no errors", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-05T12:42:08Z", "updated_at": "2022-02-01T15:37:10Z", "closed_at": "2022-02-01T15:37:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The revision system lets `compiletest` encode different sets of errors for different invocations of the compiler.\r\n\r\nand `compiletest` normally attempts to catch cases where you left out expected error messages by saying \"if you have any `//~ ERROR ...` annotation in your file, then the set of such annotations needs to match the same set of errors that are actually emitted.\r\n\r\nHowever, if you combine these features, then for each revision (call it `rev`) in the revisions list, at least one of your errors currently need to be written with the revision system in mind, e.g. `//[rev]~ ERROR ...`\r\n\r\nIf none of the error annotations include a revision (i.e., if they are all `//~ ERROR ...`), then `compiletest` thinks that the test has *no* error annotations, and thus treats it as a case where the compiler's error output is blindly accepted.\r\n\r\nThat seems bad.", "closed_by": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55695/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55695/timeline", "performed_via_github_app": null, "state_reason": "completed"}