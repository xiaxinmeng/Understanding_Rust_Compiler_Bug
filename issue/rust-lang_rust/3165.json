{"url": "https://api.github.com/repos/rust-lang/rust/issues/3165", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3165/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3165/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3165/events", "html_url": "https://github.com/rust-lang/rust/issues/3165", "id": 6135389, "node_id": "MDU6SXNzdWU2MTM1Mzg5", "number": 3165, "title": "Handle flexible type protocols appropriately", "user": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235146, "node_id": "MDU6TGFiZWwyMzUxNDY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-syntaxext", "name": "A-syntaxext", "color": "f7e101", "default": false, "description": "Area: Syntax extensions"}, {"id": 9695584, "node_id": "MDU6TGFiZWw5Njk1NTg0", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-concurrency", "name": "A-concurrency", "color": "f7e101", "default": false, "description": "Area: Concurrency related issues."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2012-08-09T19:27:56Z", "updated_at": "2013-08-05T15:24:41Z", "closed_at": "2013-08-05T15:24:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Pipe protocols allow for some rather magical things regarding types. For example, consider this protocol:\n\n```\nproto! type_switch {\n\n    start:send {\n        get_int -> wait_thing<int>,\n        get_str -> wait_thing<~str>\n    }\n\n    wait_thing:recv<T:send> {\n        thing(T) -> start\n    }\n\n}\n```\n\nFurthermore, `start` could be polymorphic itself and go to different instances of `wait_thing`.\n\nThis is really flexible. Whether this flexibility is desirable is definitely a valid question.\n\nIf we decide we do want this flexibility, the protocol compiler needs to be sure to handle this correctly. I think compiling that protocol as an unbounded protocol would probably work fine, but the bounded version will probably fail in mysterious ways.\n\nIf we decide we don't want that flexible of polymorphic protocols, we should change the item macro syntax so we can do this instead:\n\n```\nproto! type_switch<T: send> {\n\n    start:send {\n        get -> wait_thing\n    }\n\n    wait_thing {\n        thing(T) -> start\n    }\n}\n```\n", "closed_by": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3165/timeline", "performed_via_github_app": null, "state_reason": "completed"}