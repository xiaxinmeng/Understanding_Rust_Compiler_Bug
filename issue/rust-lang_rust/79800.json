{"url": "https://api.github.com/repos/rust-lang/rust/issues/79800", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/79800/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/79800/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/79800/events", "html_url": "https://github.com/rust-lang/rust/issues/79800", "id": 758627247, "node_id": "MDU6SXNzdWU3NTg2MjcyNDc=", "number": 79800, "title": "Unable to build rust on RHEL7 due to GLIBC version", "user": {"login": "lewis6991", "id": 7904185, "node_id": "MDQ6VXNlcjc5MDQxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lewis6991", "html_url": "https://github.com/lewis6991", "followers_url": "https://api.github.com/users/lewis6991/followers", "following_url": "https://api.github.com/users/lewis6991/following{/other_user}", "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}", "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions", "organizations_url": "https://api.github.com/users/lewis6991/orgs", "repos_url": "https://api.github.com/users/lewis6991/repos", "events_url": "https://api.github.com/users/lewis6991/events{/privacy}", "received_events_url": "https://api.github.com/users/lewis6991/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123110, "node_id": "MDU6TGFiZWwxMjMxMTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-linux", "name": "O-linux", "color": "6e6ec0", "default": false, "description": "Operating system: Linux"}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-12-07T15:49:10Z", "updated_at": "2020-12-09T16:06:14Z", "closed_at": "2020-12-09T16:06:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "I can't manage to get rust built on Red Hat 7 (which has `GLIBC==2.17`). I tried installing `GLIBC` from Homebrew/Linuxbrew however the build scripts don't seem to pick it up. \r\n\r\nNote: I also get the same error when running `brew install rust` but I don't think it is a brew issue.\r\n\r\n```\r\nbrew install glibc\r\ngit clone https://github.com/rust-lang/rust.git\r\n./x.py build\r\n```\r\n\r\nHowever I got this error:\r\n```\r\n...\r\nextracting .../rust/build/cache/2020-11-19/rustfmt-nightly-x86_64-unknown-linux-gnu.tar.gz\r\n  Downloaded proc-macro-error-attr v1.0.4\r\n  Downloaded proc-macro-error v1.0.4\r\n  Downloaded serde_json v1.0.59\r\n  Downloaded version_check v0.9.1\r\n  Downloaded toml v0.5.7\r\n  Downloaded merge v0.1.0\r\n  Downloaded cc v1.0.60\r\n  Downloaded merge_derive v0.1.0\r\n  Downloaded libc v0.2.79\r\n  Downloaded num-traits v0.2.12\r\n  Downloaded 10 crates (842.5 KB) in 2.36s\r\n   Compiling proc-macro2 v1.0.19\r\n   Compiling unicode-xid v0.2.1\r\n   Compiling syn v1.0.38\r\n   Compiling version_check v0.9.1\r\n   Compiling autocfg v1.0.0\r\n   Compiling memchr v2.3.3\r\n   Compiling lazy_static v1.4.0\r\n   Compiling serde_derive v1.0.115\r\n   Compiling cfg-if v0.1.10\r\n   Compiling libc v0.2.79\r\n   Compiling serde v1.0.115\r\n   Compiling log v0.4.11\r\n   Compiling ryu v1.0.5\r\n   Compiling regex-syntax v0.6.18\r\n   Compiling same-file v1.0.6\r\n   Compiling fnv v1.0.7\r\n   Compiling serde_json v1.0.59\r\n   Compiling cc v1.0.60\r\n   Compiling unicode-width v0.1.8\r\n   Compiling itoa v0.4.6\r\n   Compiling bootstrap v0.0.0 (.../rust/src/bootstrap)\r\n   Compiling opener v0.4.1\r\n   Compiling build_helper v0.1.0 (.../rust/src/build_helper)\r\n   Compiling proc-macro-error-attr v1.0.4\r\n   Compiling proc-macro-error v1.0.4\r\n   Compiling thread_local v1.0.1\r\n   Compiling crossbeam-utils v0.7.2\r\n   Compiling num-traits v0.2.12\r\n   Compiling walkdir v2.3.1\r\n   Compiling getopts v0.2.21\r\n   Compiling cmake v0.1.44\r\n   Compiling quote v1.0.7\r\n   Compiling aho-corasick v0.7.13\r\n   Compiling bstr v0.2.13\r\n   Compiling time v0.1.43\r\n   Compiling filetime v0.2.12\r\n   Compiling num_cpus v1.13.0\r\n   Compiling regex v1.3.9\r\n   Compiling globset v0.4.5\r\n   Compiling ignore v0.4.16\r\nerror: /lib64/libc.so.6: version `GLIBC_2.18' not found (required by .../rust/build/bootstrap/debug/deps/libproc_macro_error_attr-6113814084e74210.so)\r\n   --> /home/lewrus01/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro-error-1.0.4/src/lib.rs:284:9\r\n    |\r\n284 | pub use proc_macro_error_attr::proc_macro_error;\r\n    |         ^^^^^^^^^^^^^^^^^^^^^\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: could not compile `proc-macro-error`\r\n\r\nTo learn more, run the command again with --verbose.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\nfailed to run: .../rust/build/x86_64-unknown-linux-gnu/stage0/bin/cargo build --manifest-path .../rust/src/bootstrap/Cargo.toml\r\nBuild completed unsuccessfully in 0:13:55\r\n```\r\n\r\n### Meta\r\n\r\n<details>\r\n  <summary> `lsb_release -a`` </summary>\r\n\r\n```\r\nLSB Version:    :core-4.1-amd64:core-4.1-noarch\r\nDistributor ID: RedHatEnterpriseServer\r\nDescription:    Red Hat Enterprise Linux Server release 7.4 (Maipo)\r\nRelease:        7.4\r\nCodename:       Maipo\r\n```\r\n</details>\r\n\r\n<details>\r\n  <summary> `ldd --version` </summary>\r\n\r\n```\r\nldd (GNU libc) 2.23\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\nWritten by Roland McGrath and Ulrich Drepper.\r\n```\r\n</details>\r\n\r\n<details>\r\n  <summary> `/devtools/linuxbrew/lib/libc.so.6 --version` </summary>\r\n\r\n```\r\nGNU C Library (GNU libc) stable release version 2.23, by Roland McGrath et al.\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.\r\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\r\nPARTICULAR PURPOSE.\r\nCompiled by GNU CC version 4.8.5 20150623 (Red Hat 4.8.5-16).\r\nAvailable extensions:\r\n        crypt add-on version 2.1 by Michael Glad and others\r\n        GNU Libidn by Simon Josefsson\r\n        Native POSIX Threads Library by Ulrich Drepper et al\r\n        BIND-8.2.3-T5B\r\nlibc ABIs: UNIQUE IFUNC\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/libc/bugs.html>.\r\n```\r\n</details>\r\n\r\n<details>\r\n  <summary> `/lib/libc.so.6 --version` </summary>\r\n\r\n```\r\nGNU C Library (GNU libc) stable release version 2.17, by Roland McGrath et al.\r\nCopyright (C) 2012 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.\r\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\r\nPARTICULAR PURPOSE.\r\nCompiled by GNU CC version 4.8.5 20150623 (Red Hat 4.8.5-16).\r\nCompiled on a Linux 3.10.0 system on 2017-11-22.\r\nAvailable extensions:\r\n        The C stubs add-on version 2.1.2.\r\n        crypt add-on version 2.1 by Michael Glad and others\r\n        GNU Libidn by Simon Josefsson\r\n        Native POSIX Threads Library by Ulrich Drepper et al\r\n        BIND-8.2.3-T5B\r\n        RT using linux kernel aio\r\nlibc ABIs: UNIQUE IFUNC\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/libc/bugs.html>.\r\n```\r\n</details>\r\n\r\n<details>\r\n  <summary> `/lib64/libc.so.6 --version` </summary>\r\n\r\n  ```\r\n  GNU C Library (GNU libc) stable release version 2.17, by Roland McGrath et al.\r\n  Copyright (C) 2012 Free Software Foundation, Inc.\r\n  This is free software; see the source for copying conditions.\r\n  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\r\n  PARTICULAR PURPOSE.\r\n  Compiled by GNU CC version 4.8.5 20150623 (Red Hat 4.8.5-16).\r\n  Compiled on a Linux 3.10.0 system on 2017-11-22.\r\n  Available extensions:\r\n          The C stubs add-on version 2.1.2.\r\n          crypt add-on version 2.1 by Michael Glad and others\r\n          GNU Libidn by Simon Josefsson\r\n          Native POSIX Threads Library by Ulrich Drepper et al\r\n          BIND-8.2.3-T5B\r\n          RT using linux kernel aio\r\n  libc ABIs: UNIQUE IFUNC\r\n  For bug reporting instructions, please see:\r\n  <http://www.gnu.org/software/libc/bugs.html>.\r\n  ```\r\n</details>\r\n\r\nThe issue [here](https://users.rust-lang.org/t/why-would-rust-ran-in-linuxbrew-try-to-link-to-system-libc/37435) looks identical to this one, however that has been closed with no updates.\r\n\r\n\r\n", "closed_by": {"login": "lewis6991", "id": 7904185, "node_id": "MDQ6VXNlcjc5MDQxODU=", "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lewis6991", "html_url": "https://github.com/lewis6991", "followers_url": "https://api.github.com/users/lewis6991/followers", "following_url": "https://api.github.com/users/lewis6991/following{/other_user}", "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}", "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions", "organizations_url": "https://api.github.com/users/lewis6991/orgs", "repos_url": "https://api.github.com/users/lewis6991/repos", "events_url": "https://api.github.com/users/lewis6991/events{/privacy}", "received_events_url": "https://api.github.com/users/lewis6991/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/79800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/79800/timeline", "performed_via_github_app": null, "state_reason": "completed"}