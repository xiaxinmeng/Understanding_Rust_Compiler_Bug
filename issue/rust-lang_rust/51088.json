{"url": "https://api.github.com/repos/rust-lang/rust/issues/51088", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51088/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51088/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51088/events", "html_url": "https://github.com/rust-lang/rust/issues/51088", "id": 326745521, "node_id": "MDU6SXNzdWUzMjY3NDU1MjE=", "number": 51088, "title": "Tracking issue for the #[wasm_custom_section] attribute", "user": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2018-05-26T15:17:13Z", "updated_at": "2018-07-18T05:23:38Z", "closed_at": "2018-07-18T05:22:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This issue tracks the `wasm_custom_section` attribute which is used to define the contents of a custom section in the wasm executable.\r\n\r\ncc rustwasm/team#82.\r\n\r\nThe attribute is used like so:\r\n\r\n```rust\r\n#[wasm_custom_section = \"foo\"]\r\nconst CUSTOM_SECTION_CONTENT: [u8; 5] = [1, 2, 3, 4, 5];\r\n```\r\n\r\nThe attribute in its current form [can only be applied to `const` values](https://github.com/rust-lang/rust/blob/b202bebdeea73c32c69592fcb60ff2afaa93d354/src/librustc/hir/check_attr.rs#L85-L87) and [must be of the form `[u8; N]`](https://github.com/rust-lang/rust/blob/69b9e1e8f9f3ddc7c819b7235be30fa3c91481e5/src/librustc_typeck/check/mod.rs#L1230-L1233). The attribute also must be of the form `#[wasm_custom_section = \"name\"]`.\r\n\r\nCustom sections are a feature of the [WebAssembly binary encoding](https://github.com/WebAssembly/design/blob/master/BinaryEncoding.md#high-level-structure). They are intended to allow wasm files to encode arbitrary information useful for tools like debuggers, profilers, or transformations like [`wasm-bindgen`](https://github.com/rustwasm/wasm-bindgen). Each custom section must have a UTF-8 name and a payload of bytes. There is no restricton on the name or payload otherwise.\r\n\r\nThe linker, LLD, for the wasm target will concatenate custom sections of the same name in the order the objects appear on the comand line. For example if both crate `a` and crate `b` define a custom section with the name `foo` the final output will contain only one custom section with the name of `foo` where the contents of `a` and `b` are concatenated (byte-wise).\r\n\r\nHelpful links:\r\n\r\n- [Initial Implementation](https://github.com/rust-lang/rust/pull/48883)\r\n- [UI tests for malformed attributes](https://github.com/rust-lang/rust/tree/c08480fce0f39f5c9c6db6dde0dccb375ca0ab14/src/test/ui/wasm-custom-section)\r\n- [Run-make test to ensure the attribute works](https://github.com/rust-lang/rust/tree/c08480fce0f39f5c9c6db6dde0dccb375ca0ab14/src/test/run-make/wasm-custom-section)", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51088/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51088/timeline", "performed_via_github_app": null, "state_reason": "completed"}