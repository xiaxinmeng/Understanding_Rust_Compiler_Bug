{"url": "https://api.github.com/repos/rust-lang/rust/issues/50768", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50768/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50768/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50768/events", "html_url": "https://github.com/rust-lang/rust/issues/50768", "id": 323171779, "node_id": "MDU6SXNzdWUzMjMxNzE3Nzk=", "number": 50768, "title": "rust 1.25 fails to build on Solaris sparc", "user": {"login": "psumbera", "id": 4249116, "node_id": "MDQ6VXNlcjQyNDkxMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4249116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psumbera", "html_url": "https://github.com/psumbera", "followers_url": "https://api.github.com/users/psumbera/followers", "following_url": "https://api.github.com/users/psumbera/following{/other_user}", "gists_url": "https://api.github.com/users/psumbera/gists{/gist_id}", "starred_url": "https://api.github.com/users/psumbera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psumbera/subscriptions", "organizations_url": "https://api.github.com/users/psumbera/orgs", "repos_url": "https://api.github.com/users/psumbera/repos", "events_url": "https://api.github.com/users/psumbera/events{/privacy}", "received_events_url": "https://api.github.com/users/psumbera/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 632899563, "node_id": "MDU6TGFiZWw2MzI4OTk1NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-SPARC", "name": "O-SPARC", "color": "6e6ec0", "default": false, "description": "Target: SPARC processors"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-15T11:12:36Z", "updated_at": "2018-05-18T12:09:30Z", "closed_at": "2018-05-18T12:09:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Tested on Solaris 11.4:\r\n\r\n```\r\n..\r\nBuilding stage0 codegen artifacts (sparcv9-sun-solaris -> sparcv9-sun-solaris, llvm)\r\n   Compiling rustc_trans v0.0.0 (file:///scratch/userland-gate/components/rust/rustc/rustc-1.25.0-src/src/librustc_trans)\r\n   Compiling libc v0.2.39\r\n   Compiling cfg-if v0.1.2\r\n   Compiling cmake v0.1.29\r\n   Compiling num_cpus v1.8.0\r\n   Compiling tempdir v0.3.5\r\n   Compiling filetime v0.1.15\r\n   Compiling build_helper v0.1.0 (file:///scratch/userland-gate/components/rust/rustc/rustc-1.25.0-src/src/build_helper)\r\n   Compiling rustc_binaryen v0.0.0 (file:///scratch/userland-gate/components/rust/rustc/rustc-1.25.0-src/src/librustc_binaryen)\r\n   Compiling rustc_llvm v0.0.0 (file:///scratch/userland-gate/components/rust/rustc/rustc-1.25.0-src/src/librustc_llvm)\r\n    Finished release [optimized] target(s) in 873.77 secs\r\nAssembling stage1 compiler (sparcv9-sun-solaris)\r\nBuilding stage1 std artifacts (sparcv9-sun-solaris -> sparcv9-sun-solaris)\r\nerror: failed to run `rustc` to learn about target-specific information\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/scratch/userland-gate/components/rust/rustc/build/sparcv9/build/bootstrap/debug/rustc - --crate-name ___ --print=file-names --target sparcv9-sun-solaris --crate-type bin --crate-type dylib --crate-type rlib` (signal: 6, SIGABRT: process abort signal)\r\n--- stderr\r\n\r\nthread 'rustc' has overflowed its stack\r\nfatal runtime error: stack overflow\r\n\r\nthread 'main' panicked at 'command did not execute successfully: \"/usr/bin/cargo\" \"build\" \"--target\" \"sparcv9-sun-solaris\" \"--release\" \"--features\" \"panic-unwind jemalloc backtrace\" \"--manifest-path\" \"/scratch/userland-gate/components/rust/rustc/rustc-1.25.0-src/src/libstd/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101', bootstrap/compile.rs:1060:9\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nfailed to run: /scratch/userland-gate/components/rust/rustc/build/sparcv9/build/bootstrap/debug/bootstrap build\r\n```\r\n\r\nIt generates core dump with following stack:\r\n\r\n```\r\n001ffdc7b332c8f1 libc.so.1`__lwp_sigqueue+8(6, ffffffffffffffec, 1ffdc7b332d190, 5, 0, 0)\r\n001ffdc7b332c9a1 libc.so.1`abort+0xfc(1, 1210, 0, 1000, 1, 0)\r\n001ffdc7b332ca81 libstd-22d0ffec97807ad4.so`std::sys_common::util::abort::hfb1a297da28cd7c5+0x6c(1, 1ffdc7b332d360, c08, 1, 0, 1bf9151cf0)\r\n001ffdc7b332cb71 libstd-22d0ffec97807ad4.so`std::sys::unix::stack_overflow::imp::signal_handler::h7c94745b1051c9da.llvm.E353AF80+0xc8(1ffdc7b248dc50, 1, 1ffdc7b2638000, 1ffdc7a7800000,\r\n1ffdc7a77fe000, 1ffdc7a77fe000)\r\n001ffdc7b332cc51 libc.so.1`__sighndlr+0xc(b, 1ffdc7b332da70, 1ffdc7b332d760, 1ffdc7b24fe2f4, 0, 1ffdc7b2326000)\r\n001ffdc7b332cd01 libc.so.1`call_user_handler+0x354(0, 1ffdc7b332da70, 0, 1ffdc7b3330240, b, 0)\r\n001ffdc7b332cdf1 libc.so.1`sigacthandler+0x54(b, 1ffdc7b332da70, 1ffdc7b332d760, 0, 0, 1ffdc7b2326000)\r\n\r\n```\r\n\r\nOn Solaris 11.3 it's not SIGABRT but rather SIGSEGV and the core dump differs:\r\n\r\n```\r\n001ffd60ef3ff3b1 librustc_trans-llvm.so`__ctzdi2(100, 0, 0, 0, 0, 0)\r\n```\r\n\r\nUnfortunately I cannot test 1.26 (since it requires 1.25 which I don't have). On intel there is no problem.", "closed_by": {"login": "psumbera", "id": 4249116, "node_id": "MDQ6VXNlcjQyNDkxMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4249116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psumbera", "html_url": "https://github.com/psumbera", "followers_url": "https://api.github.com/users/psumbera/followers", "following_url": "https://api.github.com/users/psumbera/following{/other_user}", "gists_url": "https://api.github.com/users/psumbera/gists{/gist_id}", "starred_url": "https://api.github.com/users/psumbera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psumbera/subscriptions", "organizations_url": "https://api.github.com/users/psumbera/orgs", "repos_url": "https://api.github.com/users/psumbera/repos", "events_url": "https://api.github.com/users/psumbera/events{/privacy}", "received_events_url": "https://api.github.com/users/psumbera/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50768/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50768/timeline", "performed_via_github_app": null, "state_reason": "completed"}