{"url": "https://api.github.com/repos/rust-lang/rust/issues/59867", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59867/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59867/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59867/events", "html_url": "https://github.com/rust-lang/rust/issues/59867", "id": 431789547, "node_id": "MDU6SXNzdWU0MzE3ODk1NDc=", "number": 59867, "title": "rustdoc: module flag to prevent code blocks without a lang item from counting as rust", "user": {"login": "Lokathor", "id": 5456384, "node_id": "MDQ6VXNlcjU0NTYzODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5456384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lokathor", "html_url": "https://github.com/Lokathor", "followers_url": "https://api.github.com/users/Lokathor/followers", "following_url": "https://api.github.com/users/Lokathor/following{/other_user}", "gists_url": "https://api.github.com/users/Lokathor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lokathor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lokathor/subscriptions", "organizations_url": "https://api.github.com/users/Lokathor/orgs", "repos_url": "https://api.github.com/users/Lokathor/repos", "events_url": "https://api.github.com/users/Lokathor/events{/privacy}", "received_events_url": "https://api.github.com/users/Lokathor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-04-11T01:32:01Z", "updated_at": "2023-05-31T16:51:56Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "So, I've got some code being generated by `bindgen`. The C source has `doxygen` doc comments in it, which `bindgen` faithfully converts over into doc comments. However, some of the `doxygen` content is indented with spaces (numbered lists and the like), so when converted into rustdoc it becomes a code block. These code blocks are picked up as \"doctests\" by `cargo test`, which then of course fail to build because they're not Rust code at all.\r\n\r\nI'm told that, internally, this is all just code block elements by the time rustdoc sees it, you can't tell which code block was made via a backtick fence and which was made via indentation. However, you _can_ tell if a lang was declared on the code block.\r\n\r\nSo what I need is an opt-in flag that you can declare module-wide (and children modules and such) so that any code block _without_ a declared language is not treated as rust code by default, so then it won't become a doctest.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59867/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59867/timeline", "performed_via_github_app": null, "state_reason": null}