{"url": "https://api.github.com/repos/rust-lang/rust/issues/93935", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/93935/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/93935/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/93935/events", "html_url": "https://github.com/rust-lang/rust/issues/93935", "id": 1133858012, "node_id": "I_kwDOAAsO6M5DlUzc", "number": 93935, "title": "const_allocate intrinsic: what should it do at runtime?", "user": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 900795185, "node_id": "MDU6TGFiZWw5MDA3OTUxODU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-eval", "name": "A-const-eval", "color": "f7e101", "default": false, "description": "Area: constant evaluation (mir interpretation)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-02-12T10:50:19Z", "updated_at": "2022-02-12T12:31:16Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "We have a const_allocate intrinsic to perform heap allocations during CTFE. It should not be called during runtime, but we do have to generate *some* code for that case. Currently, we make it return NULL.\r\n\r\nI think calling this at runtime is always an error, so we shouldn't just silently continue execution. We should either panic or abort. (The codegen backend already knows how to do both of these things, so this should not be very hard to implement.)\r\n\r\n@rust-lang/wg-const-eval what do you think?", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/93935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/93935/timeline", "performed_via_github_app": null, "state_reason": null}