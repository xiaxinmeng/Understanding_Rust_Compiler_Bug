{"url": "https://api.github.com/repos/rust-lang/rust/issues/49848", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49848/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49848/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49848/events", "html_url": "https://github.com/rust-lang/rust/issues/49848", "id": 313023724, "node_id": "MDU6SXNzdWUzMTMwMjM3MjQ=", "number": 49848, "title": "\"cargo web deploy\" optimization level may be unoptimal", "user": {"login": "kripken", "id": 173661, "node_id": "MDQ6VXNlcjE3MzY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kripken", "html_url": "https://github.com/kripken", "followers_url": "https://api.github.com/users/kripken/followers", "following_url": "https://api.github.com/users/kripken/following{/other_user}", "gists_url": "https://api.github.com/users/kripken/gists{/gist_id}", "starred_url": "https://api.github.com/users/kripken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kripken/subscriptions", "organizations_url": "https://api.github.com/users/kripken/orgs", "repos_url": "https://api.github.com/users/kripken/repos", "events_url": "https://api.github.com/users/kripken/events{/privacy}", "received_events_url": "https://api.github.com/users/kripken/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-04-10T17:41:47Z", "updated_at": "2018-04-17T16:56:05Z", "closed_at": "2018-04-17T16:56:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "(Apologies if this is the wrong place to file it.)\r\n\r\n[Looking at the output](https://twitter.com/rickycodes/status/983750057718616066) of `cargo web deploy` vs `cargo web deploy --target=wasm32-unknown-unknown`, the former emits much larger output. It's emitting asm.js, which should be larger than the second command which emits wasm, but it's over 10x larger which is very surprising.\r\n\r\n@alexcrichton pointed me to [linker.rs](https://github.com/rust-lang/rust/blob/master/src/librustc_trans/back/linker.rs#L753-L765) which shows that optimization flags are passed to emcc, *if* told to optimize. But we're not sure if it's told to or not: if it's invoked without optimizations, it would explain the size difference (as asm.js linked without opts is much larger than wasm linked without opts, but with opts, the difference should be much closer).", "closed_by": {"login": "kripken", "id": 173661, "node_id": "MDQ6VXNlcjE3MzY2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kripken", "html_url": "https://github.com/kripken", "followers_url": "https://api.github.com/users/kripken/followers", "following_url": "https://api.github.com/users/kripken/following{/other_user}", "gists_url": "https://api.github.com/users/kripken/gists{/gist_id}", "starred_url": "https://api.github.com/users/kripken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kripken/subscriptions", "organizations_url": "https://api.github.com/users/kripken/orgs", "repos_url": "https://api.github.com/users/kripken/repos", "events_url": "https://api.github.com/users/kripken/events{/privacy}", "received_events_url": "https://api.github.com/users/kripken/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49848/timeline", "performed_via_github_app": null, "state_reason": "completed"}