{"url": "https://api.github.com/repos/rust-lang/rust/issues/76380", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/76380/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76380/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/76380/events", "html_url": "https://github.com/rust-lang/rust/issues/76380", "id": 694133256, "node_id": "MDU6SXNzdWU2OTQxMzMyNTY=", "number": 76380, "title": "Add a stable version of x.py", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-09-05T17:39:56Z", "updated_at": "2020-09-11T22:36:05Z", "closed_at": "2020-09-11T22:36:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This came up in https://github.com/rust-lang/rust/issues/76165 in response to the changes from https://github.com/rust-lang/rust/pull/73964: currently the way to adapt to changes in x.py is 'learn about them because it broke something and change your workflow'. This is not ideal, especially for automated scripts. It would be great to have a separate, stable interface that doesn't change regardless of any changes to contributor defaults.\r\n\r\nI imagine the defaults looking mostly, but not exactly, like the defaults prior to #73964:\r\n- the default stage will go back to 2 for all subcommands\r\n- `src/rustc` will be on by default \r\n- `debuginfo = 1` by default when `debug = true` will _not_ be reverted - if you have strong opinions about debuginfo I expect you already have `debug = false` for a release build.\r\n\r\nThe setup I imagine is two different scripts that work on the same underlying codebase: `x.py` and `bootstrap.py`, where `bootstrap.py` is the stable version. Both will be 'facades' around the current `src/bootstrap/bootstrap.py`, and the logic of choosing defaults will still live in bootstrap.py and the rustbuild crate.", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/76380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/76380/timeline", "performed_via_github_app": null, "state_reason": "completed"}