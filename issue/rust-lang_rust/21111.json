{"url": "https://api.github.com/repos/rust-lang/rust/issues/21111", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21111/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21111/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21111/events", "html_url": "https://github.com/rust-lang/rust/issues/21111", "id": 54253108, "node_id": "MDU6SXNzdWU1NDI1MzEwOA==", "number": 21111, "title": "ICE: trying to take the sizing type of str, an unsized type", "user": {"login": "hugwijst", "id": 600107, "node_id": "MDQ6VXNlcjYwMDEwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/600107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hugwijst", "html_url": "https://github.com/hugwijst", "followers_url": "https://api.github.com/users/hugwijst/followers", "following_url": "https://api.github.com/users/hugwijst/following{/other_user}", "gists_url": "https://api.github.com/users/hugwijst/gists{/gist_id}", "starred_url": "https://api.github.com/users/hugwijst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hugwijst/subscriptions", "organizations_url": "https://api.github.com/users/hugwijst/orgs", "repos_url": "https://api.github.com/users/hugwijst/repos", "events_url": "https://api.github.com/users/hugwijst/events{/privacy}", "received_events_url": "https://api.github.com/users/hugwijst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 125141240, "node_id": "MDU6TGFiZWwxMjUxNDEyNDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-dst", "name": "A-dst", "color": "f7e101", "default": false, "description": "Area: Dynamically Sized Types"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-01-13T21:49:20Z", "updated_at": "2015-08-14T20:31:49Z", "closed_at": "2015-08-14T20:31:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following code leads to an ICE, while it should generate an error like \"the trait `core::marker::Sized` is not implemented for the type `str`\".\n\n``` rust\ntrait Trait {\n    fn func(_: Option<Self>);\n}\n\nimpl Trait for str {\n    fn func(_: Option<str>) {\n    }\n}\n```\n\n> rustc 1.0.0-nightly (3d0d9bb6f 2015-01-12 22:56:20 +0000)\n> binary: rustc\n> commit-hash: 3d0d9bb6fbdf6ead9396f0874cf38f3ef7c9be5c\n> commit-date: 2015-01-12 22:56:20 +0000\n> host: x86_64-unknown-linux-gnu\n> release: 1.0.0-nightly\n\n```\nerror: internal compiler error: trying to take the sizing type of str, an unsized type\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:182\n\nstack backtrace:\n   1:     0x7f01192d5230 - sys::backtrace::write::hb7fa0f4f6b33ee3a8Rt\n   2:     0x7f01192f6cd0 - failure::on_fail::h4388493538a5ad8ck8z\n   3:     0x7f0119265880 - rt::unwind::begin_unwind_inner::h644ddf1c409df284cNz\n   4:     0x7f011409b2d0 - rt::unwind::begin_unwind::h6723059647203556630\n   5:     0x7f011409bb70 - diagnostic::Handler::bug::hc2ca177604da0419tWF\n   6:     0x7f01175c98c0 - session::Session::bug::h38aa4cc0307771d526q\n   7:     0x7f01182a4570 - trans::type_of::sizing_type_of::hb5de94b104fb5154kUo\n   8:     0x7f01183b6670 - trans::adt::represent_type_uncached::he2e76ad4ea19848aPEH\n   9:     0x7f011829f490 - trans::adt::represent_type::hd4315f520028bff5pBH\n  10:     0x7f011828b5f0 - trans::type_of::type_of::h7d181a4982a1399cX1o\n  11:     0x7f011833af90 - trans::type_of::type_of_rust_fn::h9cfd5332e9dac220uQo\n  12:     0x7f01183426f0 - trans::base::decl_rust_fn::ha5ca3a661b9a89cct2r\n  13:     0x7f0118354140 - trans::base::register_fn::h279c2125464a6273dGu\n  14:     0x7f0118355df0 - trans::base::register_method::h56ebbb83600196c3Lkv\n  15:     0x7f011826c430 - trans::base::get_item_val::h5c260ee213a7de8ac3u\n  16:     0x7f011826a1a0 - trans::base::trans_item::h73d296fbb1db22b4Eyu\n  17:     0x7f01183560b0 - trans::base::trans_crate::h9ff7181fd7ce844bluv\n  18:     0x7f011983c010 - driver::phase_4_translate_to_llvm::h801d0ab1dc4e2ce7YMa\n  19:     0x7f0119816e20 - driver::compile_input::h16a8340f5186d468Aba\n  20:     0x7f01198e2b10 - run_compiler::hc5ba22728815878be5b\n  21:     0x7f01198e1280 - thunk::F.Invoke<A, R>::invoke::h7238407932693063958\n  22:     0x7f01198e01e0 - rt::unwind::try::try_fn::h923019338206111962\n  23:     0x7f011935de80 - rust_try_inner\n  24:     0x7f011935de70 - rust_try\n  25:     0x7f01198e0490 - thunk::F.Invoke<A, R>::invoke::h13480221286053699380\n  26:     0x7f01192e4c20 - sys::thread::thread_start::he45f9a9d6a5c2f67VJw\n  27:     0x7f01138bbfe0 - start_thread\n  28:     0x7f0118f06749 - __clone\n  29:                0x0 - <unknown>\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21111/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21111/timeline", "performed_via_github_app": null, "state_reason": "completed"}