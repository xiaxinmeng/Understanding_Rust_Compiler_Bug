{"url": "https://api.github.com/repos/rust-lang/rust/issues/68146", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/68146/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/68146/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/68146/events", "html_url": "https://github.com/rust-lang/rust/issues/68146", "id": 548531827, "node_id": "MDU6SXNzdWU1NDg1MzE4Mjc=", "number": 68146, "title": "Can't compile with emscripten on windows (rust.metadata.bin) The end of the file was unexpectedly encountered", "user": {"login": "Zazck", "id": 8903704, "node_id": "MDQ6VXNlcjg5MDM3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8903704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zazck", "html_url": "https://github.com/Zazck", "followers_url": "https://api.github.com/users/Zazck/followers", "following_url": "https://api.github.com/users/Zazck/following{/other_user}", "gists_url": "https://api.github.com/users/Zazck/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zazck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zazck/subscriptions", "organizations_url": "https://api.github.com/users/Zazck/orgs", "repos_url": "https://api.github.com/users/Zazck/repos", "events_url": "https://api.github.com/users/Zazck/events{/privacy}", "received_events_url": "https://api.github.com/users/Zazck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-12T07:07:37Z", "updated_at": "2020-01-19T18:03:45Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "The following output shows a new project without modification but compilation fails\r\n```\r\nD:\\Code>D:\\toolchain\\emsdk\\emsdk_env.bat\r\nAdding directories to PATH:\r\nPATH += D:\\toolchain\\emsdk\r\nPATH += D:\\toolchain\\emsdk\\upstream\\emscripten\r\nPATH += D:\\toolchain\\emsdk\\node\\12.9.1_64bit\\bin\r\nPATH += D:\\toolchain\\emsdk\\python\\2.7.13.1_64bit\\python-2.7.13.amd64\r\nPATH += D:\\toolchain\\emsdk\\java\\8.152_64bit\\bin\r\n\r\nSetting environment variables:\r\nEMSDK = D:/toolchain/emsdk\r\nEM_CONFIG = C:\\Users\\sekai\\.emscripten\r\nEMSDK_NODE = D:\\toolchain\\emsdk\\node\\12.9.1_64bit\\bin\\node.exe\r\nEMSDK_PYTHON = D:\\toolchain\\emsdk\\python\\2.7.13.1_64bit\\python-2.7.13.amd64\\python.exe\r\nJAVA_HOME = D:\\toolchain\\emsdk\\java\\8.152_64bit\r\n\r\n\r\nD:\\Code>cargo new rust-emscripten-test\r\n     Created binary (application) `rust-emscripten-test` package\r\n\r\nD:\\Code>cd rust-emscripten-test\r\n\r\nD:\\Code\\rust-emscripten-test>cargo build --target=wasm32-unknown-emscripten\r\n   Compiling rust-emscripten-test v0.1.0 (D:\\Code\\rust-emscripten-test)\r\nerror: linking with `emcc.bat` failed: exit code: 1\r\n  |\r\n  = note: \"cmd\" \"/c\" \"emcc.bat\" \"-s\" \"DISABLE_EXCEPTION_CATCHING=0\" \"-L\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1bjuck14l0ffwfns.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1q3di4gz2b9t8zn5.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1ykwen4cd5q90e52.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.4ossifeikpvnv8oq.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.56kwdmqbw2cm8id5.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.5gq8h1mxltrihvjq.rcgu.o\" \"-o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.js\" \"-s\" \"EXPORTED_FUNCTIONS=[\\\"_main\\\",\\\"_rust_eh_personality\\\"]\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.41vpw4plt3ujpvww.rcgu.o\" \"-O0\" \"--memory-init-file\" \"0\" \"-g4\" \"-s\" \"DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]\" \"-L\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\" \"-L\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libstd-b6414ae168385702.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libpanic_unwind-efbc2c947951b8cc.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libhashbrown-b177382d9a04ffbe.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_std_workspace_alloc-ba7d2244d33447d5.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libbacktrace-39569dc87e4ea301.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_demangle-f83165e777dccb8d.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libunwind-10b085de263b1750.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcfg_if-9a4a22edf44da957.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liblibc-68fabc677efa98de.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liballoc-026dc0061b48e8b6.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_std_workspace_core-7bf75bb619341145.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcore-ef54709e300503ed.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcompiler_builtins-4ed27d8420cb4abc.rlib\" \"-l\" \"c\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\" \"-s\" \"ASSERTIONS=1\" \"-s\" \"ABORTING_MALLOC=0\" \"-Wl,--fatal-warnings\"\r\n  = note: shared:WARNING: ignoring unsupported linker flag: `--fatal-warnings`\r\n          no symbols\r\n          D:/toolchain/emsdk/upstream/bin\\llvm-nm.exe: error: C:\\Users\\sekai\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\wasm32-unknown-emscripten\\lib\\libpanic_unwind-efbc2c947951b8cc.rlib(rust.metadata.bin) The end of the file was unexpectedly encountered\r\n\r\n          Traceback (most recent call last):\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 3748, in <module>\r\n              sys.exit(run(sys.argv))\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 1993, in run\r\n              ensure_archive_index(input_file)\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 476, in ensure_archive_index\r\n              stdout = run_process([shared.LLVM_NM, '--print-armap', archive_file], stdout=PIPE).stdout\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\tools\\shared.py\", line 195, in run_process\r\n              result.check_returncode()\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\tools\\shared.py\", line 168, in check_returncode\r\n              raise Py2CalledProcessError(returncode=self.returncode, cmd=self.args, output=self.stdout, stderr=self.stderr)\r\n          tools.shared.Py2CalledProcessError: Command '['D:/toolchain/emsdk/upstream/bin\\\\llvm-nm.exe', '--print-armap', 'C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libpanic_unwind-efbc2c947951b8cc.rlib']' returned non-zero exit status 1\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: could not compile `rust-emscripten-test`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nemcc works fine with pure C hello world example\r\n\r\n```\r\nD:\\Code\\rust-emscripten-test>emcc ./hello_world.c\r\ncache:INFO: generating system library: libcompiler_rt.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libcompiler_rt.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\ncache:INFO: generating system library: libc-wasm.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libc-wasm.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\ncache:INFO: generating system library: libdlmalloc.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libdlmalloc.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\ncache:INFO: generating system library: libpthread_stub.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libpthread_stub.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\ncache:INFO: generating system library: libc_rt_wasm.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libc_rt_wasm.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\ncache:INFO: generating system library: libsockets.a... (this will be cached in \"C:\\Users\\sekai\\.emscripten_cache\\wasm-obj\\libsockets.a\" for subsequent builds)\r\ncache:INFO:  - ok\r\n\r\nD:\\Code\\rust-emscripten-test>node a.out.js\r\nHello world!\r\n```\r\n```\r\nrustc 1.40.0 (73528e339 2019-12-16)\r\nbinary: rustc\r\ncommit-hash: 73528e339aae0f17a15ffa49a8ac608f50c6cf14\r\ncommit-date: 2019-12-16\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.40.0\r\nLLVM version: 9.0\r\n```\r\n```\r\nemcc (Emscripten gcc/clang-like replacement + linker emulating GNU ld) 1.39.5\r\nclang version 10.0.0 (Cswircachegitchromium.googlesource.com-external-github.com-llvm-llvm--project be2b7ea89ab43d6827634fbdbbd2661e1f242527)\r\nTarget: x86_64-pc-windows-msvc\r\nThread model: posix\r\nInstalledDir: D:/toolchain/emsdk/upstream/bin\r\nshared:INFO: (Emscripten: Running sanity checks)\r\n```\r\n\r\nverbose output:\r\n```\r\nD:\\Code\\rust-emscripten-test>cargo build --target=wasm32-unknown-emscripten --verbose\r\n   Compiling rust-emscripten-test v0.1.0 (D:\\Code\\rust-emscripten-test)\r\n     Running `rustc --edition=2018 --crate-name rust_emscripten_test src\\main.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=0017e6a98f95d3ef --out-dir D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\deps --target wasm32-unknown-emscripten -C incremental=D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\incremental -L dependency=D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\deps -L dependency=D:\\Code\\rust-emscripten-test\\target\\debug\\deps`\r\nerror: linking with `emcc.bat` failed: exit code: 1\r\n  |\r\n  = note: \"cmd\" \"/c\" \"emcc.bat\" \"-s\" \"DISABLE_EXCEPTION_CATCHING=0\" \"-L\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1bjuck14l0ffwfns.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1q3di4gz2b9t8zn5.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.1ykwen4cd5q90e52.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.4ossifeikpvnv8oq.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.56kwdmqbw2cm8id5.rcgu.o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.5gq8h1mxltrihvjq.rcgu.o\" \"-o\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.js\" \"-s\" \"EXPORTED_FUNCTIONS=[\\\"_main\\\",\\\"_rust_eh_personality\\\"]\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\\\\rust_emscripten_test.41vpw4plt3ujpvww.rcgu.o\" \"-O0\" \"--memory-init-file\" \"0\" \"-g4\" \"-s\" \"DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]\" \"-L\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\wasm32-unknown-emscripten\\\\debug\\\\deps\" \"-L\" \"D:\\\\Code\\\\rust-emscripten-test\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libstd-b6414ae168385702.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libpanic_unwind-efbc2c947951b8cc.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libhashbrown-b177382d9a04ffbe.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_std_workspace_alloc-ba7d2244d33447d5.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libbacktrace-39569dc87e4ea301.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_demangle-f83165e777dccb8d.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libunwind-10b085de263b1750.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcfg_if-9a4a22edf44da957.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liblibc-68fabc677efa98de.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liballoc-026dc0061b48e8b6.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librustc_std_workspace_core-7bf75bb619341145.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcore-ef54709e300503ed.rlib\" \"C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcompiler_builtins-4ed27d8420cb4abc.rlib\" \"-l\" \"c\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\" \"-s\" \"ASSERTIONS=1\" \"-s\" \"ABORTING_MALLOC=0\" \"-Wl,--fatal-warnings\"\r\n  = note: shared:WARNING: ignoring unsupported linker flag: `--fatal-warnings`\r\n          no symbols\r\n          D:/toolchain/emsdk/upstream/bin\\llvm-nm.exe: error: C:\\Users\\sekai\\.rustup\\toolchains\\stable-x86_64-pc-windows-msvc\\lib\\rustlib\\wasm32-unknown-emscripten\\lib\\libpanic_unwind-efbc2c947951b8cc.rlib(rust.metadata.bin) The end of the file was unexpectedly encountered\r\n\r\n          Traceback (most recent call last):\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 3748, in <module>\r\n              sys.exit(run(sys.argv))\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 1993, in run\r\n              ensure_archive_index(input_file)\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\emcc.py\", line 476, in ensure_archive_index\r\n              stdout = run_process([shared.LLVM_NM, '--print-armap', archive_file], stdout=PIPE).stdout\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\tools\\shared.py\", line 195, in run_process\r\n              result.check_returncode()\r\n            File \"D:\\toolchain\\emsdk\\upstream\\emscripten\\tools\\shared.py\", line 168, in check_returncode\r\n              raise Py2CalledProcessError(returncode=self.returncode, cmd=self.args, output=self.stdout, stderr=self.stderr)\r\n          tools.shared.Py2CalledProcessError: Command '['D:/toolchain/emsdk/upstream/bin\\\\llvm-nm.exe', '--print-armap', 'C:\\\\Users\\\\sekai\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libpanic_unwind-efbc2c947951b8cc.rlib']' returned non-zero exit status 1\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: could not compile `rust-emscripten-test`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name rust_emscripten_test src\\main.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=0017e6a98f95d3ef --out-dir D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\deps --target wasm32-unknown-emscripten -C incremental=D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\incremental -L dependency=D:\\Code\\rust-emscripten-test\\target\\wasm32-unknown-emscripten\\debug\\deps -L dependency=D:\\Code\\rust-emscripten-test\\target\\debug\\deps` (exit code: 1)\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/68146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/68146/timeline", "performed_via_github_app": null, "state_reason": null}