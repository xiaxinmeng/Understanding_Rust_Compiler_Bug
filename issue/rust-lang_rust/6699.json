{"url": "https://api.github.com/repos/rust-lang/rust/issues/6699", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6699/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6699/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6699/events", "html_url": "https://github.com/rust-lang/rust/issues/6699", "id": 14659848, "node_id": "MDU6SXNzdWUxNDY1OTg0OA==", "number": 6699, "title": "Internal compiler error on bcx.cxx().maps.moves_map.contains", "user": {"login": "jaguilar", "id": 799564, "node_id": "MDQ6VXNlcjc5OTU2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/799564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaguilar", "html_url": "https://github.com/jaguilar", "followers_url": "https://api.github.com/users/jaguilar/followers", "following_url": "https://api.github.com/users/jaguilar/following{/other_user}", "gists_url": "https://api.github.com/users/jaguilar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaguilar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaguilar/subscriptions", "organizations_url": "https://api.github.com/users/jaguilar/orgs", "repos_url": "https://api.github.com/users/jaguilar/repos", "events_url": "https://api.github.com/users/jaguilar/events{/privacy}", "received_events_url": "https://api.github.com/users/jaguilar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-05-23T06:30:32Z", "updated_at": "2013-06-20T09:41:18Z", "closed_at": "2013-06-20T09:41:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "reduction2.rs:\n\n```\nuse core::ops::{Add};\n\nfn sum<T, U: Add<U, U>>(seq: &[T], mut u: U, f: &fn(&T) -> U) -> U {\n    for seq.each |x| { u += f(x); };\n    u\n}\n\nfn F(v: &[float]) -> float {\n    do sum(v, 0.) |x| { *x }\n}\n```\n\nThis is compiled with rust as pulled from master. Stack trace follows.\n\n```\njames@james-VirtualBox ~/r/rank> rustc --version; rust test reduction2.rs\nrustc 0.6 (2d28d64 2013-05-17 15:52:25 -0700)\nhost: x86_64-unknown-linux-gnu\nrust: task failed at 'assertion failed: !bcx.ccx().maps.moves_map.contains(&arg_expr.id)', /home/james/rust/src/librustc/middle/trans/callee.rs:745\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f65d031fdab]\n/usr/bin/../lib/librustrt.so(+0x2ac49)[0x7f65d0330c49]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f65d0321d78]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7f65d2d8bdc3]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x125d52)[0x7f65d2d8bd52]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys14__extensions__9meth_91519fail_with17_ac9eb45dc42bd6906_07preE+0x6b)[0x7f65d2ccbceb]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee14trans_arg_expr16_d6bdcf6519b16136_07preE+0x2267)[0x7f65d125abd7]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_args16_c78fefe5617a1ec6_07preE+0x251)[0x7f65d1257071]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23b11d)[0x7f65d125611d]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_22a7326c2e584f736_07preE+0x600)[0x7f65d1200ea0]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner15_1355cc84959a7b6_07preE+0x13e)[0x7f65d123c96e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x25dd47)[0x7f65d1278d47]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x25757b)[0x7f65d127257b]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x252d95)[0x7f65d126dd95]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into15_c7c9f5adcc18a56_07preE+0xc4b)[0x7f65d11ae79b]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_stmt17_91b18a57d4d993546_07preE+0x657)[0x7f65d11ad2d7]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block17_9854c08ac7b88ca86_07preE+0x1a4)[0x7f65d11aa974]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x259b0f)[0x7f65d1274b0f]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_22a7326c2e584f736_07preE+0x600)[0x7f65d1200ea0]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24f762)[0x7f65d126a762]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into15_c7c9f5adcc18a56_07preE+0xa85)[0x7f65d11ae5d5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block17_9854c08ac7b88ca86_07preE+0x340)[0x7f65d11aab10]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_582aa364a2bb51476_07preE+0xaad)[0x7f65d12e431d]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans7closure13trans_expr_fn16_a5888aeca87762e6_07preE+0x726)[0x7f65d125bff6]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24f439)[0x7f65d126a439]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr14trans_to_datum16_2b8592f90405ae06_07preE+0x1127)[0x7f65d11b2977]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee14trans_arg_expr16_d6bdcf6519b16136_07preE+0xb35)[0x7f65d12594a5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_args16_c78fefe5617a1ec6_07preE+0x251)[0x7f65d1257071]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23b11d)[0x7f65d125611d]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_22a7326c2e584f736_07preE+0x600)[0x7f65d1200ea0]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner15_1355cc84959a7b6_07preE+0x13e)[0x7f65d123c96e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee17trans_method_call17_d6baea2fbe907ff36_07preE+0x7d9)[0x7f65d123d2c9]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24e4ba)[0x7f65d12694ba]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into15_c7c9f5adcc18a56_07preE+0xa85)[0x7f65d11ae5d5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_stmt17_91b18a57d4d993546_07preE+0x657)[0x7f65d11ad2d7]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block17_9854c08ac7b88ca86_07preE+0x1a4)[0x7f65d11aa974]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_582aa364a2bb51476_07preE+0xdae)[0x7f65d12e461e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base8trans_fn17_7349bdbfff909cc36_07preE+0x691)[0x7f65d115e681]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans12monomorphize14monomorphic_fn16_89a3ce4a93bdc826_07preE+0x4d68)[0x7f65d1163958]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee25trans_fn_ref_with_vtables16_ef718edcdd5474b6_07preE+0xe63)[0x7f65d123a353]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee12trans_fn_ref16_f864ba4eb76f2b16_07preE+0x87f)[0x7f65d12360af]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee5trans16_7a98d43af7ec57c6_07preE+0x78b)[0x7f65d123400b]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x221a88)[0x7f65d123ca88]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23ab8f)[0x7f65d1255b8f]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_22a7326c2e584f736_07preE+0x600)[0x7f65d1200ea0]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner15_1355cc84959a7b6_07preE+0x13e)[0x7f65d123c96e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_call17_8f6836f7389cd68a6_07preE+0x39a)[0x7f65d123c53a]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24e3c2)[0x7f65d12693c2]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into15_c7c9f5adcc18a56_07preE+0xa85)[0x7f65d11ae5d5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block17_9854c08ac7b88ca86_07preE+0x340)[0x7f65d11aab10]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_582aa364a2bb51476_07preE+0xdae)[0x7f65d12e461e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base8trans_fn17_7349bdbfff909cc36_07preE+0x691)[0x7f65d115e681]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_item17_cfa956d4cc97a5dc6_07preE+0xe03)[0x7f65d11545d3]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base9trans_mod17_f526fcf3681e9a666_07preE+0xb6)[0x7f65d12eaea6]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base11trans_crate16_3edbcbf2e01c2a26_07preE+0x344d)[0x7f65d130c56d]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_rest15_134f5496ff5de16_07preE+0x3bc9)[0x7f65d1a49939]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_upto17_747e21c0469b22f26_07preE+0x192)[0x7f65d1a4d442]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver13compile_input15_0b1e5b3afc4cd16_07preE+0x107)[0x7f65d1a4d8c7]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN12run_compiler17_63c0a0c62771367c6_07preE+0x2bcb)[0x7f65d1a7e0db]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa75dbe)[0x7f65d1a90dbe]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa736ac)[0x7f65d1a8e6ac]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa6d07c)[0x7f65d1a8807c]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa76098)[0x7f65d1a91098]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xeed05)[0x7f65d2d54d05]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x16b558)[0x7f65d2dd1558]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f65d0320764]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/james/rust/src/librustc/rustc.rc:355\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f65d031fdab]\n/usr/bin/../lib/librustrt.so(+0x2ac49)[0x7f65d0330c49]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f65d0321d78]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7f65d2d8bdc3]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x125e72)[0x7f65d2d8be72]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x64144)[0x7f65d2cca144]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN7monitor17_67f3fc1a7e3ddd546_07preE+0x2415)[0x7f65d1a816d5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa76098)[0x7f65d1a91098]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN4main15_c4de63b748e03d6_07preE+0x69)[0x7f65d1a90cf9]\n/usr/bin/../lib/librust-ff41319e20d2b87e-0.7-pre.so(+0x4208)[0x7f65d0559208]\n/usr/bin/../lib/librust-ff41319e20d2b87e-0.7-pre.so(+0x2dfe)[0x7f65d0557dfe]\n/usr/bin/../lib/librust-ff41319e20d2b87e-0.7-pre.so(+0x4c94)[0x7f65d0559c94]\n/usr/bin/../lib/librust-ff41319e20d2b87e-0.7-pre.so(_ZN4main17_cafdd5fc92b0f2ec6_07preE+0x17c)[0x7f65d055977c]\nrust(_rust_main+0x2e)[0x400e0e]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f65d0320764]\nrust: domain main @0x6ea440 root task failed\n```\n", "closed_by": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6699/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6699/timeline", "performed_via_github_app": null, "state_reason": "completed"}