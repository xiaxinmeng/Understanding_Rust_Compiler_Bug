{"url": "https://api.github.com/repos/rust-lang/rust/issues/49722", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49722/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49722/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49722/events", "html_url": "https://github.com/rust-lang/rust/issues/49722", "id": 311875823, "node_id": "MDU6SXNzdWUzMTE4NzU4MjM=", "number": 49722, "title": "Separate codegen from metadata", "user": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-04-06T07:41:20Z", "updated_at": "2018-04-06T08:21:10Z", "closed_at": "2018-04-06T08:21:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "*I didn't research deeply on this; if what I said is not applicable please close this.*\r\n\r\nWe currently waits for artefacts of dependencies to be built before building the main crate; however, we don't really need the full optimized code before proceeding to the main crate.\r\n\r\nInstead, we can split the step into two: check for code errors and emit metadata, and running the actual codegen (plus linking). This way we can have better parallelism. Taking the rustc codebase for example, we no longer have to block on LLVM optimizing librustc or libsyntax_ext, but instead compile other components in parallel.\r\n\r\nHow we split this remains to be discussed:\r\n- If we simply split it to two process invocation, then we need to somehow save the compilation state between them.\r\n- If we do some kind of IPC with Cargo to inform that the metadata stage is completed, how we should do that should be decided.\r\n- Both of the solution requires Cargo adaption as well.", "closed_by": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49722/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49722/timeline", "performed_via_github_app": null, "state_reason": "completed"}