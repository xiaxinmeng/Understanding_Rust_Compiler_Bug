{"url": "https://api.github.com/repos/rust-lang/rust/issues/12242", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12242/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12242/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12242/events", "html_url": "https://github.com/rust-lang/rust/issues/12242", "id": 27515743, "node_id": "MDU6SXNzdWUyNzUxNTc0Mw==", "number": 12242, "title": "comparative code examples in tutorial/guides should be minimal diffs", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-02-13T12:56:23Z", "updated_at": "2014-07-16T17:49:02Z", "closed_at": "2014-07-16T17:44:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Sometimes concepts are explained by presenting a piece of code, then explaining some problem with it, and finally showing one or more revised versions that fix the problem in various ways.\n\nThe problem is that if you make many changes in the revision, it can obscure the point that is being made.\n\nOne particular example (though there may be others; the above is just a general principle):\n\nIn the [sample code from benchmarks and the optimizer](../blob/a7719a7347feeabb4f348c57273b949862bd968d/src/doc/guide-testing.md#benchmarks-and-the-optimizer), we first see:\n\n``` rust\n    bh.iter(|| {\n            range(0, 1000).fold(0, |old, new| old ^ new);\n        });\n```\n\nwhich has a problem, and then we see as the fix: \n\n``` rust\n    bh.iter(|| range(0, 1000).fold(0, |old, new| old ^ new))\n```\n\nThere are three changes between these two code fragments:\n1. The semi-colon from the statement within the closure's body was removed\n2. The closure's body was simplified from `{ expr }` to `expr` (and it was all folded onto one line in the process).\n3. The iter call itself now has no semi-colon terminating it.\n\nSo, first the question: Were both changes (1.) and (3.) necessary?  Or just (1.)?  One cannot tell from the presentation.\n\nSecond, the suggestion: while I like the second code fragment as code on its own, I think achieving the effect by removing semi-colons is too subtle for this tutorial's presentation, especially when mixed with other (semantically insignificant) changes to the fragment.  I basically am suggesting that the revised code should look just like the original, except with one very apparent change, like so:\n\n``` rust\n    bh.iter(|| {\n            return range(0, 1000).fold(0, |old, new| old ^ new);\n        });\n```\n\n`return` statements did not used to be legal within closures, but I believe they are now, so this should work.  (if it is considered poor style to use `return` within closures, then I would settle for just dropping the semi-colon, but with a comment added pointing out where it has been removed.)\n\nAnyway, this is a lot of description text for a small change to one tutorial example.  My goal is not to just get one example fixed; its to encourage the above as a style of exposition in our tutorials.\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/12242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12242/timeline", "performed_via_github_app": null, "state_reason": "completed"}