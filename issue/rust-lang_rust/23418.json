{"url": "https://api.github.com/repos/rust-lang/rust/issues/23418", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23418/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23418/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23418/events", "html_url": "https://github.com/rust-lang/rust/issues/23418", "id": 62194091, "node_id": "MDU6SXNzdWU2MjE5NDA5MQ==", "number": 23418, "title": "rustc panic", "user": {"login": "MarkSwanson", "id": 122992, "node_id": "MDQ6VXNlcjEyMjk5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/122992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkSwanson", "html_url": "https://github.com/MarkSwanson", "followers_url": "https://api.github.com/users/MarkSwanson/followers", "following_url": "https://api.github.com/users/MarkSwanson/following{/other_user}", "gists_url": "https://api.github.com/users/MarkSwanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkSwanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkSwanson/subscriptions", "organizations_url": "https://api.github.com/users/MarkSwanson/orgs", "repos_url": "https://api.github.com/users/MarkSwanson/repos", "events_url": "https://api.github.com/users/MarkSwanson/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkSwanson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-16T20:02:47Z", "updated_at": "2015-05-09T18:36:16Z", "closed_at": "2015-05-09T18:36:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "<short summary of the bug>\n\nI tried this code:\n\nuse std::io;\n\nfn test() {\n\n```\n#[derive(Debug)]\nenum E {\n    BadStatusCode { code: i32},\n    IoError(io::Error)\n}\nlet e1 = E::IoError(io::Error::last_os_error());\nlet e = E::BadStatusCode {code: 0};\nprintln!(\"e:{:?}\", e.code);\n```\n\n}\n\n<I expected to see>\n\ne:0\n\nInstead, this happened: <explanation>\n## Meta\n\n`rustc --version --verbose`:\n\n$ rustc --version --verbose\nrustc 1.0.0-nightly (30e1f9a1c 2015-03-14) (built 2015-03-15)\nbinary: rustc\ncommit-hash: 30e1f9a1c2bf7134135800bc9afd082773defadc\ncommit-date: 2015-03-14\nbuild-date: 2015-03-15\nhost: x86_64-apple-darwin\nrelease: 1.0.0-nightly\n\n$ !car\ncargo build\n   Compiling rust-bugms1 v0.0.1 (file:///Users/maswanso/src/external/rust-bugms1)\nsrc/lib.rs:13:24: 13:30 error: attempted access of field `code` on type `test::E`, but no field with that name was found\nsrc/lib.rs:13     println!(\"e:{:?}\", e.code);\n                                     ^~~~~~\nnote: in expansion of format_args!\n<std macros>:2:43: 2:76 note: expansion site\n<std macros>:1:1: 2:78 note: in expansion of println!\nsrc/lib.rs:13:5: 13:32 note: expansion site\nerror: internal compiler error: ID not mapped to struct fields: enum test::E::E (id=9)\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:190\n\nstack backtrace:\n   1:        0x10593cd2b - sys::backtrace::write::ha860f032f06dd89afCC\n   2:        0x105965b0d - panicking::on_panic::h6a18b44186bb57afDsI\n   3:        0x105885a77 - rt::unwind::begin_unwind_inner::hd2534fa4a37f06f1EbI\n   4:        0x105043d4e - rt::unwind::begin_unwind::h4894477901674685092\n   5:        0x10504468c - diagnostic::Handler::bug::hae51981d40ecc46blgB\n   6:        0x102a35e4c - middle::ty::lookup_struct_fields::h9a0c1e2e0f517a28RJ5\n   7:        0x10209f60e - check::check_expr_with_unifier::suggest_field_names::h5f2000e59cbd55ebBwq\n   8:        0x102072154 - check::check_expr_with_unifier::check_field::h69ce2888184f32bcvqq\n   9:        0x10208d88f - check::check_expr_with_unifier::h4298816897439060846\n  10:        0x10208957a - check::check_expr_with_unifier::h17404064713139209684\n  11:        0x102070653 - check::check_expr_with_unifier::closure.32612\n  12:        0x102079a5f - vec::Vec<T>.FromIterator<T>::from_iter::h5728053635905335577\n  13:        0x102075915 - check::check_expr_with_unifier::h14779708369100304031\n  14:        0x101f8b5bc - check::_match::check_match::hb4973a0390014f4fSab\n  15:        0x10208d186 - check::check_expr_with_unifier::h4298816897439060846\n  16:        0x102063c21 - check::check_expr_with_unifier::h3544831391636284546\n  17:        0x10203a61c - check::check_argument_types::h01f4d41a36cb60e96pp\n  18:        0x102036b17 - check::callee::confirm_builtin_call::he6a26f80098a0ceftam\n  19:        0x1020354e3 - check::callee::check_call::haef3d250ae4d2b32V0l\n  20:        0x10206125d - check::check_expr_with_unifier::h3544831391636284546\n  21:        0x10203a61c - check::check_argument_types::h01f4d41a36cb60e96pp\n  22:        0x102036b17 - check::callee::confirm_builtin_call::he6a26f80098a0ceftam\n  23:        0x1020354e3 - check::callee::check_call::haef3d250ae4d2b32V0l\n  24:        0x102092da7 - check::check_expr_with_unifier::h2091165693314502420\n  25:        0x102050035 - check::check_block_with_expected::h6f13d7a87125a2baeYr\n  26:        0x102032015 - check::check_fn::h77a17bd13aefe783vin\n  27:        0x10204ca90 - check::check_bare_fn::hceabbc00e6b48601b8m\n  28:        0x102044c8c - check::check_item::h33cadcb399ed69c3Pqn\n  29:        0x10211dcd2 - check_crate::closure.35787\n  30:        0x102118960 - check_crate::ha12d154f9f64ecd4O3B\n  31:        0x101e46807 - driver::phase_3_run_analysis_passes::h1215c80c4b6a391fqGa\n  32:        0x101e2e4d2 - driver::compile_input::hf43d1abc1c271827Rba\n  33:        0x101eef113 - run_compiler::hd026487fba5e11ffx2b\n  34:        0x101eeccbb - thunk::F.Invoke<A, R>::invoke::h4638332392346812264\n  35:        0x101eebb7f - rt::unwind::try::try_fn::h13573825556050994607\n  36:        0x1059e34a8 - rust_try_inner\n  37:        0x1059e3495 - rust_try\n  38:        0x101eec10c - thunk::F.Invoke<A, R>::invoke::h11626720109288632878\n  39:        0x105952df2 - sys::thread::thread_start::hbdfebeda7d5c79d5sXG\n  40:     0x7fff8a785898 - _pthread_body\n  41:     0x7fff8a785729 - _pthread_start\n\nCould not compile `rust-bugms1`.\n", "closed_by": {"login": "MarkSwanson", "id": 122992, "node_id": "MDQ6VXNlcjEyMjk5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/122992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkSwanson", "html_url": "https://github.com/MarkSwanson", "followers_url": "https://api.github.com/users/MarkSwanson/followers", "following_url": "https://api.github.com/users/MarkSwanson/following{/other_user}", "gists_url": "https://api.github.com/users/MarkSwanson/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkSwanson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkSwanson/subscriptions", "organizations_url": "https://api.github.com/users/MarkSwanson/orgs", "repos_url": "https://api.github.com/users/MarkSwanson/repos", "events_url": "https://api.github.com/users/MarkSwanson/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkSwanson/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23418/timeline", "performed_via_github_app": null, "state_reason": "completed"}