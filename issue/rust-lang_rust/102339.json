{"url": "https://api.github.com/repos/rust-lang/rust/issues/102339", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/102339/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/102339/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/102339/events", "html_url": "https://github.com/rust-lang/rust/issues/102339", "id": 1386950668, "node_id": "I_kwDOAAsO6M5SqzAM", "number": 102339, "title": "Building rustc from source freezes at 'core v0.0.0' crate during stage1", "user": {"login": "bsferrazza", "id": 12578948, "node_id": "MDQ6VXNlcjEyNTc4OTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/12578948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsferrazza", "html_url": "https://github.com/bsferrazza", "followers_url": "https://api.github.com/users/bsferrazza/followers", "following_url": "https://api.github.com/users/bsferrazza/following{/other_user}", "gists_url": "https://api.github.com/users/bsferrazza/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsferrazza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsferrazza/subscriptions", "organizations_url": "https://api.github.com/users/bsferrazza/orgs", "repos_url": "https://api.github.com/users/bsferrazza/repos", "events_url": "https://api.github.com/users/bsferrazza/events{/privacy}", "received_events_url": "https://api.github.com/users/bsferrazza/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-27T01:44:13Z", "updated_at": "2022-10-11T02:44:14Z", "closed_at": "2022-10-11T02:44:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Every time I try building rustc-1.64.0 from source (same happened with 1.60.0) it freezes at 'core' during stage1. This is using glibc 2.36, gcc 12.2.0, and llvm-15.0.1. I'm following the Linux From Scratch build instructions. \r\n\r\n```\r\n   Compiling core v0.0.0 (/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/library/core)\r\n     Running `CARGO=/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage0/bin/cargo CARGO_CRATE_NAME=core CARGO_MANIFEST_DIR=/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/library/core CARGO_PKG_AUTHORS='' CARGO_PKG_DESCRIPTION='The Rust Core Library' CARGO_PKG_HOMEPAGE='' CARGO_PKG_LICENSE='MIT OR Apache-2.0' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=core CARGO_PKG_REPOSITORY='https://github.com/rust-lang/rust.git' CARGO_PKG_RUST_VERSION='' CARGO_PKG_VERSION=0.0.0 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=0 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage1-std/release/deps:/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage0/lib' /scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/bootstrap/debug/rustc --crate-name core --edition=2021 library/core/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 -Zunstable-options --check-cfg 'names()' --check-cfg 'values()' -C metadata=a828b917fcfddbbf -C extra-filename=-a828b917fcfddbbf --out-dir /scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -C incremental=/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/incremental -L dependency=/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/scratch/user/bsferraz/tools/lfs/builds/rustc-1.64.0-src/build/x86_64-unknown-linux-gnu/stage1-std/release/deps -L/home/bsferraz/tools/lib -C link-args=-lffi -Csymbol-mangling-version=legacy -Zunstable-options -Zunstable-options '--check-cfg=values(bootstrap)' '--check-cfg=values(stdarch_intel_sde)' '--check-cfg=values(no_fp_fmt_parse)' '--check-cfg=values(no_global_oom_handling)' '--check-cfg=values(freebsd12)' '--check-cfg=values(backtrace_in_libstd)' '--check-cfg=values(target_env,\"libnx\")' '--check-cfg=values(target_os,\"watchos\")' '--check-cfg=values(target_arch,\"asmjs\",\"spirv\",\"nvptx\",\"nvptx64\",\"le32\",\"xtensa\")' '--check-cfg=values(dont_compile_me)' -Zmacro-backtrace -Zunstable-options -Csplit-debuginfo=off -Zsave-analysis -Cprefer-dynamic -Cllvm-args=-import-instr-limit=10 -Cembed-bitcode=yes '-Zcrate-attr=doc(html_root_url=\"https://doc.rust-lang.org/1.64.0/\")' -Z binary-dep-depinfo`\r\n    Building [                            ] 1/36: core\r\n```\r\n\r\nShould I be suspicious of the fact that it's using check-cfg values like target_os,\"watchos\" and target_arch,\"asmjs\",\"spirv\",\"nvptx\",\"nvptx64\",\"le32\",\"xtensa\"? Not sure where it's getting that from. This is on a RHEL7 distribution which uses kernel 3.10, though according to the rust blog, this is still supported even with the new requirements of rustc-1.64.0. Although I encounter the exact same issue with rustc-1.60.0 which supported kernels as old as 2.6.32. Any ideas what could be causing it to freeze up like this? I have verbosity set to 2, but it provides no clues.", "closed_by": {"login": "bsferrazza", "id": 12578948, "node_id": "MDQ6VXNlcjEyNTc4OTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/12578948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsferrazza", "html_url": "https://github.com/bsferrazza", "followers_url": "https://api.github.com/users/bsferrazza/followers", "following_url": "https://api.github.com/users/bsferrazza/following{/other_user}", "gists_url": "https://api.github.com/users/bsferrazza/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsferrazza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsferrazza/subscriptions", "organizations_url": "https://api.github.com/users/bsferrazza/orgs", "repos_url": "https://api.github.com/users/bsferrazza/repos", "events_url": "https://api.github.com/users/bsferrazza/events{/privacy}", "received_events_url": "https://api.github.com/users/bsferrazza/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/102339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/102339/timeline", "performed_via_github_app": null, "state_reason": "completed"}