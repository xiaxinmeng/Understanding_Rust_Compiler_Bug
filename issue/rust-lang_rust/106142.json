{"url": "https://api.github.com/repos/rust-lang/rust/issues/106142", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/106142/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/106142/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/106142/events", "html_url": "https://github.com/rust-lang/rust/issues/106142", "id": 1510406421, "node_id": "I_kwDOAAsO6M5aBvkV", "number": 106142, "title": "`rustdoc::broken_intra_doc_links` behavior change with `macro_rules` not in scope since 1.63", "user": {"login": "ojeda", "id": 1054456, "node_id": "MDQ6VXNlcjEwNTQ0NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1054456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ojeda", "html_url": "https://github.com/ojeda", "followers_url": "https://api.github.com/users/ojeda/followers", "following_url": "https://api.github.com/users/ojeda/following{/other_user}", "gists_url": "https://api.github.com/users/ojeda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ojeda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ojeda/subscriptions", "organizations_url": "https://api.github.com/users/ojeda/orgs", "repos_url": "https://api.github.com/users/ojeda/repos", "events_url": "https://api.github.com/users/ojeda/events{/privacy}", "received_events_url": "https://api.github.com/users/ojeda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1118567289, "node_id": "MDU6TGFiZWwxMTE4NTY3Mjg5", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-intra-doc-links", "name": "A-intra-doc-links", "color": "f7e101", "default": false, "description": "Area: Intra-doc links, the ability to link to items in docs by name"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-25T20:08:32Z", "updated_at": "2023-04-27T03:23:31Z", "closed_at": "2023-04-27T03:23:31Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`rustdoc` >= 1.63 complains about this intra-doc link:\r\n\r\n```rust\r\npub mod a {\r\n    /// [`m`]\r\n    pub fn f() {}\r\n\r\n    #[macro_export]\r\n    macro_rules! m {\r\n        () => {};\r\n    }\r\n}\r\n```\r\n\r\nwith:\r\n\r\n```txt\r\nwarning: unresolved link to `m`\r\n --> c.rs:2:11\r\n  |\r\n2 |     /// [`m`]\r\n  |           ^ no item named `m` in scope\r\n  |\r\n  = note: `macro_rules` named `m` exists in this crate, but it is not in scope at this link's location\r\n  = note: `#[warn(rustdoc::broken_intra_doc_links)]` on by default\r\n\r\nwarning: 1 warning emitted\r\n```\r\n\r\nHowever, the link is still generated in the rendered output, and points to the right place. Thus the text \"unresolved link\" is a bit confusing, especially since in earlier versions (<= 1.62), there was no warning for this case (and the link still got generated too).\r\n\r\nWith e.g. `crate::m`, the warning goes away.\r\n\r\nTherefore, if the intended behavior is that the user writes something like `crate::m`, then when the user just wrote `m` the link should not be generated (which would make the text of the lint consistent) or the link could be generated but then the warning should say the link may still be generated.\r\n\r\nOn the other hand, if the intended behavior is that `m` still works as-is like in previous versions, then it is a false positive and a regression on the lint.", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/106142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/106142/timeline", "performed_via_github_app": null, "state_reason": "completed"}