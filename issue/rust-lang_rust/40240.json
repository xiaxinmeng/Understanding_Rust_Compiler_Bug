{"url": "https://api.github.com/repos/rust-lang/rust/issues/40240", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40240/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40240/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40240/events", "html_url": "https://github.com/rust-lang/rust/issues/40240", "id": 211752768, "node_id": "MDU6SXNzdWUyMTE3NTI3Njg=", "number": 40240, "title": "Spurious failures in sccache", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 371266501, "node_id": "MDU6TGFiZWwzNzEyNjY1MDE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-spurious", "name": "A-spurious", "color": "f7e101", "default": false, "description": "Area: Spurious failures in builds (spuriously == for no apparent reason)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2017-03-03T17:32:04Z", "updated_at": "2017-08-09T22:07:34Z", "closed_at": "2017-04-29T11:35:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "# Outstandling failures:\r\n\r\n### Failed to spawn child broken pipe\r\n\r\n~~maybe fixed in https://github.com/rust-lang/rust/pull/40809?~~\r\n\r\n* https://travis-ci.org/rust-lang/rust/jobs/210449425\r\n* https://travis-ci.org/rust-lang/rust/jobs/210356090\r\n* https://travis-ci.org/rust-lang/rust/jobs/210674231\r\n* https://travis-ci.org/rust-lang/rust/jobs/217614672\r\n* https://travis-ci.org/rust-lang/rust/jobs/217513855\r\n* https://travis-ci.org/rust-lang/rust/jobs/217609418\r\n\r\n```\r\nerror: failed to execute compile\r\ncaused by: failed to spawn child\r\ncaused by: Broken pipe (os error 32)\r\nmake[3]: *** [bin/llvm-config] Error 2\r\n```\r\n\r\nNotes:\r\n\r\n* ~~no theories~~ maybe https://github.com/carllerche/mio/issues/582?\r\n* Always OSX so far\r\n* Both 32 and 64 bit \r\n* presumably happens [here](https://github.com/mozilla/sccache/blob/5c77c337356951cb7bde5c40d6845f459dfc8312/src/compiler/compiler.rs#L639-L645)\r\n\r\n\r\n### Error 254\r\n\r\nSuspected bug in sccache. Hidden by https://github.com/mozilla/sccache/pull/82 by accident. Sccache update in https://github.com/rust-lang/rust/pull/40676\r\n\r\nmaybe fixed in https://github.com/rust-lang/rust/pull/40809?\r\n\r\n* https://travis-ci.org/rust-lang/rust/jobs/208053065\r\n* https://travis-ci.org/rust-lang/rust/jobs/208060953\r\n* https://travis-ci.org/rust-lang/rust/jobs/209158635\r\n* https://travis-ci.org/rust-lang/rust/jobs/209740993\r\n* https://travis-ci.org/rust-lang/rust/jobs/213667930\r\n\r\nnotes:\r\n\r\n* [One job](https://travis-ci.org/rust-lang/rust/jobs/213667930) failed nul bytes in env, args, or program passed to `Command` when creating preprocessor. This seems crazy. Memory corruption?\r\n* OSX or Linux so far, no Windows.\r\n* Most indicate just one compilation failing, the last log indicates the entire server crashed w/ a segfault or something\r\n\r\n\r\n\r\n\r\n# Fixed failures\r\n\r\n\r\n### Unexpected EOF\r\n\r\nHoping to be fixed by https://github.com/mozilla/sccache/pull/79\r\n\r\n* https://travis-ci.org/rust-lang/rust/jobs/210484803\r\n* https://travis-ci.org/rust-lang/rust/jobs/207425298\r\n* https://travis-ci.org/rust-lang/rust/jobs/207606309\r\n* https://travis-ci.org/rust-lang/rust/jobs/208643512\r\n* https://travis-ci.org/rust-lang/rust/jobs/208893289\r\n* https://travis-ci.org/rust-lang/rust/jobs/208849166\r\n* https://travis-ci.org/rust-lang/rust/jobs/209162867\r\n* https://travis-ci.org/rust-lang/rust/jobs/210063204\r\n* https://travis-ci.org/rust-lang/rust/jobs/210145670\r\n* https://travis-ci.org/rust-lang/rust/jobs/210484803\r\n* https://travis-ci.org/rust-lang/rust/jobs/210685018\r\n* https://travis-ci.org/rust-lang/rust/jobs/211605305\r\n* https://travis-ci.org/rust-lang/rust/jobs/211341835\r\n* https://travis-ci.org/rust-lang/rust/jobs/211214150\r\n* https://travis-ci.org/rust-lang/rust/jobs/211758389\r\n* https://travis-ci.org/rust-lang/rust/jobs/212004583\r\n\r\n```\r\nerror: failed to execute compile\r\ncaused by: error reading compile response from server\r\ncaused by: IoError(Error { repr: Custom(Custom { kind: Other, error: StringError(\"unexpected EOF\") }) })\r\ncaused by: unexpected EOF\r\nmake[3]: *** [tools/llvm-readobj/CMakeFiles/llvm-readobj.dir/ELFDumper.cpp.o] Error 2\r\n```\r\n\r\n### Forcibly closed by remote host\r\n\r\nSuspected fixed in https://github.com/mozilla/sccache/commit/5f6932b6b6fc22528f7cb0a02385b02b80ca7fef\r\n\r\nPR sent in https://github.com/rust-lang/rust/pull/40676\r\n\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2344/job/6ky8r85djtr9l202\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2366/job/xnj3xxp6plfqig8p\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2368/job/4x9x6h3an4cb331c\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2377/job/e0s6p5yx4abub3hw\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2474/job/8x4h54hyj4uh16td\r\n\r\n```\r\nerror: failed to execute compile\r\ncaused by: Failed to send data to or receive data from server\r\ncaused by: IoError(Error { reprError { : Os { code: 10054repr: Os { code: 10054, message: \"An existing connection was forcibly closed by the remote host.\" } })\r\n```\r\n\r\nnotes:\r\n\r\n* Only windows so far\r\n* Both 32 and 64 bit\r\n* Ignore segfaults, they're likely https://github.com/mozilla/sccache/pull/83\r\n* Both beginning and end of the build\r\n* appears that the server process is crashing\r\n* suspect, crossbeam segfaulting (there are known segfaults in there)\r\n\r\n### Wedged in build logs\r\n\r\nwedged in mio, likely fixed in https://github.com/rust-lang/rust/pull/40809\r\n\r\n* https://travis-ci.org/rust-lang/rust/jobs/214641046\r\n* https://travis-ci.org/rust-lang/rust/jobs/214659698\r\n\r\n\r\n# Errors not at the fault of sccache\r\n\r\n### ar.exe/ranlib errors\r\n\r\nMore tracked at https://github.com/rust-lang/rust/issues/40546 suspected to be unrelated to sccache and instead related to MinGW makefiles (and how they're not always the best...)\r\n\r\nHoping to be fixed by https://github.com/rust-lang/rust/pull/40548\r\n\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2279/job/28y2keij5k2nggbm - ranlib file format not recognized\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2286/job/9f765q3opo03djpo - ar.exe no such file or directory\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2305/job/k56s0ybh90dbtl0j - ar.exe unable to rename\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2314/job/4u931mk93qpx78e3 - ar.exe unable to rename\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2325/job/s8x6tfi1hs2tfl48 - ar.exe permission denied\r\n* https://ci.appveyor.com/project/rust-lang/rust/build/1.0.2397/job/xmn5g0alr50n86uv - ar.exe permission denied", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40240/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40240/timeline", "performed_via_github_app": null, "state_reason": "completed"}