{"url": "https://api.github.com/repos/rust-lang/rust/issues/45351", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45351/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45351/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45351/events", "html_url": "https://github.com/rust-lang/rust/issues/45351", "id": 266334036, "node_id": "MDU6SXNzdWUyNjYzMzQwMzY=", "number": 45351, "title": "LLVM assert with SIMD and Emscripten", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 509440702, "node_id": "MDU6TGFiZWw1MDk0NDA3MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-asmjs", "name": "O-asmjs", "color": "6e6ec0", "default": false, "description": "Target: asm.js - http://asmjs.org/"}, {"id": 631737389, "node_id": "MDU6TGFiZWw2MzE3MzczODk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-simd", "name": "A-simd", "color": "f7e101", "default": false, "description": "Area: SIMD (Single Instruction Multiple Data)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-18T01:45:21Z", "updated_at": "2020-01-10T00:41:11Z", "closed_at": "2020-01-10T00:41:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Fails with:\r\n\r\n```\r\n            %21 = trunc <4 x i32> %_93.12.vec.insert.i to <4 x i8>\r\n          LLVM ERROR: invalid vector instr\r\n```\r\n\r\nfull error:\r\n\r\n```\r\nfailures:\r\n\r\n---- [run-pass] run-pass/simd-intrinsic-generic-cast.rs stdout ----\r\n\t\r\nerror: compilation failed!\r\nstatus: exit code: 101\r\ncommand: \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc\" \"/checkout/src/test/run-pass/simd-intrinsic-generic-cast.rs\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass\" \"--target=asmjs-unknown-emscripten\" \"-C\" \"prefer-dynamic\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.stage2-asmjs-unknown-emscripten.js\" \"-Crpath\" \"-O\" \"-Lnative=/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.stage2-asmjs-unknown-emscripten.run-pass.libaux\"\r\nstdout:\r\n------------------------------------------\r\n\r\n------------------------------------------\r\nstderr:\r\n------------------------------------------\r\nerror: linking with `emcc` failed: exit code: 1\r\n  |\r\n  = note: \"emcc\" \"-s\" \"DISABLE_EXCEPTION_CATCHING=0\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.simd_intrinsic_generic_cast0.rust-cgu.o\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.stage2-asmjs-unknown-emscripten.js\" \"-s\" \"EXPORTED_FUNCTIONS=[\\\"_main\\\",\\\"___rdl_grow_in_place\\\",\\\"___rdl_shrink_in_place\\\",\\\"___rdl_alloc_excess\\\",\\\"___rdl_alloc\\\",\\\"___rdl_oom\\\",\\\"___rdl_usable_size\\\",\\\"___rdl_dealloc\\\",\\\"___rdl_realloc_excess\\\",\\\"___rdl_realloc\\\",\\\"___rdl_alloc_zeroed\\\",\\\"_rust_eh_personality\\\"]\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.crate.allocator.rust-cgu.o\" \"-O2\" \"--memory-init-file\" \"0\" \"-g0\" \"-s\" \"DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass\" \"-L\" \"/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/simd-intrinsic-generic-cast.stage2-asmjs-unknown-emscripten.run-pass.libaux\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libtest-7174f69942758dfc.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libterm-b41696b9a2882d36.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libgetopts-e55773ea6141a812.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libstd-5e8ebc384e5dfd82.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libpanic_unwind-368647e9b9ca3b39.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libunwind-eda6aedbad712bc0.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc_system-67992b04c9027e70.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liblibc-bdd38e4620ffab1c.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc-c15d9e20191e711b.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libstd_unicode-b3230a4723442795.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/librand-efc56d5e4c2b1ee8.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcore-3181dd9e46400ebd.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcompiler_builtins-fa8533728d55e42b.rlib\" \"-l\" \"c\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\"\r\n  = note: INFO:root:generating system asset: is_vanilla.txt... (this will be cached in \"/home/user/.emscripten_cache/is_vanilla.txt\" for subsequent builds)\r\n          INFO:root: - ok\r\n          INFO:root:(Emscripten: Running sanity checks)\r\n          WARNING:root:java does not seem to exist, required for closure compiler, which is optional (define JAVA in /emsdk-portable/.emscripten if you want it)\r\n          WARNING:root:closure compiler will not be available\r\n          INFO:root:generating system library: libc.bc... (this will be cached in \"/home/user/.emscripten_cache/asmjs/libc.bc\" for subsequent builds)\r\n          INFO:root: - ok\r\n          INFO:root:generating system library: dlmalloc.bc... (this will be cached in \"/home/user/.emscripten_cache/asmjs/dlmalloc.bc\" for subsequent builds)\r\n          INFO:root: - ok\r\n            %21 = trunc <4 x i32> %_93.12.vec.insert.i to <4 x i8>\r\n          LLVM ERROR: invalid vector instr\r\n          Traceback (most recent call last):\r\n            File \"/emsdk-portable/emscripten/1.37.13//emcc\", line 13, in <module>\r\n              emcc.run()\r\n            File \"/emsdk-portable/emscripten/1.37.13/emcc.py\", line 1526, in run\r\n              final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)\r\n            File \"/emsdk-portable/emscripten/1.37.13/tools/shared.py\", line 1963, in emscripten\r\n              call_emscripten(cmdline)\r\n            File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2190, in _main\r\n              temp_files.run_and_clean(lambda: main(\r\n            File \"/emsdk-portable/emscripten/1.37.13/tools/tempfiles.py\", line 78, in run_and_clean\r\n              return func()\r\n            File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2195, in <lambda>\r\n              DEBUG=DEBUG,\r\n            File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2095, in main\r\n              temp_files=temp_files, DEBUG=DEBUG)\r\n            File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 93, in emscript\r\n              backend_output = compile_js(infile, settings, temp_files, DEBUG)\r\n            File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 127, in compile_js\r\n              backend_output = open(temp_js).read()\r\n          IOError: [Errno 2] No such file or directory: '/tmp/tmpVE4wuP.4.js'\r\n          \r\n\r\nerror: aborting due to previous error\r\n\r\n\r\n------------------------------------------\r\n\r\nthread '[run-pass] run-pass/simd-intrinsic-generic-cast.rs' panicked at 'explicit panic', /checkout/src/tools/compiletest/src/runtest.rs:2478:8\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\n\r\nfailures:\r\n    [run-pass] run-pass/simd-intrinsic-generic-cast.rs\r\n\r\ntest result: FAILED. 0 passed; 1 failed; 2792 ignored; 0 measured; 0 filtered out\r\n```", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45351/timeline", "performed_via_github_app": null, "state_reason": "completed"}