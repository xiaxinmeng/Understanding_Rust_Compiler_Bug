{"url": "https://api.github.com/repos/rust-lang/rust/issues/17976", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17976/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17976/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17976/events", "html_url": "https://github.com/rust-lang/rust/issues/17976", "id": 45586067, "node_id": "MDU6SXNzdWU0NTU4NjA2Nw==", "number": 17976, "title": "SIMD floating point calculations will not match x86 results in many cases", "user": {"login": "Ryman", "id": 994978, "node_id": "MDQ6VXNlcjk5NDk3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/994978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ryman", "html_url": "https://github.com/Ryman", "followers_url": "https://api.github.com/users/Ryman/followers", "following_url": "https://api.github.com/users/Ryman/following{/other_user}", "gists_url": "https://api.github.com/users/Ryman/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ryman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ryman/subscriptions", "organizations_url": "https://api.github.com/users/Ryman/orgs", "repos_url": "https://api.github.com/users/Ryman/repos", "events_url": "https://api.github.com/users/Ryman/events{/privacy}", "received_events_url": "https://api.github.com/users/Ryman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-10-12T16:54:21Z", "updated_at": "2017-02-07T20:32:51Z", "closed_at": "2017-02-07T20:06:54Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I feel this is expected behaviour, but I ran into this when debugging the mandelbrot benchmark for x86.\n\nWhen compiling on x86 it's choosing to use x87 for floating point calculations rather than sse, which leads to 80bit intermediates which leads to diverging results. \n\nIt will work and get the same results for x86 and x64 if we pass `-C target-feature=+sse2` to rustc during compilation as a workaround but obviously this doesn't help if the target doesn't support sse2. Perhaps there's a better flag to use here?\n\nEither way, I think we should call this out in the docs as it could be a real pain for end users if they need deterministic calculations.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17976/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17976/timeline", "performed_via_github_app": null, "state_reason": "completed"}