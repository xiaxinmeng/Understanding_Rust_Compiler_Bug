{"url": "https://api.github.com/repos/rust-lang/rust/issues/32782", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32782/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32782/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32782/events", "html_url": "https://github.com/rust-lang/rust/issues/32782", "id": 146461512, "node_id": "MDU6SXNzdWUxNDY0NjE1MTI=", "number": 32782, "title": "Attributes on macro-generated macro invocations are not feature-gate-checked", "user": {"login": "LeoTestard", "id": 907750, "node_id": "MDQ6VXNlcjkwNzc1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/907750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeoTestard", "html_url": "https://github.com/LeoTestard", "followers_url": "https://api.github.com/users/LeoTestard/followers", "following_url": "https://api.github.com/users/LeoTestard/following{/other_user}", "gists_url": "https://api.github.com/users/LeoTestard/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeoTestard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeoTestard/subscriptions", "organizations_url": "https://api.github.com/users/LeoTestard/orgs", "repos_url": "https://api.github.com/users/LeoTestard/repos", "events_url": "https://api.github.com/users/LeoTestard/events{/privacy}", "received_events_url": "https://api.github.com/users/LeoTestard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-04-06T23:09:24Z", "updated_at": "2016-04-28T04:52:48Z", "closed_at": "2016-04-28T04:52:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There are currently two phases of feature-gate checking: one before and one after macro expansion. The first one can check attributes on macro invocations that are removed by expansion, and the second one can check attributes on items generated by macro expansion. The thing is that items generated by macro expansion which are themselves macro invocations are not checked:\n\n``` rust\nmacro_rules! bar (\n    () => ()\n);\n\nmacro_rules! foo (\n    () => (\n        #[allow_internal_unstable]\n        bar!();\n    );\n);\n\nfoo!();\n```\n\nThis compiles on nightly. I've got an incoming PR that fixes this, along with #32648.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32782/timeline", "performed_via_github_app": null, "state_reason": "completed"}