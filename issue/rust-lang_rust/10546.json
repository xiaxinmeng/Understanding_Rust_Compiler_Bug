{"url": "https://api.github.com/repos/rust-lang/rust/issues/10546", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10546/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10546/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10546/events", "html_url": "https://github.com/rust-lang/rust/issues/10546", "id": 22833045, "node_id": "MDU6SXNzdWUyMjgzMzA0NQ==", "number": 10546, "title": "cfg: composing/nested and+not does not work", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234948, "node_id": "MDU6TGFiZWwyMzQ5NDg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-attributes", "name": "A-attributes", "color": "f7e101", "default": false, "description": "Area: #[attributes(..)]"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-11-18T13:03:53Z", "updated_at": "2013-11-18T13:07:33Z", "closed_at": "2013-11-18T13:07:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It is hard (maybe impossible) to compile certain combinations of cfg flags.\nE.g.: I believe the following should always compile, for any choice of `a` and `b` cfg switches:\n\n``` rust\n#[cfg(and(not(a),not(b)))]\nfn f() { println!(\"Got it\"); }\n\n#[cfg(a)]\nfn f() { println!(\"in a\"); }\n\n#[cfg(b)]\nfn f() { println!(\"in b\"); }\n\nfn main() {\n    f();\n}\n```\n\nBut currently you get:\n\n```\n% rustc d.rs\nd.rs:11:4: 11:5 error: unresolved name `f`.\nd.rs:11     f();\n            ^\nerror: aborting due to previous error\ntask 'rustc' failed at 'explicit failure', /Users/fklock/Dev/Mozilla/rust.git/src/libsyntax/diagnostic.rs:101\ntask '<main>' failed at 'explicit failure', /Users/fklock/Dev/Mozilla/rust.git/src/librustc/lib.rs:396\n```\n\nI believe this is because our current `cfg` implementation is largely just a hack, rather than a proper expression evaluator.  See also #2119.\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10546/timeline", "performed_via_github_app": null, "state_reason": "completed"}