{"url": "https://api.github.com/repos/rust-lang/rust/issues/75542", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/75542/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/75542/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/75542/events", "html_url": "https://github.com/rust-lang/rust/issues/75542", "id": 679450118, "node_id": "MDU6SXNzdWU2Nzk0NTAxMTg=", "number": 75542, "title": "Expotential compile time with recursive trait bounds", "user": {"login": "weiznich", "id": 1674512, "node_id": "MDQ6VXNlcjE2NzQ1MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1674512?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weiznich", "html_url": "https://github.com/weiznich", "followers_url": "https://api.github.com/users/weiznich/followers", "following_url": "https://api.github.com/users/weiznich/following{/other_user}", "gists_url": "https://api.github.com/users/weiznich/gists{/gist_id}", "starred_url": "https://api.github.com/users/weiznich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weiznich/subscriptions", "organizations_url": "https://api.github.com/users/weiznich/orgs", "repos_url": "https://api.github.com/users/weiznich/repos", "events_url": "https://api.github.com/users/weiznich/events{/privacy}", "received_events_url": "https://api.github.com/users/weiznich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 13836860, "node_id": "MDU6TGFiZWwxMzgzNjg2MA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-traits", "name": "A-traits", "color": "f7e101", "default": false, "description": "Area: Trait system"}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-08-14T23:30:33Z", "updated_at": "2020-08-17T08:07:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nWhile developing diesel we've hit a surprising increase in compile time caused by our trait impls for tuples. See https://github.com/diesel-rs/diesel/issues/2480 for details. I've extracted a somewhat minimal example [here](https://gist.github.com/rust-play/f628be0a9405ef11c752ddea91f2c5af). There is an option to control the tuple size up to which traits should be implemented in line [861](https://gist.github.com/rust-play/f628be0a9405ef11c752ddea91f2c5af#file-playground-rs-L861). For a size of 16 the compilation of the example succeeds in less then 2 seconds using the rust-playground + the current stable compiler. For a tuple size > 20 the playground is terminated. (Diesel takes ~30s to build while implementing traits for tuples up to 16 elements, and 17 minutes while implementing traits for tuples up to 32 elements for my local setup).\r\n\r\nI suspect that this is caused by the combination of a having a [recursive trait bound here](https://gist.github.com/rust-play/f628be0a9405ef11c752ddea91f2c5af#file-playground-rs-L91-L94) + enforcing that bound for each tuple size [here](https://gist.github.com/rust-play/f628be0a9405ef11c752ddea91f2c5af#file-playground-rs-L80). Diesel itself has not only one trait that requires `Self: SqlType`, but probably the problem is increased by that.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/75542/reactions", "total_count": 3, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/75542/timeline", "performed_via_github_app": null, "state_reason": null}