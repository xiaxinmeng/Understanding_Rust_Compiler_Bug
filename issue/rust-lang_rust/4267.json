{"url": "https://api.github.com/repos/rust-lang/rust/issues/4267", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/4267/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/4267/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/4267/events", "html_url": "https://github.com/rust-lang/rust/issues/4267", "id": 9492631, "node_id": "MDU6SXNzdWU5NDkyNjMx", "number": 4267, "title": "ICE on destructuring", "user": {"login": "lucian1900", "id": 101894, "node_id": "MDQ6VXNlcjEwMTg5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/101894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucian1900", "html_url": "https://github.com/lucian1900", "followers_url": "https://api.github.com/users/lucian1900/followers", "following_url": "https://api.github.com/users/lucian1900/following{/other_user}", "gists_url": "https://api.github.com/users/lucian1900/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucian1900/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucian1900/subscriptions", "organizations_url": "https://api.github.com/users/lucian1900/orgs", "repos_url": "https://api.github.com/users/lucian1900/repos", "events_url": "https://api.github.com/users/lucian1900/events{/privacy}", "received_events_url": "https://api.github.com/users/lucian1900/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/9", "html_url": "https://github.com/rust-lang/rust/milestone/9", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/9/labels", "id": 194126, "node_id": "MDk6TWlsZXN0b25lMTk0MTI2", "number": 9, "title": "0.6", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 203, "state": "closed", "created_at": "2012-10-11T18:15:24Z", "updated_at": "2015-01-21T01:43:22Z", "due_on": "2013-03-25T07:00:00Z", "closed_at": "2013-04-02T18:27:52Z"}, "comments": 3, "created_at": "2012-12-23T19:26:47Z", "updated_at": "2013-03-21T19:04:03Z", "closed_at": "2013-03-21T19:04:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to compile https://github.com/lucian1900/persistent/blob/d6e8d53a1f5207bd9f33121b9bb20f2bb29a9feb/persistent.rs for testing, this happens:\n\n```\n$ RUST_LOG=rustc=0,::rt::backtrace rustc --test persistent.rs \npersistent.rs:145:11: 148:31 error: mismatched types: expected `@PersistentVector` but found `@PersistentVector<int>` (expected a type with 0 type params but found one with 1 type params)\npersistent.rs:145     assert(match two {\npersistent.rs:146         @Full(leaves) => leaves,\npersistent.rs:147         _ => @[],\npersistent.rs:148     } == @[@Leaf(x), @Leaf(y)]);\nrust: task failed at 'Assertion len(v1) == len(v2) failed', /build/buildd/rust-0.4/src/rustc/rustc.rc:1\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f8731ec87bd]\n/usr/bin/../lib/librustrt.so(+0x323fd)[0x7f8731ee03fd]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f8731ecb0a8]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33a5af)[0x7f873244b5af]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33537f)[0x7f873244637f]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x3333af)[0x7f87324443af]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x332d47)[0x7f8732443d47]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33240e)[0x7f873244340e]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33a834)[0x7f873244b834]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33537f)[0x7f873244637f]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x3333af)[0x7f87324443af]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x332d47)[0x7f8732443d47]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33240e)[0x7f873244340e]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33c90b)[0x7f873244d90b]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33ef15)[0x7f873244ff15]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33f526)[0x7f8732450526]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x6899a0)[0x7f873279a9a0]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x33f6da)[0x7f87324506da]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x37e06d)[0x7f873248f06d]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x37b6f3)[0x7f873248c6f3]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x378f5a)[0x7f8732489f5a]\n/usr/bin/../lib/libsyntax-84efebcb12c867a2-0.4.so(+0xad84d)[0x7f8732c2284d]\n/usr/bin/../lib/libsyntax-84efebcb12c867a2-0.4.so(+0xad6b4)[0x7f8732c226b4]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(_ZN6middle6typeck11check_crate17_586991a76ae1b8af3_04E+0xd49)[0x7f8732569369]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(_ZN6driver6driver12compile_upto17_59b1863f8cf68bb13_04E+0x1649)[0x7f873276fd19]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(+0x6899a0)[0x7f873279a9a0]\n/usr/bin/../lib/librustc-c84825241471686d-0.4.so(_ZN6driver6driver13compile_input16_7610df88918688e3_04E+0xbd)[0x7f873277301d]\nrustc[0x408f61]\nrustc[0x4122d4]\nrustc[0x40e753]\nrustc[0x40d40c]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x758ff)[0x7f87334b38ff]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb51d0)[0x7f87334f31d0]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f8731ec8f64]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /build/buildd/rust-0.4/src/rustc/driver/rustc.rs:275\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f8731ec87bd]\n/usr/bin/../lib/librustrt.so(+0x323fd)[0x7f8731ee03fd]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f8731ecb0a8]\nrustc(_rust_main+0x838)[0x411ae8]\nrustc[0x4122d4]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f8731ec8f64]\nrust: domain main @0x1d0b200 root task failed\nrust: task failed at 'killed', /build/buildd/rust-0.4/src/libcore/task.rs:663\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f8731ec87bd]\n/usr/bin/../lib/librustrt.so(+0x323fd)[0x7f8731ee03fd]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x1a8)[0x7f8731ecb0a8]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(_ZN4task5yield16_9531951b4f79f8b3_04E+0xbd)[0x7f873349cecd]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x90336)[0x7f87334ce336]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(_ZN7private11weaken_task16_cf742a1b771015c3_04E+0xd2)[0x7f87334ce172]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x9006b)[0x7f87334ce06b]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb51d0)[0x7f87334f31d0]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x8f3c0)[0x7f87334cd3c0]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x8ed5e)[0x7f87334ccd5e]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x8e3c6)[0x7f87334cc3c6]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x758ff)[0x7f87334b38ff]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb51d0)[0x7f87334f31d0]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f8731ec8f64]\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/4267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/4267/timeline", "performed_via_github_app": null, "state_reason": "completed"}