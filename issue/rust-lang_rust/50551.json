{"url": "https://api.github.com/repos/rust-lang/rust/issues/50551", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50551/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50551/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50551/events", "html_url": "https://github.com/rust-lang/rust/issues/50551", "id": 321398176, "node_id": "MDU6SXNzdWUzMjEzOTgxNzY=", "number": 50551, "title": "Coherence rules are not consistent when applied to auto traits", "user": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 13836860, "node_id": "MDU6TGFiZWwxMzgzNjg2MA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-traits", "name": "A-traits", "color": "f7e101", "default": false, "description": "Area: Trait system"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-09T01:18:33Z", "updated_at": "2019-05-07T21:48:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The coherence rules which allow blanket trait implementations to coexist with more specific impls are not consistent when applied to normal traits and auto traits. An example is provided below. If this is expected behavior, I could not find it documented anywhere.\r\n\r\nThe same error occurs on both stable and nightly compilers.\r\n\r\n```rust\r\n// `Test` implements neither `Clone` nor `Send`.\r\nstruct Test {\r\n    ptr: *mut u8, \r\n}\r\n\r\ntrait NotSend {}\r\nimpl<T> NotSend for T where T: Send {}\r\n\r\ntrait NotClone {}\r\nimpl<T> NotClone for T where T: Clone {}\r\n\r\n// Coherence rules allow `Test` to have its own implementation of `NotClone`.\r\nimpl NotClone for Test {}\r\n\r\n// However, the same logic does not apply to `Send`. This results in:\r\n// error[E0119]: conflicting implementations of trait `NotSend` for type `Test`.\r\n// impl NotSend for Test {}\r\n```\r\n\r\n[playground link](https://play.rust-lang.org/?gist=100507f67e2f9832e355d7da76af3e4a&version=nightly&mode=debug)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50551/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50551/timeline", "performed_via_github_app": null, "state_reason": null}