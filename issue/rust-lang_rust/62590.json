{"url": "https://api.github.com/repos/rust-lang/rust/issues/62590", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62590/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62590/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62590/events", "html_url": "https://github.com/rust-lang/rust/issues/62590", "id": 466991976, "node_id": "MDU6SXNzdWU0NjY5OTE5NzY=", "number": 62590, "title": "Regression with macros in types on serde_derive", "user": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-11T16:26:36Z", "updated_at": "2019-07-11T16:29:36Z", "closed_at": "2019-07-11T16:29:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "serde_derive 0.0.94 compiles just fine with 2019-06-06's nightly, but is broken with 2019-06-11:\r\n\r\n```\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/internals/ast.rs:142:44\r\n    |\r\n142 |     variants: &'a Punctuated<syn::Variant, Token![,]>,\r\n    |                                            ^^^^^^^^^\r\n    |                                            |\r\n    |                                            unresolved import\r\n    |                                            help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n```\r\n\r\n\r\n<details>\r\n\r\n```\r\n[09:23:31] \u092eanishearth@noether ~/sand/serde_derive ^_^ \r\n$ cargo +nightly-2019-07-11 build\r\n   Compiling proc-macro2 v0.4.30\r\n   Compiling unicode-xid v0.1.0\r\n   Compiling syn v0.15.39\r\n   Compiling quote v0.6.12\r\n   Compiling serde_derive v1.0.94 (/home/manishearth/sand/serde_derive)\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/internals/ast.rs:142:44\r\n    |\r\n142 |     variants: &'a Punctuated<syn::Variant, Token![,]>,\r\n    |                                            ^^^^^^^^^\r\n    |                                            |\r\n    |                                            unresolved import\r\n    |                                            help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/internals/ast.rs:187:40\r\n    |\r\n187 |     fields: &'a Punctuated<syn::Field, Token![,]>,\r\n    |                                        ^^^^^^^^^\r\n    |                                        |\r\n    |                                        unresolved import\r\n    |                                        help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n    --> src/internals/attr.rs:1542:44\r\n     |\r\n1542 |     metas: &'a Punctuated<syn::NestedMeta, Token![,]>,\r\n     |                                            ^^^^^^^^^\r\n     |                                            |\r\n     |                                            unresolved import\r\n     |                                            help: a similar path exists: `syn::token`\r\n     |\r\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n    --> src/internals/attr.rs:1586:44\r\n     |\r\n1586 |     items: &'a Punctuated<syn::NestedMeta, Token![,]>,\r\n     |                                            ^^^^^^^^^\r\n     |                                            |\r\n     |                                            unresolved import\r\n     |                                            help: a similar path exists: `syn::token`\r\n     |\r\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n    --> src/internals/attr.rs:1594:44\r\n     |\r\n1594 |     items: &'a Punctuated<syn::NestedMeta, Token![,]>,\r\n     |                                            ^^^^^^^^^\r\n     |                                            |\r\n     |                                            unresolved import\r\n     |                                            help: a similar path exists: `syn::token`\r\n     |\r\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n    --> src/internals/attr.rs:1602:41\r\n     |\r\n1602 |     items: &Punctuated<syn::NestedMeta, Token![,]>,\r\n     |                                         ^^^^^^^^^\r\n     |                                         |\r\n     |                                         unresolved import\r\n     |                                         help: a similar path exists: `syn::token`\r\n     |\r\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n    --> src/internals/attr.rs:1702:56\r\n     |\r\n1702 |     struct BorrowedLifetimes(Punctuated<syn::Lifetime, Token![+]>);\r\n     |                                                        ^^^^^^^^^\r\n     |                                                        |\r\n     |                                                        unresolved import\r\n     |                                                        help: a similar path exists: `syn::token`\r\n     |\r\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/bound.rs:198:31\r\n    |\r\n198 |                 colon_token: <Token![:]>::default(),\r\n    |                               ^^^^^^^^^\r\n    |                               |\r\n    |                               unresolved import\r\n    |                               help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/bound.rs:232:27\r\n    |\r\n232 |             colon_token: <Token![:]>::default(),\r\n    |                           ^^^^^^^^^\r\n    |                           |\r\n    |                           unresolved import\r\n    |                           help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/bound.rs:289:36\r\n    |\r\n289 |                         lt_token: <Token![<]>::default(),\r\n    |                                    ^^^^^^^^^\r\n    |                                    |\r\n    |                                    unresolved import\r\n    |                                    help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n   --> src/bound.rs:309:36\r\n    |\r\n309 |                         gt_token: <Token![>]>::default(),\r\n    |                                    ^^^^^^^^^\r\n    |                                    |\r\n    |                                    unresolved import\r\n    |                                    help: a similar path exists: `syn::token`\r\n    |\r\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror[E0433]: failed to resolve: unresolved import\r\n  --> src/fragment.rs:58:18\r\n   |\r\n58 |                 <Token![,]>::default().to_tokens(out);\r\n   |                  ^^^^^^^^^\r\n   |                  |\r\n   |                  unresolved import\r\n   |                  help: a similar path exists: `syn::token`\r\n   |\r\n   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\r\n\r\nerror: aborting due to 12 previous errors\r\n\r\nFor more information about this error, try `rustc --explain E0433`.\r\nerror: Could not compile `serde_derive`.\r\n```\r\n</details>\r\n\r\nSomething weird is going on with that macro.\r\n\r\ncc @dtolnay @eddyb ", "closed_by": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62590/timeline", "performed_via_github_app": null, "state_reason": "completed"}