{"url": "https://api.github.com/repos/rust-lang/rust/issues/72515", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72515/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72515/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72515/events", "html_url": "https://github.com/rust-lang/rust/issues/72515", "id": 623746191, "node_id": "MDU6SXNzdWU2MjM3NDYxOTE=", "number": 72515, "title": "Clarify stages of MIR pipeline, and make MIR lints consistent", "user": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37234, "node_id": "MDU6TGFiZWwzNzIzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 256133398, "node_id": "MDU6TGFiZWwyNTYxMzMzOTg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-mir", "name": "A-mir", "color": "f7e101", "default": false, "description": "Area: Mid-level IR (MIR) - https://blog.rust-lang.org/2016/04/19/MIR.html"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-05-23T21:32:29Z", "updated_at": "2022-01-26T03:00:18Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The [`rustc_mir::transform`](https://github.com/rust-lang/rust/blob/master/src/librustc_mir/transform/mod.rs) module defines the pipeline of analysis passes and transformations that  run on the MIR after it is lowered but before it is passed to codegen. However, it's not always clear whether certain invariants apply to each stage of the pipeline. For example, some terminators (`FalseEdges`, `DropAndReplace`) are removed entirely and do not appear beyond a certain point and the `Return` terminator, which initially appears only once in the entire MIR body may appear multiple times after the `generator` transform.\r\n\r\nAdditionally, it can be hard to find the right place for new error-emitting passes like the lint in #72270 or #71824. Is there a point at which the MIR is no longer meant for analysis but only for codegen? Should these be part of a specific query? Finally, the names of the `mir_*` queries have lost their meaning over time: `mir_const` can probably be removed entirely, and `optimized_mir` and `promoted_mir` should probably be renamed to `mir_optimized` and `mir_promoted_fragments_optimized` respectively.\r\n\r\nI've listed quite a few issues above, but to resolve them I think we first need to figure out who the stakeholders are. Is there anyone who \"owns\" the current structure and has a clear idea of how things should look?", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72515/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72515/timeline", "performed_via_github_app": null, "state_reason": null}