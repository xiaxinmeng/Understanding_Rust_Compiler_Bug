{"url": "https://api.github.com/repos/rust-lang/rust/issues/76347", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/76347/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76347/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/76347/events", "html_url": "https://github.com/rust-lang/rust/issues/76347", "id": 693703065, "node_id": "MDU6SXNzdWU2OTM3MDMwNjU=", "number": 76347, "title": "No warning for an associated constant always hidden by an enum variant", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-09-04T21:56:05Z", "updated_at": "2021-06-21T18:57:05Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "To my great surprise, this compiles fine, with no warnings:\r\n```rust\r\npub enum Foo {\r\n    A(i32),\r\n}\r\nimpl Foo {\r\n    pub const A: Self = Foo::A(0);\r\n}\r\n```\r\n\r\nTrying to actually use that constant, however, doesn't work:\r\n```rust\r\npub fn demo() -> Foo {\r\n    Foo::A\r\n}\r\n```\r\nhttps://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=d1e7c140a60c78cc6ede62b677a74e5e\r\n```rust\r\nerror[E0308]: mismatched types\r\n --> src/lib.rs:9:5\r\n  |\r\n2 |     A(i32),\r\n  |     ------ fn(i32) -> Foo {Foo::A} defined here\r\n...\r\n8 | pub fn demo() -> Foo {\r\n  |                  --- expected `Foo` because of return type\r\n9 |     Foo::A\r\n  |     ^^^^^^ expected enum `Foo`, found fn item\r\n  |\r\n  = note: expected enum `Foo`\r\n          found fn item `fn(i32) -> Foo {Foo::A}`\r\nhelp: use parentheses to instantiate this tuple variant\r\n  |\r\n9 |     Foo::A(_)\r\n  |           ^^^\r\n```\r\n\r\nIf that constant is going to compile, it should probably at least be linted against.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/76347/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/76347/timeline", "performed_via_github_app": null, "state_reason": null}