{"url": "https://api.github.com/repos/rust-lang/rust/issues/29977", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29977/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29977/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29977/events", "html_url": "https://github.com/rust-lang/rust/issues/29977", "id": 118223284, "node_id": "MDU6SXNzdWUxMTgyMjMyODQ=", "number": 29977, "title": "compiler-rt fails to build on NetBSD", "user": {"login": "gandro", "id": 50564, "node_id": "MDQ6VXNlcjUwNTY0", "avatar_url": "https://avatars.githubusercontent.com/u/50564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gandro", "html_url": "https://github.com/gandro", "followers_url": "https://api.github.com/users/gandro/followers", "following_url": "https://api.github.com/users/gandro/following{/other_user}", "gists_url": "https://api.github.com/users/gandro/gists{/gist_id}", "starred_url": "https://api.github.com/users/gandro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gandro/subscriptions", "organizations_url": "https://api.github.com/users/gandro/orgs", "repos_url": "https://api.github.com/users/gandro/repos", "events_url": "https://api.github.com/users/gandro/events{/privacy}", "received_events_url": "https://api.github.com/users/gandro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 311417590, "node_id": "MDU6TGFiZWwzMTE0MTc1OTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-netbsd", "name": "O-netbsd", "color": "6e6ec0", "default": false, "description": "Operating system: NetBSD"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-21T21:55:01Z", "updated_at": "2017-06-25T17:55:57Z", "closed_at": "2017-06-25T17:55:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the compiler-rt update in PR #29478, `gcc_personality_v0.c` now includes the `unwind.h` header to deduplicate some type definitions (commit: https://github.com/rust-lang/compiler-rt/commit/5f0c79f722b6d2f9368c43af2308596c4a9d0b56) . \n\nThe `unwind.h` [header available in NetBSD](http://nxr.netbsd.org/xref/src/lib/libexecinfo/unwind.h?r=1.3) however does not provide all required definitions. Specifically, `_Unwind_Action` is absent in this header, leading to the following build failure:\n\n```\n.../rust/src/compiler-rt/lib/builtins/gcc_personality_v0.c:151:35: error: unknown type name '_Unwind_Action'\n__gcc_personality_v0(int version, _Unwind_Action actions,\n                                  ^\n```\n\nSide note: As far as I understand, NetBSD provides the above header only if the platform uses libgcc_eh (e.g. on amd64 using gcc, which is supported by Rust currently). Otherwise, LLVM's libunwind header is installed, which contains the required definitions.\n\nI'm not sure how to fix this. Should Rust's compiler-rt duplicate the type definitions again?\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29977/timeline", "performed_via_github_app": null, "state_reason": "completed"}