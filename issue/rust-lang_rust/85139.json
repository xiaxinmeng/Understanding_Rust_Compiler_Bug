{"url": "https://api.github.com/repos/rust-lang/rust/issues/85139", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/85139/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/85139/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/85139/events", "html_url": "https://github.com/rust-lang/rust/issues/85139", "id": 883665064, "node_id": "MDU6SXNzdWU4ODM2NjUwNjQ=", "number": 85139, "title": "Confusing error message when trying to call a method from an extension trait that does not apply", "user": {"login": "Darksonn", "id": 928074, "node_id": "MDQ6VXNlcjkyODA3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/928074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Darksonn", "html_url": "https://github.com/Darksonn", "followers_url": "https://api.github.com/users/Darksonn/followers", "following_url": "https://api.github.com/users/Darksonn/following{/other_user}", "gists_url": "https://api.github.com/users/Darksonn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Darksonn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Darksonn/subscriptions", "organizations_url": "https://api.github.com/users/Darksonn/orgs", "repos_url": "https://api.github.com/users/Darksonn/repos", "events_url": "https://api.github.com/users/Darksonn/events{/privacy}", "received_events_url": "https://api.github.com/users/Darksonn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-10T08:12:03Z", "updated_at": "2021-05-10T15:36:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Given the following code:\r\n\r\n```rust\r\ntrait MyTrait {\r\n    fn foo(&self);\r\n}\r\n\r\ntrait MyTraitExt {\r\n    fn foo2(&self);\r\n}\r\n\r\nimpl<T: MyTrait> MyTraitExt for T {\r\n    fn foo2(&self) {\r\n        self.foo();\r\n    }\r\n}\r\n\r\nstruct MyStruct;\r\n\r\nfn main() {\r\n    let a = MyStruct;\r\n    a.foo2();\r\n}\r\n```\r\n[playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=d76182e8fa4a827d945011cdfc149349)\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0599]: the method `foo2` exists for struct `MyStruct`, but its trait bounds were not satisfied\r\n  --> src/main.rs:20:7\r\n   |\r\n16 | struct MyStruct;\r\n   | ----------------\r\n   | |\r\n   | method `foo2` not found for this\r\n   | doesn't satisfy `MyStruct: MyTraitExt`\r\n   | doesn't satisfy `MyStruct: MyTrait`\r\n...\r\n20 |     a.foo2();\r\n   |       ^^^^ method cannot be called on `MyStruct` due to unsatisfied trait bounds\r\n   |\r\n   = note: the following trait bounds were not satisfied:\r\n           `MyStruct: MyTrait`\r\n           which is required by `MyStruct: MyTraitExt`\r\n```\r\n\r\nHowever if we consider a similar piece of code:\r\n```rust\r\ntrait MyTrait {\r\n    fn foo(&self);\r\n}\r\n\r\nstruct MyStruct;\r\n\r\nfn main() {\r\n    let a = MyStruct;\r\n    a.foo();\r\n}\r\n```\r\n[playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=841d36d7981b95f1358e3e873473904b)\r\n\r\nit produces a much better error:\r\n```\r\nerror[E0599]: no method named `foo` found for struct `MyStruct` in the current scope\r\n  --> src/main.rs:10:7\r\n   |\r\n6  | struct MyStruct;\r\n   | ---------------- method `foo` not found for this\r\n...\r\n10 |     a.foo();\r\n   |       ^^^ method not found in `MyStruct`\r\n   |\r\n   = help: items from traits can only be used if the trait is implemented and in scope\r\nnote: `MyTrait` defines an item `foo`, perhaps you need to implement it\r\n  --> src/main.rs:2:1\r\n   |\r\n2  | trait MyTrait {\r\n   | ^^^^^^^^^^^^^\r\n```\r\nIdeally the error should not suggest that the method exists. I came across this error when someone tried to call [`StreamExt::skip_while`][1] on a [`tokio::io::BufReader`][2]. In this case the compiler suggested that the method exists, but the trait bounds were not satisfied, however there is nothing you could have done in that person's project to make that call succeed. The `BufReader` type never implements `Stream`.\r\n\r\n[1]: https://docs.rs/tokio-stream/0.1/tokio_stream/trait.StreamExt.html#method.skip_while\r\n[2]: https://docs.rs/tokio/1/tokio/io/struct.BufReader.html", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/85139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/85139/timeline", "performed_via_github_app": null, "state_reason": null}