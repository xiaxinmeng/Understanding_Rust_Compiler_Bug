{"url": "https://api.github.com/repos/rust-lang/rust/issues/13662", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13662/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13662/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13662/events", "html_url": "https://github.com/rust-lang/rust/issues/13662", "id": 31910245, "node_id": "MDU6SXNzdWUzMTkxMDI0NQ==", "number": 13662, "title": "Task sits in recv forever and doesn't notice sender has failed", "user": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36953, "node_id": "MDU6TGFiZWwzNjk1Mw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-runtime", "name": "A-runtime", "color": "f7e101", "default": false, "description": "Area: std's runtime and \"pre-main\" init for handling backtraces, unwinds, stack overflows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-04-21T17:42:21Z", "updated_at": "2014-04-21T18:06:48Z", "closed_at": "2014-04-21T18:06:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried really hard to make some kind of minimal testcase, but I couldn't find one. There's a \"timer controller\" task in window.rs in https://github.com/jdm/servo/tree/unstoppabletask that sits waiting on recv calls in a loop, where the other end of the channel is inside the ScriptTask that ends up failing. When we eventually shutdown the green thread pool when closing the window, Servo hangs.\n\nTo reproduce, build that Servo tree, then run `./servo https://google.com`, then close the window when the I Tried star appears. Note how if you add a `return` inside the spawn for the timer controller task in `window.rs`, Servo shuts down without incident.\n", "closed_by": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13662/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13662/timeline", "performed_via_github_app": null, "state_reason": "completed"}