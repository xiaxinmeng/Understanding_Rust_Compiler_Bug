{"url": "https://api.github.com/repos/rust-lang/rust/issues/81659", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81659/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81659/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81659/events", "html_url": "https://github.com/rust-lang/rust/issues/81659", "id": 799112181, "node_id": "MDU6SXNzdWU3OTkxMTIxODE=", "number": 81659, "title": "Confusing diagnostics when pulling the same crate from different sources", "user": {"login": "andresovela", "id": 8990961, "node_id": "MDQ6VXNlcjg5OTA5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/8990961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andresovela", "html_url": "https://github.com/andresovela", "followers_url": "https://api.github.com/users/andresovela/followers", "following_url": "https://api.github.com/users/andresovela/following{/other_user}", "gists_url": "https://api.github.com/users/andresovela/gists{/gist_id}", "starred_url": "https://api.github.com/users/andresovela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andresovela/subscriptions", "organizations_url": "https://api.github.com/users/andresovela/orgs", "repos_url": "https://api.github.com/users/andresovela/repos", "events_url": "https://api.github.com/users/andresovela/events{/privacy}", "received_events_url": "https://api.github.com/users/andresovela/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596121013, "node_id": "MDU6TGFiZWwxNTk2MTIxMDEz", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-confusing", "name": "D-confusing", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error that should be reworked"}, {"id": 2150480426, "node_id": "MDU6TGFiZWwyMTUwNDgwNDI2", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-crate-version-mismatch", "name": "D-crate-version-mismatch", "color": "c9f7a3", "default": false, "description": "Errors caused be the use of two different crate versions."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-02-02T09:42:55Z", "updated_at": "2023-04-28T17:50:28Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "[Source thread in URLO](https://users.rust-lang.org/t/no-method-x-found-for-struct-and-compiler-bug/55026)\r\n\r\nI was working with a library crate that I forked to modify locally in my project. In the `Cargo.toml` of the binary I referenced my local copy of the modified library, but the `Cargo.toml` of the modified library still referenced the `crates.io` version.\r\n\r\n`cargo tree` output looks like this (truncated):\r\n\r\n```\r\n\u251c\u2500\u2500 display-interface v0.4.0 (/Users/andresovela/dev/rust/embedded/my-app/crates/display-interface)\r\n\u251c\u2500\u2500 display-interface-parallel-gpio v0.4.1 (/Users/andresovela/dev/rust/embedded/my-app/crates/display-interface/parallel-gpio)\r\n\u2502   \u251c\u2500\u2500 byte-slice-cast v0.3.5\r\n\u2502   \u251c\u2500\u2500 display-interface v0.4.0\r\n\u251c\u2500\u2500 ili9486 v0.1.0 (/Users/andresovela/dev/rust/embedded/my-app/crates/ili9486-rs)\r\n\u2502   \u251c\u2500\u2500 display-interface v0.4.0 (/Users/andresovela/dev/rust/embedded/my-app/crates/display-interface)\r\n\u2502   \u251c\u2500\u2500 display-interface-parallel-gpio v0.4.1 (/Users/andresovela/dev/rust/embedded/my-app/crates/display-interface/parallel-gpio) (*)\r\n```\r\n\r\nThe problem being that the `Cargo.toml` in `display-interface-parallel-gpio` was referencing the `crates.io` version of `display-interface` instead of my local copy.\r\n\r\nThis resulted in the compiler giving me the following error and warning:\r\n\r\n```\r\nerror[E0599]: no method named `send_commands` found for struct `PGPIO8BitInterface<nrf52832_hal::gpio::Pin<Output<PushPull>>, P0_28<Output<PushPull>>, P0_04<Output<PushPull>>>` in the current scope\r\n  --> src/main.rs:44:23\r\n   |\r\n44 |     ili9486_interface.send_commands(display_interface::DataFormat::U8(&data));\r\n   |                       ^^^^^^^^^^^^^ method not found in `PGPIO8BitInterface<nrf52832_hal::gpio::Pin<Output<PushPull>>, P0_28<Output<PushPull>>, P0_04<Output<PushPull>>>`\r\n   |\r\n   = help: items from traits can only be used if the trait is in scope\r\nhelp: the following trait is implemented but not in scope; perhaps add a `use` for it:\r\n   |\r\n4  | use display_interface::WriteOnlyDataCommand;\r\n   |\r\n\r\nwarning: unused import: `display_interface::WriteOnlyDataCommand`\r\n --> src/main.rs:4:5\r\n  |\r\n4 | use display_interface::WriteOnlyDataCommand;\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n```\r\n\r\nIt would have been much much better if the compiler noticed that there is conflict in crate versions somehow. Maybe if it detects that the trait name exists but it comes from a different crate or something? Unfortunately I'm not well versed in the compiler internals, but I think this case could be definitely improved.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81659/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81659/timeline", "performed_via_github_app": null, "state_reason": null}