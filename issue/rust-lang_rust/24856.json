{"url": "https://api.github.com/repos/rust-lang/rust/issues/24856", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24856/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24856/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24856/events", "html_url": "https://github.com/rust-lang/rust/issues/24856", "id": 71173119, "node_id": "MDU6SXNzdWU3MTE3MzExOQ==", "number": 24856, "title": "Memory leak with 1.0.0-beta.2 on Mac", "user": {"login": "abhi-bit", "id": 805754, "node_id": "MDQ6VXNlcjgwNTc1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/805754?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhi-bit", "html_url": "https://github.com/abhi-bit", "followers_url": "https://api.github.com/users/abhi-bit/followers", "following_url": "https://api.github.com/users/abhi-bit/following{/other_user}", "gists_url": "https://api.github.com/users/abhi-bit/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhi-bit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhi-bit/subscriptions", "organizations_url": "https://api.github.com/users/abhi-bit/orgs", "repos_url": "https://api.github.com/users/abhi-bit/repos", "events_url": "https://api.github.com/users/abhi-bit/events{/privacy}", "received_events_url": "https://api.github.com/users/abhi-bit/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-04-27T04:22:52Z", "updated_at": "2015-05-03T07:28:18Z", "closed_at": "2015-04-27T16:57:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "Sample code used:\n\n```\nfn create_box() {\n    let _function_box = Box::new(3i32);\n}\n\nfn main() {\n    let _box_int = Box::new(5i32);\n\n    {\n        let _short_lived_box = Box::new(4i32);\n    }\n\n    for _ in 0u32..1_000_000 {\n        create_box();\n    }\n}\n```\n\nValgrind output from Linux:\n\n```\n==72139== Memcheck, a memory error detector\n==72139== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==72139== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==72139== Command: ./raii\n==72139==\n==72139==\n==72139== HEAP SUMMARY:\n==72139==     in use at exit: 0 bytes in 0 blocks\n==72139==   total heap usage: 1,000,018 allocs, 1,000,018 frees, 8,001,360 bytes allocated\n==72139==\n==72139== All heap blocks were freed -- no leaks are possible\n==72139==\n==72139== For counts of detected and suppressed errors, rerun with: -v\n==72139== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n```\n\nValgrind output from Mac(Yosemite):\n\n```\n==2290== Memcheck, a memory error detector\n==2290== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==2290== Using Valgrind-3.11.0.SVN and LibVEX; rerun with -h for copyright info\n==2290== Command: ./raii\n==2290==\n--2290-- ./raii:\n--2290-- dSYM directory is missing; consider using --dsymutil=yes\n==2290==\n==2290== HEAP SUMMARY:\n==2290==     in use at exit: 35,270 bytes in 428 blocks\n==2290==   total heap usage: 1,000,517 allocs, 1,000,089 frees, 8,041,742 bytes\nallocated\n==2290==\n==2290== LEAK SUMMARY:\n==2290==    definitely lost: 16 bytes in 1 blocks\n==2290==    indirectly lost: 0 bytes in 0 blocks\n==2290==      possibly lost: 13,098 bytes in 118 blocks\n==2290==    still reachable: 22,156 bytes in 309 blocks\n==2290==         suppressed: 0 bytes in 0 blocks\n==2290== Rerun with --leak-check=full to see details of leaked memory\n==2290==\n==2290== For counts of detected and suppressed errors, rerun with: -v\n==2290== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n```\n\nPlease let me know if you aren't able to replicate this issue, I could pass valgrind output with `--leak-check=full --show-reachable=yes`\n\nRust Version info:\n\n```\nrustc 1.0.0-beta.2 (e9080ec39 2015-04-16) (built 2015-04-16)\nbinary: rustc\ncommit-hash: e9080ec39d9a44eb0773d648b348575b19f655e5\ncommit-date: 2015-04-16\nbuild-date: 2015-04-16\nhost: x86_64-apple-darwin\nrelease: 1.0.0-beta.2\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24856/timeline", "performed_via_github_app": null, "state_reason": "completed"}