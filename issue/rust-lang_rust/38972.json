{"url": "https://api.github.com/repos/rust-lang/rust/issues/38972", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38972/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38972/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38972/events", "html_url": "https://github.com/rust-lang/rust/issues/38972", "id": 199959960, "node_id": "MDU6SXNzdWUxOTk5NTk5NjA=", "number": 38972, "title": "Irrefutable while-let pattern in log4rs-rolling-file-0.2.0, Rust 1.16", "user": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}], "state": "closed", "locked": false, "assignee": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 23, "created_at": "2017-01-10T23:10:34Z", "updated_at": "2017-02-25T15:00:37Z", "closed_at": "2017-02-25T15:00:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**UPDATE:** The underlying problem has been solved (we believe), but there is not yet a regression test in the test base. [Here are some instructions for how to add a regression test.](https://github.com/rust-lang/rust/issues/38972#issuecomment-275690029)\r\n\r\n\r\n----\r\n\r\nhttps://github.com/sfackler/log4rs-rolling-file 1ce36b4301c86fa750134d35cb815d146c5836ee\r\n\r\nNot on stable/beta.\r\n\r\n```\r\n101 brian@ip-10-145-43-250:~\u27eb rustc +nightly -Vv\r\nrustc 1.16.0-nightly (47c8d9fdc 2017-01-08)\r\nbinary: rustc\r\ncommit-hash: 47c8d9fdcf2e6502cf4ca7d7f059fdc1a2810afa\r\ncommit-date: 2017-01-08\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.16.0-nightly\r\nLLVM version: 3.9\r\n```\r\n\r\n```\r\nbrian@ip-10-145-43-250:~/dev/log4rs-rolling-file\u27eb cargo +nightly test\r\n   Compiling crossbeam v0.2.10\r\n   Compiling serde v0.7.15\r\n   Compiling libc v0.2.19\r\n   Compiling traitobject v0.0.3\r\n   Compiling unsafe-any v0.4.1\r\n   Compiling typemap v0.3.3\r\n   Compiling winapi-build v0.1.1\r\n   Compiling yaml-rust v0.3.5\r\n   Compiling kernel32-sys v0.2.2\r\n   Compiling num-traits v0.1.36\r\n   Compiling log v0.3.6\r\n   Compiling winapi v0.2.8\r\n   Compiling time v0.1.35\r\n   Compiling num-integer v0.1.32\r\n   Compiling num-iter v0.1.32\r\n   Compiling rand v0.3.15\r\n   Compiling quick-error v1.1.0\r\n   Compiling num v0.1.36\r\n   Compiling chrono v0.2.25\r\n   Compiling humantime v0.1.3\r\n   Compiling serde_yaml v0.2.5\r\n   Compiling ordered-float v0.1.0\r\n   Compiling serde-value v0.2.1\r\n   Compiling antidote v1.0.0\r\n   Compiling tempdir v0.3.5\r\n   Compiling log4rs v0.4.8\r\n   Compiling log4rs-rolling-file v0.2.0 (file:///mnt2/dev/log4rs-rolling-file)\r\nerror[E0165]: irrefutable while-let pattern\r\n  --> src/policy/compound/roll/delete/config.rs:81:43\r\n   |\r\n81 |                                 while let Some(key) =\r\n   |                                           ^^^^^^^^^ irrefutable pattern\r\n\r\nerror: aborting due to previous error\r\n\r\nBuild failed, waiting for other jobs to finish...\r\nerror[E0165]: irrefutable while-let pattern\r\n  --> src/policy/compound/roll/delete/config.rs:81:43\r\n   |\r\n81 |                                 while let Some(key) =\r\n   |                                           ^^^^^^^^^ irrefutable pattern\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `log4rs-rolling-file`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nThis case is interesting. The loop is generated by serde and from inspection seems be a degenerate case. I can't tell if it was previously right or wrong.\r\n\r\ncc @sfackler @erickt \r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38972/timeline", "performed_via_github_app": null, "state_reason": "completed"}