{"url": "https://api.github.com/repos/rust-lang/rust/issues/2394", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2394/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2394/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2394/events", "html_url": "https://github.com/rust-lang/rust/issues/2394", "id": 4627098, "node_id": "MDU6SXNzdWU0NjI3MDk4", "number": 2394, "title": "RFC: Small closure syntax tweak", "user": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2012-05-17T16:29:19Z", "updated_at": "2012-05-22T15:59:21Z", "closed_at": "2012-05-22T15:59:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Might as well submit this as an RFC. I propose this syntactic tweak:\n\n```\nExpr ::== ... | Call | BlockLambda\nBlockLambda ::== '|' AbbreviatedArgs '|' '{' (Stmt ';')* Expr '}'\nCall ::== Primary '(' (Expr (',' Expr)*)? ')' (':' BlockLambda)?\n```\n\nIn other words, keep the closure syntax exactly the same, but move the sticks before the initial curly brace, and add a colon before the sticks in the Ruby-like call notation.\n\nThe reason is to keep the brace at the end of the line:\n\n```\nfor [ 1, 2, 3 ].each: |x| {\n    io::println(#fmt(x))\n}\n```\n\nAs opposed to (currently):\n\n```\nfor [ 1, 2, 3 ].each { |x|\n    io::println(#fmt(x))\n}\n```\n\nThe former looks more familiar to C programmers (and Ruby/Smalltalk programmers) and looks nicer to me. The reason is that the brace is at the end of the line, allowing the eye to follow control the same way the user does in C.\n\nThe other nice things about this syntax are forward-thinking: it might allow us to drop the braces in the future, and it might allow us to use the `Primary '{' ... '}'` syntactic space for other things.\n", "closed_by": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2394/timeline", "performed_via_github_app": null, "state_reason": "completed"}