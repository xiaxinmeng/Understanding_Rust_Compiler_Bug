{"url": "https://api.github.com/repos/rust-lang/rust/issues/18394", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18394/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18394/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18394/events", "html_url": "https://github.com/rust-lang/rust/issues/18394", "id": 47036044, "node_id": "MDU6SXNzdWU0NzAzNjA0NA==", "number": 18394, "title": "In libsyntax,  parser.bump_and_get  actually does \"get and then bump\"  (function name confusing)", "user": {"login": "allan-simon", "id": 213167, "node_id": "MDQ6VXNlcjIxMzE2Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/213167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allan-simon", "html_url": "https://github.com/allan-simon", "followers_url": "https://api.github.com/users/allan-simon/followers", "following_url": "https://api.github.com/users/allan-simon/following{/other_user}", "gists_url": "https://api.github.com/users/allan-simon/gists{/gist_id}", "starred_url": "https://api.github.com/users/allan-simon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allan-simon/subscriptions", "organizations_url": "https://api.github.com/users/allan-simon/orgs", "repos_url": "https://api.github.com/users/allan-simon/repos", "events_url": "https://api.github.com/users/allan-simon/events{/privacy}", "received_events_url": "https://api.github.com/users/allan-simon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37234, "node_id": "MDU6TGFiZWwzNzIzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-10-28T14:58:21Z", "updated_at": "2017-04-11T17:03:19Z", "closed_at": "2017-04-11T17:03:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "The name really get me confused because i  was doing  something like that \n\n(just a little context here,  in this piece of code , I use a custom lexer which pop token::EOF  also for a custom token ( `%>`  for  a  <% xxxx %>  templating  system ),  EOF was chosen because   \n1.  i needed to have a value in  the token::Token enum to be able to leverage the other parser functions \n2. it needed to be something that would not be parsed as part of an  expression \n3. something for which i will still have a way to make the difference between the actual token and my custom one  (for EOF  i still have  parser.reader.is_eof()  for me )\n\n```\n    match (\n        parser.parse_ident(),\n        parser.parse_fn_decl(true),\n        parser.bump_and_get()\n    ) {\n        (\n            functioname,\n            ref function_decl,\n            token::EOF,\n\n        ) if parser.token == token::EOF && !parser.reader.is_eof()  => {\n```\n\nand it was not working because  parser.token   == token::EOF  was actually  testing the NEXT token , because  bump_and_get   was actually  first  returning the last token (the one used in the match)  and AFTER moving the parser by one more token,  (the one stored in parser.token) \n\nanyway I've already been to fix my problem, so the problem is more about naming \n## my proposition\n- replace `bump_and_get`  by `get_and_bump`\n- maybe permit one more value in the   Token enum   a    token::USER_DEFINED(uint), so in order to help people writing syntax extension that superset rust, to still be able to use the normal parser, and just have to  implement their own custom lexer::Reader trait.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18394/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18394/timeline", "performed_via_github_app": null, "state_reason": "completed"}