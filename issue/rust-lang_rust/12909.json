{"url": "https://api.github.com/repos/rust-lang/rust/issues/12909", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12909/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12909/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12909/events", "html_url": "https://github.com/rust-lang/rust/issues/12909", "id": 29487025, "node_id": "MDU6SXNzdWUyOTQ4NzAyNQ==", "number": 12909, "title": "Partial type hint breakage", "user": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-03-15T06:12:29Z", "updated_at": "2014-10-15T04:07:32Z", "closed_at": "2014-10-15T04:07:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a minimal reproduction of something I saw when updating some of my projects to use `Vec`.\n\n``` rust\nuse std::vec_ng::Vec;\n\nfn main() {\n    let s = [1i, 2, 3];\n    let v: Vec<_> = s.iter().collect();\n}\n```\n\n```\ntest.rs:5:21: 5:39 error: cannot determine a type for this bounded type parameter: unconstrained type\ntest.rs:5     let v: Vec<_> = s.iter().collect();\n                              ^~~~~~~~~~~~~~~~~~\n```\n\nThis manifested in other ways in larger programs, ICEing in one case:\n\n```\n \u276f env RUST_LOG=std::rt::backtrace make                                                                                          [rust-postgres/master *$=]\nrustc -O --cfg ndebug -L submodules/rust-openssl/build/ -L submodules/rust-openssl/build/ -L submodules/rust-phf/build/ -L submodules/rust-phf/build/ -L submodules/rust-phf/build/ --dep-info build/postgres.d \\\n    --out-dir build src/lib.rs\nsrc/lib.rs:612:17: 612:42 error: the type of this value must be known in this context\nsrc/lib.rs:612                 PgUnknownType { oid, .. } =>\n                               ^~~~~~~~~~~~~~~~~~~~~~~~~\nsrc/lib.rs:622:19: 622:26 error: the type of this value must be known in this context\nsrc/lib.rs:622             match desc.ty {\n                                 ^~~~~~~\nerror: internal compiler error: no type for node 74135: local oid (id=74135) in fcx 0x7f639ffba890\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html\nnote: run with `RUST_LOG=std::rt::backtrace` for a backtrace\ntask 'rustc' failed at '~Any', /build/rust-git/src/rust/src/libsyntax/diagnostic.rs:123\nstack backtrace:\n   1:     0x7f63a9db6740 - rt::backtrace::imp::write::h584392c0aaf88f8agYb::v0.10.pre\n   2:     0x7f63a9d1b370 - rt::unwind::begin_unwind_inner::h39118a123ff832cbUzb::v0.10.pre\n   3:     0x7f63a80eac40 - <unknown>\n   4:     0x7f63a80eb820 - diagnostic::Handler::bug::h3def07bec623c5d9q3b::v0.10.pre\n   5:     0x7f63a5aa8580 - driver::session::Session_::bug::hc25e766e0c47b22fxyc::v0.10.pre\n   6:     0x7f63a5cc2f70 - middle::typeck::check::FnCtxt::node_ty::h3bb3bf7881b4ddbc4W6::v0.10.pre\n   7:     0x7f63a5ce35e0 - <unknown>\n   8:     0x7f63a5cea980 - <unknown>\n   9:     0x7f63a5cea980 - <unknown>\n  10:     0x7f63a5cea3e0 - <unknown>\n  11:     0x7f63a5ce8af0 - <unknown>\n  12:     0x7f63a5cea220 - <unknown>\n  13:     0x7f63a5ce8af0 - <unknown>\n  14:     0x7f63a5ce8af0 - <unknown>\n  15:     0x7f63a5cea220 - <unknown>\n  16:     0x7f63a5ce8af0 - <unknown>\n  17:     0x7f63a5ce8af0 - <unknown>\n  18:     0x7f63a5ce8800 - <unknown>\n  19:     0x7f63a5cea700 - <unknown>\n  20:     0x7f63a5ced8b0 - middle::typeck::check::writeback::resolve_type_vars_in_fn::h60db597186ed5046Vs1::v0.10.pre\n  21:     0x7f63a5d38ac0 - <unknown>\n  22:     0x7f63a5d424e0 - <unknown>\n  23:     0x7f63a5d33c20 - middle::typeck::check::check_item::h2dd1675c2d31364e1T5::v0.10.pre\n  24:     0x7f63a5d38910 - middle::typeck::check::check_item_types::ha39a6b2247f5d06aaA5::v0.10.pre\n  25:     0x7f63a5e32b70 - <unknown>\n  26:     0x7f63a5e31870 - middle::typeck::check_crate::h1776a18a6977a78cZvr::v0.10.pre\n  27:     0x7f63a6187f70 - driver::driver::phase_3_run_analysis_passes::hef56a7cb46a523e2WOa::v0.10.pre\n  28:     0x7f63a618eb80 - driver::driver::compile_input::h692b87098ca31f542bb::v0.10.pre\n  29:     0x7f63a61b2630 - run_compiler::h5fa6736bc743af23tNi::v0.10.pre\n  30:     0x7f63a61c5380 - <unknown>\n  31:     0x7f63a61c3cb0 - <unknown>\n  32:     0x7f63a61bf6e0 - <unknown>\n  33:     0x7f63a551d8c0 - <unknown>\n  34:     0x7f63a9db0080 - <unknown>\n  35:     0x7f63a9dbd1a0 - rust_try\n  36:     0x7f63a9dafec0 - rt::task::Task::run::h413709669c303bc5s58::v0.10.pre\n  37:     0x7f63a551d660 - <unknown>\n  38:     0x7f63a9db37b0 - <unknown>\n  39:     0x7f63a4a2afe0 - start_thread\n  40:     0x7f63a522ace9 - clone\n  41:                0x0 - <unknown>\n```\n\nThis can be reproduced by taking https://github.com/sfackler/rust-postgres/commit/c5abe8c0d757dc5f64ed1f4dafb8ab59c87e69f4 and changing lines 592 and 598 of src/lib.rs to use partial type hints.\n\ncc @Kimundi\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/12909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12909/timeline", "performed_via_github_app": null, "state_reason": "completed"}