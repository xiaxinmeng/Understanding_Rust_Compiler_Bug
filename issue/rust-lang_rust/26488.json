{"url": "https://api.github.com/repos/rust-lang/rust/issues/26488", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26488/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26488/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26488/events", "html_url": "https://github.com/rust-lang/rust/issues/26488", "id": 89989257, "node_id": "MDU6SXNzdWU4OTk4OTI1Nw==", "number": 26488, "title": "Syntax extension example in book fails to compile", "user": {"login": "russellmcc", "id": 603279, "node_id": "MDQ6VXNlcjYwMzI3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/603279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russellmcc", "html_url": "https://github.com/russellmcc", "followers_url": "https://api.github.com/users/russellmcc/followers", "following_url": "https://api.github.com/users/russellmcc/following{/other_user}", "gists_url": "https://api.github.com/users/russellmcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/russellmcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russellmcc/subscriptions", "organizations_url": "https://api.github.com/users/russellmcc/orgs", "repos_url": "https://api.github.com/users/russellmcc/repos", "events_url": "https://api.github.com/users/russellmcc/events{/privacy}", "received_events_url": "https://api.github.com/users/russellmcc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235146, "node_id": "MDU6TGFiZWwyMzUxNDY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-syntaxext", "name": "A-syntaxext", "color": "f7e101", "default": false, "description": "Area: Syntax extensions"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-06-22T01:58:38Z", "updated_at": "2015-07-05T21:04:36Z", "closed_at": "2015-07-05T21:04:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was trying to get started with compiler plug-ins, so I tried to compile the roman numeral syntax extension example.  The plug-in itself compiled properly but using it lead to a panic:\n\n```\nrustc --version\nrustc 1.2.0-nightly (9ad0063a1 2015-06-20)\n```\n\n```\n   Compiling rn_test v0.1.0 (file:///Users/russruss/proj/learnprog/rust/rn_use_test)\n     Running `rustc /Users/russruss/proj/learnprog/rust/rn_test/src/lib.rs --crate-name rn_test --crate-type dylib -C prefer-dynamic -g -C metadata=54f89a58f992a7a5 -C extra-filename=-54f89a58f992a7a5 --out-dir /Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps --emit=dep-info,link -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps`\n   Compiling rn_use_test v0.1.0 (file:///Users/russruss/proj/learnprog/rust/rn_use_test)\n     Running `rustc src/main.rs --crate-name rn_use_test --crate-type bin -g --out-dir /Users/russruss/proj/learnprog/rust/rn_use_test/target/debug --emit=dep-info,link -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps --extern rn_test=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps/librn_test-54f89a58f992a7a5.dylib`\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'index out of bounds: the len is 60 but the index is 66', ../src/libcollections/vec.rs:1362\n\nstack backtrace:\n   1:        0x10763bd35 - sys::backtrace::write::hedd23d39cd9e7a9azns\n   2:        0x107644562 - panicking::on_panic::haefb92227f11fe31HHw\n   3:        0x107600542 - rt::unwind::begin_unwind_inner::hbd25dce0c263cfbdTpw\n   4:        0x107601299 - rt::unwind::begin_unwind_fmt::h4e41fe74d3e63554Zow\n   5:        0x10764411c - rust_begin_unwind\n   6:        0x107698045 - panicking::panic_fmt::h03749e86046e7c85E8B\n   7:        0x1076927c5 - panicking::panic_bounds_check::hed26c3125161d258K7B\n   8:        0x10c7ebca7 - util::interner::StrInterner::get::h619fad0592b15e68Fpa\n   9:        0x107b7b404 - parse::token::get_name::hd0ab16ef5f33cd25BaT\n  10:        0x107b7b338 - parse::token::get_ident::h3505388221878bd1SaT\n  11:        0x107b779dd - expand_rn::h65ba18f76bf4dba9saa\n  12:        0x10c268a9e - ext::base::F.TTMacroExpander::expand::h3915518365159958189\n  13:        0x1050cdc2b - ext::expand::expand_expr::closure.64694\n  14:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  15:        0x1050d13c6 - fold::noop_fold_expr::h7579904053176116772\n  16:        0x1050c94b2 - ext::expand::expand_expr::closure.64694\n  17:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  18:        0x1050d2dd5 - fold::noop_fold_expr::h7579904053176116772\n  19:        0x1050c94b2 - ext::expand::expand_expr::closure.64694\n  20:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  21:        0x1050d1a9d - fold::noop_fold_expr::h7579904053176116772\n  22:        0x1050c94b2 - ext::expand::expand_expr::closure.64694\n  23:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  24:        0x1050d222c - fold::noop_fold_expr::h7579904053176116772\n  25:        0x1050c94b2 - ext::expand::expand_expr::closure.64694\n  26:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  27:        0x10512257e - ext::expand::expand_block_elts::closure.65414\n  28:        0x1051208de - ext::expand::expand_block_elts::closure.65395\n  29:        0x1050dc92a - ext::expand::expand_block_elts::hdf84aa5274590198wPb\n  30:        0x1051202f2 - ext::expand::expand_block::h24d11839a7d766c2ROb\n  31:        0x1050d2933 - fold::noop_fold_expr::h7579904053176116772\n  32:        0x1050c94b2 - ext::expand::expand_expr::closure.64694\n  33:        0x1050c92b0 - ext::expand::expand_expr::h3bd09218499b8fc1T3a\n  34:        0x105119b70 - fold::noop_fold_stmt::h7591722087387603310\n  35:        0x1050f586e - ext::expand::expand_stmt::h7376ca7d2a57107eAEb\n  36:        0x1050f884c - iter::FlatMap<I, U, F>.Iterator::next::h9212628285290734802\n  37:        0x1050f7987 - util::small_vector::SmallVector<T>.FromIterator<T>::from_iter::h6873315887265380074\n  38:        0x1050f6891 - ext::expand::expand_stmt::h7376ca7d2a57107eAEb\n  39:        0x105122473 - ext::expand::expand_block_elts::closure.65401\n  40:        0x105122126 - iter::FlatMap<I, U, F>.Iterator::next::h5647249170750674838\n  41:        0x105120d75 - vec::Vec<T>.FromIterator<T>::from_iter::h3784764330073977859\n  42:        0x10512063d - ext::expand::expand_block_elts::closure.65395\n  43:        0x1050dc92a - ext::expand::expand_block_elts::hdf84aa5274590198wPb\n  44:        0x1051202f2 - ext::expand::expand_block::h24d11839a7d766c2ROb\n  45:        0x1050dc2fc - ext::expand::expand_and_rename_fn_decl_and_block::he9fd348cb5bd2755Vic\n  46:        0x1050e389d - ext::expand::expand_item_underscore::hd72d084e46a32acb0sb\n  47:        0x1051474e4 - fold::Folder::fold_item_simple::h2914524661209321778\n  48:        0x1051470b3 - ptr::P<T>::map::h12098919794669766025\n  49:        0x1050e0d6d - ext::expand::expand_annotatable::h18105362623436c9SZb\n  50:        0x1050dcab1 - ext::expand::expand_item::h6e40b5a3505338c6psb\n  51:        0x1050e99aa - iter::FlatMap<I, U, F>.Iterator::next::h6906720827660212339\n  52:        0x1050e88b7 - vec::Vec<T>.FromIterator<T>::from_iter::h14651162845813094091\n  53:        0x1050e807f - fold::noop_fold_mod::h622930514852582360\n  54:        0x1050e402e - ext::expand::expand_item_underscore::hd72d084e46a32acb0sb\n  55:        0x1051474e4 - fold::Folder::fold_item_simple::h2914524661209321778\n  56:        0x1051470b3 - ptr::P<T>::map::h12098919794669766025\n  57:        0x1050e17ed - ext::expand::expand_annotatable::h18105362623436c9SZb\n  58:        0x1050dcab1 - ext::expand::expand_item::h6e40b5a3505338c6psb\n  59:        0x10515078f - ext::expand::expand_crate::hbe292a2cc58dc8c6qrc\n  60:        0x103b22b92 - driver::phase_2_configure_and_expand::closure.21464\n  61:        0x103ad6f42 - driver::phase_2_configure_and_expand::hbecc670a8758f096ita\n  62:        0x103ac67cd - driver::compile_input::h28deac6d4a93d734Tba\n  63:        0x103ba37af - run_compiler::h64b107044b742926x7b\n  64:        0x103ba1063 - boxed::F.FnBox<A>::call_box::h14920861784355226004\n  65:        0x103ba0827 - rt::unwind::try::try_fn::h13446674677803050384\n  66:        0x1076ceea8 - rust_try_inner\n  67:        0x1076cee95 - rust_try\n  68:        0x10762e275 - rt::unwind::try::inner_try::he9303ddbfc52c927Mlw\n  69:        0x103ba0a58 - boxed::F.FnBox<A>::call_box::h8722405328789365899\n  70:        0x10764301d - sys::thread::Thread::new::thread_start::h20bd66ec5dc1b5ec6Jv\n  71:     0x7fff9844e267 - _pthread_body\n  72:     0x7fff9844e1e4 - _pthread_start\n\nCould not compile `rn_use_test`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name rn_use_test --crate-type bin -g --out-dir /Users/russruss/proj/learnprog/rust/rn_use_test/target/debug --emit=dep-info,link -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug -L dependency=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps --extern rn_test=/Users/russruss/proj/learnprog/rust/rn_use_test/target/debug/deps/librn_test-54f89a58f992a7a5.dylib` (exit code: 101)\n```\n", "closed_by": {"login": "russellmcc", "id": 603279, "node_id": "MDQ6VXNlcjYwMzI3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/603279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/russellmcc", "html_url": "https://github.com/russellmcc", "followers_url": "https://api.github.com/users/russellmcc/followers", "following_url": "https://api.github.com/users/russellmcc/following{/other_user}", "gists_url": "https://api.github.com/users/russellmcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/russellmcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/russellmcc/subscriptions", "organizations_url": "https://api.github.com/users/russellmcc/orgs", "repos_url": "https://api.github.com/users/russellmcc/repos", "events_url": "https://api.github.com/users/russellmcc/events{/privacy}", "received_events_url": "https://api.github.com/users/russellmcc/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26488/timeline", "performed_via_github_app": null, "state_reason": "completed"}