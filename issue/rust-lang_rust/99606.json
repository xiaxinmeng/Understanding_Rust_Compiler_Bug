{"url": "https://api.github.com/repos/rust-lang/rust/issues/99606", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/99606/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/99606/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/99606/events", "html_url": "https://github.com/rust-lang/rust/issues/99606", "id": 1315053356, "node_id": "I_kwDOAAsO6M5OYh8s", "number": 99606, "title": "Guarantees of content preservation on `try_reserve` failure?", "user": {"login": "lo48576", "id": 1246590, "node_id": "MDQ6VXNlcjEyNDY1OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1246590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lo48576", "html_url": "https://github.com/lo48576", "followers_url": "https://api.github.com/users/lo48576/followers", "following_url": "https://api.github.com/users/lo48576/following{/other_user}", "gists_url": "https://api.github.com/users/lo48576/gists{/gist_id}", "starred_url": "https://api.github.com/users/lo48576/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lo48576/subscriptions", "organizations_url": "https://api.github.com/users/lo48576/orgs", "repos_url": "https://api.github.com/users/lo48576/repos", "events_url": "https://api.github.com/users/lo48576/events{/privacy}", "received_events_url": "https://api.github.com/users/lo48576/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}, {"id": 919710011, "node_id": "MDU6TGFiZWw5MTk3MTAwMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-merge", "name": "disposition-merge", "color": "008800", "default": false, "description": "This issue / PR is in PFCP or FCP with a disposition to merge it."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-07-22T14:05:12Z", "updated_at": "2022-09-08T15:28:56Z", "closed_at": "2022-08-22T20:28:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "### Location\r\nAny `try_reserve` methods of container types (12 in Rust 1,62.1, including duplicated ones in `alloc`), and maybe corresponding `try_reserve_exact` methods.\r\n\r\n- `std::collections::BinaryHeap::try_reserve[_exact]`\r\n- `std::collections::VecDeque::try_reserve[_exact]`\r\n- `std::collections::HashMap::try_reserve`\r\n- `std::collections::HashSet::try_reserve`\r\n- `std::ffi::OsString::try_reserve[_exact]`\r\n- `std::path::PathBuf::try_reserve[_exact]`\r\n- `std::string::String::try_reserve[_exact]`\r\n- `std::vec::Vec::try_reserve[_exact]`\r\n- ... and corresponding methods in `alloc`.\r\n\r\n### Summary\r\nDocumentations for `try_reserve` describes \"If the capacity overflows, or the allocator reports a failure, then an error is returned.\".\r\nHowever, it does not give any guarantees about whether the content is preserved or not on that error.\r\nThis guarantee (or absence of the guarantee) should be explicitly described.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/99606/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/99606/timeline", "performed_via_github_app": null, "state_reason": "completed"}