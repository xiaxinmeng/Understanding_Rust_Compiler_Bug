{"url": "https://api.github.com/repos/rust-lang/rust/issues/62884", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62884/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62884/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62884/events", "html_url": "https://github.com/rust-lang/rust/issues/62884", "id": 471384308, "node_id": "MDU6SXNzdWU0NzEzODQzMDg=", "number": 62884, "title": "Slow recompilation of rustc with incremental compilation", "user": {"login": "iluuu1994", "id": 1752683, "node_id": "MDQ6VXNlcjE3NTI2ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1752683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iluuu1994", "html_url": "https://github.com/iluuu1994", "followers_url": "https://api.github.com/users/iluuu1994/followers", "following_url": "https://api.github.com/users/iluuu1994/following{/other_user}", "gists_url": "https://api.github.com/users/iluuu1994/gists{/gist_id}", "starred_url": "https://api.github.com/users/iluuu1994/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iluuu1994/subscriptions", "organizations_url": "https://api.github.com/users/iluuu1994/orgs", "repos_url": "https://api.github.com/users/iluuu1994/repos", "events_url": "https://api.github.com/users/iluuu1994/events{/privacy}", "received_events_url": "https://api.github.com/users/iluuu1994/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-07-22T23:08:43Z", "updated_at": "2023-04-20T12:17:16Z", "closed_at": "2023-04-20T12:17:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm probably doing something wrong. The docs say that with incremental compilation you should be able to recompile rustc in about 30 seconds. For me it takes around 10 minutes.\r\n\r\nI've done the following ([as described in the docs](https://rust-lang.github.io/rustc-guide/how-to-build-and-run.html)):\r\n\r\n1. Set `codegen-units` to `0` in **config.toml**\r\n2. Compiled everything using `./x.py build -i --stage 1`\r\n3. Made a small whitespace change to a file in `librustc`\r\n4. Ran `./x.py build -i --stage 1 --keep-stage 1 src/librustc`\r\n\r\nStep 4 takes at least 10 minutes, often more. This is ran on a MacBook Pro (3.1 GHz Intel Core i7 with 4 cores) with macOS Mojoave 10.14.5.\r\n\r\nI'm using a local nightly version of `rustc` and `cargo` that are both up to date. But I've also tried with the default configuration and I still get the same result.\r\n\r\nAre these compilation times normal or am I doing something wrong? Thanks for the help!", "closed_by": {"login": "iluuu1994", "id": 1752683, "node_id": "MDQ6VXNlcjE3NTI2ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1752683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iluuu1994", "html_url": "https://github.com/iluuu1994", "followers_url": "https://api.github.com/users/iluuu1994/followers", "following_url": "https://api.github.com/users/iluuu1994/following{/other_user}", "gists_url": "https://api.github.com/users/iluuu1994/gists{/gist_id}", "starred_url": "https://api.github.com/users/iluuu1994/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iluuu1994/subscriptions", "organizations_url": "https://api.github.com/users/iluuu1994/orgs", "repos_url": "https://api.github.com/users/iluuu1994/repos", "events_url": "https://api.github.com/users/iluuu1994/events{/privacy}", "received_events_url": "https://api.github.com/users/iluuu1994/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62884/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62884/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}