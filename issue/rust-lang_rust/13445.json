{"url": "https://api.github.com/repos/rust-lang/rust/issues/13445", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13445/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13445/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13445/events", "html_url": "https://github.com/rust-lang/rust/issues/13445", "id": 31270179, "node_id": "MDU6SXNzdWUzMTI3MDE3OQ==", "number": 13445, "title": "Change old documentation that uses deprecated \"do\" syntax", "user": {"login": "mijoharas", "id": 4069743, "node_id": "MDQ6VXNlcjQwNjk3NDM=", "avatar_url": "https://avatars.githubusercontent.com/u/4069743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mijoharas", "html_url": "https://github.com/mijoharas", "followers_url": "https://api.github.com/users/mijoharas/followers", "following_url": "https://api.github.com/users/mijoharas/following{/other_user}", "gists_url": "https://api.github.com/users/mijoharas/gists{/gist_id}", "starred_url": "https://api.github.com/users/mijoharas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mijoharas/subscriptions", "organizations_url": "https://api.github.com/users/mijoharas/orgs", "repos_url": "https://api.github.com/users/mijoharas/repos", "events_url": "https://api.github.com/users/mijoharas/events{/privacy}", "received_events_url": "https://api.github.com/users/mijoharas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-04-10T18:49:51Z", "updated_at": "2014-04-12T22:57:03Z", "closed_at": "2014-04-12T22:57:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "in the [rust documentation for 0.10](http://static.rust-lang.org/doc/0.10/guide-ffi.html#accessing-foreign-globals) in the second block \n\n```\nuse std::libc;\nuse std::ptr;\n\n#[link(name = \"readline\")]\nextern {\n    static mut rl_prompt: *libc::c_char;\n}\n\nfn main() {\n    do \"[my-awesome-shell] $\".as_c_str |buf| {\n        unsafe { rl_prompt = buf; }\n        // get a line, process it\n        unsafe { rl_prompt = ptr::null(); }\n    }\n}\n```\n\nThis will not compile as it uses the old `do` syntax that has been deprecated. Could we update it to the current syntax? \n\nmy attempt got it to compile but did not enable me to use readline (by trying to simply copy the code).\n\n```\nuse std::libc;\nuse std::ptr;\n\n#[link(name = \"readline\")]\nextern {\n    static mut rl_prompt: *libc::c_char;\n}\n\nfn main() {\n        \"[my-awesome-shell] $\".with_c_str(|buf| {\n                unsafe { rl_prompt = buf; }\n                // get a line, process it\n                unsafe { rl_prompt = ptr::null(); }\n        })\n}\n```\n\nDoes anyone have a suggestion on how to make this work and whether there's a github repo for the documentation to send a PR to? (I couldn't find one.)\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13445/timeline", "performed_via_github_app": null, "state_reason": "completed"}