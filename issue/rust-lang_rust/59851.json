{"url": "https://api.github.com/repos/rust-lang/rust/issues/59851", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59851/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59851/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59851/events", "html_url": "https://github.com/rust-lang/rust/issues/59851", "id": 431671359, "node_id": "MDU6SXNzdWU0MzE2NzEzNTk=", "number": 59851, "title": "Reduce visual prominence of controls, source links, and version numbers in rustdoc", "user": {"login": "lambda", "id": 37398, "node_id": "MDQ6VXNlcjM3Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/37398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lambda", "html_url": "https://github.com/lambda", "followers_url": "https://api.github.com/users/lambda/followers", "following_url": "https://api.github.com/users/lambda/following{/other_user}", "gists_url": "https://api.github.com/users/lambda/gists{/gist_id}", "starred_url": "https://api.github.com/users/lambda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lambda/subscriptions", "organizations_url": "https://api.github.com/users/lambda/orgs", "repos_url": "https://api.github.com/users/lambda/repos", "events_url": "https://api.github.com/users/lambda/events{/privacy}", "received_events_url": "https://api.github.com/users/lambda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 2406929537, "node_id": "MDU6TGFiZWwyNDA2OTI5NTM3", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rustdoc-ui", "name": "A-rustdoc-ui", "color": "f7e101", "default": false, "description": "Area: rustdoc UI (generated HTML)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2019-04-10T19:21:24Z", "updated_at": "2022-08-09T12:54:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is being broken out of #59829 to provide smaller, actionable items that can be independently discussed and worked on.\r\n\r\nA review of rustdoc for accessibility, especially for dyslexia and attention disorders, finds that there are a number of visually distracting elements in rustdoc which can draw attention away from the main content. These should be considered along with the other issues mentioned in #59829 about the overall effect of a number of distracting elements on the page.\r\n\r\nItems in rustdoc can have a number of controls and auxiliary information associated with them, which can be quite prominent and distracting. These should either be eliminated, or made less prominent so that the reader can more easily follow the main content and only notice them when they need to find them.\r\n\r\nAt the top of a page, we see several controls that are larger and more prominent than the main text. The top of page `[-]` and `[src]` controls are larger and bolder than the body text. The version number is a bit smaller and lower contrast, but unexplained what it means.\r\n\r\nImmediately above the main text is a \"Show declaration\" disclosure which is lower contrast, but larger, than the main text, and the main text itself also has a disclosure control immediately to its left, crowding it.\r\n\r\n![Screenshot of Ipv4Addr header showing issues described above](https://user-images.githubusercontent.com/37398/55902587-dac55480-5b99-11e9-9966-6934499bb713.png)\r\n\r\n`impl` blocks have disclosure controls indicating a nesting relationship, even though the headings themselves don't, which leads to some distracting spacing. They also can have a number of closely spaced prominent `[src]` links and version numbers. The `[src]` links are a slightly larger font size (17px) than the content (16px).\r\n\r\n![Screenshot of Ipv4Addr impl demonstrating nested disclosure boxes and src links](https://user-images.githubusercontent.com/37398/55903214-24fb0580-5b9b-11e9-90e2-b975f4372802.png)\r\n\r\n![Screenshot of method in Ipv4Addr impl demonstrating version numbers and src links](https://user-images.githubusercontent.com/37398/55903215-24fb0580-5b9b-11e9-82b9-d621d32898cd.png)\r\n\r\nThere are also a variety of different sizes of these disclosure controls, which don't match the logical hierarchy.\r\n\r\n![Screenshot of blanket impl with \"Show undocumented items\" disclosure larger than ](https://user-images.githubusercontent.com/37398/55904714-88d2fd80-5b9e-11e9-8744-7b3b38f012d2.png)\r\n\r\nThere's an additional \"important traits\" control that appears on some methods which indicates some important traits implemented by the return value of the method. This allows showing traits that are implemented by the return type for thing like iterator adapters, where the user usually cares more about the trait implemented than the concrete type. This adds another UI element which is high contrast, doesn't match in size, and has a different way of disclosing hidden information. Previous discussion of this design is present in the implementation issue, #45039.\r\n\r\n![Screen shot demonstrating appearances of \"important traits\" control to left of disclosure controls for several iterator adapters](https://user-images.githubusercontent.com/37398/55906930-6a233580-5ba3-11e9-945b-e5a391d14846.png)\r\n\r\n![Screen shot demonstrating unique modal dialog for \"important traits\"](https://user-images.githubusercontent.com/37398/55907104-d9008e80-5ba3-11e9-84d1-f6e399b6c045.png)\r\n\r\nThere is going to need to be a balance between reducing or eliminating the visual impact of these elements, while still making the same information easily discoverable for those who need it.\r\n\r\nHere are a few suggestions about how we might be able to achieve this. \r\n\r\n* [ ] Avoid having these elements look like syntax. `[+]`, `[-]`, and `[src]` could be mistaken for some kind of source code annotation; the brackets are also very eye-catcing. Using more standard disclosure controls (such as `\u229e` and `\u229f`, or \u25b6\ufe0e and \u25bc), and prose like `source` instead of `[src]`, may help.\r\n* [x] Make source links and version information smaller and lower contrast; could make them become full contrast on hover\r\n* [ ] Move version numbers introduced and source link to less prominent location\r\n  - perhaps inline with the text of the docs\r\n  - perhaps immediately to the right of the first line of the declaration, rather than right-justified\r\n* [ ] Use English for the version number and source link\r\n  - \"Introduced in Rust 1.12.0\"\r\n  - \"Since 1.12.0\"\r\n  - \"source\"\r\n  - Something simple like \"_(since 1.12.0 / source)_\" might be appropriate.\r\n* [ ] Adjust the sizes of disclosure controls and text to follow logical hierarchy and be smaller and less prominent than content\r\n* [ ] Use standard disclosure control for \"important traits\", or if possible, just include the relevant information inline so you don't have to click through to it. These options were considered but ultimately not chosen in the implementation issue #45039.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59851/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59851/timeline", "performed_via_github_app": null, "state_reason": null}