{"url": "https://api.github.com/repos/rust-lang/rust/issues/51648", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51648/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51648/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51648/events", "html_url": "https://github.com/rust-lang/rust/issues/51648", "id": 333896553, "node_id": "MDU6SXNzdWUzMzM4OTY1NTM=", "number": 51648, "title": "ICE rustc 1.26.2 'specified instant was later than self'", "user": {"login": "ncoish", "id": 1967292, "node_id": "MDQ6VXNlcjE5NjcyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1967292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ncoish", "html_url": "https://github.com/ncoish", "followers_url": "https://api.github.com/users/ncoish/followers", "following_url": "https://api.github.com/users/ncoish/following{/other_user}", "gists_url": "https://api.github.com/users/ncoish/gists{/gist_id}", "starred_url": "https://api.github.com/users/ncoish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ncoish/subscriptions", "organizations_url": "https://api.github.com/users/ncoish/orgs", "repos_url": "https://api.github.com/users/ncoish/repos", "events_url": "https://api.github.com/users/ncoish/events{/privacy}", "received_events_url": "https://api.github.com/users/ncoish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 55301991, "node_id": "MDU6TGFiZWw1NTMwMTk5MQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-x86", "name": "O-x86", "color": "6e6ec0", "default": false, "description": "Target: x86 processors"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-06-20T01:50:55Z", "updated_at": "2018-12-19T18:33:27Z", "closed_at": "2018-11-25T19:01:19Z", "author_association": "NONE", "active_lock_reason": null, "body": "After ~2 weeks of continuously building our project without fail, our Windows build machines (2 of them) began throwing an error of this kind, while building dependencies:\r\n\r\n``` \r\nthread 'rustc' panicked at 'specified instant was later than self', libcore\\option.rs:916:5\r\n\r\n error: internal compiler error: unexpected panic\r\n \r\n note: the compiler unexpectedly panicked. this is a bug.\r\n \r\n note: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n \r\n note: rustc 1.26.2 (594fb253c 2018-06-01) running on i686-pc-windows-msvc\r\n \r\n note: compiler flags: -C opt-level=3 --crate-type lib\r\n \r\n note: some of the compiler flags provided by cargo are hidden\r\n \r\n error: Could not compile `ws`.\r\n```\r\n\r\nEach time this failure occurred it was on a different dependency of the project. It's also worth noting that this failure did not occur on every build, but it was very frequent. The failure occurs using both `i686-pc-windows-msvc` and `x86_64-pc-windows-msvc`.\r\n\r\nA very similar issue was reported in rustc 1.23.0: https://github.com/rust-lang/rust/issues/47684\r\n\r\nRestarting the affected build machines seems to have stopped the issue from occurring, at least temporarily.\r\n\r\nIf there's anything I can do to help diagnose/solve this problem, I'm eager to jump in.\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\nrustc 1.26.2 (594fb253c 2018-06-01)\r\nbinary: rustc\r\ncommit-hash: 594fb253c2b02b320c728391a425d028e6dc7a09\r\ncommit-date: 2018-06-01\r\nhost: i686-pc-windows-msvc\r\nrelease: 1.26.2\r\nLLVM version: 6.0\r\n\r\nBacktrace:\r\n```\r\n    0: <i32 as std::sys::windows::net::IsMinusOne>::is_minus_one\r\n    1: std::panicking::take_hook\r\n    2: std::panicking::take_hook\r\n    3: rustc::ty::maps::on_disk_cache::__ty_decoder_impl::<impl serialize::serialize::Decoder for rustc::ty::maps::on_disk_cache::CacheDecoder<'a, 'tcx, 'x>>::read_str\r\n    4: std::panicking::begin_panic_fmt\r\n    5: rust_begin_unwind\r\n    6: core::panicking::panic_fmt\r\n    7: core::option::expect_failed\r\n    8: <std::ffi::c_str::IntoStringError as core::fmt::Debug>::fmt\r\n    9: std::time::Instant::elapsed\r\n   10: rustc_trans_utils::link::invalid_output_for_target\r\n   11: rustc_trans_utils::symbol_names::provide\r\n   12: rustc::dep_graph::graph::DepGraph::assert_ignored\r\n   13: rustc::ty::maps::<impl rustc::ty::maps::queries::wasm_import_module_map<'tcx>>::try_get\r\n   14: <rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx> as rustc::ty::layout::HasTyCtxt<'gcx>>::tcx\r\n   15: rustc::ty::maps::<impl rustc::ty::maps::queries::symbol_name<'tcx>>::ensure\r\n   16: rustc::ty::maps::<impl rustc::ty::maps::queries::symbol_name<'tcx>>::try_get\r\n   17: rustc::ty::maps::TyCtxtAt::symbol_name\r\n   18: rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::symbol_name\r\n   19: <rustc_trans::base::ValueIter as core::iter::iterator::Iterator>::next\r\n   20: <rustc_trans::ModuleLlvm as core::fmt::Debug>::fmt\r\n   21: <rustc_trans::base::ValueIter as core::iter::iterator::Iterator>::next\r\n   22: rustc::dep_graph::graph::DepGraph::assert_ignored\r\n   23: rustc::ty::maps::<impl rustc::ty::maps::queries::wasm_import_module_map<'tcx>>::try_get\r\n   24: <rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx> as rustc::ty::layout::HasTyCtxt<'gcx>>::tcx\r\n   25: rustc::ty::maps::<impl rustc::ty::maps::queries::collect_and_partition_translation_items<'tcx>>::ensure\r\n   26: rustc::ty::maps::<impl rustc::ty::maps::queries::collect_and_partition_translation_items<'tcx>>::try_get\r\n   27: rustc::ty::maps::TyCtxtAt::collect_and_partition_translation_items\r\n   28: rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::collect_and_partition_translation_items\r\n   29: <rustc_trans::LlvmTransCrate as rustc_trans_utils::trans_crate::TransCrate>::trans_crate\r\n   30: rustc_driver::driver::build_output_filenames\r\n   31: rustc_driver::driver::phase_4_translate_to_llvm\r\n   32: <rustc_driver::pretty::UserIdentifiedItem as core::fmt::Debug>::fmt\r\n   33: <rustc_driver::pretty::UserIdentifiedItem as core::fmt::Debug>::fmt\r\n   34: <rustc_driver::pretty::UserIdentifiedItem as core::fmt::Debug>::fmt\r\n   35: <rustc_driver::profile::trace::Query as core::fmt::Debug>::fmt\r\n   36: rustc_driver::driver::compile_input\r\n   37: rustc_driver::run_compiler\r\n   38: rustc_driver::target_features::add_configuration\r\n   39: <rustc_driver::derive_registrar::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor<'v>>::visit_impl_item\r\n   40: <rustc_driver::pretty::UserIdentifiedItem as core::fmt::Debug>::fmt\r\n   41: _rust_maybe_catch_panic\r\n   42: rustc_driver::driver::build_output_filenames\r\n   43: <<std::sys_common::remutex::ReentrantMutex<T> as core::fmt::Debug>::fmt::LockedPlaceholder as core::fmt::Debug>::fmt\r\n   44: std::sys::windows::thread::Thread::new\r\n   45: BaseThreadInitThunk\r\n   46: RtlSubscribeWnfStateChangeNotification\r\n   47: RtlSubscribeWnfStateChangeNotification\r\n```\r\n\r\nand the relevant output of systeminfo:\r\n```\r\nHost Name:                 ---\r\nOS Name:                   Microsoft Windows Server 2016 Datacenter\r\nOS Version:                10.0.14393 N/A Build 14393\r\nOS Manufacturer:           Microsoft Corporation\r\nOS Configuration:          Standalone Server\r\nOS Build Type:             Multiprocessor Free\r\nOriginal Install Date:     9/8/2017, 2:59:51 PM\r\nSystem Boot Time:          6/19/2018, 10:49:50 AM\r\nSystem Manufacturer:       Xen\r\nSystem Model:              HVM domU\r\nSystem Type:               x64-based PC\r\nProcessor(s):              1 Processor(s) Installed.\r\n                           [01]: Intel64 Family 6 Model 63 Stepping 2 GenuineIntel ~2400 Mhz\r\nBIOS Version:              Xen 4.2.amazon, 8/24/2006\r\nWindows Directory:         C:\\Windows\r\nSystem Directory:          C:\\Windows\\system32\r\nBoot Device:               \\Device\\HarddiskVolume1\r\nSystem Locale:             en-us;English (United States)\r\nInput Locale:              en-us;English (United States)\r\nTime Zone:                 (UTC-05:00) Eastern Time (US & Canada)\r\nTotal Physical Memory:     32,768 MB\r\nAvailable Physical Memory: 30,423 MB\r\nVirtual Memory: Max Size:  37,632 MB\r\nVirtual Memory: Available: 35,042 MB\r\nVirtual Memory: In Use:    2,590 MB\r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51648/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51648/timeline", "performed_via_github_app": null, "state_reason": "completed"}