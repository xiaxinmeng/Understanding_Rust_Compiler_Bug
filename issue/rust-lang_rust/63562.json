{"url": "https://api.github.com/repos/rust-lang/rust/issues/63562", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63562/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63562/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63562/events", "html_url": "https://github.com/rust-lang/rust/issues/63562", "id": 480773416, "node_id": "MDU6SXNzdWU0ODA3NzM0MTY=", "number": 63562, "title": "Linking with extern function in Wasm", "user": {"login": "mikevoronov", "id": 11981714, "node_id": "MDQ6VXNlcjExOTgxNzE0", "avatar_url": "https://avatars.githubusercontent.com/u/11981714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikevoronov", "html_url": "https://github.com/mikevoronov", "followers_url": "https://api.github.com/users/mikevoronov/followers", "following_url": "https://api.github.com/users/mikevoronov/following{/other_user}", "gists_url": "https://api.github.com/users/mikevoronov/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikevoronov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikevoronov/subscriptions", "organizations_url": "https://api.github.com/users/mikevoronov/orgs", "repos_url": "https://api.github.com/users/mikevoronov/repos", "events_url": "https://api.github.com/users/mikevoronov/events{/privacy}", "received_events_url": "https://api.github.com/users/mikevoronov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-08-14T16:25:43Z", "updated_at": "2019-12-20T19:43:06Z", "closed_at": "2019-12-20T19:43:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am trying to use  functions from an external module and importing them like that:\r\n\r\n```rust\r\n#[link(wasm_import_module = \"sqlite\")]\r\nextern \"C\" {\r\n  #[link_name=\"allocate\"]\r\n  pub fn allocate_external(size: usize) -> i32;\r\n  \r\n  #[link_name=\"deallocate\"]\r\n  pub fn deallocate_external(ptr: i32, size: usize);\r\n}\r\n```\r\n\r\nBut if I have exported functions with the same names in my own module, there will be linked with these local functions (in these case these functions won't be in the import section of a compiled module). Is it possible to link with functions in external module having functions with the same name in your own?\r\n\r\nPOC can be found [here](https://github.com/michaelvoronov/rust_poc_3).\r\n\r\nBtw, in C it could be done in this way:\r\n```cpp\r\n#define __MODULE_IMPORT(module_name, function_name) \\\r\n    __attribute__((__import_module__(#module_name), __import_name__(#function_name)))\r\n\r\nchar *allocate_extern(int size) __MODULE_IMPORT(sqlite, allocate);\r\nvoid deallocate_extern(char *ptr) __MODULE_IMPORT(sqlite, deallocate);\r\n```\r\nand works perfectly.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63562/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63562/timeline", "performed_via_github_app": null, "state_reason": "completed"}