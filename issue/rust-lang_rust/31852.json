{"url": "https://api.github.com/repos/rust-lang/rust/issues/31852", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31852/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31852/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31852/events", "html_url": "https://github.com/rust-lang/rust/issues/31852", "id": 135887170, "node_id": "MDU6SXNzdWUxMzU4ODcxNzA=", "number": 31852, "title": "Can access invalid memory and cause sigsegv using safe Rust", "user": {"login": "ruuda", "id": 506953, "node_id": "MDQ6VXNlcjUwNjk1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/506953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruuda", "html_url": "https://github.com/ruuda", "followers_url": "https://api.github.com/users/ruuda/followers", "following_url": "https://api.github.com/users/ruuda/following{/other_user}", "gists_url": "https://api.github.com/users/ruuda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruuda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruuda/subscriptions", "organizations_url": "https://api.github.com/users/ruuda/orgs", "repos_url": "https://api.github.com/users/ruuda/repos", "events_url": "https://api.github.com/users/ruuda/events{/privacy}", "received_events_url": "https://api.github.com/users/ruuda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-02-23T22:32:36Z", "updated_at": "2016-02-23T23:57:14Z", "closed_at": "2016-02-23T23:57:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When working on a crate I discovered the following issue. I did not succeed in making a minimal example that reproduces on play.rust-lang.org, so let me just link to the actual code:\n- `git clone -b rust-bug https://github.com/ruud-v-a/rx`\n- `cd rx`\n- `cargo test this_causes_sigsegv -- --nocapture`\n- [This is the code that exploits the bug](https://github.com/ruud-v-a/rx/commit/6f3cc4f61c66b0c1669a178d27244a4a252a5ca4).\n- There are no `unsafe` blocks in the crate.\n\nNote how this prints the contents of some memory that the function shouldn\u2019t be able to access, and then terminates with sigsegv.\n\nAn observation: with reexports it is possible to reexport a type on which a method is defined that returns a type that is not reexported. In a sense this allows returning anonymous types. In the documentation these types are named but they do not link to a documentation page, and if you name them explicitly the compiler complains because they are not public. I am not sure whether this is a bug or feature.\n\nRelated (what initially made me suspicious): [this function mutates a variable that was borrowed mutably by a closure](https://github.com/ruud-v-a/rx/blob/6f3cc4f61c66b0c1669a178d27244a4a252a5ca4/tests/rx.rs#L323).\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31852/timeline", "performed_via_github_app": null, "state_reason": "completed"}