{"url": "https://api.github.com/repos/rust-lang/rust/issues/81026", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81026/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81026/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81026/events", "html_url": "https://github.com/rust-lang/rust/issues/81026", "id": 786433496, "node_id": "MDU6SXNzdWU3ODY0MzM0OTY=", "number": 81026, "title": "x.py build: error: XZ support is required to download LLVM", "user": {"login": "Walther", "id": 2943750, "node_id": "MDQ6VXNlcjI5NDM3NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2943750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Walther", "html_url": "https://github.com/Walther", "followers_url": "https://api.github.com/users/Walther/followers", "following_url": "https://api.github.com/users/Walther/following{/other_user}", "gists_url": "https://api.github.com/users/Walther/gists{/gist_id}", "starred_url": "https://api.github.com/users/Walther/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Walther/subscriptions", "organizations_url": "https://api.github.com/users/Walther/orgs", "repos_url": "https://api.github.com/users/Walther/repos", "events_url": "https://api.github.com/users/Walther/events{/privacy}", "received_events_url": "https://api.github.com/users/Walther/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-01-15T00:14:07Z", "updated_at": "2021-05-19T15:44:08Z", "closed_at": "2021-01-15T00:40:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Steps:\r\n- Follow instructions at https://rustc-dev-guide.rust-lang.org/getting-started.html\r\n- `git clone https://github.com/rust-lang/rust.git` (at commit e38fb306b7f5e65cca34df2dab1f0db15e1defb4 )\r\n- `git submodule update --init --recursive`\r\n- `./x.py setup`, select `b) compiler: Contribute to the compiler or rustdoc`\r\n- `./x.py build`\r\n\r\n```\r\n./x.py build\r\nUpdating only changed submodules\r\nSubmodules updated in 0.14 seconds\r\nerror: XZ support is required to download LLVM\r\nhelp: consider disabling `download-ci-llvm` or using python3\r\nBuild completed unsuccessfully in 0:00:00\r\n```\r\n\r\nBoth `python` and `python3` exist\r\n```\r\nwhich python\r\n/usr/bin/python\r\n\r\nwhich python3\r\n/usr/bin/python3\r\n```\r\n\r\nNote: https://github.com/rust-lang/rust/blob/e38fb306b7f5e65cca34df2dab1f0db15e1defb4/x.py#L1\r\n\r\n```\r\n# Running the same command defaults to python 2 on the OS\r\n/usr/bin/env python\r\nPython 2.7.16 (default, Oct 10 2019, 22:02:15)\r\n[GCC 8.3.0] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n```\r\n\r\nEnvironment: WSL2 Debian 10 buster\r\n\r\n```\r\ncat /etc/os-release\r\nPRETTY_NAME=\"Debian GNU/Linux 10 (buster)\"\r\nNAME=\"Debian GNU/Linux\"\r\nVERSION_ID=\"10\"\r\nVERSION=\"10 (buster)\"\r\nVERSION_CODENAME=buster\r\nID=debian\r\nHOME_URL=\"https://www.debian.org/\"\r\nSUPPORT_URL=\"https://www.debian.org/support\"\r\nBUG_REPORT_URL=\"https://bugs.debian.org/\"\r\n\r\nuname -a\r\nLinux matcha 4.4.0-19041-Microsoft #488-Microsoft Mon Sep 01 13:43:00 PST 2020 x86_64 GNU/Linux\r\n```\r\n\r\n\r\nWorkaround:\r\n\r\n```\r\npython3 x.py build\r\n```\r\n\r\n---\r\n\r\nThree thoughts:\r\n- Should `x.py` be smarter about `python` vs `python3` detection & execution, to fix this without user action?\r\n- Should the error message be improved, in a way that helps a user to work around this? (for example, \"python3 detected, edit x.py to use python3 instead\" or other suggestion)\r\n- Should the contribution guide have an updated mention of `python3` requirement? Currently: \"Most notably, you will need Python 2 or 3 to run x.py.\"", "closed_by": {"login": "Walther", "id": 2943750, "node_id": "MDQ6VXNlcjI5NDM3NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2943750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Walther", "html_url": "https://github.com/Walther", "followers_url": "https://api.github.com/users/Walther/followers", "following_url": "https://api.github.com/users/Walther/following{/other_user}", "gists_url": "https://api.github.com/users/Walther/gists{/gist_id}", "starred_url": "https://api.github.com/users/Walther/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Walther/subscriptions", "organizations_url": "https://api.github.com/users/Walther/orgs", "repos_url": "https://api.github.com/users/Walther/repos", "events_url": "https://api.github.com/users/Walther/events{/privacy}", "received_events_url": "https://api.github.com/users/Walther/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81026/timeline", "performed_via_github_app": null, "state_reason": "completed"}