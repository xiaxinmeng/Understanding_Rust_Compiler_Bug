{"url": "https://api.github.com/repos/rust-lang/rust/issues/49617", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49617/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49617/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49617/events", "html_url": "https://github.com/rust-lang/rust/issues/49617", "id": 310740056, "node_id": "MDU6SXNzdWUzMTA3NDAwNTY=", "number": 49617, "title": "\"error: unused macro definition\" when trying to compile libcore for msp430 target with recent nightly.", "user": {"login": "cr1901", "id": 6418027, "node_id": "MDQ6VXNlcjY0MTgwMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/6418027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cr1901", "html_url": "https://github.com/cr1901", "followers_url": "https://api.github.com/users/cr1901/followers", "following_url": "https://api.github.com/users/cr1901/following{/other_user}", "gists_url": "https://api.github.com/users/cr1901/gists{/gist_id}", "starred_url": "https://api.github.com/users/cr1901/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cr1901/subscriptions", "organizations_url": "https://api.github.com/users/cr1901/orgs", "repos_url": "https://api.github.com/users/cr1901/repos", "events_url": "https://api.github.com/users/cr1901/events{/privacy}", "received_events_url": "https://api.github.com/users/cr1901/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-04-03T08:26:33Z", "updated_at": "2018-04-05T00:19:53Z", "closed_at": "2018-04-05T00:19:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have a Rust [application](https://github.com/cr1901/AT2XT) written using the msp430 backend. which means using the nightly compiler. Travis CI daily cron builds have been [failing](https://travis-ci.org/cr1901/AT2XT/jobs/361464827#L2157-L2180) with the nightly compiler since March 27, 2018 with the following error (I am currently not in a position to get a backtrace/increase verbosity, I will update when possible):\r\n\r\n```\r\nxargo build --release --target=msp430-none-elf --features use-timer\r\n   Compiling core v0.0.0 (file:///home/travis/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/src/libcore)\r\nerror: unused macro definition\r\n   --> /home/travis/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/src/libcore/iter/range.rs:491:1\r\n    |\r\n491 | / macro_rules! try_from_upper_bounded {\r\n492 | |     ($($target:ty),*) => {$(\r\n493 | |         impl PrivateTryFromUsize for $target {\r\n494 | |             #[inline]\r\n...   |\r\n503 | |     )*}\r\n504 | | }\r\n    | |_^\r\n    |\r\nnote: lint level defined here\r\n   --> /home/travis/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/src/libcore/lib.rs:66:9\r\n    |\r\n66  | #![deny(warnings)]\r\n    |         ^^^^^^^^\r\n    = note: #[deny(unused_macros)] implied by #[deny(warnings)]\r\nerror: aborting due to previous error\r\nerror: Could not compile `core`.\r\nTo learn more, run the command again with --verbose.\r\nerror: `\"cargo\" \"build\" \"--release\" \"--manifest-path\" \"/tmp/xargo.LkQsXpHQxkQq/Cargo.toml\" \"--target\" \"msp430-none-elf\" \"-p\" \"core\"` failed with exit code: Some(101)\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\nmake: *** [timer] Error 1\r\n```\r\n\r\nMy msp430 firmware uses `xargo` to create a `libcore` for msp430 every time `libcore` is updated, and recently a new feature has triggered a lint that causes compilation to fail due to an unused macro. Since `libcore` can't be compiled, the whole build fails. A stopgap solution for now is to use a nightly before March 27, 2018 which compiles `libcore` for msp430 successfully.\r\n\r\ncc: @SimonSapin, based on a [chat](https://bot.tockos.org/tockbot-moz/embedded-bot/2018-04-03/?msg=78599&page=1) in `#rust-embedded` with @japaric, PR #49305 might have tickled the lint into failing compilation for the msp430 backend?", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49617/timeline", "performed_via_github_app": null, "state_reason": "completed"}