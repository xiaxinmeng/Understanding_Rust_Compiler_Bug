{"url": "https://api.github.com/repos/rust-lang/rust/issues/14062", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14062/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14062/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14062/events", "html_url": "https://github.com/rust-lang/rust/issues/14062", "id": 33176117, "node_id": "MDU6SXNzdWUzMzE3NjExNw==", "number": 14062, "title": "Pretty printer assertion using RUST_LOG and deriving Encodable", "user": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-05-09T14:20:55Z", "updated_at": "2015-01-16T22:13:27Z", "closed_at": "2015-01-16T22:13:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`RUST_LOG=rustc::middle::trans rustc derive.rs`\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'assertion failed: body.expr.is_some()', /home/jdm/sdb/servo/src/compiler/rust/src/libsyntax/print/pprust.rs:1315\n```\n\nderive.rs is:\n\n``` rust\nextern crate serialize;\n\nuse serialize::{Encodable, Encoder};\n\n#[deriving(Encodable)]\nstruct Attr;\n\nstruct JSTracer;\n\nimpl Encoder for JSTracer {\n    fn emit_nil(&mut self) {}\n    fn emit_uint(&mut self, _v: uint) {}\n    fn emit_u64(&mut self, _v: u64) {}\n    fn emit_u32(&mut self, __v: u32) {}\n    fn emit_u16(&mut self, _v: u16) {}\n    fn emit_u8(&mut self, _v: u8) {}\n    fn emit_int(&mut self, _v: int) {}\n    fn emit_i64(&mut self, _v: i64) {}\n    fn emit_i32(&mut self, _v: i32) {}\n    fn emit_i16(&mut self, _v: i16) {}\n    fn emit_i8(&mut self, _v: i8) {}\n    fn emit_bool(&mut self, _v: bool) {}\n    fn emit_f64(&mut self, _v: f64) {}\n    fn emit_f32(&mut self, _v: f32) {}\n    fn emit_char(&mut self, _v: char) {}\n    fn emit_str(&mut self, _v: &str) {}\n    fn emit_enum(&mut self, _name: &str, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_enum_variant(&mut self, _v_name: &str, _v_id: uint, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_enum_variant_arg(&mut self, _a_idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_enum_struct_variant(&mut self, _v_name: &str, _v_id: uint, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_enum_struct_variant_field(&mut self, _f_name: &str, _f_idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_struct(&mut self, _name: &str, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_struct_field(&mut self, _f_name: &str, _f_idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_tuple(&mut self, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_tuple_arg(&mut self, _idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_tuple_struct(&mut self, _name: &str, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_tuple_struct_arg(&mut self, _f_idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_option(&mut self, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_option_none(&mut self) {}\n    fn emit_option_some(&mut self, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_seq(&mut self, _len: uint, f: |this: &mut JSTracer|) {\n        f(self);\n    }\n    fn emit_seq_elt(&mut self, _idx: uint, f: |this: &mut JSTracer|) {\n        f(self);\n    }\n    fn emit_map(&mut self, _len: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_map_elt_key(&mut self, _idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n    fn emit_map_elt_val(&mut self, _idx: uint, f: |&mut JSTracer|) {\n        f(self);\n    }\n}\n\nfn main() {\n    let a = Attr;\n    let _  = a.encode(&mut JSTracer);\n}\n```\n", "closed_by": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/14062/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14062/timeline", "performed_via_github_app": null, "state_reason": "completed"}