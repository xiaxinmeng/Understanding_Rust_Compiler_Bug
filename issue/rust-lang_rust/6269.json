{"url": "https://api.github.com/repos/rust-lang/rust/issues/6269", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6269/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6269/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6269/events", "html_url": "https://github.com/rust-lang/rust/issues/6269", "id": 14010814, "node_id": "MDU6SXNzdWUxNDAxMDgxNA==", "number": 6269, "title": "Accessing `&mut` inside of `@mut` requires first borrowing the `@mut`", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-05-06T17:09:33Z", "updated_at": "2013-08-29T17:19:27Z", "closed_at": "2013-08-29T17:19:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Right now, if you have an `&mut` pointer inside of an `@mut` data structure, you cannot access it without first borrowing the `@mut` to `&mut`:\n\n```\nstruct Foo { x: &mut int }\nfn foo(m: @mut Foo) {\n    *m.x += 1; // ERROR\n\n    let n = &mut *m; // borrow m as &mut\n    *n.x += 1; // OK\n}\n```\n\nThe reason for this is that we require a unique access path to mutate or re-borrow `&mut` pointers, and `@mut` is aliasable. Once the `@mut` is borrowed to `&mut`, though, we know that no mutable aliases exist, because otherwise the borrow would have failed. We could just however accept the original code and insert a write guard check ourselves. I don't do this now because it would require various subtle bits of code to make sure that the automatically inserted borrow has the appropriate lifetime to guarantee soundness. Still, it's kind of annoying. \n\ncc #5074 \n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6269/timeline", "performed_via_github_app": null, "state_reason": "completed"}