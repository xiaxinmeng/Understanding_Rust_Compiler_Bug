{"url": "https://api.github.com/repos/rust-lang/rust/issues/29758", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29758/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29758/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29758/events", "html_url": "https://github.com/rust-lang/rust/issues/29758", "id": 116201825, "node_id": "MDU6SXNzdWUxMTYyMDE4MjU=", "number": 29758, "title": "Derived Hash is incorrect if PartialEq is not derived", "user": {"login": "untitaker", "id": 837573, "node_id": "MDQ6VXNlcjgzNzU3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/837573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/untitaker", "html_url": "https://github.com/untitaker", "followers_url": "https://api.github.com/users/untitaker/followers", "following_url": "https://api.github.com/users/untitaker/following{/other_user}", "gists_url": "https://api.github.com/users/untitaker/gists{/gist_id}", "starred_url": "https://api.github.com/users/untitaker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/untitaker/subscriptions", "organizations_url": "https://api.github.com/users/untitaker/orgs", "repos_url": "https://api.github.com/users/untitaker/repos", "events_url": "https://api.github.com/users/untitaker/events{/privacy}", "received_events_url": "https://api.github.com/users/untitaker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2015-11-10T21:07:33Z", "updated_at": "2016-02-13T19:17:36Z", "closed_at": "2016-02-11T20:05:05Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This should not work:\n\n```\n#[derive(Hash)]\nstruct Foo { bogus: usize };\n\nimpl PartialEq for Foo {\n    fn eq(&self, _: &Foo) -> bool { true }\n}\n\nimpl Eq for Foo {};\n```\n\n[playpen](http://is.gd/FDIHhV)\n\nWe have this in the docs of `std::hash::Hash`:\n\n```\nk1 == k2 -> hash(k1) == hash(k2)\n```\n\nSince all `Foo`s are equal, their hashes must always be the same too, but the derived hash impl doesn't behave that way (see playpen).\n\nOne way to avoid this issue is to give up on deriving `Hash` when `PartialEq` isn't automatically derived.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29758/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29758/timeline", "performed_via_github_app": null, "state_reason": "completed"}