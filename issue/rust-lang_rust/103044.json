{"url": "https://api.github.com/repos/rust-lang/rust/issues/103044", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/103044/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/103044/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/103044/events", "html_url": "https://github.com/rust-lang/rust/issues/103044", "id": 1409049180, "node_id": "I_kwDOAAsO6M5T_GJc", "number": 103044, "title": "rlib-format-packed-bundled-libs test failures on Xcode 14", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123111, "node_id": "MDU6TGFiZWwxMjMxMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-macos", "name": "O-macos", "color": "6e6ec0", "default": false, "description": "Operating system: macOS"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1966877457, "node_id": "MDU6TGFiZWwxOTY2ODc3NDU3", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-critical", "name": "P-critical", "color": "eb6420", "default": false, "description": "Critical priority"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-10-14T09:25:13Z", "updated_at": "2022-11-15T03:37:16Z", "closed_at": "2022-11-15T03:37:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The tests `src/test/run-make/rlib-format-packed-bundled-libs` and `src/test/run-make/rlib-format-packed-bundled-libs-2` are failing with Xcode 14. The output is:\r\n\r\n```\r\nrunning 2 tests\r\nFF\r\nfailures:\r\n\r\n---- [run-make] src/test/run-make/rlib-format-packed-bundled-libs-2 stdout ----\r\n\r\nerror: make failed\r\nstatus: exit status: 2\r\ncommand: \"make\"\r\n--- stdout -------------------------------\r\n# Build strange-named dep.\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2 -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2  native_dep.rs --crate-type=staticlib -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/native_dep.ext\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2 -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2  rust_dep.rs --crate-type=rlib -Zpacked_bundled_libs\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"U.*native_f1\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep.rust_dep.f8908835-cgu.0.rcgu.o:\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n---------------- T __ZN8rust_dep8rust_dep17h46da1ffdf057d344E\r\n                 U _native_f1\r\n\r\n[[[ end stdout ]]]\r\nar t /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" \"native_dep.ext\"\r\n[[[ begin stdout ]]]\r\n__.SYMDEF\r\nlib.rmeta\r\nrust_dep.rust_dep.f8908835-cgu.0.rcgu.o\r\nnative_dep.ext\r\n\r\n[[[ end stdout ]]]\r\n# Make sure compiler doesn't use files, that it shouldn't know about.\r\nrm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/native_dep.ext\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2 -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2  main.rs --extern rust_dep=/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib -Zpacked_bundled_libs\r\n------------------------------------------\r\n--- stderr -------------------------------\r\nwarning: ignoring --out-dir flag due to -o flag\r\n\r\nwarning: 1 warning emitted\r\n\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib:lib.rmeta: no symbols\r\nerror: linking with `cc` failed: exit status: 1\r\n  |\r\n  = note: \"cc\" \"-arch\" \"x86_64\" \"-m64\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/rustciJPqdZ/symbols.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.main.cbcd4161-cgu.0.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.main.cbcd4161-cgu.1.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.main.cbcd4161-cgu.2.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.main.cbcd4161-cgu.3.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.main.cbcd4161-cgu.4.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main.4g86d6gt786od2ny.rcgu.o\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/rustciJPqdZ/native_dep.ext\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd-258e71d5a19fa69d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libpanic_unwind-5b1ca701534fabd3.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libobject-aa5f0fc465004fb6.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libmemchr-3d0c3dc0ed2a3ca7.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libaddr2line-a2f5bcebde3d6ba1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libgimli-1c169b69cac8e3f9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_demangle-4a5c1257c19a64c5.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd_detect-53c2b17aef5da639.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-f0d1d36275bd5157.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libhashbrown-26d526555da8e92a.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libminiz_oxide-6ac28b1a995b7da1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libadler-e2ee1886e035c392.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_alloc-83a804165d411a51.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libunwind-9cde8e1ff18e7da9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-1f3b7d2631393666.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liblibc-18eaf45b9a0638b0.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liballoc-44a61fa47279665f.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_core-9f743963c507336d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcore-3e6d7d0b5b99b826.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcompiler_builtins-d7fc134a6ac5d183.rlib\" \"-lSystem\" \"-lresolv\" \"-lc\" \"-lm\" \"-liconv\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"-o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/main\" \"-Wl,-dead_strip\" \"-nodefaultlibs\"\r\n  = note: ld: in /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib(native_dep.ext), archive member 'native_dep.ext' with length 25521328 is not mach-o or llvm bitcode file '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs-2/rlib-format-packed-bundled-libs-2/librust_dep.rlib'\r\n          clang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nmake: *** [all] Error 1\r\n------------------------------------------\r\n\r\n\r\n---- [run-make] src/test/run-make/rlib-format-packed-bundled-libs stdout ----\r\n\r\nerror: make failed\r\nstatus: exit status: 2\r\ncommand: \"make\"\r\n--- stdout -------------------------------\r\ncc -ffunction-sections -fdata-sections -fPIC -m64 -arch x86_64 -stdlib=libc++ -v -c -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_1.o native_dep_1.c\r\nar crus /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_1.a /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_1.o\r\ncc -ffunction-sections -fdata-sections -fPIC -m64 -arch x86_64 -stdlib=libc++ -v -c -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_2.o native_dep_2.c\r\nar crus /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_2.a /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_2.o\r\ncc -ffunction-sections -fdata-sections -fPIC -m64 -arch x86_64 -stdlib=libc++ -v -c -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_3.o native_dep_3.c\r\nar crus /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_3.a /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_3.o\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs  rust_dep_up.rs --crate-type=rlib -Zpacked_bundled_libs\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"U.*native_f2\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep_up.rust_dep_up.9cf8be89-cgu.0.rcgu.o:\r\n---------------- T __ZN11rust_dep_up11rust_dep_up17h591fcb77681d961dE\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n                 U _native_f2\r\n                 U _native_f3\r\n\r\n[[[ end stdout ]]]\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"U.*native_f3\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep_up.rust_dep_up.9cf8be89-cgu.0.rcgu.o:\r\n---------------- T __ZN11rust_dep_up11rust_dep_up17h591fcb77681d961dE\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n                 U _native_f2\r\n                 U _native_f3\r\n\r\n[[[ end stdout ]]]\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"T.*rust_dep_up\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep_up.rust_dep_up.9cf8be89-cgu.0.rcgu.o:\r\n---------------- T __ZN11rust_dep_up11rust_dep_up17h591fcb77681d961dE\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n                 U _native_f2\r\n                 U _native_f3\r\n\r\n[[[ end stdout ]]]\r\nar t /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" \"native_dep_2\"\r\n[[[ begin stdout ]]]\r\n__.SYMDEF\r\nlib.rmeta\r\nrust_dep_up.rust_dep_up.9cf8be89-cgu.0.rcgu.o\r\nlibnative_dep_2.a\r\nlibnative_dep_3.a\r\n\r\n[[[ end stdout ]]]\r\nar t /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" \"native_dep_3\"\r\n[[[ begin stdout ]]]\r\n__.SYMDEF\r\nlib.rmeta\r\nrust_dep_up.rust_dep_up.9cf8be89-cgu.0.rcgu.o\r\nlibnative_dep_2.a\r\nlibnative_dep_3.a\r\n\r\n[[[ end stdout ]]]\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs  rust_dep_local.rs --extern rlib=/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib -Zpacked_bundled_libs --crate-type=rlib\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"U.*native_f1\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep_local.rust_dep_local.17a839ca-cgu.0.rcgu.o:\r\n                 U __ZN11rust_dep_up11rust_dep_up17h591fcb77681d961dE\r\n---------------- T __ZN14rust_dep_local14rust_dep_local17h9562439c45fb1788E\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n                 U _native_f1\r\n\r\n[[[ end stdout ]]]\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"T.*rust_dep_local\"\r\n[[[ begin stdout ]]]\r\n\r\nlib.rmeta:\r\n\r\nrust_dep_local.rust_dep_local.17a839ca-cgu.0.rcgu.o:\r\n                 U __ZN11rust_dep_up11rust_dep_up17h591fcb77681d961dE\r\n---------------- T __ZN14rust_dep_local14rust_dep_local17h9562439c45fb1788E\r\n                 U __ZN4core9panicking5panic17h2cab1196791b6748E\r\n                 U _native_f1\r\n\r\n[[[ end stdout ]]]\r\nar t /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" \"native_dep_1\"\r\n[[[ begin stdout ]]]\r\n__.SYMDEF\r\nlib.rmeta\r\nrust_dep_local.rust_dep_local.17a839ca-cgu.0.rcgu.o\r\nlibnative_dep_1.a\r\n\r\n[[[ end stdout ]]]\r\n# Make sure compiler doesn't use files, that it shouldn't know about.\r\nrm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/*native_dep_*\r\nDYLD_LIBRARY_PATH=\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs:/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib:\" '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/bin/rustc' --out-dir /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs -L /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs  main.rs --extern lib=/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.exe -Zpacked_bundled_libs --print link-args | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"native_dep_1.*native_dep_2.*native_dep_3\"\r\n[[[ begin stdout ]]]\r\n\"cc\" \"-arch\" \"x86_64\" \"-m64\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/symbols.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.0.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.1.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.2.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.3.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.4.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.4g86d6gt786od2ny.rcgu.o\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_1.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_2.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_3.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd-258e71d5a19fa69d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libpanic_unwind-5b1ca701534fabd3.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libobject-aa5f0fc465004fb6.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libmemchr-3d0c3dc0ed2a3ca7.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libaddr2line-a2f5bcebde3d6ba1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libgimli-1c169b69cac8e3f9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_demangle-4a5c1257c19a64c5.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd_detect-53c2b17aef5da639.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-f0d1d36275bd5157.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libhashbrown-26d526555da8e92a.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libminiz_oxide-6ac28b1a995b7da1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libadler-e2ee1886e035c392.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_alloc-83a804165d411a51.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libunwind-9cde8e1ff18e7da9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-1f3b7d2631393666.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liblibc-18eaf45b9a0638b0.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liballoc-44a61fa47279665f.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_core-9f743963c507336d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcore-3e6d7d0b5b99b826.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcompiler_builtins-d7fc134a6ac5d183.rlib\" \"-lSystem\" \"-lresolv\" \"-lc\" \"-lm\" \"-liconv\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"-o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.exe\" \"-Wl,-dead_strip\" \"-nodefaultlibs\"\r\n\r\n[[[ end stdout ]]]\r\n\"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin\"/llvm-nm /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.exe | \"/Users/eric/Proj/rust/rust/src/etc/cat-and-grep.sh\" -e \"T.*native_f1\"\r\n[[[ begin stdout ]]]\r\n\r\n[[[ end stdout ]]]\r\nError: cannot match: T.*native_f1\r\n------------------------------------------\r\n--- stderr -------------------------------\r\nApple clang version 14.0.0 (clang-1400.0.29.102)\r\nTarget: x86_64-apple-darwin21.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx12.0.0 -Wundef-prefix=TARGET_OS_ -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -Werror=implicit-function-declaration -emit-obj -mrelax-all --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name native_dep_1.c -mrelocation-model pic -pic-level 2 -mframe-pointer=all -fno-strict-return -fno-rounding-math -funwind-tables=2 -target-sdk-version=12.3 -fvisibility-inlines-hidden-static-local-var -target-cpu penryn -tune-cpu generic -debugger-tuning=lldb -target-linker-version 819.6 -v -ffunction-sections -fdata-sections -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Wno-reorder-init-list -Wno-implicit-int-float-conversion -Wno-c99-designator -Wno-final-dtor-non-final-class -Wno-extra-semi-stmt -Wno-misleading-indentation -Wno-quoted-include-in-framework-header -Wno-implicit-fallthrough -Wno-enum-enum-conversion -Wno-enum-float-conversion -Wno-elaborated-enum-base -Wno-reserved-identifier -Wno-gnu-folding-constant -Wno-cast-function-type -Wno-bitwise-instead-of-logical -fdebug-compilation-dir=/Users/eric/Proj/rust/rust/src/test/run-make/rlib-format-packed-bundled-libs -ferror-limit 19 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fgnuc-version=4.2.1 -fmax-type-align=16 -fcommon -clang-vendor-feature=+messageToSelfInClassMethodIdReturnType -clang-vendor-feature=+disableInferNewAvailabilityFromInit -clang-vendor-feature=+disableNonDependentMemberExprInCurrentInstantiation -fno-odr-hash-protocols -clang-vendor-feature=+enableAggressiveVLAFolding -clang-vendor-feature=+revert09abecef7bbf -clang-vendor-feature=+thisNoAlignAttr -clang-vendor-feature=+thisNoNullAttr -mllvm -disable-aligned-alloc-awareness=1 -D__GCC_HAVE_DWARF2_CFI_ASM=1 -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_1.o -x c native_dep_1.c\r\nclang -cc1 version 14.0.0 (clang-1400.0.29.102) default target x86_64-apple-darwin21.6.0\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include\"\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/Library/Frameworks\"\r\n#include \"...\" search starts here:\r\n#include <...> search starts here:\r\n /usr/local/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)\r\nEnd of search list.\r\nApple clang version 14.0.0 (clang-1400.0.29.102)\r\nTarget: x86_64-apple-darwin21.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx12.0.0 -Wundef-prefix=TARGET_OS_ -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -Werror=implicit-function-declaration -emit-obj -mrelax-all --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name native_dep_2.c -mrelocation-model pic -pic-level 2 -mframe-pointer=all -fno-strict-return -fno-rounding-math -funwind-tables=2 -target-sdk-version=12.3 -fvisibility-inlines-hidden-static-local-var -target-cpu penryn -tune-cpu generic -debugger-tuning=lldb -target-linker-version 819.6 -v -ffunction-sections -fdata-sections -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Wno-reorder-init-list -Wno-implicit-int-float-conversion -Wno-c99-designator -Wno-final-dtor-non-final-class -Wno-extra-semi-stmt -Wno-misleading-indentation -Wno-quoted-include-in-framework-header -Wno-implicit-fallthrough -Wno-enum-enum-conversion -Wno-enum-float-conversion -Wno-elaborated-enum-base -Wno-reserved-identifier -Wno-gnu-folding-constant -Wno-cast-function-type -Wno-bitwise-instead-of-logical -fdebug-compilation-dir=/Users/eric/Proj/rust/rust/src/test/run-make/rlib-format-packed-bundled-libs -ferror-limit 19 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fgnuc-version=4.2.1 -fmax-type-align=16 -fcommon -clang-vendor-feature=+messageToSelfInClassMethodIdReturnType -clang-vendor-feature=+disableInferNewAvailabilityFromInit -clang-vendor-feature=+disableNonDependentMemberExprInCurrentInstantiation -fno-odr-hash-protocols -clang-vendor-feature=+enableAggressiveVLAFolding -clang-vendor-feature=+revert09abecef7bbf -clang-vendor-feature=+thisNoAlignAttr -clang-vendor-feature=+thisNoNullAttr -mllvm -disable-aligned-alloc-awareness=1 -D__GCC_HAVE_DWARF2_CFI_ASM=1 -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_2.o -x c native_dep_2.c\r\nclang -cc1 version 14.0.0 (clang-1400.0.29.102) default target x86_64-apple-darwin21.6.0\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include\"\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/Library/Frameworks\"\r\n#include \"...\" search starts here:\r\n#include <...> search starts here:\r\n /usr/local/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)\r\nEnd of search list.\r\nApple clang version 14.0.0 (clang-1400.0.29.102)\r\nTarget: x86_64-apple-darwin21.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx12.0.0 -Wundef-prefix=TARGET_OS_ -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -Werror=implicit-function-declaration -emit-obj -mrelax-all --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name native_dep_3.c -mrelocation-model pic -pic-level 2 -mframe-pointer=all -fno-strict-return -fno-rounding-math -funwind-tables=2 -target-sdk-version=12.3 -fvisibility-inlines-hidden-static-local-var -target-cpu penryn -tune-cpu generic -debugger-tuning=lldb -target-linker-version 819.6 -v -ffunction-sections -fdata-sections -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include -internal-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include -internal-externc-isystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Wno-reorder-init-list -Wno-implicit-int-float-conversion -Wno-c99-designator -Wno-final-dtor-non-final-class -Wno-extra-semi-stmt -Wno-misleading-indentation -Wno-quoted-include-in-framework-header -Wno-implicit-fallthrough -Wno-enum-enum-conversion -Wno-enum-float-conversion -Wno-elaborated-enum-base -Wno-reserved-identifier -Wno-gnu-folding-constant -Wno-cast-function-type -Wno-bitwise-instead-of-logical -fdebug-compilation-dir=/Users/eric/Proj/rust/rust/src/test/run-make/rlib-format-packed-bundled-libs -ferror-limit 19 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fgnuc-version=4.2.1 -fmax-type-align=16 -fcommon -clang-vendor-feature=+messageToSelfInClassMethodIdReturnType -clang-vendor-feature=+disableInferNewAvailabilityFromInit -clang-vendor-feature=+disableNonDependentMemberExprInCurrentInstantiation -fno-odr-hash-protocols -clang-vendor-feature=+enableAggressiveVLAFolding -clang-vendor-feature=+revert09abecef7bbf -clang-vendor-feature=+thisNoAlignAttr -clang-vendor-feature=+thisNoNullAttr -mllvm -disable-aligned-alloc-awareness=1 -D__GCC_HAVE_DWARF2_CFI_ASM=1 -o /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/libnative_dep_3.o -x c native_dep_3.c\r\nclang -cc1 version 14.0.0 (clang-1400.0.29.102) default target x86_64-apple-darwin21.6.0\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include\"\r\nignoring nonexistent directory \"/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/Library/Frameworks\"\r\n#include \"...\" search starts here:\r\n#include <...> search starts here:\r\n /usr/local/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/14.0.0/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\r\n /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)\r\nEnd of search list.\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib:lib.rmeta: no symbols\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib:lib.rmeta: no symbols\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib:lib.rmeta: no symbols\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib:lib.rmeta: no symbols\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib:lib.rmeta: no symbols\r\nwarning: ignoring --out-dir flag due to -o flag\r\n\r\nerror: linking with `cc` failed: exit status: 1\r\n  |\r\n  = note: \"cc\" \"-arch\" \"x86_64\" \"-m64\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/symbols.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.0.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.1.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.2.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.3.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.main.cbcd4161-cgu.4.rcgu.o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.4g86d6gt786od2ny.rcgu.o\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_1.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_up.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_2.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/rustchI2eOT/libnative_dep_3.a\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd-258e71d5a19fa69d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libpanic_unwind-5b1ca701534fabd3.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libobject-aa5f0fc465004fb6.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libmemchr-3d0c3dc0ed2a3ca7.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libaddr2line-a2f5bcebde3d6ba1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libgimli-1c169b69cac8e3f9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_demangle-4a5c1257c19a64c5.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libstd_detect-53c2b17aef5da639.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-f0d1d36275bd5157.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libhashbrown-26d526555da8e92a.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libminiz_oxide-6ac28b1a995b7da1.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libadler-e2ee1886e035c392.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_alloc-83a804165d411a51.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libunwind-9cde8e1ff18e7da9.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-1f3b7d2631393666.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liblibc-18eaf45b9a0638b0.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/liballoc-44a61fa47279665f.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_core-9f743963c507336d.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcore-3e6d7d0b5b99b826.rlib\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib/libcompiler_builtins-d7fc134a6ac5d183.rlib\" \"-lSystem\" \"-lresolv\" \"-lc\" \"-lm\" \"-liconv\" \"-L\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/stage1/lib/rustlib/x86_64-apple-darwin/lib\" \"-o\" \"/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.exe\" \"-Wl,-dead_strip\" \"-nodefaultlibs\"\r\n  = note: ld: in /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib(libnative_dep_1.a), archive member 'libnative_dep_1.a' with length 832 is not mach-o or llvm bitcode file '/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/librust_dep_local.rlib'\r\n          clang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\n\r\nerror: aborting due to previous error; 1 warning emitted\r\n\r\n/Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/ci-llvm/bin/llvm-nm: error: /Users/eric/Proj/rust/rust/build/x86_64-apple-darwin/test/run-make/rlib-format-packed-bundled-libs/rlib-format-packed-bundled-libs/main.exe: No such file or directory\r\nmake: *** [all] Error 1\r\n------------------------------------------\r\n\r\n\r\n\r\nfailures:\r\n    [run-make] src/test/run-make/rlib-format-packed-bundled-libs\r\n    [run-make] src/test/run-make/rlib-format-packed-bundled-libs-2\r\n\r\ntest result: FAILED. 0 passed; 2 failed; 0 ignored; 0 measured; 68 filtered out; finished in 4.69s\r\n```\r\n\r\nI'm not sure if it is helpful, but this error is curiously similar to the error that versions older than rust 1.54 produce when trying to build *any* program with Xcode 14. That was fixed via #84449.\r\nSee also https://rust-lang.zulipchat.com/#narrow/stream/182449-t-compiler.2Fhelp/topic/.E2.9C.94.20How.20can.20I.20fix.20Rust.201.2E53.2E0.20or.20earlier.20to.20run.20on.20macOS.2012.2E6.3F/near/299263887 where @bjorn3 gave a little more context on that.\r\n\r\ncc @BelovDV who added these tests in #100101.\r\n\r\nMarking as P-critical for now because GitHub is updating `macos-latest` to `macos-12` *now*, intending to complete by December 1. If that transition hits `rust-lang-ci`, then CI will no longer pass. See https://github.com/actions/runner-images/issues/6384 for more information. The priority can be lowered with workarounds such as manually setting `macos-11` in CI or switching to an older Xcode, or disabling these tests on macOS. If it is a simple fix, that would be ideal to try to get that in quickly.\r\n\r\n### Meta\r\nThis is on latest master 6b3ede3f7bc502eba7bbd202b4b9312d812adcd7.\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/103044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/103044/timeline", "performed_via_github_app": null, "state_reason": "completed"}