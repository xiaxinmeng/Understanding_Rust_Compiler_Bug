{"url": "https://api.github.com/repos/rust-lang/rust/issues/42879", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42879/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42879/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42879/events", "html_url": "https://github.com/rust-lang/rust/issues/42879", "id": 238307287, "node_id": "MDU6SXNzdWUyMzgzMDcyODc=", "number": 42879, "title": "Deflate settings changed when replacing in-tree flate with flate2", "user": {"login": "oyvindln", "id": 8319210, "node_id": "MDQ6VXNlcjgzMTkyMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8319210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oyvindln", "html_url": "https://github.com/oyvindln", "followers_url": "https://api.github.com/users/oyvindln/followers", "following_url": "https://api.github.com/users/oyvindln/following{/other_user}", "gists_url": "https://api.github.com/users/oyvindln/gists{/gist_id}", "starred_url": "https://api.github.com/users/oyvindln/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oyvindln/subscriptions", "organizations_url": "https://api.github.com/users/oyvindln/orgs", "repos_url": "https://api.github.com/users/oyvindln/repos", "events_url": "https://api.github.com/users/oyvindln/events{/privacy}", "received_events_url": "https://api.github.com/users/oyvindln/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-06-24T09:34:50Z", "updated_at": "2017-07-11T10:07:39Z", "closed_at": "2017-07-11T10:07:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In the [pr](https://github.com/rust-lang/rust/pull/42664) that replaced the in-tree flate library, with flate2, there were some changes to how the compression was used, that may not have been intentional. I was suggested to make an issue after commenting there as the PR was already merged.\r\n\r\nIs using the [`Compression::Default`](https://github.com/rust-lang/rust/pull/42664/commits/a4024c58e1e5c92cfe3ed39ed9f5b96f3f38122e#diff-1b71e145dde424ac83e674eef22373d8R575) compression level intended? The flate functions were changed to use a faster compression level some time ago (see #37298), going back to a higher compression setting could cause some performance regressions. I think the previous settings would be equal to using the `Compression::Fast` setting in flate2.\r\n\r\nAlso, the old functions [didn't use a zlib wrapper](https://github.com/rust-lang/rust/pull/42664/commits/a4024c58e1e5c92cfe3ed39ed9f5b96f3f38122e#diff-0d79b8268f4ae23d86e5c04fe8a3f502L98) from what I can see (there is a flag for that), but the new code [does](https://github.com/rust-lang/rust/pull/42664/commits/a4024c58e1e5c92cfe3ed39ed9f5b96f3f38122e#diff-70b2d0110e1bf5edce7452fb1e35ec9bR865). Don't know if this could cause some issues when trying to use libs from different versions, though at least it adds 6 bytes of overhead due to the header and checksum.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42879/timeline", "performed_via_github_app": null, "state_reason": "completed"}