{"url": "https://api.github.com/repos/rust-lang/rust/issues/56475", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56475/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56475/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56475/events", "html_url": "https://github.com/rust-lang/rust/issues/56475", "id": 386960334, "node_id": "MDU6SXNzdWUzODY5NjAzMzQ=", "number": 56475, "title": "run-make-fulldeps/c-link-to-rust-va-list-fn fails on aarch64-linux-gnu", "user": {"login": "parched", "id": 5975405, "node_id": "MDQ6VXNlcjU5NzU0MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5975405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/parched", "html_url": "https://github.com/parched", "followers_url": "https://api.github.com/users/parched/followers", "following_url": "https://api.github.com/users/parched/following{/other_user}", "gists_url": "https://api.github.com/users/parched/gists{/gist_id}", "starred_url": "https://api.github.com/users/parched/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/parched/subscriptions", "organizations_url": "https://api.github.com/users/parched/orgs", "repos_url": "https://api.github.com/users/parched/repos", "events_url": "https://api.github.com/users/parched/events{/privacy}", "received_events_url": "https://api.github.com/users/parched/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 45472092, "node_id": "MDU6TGFiZWw0NTQ3MjA5Mg==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-ffi", "name": "A-ffi", "color": "f7e101", "default": false, "description": "Area: Foreign Function Interface (FFI)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 2138221489, "node_id": "MDU6TGFiZWwyMTM4MjIxNDg5", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-c_variadic", "name": "F-c_variadic", "color": "f9c0cc", "default": false, "description": "`#![feature(c_variadic)]`"}, {"id": 3940166907, "node_id": "LA_kwDOAAsO6M7q2iz7", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-AArch64", "name": "O-AArch64", "color": "6e6ec0", "default": false, "description": "Armv8-A or later processors in AArch64 mode"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-12-03T19:05:02Z", "updated_at": "2022-03-18T01:11:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running `python2.7 ./x.py test   --stage 2` on `aarch64-linux-gnu` I end up with the following failure\r\n```\r\n---- [run-make] run-make-fulldeps/c-link-to-rust-va-list-fn stdou\r\nt ----                                                           \r\n                                                                 \r\nerror: make failed                                               \r\nstatus: exit code: 2                                             \r\ncommand: \"make\"                                                  \r\nstdout:                                                          \r\n------------------------------------------                       \r\nLD_LIBRARY_PATH=\"/usr/src/myapp/build/aarch64-unknown-linux-gnu/t\r\nest/run-make-fulldeps/c-link-to-rust-va-list-fn/c-link-to-rust-va\r\n-list-fn:/usr/src/myapp/build/aarch64-unknown-linux-gnu/stage2/li\r\nb:/usr/src/myapp/build/aarch64-unknown-linux-gnu/stage0-bootstrap\r\n-tools/aarch64-unknown-linux-gnu/release/deps:/usr/src/myapp/buil\r\nd/aarch64-unknown-linux-gnu/stage0/lib:\" '/usr/src/myapp/build/aa\r\nrch64-unknown-linux-gnu/stage2/bin/rustc' --out-dir /usr/src/myap\r\np/build/aarch64-unknown-linux-gnu/test/run-make-fulldeps/c-link-t\r\no-rust-va-list-fn/c-link-to-rust-va-list-fn -L /usr/src/myapp/bui\r\nld/aarch64-unknown-linux-gnu/test/run-make-fulldeps/c-link-to-rus\r\nt-va-list-fn/c-link-to-rust-va-list-fn  checkrust.rs             \r\ncc -ffunction-sections -fdata-sections -fPIC test.c /usr/src/myap\r\np/build/aarch64-unknown-linux-gnu/test/run-make-fulldeps/c-link-t\r\no-rust-va-list-fn/c-link-to-rust-va-list-fn/libcheckrust.a -o /us\r\nr/src/myapp/build/aarch64-unknown-linux-gnu/test/run-make-fulldep\r\ns/c-link-to-rust-va-list-fn/c-link-to-rust-va-list-fn/test -lm -l\r\nrt -ldl -lpthread \r\nLD_LIBRARY_PATH=\"/usr/src/myapp/build/aarch64-unknown-linux-gnu/t\r\nest/run-make-fulldeps/c-link-to-rust-va-list-fn/c-link-to-rust-va\r\n-list-fn:/usr/src/myapp/build/aarch64-unknown-linux-gnu/stage2/li\r\nb/rustlib/aarch64-unknown-linux-gnu/lib:/usr/src/myapp/build/aarc\r\nh64-unknown-linux-gnu/stage0-bootstrap-tools/aarch64-unknown-linu\r\nx-gnu/release/deps:/usr/src/myapp/build/aarch64-unknown-linux-gnu\r\n/stage0/lib:\" /usr/src/myapp/build/aarch64-unknown-linux-gnu/test\r\n/run-make-fulldeps/c-link-to-rust-va-list-fn/c-link-to-rust-va-li\r\nst-fn/test                                                       \r\nMakefile:4: recipe for target 'all' failed                       \r\n                                                                 \r\n------------------------------------------                       \r\nstderr:                                                          \r\n------------------------------------------                       \r\ntest: test.c:32: main: Assertion `test_rust(check_list_0, 0x01LL,\r\n 0x02, 0x03LL) == 0' failed.                                     \r\nAborted (core dumped)                                            \r\nmake: *** [all] Error 134                                        \r\n                                                                 \r\n------------------------------------------\r\n```\r\n\r\nI was building this commit https://github.com/rust-lang/rust/commit/9cd3bef4cfaaac2a608682d4b0834cda344249e0\r\n\r\nI haven't had the chance to debug it yet but I'll take a look when I get a chance.\r\n\r\ncc @dlrobertson ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56475/timeline", "performed_via_github_app": null, "state_reason": null}