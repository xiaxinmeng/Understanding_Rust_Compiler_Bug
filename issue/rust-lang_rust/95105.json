{"url": "https://api.github.com/repos/rust-lang/rust/issues/95105", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95105/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95105/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95105/events", "html_url": "https://github.com/rust-lang/rust/issues/95105", "id": 1174176529, "node_id": "I_kwDOAAsO6M5F_IMR", "number": 95105, "title": "Compiler reports `field is never read` even though it is used in an `impl`ementation", "user": {"login": "HenrikBach1", "id": 10473382, "node_id": "MDQ6VXNlcjEwNDczMzgy", "avatar_url": "https://avatars.githubusercontent.com/u/10473382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HenrikBach1", "html_url": "https://github.com/HenrikBach1", "followers_url": "https://api.github.com/users/HenrikBach1/followers", "following_url": "https://api.github.com/users/HenrikBach1/following{/other_user}", "gists_url": "https://api.github.com/users/HenrikBach1/gists{/gist_id}", "starred_url": "https://api.github.com/users/HenrikBach1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HenrikBach1/subscriptions", "organizations_url": "https://api.github.com/users/HenrikBach1/orgs", "repos_url": "https://api.github.com/users/HenrikBach1/repos", "events_url": "https://api.github.com/users/HenrikBach1/events{/privacy}", "received_events_url": "https://api.github.com/users/HenrikBach1/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-03-19T05:03:11Z", "updated_at": "2022-03-19T15:26:17Z", "closed_at": "2022-03-19T15:26:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nIn my opinion, the below code forces the compiler to emit a false error on the field `seasonal_fruit` of `struct Breakfast`, which is apparently wrong, due to it is used in `impl Breakfast`:\r\n\r\n```rust\r\nmod back_of_house {\r\n    pub struct Breakfast {\r\n        pub toast: String,\r\n        seasonal_fruit: String,\r\n    }\r\n\r\n    impl Breakfast {\r\n        pub fn summer(toast: &str) -> Breakfast {\r\n            Breakfast {\r\n                toast: String::from(toast),\r\n                seasonal_fruit: String::from(\"peaches\"),\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\npub fn eat_at_restaurant() {\r\n    // Order a breakfast in the summer with Rye toast\r\n    let mut meal = back_of_house::Breakfast::summer(\"Rye\");\r\n    // Change our mind about what bread we'd like\r\n    meal.toast = String::from(\"Wheat\");\r\n    println!(\"I'd like {} toast please\", meal.toast);\r\n\r\n    // The next line won't compile if we uncomment it; we're not allowed\r\n    // to see or modify the seasonal fruit that comes with the meal\r\n    // meal.seasonal_fruit = String::from(\"blueberries\");\r\n}\r\n\r\nfn main ()\r\n{\r\n    eat_at_restaurant()\r\n}\r\n```\r\n\r\nThe compiler emits the error:\r\n```\r\n[{\r\n\t\"resource\": \"/projects/rust/paths-in-modules-7_3/src/main.rs\",\r\n\t\"owner\": \"rust-file:///projects/rust/paths-in-modules-7_3\",\r\n\t\"code\": \"dead_code\",\r\n\t\"severity\": 4,\r\n\t\"message\": \"field is never read: `seasonal_fruit`\\n\\nnote: `#[warn(dead_code)]` on by default\",\r\n\t\"source\": \"rustc\",\r\n\t\"startLineNumber\": 4,\r\n\t\"startColumn\": 9,\r\n\t\"endLineNumber\": 4,\r\n\t\"endColumn\": 31\r\n}]\r\n```\r\nThe compiler that was used:\r\n```\r\nvscode \u279c /projects/rust/paths-in-modules-7_3 (master \u2717) $ rustc --version\r\nrustc 1.59.0 (9d1b2106e 2022-02-23)\r\n```\r\n\r\nThank you\r\nHenrik", "closed_by": {"login": "HenrikBach1", "id": 10473382, "node_id": "MDQ6VXNlcjEwNDczMzgy", "avatar_url": "https://avatars.githubusercontent.com/u/10473382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HenrikBach1", "html_url": "https://github.com/HenrikBach1", "followers_url": "https://api.github.com/users/HenrikBach1/followers", "following_url": "https://api.github.com/users/HenrikBach1/following{/other_user}", "gists_url": "https://api.github.com/users/HenrikBach1/gists{/gist_id}", "starred_url": "https://api.github.com/users/HenrikBach1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HenrikBach1/subscriptions", "organizations_url": "https://api.github.com/users/HenrikBach1/orgs", "repos_url": "https://api.github.com/users/HenrikBach1/repos", "events_url": "https://api.github.com/users/HenrikBach1/events{/privacy}", "received_events_url": "https://api.github.com/users/HenrikBach1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95105/timeline", "performed_via_github_app": null, "state_reason": "completed"}