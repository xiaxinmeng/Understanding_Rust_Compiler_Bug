{"url": "https://api.github.com/repos/rust-lang/rust/issues/21554", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21554/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21554/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21554/events", "html_url": "https://github.com/rust-lang/rust/issues/21554", "id": 55312369, "node_id": "MDU6SXNzdWU1NTMxMjM2OQ==", "number": 21554, "title": "Another instance of ICE with \"thread 'rustc' panicked at 'Box<Any>'\"", "user": {"login": "pcn", "id": 1056756, "node_id": "MDQ6VXNlcjEwNTY3NTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1056756?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcn", "html_url": "https://github.com/pcn", "followers_url": "https://api.github.com/users/pcn/followers", "following_url": "https://api.github.com/users/pcn/following{/other_user}", "gists_url": "https://api.github.com/users/pcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcn/subscriptions", "organizations_url": "https://api.github.com/users/pcn/orgs", "repos_url": "https://api.github.com/users/pcn/repos", "events_url": "https://api.github.com/users/pcn/events{/privacy}", "received_events_url": "https://api.github.com/users/pcn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-01-23T18:03:13Z", "updated_at": "2015-01-27T02:36:38Z", "closed_at": "2015-01-27T01:54:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Running through rust-by-example, I ran this bit:\n\n``` rust\n// A tuple struct that can be compared\n#[derive(PartialEq, PartialOrd)]\nstruct Centimeters(f64);\n\n// A tuple struct that can be printd\n#[derive(Show)]\nstruct Inches(i32);\n\nimpl Inches {\n    fn to_centimeters(&self) -> Centimeters {\n        let &Inches(inches) = self;\n\n        Centimeters(Inches as f64 * 2.54)\n    }\n}\n```\n\nand got this:\n\n```\nPeters-MacBook-Pro:30.1 peter$ RUST_BACKTRACE=1 rustc derive.rs\nderive.rs:11:21: 11:27 warning: unused variable: `inches`, #[warn(unused_variables)] on by default\nderive.rs:11         let &Inches(inches) = self;\n                                 ^~~~~~\nerror: internal compiler error: translating unsupported cast: fn(i32) -> Inches {Inches} (cast_pointer) -> f64 (cast_float)\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:189\n\nstack backtrace:\n   1:        0x10da082ec - sys::backtrace::write::h6d914e9ce03fb08bx2t\n   2:        0x10da2a9df - failure::on_fail::h807ef8bdd2936d8cT4z\n   3:        0x10d99720e - rt::unwind::begin_unwind_inner::he55ce02652fb4cc0PMz\n   4:        0x10b5aba1f - rt::unwind::begin_unwind::h12599395325545247643\n   5:        0x10b5ac38b - diagnostic::Handler::bug::hbeddb164372bc7acp4E\n   6:        0x10abca770 - collections::hash::map::HashMap<K, V, S>::reserve::h16232836280164940037\n   7:        0x10a75d513 - trans::expr::trans_imm_cast::h83dd8ae803a2f220Qbk\n   8:        0x10a74312d - trans::expr::trans_unadjusted::hf2ec954573ac808ftji\n   9:        0x10a6fce96 - trans::expr::trans::ha5bf63d6a84d8ec01Bh\n  10:        0x10a75afed - trans::expr::trans_binary::h2a4440e779ff99c6QSj\n  11:        0x10a743361 - trans::expr::trans_unadjusted::hf2ec954573ac808ftji\n  12:        0x10a6fbfb9 - trans::expr::trans_into::h4e944c804c611a9bxyh\n  13:        0x10a778fba - trans::expr::trans_adt::ha077fbb38277837abqj\n  14:        0x10a70d9b5 - trans::base::trans_named_tuple_constructor::heb33c0cdcee90aecQcu\n  15:        0x10a73e88f - trans::callee::trans_call_inner::h6585616855953466240\n  16:        0x10a745463 - trans::expr::trans_rvalue_dps_unadjusted::h9e02d37aa8c1b9cfgSi\n  17:        0x10a6fbeeb - trans::expr::trans_into::h4e944c804c611a9bxyh\n  18:        0x10a6fca17 - trans::controlflow::trans_block::ha700214f5859c953h3d\n  19:        0x10a7c4ce2 - trans::base::trans_closure::h195893708140d688mYt\n  20:        0x10a6e9019 - trans::base::trans_fn::hdddb662edd5312f8Z8t\n  21:        0x10a6e4eab - trans::base::trans_item::h5344214653540a949vu\n  22:        0x10a7cae6c - trans::base::trans_crate::h065c7d963367e060jrv\n  23:        0x10a14a234 - driver::phase_4_translate_to_llvm::h6d9902c87d882ff0SNa\n  24:        0x10a127169 - driver::compile_input::h09cad041de062210Bba\n  25:        0x10a1e5566 - run_compiler::h3ce2e073cefd54a3R8b\n  26:        0x10a1e28b3 - thunk::F.Invoke<A, R>::invoke::h4048511533083888351\n  27:        0x10a1e1718 - rt::unwind::try::try_fn::h5469566156528817632\n  28:        0x10daa0629 - rust_try_inner\n  29:        0x10daa0616 - rust_try\n  30:        0x10a1e1d56 - thunk::F.Invoke<A, R>::invoke::h15171032310353254860\n  31:        0x10da17bd1 - sys::thread::thread_start::h205b4d139d44ba45XOw\n  32:     0x7fff8b7b42fc - _pthread_body\n  33:     0x7fff8b7b4279 - _pthread_body\n```\n\nThis looks similar to a number of other issues with an ICE, but the stack looks different from the other issues I've seen.\n\nRelevant info:\n\n```\nPeters-MacBook-Pro:30.1 peter$ uname -a\nDarwin Peters-MacBook-Pro.local 14.0.0 Darwin Kernel Version 14.0.0: Fri Sep 19 00:26:44 PDT 2014; root:xnu-2782.1.97~2/RELEASE_X86_64 x86_64\nPeters-MacBook-Pro:30.1 peter$ rustc --version\nrustc 1.0.0-nightly (4874ca36f 2015-01-23 00:18:57 +0000)\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21554/timeline", "performed_via_github_app": null, "state_reason": "completed"}