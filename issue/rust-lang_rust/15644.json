{"url": "https://api.github.com/repos/rust-lang/rust/issues/15644", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15644/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15644/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15644/events", "html_url": "https://github.com/rust-lang/rust/issues/15644", "id": 37741730, "node_id": "MDU6SXNzdWUzNzc0MTczMA==", "number": 15644, "title": "Benign segfault in gdb on windows", "user": {"login": "mrmonday", "id": 165689, "node_id": "MDQ6VXNlcjE2NTY4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/165689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mrmonday", "html_url": "https://github.com/mrmonday", "followers_url": "https://api.github.com/users/mrmonday/followers", "following_url": "https://api.github.com/users/mrmonday/following{/other_user}", "gists_url": "https://api.github.com/users/mrmonday/gists{/gist_id}", "starred_url": "https://api.github.com/users/mrmonday/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mrmonday/subscriptions", "organizations_url": "https://api.github.com/users/mrmonday/orgs", "repos_url": "https://api.github.com/users/mrmonday/repos", "events_url": "https://api.github.com/users/mrmonday/events{/privacy}", "received_events_url": "https://api.github.com/users/mrmonday/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 60329014, "node_id": "MDU6TGFiZWw2MDMyOTAxNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-low", "name": "P-low", "color": "eb6420", "default": false, "description": "Low priority"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2014-07-13T13:57:14Z", "updated_at": "2015-02-20T04:57:56Z", "closed_at": "2015-02-20T02:38:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "# Updated Description\n\nWhen running the program under windows below, it segfaults during startup, but you can get pass the startup by continuing. This is counter intuitive and can we avoid it?\n# Original Description\n\n**Running tests using a debugger on Windows fails**\n\nWhen running tests using a debugger on Windows, the program will always segfault.\n\n``` rust\n#[test]\nfn test1() {\n}\n```\n\nCompile/debug with with:\n\n``` bash\n$ rustc -g --test test.rs\n$ gdb test.exe\nGNU gdb (GDB) 7.7.1\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"i686-w64-mingw32\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from test.exe...done.\n(gdb) r\nStarting program: C:\\msys64\\home\\Administrator\\rust\\test.exe\n[New Thread 3572.0xde4]\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x76fb0fe8 in ntdll!ZwMapViewOfSection () from C:\\Windows\\SYSTEM32\\ntdll.dll\n(gdb) bt\n#0  0x76fb0fe8 in ntdll!ZwMapViewOfSection ()\n   from C:\\Windows\\SYSTEM32\\ntdll.dll\n#1  0x76fde09e in ntdll!LdrFindEntryForAddress ()\n   from C:\\Windows\\SYSTEM32\\ntdll.dll\n#2  0x76fdd4d5 in ntdll!RtlGetLastWin32Error ()\n   from C:\\Windows\\SYSTEM32\\ntdll.dll\n#3  0x74630000 in ?? ()\n#4  0x76fdc94b in ntdll!LdrLoadAlternateResourceModuleEx ()\n   from C:\\Windows\\SYSTEM32\\ntdll.dll\n#5  0x74630000 in ?? ()\n#6  0x76fde744 in ntdll!RtlAddressInSectionTable ()\n   from C:\\Windows\\SYSTEM32\\ntdll.dll\n#7  0x76f7e54c in ntdll!RtlFindMessage () from C:\\Windows\\SYSTEM32\\ntdll.dll\n#8  0x74678b94 in KERNELBASE!CreatePrivateNamespaceW ()\n   from C:\\Windows\\SysWOW64\\KernelBase.dll\n#9  0x74678d26 in KERNELBASE!FormatMessageW ()\n   from C:\\Windows\\SysWOW64\\KernelBase.dll\n#10 0x00525782 in os::error_string::ha507dd886b60644fNNg ()\n#11 0x004bdef9 in io::file::stat::h766868cc50bec571K2c ()\n#12 0x004d6840 in io::IoFactory.rtio..IoFactory::fs_stat::h5b0d3b7472a87d2bfte\n    ()\n#13 0x00538a9c in io::fs::stat::closure.Name$LP$27247$RP$ ()\n#14 0x0053896c in rtio::LocalIo$LT$$x27a$GT$::maybe_raise::h12780674083238291362 ()\n#15 0x0053801c in io::fs::stat::h8b8912ef65ffabcftHi ()\n#16 0x0054533c in io::fs::path..Path::exists::h66a762d184d98103cyj ()\n#17 0x0045faa7 in terminfo::searcher::get_dbpath_for_term::h288f0fa692bef1cbBda ()\n#18 0x00462dd3 in terminfo::searcher::open::h2ae82e049270bf631ha ()\n#19 0x0047621f in terminfo::TerminfoTerminal$LT$T$GT$.Terminal$LT$T$GT$::new::h5615786229128530927 ()\n#20 0x00475de0 in stdout::hc17a42264ec14106Tlc ()\n#21 0x00407258 in run_tests_console::h24b6ae27a1813eccIBc ()\n#22 0x00404c8a in test_main::h15a659ef08df8c8cvtb ()\n#23 0x0041113f in test_main_static::hc1b94da25d253b82xwb ()\n#24 0x004016b3 in __test::main::h22be631b8cdb6d0dkaa ()\n#25 0x004d9cbc in start::closure.Name$LP$8589$RP$ ()\n#26 0x005a5e25 in unwind::try::try_fn::hb77d7400c1f6ab7a8zd ()\n#27 0x005a72d6 in rust_try ()\n#28 0x005a3b67 in unwind::try::h774dd8e128a93adaLxd ()\n#29 0x005a38fa in task::Task::run::hbc2bed2f2b2ad1f5bYc ()\n#30 0x004d9b85 in start::h6650db14ba16f5228Me ()\n#31 0x004d9a21 in lang_start::h7f0ca33914ef8e74sMe ()\n#32 0x00401740 in main ()\n```\n\nThis is with Windows Server 2012, 64 bit; binaries are 32 bit.\n", "closed_by": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15644/timeline", "performed_via_github_app": null, "state_reason": "completed"}