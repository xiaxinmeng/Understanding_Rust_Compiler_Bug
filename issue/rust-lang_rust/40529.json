{"url": "https://api.github.com/repos/rust-lang/rust/issues/40529", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40529/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40529/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40529/events", "html_url": "https://github.com/rust-lang/rust/issues/40529", "id": 214226299, "node_id": "MDU6SXNzdWUyMTQyMjYyOTk=", "number": 40529, "title": "rustbuild: if stage0 binaries can't be run, kindly inform user", "user": {"login": "cengiz-io", "id": 123910, "node_id": "MDQ6VXNlcjEyMzkxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/123910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cengiz-io", "html_url": "https://github.com/cengiz-io", "followers_url": "https://api.github.com/users/cengiz-io/followers", "following_url": "https://api.github.com/users/cengiz-io/following{/other_user}", "gists_url": "https://api.github.com/users/cengiz-io/gists{/gist_id}", "starred_url": "https://api.github.com/users/cengiz-io/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cengiz-io/subscriptions", "organizations_url": "https://api.github.com/users/cengiz-io/orgs", "repos_url": "https://api.github.com/users/cengiz-io/repos", "events_url": "https://api.github.com/users/cengiz-io/events{/privacy}", "received_events_url": "https://api.github.com/users/cengiz-io/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-03-14T22:30:56Z", "updated_at": "2018-04-13T17:32:24Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello!\r\n\r\nI was trying to build rust within Alpine linux and since it comes with `musl` instead of `glibc` I've bumped into this confusing error message from rustbuild.\r\n\r\n```\r\n$ make check\r\nTraceback (most recent call last):\r\n  File \"/home/test/rust/src/bootstrap/bootstrap.py\", line 614, in <module>\r\n    main()\r\n  File \"/home/test/rust/src/bootstrap/bootstrap.py\", line 602, in main\r\n    bootstrap()\r\n  File \"/home/test/rust/src/bootstrap/bootstrap.py\", line 587, in bootstrap\r\n    rb.build_bootstrap()\r\n  File \"/home/test/rust/src/bootstrap/bootstrap.py\", line 377, in build_bootstrap\r\n    self.run(args, env)\r\n  File \"/home/test/rust/src/bootstrap/bootstrap.py\", line 380, in run\r\n    proc = subprocess.Popen(args, env=env)\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 390, in __init__\r\n    errread, errwrite)\r\n  File \"/usr/lib/python2.7/subprocess.py\", line 1024, in _execute_child\r\n    raise child_exception\r\nOSError: [Errno 2] No such file or directory\r\nmake: *** [Makefile:54: check] Error 1\r\n```\r\n\r\n`cargo` is there, in stage0 directory but since it's not compatible with `musl`. execution fails.\r\n\r\nMy proposal is (thanks @matt36 for the idea) that we should catch the error and inform the user with more context.\r\n\r\n```\r\n$ make check\r\n/home/test/rust/build/x86_64-unknown-linux-gnu/stage0/bin/cargo could not be executed.\r\n\r\nYou might want to check your internet connection stability since it might be preventing\r\nyou from getting stage0 packages correctly.\r\n\r\nIf the archives are intact, then please check your operating system compatibility on prebuilt \r\nstage0 binaries. \r\n\r\nGo to: http://docs.rust-lang.org/some/docs/here for more information.\r\n\r\nBuild completed unsuccessfully in 0:00:00\r\nmake: *** [Makefile:54: check] Error 127\r\n```\r\n\r\n(If you're wondering \"why cargo is not found?\" please refer to https://github.com/rust-lang/rust/issues/31322)\r\n\r\nThanks", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40529/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40529/timeline", "performed_via_github_app": null, "state_reason": null}