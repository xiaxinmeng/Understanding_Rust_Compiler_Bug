{"url": "https://api.github.com/repos/rust-lang/rust/issues/62922", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62922/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62922/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62922/events", "html_url": "https://github.com/rust-lang/rust/issues/62922", "id": 472033942, "node_id": "MDU6SXNzdWU0NzIwMzM5NDI=", "number": 62922, "title": "Rework method disambiguation error to use structured suggestions", "user": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1183099971, "node_id": "MDU6TGFiZWwxMTgzMDk5OTcx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-suggestion-diagnostics", "name": "A-suggestion-diagnostics", "color": "f7e101", "default": false, "description": "Area: suggestions generated by the compiler applied by cargo fix"}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-24T01:17:05Z", "updated_at": "2019-12-31T15:48:22Z", "closed_at": "2019-12-31T15:48:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "_Taken from https://github.com/rust-lang/rust/pull/62921#discussion_r306584349_\r\n\r\n#62921 will extend the amount of times we display the disambiguated syntax in cases where multiple traits with the method being called is displayed in the following way:\r\n\r\n```\r\nerror[E0034]: multiple applicable items in scope\r\n  --> $DIR/method-ambig-two-traits-from-impls2.rs:15:5\r\n   |\r\nLL |     AB::foo();\r\n   |     ^^^^^^^ multiple `foo` found\r\n   |\r\nnote: candidate #1 is defined in an impl of the trait `A` for the type `AB`\r\n  --> $DIR/method-ambig-two-traits-from-impls2.rs:7:5\r\n   |\r\nLL |     fn foo() {}\r\n   |     ^^^^^^^^\r\n   = help: to disambiguate the method call, write `A::foo(...)` instead\r\nnote: candidate #2 is defined in an impl of the trait `B` for the type `AB`\r\n  --> $DIR/method-ambig-two-traits-from-impls2.rs:11:5\r\n   |\r\nLL |     fn foo() {}\r\n   |     ^^^^^^^^\r\n   = help: to disambiguate the method call, write `B::foo(...)` instead\r\n```\r\n\r\nIt'd be a good idea to take a hard look at this and come up with better output that hopefully is as easy to understand while also incorporating structured suggestions. Sadly, given the current diagnostic machinery, suggestions are shown always at the end, which wouldn't let us show the suggestions interleaved with the notes. The closest we could get is something like the following:\r\n\r\n```\r\nerror[E0034]: multiple applicable items in scope\r\n  --> $DIR/method-ambig-two-traits-from-impls.rs:15:11\r\n   |\r\nLL |     AB {}.foo();\r\n   |           ^^^ multiple `foo` found\r\n   |\r\nnote: candidate #1 is defined in an impl of the trait `A` for the type `AB`\r\n  --> $DIR/method-ambig-two-traits-from-impls2.rs:7:5\r\n   |\r\nLL |     fn foo() {}\r\n   |     ^^^^^^^^\r\nnote: candidate #2 is defined in an impl of the trait `B` for the type `AB`\r\n  --> $DIR/method-ambig-two-traits-from-impls2.rs:11:5\r\n   |\r\nLL |     fn foo() {}\r\n   |     ^^^^^^^^\r\nhelp: disambiguate the method call to a specific trait:\r\n  --> $DIR/method-ambig-two-traits-from-impls.rs:15:4\r\n   |\r\nLL |     A::foo(AB {})\r\n   |     ^^^^^^^^^^^^^\r\nLL |     B::foo(AB {})\r\n   |     ^^^^^^^^^^^^^\r\n```\r\n\r\nIt looks a bit too verbose, but that might be ok.", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62922/timeline", "performed_via_github_app": null, "state_reason": "completed"}