{"url": "https://api.github.com/repos/rust-lang/rust/issues/38545", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38545/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38545/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38545/events", "html_url": "https://github.com/rust-lang/rust/issues/38545", "id": 197190568, "node_id": "MDU6SXNzdWUxOTcxOTA1Njg=", "number": 38545, "title": "Reference outlives content error message is wrong when there are explicit unrelated lifetimes", "user": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-22T14:49:26Z", "updated_at": "2019-03-06T19:40:03Z", "closed_at": "2019-03-06T19:40:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```rust\r\nfn test<'a, 'b>(mut a: &'a i32, b: &'b i32) {\r\n    a = b;\r\n}\r\nfn main() {}\r\n```\r\n\r\ngives\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nerror[E0312]: lifetime of reference outlives lifetime of borrowed content...\r\n --> <anon>:2:9\r\n  |\r\n2 |     a = b;\r\n  |         ^\r\n  |\r\nnote: ...the reference is valid for the lifetime 'a as defined on the block at 1:44...\r\n --> <anon>:1:45\r\n  |\r\n1 | fn test<'a, 'b>(mut a: &'a i32, b: &'b i32) {\r\n  |                                             ^\r\nnote: ...but the borrowed content is only valid for the lifetime 'b as defined on the block at 1:44\r\n --> <anon>:1:45\r\n  |\r\n1 | fn test<'a, 'b>(mut a: &'a i32, b: &'b i32) {\r\n  |                                             ^\r\nhelp: consider using an explicit lifetime parameter as shown: fn test<'a>(mut a: &'a i32, b: &'a i32)\r\n --> <anon>:1:1\r\n  |\r\n1 | fn test<'a, 'b>(mut a: &'a i32, b: &'b i32) {\r\n  | ^\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\nThere are two issues I see with this:\r\n * `lifetime of reference outlives lifetime of borrowed content`\r\n   * This is not strictly true, the lifetime of the reference is independent from the lifetime of the borrowed content and the real issue is that the compiler cannot prove that the reference will not outlive the content without additional constraints added by the programmer.\r\n * The suggested fix\r\n   * There are already explicit lifetime parameters, assumedly added for a reason, the more likely correct fix in this case would be to add `'b: 'a` rather than conflating the two lifetimes.", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38545/timeline", "performed_via_github_app": null, "state_reason": "completed"}