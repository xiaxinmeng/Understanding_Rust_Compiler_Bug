{"url": "https://api.github.com/repos/rust-lang/rust/issues/18670", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18670/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18670/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18670/events", "html_url": "https://github.com/rust-lang/rust/issues/18670", "id": 47891051, "node_id": "MDU6SXNzdWU0Nzg5MTA1MQ==", "number": 18670, "title": "configure: build triple no longer propagates to host and target triples", "user": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-05T21:35:12Z", "updated_at": "2015-06-24T01:07:41Z", "closed_at": "2015-06-24T01:07:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The makefiles expect that the build triple will always be included in the host and target triples. configure used to make sure this happened but no longer seems to.\n\nIf you configure like `../configure --build=x86_64-unknown-linux-gnu --host=i686-unknown-linux-gnu` configure outputs\n\n```\nconfigure: CFG_HOST             := i686-unknown-linux-gnu \nconfigure: CFG_TARGET           := i686-unknown-linux-gnu \n```\n\nAnd make results in some weirdness:\n\n```\ncfg: build triple x86_64-unknown-linux-gnu\ncfg: host triples i686-unknown-linux-gnu\ncfg: target triples i686-unknown-linux-gnu\ncfg: non-build host triples i686-unknown-linux-gnu\ncfg: non-build target triples i686-unknown-linux-gnu\ncfg: enabling more debugging (CFG_ENABLE_DEBUG)\ncfg: host for i686-unknown-linux-gnu is i386\ncfg: os for i686-unknown-linux-gnu is unknown-linux-gnu\ncfg: good valgrind for i686-unknown-linux-gnu is 1\ncfg: using CC=gcc (CFG_CC)\ncfg: enabling valgrind run-pass tests (CFG_ENABLE_VALGRIND_RPASS)\ncfg: no lualatex found, deferring to xelatex\ncfg: no xelatex found, deferring to pdflatex\ncfg: no pdflatex found, disabling LaTeX docs\ncfg: no pandoc found, omitting PDF and EPUB docs\ncfg: no llnextgen found, omitting grammar-verification\nfetch: /rustc\ndetermined most recent snapshot: rust-stage0-2014-10-22-d44ea72-linux-x86_64-3e04d8197a96b0c858e4e2763b3893df35ae2fb3.tar.bz2\ngot download with ok hash\nopening snapshot dl/rust-stage0-2014-10-22-d44ea72-linux-x86_64-3e04d8197a96b0c858e4e2763b3893df35ae2fb3.tar.bz2\nremoving x86_64-unknown-linux-gnu/stage0/bin/rustc\nextracting rust-stage0/bin/rustc\ntouch: cannot touch \u2018/rustc\u2019: Permission denied\n```\n\nor maybe (if you already have the snap)\n\n```\n$ make -j4 rustc-stage2\ncfg: build triple x86_64-apple-darwin\ncfg: host triples i686-apple-darwin\ncfg: target triples i686-apple-darwin arm-linux-androideabi\ncfg: non-build host triples i686-apple-darwin\ncfg: non-build target triples i686-apple-darwin arm-linux-androideabi\ncfg: enabling more debugging (CFG_ENABLE_DEBUG)\ncfg: host for i686-apple-darwin is i386\ncfg: host for arm-linux-androideabi is arm\ncfg: os for i686-apple-darwin is apple-darwin\ncfg: os for arm-linux-androideabi is linux-androideabi\ncfg: good valgrind for i686-apple-darwin is\ncfg: good valgrind for arm-linux-androideabi is\ncfg: using CC=clang (CFG_CC)\ncfg: using CXX=clang++ (CFG_CXX)\ncfg: enabling valgrind run-pass tests (CFG_ENABLE_VALGRIND_RPASS)\ncfg: no pandoc found, omitting PDF and EPUB docs\ncfg: no llnextgen found, omitting grammar-verification\nmake: *** No rule to make target `rustc-stage2-H-x86_64-apple-darwin', needed by `rustc-stage2'. Stop.\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18670/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18670/timeline", "performed_via_github_app": null, "state_reason": "completed"}