{"url": "https://api.github.com/repos/rust-lang/rust/issues/21451", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21451/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21451/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21451/events", "html_url": "https://github.com/rust-lang/rust/issues/21451", "id": 54973473, "node_id": "MDU6SXNzdWU1NDk3MzQ3Mw==", "number": 21451, "title": "Compiler panic compiling regular expression", "user": {"login": "John-Nagle", "id": 942608, "node_id": "MDQ6VXNlcjk0MjYwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/942608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/John-Nagle", "html_url": "https://github.com/John-Nagle", "followers_url": "https://api.github.com/users/John-Nagle/followers", "following_url": "https://api.github.com/users/John-Nagle/following{/other_user}", "gists_url": "https://api.github.com/users/John-Nagle/gists{/gist_id}", "starred_url": "https://api.github.com/users/John-Nagle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/John-Nagle/subscriptions", "organizations_url": "https://api.github.com/users/John-Nagle/orgs", "repos_url": "https://api.github.com/users/John-Nagle/repos", "events_url": "https://api.github.com/users/John-Nagle/events{/privacy}", "received_events_url": "https://api.github.com/users/John-Nagle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-21T03:32:12Z", "updated_at": "2015-04-21T23:53:32Z", "closed_at": "2015-04-21T23:53:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiler panic compiling long regular expression. \nRust version: rustc 1.0.0-nightly (dcaeb6aa2 2015-01-18 11:28:53 +0000)\n\nSource:\n\n```\nextern crate regex;\n#[TEST]\nfn rfc822dateparse() {\n    let datere = regex::Regex::new(r\"^(Mon|Tue|Wed|Thur|Fri|Sat|Sun),\\s+(\\d+)\\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s+(\\d+:\\d+\\d+)\\s+([+-]\\d\\d\\d\\d|\\[A-Z]+)$\");\n    let testdate1 = \"Tue, 20 Jan 2015 17:35:20 -0800\";\n    let result = datere(testdate1); // apply regex\n    match result {\n        Ok(re) => re,\n        Err(err) => panic!(\"{}\", err)\n    };\n    //assert_eq!(datere.is_match(testdate1), true);\n}\n```\n\nResults and backtrace follow:\n\n```\nRUST_BACKTRACE=1 cargo test --verbose \n       Fresh regex v0.1.10\n       Fresh unsafe-any v0.2.1\n       Fresh gcc v0.1.5\n       Fresh pkg-config v0.1.5\n       Fresh mucell v0.1.11\n       Fresh RustyXML v0.0.1 (https://github.com/Florob/RustyXML#c6e9fc15)\n       Fresh matches v0.1.2\n       Fresh unicase v0.0.2\n       Fresh rustc-serialize v0.2.8\n       Fresh log v0.1.9\n       Fresh url v0.2.16\n       Fresh mime v0.0.6\n       Fresh time v0.1.12\n       Fresh openssl-sys v0.2.16\n       Fresh chrono v0.1.14 (https://github.com/lifthrasiir/rust-chrono#45765ebd)\n       Fresh openssl v0.2.16\n       Fresh cookie v0.1.8\n       Fresh hyper v0.1.2\n   Compiling rss_client v0.0.1 (file:///home/john/projects/rustcode/rss_client)\n     Running `rustc src/main.rs --crate-name rss_client --crate-type bin -g --test -C metadata=6964385ca9a8e28d -C extra-filename=-6964385ca9a8e28d --out-dir /home/john/projects/rustcode/rss_client/target --emit=dep-info,link -L dependency=/home/john/projects/rustcode/rss_client/target -L dependency=/home/john/projects/rustcode/rss_client/target/deps --extern xml=/home/john/projects/rustcode/rss_client/target/deps/libxml-25cb934bf93db2fd.rlib --extern chrono=/home/john/projects/rustcode/rss_client/target/deps/libchrono-67bef0d61e27d951.rlib --extern hyper=/home/john/projects/rustcode/rss_client/target/deps/libhyper-15683c7c22ae64ae.rlib --extern rss_client=/home/john/projects/rustcode/rss_client/target/librss_client-21a088f863dd3c3b.rlib -L native=/usr/lib/x86_64-linux-gnu -L native=/home/john/projects/rustcode/rss_client/target/build/time-7c7fc3eb0c12ad75/out`\nsrc/rfc822date.rs:53:18: 53:35 error: expected function, found `core::result::Result<regex::re::Regex, regex::parse::Error>`\nsrc/rfc822date.rs:53     let result = datere(testdate1); // apply regex\n                                      ^~~~~~~~~~~~~~~~~\nsrc/rfc822date.rs:53:18: 53:24 error: internal compiler error: unexpected callee type core::result::Result<regex::re::Regex, regex::parse::Error>\nsrc/rfc822date.rs:53     let result = datere(testdate1); // apply regex\n                                      ^~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:126\n\nstack backtrace:\n   1:     0x7fc4048f4ca0 - sys::backtrace::write::hcf8b2164766614fbtXt\n   2:     0x7fc404916ba0 - failure::on_fail::h0a24499ca79be19fqeA\n   3:     0x7fc404885310 - rt::unwind::begin_unwind_inner::hec80c959b04b09e2jTz\n   4:     0x7fc3ff2e5770 - rt::unwind::begin_unwind::h4458619267438992488\n   5:     0x7fc3ff2e5700 - diagnostic::SpanHandler::span_bug::h14bc3bdf82a87671VoF\n   6:     0x7fc4027bf880 - session::Session::span_bug::hf1dd0a7445e349d21Bp\n   7:     0x7fc403937300 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, 'tcx, TYPER>::walk_expr::h6783143089791093451\n   8:     0x7fc403936e10 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, 'tcx, TYPER>::walk_block::h9390037451169284147\n   9:     0x7fc40392ff50 - check::upvar::AdjustBorrowKind<'a, 'tcx>::analyze_fn::hdc6bc8c84e47bc757Ci\n  10:     0x7fc403965000 - check::check_bare_fn::h3e9ceee4134b4034pRk\n  11:     0x7fc40395cbf0 - check::check_item::h44686fc401a615eccal\n  12:     0x7fc403964cb0 - visit::walk_mod::h3013238092359696879\n  13:     0x7fc403a2a7c0 - check_crate::unboxed_closure.31116\n  14:     0x7fc403a252f0 - check_crate::hdee4a0e46c24250cmyy\n  15:     0x7fc404e4a550 - driver::phase_3_run_analysis_passes::he23fcda43d0b9863cGa\n  16:     0x7fc404e37d70 - driver::compile_input::heb752a0274bd8e17Cba\n  17:     0x7fc404ef94f0 - run_compiler::hae00bde324856bc0nac\n  18:     0x7fc404ef7c60 - thunk::F.Invoke<A, R>::invoke::h6330764962576579140\n  19:     0x7fc404ef6bc0 - rt::unwind::try::try_fn::h15879375991825326981\n  20:     0x7fc40497dc10 - rust_try_inner\n  21:     0x7fc40497dc00 - rust_try\n  22:     0x7fc404ef6e70 - thunk::F.Invoke<A, R>::invoke::h6331140241464392365\n  23:     0x7fc404904800 - sys::thread::thread_start::hc3bbedbaa5d9a5165Nw\n  24:     0x7fc3feb000c0 - start_thread\n  25:     0x7fc404525fd9 - __clone\n  26:                0x0 - <unknown>\n\nCould not compile `rss_client`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name rss_client --crate-type bin -g --test -C metadata=6964385ca9a8e28d -C extra-filename=-6964385ca9a8e28d --out-dir /home/john/projects/rustcode/rss_client/target --emit=dep-info,link -L dependency=/home/john/projects/rustcode/rss_client/target -L dependency=/home/john/projects/rustcode/rss_client/target/deps --extern xml=/home/john/projects/rustcode/rss_client/target/deps/libxml-25cb934bf93db2fd.rlib --extern chrono=/home/john/projects/rustcode/rss_client/target/deps/libchrono-67bef0d61e27d951.rlib --extern hyper=/home/john/projects/rustcode/rss_client/target/deps/libhyper-15683c7c22ae64ae.rlib --extern rss_client=/home/john/projects/rustcode/rss_client/target/librss_client-21a088f863dd3c3b.rlib -L native=/usr/lib/x86_64-linux-gnu -L native=/home/john/projects/rustcode/rss_client/target/build/time-7c7fc3eb0c12ad75/out` (status=101)\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21451/timeline", "performed_via_github_app": null, "state_reason": "completed"}