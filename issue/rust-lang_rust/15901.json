{"url": "https://api.github.com/repos/rust-lang/rust/issues/15901", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15901/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15901/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15901/events", "html_url": "https://github.com/rust-lang/rust/issues/15901", "id": 38443166, "node_id": "MDU6SXNzdWUzODQ0MzE2Ng==", "number": 15901, "title": "ICE for assert!() misuse", "user": {"login": "Ryman", "id": 994978, "node_id": "MDQ6VXNlcjk5NDk3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/994978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ryman", "html_url": "https://github.com/Ryman", "followers_url": "https://api.github.com/users/Ryman/followers", "following_url": "https://api.github.com/users/Ryman/following{/other_user}", "gists_url": "https://api.github.com/users/Ryman/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ryman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ryman/subscriptions", "organizations_url": "https://api.github.com/users/Ryman/orgs", "repos_url": "https://api.github.com/users/Ryman/repos", "events_url": "https://api.github.com/users/Ryman/events{/privacy}", "received_events_url": "https://api.github.com/users/Ryman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-07-22T20:47:57Z", "updated_at": "2014-10-11T04:39:44Z", "closed_at": "2014-10-11T04:39:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\nfn main() {\n    let s = \"x\";\n    assert!(s, \"x\")\n}\n```\n\nAccording to IRC and rusti this isn't repro on builds from 2days ago, it's repro on master from today: `rustc 0.12.0-pre (2ffccb76c 2014-07-22 16:11:14 +0000)`\n\n```\n<std macros>:8:12: 836:14 error: cannot apply unary operator `!` to type `&'static str`\n<std macros>:8         if !$cond {\n<std macros>:9             fail!($($arg),+)\n<std macros>:10         }\n<std macros>:11     );\n<std macros>:12 )\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'index out of bounds: the len is 12 but the index is 12', /<snip>/rust/src/libsyntax/lib.rs:1\n\nstack backtrace:\n   1:        0x10a7e3aa0 - rt::backtrace::imp::write::hd7d4c392a36e3b9e3fq\n   2:        0x10a7e7025 - failure::on_fail::h8404f3cd3c77692bmwq\n   3:        0x10aa80e09 - unwind::begin_unwind_inner::h8c77354846a1c41cYXd\n   4:        0x10aa80979 - unwind::begin_unwind_fmt::h4765609ebe25027d7Ud\n   5:        0x10aa80781 - rust_begin_unwind\n   6:        0x10aacebbe - failure::begin_unwind::h193e3d158c8de7d0Esj\n   7:        0x10aad5639 - failure::fail_bounds_check::hda72a0433634cad2Qqj\n   8:        0x108b460ac - codemap::FileMap::get_line::hc76ee3b96dcc58be49B\n   9:        0x108b51d56 - diagnostic::emit::h2ef32dd5a1fa2162rxD\n  10:        0x108b4e018 - diagnostic::EmitterWriter.Emitter::emit::h3363f5fc98fed7f3qtD\n  11:        0x108b4bf7e - diagnostic::Handler::emit::hb7f53138b989e30fdbD\n  12:        0x108b44025 - diagnostic::SpanHandler::span_err::h558d1077eaa5eb2du0C\n  13:        0x107c2f3d7 - middle::typeck::infer::InferCtxt<'a>::type_error_message_str_with_expected::hf3a5ea93ee8e997aRqb\n  14:        0x107cd77a0 - middle::typeck::infer::InferCtxt<'a>::type_error_message::h2ef5e1f7d553609ezyb\n  15:        0x107ce7f10 - middle::typeck::check::check_expr_with_unifier::check_user_unop::closure.$x22closure$x22$LP$124870$RP$\n  16:        0x107ce5e86 - middle::typeck::check::check_expr_with_unifier::lookup_op_method::hf7437403612d6c05pDT\n  17:        0x107ce7ceb - middle::typeck::check::check_expr_with_unifier::check_user_unop::he2a51680c0a9174dgST\n  18:        0x107ce01b2 - middle::typeck::check::check_expr_with_unifier::he7bd243d8859f79bEpT\n  19:        0x107cdd0e2 - middle::typeck::check::check_expr_with_unifier::he7bd243d8859f79bEpT\n  20:        0x107ca8216 - middle::typeck::check::check_block_with_expected::hb08cd2b6ca38b5a4GuV\n  21:        0x107ca399d - middle::typeck::check::check_fn::h0e1de9cd6b78a7a6CGQ\n  22:        0x107ca3332 - middle::typeck::check::check_bare_fn::h5b346f297b024120dwQ\n  23:        0x107c9c402 - middle::typeck::check::check_item::h5e573131626cb5caQ4Q\n  24:        0x107ca30ad - middle::typeck::check::check_item_types::he3cf518bb025f812vvQ\n  25:        0x107e8eb2c - middle::typeck::check_crate::h0f410da8d6c496badOh\n  26:        0x107f62e49 - driver::driver::phase_3_run_analysis_passes::hba3c6c5b504fe218Lkw\n  27:        0x107f5dc16 - driver::driver::compile_input::h172f40afa8c5e7d6q6v\n  28:        0x108005f83 - driver::run_compiler::h11c19b472aaa0f08Dgz\n  29:        0x1080038a6 - driver::main_args::closure.$x22closure$x22$LP$138131$RP$\n  30:        0x1080163db - task::TaskBuilder<S>::try_future::closure.$x22closure$x22$LP$139275$RP$\n  31:        0x1080162c6 - task::TaskBuilder<S>::spawn_internal::closure.$x22closure$x22$LP$139252$RP$\n  32:        0x10767987c - task::spawn_opts::closure.$x22closure$x22$LP$8299$RP$\n  33:        0x10aae5d8c - rust_try\n  34:        0x10aa7db4b - unwind::try::hcf31d7fcff740d283Ld\n  35:        0x10aa7d8b3 - task::Task::run::h1882bc75d327db00VXc\n  36:        0x107679711 - task::spawn_opts::closure.$x22closure$x22$LP$8244$RP$\n  37:        0x10aa7fba6 - thread::thread_start::haae59359e4020c83tkd\n  38:     0x7fff8e190899 - _pthread_body\n  39:     0x7fff8e19072a - _pthread_struct_init\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15901/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15901/timeline", "performed_via_github_app": null, "state_reason": "completed"}