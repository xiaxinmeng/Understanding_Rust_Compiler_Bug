{"url": "https://api.github.com/repos/rust-lang/rust/issues/107428", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/107428/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/107428/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/107428/events", "html_url": "https://github.com/rust-lang/rust/issues/107428", "id": 1561033495, "node_id": "I_kwDOAAsO6M5dC3sX", "number": 107428, "title": "[ICE]: `error: internal compiler error: TypeTestError `", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-01-28T22:15:22Z", "updated_at": "2023-03-18T08:01:44Z", "closed_at": "2023-03-18T08:01:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### Code\n\n```Rust\nuse std::future::Future;\r\nuse std::pin::Pin;\r\nuse std::task::{Poll, Context};\r\n\r\nstruct LocalSet {}\r\nstruct RunUntil<'a, F> {\r\n    _local_set: &'a LocalSet,\r\n    _future: F,\r\n}\r\nimpl<'a, F> RunUntil<'a, F> {\r\n    fn project<'pin>(self: Pin<&'pin mut Self>) -> Projection<'pin, 'a, F> {\r\n        unimplemented!()\r\n    }\r\n}\r\n\r\nstruct Projection<'pin, 'a, F>\r\nwhere\r\n    RunUntil<'a, F>: 'pin,\r\n{\r\n    pub local_set: &'pin mut &'a LocalSet,\r\n    pub future: Pin<&'a mut F>,\r\n}\r\n\r\nimpl LocalSet {\r\n    fn with<T>(&self, _f: impl FnOnce() -> T) -> T {\r\n        unimplemented!()\r\n    }\r\n}\r\nimpl<T: Future> Future for RunUntil<'_, T> {\r\n    type Output = T::Output;\r\n    fn poll(self: Pin<&mut Self>, cx: &mut Context<'_>) -> Poll<Self::Output> {\r\n        let me = self.project();\r\n        me.local_set.with(|| {\r\n            let _ = cx.waker();\r\n            let f = me.future;\r\n            let _ = self.poll(cx);\r\n            Poll::Pending\r\n        })\r\n    }\r\n}\r\n\r\nfn main() {}\n```\n\n\n### Affected release channels\n\n- [ ] Previous Stable\n- [ ] Current Stable\n- [ ] Current Beta\n- [X] Current Nightly\n\n### Rust Version\n\n```Shell\nrustc 1.69.0-nightly (ef982929c 2023-01-27)\r\nbinary: rustc\r\ncommit-hash: ef982929c0b653436a6ea6892a2a839fba7c8b57\r\ncommit-date: 2023-01-27\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.69.0-nightly\r\nLLVM version: 15.0.7\n```\n\n\n### Current error output\n\n_No response_\n\n### Backtrace\n\n```Shell\nwarning: unused variable: `f`\r\n  --> 3e08e5ca509f99c99abb1d26030032936768debc.rs:35:17\r\n   |\r\n35 |             let f = me.future;\r\n   |                 ^ help: if this is intentional, prefix it with an underscore: `_f`\r\n   |\r\n   = note: `#[warn(unused_variables)]` on by default\r\n\r\nthread 'rustc' panicked at 'index out of bounds: the len is 1 but the index is 6', /cargo/registry/src/github.com-1ecc6299db9ec823/ena-0.14.0/src/snapshot_vec.rs:199:10\r\nstack backtrace:\r\n   0:     0x7fb1cfd6636a - std::backtrace_rs::backtrace::libunwind::trace::heb3166a6cb1fd02b\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x7fb1cfd6636a - std::backtrace_rs::backtrace::trace_unsynchronized::h34837841e045a1d4\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x7fb1cfd6636a - std::sys_common::backtrace::_print_fmt::h4348a4b63f328ee4\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x7fb1cfd6636a - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h1bad440d01eeeb29\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x7fb1cfdc852e - core::fmt::write::hb5a073c651a6cb64\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/core/src/fmt/mod.rs:1232:17\r\n   5:     0x7fb1cfd569b5 - std::io::Write::write_fmt::h97cc768331421fb2\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/io/mod.rs:1682:15\r\n   6:     0x7fb1cfd66135 - std::sys_common::backtrace::_print::h23bd93d6897965f3\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x7fb1cfd66135 - std::sys_common::backtrace::print::h4d41ae33ce7a824f\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x7fb1cfd68eff - std::panicking::default_hook::{{closure}}::h8ab48635107c713a\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/panicking.rs:267:22\r\n   9:     0x7fb1cfd68c3b - std::panicking::default_hook::h6305ca3c910e41d2\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/panicking.rs:286:9\r\n  10:     0x7fb1d30d5444 - rustc_driver[d1d90693eba3e117]::DEFAULT_HOOK::{closure#0}::{closure#0}\r\n  11:     0x7fb1cfd6973a - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h60fe4dd8262b5528\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:2002:9\r\n  12:     0x7fb1cfd6973a - std::panicking::rust_panic_with_hook::ha8dfad8ee636a9a3\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/panicking.rs:692:13\r\n  13:     0x7fb1cfd694b9 - std::panicking::begin_panic_handler::{{closure}}::h4fcf608bbbd27b26\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/panicking.rs:579:13\r\n  14:     0x7fb1cfd6681c - std::sys_common::backtrace::__rust_end_short_backtrace::h86f63ffb2338c5c8\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys_common/backtrace.rs:137:18\r\n  15:     0x7fb1cfd691c2 - rust_begin_unwind\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/panicking.rs:575:5\r\n  16:     0x7fb1cfdc4ed3 - core::panicking::panic_fmt::ha12d43373dd0f588\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/core/src/panicking.rs:64:14\r\n  17:     0x7fb1cfdc50c2 - core::panicking::panic_bounds_check::h5d69ae38f9e25022\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/core/src/panicking.rs:159:5\r\n  18:     0x7fb1d10100b7 - <ena[e83628b93913ff8c]::unify::UnificationTable<ena[e83628b93913ff8c]::unify::backing_vec::InPlace<rustc_middle[526e0ca739798ee2]::infer::unify_key::RegionVidKey, &mut alloc[9ea3c9e5c77b7621]::vec::Vec<ena[e83628b93913ff8c]::unify::VarValue<rustc_middle[526e0ca739798ee2]::infer::unify_key::RegionVidKey>>, &mut rustc_infer[a05056d2428e5e85]::infer::undo_log::InferCtxtUndoLogs>>>::uninlined_get_root_key\r\n  19:     0x7fb1d102eae1 - <rustc_middle[526e0ca739798ee2]::ty::sty::Region as rustc_middle[526e0ca739798ee2]::ty::relate::Relate>::relate::<rustc_infer[a05056d2428e5e85]::infer::equate::Equate>\r\n  20:     0x7fb1d102b995 - rustc_middle[526e0ca739798ee2]::ty::relate::super_relate_tys::<rustc_infer[a05056d2428e5e85]::infer::equate::Equate>\r\n  21:     0x7fb1d1028d6e - <rustc_infer[a05056d2428e5e85]::infer::equate::Equate as rustc_middle[526e0ca739798ee2]::ty::relate::TypeRelation>::tys\r\n  22:     0x7fb1d102b472 - rustc_middle[526e0ca739798ee2]::ty::relate::super_relate_tys::<rustc_infer[a05056d2428e5e85]::infer::equate::Equate>\r\n  23:     0x7fb1d1028d6e - <rustc_infer[a05056d2428e5e85]::infer::equate::Equate as rustc_middle[526e0ca739798ee2]::ty::relate::TypeRelation>::tys\r\n  24:     0x7fb1d102b540 - rustc_middle[526e0ca739798ee2]::ty::relate::super_relate_tys::<rustc_infer[a05056d2428e5e85]::infer::equate::Equate>\r\n  25:     0x7fb1d1028d6e - <rustc_infer[a05056d2428e5e85]::infer::equate::Equate as rustc_middle[526e0ca739798ee2]::ty::relate::TypeRelation>::tys\r\n  26:     0x7fb1d2740d13 - <rustc_infer[a05056d2428e5e85]::infer::InferCtxt>::commit_if_ok::<rustc_infer[a05056d2428e5e85]::infer::InferOk<()>, rustc_middle[526e0ca739798ee2]::ty::error::TypeError, <rustc_infer[a05056d2428e5e85]::infer::at::Trace>::eq<rustc_middle[526e0ca739798ee2]::ty::Ty>::{closure#0}>\r\n  27:     0x7fb1d2740c07 - <rustc_infer[a05056d2428e5e85]::infer::at::At>::eq::<rustc_middle[526e0ca739798ee2]::ty::Ty>\r\n  28:     0x7fb1d2e1613d - <rustc_infer[a05056d2428e5e85]::infer::InferCtxt>::can_eq::<rustc_middle[526e0ca739798ee2]::ty::Ty>\r\n  29:     0x7fb1d2e49e68 - <rustc_borrowck[2e52752a89f891f4]::MirBorrowckCtxt>::explain_captures\r\n  30:     0x7fb1d2e38814 - <rustc_borrowck[2e52752a89f891f4]::MirBorrowckCtxt>::report_use_of_moved_or_uninitialized\r\n  31:     0x7fb1d13f332f - <rustc_borrowck[2e52752a89f891f4]::MirBorrowckCtxt as rustc_mir_dataflow[5bfd982c459f1d77]::framework::visitor::ResultsVisitor>::visit_statement_before_primary_effect\r\n  32:     0x7fb1d1fe22c3 - rustc_mir_dataflow[5bfd982c459f1d77]::framework::visitor::visit_results::<rustc_borrowck[2e52752a89f891f4]::dataflow::BorrowckAnalyses<rustc_index[718e423753522017]::bit_set::BitSet<rustc_borrowck[2e52752a89f891f4]::dataflow::BorrowIndex>, rustc_index[718e423753522017]::bit_set::ChunkedBitSet<rustc_mir_dataflow[5bfd982c459f1d77]::move_paths::MovePathIndex>, rustc_index[718e423753522017]::bit_set::ChunkedBitSet<rustc_mir_dataflow[5bfd982c459f1d77]::move_paths::InitIndex>>, rustc_borrowck[2e52752a89f891f4]::dataflow::BorrowckAnalyses<rustc_mir_dataflow[5bfd982c459f1d77]::framework::engine::Results<rustc_borrowck[2e52752a89f891f4]::dataflow::Borrows>, rustc_mir_dataflow[5bfd982c459f1d77]::framework::engine::Results<rustc_mir_dataflow[5bfd982c459f1d77]::impls::MaybeUninitializedPlaces>, rustc_mir_dataflow[5bfd982c459f1d77]::framework::engine::Results<rustc_mir_dataflow[5bfd982c459f1d77]::impls::EverInitializedPlaces>>, core[3a3cbeb512a16fa3]::iter::adapters::map::Map<rustc_middle[526e0ca739798ee2]::mir::traversal::ReversePostorderIter, rustc_borrowck[2e52752a89f891f4]::do_mir_borrowck::{closure#2}>, rustc_borrowck[2e52752a89f891f4]::MirBorrowckCtxt>\r\n  33:     0x7fb1d1fbb727 - rustc_borrowck[2e52752a89f891f4]::do_mir_borrowck\r\n  34:     0x7fb1d1f9df85 - rustc_borrowck[2e52752a89f891f4]::mir_borrowck\r\n  35:     0x7fb1d18b938d - rustc_query_system[decabb1eb79370b7]::query::plumbing::try_execute_query::<rustc_query_impl[ff3c18b748312d2f]::queries::mir_borrowck, rustc_query_impl[ff3c18b748312d2f]::plumbing::QueryCtxt>\r\n  36:     0x7fb1d17265cd - rustc_data_structures[439cdbfa31de989]::sync::par_for_each_in::<&[rustc_span[6b0f4bf036ac788e]::def_id::LocalDefId], <rustc_middle[526e0ca739798ee2]::hir::map::Map>::par_body_owners<rustc_interface[d4b4ad1a0cb81775]::passes::analysis::{closure#2}::{closure#0}>::{closure#0}>\r\n  37:     0x7fb1d17261d3 - <rustc_session[8c42e6c16859134b]::session::Session>::time::<(), rustc_interface[d4b4ad1a0cb81775]::passes::analysis::{closure#2}>\r\n  38:     0x7fb1d17242b7 - rustc_interface[d4b4ad1a0cb81775]::passes::analysis\r\n  39:     0x7fb1d285c88e - rustc_query_system[decabb1eb79370b7]::query::plumbing::try_execute_query::<rustc_query_impl[ff3c18b748312d2f]::queries::analysis, rustc_query_impl[ff3c18b748312d2f]::plumbing::QueryCtxt>\r\n  40:     0x7fb1d2a8664a - <rustc_query_impl[ff3c18b748312d2f]::Queries as rustc_middle[526e0ca739798ee2]::ty::query::QueryEngine>::analysis\r\n  41:     0x7fb1d278fa60 - <rustc_interface[d4b4ad1a0cb81775]::passes::QueryContext>::enter::<rustc_driver[d1d90693eba3e117]::run_compiler::{closure#1}::{closure#2}::{closure#3}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>\r\n  42:     0x7fb1d22e1296 - rustc_span[6b0f4bf036ac788e]::with_source_map::<core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>, rustc_interface[d4b4ad1a0cb81775]::interface::run_compiler<core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>, rustc_driver[d1d90693eba3e117]::run_compiler::{closure#1}>::{closure#0}::{closure#0}>\r\n  43:     0x7fb1d22d9654 - <scoped_tls[6607de7944b4e913]::ScopedKey<rustc_span[6b0f4bf036ac788e]::SessionGlobals>>::set::<rustc_interface[d4b4ad1a0cb81775]::interface::run_compiler<core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>, rustc_driver[d1d90693eba3e117]::run_compiler::{closure#1}>::{closure#0}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>\r\n  44:     0x7fb1d22d8d52 - std[ef0604d174e11cd5]::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface[d4b4ad1a0cb81775]::util::run_in_thread_pool_with_globals<rustc_interface[d4b4ad1a0cb81775]::interface::run_compiler<core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>, rustc_driver[d1d90693eba3e117]::run_compiler::{closure#1}>::{closure#0}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>\r\n  45:     0x7fb1d22d8afa - <<std[ef0604d174e11cd5]::thread::Builder>::spawn_unchecked_<rustc_interface[d4b4ad1a0cb81775]::util::run_in_thread_pool_with_globals<rustc_interface[d4b4ad1a0cb81775]::interface::run_compiler<core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>, rustc_driver[d1d90693eba3e117]::run_compiler::{closure#1}>::{closure#0}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[3a3cbeb512a16fa3]::result::Result<(), rustc_errors[6cf9ff966b0b62fb]::ErrorGuaranteed>>::{closure#1} as core[3a3cbeb512a16fa3]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\r\n  46:     0x7fb1cfd73803 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h9646bd6a135081c9\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n  47:     0x7fb1cfd73803 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h180d98f11b902552\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n  48:     0x7fb1cfd73803 - std::sys::unix::thread::Thread::new::thread_start::h83489d4028ebb6e1\r\n                               at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys/unix/thread.rs:108:17\r\n  49:     0x7fb1cfb048fd - <unknown>\r\n  50:     0x7fb1cfb86d20 - <unknown>\r\n  51:                0x0 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.69.0-nightly (ef982929c 2023-01-27) running on x86_64-unknown-linux-gnu\r\n\r\nquery stack during panic:\r\n#0 [mir_borrowck] borrow-checking `<impl at 3e08e5ca509f99c99abb1d26030032936768debc.rs:29:1: 29:43>::poll`\r\n#1 [analysis] running analysis passes on this crate\r\nend of query stack\r\nwarning: 1 warning emitted\r\n\r\nerror: internal compiler error: no errors encountered even though `delay_span_bug` issued\r\n\r\nerror: internal compiler error: TypeTestError { type_test: TypeTest { generic_kind: T/#1, lower_bound: '_#6r, span: 3e08e5ca509f99c99abb1d26030032936768debc.rs:32:18: 32:32 (#0), verify_bound: AnyBound([OutlivedBy('_#2r), OutlivedBy('_#5r)]) } }\r\n  |\r\n  = note: delayed at    0: <rustc_errors::HandlerInner>::emit_diagnostic\r\n             1: <rustc_errors::Handler>::delay_span_bug::<rustc_span::span_encoding::Span, alloc::string::String>\r\n             2: <rustc_borrowck::diagnostics::region_errors::RegionErrors>::push::<rustc_borrowck::diagnostics::region_errors::RegionErrorKind>\r\n             3: <rustc_borrowck::region_infer::RegionInferenceContext>::solve\r\n             4: rustc_borrowck::nll::compute_regions\r\n             5: rustc_borrowck::do_mir_borrowck\r\n             6: rustc_borrowck::mir_borrowck\r\n             7: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::mir_borrowck, rustc_query_impl::plumbing::QueryCtxt>\r\n             8: rustc_data_structures::sync::par_for_each_in::<&[rustc_span::def_id::LocalDefId], <rustc_middle::hir::map::Map>::par_body_owners<rustc_interface::passes::analysis::{closure#2}::{closure#0}>::{closure#0}>\r\n             9: <rustc_session::session::Session>::time::<(), rustc_interface::passes::analysis::{closure#2}>\r\n            10: rustc_interface::passes::analysis\r\n            11: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::analysis, rustc_query_impl::plumbing::QueryCtxt>\r\n            12: <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::analysis\r\n            13: <rustc_interface::passes::QueryContext>::enter::<rustc_driver::run_compiler::{closure#1}::{closure#2}::{closure#3}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            14: rustc_span::with_source_map::<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}::{closure#0}>\r\n            15: <scoped_tls::ScopedKey<rustc_span::SessionGlobals>>::set::<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            16: std::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            17: <<std::thread::Builder>::spawn_unchecked_<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#1} as core::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\r\n            18: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n            19: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n            20: std::sys::unix::thread::Thread::new::thread_start\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys/unix/thread.rs:108:17\r\n            21: <unknown>\r\n            22: <unknown>\r\n\r\n\r\nerror: internal compiler error: TypeTestError { type_test: TypeTest { generic_kind: T/#1, lower_bound: '_#25r, span: 3e08e5ca509f99c99abb1d26030032936768debc.rs:33:9: 38:11 (#0), verify_bound: AnyBound([OutlivedBy('_#2r), OutlivedBy('_#5r)]) } }\r\n  |\r\n  = note: delayed at    0: <rustc_errors::HandlerInner>::emit_diagnostic\r\n             1: <rustc_errors::Handler>::delay_span_bug::<rustc_span::span_encoding::Span, alloc::string::String>\r\n             2: <rustc_borrowck::diagnostics::region_errors::RegionErrors>::push::<rustc_borrowck::diagnostics::region_errors::RegionErrorKind>\r\n             3: <rustc_borrowck::region_infer::RegionInferenceContext>::solve\r\n             4: rustc_borrowck::nll::compute_regions\r\n             5: rustc_borrowck::do_mir_borrowck\r\n             6: rustc_borrowck::mir_borrowck\r\n             7: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::mir_borrowck, rustc_query_impl::plumbing::QueryCtxt>\r\n             8: rustc_data_structures::sync::par_for_each_in::<&[rustc_span::def_id::LocalDefId], <rustc_middle::hir::map::Map>::par_body_owners<rustc_interface::passes::analysis::{closure#2}::{closure#0}>::{closure#0}>\r\n             9: <rustc_session::session::Session>::time::<(), rustc_interface::passes::analysis::{closure#2}>\r\n            10: rustc_interface::passes::analysis\r\n            11: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::analysis, rustc_query_impl::plumbing::QueryCtxt>\r\n            12: <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::analysis\r\n            13: <rustc_interface::passes::QueryContext>::enter::<rustc_driver::run_compiler::{closure#1}::{closure#2}::{closure#3}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            14: rustc_span::with_source_map::<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}::{closure#0}>\r\n            15: <scoped_tls::ScopedKey<rustc_span::SessionGlobals>>::set::<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            16: std::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n            17: <<std::thread::Builder>::spawn_unchecked_<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#1} as core::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\r\n            18: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n            19: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n            20: std::sys::unix::thread::Thread::new::thread_start\r\n                       at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys/unix/thread.rs:108:17\r\n            21: <unknown>\r\n            22: <unknown>\r\n\r\n\r\nerror: internal compiler error: `compute_regions` tainted `infcx` with errors but did not emit any errors\r\n  --> 3e08e5ca509f99c99abb1d26030032936768debc.rs:31:5\r\n   |\r\n31 | /     fn poll(self: Pin<&mut Self>, cx: &mut Context<'_>) -> Poll<Self::Output> {\r\n32 | |         let me = self.project();\r\n33 | |         me.local_set.with(|| {\r\n34 | |             let _ = cx.waker();\r\n...  |\r\n38 | |         })\r\n39 | |     }\r\n   | |_____^\r\n   |\r\n   = note: delayed at    0: <rustc_errors::HandlerInner>::emit_diagnostic\r\n              1: <rustc_errors::Handler>::delay_span_bug::<rustc_span::span_encoding::Span, &str>\r\n              2: rustc_borrowck::nll::compute_regions\r\n              3: rustc_borrowck::do_mir_borrowck\r\n              4: rustc_borrowck::mir_borrowck\r\n              5: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::mir_borrowck, rustc_query_impl::plumbing::QueryCtxt>\r\n              6: rustc_data_structures::sync::par_for_each_in::<&[rustc_span::def_id::LocalDefId], <rustc_middle::hir::map::Map>::par_body_owners<rustc_interface::passes::analysis::{closure#2}::{closure#0}>::{closure#0}>\r\n              7: <rustc_session::session::Session>::time::<(), rustc_interface::passes::analysis::{closure#2}>\r\n              8: rustc_interface::passes::analysis\r\n              9: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::analysis, rustc_query_impl::plumbing::QueryCtxt>\r\n             10: <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::analysis\r\n             11: <rustc_interface::passes::QueryContext>::enter::<rustc_driver::run_compiler::{closure#1}::{closure#2}::{closure#3}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             12: rustc_span::with_source_map::<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}::{closure#0}>\r\n             13: <scoped_tls::ScopedKey<rustc_span::SessionGlobals>>::set::<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             14: std::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             15: <<std::thread::Builder>::spawn_unchecked_<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#1} as core::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\r\n             16: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n             17: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n             18: std::sys::unix::thread::Thread::new::thread_start\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys/unix/thread.rs:108:17\r\n             19: <unknown>\r\n             20: <unknown>\r\n\r\n\r\nerror: internal compiler error: diagnostic buffered but not emitted\r\n  --> 3e08e5ca509f99c99abb1d26030032936768debc.rs:32:18\r\n   |\r\n32 |         let me = self.project();\r\n   |                  ^^^^^^^^^^^^^^\r\n   |\r\n   = note: delayed at    0: <rustc_errors::HandlerInner>::emit_diagnostic\r\n              1: <rustc_errors::Handler>::delay_span_bug::<rustc_error_messages::MultiSpan, &str>\r\n              2: <rustc_borrowck::error::BorrowckErrors>::buffer_error\r\n              3: rustc_borrowck::do_mir_borrowck\r\n              4: rustc_borrowck::mir_borrowck\r\n              5: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::mir_borrowck, rustc_query_impl::plumbing::QueryCtxt>\r\n              6: rustc_data_structures::sync::par_for_each_in::<&[rustc_span::def_id::LocalDefId], <rustc_middle::hir::map::Map>::par_body_owners<rustc_interface::passes::analysis::{closure#2}::{closure#0}>::{closure#0}>\r\n              7: <rustc_session::session::Session>::time::<(), rustc_interface::passes::analysis::{closure#2}>\r\n              8: rustc_interface::passes::analysis\r\n              9: rustc_query_system::query::plumbing::try_execute_query::<rustc_query_impl::queries::analysis, rustc_query_impl::plumbing::QueryCtxt>\r\n             10: <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::analysis\r\n             11: <rustc_interface::passes::QueryContext>::enter::<rustc_driver::run_compiler::{closure#1}::{closure#2}::{closure#3}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             12: rustc_span::with_source_map::<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}::{closure#0}>\r\n             13: <scoped_tls::ScopedKey<rustc_span::SessionGlobals>>::set::<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             14: std::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>\r\n             15: <<std::thread::Builder>::spawn_unchecked_<rustc_interface::util::run_in_thread_pool_with_globals<rustc_interface::interface::run_compiler<core::result::Result<(), rustc_errors::ErrorGuaranteed>, rustc_driver::run_compiler::{closure#1}>::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#0}::{closure#0}, core::result::Result<(), rustc_errors::ErrorGuaranteed>>::{closure#1} as core::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\r\n             16: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n             17: <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/alloc/src/boxed.rs:1988:9\r\n             18: std::sys::unix::thread::Thread::new::thread_start\r\n                        at /rustc/ef982929c0b653436a6ea6892a2a839fba7c8b57/library/std/src/sys/unix/thread.rs:108:17\r\n             19: <unknown>\r\n             20: <unknown>\r\n\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.69.0-nightly (ef982929c 2023-01-27) running on x86_64-unknown-linux-gnu\r\n\r\nquery stack during panic:\r\nend of query stack\r\nthread panicked while panicking. aborting.\r\n[2]    1819082 IOT instruction (core dumped)  rustc 3e08e5ca509f99c99abb1d26030032936768debc.rs\n```\n\n\n### Anything else?\n\n_No response_", "closed_by": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/107428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/107428/timeline", "performed_via_github_app": null, "state_reason": "completed"}