{"url": "https://api.github.com/repos/rust-lang/rust/issues/67183", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/67183/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/67183/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/67183/events", "html_url": "https://github.com/rust-lang/rust/issues/67183", "id": 535363329, "node_id": "MDU6SXNzdWU1MzUzNjMzMjk=", "number": 67183, "title": "rustc requires 7GB of memory for clean build", "user": {"login": "samuela", "id": 226872, "node_id": "MDQ6VXNlcjIyNjg3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/226872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samuela", "html_url": "https://github.com/samuela", "followers_url": "https://api.github.com/users/samuela/followers", "following_url": "https://api.github.com/users/samuela/following{/other_user}", "gists_url": "https://api.github.com/users/samuela/gists{/gist_id}", "starred_url": "https://api.github.com/users/samuela/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samuela/subscriptions", "organizations_url": "https://api.github.com/users/samuela/orgs", "repos_url": "https://api.github.com/users/samuela/repos", "events_url": "https://api.github.com/users/samuela/events{/privacy}", "received_events_url": "https://api.github.com/users/samuela/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 171502053, "node_id": "MDU6TGFiZWwxNzE1MDIwNTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-borrow-checker", "name": "A-borrow-checker", "color": "f7e101", "default": false, "description": "Area: The borrow checker"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630799571, "node_id": "MDU6TGFiZWw2MzA3OTk1NzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compilemem", "name": "I-compilemem", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to memory usage during compilation."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2019-12-09T21:59:31Z", "updated_at": "2019-12-10T00:36:59Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "(This is a followup to https://users.rust-lang.org/t/why-does-rustc-require-7gb-of-memory-for-a-medium-size-crate/35506.)\r\n\r\nI have a rust project (https://github.com/samuela/rustybox as of 37c0a1d) that requires ~7GB of memory to build. Why does rustc require so much memory? Are there any particular rust features that lead to this kind of outsized memory usage? Using so much memory seems buggy/unusual to me, and it was suggested on the forum that I open a bug report.\r\n\r\n```\r\n$ cargo clean\r\n$ /usr/bin/time -v cargo build --jobs 1\r\n...\r\nFinished dev [unoptimized + debuginfo] target(s) in 3m 17s\r\n\tCommand being timed: \"cargo build --jobs 1\"\r\n\tUser time (seconds): 156.60\r\n\tSystem time (seconds): 17.12\r\n\tPercent of CPU this job got: 87%\r\n\tElapsed (wall clock) time (h:mm:ss or m:ss): 3:17.98\r\n\tAverage shared text size (kbytes): 0\r\n\tAverage unshared data size (kbytes): 0\r\n\tAverage stack size (kbytes): 0\r\n\tAverage total size (kbytes): 0\r\n\tMaximum resident set size (kbytes): 7053216\r\n\tAverage resident set size (kbytes): 0\r\n\tMajor (requiring I/O) page faults: 27\r\n\tMinor (reclaiming a frame) page faults: 768571\r\n\tVoluntary context switches: 38426\r\n\tInvoluntary context switches: 304785\r\n\tSwaps: 0\r\n\tFile system inputs: 334648\r\n\tFile system outputs: 632816\r\n\tSocket messages sent: 0\r\n\tSocket messages received: 0\r\n\tSignals delivered: 0\r\n\tPage size (bytes): 4096\r\n\tExit status: 0\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/67183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/67183/timeline", "performed_via_github_app": null, "state_reason": null}