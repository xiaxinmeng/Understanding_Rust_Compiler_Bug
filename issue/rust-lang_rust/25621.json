{"url": "https://api.github.com/repos/rust-lang/rust/issues/25621", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25621/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25621/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25621/events", "html_url": "https://github.com/rust-lang/rust/issues/25621", "id": 78230671, "node_id": "MDU6SXNzdWU3ODIzMDY3MQ==", "number": 25621, "title": "Filter stdlib out of stack traces", "user": {"login": "jimmycuadra", "id": 122457, "node_id": "MDQ6VXNlcjEyMjQ1Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/122457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jimmycuadra", "html_url": "https://github.com/jimmycuadra", "followers_url": "https://api.github.com/users/jimmycuadra/followers", "following_url": "https://api.github.com/users/jimmycuadra/following{/other_user}", "gists_url": "https://api.github.com/users/jimmycuadra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jimmycuadra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jimmycuadra/subscriptions", "organizations_url": "https://api.github.com/users/jimmycuadra/orgs", "repos_url": "https://api.github.com/users/jimmycuadra/repos", "events_url": "https://api.github.com/users/jimmycuadra/events{/privacy}", "received_events_url": "https://api.github.com/users/jimmycuadra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-05-19T19:59:58Z", "updated_at": "2017-09-22T00:43:59Z", "closed_at": "2017-09-22T00:43:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Stack traces would be much easier to digest if the lines from stdlib were removed before being printed to the user. For example, take this output from calling `option.unwrap` on a `None` value in a test from a project I'm working on:\n\n```\n---- compare_and_delete stdout ----\n    thread 'compare_and_delete' panicked at 'called `Option::unwrap()` on a `None` value', /home/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libcore/option.rs:362\n\nstack backtrace:\n   1:     0x7f12357e3689 - sys::backtrace::write::hbc46dc0cfb3b9537d4r\n   2:     0x7f12357e6c46 - panicking::on_panic::h74d3c14d86c58ac8jrw\n   3:     0x7f12357d8a92 - rt::unwind::begin_unwind_inner::h382cea404b11eb00t6v\n   4:     0x7f12357d94ec - rt::unwind::begin_unwind_fmt::h5c14cfc30901d9d274v\n   5:     0x7f12357e68d6 - rust_begin_unwind\n   6:     0x7f1235814184 - panicking::panic_fmt::h9ea3571c30b632b3wwy\n   7:     0x7f1235814104 - panicking::panic::h0265a6efa68361e53uy\n   8:     0x7f1235660991 - option::Option<T>::unwrap::h8561976572633329008\n                        at /home/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libcore/macros.rs:19\n   9:     0x7f12356612c4 - compare_and_delete::h6f5ab680c2a34c3feia\n                        at tests/client_test.rs:62\n  10:     0x7f123575e39b - boxed::F.FnBox<A>::call_box::h15853468894108720310\n  11:     0x7f123576190b - boxed::F.FnBox<A>::call_box::h15343356339842678509\n  12:     0x7f123575eb59 - rt::unwind::try::try_fn::h11678192874774444076\n  13:     0x7f12357eb6a8 - rust_try_inner\n  14:     0x7f12357eb695 - rust_try\n  15:     0x7f123575ee08 - boxed::F.FnBox<A>::call_box::h13152174250445044076\n  16:     0x7f12357e5c21 - sys::thread::create::thread_start::h490278b5c3c0b49faqv\n  17:     0x7f12340ed0a3 - start_thread\n  18:     0x7f12348ed04c - clone\n  19:                0x0 - <unknown>\n```\n\nWhile it may be accurate, what I want as a programmer is to know what part of my code caused the exception. The error message only tells me about the implementation of the Option type, and I have to dig through a stack trace of stuff from the stdlib to find the line that tells me it came from tests/client_test.rs:62 in my code.\n\nI talked with @wycats about this briefly at the Rust 1.0 launch party and he agreed that we probably need something akin to `ActiveSupport::BacktraceCleaner` from Rails.\n\nThis might actually be two issues \u2013 one is that the error message should show the line in my code where the unwrap happened, not the line in option.rs where the panic was actually triggered, and the other is the filtering of lines in the stack trace. Let me know if I should split part of this off into a separate issue.\n", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25621/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25621/timeline", "performed_via_github_app": null, "state_reason": "completed"}