{"url": "https://api.github.com/repos/rust-lang/rust/issues/62973", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62973/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62973/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62973/events", "html_url": "https://github.com/rust-lang/rust/issues/62973", "id": 472847855, "node_id": "MDU6SXNzdWU0NzI4NDc4NTU=", "number": 62973, "title": "ICE on \"byte index 1 is out of bounds of ``\"", "user": {"login": "dwrensha", "id": 495768, "node_id": "MDQ6VXNlcjQ5NTc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/495768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwrensha", "html_url": "https://github.com/dwrensha", "followers_url": "https://api.github.com/users/dwrensha/followers", "following_url": "https://api.github.com/users/dwrensha/following{/other_user}", "gists_url": "https://api.github.com/users/dwrensha/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwrensha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwrensha/subscriptions", "organizations_url": "https://api.github.com/users/dwrensha/orgs", "repos_url": "https://api.github.com/users/dwrensha/repos", "events_url": "https://api.github.com/users/dwrensha/events{/privacy}", "received_events_url": "https://api.github.com/users/dwrensha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 27424086, "node_id": "MDU6TGFiZWwyNzQyNDA4Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-parser", "name": "A-parser", "color": "f7e101", "default": false, "description": "Area: The parsing of Rust source code to an AST."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-07-25T12:51:56Z", "updated_at": "2019-07-29T00:09:13Z", "closed_at": "2019-07-29T00:09:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm seeing an internal compiler error on the following input (found by [fuzz-rustc](https://github.com/dwrensha/fuzz-rustc)):\r\n```rust\r\nfn p() { match s { v, E { [) {) }\r\n\r\n\r\n```\r\n\r\n(EDIT: the trailing newlines are important)\r\n\r\n```\r\nerror: this file contains an un-closed delimiter\r\n --> main.rs:2:2\r\n  |\r\n1 | fn p() { match s { v, E { [) {) }\r\n  |        -         - un-closed delimiter\r\n  |        |\r\n  |        un-closed delimiter\r\n2 | \r\n  |  ^\r\n\r\nerror: expected one of `,` or `}`, found `{`\r\n --> main.rs:1:25\r\n  |\r\n1 | fn p() { match s { v, E { [) {) }\r\n  |                -        ^ expected one of `,` or `}` here\r\n  |                |\r\n  |                while parsing this struct\r\n\r\nerror: struct literals are not allowed here\r\n --> main.rs:1:16\r\n  |\r\n1 |   fn p() { match s { v, E { [) {) }\r\n  |  ________________^\r\n2 | |\r\n  | |_^\r\nthread 'rustc' panicked at 'byte index 1 is out of bounds of ``', src/libcore/str/mod.rs:2019:9\r\nstack backtrace:\r\n   0: std::panicking::default_hook::{{closure}}\r\n   1: std::panicking::default_hook\r\n   2: rustc::util::common::panic_hook\r\n   3: std::panicking::rust_panic_with_hook\r\n   4: std::panicking::continue_panic_fmt\r\n   5: rust_begin_unwind\r\n   6: core::panicking::panic_fmt\r\n   7: core::str::slice_error_fail\r\n   8: core::str::traits::<impl core::slice::SliceIndex<str> for core::ops::range::RangeTo<usize>>::index::{{closure}}\r\n   9: <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold\r\n  10: <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter\r\n  11: <rustc_errors::emitter::EmitterWriter as rustc_errors::emitter::Emitter>::emit_diagnostic\r\n  12: rustc_errors::Handler::emit_db\r\n  13: rustc_errors::diagnostic_builder::DiagnosticBuilder::emit\r\n  14: syntax::parse::parser::Parser::parse_bottom_expr\r\n  15: syntax::parse::parser::Parser::parse_dot_or_call_expr\r\n  16: syntax::parse::parser::Parser::parse_prefix_expr\r\n  17: syntax::parse::parser::Parser::parse_assoc_expr_with\r\n  18: syntax::parse::parser::Parser::parse_bottom_expr\r\n  19: syntax::parse::parser::Parser::parse_dot_or_call_expr\r\n  20: syntax::parse::parser::Parser::parse_prefix_expr\r\n  21: syntax::parse::parser::Parser::parse_assoc_expr_with\r\n  22: syntax::parse::parser::Parser::parse_stmt_without_recovery\r\n  23: syntax::parse::parser::Parser::parse_full_stmt\r\n  24: syntax::parse::parser::Parser::parse_block_tail\r\n  25: syntax::parse::parser::Parser::parse_inner_attrs_and_block\r\n  26: syntax::parse::parser::Parser::parse_item_fn\r\n  27: syntax::parse::parser::Parser::parse_item_implementation\r\n  28: syntax::parse::parser::Parser::parse_item_\r\n  29: syntax::parse::parser::Parser::parse_item\r\n  30: syntax::parse::parser::Parser::parse_mod_items\r\n  31: syntax::parse::parser::Parser::parse_crate_mod\r\n  32: syntax::parse::parse_crate_from_file\r\n  33: rustc_interface::passes::parse::{{closure}}\r\n  34: rustc::util::common::time\r\n  35: rustc_interface::passes::parse\r\n  36: rustc_interface::queries::Query<T>::compute\r\n  37: rustc_interface::queries::<impl rustc_interface::interface::Compiler>::parse\r\n  38: rustc_interface::interface::run_compiler_in_existing_thread_pool\r\n  39: std::thread::local::LocalKey<T>::with\r\n  40: scoped_tls::ScopedKey<T>::set\r\n  41: syntax::with_globals\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nquery stack during panic:\r\nend of query stack\r\nerror: incorrect close delimiter: `)`\r\n --> main.rs:1:28\r\n  |\r\n1 | fn p() { match s { v, E { [) {) }\r\n  |                           -^ incorrect close delimiter\r\n  |                           |\r\n  |                           un-closed delimiter\r\n\r\nerror: incorrect close delimiter: `)`\r\n --> main.rs:1:31\r\n  |\r\n1 | fn p() { match s { v, E { [) {) }\r\n  |                              -^ incorrect close delimiter\r\n  |                              |\r\n  |                              un-closed delimiter\r\n\r\nerror: aborting due to 4 previous errors\r\n\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.38.0-nightly (03f19f7ff 2019-07-24) running on x86_64-apple-darwin\r\n```\r\n\r\nThe error happens on stable, beta, and nightly.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62973/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 1, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62973/timeline", "performed_via_github_app": null, "state_reason": "completed"}