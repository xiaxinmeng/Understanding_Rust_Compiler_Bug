{"url": "https://api.github.com/repos/rust-lang/rust/issues/30933", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30933/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30933/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30933/events", "html_url": "https://github.com/rust-lang/rust/issues/30933", "id": 126869386, "node_id": "MDU6SXNzdWUxMjY4NjkzODY=", "number": 30933, "title": "Cross-crate #[inline] functions are handled badly in unoptimized builds", "user": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-01-15T13:11:47Z", "updated_at": "2016-01-15T13:20:13Z", "closed_at": "2016-01-15T13:20:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Consider this simple code:\n\n``` rust\nfn main() {\n    let _ = Vec::<u8>::new();\n}\n```\n\nWhen generating LLVM IR on the Playpen, my browser freezes for several seconds. With debug info, this generates 85 KiB of LLVM IR (1319 loc), without debug info its still 41K (857 loc).\n\nThe LLVM IR contains dozens of functions declared in `std` or `core`: Drop glue, `Deref` impls, even allocation functions and _iterators_ (presumably used by the drop glue)! Despite being marked `#[inline]`, all of these functions should be available inside of `std` and `core` and so we could just link to them instead of retranslating all of them.\n\nInterestingly, because we're compiling everything in debug mode, no function calls will actually get inlined and the inlined functions will run slower then if we would just link to their optimized counterparts (since AFAIK `std` and `core` are always shipped with optimizations).\n\nThis worsens compile times _and_ unoptimized code performance (although I haven't measured by how much).\n", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30933/timeline", "performed_via_github_app": null, "state_reason": "completed"}