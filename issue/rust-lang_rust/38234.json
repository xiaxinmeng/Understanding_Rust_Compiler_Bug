{"url": "https://api.github.com/repos/rust-lang/rust/issues/38234", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38234/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38234/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38234/events", "html_url": "https://github.com/rust-lang/rust/issues/38234", "id": 194232127, "node_id": "MDU6SXNzdWUxOTQyMzIxMjc=", "number": 38234, "title": "Compilation error reporting: Incomplete match over types", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2016-12-08T02:36:18Z", "updated_at": "2019-05-02T08:00:19Z", "closed_at": "2019-05-01T21:49:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "Heya,\r\n\r\nI'm currently learning rust through a small systems-related project, with a knowledgeable mentor ( @GuillaumeGomez ) ;)\r\n\r\nWhen (badly) attempting to match over the Result<EnumType, String> returned by one of my functions, I only made a match explicit for one `Ok` case, and was expecting to have one kitchen-sink case to catch all other cases (This was aimed at testing).\r\n\r\nThe error I got rightly claimed that I was using incompatible types, but did not make it clear that I was either missing some potential cases (Ok over some other types of my enum) .\r\n\r\nI do not know whether this would be easy or feasible, but it could be nice to have a suggestion pointing at the potential error that the match may deserve to be more detailed.\r\n\r\nHere is a sample test code:\r\n```\r\nuse std::fs::{self,File};\r\nuse std::net::{self,TcpStream,TcpListener};\r\n\r\nenum FdImplementor {\r\n    File(File),\r\n    TcpStream(TcpStream),\r\n    TcpListener(TcpListener),\r\n}\r\n\r\nfn do_smthg() -> Result<FdImplementor, String> {\r\n    Ok(FdImplementor::File(fs::File::create(\"/tmp/pathtest.txt\").map_err(|_| \"failed to create file\")?))\r\n}\r\n\r\nfn test() -> Result<bool, String> {\r\n    match do_smthg() {\r\n        Ok(FdImplementor::File(file)) => Ok(true),\r\n        e => e\r\n    }\r\n}\r\n\r\nfn main() {\r\n    test();\r\n}\r\n```\r\n\r\nAnd the error:\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nerror[E0308]: match arms have incompatible types\r\n  --> <anon>:15:5\r\n   |\r\n15 |     match do_smthg() {\r\n   |     ^ expected bool, found enum `FdImplementor`\r\n   |\r\n   = note: expected type `std::result::Result<bool, std::string::String>`\r\n   = note:    found type `std::result::Result<FdImplementor, std::string::String>`\r\nnote: match arm with an incompatible type\r\n  --> <anon>:17:14\r\n   |\r\n17 |         e => e\r\n   |              ^\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\n", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38234/timeline", "performed_via_github_app": null, "state_reason": "completed"}