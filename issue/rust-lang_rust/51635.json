{"url": "https://api.github.com/repos/rust-lang/rust/issues/51635", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51635/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51635/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51635/events", "html_url": "https://github.com/rust-lang/rust/issues/51635", "id": 333695180, "node_id": "MDU6SXNzdWUzMzM2OTUxODA=", "number": 51635, "title": "Rustc does display a correct error message on type missmatch but does not show line numbers", "user": {"login": "Yatekii", "id": 529795, "node_id": "MDQ6VXNlcjUyOTc5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/529795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yatekii", "html_url": "https://github.com/Yatekii", "followers_url": "https://api.github.com/users/Yatekii/followers", "following_url": "https://api.github.com/users/Yatekii/following{/other_user}", "gists_url": "https://api.github.com/users/Yatekii/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yatekii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yatekii/subscriptions", "organizations_url": "https://api.github.com/users/Yatekii/orgs", "repos_url": "https://api.github.com/users/Yatekii/repos", "events_url": "https://api.github.com/users/Yatekii/events{/privacy}", "received_events_url": "https://api.github.com/users/Yatekii/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1050784470, "node_id": "MDU6TGFiZWwxMDUwNzg0NDcw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-bisection", "name": "E-needs-bisection", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs bisection: https://github.com/rust-lang/cargo-bisect-rustc"}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}, {"id": 1596121013, "node_id": "MDU6TGFiZWwxNTk2MTIxMDEz", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-confusing", "name": "D-confusing", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error that should be reworked"}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}, {"id": 2079070889, "node_id": "MDU6TGFiZWwyMDc5MDcwODg5", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-proc-macros", "name": "A-proc-macros", "color": "f7e101", "default": false, "description": "Area: Procedural macros"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 34, "created_at": "2018-06-19T14:23:05Z", "updated_at": "2021-01-08T01:51:12Z", "closed_at": "2021-01-08T01:51:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a case where rustc will show me properly that I have a Type missmatch.\r\nUnfortunately it wont show me where exactly it is.\r\n\r\nI tracked the error location down in my own code and can safely say that the code attached is the source, but I couldn't reproduce it yet.\r\nOnce I am able to reproduce it, I will report it here, but maybe someone already has a clue or similar experiences.\r\n\r\nThe faulty error report:\r\n```\r\nyatekii@partymobile:~/repos/schema_renderer$ cargo build --release\r\n   Compiling schema_parser v0.1.0 (file:///home/yatekii/repos/schema_renderer)\r\nerror[E0308]: mismatched types\r\n  |\r\n  = note: expected type `euclid::TypedRect<f32, schema_parser::geometry::SchemaSpace>`\r\n             found type `ncollide2d::bounding_volume::AABB<f32>`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0308`.\r\nerror: Could not compile `schema_parser`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nAnd the code that triggers it:\r\n\r\n```rust\r\n// Error triggered by:\r\n\r\nlet bb = self.model.schema.get_bounding_box();\r\nself.model.view_state.update_from_box_pan(bb);\r\n\r\n// Where\r\n\r\npub fn get_bounding_box(&self) -> SchemaAABB {\r\n    use ncollide2d::math::{ Point, Vector };\r\n    let mut aabb = SchemaAABB::new(\r\n        Point::new(0.0, 0.0),\r\n        Point::new(0.0, 0.0)\r\n    );\r\n    for component in &self.drawables {\r\n        let i = &component.instance;\r\n        use schema_parser::helpers::Translatable;\r\n        let bb = &i.get_boundingbox().translated(Vector::new(i.position.x, i.position.y));\r\n        use ncollide2d::bounding_volume::BoundingVolume;\r\n        aabb.merge(bb)\r\n    }\r\n    aabb\r\n}\r\n\r\n// and\r\n\r\npub fn update_from_box_pan(&mut self, rect: geometry::SchemaRect) {\r\n    let m = (rect.max_x() - rect.min_x()).max(rect.max_y() - rect.min_y());\r\n    if m > 0.0 {\r\n        self.scale = 2.45 / m;\r\n        self.center = (rect.bottom_left() + rect.top_right().to_vector()) / -2.0;\r\n        self.update_perspective();\r\n        println!(\"Rect: {}\", rect);\r\n    }\r\n}\r\n```\r\n\r\nRustc version is: nightly-x86_64-unknown-linux-gnu rustc 1.28.0-nightly (86a8f1a63 2018-06-17)", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51635/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51635/timeline", "performed_via_github_app": null, "state_reason": "completed"}