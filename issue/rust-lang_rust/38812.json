{"url": "https://api.github.com/repos/rust-lang/rust/issues/38812", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38812/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38812/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38812/events", "html_url": "https://github.com/rust-lang/rust/issues/38812", "id": 198604922, "node_id": "MDU6SXNzdWUxOTg2MDQ5MjI=", "number": 38812, "title": "error message for uninferrable type", "user": {"login": "dherman", "id": 307871, "node_id": "MDQ6VXNlcjMwNzg3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/307871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dherman", "html_url": "https://github.com/dherman", "followers_url": "https://api.github.com/users/dherman/followers", "following_url": "https://api.github.com/users/dherman/following{/other_user}", "gists_url": "https://api.github.com/users/dherman/gists{/gist_id}", "starred_url": "https://api.github.com/users/dherman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dherman/subscriptions", "organizations_url": "https://api.github.com/users/dherman/orgs", "repos_url": "https://api.github.com/users/dherman/repos", "events_url": "https://api.github.com/users/dherman/events{/privacy}", "received_events_url": "https://api.github.com/users/dherman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-01-04T00:37:49Z", "updated_at": "2017-02-21T21:45:43Z", "closed_at": "2017-02-21T21:45:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The error message when an unused variable leads to an uninferrable type is confusing:\r\n\r\n```rust\r\nfn main() {\r\n    let v = vec![];\r\n}\r\n// rustc 1.14.0 (e8a012324 2016-12-16)\r\n// error[E0282]: unable to infer enough type information about `_`\r\n//  --> <anon>:2:13\r\n//   |\r\n// 2 |     let v = vec![];\r\n//   |             ^^^^^^ cannot infer type for `_`\r\n//   |\r\n//   = note: type annotations or generic parameter binding required\r\n//   = note: this error originates in a macro outside of the current crate\r\n```\r\n\r\n@nikomatsakis pointed me to #36554. I'm not sure how much that issue was aiming to fix.\r\n\r\nIf I'm not mistaken, most (all?) of these kinds of situations occur when an expression is flowing into an unannotated local variable binding. It seems like a better error message would highlight the binding as well as the `vec![]` expression (or whatever the uninferrable expression is), and suggest that the variable should either be used elsewhere in the function or annotated with a type.\r\n\r\n/cc @jonathandturner", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38812/timeline", "performed_via_github_app": null, "state_reason": "completed"}