{"url": "https://api.github.com/repos/rust-lang/rust/issues/42007", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42007/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42007/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42007/events", "html_url": "https://github.com/rust-lang/rust/issues/42007", "id": 228700262, "node_id": "MDU6SXNzdWUyMjg3MDAyNjI=", "number": 42007, "title": "ICE: trivial_numeric_casts when using SDL on nightly", "user": {"login": "andrewhickman", "id": 19718247, "node_id": "MDQ6VXNlcjE5NzE4MjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19718247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewhickman", "html_url": "https://github.com/andrewhickman", "followers_url": "https://api.github.com/users/andrewhickman/followers", "following_url": "https://api.github.com/users/andrewhickman/following{/other_user}", "gists_url": "https://api.github.com/users/andrewhickman/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewhickman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewhickman/subscriptions", "organizations_url": "https://api.github.com/users/andrewhickman/orgs", "repos_url": "https://api.github.com/users/andrewhickman/repos", "events_url": "https://api.github.com/users/andrewhickman/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewhickman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-05-15T12:35:17Z", "updated_at": "2017-06-25T20:14:07Z", "closed_at": "2017-05-25T16:52:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Compiling this short snippet causes a compiler panic\r\n\r\n```\r\nextern crate sdl2;\r\n\r\nuse sdl2::mouse::MouseButton;\r\n\r\nenum Input {\r\n    MouseButton(MouseButton),\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\n\r\nCompiler version:\r\n```\r\nPS C:\\Users\\me\\Documents\\rust\\sdltest> rustc --version --verbose\r\nrustc 1.17.0 (56124baa9 2017-04-24)\r\nbinary: rustc\r\ncommit-hash: 56124baa9e73f28c0709e59e74783cf234a978cf\r\ncommit-date: 2017-04-24\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.17.0\r\nLLVM version: 3.9\r\n```\r\nSDL version was  `0.29.0`.\r\n\r\nBacktrace: \r\n```   \r\nPS C:\\Users\\me\\Documents\\rust\\sdltest> cargo +nightly build\r\n    Updating registry `https://github.com/rust-lang/crates.io-index`\r\n   Compiling sdl2-sys v0.27.3\r\n   Compiling sdltest v0.1.0 (file:///C:/Users/me/Documents/rust/sdltest)\r\n   Compiling sdl2 v0.29.1\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'invalid lint-id `trivial_numeric_casts`', src\\librustc\\lint\\context.rs:1322\r\nstack backtrace:\r\n   0: <std::time::SystemTimeError as core::fmt::Display>::fmt\r\n   1: std::panicking::Location::line\r\n   2: std::panicking::Location::line\r\n   3: std::panicking::rust_panic_with_hook\r\n   4: std::panicking::begin_panic_fmt\r\n   5: std::panicking::begin_panic_fmt\r\n   6: <unknown>\r\n   7: rustc_metadata::decoder::<impl rustc_metadata::cstore::CrateMetadata>::item_body_tables\r\n   8: rustc_metadata::cstore_impl::provide\r\n   9: rustc::ty::maps::<impl rustc::ty::maps::queries::typeck_tables_of<'tcx>>::try_get\r\n  10: rustc::ty::maps::TyCtxtAt::typeck_tables_of\r\n  11: rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::typeck_tables_of\r\n  12: rustc_const_eval::eval::provide\r\n  13: rustc::ty::maps::<impl rustc::ty::maps::queries::const_eval<'tcx>>::try_get\r\n  14: rustc::ty::maps::TyCtxtAt::const_eval\r\n  15: rustc::ty::layout::Layout::compute_uncached\r\n  16: rustc::ty::util::<impl rustc::ty::TyS<'tcx>>::needs_drop_uncached\r\n  17: <rustc::util::common::Indenter as core::ops::Drop>::drop\r\n  18: rustc::ty::layout::Layout::compute_uncached\r\n  19: <rustc_lint::types::VariantSizeDifferences as rustc::lint::LateLintPass<'a, 'tcx>>::check_item\r\n  20: rustc::lint::context::gather_attrs\r\n  21: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_mod\r\n  22: rustc::lint::context::check_crate\r\n  23: rustc_driver::driver::count_nodes\r\n  24: rustc_driver::driver::count_nodes\r\n  25: rustc_driver::driver::compile_input\r\n  26: rustc_driver::run_compiler\r\n  27: <unknown>\r\n  28: _rust_maybe_catch_panic\r\n  29: <rustc_driver::derive_registrar::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor<'v>>::visit_impl_item\r\n  30: std::sys::imp::thread::Thread::new\r\n  31: BaseThreadInitThunk\r\n\r\nerror: Could not compile `sdltest`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42007/timeline", "performed_via_github_app": null, "state_reason": "completed"}