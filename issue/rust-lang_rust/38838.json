{"url": "https://api.github.com/repos/rust-lang/rust/issues/38838", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38838/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38838/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38838/events", "html_url": "https://github.com/rust-lang/rust/issues/38838", "id": 198855362, "node_id": "MDU6SXNzdWUxOTg4NTUzNjI=", "number": 38838, "title": "error: internal compiler error: src/librustc_trans/type_of.rs:154: Unexpected tail in unsized_info_ty: Foo for ty=Foo", "user": {"login": "rnewman", "id": 91722, "node_id": "MDQ6VXNlcjkxNzIy", "avatar_url": "https://avatars.githubusercontent.com/u/91722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rnewman", "html_url": "https://github.com/rnewman", "followers_url": "https://api.github.com/users/rnewman/followers", "following_url": "https://api.github.com/users/rnewman/following{/other_user}", "gists_url": "https://api.github.com/users/rnewman/gists{/gist_id}", "starred_url": "https://api.github.com/users/rnewman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rnewman/subscriptions", "organizations_url": "https://api.github.com/users/rnewman/orgs", "repos_url": "https://api.github.com/users/rnewman/repos", "events_url": "https://api.github.com/users/rnewman/events{/privacy}", "received_events_url": "https://api.github.com/users/rnewman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-05T01:36:14Z", "updated_at": "2017-01-05T01:47:02Z", "closed_at": "2017-01-05T01:43:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "This small amount of malformed Rust:\r\n\r\n```rust\r\nenum Element {}\r\n\r\nenum Foo {\r\n    FooArray { elements: [Element] },\r\n    FooElem { element: Element },\r\n}\r\n\r\nfn bar(spec: &Foo) -> bool {\r\n    match spec {\r\n        &Foo::FooArray { elements: _ }   => false,\r\n        &Foo::FooElem { element: _ }   => false,\r\n    }\r\n}\r\n\r\npub fn main() {\r\n    print!(\"Main\");\r\n}\r\n```\r\n\r\ncauses `rustc` 1.13 to panic:\r\n\r\n```\r\nerror: internal compiler error: src/librustc_trans/type_of.rs:154: Unexpected tail in unsized_info_ty: Foo for ty=Foo\r\n\u2026\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:656\r\nstack backtrace:\r\n   1:        0x106579488 - std::sys::backtrace::tracing::imp::write::h6f1d53a70916b90d\r\n   2:        0x106586c4f - std::panicking::default_hook::{{closure}}::h137e876f7d3b5850\r\n   3:        0x1065840fd - std::panicking::default_hook::h0ac3811ec7cee78c\r\n   4:        0x106584796 - std::panicking::rust_panic_with_hook::hc303199e04562edf\r\n   5:        0x1064584da - std::panicking::begin_panic::hf3c77cb5fd5814c4\r\n   6:        0x10646897a - rustc_errors::Handler::bug::h9bb46cf778492ea1\r\n   7:        0x103f5aadc - rustc::session::opt_span_bug_fmt::{{closure}}::hf0e25c590c479ec5\r\n   8:        0x103e90729 - rustc::session::opt_span_bug_fmt::h20b1b2ceeefb3522\r\n   9:        0x103e904da - rustc::session::bug_fmt::h203210307841d95b\r\n  10:        0x1030fb8ae - rustc_trans::type_of::unsized_info_ty::h680ddbd47367bc7c\r\n  11:        0x1030fbf8b - rustc_trans::type_of::in_memory_type_of::h570d089fc2dbacc6\r\n  12:        0x103109522 - rustc_trans::abi::FnType::unadjusted::{{closure}}::h920834572dd7a84e\r\n  13:        0x103061d1f - rustc_trans::abi::FnType::unadjusted::he2b6c17199499f5c\r\n  14:        0x1030b9171 - rustc_trans::declare::declare_fn::h721816f3ca217145\r\n  15:        0x1030f4e9b - rustc_trans::trans_item::TransItem::predefine::hffbc6c5dfea77a18\r\n  16:        0x103073131 - rustc_trans::base::trans_crate::h7b6c2eb43ae0c1da\r\n  17:        0x102ef0d21 - rustc_driver::driver::phase_4_translate_to_llvm::h0646ffc4a1716d29\r\n  18:        0x102f2a3bb - rustc_driver::driver::compile_input::{{closure}}::h5a81b1e8a8f3f531\r\n  19:        0x102f168b2 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::h4091eeab6f271a29\r\n  20:        0x102eee9c6 - rustc_driver::driver::phase_3_run_analysis_passes::hff1c31d493acfd09\r\n  21:        0x102edc7da - rustc_driver::driver::compile_input::hef221f9f618e92f5\r\n  22:        0x102f048b8 - rustc_driver::run_compiler::h7dddd4089f8330b4\r\n  23:        0x102e463b0 - std::panicking::try::do_call::h1e3ece12e3f812df\r\n  24:        0x10658720a - __rust_maybe_catch_panic\r\n  25:        0x102e65074 - <F as alloc::boxed::FnBox<A>>::call_box::h05b222e46803eb30\r\n  26:        0x1065833b4 - std::sys::thread::Thread::new::thread_start::h759e10bc4abc7e72\r\n  27:     0x7fff9591399c - _pthread_body\r\n  28:     0x7fff95913919 - _pthread_start\r\n```\r\n\r\n", "closed_by": {"login": "apasel422", "id": 8644784, "node_id": "MDQ6VXNlcjg2NDQ3ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apasel422", "html_url": "https://github.com/apasel422", "followers_url": "https://api.github.com/users/apasel422/followers", "following_url": "https://api.github.com/users/apasel422/following{/other_user}", "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}", "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions", "organizations_url": "https://api.github.com/users/apasel422/orgs", "repos_url": "https://api.github.com/users/apasel422/repos", "events_url": "https://api.github.com/users/apasel422/events{/privacy}", "received_events_url": "https://api.github.com/users/apasel422/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38838/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38838/timeline", "performed_via_github_app": null, "state_reason": "completed"}