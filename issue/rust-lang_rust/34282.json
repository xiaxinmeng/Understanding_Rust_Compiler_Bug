{"url": "https://api.github.com/repos/rust-lang/rust/issues/34282", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34282/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34282/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34282/events", "html_url": "https://github.com/rust-lang/rust/issues/34282", "id": 160336300, "node_id": "MDU6SXNzdWUxNjAzMzYzMDA=", "number": 34282, "title": "rustc on Mac OS X: \"unknown option --as-needed\"", "user": {"login": "cflewis", "id": 43708, "node_id": "MDQ6VXNlcjQzNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/43708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cflewis", "html_url": "https://github.com/cflewis", "followers_url": "https://api.github.com/users/cflewis/followers", "following_url": "https://api.github.com/users/cflewis/following{/other_user}", "gists_url": "https://api.github.com/users/cflewis/gists{/gist_id}", "starred_url": "https://api.github.com/users/cflewis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cflewis/subscriptions", "organizations_url": "https://api.github.com/users/cflewis/orgs", "repos_url": "https://api.github.com/users/cflewis/repos", "events_url": "https://api.github.com/users/cflewis/events{/privacy}", "received_events_url": "https://api.github.com/users/cflewis/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-06-15T04:31:02Z", "updated_at": "2022-08-23T12:06:12Z", "closed_at": "2016-06-15T08:26:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "When trying to cross-compile to a new target (installed by `rustup`) it looks like `--as-needed` is spawned by `rustc`, but this isn't available on Mac OS X (El Capitain)\n\n```\n\u276f cargo build --target=mipsel-unknown-linux-gnu -v\n   Compiling tessel v0.1.0 (file:///Users/cflewis/Documents/Computing/rust/tessel)\n     Running `rustc src/main.rs --crate-name tessel --crate-type bin -g --out-dir /Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug --emit=dep-info,link --target mipsel-unknown-linux-gnu -L dependency=/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug -L dependency=/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug/deps`\nerror: linking with `cc` failed: exit code: 1\nnote: \"cc\" \"-Wl,--as-needed\" \"-Wl,-z,noexecstack\" \"-L\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib\" \"/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug/tessel.0.o\" \"-o\" \"/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug/tessel\" \"-Wl,--gc-sections\" \"-pie\" \"-nodefaultlibs\" \"-L\" \"/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug\" \"-L\" \"/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug/deps\" \"-L\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib\" \"-Wl,-Bstatic\" \"-Wl,-Bdynamic\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/libstd-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/libcollections-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/librustc_unicode-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/librand-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/liballoc-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/liballoc_jemalloc-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/liblibc-d16b8f0e.rlib\" \"/Users/cflewis/.multirust/toolchains/stable-x86_64-apple-darwin/lib/rustlib/mipsel-unknown-linux-gnu/lib/libcore-d16b8f0e.rlib\" \"-l\" \"dl\" \"-l\" \"pthread\" \"-l\" \"gcc_s\" \"-l\" \"pthread\" \"-l\" \"c\" \"-l\" \"m\" \"-l\" \"rt\" \"-l\" \"util\" \"-l\" \"compiler-rt\"\nnote: clang: warning: argument unused during compilation: '-pie'\nld: unknown option: --as-needed\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nerror: aborting due to previous error\nerror: Could not compile `tessel`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name tessel --crate-type bin -g --out-dir /Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug --emit=dep-info,link --target mipsel-unknown-linux-gnu -L dependency=/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug -L dependency=/Users/cflewis/Documents/Computing/rust/tessel/target/mipsel-unknown-linux-gnu/debug/deps` (exit code: 101)\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34282/reactions", "total_count": 32, "+1": 32, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34282/timeline", "performed_via_github_app": null, "state_reason": "completed"}