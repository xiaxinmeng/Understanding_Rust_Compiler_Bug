{"url": "https://api.github.com/repos/rust-lang/rust/issues/78595", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/78595/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/78595/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/78595/events", "html_url": "https://github.com/rust-lang/rust/issues/78595", "id": 733684515, "node_id": "MDU6SXNzdWU3MzM2ODQ1MTU=", "number": 78595, "title": "Compiler complains \"method cannot be invoked on a trait object\" while in fact, a trait bound is missing", "user": {"login": "jocutajar", "id": 10342879, "node_id": "MDQ6VXNlcjEwMzQyODc5", "avatar_url": "https://avatars.githubusercontent.com/u/10342879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jocutajar", "html_url": "https://github.com/jocutajar", "followers_url": "https://api.github.com/users/jocutajar/followers", "following_url": "https://api.github.com/users/jocutajar/following{/other_user}", "gists_url": "https://api.github.com/users/jocutajar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jocutajar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jocutajar/subscriptions", "organizations_url": "https://api.github.com/users/jocutajar/orgs", "repos_url": "https://api.github.com/users/jocutajar/repos", "events_url": "https://api.github.com/users/jocutajar/events{/privacy}", "received_events_url": "https://api.github.com/users/jocutajar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 13836860, "node_id": "MDU6TGFiZWwxMzgzNjg2MA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-traits", "name": "A-traits", "color": "f7e101", "default": false, "description": "Area: Trait system"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1624891239, "node_id": "MDU6TGFiZWwxNjI0ODkxMjM5", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-incorrect", "name": "D-incorrect", "color": "c9f7a3", "default": false, "description": "A diagnostic that is giving misleading or incorrect information"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-31T10:05:05Z", "updated_at": "2022-11-04T12:21:37Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "**Why is it a problem:**\r\nI'm so used to helpful compiler advice that I'm almost upset with this misleading statement :) \r\n\r\n**Actual:**\r\nCalling StreamExt::forward fails unless I add Unpin trait, but the error suggests that it is not possible to call the method on the trait object because it has to be Sized, no mention of Unpin and on top of it it suggests adding a `use` clause that is already present.\r\n\r\n**Expected:**\r\nAn advice about missing Unpin trait.\r\n\r\n**Reproduce:**\r\nsee [example](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=56809d88a102bef9ac81813410a11645):\r\n```rust\r\nuse futures::Future;\r\nextern crate futures; // 0.3.6\r\n\r\nuse crate::futures::StreamExt;\r\nuse futures::Sink;\r\nuse futures::Stream;\r\n\r\n/// Notice missing +Unpin constraint and the misleading error produced\r\nfn test_fails(\r\n    input: Box<dyn Stream<Item = Result<(), ()>>>,\r\n    output: Box<dyn Sink<(), Error = ()>>,\r\n) -> Box<dyn Future<Output = Result<(), ()>>> {\r\n    input.forward(output)\r\n}\r\n\r\nfn test_works(\r\n    input: Box<dyn Stream<Item = Result<(), ()>> + Unpin>,\r\n    output: Box<dyn Sink<(), Error = ()> + Unpin>,\r\n) -> Box<dyn Future<Output = Result<(), ()>>> {\r\n    Box::new(input.forward(output))\r\n}\r\n```\r\n\r\nError:\r\n```console\r\nerror: the `forward` method cannot be invoked on a trait object\r\n    --> src/lib.rs:13:11\r\n     |\r\n13   |     input.forward(output)\r\n     |           ^^^^^^^\r\n     | \r\n    ::: /playground/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-util-0.3.6/src/stream/stream/mod.rs:1259:27\r\n     |\r\n1259 |         Self: TryStream + Sized,\r\n     |                           ----- this has a `Sized` requirement\r\n     |\r\nhelp: another candidate was found in the following trait, perhaps add a `use` for it:\r\n     |\r\n1    | use crate::futures::StreamExt;\r\n     |\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/78595/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/78595/timeline", "performed_via_github_app": null, "state_reason": null}