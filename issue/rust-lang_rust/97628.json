{"url": "https://api.github.com/repos/rust-lang/rust/issues/97628", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/97628/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/97628/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/97628/events", "html_url": "https://github.com/rust-lang/rust/issues/97628", "id": 1256757068, "node_id": "I_kwDOAAsO6M5K6JdM", "number": 97628, "title": "E0364: Bad output for macros/no explanation of `#[macro_export]`", "user": {"login": "halvko", "id": 2468434, "node_id": "MDQ6VXNlcjI0Njg0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2468434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/halvko", "html_url": "https://github.com/halvko", "followers_url": "https://api.github.com/users/halvko/followers", "following_url": "https://api.github.com/users/halvko/following{/other_user}", "gists_url": "https://api.github.com/users/halvko/gists{/gist_id}", "starred_url": "https://api.github.com/users/halvko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/halvko/subscriptions", "organizations_url": "https://api.github.com/users/halvko/orgs", "repos_url": "https://api.github.com/users/halvko/repos", "events_url": "https://api.github.com/users/halvko/events{/privacy}", "received_events_url": "https://api.github.com/users/halvko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1183099971, "node_id": "MDU6TGFiZWwxMTgzMDk5OTcx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-suggestion-diagnostics", "name": "A-suggestion-diagnostics", "color": "f7e101", "default": false, "description": "Area: suggestions generated by the compiler applied by cargo fix"}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}], "state": "closed", "locked": false, "assignee": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-06-01T18:44:38Z", "updated_at": "2022-06-15T08:20:15Z", "closed_at": "2022-06-15T08:20:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nGiven the following code: [playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=2a98ea84efcb2145200e42a22262750d)\r\n\r\n```rust\r\nmacro_rules! foo {\r\n    () => {};\r\n}\r\npub use foo;\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[[E0364]](https://doc.rust-lang.org/stable/error-index.html#E0364): `foo` is only public within the crate, and cannot be re-exported outside\r\n --> src/lib.rs:4:9\r\n  |\r\n4 | pub use foo;\r\n  |         ^^^\r\n  |\r\nnote: consider marking `foo` as `pub` in the imported module\r\n --> src/lib.rs:4:9\r\n  |\r\n4 | pub use foo;\r\n  |         ^^^\r\n```\r\n\r\nIdeally the output should probably look like:\r\n\r\n```\r\nerror[[E0364]](https://doc.rust-lang.org/stable/error-index.html#E0364): `foo` is only public within the crate, and cannot be re-exported outside\r\n --> src/lib.rs:4:9\r\n  |\r\n4 | pub use foo;\r\n  |         ^^^\r\n  |\r\nnote: consider marking `foo` as `#[macro_export]`\r\n --> src/lib.rs:4:9\r\n  | \r\n  | #[macro_export]\r\n1 | macro_rules! foo {\r\n  | \r\n```\r\n\r\n<!--\r\nIf the problem is not self-explanatory, please provide a rationale for the\r\nchange.\r\n-->\r\nThis error does not help explain how to fix it. In addition to explaining `#[macro_export]`,  `pub(crate) use foo;` could also be shown, so the user can decide what they wanted to do.\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/97628/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/97628/timeline", "performed_via_github_app": null, "state_reason": "completed"}