{"url": "https://api.github.com/repos/rust-lang/rust/issues/86961", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86961/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86961/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86961/events", "html_url": "https://github.com/rust-lang/rust/issues/86961", "id": 939319101, "node_id": "MDU6SXNzdWU5MzkzMTkxMDE=", "number": 86961, "title": "Panic while building encoding_rs_io v0.1.7 as a dependency of ripgrep v13.0.0", "user": {"login": "ink-splatters", "id": 2706884, "node_id": "MDQ6VXNlcjI3MDY4ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2706884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ink-splatters", "html_url": "https://github.com/ink-splatters", "followers_url": "https://api.github.com/users/ink-splatters/followers", "following_url": "https://api.github.com/users/ink-splatters/following{/other_user}", "gists_url": "https://api.github.com/users/ink-splatters/gists{/gist_id}", "starred_url": "https://api.github.com/users/ink-splatters/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ink-splatters/subscriptions", "organizations_url": "https://api.github.com/users/ink-splatters/orgs", "repos_url": "https://api.github.com/users/ink-splatters/repos", "events_url": "https://api.github.com/users/ink-splatters/events{/privacy}", "received_events_url": "https://api.github.com/users/ink-splatters/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-07T22:48:35Z", "updated_at": "2021-07-19T12:00:32Z", "closed_at": "2021-07-19T12:00:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Code\r\n\r\n```bash\r\nrustup-init --default-toolchain nightly\r\ngit clone https://github.com/BurntSushi/ripgrep && cd ripgrep\r\ngit checkout 9eddb71b8e86a04d7048b920b9b50a2e97068d03\r\nRUSTFLAGS=\"-C target-feature=+ssse3\" RUST_BACKTRACE=1 cargo install --verbose --features 'simd-accel,pcre2' ripgrep\r\n```\r\n\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.55.0-nightly (885399992 2021-07-06)\r\nbinary: rustc\r\ncommit-hash: 885399992c4c1dde37b506b8507a7d69415646b9\r\ncommit-date: 2021-07-06\r\nhost: x86_64-apple-darwin\r\nrelease: 1.55.0-nightly\r\nLLVM version: 12.0.1\r\n```\r\n\r\n### Error output\r\n\r\n```\r\nompiling encoding_rs_io v0.1.7\r\n     Running `rustc --crate-name encoding_rs_io /Users/inksplatters/.cargo/registry/src/github.com-1ecc6299db9ec823/encoding_rs_io-0.1.7/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C split-debuginfo=unpacked -C debuginfo=1 -C metadata=01a19f4ad7cdacec -C extra-filename=-01a19f4ad7cdacec --out-dir /var/folders/16/6p6m5thd5fz5nt4sfmfkrg1w0000gn/T/cargo-installEwbCJf/release/deps -L dependency=/var/folders/16/6p6m5thd5fz5nt4sfmfkrg1w0000gn/T/cargo-installEwbCJf/release/deps --extern encoding_rs=/var/folders/16/6p6m5thd5fz5nt4sfmfkrg1w0000gn/T/cargo-installEwbCJf/release/deps/libencoding_rs-708ebfc4e3ac1ad7.rmeta --cap-lints allow`\r\nerror: internal compiler error: /rustc/885399992c4c1dde37b506b8507a7d69415646b9/compiler/rustc_middle/src/ty/consts.rs:195:32: expected bits of [u32; 16], got Const {\r\n    ty: [u32; 16],\r\n    val: Value(\r\n        ByRef {\r\n            alloc: Allocation {\r\n                bytes: [\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    16,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    1,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    17,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    2,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    18,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    3,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    19,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    4,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    20,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    5,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    21,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    6,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    22,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    7,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    23,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                ],\r\n                relocations: Relocations(\r\n                    SortedMap {\r\n                        data: [],\r\n                    },\r\n                ),\r\n                init_mask: InitMask {\r\n                    blocks: [\r\n                        18446744073709551615,\r\n                        0,\r\n                    ],\r\n                    len: Size {\r\n                        raw: 64,\r\n                    },\r\n                },\r\n                align: Align {\r\n                    pow2: 2,\r\n                },\r\n                mutability: Not,\r\n                extra: (),\r\n            },\r\n            offset: Size {\r\n                raw: 0,\r\n            },\r\n        },\r\n    ),\r\n}\r\n\r\nthread 'rustc' panicked at 'Box<dyn Any>', compiler/rustc_errors/src/lib.rs:1035:9\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\n   0:        0x108367b74 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h34b3603c71719f6e\r\n   1:        0x1083cc3ec - core::fmt::write::h8160330c41daaf61\r\n   2:        0x108359a7a - std::io::Write::write_fmt::he00fb8a17eedd7e2\r\n   3:        0x10836b81f - std::panicking::default_hook::{{closure}}::h06b7d0f8994e0048\r\n   4:        0x10836b31d - std::panicking::default_hook::h7374470051a00994\r\n   5:        0x10c5b2140 - rustc_driver::DEFAULT_HOOK::{{closure}}::{{closure}}::hbad8576674ddaa49\r\n   6:        0x10836c076 - std::panicking::rust_panic_with_hook::hd84131252813317c\r\n   7:        0x110769031 - std::panicking::begin_panic::{{closure}}::h6b6e6b7c52831570\r\n   8:        0x110769009 - std::sys_common::backtrace::__rust_end_short_backtrace::ha8bf5bfda07f87a5\r\n   9:        0x110a46df1 - std::panicking::begin_panic::h63d928fdac4c2444\r\n  10:        0x1107965f0 - std::panic::panic_any::hce85e00a15e34e48\r\n  11:        0x11079cc0c - rustc_errors::HandlerInner::bug::h8750061d7c630e4f\r\n  12:        0x11079a9e7 - rustc_errors::Handler::bug::ha70c63035489cb37\r\n  13:        0x1104756c6 - rustc_middle::util::bug::opt_span_bug_fmt::{{closure}}::ha73fadbfe63baca3\r\n  14:        0x110473926 - rustc_middle::ty::context::tls::with_opt::{{closure}}::h37e7e5d90ef41454\r\n  15:        0x1104738ef - rustc_middle::ty::context::tls::with_opt::h139751c8f1db4e78\r\n  16:        0x11047560b - rustc_middle::util::bug::opt_span_bug_fmt::h1a0ab06216a61b85\r\n  17:        0x110a337ef - rustc_middle::util::bug::bug_fmt::h1535e8fbeb620914\r\n  18:        0x10fc02c4c - rustc_middle::ty::consts::Const::eval_bits::{{closure}}::hd0c037716e3750e9\r\n  19:        0x10fc0a02c - rustc_codegen_ssa::debuginfo::type_names::push_generic_params_internal::h09f4eb7a3690f3f4\r\n  20:        0x10fc0a149 - rustc_codegen_ssa::debuginfo::type_names::push_generic_params::hb9ff526a9aaed71d\r\n  21:        0x10c8283f4 - rustc_codegen_llvm::debuginfo::<impl rustc_codegen_ssa::traits::debuginfo::DebugInfoMethods for rustc_codegen_llvm::context::CodegenCx>::dbg_scope_fn::get_template_parameters::hf4e5014bde3bd0ae\r\n  22:        0x10c80e9a9 - rustc_codegen_llvm::debuginfo::<impl rustc_codegen_ssa::traits::debuginfo::DebugInfoMethods for rustc_codegen_llvm::context::CodegenCx>::dbg_scope_fn::hfdef23b6d869afcc\r\n  23:        0x10c80e389 - rustc_codegen_llvm::debuginfo::<impl rustc_codegen_ssa::traits::debuginfo::DebugInfoMethods for rustc_codegen_llvm::context::CodegenCx>::create_function_debug_context::h27ca46ff78d77d74\r\n  24:        0x10c87f4d5 - rustc_codegen_ssa::mir::codegen_mir::haedb158b46ee2778\r\n  25:        0x10c817829 - rustc_codegen_ssa::base::codegen_instance::hde39d6762d9d51d3\r\n  26:        0x10c841cf7 - <rustc_middle::mir::mono::MonoItem as rustc_codegen_ssa::mono_item::MonoItemExt>::define::h432c4e419b9e9714\r\n  27:        0x10c84f7b7 - rustc_codegen_llvm::base::compile_codegen_unit::module_codegen::h34a0dcef02a2e0b8\r\n  28:        0x10c81989c - rustc_query_system::dep_graph::graph::DepGraph<K>::with_task::hf40ced81813c1b58\r\n  29:        0x10c84f09b - rustc_codegen_llvm::base::compile_codegen_unit::hf964629f0265b265\r\n  30:        0x10c82bb09 - <rustc_codegen_llvm::LlvmCodegenBackend as rustc_codegen_ssa::traits::backend::CodegenBackend>::codegen_crate::h2ab78f5b04584b8c\r\n  31:        0x10c6d0d5f - rustc_interface::passes::QueryContext::enter::he39257bb4663642a\r\n  32:        0x10c6c2260 - rustc_interface::queries::Queries::ongoing_codegen::h95777a37bb20b6bd\r\n  33:        0x10c5ef1a4 - rustc_interface::queries::<impl rustc_interface::interface::Compiler>::enter::h184befdebe6c8084\r\n  34:        0x10c5c07c6 - rustc_span::with_source_map::hd47625ae95a3b5cf\r\n  35:        0x10c5eff02 - rustc_interface::interface::create_compiler_and_run::h2ec1393256240e4c\r\n  36:        0x10c5c83af - scoped_tls::ScopedKey<T>::set::h67c9a7d0441e78ae\r\n  37:        0x10c5c0ed9 - std::sys_common::backtrace::__rust_begin_short_backtrace::hd2f1b09be748a637\r\n  38:        0x10c5b5a7d - core::ops::function::FnOnce::call_once{{vtable.shim}}::hfbe424b42856470a\r\n  39:        0x10837758b - std::sys::unix::thread::Thread::new::thread_start::he7d90f5704b14448\r\n  40:     0x7fff204048fc - __pthread_start\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86961/timeline", "performed_via_github_app": null, "state_reason": "completed"}