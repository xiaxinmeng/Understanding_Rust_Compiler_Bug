{"url": "https://api.github.com/repos/rust-lang/rust/issues/106555", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/106555/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/106555/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/106555/events", "html_url": "https://github.com/rust-lang/rust/issues/106555", "id": 1523487707, "node_id": "I_kwDOAAsO6M5azpPb", "number": 106555, "title": "crate fails to compile release build (v1.65+) with rustc crashing", "user": {"login": "d00z3l", "id": 752056, "node_id": "MDQ6VXNlcjc1MjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/752056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d00z3l", "html_url": "https://github.com/d00z3l", "followers_url": "https://api.github.com/users/d00z3l/followers", "following_url": "https://api.github.com/users/d00z3l/following{/other_user}", "gists_url": "https://api.github.com/users/d00z3l/gists{/gist_id}", "starred_url": "https://api.github.com/users/d00z3l/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d00z3l/subscriptions", "organizations_url": "https://api.github.com/users/d00z3l/orgs", "repos_url": "https://api.github.com/users/d00z3l/repos", "events_url": "https://api.github.com/users/d00z3l/events{/privacy}", "received_events_url": "https://api.github.com/users/d00z3l/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 630799571, "node_id": "MDU6TGFiZWw2MzA3OTk1NzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compilemem", "name": "I-compilemem", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to memory usage during compilation."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-01-07T05:22:04Z", "updated_at": "2023-01-10T16:32:11Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "The crate linked below no longer compiles on version 1.65 (and 1.66). On version 1.64 and prior it successfully compiles. The issue only applies to release builds. During compilation the memory for rustc gradually grows until it fails to allocate memory. In my case around 40+GB of memory being used by rustc.\r\n\r\n### Code\r\nhttps://github.com/d00z3l/python\r\n\r\nI expected to see this happen: release build compile\r\n\r\nInstead, this happened: rustc crashes\r\n\r\n### Version it worked on\r\n\r\nIt most recently worked on: \r\n```\r\nrustc 1.64.0 (a55dd71d5 2022-09-19)\r\nbinary: rustc\r\ncommit-hash: a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52\r\ncommit-date: 2022-09-19\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.64.0\r\nLLVM version: 14.0.6\r\n```\r\n\r\n### Version with regression\r\n\r\n```\r\nrustc 1.66.0 (69f9c33d7 2022-12-12)\r\nbinary: rustc\r\ncommit-hash: 69f9c33d71c871fc16ac445211281c6e7a340943\r\ncommit-date: 2022-12-12\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.66.0\r\nLLVM version: 15.0.2\r\n```\r\n\r\n### Backtrace\r\nrustc crashes, with RUST_BACKTRACE enabled the cmd process also crashes so I can't get the backtrace output\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/106555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/106555/timeline", "performed_via_github_app": null, "state_reason": null}