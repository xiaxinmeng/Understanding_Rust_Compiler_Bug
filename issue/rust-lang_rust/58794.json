{"url": "https://api.github.com/repos/rust-lang/rust/issues/58794", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/58794/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/58794/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/58794/events", "html_url": "https://github.com/rust-lang/rust/issues/58794", "id": 415387561, "node_id": "MDU6SXNzdWU0MTUzODc1NjE=", "number": 58794, "title": "Default behavior of unwinding in FFI functions", "user": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 133, "created_at": "2019-02-28T00:17:32Z", "updated_at": "2019-11-22T00:06:39Z", "closed_at": "2019-11-22T00:06:39Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is the tracking issue for the behavior of unwinding through FFI functions.\r\n\r\nThere are two choices here: we can abort if unwinding occurs through an `extern \"C\"` boundary. We abort on beta 1.34 and nightly 1.35, but will permit unwinding in stable 1.33.\r\n\r\nWe previously attempted this change in [1.24](https://blog.rust-lang.org/2018/02/15/Rust-1.24.html#other-good-stuff) and reverted in [1.24.1](https://blog.rust-lang.org/2018/03/01/Rust-1.24.1.html#do-not-abort-when-unwinding-through-ffi). We attempted to do so again in 1.33, but [reverted](https://github.com/rust-lang/rust/pull/58795) once again pending lang team discussion on the topic.\r\n\r\nThere has been discussion on this topic in #52652, #58760, and #55982.\r\n\r\nThe stable behavior of permitting unwinding is UB, and can be triggered in safe code (https://github.com/rust-lang/rust/issues/52652#issuecomment-408123653). Notably, `mozjpeg` depends on this behavior and seems to have no good stable alternatives; there's been some discussion on [internals](https://internals.rust-lang.org/t/unwinding-through-ffi-after-rust-1-33/9521).\r\n\r\nThere is an RFC discussing this: https://github.com/rust-lang/rfcs/pull/2699.", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/58794/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/58794/timeline", "performed_via_github_app": null, "state_reason": "completed"}