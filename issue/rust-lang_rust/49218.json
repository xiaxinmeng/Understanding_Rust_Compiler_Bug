{"url": "https://api.github.com/repos/rust-lang/rust/issues/49218", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49218/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49218/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49218/events", "html_url": "https://github.com/rust-lang/rust/issues/49218", "id": 307018539, "node_id": "MDU6SXNzdWUzMDcwMTg1Mzk=", "number": 49218, "title": "stabilize `dyn Trait` in Rust 2015", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 919710011, "node_id": "MDU6TGFiZWw5MTk3MTAwMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-merge", "name": "disposition-merge", "color": "008800", "default": false, "description": "This issue / PR is in PFCP or FCP with a disposition to merge it."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 37, "created_at": "2018-03-20T20:04:46Z", "updated_at": "2019-08-10T16:14:59Z", "closed_at": "2018-07-05T22:48:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is a sub-issue of https://github.com/rust-lang/rust/issues/44662 proposing the **Rust 2015 stabilization of `dyn Trait`**. \r\n\r\n### Status\r\n\r\nThe decision is made, we just [need a stabilization PR!](https://github.com/rust-lang/rust/issues/49218#issuecomment-380593605)\r\n\r\n### Details\r\n\r\nThe new syntactic form `dyn <relative-path>` is added. It is an error to use `dyn <relative-path>` if `path` does not name a trait. The result is a so-called [dynamic trait type](https://internals.rust-lang.org/t/proposal-change-terminology-from-trait-object-to-dynamic-trait/7091). \r\n\r\nFor backwards compatibility, `dyn` can still be used as an identifier -- in other words, it is a **contextual keyword**. Note also that `dyn :: foo` parses as a path `dyn::foo` and not a use of the `dyn` keyword. You can however write `dyn (::foo)` to clarify your meaning.\r\n\r\nThere is a \"allow by default\" lint that suggests uses of `Trait` be rewritten to `dyn Trait`. Much code in rustc was converted using `rustfix` in conjunction with this lint. I believe the current plan is to keep this lint as \"allow by default\" for the time being, but make it as part of the \"idiom shift\" lints for Rust 2018. \r\n\r\n### Tests\r\n\r\nHere are some tests documenting the current behavior:\r\n\r\n- [Positive uses of `dyn Trait`](https://github.com/rust-lang/rust/blob/75af15ee6ca0c12b699a17984b033363cd25e9c3/src/test/run-pass/dyn-trait.rs), including [a use of `dyn (::Path)`](https://github.com/rust-lang/rust/blob/75af15ee6ca0c12b699a17984b033363cd25e9c3/src/test/run-pass/dyn-trait.rs#L23).\r\n- [`dyn` by itself is an identifier](https://github.com/rust-lang/rust/blob/master/src/test/compile-fail/dyn-trait-compatibility.rs#L11-L12)\r\n- [`dyn::foo` is a path](https://github.com/rust-lang/rust/blob/master/src/test/compile-fail/dyn-trait-compatibility.rs#L13-L14)\r\n\r\n### Other details\r\n\r\nOnce this is stable, we should adjust the output from `ppaux` to use it! (https://github.com/rust-lang/rust/issues/49277)\r\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49218/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49218/timeline", "performed_via_github_app": null, "state_reason": "completed"}