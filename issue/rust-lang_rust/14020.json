{"url": "https://api.github.com/repos/rust-lang/rust/issues/14020", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14020/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14020/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14020/events", "html_url": "https://github.com/rust-lang/rust/issues/14020", "id": 33024397, "node_id": "MDU6SXNzdWUzMzAyNDM5Nw==", "number": 14020, "title": "Decrementing range behaviour is very confusing when used with unsigned integers", "user": {"login": "pimterry", "id": 1526883, "node_id": "MDQ6VXNlcjE1MjY4ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1526883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pimterry", "html_url": "https://github.com/pimterry", "followers_url": "https://api.github.com/users/pimterry/followers", "following_url": "https://api.github.com/users/pimterry/following{/other_user}", "gists_url": "https://api.github.com/users/pimterry/gists{/gist_id}", "starred_url": "https://api.github.com/users/pimterry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pimterry/subscriptions", "organizations_url": "https://api.github.com/users/pimterry/orgs", "repos_url": "https://api.github.com/users/pimterry/repos", "events_url": "https://api.github.com/users/pimterry/events{/privacy}", "received_events_url": "https://api.github.com/users/pimterry/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-05-07T21:02:50Z", "updated_at": "2014-06-25T19:33:54Z", "closed_at": "2014-05-07T21:09:24Z", "author_association": "NONE", "active_lock_reason": null, "body": "Range behaviour differs significantly and unexpectedly from expected behaviour if the range start is an unsigned integer.\n\n``` rust\nuse std::iter;\n\nfn main() {\n  let range_start: int = 10;\n  for x in iter::range_step(range_start, -1, -1) {\n    println!(\"{}\", x);\n  }\n}\n```\n\nThis prints 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0.\n\n``` rust\nuse std::iter;\n\nfn main() {\n  let range_start: uint = 10;\n  for x in iter::range_step(range_start, -1, -1) {\n    println!(\"{}\", x);\n  }\n}\n```\n\n(range_start is a uint, not an int)\n\nThis prints '10', and stops. This is not expected.\n\nThis appears to be because the type signature for range_step uses the same generic parameter for all three argument. Thus, if the start is a uint then the others are all interpreted as uints, the negative numbers are interpreted as very large ints, the range increments by 2^64-1 up to a max of 2^64-1, rather than decrementing by -1, and the range immediately finishes.\n\nThis seems like a relatively common operation, and it'd be nice if the rust compiler could catch the incorrect types in this code, and/or the range_step method could properly handle mixing signed and unsigned parameters to the method.\n\n(N.b. I am relatively new to rust, sorry if there's something obvious I'm missing that invalidates this entirely)\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/14020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14020/timeline", "performed_via_github_app": null, "state_reason": "completed"}