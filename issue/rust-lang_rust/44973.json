{"url": "https://api.github.com/repos/rust-lang/rust/issues/44973", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/44973/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/44973/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/44973/events", "html_url": "https://github.com/rust-lang/rust/issues/44973", "id": 262050241, "node_id": "MDU6SXNzdWUyNjIwNTAyNDE=", "number": 44973, "title": "Some missing type inference in last nightly", "user": {"login": "leonardo-m", "id": 22328461, "node_id": "MDQ6VXNlcjIyMzI4NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/22328461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonardo-m", "html_url": "https://github.com/leonardo-m", "followers_url": "https://api.github.com/users/leonardo-m/followers", "following_url": "https://api.github.com/users/leonardo-m/following{/other_user}", "gists_url": "https://api.github.com/users/leonardo-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonardo-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonardo-m/subscriptions", "organizations_url": "https://api.github.com/users/leonardo-m/orgs", "repos_url": "https://api.github.com/users/leonardo-m/repos", "events_url": "https://api.github.com/users/leonardo-m/events{/privacy}", "received_events_url": "https://api.github.com/users/leonardo-m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 604454086, "node_id": "MDU6TGFiZWw2MDQ0NTQwODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-inference", "name": "A-inference", "color": "f7e101", "default": false, "description": "Area: Type inference"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-10-02T11:04:49Z", "updated_at": "2017-10-05T23:03:10Z", "closed_at": "2017-10-05T23:03:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "The latest Nightly (rustc 1.22.0-nightly f1b5225e8 2017-10-01, Gnu64) doesn't perform type inference in many cases, an example:\r\n\r\n```\r\nfn foo(mut n: u32, k: u32) -> u64 {\r\n    let mut res: u64 = 1;\r\n    for i in 0 .. k {\r\n        res *= n.into();\r\n        n -= 1;\r\n        res /= i.into();\r\n    }\r\n    res % 1000\r\n}\r\nfn main() {}\r\n```\r\n\r\nGives:\r\n\r\n```\r\nerror[E0283]: type annotations required: cannot resolve `u64: std::ops::MulAssign<_>`\r\n --> ...\\test.rs:4:13\r\n  |\r\n4 |         res *= n.into();\r\n  |             ^^\r\n```\r\n\r\nI have seen several other cases of missed type inference in this Nightly, with sum() and product() in code that compiles every day since months.\r\n\r\nThe Beta and the Nightly of one or two days before doesn't show this problem.", "closed_by": {"login": "leonardo-m", "id": 22328461, "node_id": "MDQ6VXNlcjIyMzI4NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/22328461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonardo-m", "html_url": "https://github.com/leonardo-m", "followers_url": "https://api.github.com/users/leonardo-m/followers", "following_url": "https://api.github.com/users/leonardo-m/following{/other_user}", "gists_url": "https://api.github.com/users/leonardo-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonardo-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonardo-m/subscriptions", "organizations_url": "https://api.github.com/users/leonardo-m/orgs", "repos_url": "https://api.github.com/users/leonardo-m/repos", "events_url": "https://api.github.com/users/leonardo-m/events{/privacy}", "received_events_url": "https://api.github.com/users/leonardo-m/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/44973/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/44973/timeline", "performed_via_github_app": null, "state_reason": "completed"}