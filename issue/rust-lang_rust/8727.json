{"url": "https://api.github.com/repos/rust-lang/rust/issues/8727", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8727/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8727/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8727/events", "html_url": "https://github.com/rust-lang/rust/issues/8727", "id": 18500655, "node_id": "MDU6SXNzdWUxODUwMDY1NQ==", "number": 8727, "title": "compiler diverges without error message when generic function has infinite instantiations", "user": {"login": "carl-eastlund", "id": 1545750, "node_id": "MDQ6VXNlcjE1NDU3NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1545750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carl-eastlund", "html_url": "https://github.com/carl-eastlund", "followers_url": "https://api.github.com/users/carl-eastlund/followers", "following_url": "https://api.github.com/users/carl-eastlund/following{/other_user}", "gists_url": "https://api.github.com/users/carl-eastlund/gists{/gist_id}", "starred_url": "https://api.github.com/users/carl-eastlund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carl-eastlund/subscriptions", "organizations_url": "https://api.github.com/users/carl-eastlund/orgs", "repos_url": "https://api.github.com/users/carl-eastlund/repos", "events_url": "https://api.github.com/users/carl-eastlund/events{/privacy}", "received_events_url": "https://api.github.com/users/carl-eastlund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-08-24T02:45:47Z", "updated_at": "2020-08-08T01:32:10Z", "closed_at": "2014-08-18T01:24:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "The program below causes the compiler to diverge because instantiating generic<T> requires an unbounded number of instantiations.  Unfortunately, divergence provides no information to the user about what went wrong.  Hopefully there is some way for the compiler to detect this scenario and report it.\n\n```\n// If the definition of Data is simpler, the compiler attempts to inline\n// generic<T>, fails, and produces an error.\nstruct Data(~Option<Data>);\n\nfn generic<T>( _ : ~[(Data,T)] ) {\n    // The important detail is substituting (bool,T) for T on each\n    // recursive call so the number of representations necessary to compile\n    // this function is infinite.\n    let rec : ~[(Data,(bool,T))] = ~[];\n    generic( rec );\n}\n\nfn main () {\n    // Use generic<T> at least once to trigger instantiation.\n    let input : ~[(Data,())] = ~[];\n    generic(input);\n}\n```\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8727/timeline", "performed_via_github_app": null, "state_reason": "completed"}