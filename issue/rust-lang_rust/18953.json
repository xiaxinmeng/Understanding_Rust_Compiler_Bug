{"url": "https://api.github.com/repos/rust-lang/rust/issues/18953", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18953/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18953/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18953/events", "html_url": "https://github.com/rust-lang/rust/issues/18953", "id": 48786775, "node_id": "MDU6SXNzdWU0ODc4Njc3NQ==", "number": 18953, "title": "ICE: Hiding a symbol in an rlib using asm! causes issues", "user": {"login": "bharrisau", "id": 119958, "node_id": "MDQ6VXNlcjExOTk1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/119958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bharrisau", "html_url": "https://github.com/bharrisau", "followers_url": "https://api.github.com/users/bharrisau/followers", "following_url": "https://api.github.com/users/bharrisau/following{/other_user}", "gists_url": "https://api.github.com/users/bharrisau/gists{/gist_id}", "starred_url": "https://api.github.com/users/bharrisau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bharrisau/subscriptions", "organizations_url": "https://api.github.com/users/bharrisau/orgs", "repos_url": "https://api.github.com/users/bharrisau/repos", "events_url": "https://api.github.com/users/bharrisau/events{/privacy}", "received_events_url": "https://api.github.com/users/bharrisau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 91598611, "node_id": "MDU6TGFiZWw5MTU5ODYxMQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-inline-assembly", "name": "A-inline-assembly", "color": "f7e101", "default": false, "description": "Area: inline asm!(..)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-11-14T13:08:23Z", "updated_at": "2015-10-24T22:25:10Z", "closed_at": "2015-10-24T22:25:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is obviously my fault, but reporting it anyway.\n\nI am using the `asm!` macro to make weak symbols in an rlib. When using the rlib with `extern crate` and trying to over-ride the weak symbol with a strong one, an ICE is generated.\n\n```\ntask 'rustc' panicked at 'index out of bounds: the len is 0 but the index is 433', /build/rust-git/src/rust/src/librustc/lib.rs:1\n\nstack backtrace:\n   1:     0x2b650307fc20 - rt::backtrace::imp::write::hcc244d480521f5e9Pdt\n   2:     0x2b6503082ca0 - <unknown>\n   3:     0x2b650294ec80 - unwind::begin_unwind_inner::h5eadd82ce47d0284E9c\n   4:     0x2b650294e900 - unwind::begin_unwind_fmt::h776d307dc6ed351966c\n   5:     0x2b650294e8c0 - rust_begin_unwind\n   6:     0x2b650298e350 - panicking::panic_fmt::hec098d294ebfb5fb68j\n   7:     0x2b650298e1a0 - panicking::panic_bounds_check::h6f58fc03a7f8fc9dF7j\n   8:     0x2b6501888bc0 - <unknown>\n   9:     0x2b65061a01d0 - <unknown>\n  10:     0x2b65063bfc70 - _ZNK4llvm9SourceMgr12PrintMessageERNS_11raw_ostreamENS_5SMLocENS0_8DiagKindERKNS_5TwineENS_8ArrayRefINS_7SMRangeEEENS8_INS_7SMFixItEEEb\n  11:     0x2b65063bfea0 - _ZNK4llvm9SourceMgr12PrintMessageENS_5SMLocENS0_8DiagKindERKNS_5TwineENS_8ArrayRefINS_7SMRangeEEENS6_INS_7SMFixItEEEb\n  12:     0x2b650619be80 - <unknown>\n  13:     0x2b65061a2ed0 - <unknown>\n  14:     0x2b65061a5480 - <unknown>\n  15:     0x2b6505c07ee0 - _ZNK4llvm10AsmPrinter13EmitInlineAsmENS_9StringRefEPKNS_6MDNodeENS_9InlineAsm10AsmDialectE\n  16:     0x2b6505c08620 - _ZNK4llvm10AsmPrinter13EmitInlineAsmEPKNS_12MachineInstrE\n  17:     0x2b6505c03e90 - _ZN4llvm10AsmPrinter16EmitFunctionBodyEv\n  18:     0x2b65058257a0 - <unknown>\n  19:     0x2b650633ff40 - _ZN4llvm13FPPassManager13runOnFunctionERNS_8FunctionE\n  20:     0x2b65063405a0 - _ZN4llvm13FPPassManager11runOnModuleERNS_6ModuleE\n  21:     0x2b65063405f0 - _ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE\n  22:     0x2b65055e9af0 - LLVMRustWriteOutputFile\n  23:     0x2b6501882870 - back::write::write_output_file::hf52e1818d5684c7e4jc\n  24:     0x2b6501889f00 - <unknown>\n  25:     0x2b650187e100 - <unknown>\n  26:     0x2b650188fa70 - <unknown>\n  27:     0x2b650188a480 - back::write::run_passes::h36cd15358abc1d05hVc\n  28:     0x2b6502097af0 - <unknown>\n  29:     0x2b650187e100 - <unknown>\n  30:     0x2b6502043310 - driver::driver::phase_5_run_llvm_passes::haab60ec0089417cdclC\n  31:     0x2b650203a470 - driver::driver::compile_input::h02996843b5f2a565eRB\n  32:     0x2b65020bd800 - <unknown>\n  33:     0x2b65020bd6f0 - <unknown>\n  34:     0x2b6501896bc0 - <unknown>\n  35:     0x2b65018969b0 - <unknown>\n  36:     0x2b65015a5a30 - <unknown>\n  37:     0x2b650299be00 - <unknown>\n  38:     0x2b650299bdf0 - rust_try\n  39:     0x2b650294c600 - unwind::try::h333ab25385d8e012mYc\n  40:     0x2b650294c490 - task::Task::run::h2157d702c714dd0du4b\n  41:     0x2b65015a5770 - <unknown>\n  42:     0x2b650294dca0 - <unknown>\n  43:     0x2b65079de250 - start_thread\n  44:     0x2b6502d2a3b9 - clone\n  45:                0x0 - <unknown>\n\n```\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18953/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18953/timeline", "performed_via_github_app": null, "state_reason": "completed"}