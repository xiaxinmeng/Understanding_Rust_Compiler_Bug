{"url": "https://api.github.com/repos/rust-lang/rust/issues/33704", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/33704/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/33704/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/33704/events", "html_url": "https://github.com/rust-lang/rust/issues/33704", "id": 155401107, "node_id": "MDU6SXNzdWUxNTU0MDExMDc=", "number": 33704, "title": "No line number in error message with try! macro", "user": {"login": "eminence", "id": 402454, "node_id": "MDQ6VXNlcjQwMjQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/402454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eminence", "html_url": "https://github.com/eminence", "followers_url": "https://api.github.com/users/eminence/followers", "following_url": "https://api.github.com/users/eminence/following{/other_user}", "gists_url": "https://api.github.com/users/eminence/gists{/gist_id}", "starred_url": "https://api.github.com/users/eminence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eminence/subscriptions", "organizations_url": "https://api.github.com/users/eminence/orgs", "repos_url": "https://api.github.com/users/eminence/repos", "events_url": "https://api.github.com/users/eminence/events{/privacy}", "received_events_url": "https://api.github.com/users/eminence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-05-18T01:58:12Z", "updated_at": "2016-05-19T20:50:37Z", "closed_at": "2016-05-19T20:50:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Playpen link: https://is.gd/eYoVIw\n\nUsing Stable or Beta, the error message looks like this:\n\n```\n<std macros>:5:8: 6:42 error: mismatched types:\n[.. eliding text ..]\n<anon>:6:17: 6:24 note: in this expansion of try! (defined in <std macros>)\n```\n\nThe key part is that it tells me that line 6 is where the try expansion happens.\n\nBut when running with Nightly, this is the error message (in full):\n\n```\nerror: mismatched types [--explain E0308]\n --> <std macros>:5:8\n5 |> return $ crate :: result :: Result :: Err (\n  |>        ^ expected struct `Foo`, found enum `std::result::Result`\n<std macros>:5:8: 6:45: note: in this expansion of try! (defined in <std macros>)\nnote: expected type `Foo`\nnote:    found type `std::result::Result<_, _>`\n\nerror: aborting due to previous error\nplaypen: application terminated with error code 101\n```\n\nThe expansion site (line 6) is missing from the error diagnostics.  While the playpen uses the new-style diagnostics, this problem (the missing line number) applies to the old-style diagnostics too.\n\nI'm not sure if this is only for `try!`, or if it is for all macros (I didn't test that)\nI'm not sure exactly what version of rustc the playpen is at, but this issue is reproduced with `rustc 1.10.0-nightly (cd6a40017 2016-05-16)`\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/33704/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/33704/timeline", "performed_via_github_app": null, "state_reason": "completed"}