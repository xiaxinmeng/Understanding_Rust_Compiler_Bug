{"url": "https://api.github.com/repos/rust-lang/rust/issues/29239", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29239/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29239/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29239/events", "html_url": "https://github.com/rust-lang/rust/issues/29239", "id": 112868625, "node_id": "MDU6SXNzdWUxMTI4Njg2MjU=", "number": 29239, "title": "ICE while building rustc with -Zverbose set", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2015-10-22T18:59:34Z", "updated_at": "2020-10-22T21:02:56Z", "closed_at": "2020-10-22T21:02:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "**EDIT:** ignore further posts(aside from this one) and note that `make 'RUSTFLAGS=-Z verbose'` is causing this ICE (regardless of ./configure flags and other make flags) - I don't yet know which rust code  coupled with the arg is the culprit though.\n\nWhile compiling rust from git sources, as follows:\n\n``` bash\n$ cd /home/zazdxscf/build/1nonpkgs/rust/rust/\n```\n\n``` bash\n$ ./configure --prefix=/home/zazdxscf/build/1nonpkgs/rust/usr/local --disable-rpath --enable-manage-submodules --disable-clang --enable-ccache --enable-dist-host-only --disable-valgrind --disable-helgrind --disable-valgrind-rpass --python=/usr/bin/python2 --enable-optimize --enable-optimize-cxx --enable-optimize-llvm --enable-debug --enable-debuginfo --enable-debug-assertions --enable-debuginfo-tests --enable-llvm-assertions --enable-debug-jemalloc --disable-local-rust\n\n...\n```\n\n``` bash\n$ time make -j1 -- all NO_REBUILD=1 TIME_PASSES=1 TIME_LLVM_PASSES=1 'RUSTFLAGS=--verbose -Z verbose -Z print-link-args -Z print-llvm-passes -Z verbose -C debug-assertions=y' RUST_BACKTRACE=1\n\n...\n```\n\n``` bash\n...\nrustc: x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_front\ntime: 0.103; rss: 41MB  parsing\ntime: 0.028; rss: 41MB  configuration 1\ntime: 0.000; rss: 41MB  recursion limit\ntime: 0.003; rss: 41MB  gated macro checking\ntime: 0.000; rss: 41MB  crate injection\ntime: 0.021; rss: 44MB  macro loading\ntime: 0.000; rss: 44MB  plugin loading\ntime: 0.000; rss: 44MB  plugin registration\ntime: 0.647; rss: 61MB  expansion\ntime: 0.017; rss: 61MB  complete gated feature checking 1\ntime: 0.129; rss: 61MB  configuration 2\ntime: 0.000; rss: 61MB  gated configuration checking\ntime: 0.068; rss: 61MB  maybe building test harness\ntime: 0.063; rss: 61MB  prelude injection\ntime: 0.011; rss: 61MB  checking that all macro invocations are gone\ntime: 0.000; rss: 61MB  checking for inline asm in case the target doesn't support it\ntime: 0.018; rss: 61MB  complete gated feature checking 2\ntime: 0.065; rss: 61MB  assigning node ids\ntime: 0.062; rss: 77MB  lowering ast -> hir\ntime: 0.067; rss: 81MB  indexing hir\ntime: 0.000; rss: 81MB  attribute checking\ntime: 0.030; rss: 81MB  early lint checks\ntime: 0.013; rss: 81MB  external crate/lib resolution\ntime: 0.017; rss: 81MB  language item collection\ntime: 0.312; rss: 109MB resolution\ntime: 0.012; rss: 109MB lifetime resolution\ntime: 0.000; rss: 109MB looking for entry point\ntime: 0.007; rss: 109MB looking for plugin registrar\ntime: 0.062; rss: 114MB region resolution\ntime: 0.008; rss: 114MB loop checking\ntime: 0.007; rss: 114MB static item recursion checking\ntime: 0.078; rss: 118MB type collecting\ntime: 0.015; rss: 118MB variance inference\ntime: 0.180; rss: 137MB coherence checking\ntime: 0.080; rss: 138MB wf checking (old)\ntime: 0.086; rss: 138MB item-types checking\ntime: 11.953; rss: 183MB    item-bodies checking\ntime: 0.000; rss: 183MB drop-impl checking\ntime: 0.386; rss: 183MB wf checking (new)\ntime: 1.164; rss: 184MB const checking\ntime: 0.063; rss: 184MB privacy checking\ntime: 0.002; rss: 184MB stability index\ntime: 0.028; rss: 184MB intrinsic checking\ntime: 0.019; rss: 184MB effect checking\ntime: 0.130; rss: 184MB match checking\ntime: 0.864; rss: 240MB MIR dump\ntime: 0.089; rss: 246MB liveness checking\ntime: 2.493; rss: 246MB borrow checking\ntime: 1.771; rss: 246MB rvalue checking\ntime: 0.020; rss: 246MB reachability checking\ntime: 0.060; rss: 246MB death checking\ntime: 0.056; rss: 246MB stability checking\ntime: 0.000; rss: 246MB unused lib feature checking\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'lookup_item: id not found: DefIndex(25591)', src/librustc/metadata/decoder.rs:70\nstack backtrace:\n   1:      0x3bd2fe91a38 - sys::backtrace::tracing::imp::write::h899a6e2564d068526tt\n   2:      0x3bd2fe99f5a - panicking::log_panic::h87fed04ca3a1e1aeFux\n   3:      0x3bd2fe505fa - sys_common::unwind::begin_unwind_inner::h39173c97d971c415xls\n   4:      0x3bd2fe512a7 - sys_common::unwind::begin_unwind_fmt::h843e47803017c429Dks\n   5:      0x3bd2dab036d - metadata::csearch::get_item_path::h0475f7dfebe13fb1Vgs\n   6:      0x3bd2da6ee5e - middle::ty::ctxt<'tcx>::item_path_str::hb86463860eef864drFh\n   7:      0x3bd2d9ed7d4 - middle::def_id::DefId.fmt..Debug::fmt::h3396af9d47944879Rfs\n   8:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n   9:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  10:      0x3bd2da9eec8 - util::ppaux::ty..BoundRegion.fmt..Debug::fmt::h5dcd08e05a482628k8B\n  11:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  12:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  13:      0x3bd2d8edf14 - util::ppaux::ty..Region.fmt..Debug::fmt::h5d8e8f0ebe30e4fasaC\n  14:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  15:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  16:      0x3bd2dab39c0 - util::ppaux::ty..Region.fmt..Display::fmt::h06b3dd5f42422d75kkC\n  17:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  18:      0x3bd2dcf7431 - util::ppaux::ty..TraitTy<'tcx>.fmt..Display::fmt::ha94fa2fb09c70a2atKB\n  19:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  20:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  21:      0x3bd2dcfacf5 - util::ppaux::ty..TypeVariants<'tcx>.fmt..Display::fmt::hdf49f13f2be29c6asQC\n  22:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  23:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  24:      0x3bd2d8ee497 - fmt::_&'a T.Display::fmt::h9388610182093952802\n  25:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  26:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  27:      0x3bd2dcfacf5 - util::ppaux::ty..TypeVariants<'tcx>.fmt..Display::fmt::hdf49f13f2be29c6asQC\n  28:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  29:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  30:      0x3bd2d8ee497 - fmt::_&'a T.Display::fmt::h9388610182093952802\n  31:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  32:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  33:      0x3bd2dcf42cd - util::ppaux::fn_sig::hbe63353a4d6b8ceb7eB\n  34:      0x3bd2dcf8bc6 - util::ppaux::ty..FnSig<'tcx>.fmt..Display::fmt::h88e374eb88bf2cb2huC\n  35:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  36:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  37:      0x3bd2dcfc111 - util::ppaux::ty..TypeVariants<'tcx>.fmt..Display::fmt::hdf49f13f2be29c6asQC\n  38:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  39:      0x3bd2feb8323 - fmt::Formatter<'a>::write_fmt::hc619a91f18c6dbc1MsV\n  40:      0x3bd2d8ee4f4 - util::ppaux::ty..TyS<'tcx>.fmt..Display::fmt::h0b98b3f4e0f76e60WgD\n  41:      0x3bd2fed5ec5 - fmt::write::h4c1f14d6ead6957fW5U\n  42:      0x3bd2fe9bae2 - fmt::format::hdd6e6b41627bc4c0b6d\n  43:      0x3bd2f7cdf33 - builtin::BoxPointers::check_heap_type::h1e674186eb19a6b9JIa\n  44:      0x3bd2f7ce269 - builtin::BoxPointers.LateLintPass::check_expr::hd56fae423a4daa98XLa\n  45:      0x3bd2dcd44af - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_expr::h5069072bc23125c5FOz\n  46:      0x3bd2dcd49ed - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_expr::h5069072bc23125c5FOz\n  47:      0x3bd2dcd49ce - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_expr::h5069072bc23125c5FOz\n  48:      0x3bd2dcd4d7b - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_fn::haea38a634d48914eLQz\n  49:      0x3bd2dccfbf0 - lint::context::LintContext::with_lint_attrs::h7661409133502095598\n  50:      0x3bd2dcd505e - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_mod::h8b2f992061a59399UZz\n  51:      0x3bd2dccfc22 - lint::context::LintContext::with_lint_attrs::h7661409133502095598\n  52:      0x3bd2dcd505e - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_mod::h8b2f992061a59399UZz\n  53:      0x3bd2dccfc22 - lint::context::LintContext::with_lint_attrs::h7661409133502095598\n  54:      0x3bd2dcd505e - lint::context::LateContext<'a, 'tcx>.hir_visit..Visitor<'v>::visit_mod::h8b2f992061a59399UZz\n  55:      0x3bd2dcf0a0a - lint::context::check_crate::h31fa4bd641695c0fzPA\n  56:      0x3bd303af2ab - driver::phase_3_run_analysis_passes::closure.21957\n  57:      0x3bd303a7ed2 - middle::ty::context::ctxt<'tcx>::create_and_enter::h18227465378971750510\n  58:      0x3bd303a318d - driver::phase_3_run_analysis_passes::h15948730956397786118\n  59:      0x3bd303853fb - driver::compile_input::h0b1b46ede8c440c17ba\n  60:      0x3bd3047261f - run_compiler::hbef8d0681748b40dNtc\n  61:      0x3bd3046fbe8 - sys_common::unwind::try::try_fn::h9961911169628387963\n  62:      0x3bd2fe8f0d8 - __rust_try\n  63:      0x3bd2fe7e89b - sys_common::unwind::try::inner_try::hd160594970b417325hs\n  64:      0x3bd3046ff10 - boxed::F.FnBox<A>::call_box::h8815315460722377054\n  65:      0x3bd2fe986e3 - sys::thread::Thread::new::thread_start::h1b6f054d8b7016bdRMw\n  66:      0x3bd2941964b - start_thread\n                        at /usr/src/debug/sys-libs/glibc-2.22-r1/glibc-2.22/nptl/pthread_create.c:334\n  67:      0x3bd2fb129bc - clone\n                        at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\n  68:                0x0 - <unknown>\n\n/home/zazdxscf/build/1nonpkgs/rust/rust/mk/target.mk:164: recipe for target 'x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rustc_front' failed\nmake: *** [x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rustc_front] Error 101\n\nreal    60m34.588s\nuser    53m14.110s\nsys 6m28.910s\n```\n\nI tried to report it here https://github.com/rust-lang/rust/issues/13364#issuecomment-149349512 but since that issue is closed, there was no reply for the past 3 days.\n\nLatest commit at the time of testing this was: ca998fc2f100bce4eab9b4609bd5a0a5c5789872\n\nThis is stage0 rustc --verbose --version\n\n```\nrustc 1.5.0-dev (ca998fc2f 2015-10-22)\nbinary: rustc\ncommit-hash: ca998fc2f100bce4eab9b4609bd5a0a5c5789872\ncommit-date: 2015-10-22\nhost: x86_64-unknown-linux-gnu\nrelease: 1.5.0-dev\n```\n\nLet me know if you need any more info that I can give. I am willing to try anything to get this fixed, any ideas are welcome.\n", "closed_by": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29239/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29239/timeline", "performed_via_github_app": null, "state_reason": "completed"}