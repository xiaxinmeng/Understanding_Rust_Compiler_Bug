{"url": "https://api.github.com/repos/rust-lang/rust/issues/92212", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/92212/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/92212/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/92212/events", "html_url": "https://github.com/rust-lang/rust/issues/92212", "id": 1087213675, "node_id": "I_kwDOAAsO6M5AzZBr", "number": 92212, "title": "A procedural macro library can exceed the PE/COFF export ordinal limit on x86_64-pc-windows-gnu", "user": {"login": "tay64", "id": 71352170, "node_id": "MDQ6VXNlcjcxMzUyMTcw", "avatar_url": "https://avatars.githubusercontent.com/u/71352170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tay64", "html_url": "https://github.com/tay64", "followers_url": "https://api.github.com/users/tay64/followers", "following_url": "https://api.github.com/users/tay64/following{/other_user}", "gists_url": "https://api.github.com/users/tay64/gists{/gist_id}", "starred_url": "https://api.github.com/users/tay64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tay64/subscriptions", "organizations_url": "https://api.github.com/users/tay64/orgs", "repos_url": "https://api.github.com/users/tay64/repos", "events_url": "https://api.github.com/users/tay64/events{/privacy}", "received_events_url": "https://api.github.com/users/tay64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-12-22T21:51:46Z", "updated_at": "2023-03-21T17:55:37Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Please see the [SixtyFPS issue #764](https://github.com/sixtyfpsui/sixtyfps/issues/764).\r\n\r\nWhen building `sixtyfps-rs` on Windows, its procedural macro library fails to build with the linker error `export ordinal too large`.\r\n\r\nThe library has 70000+ exports (the exact number depends on the rust toolchain version and platform). The majority of the exports relate to the library's dependencies, not the symbols provided by the library itself.\r\n\r\nThe PE/COFF format has a limit of 65535 export ordinals.\r\n\r\nWhen building on Windows, procedural macro libraries must compile into PE/COFF, to match the native toolchain.\r\n\r\nThis seems related to the Rust [issue #37530](https://github.com/rust-lang/rust/issues/37530), which solved the \"export everything\" problem for `cdylib`s.\r\n\r\n(I am just a dabbler in Rust and this is my first issue submission here. Not sure what are the options. Maybe some workaround on the SixtyFPS side is possible? How other procedural macro libraries avoid this problem?)\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/92212/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/92212/timeline", "performed_via_github_app": null, "state_reason": null}