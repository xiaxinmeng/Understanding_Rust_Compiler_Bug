{"url": "https://api.github.com/repos/rust-lang/rust/issues/66198", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66198/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66198/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66198/events", "html_url": "https://github.com/rust-lang/rust/issues/66198", "id": 519484583, "node_id": "MDU6SXNzdWU1MTk0ODQ1ODM=", "number": 66198, "title": "Borrowing from arguments with higher order async functions", "user": {"login": "madmaxio", "id": 8720539, "node_id": "MDQ6VXNlcjg3MjA1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8720539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madmaxio", "html_url": "https://github.com/madmaxio", "followers_url": "https://api.github.com/users/madmaxio/followers", "following_url": "https://api.github.com/users/madmaxio/following{/other_user}", "gists_url": "https://api.github.com/users/madmaxio/gists{/gist_id}", "starred_url": "https://api.github.com/users/madmaxio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madmaxio/subscriptions", "organizations_url": "https://api.github.com/users/madmaxio/orgs", "repos_url": "https://api.github.com/users/madmaxio/repos", "events_url": "https://api.github.com/users/madmaxio/events{/privacy}", "received_events_url": "https://api.github.com/users/madmaxio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1049510487, "node_id": "MDU6TGFiZWwxMDQ5NTEwNDg3", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-async-await", "name": "A-async-await", "color": "f7e101", "default": false, "description": "Area: Async & Await"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-07T20:07:31Z", "updated_at": "2019-11-12T22:07:52Z", "closed_at": "2019-11-12T18:13:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, just wanted to ask if borrow with higher order async fns (from there arguments) is not correct never at all, or there might be some solutions in the future. Please check the example.\r\n\r\n```rust\r\nuse std::future::Future;\r\n\r\nasync fn f(data: &Vec<String>) {\r\n    \r\n}\r\n\r\nasync fn start<Fut>(prm: fn(&Vec<String>) -> Fut) \r\nwhere\r\n    Fut: Future<Output = ()>\r\n{\r\n    let data = vec![];\r\n    prm(&data).await;\r\n}\r\n\r\nfn main() {\r\n    start(f);\r\n}\r\n```\r\n\r\n([Playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=57b7a001a20dc861773daac001100594))\r\n\r\nErrors:\r\n\r\n```\r\n   Compiling playground v0.0.1 (/playground)\r\nerror[E0308]: mismatched types\r\n  --> src/main.rs:16:11\r\n   |\r\n16 |     start(f);\r\n   |           ^ expected concrete lifetime, found bound lifetime parameter\r\n   |\r\n   = note: expected type `for<'r> fn(&'r std::vec::Vec<std::string::String>) -> _`\r\n              found type `for<'_> fn(&std::vec::Vec<std::string::String>) -> impl std::future::Future {f}`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0308`.\r\nerror: could not compile `playground`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n\r\n```", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66198/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66198/timeline", "performed_via_github_app": null, "state_reason": "completed"}