{"url": "https://api.github.com/repos/rust-lang/rust/issues/81960", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81960/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81960/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81960/events", "html_url": "https://github.com/rust-lang/rust/issues/81960", "id": 805424240, "node_id": "MDU6SXNzdWU4MDU0MjQyNDA=", "number": 81960, "title": "Cycle in impl Self in associated function", "user": {"login": "Arnaz87", "id": 8680587, "node_id": "MDQ6VXNlcjg2ODA1ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/8680587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arnaz87", "html_url": "https://github.com/Arnaz87", "followers_url": "https://api.github.com/users/Arnaz87/followers", "following_url": "https://api.github.com/users/Arnaz87/following{/other_user}", "gists_url": "https://api.github.com/users/Arnaz87/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arnaz87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arnaz87/subscriptions", "organizations_url": "https://api.github.com/users/Arnaz87/orgs", "repos_url": "https://api.github.com/users/Arnaz87/repos", "events_url": "https://api.github.com/users/Arnaz87/events{/privacy}", "received_events_url": "https://api.github.com/users/Arnaz87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-10T11:22:31Z", "updated_at": "2022-12-28T03:34:43Z", "closed_at": "2022-12-28T03:34:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried this code, in the playground:\r\n\r\n```rust\r\nstruct Foo;\r\nimpl Foo {\r\n    fn f () {\r\n        impl Self { }\r\n    }\r\n}\r\n```\r\n\r\nIn all of the versions, the same thing happened. A compiler error:\r\n\r\n```\r\nerror[E0391]: cycle detected when computing type of `<impl at src/lib.rs:4:1: 8:2>::f::<impl at src/lib.rs:6:9: 6:22>`\r\n --> src/lib.rs:6:14\r\n  |\r\n6 |         impl Self { }\r\n  |              ^^^^\r\n  |\r\n  = note: ...which again requires computing type of `<impl at src/lib.rs:4:1: 8:2>::f::<impl at src/lib.rs:6:9: 6:22>`, completing the cycle\r\nnote: cycle used when collecting item types in top-level module\r\n --> src/lib.rs:2:1\r\n  |\r\n2 | / struct Foo;\r\n3 | |\r\n4 | | impl Foo {\r\n5 | |     fn f () {\r\n6 | |         impl Self { }\r\n7 | |     }\r\n8 | | }\r\n  | |_^\r\n\r\n```\r\n\r\nI guess for best reference, this is the beta version used in the playground the time I tried, but it happened in all stable, nightly and beta.\r\n\r\n```\r\nBuild using the Beta version: 1.50.0-beta.9\r\n(2021-02-06 2efd07024a6d1dc0d4ea)\r\n```\r\n\r\nand stable:\r\n\r\n```\r\nBuild using the Stable version: 1.49.0\r\n```\r\n\r\nI needed this code for an attribute macro, which would wrap an associated function, and reimplement the original funcion in an internal impl in the wrapper function. This is the minimal code to reproduce my problem.", "closed_by": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81960/timeline", "performed_via_github_app": null, "state_reason": "completed"}