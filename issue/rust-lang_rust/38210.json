{"url": "https://api.github.com/repos/rust-lang/rust/issues/38210", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38210/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38210/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38210/events", "html_url": "https://github.com/rust-lang/rust/issues/38210", "id": 193940375, "node_id": "MDU6SXNzdWUxOTM5NDAzNzU=", "number": 38210, "title": "Compilation fails on `unexpected definition: PrimTy(TyInt(i64))`", "user": {"login": "matthew-piziak", "id": 6801001, "node_id": "MDQ6VXNlcjY4MDEwMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/6801001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthew-piziak", "html_url": "https://github.com/matthew-piziak", "followers_url": "https://api.github.com/users/matthew-piziak/followers", "following_url": "https://api.github.com/users/matthew-piziak/following{/other_user}", "gists_url": "https://api.github.com/users/matthew-piziak/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthew-piziak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthew-piziak/subscriptions", "organizations_url": "https://api.github.com/users/matthew-piziak/orgs", "repos_url": "https://api.github.com/users/matthew-piziak/repos", "events_url": "https://api.github.com/users/matthew-piziak/events{/privacy}", "received_events_url": "https://api.github.com/users/matthew-piziak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-07T02:17:33Z", "updated_at": "2016-12-07T13:18:47Z", "closed_at": "2016-12-07T13:18:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Contents of `Cargo.toml`:\r\n```\r\n[package]\r\nname = \"baz\"\r\nversion = \"0.1.0\"\r\nauthors = [\"Matthew Piziak <matthew.piziak@gmail.com>\"]\r\n```\r\n\r\nContents of `main.rs`:\r\n```\r\nmod foo;\r\n\r\nfn main() {\r\n    let task = foo::Foo::new(\"Foo\", 1);\r\n}\r\n```\r\n\r\nContents of `foo.rs`:\r\n```\r\npub struct Foo {\r\n    bar: i64,\r\n}\r\n\r\nimpl Foo {\r\n    pub fn new(bar: i64) -> Self {\r\n        Foo {\r\n            bar: i64,\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOutput of `rustc --version --verbose`:\r\n```\r\nrustc 1.15.0-nightly (28d6623bc 2016-12-03)\r\nbinary: rustc\r\ncommit-hash: 28d6623bccf8f7e9a40a47895df75dd9ef2619da\r\ncommit-date: 2016-12-03\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-nightly\r\nLLVM version: 3.9\r\n```\r\n\r\nOutput of `cargo build --verbose`:\r\n```\r\nBlocking waiting for file lock on build directory\r\nCompiling baz v0.1.0 (file:///home/matt/baz)\r\nRunning `rustc --crate-name baz src/main.rs --crate-type bin -g -C metadata=f80dbc3cb278c435 -C extra-filename=-f80dbc3cb278c435 --out-dir /home/matt/baz/target/debug/deps --emit=dep-info,link -L dependency=/home/matt/baz/target/debug/deps`\r\nerror: internal compiler error: ../src/librustc_typeck/check/mod.rs:4396: unexpected definition: PrimTy(TyInt(i64))\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'Box<Any>', ../src/librustc_errors/lib.rs:423\r\nstack backtrace:\r\n1:     0x7fc6e390c63a - std::sys::imp::backtrace::tracing::imp::write::hbea47d9dd19b523c\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n2:     0x7fc6e391b50f - std::panicking::default_hook::{{closure}}::h6875a2976258b020\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:247\r\n3:     0x7fc6e391b0ad - std::panicking::default_hook::h88ffbc5922643264\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:257\r\n4:     0x7fc6e391b9b7 - std::panicking::rust_panic_with_hook::hc790e47d4ecc86cd\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:451\r\n5:     0x7fc6dc39e68a - std::panicking::begin_panic::h264cdc75d51b518b\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:413\r\n6:     0x7fc6dc3b13ad - rustc_errors::Handler::bug::h620f7270292f0095\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_errors/lib.rs:423\r\n7:     0x7fc6e0ccd8d1 - rustc::session::opt_span_bug_fmt::{{closure}}::h4a9b70c3df8b4b3a\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:783\r\n8:     0x7fc6e0ccd6ee - rustc::session::opt_span_bug_fmt::h7d83586c6e2c7ae6\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1062\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:779\r\n9:     0x7fc6e0ccd352 - rustc::session::bug_fmt::he2d2f00a4afa9d1e\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:763\r\n10:     0x7fc6e13a59b9 - rustc_typeck::check::FnCtxt::instantiate_value_path::h4229ac945aebfa55\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:4396\r\n11:     0x7fc6e1393cff - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3630\r\n12:     0x7fc6e1392a32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n13:     0x7fc6e1390b5c - rustc_typeck::check::FnCtxt::check_expr_struct_fields::h834dbf10da936de9\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2795\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2788\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3270\r\n14:     0x7fc6e1395868 - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3408\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3953\r\n15:     0x7fc6e1392a32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n16:     0x7fc6e13a46ae - rustc_typeck::check::FnCtxt::check_block_with_expected::he90dd72b6855e5e4\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:4208\r\n17:     0x7fc6e1392f02 - rustc_typeck::check::FnCtxt::check_expr_kind::hfeeca7568cc99087\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3810\r\n18:     0x7fc6e1392a32 - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h5d7f5141d7386bb8\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:3460\r\n19:     0x7fc6e1379c4d - rustc_typeck::check::check_fn::h96bd864b4d4fc711\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2801\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2795\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:2788\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:824\r\n20:     0x7fc6e137887b - rustc_typeck::check::check_bare_fn::h87386ea43f4e272e\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:661\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:502\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/infer/mod.rs:441\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1033\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1030\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:846\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/infer/mod.rs:441\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:502\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:651\r\n21:     0x7fc6e137b5ec - rustc_typeck::check::check_item_body::h1e039ede2f960fb9\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:938\r\n22:     0x7fc6e13760cd - rustc_typeck::check::check_item_bodies::hd22adb7703cc56d7\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:565\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/dep_graph/visit.rs:45\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/hir/mod.rs:456\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/dep_graph/visit.rs:67\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/mod.rs:2681\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:591\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/session/mod.rs:232\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/check/mod.rs:589\r\n23:     0x7fc6e13e1a92 - rustc_typeck::check_crate::h92f6bdfe03b6afba\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/lib.rs:350\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/util/common.rs:34\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_typeck/lib.rs:350\r\n24:     0x7fc6e3cc2731 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hd97ec26bf3a98036\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:896\r\n25:     0x7fc6e3cab368 - rustc_driver::driver::phase_3_run_analysis_passes::h6d446abb74c09795\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1033\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1030\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1017\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/local.rs:245\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:1014\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc/ty/context.rs:782\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:866\r\n26:     0x7fc6e3c9b112 - rustc_driver::driver::compile_input::h8e119234b60571d5\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/driver.rs:172\r\n27:     0x7fc6e3ce1018 - rustc_driver::run_compiler::h57c4f233cd1a0c04\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:221\r\n28:     0x7fc6e3bfb7a8 - std::panicking::try::do_call::hf679f17bf3b43b0b\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:1117\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:137\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/librustc_driver/lib.rs:1051\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panic.rs:295\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:356\r\n29:     0x7fc6e3925efa - __rust_maybe_catch_panic\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libpanic_unwind/lib.rs:97\r\n30:     0x7fc6e3c1e298 - <F as alloc::boxed::FnBox<A>>::call_box::h21b5b32059700da6\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panicking.rs:332\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/panic.rs:351\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/thread/mod.rs:287\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/liballoc/boxed.rs:595\r\n31:     0x7fc6e391a374 - std::sys::imp::thread::Thread::new::thread_start::h8084b1107992ae5b\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/liballoc/boxed.rs:605\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys_common/thread.rs:21\r\nat /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/../src/libstd/sys/unix/thread.rs:84\r\n32:     0x7fc6dbb4a453 - start_thread\r\n33:     0x7fc6e35e17de - __GI___clone\r\n34:                0x0 - <unknown>\r\n\r\nerror: Could not compile `baz`.\r\n\r\nCaused by:\r\nprocess didn't exit successfully: `rustc --crate-name baz src/main.rs --crate-type bin -g -C metadata=f80dbc3cb278c435 -C extra-filename=-f80dbc3cb278c435 --out-dir /home/matt/baz/target/debug/deps --emit=dep-info,link -L dependency=/home/matt/baz/target/debug/deps` (exit code: 101)\r\n```", "closed_by": {"login": "matthew-piziak", "id": 6801001, "node_id": "MDQ6VXNlcjY4MDEwMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/6801001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthew-piziak", "html_url": "https://github.com/matthew-piziak", "followers_url": "https://api.github.com/users/matthew-piziak/followers", "following_url": "https://api.github.com/users/matthew-piziak/following{/other_user}", "gists_url": "https://api.github.com/users/matthew-piziak/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthew-piziak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthew-piziak/subscriptions", "organizations_url": "https://api.github.com/users/matthew-piziak/orgs", "repos_url": "https://api.github.com/users/matthew-piziak/repos", "events_url": "https://api.github.com/users/matthew-piziak/events{/privacy}", "received_events_url": "https://api.github.com/users/matthew-piziak/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38210/timeline", "performed_via_github_app": null, "state_reason": "completed"}