{"url": "https://api.github.com/repos/rust-lang/rust/issues/13872", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13872/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13872/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13872/events", "html_url": "https://github.com/rust-lang/rust/issues/13872", "id": 32587766, "node_id": "MDU6SXNzdWUzMjU4Nzc2Ng==", "number": 13872, "title": "ICE with pattern match on xcrate-reexported enum variant", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-05-01T01:04:44Z", "updated_at": "2014-05-01T09:16:52Z", "closed_at": "2014-05-01T09:16:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` rust\n// foo.rs\n#![crate_type = \"rlib\"]\n\npub enum A { B }\n\n// bar.rs\n#![crate_type = \"rlib\"]\n\nextern crate foo;\n\npub use foo::B;\n\n// baz.rs\n#![crate_type = \"rlib\"]\n\nextern crate bar;\n\nuse bar::B;\n\nfn foo() {\n    match B {\n        B => {}\n    }\n}\n```\n\n```\n$ rustc foo.rs && rustc -L. bar.rs && rustc -L. baz.rs\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'lookup_item: id not found: 3', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/s\nrc/librustc/metadata/decoder.rs:93\n\nstack backtrace:\n   1:     0x7fce725198e0 - rt::backtrace::imp::write::h04501b112343e4d4Mwa::v0.11.pre\n   2:     0x7fce724792a0 - rt::unwind::begin_unwind_inner::hfcab8698d135644bR69::v0.11.pre\n   3:     0x7fce72478f20 - rt::unwind::begin_unwind_fmt::h9ae5c1883262acc9159::v0.11.pre\n   4:     0x7fce735f06d0 - metadata::decoder::lookup_item::h6461ed7d9ac122cbHma::v0.11.pre\n   5:     0x7fce735f3e60 - metadata::decoder::get_type::h475e86478947faabNOa::v0.11.pre\n   6:     0x7fce72e8bfd0 - middle::ty::lookup_item_type::h951ff31d32a85dbeEtP::v0.11.pre\n   7:     0x7fce730a8410 - middle::typeck::check::_match::check_pat_variant::h840491536048be96mzZ::v0.11.pre\n   8:     0x7fce730a4a20 - middle::typeck::check::_match::check_pat::h18df281016132163j3Z::v0.11.pre\n   9:     0x7fce730a4110 - middle::typeck::check::_match::check_match::hb48b2a9d6ea92199QuZ::v0.11.pre\n  10:     0x7fce73149130 - middle::typeck::check::check_expr_with_unifier::h68191f4991ee106cDy9::v0.11.pre\n  11:     0x7fce7312a4d0 - middle::typeck::check::check_block_with_expected::h60238d28348d470clUb::v0.11.pre\n  12:     0x7fce73125dd0 - middle::typeck::check::check_fn::h45867583beed19cbSn7::v0.11.pre\n  13:     0x7fce73125b70 - middle::typeck::check::check_bare_fn::h5a74c0289e30c741Jd7::v0.11.pre\n  14:     0x7fce7311d8d0 - middle::typeck::check::check_item::h418ccf98926b96ca6J7::v0.11.pre\n  15:     0x7fce73125970 - middle::typeck::check::check_item_types::ha1866c21fb2bfb501c7::v0.11.pre\n  16:     0x7fce73264150 - util::common::time::h561932986504602240::v0.11.pre\n  17:     0x7fce73262ea0 - middle::typeck::check_crate::h9f866325bbdc0e67lIu::v0.11.pre\n  18:     0x7fce736a01c0 - driver::driver::phase_3_run_analysis_passes::hfe12640f9b1312adTCf::v0.11.pre\n  19:     0x7fce736a60d0 - driver::driver::compile_input::h0aada067d2ebbe0bG2f::v0.11.pre\n  20:     0x7fce736cad30 - run_compiler::h7fbc638a4eb1256cxzn::v0.11.pre\n  21:     0x7fce736e2bb0 - main_args::closure.91434\n  22:     0x7fce736e10b0 - monitor::closure.91309\n  23:     0x7fce736dc9a0 - task::TaskBuilder::try::closure.91075\n  24:     0x7fce755a5f80 - task::spawn_opts::closure.7111\n  25:     0x7fce72514920 - rt::task::Task::run::closure.40130\n  26:     0x7fce7251f840 - rust_try\n  27:     0x7fce72514760 - rt::task::Task::run::h84e43b6a7308c539UW7::v0.11.pre\n  28:     0x7fce755a5d50 - task::spawn_opts::closure.7084\n  29:     0x7fce72518420 - rt::thread::thread_start::hca3848d85a99d9cb7B8::v0.11.pre\n  30:     0x7fce71e33ea0 - start_thread\n  31:     0x7fce72143999 - __clone\n  32:                0x0 - <unknown>\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13872/timeline", "performed_via_github_app": null, "state_reason": "completed"}