{"url": "https://api.github.com/repos/rust-lang/rust/issues/3044", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3044/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3044/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3044/events", "html_url": "https://github.com/rust-lang/rust/issues/3044", "id": 5880806, "node_id": "MDU6SXNzdWU1ODgwODA2", "number": 3044, "title": "error: internal compiler error: unexpected failure", "user": {"login": "varnie", "id": 100782, "node_id": "MDQ6VXNlcjEwMDc4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/100782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varnie", "html_url": "https://github.com/varnie", "followers_url": "https://api.github.com/users/varnie/followers", "following_url": "https://api.github.com/users/varnie/following{/other_user}", "gists_url": "https://api.github.com/users/varnie/gists{/gist_id}", "starred_url": "https://api.github.com/users/varnie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varnie/subscriptions", "organizations_url": "https://api.github.com/users/varnie/orgs", "repos_url": "https://api.github.com/users/varnie/repos", "events_url": "https://api.github.com/users/varnie/events{/privacy}", "received_events_url": "https://api.github.com/users/varnie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/8", "html_url": "https://github.com/rust-lang/rust/milestone/8", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/8/labels", "id": 144598, "node_id": "MDk6TWlsZXN0b25lMTQ0NTk4", "number": 8, "title": "0.5", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 206, "state": "closed", "created_at": "2012-07-12T19:45:03Z", "updated_at": "2013-06-13T02:57:55Z", "due_on": "2012-12-22T08:00:00Z", "closed_at": "2013-06-13T02:57:55Z"}, "comments": 1, "created_at": "2012-07-27T17:05:22Z", "updated_at": "2012-08-03T04:44:36Z", "closed_at": "2012-08-03T04:44:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there. The following small test case demonstrates the bug (I misused vec::foldr function):\n\n```\nfn main() {\n    let needlesArr: ~[char] = ~['a', 'f'];\n    do vec::foldr(needlesArr) |x, y| {\n        //empty\n    }\n}\n```\n\nThe bug message and stacktrace (I rerun it with \"RUST_LOG=rustc=0,::rt::backtrace\" as it suggested) is below.\nThe scary \"error: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\" gripped my attention.\n\n```\n> rustc ~/thrash/bug.rs\n/home/varnie/thrash/bug.rs:3:7: 3:31 error: this function takes 3 parameters but 2 parameters were supplied\n/home/varnie/thrash/bug.rs:3     do vec::foldr(needlesArr) |x, y| {\n                                    ^~~~~~~~~~~~~~~~~~~~~~~~\nrust: task failed at 'option none', /home/varnie/thrash/rust/src/rustc/rustc.rc:1\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_j+0x72)[0xb5eb43c2]\n/usr/local/bin/../lib/librustrt.so(rust_task_fail+0x36)[0xb5eb4466]\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task4failEPKcS1_j+0x32)[0xb5eb44d2]\n/usr/local/bin/../lib/librustrt.so(upcall_s_fail+0x53)[0xb5eb6e93]\n/usr/local/bin/../lib/librustrt.so(+0x2e693)[0xb5eca693]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1be)[0xb5eb817e]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x392536)[0xb6287536]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x39eaa7)[0xb6293aa7]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x39e24a)[0xb629324a]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x5ebc8c)[0xb64e0c8c]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x390063)[0xb6285063]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x5ebc8c)[0xb64e0c8c]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x329537)[0xb621e537]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x3603ba)[0xb62553ba]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x35ed53)[0xb6253d53]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x35cca7)[0xb6251ca7]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x5ebc8c)[0xb64e0c8c]\n/usr/local/bin/../lib/libsyntax-b45cc7d0b085bc34-0.3.so(+0x9e687)[0xb6899687]\n/usr/local/bin/../lib/libsyntax-b45cc7d0b085bc34-0.3.so(+0x9e4e0)[0xb68994e0]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(_ZN6middle6typeck11check_crate17_2914875f16fe66be3_03E+0x1143)[0xb62f9a23]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(_ZN6driver6driver12compile_upto17_72edd05480e097483_03E+0x1124)[0xb64b7d24]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(+0x5ebc8c)[0xb64e0c8c]\n/usr/local/bin/../lib/librustc-73389320c1332876-0.3.so(_ZN6driver6driver13compile_input17_dc2f7342b6a0a3fe3_03E+0xc5)[0xb64bb6b5]\nrustc[0x804e5af]\nrustc[0x8058f64]\nrustc[0x8058c32]\nrustc[0x805507b]\nrustc[0x805447d]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x4ccac)[0xb7384cac]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x31)[0xb5eb5581]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/varnie/thrash/rust/src/rustc/driver/rustc.rs:256\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_j+0x72)[0xb5eb43c2]\n/usr/local/bin/../lib/librustrt.so(rust_task_fail+0x36)[0xb5eb4466]\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task4failEPKcS1_j+0x32)[0xb5eb44d2]\n/usr/local/bin/../lib/librustrt.so(upcall_s_fail+0x53)[0xb5eb6e93]\n/usr/local/bin/../lib/librustrt.so(+0x2e693)[0xb5eca693]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1be)[0xb5eb817e]\nrustc[0x805384d]\nrustc[0x8058f64]\nrustc[0x8058b3b]\nrustc(_rust_main+0x38)[0x8058b88]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x31)[0xb5eb5581]\nrust: domain main @0x901c0b8 root task failed\nrust: task failed at 'killed', /home/varnie/thrash/rust/src/libcore/task.rs:523\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_j+0x72)[0xb5eb43c2]\n/usr/local/bin/../lib/librustrt.so(rust_task_fail+0x36)[0xb5eb4466]\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task4failEPKcS1_j+0x32)[0xb5eb44d2]\n/usr/local/bin/../lib/librustrt.so(upcall_s_fail+0x53)[0xb5eb6e93]\n/usr/local/bin/../lib/librustrt.so(+0x2e693)[0xb5eca693]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1be)[0xb5eb817e]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(_ZN4task5yield17_8bfde8cf2fff81633_03E+0xc2)[0xb7372f12]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x626e5)[0xb739a6e5]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(_ZN4priv11weaken_task17_2b14e75713b55a573_03E+0xed)[0xb739a57d]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x62404)[0xb739a404]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x7d5f8)[0xb73b55f8]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x614a6)[0xb73994a6]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x6069d)[0xb739869d]\n/usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.3.so(+0x4ccac)[0xb7384cac]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x31)[0xb5eb5581]\n```\n\nMy rustc version and system info:\n\n> varnie@heimdal:~/thrash/rust/src/rustc/middle/typeck/check$ rustc -v\n> rustc 0.3 (6081eb7 2012-07-15 05:41:24 -0700)\n> host: i686-unknown-linux-gnu\n\nHope it helps\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3044/timeline", "performed_via_github_app": null, "state_reason": "completed"}