{"url": "https://api.github.com/repos/rust-lang/rust/issues/70888", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/70888/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/70888/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/70888/events", "html_url": "https://github.com/rust-lang/rust/issues/70888", "id": 595896911, "node_id": "MDU6SXNzdWU1OTU4OTY5MTE=", "number": 70888, "title": "the `Output` of this `async fn`'s found opaque type", "user": {"login": "Kistlak", "id": 20333573, "node_id": "MDQ6VXNlcjIwMzMzNTcz", "avatar_url": "https://avatars.githubusercontent.com/u/20333573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kistlak", "html_url": "https://github.com/Kistlak", "followers_url": "https://api.github.com/users/Kistlak/followers", "following_url": "https://api.github.com/users/Kistlak/following{/other_user}", "gists_url": "https://api.github.com/users/Kistlak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kistlak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kistlak/subscriptions", "organizations_url": "https://api.github.com/users/Kistlak/orgs", "repos_url": "https://api.github.com/users/Kistlak/repos", "events_url": "https://api.github.com/users/Kistlak/events{/privacy}", "received_events_url": "https://api.github.com/users/Kistlak/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-07T14:09:03Z", "updated_at": "2020-05-23T06:21:37Z", "closed_at": "2020-04-07T14:21:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am creating a rust web application. I am new to this thing and I am trying to make API requests and pass a result form a request as Response to the web view. There are main.rs , route.rs and common.rs files. Basically main.rs file call relevant route and then route will call the function.\r\n\r\nBut, there is an error with a function in the route.rs file.\r\n\r\n```\r\nerror[E0308]: mismatched types\r\n  --> src\\search\\routes.rs:25:12\r\n   |\r\n25 |     return set_token;\r\n   |            ^^^^^^^^^ expected enum `std::result::Result`, found opaque type\r\n   | \r\n  ::: src\\search\\routes\\common.rs:6:32\r\n   |\r\n6  | pub async fn authenticate() -> Result<String, reqwest::Error> {\r\n   |                                ------------------------------ the `Output` of this `async fn`'s found opaque type\r\n   |\r\n   = note:     expected enum `std::result::Result<std::string::String, actix_http::error::Error>`\r\n           found opaque type `impl std::future::Future`\r\n```\r\n\r\nHow can I Fix this ??\r\n\r\nroute.rs\r\n```\r\n#[get(\"/token\")]\r\nasync fn get_token() -> Result<String> {\r\n    let set_token = common::authenticate(); \r\n    return set_token.await;\r\n}\r\n```\r\n\r\ncommon.rs\r\n```\r\nextern crate reqwest;\r\nuse reqwest::header::HeaderMap;\r\nuse reqwest::header::AUTHORIZATION;\r\nuse reqwest::header::CONTENT_TYPE;\r\n\r\npub async fn authenticate() -> Result<String, reqwest::Error> {\r\n\r\n    fn construct_headers() -> HeaderMap {\r\n        let mut headers = HeaderMap::new();\r\n\r\n        headers.insert(AUTHORIZATION, \"Basic bghythjuikyt==\".parse().unwrap());\r\n        headers.insert(CONTENT_TYPE, \"application/x-www-form-urlencoded\".parse().unwrap());\r\n\r\n        assert!(headers.contains_key(AUTHORIZATION));\r\n        assert!(!headers.contains_key(CONTENT_TYPE));\r\n\r\n        headers\r\n    }\r\n\r\n    let client = reqwest::Client::new();\r\n\r\n    let reszr = client.post(\"https://api.test.com/auth/token\")\r\n    .headers(construct_headers())\r\n    .body(\"grant_type=client_credentials\")\r\n        .send()\r\n        .await?\r\n        .text()\r\n        .await;\r\n\r\n        return reszr;\r\n}\r\n```", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/70888/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/70888/timeline", "performed_via_github_app": null, "state_reason": "completed"}