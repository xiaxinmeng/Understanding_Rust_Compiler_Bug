{"url": "https://api.github.com/repos/rust-lang/rust/issues/24384", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24384/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24384/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24384/events", "html_url": "https://github.com/rust-lang/rust/issues/24384", "id": 68165223, "node_id": "MDU6SXNzdWU2ODE2NTIyMw==", "number": 24384, "title": "rustc silently ignores a class of errors in flexible target json files", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 632453790, "node_id": "MDU6TGFiZWw2MzI0NTM3OTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-target-specs", "name": "A-target-specs", "color": "f7e101", "default": false, "description": "Area: compile-target specifications"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-04-13T18:42:22Z", "updated_at": "2018-10-31T14:38:14Z", "closed_at": "2018-10-31T14:38:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "Currently `rustc` will allow for extra fields to be added to flexible target json without notifying the user, even with `--verbose`.  For example, the following is accepted:\n\n``` json\n{\n    \"THIS-IS-INCORRECT\": \"but rustc will silently accept it anyway\",\n    \"data-layout\": \"e-p:32:32-f64:32:64-i64:32:64-f80:32:32-n8:16:32\",\n    \"llvm-target\": \"i686-unknown-linux-gnu\",\n    \"target-endian\": \"little\",\n    \"target-pointer-width\": \"32\",\n    \"arch\": \"x86\",\n    \"os\": \"linux\",\n    \"morestack\": \"false\",\n    \"pre-link-args\": \"-nostdlib\",\n    \"dynamic_linking\": false\n}\n```\n- `dynamic_linking` has a underscore separator instead of a hyphen.\n- `morestack` is of type bool, but a string was provided\n- `pre-link-args` takes an array of strings, but a string was provided\n\nThe last three entries have errors that could be easy to miss.  This is worrying, because for all the optional fields, simple errors such as misspellings will cause those fields to be discarded and the default values to be used instead.  To the programmer it could seem as if the configuration is in place when in reality the compiler simply went with the default value.\n\nI had one of these happen to me earlier and I almost missed it completely.  I think that this should at the very least trigger a warning.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24384/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24384/timeline", "performed_via_github_app": null, "state_reason": "completed"}