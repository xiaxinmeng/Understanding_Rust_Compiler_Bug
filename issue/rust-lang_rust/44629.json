{"url": "https://api.github.com/repos/rust-lang/rust/issues/44629", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/44629/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/44629/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/44629/events", "html_url": "https://github.com/rust-lang/rust/issues/44629", "id": 258222394, "node_id": "MDU6SXNzdWUyNTgyMjIzOTQ=", "number": 44629, "title": "Internal compiler docs is broken on master", "user": {"login": "Michael-F-Bryan", "id": 17380079, "node_id": "MDQ6VXNlcjE3MzgwMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/17380079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Michael-F-Bryan", "html_url": "https://github.com/Michael-F-Bryan", "followers_url": "https://api.github.com/users/Michael-F-Bryan/followers", "following_url": "https://api.github.com/users/Michael-F-Bryan/following{/other_user}", "gists_url": "https://api.github.com/users/Michael-F-Bryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/Michael-F-Bryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Michael-F-Bryan/subscriptions", "organizations_url": "https://api.github.com/users/Michael-F-Bryan/orgs", "repos_url": "https://api.github.com/users/Michael-F-Bryan/repos", "events_url": "https://api.github.com/users/Michael-F-Bryan/events{/privacy}", "received_events_url": "https://api.github.com/users/Michael-F-Bryan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 593503757, "node_id": "MDU6TGFiZWw1OTM1MDM3NTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-infra", "name": "T-infra", "color": "bfd4f2", "default": false, "description": "Relevant to the infrastructure team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-09-16T10:06:02Z", "updated_at": "2017-10-25T09:26:36Z", "closed_at": "2017-10-21T19:02:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "I don't think this has already been reported, but it looks like generating documentation for internal rustc crates is currently broken. This is probably because of an error in bootstrap or rustbuild where the wrong `-L` flags are being passed to rustdoc, because `build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libproc_macro-6210e4b46662ec28.so` (the file which it says is missing) already exists on my system.\r\n\r\nAccording to my [rustc-internal-docs] tool, this breaks documentation generation for 32 of the ~60 internal crates in the compiler.\r\n\r\n---\r\n\r\n# Steps to Reproduce\r\n\r\n1. Check out the latest version of the rustc repo\r\n2. Set up your `config.toml` as described in [document internal rustc items]\r\n3. Run `./x.py doc` (possibly adding `--stage 1` so you don't compile stage 2 things unnecessarily)\r\n\r\nOutput:\r\n\r\n```\r\n$ ./x.py doc --stage 1\r\n...\r\n Documenting rustc_errors v0.0.0 (file:///srv/github-backups/rust-lang/rust/src/librustc_errors)\r\n   Compiling string_cache v0.6.2\r\n   Compiling markup5ever v0.3.2\r\n   Compiling selectors v0.18.0\r\n Documenting cssparser v0.13.7\r\nerror: libproc_macro-6210e4b46662ec28.so: cannot open shared object file: No such file or directory\r\n  --> /home/michael/.cargo/registry/src/github.com-1ecc6299db9ec823/cssparser-0.13.7/src/lib.rs:71:14\r\n   |\r\n71 | #[macro_use] extern crate cssparser_macros;\r\n   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\nerror: Could not compile `cssparser`.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n\r\n\r\ncommand did not execute successfully: \"/srv/github-backups/rust-lang/rust/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"doc\" \"-j\" \"4\" \"--target\" \"x86_64-unknown-linux-gnu\" \"--release\" \"--features\" \" jemalloc llvm\" \"--manifest-path\" \"/srv/github-backups/rust-lang/rust/src/rustc/Cargo.toml\" \"-p\" \"rustc_driver\" \"-p\" \"rustdoc\"\r\nexpected success, got: exit code: 101\r\n\r\n\r\nfailed to run: /srv/github-backups/rust-lang/rust/build/bootstrap/debug/bootstrap doc --stage 1\r\nBuild completed unsuccessfully in 0:28:03\r\n```\r\n\r\n[document internal rustc items]: https://forge.rust-lang.org/x-py.html#document-internal-rustc-items\r\n[rustc-internal-docs]: https://github.com/Michael-F-Bryan/rustc-internal-docs", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/44629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/44629/timeline", "performed_via_github_app": null, "state_reason": "completed"}