{"url": "https://api.github.com/repos/rust-lang/rust/issues/56375", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56375/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56375/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56375/events", "html_url": "https://github.com/rust-lang/rust/issues/56375", "id": 386222999, "node_id": "MDU6SXNzdWUzODYyMjI5OTk=", "number": 56375, "title": "Regression: : cannot determine resolution for the attribute macro `test`", "user": {"login": "rustonaut", "id": 7632017, "node_id": "MDQ6VXNlcjc2MzIwMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7632017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rustonaut", "html_url": "https://github.com/rustonaut", "followers_url": "https://api.github.com/users/rustonaut/followers", "following_url": "https://api.github.com/users/rustonaut/following{/other_user}", "gists_url": "https://api.github.com/users/rustonaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/rustonaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rustonaut/subscriptions", "organizations_url": "https://api.github.com/users/rustonaut/orgs", "repos_url": "https://api.github.com/users/rustonaut/repos", "events_url": "https://api.github.com/users/rustonaut/events{/privacy}", "received_events_url": "https://api.github.com/users/rustonaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 239393, "node_id": "MDU6TGFiZWwyMzkzOTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-resolve", "name": "A-resolve", "color": "f7e101", "default": false, "description": "Area: Path resolution"}, {"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}, {"id": 943968375, "node_id": "MDU6TGFiZWw5NDM5NjgzNzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-close", "name": "disposition-close", "color": "dd0000", "default": false, "description": "This PR / issue is in PFCP or FCP with a disposition to close it."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2018-11-30T15:02:18Z", "updated_at": "2019-09-29T19:26:30Z", "closed_at": "2019-09-29T19:26:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "We have a regression in our internal rust backend between v1.29.0 and v1.30.0.\r\n\r\nThe build stops compiling when run with `cargo test`. But builds fine when run with\r\n`cargo +1.29.0 test`, Also `cargo build` and `cargo test --lib` do work.\r\n\r\nThe error is:\r\n```\r\nerror: cannot determine resolution for the attribute macro `test`\r\n   --> tests/integration_tests/main.rs:141:3\r\n    |\r\n141 | #[test]\r\n    |   ^^^^\r\n    |\r\n    = note: import resolution is stuck, try simplifying macro imports\r\n```\r\n\r\nAs it's an internal repository I can't link it here but I will see if I can create\r\na minimal example producing this error.\r\n\r\nIt should be noted that the integration tests do\r\n1. _not_ define any new macro\r\n2. only import macros via. `#[macro_use]` from `serde_json` and `lazy_static`.\r\n3. **have a module called `test_utils` which is imported as `test`**\r\n   (basically `use self::test_utils as test;`) but that should be a different\r\n   namspace, right?\r\n\r\n# Meta\r\n\r\nWorks with: \r\n\r\n```\r\nrustc 1.29.0 (aa3ca1994 2018-09-11)\r\nbinary: rustc\r\ncommit-hash: aa3ca1994904f2e056679fce1f185db8c7ed2703\r\ncommit-date: 2018-09-11\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.29.0\r\nLLVM version: 7.0\r\n```\r\n\r\nDoesn't work with\r\n\r\n```\r\nrustc 1.30.1 (1433507eb 2018-11-07)\r\nbinary: rustc\r\ncommit-hash: 1433507eba7d1a114e4c6f27ae0e1a74f60f20de\r\ncommit-date: 2018-11-07\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.30.1\r\nLLVM version: 8.0\r\n```\r\n\r\nNeither with\r\n\r\n```\r\nustc 1.32.0-nightly (13c943992 2018-11-18)\r\nbinary: rustc\r\ncommit-hash: 13c9439925797cd7a65c917d047c07a500d9bfe6\r\ncommit-date: 2018-11-18\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.32.0-nigh\r\n```", "closed_by": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56375/timeline", "performed_via_github_app": null, "state_reason": "completed"}