{"url": "https://api.github.com/repos/rust-lang/rust/issues/17935", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17935/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17935/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17935/events", "html_url": "https://github.com/rust-lang/rust/issues/17935", "id": 45530348, "node_id": "MDU6SXNzdWU0NTUzMDM0OA==", "number": 17935, "title": "Compiler crashing after a valid error", "user": {"login": "buosseph", "id": 4885195, "node_id": "MDQ6VXNlcjQ4ODUxOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4885195?v=4", "gravatar_id": "", "url": "https://api.github.com/users/buosseph", "html_url": "https://github.com/buosseph", "followers_url": "https://api.github.com/users/buosseph/followers", "following_url": "https://api.github.com/users/buosseph/following{/other_user}", "gists_url": "https://api.github.com/users/buosseph/gists{/gist_id}", "starred_url": "https://api.github.com/users/buosseph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/buosseph/subscriptions", "organizations_url": "https://api.github.com/users/buosseph/orgs", "repos_url": "https://api.github.com/users/buosseph/repos", "events_url": "https://api.github.com/users/buosseph/events{/privacy}", "received_events_url": "https://api.github.com/users/buosseph/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-10-10T22:32:11Z", "updated_at": "2014-10-11T04:39:22Z", "closed_at": "2014-10-11T04:39:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "Running rustc 0.13.0-nightly (f9fc49c06 2014-10-10 00:07:08 +0000) on OSX 10.9.5 with x86_64 architecture.\n\n```\n#[deriving(Show)]\npub struct Audio {\n    pub bit_rate: uint,\n    pub sampling_rate: uint,\n    pub num_of_channels: uint,\n    pub order: SampleOrder, // Enum\n    pub samples: Vec<f64>,\n}\n\nimpl Audio {\n    pub fn invert(&mut self) -> bool {\n        for sample in self.samples.iter_mut() {\n            *sample = -*sample;\n        }\n        true\n    }\n}\n\n#[test]\nfn test_invert() {\n    let mut audio = Audio {\n        bit_rate: 24,\n        sampling_rate: 44100,\n        num_of_channels: 2,\n        order: INTERLEAVED,\n        samples: vec![0.1f64, 0.2f64, 0.2f64, 0.1f64],\n    };\n    audio.invert();\n    assert!(audio.samples, vec![-0.1f64, -0.2f64, -0.2f64, -0.1f64])\n}\n\n```\n\nError is being generated by `test_invert()`.\n\n```\nd-172-25-98-120:rust-wav brianuosseph$ env RUST_BACKTRACE=1 cargo test\n   Compiling wave v0.0.1 (file:///Users/brianuosseph/Desktop/Projects/rust-wav)\n<std macros>:8:12: 51:24 error: cannot apply unary operator `!` to type `collections::vec::Vec<f64>`\n<std macros>:8         if !$cond {\n<std macros>:9             fail!($($arg),+)\n<std macros>:10         }\n<std macros>:11     );\n<std macros>:12 )\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'index out of bounds: the len is 12 but the index is 12', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/libsyntax/lib.rs:1\n\nstack backtrace:\n   1:        0x1036c1d69 - rt::backtrace::imp::write::hd2d3b636c19898a59Kq\n   2:        0x1036c5081 - failure::on_fail::h81686b612f31dab9N1q\n   3:        0x103931e55 - unwind::begin_unwind_inner::h4e3cb6f9f8acbab0Lud\n   4:        0x103931b1c - unwind::begin_unwind_fmt::ha20b8fb9f077636fdsd\n   5:        0x103931862 - rust_begin_unwind\n   6:        0x10398970c - failure::fail_fmt::h32e427d57cdcefeciqk\n   7:        0x1039895de - failure::fail_bounds_check::hc9227d621f27970eRok\n   8:        0x1016065f5 - codemap::FileMap::get_line::h0d420396c4dd138beKE\n   9:        0x10163b594 - diagnostic::emit::hc41ebf8e69a6a902dlG\n  10:        0x1016383ba - diagnostic::EmitterWriter.Emitter::emit::hbd468df05b43539a2gG\n  11:        0x101636c95 - diagnostic::Handler::emit::hb8313614ddf6ccebIYF\n  12:        0x10160275b - diagnostic::SpanHandler::span_err::h097c64ec3be39f7bwNF\n  13:        0x10080a702 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message_str_with_expected::h1f6d944c9b56120489d\n  14:        0x10089c6b7 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message::h16f1fa72057dafe8rge\n  15:        0x1008c776d - middle::typeck::check::check_expr_with_unifier::check_user_unop::closure.133722\n  16:        0x1008c6d7b - middle::typeck::check::check_expr_with_unifier::lookup_op_method::hb91b377b63343dbeQtW\n  17:        0x1008ad4c8 - middle::typeck::check::check_expr_with_unifier::check_user_unop::h58dae5a8f82c51dbTHW\n  18:        0x1008a89d7 - middle::typeck::check::check_expr_with_unifier::hd8937997f95f43ebFfW\n  19:        0x1008a30f5 - middle::typeck::check::check_expr_with_unifier::hd8937997f95f43ebFfW\n  20:        0x10086b8a5 - middle::typeck::check::check_block_with_expected::ha3ea376fe85aa9b4wqY\n  21:        0x100866c22 - middle::typeck::check::check_fn::h1943d2e23de5d7b6jVS\n  22:        0x100866195 - middle::typeck::check::check_bare_fn::h5f7307dec95e6903rKS\n  23:        0x100861edb - middle::typeck::check::check_item::h542395aff7491c3fucT\n  24:        0x1008643c3 - visit::walk_item::h4090236185718158523\n  25:        0x10086600a - middle::typeck::check::check_item_types::h8491bf8572a3d292BJS\n  26:        0x1002e2006 - util::common::time::h7538122138083832295\n  27:        0x100b204fe - middle::typeck::check_crate::h17b4ff5a2198a72aGHk\n  28:        0x100b8c5df - driver::driver::phase_3_run_analysis_passes::hbb2b4d4297be9e34Jfx\n  29:        0x100b867df - driver::driver::compile_input::h81df14f852785b60vWw\n  30:        0x100c0f384 - driver::run_compiler::h4bd8d206e78cbaddMMA\n  31:        0x100c0d4b6 - driver::run::closure.146729\n  32:        0x1002fb39b - task::TaskBuilder<S>::try_future::closure.101486\n  33:        0x1002fb283 - task::TaskBuilder<S>::spawn_internal::closure.101457\n  34:        0x10027974d - task::spawn_opts::closure.8464\n  35:        0x10399995c - rust_try_inner\n  36:        0x103999946 - rust_try\n  37:        0x10392f4c7 - unwind::try::h02eaf02110b5e7b2tjd\n  38:        0x10392f34c - task::Task::run::ha0919a84fddfd7a3Ezc\n  39:        0x100279572 - task::spawn_opts::closure.8403\n  40:        0x103930d0a - thread::thread_start::h6553ef4f6ad4be5fPTc\n  41:     0x7fff90b0d899 - _pthread_body\n  42:     0x7fff90b0d72a - _pthread_struct_init\n\nCould not compile `wave`.\n\nTo learn more, run the command again with --verbose.\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17935/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17935/timeline", "performed_via_github_app": null, "state_reason": "completed"}