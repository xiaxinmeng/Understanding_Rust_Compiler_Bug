{"url": "https://api.github.com/repos/rust-lang/rust/issues/6102", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6102/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6102/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6102/events", "html_url": "https://github.com/rust-lang/rust/issues/6102", "id": 13743841, "node_id": "MDU6SXNzdWUxMzc0Mzg0MQ==", "number": 6102, "title": "Assignment operator for BigInt causes ICE", "user": {"login": "gifnksm", "id": 164213, "node_id": "MDQ6VXNlcjE2NDIxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/164213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gifnksm", "html_url": "https://github.com/gifnksm", "followers_url": "https://api.github.com/users/gifnksm/followers", "following_url": "https://api.github.com/users/gifnksm/following{/other_user}", "gists_url": "https://api.github.com/users/gifnksm/gists{/gist_id}", "starred_url": "https://api.github.com/users/gifnksm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gifnksm/subscriptions", "organizations_url": "https://api.github.com/users/gifnksm/orgs", "repos_url": "https://api.github.com/users/gifnksm/repos", "events_url": "https://api.github.com/users/gifnksm/events{/privacy}", "received_events_url": "https://api.github.com/users/gifnksm/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-04-29T01:45:34Z", "updated_at": "2013-06-20T09:39:35Z", "closed_at": "2013-06-20T09:39:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following core causes ICE.\n\n``` rust\nextern mod std;\n\nuse core::num::{IntConvertible};\nuse std::bigint::{BigInt};\n\nfn main() {\n  let mut n = IntConvertible::from_int::<BigInt>(1);\n  n += IntConvertible::from_int::<BigInt>(2);\n  println(fmt!(\"%s\", n.to_str()));\n}\n```\n\n```\n$ RUST_LOG=rustc=1,::rt::backtrace rustc ng.rs\nrust: task failed at 'assertion failed: !bcx.ccx().maps.moves_map.contains(&arg_expr.id)', /home/nksm/pkg/rust-incoming/src/rust/src/librustc/middle/trans/callee.rs:733\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f345469a5db]\n/usr/bin/../lib/librustrt.so(+0x2a619)[0x7f34546ab619]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x198)[0x7f345469c518]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x112f6b)[0x7f3456659f6b]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x112f12)[0x7f3456659f12]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys14__extensions__9meth_68459fail_with16_12542417c6a0d836_07preE+0x6b)[0x7f34565a6a7b]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee14trans_arg_expr16_11e9c138e58ce866_07preE+0x1e4c)[0x7f3454b0a3ec]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x22c4c9)[0x7f3454b084c9]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x22c32d)[0x7f3454b0832d]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_args17_76939082bfb0b4786_07preE+0x1be)[0x7f3454b06cde]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x229e06)[0x7f3454b05e06]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope15_6b601fbe3c1f9c6_07preE+0x5fc)[0x7f3454ab4eac]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner15_adb7958e8922786_07preE+0x126)[0x7f3454aeb926]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24a183)[0x7f3454b26183]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x243a33)[0x7f3454b1fa33]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x23f2d2)[0x7f3454b1b2d2]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into16_85d0f7ed7c34fb66_07preE+0xb71)[0x7f3454a66d41]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_stmt16_5122cda3b3b762b6_07preE+0x63d)[0x7f3454a65bad]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x188eda)[0x7f3454a64eda]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x188dfa)[0x7f3454a64dfa]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block16_808c4aa24555fcf6_07preE+0x1ae)[0x7f3454a6346e]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_c01bc4ba445c3ca16_07preE+0xa61)[0x7f3454b8e571]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base8trans_fn17_c54d4263d716d9c36_07preE+0x685)[0x7f3454a18865]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_item16_2142679ed2f4f8c6_07preE+0x11c9)[0x7f3454a0eef9]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2b9a28)[0x7f3454b95a28]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x21516a)[0x7f3454af116a]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base9trans_mod16_8f74aeac2aa378f6_07preE+0xa2)[0x7f3454b95532]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base11trans_crate17_2ba8db2a9d3fad206_07preE+0x1511)[0x7f3454bb2ad1]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_rest17_3484a7eeb05af7ff6_07preE+0x3e1c)[0x7f345528ea2c]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_upto17_7159fcbbfa2a70e46_07preE+0x192)[0x7f3455292302]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver13compile_input17_5d2d955f23bac1556_07preE+0x107)[0x7f3455292787]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN12run_compiler17_cb41e7e533dbc8f66_07preE+0x2bf4)[0x7f34552be414]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x9f43ce)[0x7f34552d03ce]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x9f1edc)[0x7f34552cdedc]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x9f005c)[0x7f34552cc05c]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x9f46a0)[0x7f34552d06a0]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xdf187)[0x7f3456626187]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x1568c8)[0x7f345669d8c8]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f345469af54]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/nksm/pkg/rust-incoming/src/rust/src/librustc/rustc.rc:349\n/usr/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f345469a5db]\n/usr/bin/../lib/librustrt.so(+0x2a619)[0x7f34546ab619]\n/usr/bin/../lib/librustrt.so(upcall_fail+0x198)[0x7f345469c518]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x112f6b)[0x7f3456659f6b]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x112fb2)[0x7f3456659fb2]\n/usr/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xbf764)[0x7f3456606764]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN7monitor17_393ba1ffd0fee79d6_07preE+0x6bc5)[0x7f34552c61d5]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x9f46a0)[0x7f34552d06a0]\n/usr/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN4main15_c4de63b748e03d6_07preE+0x69)[0x7f34552d0309]\nrustc(_rust_main+0x2e)[0x400bfe]\n/usr/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f345469af54]\nrust: domain main @0x689410 root task failed\n```\n\nThe following doesn't cause ICE.\n\n``` rust\nextern mod std;\n\nuse core::num::{IntConvertible};\nuse std::bigint::{BigInt};\n\nfn main() {\n  let mut n = IntConvertible::from_int::<BigInt>(1);\n  n = n + IntConvertible::from_int::<BigInt>(2);\n  println(fmt!(\"%s\", n.to_str()));\n}\n```\n\nThis may be related to #2528.\n", "closed_by": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6102/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6102/timeline", "performed_via_github_app": null, "state_reason": "completed"}