{"url": "https://api.github.com/repos/rust-lang/rust/issues/50887", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50887/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50887/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50887/events", "html_url": "https://github.com/rust-lang/rust/issues/50887", "id": 324609157, "node_id": "MDU6SXNzdWUzMjQ2MDkxNTc=", "number": 50887, "title": "Spurious \"syntax error in VERSION script\" when linking the sanitizers on `dist-x86_64-linux-alt`", "user": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 371266501, "node_id": "MDU6TGFiZWwzNzEyNjY1MDE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-spurious", "name": "A-spurious", "color": "f7e101", "default": false, "description": "Area: Spurious failures in builds (spuriously == for no apparent reason)"}, {"id": 630870359, "node_id": "MDU6TGFiZWw2MzA4NzAzNTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-sanitizers", "name": "A-sanitizers", "color": "f7e101", "default": false, "description": "Area: Sanitizers for correctness and code quality."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2018-05-19T07:27:50Z", "updated_at": "2018-10-20T02:32:42Z", "closed_at": "2018-10-20T02:32:42Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Symptom:\r\n\r\nThe `dist-x86_64-linux-alt` job failed when running the build script for `rustc_asan` in the `stage1-std` phase.\r\n\r\n<details><summary>Sample of the log</summary>\r\n\r\n```\r\n[00:30:15] travis_fold:start:stage1-std\r\ntravis_time:start:stage1-std\r\nBuilding stage1 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n[00:30:15]    Compiling cc v1.0.15\r\n[00:30:15]    Compiling core v0.0.0 (file:///checkout/src/libcore)\r\n[00:30:15]    Compiling build_helper v0.1.0 (file:///checkout/src/build_helper)\r\n[00:30:15]    Compiling unwind v0.0.0 (file:///checkout/src/libunwind)\r\n[00:30:19]    Compiling std v0.0.0 (file:///checkout/src/libstd)\r\n[00:30:23]    Compiling compiler_builtins v0.0.0 (file:///checkout/src/rustc/compiler_builtins_shim)\r\n[00:30:23]    Compiling cmake v0.1.30\r\n[00:30:23]    Compiling alloc_jemalloc v0.0.0 (file:///checkout/src/liballoc_jemalloc)\r\n[00:30:28]    Compiling profiler_builtins v0.0.0 (file:///checkout/src/libprofiler_builtins)\r\n[00:30:28]    Compiling rustc_asan v0.0.0 (file:///checkout/src/librustc_asan)\r\n[00:30:28]    Compiling rustc_msan v0.0.0 (file:///checkout/src/librustc_msan)\r\n[00:30:29]    Compiling rustc_lsan v0.0.0 (file:///checkout/src/librustc_lsan)\r\n[00:30:30]    Compiling rustc_tsan v0.0.0 (file:///checkout/src/librustc_tsan)\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingMerge.c:86:48: warning: unused parameter 'ProfileSize' [-Wunused-parameter]\r\n[00:30:38] warning:                                       uint64_t ProfileSize) {\r\n[00:30:38] warning:                                                ^\r\n[00:30:38] warning: 1 warning generated.\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingUtil.c:119:3: warning: implicit declaration of function 'flock' is invalid in C99 [-Wimplicit-function-declaration]\r\n[00:30:38] warning:   flock(fd, LOCK_EX);\r\n[00:30:38] warning:   ^\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingUtil.c:144:3: warning: implicit declaration of function 'flock' is invalid in C99 [-Wimplicit-function-declaration]\r\n[00:30:38] warning:   flock(fd, LOCK_UN);\r\n[00:30:38] warning:   ^\r\n[00:30:38] warning: 2 warnings generated.\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingValue.c:108:60: warning: unused parameter 'Data' [-Wunused-parameter]\r\n[00:30:38] warning: static ValueProfNode *allocateOneNode(__llvm_profile_data *Data, uint32_t Index,\r\n[00:30:38] warning:                                                            ^\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingValue.c:108:75: warning: unused parameter 'Index' [-Wunused-parameter]\r\n[00:30:38] warning: static ValueProfNode *allocateOneNode(__llvm_profile_data *Data, uint32_t Index,\r\n[00:30:38] warning:                                                                           ^\r\n[00:30:38] warning: ../libcompiler_builtins/compiler-rt/lib/profile/InstrProfilingValue.c:109:48: warning: unused parameter 'Value' [-Wunused-parameter]\r\n[00:30:38] warning:                                       uint64_t Value) {\r\n[00:30:38] warning:                                                ^\r\n[00:30:38] warning: 3 warnings generated.\r\n[00:31:40] error: failed to run custom build command for `rustc_asan v0.0.0 (file:///checkout/src/librustc_asan)`\r\n[00:31:40] process didn't exit successfully: `/checkout/obj/build/x86_64-unknown-linux-gnu/stage1-std/release/build/rustc_asan-e947cddfbde6b9fa/build-script-build` (exit code: 101)\r\n[00:31:40] --- stdout\r\n[00:31:40] cargo:rerun-if-changed=/checkout/src/librustc_asan/../libcompiler_builtins/compiler-rt/CODE_OWNERS.TXT\r\n[00:31:40] cargo:rerun-if-changed=/checkout/src/librustc_asan/../libcompiler_builtins/compiler-rt/CREDITS.TXT\r\n...\r\n<snip>\r\n...\r\n[00:31:42] cargo:rerun-if-changed=/checkout/src/librustc_asan/../libcompiler_builtins/compiler-rt/www/content.css\r\n[00:31:42] cargo:rerun-if-changed=/checkout/src/librustc_asan/../libcompiler_builtins/compiler-rt/www/index.html\r\n[00:31:42] cargo:rustc-link-lib=static=clang_rt.asan-x86_64\r\n[00:31:42] cargo:rustc-link-search=native=/checkout/obj/build/x86_64-unknown-linux-gnu/native/asan/build/lib/linux\r\n[00:31:42] running: \"cmake\" \"/checkout/src/librustc_asan/../libcompiler_builtins/compiler-rt\" \"-DCOMPILER_RT_BUILD_SANITIZERS=ON\" \"-DCOMPILER_RT_BUILD_BUILTINS=OFF\" \"-DCOMPILER_RT_BUILD_XRAY=OFF\" \"-DLLVM_CONFIG_PATH=/checkout/obj/build/x86_64-unknown-linux-gnu/llvm/build/bin/llvm-config\" \"-DCMAKE_INSTALL_PREFIX=/checkout/obj/build/x86_64-unknown-linux-gnu/native/asan\" \"-DCMAKE_C_FLAGS= -ffunction-sections -fdata-sections -fPIC -ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu --target=x86_64-unknown-linux-gnu\" \"-DCMAKE_C_COMPILER=/rustroot/bin/clang\" \"-DCMAKE_CXX_FLAGS= -ffunction-sections -fdata-sections -fPIC -ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu --target=x86_64-unknown-linux-gnu\" \"-DCMAKE_CXX_COMPILER=/rustroot/bin/clang++\" \"-DCMAKE_BUILD_TYPE=Release\"\r\n[00:31:42] -- The C compiler identification is Clang 6.0.0\r\n[00:31:42] -- The CXX compiler identification is Clang 6.0.0\r\n...\r\n<snip>\r\n...\r\n[00:31:42] -- Performing Test HAS_THREAD_LOCAL\r\n[00:31:42] -- Performing Test HAS_THREAD_LOCAL - Success\r\n[00:31:42] -- Configuring done\r\n[00:31:42] -- Generating done\r\n[00:31:42] -- Build files have been written to: /checkout/obj/build/x86_64-unknown-linux-gnu/native/asan/build\r\n[00:31:42] running: \"cmake\" \"--build\" \".\" \"--target\" \"asan\" \"--config\" \"Release\" \"--\"\r\n[00:31:42] Scanning dependencies of target RTAsan_preinit.x86_64\r\n[00:31:42] [  0%] Building CXX object lib/asan/CMakeFiles/RTAsan_preinit.x86_64.dir/asan_preinit.cc.o\r\n[00:31:42] [  0%] Built target RTAsan_preinit.x86_64\r\n[00:31:42] Scanning dependencies of target RTSanitizerCommon.x86_64\r\n[00:31:42] [  0%] Building CXX object lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_allocator.cc.o\r\n[00:31:42] [  0%] Building CXX object lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_common.cc.o\r\n...\r\n<snip>\r\n...\r\n[00:31:43] Scanning dependencies of target RTAsan_dynamic_version_script_dummy.x86_64\r\n[00:31:43] [100%] Building CXX object lib/asan/CMakeFiles/RTAsan_dynamic_version_script_dummy.x86_64.dir/dummy.cc.o\r\n[00:31:43] [100%] Built target RTAsan_dynamic_version_script_dummy.x86_64\r\n[00:31:43]\r\n[00:31:43] --- stderr\r\n[00:31:43] /rustroot/bin/ld:/checkout/obj/build/x86_64-unknown-linux-gnu/native/asan/build/lib/asan/clang_rt.asan-dynamic-i386.vers:1399: syntax error in VERSION script\r\n[00:31:43] clang-6.0: error: linker command failed with exit code 1 (use -v to see invocation)\r\n[00:31:43] gmake[3]: *** [lib/linux/libclang_rt.asan-i386.so] Error 1\r\n[00:31:43] gmake[2]: *** [lib/asan/CMakeFiles/clang_rt.asan-dynamic-i386.dir/all] Error 2\r\n[00:31:43] gmake[2]: *** Waiting for unfinished jobs....\r\n[00:31:43] gmake[1]: *** [lib/asan/CMakeFiles/asan.dir/rule] Error 2\r\n[00:31:43] gmake: *** [asan] Error 2\r\n[00:31:43] thread 'main' panicked at '\r\n[00:31:43] command did not execute successfully, got: exit code: 2\r\n[00:31:43]\r\n[00:31:43] build script failed, must exit now', /cargo/registry/src/github.com-1ecc6299db9ec823/cmake-0.1.30/src/lib.rs:643:5\r\n[00:31:43] note: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\r\n\r\n</details>\r\n\r\nPrevious instances:\r\n\r\n* 2018-05-12T04:48:07Z: https://github.com/rust-lang/rust/pull/50352#issuecomment-388529766\r\n* 2018-05-19T06:24:09Z: https://github.com/rust-lang/rust/pull/50744#issuecomment-390383349\r\n\r\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50887/timeline", "performed_via_github_app": null, "state_reason": "completed"}