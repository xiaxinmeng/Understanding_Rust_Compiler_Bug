{"url": "https://api.github.com/repos/rust-lang/rust/issues/34997", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34997/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34997/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34997/events", "html_url": "https://github.com/rust-lang/rust/issues/34997", "id": 167198714, "node_id": "MDU6SXNzdWUxNjcxOTg3MTQ=", "number": 34997, "title": "Chained constant expressions causes stack overflow ", "user": {"login": "polazarus", "id": 186877, "node_id": "MDQ6VXNlcjE4Njg3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/186877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/polazarus", "html_url": "https://github.com/polazarus", "followers_url": "https://api.github.com/users/polazarus/followers", "following_url": "https://api.github.com/users/polazarus/following{/other_user}", "gists_url": "https://api.github.com/users/polazarus/gists{/gist_id}", "starred_url": "https://api.github.com/users/polazarus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/polazarus/subscriptions", "organizations_url": "https://api.github.com/users/polazarus/orgs", "repos_url": "https://api.github.com/users/polazarus/repos", "events_url": "https://api.github.com/users/polazarus/events{/privacy}", "received_events_url": "https://api.github.com/users/polazarus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 268744493, "node_id": "MDU6TGFiZWwyNjg3NDQ0OTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-fn", "name": "A-const-fn", "color": "f7e101", "default": false, "description": "Area: const fn foo(..) {..}. Pure functions which can be applied at compile time."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-07-23T19:12:41Z", "updated_at": "2018-03-08T11:33:51Z", "closed_at": "2018-03-08T11:33:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Rustc's constant expression evaluation overflows in stack while compiling this kind of code:\n\n``` rust\npub const CST_1: u32 = 0;\npub const CST_2: u32 = CST_1+1;\npub const CST_3: u32 = CST_2+1;\npub const CST_4: u32 = CST_3+1;\npub const CST_5: u32 = CST_4+1;\npub const CST_6: u32 = CST_5+1;\npub const CST_7: u32 = CST_6+1;\npub const CST_8: u32 = CST_7+1;\npub const CST_9: u32 = CST_8+1;\n//...\npub const CST_350: u32 = CST_349+1;\n```\n\nOn my machine (linux 64): ~350 constants on the chain is enough with rustc 1.10.0 (cfcb716cf 2016-10-03). What is quite troubling to me is that rustc seems to do the work for each constant and does not rely on previously computed results. One could think that Rust just always draws the short straw, but I tried random names and random order for my constants and got the same problem.\n\nAlso, on 1.12.0-nightly (936bfea94 2016-07-20) and 1.11.0-beta.1 (8dc253bcf 2016-07-05), there is no  stack overflow message just a painful silent abort (return code -1).\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34997/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34997/timeline", "performed_via_github_app": null, "state_reason": "completed"}