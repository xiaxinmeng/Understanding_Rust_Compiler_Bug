{"url": "https://api.github.com/repos/rust-lang/rust/issues/111901", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/111901/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/111901/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/111901/events", "html_url": "https://github.com/rust-lang/rust/issues/111901", "id": 1723551461, "node_id": "I_kwDOAAsO6M5mu07l", "number": 111901, "title": "rustc stage 2 and rsutup toolchain link fails with the path with white space", "user": {"login": "dupeiran001", "id": 57890209, "node_id": "MDQ6VXNlcjU3ODkwMjA5", "avatar_url": "https://avatars.githubusercontent.com/u/57890209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dupeiran001", "html_url": "https://github.com/dupeiran001", "followers_url": "https://api.github.com/users/dupeiran001/followers", "following_url": "https://api.github.com/users/dupeiran001/following{/other_user}", "gists_url": "https://api.github.com/users/dupeiran001/gists{/gist_id}", "starred_url": "https://api.github.com/users/dupeiran001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dupeiran001/subscriptions", "organizations_url": "https://api.github.com/users/dupeiran001/orgs", "repos_url": "https://api.github.com/users/dupeiran001/repos", "events_url": "https://api.github.com/users/dupeiran001/events{/privacy}", "received_events_url": "https://api.github.com/users/dupeiran001/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-24T09:24:32Z", "updated_at": "2023-05-24T12:42:41Z", "closed_at": "2023-05-24T12:42:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "although it's not recommended to use a path with white space\r\n\r\nI tried to compile my rustc stage 2, following [the guide](https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html).\r\n\r\nmy environment is macOS 13.4\r\n\r\nI have my dev dir in iCloud, which absolute path is : `/Users/xxx/Library/Mobile Documents/com~apple~CloudDocs/Develop`, has a white space in it.\r\n\r\nwhen trying to link to the rustup toolchain with command\r\n\r\n```\r\nrustup toolchain link stage1 build/host/stage1\r\n```\r\nit fails with message:\r\n\r\n```\r\nerror: not a file: 'build/host/stage1/bin/rustc'\r\n```\r\n\r\nthese all fail for linking stage0 or stage2\r\n\r\nbut it works well if I copy the whole dir to a non-spacing dir\r\n\r\nit's all the same to rustc compilation with command: \r\n\r\n```\r\n./x.py build --stage 2\r\n```\r\n\r\nwith error message:\r\n\r\n```\r\n Compiling rustc_smir v0.0.0 (/Users/dpr/Library/Mobile Documents/com~apple~CloudDocs/Develop/Rust/rust/compiler/rustc_smir)\r\nThe following warnings were emitted during compilation:\r\n\r\nwarning: clang: error: no such file or directory: 'Documents/com~apple~CloudDocs/Develop/Rust/rust/build/aarch64-apple-darwin/ci-llvm/include'\r\n\r\nerror: failed to run custom build command for `rustc_llvm v0.0.0 (/Users/dpr/Library/Mobile Documents/com~apple~CloudDocs/Develop/Rust/rust/compiler/rustc_llvm)`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/Users/dpr/Library/Mobile Documents/com~apple~CloudDocs/Develop/Rust/rust/build/aarch64-apple-darwin/stage0-rustc/release/build/rustc_llvm-e9be9ad0694a7cad/build-script-build` (exit status: 1)\r\n\r\n// with some other std out\r\n......\r\n\r\n```\r\nthe line staring with warning obviously prints only the latter parts of the dir after the space.\r\n\r\nI suppose maybe it fails to recognize the space in the path and separate it into two?", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/111901/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/111901/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}