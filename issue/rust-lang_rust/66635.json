{"url": "https://api.github.com/repos/rust-lang/rust/issues/66635", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66635/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66635/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66635/events", "html_url": "https://github.com/rust-lang/rust/issues/66635", "id": 527271322, "node_id": "MDU6SXNzdWU1MjcyNzEzMjI=", "number": 66635, "title": "Having no right to kill a subprocess after capturing the output", "user": {"login": "SchrodingerZhu", "id": 20108837, "node_id": "MDQ6VXNlcjIwMTA4ODM3", "avatar_url": "https://avatars.githubusercontent.com/u/20108837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SchrodingerZhu", "html_url": "https://github.com/SchrodingerZhu", "followers_url": "https://api.github.com/users/SchrodingerZhu/followers", "following_url": "https://api.github.com/users/SchrodingerZhu/following{/other_user}", "gists_url": "https://api.github.com/users/SchrodingerZhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/SchrodingerZhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SchrodingerZhu/subscriptions", "organizations_url": "https://api.github.com/users/SchrodingerZhu/orgs", "repos_url": "https://api.github.com/users/SchrodingerZhu/repos", "events_url": "https://api.github.com/users/SchrodingerZhu/events{/privacy}", "received_events_url": "https://api.github.com/users/SchrodingerZhu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-11-22T15:46:03Z", "updated_at": "2019-11-22T19:07:43Z", "closed_at": "2019-11-22T19:07:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "In order to capture the output, I need to partial move the fields of `stdout` and `stdin`. However, after partial moving these two fields I of course lose the right to kill the child process. Someone may argue that I shall be able to work around using mutable borrow of `stdout` and `stdin`, but in my case, the behaviors are not the same.\r\n\r\n```rust\r\nOk(mut child) => {\r\n                    {\r\n                        let mut input = child.stdin.expect(\"unable to get input\");\r\n                        input.write(crate::config::global_config().root_password.as_bytes()).unwrap();\r\n                        input.flush().unwrap();\r\n                    }\r\n                    let output =\r\n                        child.stdout.expect(\"unable to get output\");\r\n                    let mut buffer = Vec::new();\r\n                    buffer.resize(crate::config::global_config().submit_chunk_size, 0_u8);\r\n// something else\r\n                    output.read(buffer.as_mut())\r\n}\r\n```\r\nI tested out that if I use mutable borrow here, the program will somehow block there while the current partial moving method works fine. However, I cannot close the process on need with the current method. Is there a logic cycle here?", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66635/timeline", "performed_via_github_app": null, "state_reason": "completed"}