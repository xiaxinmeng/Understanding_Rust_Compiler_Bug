{"url": "https://api.github.com/repos/rust-lang/rust/issues/49382", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/49382/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/49382/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/49382/events", "html_url": "https://github.com/rust-lang/rust/issues/49382", "id": 308573946, "node_id": "MDU6SXNzdWUzMDg1NzM5NDY=", "number": 49382, "title": "Build the rust-std component for embedded targets", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 880020421, "node_id": "MDU6TGFiZWw4ODAwMjA0MjE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/WG-embedded", "name": "WG-embedded", "color": "c2e0c6", "default": false, "description": "Of interest to the embedded Working Group"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-03-26T13:33:18Z", "updated_at": "2018-06-21T22:56:06Z", "closed_at": "2018-06-21T22:55:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This is a P-high embedded-WG issue that needs to be fixed to make embedded Rust work on stable.\r\n\r\nTargets like `thumbv7m-none-eabi` need to use Xargo, which requires nightly, because there's no\r\npre-compiled `core` crate (i.e. `rustup target add thumbv7m-none-eabi` doesn't work).\r\n\r\nTo fastest way to remove this nightly dependency is to provide a `rust-std` component (pre-compiled\r\ncore) for the embedded targets. Then users would be able to use `rustup target thumbv7m-none-eabi;\r\ncargo build --target thumbv7m-none-eabi` for embedded development.\r\n\r\nThe embedded targets `rustc` currently supports are:\r\n\r\n- `thumbv6m-none-eabi`\r\n- `thumbv7m-none-eabi`\r\n- `thumbv7em-none-eabi`\r\n- `thumbv7em-none-eabihf`\r\n- `msp430-none-elf`\r\n\r\nThe Thumb targets have a more stable LLVM backend so we can commit to *always* building `core` for\r\nthat target. The MSP430 backend is slightly less stable so we don't want to block the PR pipeline if\r\nbuilding `core` for the MSP430 target breaks.\r\n\r\nThis issue can be split in two parts:\r\n\r\n- [x] Enabling `rust-std` builds for the 4 Thumb targets. Gating on `core` building for those targets.\r\n- [ ] Create some mechanism to let `core` / `std` build fail, and enable `rust-std` builds for the\r\n  MSP430 target. We won't gate on `core` building for the MSP430 target.\r\n\r\ncc @alexcrichton who can give more info about how to implement this\r\ncc @pftbest\r\n", "closed_by": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/49382/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 2, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/49382/timeline", "performed_via_github_app": null, "state_reason": "completed"}