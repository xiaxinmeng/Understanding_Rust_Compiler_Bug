{"url": "https://api.github.com/repos/rust-lang/rust/issues/20943", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20943/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20943/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20943/events", "html_url": "https://github.com/rust-lang/rust/issues/20943", "id": 53992264, "node_id": "MDU6SXNzdWU1Mzk5MjI2NA==", "number": 20943, "title": "Timer on windows is not Send + unhelpful compilation error", "user": {"login": "pfalabella", "id": 1331706, "node_id": "MDQ6VXNlcjEzMzE3MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1331706?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pfalabella", "html_url": "https://github.com/pfalabella", "followers_url": "https://api.github.com/users/pfalabella/followers", "following_url": "https://api.github.com/users/pfalabella/following{/other_user}", "gists_url": "https://api.github.com/users/pfalabella/gists{/gist_id}", "starred_url": "https://api.github.com/users/pfalabella/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pfalabella/subscriptions", "organizations_url": "https://api.github.com/users/pfalabella/orgs", "repos_url": "https://api.github.com/users/pfalabella/repos", "events_url": "https://api.github.com/users/pfalabella/events{/privacy}", "received_events_url": "https://api.github.com/users/pfalabella/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-11T13:50:48Z", "updated_at": "2015-01-22T08:54:33Z", "closed_at": "2015-01-22T08:54:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code:\n\n``` rust\nuse std::io::timer::Timer;\nuse std::thread::Thread;\nuse std::time::duration::Duration;\n\nfn main() {\n    let mut timer = Timer::new().unwrap();\n    Thread::spawn(move || {\n        timer.sleep(Duration::seconds(1));\n    });\n}\n```\n\ncompiles on Linux. On windows it fails to compile with:\n\n```\n$ rustc wintimer.rs\nwintimer.rs:7:5: 7:18 error: the trait `core::marker::Send` is not implemented for the type `*mut libc::types::common::c95::c_void`\nwintimer.rs:7     Thread::spawn(move || {\n                  ^~~~~~~~~~~~~\n```\n\nI'm not sure if different behavior of timer on different OSs is an issue or somewhat \"by design\". For me the real issue was the unhelpful error message, that exposes an implementation detail but does not point to the part of the code that is actually wrong (where is c_void in my code? It's deep in the gut of the windows implementation for timer).\n\n```\nrustc 1.0.0-nightly (44a287e6e 2015-01-08 17:03:40 -0800)\nbinary: rustc\ncommit-hash: 44a287e6eb22ec3c2a687fc156813577464017f7\ncommit-date: 2015-01-08 17:03:40 -0800\nhost: x86_64-pc-windows-gnu\nrelease: 1.0.0-nightly\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20943/timeline", "performed_via_github_app": null, "state_reason": "completed"}