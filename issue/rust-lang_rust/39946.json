{"url": "https://api.github.com/repos/rust-lang/rust/issues/39946", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39946/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39946/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39946/events", "html_url": "https://github.com/rust-lang/rust/issues/39946", "id": 208684748, "node_id": "MDU6SXNzdWUyMDg2ODQ3NDg=", "number": 39946, "title": "Enum associated functions can name-clash with variants, but cannot be called.", "user": {"login": "tekacs", "id": 63247, "node_id": "MDQ6VXNlcjYzMjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/63247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tekacs", "html_url": "https://github.com/tekacs", "followers_url": "https://api.github.com/users/tekacs/followers", "following_url": "https://api.github.com/users/tekacs/following{/other_user}", "gists_url": "https://api.github.com/users/tekacs/gists{/gist_id}", "starred_url": "https://api.github.com/users/tekacs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tekacs/subscriptions", "organizations_url": "https://api.github.com/users/tekacs/orgs", "repos_url": "https://api.github.com/users/tekacs/repos", "events_url": "https://api.github.com/users/tekacs/events{/privacy}", "received_events_url": "https://api.github.com/users/tekacs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-19T01:07:16Z", "updated_at": "2022-03-21T14:00:27Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "### Description\r\n\r\nIt's currently possible to name a function associated to an enum identically to the name of one of its variants.\r\n\r\nThis function cannot be called (see below), but rather than warning at the point that the function is defined, the compiler only emits an error upon trying to call said function (and in some cases - see the 'Alternate Reproduction' - it doesn't even do that).\r\n\r\nhttps://is.gd/EZQ9mL\r\n```rust\r\n#[derive(Debug)]\r\nenum X {\r\n    a\r\n}\r\nimpl X {\r\n    fn a() -> X {\r\n        X::a\r\n    }\r\n}\r\nfn main() {\r\n    println!(\"{:?}\", X::a())\r\n}\r\n```\r\n\r\nyields:\r\n\r\n```rust\r\nrustc 1.15.1 (021bd294c 2017-02-08)\r\nerror: `X::a` is being called, but it is not a function\r\n  --> <anon>:13:22\r\n   |\r\n13 |     println!(\"{:?}\", X::a())\r\n   |                      ^^^^^^\r\n   |\r\n   = help: did you mean to write `X::a`?\r\nnote: defined here\r\n  --> <anon>:3:5\r\n   |\r\n3  |     a\r\n   |     ^\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\n### Expected behaviour:\r\n\r\nEmit an error at the point (`fn a() -> X`) that the function is defined.\r\n\r\n### Alternate reproduction\r\n\r\nEven more confusing is the code:\r\n\r\nhttps://is.gd/S15gOw\r\n```rust\r\n#[derive(Debug)]\r\nenum X {\r\n    a(),\r\n    b,\r\n}\r\n\r\nimpl X {\r\n    fn a() -> X {\r\n        X::b\r\n    }\r\n}\r\n\r\nfn main() {\r\n    println!(\"{:?}\", X::a())\r\n}\r\n```\r\n\r\nThis compiles and runs.\r\nAny guesses whether the variant or the function wins? :smile:", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39946/timeline", "performed_via_github_app": null, "state_reason": null}