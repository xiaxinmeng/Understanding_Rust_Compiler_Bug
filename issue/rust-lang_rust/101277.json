{"url": "https://api.github.com/repos/rust-lang/rust/issues/101277", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101277/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101277/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101277/events", "html_url": "https://github.com/rust-lang/rust/issues/101277", "id": 1358721363, "node_id": "I_kwDOAAsO6M5Q_HFT", "number": 101277, "title": "droping mutability of mutable addresses", "user": {"login": "ozkanonur", "id": 39852038, "node_id": "MDQ6VXNlcjM5ODUyMDM4", "avatar_url": "https://avatars.githubusercontent.com/u/39852038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ozkanonur", "html_url": "https://github.com/ozkanonur", "followers_url": "https://api.github.com/users/ozkanonur/followers", "following_url": "https://api.github.com/users/ozkanonur/following{/other_user}", "gists_url": "https://api.github.com/users/ozkanonur/gists{/gist_id}", "starred_url": "https://api.github.com/users/ozkanonur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ozkanonur/subscriptions", "organizations_url": "https://api.github.com/users/ozkanonur/orgs", "repos_url": "https://api.github.com/users/ozkanonur/repos", "events_url": "https://api.github.com/users/ozkanonur/events{/privacy}", "received_events_url": "https://api.github.com/users/ozkanonur/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-09-01T11:51:39Z", "updated_at": "2022-09-01T14:59:40Z", "closed_at": "2022-09-01T14:59:40Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Since Rust provides bunch of useful macros, what about providing this one as well?\r\n\r\n```rs\r\nmacro_rules! drop_mutability {\r\n    ($t: ident) => { let $t = $t; };\r\n}\r\n```\r\nThis is useful for preventing invalid data assignment to the mutable addresses in large code blocks. If there will any data assignment happen after droping mutability, we will be informed by the compiler error without facing with logical bugs on runtime. Since no extra `drop_in_place` getting called, I suppose this macro can be called zero-cost functionality.\r\n\r\nExample use case:\r\n```rs\r\nlet mut x = 10;\r\n.\r\n.\r\nx = 1;\r\ndrop_mutability(x); // End the mutability since there is no longer needed\r\n.\r\n.\r\n.\r\n.\r\n.\r\nOk(())\r\n```\r\n\r\nPlease let me know if this is acceptable. If so, I can prepare the PR.", "closed_by": {"login": "ozkanonur", "id": 39852038, "node_id": "MDQ6VXNlcjM5ODUyMDM4", "avatar_url": "https://avatars.githubusercontent.com/u/39852038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ozkanonur", "html_url": "https://github.com/ozkanonur", "followers_url": "https://api.github.com/users/ozkanonur/followers", "following_url": "https://api.github.com/users/ozkanonur/following{/other_user}", "gists_url": "https://api.github.com/users/ozkanonur/gists{/gist_id}", "starred_url": "https://api.github.com/users/ozkanonur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ozkanonur/subscriptions", "organizations_url": "https://api.github.com/users/ozkanonur/orgs", "repos_url": "https://api.github.com/users/ozkanonur/repos", "events_url": "https://api.github.com/users/ozkanonur/events{/privacy}", "received_events_url": "https://api.github.com/users/ozkanonur/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101277/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101277/timeline", "performed_via_github_app": null, "state_reason": "completed"}