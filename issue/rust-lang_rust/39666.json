{"url": "https://api.github.com/repos/rust-lang/rust/issues/39666", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39666/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39666/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39666/events", "html_url": "https://github.com/rust-lang/rust/issues/39666", "id": 206373092, "node_id": "MDU6SXNzdWUyMDYzNzMwOTI=", "number": 39666, "title": "Explanation of Box in documentation is confusing", "user": {"login": "vchekan", "id": 106474, "node_id": "MDQ6VXNlcjEwNjQ3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/106474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vchekan", "html_url": "https://github.com/vchekan", "followers_url": "https://api.github.com/users/vchekan/followers", "following_url": "https://api.github.com/users/vchekan/following{/other_user}", "gists_url": "https://api.github.com/users/vchekan/gists{/gist_id}", "starred_url": "https://api.github.com/users/vchekan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vchekan/subscriptions", "organizations_url": "https://api.github.com/users/vchekan/orgs", "repos_url": "https://api.github.com/users/vchekan/repos", "events_url": "https://api.github.com/users/vchekan/events{/privacy}", "received_events_url": "https://api.github.com/users/vchekan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-02-09T00:56:06Z", "updated_at": "2017-02-09T16:04:00Z", "closed_at": "2017-02-09T16:04:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "In documentation on Box type\r\nhttps://doc.rust-lang.org/book/choosing-your-guarantees.html#boxt\r\n\r\n> Here, the box was moved into y. As x no longer owns it, the compiler will no longer allow the programmer to use x after this. A box can similarly be moved out of a function by returning it.\r\n\r\nAny object, not just a box will be destructed when out of scope. Any moved binding will not be allowed to be used. What Box has to do with it?\r\n\r\nLast sentence is even more puzzling. What is \"it\", a function? Then sentence makes no sense \"moved out of function by returning function\". If \"it\" is not a function, than what?\r\n\r\n> This is a zero-cost abstraction for dynamic allocation. \r\n\r\nWait, what does it have to do with dynamic allocation? This comes out of the blue without any logical introduction.\r\n\r\n> If you want to allocate some memory on the heap and safely pass around a pointer to that memory, this is ideal\r\n\r\nAgain, no explanation, just some puzzling claims. where are pointers, how and why allocate memory, why pointer is safe now, how possibly pointer can be safe without storing size of allocated memory?\r\n\r\nBottom line is, after reading Box section I have no more understanding of Box than I had before reading it. After looking at source code, I start suspecting that `let x = Box::new(1);`will allocate \"1\" in heap, but there is nothing in the documentation which would say it explicitly. If so, what exactly will happen in given example, memory allocate for \"1\" and copy value, or just store pointer to existing \"1\" value?. Also I see \"box\" operator in Box implementation, what this is?", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39666/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39666/timeline", "performed_via_github_app": null, "state_reason": "completed"}