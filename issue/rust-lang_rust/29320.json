{"url": "https://api.github.com/repos/rust-lang/rust/issues/29320", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29320/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29320/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29320/events", "html_url": "https://github.com/rust-lang/rust/issues/29320", "id": 113335709, "node_id": "MDU6SXNzdWUxMTMzMzU3MDk=", "number": 29320, "title": "ICE: thread 'rustc' panicked at 'index out of bounds: the len is 8 but the index is 10', src/libcollections/vec.rs:1261", "user": {"login": "pablocouto", "id": 526124, "node_id": "MDQ6VXNlcjUyNjEyNA==", "avatar_url": "https://avatars.githubusercontent.com/u/526124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pablocouto", "html_url": "https://github.com/pablocouto", "followers_url": "https://api.github.com/users/pablocouto/followers", "following_url": "https://api.github.com/users/pablocouto/following{/other_user}", "gists_url": "https://api.github.com/users/pablocouto/gists{/gist_id}", "starred_url": "https://api.github.com/users/pablocouto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pablocouto/subscriptions", "organizations_url": "https://api.github.com/users/pablocouto/orgs", "repos_url": "https://api.github.com/users/pablocouto/repos", "events_url": "https://api.github.com/users/pablocouto/events{/privacy}", "received_events_url": "https://api.github.com/users/pablocouto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-10-26T11:27:34Z", "updated_at": "2015-11-12T08:08:51Z", "closed_at": "2015-11-12T08:08:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following code produces an ICE with rustc 1.3.0 ([playpen](http://is.gd/ijXVph)):\n\n``` rust\nfn main() {\n    let mut v = vec![];\n    let r: &&mut Vec<i32> = &mut v;\n}\n```\n\nThis is the output of `RUST_BACKTRACE=1 rustc panics.rs`:\n\n```\npanics.rs:3:29: 3:35 error: mismatched types:\n expected `&&mut collections::vec::Vec<i32>`,\n    found `&mut collections::vec::Vec<_>`\n(expected &-ptr,\n    found struct `collections::vec::Vec`) [E0308]\npanics.rs:3     let r: &&mut Vec<i32> = &mut v;\n                                        ^~~~~~\npanics.rs:3:29: 3:35 help: run `rustc --explain E0308` to see a detailed explanation\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'index out of bounds: the len is 8 but the index is 10', src/libcollections/vec.rs:1261\n\nstack backtrace:\n   1:     0x7f54c99bf66e - sys::backtrace::write::ha67a6a2049d22fadIvs\n   2:     0x7f54c99c7d55 - panicking::on_panic::hfa4bf0215983f759lzx\n   3:     0x7f54c998894e - rt::unwind::begin_unwind_inner::ha1b5da93bdf7e8ffC0w\n   4:     0x7f54c99896b6 - rt::unwind::begin_unwind_fmt::hac9e09b20e42a51cIZw\n   5:     0x7f54c99c78f6 - rust_begin_unwind\n   6:     0x7f54c9a0eb64 - panicking::panic_fmt::hd75b6cee85f3afe4SgC\n   7:     0x7f54c9a09b27 - panicking::panic_bounds_check::h75be7bf05a80539eYfC\n   8:     0x7f54c7a8d4c6 - middle::infer::freshen::TypeFreshener<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::hc9c9eb98be33b949RaA\n   9:     0x7f54c7a8e72c - middle::ty_fold::TypeFolder::fold_substs::h2722752635261880804\n  10:     0x7f54c79f65be - middle::traits::select::SelectionContext<'cx, 'tcx>::select::h1f87e60efc15a3ecM9T\n  11:     0x7f54c7b07b32 - middle::traits::fulfill::process_predicate::hb3b7f7641fd49fc3S4R\n  12:     0x7f54c7b062d1 - middle::traits::fulfill::FulfillmentContext<'tcx>::select::h79dd37a3da2ede60kYR\n  13:     0x7f54c7b05de7 - middle::traits::fulfill::FulfillmentContext<'tcx>::select_where_possible::h655917464134b2c15WR\n  14:     0x7f54c91ad9a6 - check::FnCtxt<'a, 'tcx>::select_obligations_where_possible::h95b463f889462e983Ap\n  15:     0x7f54c919ffb3 - check::FnCtxt<'a, 'tcx>::select_all_obligations_and_apply_defaults::h3ad48213dc81f2c2ilp\n  16:     0x7f54c919d563 - check::check_bare_fn::hea668edfab6ab1e7Hyn\n  17:     0x7f54c919b755 - check::check_item_body::h65a80a5fa29972acHYn\n  18:     0x7f54c919d184 - check::check_item_types::he8badf30eb589763ewn\n  19:     0x7f54c925cbab - check_crate::h341139d405597625laD\n  20:     0x7f54c9f27199 - driver::phase_3_run_analysis_passes::closure.16542\n  21:     0x7f54c9f25ab1 - middle::ty::ctxt<'tcx>::create_and_enter::h9578579149294230291\n  22:     0x7f54c9f20991 - driver::phase_3_run_analysis_passes::h8415522514568150077\n  23:     0x7f54c9f04a90 - driver::compile_input::h52c7dafd49963360Tba\n  24:     0x7f54c9feaa63 - run_compiler::h473c62e00f865fa9A7b\n  25:     0x7f54c9fe84de - boxed::F.FnBox<A>::call_box::h10713159552398332324\n  26:     0x7f54c9fe7e09 - rt::unwind::try::try_fn::h16887904248528792425\n  27:     0x7f54c99c784d - __rust_try\n  28:     0x7f54c99b28f7 - rt::unwind::try::inner_try::hafffff77ddacfa5fvWw\n  29:     0x7f54c9fe8028 - boxed::F.FnBox<A>::call_box::h5417278073590676257\n  30:     0x7f54c99c6991 - sys::thread::Thread::new::thread_start::h29dca2a2cf2294b535v\n  31:     0x7f54c423e4a3 - start_thread\n  32:     0x7f54c962013c - clone\n  33:                0x0 - <unknown>\n```\n## Meta\n\n```\nrustc 1.3.0\nbinary: rustc\ncommit-hash: unknown\ncommit-date: unknown\nhost: x86_64-unknown-linux-gnu\nrelease: 1.3.0\n```\n", "closed_by": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29320/timeline", "performed_via_github_app": null, "state_reason": "completed"}