{"url": "https://api.github.com/repos/rust-lang/rust/issues/98076", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98076/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98076/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98076/events", "html_url": "https://github.com/rust-lang/rust/issues/98076", "id": 1270055613, "node_id": "I_kwDOAAsO6M5Ls4K9", "number": 98076, "title": "LLVM assertion failed when attempting to install cargo-criterion", "user": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2022-06-13T23:06:53Z", "updated_at": "2022-08-30T12:56:45Z", "closed_at": "2022-08-30T12:56:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I install all my utilities in a bit of a unique setup with the goal of finding bugs. Perhaps like this one. I pull the latest rust commit, set\r\n```\r\n[llvm]\r\nassertions = true\r\n```\r\nAnd run `x build`, with a custom toolchain set up called `master-stage1` to the stage1 artifacts. Then I install utilities with this:\r\n```\r\nRUSTFLAGS=\"-Ccodegen-units=1 -Cforce-frame-pointers=yes -Cembed-bitcode=yes -Clto=fat -Cpanic=abort\" cargo +master-stage1 install --target=x86_64-unknown-linux-gnu\r\n```\r\nA long list of binary crates follows. But currently, `cargo-criterion` does not build. I see this error:\r\n```\r\n   Compiling cargo-criterion v1.1.0\r\nrustc: /checkout/src/llvm-project/llvm/lib/Analysis/InstructionPrecedenceTracking.cpp:99: void llvm::InstructionPrecedenceTracking::validate(const llvm::BasicBlock *) const: Assertion `It->second == nullptr && \"Block is marked as having special instructions but in fact it  has \" \"none!\"' failed.\r\nerror: could not compile `cargo-criterion`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name cargo_criterion --edition=2018 /home/ben/.cargo/registry/src/github.com-1ecc6299db9ec823/cargo-criterion-1.1.0/src/main.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type bin --emit=dep-info,link -C opt-level=3 -C embed-bitcode=no --cfg 'feature=\"criterion-plot\"' --cfg 'feature=\"default\"' --cfg 'feature=\"gnuplot_backend\"' --cfg 'feature=\"plotters\"' --cfg 'feature=\"plotters_backend\"' -C metadata=841c971ccd0a44a3 -C extra-filename=-841c971ccd0a44a3 --out-dir /tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps -L dependency=/tmp/cargo-installoHM8Uc/release/deps --extern anyhow=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libanyhow-335a02709795f7b3.rlib --extern atty=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libatty-e9a1e5205ef9284d.rlib --extern cast=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libcast-34b92d6be5760477.rlib --extern chrono=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libchrono-b483049206357f3a.rlib --extern clap=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libclap-c9cdd34a3f4c6d02.rlib --extern criterion_plot=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libcriterion_plot-00640a548f2ff1ec.rlib --extern lazy_static=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/liblazy_static-c62a2588d1d86244.rlib --extern linked_hash_map=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/liblinked_hash_map-75eeecf61eb4b9da.rlib --extern linked_hash_set=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/liblinked_hash_set-c9e7cbacc23d6223.rlib --extern log=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/liblog-6e3df9f143c1cedb.rlib --extern num_traits=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libnum_traits-2a41da9f08d9fba1.rlib --extern oorandom=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/liboorandom-eded64dc41f41e73.rlib --extern plotters=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libplotters-ead05f4c4043b836.rlib --extern rayon=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/librayon-89e2e2f93bae27d8.rlib --extern serde=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libserde-741824d90db71d25.rlib --extern serde_cbor=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libserde_cbor-3f1d61b2ede8f0c7.rlib --extern serde_derive=/tmp/cargo-installoHM8Uc/release/deps/libserde_derive-e7cd7a8d6adf4e7d.so --extern serde_json=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libserde_json-01455dc3926f0c27.rlib --extern simplelog=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libsimplelog-c293988276fa4483.rlib --extern tinytemplate=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libtinytemplate-47711e5eabc0b1d6.rlib --extern toml=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libtoml-2974066f02f64691.rlib --extern walkdir=/tmp/cargo-installoHM8Uc/x86_64-unknown-linux-gnu/release/deps/libwalkdir-4bd511db30d7d618.rlib --cap-lints allow -Ccodegen-units=1 -Cforce-frame-pointers=yes -Cembed-bitcode=yes -Clto=fat -Cpanic=abort` (signal: 6, SIGABRT: process abort signal)\r\nerror: failed to compile `cargo-criterion v1.1.0`, intermediate artifacts can be found at `/tmp/cargo-installoHM8Uc`\r\n```\r\nI would attach the intermediate artifacts, but as a `.tar.gz` they exceed the GitHub file size limit, and GitHub is rejecting my attempt to upload a `.tar.xz`. Do let me know if there is some file in particular that would be helpful.", "closed_by": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98076/timeline", "performed_via_github_app": null, "state_reason": "completed"}