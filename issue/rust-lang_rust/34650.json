{"url": "https://api.github.com/repos/rust-lang/rust/issues/34650", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34650/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34650/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34650/events", "html_url": "https://github.com/rust-lang/rust/issues/34650", "id": 163742105, "node_id": "MDU6SXNzdWUxNjM3NDIxMDU=", "number": 34650, "title": "Fail to build compiler-rt", "user": {"login": "JustAPerson", "id": 789308, "node_id": "MDQ6VXNlcjc4OTMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/789308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JustAPerson", "html_url": "https://github.com/JustAPerson", "followers_url": "https://api.github.com/users/JustAPerson/followers", "following_url": "https://api.github.com/users/JustAPerson/following{/other_user}", "gists_url": "https://api.github.com/users/JustAPerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/JustAPerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JustAPerson/subscriptions", "organizations_url": "https://api.github.com/users/JustAPerson/orgs", "repos_url": "https://api.github.com/users/JustAPerson/repos", "events_url": "https://api.github.com/users/JustAPerson/events{/privacy}", "received_events_url": "https://api.github.com/users/JustAPerson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36953, "node_id": "MDU6TGFiZWwzNjk1Mw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-runtime", "name": "A-runtime", "color": "f7e101", "default": false, "description": "Area: std's runtime and \"pre-main\" init for handling backtraces, unwinds, stack overflows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-07-04T20:59:51Z", "updated_at": "2017-02-11T00:27:23Z", "closed_at": "2017-02-11T00:27:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Trying to build a minimal set of rust libraries to link against for cross compiling to a 32 bit host.\n\n```\n./configure --enable-rustbuild --target=i686-unknown-linux-gnu\npython src/bootstrap/bootstrap.py --stage 0 --step libstd --target i686-unknown-linux-gnu\n```\n\nThings look okay until trying to build `compiler-rt`\n\n```\ncargo:root=/Users/jason/prog/lang/rust/vos/etc/rust/build/x86_64-apple-darwin/llvm\nrunning: \"cmake\" \"/Users/jason/prog/lang/rust/vos/etc/rust/src/compiler-rt\" \"-DLLVM_CONFIG_PATH=/Users/jason/prog/lang/rust/vos/etc/rust/build/x86_64-apple-darwin/llvm/bin/llvm-config\" \"-DCOMPILER_RT_DEFAULT_TARGET_TRIPLE=i686-unknown-linux-gnu\" \"-DCOMPILER_RT_BUILD_SANITIZERS=OFF\" \"-DCOMPILER_RT_BUILD_EMUTLS=OFF\" \"-DCMAKE_C_COMPILER=cc\" \"-DCMAKE_CXX_COMPILER=cc\" \"-DCMAKE_INSTALL_PREFIX=/Users/jason/prog/lang/rust/vos/etc/rust/build/i686-unknown-linux-gnu/compiler-rt\" \"-DCMAKE_C_FLAGS= -O0 -ffunction-sections -fdata-sections -m32\" \"-DCMAKE_CXX_FLAGS= -O0 -ffunction-sections -fdata-sections -m32\" \"-DCMAKE_BUILD_TYPE=Release\"\n-- The C compiler identification is AppleClang 7.0.2.7000181\n-- The CXX compiler identification is AppleClang 7.0.2.7000181\n-- The ASM compiler identification is AppleClang\n-- Found assembler: /Library/Developer/CommandLineTools/usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/cc\n-- Check for working CXX compiler: /usr/bin/cc -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Found PythonInterp: /usr/local/bin/python2.7 (found version \"2.7.11\")\n-- Looking for unwind.h\n-- Looking for unwind.h - found\n-- Performing Test COMPILER_RT_HAS_FPIC_FLAG\n-- Performing Test COMPILER_RT_HAS_FPIC_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FPIE_FLAG\n-- Performing Test COMPILER_RT_HAS_FPIE_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FNO_BUILTIN_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_BUILTIN_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FNO_EXCEPTIONS_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_EXCEPTIONS_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FOMIT_FRAME_POINTER_FLAG\n-- Performing Test COMPILER_RT_HAS_FOMIT_FRAME_POINTER_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FUNWIND_TABLES_FLAG\n-- Performing Test COMPILER_RT_HAS_FUNWIND_TABLES_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FNO_STACK_PROTECTOR_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_STACK_PROTECTOR_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FNO_SANITIZE_SAFE_STACK_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_SANITIZE_SAFE_STACK_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_FVISIBILITY_HIDDEN_FLAG\n-- Performing Test COMPILER_RT_HAS_FVISIBILITY_HIDDEN_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FNO_RTTI_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_RTTI_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FFREESTANDING_FLAG\n-- Performing Test COMPILER_RT_HAS_FFREESTANDING_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_FNO_FUNCTION_SECTIONS_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_FUNCTION_SECTIONS_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_STD_CXX11_FLAG\n-- Performing Test COMPILER_RT_HAS_STD_CXX11_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FTLS_MODEL_INITIAL_EXEC\n-- Performing Test COMPILER_RT_HAS_FTLS_MODEL_INITIAL_EXEC - Success\n-- Performing Test COMPILER_RT_HAS_FNO_LTO_FLAG\n-- Performing Test COMPILER_RT_HAS_FNO_LTO_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_MSSE3_FLAG\n-- Performing Test COMPILER_RT_HAS_MSSE3_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_STD_C99_FLAG\n-- Performing Test COMPILER_RT_HAS_STD_C99_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_SYSROOT_FLAG\n-- Performing Test COMPILER_RT_HAS_SYSROOT_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_FVISIBILITY_INLINES_HIDDEN_FLAG\n-- Performing Test COMPILER_RT_HAS_FVISIBILITY_INLINES_HIDDEN_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_GR_FLAG\n-- Performing Test COMPILER_RT_HAS_GR_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_GS_FLAG\n-- Performing Test COMPILER_RT_HAS_GS_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_MT_FLAG\n-- Performing Test COMPILER_RT_HAS_MT_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_Oy_FLAG\n-- Performing Test COMPILER_RT_HAS_Oy_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_GLINE_TABLES_ONLY_FLAG\n-- Performing Test COMPILER_RT_HAS_GLINE_TABLES_ONLY_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_G_FLAG\n-- Performing Test COMPILER_RT_HAS_G_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_Zi_FLAG\n-- Performing Test COMPILER_RT_HAS_Zi_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WALL_FLAG\n-- Performing Test COMPILER_RT_HAS_WALL_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WERROR_FLAG\n-- Performing Test COMPILER_RT_HAS_WERROR_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WFRAME_LARGER_THAN_FLAG\n-- Performing Test COMPILER_RT_HAS_WFRAME_LARGER_THAN_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WGLOBAL_CONSTRUCTORS_FLAG\n-- Performing Test COMPILER_RT_HAS_WGLOBAL_CONSTRUCTORS_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WC99_EXTENSIONS_FLAG\n-- Performing Test COMPILER_RT_HAS_WC99_EXTENSIONS_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WGNU_FLAG\n-- Performing Test COMPILER_RT_HAS_WGNU_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WNON_VIRTUAL_DTOR_FLAG\n-- Performing Test COMPILER_RT_HAS_WNON_VIRTUAL_DTOR_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_WVARIADIC_MACROS_FLAG\n-- Performing Test COMPILER_RT_HAS_WVARIADIC_MACROS_FLAG - Success\n-- Performing Test COMPILER_RT_HAS_W3_FLAG\n-- Performing Test COMPILER_RT_HAS_W3_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WX_FLAG\n-- Performing Test COMPILER_RT_HAS_WX_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WD4146_FLAG\n-- Performing Test COMPILER_RT_HAS_WD4146_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WD4291_FLAG\n-- Performing Test COMPILER_RT_HAS_WD4291_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WD4391_FLAG\n-- Performing Test COMPILER_RT_HAS_WD4391_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WD4722_FLAG\n-- Performing Test COMPILER_RT_HAS_WD4722_FLAG - Failed\n-- Performing Test COMPILER_RT_HAS_WD4800_FLAG\n-- Performing Test COMPILER_RT_HAS_WD4800_FLAG - Failed\n-- Looking for __func__\n-- Looking for __func__ - found\n-- Looking for fopen in c\n-- Looking for fopen in c - found\n-- Looking for dlopen in dl\n-- Looking for dlopen in dl - found\n-- Looking for shm_open in rt\n-- Looking for shm_open in rt - not found\n-- Looking for pow in m\n-- Looking for pow in m - found\n-- Looking for pthread_create in pthread\n-- Looking for pthread_create in pthread - found\n-- Looking for __cxa_throw in stdc++\n-- Looking for __cxa_throw in stdc++ - found\n-- Performing Test COMPILER_RT_HAS_APP_EXTENSION\n-- Performing Test COMPILER_RT_HAS_APP_EXTENSION - Success\n-- Got ld supported ARCHES: armv6 armv7 armv7s arm64 i386 x86_64 x86_64h armv6m armv7k armv7m armv7em (tvOS)\n-- Toolchain supported arches: armv6;armv7;armv7s;arm64;i386;x86_64;x86_64h;armv6m;armv7k;armv7m;armv7em;(tvOS)\n-- Finding valid architectures for osx...\n-- OSX supported arches: i386;x86_64;x86_64h\n-- Finding valid architectures for 10.4...\n-- OSX 10.4 supported arches:\n-- Compiler-RT supported architectures: i386;x86_64;x86_64h\n-- Configuring done\n-- Generating done\nCMake Warning:\n  Manually-specified variables were not used by the project:\n\n    COMPILER_RT_BUILD_EMUTLS\n\n\n-- Build files have been written to: /Users/jason/prog/lang/rust/vos/etc/rust/build/i686-unknown-linux-gnu/compiler-rt/build\nrunning: \"cmake\" \"--build\" \".\" \"--target\" \"clang_rt.builtins-i686\" \"--config\" \"Release\" \"--\"\nmake[1]: *** No rule to make target `clang_rt.builtins-i686'.  Stop.\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34650/timeline", "performed_via_github_app": null, "state_reason": "completed"}