{"url": "https://api.github.com/repos/rust-lang/rust/issues/43727", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/43727/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/43727/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/43727/events", "html_url": "https://github.com/rust-lang/rust/issues/43727", "id": 248584300, "node_id": "MDU6SXNzdWUyNDg1ODQzMDA=", "number": 43727, "title": "ICE: no type for node", "user": {"login": "tones111", "id": 828656, "node_id": "MDQ6VXNlcjgyODY1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/828656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tones111", "html_url": "https://github.com/tones111", "followers_url": "https://api.github.com/users/tones111/followers", "following_url": "https://api.github.com/users/tones111/following{/other_user}", "gists_url": "https://api.github.com/users/tones111/gists{/gist_id}", "starred_url": "https://api.github.com/users/tones111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tones111/subscriptions", "organizations_url": "https://api.github.com/users/tones111/orgs", "repos_url": "https://api.github.com/users/tones111/repos", "events_url": "https://api.github.com/users/tones111/events{/privacy}", "received_events_url": "https://api.github.com/users/tones111/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-08-08T02:38:07Z", "updated_at": "2017-08-10T15:01:36Z", "closed_at": "2017-08-10T15:01:36Z", "author_association": "NONE", "active_lock_reason": null, "body": "While in the course of writing some code I happened across the following ICE when running cargo check with the current stable version of the compiler.  I tried the same on a nightly build and got the same error.\r\n\r\nThis code is not at all anything I'd consider remotely presentable, but it seems attempts to try and minimize don't trigger the ICE.  Similarly, fixing either of the compilation errors prior to the ICE also prevent its occurrence.  This leads me to think this is some wild corner case, but hopefully will be useful.\r\n\r\nstable compiler: rustc 1.19.0 (0ade33941 2017-07-17)\r\nnightly compiler: rustc 1.20.0-nightly (ae98ebfcb 2017-07-20)\r\n\r\n$ uname -a\r\nLinux mogul 4.12.4-1-ARCH #1 SMP PREEMPT Fri Jul 28 18:54:18 UTC 2017 x86_64 GNU/Linux\r\n\r\nPlease let me know if you are unable to reproduce.  Thanks\r\n[rustic.zip](https://github.com/rust-lang/rust/files/1206748/rustic.zip)\r\n\r\nError:\r\nerror: internal compiler error: /checkout/src/librustc_typeck/check/mod.rs:1984: no type for node 443: expr Err(::fmt::format(<::std::fmt::Arguments>::new_v1({\r\n                                                      static __STATIC_FMTSTR:\r\n                                                             &'static [&'static str]\r\n                                                             =\r\n                                                          &[\"not implemented (\",\r\n                                                            \":\", \")\"];\r\n                                                      __STATIC_FMTSTR\r\n                                                  },\r\n                                                  &match (&\"src/git/repo.rs\",\r\n                                                          &47u32) {\r\n                                                       (__arg0, __arg1) =>\r\n                                                       [<::std::fmt::ArgumentV1>::new(__arg0,\r\n                                                                                      ::std::fmt::Display::fmt),\r\n                                                        <::std::fmt::ArgumentV1>::new(__arg1,\r\n                                                                                      ::std::fmt::Display::fmt)],\r\n                                                   })).into()) (id=443) in fcx 0x7fce723f36e0\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.20.0-nightly (ae98ebfcb 2017-07-20) running on x86_64-unknown-linux-gnu\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /checkout/src/librustc_errors/lib.rs:489:8\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nstack backtrace:\r\n   0: std::sys::imp::backtrace::tracing::imp::unwind_backtrace\r\n             at /checkout/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::_print\r\n             at /checkout/src/libstd/sys_common/backtrace.rs:71\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at /checkout/src/libstd/sys_common/backtrace.rs:60\r\n             at /checkout/src/libstd/panicking.rs:380\r\n   3: std::panicking::default_hook\r\n             at /checkout/src/libstd/panicking.rs:390\r\n   4: std::panicking::rust_panic_with_hook\r\n             at /checkout/src/libstd/panicking.rs:611\r\n   5: std::panicking::begin_panic_new\r\n   6: rustc_errors::Handler::bug\r\n   7: rustc::session::opt_span_bug_fmt::{{closure}}\r\n   8: rustc::session::opt_span_bug_fmt\r\n   9: rustc::session::bug_fmt\r\n  10: rustc_typeck::check::FnCtxt::node_ty\r\n  11: <rustc_typeck::check::regionck::RegionCtxt<'a, 'gcx, 'tcx> as rustc::hir::intravisit::Visitor<'gcx>>::visit_expr\r\n  12: <rustc_typeck::check::regionck::RegionCtxt<'a, 'gcx, 'tcx> as rustc::hir::intravisit::Visitor<'gcx>>::visit_expr\r\n  13: rustc::hir::intravisit::walk_expr\r\n  14: <rustc_typeck::check::regionck::RegionCtxt<'a, 'gcx, 'tcx> as rustc::hir::intravisit::Visitor<'gcx>>::visit_expr\r\n  15: rustc_typeck::check::regionck::RegionCtxt::visit_fn_body\r\n  16: rustc_typeck::check::typeck_tables_of::{{closure}}\r\n  17: rustc_typeck::check::typeck_tables_of\r\n  18: rustc::dep_graph::graph::DepGraph::with_task\r\n  19: rustc::ty::maps::<impl rustc::ty::maps::queries::typeck_tables_of<'tcx>>::try_get\r\n  20: rustc::ty::maps::TyCtxtAt::typeck_tables_of\r\n  21: rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::typeck_tables_of\r\n  22: rustc_typeck::check::typeck_item_bodies\r\n  23: rustc::dep_graph::graph::DepGraph::with_task\r\n  24: rustc::ty::maps::<impl rustc::ty::maps::queries::typeck_item_bodies<'tcx>>::try_get\r\n  25: rustc::ty::maps::TyCtxtAt::typeck_item_bodies\r\n  26: rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::typeck_item_bodies\r\n  27: rustc_typeck::check_crate\r\n  28: rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}\r\n  29: rustc_driver::driver::phase_3_run_analysis_passes\r\n  30: rustc_driver::driver::compile_input\r\n  31: rustc_driver::run_compiler\r\n\r\n\r\n\r\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/43727/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/43727/timeline", "performed_via_github_app": null, "state_reason": "completed"}