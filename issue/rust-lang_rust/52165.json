{"url": "https://api.github.com/repos/rust-lang/rust/issues/52165", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52165/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52165/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52165/events", "html_url": "https://github.com/rust-lang/rust/issues/52165", "id": 339267665, "node_id": "MDU6SXNzdWUzMzkyNjc2NjU=", "number": 52165, "title": "Cannot connect to abstract unix domain socket", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-08T23:28:14Z", "updated_at": "2018-08-05T16:53:55Z", "closed_at": "2018-08-05T16:53:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm using stable Rust `1.27.0`.\r\n\r\nAccording to `man 7 unix`, about abstract socket:\r\n\r\n> an  abstract socket address is distinguished (from a pathname socket) by the fact that `sun_path[0]` is a `null` byte (`'\\0'`).  The socket's address in this namespace is given by the additional bytes in `sun_path` that are covered by the specified length of the address structure.  (Null bytes in the name have  no  special  significance.)  The name has no connection with filesystem pathnames.  When the address of an abstract socket is returned, the returned `addrlen` is greater than `sizeof(sa_family_t)` (i.e., greater than 2), and the name of the socket is contained in the first `(addrlen  -  sizeof(sa_family_t))` bytes of `sun_path`.\r\n\r\nI failed to run this:\r\n\r\n```rust\r\nuse std::os::unix::net::UnixListener;\r\nuse std::path::PathBuf;\r\n\r\nfn main() {\r\n    let sock_path = PathBuf::from(\"\\0test\");\r\n    match UnixListener::bind(&sock_path) {\r\n        Ok(_) => println!(\"Server running at {:?}\", &sock_path),\r\n        Err(err) => eprintln!(\"Failed to start server: {}\", &err),\r\n    };\r\n}\r\n```\r\n\r\nThe error message was `paths may not contain interior null bytes`. I searched and found the code here:\r\n\r\n<https://doc.rust-lang.org/src/std/sys/unix/ext/net.rs.html#61>\r\n\r\nI consider this a bug, but I'm really not sure. May I ask if you could help?\r\n\r\nThank you,", "closed_by": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52165/timeline", "performed_via_github_app": null, "state_reason": "completed"}