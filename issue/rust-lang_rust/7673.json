{"url": "https://api.github.com/repos/rust-lang/rust/issues/7673", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7673/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7673/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7673/events", "html_url": "https://github.com/rust-lang/rust/issues/7673", "id": 16547568, "node_id": "MDU6SXNzdWUxNjU0NzU2OA==", "number": 7673, "title": "Polymorphically creating traits barely works", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-07-09T21:08:19Z", "updated_at": "2013-09-17T21:50:16Z", "closed_at": "2013-09-17T10:25:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I was confused by the following code:\n\n``` rust\nfn main() {}\n\ntrait A {}\nimpl<T: 'static> A for T {}\n\nfn owned1<T: 'static>(a: T) { ~a as ~A; }  // failed to find an implementation of trait ~A:Send for T\nfn owned2<T: 'static>(a: ~T) { a as ~A; }  // failed to find an implementation of trait ~A:Send for T\nfn owned3<T: 'static>(a: ~T) { ~a as ~A; } // cannot pack type `~~T`, which does not fulfill `Send`, as a trait bounded by Send\n\nfn managed1<T: 'static>(a: T) { @a as @A; }  // failed to find an implementation of trait @A:'static for T\nfn managed2<T: 'static>(a: @T) { a as @A; }  // failed to find an implementation of trait @A:'static for T\nfn managed3<T: 'static>(a: @T) { @a as @A; } // only one that works\n```\n\nThe only function which compiles is `managed3`. I was surprised that none of the others worked at all. For `managed3`, you're required to put a box in a box to get the trait out, while for all the others you just can't create the trait cast at all.\n\nA very surprising result for me was that `owned3` didn't work, even though its managed equivalent did work. The error message was different from `owned1/2`, but I still wasn't really able to decipher any of the errors or understand why they exist.\n\nAre these all legitimate errors? Are some of these supposed to work but they aren't? If these are legitimate errors, I'm of the opinion that the error messages should be a bit more descriptive\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/7673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7673/timeline", "performed_via_github_app": null, "state_reason": "completed"}