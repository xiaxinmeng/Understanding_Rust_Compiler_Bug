{"url": "https://api.github.com/repos/rust-lang/rust/issues/103822", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/103822/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/103822/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/103822/events", "html_url": "https://github.com/rust-lang/rust/issues/103822", "id": 1430666904, "node_id": "I_kwDOAAsO6M5VRj6Y", "number": 103822, "title": "\"the following other types implement trait\" needs improvement.", "user": {"login": "mejrs", "id": 59372212, "node_id": "MDQ6VXNlcjU5MzcyMjEy", "avatar_url": "https://avatars.githubusercontent.com/u/59372212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mejrs", "html_url": "https://github.com/mejrs", "followers_url": "https://api.github.com/users/mejrs/followers", "following_url": "https://api.github.com/users/mejrs/following{/other_user}", "gists_url": "https://api.github.com/users/mejrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/mejrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mejrs/subscriptions", "organizations_url": "https://api.github.com/users/mejrs/orgs", "repos_url": "https://api.github.com/users/mejrs/repos", "events_url": "https://api.github.com/users/mejrs/events{/privacy}", "received_events_url": "https://api.github.com/users/mejrs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-01T00:25:50Z", "updated_at": "2023-02-06T01:24:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "tl;dr: this help message is pretty bad, and needs work. See some prior discussion at https://github.com/rust-lang/rust/pull/102752\r\n\r\nLet me begin with some examples:\r\n## Examples\r\n### Showing completely unrelated impls\r\n\r\n```rust\r\npub fn foo() -> Result<u8, u8> {\r\n    let i = 42_i32;\r\n    Ok(i).into()\r\n}\r\n```\r\n```\r\nerror[E0277]: the trait bound `Result<u8, u8>: From<Result<i32, _>>` is not satisfied\r\n --> src/main.rs:4:5\r\n  |\r\n4 |     Ok(i).into()\r\n  |     ^^^^^ ---- required by a bound introduced by this call\r\n  |     |\r\n  |     the trait `From<Result<i32, _>>` is not implemented for `Result<u8, u8>`\r\n  |\r\n  = help: the following other types implement trait `From<T>`:\r\n            <Result<miniz_oxide::MZStatus, miniz_oxide::MZError> as From<&miniz_oxide::StreamResult>>\r\n            <Result<miniz_oxide::MZStatus, miniz_oxide::MZError> as From<miniz_oxide::StreamResult>>\r\n  = note: required for `Result<i32, _>` to implement `Into<Result<u8, u8>>`\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\n```\r\n\r\n### Showing hundreds of impls\r\n```rust\r\n42_u8 >> \"blah\"\r\n```\r\n```\r\nerror[E0277]: no implementation for `u8 >> &str`\r\n --> src/main.rs:2:7\r\n  |\r\n2 | 42_u8 >> \"blah\"\r\n  |       ^^ no implementation for `u8 >> &str`\r\n  |\r\n  = help: the trait `Shr<&str>` is not implemented for `u8`\r\n  = help: the following other types implement trait `Shr<Rhs>`:\r\n            <&'a i128 as Shr<i128>>\r\n            <&'a i128 as Shr<i16>>\r\n            <&'a i128 as Shr<i32>>\r\n            <&'a i128 as Shr<i64>>\r\n            <&'a i128 as Shr<i8>>\r\n            <&'a i128 as Shr<isize>>\r\n            <&'a i128 as Shr<u128>>\r\n            <&'a i128 as Shr<u16>>\r\n          and 568 others\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\n```\r\n### Cryptic bounds and types\r\n```rust\r\nfn a() -> Result<i32, ()> {\r\n    Err(5)?\r\n}\r\n```\r\n```\r\nerror[E0277]: `?` couldn't convert the error to `()`\r\n --> src/lib.rs:2:11\r\n  |\r\n1 | fn a() -> Result<i32, ()> {\r\n  |           --------------- expected `()` because of this\r\n2 |     Err(5)?\r\n  |           ^ the trait `From<{integer}>` is not implemented for `()`\r\n  |\r\n  = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait\r\n  = help: the following other types implement trait `FromResidual<R>`:\r\n            <Result<T, F> as FromResidual<Result<Infallible, E>>>\r\n            <Result<T, F> as FromResidual<Yeet<E>>>\r\n  = note: required for `Result<i32, ()>` to implement `FromResidual<Result<Infallible, {integer}>>`\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\n```\r\n\r\n## Discussion\r\n\r\nNow, lets look at what these \"help\" messages tend to have in common:\r\n- they take up a lot of space (especially the second example) and look pretty noisy.\r\n- they require significant effort to parse. To get to \"does this look like what I need?\" you have to read the message, understand what the mentioned types are and how it might fit in your code. All these things are much harder if you're not familiar with Rust.\r\n- they're more often than not completely useless\r\n- if they're useless, you have to mentally discard all this information you've just loaded.\r\n- because they're usually useless, they introduce fatigue. I don't even look at these anymore, unless I can see at a glance that they're simple like in the case of \r\n```\r\n   = help: the following other types implement trait `Pattern<'a>`:\r\n             &'b String\r\n             &'b [char; N]\r\n             &'b [char]\r\n             &'b str\r\n             &'c &'b str\r\n             [char; N]\r\n             char\r\n```\r\nbut these cases are fairly rare.\r\n\r\n## Discussion\r\n\r\nDo you agree this is a problem, and what can we do about it?", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/103822/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/103822/timeline", "performed_via_github_app": null, "state_reason": null}