{"url": "https://api.github.com/repos/rust-lang/rust/issues/40041", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40041/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40041/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40041/events", "html_url": "https://github.com/rust-lang/rust/issues/40041", "id": 209608683, "node_id": "MDU6SXNzdWUyMDk2MDg2ODM=", "number": 40041, "title": "Absurdly deeply nested types crashes rustc/llvm/msvc", "user": {"login": "novacrazy", "id": 4708645, "node_id": "MDQ6VXNlcjQ3MDg2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4708645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/novacrazy", "html_url": "https://github.com/novacrazy", "followers_url": "https://api.github.com/users/novacrazy/followers", "following_url": "https://api.github.com/users/novacrazy/following{/other_user}", "gists_url": "https://api.github.com/users/novacrazy/gists{/gist_id}", "starred_url": "https://api.github.com/users/novacrazy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/novacrazy/subscriptions", "organizations_url": "https://api.github.com/users/novacrazy/orgs", "repos_url": "https://api.github.com/users/novacrazy/repos", "events_url": "https://api.github.com/users/novacrazy/events{/privacy}", "received_events_url": "https://api.github.com/users/novacrazy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}, {"id": 266005765, "node_id": "MDU6TGFiZWwyNjYwMDU3NjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-msvc", "name": "O-windows-msvc", "color": "6e6ec0", "default": false, "description": "Toolchain: MSVC, Operating system: Windows"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-02-22T22:57:00Z", "updated_at": "2019-08-09T20:29:17Z", "closed_at": "2019-08-09T20:29:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "This program, as found [here](https://www.reddit.com/r/rust/comments/5vjdtu/demangling_c_symbols_in_rust/de2llzu/) on reddit, fails to compile on MSVC builds, stable (0.15.1) and nightly (rustc 1.17.0-nightly (a17e5e294 2017-02-20))\r\n\r\n```rust\r\nfn main() {\r\n    let a = (1, 0);\r\n    let b = (a, a);\r\n    let c = (b, b);\r\n    let d = (c, c);\r\n    let e = (d, d);\r\n    let f = (e, e);\r\n    let g = (f, f);\r\n    let h = (g, g);\r\n    let i = (h, h);\r\n    let j = (i, i);\r\n    let k = (j, j);\r\n    let l = (k, k);\r\n    let m = (l, l);\r\n    let n = (m, m);\r\n    let o = (n, n);\r\n    let p = (o, o);\r\n    let q = (p, p);\r\n    println!(\"{:?}\", q);\r\n}\r\n```\r\n\r\nWith stable, I get:\r\n\r\n```text\r\nE:\\code\\projects\\testing>rustup run stable cargo build\r\n   Compiling testing v0.1.0 (file:///E:/code/projects/testing)\r\nerror: linking with `link.exe` failed: exit code: 1000\r\n  |\r\n  = note: \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\bin\\\\amd64\\\\link.exe\" \"/LIBPATH:C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC\\\\lib\\\\amd64\" \"/LIBPATH:C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\lib\\\\10.0.14393.0\\\\ucrt\\\\x64\" \"/LIB\r\nPATH:C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\lib\\\\10.0.14393.0\\\\um\\\\x64\" \"/NOLOGO\" \"/NXCOMPAT\" \"/LIBPATH:C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"E:\\\\code\\\\projects\\\\testing\\\\target\\\\de\r\nbug\\\\deps\\\\testing-85b49d9f6840c3c5.0.o\" \"/OUT:E:\\\\code\\\\projects\\\\testing\\\\target\\\\debug\\\\deps\\\\testing-85b49d9f6840c3c5.exe\" \"/OPT:REF,NOICF\" \"/DEBUG\" \"/LIBPATH:E:\\\\code\\\\projects\\\\testing\\\\target\\\\debug\\\\deps\" \"/LIBPATH:C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\r\n\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libstd-259356a62c16e209.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\st\r\nable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\librand-626ae980c5da662e.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcollections-9c298ff08fd36373.rlib\" \"C:\\\\U\r\nsers\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libstd_unicode-395a85a6bc8d70ac.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\l\r\nibpanic_unwind-6090925440afc6a0.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libunwind-4de2657775b53c86.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\\r\nrustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\liblibc-726a7bfd60260b09.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\liballoc-2c53774924f65757.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable\r\n-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\liballoc_system-dceaab434bd30f7c.rlib\" \"C:\\\\Users\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcore-e714f4bfba22deac.rlib\" \"C:\\\\User\r\ns\\\\Aaron\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcompiler_builtins-0c9c28ea236973f1.rlib\" \"advapi32.lib\" \"ws2_32.lib\" \"userenv.lib\" \"shell32.lib\" \"msvcrt.lib\"\r\n  = note:\r\n  Version 14.00.24215.1\r\n\r\n  ExceptionCode            = C0000005\r\n  ExceptionFlags           = 00000000\r\n  ExceptionAddress         = 00007FFD145C84F6 (00007FFD145C0000) \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\mspdbcore.dll\"\r\n  NumberParameters         = 00000002\r\n  ExceptionInformation[ 0] = 0000000000000000\r\n  ExceptionInformation[ 1] = FFFFFFFFFFFFFFFF\r\n\r\nCONTEXT:\r\n  Rax    = 000001D0D9021E90  R8     = 00000032A6DFE701\r\n  Rbx    = 2C3233692828202C  R9     = 0000000000000001\r\n  Rcx    = 2C3233692828202C  R10    = 000001D0D9B5B328\r\n  Rdx    = 000000000000007D  R11    = 00000000000001C8\r\n  Rsp    = 00000032A6DFE6E0  R12    = 000001D0D8FB9F60\r\n  Rbp    = 000001D0D9B5B34C  E13    = 0000000000000000\r\n  Rsi    = 000001D0D8FB9E20  R14    = 0000000000001601\r\n  Rdi    = 000000000000107D  R15    = 0000000000001602\r\n  Rip    = 00007FFD145C84F6  EFlags = 0000000000010202\r\n  SegCs  = 0000000000000033  SegDs  = 000000000000002B\r\n  SegSs  = 000000000000002B  SegEs  = 000000000000002B\r\n  SegFs  = 0000000000000053  SegGs  = 000000000000002B\r\n  Dr0    = 0000000000000000  Dr3    = 0000000000000000\r\n  Dr1    = 0000000000000000  Dr6    = 0000000000000000\r\n  Dr2    = 0000000000000000  Dr7    = 0000000000000000\r\nLINK : fatal error LNK1000: unknown error at 000001D0D751C700; consult documentation for technical support options\r\n\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `testing`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nand on nightly it actually brings up a GUI window:\r\n\r\n![llvm error](https://cloud.githubusercontent.com/assets/4708645/23236322/607f828e-f91e-11e6-8c3a-c8dc04b22a59.PNG)\r\n\r\nHowever, this DOES compile without issues on the GNU builds. It is MSVC specific.\r\n\r\nThis seemed interesting enough to open an issue here.\r\n", "closed_by": {"login": "novacrazy", "id": 4708645, "node_id": "MDQ6VXNlcjQ3MDg2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4708645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/novacrazy", "html_url": "https://github.com/novacrazy", "followers_url": "https://api.github.com/users/novacrazy/followers", "following_url": "https://api.github.com/users/novacrazy/following{/other_user}", "gists_url": "https://api.github.com/users/novacrazy/gists{/gist_id}", "starred_url": "https://api.github.com/users/novacrazy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/novacrazy/subscriptions", "organizations_url": "https://api.github.com/users/novacrazy/orgs", "repos_url": "https://api.github.com/users/novacrazy/repos", "events_url": "https://api.github.com/users/novacrazy/events{/privacy}", "received_events_url": "https://api.github.com/users/novacrazy/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40041/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40041/timeline", "performed_via_github_app": null, "state_reason": "completed"}