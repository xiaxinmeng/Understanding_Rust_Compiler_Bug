{"url": "https://api.github.com/repos/rust-lang/rust/issues/111909", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/111909/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/111909/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/111909/events", "html_url": "https://github.com/rust-lang/rust/issues/111909", "id": 1724152277, "node_id": "I_kwDOAAsO6M5mxHnV", "number": 111909, "title": "Cargo should abort with one error when target does not exist", "user": {"login": "Alvenix", "id": 5764299, "node_id": "MDQ6VXNlcjU3NjQyOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5764299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alvenix", "html_url": "https://github.com/Alvenix", "followers_url": "https://api.github.com/users/Alvenix/followers", "following_url": "https://api.github.com/users/Alvenix/following{/other_user}", "gists_url": "https://api.github.com/users/Alvenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alvenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alvenix/subscriptions", "organizations_url": "https://api.github.com/users/Alvenix/orgs", "repos_url": "https://api.github.com/users/Alvenix/repos", "events_url": "https://api.github.com/users/Alvenix/events{/privacy}", "received_events_url": "https://api.github.com/users/Alvenix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-24T14:36:43Z", "updated_at": "2023-05-25T06:36:55Z", "closed_at": "2023-05-25T06:36:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "### Code\r\n\r\n```Rust\r\nfn main() {\r\n    println!(\"Hello, world!\");\r\n}\r\n```\r\n\r\n\r\n### Current output\r\n\r\n```Shell\r\nerror[E0463]: can't find crate for `std`\r\n  |\r\n  = note: the `x86_64-pc-windows-gnu` target may not be installed\r\n  = help: consider downloading the target with `rustup target add x86_64-pc-windows-gnu`\r\n\r\nerror: cannot find macro `println` in this scope\r\n --> src/main.rs:2:5\r\n  |\r\n2 |     println!(\"Hello, world!\");\r\n  |     ^^^^^^^\r\n\r\nerror: requires `sized` lang_item\r\n\r\nFor more information about this error, try `rustc --explain E0463`.\r\n```\r\n\r\n\r\n### Desired output\r\n\r\n```Shell\r\nerror[E0463]: can't find crate for `std`\r\n  |\r\n  = note: the `x86_64-pc-windows-gnu` target may not be installed\r\n  = help: consider downloading the target with `rustup target add x86_64-pc-windows-gnu`\r\n```\r\n\r\n\r\n### Rationale and extra context\r\n\r\nWhen you have a lot of code or using a lot of crates the first line get covered by the terminal and you get mystified. For example adding a dependency increase the number of error lines a lot, few more dependencies and it will get over the terminal scroll limit.\r\n ```\r\n[dependencies]\r\ntokio = \"1.28.1\"\r\n```\r\n\r\n### Other cases\r\n\r\n```Rust\r\n\r\n\r\nerror[E0463]: can't find crate for `core`\r\n  |\r\n  = note: the `x86_64-pc-windows-gnu` target may not be installed\r\n  = help: consider downloading the target with `rustup target add x86_64-pc-windows-gnu`\r\n\r\nerror[E0463]: can't find crate for `compiler_builtins`\r\n\r\nerror[E0463]: can't find crate for `core`\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1503:9\r\n     |\r\n1503 |     use core::mem::ManuallyDrop;\r\n     |         ^^^^ can't find crate\r\n     |\r\n     = note: the `x86_64-pc-windows-gnu` target may not be installed\r\n     = help: consider downloading the target with `rustup target add x86_64-pc-windows-gnu`\r\n\r\nerror[E0463]: can't find crate for `core`\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1505:13\r\n     |\r\n1505 |     pub use core::{\r\n     |             ^^^^ can't find crate\r\n     |\r\n     = note: the `x86_64-pc-windows-gnu` target may not be installed\r\n     = help: consider downloading the target with `rustup target add x86_64-pc-windows-gnu`\r\n\r\nerror[E0405]: cannot find trait `Sized` in this scope\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1514:32\r\n     |\r\n1514 |     pub struct AlwaysUnpin<T: ?Sized>(PhantomData<T>);\r\n     |                                ^^^^^ not found in this scope\r\n\r\nerror[E0405]: cannot find trait `Sized` in this scope\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1516:14\r\n     |\r\n1516 |     impl<T: ?Sized> Unpin for AlwaysUnpin<T> {}\r\n     |              ^^^^^ not found in this scope\r\n\r\nerror[E0405]: cannot find trait `Sized` in this scope\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1520:43\r\n     |\r\n1520 |     pub struct UnsafeDropInPlaceGuard<T: ?Sized>(*mut T);\r\n     |                                           ^^^^^ not found in this scope\r\n\r\nerror[E0405]: cannot find trait `Sized` in this scope\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1522:14\r\n     |\r\n1522 |     impl<T: ?Sized> UnsafeDropInPlaceGuard<T> {\r\n     |              ^^^^^ not found in this scope\r\n\r\nerror[E0405]: cannot find trait `Sized` in this scope\r\n    --> /home/abdullah/.cargo/registry/src/index.crates.io-6f17d22bba15001f/pin-project-lite-0.2.9/src/lib.rs:1529:14\r\n     |\r\n1529 |     impl<T: ?Sized> Drop for UnsafeDropInPlaceGuard<T> {\r\n     |              ^^^^^ not found in this scope\r\n\r\nSome errors have detailed explanations: E0405, E0463.\r\nFor more information about an error, try `rustc --explain E0405`.\r\nerror: could not compile `pin-project-lite` due to 9 previous errors\r\nwarning: build failed, waiting for other jobs to finish...\r\n```\r\n\r\n\r\n### Anything else?\r\n\r\nSometimes when compiling for a target that is not installed, a long list errors is printed. The user won\u2019t know the reason he cannot scroll up past the terminal limit.\r\n\r\nIf possible, I think it will be easier if cargo prints that the target does not exist.\r\n\r\nI have been bitted by this issue few times, and I had to help people with this issue.\r\n", "closed_by": {"login": "Alvenix", "id": 5764299, "node_id": "MDQ6VXNlcjU3NjQyOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5764299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alvenix", "html_url": "https://github.com/Alvenix", "followers_url": "https://api.github.com/users/Alvenix/followers", "following_url": "https://api.github.com/users/Alvenix/following{/other_user}", "gists_url": "https://api.github.com/users/Alvenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alvenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alvenix/subscriptions", "organizations_url": "https://api.github.com/users/Alvenix/orgs", "repos_url": "https://api.github.com/users/Alvenix/repos", "events_url": "https://api.github.com/users/Alvenix/events{/privacy}", "received_events_url": "https://api.github.com/users/Alvenix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/111909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/111909/timeline", "performed_via_github_app": null, "state_reason": "completed"}