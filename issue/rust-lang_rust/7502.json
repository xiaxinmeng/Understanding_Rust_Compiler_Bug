{"url": "https://api.github.com/repos/rust-lang/rust/issues/7502", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7502/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7502/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7502/events", "html_url": "https://github.com/rust-lang/rust/issues/7502", "id": 16186262, "node_id": "MDU6SXNzdWUxNjE4NjI2Mg==", "number": 7502, "title": "appropriate lifetime and match", "user": {"login": "remifontan", "id": 4619755, "node_id": "MDQ6VXNlcjQ2MTk3NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4619755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/remifontan", "html_url": "https://github.com/remifontan", "followers_url": "https://api.github.com/users/remifontan/followers", "following_url": "https://api.github.com/users/remifontan/following{/other_user}", "gists_url": "https://api.github.com/users/remifontan/gists{/gist_id}", "starred_url": "https://api.github.com/users/remifontan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/remifontan/subscriptions", "organizations_url": "https://api.github.com/users/remifontan/orgs", "repos_url": "https://api.github.com/users/remifontan/repos", "events_url": "https://api.github.com/users/remifontan/events{/privacy}", "received_events_url": "https://api.github.com/users/remifontan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2013-06-30T10:40:37Z", "updated_at": "2013-09-23T08:36:29Z", "closed_at": "2013-09-23T08:36:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "following code does not compile:\n\n```\nstruct Vec { x:float, y:float, z:float }\nimpl Vec {\n    pub fn getRef<'a>(&'a mut self, i:uint) -> &'a mut float {\n        // if(i==0) { &mut self.x }\n        // else if(i==1) { &mut self.x }\n        // else {&mut self.x }\n\n        match(i) {\n            0 => &mut self.x,\n            1 => &mut self.y,\n            _ => &mut self.z\n        }\n    }\n}\n```\n\nI get following errors:\n\n```\nrustc test.rs -o test-test --test\ntest.rs:122:17: 122:28 error: cannot infer an appropriate lifetime due to conflicting requirements\ntest.rs:122             _ => &mut self.z\n                             ^~~~~~~~~~~\ntest.rs:121:17: 121:28 note: first, the lifetime must be contained by the expression at 121:17...\ntest.rs:121             1 => &mut self.y,\n                             ^~~~~~~~~~~\ntest.rs:121:17: 121:28 note: ...due to the following expression\ntest.rs:121             1 => &mut self.y,\n                             ^~~~~~~~~~~\ntest.rs:120:17: 120:28 note: but, the lifetime must also be contained by the expression at 120:17...\ntest.rs:120             0 => &mut self.x,\n                             ^~~~~~~~~~~\ntest.rs:120:17: 120:28 note: ...due to the following expression\ntest.rs:120             0 => &mut self.x,\n                             ^~~~~~~~~~~\nerror: aborting due to previous error\nmake: *** [test-test] Error 101\n```\n\nThe commented version that is using if statements does compile correctly.\n\nI haven't tried yet with very latest build, so I'm not sure whether the problem is still there with rust 0.7\n\ncheers,\n\nR\u00e9mi\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/7502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7502/timeline", "performed_via_github_app": null, "state_reason": "completed"}