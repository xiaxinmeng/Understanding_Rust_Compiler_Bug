{"url": "https://api.github.com/repos/rust-lang/rust/issues/104881", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104881/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104881/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104881/events", "html_url": "https://github.com/rust-lang/rust/issues/104881", "id": 1464542446, "node_id": "I_kwDOAAsO6M5XSyTu", "number": 104881, "title": "Codegen metadata documentation is not exhaustive", "user": {"login": "alepez", "id": 877244, "node_id": "MDQ6VXNlcjg3NzI0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/877244?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alepez", "html_url": "https://github.com/alepez", "followers_url": "https://api.github.com/users/alepez/followers", "following_url": "https://api.github.com/users/alepez/following{/other_user}", "gists_url": "https://api.github.com/users/alepez/gists{/gist_id}", "starred_url": "https://api.github.com/users/alepez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alepez/subscriptions", "organizations_url": "https://api.github.com/users/alepez/orgs", "repos_url": "https://api.github.com/users/alepez/repos", "events_url": "https://api.github.com/users/alepez/events{/privacy}", "received_events_url": "https://api.github.com/users/alepez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-25T13:20:00Z", "updated_at": "2022-11-25T13:20:00Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "### Location\r\n\r\nhttps://doc.rust-lang.org/rustc/codegen-options/index.html#metadata\r\n\r\n### Summary\r\n\r\nCurrent `rustc -Cmetadata` argument documentation:\r\n\r\n> This option allows you to control the metadata used for symbol mangling. This takes a space-separated list of strings. Mangled symbols will incorporate a hash of the metadata. This may be used, for example, to differentiate symbols between two different versions of the same crate being linked.\r\n\r\nI feel it is not evident what is the expected behavior. I'm not talking about how the metadata is used to differentiate symbols, but what are the expected arguments.\r\n\r\nOther non-documented rules, which are clear by looking at the code in charge\r\nof generating a stable crate id (`compiler/rustc_span/src/def_id.rs`)\r\n\r\nMetadata is a list of values. The order of such values does not matter.\r\nSo `one two` and `two one` are equivalent\r\n\r\nMetadata values can be added with a single -Cmetadata option, which takes\r\na value of space-separated values.\r\n\r\nMetadata values can also be added by multiple -Cmetadata options.\r\n\r\nEvery distinct -C metadata value is only incorporated once\r\n\r\nA single metadata \"ab\" has a different meaning than two separated \"a\" \"b\"\r\n\r\nSo these are equivalent:\r\n\r\n```\r\n-Cmetadata=one -Cmetadata=two\r\n-Cmetadata=\"one two\"\r\n-Cmetadata=\"two one\"\r\n-Cmetadata=\"one two one\"\r\n```\r\n\r\nBut these are not:\r\n\r\n```\r\n-Cmetadata=\"onetwo\"\r\n-Cmetadata=\"one,two\"\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104881/timeline", "performed_via_github_app": null, "state_reason": null}