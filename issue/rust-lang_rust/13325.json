{"url": "https://api.github.com/repos/rust-lang/rust/issues/13325", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13325/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13325/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13325/events", "html_url": "https://github.com/rust-lang/rust/issues/13325", "id": 30888922, "node_id": "MDU6SXNzdWUzMDg4ODkyMg==", "number": 13325, "title": "error: internal compiler error: unexpected failure on resolving external static", "user": {"login": "farcaller", "id": 693, "node_id": "MDQ6VXNlcjY5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farcaller", "html_url": "https://github.com/farcaller", "followers_url": "https://api.github.com/users/farcaller/followers", "following_url": "https://api.github.com/users/farcaller/following{/other_user}", "gists_url": "https://api.github.com/users/farcaller/gists{/gist_id}", "starred_url": "https://api.github.com/users/farcaller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farcaller/subscriptions", "organizations_url": "https://api.github.com/users/farcaller/orgs", "repos_url": "https://api.github.com/users/farcaller/repos", "events_url": "https://api.github.com/users/farcaller/events{/privacy}", "received_events_url": "https://api.github.com/users/farcaller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2014-04-04T19:44:44Z", "updated_at": "2015-04-22T19:17:36Z", "closed_at": "2015-04-22T14:58:01Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\nextern {\n  static StackBase: *u32;\n  fn main();\n}\n\n#[link_section=\".isr_vector_temp\"]\nstatic ISRVectors: &'static [u32] = &'static [\n  StackBase as u32,\n  main as u32,\n];\n```\n\nfails with the following backtrace:\n\n```\ntask 'rustc' failed at 'expected item, found foreign item cortex_isr::StackBase::StackBase (id=5)', /private/tmp/rust-7IAC/src/libsyntax/ast_map.rs:256\nstack backtrace:\n   1:        0x1048ccce4 - rt::backtrace::imp::write::hd10102b8c011e5c0a8b::v0.11.pre\n   2:        0x104830716 - rt::unwind::begin_unwind_inner::h2aba2baaa74b26e6EIb::v0.11.pre\n   3:        0x10482f8b7 - rt::unwind::begin_unwind_fmt::h09a087409081b5ebOHb::v0.11.pre\n   4:        0x10401cbc0 - ast_map::Map::expect_item::h33e65f1cbe4a9690f3v::v0.11.pre\n   5:        0x102391110 - middle::check_const::CheckItemRecursionVisitor$LT$$x27a$GT$.Visitor$LT$$LP$$RP$$GT$::visit_expr::ha1037e3d217f65f58Av::v0.11.pre\n   6:        0x102391488 - middle::check_const::CheckItemRecursionVisitor$LT$$x27a$GT$.Visitor$LT$$LP$$RP$$GT$::visit_expr::ha1037e3d217f65f58Av::v0.11.pre\n   7:        0x102391303 - middle::check_const::CheckItemRecursionVisitor$LT$$x27a$GT$.Visitor$LT$$LP$$RP$$GT$::visit_expr::ha1037e3d217f65f58Av::v0.11.pre\n   8:        0x102391294 - middle::check_const::CheckItemRecursionVisitor$LT$$x27a$GT$.Visitor$LT$$LP$$RP$$GT$::visit_expr::ha1037e3d217f65f58Av::v0.11.pre\n   9:        0x10238ffc0 - middle::check_const::CheckItemRecursionVisitor$LT$$x27a$GT$.Visitor$LT$$LP$$RP$$GT$::visit_item::hb181d9d02abb2808dAv::v0.11.pre\n  10:        0x10238ecbc - middle::check_const::check_item_recursion::h46ce87da219f30a8qzv::v0.11.pre\n  11:        0x10238b156 - middle::check_const::check_item::h6a7ac223917469a2kpv::v0.11.pre\n  12:        0x10238b841 - middle::check_const::check_item::h6a7ac223917469a2kpv::v0.11.pre\n  13:        0x10238e2a1 - middle::check_const::check_crate::h2d887eb065573c56Gov::v0.11.pre\n  14:        0x10237103f - util::common::time::h8a9a37f5ab167269hpg::v0.11.pre\n  15:        0x1027810e2 - driver::driver::phase_3_run_analysis_passes::ha2daf3ece9edb1f1Ree::v0.11.pre\n  16:        0x102787243 - driver::driver::compile_input::hf4855bb3e4401cfdODe::v0.11.pre\n  17:        0x1027ab4ce - run_compiler::hc72c45483cbf8cefC5l::v0.11.pre\n  18:        0x1027bf0fd - main_args::closure.91691\n  19:        0x1027bd912 - monitor::closure.91576\n  20:        0x1027b94bb - task::TaskBuilder::try::closure.91351\n  21:        0x101f7d78c - task::spawn_opts::closure.7923\n  22:        0x1048c8108 - rt::task::Task::run::closure.41788\n  23:        0x1048d29fc - rust_try\n  24:        0x1048c7f87 - rt::task::Task::run::h83564328e5810a07HB9::v0.11.pre\n  25:        0x101f7d60f - task::spawn_opts::closure.7895\n  26:        0x1048cb6c6 - rt::thread::thread_start::h66f4963f837dbe56oga::v0.11.pre\n  27:     0x7fff8f91f899 - _pthread_body\n  28:     0x7fff8f91f72a - _pthread_struct_init\n```\n\nTrying to port the following C code:\n\n``` c\n__attribute__ ((section(\".isr_vector\")))\nvoid (* const isr_vector_table[])(void) = {\n    &_stack_base,\n    main,             // Reset\n    ...\n}\n```\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13325/timeline", "performed_via_github_app": null, "state_reason": "completed"}