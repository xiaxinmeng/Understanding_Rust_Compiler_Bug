{"url": "https://api.github.com/repos/rust-lang/rust/issues/52719", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52719/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52719/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52719/events", "html_url": "https://github.com/rust-lang/rust/issues/52719", "id": 344646678, "node_id": "MDU6SXNzdWUzNDQ2NDY2Nzg=", "number": 52719, "title": "Tests are not rebuilt when codegen is rebuilt", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-07-25T23:54:21Z", "updated_at": "2019-08-16T18:35:17Z", "closed_at": "2019-08-16T18:35:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was in the middle of bisecting on system llvm and running `x.py test src/libstd --stage 1` when I noticed that, in fact, while each step was rebuilding the compiler with the changed llvm correctly, the test that was being run was never recompiled, such that the same one was always running, and my bisect was guided by wrong results.\r\n\r\nSTR:\r\n- Run `x.py test src/libstd --stage 1` once\r\n- Touch anything that is part of e.g. librustc_codegen_llvm.so, e.g. `src/librustc_llvm/lib.rs`\r\n- Run `x.py test src/libstd --stage 1` again\r\n\r\nExpected result:\r\n- Both librustc_codegen_llvm.so and the test are rebuilt, and the rebuilt test executed.\r\n\r\nActual result:\r\n- librustc_codegen_llvm.so is rebuilt, the test is not, and the test built before the codegen changes is executed.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52719/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52719/timeline", "performed_via_github_app": null, "state_reason": "completed"}