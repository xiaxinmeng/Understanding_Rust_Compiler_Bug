{"url": "https://api.github.com/repos/rust-lang/rust/issues/21652", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21652/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21652/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21652/events", "html_url": "https://github.com/rust-lang/rust/issues/21652", "id": 55470207, "node_id": "MDU6SXNzdWU1NTQ3MDIwNw==", "number": 21652, "title": "Parsing of floats should be more permissive with regards to NaN and +/- inf syntax", "user": {"login": "dhardy", "id": 134893, "node_id": "MDQ6VXNlcjEzNDg5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/134893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhardy", "html_url": "https://github.com/dhardy", "followers_url": "https://api.github.com/users/dhardy/followers", "following_url": "https://api.github.com/users/dhardy/following{/other_user}", "gists_url": "https://api.github.com/users/dhardy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhardy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhardy/subscriptions", "organizations_url": "https://api.github.com/users/dhardy/orgs", "repos_url": "https://api.github.com/users/dhardy/repos", "events_url": "https://api.github.com/users/dhardy/events{/privacy}", "received_events_url": "https://api.github.com/users/dhardy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-26T11:04:47Z", "updated_at": "2015-02-15T18:03:16Z", "closed_at": "2015-02-15T18:03:16Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When parsing an f32, f64, etc., more special syntaxes for infinity and not-a-number should be expected:\n\n```\nfn f64_parse(text: &str){\n    match text.parse::<f64>(){\n        Some(v) => println!(\"Parsing {} yields {}\", text, v),\n        None => println!(\"Parsing {} fails\", text)\n    };\n}\nfn main(){\n    f64_parse(\"NaN\");\n    f64_parse(\"nan\");\n    f64_parse(\"NAN\");\n    f64_parse(\"-nan\");\n    f64_parse(\"inf\");\n    f64_parse(\"INF\");\n    f64_parse(\"infinity\");\n}\n```\n\nResult:\n\n```\nParsing NaN yields NaN\nParsing nan fails\nParsing NAN fails\nParsing -nan fails\nParsing inf yields inf\nParsing INF fails\nParsing infinity fails\n```\n\nIt is debatable whether the default parser should support all these syntaxes, but it would be very useful to have this functionality somewhere. Links:\n-   [Boost's nonfinite_num_get](http://www.boost.org/doc/libs/1_47_0/libs/math/doc/sf_and_dist/html/math_toolkit/utils/fp_facets/reference.html#math_toolkit.utils.fp_facets.reference.facet__code__phrase_role__identifier__nonfinite_num_get__phrase___code_)\n-   [C's strtof, etc.](http://en.cppreference.com/w/c/string/byte/strtof)\n-   [C's printf (see notes at bottom of table)](http://en.cppreference.com/w/c/io/fprintf):\n  \n  ```\n  The floating point conversion functions convert infinity to inf or\n  infinity. Which one is used is implementation defined.\n  Not-a-number is converted to nan or nan(char_sequence). Which one is\n  used is implementation defined.\n  The conversions F, E, G, A output INF, INFINITY, NAN instead.\n  ```\n\nI'm sure I've come across `-nan` (possibly different case) as well.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21652/timeline", "performed_via_github_app": null, "state_reason": "completed"}