{"url": "https://api.github.com/repos/rust-lang/rust/issues/16937", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16937/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16937/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16937/events", "html_url": "https://github.com/rust-lang/rust/issues/16937", "id": 41679611, "node_id": "MDU6SXNzdWU0MTY3OTYxMQ==", "number": 16937, "title": "Windows: process::Command::env should be case-insensitive", "user": {"login": "vadimcn", "id": 3203809, "node_id": "MDQ6VXNlcjMyMDM4MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimcn", "html_url": "https://github.com/vadimcn", "followers_url": "https://api.github.com/users/vadimcn/followers", "following_url": "https://api.github.com/users/vadimcn/following{/other_user}", "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions", "organizations_url": "https://api.github.com/users/vadimcn/orgs", "repos_url": "https://api.github.com/users/vadimcn/repos", "events_url": "https://api.github.com/users/vadimcn/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimcn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-09-02T06:44:37Z", "updated_at": "2014-09-18T18:45:42Z", "closed_at": "2014-09-18T18:45:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following program demonstrates the problem:\n\n``` rust\nuse std::io::process;\nfn main() {\n    let mut cmd = process::Command::new(\"cmd.exe\");\n    cmd.arg(\"/C\").arg(\"echo %FOO%\");\n    cmd.env(\"foo\", \"foo\");\n    cmd.env(\"FOO\", \"BAR\");\n    cmd.stdout(process::InheritFd(1));\n    cmd.spawn();\n}\n```\n\nWhen compiled and executed on WIndows, it randomly displays either 'foo' or 'BAR'.\n\nThis happens because process::Command represents environment block as a HasMap<CString, CString>, so it treats \"foo\" and \"FOO\" as different variables, whereas Windows considers them to be the same one.   When child process is spawned, both get added into the environment block, however Windows keeps only the last one.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16937/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16937/timeline", "performed_via_github_app": null, "state_reason": "completed"}