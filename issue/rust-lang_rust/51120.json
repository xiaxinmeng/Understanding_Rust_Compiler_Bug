{"url": "https://api.github.com/repos/rust-lang/rust/issues/51120", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51120/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51120/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51120/events", "html_url": "https://github.com/rust-lang/rust/issues/51120", "id": 326912228, "node_id": "MDU6SXNzdWUzMjY5MTIyMjg=", "number": 51120, "title": "Unsoundness for iterator returning mutable references.", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-05-28T06:34:48Z", "updated_at": "2018-05-28T16:12:00Z", "closed_at": "2018-05-28T16:12:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "As the lifetime  of an item returned by an iterator is bound to the lifetime of the iterator and not to the call of the next function, it is easy to create code where multiple variable points mutable to the same object. \r\nTo create such iterators either it  requires unsafe codes or the implementation of the Iterator trait have to be given up.\r\n\r\nI wanted to create a merge_on_the_fly iterator for from two mut ref iterator where sometimes the same item is returned when calling next. It works fine as long as it is used in a for loop. But user may use the iterator outside a for loop and nothing warns/errors when references are kept between consecutive next calls.\r\n\r\nThere were some suggestions before how to fix this issue. But it seems as all of them were closed/postponed without a real solution. So i'd like to reraise this issue.", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51120/timeline", "performed_via_github_app": null, "state_reason": "completed"}