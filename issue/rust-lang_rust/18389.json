{"url": "https://api.github.com/repos/rust-lang/rust/issues/18389", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18389/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18389/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18389/events", "html_url": "https://github.com/rust-lang/rust/issues/18389", "id": 47017113, "node_id": "MDU6SXNzdWU0NzAxNzExMw==", "number": 18389, "title": "ICE with associated type in trait constraint trait type parameter", "user": {"login": "jeremyletang", "id": 4346460, "node_id": "MDQ6VXNlcjQzNDY0NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/4346460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremyletang", "html_url": "https://github.com/jeremyletang", "followers_url": "https://api.github.com/users/jeremyletang/followers", "following_url": "https://api.github.com/users/jeremyletang/following{/other_user}", "gists_url": "https://api.github.com/users/jeremyletang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremyletang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremyletang/subscriptions", "organizations_url": "https://api.github.com/users/jeremyletang/orgs", "repos_url": "https://api.github.com/users/jeremyletang/repos", "events_url": "https://api.github.com/users/jeremyletang/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremyletang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-10-28T11:51:27Z", "updated_at": "2014-12-18T14:32:15Z", "closed_at": "2014-12-18T14:32:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nI have an ICE with associated type and traits types parameter. Here is the code which make the ICE:\n\n``` Rust\n#![feature(unboxed_closures)]\n#![feature(associated_types)]\n\nuse std::any::Any;\nuse std::intrinsics::TypeId;\n\npub trait Pt {}\npub trait Rt {}\n\ntrait Private<P: Pt, R: Rt> {\n    fn call(&self, p: P, r: R);\n}\npub trait Public: Private< <Self as Public>::P, <Self as Public>::R> {\n    type P;\n    type R;\n\n    fn call_inner(&self);\n}\n\nfn main() {}\n```\n\nHere is the error:\n\n``` Shell\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'No def'n found for DefId { krate: 0, node: 52 } in tcx.impl_or_trait_items', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/librustc/middle/ty.rs:4045\n```\n\nAnd the backtrace:\n\n``` Shell\nstack backtrace:\n   1:        0x10ea1c449 - rt::backtrace::imp::write::h9ef15559a8ab15acklq\n   2:        0x10ea1f727 - failure::on_fail::h2c624eec61273dd2TBq\n   3:        0x10ec81dd5 - unwind::begin_unwind_inner::h9b53584d2b2a04abuJd\n   4:        0x10ec81aa0 - unwind::begin_unwind_fmt::hfeb45fefb5f89034WGd\n   5:        0x10ba16db0 - middle::ty::impl_or_trait_item::h5647870d220dd48dRyJ\n   6:        0x10be8c4d8 - middle::typeck::astconv::associated_ty_to_ty::h16367986389000391518\n   7:        0x10be76e76 - middle::typeck::astconv::ast_ty_to_ty::h711177843661714102\n   8:        0x10bcca47f - iter::Iterator::collect::h15375321657273984973\n   9:        0x10be79598 - middle::typeck::astconv::ast_path_substs::h1309767547822478877\n  10:        0x10be78ab5 - middle::typeck::astconv::ast_path_to_trait_ref::h14934150251062436313\n  11:        0x10be8c7ad - middle::typeck::collect::conv_param_bounds::closure.136540\n  12:        0x10bdea784 - iter::Iterator::collect::h5260861383003533849\n  13:        0x10bda430f - middle::typeck::collect::trait_def_of_item::h443e0c062e25ab1eIQi\n  14:        0x10bd9fcfe - middle::typeck::collect::collect_item_types::h8e837d96c3fa1910Duh\n  15:        0x10b7cce66 - util::common::time::h6426555137378661470\n  16:        0x10bf54ed8 - middle::typeck::check_crate::h0a022cac844ad54a2gn\n  17:        0x10bfbdb1f - driver::driver::phase_3_run_analysis_passes::h6990fe5bffeac231mVz\n  18:        0x10bfb83ad - driver::driver::compile_input::hef5c826020afb7d67Bz\n  19:        0x10c0367cf - driver::run_compiler::hc0a4e8928d29f9d9ipD\n  20:        0x10c0349d6 - driver::run::closure.144600\n  21:        0x10b7e569b - task::TaskBuilder<S>::try_future::closure.103029\n  22:        0x10b7e5593 - task::TaskBuilder<S>::spawn_internal::closure.103000\n  23:        0x10b7677cd - task::NativeSpawner.Spawner::spawn::closure.8544\n  24:        0x10ece7f4c - rust_try_inner\n  25:        0x10ece7f36 - rust_try\n  26:        0x10ec7f467 - unwind::try::h8fbc818092646037cyd\n  27:        0x10ec7f2fc - task::Task::run::h86bb0e257a4c218dZJc\n  28:        0x10b7675f3 - task::NativeSpawner.Spawner::spawn::closure.8481\n  29:        0x10ec80c57 - thread::thread_start::h887b36ec0072bfebe5c\n  30:     0x7fff8ffdc899 - _pthread_body\n  31:     0x7fff8ffdc72a - _pthread_struct_init\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18389/timeline", "performed_via_github_app": null, "state_reason": "completed"}