{"url": "https://api.github.com/repos/rust-lang/rust/issues/15590", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15590/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15590/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15590/events", "html_url": "https://github.com/rust-lang/rust/issues/15590", "id": 37609887, "node_id": "MDU6SXNzdWUzNzYwOTg4Nw==", "number": 15590, "title": "Plugins should be present in LD_LIBRARY_PATH in order to be used", "user": {"login": "netvl", "id": 280456, "node_id": "MDQ6VXNlcjI4MDQ1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/280456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netvl", "html_url": "https://github.com/netvl", "followers_url": "https://api.github.com/users/netvl/followers", "following_url": "https://api.github.com/users/netvl/following{/other_user}", "gists_url": "https://api.github.com/users/netvl/gists{/gist_id}", "starred_url": "https://api.github.com/users/netvl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netvl/subscriptions", "organizations_url": "https://api.github.com/users/netvl/orgs", "repos_url": "https://api.github.com/users/netvl/repos", "events_url": "https://api.github.com/users/netvl/events{/privacy}", "received_events_url": "https://api.github.com/users/netvl/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-07-10T22:05:36Z", "updated_at": "2015-01-23T22:57:25Z", "closed_at": "2015-01-23T22:57:25Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Consider this code:\n\n``` rust\n#![feature(phase)]\n\n#[phase(plugin)] extern crate docopt_macros;\nextern crate docopt;\n\nfn main() {}\n```\n\nand I have `libdocopt` and `libdocopt_macros` libraries (both rlib and so) in `target/deps` dir. Now this command fails:\n\n```\n% rustc -L target/deps main.rs \nmain.rs:3:18: 3:45 error: libdocopt-7d3351826ed55f12.so: cannot open shared object file: No such file or directory\nmain.rs:3 #[phase(plugin)] extern crate docopt_macros;\n                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n```\n\nBut this works:\n\n```\n% LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:$PWD/target/deps\" rustc -L target/deps main.rs\n```\n\nThis is really bad. For example, cargo can't compile such packages now. I'm not sure if this is possible to fix given the latest change in rpath handling, but is there a sensible workaround? I don't think it is acceptable to tweak LD_LIBRARY_PATH just to run the compiler; moreover, this did work before the change, so it looks like a regression.\n\nI'm using Linux x86_64, by the way.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15590/timeline", "performed_via_github_app": null, "state_reason": "completed"}