{"url": "https://api.github.com/repos/rust-lang/rust/issues/62345", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62345/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62345/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62345/events", "html_url": "https://github.com/rust-lang/rust/issues/62345", "id": 463871488, "node_id": "MDU6SXNzdWU0NjM4NzE0ODg=", "number": 62345, "title": "Rustdoc should warn about unused reference links", "user": {"login": "asomers", "id": 129721, "node_id": "MDQ6VXNlcjEyOTcyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/129721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asomers", "html_url": "https://github.com/asomers", "followers_url": "https://api.github.com/users/asomers/followers", "following_url": "https://api.github.com/users/asomers/following{/other_user}", "gists_url": "https://api.github.com/users/asomers/gists{/gist_id}", "starred_url": "https://api.github.com/users/asomers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asomers/subscriptions", "organizations_url": "https://api.github.com/users/asomers/orgs", "repos_url": "https://api.github.com/users/asomers/repos", "events_url": "https://api.github.com/users/asomers/events{/privacy}", "received_events_url": "https://api.github.com/users/asomers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 419557634, "node_id": "MDU6TGFiZWw0MTk1NTc2MzQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-medium", "name": "E-medium", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Medium / intermediate"}, {"id": 1118567289, "node_id": "MDU6TGFiZWwxMTE4NTY3Mjg5", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-intra-doc-links", "name": "A-intra-doc-links", "color": "f7e101", "default": false, "description": "Area: Intra-doc links, the ability to link to items in docs by name"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-07-03T17:28:14Z", "updated_at": "2020-08-23T16:33:44Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "rustdoc can easily generate external links by using a full URL as the target.  However, this only works with inline links.  It doesn't work when using footnote links, sometimes called \"reference links\".  If you try to use a full URL as the target of a footnote link, rustdoc will throw up a `intra_doc_link_resolution_failure` warning.  Here's an example.\r\n\r\n`src/libs.rs`:\r\n```rust\r\n//!\r\n//! This is an inline link to [`CStr`](https://doc.rust-lang.org/stable/std/ffi/struct.CStr.html).\r\n//! It works!\r\n//!\r\n//! This is an intra-crate footnote link to [`MyType`][MyType].  It also works.\r\n//!\r\n//! This is a footnote link, aka \"reference link\", to [`OsStr`](OsStr).  It fails :( .\r\n//!\r\n//! [MyType]: t/struct.MyType.html\r\n//! [OsStr]: https://doc.rust-lang.org/stable/std/ffi/struct.OsStr.html\r\npub mod t {\r\n    pub struct MyType {}\r\n}\r\n```\r\n\r\n```\r\n> cargo +nightly doc --no-deps\r\n Documenting external_reference_link v0.1.0 (/tmp/external_reference_link)\r\nwarning: `[OsStr]` cannot be resolved, ignoring it...\r\n --> src/lib.rs:7:65\r\n  |\r\n7 | //! This is a footnote link, aka \"reference link\", to [`OsStr`](OsStr).  It fails :( .\r\n  |                                                                 ^^^^^ cannot be resolved, ignoring\r\n  |\r\n  = note: #[warn(intra_doc_link_resolution_failure)] on by default\r\n  = help: to escape `[` and `]` characters, just add '\\' before them like `\\[` or `\\]`\r\n\r\n    Finished dev [unoptimized + debuginfo] target(s) in 1.06s\r\n> rustup run nightly rustc --version\r\nrustc 1.36.0-nightly (7d5aa4332 2019-05-16)\r\n```\r\n\r\nThe workaround is to only use inline links for external targets.  But that uglies up the code, and it requires duplication if the same comment block needs to instantiate the link multiple times.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62345/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62345/timeline", "performed_via_github_app": null, "state_reason": null}