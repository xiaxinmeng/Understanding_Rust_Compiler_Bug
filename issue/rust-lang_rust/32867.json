{"url": "https://api.github.com/repos/rust-lang/rust/issues/32867", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32867/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32867/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32867/events", "html_url": "https://github.com/rust-lang/rust/issues/32867", "id": 147218725, "node_id": "MDU6SXNzdWUxNDcyMTg3MjU=", "number": 32867, "title": "'rustc' panicked at 'called `Option::unwrap()` on a `None` value',", "user": {"login": "shterrett", "id": 1944111, "node_id": "MDQ6VXNlcjE5NDQxMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1944111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shterrett", "html_url": "https://github.com/shterrett", "followers_url": "https://api.github.com/users/shterrett/followers", "following_url": "https://api.github.com/users/shterrett/following{/other_user}", "gists_url": "https://api.github.com/users/shterrett/gists{/gist_id}", "starred_url": "https://api.github.com/users/shterrett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shterrett/subscriptions", "organizations_url": "https://api.github.com/users/shterrett/orgs", "repos_url": "https://api.github.com/users/shterrett/repos", "events_url": "https://api.github.com/users/shterrett/events{/privacy}", "received_events_url": "https://api.github.com/users/shterrett/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-10T12:00:02Z", "updated_at": "2016-04-22T13:52:43Z", "closed_at": "2016-04-22T13:52:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "`rustc 1.7.0 (a5d1e7a59 2016-02-29)`\n\n``` bash\nefficient_route_planning graph-from-xml % RUST_BACKTRACE=1 cargo build\n   Compiling efficient_route_planning v0.1.0 (file:///Users/stuart/coding/efficient_route_planning)\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'called `Option::unwrap()` on a `None` value', ../src/libcore/option.rs:330\nstack backtrace:\n   1:        0x1093b9ed8 - sys::backtrace::tracing::imp::write::h891a4a9fcda67dccF4t\n   2:        0x1093c02bf - panicking::default_handler::_<closure>::closure.41940\n   3:        0x1093bfd02 - panicking::default_handler::hde0cb232bc545756U3x\n   4:        0x109387744 - sys_common::unwind::begin_unwind_inner::haeb4c6adcf4eff3cF7s\n   5:        0x10938819e - sys_common::unwind::begin_unwind_fmt::hab9b7efabf14110aL6s\n   6:        0x1093b7bc7 - rust_begin_unwind\n   7:        0x1093f74a0 - panicking::panic_fmt::h9f005ee999496200zYL\n   8:        0x1093f809c - panicking::panic::h94bef08fa1f352c06WL\n   9:        0x1058fe0f0 - astconv::finish_resolving_def_to_ty::hacb421e7bdf5955egdw\n  10:        0x1058a5d86 - astconv::ast_ty_to_ty::haf6f8296e2d83cebKew\n  11:        0x10596aecd - vec::Vec<T>.FromIterator<T>::from_iter::h14873944433546280617\n  12:        0x105969f38 - astconv::ty_of_method_or_bare_fn::h7a055f7db611db54Yww\n  13:        0x105989c89 - collect::type_scheme_of_item::h2067892662881fd5MOy\n  14:        0x105982315 - collect::convert_typed_item::hdecabafa42870cacJTy\n  15:        0x10596cf86 - collect::convert_item::h44eb9b03536dc0b7hUx\n  16:        0x10596cdaf - collect::CollectItemTypesVisitor<'a, 'tcx>.intravisit..Visitor<'v>::visit_item::h92f0f7f3e1025983Pjx\n  17:        0x10586d18d - collect::collect_item_types::h278d4e31e8bae967dcx\n  18:        0x1058694ae - check_crate::hc203791d3d33f136rNC\n  19:        0x1055ddea5 - driver::phase_3_run_analysis_passes::_<closure>::closure.26524\n  20:        0x1055c6ca4 - middle::ty::context::ctxt<'tcx>::create_and_enter::h9852958659609406721\n  21:        0x1055c29c4 - driver::phase_3_run_analysis_passes::h16134797250592131268\n  22:        0x1055939ca - driver::compile_input::h7726514d4e861b66nca\n  23:        0x1055856c6 - run_compiler::h002f3bf18be58fd27wc\n  24:        0x10558244c - sys_common::unwind::try::try_fn::h4826908832050758591\n  25:        0x1093b7b68 - __rust_try\n  26:        0x1093af87e - sys_common::unwind::try::inner_try::h43266cb9c78f3d03d4s\n  27:        0x105582821 - boxed::F.FnBox<A>::call_box::h5575438983075738237\n  28:        0x1093bf04d - sys::thread::Thread::new::thread_start::h147100c7f507c4fdLix\n  29:     0x7fff8dd5d99c - _pthread_body\n  30:     0x7fff8dd5d919 - _pthread_start\n\nCould not compile `efficient_route_planning`.\n\nTo learn more, run the command again with --verbose.\n```\n\nWhen compiling a project I'm working on. All the other files were compiling fine, and unmodified; below is the current working state of the file I was editing:\n\n``` rust\nextern crate xml;\n\nuse std::fs::File;\nuse std::io::BufReader;\nuse self::xml::reader::{ EventReader, XmlEvent };\n\nuse prep::weighted_graph::{ Graph, weight };\n\npub fn build_graph_from_xml(path: &str) -> Graph {\n    let file = File::open(path).unwrap();\n    let reader = BufReader::new(file);\n\n    let mut parser = EventReader::new(reader);\n    let mut graph = Graph::new();\n    let mut eof = false;\n\n    while !eof {\n        match parser.next() {\n            Ok(e) => match e {\n                XmlEvent::StartElement { name, attributes, .. } => {\n                    println!(\"{:?}\", name.local_name);\n                    println!(\"{:?}\", attributes);\n                    (parser, graph) = dispatch(name, attributes, parser, graph);\n                }\n                XmlEvent::EndDocument => {\n                    eof = true;\n                }\n                _ => {}\n            },\n            Err(e) => println!(\"Error parsing XML document: {}\", e)\n        }\n    }\n\n    graph\n}\n\nfn dispatch(e: XmlEvent::StartElement,\n            parser: EventReader,\n            graph: Graph)\n           -> (EventReader, Graph) {\n}\n\n#[cfg(test)]\nmod test {\n    use super::{ build_graph_from_xml };\n    use prep::weighted_graph:: { Graph };\n\n    fn has_node_ids(graph: &Graph) -> bool {\n        vec![\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\"].iter.all(|id|\n            graph.get_node(id).is_some()\n        )\n    }\n\n    #[test]\n    fn populate_graph() {\n        let graph = build_graph_from_xml(\"data/basic_graph.xml\");\n\n        assert!(has_node_ids(&graph));\n    }\n}\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32867/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32867/timeline", "performed_via_github_app": null, "state_reason": "completed"}