{"url": "https://api.github.com/repos/rust-lang/rust/issues/19380", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19380/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19380/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19380/events", "html_url": "https://github.com/rust-lang/rust/issues/19380", "id": 50381371, "node_id": "MDU6SXNzdWU1MDM4MTM3MQ==", "number": 19380, "title": "Unexpected Panic when compiling static objects", "user": {"login": "IdeaHat", "id": 802039, "node_id": "MDQ6VXNlcjgwMjAzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/802039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IdeaHat", "html_url": "https://github.com/IdeaHat", "followers_url": "https://api.github.com/users/IdeaHat/followers", "following_url": "https://api.github.com/users/IdeaHat/following{/other_user}", "gists_url": "https://api.github.com/users/IdeaHat/gists{/gist_id}", "starred_url": "https://api.github.com/users/IdeaHat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IdeaHat/subscriptions", "organizations_url": "https://api.github.com/users/IdeaHat/orgs", "repos_url": "https://api.github.com/users/IdeaHat/repos", "events_url": "https://api.github.com/users/IdeaHat/events{/privacy}", "received_events_url": "https://api.github.com/users/IdeaHat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-11-28T14:53:27Z", "updated_at": "2015-05-04T20:48:57Z", "closed_at": "2015-05-04T20:48:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm getting a crash when trying to compiler a bunch of const objects, not sure why.\n\nSounce code:\nhttps://github.com/IdeaHat/servo/\nBranch: staticifying\nCommit: 52308c1f01f172caacd4a71a04e0bc519824eba2\nCompiliation Instructions:\n./mach build\n./mach rustc --test ./components/net/mime_classifier.rs\n\n```\ncomponents/net/mime_classifier.rs:349:52: 349:55 warning: path statement with no effect, #[warn(path_statements)] on by default\ncomponents/net/mime_classifier.rs:349                                  if tp.is_some() { tp;}\n                                                                                         ^~~\ncomponents/net/mime_classifier.rs:779:1: 792:3 warning: constant item is never used: `APPLICATION_VND_MS_FONT_OBJECT`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:779 const APPLICATION_VND_MS_FONT_OBJECT : ByteMatcher = ByteMatcher {\ncomponents/net/mime_classifier.rs:780     pattern:  [0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8,\ncomponents/net/mime_classifier.rs:781         0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8,\ncomponents/net/mime_classifier.rs:782         0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8,\ncomponents/net/mime_classifier.rs:783         0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8, 0x00u8,\ncomponents/net/mime_classifier.rs:784         0x00u8, 0x00u8, 0x4Cu8, 0x50u8],\n                                      ...\ncomponents/net/mime_classifier.rs:795:1: 800:3 warning: constant item is never used: `TRUE_TYPE`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:795 const TRUE_TYPE : ByteMatcher = ByteMatcher {\ncomponents/net/mime_classifier.rs:796     pattern: [0x00u8, 0x01u8, 0x00u8, 0x00u8],\ncomponents/net/mime_classifier.rs:797     mask: [0xFFu8, 0xFFu8, 0xFFu8, 0xFFu8],\ncomponents/net/mime_classifier.rs:798     content_type: (\"(TrueType)\",\"\"),\ncomponents/net/mime_classifier.rs:799     leading_ignore: []\ncomponents/net/mime_classifier.rs:800 };\ncomponents/net/mime_classifier.rs:803:1: 808:3 warning: constant item is never used: `OPEN_TYPE`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:803 const OPEN_TYPE : ByteMatcher = ByteMatcher {\ncomponents/net/mime_classifier.rs:804     pattern: [0x4Fu8, 0x54u8, 0x54u8, 0x4Fu8],\ncomponents/net/mime_classifier.rs:805     mask: [0xFFu8, 0xFFu8, 0xFFu8, 0xFFu8],\ncomponents/net/mime_classifier.rs:806     content_type: (\"(OpenType)\",\"\"),\ncomponents/net/mime_classifier.rs:807     leading_ignore: []\ncomponents/net/mime_classifier.rs:808 };\ncomponents/net/mime_classifier.rs:810:1: 815:3 warning: constant item is never used: `TRUE_TYPE_COLLECTION`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:810 const TRUE_TYPE_COLLECTION : ByteMatcher = ByteMatcher {\ncomponents/net/mime_classifier.rs:811     pattern: [0x74u8, 0x74u8, 0x63u8, 0x66u8],\ncomponents/net/mime_classifier.rs:812     mask: [0xFFu8, 0xFFu8, 0xFFu8, 0xFFu8],\ncomponents/net/mime_classifier.rs:813     content_type: (\"(TrueType Collection)\",\"\"),\ncomponents/net/mime_classifier.rs:814     leading_ignore: []\ncomponents/net/mime_classifier.rs:815 };\ncomponents/net/mime_classifier.rs:818:1: 823:3 warning: constant item is never used: `APPLICATION_FONT_WOFF`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:818 const APPLICATION_FONT_WOFF : ByteMatcher = ByteMatcher {\ncomponents/net/mime_classifier.rs:819     pattern: [0x77u8, 0x4Fu8, 0x46u8, 0x46u8],\ncomponents/net/mime_classifier.rs:820     mask: [0xFFu8, 0xFFu8, 0xFFu8, 0xFFu8],\ncomponents/net/mime_classifier.rs:821     content_type: (\"application\",\"font-woff\"),\ncomponents/net/mime_classifier.rs:822     leading_ignore: []\ncomponents/net/mime_classifier.rs:823 };\ncomponents/net/mime_classifier.rs:965:1: 973:3 warning: constant item is never used: `FONT_CLASSIFIER`, #[warn(dead_code)] on by default\ncomponents/net/mime_classifier.rs:965 const FONT_CLASSIFIER : GroupedClassifier = GroupedClassifier {\ncomponents/net/mime_classifier.rs:966     matchers: &[\ncomponents/net/mime_classifier.rs:967       &APPLICATION_FONT_WOFF,\ncomponents/net/mime_classifier.rs:968       &TRUE_TYPE_COLLECTION,\ncomponents/net/mime_classifier.rs:969       &OPEN_TYPE,\ncomponents/net/mime_classifier.rs:970       &TRUE_TYPE,\n                                      ...\ncomponents/net/mime_classifier.rs:980:9: 980:30 warning: unused import, #[warn(unused_imports)] on by default\ncomponents/net/mime_classifier.rs:980     use super::MIMEClassifier;\n                                              ^~~~~~~~~~~~~~~~~~~~~\ncomponents/net/mime_classifier.rs:883:7: 883:20 error: internal compiler error: unimplemented type in const unsize: ByteMatcher\ncomponents/net/mime_classifier.rs:883       &IMAGE_X_ICON,\n                                            ^~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'Box<Any>', /home/larsberg/rust/src/libsyntax/diagnostic.rs:116\n\nstack backtrace:\n   1:     0x7faa03b8e810 - rt::backtrace::imp::write::h51da061815fd4fecscq\n   2:     0x7faa03b91890 - failure::on_fail::h574424058645b8db3xq\n   3:     0x7faa080cb1b0 - unwind::begin_unwind_inner::h0e863b3f5b6ff01e7Rd\n   4:     0x7faa04d465e0 - unwind::begin_unwind::h17623318924066054232\n   5:     0x7faa04d46560 - diagnostic::SpanHandler::span_bug::h6b5bb3dcbe506a53H6F\n   6:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n   7:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n   8:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n   9:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n  10:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n  11:     0x7faa08b106e0 - middle::trans::consts::const_expr_unadjusted::closure.126339\n  12:     0x7faa08b0f400 - middle::trans::expr::with_field_tys::h4176170177473143547\n  13:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n  14:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n  15:     0x7faa08a85410 - middle::trans::base::get_item_val::hb5c95cce53ad1c32TGi\n  16:     0x7faa08b0abc0 - middle::trans::consts::get_const_val::hbdc13f3d5e74a915wvb\n  17:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n  18:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n  19:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n  20:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n  21:     0x7faa08b106e0 - middle::trans::consts::const_expr_unadjusted::closure.126339\n  22:     0x7faa08b0f400 - middle::trans::expr::with_field_tys::h4176170177473143547\n  23:     0x7faa08b0af50 - middle::trans::consts::const_expr_unadjusted::h8d313c26ba6568f6LJb\n  24:     0x7faa08b097f0 - middle::trans::consts::const_expr::h24471e6fd8e1d3e6Kwb\n  25:     0x7faa08a85410 - middle::trans::base::get_item_val::hb5c95cce53ad1c32TGi\n  26:     0x7faa08ad46b0 - middle::trans::expr::trans_def::hd1e848679c813cf2ft6\n  27:     0x7faa08acbce0 - middle::trans::expr::trans_unadjusted::h23078de2d39048ed9Y5\n  28:     0x7faa08a947f0 - middle::trans::expr::trans::h212dc78148e7c0705h5\n  29:     0x7faa08ad7b90 - middle::trans::expr::trans_addr_of::h921cc66a9f5ab965js7\n  30:     0x7faa08acbce0 - middle::trans::expr::trans_unadjusted::h23078de2d39048ed9Y5\n  31:     0x7faa08a93210 - middle::trans::expr::trans_into::hb8916173f4417b10be5\n  32:     0x7faa08b5e440 - middle::trans::_match::store_local::closure.127862\n  33:     0x7faa08b5e0d0 - middle::trans::_match::mk_binding_alloca::h6529477691948147476\n  34:     0x7faa08b2d250 - middle::trans::_match::store_local::hb44613d070de7debY9k\n  35:     0x7faa08a92860 - middle::trans::base::init_local::h133e0c8c07b0fc21mLg\n  36:     0x7faa08a91c20 - middle::trans::controlflow::trans_stmt::hba2148511ea96f7fMp1\n  37:     0x7faa08a93630 - middle::trans::controlflow::trans_block::h716e4eeaa8840a1bSu1\n  38:     0x7faa08b34260 - middle::trans::base::trans_closure::h351dbed1a5bde932RFh\n  39:     0x7faa08a86890 - middle::trans::base::trans_fn::h3693aec3731e5d78ERh\n  40:     0x7faa08a840f0 - middle::trans::base::trans_item::h45f52e422775a7f1Sai\n  41:     0x7faa08a840f0 - middle::trans::base::trans_item::h45f52e422775a7f1Sai\n  42:     0x7faa08b3ea30 - middle::trans::base::trans_crate::h99c1d4d2a3b84039T8i\n  43:     0x7faa08f90760 - driver::driver::phase_4_translate_to_llvm::h4ec643d39136fc7dAyC\n  44:     0x7faa08f87600 - driver::driver::compile_input::h9bffb5cb96391869u5B\n  45:     0x7faa0900a880 - driver::run_compiler::he276f2ba56b78164LVF\n  46:     0x7faa0900a770 - driver::run::closure.146540\n  47:     0x7faa08744ae0 - task::TaskBuilder<S>::try_future::closure.104852\n  48:     0x7faa087448d0 - task::TaskBuilder<S>::spawn_internal::closure.104823\n  49:     0x7faa08411c90 - task::NativeSpawner.Spawner::spawn::closure.8456\n  50:     0x7faa08120150 - rust_try_inner\n  51:     0x7faa08120140 - rust_try\n  52:     0x7faa080c8b30 - unwind::try::h5eecabeb9eb443b7PGd\n  53:     0x7faa080c89c0 - task::Task::run::h8328b0b81b516de7FMc\n  54:     0x7faa084119d0 - task::NativeSpawner.Spawner::spawn::closure.8394\n  55:     0x7faa080ca1d0 - thread::thread_start::h75cf1dc3cee75378U7c\n  56:     0x7faa02f3d0c0 - start_thread\n  57:     0x7faa07d942d9 - __clone\n  58:                0x0 - <unknown>\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19380/timeline", "performed_via_github_app": null, "state_reason": "completed"}