{"url": "https://api.github.com/repos/rust-lang/rust/issues/38124", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38124/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38124/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38124/events", "html_url": "https://github.com/rust-lang/rust/issues/38124", "id": 193029165, "node_id": "MDU6SXNzdWUxOTMwMjkxNjU=", "number": 38124, "title": "Unhelpful Error Messages for trait objects due to trait bounds", "user": {"login": "theduke", "id": 241621, "node_id": "MDQ6VXNlcjI0MTYyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/241621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theduke", "html_url": "https://github.com/theduke", "followers_url": "https://api.github.com/users/theduke/followers", "following_url": "https://api.github.com/users/theduke/following{/other_user}", "gists_url": "https://api.github.com/users/theduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/theduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theduke/subscriptions", "organizations_url": "https://api.github.com/users/theduke/orgs", "repos_url": "https://api.github.com/users/theduke/repos", "events_url": "https://api.github.com/users/theduke/events{/privacy}", "received_events_url": "https://api.github.com/users/theduke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-02T04:01:43Z", "updated_at": "2020-04-29T22:03:02Z", "closed_at": "2020-04-29T22:03:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When a struct cannot be turned into a trait object due to a trait bound,\r\nthe compiler errors are very cryptic and unhelpful.\r\n\r\n```rust\r\ntrait T: Clone {}\r\n\r\n#[derive(Clone)]\r\nstruct S {}\r\n\r\nfn main() {\r\n  let x: &T = & S{};\r\n}\r\n```\r\n\r\nThis results in the following errors (both on stable and nightly):\r\n\r\n```\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nerror[E0038]: the trait `T` cannot be made into an object\r\n  --> <anon>:12:15\r\n   |\r\n12 |   let x: &T = & S{};\r\n   |               ^^^^^ the trait `T` cannot be made into an object\r\n   |\r\n   = note: the trait cannot require that `Self : Sized`\r\n   = note: required because of the requirements on the impl of `std::ops::CoerceUnsized<&T>` for `&S`\r\n\r\nerror[E0038]: the trait `T` cannot be made into an object\r\n  --> <anon>:12:10\r\n   |\r\n12 |   let x: &T = & S{};\r\n   |          ^^ the trait `T` cannot be made into an object\r\n   |\r\n   = note: the trait cannot require that `Self : Sized`\r\n\r\nerror: aborting due to 2 previous errors\r\n```\r\n\r\nThe problem lies with the `: Clone` trait bound, since Clone is not object safe.\r\n\r\nBut the errors do not mention Clone at all, which leaves someone relatively new to Rust (like me) completely stranded and puzzled as to what might be the problem.\r\n\r\nBetter errors here would be a big win.\r\n\r\nMy ideal error would be something like: \r\n\r\n````\r\nthe trait 'T' cannot be made into an object. \r\n...\r\nnote:  T requires the trait bound 'Clone', which cannot be made into an object`.", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38124/reactions", "total_count": 19, "+1": 19, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38124/timeline", "performed_via_github_app": null, "state_reason": "completed"}