{"url": "https://api.github.com/repos/rust-lang/rust/issues/38588", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38588/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38588/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38588/events", "html_url": "https://github.com/rust-lang/rust/issues/38588", "id": 197458279, "node_id": "MDU6SXNzdWUxOTc0NTgyNzk=", "number": 38588, "title": "Emscripten compilation is failing", "user": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}, {"id": 509440702, "node_id": "MDU6TGFiZWw1MDk0NDA3MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-asmjs", "name": "O-asmjs", "color": "6e6ec0", "default": false, "description": "Target: asm.js - http://asmjs.org/"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2016-12-24T10:47:49Z", "updated_at": "2017-09-13T15:23:15Z", "closed_at": "2017-01-03T20:58:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Latest nightly build of rustc, fresh installation of Empscripten, Windows 10, 64-bit.\r\n\r\nGiven this basic `hello.rs`:\r\n\r\n```rust\r\nfn main() { println!(\"Hello, Emscripten!\"); }\r\n```\r\n\r\nThis is what I get when I try to compile it with Emscripten:\r\n\r\n```\r\nC:\\Users\\me\\AppData\\Local\\Temp>rustc --target=wasm32-unknown-emscripten hello.rs -C linker=emcc.bat\r\nerror: linking with `emcc.bat` failed: exit code: 1\r\n  |\r\n  = note: \"emcc.bat\" \"-L\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"hello.0.o\" \"-o\" \"hello.js\" \"-Wl,--gc-sections\" \"-nodefaultlibs\" \"-L\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\" \"-Wl,-Bstatic\" \"-Wl,-Bdynamic\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libstd-17342542cc541012.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\librand-46ed9b788a6928f6.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcollections-e32369d7fef31fbf.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libstd_unicode-7f34decaf2f17f36.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libpanic_unwind-f78756b576499725.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libunwind-11f7709e0c71505b.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liballoc-24699c1ddb055eb0.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liballoc_system-3e467e865c8fa572.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\liblibc-60365c932e50e382.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcore-d9873b515905cac5.rlib\" \"C:\\\\Users\\\\me\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\wasm32-unknown-emscripten\\\\lib\\\\libcompiler_builtins-e428224f6caf212a.rlib\" \"-l\" \"c\" \"-s\" \"BINARYEN=1\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\"\r\n  = note: WARNING:root:Assigning a non-existent settings attribute \"BINARYEN\"\r\nWARNING:root: - perhaps a typo in emcc's  -s X=Y  notation?\r\nWARNING:root: - (see src/settings.js for valid values)\r\nerror: Unknown attribute kind (52)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Invalid type for value\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (52)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Invalid type for value\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (48)\r\nerror: Unknown attribute kind (52)\r\nTraceback (most recent call last):\r\n  File \"C:\\Program Files\\Emscripten\\emscripten\\1.35.0\\\\emcc\", line 1309, in <module>\r\n    final = shared.Building.llvm_opt(final, link_opts, DEFAULT_FINAL)\r\n  File \"C:\\Program Files\\Emscripten\\emscripten\\1.35.0\\tools\\shared.py\", line 1471, in llvm_opt\r\n    assert os.path.exists(target), 'Failed to run llvm optimizations: ' + output\r\nAssertionError: Failed to run llvm optimizations:\r\n\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\n/cc @kripken; not sure if this should be here or in https://github.com/kripken/emscripten.", "closed_by": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38588/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38588/timeline", "performed_via_github_app": null, "state_reason": "completed"}