{"url": "https://api.github.com/repos/rust-lang/cargo/issues/11275", "repository_url": "https://api.github.com/repos/rust-lang/cargo", "labels_url": "https://api.github.com/repos/rust-lang/cargo/issues/11275/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/cargo/issues/11275/comments", "events_url": "https://api.github.com/repos/rust-lang/cargo/issues/11275/events", "html_url": "https://github.com/rust-lang/cargo/issues/11275", "id": 1419335251, "node_id": "I_kwDOAQnScc5UmVZT", "number": 11275, "title": "Profile based `rustflags` generate unknown unstable option: `build-std`", "user": {"login": "Wyvern", "id": 32942, "node_id": "MDQ6VXNlcjMyOTQy", "avatar_url": "https://avatars.githubusercontent.com/u/32942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wyvern", "html_url": "https://github.com/Wyvern", "followers_url": "https://api.github.com/users/Wyvern/followers", "following_url": "https://api.github.com/users/Wyvern/following{/other_user}", "gists_url": "https://api.github.com/users/Wyvern/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wyvern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wyvern/subscriptions", "organizations_url": "https://api.github.com/users/Wyvern/orgs", "repos_url": "https://api.github.com/users/Wyvern/repos", "events_url": "https://api.github.com/users/Wyvern/events{/privacy}", "received_events_url": "https://api.github.com/users/Wyvern/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 84096804, "node_id": "MDU6TGFiZWw4NDA5NjgwNA==", "url": "https://api.github.com/repos/rust-lang/cargo/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: bug"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-10-22T06:34:28Z", "updated_at": "2022-12-11T18:55:31Z", "closed_at": "2022-12-11T18:55:30Z", "author_association": "NONE", "active_lock_reason": null, "body": "When using some -Z flags in `profile based rustflags` such as `build-std` `build-std-features` `panic-in-drop=abort`, the compiler generate error `unknown unstable option:  build-std ...`.\r\n\r\nfor example: a customized `src` profile with `rustflags`:\r\n\r\n```\r\n[profile.src]\r\ninherits = \"release\"\r\npanic=\"abort\"\r\nrustflags = [\"-Zbuild-std=core,alloc,std,\"-Zbuild-std-features=panic_immediate_abort\",\"-Zpanic-in-drop=abort\"]\r\n[profile.std.build-override]\r\ninherits = \"release\"\r\n[profile.std.package.\"*\"]\r\ninherits = \"release\"\r\n\r\n```\r\nWhen build using `cargo b --profile src` the above error raised.\r\n\r\nIs it a bug of `cargo-features = [\"profile-rustflags\"]` or something else?\r\n", "closed_by": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/cargo/issues/11275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/cargo/issues/11275/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}