{"url": "https://api.github.com/repos/rust-lang/rust/issues/26618", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26618/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26618/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26618/events", "html_url": "https://github.com/rust-lang/rust/issues/26618", "id": 91449424, "node_id": "MDU6SXNzdWU5MTQ0OTQyNA==", "number": 26618, "title": "Rust to Emscripten", "user": {"login": "adjivas", "id": 6086961, "node_id": "MDQ6VXNlcjYwODY5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/6086961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adjivas", "html_url": "https://github.com/adjivas", "followers_url": "https://api.github.com/users/adjivas/followers", "following_url": "https://api.github.com/users/adjivas/following{/other_user}", "gists_url": "https://api.github.com/users/adjivas/gists{/gist_id}", "starred_url": "https://api.github.com/users/adjivas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adjivas/subscriptions", "organizations_url": "https://api.github.com/users/adjivas/orgs", "repos_url": "https://api.github.com/users/adjivas/repos", "events_url": "https://api.github.com/users/adjivas/events{/privacy}", "received_events_url": "https://api.github.com/users/adjivas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-06-27T11:30:59Z", "updated_at": "2015-06-27T20:15:23Z", "closed_at": "2015-06-27T20:07:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi @all!\n\nIn this issue, I try to understand how use Rust with Emscripten and I try this:\n\nWhat I want do:\n\n``` shell\n$ cargo new hello --bin && cd ./hello &&  #OK\n  rustc  --emit=llvm-ir ./src/main.rs  &&  #OK\n  emcc -v ./src/main.ll -o ./test.html;  #FAIL\n```\n\nThe output-error:\n\n``` shell\n$ emcc -v main.ll -o ./src/test.html;\n  INFO     root: (Emscripten: Running sanity checks)\n  /opt/emscripten-fastcomp/llvm-as: main.ll:21:112: error: expected comma after getelementptr's type\n  @ref978 = internal unnamed_addr constant [1 x %str_slice] [%str_slice { i8* getelementptr inbounds ([14 x i8]* @str977, i32 0, i32 0), i64 14 }]\n                                                                                                               ^\n  Traceback (most recent call last):\n    File \"/usr/bin/emcc\", line 1110, in <module>\n      shared.Building.llvm_as(input_file, temp_file)\n    File \"/usr/lib/emscripten/tools/shared.py\", line 1461, in llvm_as\n      assert os.path.exists(output_filename), 'Could not create bc file: ' + output\n  AssertionError: Could not create bc file: \n```\n\nThank you in for the help that you can give.\n\n---\n\nAbout my binary versions:\n\n``` shell\n$ rustc --version;\n  rustc 1.2.0-dev (ae74652b4 2015-06-07)\n$ cargo --version;\n  cargo 0.2.0-nightly (efb482d 2015-04-30) (built 2015-04-30)\n$ emcc --version;\n  emcc (Emscripten gcc/clang-like replacement) 1.34.1 ()\n  Copyright (C) 2014 the Emscripten authors (see AUTHORS.txt)\n  This is free and open source software under the MIT license.\n  There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26618/timeline", "performed_via_github_app": null, "state_reason": "completed"}