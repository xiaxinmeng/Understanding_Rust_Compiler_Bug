{"url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926", "repository_url": "https://api.github.com/repos/rust-lang/rust-clippy", "labels_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926/comments", "events_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926/events", "html_url": "https://github.com/rust-lang/rust-clippy/issues/9926", "id": 1458607411, "node_id": "I_kwDOAZm0i85W8JUz", "number": 9926, "title": "Compiler error after running cargo clippy --fix", "user": {"login": "typesanitizer", "id": 7187503, "node_id": "MDQ6VXNlcjcxODc1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/7187503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/typesanitizer", "html_url": "https://github.com/typesanitizer", "followers_url": "https://api.github.com/users/typesanitizer/followers", "following_url": "https://api.github.com/users/typesanitizer/following{/other_user}", "gists_url": "https://api.github.com/users/typesanitizer/gists{/gist_id}", "starred_url": "https://api.github.com/users/typesanitizer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/typesanitizer/subscriptions", "organizations_url": "https://api.github.com/users/typesanitizer/orgs", "repos_url": "https://api.github.com/users/typesanitizer/repos", "events_url": "https://api.github.com/users/typesanitizer/events{/privacy}", "received_events_url": "https://api.github.com/users/typesanitizer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 149309557, "node_id": "MDU6TGFiZWwxNDkzMDk1NTc=", "url": "https://api.github.com/repos/rust-lang/rust-clippy/labels/C-bug", "name": "C-bug", "color": "F5F1FD", "default": false, "description": "Category: Clippy is not doing the correct thing"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-13T15:10:02Z", "updated_at": "2022-11-21T21:28:22Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Configurations checked:\r\n- `clippy 0.1.66 (42325c52 2022-11-11)`, `cargo 1.67.0-nightly (9286a1beb 2022-11-04)` (via `cargo +nightly clippy --fix`)\r\n- `clippy 0.1.65 (897e3755 2022-11-02)`, `cargo 1.65.0 (4bc8f24d3 2022-10-20)`\r\n\r\nIf you clone the repo with the initial commit:\r\n\r\nhttps://github.com/typesanitizer/pichpich/tree/b971066734479f1bae779a0fa481fdc0d2b4e458\r\n\r\nThen running `cargo clippy --fix` gives an error: (there are other warnings from clippy too but not showing those here)\r\n\r\n```\r\nafter fixes were automatically applied the compiler reported errors within these files:\r\n\r\n  * src/lib.rs\r\n\r\nThis likely indicates a bug in either rustc or cargo itself,\r\nand we would appreciate a bug report! You're likely to see\r\na number of compiler warnings after this message which cargo\r\nattempted to fix but failed. If you could open an issue at\r\nhttps://github.com/rust-lang/rust/issues\r\nquoting the full output of this command we'd be very appreciative!\r\nNote that you may be able to make some more progress in the near-term\r\nfixing code with the `--broken-code` flag\r\n\r\nThe following errors were reported:\r\nerror[E0277]: a value of type `std::vec::Vec<AppErrorNewtype>` cannot be built from an iterator over elements of type `std::boxed::Box<AppErrorNewtype>`\r\n    --> src/lib.rs:30:24\r\n     |\r\n30   |               unrelated: errors\r\n     |  ________________________^\r\n31   | |                 .into_iter()\r\n32   | |                 .map(|e| Box::new(AppErrorNewtype(e)))\r\n     | |______________________________________________________^ value of type `std::vec::Vec<AppErrorNewtype>` cannot be built from `std::iter::Iterator<Item=std::boxed::Box<AppErrorNewtype>>`\r\n33   |                   .collect(),\r\n     |                    ------- required by a bound introduced by this call\r\n     |\r\n     = help: the trait `std::iter::FromIterator<std::boxed::Box<AppErrorNewtype>>` is not implemented for `std::vec::Vec<AppErrorNewtype>`\r\n     = help: the trait `std::iter::FromIterator<T>` is implemented for `std::vec::Vec<T>`\r\nnote: required by a bound in `std::iter::Iterator::collect`\r\n    --> /Users/varun/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/iter/traits/iterator.rs:1832:19\r\n     |\r\n1832 |     fn collect<B: FromIterator<Self::Item>>(self) -> B\r\n     |                   ^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `std::iter::Iterator::collect`\r\n\r\nerror[E0599]: the method `as_ref` exists for reference `&AppErrorNewtype`, but its trait bounds were not satisfied\r\n   --> src/lib.rs:57:45\r\n    |\r\n57  |             self.unrelated.iter().map(|b| b.as_ref() as &dyn Diagnostic),\r\n    |                                             ^^^^^^ method cannot be called on `&AppErrorNewtype` due to unsatisfied trait bounds\r\n...\r\n79  | pub struct AppErrorNewtype(pub AppError);\r\n    | -------------------------- doesn't satisfy `AppErrorNewtype: std::convert::AsRef<_>`\r\n    |\r\n    = note: the following trait bounds were not satisfied:\r\n            `AppErrorNewtype: std::convert::AsRef<_>`\r\n            which is required by `&AppErrorNewtype: std::convert::AsRef<_>`\r\nnote: the following trait must be implemented\r\n   --> /Users/varun/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/convert/mod.rs:218:1\r\n    |\r\n218 | pub trait AsRef<T: ?Sized> {\r\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    = help: items from traits can only be used if the trait is implemented and in scope\r\n    = note: the following trait defines an item `as_ref`, perhaps you need to implement it:\r\n            candidate rust-lang/rust#1: `std::convert::AsRef`\r\n\r\nerror: aborting due to 2 previous errors\r\n\r\nSome errors have detailed explanations: E0277, E0599.\r\nFor more information about an error, try `rustc --explain E0277`.\r\nOriginal diagnostics will follow.\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/9926/timeline", "performed_via_github_app": null, "state_reason": null}