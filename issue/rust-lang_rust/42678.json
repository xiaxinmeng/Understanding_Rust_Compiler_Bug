{"url": "https://api.github.com/repos/rust-lang/rust/issues/42678", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42678/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42678/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42678/events", "html_url": "https://github.com/rust-lang/rust/issues/42678", "id": 236233827, "node_id": "MDU6SXNzdWUyMzYyMzM4Mjc=", "number": 42678, "title": "Improved query-integrated debug output and profiling ", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-15T15:43:08Z", "updated_at": "2022-01-12T15:42:02Z", "closed_at": "2022-01-12T15:42:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The new query system kind of up-ends our existing `-Ztime-passes`. In addition, `RUST_LOG` is obviously a very primitive logging system, with no ability to track indentation or give you much for context. We have to do better.\r\n\r\n@matthewhammer has been working on a nifty new system for visualizing what a rust compilation is doing and where it spends its time. The rough idea is -- when enabled, of course -- to intercept when queries start and end and plot that information visually. This lets us see which queries ran and in which order, and whether there were cache hits or misses. There is a bunch of other information that I would like access to:\r\n\r\n- How much time did we spend in each query (and each kind of query)?\r\n    - Maybe useful to separate that into \"own\" time and \"child\" time.\r\n- What debug logs were emitted during each query?\r\n- Which items was each query processing -- it'd be great to be able to get \"just the logs that were emitted when processing `foo`\"\r\n\r\nAnyway, this is intended as a general tracking and discussion issue for this work. ", "closed_by": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42678/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42678/timeline", "performed_via_github_app": null, "state_reason": "completed"}