{"url": "https://api.github.com/repos/rust-lang/rust/issues/32417", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32417/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32417/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32417/events", "html_url": "https://github.com/rust-lang/rust/issues/32417", "id": 142509206, "node_id": "MDU6SXNzdWUxNDI1MDkyMDY=", "number": 32417, "title": "Recursive struct hangs compilation on Nightly 03-19", "user": {"login": "cengiz-io", "id": 123910, "node_id": "MDQ6VXNlcjEyMzkxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/123910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cengiz-io", "html_url": "https://github.com/cengiz-io", "followers_url": "https://api.github.com/users/cengiz-io/followers", "following_url": "https://api.github.com/users/cengiz-io/following{/other_user}", "gists_url": "https://api.github.com/users/cengiz-io/gists{/gist_id}", "starred_url": "https://api.github.com/users/cengiz-io/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cengiz-io/subscriptions", "organizations_url": "https://api.github.com/users/cengiz-io/orgs", "repos_url": "https://api.github.com/users/cengiz-io/repos", "events_url": "https://api.github.com/users/cengiz-io/events{/privacy}", "received_events_url": "https://api.github.com/users/cengiz-io/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-03-22T00:22:05Z", "updated_at": "2016-03-24T20:46:49Z", "closed_at": "2016-03-24T20:46:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello!\n\nI'm on OSX 10.11.3.\n\nA recursive struct like this [throws a nice error in stable](https://play.rust-lang.org/?code=struct%20Line%20%7B%0A%20%20%20%20start%3A%20Line%2C%0A%20%20%20%20end%3A%20Line%0A%7D%0A%0Afn%20main%28%29%20%7B%7D%0A&version=stable)\n\n``` rust\nstruct Line {\n    start: Line,\n    end: Line,\n}\n\nfn main() {\n}\n```\n\nHowever, in `2016-03-19` it just hangs `rustc`.\n\nI tried to gather some details using `lldb`\n\n```\n(lldb) process attach --pid 58606\nProcess 58606 stopped\n* thread #1: tid = 0x3928a9, 0x00007fff9c49b206 libsystem_kernel.dylib`__semwait_signal + 10, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n    frame #0: 0x00007fff9c49b206 libsystem_kernel.dylib`__semwait_signal + 10\nlibsystem_kernel.dylib`__semwait_signal:\n->  0x7fff9c49b206 <+10>: jae    0x7fff9c49b210            ; <+20>\n    0x7fff9c49b208 <+12>: movq   %rax, %rdi\n    0x7fff9c49b20b <+15>: jmp    0x7fff9c495c02            ; cerror\n    0x7fff9c49b210 <+20>: retq\n\nExecutable module set to \"/usr/local/bin/rustc\".\nArchitecture set to: x86_64h-apple-macosx.\n(lldb) thread backtrace all\n* thread #1: tid = 0x3928a9, 0x00007fff9c49b206 libsystem_kernel.dylib`__semwait_signal + 10, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  * frame #0: 0x00007fff9c49b206 libsystem_kernel.dylib`__semwait_signal + 10\n    frame #1: 0x00007fff926e7c27 libsystem_pthread.dylib`pthread_join + 444\n    frame #2: 0x000000010ae5955e libstd-18402db3.dylib`sys::thread::Thread::join::h0209efa0d5ad7236czy + 14\n    frame #3: 0x0000000106961325 librustc_driver-18402db3.dylib`run::h6b4b5eb66973e302OLc + 2725\n    frame #4: 0x000000010698921b librustc_driver-18402db3.dylib`main::h714cd508a226d964R0d + 1115\n    frame #5: 0x000000010ae59aa3 libstd-18402db3.dylib`sys_common::unwind::try::try_fn::h12338358783828243857 + 35\n    frame #6: 0x000000010ae4e79c libstd-18402db3.dylib`__rust_try + 12\n    frame #7: 0x000000010ae59959 libstd-18402db3.dylib`rt::lang_start::h59eb5c015962608228y + 505\n    frame #8: 0x000000010695aec4 rustc`start + 52\n\n  thread #2: tid = 0x3928aa, 0x0000000107867173 librustc-18402db3.dylib`middle::subst::Substs$LT$$u27$tcx$GT$...std..hash..Hash::hash::h930124296078282112 + 563, name = 'rustc'\n    frame #0: 0x0000000107867173 librustc-18402db3.dylib`middle::subst::Substs$LT$$u27$tcx$GT$...std..hash..Hash::hash::h930124296078282112 + 563\n    frame #1: 0x000000010787f9a1 librustc-18402db3.dylib`collections::hash::set::HashSet$LT$T$C$$u20$S$GT$::insert::h16525620572284354841 + 129\n    frame #2: 0x0000000107881044 librustc-18402db3.dylib`iter::FilterMap$LT$I$C$$u20$F$GT$.Iterator::next::h10479979705998296605 + 2836\n    frame #3: 0x000000010787e7fd librustc-18402db3.dylib`middle::traits::fulfill::process_predicate::hc70860709ec86ab05US + 11293\n    frame #4: 0x000000010787aa84 librustc-18402db3.dylib`obligation_forest::ObligationForest$LT$O$C$$u20$T$GT$::process_obligations::h18416070063450621727 + 420\n    frame #5: 0x000000010787619d librustc-18402db3.dylib`middle::traits::fulfill::FulfillmentContext$LT$$u27$tcx$GT$::select_where_possible::h817133e3c0e6314baNS + 285\n    frame #6: 0x0000000107317355 librustc_typeck-18402db3.dylib`check::FnCtxt$LT$$u27$a$C$$u20$$u27$tcx$GT$::select_obligations_where_possible::h7ea8359c24588fcdiMq + 69\n    frame #7: 0x0000000107316a76 librustc_typeck-18402db3.dylib`check::FnCtxt$LT$$u27$a$C$$u20$$u27$tcx$GT$::select_all_obligations_and_apply_defaults::hb16d7cdeef868ac5Ayq + 9606\n    frame #8: 0x000000010731768c librustc_typeck-18402db3.dylib`check::FnCtxt$LT$$u27$a$C$$u20$$u27$tcx$GT$::select_all_obligations_or_error::hfdec5f3d4f35bfa6bKq + 60\n    frame #9: 0x000000010730df67 librustc_typeck-18402db3.dylib`check::wfcheck::CheckTypeWellFormedVisitor$LT$$u27$ccx$C$$u20$$u27$tcx$GT$.Visitor$LT$$u27$v$GT$::visit_item::h70c5a6a8c34d93e9uXk + 4375\n    frame #10: 0x0000000107303ad0 librustc_typeck-18402db3.dylib`check::check_wf_new::h46828c06d7effb2dTIo + 816\n    frame #11: 0x00000001072fb864 librustc_typeck-18402db3.dylib`check_crate::h3e3d779ef330fadcCFC + 3204\n    frame #12: 0x00000001069a9db2 librustc_driver-18402db3.dylib`driver::phase_3_run_analysis_passes::_$u7b$$u7b$closure$u7d$$u7d$::closure.30095 + 146\n    frame #13: 0x00000001069a83ea librustc_driver-18402db3.dylib`middle::ty::context::TyCtxt$LT$$u27$tcx$GT$::create_and_enter::h11812805895441873020 + 8282\n    frame #14: 0x00000001069a4dae librustc_driver-18402db3.dylib`driver::phase_3_run_analysis_passes::h5261001332275006052 + 11550\n    frame #15: 0x0000000106977df8 librustc_driver-18402db3.dylib`driver::compile_input::he5def18759d9424cPca + 8440\n    frame #16: 0x00000001069656f7 librustc_driver-18402db3.dylib`run_compiler::h61ff55f691b932efVMc + 4023\n    frame #17: 0x0000000106962ca3 librustc_driver-18402db3.dylib`sys_common::unwind::try::try_fn::h2984156204492186173 + 467\n    frame #18: 0x000000010ae4e79c libstd-18402db3.dylib`__rust_try + 12\n    frame #19: 0x000000010ae4e724 libstd-18402db3.dylib`sys_common::unwind::inner_try::hbef67b929e699248JDt + 116\n    frame #20: 0x000000010696353a librustc_driver-18402db3.dylib`boxed::F.FnBox$LT$A$GT$::call_box::h8793623295134616532 + 394\n    frame #21: 0x000000010ae592c9 libstd-18402db3.dylib`sys::thread::Thread::new::thread_start::h68477ad6a3ba8036fvy + 57\n    frame #22: 0x00007fff926e6c13 libsystem_pthread.dylib`_pthread_body + 131\n    frame #23: 0x00007fff926e6b90 libsystem_pthread.dylib`_pthread_start + 168\n    frame #24: 0x00007fff926e4375 libsystem_pthread.dylib`thread_start + 13\n```\n\nThanks for the great work!\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32417/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32417/timeline", "performed_via_github_app": null, "state_reason": "completed"}