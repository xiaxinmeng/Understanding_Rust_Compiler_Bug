{"url": "https://api.github.com/repos/rust-lang/rust/issues/26258", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26258/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26258/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26258/events", "html_url": "https://github.com/rust-lang/rust/issues/26258", "id": 87852728, "node_id": "MDU6SXNzdWU4Nzg1MjcyOA==", "number": 26258, "title": "Indicate which version of MSVC Rust was built with", "user": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 266005765, "node_id": "MDU6TGFiZWwyNjYwMDU3NjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-msvc", "name": "O-windows-msvc", "color": "6e6ec0", "default": false, "description": "Toolchain: MSVC, Operating system: Windows"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-06-12T21:05:46Z", "updated_at": "2019-03-16T14:44:19Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "When linking to the CRT on Windows, all code that is statically linked together needs to use the same version of the CRT. Different versions of the CRT (aka they have different DLL names) are not ABI compatible, so `msvcrt120.dll` and `msvcrt110.dll` are not ABI compatible. In particular, almost all Rust code links statically to `libstd`, so the version of the CRT that `libstd` uses needs to be same version of the CRT that Rust code using that `libstd` is using.\n\nFor the gnu version of Rust, it relies on `msvcrt.dll` and since all versions of MinGW will link to `msvcrt.dll` everything is fine and dandy.\n\nHowever, for the MSVC version of Rust, it is linked against a specific versioned CRT such as `msvcrt120.dll`. Since the version of the CRT depends on which version of MSVC you build your code with, there is a possibility for you to use a different version of the CRT than `libstd` was built with, causing room for potential ABI issues. There's even separate debug/release versions of the CRT for each version, as well as static/dynamically linked versions of the CRT.\n\nTherefore, to ensure that there is no ABI compatibility issues, distributions of the MSVC version of Rust should indicate exactly which version of MSVC and the CRT they were built with.\n\nNote that this is purely an issue for developers using Rust to build their code with the msvc toolchain. End-users of binaries built by Rust merely need to have the appropriate redistributable installed and there's no ABI concerns there.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26258/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26258/timeline", "performed_via_github_app": null, "state_reason": null}