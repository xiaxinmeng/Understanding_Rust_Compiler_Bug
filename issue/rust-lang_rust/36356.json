{"url": "https://api.github.com/repos/rust-lang/rust/issues/36356", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36356/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36356/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36356/events", "html_url": "https://github.com/rust-lang/rust/issues/36356", "id": 175881468, "node_id": "MDU6SXNzdWUxNzU4ODE0Njg=", "number": 36356, "title": "Does our LLVM need the fastcomp backend for emscripten?", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2016-09-08T22:31:27Z", "updated_at": "2016-10-01T06:49:03Z", "closed_at": "2016-10-01T06:49:03Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In https://github.com/rust-lang/rust/pull/36339 we're updating LLVM to [include the fastcomp](https://github.com/rust-lang/llvm/pull/50) backend. Upon reflection, however, I'm not actually sure if we need it in _our_ fork of LLVM? I'm led to believe that it's our (rustc's) job to emit _LLVM bytecode_ which `emcc` then slurps up and generates JS with. I'm led to believe that `emcc` needs and runs the fastcomp backend, but we as the Rust compiler generating bytecode otherwise wouldn't use it at all. I do believe, however, that we would need at least the _definition_ of the asmjs target to LLVM. That is, we'd need some minor patch so it understands what the \"asmjs\" target is.\n\ncc @sunfish, @kripken, does this sound right? This would certainly reduce the maintenance burden on both sides! All we'd need to do is ensure that we're both working with equivalent versions of LLVM (which shouldn't be too hard)\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36356/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36356/timeline", "performed_via_github_app": null, "state_reason": "completed"}