{"url": "https://api.github.com/repos/rust-lang/rust/issues/14895", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/14895/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/14895/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/14895/events", "html_url": "https://github.com/rust-lang/rust/issues/14895", "id": 35729253, "node_id": "MDU6SXNzdWUzNTcyOTI1Mw==", "number": 14895, "title": "ICE: Type metadata for unique id '{&{&[]{struct c5265340fd5e95cf/2157e}}}' is already in the TypeMap!", "user": {"login": "am0d", "id": 139484, "node_id": "MDQ6VXNlcjEzOTQ4NA==", "avatar_url": "https://avatars.githubusercontent.com/u/139484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/am0d", "html_url": "https://github.com/am0d", "followers_url": "https://api.github.com/users/am0d/followers", "following_url": "https://api.github.com/users/am0d/following{/other_user}", "gists_url": "https://api.github.com/users/am0d/gists{/gist_id}", "starred_url": "https://api.github.com/users/am0d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/am0d/subscriptions", "organizations_url": "https://api.github.com/users/am0d/orgs", "repos_url": "https://api.github.com/users/am0d/repos", "events_url": "https://api.github.com/users/am0d/events{/privacy}", "received_events_url": "https://api.github.com/users/am0d/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-06-14T14:23:17Z", "updated_at": "2014-06-18T15:33:14Z", "closed_at": "2014-06-14T15:03:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "My Travis CI builds started failing yesterday for a few very simple programs.  Here's a sample:\n\n```\nuse std::os;\n\nfn fact(n: int) -> int {\n    let mut result = 1;\n    let mut i = 1;\n    while i <= n {\n        result *= i;\n        i += 1;\n    }\n\n    result\n}\n\nfn main() {\n    let args = os::args();\n    if args.len() >= 2 {\n        let val = match from_str::<int>(args.get(1).as_slice()) {\n            Some(n) => { n}\n            _ => {\n                fail!(\"n must be an integer\");\n            }\n        };\n\n        let val= fact(val);\n        println!(\"{}\", val);\n    }\n    else {\n        println!(\"Usage: {} n\", args.get(0));\n    }\n}\n```\n\nHere's the compiler version I'm using:\n\n```\n$ rustc --version\nrustc 0.11.0-pre (d64f18c 2014-06-14 10:36:46 +0000)\nhost: x86_64-unknown-linux-gnu\n```\n\nHere's the output:\n\n```\n$ RUST_BACKTRACE=1 make\nrustc -L . -O -g fact.rs\nerror: internal compiler error: Type metadata for unique id '{&{&[]{struct c5265340fd5e95cf/2157e}}}' is already in the TypeMap!\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /home/a_m0d/workspace/rust/rust-git/src/libsyntax/diagnostic.rs:162\n\nstack backtrace:\n   1:     0x7fd483b46b10 - rt::backtrace::imp::write::hcabbaed93b4a98e5BGp::v0.11.0.pre\n   2:     0x7fd483b4e240 - failure::on_fail::hbb978a5d8c60ba05O1p::v0.11.0.pre\n   3:     0x7fd483f5ebd0 - unwind::begin_unwind_inner::h44989725a2971cebQRd::v0.11.0.pre\n   4:     0x7fd482e3ba10 - unwind::begin_unwind::h14189599302266478606::v0.11.0.pre\n   5:     0x7fd482e3c450 - diagnostic::Handler::bug::h7c581c7c950ff91bW3b::v0.11.0.pre\n   6:     0x7fd4845c2a20 - driver::session::Session::bug::h0b37439c222facdbMkw::v0.11.0.pre\n   7:     0x7fd48471efd0 - middle::trans::debuginfo::TypeMap::register_unique_id_with_metadata::hd285f7ffd8d40948YpB::v0.11.0.pre\n   8:     0x7fd48472ad40 - middle::trans::debuginfo::type_metadata::h7e40fd5de8f2084c1ZD::v0.11.0.pre\n   9:     0x7fd48472fa00 - middle::trans::debuginfo::declare_local::h2ef60ae7ae4e79152DC::v0.11.0.pre\n  10:     0x7fd48472ed20 - middle::trans::debuginfo::create_local_var_metadata::closure.68299\n  11:     0x7fd484b247c0 - middle::pat_util::pat_bindings::closure.80677\n  12:     0x7fd482e83580 - ast_util::walk_pat::h986992b8f14168226Du::v0.11.0.pre\n  13:     0x7fd4845f3420 - middle::trans::controlflow::trans_stmt::h24d6d571b97ebc4aKdc::v0.11.0.pre\n  14:     0x7fd4845f50d0 - middle::trans::controlflow::trans_block::h591e39dcfd941e5e0ic::v0.11.0.pre\n  15:     0x7fd4846374c0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hb6a52facd2ebe117umg::v0.11.0.pre\n  16:     0x7fd4845f4b30 - middle::trans::expr::trans_into::hf6cfd7b67570103dpvf::v0.11.0.pre\n  17:     0x7fd48464b410 - middle::trans::_match::trans_match::h32a62d3fd67945c7Kmu::v0.11.0.pre\n  18:     0x7fd4846374c0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hb6a52facd2ebe117umg::v0.11.0.pre\n  19:     0x7fd4845f4b30 - middle::trans::expr::trans_into::hf6cfd7b67570103dpvf::v0.11.0.pre\n  20:     0x7fd4845f3e20 - middle::trans::controlflow::trans_stmt_semi::he15d494a96ca551a7hc::v0.11.0.pre\n  21:     0x7fd4845f3420 - middle::trans::controlflow::trans_stmt::h24d6d571b97ebc4aKdc::v0.11.0.pre\n  22:     0x7fd4845f50d0 - middle::trans::controlflow::trans_block::h591e39dcfd941e5e0ic::v0.11.0.pre\n  23:     0x7fd4845f54f0 - middle::trans::controlflow::trans_if::hcea473d2050d7403Dmc::v0.11.0.pre\n  24:     0x7fd4846374c0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hb6a52facd2ebe117umg::v0.11.0.pre\n  25:     0x7fd4845f4b30 - middle::trans::expr::trans_into::hf6cfd7b67570103dpvf::v0.11.0.pre\n  26:     0x7fd4845f50d0 - middle::trans::controlflow::trans_block::h591e39dcfd941e5e0ic::v0.11.0.pre\n  27:     0x7fd4846b9630 - middle::trans::base::trans_closure::h02f596fb01b0b2e0Xkq::v0.11.0.pre\n  28:     0x7fd4845c3db0 - middle::trans::base::trans_fn::h6bc5ecdcaec1151aYsq::v0.11.0.pre\n  29:     0x7fd4845bc420 - middle::trans::base::trans_item::hfeeac4af1b332808nJq::v0.11.0.pre\n  30:     0x7fd4846ca8a0 - middle::trans::base::trans_crate::h74f6a3231c20c466PCr::v0.11.0.pre\n  31:     0x7fd484ef82a0 - driver::driver::phase_4_translate_to_llvm::h5468dd3223cb1730xvv::v0.11.0.pre\n  32:     0x7fd484eec5f0 - driver::driver::compile_input::h956ea0cfd2bc5873Bav::v0.11.0.pre\n  33:     0x7fd484fb70a0 - driver::run_compiler::hf66f8f8e8ba58aaa9Rx::v0.11.0.pre\n  34:     0x7fd484fb6fb0 - driver::main_args::closure.98523\n  35:     0x7fd484fd2b10 - driver::monitor::closure.99613\n  36:     0x7fd484fcda50 - task::TaskBuilder::try::closure.99376\n  37:     0x7fd487002cf0 - task::spawn_opts::closure.7149\n  38:     0x7fd483f5b780 - task::Task::run::closure.5303\n  39:     0x7fd483fc61b0 - rust_try\n  40:     0x7fd483f5e1c0 - unwind::try::h1607dd06ad9105b4fGd::v0.11.0.pre\n  41:     0x7fd483f5b600 - task::Task::run::hcb1447ce6c1c6534VVc::v0.11.0.pre\n  42:     0x7fd487002a90 - task::spawn_opts::closure.7122\n  43:     0x7fd483f5d790 - thread::thread_start::h88783297762ac3a3kdd::v0.11.0.pre\n  44:       0x3109007c40 - start_thread\n  45:       0x31088f2509 - clone\n  46:                0x0 - <unknown>\n\nmake: *** [fact] Error 101\n```\n\nNote that this just started happening last night, and occurs for a number of small programs - see sample output [here](https://travis-ci.org/am0d/rust-projects/builds/27565687).\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/14895/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/14895/timeline", "performed_via_github_app": null, "state_reason": "completed"}