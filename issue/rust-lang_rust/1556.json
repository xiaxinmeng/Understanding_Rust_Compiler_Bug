{"url": "https://api.github.com/repos/rust-lang/rust/issues/1556", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1556/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1556/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1556/events", "html_url": "https://github.com/rust-lang/rust/issues/1556", "id": 2880871, "node_id": "MDU6SXNzdWUyODgwODcx", "number": 1556, "title": "rustc stack overflow by \"hit an unexpected failure path\"", "user": {"login": "lht", "id": 19508, "node_id": "MDQ6VXNlcjE5NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/19508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lht", "html_url": "https://github.com/lht", "followers_url": "https://api.github.com/users/lht/followers", "following_url": "https://api.github.com/users/lht/following{/other_user}", "gists_url": "https://api.github.com/users/lht/gists{/gist_id}", "starred_url": "https://api.github.com/users/lht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lht/subscriptions", "organizations_url": "https://api.github.com/users/lht/orgs", "repos_url": "https://api.github.com/users/lht/repos", "events_url": "https://api.github.com/users/lht/events{/privacy}", "received_events_url": "https://api.github.com/users/lht/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2012-01-18T10:32:57Z", "updated_at": "2012-01-18T11:36:21Z", "closed_at": "2012-01-18T11:36:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\ntype x = {\n  r: u\n};\ntag u {\n  t(x);\n}\nfn main() {}\n```\n\nCompile the above (faulty) code with `RUST_LOG=rustc=0,::rt::backtrace rustc foo.rs` gives me this:\n\n```\nrust: task aa2c30 ran out of stack\n/opt/apps/rust/bin/../lib/librustrt.so(_ZN9rust_task4failEv+0x25)[0x7fe862bfb7f5]\n/opt/apps/rust/bin/../lib/librustrt.so(+0x1ebb5)[0x7fe862bfbbb5]\n/opt/apps/rust/bin/../lib/librustrt.so(_ZN9rust_task9new_stackEmPvm+0x3c)[0x7fe862bfbf1c]\n/opt/apps/rust/bin/../lib/librustrt.so(upcall_s_new_stack+0x1d)[0x7fe862bfe28d]\n/opt/apps/rust/bin/../lib/librustrt.so(+0x32129)[0x7fe862c0f129]\n/opt/apps/rust/bin/../lib/librustrt.so(upcall_new_stack+0x42)[0x7fe862bff3c2]\n/opt/apps/rust/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(+0xd2a79)[0x7fe8634b7a79]\n/opt/apps/rust/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(_ZN3map7chained3get17_53584225ac3372a2E+0x4be)[0x7fe86342fe6e]\n/opt/apps/rust/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(_ZN3map7chained8map130634find17_99d086d8959e784dE+0x62)[0x7fe863433462]\n/opt/apps/rust/bin/../lib/libstd-79ca5fac56b63fde-0.1.so(+0x8db72)[0x7fe863472b72]\n/opt/apps/rust/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty12tag_variants17_d9d12d749dec2b12E+0xa5)[0x7fe862dfe045]\n/opt/apps/rust/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_386b82bc6c3f7371E+0x338)[0x7fe862de1f38]\n/opt/apps/rust/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_386b82bc6c3f7371E+0x68d)[0x7fe862de228d]\n/opt/apps/rust/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_386b82bc6c3f7371E+0x4fd)[0x7fe862de20fd]\n/opt/apps/rust/bin/../lib/librustc-4171d83aef249987-0.1.so(_ZN6middle2ty26type_structurally_contains17_386b82bc6c3f7371E+0x68d)[0x7fe862de228d]\n[...250+ lines more like above...]\nerror: internal compiler error unexpected failure\nnote: The compiler hit an unexpected failure path. This is a bug. Try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: upcall fail 'explicit failure', ../src/comp/driver/rustc.rs:175\n/opt/apps/rust/bin/../lib/librustrt.so(_ZN9rust_task4failEv+0x25)[0x7fe862bfb7f5]\n/opt/apps/rust/bin/../lib/librustrt.so(+0x32129)[0x7fe862c0f129]\n/opt/apps/rust/bin/../lib/librustrt.so(upcall_fail+0x39)[0x7fe862bfed09]\nrustc[0x407b1d]\nrustc[0x40cfbc]\nrustc[0x407d15]\nrustc[0x407df2]\n/opt/apps/rust/bin/../lib/librustrt.so(task_start_wrapper+0x32)[0x7fe862bfa9d2]\nrust: domain main @0xa8dc60 root task failed\n```\n\n```\nrustc --version\nrustc prerelease (94cd792 2012-01-18 09:39:19 +0100)\nhost: x86_64-unknown-linux-gnu\n```\n", "closed_by": {"login": "lht", "id": 19508, "node_id": "MDQ6VXNlcjE5NTA4", "avatar_url": "https://avatars.githubusercontent.com/u/19508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lht", "html_url": "https://github.com/lht", "followers_url": "https://api.github.com/users/lht/followers", "following_url": "https://api.github.com/users/lht/following{/other_user}", "gists_url": "https://api.github.com/users/lht/gists{/gist_id}", "starred_url": "https://api.github.com/users/lht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lht/subscriptions", "organizations_url": "https://api.github.com/users/lht/orgs", "repos_url": "https://api.github.com/users/lht/repos", "events_url": "https://api.github.com/users/lht/events{/privacy}", "received_events_url": "https://api.github.com/users/lht/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1556/timeline", "performed_via_github_app": null, "state_reason": "completed"}