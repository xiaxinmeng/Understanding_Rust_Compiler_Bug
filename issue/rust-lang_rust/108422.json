{"url": "https://api.github.com/repos/rust-lang/rust/issues/108422", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/108422/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/108422/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/108422/events", "html_url": "https://github.com/rust-lang/rust/issues/108422", "id": 1598124499, "node_id": "I_kwDOAAsO6M5fQXHT", "number": 108422, "title": "rust 1.51 fails to build on X86_64 with llvm 10 ", "user": {"login": "jackssirs", "id": 18281728, "node_id": "MDQ6VXNlcjE4MjgxNzI4", "avatar_url": "https://avatars.githubusercontent.com/u/18281728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackssirs", "html_url": "https://github.com/jackssirs", "followers_url": "https://api.github.com/users/jackssirs/followers", "following_url": "https://api.github.com/users/jackssirs/following{/other_user}", "gists_url": "https://api.github.com/users/jackssirs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackssirs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackssirs/subscriptions", "organizations_url": "https://api.github.com/users/jackssirs/orgs", "repos_url": "https://api.github.com/users/jackssirs/repos", "events_url": "https://api.github.com/users/jackssirs/events{/privacy}", "received_events_url": "https://api.github.com/users/jackssirs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2023-02-24T08:05:59Z", "updated_at": "2023-03-13T00:57:42Z", "closed_at": "2023-03-13T00:57:42Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm build rust 1.51 in a mock \r\nllvm version  llvm                    x86_64     10.0.1-2\r\ncargo                   x86_64     1.50.0-1            build     3.8 M\r\n```\r\n-epoch, ya...\r\n    Building [====================>      ] 51/63: clap, crossbeam-epoch, ya...\r\n    Building [=====================>     ] 52/63: clap, lzma-sys(build), ya...\r\n    Building [=====================>     ] 52/63: clap, lzma-sys(build), ya...\r\n   Compiling crossbeam-deque v0.7.3\r\n    Building [=====================>     ] 53/63: clap, yaml-rust, tar, cro...\r\n    Building [======================>    ] 54/63: clap, lzma-sys, yaml-rust...\r\n    Building [======================>    ] 54/63: clap, lzma-sys, yaml-rust...\r\n    Building [======================>    ] 55/63: clap, yaml-rust, tar, ray...\r\n   Compiling xz2 v0.1.6\r\n    Building [=======================>   ] 56/63: clap, xz2, tar, rayon-core  \r\n    Building [=======================>   ] 57/63: clap, rayon, tar, rayon-core\r\n    Building [=======================>   ] 57/63: clap, rayon, tar, rayon-core\r\n    Building [=======================>   ] 58/63: clap, rayon, tar            \r\n   Compiling installer v0.0.0 (/builddir/build/BUILD/rustc-1.51.0-src/src/tools/rust-installer)\r\n    Building [========================>  ] 59/63: clap, installer, rayon      \r\n    Building [========================>  ] 59/63: clap, installer, rayon      \r\n    Building [========================>  ] 60/63: clap, installer             \r\n    Building [=========================> ] 61/63: clap                        \r\n    Building [=========================> ] 62/63: fabricate(bin)              \r\n    Building [=========================> ] 62/63: fabricate(bin)              \r\n    Finished release [optimized + debuginfo] target(s) in 36.95s\r\nDist rust-docs-1.51.0-x86_64-unknown-linux-gnu\r\nthread 'main' panicked at 'assertion failed: `(left == right)`\r\n  left: `9223372035781033984`,\r\n right: `0`', library/std/src/sys/unix/kernel_copy.rs:589:25\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\n```\r\n> command did not execute successfully: \"/builddir/build/BUILD/rustc-1.51.0-src/build/x86_64-unknown-linux-gnu/stage0-tools-bin/fabricate\" \"generate\" \"--image-dir\" \"/builddir/build/BUILD/rustc-1.51.0-src/build/tmp/tarball/rust-docs/x86_64-unknown-linux-gnu/image\" \"--component-name=rust-docs\" \"--bulk-dirs\" \"share/doc/rust/html\" \"--rel-manifest-dir=rustlib\" \"--legacy-manifest-dirs=rustlib,cargo\" \"--product-name=Rust Documentation\" \"--success-message=rust-docs installed.\" \"--package-name=rust-docs-1.51.0-x86_64-unknown-linux-gnu\" \"--non-installed-overlay\" \"/builddir/build/BUILD/rustc-1.51.0-src/build/tmp/tarball/rust-docs/x86_64-unknown-linux-gnu/overlay\" \"--output-dir\" \"/builddir/build/BUILD/rustc-1.51.0-src/build/dist\" \"--work-dir\" \"/builddir/build/BUILD/rustc-1.51.0-src/build/tmp/tarball/rust-docs/x86_64-unknown-linux-gnu\"\r\n```\r\nexpected success, got: exit code: 101\r\n\r\n\r\nfailed to run: /builddir/build/BUILD/rustc-1.51.0-src/build/bootstrap/debug/bootstrap install\r\nBuild completed unsuccessfully in 2:10:46\r\n\u9519\u8bef\uff1a/var/tmp/rpm-tmp.up5lQf (%install) \u9000\u51fa\u72b6\u6001\u4e0d\u597d\r\n\r\n\r\nRPM \u6784\u5efa\u9519\u8bef\uff1a\r\n    /var/tmp/rpm-tmp.up5lQf (%install) \u9000\u51fa\u72b6\u6001\u4e0d\u597d\r\nChild return code was: 1\r\nEXCEPTION: [Error()]\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.7/site-packages/mockbuild/trace_decorator.py\", line 95, in trace\r\n    result = func(*args, **kw)\r\n  File \"/usr/lib/python3.7/site-packages/mockbuild/util.py\", line 746, in do_with_status\r\n    raise exception.Error(\"Command failed: \\n # %s\\n%s\" % (command, output), child.returncode)\r\nmockbuild.exception.Error: Command failed:\r\n\r\n# /usr/bin/systemd-nspawn -q -M 1718b39599a94a949b230129aca8a045 -D /var/lib/mock/v10-sp3-appstore-epel-devtoolset10-build-134105-70701/root -a --capability=cap_ipc_lock --setenv=TERM=vt100 --setenv=SHELL=/bin/bash --setenv=HOME=/builddir --setenv=HOSTNAME=mock --setenv=PATH=/usr/bin:/bin:/usr/sbin:/sbin --setenv=PROMPT_COMMAND=printf \"\\033]0;<mock-chroot>\\007\" --setenv=PS1=<mock-chroot> \\s-\\v\\$  --setenv=LANG=zh_CN.UTF-8 -u mockbuild bash --login -c /usr/bin/rpmbuild -bb --target x86_64 --nodeps /builddir/build/SPECS/rust.spec\r\n```", "closed_by": {"login": "workingjubilee", "id": 46493976, "node_id": "MDQ6VXNlcjQ2NDkzOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingjubilee", "html_url": "https://github.com/workingjubilee", "followers_url": "https://api.github.com/users/workingjubilee/followers", "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}", "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions", "organizations_url": "https://api.github.com/users/workingjubilee/orgs", "repos_url": "https://api.github.com/users/workingjubilee/repos", "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}", "received_events_url": "https://api.github.com/users/workingjubilee/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/108422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/108422/timeline", "performed_via_github_app": null, "state_reason": "completed"}