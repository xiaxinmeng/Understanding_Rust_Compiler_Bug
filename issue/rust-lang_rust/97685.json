{"url": "https://api.github.com/repos/rust-lang/rust/issues/97685", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/97685/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/97685/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/97685/events", "html_url": "https://github.com/rust-lang/rust/issues/97685", "id": 1259821249, "node_id": "I_kwDOAAsO6M5LF1jB", "number": 97685, "title": "\"can't find crate\" errors are easy to miss because they result in many more follow-up errors", "user": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1659943986, "node_id": "MDU6TGFiZWwxNjU5OTQzOTg2", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-verbose", "name": "D-verbose", "color": "c9f7a3", "default": false, "description": "Too much output caused by a single piece of incorrect code"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-06-03T11:53:39Z", "updated_at": "2023-03-31T19:30:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Given a crate that depends on `bytes 1.1.0`, trying to `cargo build --target target_that_is_not_installed` results in\r\n\r\n```\r\nerror[E0463]: can't find crate for `core`\r\n  |\r\n  = note: the `x86_64-unknown-redox` target may not be installed\r\n  = help: consider downloading the target with `rustup target add x86_64-unknown-redox`\r\n\r\nerror[E0463]: can't find crate for `compiler_builtins`\r\n\r\nerror[E0463]: can't find crate for `alloc`\r\n  --> /home/jplatte/.cargo/registry/src/github.com-1ecc6299db9ec823/bytes-1.1.0/src/lib.rs:78:1\r\n   |\r\n78 | extern crate alloc;\r\n   | ^^^^^^^^^^^^^^^^^^^ can't find crate\r\n\r\nerror[E0463]: can't find crate for `std`\r\n  --> /home/jplatte/.cargo/registry/src/github.com-1ecc6299db9ec823/bytes-1.1.0/src/lib.rs:81:1\r\n   |\r\n81 | extern crate std;\r\n   | ^^^^^^^^^^^^^^^^^ can't find crate\r\n   |\r\n   = note: the `x86_64-unknown-redox` target may not be installed\r\n   = help: consider downloading the target with `rustup target add x86_64-unknown-redox`\r\n\r\nerror[E0463]: can't find crate for `core`\r\n --> /home/jplatte/.cargo/registry/src/github.com-1ecc6299db9ec823/bytes-1.1.0/src/buf/buf_impl.rs:5:5\r\n  |\r\n5 | use core::{cmp, mem, ptr};\r\n  |     ^^^^ can't find crate\r\n  |\r\n  = note: the `x86_64-unknown-redox` target may not be installed\r\n  = help: consider downloading the target with `rustup target add x86_64-unknown-redox`\r\n```\r\n\r\nfollowed by a few more ``can't find crate for `core` `` errors, followed by around **500** additional errors about individual items from the standard library not being found. The first of these appear very fast, so it's inconvenient (and sometimes impossible due to scrollback limitations) to actually find the relevant errors at the start.\r\n\r\nI think at least one of two things should happen here:\r\n\r\n* Failing to find a critical crate like `core` or `std` should abort compilation immediately\r\n* If an external crate (or a module?) can't be resolved, don't report errors about symbols not being found that were meant to be imported from there", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/97685/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/97685/timeline", "performed_via_github_app": null, "state_reason": null}