{"url": "https://api.github.com/repos/rust-lang/rust/issues/57812", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/57812/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/57812/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/57812/events", "html_url": "https://github.com/rust-lang/rust/issues/57812", "id": 401459682, "node_id": "MDU6SXNzdWU0MDE0NTk2ODI=", "number": 57812, "title": "Clippy and Miri don't build on arm* and aarch64 dist builders", "user": {"login": "mati865", "id": 1174646, "node_id": "MDQ6VXNlcjExNzQ2NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1174646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mati865", "html_url": "https://github.com/mati865", "followers_url": "https://api.github.com/users/mati865/followers", "following_url": "https://api.github.com/users/mati865/following{/other_user}", "gists_url": "https://api.github.com/users/mati865/gists{/gist_id}", "starred_url": "https://api.github.com/users/mati865/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mati865/subscriptions", "organizations_url": "https://api.github.com/users/mati865/orgs", "repos_url": "https://api.github.com/users/mati865/repos", "events_url": "https://api.github.com/users/mati865/events{/privacy}", "received_events_url": "https://api.github.com/users/mati865/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 55301954, "node_id": "MDU6TGFiZWw1NTMwMTk1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-Arm", "name": "O-Arm", "color": "6e6ec0", "default": false, "description": "Target: 32-bit Arm processors (armv6, armv7, thumb...), including 64-bit Arm in AArch32 state"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-01-21T18:00:21Z", "updated_at": "2019-01-30T01:23:59Z", "closed_at": "2019-01-30T01:23:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Originally reported as https://github.com/rust-lang/rust-clippy/issues/3682\r\n\r\n```\r\nBuilding stage2 tool clippy-driver (armv7-unknown-linux-gnueabihf)\r\n[01:30:05] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m matches v0.1.8\r\n[01:30:05] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m cfg-if v0.1.6\r\n[01:30:05] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m rustc-demangle v0.1.10\r\n[01:30:05] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m void v1.0.2\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m itoa v0.4.3\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m unicode-normalization v0.1.7\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m pulldown-cmark v0.2.0\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m ucd-util v0.1.3\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m bitflags v1.0.4\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m lazy_static v1.2.0\r\n[01:30:06] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m rustc_tools_util v0.1.1 (/checkout/src/tools/clippy/rustc_tools_util)\r\n[01:30:07] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m either v1.5.0\r\n[01:30:07] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m getopts v0.2.17\r\n[01:30:07] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m percent-encoding v1.0.1\r\n[01:30:07] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m if_chain v0.1.3\r\n[01:30:08] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m utf8-ranges v1.0.2\r\n[01:30:09] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m quine-mc_cluskey v0.2.4\r\n[01:30:09] [RUSTC-TIMING] if_chain test:false 0.088\r\n[01:30:13] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m libc v0.2.46\r\n[01:30:14] [RUSTC-TIMING] quine_mc_cluskey test:false 3.619\r\n[01:30:14] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m ryu v0.2.7\r\n[01:30:14] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m unicode-bidi v0.3.4\r\n[01:30:14] [RUSTC-TIMING] rustc_tools_util test:false 1.463\r\n[01:30:14] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m unreachable v1.0.0\r\n[01:30:14] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m thread_local v0.3.6\r\n[01:30:14] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m regex-syntax v0.6.4\r\n[01:30:16] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m regex v1.1.0\r\n[01:30:17] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m itertools v0.7.8\r\n[01:30:17] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m clippy v0.0.212 (/checkout/src/tools/clippy)\r\n[01:30:18] \u001b[0m\u001b[0m\u001b[1m\u001b[32m   Compiling\u001b[0m backtrace-sys v0.1.27\r\n[01:30:18] \u001b[0m\u001b[0m\u001b[1m\u001b[31merror:\u001b[0m failed to run custom build command for `backtrace-sys v0.1.27`\r\n[01:30:18] process didn't exit successfully: `/checkout/obj/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/backtrace-sys-f26ee4d1457ff7f2/build-script-build` (exit code: 101)\r\n[01:30:18] --- stdout\r\n[01:30:18] cargo:rustc-cfg=rbt\r\n[01:30:18] TARGET = Some(\"x86_64-unknown-linux-gnu\")\r\n[01:30:18] OPT_LEVEL = Some(\"2\")\r\n[01:30:18] HOST = Some(\"x86_64-unknown-linux-gnu\")\r\n[01:30:18] CC_x86_64-unknown-linux-gnu = None\r\n[01:30:18] CC_x86_64_unknown_linux_gnu = None\r\n[01:30:18] HOST_CC = None\r\n[01:30:18] CC = Some(\"sccache armv7-unknown-linux-gnueabihf-gcc\")\r\n[01:30:18] CFLAGS_x86_64-unknown-linux-gnu = None\r\n[01:30:18] CFLAGS_x86_64_unknown_linux_gnu = None\r\n[01:30:18] HOST_CFLAGS = None\r\n[01:30:18] CFLAGS = Some(\"-ffunction-sections -fdata-sections -fPIC -march=armv7-a\")\r\n[01:30:18] running: \"sccache\" \"armv7-unknown-linux-gnueabihf-gcc\" \"-O2\" \"-ffunction-sections\" \"-fdata-sections\" \"-fPIC\" \"-ffunction-sections\" \"-fdata-sections\" \"-fPIC\" \"-march=armv7-a\" \"-m64\" \"-I\" \"src/libbacktrace\" \"-I\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/backtrace-sys-d9226a261fade31f/out\" \"-fvisibility=hidden\" \"-DBACKTRACE_ELF_SIZE=64\" \"-DBACKTRACE_SUPPORTED=1\" \"-DBACKTRACE_USES_MALLOC=1\" \"-DBACKTRACE_SUPPORTS_THREADS=0\" \"-DBACKTRACE_SUPPORTS_DATA=0\" \"-DHAVE_DL_ITERATE_PHDR=1\" \"-D_GNU_SOURCE=1\" \"-D_LARGE_FILES=1\" \"-Dbacktrace_full=__rbt_backtrace_full\" \"-Dbacktrace_dwarf_add=__rbt_backtrace_dwarf_add\" \"-Dbacktrace_initialize=__rbt_backtrace_initialize\" \"-Dbacktrace_pcinfo=__rbt_backtrace_pcinfo\" \"-Dbacktrace_syminfo=__rbt_backtrace_syminfo\" \"-Dbacktrace_get_view=__rbt_backtrace_get_view\" \"-Dbacktrace_release_view=__rbt_backtrace_release_view\" \"-Dbacktrace_alloc=__rbt_backtrace_alloc\" \"-Dbacktrace_free=__rbt_backtrace_free\" \"-Dbacktrace_vector_finish=__rbt_backtrace_vector_finish\" \"-Dbacktrace_vector_grow=__rbt_backtrace_vector_grow\" \"-Dbacktrace_vector_release=__rbt_backtrace_vector_release\" \"-Dbacktrace_close=__rbt_backtrace_close\" \"-Dbacktrace_open=__rbt_backtrace_open\" \"-Dbacktrace_print=__rbt_backtrace_print\" \"-Dbacktrace_simple=__rbt_backtrace_simple\" \"-Dbacktrace_qsort=__rbt_backtrace_qsort\" \"-Dbacktrace_create_state=__rbt_backtrace_create_state\" \"-Dbacktrace_uncompress_zdebug=__rbt_backtrace_uncompress_zdebug\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/backtrace-sys-d9226a261fade31f/out/src/libbacktrace/alloc.o\" \"-c\" \"src/libbacktrace/alloc.c\"\r\n[01:30:18] cargo:warning=armv7-unknown-linux-gnueabihf-gcc: error: unrecognized command line option '-m64'\r\n[01:30:18] exit code: 1\r\n[01:30:18] \r\n[01:30:18] --- stderr\r\n[01:30:18] thread 'main' panicked at '\r\n[01:30:18] \r\n[01:30:18] Internal error occurred: Command \"sccache\" \"armv7-unknown-linux-gnueabihf-gcc\" \"-O2\" \"-ffunction-sections\" \"-fdata-sections\" \"-fPIC\" \"-ffunction-sections\" \"-fdata-sections\" \"-fPIC\" \"-march=armv7-a\" \"-m64\" \"-I\" \"src/libbacktrace\" \"-I\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/backtrace-sys-d9226a261fade31f/out\" \"-fvisibility=hidden\" \"-DBACKTRACE_ELF_SIZE=64\" \"-DBACKTRACE_SUPPORTED=1\" \"-DBACKTRACE_USES_MALLOC=1\" \"-DBACKTRACE_SUPPORTS_THREADS=0\" \"-DBACKTRACE_SUPPORTS_DATA=0\" \"-DHAVE_DL_ITERATE_PHDR=1\" \"-D_GNU_SOURCE=1\" \"-D_LARGE_FILES=1\" \"-Dbacktrace_full=__rbt_backtrace_full\" \"-Dbacktrace_dwarf_add=__rbt_backtrace_dwarf_add\" \"-Dbacktrace_initialize=__rbt_backtrace_initialize\" \"-Dbacktrace_pcinfo=__rbt_backtrace_pcinfo\" \"-Dbacktrace_syminfo=__rbt_backtrace_syminfo\" \"-Dbacktrace_get_view=__rbt_backtrace_get_view\" \"-Dbacktrace_release_view=__rbt_backtrace_release_view\" \"-Dbacktrace_alloc=__rbt_backtrace_alloc\" \"-Dbacktrace_free=__rbt_backtrace_free\" \"-Dbacktrace_vector_finish=__rbt_backtrace_vector_finish\" \"-Dbacktrace_vector_grow=__rbt_backtrace_vector_grow\" \"-Dbacktrace_vector_release=__rbt_backtrace_vector_release\" \"-Dbacktrace_close=__rbt_backtrace_close\" \"-Dbacktrace_open=__rbt_backtrace_open\" \"-Dbacktrace_print=__rbt_backtrace_print\" \"-Dbacktrace_simple=__rbt_backtrace_simple\" \"-Dbacktrace_qsort=__rbt_backtrace_qsort\" \"-Dbacktrace_create_state=__rbt_backtrace_create_state\" \"-Dbacktrace_uncompress_zdebug=__rbt_backtrace_uncompress_zdebug\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2-tools/release/build/backtrace-sys-d9226a261fade31f/out/src/libbacktrace/alloc.o\" \"-c\" \"src/libbacktrace/alloc.c\" with args \"armv7-unknown-linux-gnueabihf-gcc\" did not execute successfully (status code exit code: 1).\r\n[01:30:18] \r\n```\r\nFull build logs are available here:\r\narmv7 Travis: https://api.travis-ci.com/v3/job/171742865/log.txt\r\naarch64 Travis: https://api.travis-ci.com/v3/job/171742861/log.txt\r\n\r\nThese cross toolchains don't accept `-m64` argument which shouldn't be passed for them.\r\nI believe the issue is `TARGET` is the same as `HOST` (\"x86_64-unknown-linux-gnu\") while it should be arm* or aarch64 depending on the builder.\r\n\r\ncc @alexcrichton ", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/57812/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/57812/timeline", "performed_via_github_app": null, "state_reason": "completed"}