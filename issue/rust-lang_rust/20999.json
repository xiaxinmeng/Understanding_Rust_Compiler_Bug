{"url": "https://api.github.com/repos/rust-lang/rust/issues/20999", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20999/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20999/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20999/events", "html_url": "https://github.com/rust-lang/rust/issues/20999", "id": 54041689, "node_id": "MDU6SXNzdWU1NDA0MTY4OQ==", "number": 20999, "title": "ICE: unimplemented type in const unsize: fn(u64) -> u64", "user": {"login": "elinorbgr", "id": 3009227, "node_id": "MDQ6VXNlcjMwMDkyMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elinorbgr", "html_url": "https://github.com/elinorbgr", "followers_url": "https://api.github.com/users/elinorbgr/followers", "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}", "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions", "organizations_url": "https://api.github.com/users/elinorbgr/orgs", "repos_url": "https://api.github.com/users/elinorbgr/repos", "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}", "received_events_url": "https://api.github.com/users/elinorbgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-01-12T11:07:12Z", "updated_at": "2015-05-29T21:47:30Z", "closed_at": "2015-05-29T21:47:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code\n\n```\nfn id(x: u64) -> u64 { x }\nconst ID : &'static (Fn(u64)->u64 + 'static) = &id;\n\nfn main() {\n    let x = 2;\n    let clos = ID;\n    println!(\"{}\", clos(x+1));\n}\n```\n\ncauses this backtrace:\n\n```\ntest.rs:2:48: 2:51 error: internal compiler error: unimplemented type in const unsize: fn(u64) -> u64 {id}\ntest.rs:2 const ID : &'static (Fn(u64)->u64 + 'static) = &id;\n                                                         ^~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:123\nstack backtrace:\n1: 0x10e2174b5 - sys::backtrace::write::h64ca2fb259c4ae97lCt\n2: 0x10e23994f - failure::on_fail::h64ff5ae6887860cc0Hz\n3: 0x10e1a55ca - rt::unwind::begin_unwind_inner::h1d4bc098fd350446Qpz\n4: 0x10bea80b7 - rt::unwind::begin_unwind::h1123425023578864118\n5: 0x10bea804c - diagnostic::SpanHandler::span_bug::he8deb1e61e0360e4nQF\n6: 0x10b2d09cd - session::Session::span_bug::h67200d92e3673ccdYQq\n7: 0x10ac58ee6 - trans::consts::const_expr::h65260dd4a04d2ca3A3n\n8: 0x10ab95d6a - trans::base::get_item_val::h697b171366de28ecc1u\n9: 0x10ac0c0e5 - trans::expr::trans_def::h54198cb4f72f0720wIi\n10: 0x10abf3b3f - trans::expr::trans_unadjusted::h0f3f7ce37cff9ee8Oji\n11: 0x10abac964 - trans::expr::trans_into::h26eb85fc84281398Kyh\n12: 0x10acaacd1 - trans::_match::mk_binding_alloca::h6987384023343359721\n13: 0x10ababe42 - trans::base::init_local::h7ec0d2204d33bc62C7s\n14: 0x10abad196 - trans::controlflow::trans_block::h1b3762e019b88de7B3d\n15: 0x10ac76a39 - trans::base::trans_closure::h83147acece2ec0c6EYt\n16: 0x10ab985f5 - trans::base::trans_fn::h99bd3c17ad60972dj9t\n17: 0x10ab93d4e - trans::base::trans_item::hdbddd5abd5742b0cEwu\n18: 0x10ac7d02c - trans::base::trans_crate::h6077c32a4f7ba4e9lsv\n19: 0x10aa37b3e - driver::phase_4_translate_to_llvm::ha92297f2357a645fPFa\n20: 0x10aa13f4b - driver::compile_input::h31580cbd7ea87613xba\n21: 0x10aadefda - monitor::unboxed_closure.22557\n22: 0x10aadd735 - thunk::F.Invoke<A, R>::invoke::h6367419564961841226\n23: 0x10aadc510 - rt::unwind::try::try_fn::h7763956589852599824\n24: 0x10e2a02a9 - rust_try_inner\n25: 0x10e2a0296 - rust_try\n26: 0x10aadcc0c - thunk::F.Invoke<A, R>::invoke::h16724184168577887652\n27: 0x10e227154 - sys::thread::thread_start::hbd8f2f8bdd3a3baadrw\n28: 0x7fff8d5732fc - _pthread_body\n29: 0x7fff8d573279 - _pthread_body\n```\n", "closed_by": {"login": "elinorbgr", "id": 3009227, "node_id": "MDQ6VXNlcjMwMDkyMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elinorbgr", "html_url": "https://github.com/elinorbgr", "followers_url": "https://api.github.com/users/elinorbgr/followers", "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}", "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions", "organizations_url": "https://api.github.com/users/elinorbgr/orgs", "repos_url": "https://api.github.com/users/elinorbgr/repos", "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}", "received_events_url": "https://api.github.com/users/elinorbgr/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20999/timeline", "performed_via_github_app": null, "state_reason": "completed"}