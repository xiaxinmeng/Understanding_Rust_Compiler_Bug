{"url": "https://api.github.com/repos/rust-lang/rust/issues/37106", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37106/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37106/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37106/events", "html_url": "https://github.com/rust-lang/rust/issues/37106", "id": 182437636, "node_id": "MDU6SXNzdWUxODI0Mzc2MzY=", "number": 37106, "title": "Half of Serde compile time is spent in ElaborateDrops", "user": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-12T05:20:04Z", "updated_at": "2016-10-16T02:49:19Z", "closed_at": "2016-10-16T02:49:19Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The main `serde` crate compiles in 10 seconds, 5 of which is ElaborateDrops. Is this expected? Is there anything we can do on our end to reduce this? I don't see any other tickets about this pass in particular.\n\nhttps://github.com/serde-rs/serde/tree/v0.8.12/serde\n\n```\n$ rustc --version\nrustc 1.14.0-nightly (a3bc191b5 2016-10-10)\n\n$ cargo rustc -- -Z time-passes\n   Compiling serde v0.8.12\ntime: 0.024; rss: 55MB  parsing\ntime: 0.000; rss: 55MB  recursion limit\ntime: 0.000; rss: 55MB  crate injection\ntime: 0.000; rss: 55MB  plugin loading\ntime: 0.000; rss: 55MB  plugin registration\ntime: 0.199; rss: 97MB  expansion\ntime: 0.000; rss: 97MB  maybe building test harness\ntime: 0.002; rss: 97MB  maybe creating a macro crate\ntime: 0.000; rss: 97MB  checking for inline asm in case the target doesn't support it\ntime: 0.004; rss: 97MB  complete gated feature checking\ntime: 0.008; rss: 97MB  early lint checks\ntime: 0.003; rss: 97MB  AST validation\ntime: 0.042; rss: 103MB name resolution\ntime: 0.026; rss: 113MB lowering ast -> hir\ntime: 0.006; rss: 116MB indexing hir\ntime: 0.002; rss: 116MB attribute checking\ntime: 0.003; rss: 98MB  language item collection\ntime: 0.005; rss: 98MB  lifetime resolution\ntime: 0.000; rss: 98MB  looking for entry point\ntime: 0.000; rss: 98MB  looking for plugin registrar\ntime: 0.021; rss: 103MB region resolution\ntime: 0.002; rss: 103MB loop checking\ntime: 0.002; rss: 103MB static item recursion checking\ntime: 0.110; rss: 103MB compute_incremental_hashes_map\ntime: 0.000; rss: 103MB load_dep_graph\ntime: 0.032; rss: 105MB type collecting\ntime: 0.001; rss: 105MB variance inference\ntime: 0.039; rss: 109MB coherence checking\ntime: 0.286; rss: 110MB wf checking\ntime: 0.093; rss: 110MB item-types checking\ntime: 1.835; rss: 122MB item-bodies checking\ntime: 0.000; rss: 122MB drop-impl checking\ntime: 0.384; rss: 122MB const checking\ntime: 0.019; rss: 122MB privacy checking\ntime: 0.002; rss: 122MB stability index\ntime: 0.017; rss: 122MB intrinsic checking\ntime: 0.006; rss: 122MB effect checking\ntime: 0.078; rss: 122MB match checking\ntime: 0.022; rss: 118MB liveness checking\ntime: 0.486; rss: 118MB rvalue checking\ntime: 0.388; rss: 187MB MIR dump\n  time: 0.030; rss: 185MB   SimplifyCfg\n  time: 0.076; rss: 184MB   QualifyAndPromoteConstants\n  time: 0.050; rss: 184MB   TypeckMir\n  time: 0.002; rss: 184MB   SimplifyBranches\n  time: 0.014; rss: 184MB   SimplifyCfg\ntime: 0.172; rss: 184MB MIR passes\ntime: 0.859; rss: 185MB borrow checking\ntime: 0.007; rss: 185MB reachability checking\ntime: 0.016; rss: 185MB death checking\ntime: 0.017; rss: 186MB stability checking\ntime: 0.000; rss: 186MB unused lib feature checking\ntime: 0.133; rss: 186MB lint checking\ntime: 0.000; rss: 186MB resolving dependency formats\n  time: 0.001; rss: 186MB   NoLandingPads\n  time: 0.014; rss: 186MB   SimplifyCfg\n  time: 0.017; rss: 187MB   EraseRegions\n  time: 0.006; rss: 187MB   AddCallGuards\n  time: 4.833; rss: 204MB   ElaborateDrops\n  time: 0.001; rss: 204MB   NoLandingPads\n  time: 0.031; rss: 195MB   SimplifyCfg\n  time: 0.009; rss: 195MB   InstCombine\n  time: 0.006; rss: 195MB   Deaggregator\n  time: 0.001; rss: 195MB   CopyPropagation\n  time: 0.005; rss: 195MB   AddCallGuards\n  time: 0.001; rss: 195MB   PreTrans\ntime: 4.927; rss: 195MB Prepare MIR codegen passes\n  time: 0.141; rss: 200MB   write metadata\n  time: 0.016; rss: 201MB   translation item collection\n  time: 0.001; rss: 201MB   codegen unit partitioning\n  time: 0.001; rss: 203MB   internalize symbols\ntime: 0.226; rss: 143MB translation\ntime: 0.000; rss: 143MB assert dep graph\ntime: 0.000; rss: 143MB serialize dep graph\n  time: 0.006; rss: 88MB    llvm function passes [0]\n  time: 0.002; rss: 88MB    llvm module passes [0]\n  time: 0.078; rss: 94MB    codegen passes [0]\n  time: 0.001; rss: 95MB    codegen passes [0]\ntime: 0.096; rss: 94MB  LLVM passes\ntime: 0.000; rss: 94MB  serialize work products\ntime: 0.011; rss: 93MB  linking\n    Finished debug [unoptimized + debuginfo] target(s) in 10.71 secs\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37106/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37106/timeline", "performed_via_github_app": null, "state_reason": "completed"}