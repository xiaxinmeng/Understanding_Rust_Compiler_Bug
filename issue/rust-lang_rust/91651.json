{"url": "https://api.github.com/repos/rust-lang/rust/issues/91651", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91651/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91651/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91651/events", "html_url": "https://github.com/rust-lang/rust/issues/91651", "id": 1074026158, "node_id": "I_kwDOAAsO6M5ABFau", "number": 91651, "title": "Failed to run \"cargo run\" using MinGW-W64 with SJLJ exception handling models", "user": {"login": "wh201906", "id": 62299611, "node_id": "MDQ6VXNlcjYyMjk5NjEx", "avatar_url": "https://avatars.githubusercontent.com/u/62299611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wh201906", "html_url": "https://github.com/wh201906", "followers_url": "https://api.github.com/users/wh201906/followers", "following_url": "https://api.github.com/users/wh201906/following{/other_user}", "gists_url": "https://api.github.com/users/wh201906/gists{/gist_id}", "starred_url": "https://api.github.com/users/wh201906/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wh201906/subscriptions", "organizations_url": "https://api.github.com/users/wh201906/orgs", "repos_url": "https://api.github.com/users/wh201906/repos", "events_url": "https://api.github.com/users/wh201906/events{/privacy}", "received_events_url": "https://api.github.com/users/wh201906/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 266005714, "node_id": "MDU6TGFiZWwyNjYwMDU3MTQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-gnu", "name": "O-windows-gnu", "color": "6e6ec0", "default": false, "description": "Toolchain: GNU, Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-12-08T05:26:14Z", "updated_at": "2022-09-27T15:07:08Z", "closed_at": "2022-09-27T15:07:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi there.\r\nI use gcc version 8.1.0 (x86_64-posix-sjlj-rev0, Built by MinGW-W64 project) at first.\r\nI failed to run \"cargo run\" in the [instructions](https://www.rust-lang.org/learn/get-started) and got these errors.\r\n```\r\nPS E:\\Documents\\source\\rust\\hello> cargo run\r\n   Compiling hello v0.1.0 (E:\\Documents\\source\\rust\\hello)\r\nerror: linking with `x86_64-w64-mingw32-gcc` failed: exit code: 1\r\n  |\r\n  = note: \"x86_64-w64-mingw32-gcc\" \"-fno-use-linker-plugin\" \"-Wl,--dynamicbase\" \"-Wl,--disable-auto-image-base\" \"-m64\" \"-Wl,--high-entropy-va\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsbegin.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.2gqdlf8f8gtgwb48.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.2pg8ttz0es2f6a3w.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.330p22tyija6tnq3.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.34xpm6ntgnkmw9i3.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.3dvcen0ak15jp1wb.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.atxoafg6m4hfagr.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.ax3z8lnuwmz4rkl.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.i0jk5y12xey3ltv.rcgu.o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.4wvnen60ldvov5rb.rcgu.o\" \"-L\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-Wl,--start-group\" \"-Wl,-Bstatic\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd-57e8ea4e1cfb36e3.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libpanic_unwind-d50ed3cb69dbfa89.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libobject-db8fbc6e4b507d8c.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libmemchr-2c2fe1d9eecdd835.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libaddr2line-8e620bb89415248d.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libgimli-50c1bebcf1938271.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd_detect-1df005efff689fb6.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_demangle-7bd71b39d5dd92f1.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libhashbrown-79c4ada05aad6e88.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_alloc-cfc3e2e8bead46d2.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libunwind-adc2f2a5afea326c.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcfg_if-d9c292e85ad6a944.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liblibc-fc23eff1f7c571db.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liballoc-2b42541821d9e283.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_core-10202bb8c6593b6a.rlib\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcore-0e8789dc8677c5cb.rlib\" \"-Wl,--end-group\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcompiler_builtins-b7726d063fa88be4.rlib\" \"-Wl,-Bdynamic\" \"-lkernel32\" \"-lws2_32\" \"-lbcrypt\" \"-ladvapi32\" \"-luserenv\" \"-lkernel32\" \"-lgcc_eh\" \"-l:libpthread.a\" \"-lmsvcrt\" \"-lmingwex\" \"-lmingw32\" \"-lgcc\" \"-lmsvcrt\" \"-luser32\" \"-lkernel32\" \"-Wl,--nxcompat\" \"-L\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-o\" \"E:\\\\Documents\\\\source\\\\rust\\\\hello\\\\target\\\\debug\\\\deps\\\\hello-77f9d87c52a665da.exe\" \"-Wl,--gc-sections\" \"-no-pie\" \"-nodefaultlibs\" \"C:\\\\Users\\\\xxxx\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsend.o\"\r\n  = note: E:\\Documents\\source\\rust\\hello\\target\\debug\\deps\\hello-77f9d87c52a665da.34xpm6ntgnkmw9i3.rcgu.o: In function `core::ops::function::FnOnce::call_once':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\library\\core\\src\\ops/function.rs:227: undefined reference to `_Unwind_Resume'\r\n          E:\\Documents\\source\\rust\\hello\\target\\debug\\deps\\hello-77f9d87c52a665da.atxoafg6m4hfagr.rcgu.o: In function `std::sys_common::backtrace::__rust_begin_short_backtrace':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\library\\std\\src\\sys_common/backtrace.rs:119: undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libstd-57e8ea4e1cfb36e3.rlib(std-57e8ea4e1cfb36e3.std.0253c85e-cgu.0.rcgu.o): In function `alloc::collections::btree::mem::replace':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\library\\alloc\\src\\collections\\btree/mem.rs:35: undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libstd-57e8ea4e1cfb36e3.rlib(std-57e8ea4e1cfb36e3.std.0253c85e-cgu.0.rcgu.o): In function `<std::backtrace::BytesOrWide as core::fmt::Debug>::fmt':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\/library\\std\\src/backtrace.rs:247: undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libstd-57e8ea4e1cfb36e3.rlib(std-57e8ea4e1cfb36e3.std.0253c85e-cgu.0.rcgu.o): In function `core::ops::function::FnOnce::call_once':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\library\\core\\src\\ops/function.rs:227: undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libstd-57e8ea4e1cfb36e3.rlib(std-57e8ea4e1cfb36e3.std.0253c85e-cgu.0.rcgu.o):/rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\/library\\std\\src/backtrace.rs:485: more undefined references to `_Unwind_Resume' follow\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libpanic_unwind-d50ed3cb69dbfa89.rlib(panic_unwind-d50ed3cb69dbfa89.panic_unwind.9edbbfc2-cgu.0.rcgu.o): In function `panic_unwind::real_imp::panic':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\/library\\panic_unwind\\src/gcc.rs:62: undefined reference to `_Unwind_RaiseException'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libpanic_unwind-d50ed3cb69dbfa89.rlib(panic_unwind-d50ed3cb69dbfa89.panic_unwind.9edbbfc2-cgu.0.rcgu.o): In function `rust_eh_personality':\r\n          /rustc/f1edd0429582dd29cccacaf50fd134b05593bd9c\\/library\\panic_unwind\\src/gcc.rs:273: undefined reference to `_GCC_specific_handler'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libobject-db8fbc6e4b507d8c.rlib(object-db8fbc6e4b507d8c.object.f268efff-cgu.0.rcgu.o):object.f268efff-cg:(.text+0x1b4a): undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libobject-db8fbc6e4b507d8c.rlib(object-db8fbc6e4b507d8c.object.f268efff-cgu.0.rcgu.o):object.f268efff-cg:(.text+0x25b7): undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libgimli-50c1bebcf1938271.rlib(gimli-50c1bebcf1938271.gimli.8148d4e3-cgu.0.rcgu.o):gimli.8148d4e3-cgu:(.text+0x73e): undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libgimli-50c1bebcf1938271.rlib(gimli-50c1bebcf1938271.gimli.8148d4e3-cgu.0.rcgu.o):gimli.8148d4e3-cgu:(.text+0x2b99): undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libgimli-50c1bebcf1938271.rlib(gimli-50c1bebcf1938271.gimli.8148d4e3-cgu.0.rcgu.o):gimli.8148d4e3-cgu:(.text+0x2c26): undefined reference to `_Unwind_Resume'\r\n          C:\\Users\\xxxx\\.rustup\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\libgimli-50c1bebcf1938271.rlib(gimli-50c1bebcf1938271.gimli.8148d4e3-cgu.0.rcgu.o):gimli.8148d4e3-cgu:(.text+0x2daf): more undefined references to `_Unwind_Resume' follow\r\n          collect2.exe: error: ld returned 1 exit status\r\n\r\n  = help: some `extern` functions couldn't be found; some native libraries may need to be installed or have their path specified\r\n  = note: use the `-l` flag to specify native libraries to link\r\n  = note: use the `cargo:rustc-link-lib` directive to specify the native libraries to link with Cargo (see https://doc.rust-lang.org/cargo/reference/build-scripts.html#cargorustc-link-libkindname)\r\n\r\nerror: could not compile `hello` due to previous error\r\n```\r\nThen I found a [page](https://daimazxw.com/153567668.html) saying that I should use SEH rather than SJLJ.\r\nAfter installing the SEH version of GCC(x86_64-8.1.0-posix-seh-rt_v6-rev0), the \"cargo run\" works fine.\r\n```\r\nPS E:\\Documents\\source\\rust\\hello> cargo run\r\n   Compiling hello v0.1.0 (E:\\Documents\\source\\rust\\hello)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.99s\r\n     Running `target\\debug\\hello.exe`\r\nHello, world!\r\n```\r\nIs this a bug?", "closed_by": {"login": "wh201906", "id": 62299611, "node_id": "MDQ6VXNlcjYyMjk5NjEx", "avatar_url": "https://avatars.githubusercontent.com/u/62299611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wh201906", "html_url": "https://github.com/wh201906", "followers_url": "https://api.github.com/users/wh201906/followers", "following_url": "https://api.github.com/users/wh201906/following{/other_user}", "gists_url": "https://api.github.com/users/wh201906/gists{/gist_id}", "starred_url": "https://api.github.com/users/wh201906/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wh201906/subscriptions", "organizations_url": "https://api.github.com/users/wh201906/orgs", "repos_url": "https://api.github.com/users/wh201906/repos", "events_url": "https://api.github.com/users/wh201906/events{/privacy}", "received_events_url": "https://api.github.com/users/wh201906/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91651/timeline", "performed_via_github_app": null, "state_reason": "completed"}