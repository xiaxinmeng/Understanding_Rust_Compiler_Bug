{"url": "https://api.github.com/repos/rust-lang/cargo/issues/10788", "repository_url": "https://api.github.com/repos/rust-lang/cargo", "labels_url": "https://api.github.com/repos/rust-lang/cargo/issues/10788/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/cargo/issues/10788/comments", "events_url": "https://api.github.com/repos/rust-lang/cargo/issues/10788/events", "html_url": "https://github.com/rust-lang/cargo/issues/10788", "id": 1284094536, "node_id": "I_kwDOAQnScc5MibpI", "number": 10788, "title": "Using `dep:` syntax in Cargo.toml makes it impossible to enable features for dependencies unless you also have a feature by that name", "user": {"login": "LoganDark", "id": 4723091, "node_id": "MDQ6VXNlcjQ3MjMwOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4723091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LoganDark", "html_url": "https://github.com/LoganDark", "followers_url": "https://api.github.com/users/LoganDark/followers", "following_url": "https://api.github.com/users/LoganDark/following{/other_user}", "gists_url": "https://api.github.com/users/LoganDark/gists{/gist_id}", "starred_url": "https://api.github.com/users/LoganDark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LoganDark/subscriptions", "organizations_url": "https://api.github.com/users/LoganDark/orgs", "repos_url": "https://api.github.com/users/LoganDark/repos", "events_url": "https://api.github.com/users/LoganDark/events{/privacy}", "received_events_url": "https://api.github.com/users/LoganDark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 84096804, "node_id": "MDU6TGFiZWw4NDA5NjgwNA==", "url": "https://api.github.com/repos/rust-lang/cargo/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: bug"}, {"id": 137465458, "node_id": "MDU6TGFiZWwxMzc0NjU0NTg=", "url": "https://api.github.com/repos/rust-lang/cargo/labels/A-features", "name": "A-features", "color": "fbca04", "default": false, "description": "Area: features \u2014\u00a0conditional compilation"}, {"id": 813040725, "node_id": "MDU6TGFiZWw4MTMwNDA3MjU=", "url": "https://api.github.com/repos/rust-lang/cargo/labels/S-accepted", "name": "S-accepted", "color": "0e8a16", "default": false, "description": "Status: Issue or feature is accepted, and has a team member available to help mentor or review"}, {"id": 1570260157, "node_id": "MDU6TGFiZWwxNTcwMjYwMTU3", "url": "https://api.github.com/repos/rust-lang/cargo/labels/A-namespaced-features", "name": "A-namespaced-features", "color": "fbca04", "default": false, "description": "Area: namespaced-features"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-06-24T06:44:50Z", "updated_at": "2023-05-13T00:24:45Z", "closed_at": "2023-05-13T00:24:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "Any crate with this Cargo.toml, or any one like it:\n\n```toml\n[package]\nname = 'whatever'\nversion = '0.1.0'\nedition = '2021'\n\n[features]\ndefault = ['font', 'allsorts/flate2_rust']\nfont = ['dep:allsorts']\n\n[dependencies]\nallsorts = { version = '~0.10.0', optional = true, default-features = false }\n```\n\nfails to compile because of the `allsorts/flate2_rust`, even though it shouldn't (`allsorts` is a dependency, not a feature name).\n\nAdding an `allsorts` feature, even a completely empty one, fixes the error:\n\n```toml\n[package]\nname = 'whatever'\nversion = '0.1.0'\nedition = '2021'\n\n[features]\ndefault = ['font', 'allsorts/flate2_rust']\nfont = ['dep:allsorts']\nallsorts = []\n\n[dependencies]\nallsorts = { version = '~0.10.0', optional = true, default-features = false }\n```\n\nso this is probably a misbehaving lint. I don't want an extra `allsorts` feature (in my real crate, `font` is more than just `allsorts`, and enabling `allsorts` on its own makes 0 sense).\n\nIf this lint exists for encapsulation purposes, I would like to be able to do `dep:allsorts/flate2_rust` at least, if there is no outer-facing `allsorts` feature (although I'd add one in that case so that downstream crates can configure which flate2 backend they want).\n\nActive toolchain:\n\n```\nnightly-x86_64-unknown-linux-gnu (default)\nrustc 1.63.0-nightly (dc80ca78b 2022-06-21)\n```\n\nI have made a minimum effort to search for duplicate issues, but \"dep cargo feature\" is such a generic search term that it gives thousands of results.\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"blyxyas\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/cargo/issues/10788/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/cargo/issues/10788/timeline", "performed_via_github_app": null, "state_reason": "completed"}