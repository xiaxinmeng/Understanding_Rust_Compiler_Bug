{"url": "https://api.github.com/repos/rust-lang/rust/issues/27381", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27381/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27381/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27381/events", "html_url": "https://github.com/rust-lang/rust/issues/27381", "id": 97959404, "node_id": "MDU6SXNzdWU5Nzk1OTQwNA==", "number": 27381, "title": "Rustc crashed with stack overflow error", "user": {"login": "zonyitoo", "id": 1067951, "node_id": "MDQ6VXNlcjEwNjc5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1067951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zonyitoo", "html_url": "https://github.com/zonyitoo", "followers_url": "https://api.github.com/users/zonyitoo/followers", "following_url": "https://api.github.com/users/zonyitoo/following{/other_user}", "gists_url": "https://api.github.com/users/zonyitoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/zonyitoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zonyitoo/subscriptions", "organizations_url": "https://api.github.com/users/zonyitoo/orgs", "repos_url": "https://api.github.com/users/zonyitoo/repos", "events_url": "https://api.github.com/users/zonyitoo/events{/privacy}", "received_events_url": "https://api.github.com/users/zonyitoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-29T15:13:13Z", "updated_at": "2015-07-30T15:21:44Z", "closed_at": "2015-07-30T15:21:44Z", "author_association": "NONE", "active_lock_reason": null, "body": "Test code is in https://github.com/zonyitoo/coroutine-rs with branch `boost-stackoverflow`.\n\n`cargo build` should be ok, but if you run `cargo run --example simple`, then it will report\n\n```\n   Compiling coroutine v0.3.1 (file:///Users/zonyitoo/Projects/coroutine-rs)\n\nthread 'rustc' has overflowed its stack\nCould not compile `coroutine`.\n\nTo learn more, run the command again with --verbose.\n```\n\nPrint stack trace with gdb:\n\n```\n#0  0x0000000103b73195 in rust_stack_exhausted () from /usr/local/lib/libstd-74fa456f.dylib\n#1  0x0000000100d0e147 in __morestack ()\n#2  0x0000000100a451da in middle::infer::new_infer_ctxt::he25bbf4955e23019jEB () from /usr/local/lib/librustc-74fa456f.dylib\n#3  0x0000000100b50b17 in middle::infer::normalizing_infer_ctxt::hbfcfd920043dffediFB () from /usr/local/lib/librustc-74fa456f.dylib\n#4  0x0000000100278857 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#5  0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6  0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#7  0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#8  0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#9  0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#10 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#11 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#12 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#13 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#14 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#15 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#16 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#17 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#18 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#19 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#20 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#21 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#22 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#23 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#24 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#25 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#26 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#27 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#28 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#29 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#30 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#31 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#32 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#33 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#34 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#35 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#36 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#37 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#38 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#39 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#40 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#41 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#42 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#43 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#44 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#45 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#46 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#47 0x0000000100278c90 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#48 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#49 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#50 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n\n... Omitted ...\n\n#6480 0x00000001002789ca in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6481 0x000000010027a028 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::from_def_id_and_substs::h5f10bdf559d4163clvx ()\n   from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6482 0x0000000100277fc0 in trans::debuginfo::metadata::TypeMap$LT$$u27$tcx$GT$::get_unique_type_id_of_type::he32962832d6a9122glx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6483 0x000000010027ce53 in trans::debuginfo::metadata::type_metadata::hd578c954352a0114QPx () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6484 0x00000001001ee6e5 in trans::debuginfo::create_function_debug_context::ha3b87ff2eff13202QVz () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6485 0x00000001001ec864 in trans::base::new_fn_ctxt::hf824a6edc008b893hci () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6486 0x00000001001f8543 in trans::base::trans_closure::hd38e0e7aca954ddfWvi () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6487 0x00000001001fc72d in trans::base::trans_fn::hd9ca1127cf38bce3JFi () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6488 0x0000000100237c65 in trans::monomorphize::monomorphic_fn::h830ce2c2fbae421fS3K () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6489 0x00000001002279ea in trans::callee::trans_fn_ref_with_substs::hcfe75aaec02d8f66Uso () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6490 0x0000000100226615 in trans::callee::trans_fn_ref::heca71ce3ee1ca45dgio () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6491 0x00000001002223f0 in trans::callee::trans::h9750c9411c0fd3a4t8n () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6492 0x000000010023851e in trans::callee::trans_call_inner::h3991639740564978387 () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6493 0x0000000100299466 in trans::expr::trans_rvalue_dps_unadjusted::hcb6281362d6e1752P1B () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6494 0x000000010026fae0 in trans::expr::trans_into::h94863f48cc023dc1PSA () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6495 0x00000001002e0214 in trans::_match::mk_binding_alloca::h3396222668325209155 () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6496 0x00000001001e8b13 in trans::base::init_local::haa90b8087d81ee09iOh () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6497 0x00000001001fbe12 in trans::controlflow::trans_block::h3399815cbe4962c6yJv () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6498 0x00000001001fae88 in trans::base::trans_closure::hd38e0e7aca954ddfWvi () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6499 0x00000001001fc72d in trans::base::trans_fn::hd9ca1127cf38bce3JFi () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6500 0x00000001001ff8e4 in trans::base::trans_item::hc8dbaf4db99e61a4U4i () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6501 0x000000010020cd48 in trans::base::trans_crate::hbc2f3d543fe21c4bYRj () from /usr/local/lib/librustc_trans-74fa456f.dylib\n#6502 0x000000010003120d in driver::phase_4_translate_to_llvm::h23ca325d246c1b985Oa () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6503 0x000000010002b8d6 in driver::phase_3_run_analysis_passes::closure.16590 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6504 0x0000000100025913 in middle::ty::ctxt$LT$$u27$tcx$GT$::create_and_enter::h13508354793527803733 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6505 0x0000000100020b01 in driver::phase_3_run_analysis_passes::h6547735544636030481 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6506 0x00000001000067ff in driver::compile_input::h87a640b6a6c7679fTba () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6507 0x00000001000e8b4c in run_compiler::h1988d61cd748f5f6A7b () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6508 0x00000001000e63c1 in boxed::F.FnBox$LT$A$GT$::call_box::h8812244964073324717 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6509 0x00000001000e5c38 in rt::unwind::try::try_fn::h15965772982377226605 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6510 0x0000000103b7e0c0 in __rust_try_inner () from /usr/local/lib/libstd-74fa456f.dylib\n#6511 0x0000000103b7e0fb in __rust_try () from /usr/local/lib/libstd-74fa456f.dylib\n#6512 0x0000000103b67b46 in rt::unwind::try::inner_try::h211b654f88b1ec3f1yw () from /usr/local/lib/libstd-74fa456f.dylib\n---Type <return> to continue, or q <return> to quit---\n#6513 0x00000001000e5e7a in boxed::F.FnBox$LT$A$GT$::call_box::h6462970046057749915 () from /usr/local/lib/librustc_driver-74fa456f.dylib\n#6514 0x0000000103b7d01e in sys::thread::Thread::new::thread_start::h9dddbcf4515946ba1Wv () from /usr/local/lib/libstd-74fa456f.dylib\n#6515 0x00007fff81e99268 in _pthread_body () from /usr/lib/system/libsystem_pthread.dylib\n#6516 0x00007fff81e991e5 in _pthread_start () from /usr/lib/system/libsystem_pthread.dylib\n#6517 0x00007fff81e9741d in thread_start () from /usr/lib/system/libsystem_pthread.dylib\n#6518 0x0000000000000000 in ?? ()\n```\n", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27381/timeline", "performed_via_github_app": null, "state_reason": "completed"}