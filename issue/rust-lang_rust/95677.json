{"url": "https://api.github.com/repos/rust-lang/rust/issues/95677", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95677/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95677/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95677/events", "html_url": "https://github.com/rust-lang/rust/issues/95677", "id": 1193134831, "node_id": "I_kwDOAAsO6M5HHcrv", "number": 95677, "title": "unwrap_unchecked is slower than unwrap in benchmarks", "user": {"login": "KalitaAlexey", "id": 11215191, "node_id": "MDQ6VXNlcjExMjE1MTkx", "avatar_url": "https://avatars.githubusercontent.com/u/11215191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KalitaAlexey", "html_url": "https://github.com/KalitaAlexey", "followers_url": "https://api.github.com/users/KalitaAlexey/followers", "following_url": "https://api.github.com/users/KalitaAlexey/following{/other_user}", "gists_url": "https://api.github.com/users/KalitaAlexey/gists{/gist_id}", "starred_url": "https://api.github.com/users/KalitaAlexey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KalitaAlexey/subscriptions", "organizations_url": "https://api.github.com/users/KalitaAlexey/orgs", "repos_url": "https://api.github.com/users/KalitaAlexey/repos", "events_url": "https://api.github.com/users/KalitaAlexey/events{/privacy}", "received_events_url": "https://api.github.com/users/KalitaAlexey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-05T13:14:06Z", "updated_at": "2023-03-21T17:59:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[The repository](https://github.com/KalitaAlexey/test_return_self) containing the code.\r\n\r\nOS: Windows 11 + WSL2.\r\n\r\nThe output:\r\n```\r\ntest test_16::mutate_self          ... bench:      25,073 ns/iter (+/- 848)\r\ntest test_16::mutate_self_unsafe   ... bench:      59,982 ns/iter (+/- 879)\r\ntest test_16::return_self          ... bench:      14,797 ns/iter (+/- 416)\r\n\r\ntest test_32::mutate_self          ... bench:      48,684 ns/iter (+/- 6,065)\r\ntest test_32::mutate_self_unsafe   ... bench:      65,185 ns/iter (+/- 14,250)\r\ntest test_32::return_self          ... bench:      20,893 ns/iter (+/- 780)\r\n\r\ntest test_64::mutate_self          ... bench:      68,974 ns/iter (+/- 2,896)\r\ntest test_64::mutate_self_unsafe   ... bench:      68,850 ns/iter (+/- 9,081)\r\ntest test_64::return_self          ... bench:      33,796 ns/iter (+/- 5,718)\r\n\r\ntest test_128::mutate_self         ... bench:      94,783 ns/iter (+/- 7,628)\r\ntest test_128::mutate_self_unsafe  ... bench:     106,939 ns/iter (+/- 4,786)\r\ntest test_128::return_self         ... bench:      57,526 ns/iter (+/- 751)\r\n\r\ntest test_256::mutate_self         ... bench:     122,306 ns/iter (+/- 6,652)\r\ntest test_256::mutate_self_unsafe  ... bench:     143,735 ns/iter (+/- 17,184)\r\ntest test_256::return_self         ... bench:     145,899 ns/iter (+/- 7,491)\r\n\r\ntest test_512::mutate_self         ... bench:     166,415 ns/iter (+/- 36,866)\r\ntest test_512::mutate_self_unsafe  ... bench:     174,201 ns/iter (+/- 29,308)\r\ntest test_512::return_self         ... bench:     208,695 ns/iter (+/- 30,022)\r\n\r\ntest test_1024::mutate_self        ... bench:     221,598 ns/iter (+/- 5,588)\r\ntest test_1024::mutate_self_unsafe ... bench:     222,193 ns/iter (+/- 13,501)\r\ntest test_1024::return_self        ... bench:     277,051 ns/iter (+/- 2,970)\r\n```\r\n\r\nGiven, `unwrap_unchecked` uses `unreachable!`, I'd expect at least similar performance.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95677/timeline", "performed_via_github_app": null, "state_reason": null}