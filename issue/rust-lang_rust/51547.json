{"url": "https://api.github.com/repos/rust-lang/rust/issues/51547", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51547/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51547/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51547/events", "html_url": "https://github.com/rust-lang/rust/issues/51547", "id": 332255993, "node_id": "MDU6SXNzdWUzMzIyNTU5OTM=", "number": 51547, "title": "E0424 short message weirdly confusing", "user": {"login": "Havvy", "id": 731722, "node_id": "MDQ6VXNlcjczMTcyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/731722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Havvy", "html_url": "https://github.com/Havvy", "followers_url": "https://api.github.com/users/Havvy/followers", "following_url": "https://api.github.com/users/Havvy/following{/other_user}", "gists_url": "https://api.github.com/users/Havvy/gists{/gist_id}", "starred_url": "https://api.github.com/users/Havvy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Havvy/subscriptions", "organizations_url": "https://api.github.com/users/Havvy/orgs", "repos_url": "https://api.github.com/users/Havvy/repos", "events_url": "https://api.github.com/users/Havvy/events{/privacy}", "received_events_url": "https://api.github.com/users/Havvy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-14T05:26:54Z", "updated_at": "2019-05-26T08:58:24Z", "closed_at": "2019-05-26T08:58:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This invalid function gives two instances of E0424.\r\n\r\n```\r\nfn foo(self: i32) -> i32 { self }\r\n```\r\n\r\n```\r\nerror[E0424]: expected unit struct/variant or constant, found module `self`\r\n --> src/main.rs:8:8\r\n  |\r\nL | fn foo(self: i32) -> i32 { self }\r\n  |        ^^^^ `self` value is only available in methods with `self` parameter\r\n\r\nerror[E0424]: expected value, found module `self`\r\n --> src/main.rs:8:28\r\n  |\r\nL | fn foo(self: i32) -> i32 { self }\r\n  |                            ^^^^ `self` value is only available in methods with `self` parameter\r\n```\r\n\r\nThe long diagnostic for this error states \"The self keyword was used in a static method.\" which while slightly wrong in this case (it's a free function, not a method at all), it's more correct than what's emitted by the compiler.\r\n\r\nOverall, this diagnostic needs to be cleaned up.\r\n\r\n1. In the first instance, the error message should state \"`self` parameter can only be declared on methods\".\r\n2. In the first instance, the help message should just be removed.\r\n3. In the second instance, it probably shouldn't even be emitted. Possibly check if a parameter was erroneously named `self` and if so, pretend it's a valid variable name in the function. Maybe a `note` pointing out its usage as part of the first emitted error would be okay here?\r\n4. The long error description (in the error index) should say \"free function or method\".", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51547/timeline", "performed_via_github_app": null, "state_reason": "completed"}