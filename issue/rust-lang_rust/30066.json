{"url": "https://api.github.com/repos/rust-lang/rust/issues/30066", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30066/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30066/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30066/events", "html_url": "https://github.com/rust-lang/rust/issues/30066", "id": 118952990, "node_id": "MDU6SXNzdWUxMTg5NTI5OTA=", "number": 30066, "title": "requests of help about rustc and llc", "user": {"login": "adjivas", "id": 6086961, "node_id": "MDQ6VXNlcjYwODY5NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/6086961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adjivas", "html_url": "https://github.com/adjivas", "followers_url": "https://api.github.com/users/adjivas/followers", "following_url": "https://api.github.com/users/adjivas/following{/other_user}", "gists_url": "https://api.github.com/users/adjivas/gists{/gist_id}", "starred_url": "https://api.github.com/users/adjivas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adjivas/subscriptions", "organizations_url": "https://api.github.com/users/adjivas/orgs", "repos_url": "https://api.github.com/users/adjivas/repos", "events_url": "https://api.github.com/users/adjivas/events{/privacy}", "received_events_url": "https://api.github.com/users/adjivas/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-11-26T01:27:44Z", "updated_at": "2015-11-27T01:41:46Z", "closed_at": "2015-11-27T01:41:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\n\nMy aim is to transpile this [library](https://github.com/adjivas/io/tree/nostd) of _Rust_ code to _C_ via _llvm_ ; My library is developed with the [nostd method](https://doc.rust-lang.org/book/no-stdlib.html).\n\nThat is why I transpile my project to llvm -ll-.\n\n``` shell\n$ git clone -b nostd https://github.com/adjivas/io.git io && cd io # Nostd-library\n$ rustc -vV # Version\nrustc 1.6.0-dev (a1fd944eb 2015-11-02)\nbinary: rustc\ncommit-hash: a1fd944eb83d23c3e7484850a1e7db275d38a58c\ncommit-date: 2015-11-02\nhost: x86_64-unknown-linux-gnu\nrelease: 1.6.0-dev\n$ rustc src/lib.rs --crate-name io_synesthesist \\\n                 --crate-type lib -g \\\n                 --emit=dep-info,link,llvm-ir \\\n                 -L dependency=$PWD/target/debug \\\n                 -L dependency=$PWD/io/target/debug/deps ;\n$ rustc src/main.rs --crate-type bin -g \\\n                  --emit=dep-info,link,llvm-ir \\\n                  -L dependency=$PWD/target/debug \\\n                  -L dependency=$PWD/io/target/debug/deps \\\n                  --extern io_synesthesist=libio_synesthesist.rlib ;\n```\n\nBut... I get this error ; please, what I have forgot?\n\n``` shell\n$ llc -version # Version\nLLVM (http://llvm.org/):\n  LLVM version 3.8.0svn\n  DEBUG build with assertions.\n  Built Nov 25 2015 (21:16:13).\n  Default target: x86_64-unknown-linux-gnu\n  Host CPU: (unknown)\n\n  Registered Targets:\n    aarch64    - AArch64 (little endian)\n    aarch64_be - AArch64 (big endian)\n    amdgcn     - AMD GCN GPUs\n    arm        - ARM\n    arm64      - ARM64 (little endian)\n    armeb      - ARM (big endian)\n    bpf        - BPF (host endian)\n    bpfeb      - BPF (big endian)\n    bpfel      - BPF (little endian)\n    cpp        - C++ backend\n    hexagon    - Hexagon\n    mips       - Mips\n    mips64     - Mips64 [experimental]\n    mips64el   - Mips64el [experimental]\n    mipsel     - Mipsel\n    msp430     - MSP430 [experimental]\n    nvptx      - NVIDIA PTX 32-bit\n    nvptx64    - NVIDIA PTX 64-bit\n    ppc32      - PowerPC 32\n    ppc64      - PowerPC 64\n    ppc64le    - PowerPC 64 LE\n    r600       - AMD GPUs HD2XXX-HD6XXX\n    sparc      - Sparc\n    sparcel    - Sparc LE\n    sparcv9    - Sparc V9\n    systemz    - SystemZ\n    thumb      - Thumb\n    thumbeb    - Thumb (big endian)\n    x86        - 32-bit X86: Pentium-Pro and above\n    x86-64     - 64-bit X86: EM64T and AMD64\n    xcore      - XCore\n$ llc main.ll # Problem\nllc: main.ll:203:205: error: invalid field 'function'\n!18 = !DISubprogram(name: \"start\", linkageName: \"_ZN4main5startE\", scope: !20, file: !19, line: 8, type: !21, isLocal: true, isDefinition: true, scopeLine: 8, flags: DIFlagPrototyped, isOptimized: false, function: i64 (i64, i8**)* @_ZN5start20h766f40c08bbc0fb8faaE, templateParams: !2, variables: !2)\n```\n", "closed_by": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30066/timeline", "performed_via_github_app": null, "state_reason": "completed"}