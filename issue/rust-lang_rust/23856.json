{"url": "https://api.github.com/repos/rust-lang/rust/issues/23856", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23856/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23856/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23856/events", "html_url": "https://github.com/rust-lang/rust/issues/23856", "id": 65152229, "node_id": "MDU6SXNzdWU2NTE1MjIyOQ==", "number": 23856, "title": "Incorrect \"associated type must be specified\" for trait objects", "user": {"login": "theemathas", "id": 6120103, "node_id": "MDQ6VXNlcjYxMjAxMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/6120103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theemathas", "html_url": "https://github.com/theemathas", "followers_url": "https://api.github.com/users/theemathas/followers", "following_url": "https://api.github.com/users/theemathas/following{/other_user}", "gists_url": "https://api.github.com/users/theemathas/gists{/gist_id}", "starred_url": "https://api.github.com/users/theemathas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theemathas/subscriptions", "organizations_url": "https://api.github.com/users/theemathas/orgs", "repos_url": "https://api.github.com/users/theemathas/repos", "events_url": "https://api.github.com/users/theemathas/events{/privacy}", "received_events_url": "https://api.github.com/users/theemathas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2015-03-30T07:23:41Z", "updated_at": "2019-03-21T18:52:06Z", "closed_at": "2019-03-21T18:52:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "Code:\r\n\r\n``` rust\r\ntrait MyIterator: Iterator<Item = char> {}\r\n\r\nimpl<T: ?Sized + Iterator<Item=char> + 'static> MyIterator for T {}\r\n\r\nstruct TestStruct {\r\n    data: Box<MyIterator + 'static>,\r\n}\r\n\r\nfn new_struct(string: &'static str) -> TestStruct {\r\n    TestStruct {\r\n        data: Box::new(string.chars()) as Box<MyIterator + 'static>,\r\n        //also does not compile\r\n        //data: Box::new(string.chars()) as Box<MyIterator<Item=char> + 'static>,\r\n    }\r\n}\r\n\r\nfn main() {}\r\n```\r\n\r\nError:\r\n\r\n```\r\n<anon>:11:15: 11:39 error: the value of the associated type `Item` (from the trait `core::iter::Iterator`) must be specified [E0191]\r\n<anon>:11         data: Box::new(string.chars()) as Box<MyIterator + 'static>,\r\n                        ^~~~~~~~~~~~~~~~~~~~~~~~\r\n```\r\n\r\n[playpen](http://is.gd/20fXGJ)\r\n\r\nI expect this code to compile without errors.\r\n\r\n### EDIT\r\n\r\nThis is the error on the current version:\r\n```\r\n   Compiling playground v0.0.1 (file:///playground)\r\nerror[E0191]: the value of the associated type `Item` (from the trait `std::iter::Iterator`) must be specified\r\n --> src/main.rs:6:15\r\n  |\r\n6 |     data: Box<MyIterator + 'static>,\r\n  |               ^^^^^^^^^^^^^^^^^^^^ missing associated type `Item` value\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `playground`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\nChanging line 6 to `data: Box<MyIterator<Item=char> + 'static>,` moves the error to line 11:\r\n```\r\n   Compiling playground v0.0.1 (file:///playground)\r\nerror[E0191]: the value of the associated type `Item` (from the trait `std::iter::Iterator`) must be specified\r\n  --> src/main.rs:11:47\r\n   |\r\n11 |         data: Box::new(string.chars()) as Box<MyIterator + 'static>,\r\n   |                                               ^^^^^^^^^^^^^^^^^^^^ missing associated type `Item` value\r\n\r\nerror[E0308]: mismatched types\r\n  --> src/main.rs:11:15\r\n   |\r\n11 |         data: Box::new(string.chars()) as Box<MyIterator + 'static>,\r\n   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected trait `MyIterator<Item=char>`, found trait `MyIterator`\r\n   |\r\n   = note: expected type `std::boxed::Box<MyIterator<Item=char> + 'static>`\r\n              found type `std::boxed::Box<MyIterator + 'static>`\r\n   = help: here are some functions which might fulfill your needs:\r\n           - .collect()\r\n           - .product()\r\n           - .sum()\r\n\r\nerror: aborting due to 2 previous errors\r\n\r\nerror: Could not compile `playground`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\nHowever, commenting line 11 and uncommenting line 13 makes the code compile fine.", "closed_by": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23856/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23856/timeline", "performed_via_github_app": null, "state_reason": "completed"}