{"url": "https://api.github.com/repos/rust-lang/rust/issues/68105", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/68105/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/68105/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/68105/events", "html_url": "https://github.com/rust-lang/rust/issues/68105", "id": 548315338, "node_id": "MDU6SXNzdWU1NDgzMTUzMzg=", "number": 68105, "title": "MIR optimization results in significantly increased compile time for a rustc-perf benchmark", "user": {"login": "ktrianta", "id": 1680882, "node_id": "MDQ6VXNlcjE2ODA4ODI=", "avatar_url": "https://avatars.githubusercontent.com/u/1680882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktrianta", "html_url": "https://github.com/ktrianta", "followers_url": "https://api.github.com/users/ktrianta/followers", "following_url": "https://api.github.com/users/ktrianta/following{/other_user}", "gists_url": "https://api.github.com/users/ktrianta/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktrianta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktrianta/subscriptions", "organizations_url": "https://api.github.com/users/ktrianta/orgs", "repos_url": "https://api.github.com/users/ktrianta/repos", "events_url": "https://api.github.com/users/ktrianta/events{/privacy}", "received_events_url": "https://api.github.com/users/ktrianta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 256133398, "node_id": "MDU6TGFiZWwyNTYxMzMzOTg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-mir", "name": "A-mir", "color": "f7e101", "default": false, "description": "Area: Mid-level IR (MIR) - https://blog.rust-lang.org/2016/04/19/MIR.html"}, {"id": 1927601458, "node_id": "MDU6TGFiZWwxOTI3NjAxNDU4", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-mir-opt", "name": "A-mir-opt", "color": "f7e101", "default": false, "description": "Area: MIR optimizations"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-10T22:10:12Z", "updated_at": "2022-08-22T23:09:44Z", "closed_at": "2022-08-22T23:09:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In PR #66329 we created a MIR optimization pass that optimizes away unreachable basic blocks, i.e., basic blocks whose terminator kind is Unreachable.\r\n\r\nRunning on `rustc_perf`we observed improvement in all benchmarks except unicode-normalization (avg ~3%) and deeply-nested-opt (**avg: 740644.6%**). A more complete analysis of the compile times can be found [here](https://perf.rust-lang.org/compare.html?start=7bc1665730002a5368b4384613758c7ddc77db09&end=12076066783f508295c7fcc7bda9da738c11b437) and [here](https://github.com/rust-lang/rust/pull/66329#issuecomment-569025087). As explained by @bjorn3, for `deeply-nested-opt` the LLVM related queries are the ones slowing down, not anything inside rustc.\r\n\r\nUntil the root cause of the increase in compile times is found and fixed, we have made the optimization available only as a level 3 optimization.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/68105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/68105/timeline", "performed_via_github_app": null, "state_reason": "completed"}