{"url": "https://api.github.com/repos/rust-lang/rust/issues/1948", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1948/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1948/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1948/events", "html_url": "https://github.com/rust-lang/rust/issues/1948", "id": 3582170, "node_id": "MDU6SXNzdWUzNTgyMTcw", "number": 1948, "title": "RFC: Some kind of type-of operator", "user": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/6", "html_url": "https://github.com/rust-lang/rust/milestone/6", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/6/labels", "id": 80849, "node_id": "MDk6TWlsZXN0b25lODA4NDk=", "number": 6, "title": "0.3", "description": "", "creator": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 65, "state": "closed", "created_at": "2012-02-05T23:36:26Z", "updated_at": "2012-07-10T20:55:40Z", "due_on": "2012-05-26T07:00:00Z", "closed_at": "2012-07-10T20:55:40Z"}, "comments": 6, "created_at": "2012-03-09T12:07:51Z", "updated_at": "2012-04-03T05:49:22Z", "closed_at": "2012-04-03T05:49:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Monomorphization (assuming I'll be able to land it anytime soon) has removed the need to pass type descriptors to generics. The only place were we still are passing type descriptors is to rust-intrinsic functions. I'd like to switch those over to explicit type-descriptor passing (most of them don't even use their type descriptors), but **`sys::get_type_desc` is currently implemented as an intrinsic that returns the type descriptor it is passed**. Thus, we'd have to provide some other way to get at tydescs.\n\nIdeally, this would be some hack in core and not add anything to the language. But when our compiler stops passing tydescs to things, it becomes very hard to get hold of them. You can box something and then unsafely fetch the tydesc from the box, but that's definitely not how we want to create tydescs. So the compiler will have to cooperate in some way.\n\nI'm having trouble coming up with a non-invasive way to do this. We could hard-code `core::sys::get_type_desc` to always magically return the type desc of its type parameter. We could do something with attributes.\n\nDo others have ideas? Do you think I'm even going in the right direction here? The code to handle passing tydescs to intrinsics is very awkward, now that normal functions no longer take tydescs. It seems like an undesirable wart.\n", "closed_by": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1948/timeline", "performed_via_github_app": null, "state_reason": "completed"}