{"url": "https://api.github.com/repos/rust-lang/rust/issues/9488", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9488/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9488/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9488/events", "html_url": "https://github.com/rust-lang/rust/issues/9488", "id": 20020996, "node_id": "MDU6SXNzdWUyMDAyMDk5Ng==", "number": 9488, "title": "Platform-backed, non-scheduler/runtime entangled IO", "user": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-09-25T03:55:42Z", "updated_at": "2014-01-06T18:23:52Z", "closed_at": "2014-01-06T18:23:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "tl;dr -- wherein we converge on libuv\n\nSome thoughts that I put in a ticket comment before realizing that they didn't really apply.. still wanted to save it, though.\n\nthe plan is somewhat roughly-sketched-out; i think it's something like:\n- do #9128\n- decide whether or how and at what API boundary to draw the line (possibly at the `RtioFoo` interfaces)\n- assuming the above bullet holds, re-implement all of the `RtioFoo` traits in a new module (a sibling to `std::rt::uv`), that uses \"platform-backed\" implementations using idiomatic APIs for each platform (so mostly POSIX/etc on linux, POSIX+`NSFoo` on OSX, win32 on windows, etc...) .\n\nThere would be stuff like RtioTimer (where we have `std::io::timer::Timer` probably implementing `std::select::Select` in the near future, unless we want to go down the rabbit hole and move `std::select`'s entire impl to be behind the IoFactory.. then maybe we could do something rational at the per-platform/OS level) that might not translate cleanly. I'd love to identify a subset of the `RtioFoo` traits (or maybe at some other boundary? not sure) that we can definitely do all of in a notional `std::rt::pb` module (pb for platform-backed).\n\nAn additional caveat to the third bullet, above, is that these implementations would be \"truly blocking\" and would do no task-descheduling-magicks (as is done, currently, in `uvio`), so they could be conceivably used without the rust scheduler. Not sure how to get around in case(s) where the platform API is async (this is bound to come up, I'm sure). Hence my hedging as outlined in bullet 1. This fact (no scheduler/runtime interaction in `pb`) suggests that maybe it should live outside of `std::rt`.. `std::unstable`? Still the question of a common API between `std::rt::io` and `pb`, though.\n\n@brson and I have had a few conversations about this in IRC, and I have a topic branch working towards #9128 in my local repo. But not much actual movement on this.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/9488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9488/timeline", "performed_via_github_app": null, "state_reason": "completed"}