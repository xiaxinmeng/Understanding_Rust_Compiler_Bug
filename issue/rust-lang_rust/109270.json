{"url": "https://api.github.com/repos/rust-lang/rust/issues/109270", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/109270/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/109270/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/109270/events", "html_url": "https://github.com/rust-lang/rust/issues/109270", "id": 1629586310, "node_id": "I_kwDOAAsO6M5hIYOG", "number": 109270, "title": "Unsized return types are allowed on trait associated function declarations", "user": {"login": "Vlad-Shcherbina", "id": 302938, "node_id": "MDQ6VXNlcjMwMjkzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/302938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vlad-Shcherbina", "html_url": "https://github.com/Vlad-Shcherbina", "followers_url": "https://api.github.com/users/Vlad-Shcherbina/followers", "following_url": "https://api.github.com/users/Vlad-Shcherbina/following{/other_user}", "gists_url": "https://api.github.com/users/Vlad-Shcherbina/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vlad-Shcherbina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vlad-Shcherbina/subscriptions", "organizations_url": "https://api.github.com/users/Vlad-Shcherbina/orgs", "repos_url": "https://api.github.com/users/Vlad-Shcherbina/repos", "events_url": "https://api.github.com/users/Vlad-Shcherbina/events{/privacy}", "received_events_url": "https://api.github.com/users/Vlad-Shcherbina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-17T16:19:19Z", "updated_at": "2023-03-17T17:44:42Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nI tried this code:\r\n\r\n```rust\r\ntrait MyTrait {\r\n    fn f() -> [u8];  // Ok, but it shouldn't be\r\n}\r\n\r\nimpl MyTrait for () {\r\n    fn f() -> [u8] {  // Compilation error, as expected\r\n        todo!()\r\n    }\r\n}\r\n```\r\n\r\nI expect the line marked with \"Ok\" to cause compilation error, because the return type is unsized.\r\nIt's better to produce diagnostics early, without waiting until somebody tries to implement this trait (which would be impossible anyway).\r\n\r\nInstead, this happens: the compiler allows to declare the associated function `f()`, and only complains when I try to implement it for a concrete type.\r\n\r\nI did a quick search in the issue tracker and it looks like it's maybe similar to #82633.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.70.0-nightly (7b4f48927 2023-03-12)\r\nbinary: rustc\r\ncommit-hash: 7b4f48927dce585f747a58083b45ab62b9d73a53\r\ncommit-date: 2023-03-12\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.70.0-nightly\r\nLLVM version: 15.0.7\r\n```\r\n\r\n</p>\r\n</details>\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/109270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/109270/timeline", "performed_via_github_app": null, "state_reason": null}