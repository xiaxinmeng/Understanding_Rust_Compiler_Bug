{"url": "https://api.github.com/repos/rust-lang/rust/issues/60210", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60210/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60210/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60210/events", "html_url": "https://github.com/rust-lang/rust/issues/60210", "id": 436340508, "node_id": "MDU6SXNzdWU0MzYzNDA1MDg=", "number": 60210, "title": "tuple indexing future compatibility warning", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36956, "node_id": "MDU6TGFiZWwzNjk1Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-frontend", "name": "A-frontend", "color": "f7e101", "default": false, "description": "Area: frontend (errors, parsing and HIR)"}, {"id": 27424086, "node_id": "MDU6TGFiZWwyNzQyNDA4Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-parser", "name": "A-parser", "color": "f7e101", "default": false, "description": "Area: The parsing of Rust source code to an AST."}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 630636017, "node_id": "MDU6TGFiZWw2MzA2MzYwMTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-future-compatibility", "name": "C-future-compatibility", "color": "f5f1fd", "default": false, "description": "Category: future compatibility lints"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-23T18:58:05Z", "updated_at": "2021-08-22T06:41:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is the **summary issue** for a bug fix related to tuple indexing. The goal of this page is describe why this change was made and how you can fix code that is affected by it. It also provides a place to ask questions or register a complaint if you feel the change should not be made. For more information on the policy around future-compatibility warnings, see our [breaking change policy guidelines][guidelines].\r\n\r\n[guidelines]: https://forge.rust-lang.org/rustc-bug-fix-procedure.html\r\n\r\n### What is the warning for?\r\n\r\nAs reported in https://github.com/rust-lang/rust/issues/59418, the compiler incorrectly accepts `foo.0_u32` (and other suffixes) when indexing into tuples. The expected syntax is simply `foo.0`. We are presently issuing **warnings** when this incorrect syntax is used but we expect to transition those warnings to **errors** in the future.\r\n\r\n### How can you fix your code?\r\n\r\nMost often this error manifests in procedural macros that employ the `syn` or `quote` crates. It can be avoided by using `syn::Index::from` or `proc_macro::Literal::*_unsuffixed`. For example, if before you were generating `foo.0` doing something like this:\r\n\r\n```rust\r\nlet i = 0;\r\nquote! { foo.$i }\r\n```\r\n\r\nyou might now do instead:\r\n\r\n```rust\r\nlet i = syn::Index::from(0);\r\nquote! { foo.$i }\r\n```\r\n\r\n### When will this warning become a hard error?\r\n                    \r\nAt the beginning of each 6-week release cycle, the Rust compiler team\r\nwill review the set of outstanding future compatibility warnings and\r\nnominate some of them for **Final Comment Period**. Toward the end of\r\nthe cycle, we will review any comments and make a final determination\r\nwhether to convert the warning into a hard error or remove it\r\nentirely.\r\n\r\n### Related bugs\r\n\r\nHere are some of the regressions found in the wild:\r\n\r\n- https://github.com/rust-lang/rust/issues/59553\r\n- https://github.com/rust-lang/rust/issues/60138", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60210/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60210/timeline", "performed_via_github_app": null, "state_reason": null}