{"url": "https://api.github.com/repos/rust-lang/rust/issues/86579", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86579/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86579/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86579/events", "html_url": "https://github.com/rust-lang/rust/issues/86579", "id": 928504455, "node_id": "MDU6SXNzdWU5Mjg1MDQ0NTU=", "number": 86579, "title": "Confusing error message when associated type has same name as other type", "user": {"login": "zombiepigdragon", "id": 26581798, "node_id": "MDQ6VXNlcjI2NTgxNzk4", "avatar_url": "https://avatars.githubusercontent.com/u/26581798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zombiepigdragon", "html_url": "https://github.com/zombiepigdragon", "followers_url": "https://api.github.com/users/zombiepigdragon/followers", "following_url": "https://api.github.com/users/zombiepigdragon/following{/other_user}", "gists_url": "https://api.github.com/users/zombiepigdragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/zombiepigdragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zombiepigdragon/subscriptions", "organizations_url": "https://api.github.com/users/zombiepigdragon/orgs", "repos_url": "https://api.github.com/users/zombiepigdragon/repos", "events_url": "https://api.github.com/users/zombiepigdragon/events{/privacy}", "received_events_url": "https://api.github.com/users/zombiepigdragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-23T17:53:53Z", "updated_at": "2021-06-30T01:07:00Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nGiven the [following code](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=aef6f119c9dcc97483132fad2eed4a46): <!-- Please provide a link to play.rust-lang.org -->\r\n\r\n```rust\r\nuse std::str::FromStr;\r\n\r\nstruct Foo;\r\n\r\nenum MyErrors {\r\n    FooFromStrError\r\n}\r\n\r\nimpl FromStr for Foo {\r\n    type Err = MyErrors;\r\n    \r\n    fn from_str(_s: &str) -> Result<Self, Self::Err> {\r\n        Err(Err::FooFromStrError)\r\n    }\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\n   Compiling playground v0.0.1 (/playground)\r\nerror[E0433]: failed to resolve: `Err` is a variant, not a module\r\n  --> src/lib.rs:13:13\r\n   |\r\n13 |         Err(Err::FooFromStrError)\r\n   |             ^^^ `Err` is a variant, not a module\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0433`.\r\nerror: could not compile `playground`\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally the output would include a suggestion that `Err` is an associated type, that can be accessed as `Self::Err`, something like:\r\n```\r\n   Compiling playground v0.0.1 (/playground)\r\nerror[E0433]: failed to resolve: `Err` is a variant, not a module\r\n  --> src/lib.rs:13:13\r\n   |\r\n13 |         Err(Err::FooFromStrError)\r\n   |             ^^^ `Err` is a variant, not a module\r\nhelp: There is an associated type with a similar name:\r\n  --> src/lib.rs:13:13\r\n   |\r\n13 |         Err(Self::Err::FooFromStrError)\r\n   |\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0433`.\r\nerror: could not compile `playground`\r\n\r\nTo learn more, run the command again with --verbose.\r\n```\r\nI ran into this while working with a relative newcomer to the language, and it would be nice as a guide. The suggestion would still be useful when there's no conflicting name (there is no suggestion in either case right now),  but the main source of confusion is the error message that what the user believes to be a type is instead a variant but not a module. It may be possible to use stronger phrasing (\"try this\") in a case like the one shown, where a variant of the type is being used that makes it clear what the intent was, as well.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86579/timeline", "performed_via_github_app": null, "state_reason": null}