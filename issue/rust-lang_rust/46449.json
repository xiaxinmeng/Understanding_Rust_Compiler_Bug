{"url": "https://api.github.com/repos/rust-lang/rust/issues/46449", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46449/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46449/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46449/events", "html_url": "https://github.com/rust-lang/rust/issues/46449", "id": 278690301, "node_id": "MDU6SXNzdWUyNzg2OTAzMDE=", "number": 46449, "title": "Nightly rust hangs forever", "user": {"login": "zonyitoo", "id": 1067951, "node_id": "MDQ6VXNlcjEwNjc5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1067951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zonyitoo", "html_url": "https://github.com/zonyitoo", "followers_url": "https://api.github.com/users/zonyitoo/followers", "following_url": "https://api.github.com/users/zonyitoo/following{/other_user}", "gists_url": "https://api.github.com/users/zonyitoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/zonyitoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zonyitoo/subscriptions", "organizations_url": "https://api.github.com/users/zonyitoo/orgs", "repos_url": "https://api.github.com/users/zonyitoo/repos", "events_url": "https://api.github.com/users/zonyitoo/events{/privacy}", "received_events_url": "https://api.github.com/users/zonyitoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 46, "created_at": "2017-12-02T15:02:38Z", "updated_at": "2018-01-14T04:02:08Z", "closed_at": "2018-01-11T13:16:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "When I tried to use nightly rust to compile my project [shadowsocks-rust](https://github.com/shadowsocks/shadowsocks-rust), it will hang forever.\r\n\r\nStable version works fine.\r\n\r\n## Reproduce steps:\r\n\r\n```bash\r\n$ git clone https://github.com/shadowsocks/shadowsocks-rust.git\r\n$ cd shadowsocks-rust\r\n$ cargo install -f\r\n  Installing shadowsocks-rust v1.6.10-nightly (file:///Users/zonyitoo/Projects/shadowsocks-rust)\r\n Downloading openssl v0.9.22\r\n Downloading serde v1.0.23\r\n Downloading num-traits v0.1.41\r\n Downloading openssl-sys v0.9.22\r\n Downloading foreign-types v0.3.2\r\n Downloading foreign-types-shared v0.1.1\r\n    Blocking waiting for file lock on memchr-2.0.1.crate\r\n   Compiling typenum v1.9.0\r\n   Compiling unicode-width v0.1.4\r\n   Compiling openssl v0.9.22\r\n   Compiling lazycell v0.5.1\r\n   Compiling strsim v0.6.0\r\n   Compiling num-traits v0.1.41\r\n... (many more logs)\r\n   Compiling env_logger v0.4.3\r\n   Compiling shadowsocks-rust v1.6.10-nightly (file:///Users/zonyitoo/Projects/shadowsocks-rust)\r\n```\r\n\r\nIt will hang forever, but still consumes CPU.\r\n\r\n`ps` shows a `rustc` process:\r\n\r\n```plain\r\nzonyitoo         14287  98.3  0.0 25306648   1012 s001  R+   10:36\u4e0b\u5348  17:20.50 /Users/zonyitoo/.rustup/toolchains/nightly-x86_64-apple-darwin/bin/rustc --crate-name shadowsocks src/lib.rs --crate-type lib --emit=dep-info,link -C opt-level=3 --cfg feature=\"default\" --cfg feature=\"libsodium-ffi\" --cfg feature=\"sodium\" -C metadata=fb046a911106e95e -C extra-filename=-fb046a911106e95e --out-dir /Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps -L dependency=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps --extern serde_urlencoded=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libserde_urlencoded-61a60925e70dcbe4.rlib --extern lazy_static=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/liblazy_static-a066899e4d28630a.rlib --extern byteorder=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libbyteorder-1cb3c8ca5707fac7.rlib --extern qrcode=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libqrcode-c4d0865acf488074.rlib --extern tokio_signal=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libtokio_signal-6fa3848f7558b050.rlib --extern url=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/liburl-42ffd8f1fd62548b.rlib --extern futures_cpupool=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libfutures_cpupool-32ced888700d9e3b.rlib --extern scoped_tls=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libscoped_tls-50ac73adf01c31a4.rlib --extern serde_json=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libserde_json-cc1e76046d610c86.rlib --extern openssl=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libopenssl-91c6f1f26b8759c6.rlib --extern subprocess=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libsubprocess-0a3efa9a446563ca.rlib --extern digest=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libdigest-c6d1d61fc5bc9bf0.rlib --extern libsodium_ffi=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/liblibsodium_ffi-f0ea0ac518324990.rlib --extern bytes=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libbytes-54eacfdfc8e87665.rlib --extern ring=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libring-6add70aa26956a4c.rlib --extern typenum=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libtypenum-fdfe19e18f298fbb.rlib --extern time=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libtime-37bf8783b022cc7e.rlib --extern md_5=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libmd_5-f51cf7bee16cb806.rlib --extern libc=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/liblibc-8e42d4cf8815835d.rlib --extern clap=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libclap-2f9d9629604ac78b.rlib --extern env_logger=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libenv_logger-37a09170e3cd67b7.rlib --extern futures=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libfutures-7614b080b7aa6bfa.rlib --extern byte_string=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libbyte_string-8e53eb4422822c2d.rlib --extern rand=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/librand-ba32c60615891fa3.rlib --extern tokio_io=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libtokio_io-0ba48e8839c90dec.rlib --extern log=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/liblog-db3a3cc0c4299968.rlib --extern base64=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libbase64-519a09b2f17b9fbf.rlib --extern tokio_core=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/deps/libtokio_core-c3e74c59a01ac9ad.rlib -L native=/usr/local/Cellar/libsodium/1.0.15/lib -L native=/usr/local/opt/openssl@1.1/lib -L native=/Users/zonyitoo/Projects/shadowsocks-rust/target/release/build/ring-c441a9fe61114cc0/out\r\n```\r\n\r\n## Meta\r\n* rustc:\r\n```\r\nrustc 1.24.0-nightly (23032d0af 2017-11-30)\r\nbinary: rustc\r\ncommit-hash: 23032d0afa2b0e0c60a9b2ae62709f846d90007c\r\ncommit-date: 2017-11-30\r\nhost: x86_64-apple-darwin\r\nrelease: 1.24.0-nightly\r\nLLVM version: 4.0\r\n```\r\n* cargo: `cargo 0.24.0-nightly (6529d418d 2017-11-29)`", "closed_by": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46449/timeline", "performed_via_github_app": null, "state_reason": "completed"}