{"url": "https://api.github.com/repos/rust-lang/rust/issues/45591", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45591/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45591/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45591/events", "html_url": "https://github.com/rust-lang/rust/issues/45591", "id": 269306626, "node_id": "MDU6SXNzdWUyNjkzMDY2MjY=", "number": 45591, "title": "Use systems page size instead of a hard-coded constant for File I/O?", "user": {"login": "fschutt", "id": 12084016, "node_id": "MDQ6VXNlcjEyMDg0MDE2", "avatar_url": "https://avatars.githubusercontent.com/u/12084016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fschutt", "html_url": "https://github.com/fschutt", "followers_url": "https://api.github.com/users/fschutt/followers", "following_url": "https://api.github.com/users/fschutt/following{/other_user}", "gists_url": "https://api.github.com/users/fschutt/gists{/gist_id}", "starred_url": "https://api.github.com/users/fschutt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fschutt/subscriptions", "organizations_url": "https://api.github.com/users/fschutt/orgs", "repos_url": "https://api.github.com/users/fschutt/repos", "events_url": "https://api.github.com/users/fschutt/events{/privacy}", "received_events_url": "https://api.github.com/users/fschutt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 2011781731, "node_id": "MDU6TGFiZWwyMDExNzgxNzMx", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs", "name": "T-libs", "color": "bfd4f2", "default": false, "description": "Relevant to the library team, which will review and decide on the PR/issue."}, {"id": 2238437210, "node_id": "MDU6TGFiZWwyMjM4NDM3MjEw", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-io", "name": "A-io", "color": "f7e101", "default": false, "description": "Area: std::io, std::fs, std::net and std::path"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-10-28T10:40:59Z", "updated_at": "2023-01-26T20:38:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi, I have a question regarding the following constant that is used throughout the `BufReader`:\r\n\r\nhttps://github.com/rust-lang/rust/blob/6ccfe68076abc78392ab9e1d81b5c1a2123af657/src/libstd/sys_common/io.rs#L10\r\n\r\nShouldn't this variable rather be the page size for the system (determined at runtime) instead of 8KB hard-coded (for better IO performance)? This avoids that the system accidentally splits memory between pages that should really be contiguous on one page. For example, if my page size was 16KB, the system could accidentally allocate the memory in an unfortunate way so that the 8KB from the `BufReader` are now split across two pages. If it used 16KB pages, the system could map it 1:1 to a memory page. Why is the `BufReader` size hard-coded to 8KB? ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45591/timeline", "performed_via_github_app": null, "state_reason": null}