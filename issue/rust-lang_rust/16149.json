{"url": "https://api.github.com/repos/rust-lang/rust/issues/16149", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16149/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16149/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16149/events", "html_url": "https://github.com/rust-lang/rust/issues/16149", "id": 39247512, "node_id": "MDU6SXNzdWUzOTI0NzUxMg==", "number": 16149, "title": "Compiler crash when matching on extern static constant", "user": {"login": "senbrow", "id": 350313, "node_id": "MDQ6VXNlcjM1MDMxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/350313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/senbrow", "html_url": "https://github.com/senbrow", "followers_url": "https://api.github.com/users/senbrow/followers", "following_url": "https://api.github.com/users/senbrow/following{/other_user}", "gists_url": "https://api.github.com/users/senbrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/senbrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/senbrow/subscriptions", "organizations_url": "https://api.github.com/users/senbrow/orgs", "repos_url": "https://api.github.com/users/senbrow/repos", "events_url": "https://api.github.com/users/senbrow/events{/privacy}", "received_events_url": "https://api.github.com/users/senbrow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-07-31T23:05:40Z", "updated_at": "2014-08-18T05:56:15Z", "closed_at": "2014-08-18T05:56:15Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following code results in a compiler crash on `rustc 0.12.0-pre-nightly (5ebf4813a 2014-07-29 21:16:50 +0000)`\n\n``` rust\nextern {\n    static externalValue: int;\n}\n\nfn main() {\n    let boolValue = match 42 {\n        externalValue => true,\n        _ => false\n    };\n}\n```\n\nHere is a stack trace:\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'called `Option::unwrap()` on a `None` value', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/libcore/option.rs:270\n\nstack backtrace:\n   1:        0x105f65755 - rt::backtrace::imp::write::hbb253ba4ead9d701Ojq\n   2:        0x105f69005 - failure::on_fail::hae29c97c183bf809jAq\n   3:        0x10621c125 - unwind::begin_unwind_inner::heb1c638fe2cfececKUd\n   4:        0x10621bcfb - unwind::begin_unwind_fmt::he787b6ed8668ca88cSd\n   5:        0x10621bb52 - rust_begin_unwind\n   6:        0x10626b6ac - failure::begin_unwind::hd9f539f711819e41HZj\n   7:        0x102f394c9 - middle::check_match::StaticInliner<'a>.Folder::fold_pat::h474c6bec3dfe65a7Efm\n   8:        0x102f34b4b - middle::check_match::check_expr::h6c2a28fd45487372Y0l\n   9:        0x102f361fc - middle::check_match::check_local::h7a2b12847be50b08w6m\n  10:        0x102f38b1c - visit::walk_block::h11178504046137318959\n  11:        0x102f3685c - middle::check_match::check_fn::hfc000f70b7e57dbb08m\n  12:        0x102f37863 - visit::walk_item::h18258468695370448187\n  13:        0x102f36d5c - middle::check_match::check_crate::ha408d2752ab3565bu0l\n  14:        0x102cfeaaa - util::common::time::h11760416629416974346\n  15:        0x103562777 - driver::driver::phase_3_run_analysis_passes::h04c7a7a5096a3f33sUv\n  16:        0x10355cdb0 - driver::driver::compile_input::h025bdd4f61abfaebHGv\n  17:        0x103604f27 - driver::run_compiler::h67f285fbf1017e5aiLy\n  18:        0x1036036d6 - driver::main_args::closure.$x22closure$x22$LP$134662$RP$\n  19:        0x10361535b - task::TaskBuilder<S>::try_future::closure.$x22closure$x22$LP$135806$RP$\n  20:        0x103615250 - task::TaskBuilder<S>::spawn_internal::closure.$x22closure$x22$LP$135783$RP$\n  21:        0x105e9974c - task::spawn_opts::closure.$x22closure$x22$LP$8296$RP$\n  22:        0x10628162c - rust_try\n  23:        0x1062193fb - unwind::try::h96e922d0c8f226806Id\n  24:        0x1062191a3 - task::Task::run::he3c21bcb4266b9cbyRc\n  25:        0x105e995e1 - task::spawn_opts::closure.$x22closure$x22$LP$8241$RP$\n  26:        0x10621b076 - thread::thread_start::h585497a1f88d9975ofd\n  27:     0x7fff84e38899 - _pthread_body\n  28:     0x7fff84e3872a - _pthread_struct_init\n```\n\nThis is on OSX 10.9.4. Here is the output of `uname -a`\n\n```\n$ uname -a\nDarwin slimjim 13.3.0 Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 x86_64 i386 MacBookPro11,3 Darwin\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16149/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16149/timeline", "performed_via_github_app": null, "state_reason": "completed"}