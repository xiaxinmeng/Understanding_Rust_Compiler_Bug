{"url": "https://api.github.com/repos/rust-lang/rust/issues/50555", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50555/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50555/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50555/events", "html_url": "https://github.com/rust-lang/rust/issues/50555", "id": 321403220, "node_id": "MDU6SXNzdWUzMjE0MDMyMjA=", "number": 50555, "title": "Rejecting higher-kinded lifetime bounds is a breaking change", "user": {"login": "comex", "id": 47517, "node_id": "MDQ6VXNlcjQ3NTE3", "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comex", "html_url": "https://github.com/comex", "followers_url": "https://api.github.com/users/comex/followers", "following_url": "https://api.github.com/users/comex/following{/other_user}", "gists_url": "https://api.github.com/users/comex/gists{/gist_id}", "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comex/subscriptions", "organizations_url": "https://api.github.com/users/comex/orgs", "repos_url": "https://api.github.com/users/comex/repos", "events_url": "https://api.github.com/users/comex/events{/privacy}", "received_events_url": "https://api.github.com/users/comex/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-05-09T01:52:03Z", "updated_at": "2022-04-06T18:48:30Z", "closed_at": "2018-05-10T23:33:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```rust\r\nfn foo<'s, F>(s: &'s i32, f: F) where for<'a: 's> F: FnOnce(&'a i32) {\r\n    f(s)\r\n}\r\n\r\nfn main() {\r\n    foo(&42, |x| println!(\"{}\", x));\r\n}\r\n```\r\n\r\n[Playground Link](https://play.rust-lang.org/?gist=ddbae29bc980ea3f4e6b17aa8d4112ec&version=beta&mode=debug)\r\n\r\nThis compiles on stable; on beta and above, it produces:\r\n\r\n    error: lifetime bounds cannot be used in this context\r\n\r\nApparently this is on purpose:\r\n\r\n```\r\ncommit 49abd8748357012e5db10bf11077384f727e2177\r\nAuthor: Ralf Jung <post@ralfj.de>\r\nDate:   Tue Mar 6 11:22:24 2018 +0100\r\n\r\n    make bounds on higher-kinded lifetimes a hard error in ast_validation\r\n    \r\n    Also move the check for not having type parameters into ast_validation.\r\n    \r\n    I was not sure what to do with compile-fail/issue-23046.rs: The issue looks like\r\n    maybe the bounds actually played a role in triggering the ICE, but that seems\r\n    unlikely given that the compiler seems to entirely ignore them.  However, I\r\n    couldn't find a testcase without the bounds, so I figured the best I could do is\r\n    to just remove the bounds and make sure at least that keeps working.\r\n```\r\n\r\nBut it's still a gratuitous breaking change, which seems unfortunate\u2026 even if the lifetimes weren't being handled correctly before.\r\n\r\ncc @RalfJung ", "closed_by": {"login": "comex", "id": 47517, "node_id": "MDQ6VXNlcjQ3NTE3", "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comex", "html_url": "https://github.com/comex", "followers_url": "https://api.github.com/users/comex/followers", "following_url": "https://api.github.com/users/comex/following{/other_user}", "gists_url": "https://api.github.com/users/comex/gists{/gist_id}", "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comex/subscriptions", "organizations_url": "https://api.github.com/users/comex/orgs", "repos_url": "https://api.github.com/users/comex/repos", "events_url": "https://api.github.com/users/comex/events{/privacy}", "received_events_url": "https://api.github.com/users/comex/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50555/timeline", "performed_via_github_app": null, "state_reason": "completed"}