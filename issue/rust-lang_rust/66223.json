{"url": "https://api.github.com/repos/rust-lang/rust/issues/66223", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66223/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66223/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66223/events", "html_url": "https://github.com/rust-lang/rust/issues/66223", "id": 520070796, "node_id": "MDU6SXNzdWU1MjAwNzA3OTY=", "number": 66223, "title": "SIGSEGV compiling AVX-512 inline asm", "user": {"login": "athre0z", "id": 6553158, "node_id": "MDQ6VXNlcjY1NTMxNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6553158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/athre0z", "html_url": "https://github.com/athre0z", "followers_url": "https://api.github.com/users/athre0z/followers", "following_url": "https://api.github.com/users/athre0z/following{/other_user}", "gists_url": "https://api.github.com/users/athre0z/gists{/gist_id}", "starred_url": "https://api.github.com/users/athre0z/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/athre0z/subscriptions", "organizations_url": "https://api.github.com/users/athre0z/orgs", "repos_url": "https://api.github.com/users/athre0z/repos", "events_url": "https://api.github.com/users/athre0z/events{/privacy}", "received_events_url": "https://api.github.com/users/athre0z/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 91598611, "node_id": "MDU6TGFiZWw5MTU5ODYxMQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-inline-assembly", "name": "A-inline-assembly", "color": "f7e101", "default": false, "description": "Area: inline asm!(..)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1472563007, "node_id": "MDU6TGFiZWwxNDcyNTYzMDA3", "url": "https://api.github.com/repos/rust-lang/rust/labels/requires-nightly", "name": "requires-nightly", "color": "76dcde", "default": false, "description": "This issue requires a nightly compiler in some way."}, {"id": 1615551553, "node_id": "MDU6TGFiZWwxNjE1NTUxNTUz", "url": "https://api.github.com/repos/rust-lang/rust/labels/glacier", "name": "glacier", "color": "a5e2ff", "default": false, "description": "ICE tracked in rust-lang/glacier"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-08T15:17:02Z", "updated_at": "2020-05-22T23:34:46Z", "closed_at": "2020-05-22T23:34:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This (possibly invalid?) inline asm below segfaults the compiler:\r\n```rust\r\n#![feature(asm)]\r\n\r\nunsafe fn _mm512_set1_epi64(a: i64) {\r\n    asm! {\r\n        \"vpbroadcastq zmm0{k1}, $0\"\r\n        :: \"m\"(a)\r\n        :: \"intel\"\r\n    }\r\n}\r\n\r\nfn main() {\r\n    unsafe { _mm512_set1_epi64(123); }\r\n}\r\n```\r\n\r\n[Playground link](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=81cfd8875865de7e658ce8e28fd1213a)\r\n\r\nRust version: rustc 1.40.0-nightly (1423bec54 2019-11-05)\r\n\r\nBacktrace\r\n```\r\nThread 4 Crashed:\r\n0   librustc_codegen_llvm-llvm.dylib\t0x000000010ce1b74d llvm::X86ATTInstPrinter::getRegisterName(unsigned int) + 13\r\n1   librustc_codegen_llvm-llvm.dylib\t0x000000010cbfc97e llvm::X86AsmPrinter::PrintOperand(llvm::MachineInstr const*, unsigned int, llvm::raw_ostream&) + 270\r\n2   librustc_codegen_llvm-llvm.dylib\t0x000000010cbfd000 llvm::X86AsmPrinter::PrintIntelMemReference(llvm::MachineInstr const*, unsigned int, llvm::raw_ostream&) + 640\r\n3   librustc_codegen_llvm-llvm.dylib\t0x000000010cbfd5fb llvm::X86AsmPrinter::PrintAsmMemoryOperand(llvm::MachineInstr const*, unsigned int, char const*, llvm::raw_ostream&) + 59\r\n4   librustc_codegen_llvm-llvm.dylib\t0x000000010da9a65f llvm::AsmPrinter::EmitInlineAsm(llvm::MachineInstr const*) const + 1967\r\n5   librustc_codegen_llvm-llvm.dylib\t0x000000010da8ad96 llvm::AsmPrinter::EmitFunctionBody() + 3254\r\n6   librustc_codegen_llvm-llvm.dylib\t0x000000010cbfbe78 llvm::X86AsmPrinter::runOnMachineFunction(llvm::MachineFunction&) + 296\r\n7   librustc_codegen_llvm-llvm.dylib\t0x000000010dc0ecd9 llvm::MachineFunctionPass::runOnFunction(llvm::Function&) + 281\r\n8   librustc_codegen_llvm-llvm.dylib\t0x000000010e4a2a88 llvm::FPPassManager::runOnFunction(llvm::Function&) + 808\r\n9   librustc_codegen_llvm-llvm.dylib\t0x000000010e4a2de3 llvm::FPPassManager::runOnModule(llvm::Module&) + 131\r\n10  librustc_codegen_llvm-llvm.dylib\t0x000000010e4a3229 llvm::legacy::PassManagerImpl::run(llvm::Module&) + 857\r\n11  librustc_codegen_llvm-llvm.dylib\t0x000000010cbdaae2 LLVMRustWriteOutputFile + 562\r\n12  librustc_codegen_llvm-llvm.dylib\t0x000000010cb8d4e6 rustc_codegen_llvm::back::write::write_output_file::hf57707ffdc6e18f0 (.llvm.4680699105796709659) + 86\r\n13  librustc_codegen_llvm-llvm.dylib\t0x000000010ca95e19 rustc_codegen_llvm::back::write::codegen::_$u7b$$u7b$closure$u7d$$u7d$::h1e2284aa1f07df86 (.llvm.14548906211475689160) + 1225\r\n14  librustc_codegen_llvm-llvm.dylib\t0x000000010ca945b3 rustc::util::common::time_ext::h484a300a27ce3e24 + 163\r\n15  librustc_codegen_llvm-llvm.dylib\t0x000000010cb9cc55 _$LT$rustc_codegen_llvm..LlvmCodegenBackend$u20$as$u20$rustc_codegen_ssa..traits..write..WriteBackendMethods$GT$::codegen::ha65c2290ec2d1389 + 3317\r\n16  librustc_codegen_llvm-llvm.dylib\t0x000000010cabefa2 std::sys_common::backtrace::__rust_begin_short_backtrace::h4b331c6d068dc9d3 + 3746\r\n17  librustc_codegen_llvm-llvm.dylib\t0x000000010cac02fb std::panicking::try::do_call::h721f6a3e03c50e53 (.llvm.15542101850647140514) + 43\r\n18  libstd-cd43daae2cf7ddf1.dylib \t0x0000000107be6d1f __rust_maybe_catch_panic + 31\r\n19  librustc_codegen_llvm-llvm.dylib\t0x000000010caa5156 core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::h125a629455a19778 + 134\r\n20  libstd-cd43daae2cf7ddf1.dylib \t0x0000000107bb8a0e _$LT$alloc..boxed..Box$LT$F$GT$$u20$as$u20$core..ops..function..FnOnce$LT$A$GT$$GT$::call_once::h9b41d7adac010663 + 62\r\n21  libstd-cd43daae2cf7ddf1.dylib \t0x0000000107be5a5e std::sys::unix::thread::Thread::new::thread_start::h0725fe9398379348 + 142\r\n22  libsystem_pthread.dylib       \t0x00007fff68993d76 _pthread_start + 125\r\n23  libsystem_pthread.dylib       \t0x00007fff689905d7 thread_start + 15\r\n```", "closed_by": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66223/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66223/timeline", "performed_via_github_app": null, "state_reason": "completed"}