{"url": "https://api.github.com/repos/rust-lang/rust/issues/104173", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104173/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104173/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104173/events", "html_url": "https://github.com/rust-lang/rust/issues/104173", "id": 1440925975, "node_id": "I_kwDOAAsO6M5V4skX", "number": 104173, "title": "`proc_macro` crate fails to build with llvm `LLVM_ENABLE_EXPENSIVE_CHECKS`", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 4199206102, "node_id": "LA_kwDOAAsO6M76SszW", "url": "https://api.github.com/repos/rust-lang/rust/labels/requires-debug-assertions", "name": "requires-debug-assertions", "color": "76dcde", "default": false, "description": "This issue requires debug-assertions in some way"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-08T21:26:03Z", "updated_at": "2022-11-11T19:32:27Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Soooo I was trying to build rustc with a llvm that has `LLVM_ENABLE_EXPENSIVE_CHECKS` on for some extra asserts, but it turns out that we can't even build std artifacts like that :sweat_smile: \r\n\r\nTo turn on expensive checks\r\n````patch\r\ndiff --git a/src/bootstrap/native.rs b/src/bootstrap/native.rs\r\nindex 94a61b727a3..d57ecab838f 100644\r\n--- a/src/bootstrap/native.rs\r\n+++ b/src/bootstrap/native.rs\r\n@@ -385,6 +385,7 @@ fn run(self, builder: &Builder<'_>) -> PathBuf {\r\n             .define(\"LLVM_ENABLE_LIBEDIT\", \"OFF\")\r\n             .define(\"LLVM_ENABLE_BINDINGS\", \"OFF\")\r\n             .define(\"LLVM_ENABLE_Z3_SOLVER\", \"OFF\")\r\n+            .define(\"LLVM_ENABLE_EXPENSIVE_CHECKS\", \"ON\")\r\n             .define(\"LLVM_PARALLEL_COMPILE_JOBS\", builder.jobs().to_string())\r\n             .define(\"LLVM_TARGET_ARCH\", target_native.split('-').next().unwrap())\r\n             .define(\"LLVM_DEFAULT_TARGET_TRIPLE\", target_native);\r\n````\r\n\r\n`cat config.toml | grep -v \"^#\" | grep -v \"^$\"`\r\n````toml\r\nchangelog-seen = 2\r\n[llvm]\r\ndownload-ci-llvm = false\r\nassertions = true\r\nccache = \"/home/matthias/.cargo/bin/sccache\"\r\nninja = true\r\ntargets = \"X86\"\r\nlink-jobs = 2\r\ncflags = \"-march=native\" # -D_GLIBCXX_DEBUG\r\ncxxflags = \"-march=native\" # -D_GLIBCXX_DEBUG\r\nldflags = \"-march=native\" # -D_GLIBCXX_DEBUG\r\n[build]\r\nextended = true\r\ntools = [\"cargo\", \"rls\", \"clippy\", \"rustfmt\", \"analysis\", \"src\"] # + \"rust-demangler\" if `profiler`\r\nlow-priority = true\r\n[install]\r\n[rust]\r\ndebug = true\r\ndebug-assertions = true\r\ndebug-assertions-std = true\r\noverflow-checks = true\r\noverflow-checks-std = true\r\ndebuginfo-level = 1\r\nbacktrace-on-ice = true\r\nverify-llvm-ir = true\r\n[target.x86_64-unknown-linux-gnu]\r\n[dist]\r\n````\r\n\r\nThen I built using `RUSTFLAGS=\"\" ./x.py build`\r\n\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrust repo @ c5842b0be783dffa5a49693541acb79115c7eeef\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\n....\r\n\r\nCopy \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/llvm/build/bin/llvm-dis\" to \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/bin/llvm-dis\"\r\nCopy \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/llvm/build/bin/llc\" to \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/bin/llc\"\r\nCopy \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/llvm/build/bin/opt\" to \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/bin/opt\"\r\n  c Sysroot { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\nCopy \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/rustc-main\" to \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/bin/rustc\"\r\n< Assemble { target_compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\n> Std { target: x86_64-unknown-linux-gnu, compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu }, crates: [] }\r\n  > StartupObjects { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu }, target: x86_64-unknown-linux-gnu }\r\n  < StartupObjects { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu }, target: x86_64-unknown-linux-gnu }\r\n  c Assemble { target_compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\n  c Libdir { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu }, target: x86_64-unknown-linux-gnu }\r\n  c Libdir { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu }, target: x86_64-unknown-linux-gnu }\r\n  c Sysroot { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\n  c Sysroot { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\n  c Sysroot { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\n  c Sysroot { compiler: Compiler { stage: 1, host: x86_64-unknown-linux-gnu } }\r\nBuilding stage1 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\nrunning: \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"build\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-Zcheck-cfg=names,values,output\" \"-Zbinary-dep-depinfo\" \"-j\" \"1\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"--release\" \"--features\" \"panic-unwind backtrace compiler-builtins-c\" \"--manifest-path\" \"/home/matthias/vcs/github/rust_debug_assertions/library/test/Cargo.toml\" \"--message-format\" \"json-render-diagnostics\"\r\n       Fresh cc v1.0.73\r\n       Fresh core v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/core)\r\n       Fresh rustc-std-workspace-core v1.99.0 (/home/matthias/vcs/github/rust_debug_assertions/library/rustc-std-workspace-core)\r\n       Fresh compiler_builtins v0.1.82\r\n       Fresh alloc v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/alloc)\r\n       Fresh rustc-std-workspace-alloc v1.99.0 (/home/matthias/vcs/github/rust_debug_assertions/library/rustc-std-workspace-alloc)\r\n       Fresh libc v0.2.135\r\n       Fresh cfg-if v1.0.0\r\n       Fresh unwind v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/unwind)\r\n       Fresh memchr v2.5.0\r\n       Fresh gimli v0.26.1\r\n       Fresh adler v1.0.2\r\n       Fresh miniz_oxide v0.5.3\r\n       Fresh addr2line v0.17.0\r\n       Fresh object v0.29.0\r\n       Fresh panic_unwind v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/panic_unwind)\r\n       Fresh std_detect v0.1.5 (/home/matthias/vcs/github/rust_debug_assertions/library/stdarch/crates/std_detect)\r\n       Fresh panic_abort v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/panic_abort)\r\n       Fresh hashbrown v0.12.3\r\n       Fresh rustc-demangle v0.1.21\r\n       Fresh std v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/std)\r\n       Fresh rustc-std-workspace-std v1.99.0 (/home/matthias/vcs/github/rust_debug_assertions/library/rustc-std-workspace-std)\r\n       Fresh unicode-width v0.1.10\r\n       Fresh getopts v0.2.21\r\n   Compiling proc_macro v0.0.0 (/home/matthias/vcs/github/rust_debug_assertions/library/proc_macro)\r\n     Running `CARGO=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/cargo CARGO_CRATE_NAME=proc_macro CARGO_MANIFEST_DIR=/home/matthias/vcs/github/rust_debug_assertions/library/proc_macro CARGO_PKG_AUTHORS='' CARGO_PKG_DESCRIPTION='' CARGO_PKG_HOMEPAGE='' CARGO_PKG_LICENSE='' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=proc_macro CARGO_PKG_REPOSITORY='' CARGO_PKG_RUST_VERSION='' CARGO_PKG_VERSION=0.0.0 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=0 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps:/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/lib' /home/matthias/.cargo/bin/sccache /home/matthias/vcs/github/rust_debug_assertions/build/bootstrap/debug/rustc --crate-name proc_macro --edition=2021 library/proc_macro/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C debuginfo=1 -C debug-assertions=on -Zunstable-options --check-cfg 'names()' --check-cfg 'values()' -C metadata=de3ffe529f393522 -C extra-filename=-de3ffe529f393522 --out-dir /home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps --extern core=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libcore-05d65ceee8b68e1f.rmeta --extern std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.so --extern std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.rlib -Csymbol-mangling-version=legacy -Zunstable-options -Zunstable-options '--check-cfg=values(bootstrap)' '--check-cfg=values(stdarch_intel_sde)' '--check-cfg=values(no_fp_fmt_parse)' '--check-cfg=values(no_global_oom_handling)' '--check-cfg=values(no_rc)' '--check-cfg=values(no_sync)' '--check-cfg=values(freebsd12)' '--check-cfg=values(backtrace_in_libstd)' '--check-cfg=values(target_env,\"libnx\")' '--check-cfg=values(target_os,\"watchos\")' '--check-cfg=values(target_arch,\"asmjs\",\"spirv\",\"nvptx\",\"nvptx64\",\"le32\",\"xtensa\")' '--check-cfg=values(dont_compile_me)' '--check-cfg=values(rustix_use_libc)' -Zmacro-backtrace -Clink-args=-Wl,-z,origin '-Clink-args=-Wl,-rpath,$ORIGIN/../lib' -Csplit-debuginfo=off -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes '-Zcrate-attr=doc(html_root_url=\"https://doc.rust-lang.org/nightly/\")' -Z binary-dep-depinfo -L native=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-1dd36b1385d26063/out`\r\nsccache: warning: The server looks like it shut down unexpectedly, compiling locally instead\r\n[RUSTC-SHIM] rustc proc_macro env[0]: \"CARGO\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\"\r\n[RUSTC-SHIM] rustc proc_macro env[1]: \"CARGO_CRATE_NAME\"=\"proc_macro\"\r\n[RUSTC-SHIM] rustc proc_macro env[2]: \"CARGO_INCREMENTAL\"=\"0\"\r\n[RUSTC-SHIM] rustc proc_macro env[3]: \"CARGO_MAKEFLAGS\"=\"-j --jobserver-fds=15,16 --jobserver-auth=15,16\"\r\n[RUSTC-SHIM] rustc proc_macro env[4]: \"CARGO_MANIFEST_DIR\"=\"/home/matthias/vcs/github/rust_debug_assertions/library/proc_macro\"\r\n[RUSTC-SHIM] rustc proc_macro env[5]: \"CARGO_PKG_AUTHORS\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[6]: \"CARGO_PKG_DESCRIPTION\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[7]: \"CARGO_PKG_HOMEPAGE\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[8]: \"CARGO_PKG_LICENSE\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[9]: \"CARGO_PKG_LICENSE_FILE\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[10]: \"CARGO_PKG_NAME\"=\"proc_macro\"\r\n[RUSTC-SHIM] rustc proc_macro env[11]: \"CARGO_PKG_REPOSITORY\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[12]: \"CARGO_PKG_RUST_VERSION\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[13]: \"CARGO_PKG_VERSION\"=\"0.0.0\"\r\n[RUSTC-SHIM] rustc proc_macro env[14]: \"CARGO_PKG_VERSION_MAJOR\"=\"0\"\r\n[RUSTC-SHIM] rustc proc_macro env[15]: \"CARGO_PKG_VERSION_MINOR\"=\"0\"\r\n[RUSTC-SHIM] rustc proc_macro env[16]: \"CARGO_PKG_VERSION_PATCH\"=\"0\"\r\n[RUSTC-SHIM] rustc proc_macro env[17]: \"CARGO_PKG_VERSION_PRE\"=\"\"\r\n[RUSTC-SHIM] rustc proc_macro env[18]: \"CARGO_PROFILE_RELEASE_DEBUG\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[19]: \"CARGO_PROFILE_RELEASE_DEBUG_ASSERTIONS\"=\"true\"\r\n[RUSTC-SHIM] rustc proc_macro env[20]: \"CARGO_PROFILE_RELEASE_OVERFLOW_CHECKS\"=\"true\"\r\n[RUSTC-SHIM] rustc proc_macro env[21]: \"CARGO_TARGET_DIR\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std\"\r\n[RUSTC-SHIM] rustc proc_macro env[22]: \"RUSTBUILD_NATIVE_DIR\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/native\"\r\n[RUSTC-SHIM] rustc proc_macro env[23]: \"RUSTC\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/bootstrap/debug/rustc\"\r\n[RUSTC-SHIM] rustc proc_macro env[24]: \"RUSTC_BACKTRACE_ON_ICE\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[25]: \"RUSTC_BOOTSTRAP\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[26]: \"RUSTC_BREAK_ON_ICE\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[27]: \"RUSTC_ERROR_METADATA_DST\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/tmp/extended-error-metadata\"\r\n[RUSTC-SHIM] rustc proc_macro env[28]: \"RUSTC_FORCE_UNSTABLE\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[29]: \"RUSTC_INSTALL_BINDIR\"=\"bin\"\r\n[RUSTC-SHIM] rustc proc_macro env[30]: \"RUSTC_LIBDIR\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib\"\r\n[RUSTC-SHIM] rustc proc_macro env[31]: \"RUSTC_LINT_FLAGS\"=\"-Wrust_2018_idioms -Wunused_lifetimes -Wsemicolon_in_expressions_from_macros -Dwarnings\"\r\n[RUSTC-SHIM] rustc proc_macro env[32]: \"RUSTC_REAL\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/bin/rustc\"\r\n[RUSTC-SHIM] rustc proc_macro env[33]: \"RUSTC_SNAPSHOT\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/rustc\"\r\n[RUSTC-SHIM] rustc proc_macro env[34]: \"RUSTC_SNAPSHOT_LIBDIR\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/lib\"\r\n[RUSTC-SHIM] rustc proc_macro env[35]: \"RUSTC_STAGE\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro env[36]: \"RUSTC_SYSROOT\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1\"\r\n[RUSTC-SHIM] rustc proc_macro env[37]: \"RUSTC_VERBOSE\"=\"7\"\r\n[RUSTC-SHIM] rustc proc_macro env[38]: \"RUSTC_WRAPPER\"=\"/home/matthias/.cargo/bin/sccache\"\r\n[RUSTC-SHIM] rustc proc_macro env[39]: \"RUSTDOC\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/bootstrap/debug/rustdoc\"\r\n[RUSTC-SHIM] rustc proc_macro env[40]: \"RUSTDOCFLAGS\"=\"-Csymbol-mangling-version=legacy -Zunstable-options -Zunstable-options --check-cfg=values(bootstrap) --check-cfg=values(stdarch_intel_sde) --check-cfg=values(no_fp_fmt_parse) --check-cfg=values(no_global_oom_handling) --check-cfg=values(no_rc) --check-cfg=values(no_sync) --check-cfg=values(freebsd12) --check-cfg=values(backtrace_in_libstd) --check-cfg=values(target_env,\\\"libnx\\\") --check-cfg=values(target_os,\\\"watchos\\\") --check-cfg=values(target_arch,\\\"asmjs\\\",\\\"spirv\\\",\\\"nvptx\\\",\\\"nvptx64\\\",\\\"le32\\\",\\\"xtensa\\\") --check-cfg=values(dont_compile_me) --check-cfg=values(rustix_use_libc) -Dwarnings -Wrustdoc::invalid_codeblock_attributes --crate-version 1.67.0-dev -Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/nightly/\\\")\"\r\n[RUSTC-SHIM] rustc proc_macro env[41]: \"RUSTDOC_REAL\"=\"/path/to/nowhere/rustdoc/not/required\"\r\n[RUSTC-SHIM] rustc proc_macro env[42]: \"RUSTFLAGS\"=\"-Csymbol-mangling-version=legacy -Zunstable-options -Zunstable-options --check-cfg=values(bootstrap) --check-cfg=values(stdarch_intel_sde) --check-cfg=values(no_fp_fmt_parse) --check-cfg=values(no_global_oom_handling) --check-cfg=values(no_rc) --check-cfg=values(no_sync) --check-cfg=values(freebsd12) --check-cfg=values(backtrace_in_libstd) --check-cfg=values(target_env,\\\"libnx\\\") --check-cfg=values(target_os,\\\"watchos\\\") --check-cfg=values(target_arch,\\\"asmjs\\\",\\\"spirv\\\",\\\"nvptx\\\",\\\"nvptx64\\\",\\\"le32\\\",\\\"xtensa\\\") --check-cfg=values(dont_compile_me) --check-cfg=values(rustix_use_libc) -Zmacro-backtrace -Clink-args=-Wl,-z,origin -Clink-args=-Wl,-rpath,$ORIGIN/../lib -Csplit-debuginfo=off -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes -Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/nightly/\\\")\"\r\n[RUSTC-SHIM] rustc proc_macro env[43]: \"RUST_COMPILER_RT_ROOT\"=\"/home/matthias/vcs/github/rust_debug_assertions/src/llvm-project/compiler-rt\"\r\n[RUSTC-SHIM] rustc proc_macro env[44]: \"RUST_SAVE_ANALYSIS_CONFIG\"=\"{\\\"output_file\\\": null,\\\"full_docs\\\": false,\\\"pub_only\\\": true,\\\"reachable_only\\\": false,\\\"distro_crate\\\": true,\\\"signatures\\\": false,\\\"borrow_data\\\": false}\"\r\n[RUSTC-SHIM] rustc proc_macro env[45]: \"RUST_TEST_THREADS\"=\"1\"\r\n[RUSTC-SHIM] rustc proc_macro working directory: /home/matthias/vcs/github/rust_debug_assertions\r\n[RUSTC-SHIM] rustc proc_macro command: \"LD_LIBRARY_PATH\"=\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib:/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps:/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/lib\" \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/bin/rustc\" \"--crate-name\" \"proc_macro\" \"--edition=2021\" \"library/proc_macro/src/lib.rs\" \"--error-format=json\" \"--json=diagnostic-rendered-ansi,artifacts,future-incompat\" \"--crate-type\" \"lib\" \"--emit=dep-info,metadata,link\" \"-C\" \"opt-level=3\" \"-C\" \"embed-bitcode=no\" \"-C\" \"debuginfo=1\" \"-C\" \"debug-assertions=on\" \"-Zunstable-options\" \"--check-cfg\" \"names()\" \"--check-cfg\" \"values()\" \"-C\" \"metadata=de3ffe529f393522\" \"-C\" \"extra-filename=-de3ffe529f393522\" \"--out-dir\" \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-L\" \"dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps\" \"-L\" \"dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps\" \"--extern\" \"core=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libcore-05d65ceee8b68e1f.rmeta\" \"--extern\" \"std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.so\" \"--extern\" \"std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.rlib\" \"-Csymbol-mangling-version=legacy\" \"-Zunstable-options\" \"-Zunstable-options\" \"--check-cfg=values(bootstrap)\" \"--check-cfg=values(stdarch_intel_sde)\" \"--check-cfg=values(no_fp_fmt_parse)\" \"--check-cfg=values(no_global_oom_handling)\" \"--check-cfg=values(no_rc)\" \"--check-cfg=values(no_sync)\" \"--check-cfg=values(freebsd12)\" \"--check-cfg=values(backtrace_in_libstd)\" \"--check-cfg=values(target_env,\\\"libnx\\\")\" \"--check-cfg=values(target_os,\\\"watchos\\\")\" \"--check-cfg=values(target_arch,\\\"asmjs\\\",\\\"spirv\\\",\\\"nvptx\\\",\\\"nvptx64\\\",\\\"le32\\\",\\\"xtensa\\\")\" \"--check-cfg=values(dont_compile_me)\" \"--check-cfg=values(rustix_use_libc)\" \"-Zmacro-backtrace\" \"-Clink-args=-Wl,-z,origin\" \"-Clink-args=-Wl,-rpath,$ORIGIN/../lib\" \"-Csplit-debuginfo=off\" \"-Zsave-analysis\" \"-Cprefer-dynamic\" \"-Cembed-bitcode=yes\" \"-Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/nightly/\\\")\" \"-Z\" \"binary-dep-depinfo\" \"-L\" \"native=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-1dd36b1385d26063/out\" \"-Wrust_2018_idioms\" \"-Wunused_lifetimes\" \"-Wsemicolon_in_expressions_from_macros\" \"-Dwarnings\" \"--sysroot\" \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1\" \"-Z\" \"force-unstable-if-unmarked\"\r\n[RUSTC-SHIM] rustc proc_macro sysroot: \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1\"\r\n[RUSTC-SHIM] rustc proc_macro libdir: \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/lib\"\r\n\r\n# After Instruction Selection\r\n# Machine code for function _ZN10proc_macro6bridge6server22RunningSameThreadGuard3new17hd07da82ffb49fc2aE: IsSSA, TracksLiveness\r\nFrame Objects:\r\n  fi#0: size=48, align=8, at location [SP+8]\r\n\r\nbb.0 (%ir-block.0):\r\n  successors: %bb.1(0x30000000), %bb.2(0x50000000); %bb.1(37.50%), %bb.2(62.50%)\r\n\r\n  ADJCALLSTACKDOWN64 0, 0, 0, implicit-def $rsp, implicit-def $eflags, implicit-def $ssp, implicit $rsp, implicit $ssp, debug-location !709; library/core/src/option.rs:630:15 @[ library/std/src/thread/local.rs:802:22 @[ library/std/src/thread/local.rs:969:23 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  TLS_addr64 $noreg, 1, $noreg, target-flags(x86-tlsgd) @_ZN10proc_macro6bridge6server27ALREADY_RUNNING_SAME_THREAD7__getit5__KEY17hadc6be6d27cb5446E, $noreg, implicit-def $rax, implicit-def dead $rcx, implicit-def dead $rdx, implicit-def dead $rsi, implicit-def dead $rdi, implicit-def dead $r8, implicit-def dead $r9, implicit-def dead $r10, implicit-def dead $r11, implicit-def dead $fp0, implicit-def dead $fp1, implicit-def dead $fp2, implicit-def dead $fp3, implicit-def dead $fp4, implicit-def dead $fp5, implicit-def dead $fp6, implicit-def dead $fp7, implicit-def dead $st0, implicit-def dead $st1, implicit-def dead $st2, implicit-def dead $st3, implicit-def dead $st4, implicit-def dead $st5, implicit-def dead $st6, implicit-def dead $st7, implicit-def dead $mm0, implicit-def dead $mm1, implicit-def dead $mm2, implicit-def dead $mm3, implicit-def dead $mm4, implicit-def dead $mm5, implicit-def dead $mm6, implicit-def dead $mm7, implicit-def dead $xmm0, implicit-def dead $xmm1, implicit-def dead $xmm2, implicit-def dead $xmm3, implicit-def dead $xmm4, implicit-def dead $xmm5, implicit-def dead $xmm6, implicit-def dead $xmm7, implicit-def dead $xmm8, implicit-def dead $xmm9, implicit-def dead $xmm10, implicit-def dead $xmm11, implicit-def dead $xmm12, implicit-def dead $xmm13, implicit-def dead $xmm14, implicit-def dead $xmm15, implicit-def dead $eflags, implicit-def dead $df, implicit $rsp, implicit $ssp, debug-location !709; library/core/src/option.rs:630:15 @[ library/std/src/thread/local.rs:802:22 @[ library/std/src/thread/local.rs:969:23 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  ADJCALLSTACKUP64 0, 0, implicit-def $rsp, implicit-def $eflags, implicit-def $ssp, implicit $rsp, implicit $ssp, debug-location !709; library/core/src/option.rs:630:15 @[ library/std/src/thread/local.rs:802:22 @[ library/std/src/thread/local.rs:969:23 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  %3:gr64 = COPY $rax, debug-location !709; library/core/src/option.rs:630:15 @[ library/std/src/thread/local.rs:802:22 @[ library/std/src/thread/local.rs:969:23 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  %2:gr64 = nuw INC64r %3:gr64(tied-def 0), implicit-def dead $eflags\r\n  CMP8mi %3:gr64, 1, $noreg, 0, $noreg, 0, implicit-def $eflags, debug-location !742 :: (dereferenceable load (s8) from @_ZN10proc_macro6bridge6server27ALREADY_RUNNING_SAME_THREAD7__getit5__KEY17hadc6be6d27cb5446E, !noalias !735, !range !734); library/core/src/option.rs:630:9 @[ library/std/src/thread/local.rs:802:22 @[ library/std/src/thread/local.rs:969:23 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  JCC_1 %bb.2, 5, implicit $eflags, debug-location !743; library/std/src/thread/local.rs:969:17 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  JMP_1 %bb.1, debug-location !743; library/std/src/thread/local.rs:969:17 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n\r\nbb.1 (%ir-block.4):\r\n; predecessors: %bb.0\r\n  successors: %bb.2(0x80000000); %bb.2(100.00%)\r\n\r\n  ADJCALLSTACKDOWN64 0, 0, 0, implicit-def dead $rsp, implicit-def dead $eflags, implicit-def dead $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  ADJCALLSTACKDOWN64 0, 0, 0, implicit-def $rsp, implicit-def $eflags, implicit-def $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  TLS_addr64 $noreg, 1, $noreg, target-flags(x86-tlsgd) @_ZN10proc_macro6bridge6server27ALREADY_RUNNING_SAME_THREAD7__getit5__KEY17hadc6be6d27cb5446E, $noreg, implicit-def $rax, implicit-def dead $rcx, implicit-def dead $rdx, implicit-def dead $rsi, implicit-def dead $rdi, implicit-def dead $r8, implicit-def dead $r9, implicit-def dead $r10, implicit-def dead $r11, implicit-def dead $fp0, implicit-def dead $fp1, implicit-def dead $fp2, implicit-def dead $fp3, implicit-def dead $fp4, implicit-def dead $fp5, implicit-def dead $fp6, implicit-def dead $fp7, implicit-def dead $st0, implicit-def dead $st1, implicit-def dead $st2, implicit-def dead $st3, implicit-def dead $st4, implicit-def dead $st5, implicit-def dead $st6, implicit-def dead $st7, implicit-def dead $mm0, implicit-def dead $mm1, implicit-def dead $mm2, implicit-def dead $mm3, implicit-def dead $mm4, implicit-def dead $mm5, implicit-def dead $mm6, implicit-def dead $mm7, implicit-def dead $xmm0, implicit-def dead $xmm1, implicit-def dead $xmm2, implicit-def dead $xmm3, implicit-def dead $xmm4, implicit-def dead $xmm5, implicit-def dead $xmm6, implicit-def dead $xmm7, implicit-def dead $xmm8, implicit-def dead $xmm9, implicit-def dead $xmm10, implicit-def dead $xmm11, implicit-def dead $xmm12, implicit-def dead $xmm13, implicit-def dead $xmm14, implicit-def dead $xmm15, implicit-def dead $eflags, implicit-def dead $df, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  ADJCALLSTACKUP64 0, 0, implicit-def $rsp, implicit-def $eflags, implicit-def $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  %4:gr64 = COPY $rax, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  %5:gr32 = MOV32r0 implicit-def dead $eflags\r\n  %6:gr64 = SUBREG_TO_REG 0, killed %5:gr32, %subreg.sub_32bit\r\n  $rdi = COPY %4:gr64, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  $rsi = COPY %6:gr64, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  CALL64pcrel32 @\"_ZN3std6thread5local4fast12Key$LT$T$GT$14try_initialize17h0ec110b6f6a5f822E.llvm.13792208312489416292\", <regmask $bh $bl $bp $bph $bpl $bx $ebp $ebx $hbp $hbx $rbp $rbx $r12 $r13 $r14 $r15 $r12b $r13b $r14b $r15b $r12bh $r13bh $r14bh $r15bh $r12d $r13d $r14d $r15d $r12w $r13w $r14w $r15w $r12wh and 3 more...>, implicit $rsp, implicit $ssp, implicit $rdi, implicit $rsi, implicit-def $rsp, implicit-def $ssp, implicit-def $rax, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  ADJCALLSTACKUP64 0, 0, implicit-def dead $rsp, implicit-def dead $eflags, implicit-def dead $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  %7:gr64 = COPY $rax, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  %0:gr64 = COPY %7:gr64, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n\r\nbb.2 (%ir-block.6):\r\n; predecessors: %bb.0, %bb.1\r\n  successors: %bb.3(0x7ffff800), %bb.4(0x00000800); %bb.3(100.00%), %bb.4(0.00%)\r\n\r\n  %1:gr64 = PHI %2:gr64, %bb.0, %0:gr64, %bb.1, debug-location !747; library/std/src/thread/local.rs:0 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n  TEST8mi %1:gr64, 1, $noreg, 0, $noreg, 1, implicit-def $eflags, debug-location !780 :: (load (s8) from %ir.7, !alias.scope !762, !noalias !745); library/proc_macro/src/bridge/server.rs:165:9\r\n  MOV8mi %1:gr64, 1, $noreg, 0, $noreg, 1, debug-location !773 :: (store (s8) into %ir.7, !alias.scope !762, !noalias !745); library/core/src/ptr/mod.rs:1336:9 @[ library/core/src/mem/mod.rs:918:9 @[ library/core/src/cell.rs:413:9 @[ library/std/src/thread/local.rs:603:26 @[ library/std/src/thread/local.rs:446:16 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ] ] ]\r\n  JCC_1 %bb.4, 5, implicit $eflags, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  JMP_1 %bb.3, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n\r\nbb.3 (%ir-block.11):\r\n; predecessors: %bb.2\r\n\r\n  RET 0, debug-location !782; library/proc_macro/src/bridge/server.rs:170:6\r\n\r\nbb.4 (%ir-block.12):\r\n; predecessors: %bb.2\r\n\r\n  LIFETIME_START %stack.0, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  %8:gr64 = LEA64r $rip, 1, $noreg, @anon.e76a1d14bfc7470edb601802a0a9c410.56, $noreg, debug-location !783; library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  MOV64mr %stack.0, 1, $noreg, 0, $noreg, killed %8:gr64, debug-location !783 :: (store (s64) into %ir.1, !alias.scope !785, !noalias !788); library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  MOV64mi32 %stack.0, 1, $noreg, 8, $noreg, 1, debug-location !783 :: (store (s64) into %ir.13, !alias.scope !785, !noalias !788); library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  MOV64mi32 %stack.0, 1, $noreg, 16, $noreg, 0, debug-location !783 :: (store (s64) into %ir.14, !alias.scope !785, !noalias !788); library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  %9:gr64 = LEA64r $rip, 1, $noreg, @anon.e76a1d14bfc7470edb601802a0a9c410.4, $noreg, debug-location !783; library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  MOV64mr %stack.0, 1, $noreg, 32, $noreg, killed %9:gr64, debug-location !783 :: (store (s64) into %ir.15, !alias.scope !785, !noalias !788); library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  MOV64mi32 %stack.0, 1, $noreg, 40, $noreg, 0, debug-location !783 :: (store (s64) into %ir.16, !alias.scope !785, !noalias !788); library/core/src/fmt/mod.rs:398:9 @[ library/proc_macro/src/bridge/server.rs:165:9 ]\r\n  ADJCALLSTACKDOWN64 0, 0, 0, implicit-def dead $rsp, implicit-def dead $eflags, implicit-def dead $ssp, implicit $rsp, implicit $ssp, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  %10:gr64 = LEA64r $rip, 1, $noreg, @anon.e76a1d14bfc7470edb601802a0a9c410.58, $noreg, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  %11:gr64 = LEA64r %stack.0, 1, $noreg, 0, $noreg\r\n  $rdi = COPY %11:gr64, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  $rsi = COPY %10:gr64, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  CALL64m $rip, 1, $noreg, target-flags(x86-gotpcrel) @_ZN4core9panicking9panic_fmt17h54a81d5809e2c881E, $noreg, <regmask $bh $bl $bp $bph $bpl $bx $ebp $ebx $hbp $hbx $rbp $rbx $r12 $r13 $r14 $r15 $r12b $r13b $r14b $r15b $r12bh $r13bh $r14bh $r15bh $r12d $r13d $r14d $r15d $r12w $r13w $r14w $r15w $r12wh and 3 more...>, implicit $rsp, implicit $ssp, implicit $rdi, implicit $rsi, implicit-def $rsp, implicit-def $ssp, debug-location !780 :: (load (s64) from got); library/proc_macro/src/bridge/server.rs:165:9\r\n  ADJCALLSTACKUP64 0, 0, implicit-def dead $rsp, implicit-def dead $eflags, implicit-def dead $ssp, implicit $rsp, implicit $ssp, debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n  TRAP debug-location !780; library/proc_macro/src/bridge/server.rs:165:9\r\n\r\n# End machine code for function _ZN10proc_macro6bridge6server22RunningSameThreadGuard3new17hd07da82ffb49fc2aE.\r\n\r\n*** Bad machine code: FrameSetup is after another FrameSetup ***\r\n- function:    _ZN10proc_macro6bridge6server22RunningSameThreadGuard3new17hd07da82ffb49fc2aE\r\n- basic block: %bb.1  (0x7f294866f2e0)\r\n- instruction: ADJCALLSTACKDOWN64 0, 0, 0, implicit-def $rsp, implicit-def $eflags, implicit-def $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\n\r\n*** Bad machine code: FrameDestroy is not after a FrameSetup ***\r\n- function:    _ZN10proc_macro6bridge6server22RunningSameThreadGuard3new17hd07da82ffb49fc2aE\r\n- basic block: %bb.1  (0x7f294866f2e0)\r\n- instruction: ADJCALLSTACKUP64 0, 0, implicit-def dead $rsp, implicit-def dead $eflags, implicit-def dead $ssp, implicit $rsp, implicit $ssp, debug-location !744; library/std/src/thread/local.rs:971:29 @[ library/std/src/thread/local.rs:346:21 @[ library/std/src/thread/local.rs:445:32 @[ library/std/src/thread/local.rs:422:9 @[ library/std/src/thread/local.rs:603:9 @[ library/proc_macro/src/bridge/server.rs:164:31 ] ] ] ] ]\r\nLLVM ERROR: Found 2 machine code errors.\r\n\r\nDid not run successfully: exit status: 101\r\n\"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1/bin/rustc\" \"--crate-name\" \"proc_macro\" \"--edition=2021\" \"library/proc_macro/src/lib.rs\" \"--error-format=json\" \"--json=diagnostic-rendered-ansi,artifacts,future-incompat\" \"--crate-type\" \"lib\" \"--emit=dep-info,metadata,link\" \"-C\" \"opt-level=3\" \"-C\" \"embed-bitcode=no\" \"-C\" \"debuginfo=1\" \"-C\" \"debug-assertions=on\" \"-Zunstable-options\" \"--check-cfg\" \"names()\" \"--check-cfg\" \"values()\" \"-C\" \"metadata=de3ffe529f393522\" \"-C\" \"extra-filename=-de3ffe529f393522\" \"--out-dir\" \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-L\" \"dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps\" \"-L\" \"dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps\" \"--extern\" \"core=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libcore-05d65ceee8b68e1f.rmeta\" \"--extern\" \"std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.so\" \"--extern\" \"std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.rlib\" \"-Csymbol-mangling-version=legacy\" \"-Zunstable-options\" \"-Zunstable-options\" \"--check-cfg=values(bootstrap)\" \"--check-cfg=values(stdarch_intel_sde)\" \"--check-cfg=values(no_fp_fmt_parse)\" \"--check-cfg=values(no_global_oom_handling)\" \"--check-cfg=values(no_rc)\" \"--check-cfg=values(no_sync)\" \"--check-cfg=values(freebsd12)\" \"--check-cfg=values(backtrace_in_libstd)\" \"--check-cfg=values(target_env,\\\"libnx\\\")\" \"--check-cfg=values(target_os,\\\"watchos\\\")\" \"--check-cfg=values(target_arch,\\\"asmjs\\\",\\\"spirv\\\",\\\"nvptx\\\",\\\"nvptx64\\\",\\\"le32\\\",\\\"xtensa\\\")\" \"--check-cfg=values(dont_compile_me)\" \"--check-cfg=values(rustix_use_libc)\" \"-Zmacro-backtrace\" \"-Clink-args=-Wl,-z,origin\" \"-Clink-args=-Wl,-rpath,$ORIGIN/../lib\" \"-Csplit-debuginfo=off\" \"-Zsave-analysis\" \"-Cprefer-dynamic\" \"-Cembed-bitcode=yes\" \"-Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/nightly/\\\")\" \"-Z\" \"binary-dep-depinfo\" \"-L\" \"native=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-1dd36b1385d26063/out\" \"-Wrust_2018_idioms\" \"-Wunused_lifetimes\" \"-Wsemicolon_in_expressions_from_macros\" \"-Dwarnings\" \"--sysroot\" \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1\" \"-Z\" \"force-unstable-if-unmarked\"\r\n-------------\r\nerror: could not compile `proc_macro`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `CARGO=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/cargo CARGO_CRATE_NAME=proc_macro CARGO_MANIFEST_DIR=/home/matthias/vcs/github/rust_debug_assertions/library/proc_macro CARGO_PKG_AUTHORS='' CARGO_PKG_DESCRIPTION='' CARGO_PKG_HOMEPAGE='' CARGO_PKG_LICENSE='' CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=proc_macro CARGO_PKG_REPOSITORY='' CARGO_PKG_RUST_VERSION='' CARGO_PKG_VERSION=0.0.0 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=0 CARGO_PKG_VERSION_PATCH=0 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps:/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/lib' /home/matthias/.cargo/bin/sccache /home/matthias/vcs/github/rust_debug_assertions/build/bootstrap/debug/rustc --crate-name proc_macro --edition=2021 library/proc_macro/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C debuginfo=1 -C debug-assertions=on -Zunstable-options --check-cfg 'names()' --check-cfg 'values()' -C metadata=de3ffe529f393522 -C extra-filename=-de3ffe529f393522 --out-dir /home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/release/deps --extern core=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libcore-05d65ceee8b68e1f.rmeta --extern std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.so --extern std=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/libstd-56dc346069f0fc86.rlib -Csymbol-mangling-version=legacy -Zunstable-options -Zunstable-options '--check-cfg=values(bootstrap)' '--check-cfg=values(stdarch_intel_sde)' '--check-cfg=values(no_fp_fmt_parse)' '--check-cfg=values(no_global_oom_handling)' '--check-cfg=values(no_rc)' '--check-cfg=values(no_sync)' '--check-cfg=values(freebsd12)' '--check-cfg=values(backtrace_in_libstd)' '--check-cfg=values(target_env,\"libnx\")' '--check-cfg=values(target_os,\"watchos\")' '--check-cfg=values(target_arch,\"asmjs\",\"spirv\",\"nvptx\",\"nvptx64\",\"le32\",\"xtensa\")' '--check-cfg=values(dont_compile_me)' '--check-cfg=values(rustix_use_libc)' -Zmacro-backtrace -Clink-args=-Wl,-z,origin '-Clink-args=-Wl,-rpath,$ORIGIN/../lib' -Csplit-debuginfo=off -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes '-Zcrate-attr=doc(html_root_url=\"https://doc.rust-lang.org/nightly/\")' -Z binary-dep-depinfo -L native=/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-1dd36b1385d26063/out` (exit status: 101)\r\ncommand did not execute successfully: \"/home/matthias/vcs/github/rust_debug_assertions/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"build\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-Zcheck-cfg=names,values,output\" \"-Zbinary-dep-depinfo\" \"-j\" \"1\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"-v\" \"--release\" \"--features\" \"panic-unwind backtrace compiler-builtins-c\" \"--manifest-path\" \"/home/matthias/vcs/github/rust_debug_assertions/library/test/Cargo.toml\" \"--message-format\" \"json-render-diagnostics\"\r\nexpected success, got: exit status: 101\r\nTraceback (most recent call last):\r\n  File \"/home/matthias/vcs/github/rust_debug_assertions/./x.py\", line 28, in <module>\r\n    bootstrap.main()\r\n  File \"/home/matthias/vcs/github/rust_debug_assertions/src/bootstrap/bootstrap.py\", line 936, in main\r\n    bootstrap(help_triggered)\r\n  File \"/home/matthias/vcs/github/rust_debug_assertions/src/bootstrap/bootstrap.py\", line 922, in bootstrap\r\n    run(args, env=env, verbose=build.verbose, is_bootstrap=True)\r\n  File \"/home/matthias/vcs/github/rust_debug_assertions/src/bootstrap/bootstrap.py\", line 166, in run\r\n    raise RuntimeError(err)\r\nRuntimeError: failed to run: /home/matthias/vcs/github/rust_debug_assertions/build/bootstrap/debug/bootstrap build -j 1 -vvvvvvv\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104173/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104173/timeline", "performed_via_github_app": null, "state_reason": null}