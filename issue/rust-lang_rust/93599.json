{"url": "https://api.github.com/repos/rust-lang/rust/issues/93599", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/93599/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/93599/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/93599/events", "html_url": "https://github.com/rust-lang/rust/issues/93599", "id": 1122326195, "node_id": "I_kwDOAAsO6M5C5Vaz", "number": 93599, "title": "`multiple applicable items in scope` on nightly but not stable", "user": {"login": "TheBlueMatt", "id": 649246, "node_id": "MDQ6VXNlcjY0OTI0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheBlueMatt", "html_url": "https://github.com/TheBlueMatt", "followers_url": "https://api.github.com/users/TheBlueMatt/followers", "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}", "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions", "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs", "repos_url": "https://api.github.com/users/TheBlueMatt/repos", "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}", "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-02-02T19:53:36Z", "updated_at": "2022-03-03T18:26:41Z", "closed_at": "2022-03-03T15:10:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following seems to have regressed maybe yesterday or the day before on nightly, but builds on stable. It is real code, sorry its not 100% minimal :)\r\n\r\n```rust\r\nuse core::fmt;\r\nuse core::fmt::Debug;\r\n\r\nuse std::io;\r\n\r\n/// An error in decoding a message or struct.\r\n#[derive(Clone, Debug, PartialEq)]\r\npub enum DecodeError {\r\n\t/// A version byte specified something we don't know how to handle.\r\n\t/// Includes unknown realm byte in an OnionHopData packet\r\n\tUnknownVersion,\r\n\t/// Unknown feature mandating we fail to parse message (eg TLV with an even, unknown type)\r\n\tUnknownRequiredFeature,\r\n\t/// Value was invalid, eg a byte which was supposed to be a bool was something other than a 0\r\n\t/// or 1, a public key/private key/signature was invalid, text wasn't UTF-8, TLV was\r\n\t/// syntactically incorrect, etc\r\n\tInvalidValue,\r\n\t/// Buffer too short\r\n\tShortRead,\r\n\t/// A length descriptor in the packet didn't describe the later data correctly\r\n\tBadLengthDescriptor,\r\n\t/// Error from std::io\r\n\tIo(/// (C-not exported) as ErrorKind doesn't have a reasonable mapping\r\n        io::ErrorKind),\r\n\t/// The message included zlib-compressed values, which we don't support.\r\n\tUnsupportedCompression,\r\n}\r\n\r\n\r\n\r\nimpl fmt::Display for DecodeError {\r\n\tfn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\r\n\t\tmatch *self {\r\n\t\t\tDecodeError::UnknownVersion => f.write_str(\"Unknown realm byte in Onion packet\"),\r\n\t\t\tDecodeError::UnknownRequiredFeature => f.write_str(\"Unknown required feature preventing decode\"),\r\n\t\t\tDecodeError::InvalidValue => f.write_str(\"Nonsense bytes didn't map to the type they were interpreted as\"),\r\n\t\t\tDecodeError::ShortRead => f.write_str(\"Packet extended beyond the provided bytes\"),\r\n\t\t\tDecodeError::BadLengthDescriptor => f.write_str(\"A length descriptor in the packet didn't describe the later data correctly\"),\r\n\t\t\tDecodeError::Io(ref e) => e.fmt(f),\r\n\t\t\tDecodeError::UnsupportedCompression => f.write_str(\"We don't support receiving messages with zlib-compressed fields\"),\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nError running this on playground for feb 1's nightly:\r\n\r\n```\r\n \r\n\u28ff\r\nStandard Error\r\n\r\n   Compiling playground v0.0.1 (/playground)\r\nerror[E0034]: multiple applicable items in scope\r\n  --> src/lib.rs:39:32\r\n   |\r\n39 |             DecodeError::Io(ref e) => e.fmt(f),\r\n   |                                         ^^^ multiple `fmt` found\r\n   |\r\n   = note: candidate #1 is defined in an impl of the trait `std::fmt::Display` for the type `ErrorKind`\r\n   = note: candidate #2 is defined in an impl of the trait `Debug` for the type `ErrorKind`\r\nhelp: disambiguate the associated function for candidate #1\r\n   |\r\n39 |             DecodeError::Io(ref e) => std::fmt::Display::fmt(&e, f),\r\n   |                                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nhelp: disambiguate the associated function for candidate #2\r\n   |\r\n39 |             DecodeError::Io(ref e) => Debug::fmt(&e, f),\r\n   |                                       ~~~~~~~~~~~~~~~~~\r\n\r\nFor more information about this error, try `rustc --explain E0034`.\r\nerror: could not compile `playground` due to previous error\r\n\r\nWarnings\r\n\r\nNo main function was detected, so your code was compiled\r\nbut not run. If you\u2019d like to execute your code, please\r\nadd a main function.\r\n```", "closed_by": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/93599/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/93599/timeline", "performed_via_github_app": null, "state_reason": "completed"}