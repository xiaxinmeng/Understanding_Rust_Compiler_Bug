{"url": "https://api.github.com/repos/rust-lang/rust/issues/39025", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39025/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39025/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39025/events", "html_url": "https://github.com/rust-lang/rust/issues/39025", "id": 200524064, "node_id": "MDU6SXNzdWUyMDA1MjQwNjQ=", "number": 39025, "title": "ICE: The expected specialization failed to hold", "user": {"login": "Stebalien", "id": 310393, "node_id": "MDQ6VXNlcjMxMDM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stebalien", "html_url": "https://github.com/Stebalien", "followers_url": "https://api.github.com/users/Stebalien/followers", "following_url": "https://api.github.com/users/Stebalien/following{/other_user}", "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions", "organizations_url": "https://api.github.com/users/Stebalien/orgs", "repos_url": "https://api.github.com/users/Stebalien/repos", "events_url": "https://api.github.com/users/Stebalien/events{/privacy}", "received_events_url": "https://api.github.com/users/Stebalien/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-13T01:13:34Z", "updated_at": "2017-01-13T02:35:51Z", "closed_at": "2017-01-13T02:35:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When compiling `src/test/run-pass/impl-trait/example-calendar.rs` with https://github.com/rust-lang/rust/pull/39022, I ran into the following ICE ([travis log](https://s3.amazonaws.com/archive.travis-ci.org/jobs/191491643/log.txt)).\r\n\r\n```rust\r\nerror: internal compiler error: src/librustc/traits/specialize/mod.rs:97: When translating substitutions for specialization, the expected specializaiton failed to hold\r\n...\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:423\r\nstack backtrace:\r\n   1:      0x38c4d490413 - std::sys::imp::backtrace::tracing::imp::write::h006ed98a07af79c8\r\n   2:      0x38c4d49ed14 - std::panicking::default_hook::{{closure}}::h29bdde758ec669fd\r\n   3:      0x38c4d49e8bd - std::panicking::default_hook::h8ce4f57b1816201b\r\n   4:      0x38c4d49f195 - std::panicking::rust_panic_with_hook::ha527bbf152b96a9f\r\n   5:      0x38c46924617 - std::panicking::begin_panic::h01d55e81a4e5a829\r\n   6:      0x38c46939dc9 - rustc_errors::Handler::bug::he9fe936d23591543\r\n   7:      0x38c4a7e625a - rustc::session::opt_span_bug_fmt::{{closure}}::h99f1624dc46f130e\r\n   8:      0x38c4a7e6065 - rustc::session::opt_span_bug_fmt::h31032ed16ce8405b\r\n   9:      0x38c4a7e5cc2 - rustc::session::bug_fmt::haf155d760dc9c0d1\r\n  10:      0x38c4a81b3c2 - rustc::traits::specialize::translate_substs::h108b7a80a0560c6b\r\n  11:      0x38c4a803c49 - rustc::traits::project::confirm_select_candidate::h8aa9e2bf65235f75\r\n  12:      0x38c4a801618 - rustc::traits::project::opt_normalize_projection_type::h6c608544acdaafbe\r\n  13:      0x38c4a7fc31c - rustc::traits::project::project_and_unify_type::h4303c8774bf7296a\r\n  14:      0x38c4a758108 - rustc::infer::InferCtxt::commit_if_ok::h7baf768a00504b52\r\n  15:      0x38c4a7f9e8e - <rustc::traits::fulfill::FulfillProcessor<'a, 'b, 'gcx, 'tcx> as rustc_data_structures::obligation_forest::ObligationProcessor>::process_obligation::hc4df08fb32c2f015\r\n  16:      0x38c4a692dd7 - <rustc_data_structures::obligation_forest::ObligationForest<O>>::process_obligations::h05207a7b88042398\r\n  17:      0x38c4a7f86d7 - rustc::traits::fulfill::FulfillmentContext::select_where_possible::h6a71ef9637add14a\r\n  18:      0x38c4b92b319 - rustc_typeck::check::FnCtxt::select_obligations_where_possible::h8441133a951b3f89\r\n  19:      0x38c4b92c600 - rustc_typeck::check::FnCtxt::check_argument_types::h43a2217507999c34\r\n  20:      0x38c4b92bce8 - rustc_typeck::check::FnCtxt::check_method_argument_types::he5c2672b4788e51c\r\n  21:      0x38c4b93a6c5 - rustc_typeck::check::FnCtxt::check_expr_kind::ha4290435c9a6472f\r\n  22:      0x38c4b937d1d - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h1718ad876ea15e9d\r\n  23:      0x38c4b94a5bd - rustc_typeck::check::FnCtxt::check_decl_initializer::h76279d7039c031ee\r\n  24:      0x38c4b94a6c4 - rustc_typeck::check::FnCtxt::check_decl_local::hd78758c2b826cd55\r\n  25:      0x38c4b94a9f6 - rustc_typeck::check::FnCtxt::check_stmt::h8392e702cb6899b0\r\n  26:      0x38c4b94ad4e - rustc_typeck::check::FnCtxt::check_block_with_expected::h8e5f141b4696de7b\r\n  27:      0x38c4b938187 - rustc_typeck::check::FnCtxt::check_expr_kind::ha4290435c9a6472f\r\n  28:      0x38c4b937d1d - rustc_typeck::check::FnCtxt::check_expr_with_expectation_and_lvalue_pref::h1718ad876ea15e9d\r\n  29:      0x38c4b91db71 - rustc_typeck::check::check_fn::h1979d8127971e8cb\r\n  30:      0x38c4b91cb84 - rustc_typeck::check::check_bare_fn::h3ed0606ed517ee6f\r\n  31:      0x38c4b91f741 - rustc_typeck::check::check_item_body::he9e79e65ed5d897b\r\n  32:      0x38c4b919d4a - rustc_typeck::check::check_item_bodies::h2132a6ba61922f47\r\n  33:      0x38c4b98bed7 - rustc_typeck::check_crate::he7efcf7e8fe91081\r\n  34:      0x38c4d850347 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::hd12f5906a3bad0b1\r\n  35:      0x38c4d7abb99 - rustc::ty::context::TyCtxt::create_and_enter::h175f09027374055c\r\n  36:      0x38c4d82acd0 - rustc_driver::driver::compile_input::he75659f0a4c94991\r\n  37:      0x38c4d86ff22 - rustc_driver::run_compiler::h24edcb3b397374e9\r\n  38:      0x38c4d77465b - std::panicking::try::do_call::h91593801b844e93f\r\n  39:      0x38c4d4a7b16 - __rust_maybe_catch_panic\r\n  40:      0x38c4d79e202 - <F as alloc::boxed::FnBox<A>>::call_box::h3b891c67d21d918b\r\n  41:      0x38c4d49db90 - std::sys::imp::thread::Thread::new::thread_start::h6fb015bd685b45e0\r\n  42:      0x38c460cd453 - start_thread\r\n  43:      0x38c4d1617de - __GI___clone\r\n  44:                0x0 - <unknown>\r\n```\r\n", "closed_by": {"login": "Stebalien", "id": 310393, "node_id": "MDQ6VXNlcjMxMDM5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/310393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stebalien", "html_url": "https://github.com/Stebalien", "followers_url": "https://api.github.com/users/Stebalien/followers", "following_url": "https://api.github.com/users/Stebalien/following{/other_user}", "gists_url": "https://api.github.com/users/Stebalien/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stebalien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stebalien/subscriptions", "organizations_url": "https://api.github.com/users/Stebalien/orgs", "repos_url": "https://api.github.com/users/Stebalien/repos", "events_url": "https://api.github.com/users/Stebalien/events{/privacy}", "received_events_url": "https://api.github.com/users/Stebalien/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39025/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39025/timeline", "performed_via_github_app": null, "state_reason": "completed"}