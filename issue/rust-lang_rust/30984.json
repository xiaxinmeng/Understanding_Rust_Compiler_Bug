{"url": "https://api.github.com/repos/rust-lang/rust/issues/30984", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30984/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30984/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30984/events", "html_url": "https://github.com/rust-lang/rust/issues/30984", "id": 127114635, "node_id": "MDU6SXNzdWUxMjcxMTQ2MzU=", "number": 30984, "title": "In rust book, error handling refactoring example changes result", "user": {"login": "kimroen", "id": 520420, "node_id": "MDQ6VXNlcjUyMDQyMA==", "avatar_url": "https://avatars.githubusercontent.com/u/520420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kimroen", "html_url": "https://github.com/kimroen", "followers_url": "https://api.github.com/users/kimroen/followers", "following_url": "https://api.github.com/users/kimroen/following{/other_user}", "gists_url": "https://api.github.com/users/kimroen/gists{/gist_id}", "starred_url": "https://api.github.com/users/kimroen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kimroen/subscriptions", "organizations_url": "https://api.github.com/users/kimroen/orgs", "repos_url": "https://api.github.com/users/kimroen/repos", "events_url": "https://api.github.com/users/kimroen/events{/privacy}", "received_events_url": "https://api.github.com/users/kimroen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-01-17T18:40:17Z", "updated_at": "2016-01-26T15:36:27Z", "closed_at": "2016-01-26T15:36:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "https://doc.rust-lang.org/book/error-handling.html#composing-option-and-result\n\nThis whole thing is really great, but after the changes in this particular section, the example program goes from doubling the provided number to just spitting back out the number it got (albeit now with excellent error handling along the way).\n\nThe name of the function (`double_arg`) indicates that the doubling should happen in there, and I'm actually not quite sure where it would make sense to put it, while maintaining the point of the section (showing off `ok_or` and `map_err`).\n\nA copy of the program I'm talking about, for convenience:\n\n``` rust\nuse std::env;\n\nfn double_arg(mut argv: env::Args) -> Result<i32, String> {\n    argv.nth(1)\n        .ok_or(\"Please give at least one argument\".to_owned())\n        .and_then(|arg| arg.parse::<i32>().map_err(|err| err.to_string()))\n}\n\nfn main() {\n    match double_arg(env::args()) {\n        Ok(n) => println!(\"{}\", n),\n        Err(err) => println!(\"Error: {}\", err),\n    }\n}\n```\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30984/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30984/timeline", "performed_via_github_app": null, "state_reason": "completed"}