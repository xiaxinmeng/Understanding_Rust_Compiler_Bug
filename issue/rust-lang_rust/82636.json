{"url": "https://api.github.com/repos/rust-lang/rust/issues/82636", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/82636/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/82636/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/82636/events", "html_url": "https://github.com/rust-lang/rust/issues/82636", "id": 818276451, "node_id": "MDU6SXNzdWU4MTgyNzY0NTE=", "number": 82636, "title": "Panic when running UI tests with `parallel-compiler = true` and without -Z unstable-options", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1576178387, "node_id": "MDU6TGFiZWwxNTc2MTc4Mzg3", "url": "https://api.github.com/repos/rust-lang/rust/labels/WG-compiler-parallel", "name": "WG-compiler-parallel", "color": "c2e0c6", "default": false, "description": "Working group working on parallelizing the compiler"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-02-28T18:40:27Z", "updated_at": "2023-05-15T04:13:01Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Steps to replicate: Check out https://github.com/jyn514/rust/commit/0e0bb7b4db3bd7e3cc846cea96c6bf69f201d05e and run `x.py test src/test/ui`.\r\n\r\n```\r\n---- [ui] ui/recursion/issue-26548-recursion-via-normalize.rs stdout ----\r\n\r\nerror: Error: expected failure status (Some(1)) but received status None.\r\nstatus: signal: 6\r\ncommand: \"/home/joshua/rustc3/build/x86_64-unknown-linux-gnu/stage1/bin/rustc\" \"/home/joshua/rustc3/src/test/ui/recursion/issue-26548-recursion-via-normalize.rs\" \"-Zthreads=1\" \"--target=x86_64-unknown-linux-gnu\" \"--error-format\" \"json\" \"-Zui-testing\" \"-Zdeduplicate-diagnostics=no\" \"-Zemit-future-incompat-report\" \"-C\" \"prefer-dynamic\" \"--out-dir\" \"/home/joshua/rustc3/build/x86_64-unknown-linux-gnu/test/ui/recursion/issue-26548-recursion-via-normalize\" \"-A\" \"unused\" \"-Crpath\" \"-O\" \"-Cdebuginfo=0\" \"-Lnative=/home/joshua/rustc3/build/x86_64-unknown-linux-gnu/native/rust-test-helpers\" \"-L\" \"/home/joshua/rustc3/build/x86_64-unknown-linux-gnu/test/ui/recursion/issue-26548-recursion-via-normalize/auxiliary\"\r\nstdout:\r\n------------------------------------------\r\n\r\n------------------------------------------\r\nstderr:\r\n------------------------------------------\r\nthread '<unnamed>' panicked at 'WorkerLocal can only be used on the thread pool it was created on', /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/worker_local.rs:47:17\r\n```\r\n\r\n<details><summary>Backtrace</summary>\r\n\r\n```\r\nstack backtrace:\r\n   0: std::panicking::begin_panic\r\n             at ./library/std/src/panicking.rs:519:12\r\n   1: rustc_rayon_core::worker_local::WorkerLocal<T>::current\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/worker_local.rs:47:17\r\n   2: <rustc_rayon_core::worker_local::WorkerLocal<T> as core::ops::deref::Deref>::deref\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/worker_local.rs:72:9\r\n   3: rustc_metadata::rmeta::decoder::cstore_impl::provide_extern::item_children\r\n             at ./compiler/rustc_metadata/src/rmeta/decoder/cstore_impl.rs:225:9\r\n   4: rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl\r\n             at ./compiler/rustc_query_system/src/dep_graph/graph.rs:365:14\r\n   5: rustc_query_system::query::plumbing::force_query_with_job::{{closure}}::{{closure}}\r\n   6: stacker::maybe_grow\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/stacker-0.1.12/src/lib.rs:55:9\r\n   7: rustc_data_structures::stack::ensure_sufficient_stack\r\n             at ./compiler/rustc_data_structures/src/stack.rs:16:5\r\n   8: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:169:17\r\n   9: rustc_middle::ty::context::tls::enter_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:50\r\n  10: rustc_rayon_core::tlv::with\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/tlv.rs:19:5\r\n  11: rustc_middle::ty::context::tls::set_tlv\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1681:9\r\n  12: rustc_middle::ty::context::tls::enter_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:9\r\n  13: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query::{{closure}}\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:168:13\r\n  14: rustc_middle::ty::context::tls::with_related_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1767:13\r\n  15: rustc_middle::ty::context::tls::with_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:40\r\n  16: rustc_middle::ty::context::tls::with_context_opt\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1740:22\r\n  17: rustc_middle::ty::context::tls::with_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:9\r\n  18: rustc_middle::ty::context::tls::with_related_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1764:9\r\n  19: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:157:9\r\n  20: rustc_query_system::query::plumbing::force_query_with_job::{{closure}}\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:617:9\r\n  21: rustc_query_system::query::plumbing::with_diagnostics\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:328:18\r\n  22: rustc_query_system::query::plumbing::force_query_with_job\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:616:51\r\n  23: rustc_query_system::query::plumbing::try_execute_query\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:444:16\r\n  24: rustc_query_system::query::plumbing::get_query_impl\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:664:5\r\n  25: rustc_query_system::query::plumbing::get_query\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:775:9\r\n  26: rustc_middle::ty::query::TyCtxtAt::item_children\r\n             at ./compiler/rustc_middle/src/ty/query/mod.rs:205:17\r\n  27: rustc_middle::ty::query::<impl rustc_middle::ty::context::TyCtxt>::item_children\r\n             at ./compiler/rustc_middle/src/ty/query/mod.rs:186:17\r\n  28: rustc_metadata::rmeta::decoder::cstore_impl::provide::{{closure}}\r\n             at ./compiler/rustc_metadata/src/rmeta/decoder/cstore_impl.rs:371:34\r\n  29: core::ops::function::FnOnce::call_once\r\n             at ./library/core/src/ops/function.rs:227:5\r\n  30: rustc_query_impl::<impl rustc_query_system::query::config::QueryAccessors<rustc_query_impl::plumbing::QueryCtxt> for rustc_query_impl::queries::visible_parent_map>::compute\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:400:17\r\n  31: rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl\r\n             at ./compiler/rustc_query_system/src/dep_graph/graph.rs:365:14\r\n  32: rustc_query_system::query::plumbing::force_query_with_job::{{closure}}::{{closure}}\r\n  33: stacker::maybe_grow\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/stacker-0.1.12/src/lib.rs:55:9\r\n  34: rustc_data_structures::stack::ensure_sufficient_stack\r\n             at ./compiler/rustc_data_structures/src/stack.rs:16:5\r\n  35: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:169:17\r\n  36: rustc_middle::ty::context::tls::enter_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:50\r\n  37: rustc_rayon_core::tlv::with\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/tlv.rs:19:5\r\n  38: rustc_middle::ty::context::tls::set_tlv\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1681:9\r\n  39: rustc_middle::ty::context::tls::enter_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:9\r\n  40: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query::{{closure}}\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:168:13\r\n  41: rustc_middle::ty::context::tls::with_related_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1767:13\r\n  42: rustc_middle::ty::context::tls::with_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:40\r\n  43: rustc_middle::ty::context::tls::with_context_opt\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1740:22\r\n  44: rustc_middle::ty::context::tls::with_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:9\r\n  45: rustc_middle::ty::context::tls::with_related_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1764:9\r\n  46: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::start_query\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:157:9\r\n  47: rustc_query_system::query::plumbing::force_query_with_job::{{closure}}\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:617:9\r\n  48: rustc_query_system::query::plumbing::with_diagnostics\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:328:18\r\n  49: rustc_query_system::query::plumbing::force_query_with_job\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:616:51\r\n  50: rustc_query_system::query::plumbing::try_execute_query\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:444:16\r\n  51: rustc_query_system::query::plumbing::get_query_impl\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:664:5\r\n  52: rustc_query_system::query::plumbing::get_query\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:775:9\r\n  53: rustc_middle::ty::query::TyCtxtAt::visible_parent_map\r\n             at ./compiler/rustc_middle/src/ty/query/mod.rs:205:17\r\n  54: rustc_middle::ty::query::<impl rustc_middle::ty::context::TyCtxt>::visible_parent_map\r\n             at ./compiler/rustc_middle/src/ty/query/mod.rs:186:17\r\n  55: rustc_middle::ty::print::pretty::PrettyPrinter::try_print_visible_def_path_recur\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:362:34\r\n  56: rustc_middle::ty::print::pretty::PrettyPrinter::try_print_visible_def_path\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:270:9\r\n  57: <rustc_middle::ty::print::pretty::FmtPrinter<F> as rustc_middle::ty::print::Printer>::print_def_path\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1357:19\r\n  58: rustc_middle::ty::print::Printer::default_print_def_path::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/print/mod.rs:146:42\r\n  59: <rustc_middle::ty::print::pretty::FmtPrinter<F> as rustc_middle::ty::print::Printer>::path_generic_args\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1512:16\r\n  60: rustc_middle::ty::print::Printer::default_print_def_path\r\n             at ./compiler/rustc_middle/src/ty/print/mod.rs:145:40\r\n  61: <rustc_middle::ty::print::pretty::FmtPrinter<F> as rustc_middle::ty::print::Printer>::print_def_path\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1394:9\r\n  62: rustc_middle::ty::print::pretty::PrettyPrinter::pretty_print_type\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:581:17\r\n  63: <rustc_middle::ty::print::pretty::FmtPrinter<F> as rustc_middle::ty::print::Printer>::print_type\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1404:13\r\n  64: <&rustc_middle::ty::TyS as rustc_middle::ty::print::Print<P>>::print\r\n             at ./compiler/rustc_middle/src/ty/print/mod.rs:342:9\r\n  65: rustc_middle::ty::print::pretty::<impl core::fmt::Display for &rustc_middle::ty::TyS>::fmt::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1890:21\r\n  66: rustc_middle::ty::context::tls::with::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1778:32\r\n  67: rustc_middle::ty::context::tls::with_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:40\r\n  68: rustc_middle::ty::context::tls::with_context_opt\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1740:22\r\n  69: rustc_middle::ty::context::tls::with_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:9\r\n  70: rustc_middle::ty::context::tls::with\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1778:9\r\n  71: rustc_middle::ty::print::pretty::<impl core::fmt::Display for &rustc_middle::ty::TyS>::fmt\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:1889:17\r\n  72: core::fmt::write\r\n             at ./library/core/src/fmt/mod.rs:1092:17\r\n  73: core::fmt::Write::write_fmt\r\n             at ./library/core/src/fmt/mod.rs:182:9\r\n  74: alloc::fmt::format\r\n             at ./library/alloc/src/fmt.rs:578:5\r\n  75: rustc_query_impl::plumbing::<impl rustc_query_system::query::config::QueryDescription<rustc_query_impl::plumbing::QueryCtxt> for rustc_query_impl::queries::layout_raw>::describe::{{closure}}\r\n             at ./compiler/rustc_middle/src/query/mod.rs:12:1\r\n  76: rustc_middle::ty::print::pretty::with_no_trimmed_paths::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:107:22\r\n  77: std::thread::local::LocalKey<T>::try_with\r\n             at ./library/std/src/thread/local.rs:272:16\r\n  78: std::thread::local::LocalKey<T>::with\r\n             at ./library/std/src/thread/local.rs:248:9\r\n  79: rustc_middle::ty::print::pretty::with_no_trimmed_paths\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:105:5\r\n  80: rustc_query_impl::plumbing::<impl rustc_query_system::query::config::QueryDescription<rustc_query_impl::plumbing::QueryCtxt> for rustc_query_impl::queries::layout_raw>::describe\r\n             at ./compiler/rustc_middle/src/query/mod.rs:12:1\r\n  81: rustc_query_impl::make_query::layout_raw::{{closure}}\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:328:24\r\n  82: rustc_middle::ty::print::pretty::with_forced_impl_filename_line::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:85:22\r\n  83: std::thread::local::LocalKey<T>::try_with\r\n             at ./library/std/src/thread/local.rs:272:16\r\n  84: std::thread::local::LocalKey<T>::with\r\n             at ./library/std/src/thread/local.rs:248:9\r\n  85: rustc_middle::ty::print::pretty::with_forced_impl_filename_line\r\n             at ./compiler/rustc_middle/src/ty/print/pretty.rs:83:5\r\n  86: rustc_query_impl::make_query::layout_raw\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:326:35\r\n  87: rustc_query_system::query::plumbing::QueryState<D,K>::try_collect_active_jobs::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:138:67\r\n  88: core::iter::adapters::filter_map::filter_map_fold::{{closure}}\r\n             at ./library/core/src/iter/adapters/filter_map.rs:36:28\r\n  89: core::iter::traits::iterator::Iterator::fold\r\n             at ./library/core/src/iter/traits/iterator.rs:2122:21\r\n  90: <core::iter::adapters::filter_map::FilterMap<I,F> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/filter_map.rs:85:9\r\n  91: <core::iter::adapters::flatten::FlattenCompat<I,U> as core::iter::traits::iterator::Iterator>::fold::flatten::{{closure}}\r\n             at ./library/core/src/iter/adapters/flatten.rs:336:27\r\n  92: core::iter::adapters::map::map_fold::{{closure}}\r\n             at ./library/core/src/iter/adapters/map.rs:81:21\r\n  93: <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold::enumerate::{{closure}}\r\n             at ./library/core/src/iter/adapters/enumerate.rs:104:27\r\n  94: core::iter::traits::iterator::Iterator::fold\r\n             at ./library/core/src/iter/traits/iterator.rs:2122:21\r\n  95: <core::iter::adapters::enumerate::Enumerate<I> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/enumerate.rs:110:9\r\n  96: <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/map.rs:121:9\r\n  97: <core::iter::adapters::fuse::Fuse<I> as core::iter::adapters::fuse::FuseImpl<I>>::fold\r\n             at ./library/core/src/iter/adapters/fuse.rs:458:9\r\n  98: <core::iter::adapters::fuse::Fuse<I> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/fuse.rs:105:9\r\n  99: <core::iter::adapters::flatten::FlattenCompat<I,U> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/flatten.rs:343:16\r\n 100: <core::iter::adapters::flatten::FlatMap<I,U,F> as core::iter::traits::iterator::Iterator>::fold\r\n             at ./library/core/src/iter/adapters/flatten.rs:74:9\r\n 101: core::iter::traits::iterator::Iterator::for_each\r\n             at ./library/core/src/iter/traits/iterator.rs:774:9\r\n 102: <hashbrown::map::HashMap<K,V,S> as core::iter::traits::collect::Extend<(K,V)>>::extend\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/hashbrown-0.9.0/src/map.rs:3041:9\r\n 103: <std::collections::hash::map::HashMap<K,V,S> as core::iter::traits::collect::Extend<(K,V)>>::extend\r\n             at ./library/std/src/collections/hash/map.rs:2714:9\r\n 104: rustc_query_system::query::plumbing::QueryState<D,K>::try_collect_active_jobs\r\n             at ./compiler/rustc_query_system/src/query/plumbing.rs:134:9\r\n 105: rustc_query_impl::Queries::try_collect_active_jobs\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:539:21\r\n 106: <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::try_collect_active_jobs\r\n             at ./compiler/rustc_query_impl/src/plumbing.rs:54:9\r\n 107: rustc_query_system::query::job::deadlock\r\n             at ./compiler/rustc_query_system/src/query/job.rs:559:21\r\n 108: rustc_interface::util::handle_deadlock::{{closure}}::{{closure}}::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_interface/src/util.rs:179:58\r\n 109: rustc_middle::ty::context::tls::with::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1778:32\r\n 110: rustc_middle::ty::context::tls::with_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:40\r\n 111: rustc_middle::ty::context::tls::with_context_opt\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1740:22\r\n 112: rustc_middle::ty::context::tls::with_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1751:9\r\n 113: rustc_middle::ty::context::tls::with\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1778:9\r\n 114: rustc_interface::util::handle_deadlock::{{closure}}::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_interface/src/util.rs:179:42\r\n 115: scoped_tls::ScopedKey<T>::set\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-1.0.0/src/lib.rs:137:9\r\n 116: rustc_interface::util::handle_deadlock::{{closure}}::{{closure}}\r\n             at ./compiler/rustc_interface/src/util.rs:178:13\r\n 117: rustc_middle::ty::context::tls::enter_context::{{closure}}\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:50\r\n 118: rustc_rayon_core::tlv::with\r\n             at /home/joshua/.local/lib/cargo/registry/src/github.com-1ecc6299db9ec823/rustc-rayon-core-0.3.0/src/tlv.rs:19:5\r\n 119: rustc_middle::ty::context::tls::set_tlv\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1681:9\r\n 120: rustc_middle::ty::context::tls::enter_context\r\n             at ./compiler/rustc_middle/src/ty/context.rs:1723:9\r\n 121: rustc_interface::util::handle_deadlock::{{closure}}\r\n             at ./compiler/rustc_interface/src/util.rs:177:9\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n```\r\n\r\n</details>\r\n\r\n```\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.52.0-dev running on x86_64-unknown-linux-gnu\r\n\r\nnote: compiler flags: -Z threads=1 -Z ui-testing -Z deduplicate-diagnostics=no -Z emit-future-incompat-report -C prefer-dynamic -C rpath -C debuginfo=0\r\n\r\nquery stack during panic:\r\nend of query stack\r\ndeadlock handler panicked, aborting process\r\n\r\n------------------------------------------\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/82636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/82636/timeline", "performed_via_github_app": null, "state_reason": null}