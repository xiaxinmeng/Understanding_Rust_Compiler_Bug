{"url": "https://api.github.com/repos/rust-lang/rust/issues/31752", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31752/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31752/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31752/events", "html_url": "https://github.com/rust-lang/rust/issues/31752", "id": 134603638, "node_id": "MDU6SXNzdWUxMzQ2MDM2Mzg=", "number": 31752, "title": "\"cannot move out of captured outer variable in an `FnMut` closure\" should mention the outer variable", "user": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-02-18T15:04:04Z", "updated_at": "2017-05-06T17:27:17Z", "closed_at": "2017-05-06T12:18:41Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "``` rust\n\nuse std::thread;\n\nfn main() {\n    let things = vec![1,2,3,4];\n    let mut buf = vec![];\n    let handle_thread: Vec<_> = things.iter().map(|&d| {\n        thread::spawn(move || {\n            do_thing(&mut buf);\n        })\n    }).collect();\n}\n\nfn do_thing(x: &mut [u8]) {}\n```\n\n(https://gist.github.com/772bde36b6cddebcd46a)\n\ngives \n\n``` text\n<anon>:11:17: 13:4 error: cannot move out of captured outer variable in an `FnMut` closure [E0507]\n<anon>:11       thread::spawn(move || {\n<anon>:12           do_thing(&mut buf);\n<anon>:13       })\nerror: aborting due to previous error\n```\n\nExcept that it's totally confusing as to which outer variable is being talked about. In this case it's obvious since there's a single capture, but this won't always be the case.\n\nThe error should at least mention the name of the captured variable, and preferably point out where the variable was captured and how to fix it.\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31752/reactions", "total_count": 25, "+1": 25, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31752/timeline", "performed_via_github_app": null, "state_reason": "completed"}