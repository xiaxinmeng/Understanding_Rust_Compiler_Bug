{"url": "https://api.github.com/repos/rust-lang/rust/issues/47103", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47103/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47103/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47103/events", "html_url": "https://github.com/rust-lang/rust/issues/47103", "id": 285319419, "node_id": "MDU6SXNzdWUyODUzMTk0MTk=", "number": 47103, "title": "What to do about repr(C, simd)?", "user": {"login": "hanna-kruppe", "id": 2311707, "node_id": "MDQ6VXNlcjIzMTE3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2311707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanna-kruppe", "html_url": "https://github.com/hanna-kruppe", "followers_url": "https://api.github.com/users/hanna-kruppe/followers", "following_url": "https://api.github.com/users/hanna-kruppe/following{/other_user}", "gists_url": "https://api.github.com/users/hanna-kruppe/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanna-kruppe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanna-kruppe/subscriptions", "organizations_url": "https://api.github.com/users/hanna-kruppe/orgs", "repos_url": "https://api.github.com/users/hanna-kruppe/repos", "events_url": "https://api.github.com/users/hanna-kruppe/events{/privacy}", "received_events_url": "https://api.github.com/users/hanna-kruppe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 45472092, "node_id": "MDU6TGFiZWw0NTQ3MjA5Mg==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-ffi", "name": "A-ffi", "color": "f7e101", "default": false, "description": "Area: Foreign Function Interface (FFI)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 631737389, "node_id": "MDU6TGFiZWw2MzE3MzczODk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-simd", "name": "A-simd", "color": "f7e101", "default": false, "description": "Area: SIMD (Single Instruction Multiple Data)"}, {"id": 1472557610, "node_id": "MDU6TGFiZWwxNDcyNTU3NjEw", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-simd_ffi", "name": "F-simd_ffi", "color": "f9c0cc", "default": false, "description": "`#![feature(simd_ffi)]`"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 22, "created_at": "2018-01-01T17:42:13Z", "updated_at": "2021-10-05T23:52:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, `repr(C, simd)` warns about \"incompatible representation hints\", but leaving off the `repr(C)` triggers the FFI lint when the SIMD type is used in FFI.\r\n\r\nNote that `#[repr(C)] #[repr(simd)]` does not warn only due to #47094. Most uses of SIMD in FFI this in the Rust source tree use two separate repr attributes, which is why they didn't trigger this warning so far.\r\n\r\nThere's two ways to resolve this:\r\n\r\n1. Require `repr(C, simd)` for SIMD types used in FFI.\r\n2. Say `repr(simd)` is sufficient for FFI (in principle -- there are other concerns that keep SIMD-FFI feature gated at the moment) and keep the warning about `repr(C, simd)`. It could optionally restricted to some simd types that are known to correspond to C types on the platform in question (e.g., permit `f32x4` but not `f32x3`).\r\n\r\ncc @alexcrichton ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47103/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47103/timeline", "performed_via_github_app": null, "state_reason": null}