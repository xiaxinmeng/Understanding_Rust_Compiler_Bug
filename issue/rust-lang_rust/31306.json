{"url": "https://api.github.com/repos/rust-lang/rust/issues/31306", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31306/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31306/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31306/events", "html_url": "https://github.com/rust-lang/rust/issues/31306", "id": 129985391, "node_id": "MDU6SXNzdWUxMjk5ODUzOTE=", "number": 31306, "title": "Invalid paths are suggested for \"possibly newer version of crate\" error on Windows", "user": {"login": "fhahn", "id": 450489, "node_id": "MDQ6VXNlcjQ1MDQ4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/450489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fhahn", "html_url": "https://github.com/fhahn", "followers_url": "https://api.github.com/users/fhahn/followers", "following_url": "https://api.github.com/users/fhahn/following{/other_user}", "gists_url": "https://api.github.com/users/fhahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/fhahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fhahn/subscriptions", "organizations_url": "https://api.github.com/users/fhahn/orgs", "repos_url": "https://api.github.com/users/fhahn/repos", "events_url": "https://api.github.com/users/fhahn/events{/privacy}", "received_events_url": "https://api.github.com/users/fhahn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-01-30T13:22:48Z", "updated_at": "2021-12-02T17:58:37Z", "closed_at": "2021-12-02T17:58:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "#30778 uncovered that on Windows (Rust compiled with msvc), additional paths are suggested when there's a newer version of a crate, e.g. e.g. for `changing-crates.rs` the following notes are emitted:\n\n```\nC:/bot/slave/auto-win-msvc-64-opt/build/src/test/compile-fail/changing-crates.rs:17:1: 17:16 note: crate `a` path #1: \\\\?\\C:\\bot\\slave\\auto-win-msvc-64-opt\\build\\obj\\x86_64-pc-windows-msvc\\test\\compile-fail\\changing-crates.stage2-x86_64-pc-windows-msvc.compile-fail.libaux\\a.dll\nC:/bot/slave/auto-win-msvc-64-opt/build/src/test/compile-fail/changing-crates.rs:17:1: 17:16 note: crate `b` path #1: \\\\?\\C:\\bot\\slave\\auto-win-msvc-64-opt\\build\\obj\\x86_64-pc-windows-msvc\\test\\compile-fail\\changing-crates.stage2-x86_64-pc-windows-msvc.compile-fail.libaux\\b.dll\nC:/bot/slave/auto-win-msvc-64-opt/build/src/test/compile-fail/changing-crates.rs:17:1: 17:16 help: please recompile this crate using --crate-type lib\nC:/bot/slave/auto-win-msvc-64-opt/build/src/test/compile-fail/changing-crates.rs:17:1: 17:16 note: crate `a` path #1: x86_64-pc-windows-msvc/test/compile-fail\\changing-crates.stage2-x86_64-pc-windows-msvc.compile-fail.libaux\\a.dll.lib\nC:/bot/slave/auto-win-msvc-64-opt/build/src/test/compile-fail/changing-crates.rs:17:1: 17:16 note: crate `a` path #2: C:\\bot\\slave\\auto-win-msvc-64-opt\\build\\obj\\x86_64-pc-windows-msvc\\stage2\\lib\\rustlib\\x86_64-pc-windows-msvc\\lib\\arena-db5a760f.dll.lib\n```\n\nThe last two notes shouldn't be there. The first of those seem to point to the one already suggested, except that the first part is missing and slashes instead of backslashes are used. The last note suggests `arena-db5a760f.dll.lib`, but that does not seem right at all.\n\nThe following tests fail due to this issue (marked as `// ignore-msvc` for now)\n\n```\n[compile-fail] compile-fail/changing-crates.rs\n[compile-fail] compile-fail/svh-change-lit.rs\n[compile-fail] compile-fail/svh-change-significant-cfg.rs\n[compile-fail] compile-fail/svh-change-trait-bound.rs\n[compile-fail] compile-fail/svh-change-type-arg.rs\n[compile-fail] compile-fail/svh-change-type-ret.rs\n[compile-fail] compile-fail/svh-change-type-static.rs\n[compile-fail] compile-fail/svh-use-trait.rs\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31306/timeline", "performed_via_github_app": null, "state_reason": "completed"}