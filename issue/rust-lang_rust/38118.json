{"url": "https://api.github.com/repos/rust-lang/rust/issues/38118", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38118/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38118/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38118/events", "html_url": "https://github.com/rust-lang/rust/issues/38118", "id": 192973974, "node_id": "MDU6SXNzdWUxOTI5NzM5NzQ=", "number": 38118, "title": "Write compiler output to standard output if option `-o -` is provided", "user": {"login": "Qeole", "id": 8324081, "node_id": "MDQ6VXNlcjgzMjQwODE=", "avatar_url": "https://avatars.githubusercontent.com/u/8324081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Qeole", "html_url": "https://github.com/Qeole", "followers_url": "https://api.github.com/users/Qeole/followers", "following_url": "https://api.github.com/users/Qeole/following{/other_user}", "gists_url": "https://api.github.com/users/Qeole/gists{/gist_id}", "starred_url": "https://api.github.com/users/Qeole/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Qeole/subscriptions", "organizations_url": "https://api.github.com/users/Qeole/orgs", "repos_url": "https://api.github.com/users/Qeole/repos", "events_url": "https://api.github.com/users/Qeole/events{/privacy}", "received_events_url": "https://api.github.com/users/Qeole/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-12-01T21:57:43Z", "updated_at": "2017-05-16T20:58:43Z", "closed_at": "2017-05-16T20:58:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "[Disclaimer: I am new to Rust]\r\n\r\nWhile experimenting with rustc on Linux I realized that the compiler is able to read input from standard input, while it seems unable to write to standard output if I provide `-` as output name, for instance with:\r\n\r\n    $ rustc --emit llvm-ir -o - test.rs\r\n\r\nThis creates a file named `-` instead of printing generated output to the console.\r\n\r\nWhile this is not obvious why someone would like to send output to standard output, it may be occasionally useful to pipe it to another program (the example I have in mind: piping llvm-ir output into llc). Also this is, for example, the behavior adopted by clang.\r\n\r\nIn case it can help, the short research I made through the repository makes me believe that input / output filenames are handled [here in `rust/src/librustc_driver/lib.rs`](https://github.com/rust-lang/rust/blob/ecff71a45c9d1aff9ba5dbc212cb1353578525ee/src/librustc_driver/lib.rs#L224), in functions `make_input()` and `make_output()` respectively. If I am correct, it shows the difference between input (handling the `-`) and output (not supporting it).\r\n\r\nWould using `-` for standard output with `-o` option be worth considering? Or is there a good reason not to do so?\r\nIt seems that with `$ rustc -o - test.rs`\u00a0only, compilation fails (I get `error: linking with `cc` failed: exit code: 1 [\u2026] = note: cc: error: unrecognized command line option \u2018-.0.o\u2019`), could that explain why `-` is not handled in the same way for output as for input?\r\n\r\nJust in case:\r\n```\r\n$ rustc --version --verbose\r\nrustc 1.15.0-dev (5a0248068 2016-11-30)\r\nbinary: rustc\r\ncommit-hash: 5a0248068c693c64f74623e9a6f7504b900df8a6\r\ncommit-date: 2016-11-30\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.15.0-dev\r\nLLVM version: 3.9\r\n```", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38118/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38118/timeline", "performed_via_github_app": null, "state_reason": "completed"}