{"url": "https://api.github.com/repos/rust-lang/rust/issues/56056", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56056/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56056/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56056/events", "html_url": "https://github.com/rust-lang/rust/issues/56056", "id": 382023878, "node_id": "MDU6SXNzdWUzODIwMjM4Nzg=", "number": 56056, "title": "Restrict Windows DLL search path as a precaution against DLL pre-loading attacks", "user": {"login": "cpeterso", "id": 629193, "node_id": "MDQ6VXNlcjYyOTE5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/629193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cpeterso", "html_url": "https://github.com/cpeterso", "followers_url": "https://api.github.com/users/cpeterso/followers", "following_url": "https://api.github.com/users/cpeterso/following{/other_user}", "gists_url": "https://api.github.com/users/cpeterso/gists{/gist_id}", "starred_url": "https://api.github.com/users/cpeterso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cpeterso/subscriptions", "organizations_url": "https://api.github.com/users/cpeterso/orgs", "repos_url": "https://api.github.com/users/cpeterso/repos", "events_url": "https://api.github.com/users/cpeterso/events{/privacy}", "received_events_url": "https://api.github.com/users/cpeterso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 122062043, "node_id": "MDU6TGFiZWwxMjIwNjIwNDM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-security", "name": "A-security", "color": "f7e101", "default": false, "description": "Area: Security related issues (example: address space layout randomization)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-11-19T01:14:57Z", "updated_at": "2022-05-15T14:33:33Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Windows' standard DLL search path contains directories that can be vulnerable to DLL pre-loading attacks. An application can use the `SetDefaultDllDirectories` API to specify a default DLL search path for the process that eliminates the most vulnerable directories and limits the other directories that are searched.\r\n\r\nFor example, as a precaution, Firefox removes the current directory from the DLL search path and then restricts the DLL search path to the application's installation directory, the Windows system directory, and any paths explicitly added using the `AddDllDirectory` or `SetDllDirectory` APIs.\r\n\r\nhttps://searchfox.org/mozilla-central/rev/5117a4c4e29fcf80a627fecf899a62f117368abf/toolkit/mozapps/update/updater/loaddlls.cpp#15-30\r\n\r\nhttps://searchfox.org/mozilla-central/rev/5117a4c4e29fcf80a627fecf899a62f117368abf/security/sandbox/chromium/sandbox/win/src/process_mitigations.cc#46-58\r\n\r\nTo help protect against DLL pre-loading attacks, the Rust compiler could emit similar code to restrict its DLL search path for all Windows Rust programs. Changing the DLL search path could cause compatibility problems for Windows Rust programs that assume they can implicitly load DLLs in the current directory without explicitly configuring their DLL search path. The workaround is for those programs to configure their DLL search path using the the `AddDllDirectory` or `SetDllDirectory` APIs.\r\n\r\nSee MSDN for `SetDefaultDllDirectories`:\r\n\r\nhttps://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-setdefaultdlldirectories\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56056/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56056/timeline", "performed_via_github_app": null, "state_reason": null}