{"url": "https://api.github.com/repos/rust-lang/rust/issues/94757", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/94757/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/94757/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/94757/events", "html_url": "https://github.com/rust-lang/rust/issues/94757", "id": 1163382214, "node_id": "I_kwDOAAsO6M5FV83G", "number": 94757, "title": "doctest regression in Rust 1.59.0.  doctest seems to be incorrectly triggered by 4 spaces inside comment.", "user": {"login": "bvinc", "id": 165166, "node_id": "MDQ6VXNlcjE2NTE2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/165166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bvinc", "html_url": "https://github.com/bvinc", "followers_url": "https://api.github.com/users/bvinc/followers", "following_url": "https://api.github.com/users/bvinc/following{/other_user}", "gists_url": "https://api.github.com/users/bvinc/gists{/gist_id}", "starred_url": "https://api.github.com/users/bvinc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bvinc/subscriptions", "organizations_url": "https://api.github.com/users/bvinc/orgs", "repos_url": "https://api.github.com/users/bvinc/repos", "events_url": "https://api.github.com/users/bvinc/events{/privacy}", "received_events_url": "https://api.github.com/users/bvinc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-09T01:20:33Z", "updated_at": "2022-03-10T09:37:55Z", "closed_at": "2022-03-09T09:43:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Playground link:\r\n\r\nhttps://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=49cbbdbc31452b20822c8753c67a13d3\r\n\r\n<!--\r\nThank you for filing a regression report! \ud83d\udc1b A regression is something that changed between versions of Rust but was not supposed to.\r\n\r\nPlease provide a short summary of the regression, along with any information you feel is relevant to replicate it.\r\n-->\r\n\r\n### Code\r\n\r\nI tried this code:\r\n\r\n```rust\r\n/// Some ascii art documentation\r\n///  7 6 5 4 3 2 1 0\r\n/// +-+-+-+-+-+-+-+-+\r\n/// |               |\r\n/// +     AB CD     +\r\n/// |               |\r\n/// +-+-+-+-+-+-+-+-+\r\npub struct SomeNetworkHeader;\r\n```\r\n\r\nI expected to see this happen: tests pass because there are no tests\r\n\r\nInstead, this happened: A doctest fails with the following error\r\n\r\n```\r\ntest src/lib.rs - SomeNetworkHeader (line 5) ... FAILED\r\n\r\nfailures:\r\n\r\n---- src/lib.rs - SomeNetworkHeader (line 5) stdout ----\r\nerror: expected one of `!`, `.`, `::`, `;`, `?`, `{`, `}`, or an operator, found `CD`\r\n --> src/lib.rs:6:4\r\n  |\r\n3 | AB CD     +\r\n  |    ^^ expected one of 8 possible tokens\r\n\r\nerror: aborting due to previous error\r\n\r\nCouldn't compile the test.\r\n\r\nfailures:\r\n    src/lib.rs - SomeNetworkHeader (line 5)\r\n\r\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.15s\r\n```\r\n\r\n\r\n### Version it worked on\r\n\r\nIt most recently worked on: I believe it worked on 1.58.0\r\n\r\n### Version with regression\r\n\r\nrust 1.59.0\r\n\r\n<!--\r\nIf you know when this regression occurred, please add a line like below, replacing `{channel}` with one of stable, beta, or nightly.\r\n\r\n@rustbot modify labels: +regression-from-stable-to-{channel} -regression-untriaged\r\n-->\r\n", "closed_by": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/94757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/94757/timeline", "performed_via_github_app": null, "state_reason": "completed"}