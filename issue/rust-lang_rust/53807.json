{"url": "https://api.github.com/repos/rust-lang/rust/issues/53807", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/53807/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/53807/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/53807/events", "html_url": "https://github.com/rust-lang/rust/issues/53807", "id": 355362036, "node_id": "MDU6SXNzdWUzNTUzNjIwMzY=", "number": 53807, "title": "Too many errors for incorrect move in loop with NLL enabled", "user": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}, {"id": 867465998, "node_id": "MDU6TGFiZWw4Njc0NjU5OTg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/NLL-diagnostics", "name": "NLL-diagnostics", "color": "f799ea", "default": false, "description": "Working torwads the \"diagnostic parity\" goal"}], "state": "closed", "locked": false, "assignee": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-08-29T22:51:55Z", "updated_at": "2018-09-19T02:37:49Z", "closed_at": "2018-09-19T02:37:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[The following code](https://play.rust-lang.org/?gist=1d742195cb4c67f1e9a8844fabce4ea7&version=nightly&mode=debug&edition=2015) with NLL enabled:\r\n\r\n```\r\npub fn main(){\r\n    let maybe = Some(vec![true, true]);\r\n     loop {\r\n        if let Some(thing) = maybe {\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHas way too many errors being emitted:\r\n\r\n```\r\nerror[E0382]: use of moved value: `maybe`\r\n --> src/main.rs:6:16\r\n  |\r\n6 |         if let Some(thing) = maybe {\r\n  |                ^^^^^-----^\r\n  |                |    |\r\n  |                |    value moved here\r\n  |                value used here after move\r\n  |\r\n  = note: move occurs because value has type `std::vec::Vec<bool>`, which does not implement the `Copy` trait\r\n\r\nerror[E0382]: use of moved value\r\n --> src/main.rs:6:21\r\n  |\r\n6 |         if let Some(thing) = maybe {\r\n  |                     ^^^^^ value moved here in previous iteration of loop\r\n  |\r\n  = note: move occurs because value has type `std::vec::Vec<bool>`, which does not implement the `Copy` trait\r\n\r\nerror[E0382]: use of moved value: `maybe`\r\n --> src/main.rs:6:30\r\n  |\r\n6 |         if let Some(thing) = maybe {\r\n  |                     -----    ^^^^^ value used here after move\r\n  |                     |\r\n  |                     value moved here\r\n  |\r\n  = note: move occurs because value has type `std::vec::Vec<bool>`, which does not implement the `Copy` trait\r\n\r\nerror[E0382]: borrow of moved value: `maybe`\r\n --> src/main.rs:6:30\r\n  |\r\n6 |         if let Some(thing) = maybe {\r\n  |                     -----    ^^^^^ value borrowed here after move\r\n  |                     |\r\n  |                     value moved here\r\n  |\r\n  = note: move occurs because value has type `std::vec::Vec<bool>`, which does not implement the `Copy` trait\r\n\r\nerror: aborting due to 4 previous errors\r\n```\r\n\r\nThird and fourth are completely redundant, and all of them are talking about complaining about the same underlying problem. There should be only one error being emitted, ideally the second.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/53807/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/53807/timeline", "performed_via_github_app": null, "state_reason": "completed"}