{"url": "https://api.github.com/repos/rust-lang/rust/issues/91609", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91609/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91609/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91609/events", "html_url": "https://github.com/rust-lang/rust/issues/91609", "id": 1072719252, "node_id": "I_kwDOAAsO6M4_8GWU", "number": 91609, "title": "Consider mangling ID's in rustdoc-json", "user": {"login": "aDotInTheVoid", "id": 28781354, "node_id": "MDQ6VXNlcjI4NzgxMzU0", "avatar_url": "https://avatars.githubusercontent.com/u/28781354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aDotInTheVoid", "html_url": "https://github.com/aDotInTheVoid", "followers_url": "https://api.github.com/users/aDotInTheVoid/followers", "following_url": "https://api.github.com/users/aDotInTheVoid/following{/other_user}", "gists_url": "https://api.github.com/users/aDotInTheVoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/aDotInTheVoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aDotInTheVoid/subscriptions", "organizations_url": "https://api.github.com/users/aDotInTheVoid/orgs", "repos_url": "https://api.github.com/users/aDotInTheVoid/repos", "events_url": "https://api.github.com/users/aDotInTheVoid/events{/privacy}", "received_events_url": "https://api.github.com/users/aDotInTheVoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 2352122097, "node_id": "MDU6TGFiZWwyMzUyMTIyMDk3", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-discussion", "name": "C-discussion", "color": "f5f1fd", "default": false, "description": "Category: Discussion or questions that doesn't represent real issues."}, {"id": 2682491374, "node_id": "MDU6TGFiZWwyNjgyNDkxMzc0", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rustdoc-json", "name": "A-rustdoc-json", "color": "f7e101", "default": false, "description": "Area: Rustdoc JSON backend"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-12-06T23:16:23Z", "updated_at": "2022-01-12T19:38:33Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently JSON `ID`'s are (approximatly) the underling DefId's which means they are not realy opaque, despite what we've said in the RFC.\r\n\r\n> They happen to be the compiler internal DefId for that item, but in the JSON blob they should be treated as opaque as they aren't guaranteed to be stable across compiler invocations\r\n\r\nThe problem with this is that their is no obligation to treet the ID's as opaque (for a concreet example see https://github.com/scrabsha/scrabsha.github.io/pull/2). If we want to garentee our ability to change the ID format, we should make it so that no one relies on the specific values of ID's by making them not cary information. Eg `0:0` lets the user know things, wheras `a3aefbcbf31fa0bc12b9a73bc9d67976` (md5 hash) doesnt.\r\n\r\n## Potential Drawbacks\r\n\r\n- Non determinism\r\n- Harder to debug\r\n- Slower to build\r\n- Larger output\r\n\r\nWhich of these are actualy a problem, or just unfounded concerns I'm not sure:\r\n\r\nIf you want to change this: heres the places to look:\r\n\r\nhttps://github.com/rust-lang/rust/blob/0fb1c371d4a14f9ce7a721d8aea683a6e6774f6c/src/librustdoc/json/mod.rs#L219\r\nhttps://github.com/rust-lang/rust/blob/0fb1c371d4a14f9ce7a721d8aea683a6e6774f6c/src/librustdoc/json/conversions.rs#L183\r\n\r\nI'm not sure if this is a good idea, and would love feedback\r\n\r\n@rustbot modify labels: +C-discussion +A-rustdoc-json ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91609/timeline", "performed_via_github_app": null, "state_reason": null}