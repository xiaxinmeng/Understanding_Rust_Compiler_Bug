{"url": "https://api.github.com/repos/rust-lang/rust/issues/48134", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48134/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48134/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48134/events", "html_url": "https://github.com/rust-lang/rust/issues/48134", "id": 296149667, "node_id": "MDU6SXNzdWUyOTYxNDk2Njc=", "number": 48134, "title": "ICE when `cargo +nightly clippy --verbose` on crate `proptest`", "user": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-02-11T01:18:26Z", "updated_at": "2018-05-18T20:56:30Z", "closed_at": "2018-05-18T20:56:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This *could* be clippy's fault, but...\r\n\r\nWhen running `cargo +nightly clippy --verbose` on `proptest` (commit id: https://github.com/AltSysrq/proptest/commit/fce5b1333935c4624ac7e2b43a1164a93faa16a6) I get the following ICE:\r\n\r\n```\r\nD:\\programming\\proptest\\proptest (master)                                                                                                                                                                                             \r\n\u03bb rm -rf target/                                                                                                                                                                                                                      \r\n                                                                                                                                                                                                                                      \r\nD:\\programming\\proptest\\proptest (master)                                                                                                                                                                                             \r\n\u03bb cargo +nightly clippy --verbose                                                                                                                                                                                                     \r\nlib: proptest                                                                                                                                                                                                                         \r\n   Compiling quick-error v1.2.1                                                                                                                                                                                                       \r\n   Compiling winapi v0.3.3                                                                                                                                                                                                            \r\n   Compiling bit-vec v0.4.4                                                                                                                                                                                                           \r\n   Compiling bitflags v1.0.1                                                                                                                                                                                                          \r\n   Compiling lazy_static v1.0.0                                                                                                                                                                                                       \r\n   Compiling regex-syntax v0.4.2                                                                                                                                                                                                      \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name quick_error C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\quick-error-1.2.1\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginf\r\no=2 -C metadata=bbc5f60bb87aca1b -C extra-filename=-bbc5f60bb87aca1b --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow`                 \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name build_script_build C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\winapi-0.3.3\\build.rs --crate-type bin --emit=dep-info,link -C debuginf\r\no=2 --cfg \"feature=\\\"minwindef\\\"\" --cfg \"feature=\\\"ntsecapi\\\"\" --cfg \"feature=\\\"profileapi\\\"\" --cfg \"feature=\\\"winnt\\\"\" -C metadata=30390cde638126bd -C extra-filename=-30390cde638126bd --out-dir D:\\programming\\proptest\\proptest\\ta\r\nrget\\debug\\build\\winapi-30390cde638126bd -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow`                                                                                                          \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name bit_vec C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\bit-vec-0.4.4\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C m\r\netadata=061de656de55c59e -C extra-filename=-061de656de55c59e --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow`                         \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name bitflags C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\bitflags-1.0.1\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --\r\ncfg \"feature=\\\"default\\\"\" --cfg \"feature=\\\"example_generated\\\"\" -C metadata=7a10343f004e584c -C extra-filename=-7a10343f004e584c --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\pr\r\noptest\\target\\debug\\deps --cap-lints allow`                                                                                                                                                                                           \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name lazy_static C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\lazy_static-1.0.0\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginf\r\no=2 -C metadata=126bc27e70ece406 -C extra-filename=-126bc27e70ece406 --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow`                 \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name regex_syntax C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\regex-syntax-0.4.2\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debugi\r\nnfo=2 -C metadata=2f5945163332f48c -C extra-filename=-2f5945163332f48c --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow`               \r\n   Compiling bit-set v0.4.0                                                                                                                                                                                                           \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name bit_set C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\bit-set-0.4.0\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C m\r\netadata=2bfcb56d6169154c -C extra-filename=-2bfcb56d6169154c --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --extern bit_vec=D:\\programming\\proptest\\pr\r\noptest\\target\\debug\\deps\\libbit_vec-061de656de55c59e.rlib --cap-lints allow`                                                                                                                                                          \r\n     Running `D:\\programming\\proptest\\proptest\\target\\debug\\build\\winapi-30390cde638126bd\\build-script-build`                                                                                                                         \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name winapi C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\winapi-0.3.3\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg \r\n\"feature=\\\"minwindef\\\"\" --cfg \"feature=\\\"ntsecapi\\\"\" --cfg \"feature=\\\"profileapi\\\"\" --cfg \"feature=\\\"winnt\\\"\" -C metadata=d8b43ff389f06db5 -C extra-filename=-d8b43ff389f06db5 --out-dir D:\\programming\\proptest\\proptest\\target\\debug\r\n\\deps -L dependency=D:\\programming\\proptest\\proptest\\target\\debug\\deps --cap-lints allow --cfg \"feature=\\\"guiddef\\\"\" --cfg \"feature=\\\"basetsd\\\"\" --cfg \"feature=\\\"sspi\\\"\" --cfg \"feature=\\\"subauth\\\"\" --cfg \"feature=\\\"ntdef\\\"\" --cfg \r\n\"feature=\\\"wincred\\\"\" --cfg \"feature=\\\"ktmtypes\\\"\" --cfg \"feature=\\\"windef\\\"\" --cfg \"feature=\\\"excpt\\\"\" --cfg \"feature=\\\"lsalookup\\\"\" --cfg \"feature=\\\"vcruntime\\\"\" -l dylib=secur32 -l dylib=credui -l dylib=advapi32 -l dylib=kernel\r\n32`                                                                                                                                                                                                                                   \r\n   Compiling rand v0.4.2                                                                                                                                                                                                              \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name rand C:\\Users\\twing\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\rand-0.4.2\\src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg \"fea\r\nture=\\\"default\\\"\" --cfg \"feature=\\\"libc\\\"\" --cfg \"feature=\\\"std\\\"\" -C metadata=0857da43fccecc01 -C extra-filename=-0857da43fccecc01 --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -L dependency=D:\\programming\\proptest\r\n\\proptest\\target\\debug\\deps --extern winapi=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libwinapi-d8b43ff389f06db5.rlib --cap-lints allow`                                                                                     \r\n   Compiling proptest v0.4.2 (file:///D:/programming/proptest/proptest)                                                                                                                                                               \r\n     Running `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name proptest src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --emit=metadata --cfg \"feature=\\\"cargo-clippy\\\"\" --cfg \"feature=\\\"default\\\"\" -C \r\nmetadata=d2b16b70baa50e0b -C extra-filename=-d2b16b70baa50e0b --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -C incremental=D:\\programming\\proptest\\proptest\\target\\debug\\incremental -L dependency=D:\\programming\\propt\r\nest\\proptest\\target\\debug\\deps --extern regex_syntax=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libregex_syntax-2f5945163332f48c.rlib --extern bitflags=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libbitflags-7a10343\r\nf004e584c.rlib --extern lazy_static=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\liblazy_static-126bc27e70ece406.rlib --extern rand=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\librand-0857da43fccecc01.rlib --extern qu\r\nick_error=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libquick_error-bbc5f60bb87aca1b.rlib --extern bit_set=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libbit_set-2bfcb56d6169154c.rlib`                               \r\nwarning: integer literal has a better hexadecimal representation                                                                                                                                                                      \r\n  --> src\\test_runner.rs:38:32                                                                                                                                                                                                        \r\n   |                                                                                                                                                                                                                                  \r\n38 |             max_local_rejects: 65_536,                                                                                                                                                                                           \r\n   |                                ^^^^^^                                                                                                                                                                                            \r\n   |                                                                                                                                                                                                                                  \r\n   = note: #[warn(decimal_literal_representation)] on by default                                                                                                                                                                      \r\n   = help: consider: 0x1_0000                                                                                                                                                                                                         \r\n   = help: for further information visit https://rust-lang-nursery.github.io/rust-clippy/v0.0.186/index.html#decimal_literal_representation                                                                                           \r\n                                                                                                                                                                                                                                      \r\nwarning: integer literal has a better hexadecimal representation                                                                                                                                                                      \r\n   --> src\\strategy\\traits.rs:741:40                                                                                                                                                                                                  \r\n    |                                                                                                                                                                                                                                 \r\n741 |                 if num_complications > 65_536 {                                                                                                                                                                                 \r\n    |                                        ^^^^^^                                                                                                                                                                                   \r\n    |                                                                                                                                                                                                                                 \r\n    = help: consider: 0x1_0000                                                                                                                                                                                                        \r\n    = help: for further information visit https://rust-lang-nursery.github.io/rust-clippy/v0.0.186/index.html#decimal_literal_representation                                                                                          \r\n                                                                                                                                                                                                                                      \r\nwarning: integer literal has a better hexadecimal representation                                                                                                                                                                      \r\n   --> src\\strategy\\traits.rs:795:33                                                                                                                                                                                                  \r\n    |                                                                                                                                                                                                                                 \r\n795 |             if num_simplifies > 65_536 {                                                                                                                                                                                        \r\n    |                                 ^^^^^^                                                                                                                                                                                          \r\n    |                                                                                                                                                                                                                                 \r\n    = help: consider: 0x1_0000                                                                                                                                                                                                        \r\n    = help: for further information visit https://rust-lang-nursery.github.io/rust-clippy/v0.0.186/index.html#decimal_literal_representation                                                                                          \r\n                                                                                                                                                                                                                                      \r\nwarning: integer literal has a better hexadecimal representation                                                                                                                                                                      \r\n   --> src\\char.rs:120:17                                                                                                                                                                                                             \r\n    |                                                                                                                                                                                                                                 \r\n120 |     for _ in 0..65_536 {                                                                                                                                                                                                        \r\n    |                 ^^^^^^                                                                                                                                                                                                          \r\n    |                                                                                                                                                                                                                                 \r\n    = help: consider: 0x1_0000                                                                                                                                                                                                        \r\n    = help: for further information visit https://rust-lang-nursery.github.io/rust-clippy/v0.0.186/index.html#decimal_literal_representation                                                                                          \r\n                                                                                                                                                                                                                                      \r\nthread 'rustc' panicked at 'failed to create span for type arguments', libcore\\option.rs:917:5                                                                                                                                        \r\nstack backtrace:                                                                                                                                                                                                                      \r\n   0: _rdl_shrink_in_place                                                                                                                                                                                                            \r\n   1: std::panicking::Location::column                                                                                                                                                                                                \r\n   2: std::panicking::Location::column                                                                                                                                                                                                \r\n   3: std::panicking::rust_panic_with_hook                                                                                                                                                                                            \r\n   4: std::panicking::begin_panic_fmt                                                                                                                                                                                                 \r\n   5: std::panicking::begin_panic_fmt                                                                                                                                                                                                 \r\n   6: rust_begin_unwind                                                                                                                                                                                                               \r\n   7: core::panicking::panic_fmt                                                                                                                                                                                                      \r\n   8: core::option::expect_failed                                                                                                                                                                                                     \r\n   9: <unknown>                                                                                                                                                                                                                       \r\n  10: <rustc::lint::context::EarlyContext<'a> as rustc::lint::context::LintContext<'a>>::exit_attrs                                                                                                                                   \r\n  11: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_item                                                                                                                              \r\n  12: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_mod                                                                                                                               \r\n  13: rustc::hir::intravisit::NestedVisitorMap::inter                                                                                                                                                                                 \r\n  14: <rustc::lint::context::EarlyContext<'a> as rustc::lint::context::LintContext<'a>>::exit_attrs                                                                                                                                   \r\n  15: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_item                                                                                                                              \r\n  16: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_mod                                                                                                                               \r\n  17: rustc::hir::intravisit::NestedVisitorMap::inter                                                                                                                                                                                 \r\n  18: <rustc::lint::context::EarlyContext<'a> as rustc::lint::context::LintContext<'a>>::exit_attrs                                                                                                                                   \r\n  19: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_item                                                                                                                              \r\n  20: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_mod                                                                                                                               \r\n  21: rustc::hir::intravisit::NestedVisitorMap::inter                                                                                                                                                                                 \r\n  22: <rustc::lint::context::EarlyContext<'a> as rustc::lint::context::LintContext<'a>>::exit_attrs                                                                                                                                   \r\n  23: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_item                                                                                                                              \r\n  24: <rustc::lint::context::LateContext<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_mod                                                                                                                               \r\n  25: rustc::lint::context::check_crate                                                                                                                                                                                               \r\n  26: <rustc_driver::derive_registrar::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor<'v>>::visit_trait_item                                                                                                                    \r\n  27: rustc_driver::driver::compile_input                                                                                                                                                                                             \r\n  28: rustc_driver::run_compiler                                                                                                                                                                                                      \r\n  29: <unknown>                                                                                                                                                                                                                       \r\n  30: <unknown>                                                                                                                                                                                                                       \r\n  31: _rust_maybe_catch_panic                                                                                                                                                                                                         \r\n  32: <unknown>                                                                                                                                                                                                                       \r\n  33: std::sys::windows::thread::Thread::new                                                                                                                                                                                          \r\n  34: BaseThreadInitThunk                                                                                                                                                                                                             \r\n  35: RtlUserThreadStart                                                                                                                                                                                                              \r\n                                                                                                                                                                                                                                      \r\nerror: internal compiler error: unexpected panic                                                                                                                                                                                      \r\n                                                                                                                                                                                                                                      \r\nnote: the compiler unexpectedly panicked. this is a bug.                                                                                                                                                                              \r\n                                                                                                                                                                                                                                      \r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports                                                                                                                     \r\n                                                                                                                                                                                                                                      \r\nnote: rustc 1.25.0-nightly (45fba43b3 2018-02-10) running on x86_64-pc-windows-msvc                                                                                                                                                   \r\n                                                                                                                                                                                                                                      \r\nerror: Could not compile `proptest`.                                                                                                                                                                                                  \r\n                                                                                                                                                                                                                                      \r\nCaused by:                                                                                                                                                                                                                            \r\n  process didn't exit successfully: `C:\\Users\\twing\\.cargo\\bin\\clippy-driver.exe rustc --crate-name proptest src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --emit=metadata --cfg feature=\"cargo-clippy\" --cfg featur\r\ne=\"default\" -C metadata=d2b16b70baa50e0b -C extra-filename=-d2b16b70baa50e0b --out-dir D:\\programming\\proptest\\proptest\\target\\debug\\deps -C incremental=D:\\programming\\proptest\\proptest\\target\\debug\\incremental -L dependency=D:\\pr\r\nogramming\\proptest\\proptest\\target\\debug\\deps --extern regex_syntax=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libregex_syntax-2f5945163332f48c.rlib --extern bitflags=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libb\r\nitflags-7a10343f004e584c.rlib --extern lazy_static=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\liblazy_static-126bc27e70ece406.rlib --extern rand=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\librand-0857da43fccecc01.r\r\nlib --extern quick_error=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libquick_error-bbc5f60bb87aca1b.rlib --extern bit_set=D:\\programming\\proptest\\proptest\\target\\debug\\deps\\libbit_set-2bfcb56d6169154c.rlib` (exit code: 101\r\n)                                                                                                                                                                                                                                     \r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n\r\nBacktrace:\r\n\r\n```\r\nD:\\programming\\proptest\\proptest (master)\r\n\u03bb rustc --version --verbose\r\nrustc 1.25.0-nightly (45fba43b3 2018-02-10)\r\nbinary: rustc\r\ncommit-hash: 45fba43b3d5b4d1944268cf973099bfacb11bf4c\r\ncommit-date: 2018-02-10\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.25.0-nightly\r\nLLVM version: 6.0\r\n```", "closed_by": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48134/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48134/timeline", "performed_via_github_app": null, "state_reason": "completed"}