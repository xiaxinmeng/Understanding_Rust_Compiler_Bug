{"url": "https://api.github.com/repos/rust-lang/rust/issues/2185", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2185/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2185/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2185/events", "html_url": "https://github.com/rust-lang/rust/issues/2185", "id": 4063341, "node_id": "MDU6SXNzdWU0MDYzMzQx", "number": 2185, "title": "Internal compiler error in trans, with bind and iterators", "user": {"login": "gifnksm", "id": 164213, "node_id": "MDQ6VXNlcjE2NDIxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/164213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gifnksm", "html_url": "https://github.com/gifnksm", "followers_url": "https://api.github.com/users/gifnksm/followers", "following_url": "https://api.github.com/users/gifnksm/following{/other_user}", "gists_url": "https://api.github.com/users/gifnksm/gists{/gist_id}", "starred_url": "https://api.github.com/users/gifnksm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gifnksm/subscriptions", "organizations_url": "https://api.github.com/users/gifnksm/orgs", "repos_url": "https://api.github.com/users/gifnksm/repos", "events_url": "https://api.github.com/users/gifnksm/events{/privacy}", "received_events_url": "https://api.github.com/users/gifnksm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/6", "html_url": "https://github.com/rust-lang/rust/milestone/6", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/6/labels", "id": 80849, "node_id": "MDk6TWlsZXN0b25lODA4NDk=", "number": 6, "title": "0.3", "description": "", "creator": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 65, "state": "closed", "created_at": "2012-02-05T23:36:26Z", "updated_at": "2012-07-10T20:55:40Z", "due_on": "2012-05-26T07:00:00Z", "closed_at": "2012-07-10T20:55:40Z"}, "comments": 2, "created_at": "2012-04-11T11:54:39Z", "updated_at": "2014-06-16T21:56:31Z", "closed_at": "2012-04-23T07:26:32Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Compiling following source, rustc dumps core with error messages.\n\n``` rust\nimport iter::*;\n\nfn main() {\n    let range = bind uint::range(0u, 1000u, _);\n    let filt  = bind iter::filter(range, {|&&n: uint| n % 3u != 0u && n % 5u != 0u }, _);\n    let sum   = iter::foldl(filt, 0u) {|accum, &&n: uint| accum + n };\n\n    io::println(#fmt(\"%u\", sum));\n}\n```\n\n```\n$ rustc foo.rs\nerror: internal compiler error unexpected failure\nnote: The compiler hit an unexpected failure path. This is a bug. Try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nleaked memory in rust main loop (1 objects)\nAssertion failed: (false), function ~memory_region, file ../src/rt/memory_region.cpp, line 172.\nzsh: abort (core dumped)  rustc foo.rs\n```\n\n```\n$ RUST_LOG=rustc=0,::rt::backtrace rustc foo.rs\nrust: upcall fail 'explicit failure', ../src/rustc/rustc.rc:1\n0x802197914 <_ZN9rust_task15call_on_c_stackEPvS0_+148> at /usr/local/bin/../lib/librustrt.so                                                                                                                                                                                     @&N0x8021986ed <upcall_fail+141> at /usr/local/bin/../lib/librustrt.so\n\ufffd\\0x8018dc7de <_ZN6middle2ty16lookup_item_type17_f614ca4c755aeba7202E+846> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                              \ufffd0x8018dbde1 <_ZN6middle5trans4base12make_mono_id17_f2ebd2e452b417a6202E+257> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x8018c7568 <_ZN6middle5trans4base14monomorphic_fn17_77d7254b93f76bc2202E+472> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n0x8018ee718 <_ZN6middle5trans4base20lval_static_fn_inner17_f1ee6671c5727412202E+488> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\ufffd0x80193daf7 <_ZN6middle5trans4impl26trans_monomorphized_callee17_397545b5c646b954202E+999> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018d0f06 <_ZN6middle5trans4impl19trans_method_callee17_6b1587f014518324202E+470> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n@@\ufffd0x8018f61c4 <_ZN6middle5trans4base12trans_callee17_ed5afa7c661e67af202E+484> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801901487 <_ZN6middle5trans4base10with_scope17_13d2b9fa8bfa3e3f202E+583> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x801b7e11c <_ZN3lib4llvm16section_iter_res4dtor17_3815581a5148d851202E+396> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80190141c <_ZN6middle5trans4base10with_scope17_13d2b9fa8bfa3e3f202E+476> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018d0c96 <_ZN6middle5trans4base16trans_call_inner17_e4ab2a25f8e56a47202E+390> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                     @\ufffd0x8018fdf12 <_ZN6middle5trans4base10trans_call17_f759ff632d924a7a202E+258> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018d1c83 <_ZN6middle5trans4base10trans_expr17_2f49fb6e59efc0cc202E+3187> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80190a00f <_ZN6middle5trans4base10trans_stmt17_dda29e9b5a06725d202E+1103> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x8018d9fbf <_ZN6middle5trans4base11trans_block17_5d538f556387313f202E+303> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80190d9ed <_ZN6middle5trans4base13trans_closure17_f68d7bace7a25795202E+1197> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n0x8018e636d <_ZN6middle5trans4base8trans_fn17_30737349273ebd1b202E+461> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                                0x8018c8122 <_ZN6middle5trans4base14monomorphic_fn17_77d7254b93f76bc2202E+3474> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n@\ufffd0x8018ee718 <_ZN6middle5trans4base20lval_static_fn_inner17_f1ee6671c5727412202E+488> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\ufffd0x8018ee272 <_ZN6middle5trans4base14lval_static_fn17_97c1e6b66444e182202E+418> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n0x8018f472d <_ZN6middle5trans4base9trans_var17_7c5ea379277185b4202E+205> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                                \ufffd0x8018f4556 <_ZN6middle5trans4base10trans_path17_c674ef35f426c629202E+198> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018f608b <_ZN6middle5trans4base12trans_callee17_ed5afa7c661e67af202E+171> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801901487 <_ZN6middle5trans4base10with_scope17_13d2b9fa8bfa3e3f202E+583> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8019012e7 <_ZN6middle5trans4base10with_scope17_13d2b9fa8bfa3e3f202E+167> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018d0c96 <_ZN6middle5trans4base16trans_call_inner17_e4ab2a25f8e56a47202E+390> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                     @\ufffd\ufffd0x8018fdf12 <_ZN6middle5trans4base10trans_call17_f759ff632d924a7a202E+258> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8018d1c83 <_ZN6middle5trans4base10trans_expr17_2f49fb6e59efc0cc202E+3187> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801b7e11c <_ZN3lib4llvm16section_iter_res4dtor17_3815581a5148d851202E+396> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x8018d103c <_ZN6middle5trans4base10trans_expr17_2f49fb6e59efc0cc202E+44> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x8019083ad <_ZN6middle5trans4base10init_local17_17d57dd23a569e54202E+333> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x80190a1b5 <_ZN6middle5trans4base10trans_stmt17_dda29e9b5a06725d202E+1525> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80190a0ab <_ZN6middle5trans4base10trans_stmt17_dda29e9b5a06725d202E+1259> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x8018d9fbf <_ZN6middle5trans4base11trans_block17_5d538f556387313f202E+303> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80190d9ed <_ZN6middle5trans4base13trans_closure17_f68d7bace7a25795202E+1197> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n0x8018e636d <_ZN6middle5trans4base8trans_fn17_30737349273ebd1b202E+461> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                                0x8018ec8bb <_ZN6middle5trans4base10trans_item17_28e452dae21c3667202E+1883> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801911e94 <_ZN6middle5trans4base9trans_mod17_384418731efae2e8202E+260> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                               \ufffd0x80191dc28 <_ZN6middle5trans4base11trans_crate17_6616cfe44b3b9bb3202E+4600> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801b7e11c <_ZN3lib4llvm16section_iter_res4dtor17_3815581a5148d851202E+396> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x80191ca5c <_ZN6middle5trans4base11trans_crate17_6616cfe44b3b9bb3202E+44> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd\\0x801b7e11c <_ZN3lib4llvm16section_iter_res4dtor17_3815581a5148d851202E+396> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so\n\ufffd0x801b6182c <_ZN6driver6driver12compile_upto17_40784acf6e567faf202E+44> at /usr/local/bin/../lib/librustc-688fa7810161fd45-0.2.so                                                                                                                                               0x403f6a <_init+8218> at /usr/local/bin/rustc\n@0\ufffd0x407818 <_rust_main+1464> at /usr/local/bin/rustc                                                                                                                                                                                                                             \ufffd0x402f1c <_init+4044> at /usr/local/bin/rustc\n@\ufffd\ufffd0x406878 <_init+18728> at /usr/local/bin/rustc\n@\ufffd0x80089e675 <_ZN4task11get_task_id17_42c92e624d84fbbc202E+149> at /usr/local/bin/../lib/libcore-d27e4777a53c3e50-0.2.so\n\ufffd0x802196735 <_Z18task_start_wrapperP10spawn_args+37> at /usr/local/bin/../lib/librustrt.so\n@`\ufffderror: internal compiler error unexpected failure\nnote: The compiler hit an unexpected failure path. This is a bug. Try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: upcall fail 'explicit failure', ../src/rustc/driver/rustc.rs:187\n0x802197914 <_ZN9rust_task15call_on_c_stackEPvS0_+148> at /usr/local/bin/../lib/librustrt.so                                                                                                                                                                                     @cM0x8021986ed <upcall_fail+141> at /usr/local/bin/../lib/librustrt.so\n\ufffd\\0x406388 <_init+17464> at /usr/local/bin/rustc\n\ufffdF0x407818 <_rust_main+1464> at /usr/local/bin/rustc                                                                                                                                                                                                                              \ufffd0x405cdc <_init+15756> at /usr/local/bin/rustc\n\ufffdE0x802196735 <_Z18task_start_wrapperP10spawn_args+37> at /usr/local/bin/../lib/librustrt.so\n@\ufffdErust: domain main @0x80443a810 root task failed\nleaked memory in rust main loop (1 objects)\nAssertion failed: (false), function ~memory_region, file ../src/rt/memory_region.cpp, line 172.\nzsh: abort (core dumped)  RUST_LOG=rustc=0,::rt::backtrace rustc foo.rs\n```\n", "closed_by": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2185/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2185/timeline", "performed_via_github_app": null, "state_reason": "completed"}