{"url": "https://api.github.com/repos/rust-lang/rust/issues/73426", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/73426/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/73426/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/73426/events", "html_url": "https://github.com/rust-lang/rust/issues/73426", "id": 640044817, "node_id": "MDU6SXNzdWU2NDAwNDQ4MTc=", "number": 73426, "title": "Error while compiling rustc for android", "user": {"login": "coolreader18", "id": 33094578, "node_id": "MDQ6VXNlcjMzMDk0NTc4", "avatar_url": "https://avatars.githubusercontent.com/u/33094578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coolreader18", "html_url": "https://github.com/coolreader18", "followers_url": "https://api.github.com/users/coolreader18/followers", "following_url": "https://api.github.com/users/coolreader18/following{/other_user}", "gists_url": "https://api.github.com/users/coolreader18/gists{/gist_id}", "starred_url": "https://api.github.com/users/coolreader18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coolreader18/subscriptions", "organizations_url": "https://api.github.com/users/coolreader18/orgs", "repos_url": "https://api.github.com/users/coolreader18/repos", "events_url": "https://api.github.com/users/coolreader18/events{/privacy}", "received_events_url": "https://api.github.com/users/coolreader18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 25141820, "node_id": "MDU6TGFiZWwyNTE0MTgyMA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-android", "name": "O-android", "color": "6e6ec0", "default": false, "description": "Operating system: Android"}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-06-17T00:00:51Z", "updated_at": "2022-06-05T06:00:12Z", "closed_at": "2022-06-05T06:00:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In ~~termux/termux-packages#5387~~ termux/termux-packages#5420, I tried to update termux's (a sort of mini linux distro as an android app) Rust version to 1.44 from ~~1.42~~ 1.43.1, but I was getting a strange error while compiling stage2:\r\n```\r\n2020-06-12T02:32:18.9701280Z error: linking with `cc` failed: exit code: 1\r\n2020-06-12T02:32:18.9701400Z   |\r\n2020-06-12T02:32:18.9705976Z   = note: \"cc\" ...\r\n2020-06-12T02:32:18.9707179Z   = note: /usr/bin/ld: /home/builder/.termux-build/rust/build/build/x86_64-unknown-linux-gnu/stage1/lib/rustlib/x86_64-unknown-linux-gnu/lib/libstd-4a5f12d71462636a.rlib(std-4a5f12d71462636a.std.esf88y2y-cgu.1.rcgu.o): undefined reference to symbol '__res_init@@GLIBC_2.2.5'\r\n2020-06-12T02:32:18.9707671Z           /usr/bin/ld: /lib/x86_64-linux-gnu/libc.so.6: error adding symbols: DSO missing from command line\r\n2020-06-12T02:32:18.9707959Z           collect2: error: ld returned 1 exit status\r\n```\r\n[Full log here under \"Build\"](https://github.com/termux/termux-packages/runs/763915529)\r\n\r\nAs far as I can tell, this is happening while compiling a proc macro crate that's a dependency of rustc (or I guess rustdoc specifically here), with the crate(s) that use the proc macro targeting android (whose symbol for res_init is just `res_init`, not `__res_init`). However, I don't think that should really make a difference, since the target for the proc-macro crate is still just `x86_64-unknown-linux-gnu`, and adding/editing cfgs to modify the symbol name that gets imported on android doesn't change anything.", "closed_by": {"login": "coolreader18", "id": 33094578, "node_id": "MDQ6VXNlcjMzMDk0NTc4", "avatar_url": "https://avatars.githubusercontent.com/u/33094578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coolreader18", "html_url": "https://github.com/coolreader18", "followers_url": "https://api.github.com/users/coolreader18/followers", "following_url": "https://api.github.com/users/coolreader18/following{/other_user}", "gists_url": "https://api.github.com/users/coolreader18/gists{/gist_id}", "starred_url": "https://api.github.com/users/coolreader18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coolreader18/subscriptions", "organizations_url": "https://api.github.com/users/coolreader18/orgs", "repos_url": "https://api.github.com/users/coolreader18/repos", "events_url": "https://api.github.com/users/coolreader18/events{/privacy}", "received_events_url": "https://api.github.com/users/coolreader18/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/73426/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/73426/timeline", "performed_via_github_app": null, "state_reason": "completed"}