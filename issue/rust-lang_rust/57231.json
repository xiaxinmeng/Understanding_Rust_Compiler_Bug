{"url": "https://api.github.com/repos/rust-lang/rust/issues/57231", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/57231/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/57231/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/57231/events", "html_url": "https://github.com/rust-lang/rust/issues/57231", "id": 394934457, "node_id": "MDU6SXNzdWUzOTQ5MzQ0NTc=", "number": 57231, "title": "target_env collision on fortanix-sgx", "user": {"login": "dingelish", "id": 1870436, "node_id": "MDQ6VXNlcjE4NzA0MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1870436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingelish", "html_url": "https://github.com/dingelish", "followers_url": "https://api.github.com/users/dingelish/followers", "following_url": "https://api.github.com/users/dingelish/following{/other_user}", "gists_url": "https://api.github.com/users/dingelish/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingelish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingelish/subscriptions", "organizations_url": "https://api.github.com/users/dingelish/orgs", "repos_url": "https://api.github.com/users/dingelish/repos", "events_url": "https://api.github.com/users/dingelish/events{/privacy}", "received_events_url": "https://api.github.com/users/dingelish/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-12-31T06:11:46Z", "updated_at": "2019-01-02T18:25:04Z", "closed_at": "2019-01-02T18:25:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi there,\r\n\r\nI'm Yu Ding from Baidu and I'm maintaining Baidu's [rust-sgx-sdk](https://github.com/baidu/rust-sgx-sdk). It has been open-sourced for more than 2 years and adopted by many blockchain companies. And I presented a [talk](https://paris.rustfest.eu/sessions/mesalock-sgx) on RustFest'18 Paris about this project. It shares the same goal with Fortanix's target -- fortanix-sgx, while it is significantly differs from fortanix.\r\n\r\nCurrently, my strategy is to build up the rust+sgx ecosystem on top of libcore+rustc+cargo/xargo and link Intel's SGX libraries to provide basic SGX functions. Fortanix's solution does not always depends on Intel's SGX libraries -- they re-implement many of the Intel's codes in Rust.\r\n\r\nThere is no need to discuss which is better. These two solutions differ from each other based on their different assumptions about trust. So they cannot be compared directly. And I'm pretty much happy to see that Fortanix guys are doing cool things.\r\n\r\nThe problem I want to say is that Fortanix's PR occupies ['sgx' as a target_env](https://github.com/rust-lang/rust/blob/2cf7f55662bed29513eb9daecc3e72474ec023f5/src/librustc_target/spec/x86_64_fortanix_unknown_sgx.rs#L64). This results in a disaster in my project -- [I'm using 'sgx' as target_env as well](https://github.com/baidu/rust-sgx-sdk/blob/4d999470c8c12a6e6f70d302c09114957114bb05/xargo/x86_64-unknown-linux-sgx.json#L6). So a large amount of existing Rust+SGX projects based on rust-sgx-sdk could not be built using xargo due to the collision of `target_env`.\r\n\r\nI wonder if the built-in target could be renamed as `fortanix-sgx` or some other identifier other than `sgx`. This would be very much helpful to the existing Rust-SGX ecosystem. A number of rust-sgx projects such as MIT's [enigma](https://github.com/enigmampc/enigma-core/blob/master/enigma-core/enclave/Xargo.toml), UC Berkeley's [ekiden](https://github.com/ekiden/contract-dex), are using xargo to build their Rust-SGX enclaves. As you can see that [rust-sgx-sdk](https://github.com/baidu/rust-sgx-sdk) has 466 github stars which is more popular than Intel's [SDK](https://github.com/intel/linux-sgx) (395 stars).\r\n\r\nI can provide PR if needed. Thank you guys so much.\r\n\r\nBest,\r\nYu", "closed_by": {"login": "dingelish", "id": 1870436, "node_id": "MDQ6VXNlcjE4NzA0MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1870436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingelish", "html_url": "https://github.com/dingelish", "followers_url": "https://api.github.com/users/dingelish/followers", "following_url": "https://api.github.com/users/dingelish/following{/other_user}", "gists_url": "https://api.github.com/users/dingelish/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingelish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingelish/subscriptions", "organizations_url": "https://api.github.com/users/dingelish/orgs", "repos_url": "https://api.github.com/users/dingelish/repos", "events_url": "https://api.github.com/users/dingelish/events{/privacy}", "received_events_url": "https://api.github.com/users/dingelish/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/57231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/57231/timeline", "performed_via_github_app": null, "state_reason": "completed"}