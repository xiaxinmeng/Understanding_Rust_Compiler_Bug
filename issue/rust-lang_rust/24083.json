{"url": "https://api.github.com/repos/rust-lang/rust/issues/24083", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24083/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24083/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24083/events", "html_url": "https://github.com/rust-lang/rust/issues/24083", "id": 66377191, "node_id": "MDU6SXNzdWU2NjM3NzE5MQ==", "number": 24083, "title": "Add Servo's memory reporting to rustc", "user": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-04T23:10:22Z", "updated_at": "2017-03-24T19:22:19Z", "closed_at": "2015-08-24T01:31:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This probably means pulling out Servo's stuff into a crate of its own (if that is possible and amenable to the Servo folks), then using that crate in rustc (either as a submodule or by just moving the reporting stuff into the rust distro). Adding the actual hooks into rustc shouldn't be too tricky, presumably we'd need to add a -Z flag and code to setup the system reporter and to call that, probably in the same places we use `time_passes`. Finer-grained memory reporting can come later.\n\nWe really need decent stats on compiler memory usage before we start doing big refactorings of the compiler.\n\nOne thing I'm not sure about is if we can do memory reporting at the end of a phase and get the peak memory usage during that phase. That seems to me to be the most useful statistic, but it doesn't look like we can get that - only the amount of memory currently allocated, which is probably minimal between phases.\n\ncc @jdm @nnethercote\n", "closed_by": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24083/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24083/timeline", "performed_via_github_app": null, "state_reason": "completed"}