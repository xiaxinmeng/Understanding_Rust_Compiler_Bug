{"url": "https://api.github.com/repos/rust-lang/rust/issues/57157", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/57157/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/57157/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/57157/events", "html_url": "https://github.com/rust-lang/rust/issues/57157", "id": 394513376, "node_id": "MDU6SXNzdWUzOTQ1MTMzNzY=", "number": 57157, "title": "The std::cmp::Ord docs should be specific about how implementations \"must agree\" with PartialEq/Eq/PartialOrd", "user": {"login": "pm215", "id": 1682716, "node_id": "MDQ6VXNlcjE2ODI3MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1682716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pm215", "html_url": "https://github.com/pm215", "followers_url": "https://api.github.com/users/pm215/followers", "following_url": "https://api.github.com/users/pm215/following{/other_user}", "gists_url": "https://api.github.com/users/pm215/gists{/gist_id}", "starred_url": "https://api.github.com/users/pm215/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pm215/subscriptions", "organizations_url": "https://api.github.com/users/pm215/orgs", "repos_url": "https://api.github.com/users/pm215/repos", "events_url": "https://api.github.com/users/pm215/events{/privacy}", "received_events_url": "https://api.github.com/users/pm215/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-12-28T00:00:51Z", "updated_at": "2018-12-30T16:06:52Z", "closed_at": "2018-12-30T16:06:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://doc.rust-lang.org/std/cmp/trait.Ord.html says \"Implementations of PartialEq, PartialOrd, and Ord must agree with each other. It's easy to accidentally make them disagree by deriving some of the traits and manually implementing others.\" -- but it doesn't define in what ways specifically these trait implementations \"must agree with each other\". I think it would be useful if it did. (Is there also a requirement for consistency with Eq ?)\r\n\r\nThis is particularly significant because std::collections::BinaryHeap does not provide a method for \"create heap which sorts by this comparison function\", so people who aren't trying to implement arithmetic types are nonetheless quite likely to find they need to implement Ord for a type, and worse still Ord with an oddball ordering like \"reverse order by struct field X and don't care about fields Y or Z\" for a type that's probably using the derived implementations of Eq and PartialEq. Documenting the requirements between these traits would help in being confident that the set of impls you're writing fulfils them.\r\n\r\n(Ideally we'd also improve BinaryHeap so fewer people ever needed to implement Ord; #38886 is a suggestion to do that, which was closed as \"should be an RFC\" but has no link to any corresponding RFC. I thought I'd seen an RFC at some point too but googling can't find me it again. Possibly some of the theoretical discussions in #50230 and its closed-due-to-inactivity pullreq touch on consistency requirements between Ord and other traits, but that conversation seems to have stalled and is trying to cover rather wider ground in any case.)\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/57157/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/57157/timeline", "performed_via_github_app": null, "state_reason": "completed"}