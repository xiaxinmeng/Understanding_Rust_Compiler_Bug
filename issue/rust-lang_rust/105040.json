{"url": "https://api.github.com/repos/rust-lang/rust/issues/105040", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105040/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105040/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105040/events", "html_url": "https://github.com/rust-lang/rust/issues/105040", "id": 1467369515, "node_id": "I_kwDOAAsO6M5Xdkgr", "number": 105040, "title": "ICE when trying to analyze trait associated const as function", "user": {"login": "chyyran", "id": 1000503, "node_id": "MDQ6VXNlcjEwMDA1MDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1000503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chyyran", "html_url": "https://github.com/chyyran", "followers_url": "https://api.github.com/users/chyyran/followers", "following_url": "https://api.github.com/users/chyyran/following{/other_user}", "gists_url": "https://api.github.com/users/chyyran/gists{/gist_id}", "starred_url": "https://api.github.com/users/chyyran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chyyran/subscriptions", "organizations_url": "https://api.github.com/users/chyyran/orgs", "repos_url": "https://api.github.com/users/chyyran/repos", "events_url": "https://api.github.com/users/chyyran/events{/privacy}", "received_events_url": "https://api.github.com/users/chyyran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2022-11-29T02:58:27Z", "updated_at": "2022-12-04T00:27:31Z", "closed_at": "2022-12-04T00:27:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for finding an Internal Compiler Error! \ud83e\uddca  If possible, try to provide\r\na minimal verifiable example. You can read \"Rust Bug Minimization Patterns\" for\r\nhow to create smaller examples.\r\n\r\nhttp://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/\r\n\r\n-->\r\n\r\n### Code\r\n\r\n```Rust\r\nunsafe fn pointer(v: usize, w: u32) {\r\n\r\n}\r\n\r\npub trait UniformScalar {}\r\nimpl UniformScalar for u32 {}\r\n\r\npub trait GlUniformScalar: UniformScalar {\r\n    const FACTORY: unsafe fn(usize, Self) -> ();\r\n}\r\nimpl GlUniformScalar for u32 {\r\n    const FACTORY: unsafe fn(usize, Self) -> () = pointer;\r\n}\r\n\r\npub fn foo<T: UniformScalar>(value: T) {\r\n    <T as GlUniformScalar>::FACTORY(1, value);\r\n}\r\n```\r\n\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\n\r\nrustc 1.67.0-nightly (2585bcea0 2022-11-28)\r\nbinary: rustc\r\ncommit-hash: 2585bcea0bc2a9c42a4be2c1eba5c61137f2b167\r\ncommit-date: 2022-11-28\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.67.0-nightly\r\nLLVM version: 15.0.4\r\n\r\n```\r\n\r\n### Error output\r\n\r\n```\r\nerror: internal compiler error: compiler\\rustc_hir_analysis\\src\\collect.rs:1186:13: unexpected sort of node in fn_sig(): TraitItem(TraitItem { ident: FACTORY#0, owner_id: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, generics: Generics { params: [], predicates: [], has_where_clause_predicates: false, where_clause_span: no-location (#0), span: no-location (#0) }, kind: \r\nConst(Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 6 }, kind: BareFn(BareFnTy { unsafety: Unsafe, abi: Rust, generic_params: [], decl: FnDecl { inputs: [Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 1 }, kind: Path(Resolved(None, Path { span: \r\nlibrashader-runtime-gl\\src\\util.rs:145:30: 145:35 (#0), res: PrimTy(Uint(Usize)), segments: [PathSegment { ident: usize#0, hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 2 }, res: PrimTy(Uint(Usize)), args: None, infer_args: false }] })), span: librashader-runtime-gl\\src\\util.rs:145:30: 145:35 (#0) }, Ty { hir_id: HirId { owner: OwnerId \r\n{ def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 3 }, kind: Path(Resolved(None, Path { span: librashader-runtime-gl\\src\\util.rs:145:37: 145:41 (#0), res: SelfTyParam { trait_: DefId(0:488 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar) }, segments: [PathSegment { ident: Self#0, hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::u\r\ntil::GlUniformScalar::FACTORY) }, local_id: 4 }, res: SelfTyParam { trait_: DefId(0:488 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar) }, args: None, infer_args: false }] })), span: librashader-runtime-gl\\src\\util.rs:145:37: 145:41 (#0) }], output: Return(Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 5 }, kind: Tup([]), spa\r\nn: librashader-runtime-gl\\src\\util.rs:145:46: 145:48 (#0) }), c_variadic: false, implicit_self: None, lifetime_elision_allowed: false }, param_names: [#0, #0] }), span: librashader-runtime-gl\\src\\util.rs:145:20: 145:48 (#0) }, None), span: librashader-runtime-gl\\src\\util.rs:145:5: 145:49 (#0), defaultness: Default { has_value: false } })\r\n\r\nthread 'rustc' panicked at 'Box<dyn Any>', /rustc/2585bcea0bc2a9c42a4be2c1eba5c61137f2b167\\compiler\\rustc_errors\\src\\lib.rs:1575:9\r\nstack backtrace:\r\n   0:     0x7ffede139e32 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he98090efe44cd0fc\r\n   1:     0x7ffede1762ab - core::fmt::write::hb954b2197d3e582b\r\n   2:     0x7ffede12ca6a - <std::io::IoSlice as core::fmt::Debug>::fmt::h32e63234a004ac6b\r\n   3:     0x7ffede139b7b - std::sys::common::alloc::realloc_fallback::h68c0777f4e737e72\r\n   4:     0x7ffede13d489 - std::panicking::default_hook::h1f60f9f1445f2537\r\n   5:     0x7ffede13d10b - std::panicking::default_hook::h1f60f9f1445f2537\r\n   6:     0x7ffee0f4c62d - rustc_driver[d0f83ceb44e5ac18]::describe_lints\r\n   7:     0x7ffede13ddf0 - std::panicking::rust_panic_with_hook::hbfae456cc425367a\r\n   8:     0x7ffee3297c63 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n   9:     0x7ffee3296a99 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  10:     0x7ffee325cec9 - <rustc_middle[d0a66062f335146f]::mir::coverage::InjectedExpressionIndex as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  11:     0x7ffee3294cc9 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  12:     0x7ffee3294be0 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  13:     0x7ffee32946d2 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  14:     0x7ffee3270648 - <rustc_middle[d0a66062f335146f]::ty::sty::Binder<rustc_middle[d0a66062f335146f]::ty::TraitPredicate>>::print_modifiers_and_trait_path\r\n  15:     0x7ffee32724c8 - rustc_middle[d0a66062f335146f]::util::bug::bug_fmt\r\n  16:     0x7ffee3272445 - rustc_middle[d0a66062f335146f]::util::bug::bug_fmt\r\n  17:     0x7ffee0216f1f - rustc_hir_analysis[921f0d197ecacc03]::collect::get_infer_ret_ty\r\n  18:     0x7ffedf14378c - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  19:     0x7ffedf1ce8da - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  20:     0x7ffee090ffad - <rustc_span[af6edd4795884392]::symbol::Symbol as rustc_serialize[a990790a377fd69]::serialize::Encodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheEncoder>>::encode\r\n  21:     0x7ffee081faec - <rustc_query_impl[3e532bb7df4263fc]::Queries as rustc_middle[d0a66062f335146f]::ty::query::QueryEngine>::as_any\r\n  22:     0x7ffee237577d - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_block_no_value\r\n  23:     0x7ffee2374be5 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_block_no_value\r\n  24:     0x7ffee00df346 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::probe_instantiate_query_response\r\n  25:     0x7ffee0076e8c - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_call\r\n  26:     0x7ffee00a1e32 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  27:     0x7ffee00ef510 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_struct_path\r\n  28:     0x7ffee00a1ff8 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  29:     0x7ffee00b6ae0 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  30:     0x7ffee015095c - <rustc_hir_typeck[b4e1bc149af20378]::method::probe::Pick>::maybe_emit_unstable_name_collision_hint\r\n  31:     0x7ffee01380d7 - <rustc_hir_typeck[b4e1bc149af20378]::inherited::Inherited>::build\r\n  32:     0x7ffee00650bf - <rustc_hir_typeck[b4e1bc149af20378]::UnsafetyState>::recurse\r\n  33:     0x7ffedf143229 - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  34:     0x7ffedf1cbc75 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  35:     0x7ffee09480c5 - <rustc_span[af6edd4795884392]::symbol::Symbol as rustc_serialize[a990790a377fd69]::serialize::Encodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheEncoder>>::encode\r\n  36:     0x7ffee081fea6 - <rustc_query_impl[3e532bb7df4263fc]::Queries as rustc_middle[d0a66062f335146f]::ty::query::QueryEngine>::as_any\r\n  37:     0x7ffee0155bb3 - <rustc_hir_typeck[b4e1bc149af20378]::method::probe::Pick>::maybe_emit_unstable_name_collision_hint\r\n  38:     0x7ffedee327a1 - <rustc_hir_typeck[b4e1bc149af20378]::diverges::Diverges as core[a700df5e4066f152]::ops::bit::BitAnd>::bitand\r\n  39:     0x7ffedf144ebf - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  40:     0x7ffedf1f1456 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  41:     0x7ffedf295123 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  42:     0x7ffedf2fcde6 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  43:     0x7ffedee9453a - <<dyn rustc_hir_analysis[921f0d197ecacc03]::astconv::AstConv>::create_substs_for_ast_path::{closure#0}::SubstsForAstPathCtxt as rustc_hir_analysis[921f0d197ecacc03]::astconv::CreateSubstsForGenericArgsCtxt>::inferred_kind\r\n  44:     0x7ffedee8a323 - rustc_hir_analysis[921f0d197ecacc03]::check_crate\r\n  45:     0x7ffede75d725 - rustc_interface[e6db9c4597e420e0]::passes::analysis\r\n  46:     0x7ffedf144aef - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  47:     0x7ffedf1ec449 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  48:     0x7ffedf283f90 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  49:     0x7ffedf304aca - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  50:     0x7ffede71bdb4 - <unknown>\r\n  51:     0x7ffede72c7f6 - rustc_driver[d0f83ceb44e5ac18]::args::arg_expand_all\r\n  52:     0x7ffede72bb18 - rustc_driver[d0f83ceb44e5ac18]::args::arg_expand_all\r\n  53:     0x7ffede71cd29 - <unknown>\r\n  54:     0x7ffede713a3d - <unknown>\r\n  55:     0x7ffede15017c - std::sys::windows::thread::Thread::new::h4f63e44627cbb569\r\n  56:     0x7ff810fd74b4 - BaseThreadInitThunk\r\n  57:     0x7ff811bc26a1 - RtlUserThreadStart\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.67.0-nightly (2585bcea0 2022-11-28) running on x86_64-pc-windows-msvc\r\n\r\nnote: compiler flags: --crate-type lib -C embed-bitcode=no -C debuginfo=2 -C incremental=[REDACTED]\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\n#0 [fn_sig] computing function signature of `util::GlUniformScalar::FACTORY`\r\n#1 [typeck] type-checking `util::foo`\r\n#2 [typeck_item_bodies] type-checking all item bodies\r\n#3 [analysis] running analysis passes on this crate\r\nend of query stack\r\n\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\nerror: internal compiler error: compiler\\rustc_hir_analysis\\src\\collect.rs:1186:13: unexpected sort of node in fn_sig(): TraitItem(TraitItem { ident: FACTORY#0, owner_id: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, generics: Generics { params: [], predicates: [], has_where_clause_predicates: false, where_clause_span: no-location (#0), span: no-location (#0) }, kind: \r\nConst(Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 6 }, kind: BareFn(BareFnTy { unsafety: Unsafe, abi: Rust, generic_params: [], decl: FnDecl { inputs: [Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 1 }, kind: Path(Resolved(None, Path { span: \r\nlibrashader-runtime-gl\\src\\util.rs:145:30: 145:35 (#0), res: PrimTy(Uint(Usize)), segments: [PathSegment { ident: usize#0, hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 2 }, res: PrimTy(Uint(Usize)), args: None, infer_args: false }] })), span: librashader-runtime-gl\\src\\util.rs:145:30: 145:35 (#0) }, Ty { hir_id: HirId { owner: OwnerId \r\n{ def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 3 }, kind: Path(Resolved(None, Path { span: librashader-runtime-gl\\src\\util.rs:145:37: 145:41 (#0), res: SelfTyParam { trait_: DefId(0:488 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar) }, segments: [PathSegment { ident: Self#0, hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::u\r\ntil::GlUniformScalar::FACTORY) }, local_id: 4 }, res: SelfTyParam { trait_: DefId(0:488 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar) }, args: None, infer_args: false }] })), span: librashader-runtime-gl\\src\\util.rs:145:37: 145:41 (#0) }], output: Return(Ty { hir_id: HirId { owner: OwnerId { def_id: DefId(0:489 ~ librashader_runtime_gl[c33d]::util::GlUniformScalar::FACTORY) }, local_id: 5 }, kind: Tup([]), spa\r\nn: librashader-runtime-gl\\src\\util.rs:145:46: 145:48 (#0) }), c_variadic: false, implicit_self: None, lifetime_elision_allowed: false }, param_names: [#0, #0] }), span: librashader-runtime-gl\\src\\util.rs:145:20: 145:48 (#0) }, None), span: librashader-runtime-gl\\src\\util.rs:145:5: 145:49 (#0), defaultness: Default { has_value: false } })\r\n\r\nthread 'rustc' panicked at 'Box<dyn Any>', /rustc/2585bcea0bc2a9c42a4be2c1eba5c61137f2b167\\compiler\\rustc_errors\\src\\lib.rs:1575:9\r\nstack backtrace:\r\n   0:     0x7ffede139e32 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he98090efe44cd0fc\r\n   1:     0x7ffede1762ab - core::fmt::write::hb954b2197d3e582b\r\n   2:     0x7ffede12ca6a - <std::io::IoSlice as core::fmt::Debug>::fmt::h32e63234a004ac6b\r\n   3:     0x7ffede139b7b - std::sys::common::alloc::realloc_fallback::h68c0777f4e737e72\r\n   4:     0x7ffede13d489 - std::panicking::default_hook::h1f60f9f1445f2537\r\n   5:     0x7ffede13d10b - std::panicking::default_hook::h1f60f9f1445f2537\r\n   6:     0x7ffee0f4c62d - rustc_driver[d0f83ceb44e5ac18]::describe_lints\r\n   7:     0x7ffede13ddf0 - std::panicking::rust_panic_with_hook::hbfae456cc425367a\r\n   8:     0x7ffee3297c63 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n   9:     0x7ffee3296a99 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  10:     0x7ffee325cec9 - <rustc_middle[d0a66062f335146f]::mir::coverage::InjectedExpressionIndex as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  11:     0x7ffee3294cc9 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  12:     0x7ffee3294be0 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  13:     0x7ffee32946d2 - <rustc_middle[d0a66062f335146f]::ty::instance::InstanceDef as rustc_middle[d0a66062f335146f]::ty::context::Lift>::lift_to_tcx\r\n  14:     0x7ffee3270648 - <rustc_middle[d0a66062f335146f]::ty::sty::Binder<rustc_middle[d0a66062f335146f]::ty::TraitPredicate>>::print_modifiers_and_trait_path\r\n  15:     0x7ffee32724c8 - rustc_middle[d0a66062f335146f]::util::bug::bug_fmt\r\n  16:     0x7ffee3272445 - rustc_middle[d0a66062f335146f]::util::bug::bug_fmt\r\n  17:     0x7ffee0216f1f - rustc_hir_analysis[921f0d197ecacc03]::collect::get_infer_ret_ty\r\n  18:     0x7ffedf14378c - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  19:     0x7ffedf1ce8da - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  20:     0x7ffee090ffad - <rustc_span[af6edd4795884392]::symbol::Symbol as rustc_serialize[a990790a377fd69]::serialize::Encodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheEncoder>>::encode\r\n  21:     0x7ffee081faec - <rustc_query_impl[3e532bb7df4263fc]::Queries as rustc_middle[d0a66062f335146f]::ty::query::QueryEngine>::as_any\r\n  22:     0x7ffee237577d - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_block_no_value\r\n  23:     0x7ffee2374be5 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_block_no_value\r\n  24:     0x7ffee00df346 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::probe_instantiate_query_response\r\n  25:     0x7ffee0076e8c - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_call\r\n  26:     0x7ffee00a1e32 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  27:     0x7ffee00ef510 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::check_struct_path\r\n  28:     0x7ffee00a1ff8 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  29:     0x7ffee00b6ae0 - <rustc_hir_typeck[b4e1bc149af20378]::fn_ctxt::FnCtxt>::demand_coerce\r\n  30:     0x7ffee015095c - <rustc_hir_typeck[b4e1bc149af20378]::method::probe::Pick>::maybe_emit_unstable_name_collision_hint\r\n  31:     0x7ffee01380d7 - <rustc_hir_typeck[b4e1bc149af20378]::inherited::Inherited>::build\r\n  32:     0x7ffee00650bf - <rustc_hir_typeck[b4e1bc149af20378]::UnsafetyState>::recurse\r\n  33:     0x7ffedf143229 - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  34:     0x7ffedf1cbc75 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  35:     0x7ffee09480c5 - <rustc_span[af6edd4795884392]::symbol::Symbol as rustc_serialize[a990790a377fd69]::serialize::Encodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheEncoder>>::encode\r\n  36:     0x7ffee081fea6 - <rustc_query_impl[3e532bb7df4263fc]::Queries as rustc_middle[d0a66062f335146f]::ty::query::QueryEngine>::as_any\r\n  37:     0x7ffee0155bb3 - <rustc_hir_typeck[b4e1bc149af20378]::method::probe::Pick>::maybe_emit_unstable_name_collision_hint\r\n  38:     0x7ffedee327a1 - <rustc_hir_typeck[b4e1bc149af20378]::diverges::Diverges as core[a700df5e4066f152]::ops::bit::BitAnd>::bitand\r\n  39:     0x7ffedf144ebf - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  40:     0x7ffedf1f1456 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  41:     0x7ffedf295123 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  42:     0x7ffedf2fcde6 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  43:     0x7ffedee9453a - <<dyn rustc_hir_analysis[921f0d197ecacc03]::astconv::AstConv>::create_substs_for_ast_path::{closure#0}::SubstsForAstPathCtxt as rustc_hir_analysis[921f0d197ecacc03]::astconv::CreateSubstsForGenericArgsCtxt>::inferred_kind\r\n  44:     0x7ffedee8a323 - rustc_hir_analysis[921f0d197ecacc03]::check_crate\r\n  45:     0x7ffede75d725 - rustc_interface[e6db9c4597e420e0]::passes::analysis\r\n  46:     0x7ffedf144aef - <rustc_const_eval[febab0397fa2a2b1]::transform::check_consts::resolver::State as core[a700df5e4066f152]::clone::Clone>::clone_from\r\n  47:     0x7ffedf1ec449 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  48:     0x7ffedf283f90 - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  49:     0x7ffedf304aca - <&[(rustc_middle[d0a66062f335146f]::middle::exported_symbols::ExportedSymbol, rustc_middle[d0a66062f335146f]::middle::exported_symbols::SymbolExportInfo)] as rustc_serialize[a990790a377fd69]::serialize::Decodable<rustc_query_impl[3e532bb7df4263fc]::on_disk_cache::CacheDecoder>>::decode\r\n  50:     0x7ffede71bdb4 - <unknown>\r\n  51:     0x7ffede72c7f6 - rustc_driver[d0f83ceb44e5ac18]::args::arg_expand_all\r\n  52:     0x7ffede72bb18 - rustc_driver[d0f83ceb44e5ac18]::args::arg_expand_all\r\n  53:     0x7ffede71cd29 - <unknown>\r\n  54:     0x7ffede713a3d - <unknown>\r\n  55:     0x7ffede15017c - std::sys::windows::thread::Thread::new::h4f63e44627cbb569\r\n  56:     0x7ff810fd74b4 - BaseThreadInitThunk\r\n  57:     0x7ff811bc26a1 - RtlUserThreadStart\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.67.0-nightly (2585bcea0 2022-11-28) running on x86_64-pc-windows-msvc\r\n\r\nnote: compiler flags: --crate-type lib -C embed-bitcode=no -C debuginfo=2 -C incremental=[REDACTED]\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\n#0 [fn_sig] computing function signature of `util::GlUniformScalar::FACTORY`\r\n#1 [typeck] type-checking `util::foo`\r\n#2 [typeck_item_bodies] type-checking all item bodies\r\n#3 [analysis] running analysis passes on this crate\r\nend of query stack\r\n\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105040/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105040/timeline", "performed_via_github_app": null, "state_reason": "completed"}