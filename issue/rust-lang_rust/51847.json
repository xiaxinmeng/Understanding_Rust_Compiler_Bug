{"url": "https://api.github.com/repos/rust-lang/rust/issues/51847", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51847/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51847/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51847/events", "html_url": "https://github.com/rust-lang/rust/issues/51847", "id": 336252093, "node_id": "MDU6SXNzdWUzMzYyNTIwOTM=", "number": 51847, "title": "Installed rustc not used if using `config.toml`", "user": {"login": "paulmenzel", "id": 9318792, "node_id": "MDQ6VXNlcjkzMTg3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9318792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmenzel", "html_url": "https://github.com/paulmenzel", "followers_url": "https://api.github.com/users/paulmenzel/followers", "following_url": "https://api.github.com/users/paulmenzel/following{/other_user}", "gists_url": "https://api.github.com/users/paulmenzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmenzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmenzel/subscriptions", "organizations_url": "https://api.github.com/users/paulmenzel/orgs", "repos_url": "https://api.github.com/users/paulmenzel/repos", "events_url": "https://api.github.com/users/paulmenzel/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmenzel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-27T14:22:26Z", "updated_at": "2018-06-27T16:33:39Z", "closed_at": "2018-06-27T16:33:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "Rust 1.25.0 is installed, and I want to build 1.26.1 outside the source directory `/dev/shm/bee-root/rustc/rustc-1.26.1-0/source/config.toml` in `/dev/shm/bee-root/rustc/rustc-1.26.1-0/build/config.toml`.\r\n\r\n```\r\n$ rustc --version\r\nrustc 1.25.0-dev\r\n$ more /dev/shm/bee-root/rustc/rustc-1.26.1-0/source/config.toml\r\n# see config.toml.example for more possible options\r\n[llvm]\r\ntargets = \"X86\"\r\n\r\n# When using system llvm prefer shared libraries\r\nlink-shared = true\r\n\r\n[build]\r\n# install cargo as well as rust\r\nextended = true\r\n\r\n[install]\r\nprefix = \"/usr\"\r\ndocdir = \"share/doc/rustc-1.25.0\"\r\n\r\n[rust]\r\nchannel = \"stable\"\r\nrpath = false\r\n\r\n# get reasonably clean output from the test harness\r\nquiet-tests = true\r\n\r\n# BLFS does not install the FileCheck executable from llvm,\r\n# so disable codegen tests\r\ncodegen-tests = false\r\n\r\n[target.x86_64-unknown-linux-gnu]\r\n# delete this *section* if you are not using system llvm.\r\n# NB the output of llvm-config (i.e. help options) may be\r\n# dumped to the screen when config.toml is parsed.\r\nllvm-config = \"/usr/bin/llvm-config\"\r\n$ more /dev/shm/bee-root/rustc/rustc-1.26.1-0/build/config.toml\r\n# see config.toml.example for more possible options\r\n[llvm]\r\ntargets = \"X86\"\r\n\r\n# When using system llvm prefer shared libraries\r\nlink-shared = true\r\n\r\n[build]\r\n# install cargo as well as rust\r\nextended = true\r\n\r\n[install]\r\nprefix = \"/usr\"\r\ndocdir = \"share/doc/rustc-1.25.0\"\r\n\r\n[rust]\r\nchannel = \"stable\"\r\nrpath = false\r\n\r\n# get reasonably clean output from the test harness\r\nquiet-tests = true\r\n\r\n# BLFS does not install the FileCheck executable from llvm,\r\n# so disable codegen tests\r\ncodegen-tests = false\r\n\r\n[target.x86_64-unknown-linux-gnu]\r\n# delete this *section* if you are not using system llvm.\r\n# NB the output of llvm-config (i.e. help options) may be\r\n# dumped to the screen when config.toml is parsed.\r\nllvm-config = \"/usr/bin/llvm-config\"\r\n$ cd /dev/shm/bee-root/rustc/rustc-1.26.1-0/build\r\n$ sudo /dev/shm/bee-root/rustc/rustc-1.26.1-0/source/x.py build\r\ninfo: looks like you are running this command under `sudo`\r\n      and so in order to preserve your $HOME this will now\r\n      use vendored sources by default. Note that if this\r\n      does not work you should run a normal build first\r\n      before running a command like `sudo ./x.py install`\r\ndownloading https://static.rust-lang.org/dist/2018-03-29/rust-std-1.25.0-x86_64-unknown-linux-gnu.tar.gz\r\n######################################################################## 100.0%\r\nextracting /dev/shm/bee-root/rustc/rustc-1.26.1-0/build/build/cache/2018-03-29/rust-std-1.25.0-x86_64-unknown-linux-gnu.tar.gz\r\n[\u2026]\r\n```\r\n\r\nUsing the configure script, the system rustc 1.25.0 is used. This should also happen when using `config.toml`.", "closed_by": {"login": "paulmenzel", "id": 9318792, "node_id": "MDQ6VXNlcjkzMTg3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9318792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmenzel", "html_url": "https://github.com/paulmenzel", "followers_url": "https://api.github.com/users/paulmenzel/followers", "following_url": "https://api.github.com/users/paulmenzel/following{/other_user}", "gists_url": "https://api.github.com/users/paulmenzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmenzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmenzel/subscriptions", "organizations_url": "https://api.github.com/users/paulmenzel/orgs", "repos_url": "https://api.github.com/users/paulmenzel/repos", "events_url": "https://api.github.com/users/paulmenzel/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmenzel/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51847/timeline", "performed_via_github_app": null, "state_reason": "completed"}