{"url": "https://api.github.com/repos/rust-lang/rust/issues/79108", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/79108/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/79108/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/79108/events", "html_url": "https://github.com/rust-lang/rust/issues/79108", "id": 744073596, "node_id": "MDU6SXNzdWU3NDQwNzM1OTY=", "number": 79108, "title": "`InstanceDef::requires_inline` does not result in an inline hint", "user": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-16T18:45:17Z", "updated_at": "2020-11-19T02:26:53Z", "closed_at": "2020-11-19T02:26:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The `InstanceDef::requires_inline` is described to return true if \"this\r\ninstance is unconditionally marked with inline\". In practice, the instance will\r\nreceive an inline hint if and only if the instance has any other user specified\r\ninlining attributes.\r\n\r\nFor example, by default a closure will not receive an inline hint, but a\r\nclosure marked with `#[inline(never)]` counter-intuitively will (together with\r\n`noinline`).\r\n\r\n```rust\r\n#![crate_type = \"lib\"]\r\n#![feature(stmt_expr_attributes)]\r\n\r\npub fn f() {\r\n    let a = || {};\r\n    let b = #[inline(never)] || {};\r\n    a();\r\n    b();\r\n}\r\n```\r\n\r\n```llvm\r\n; a::f::{{closure}}\r\n; Function Attrs: nonlazybind uwtable\r\ndefine internal void @\"_ZN1a1f28_$u7b$$u7b$closure$u7d$$u7d$17hefe1f433f470c2abE\"(%\"[closure@a.rs:5:13: 5:18]\"* noalias nonnull readonly align 1 %_1) unnamed_addr #0 {\r\nstart:\r\n  ret void\r\n}\r\n\r\n; a::f::{{closure}}\r\n; Function Attrs: inlinehint noinline nonlazybind uwtable\r\ndefine internal void @\"_ZN1a1f28_$u7b$$u7b$closure$u7d$$u7d$17h7b2e25d54194ec9cE\"(%\"[closure@a.rs:6:30: 6:35]\"* noalias nonnull readonly align 1 %_1) unnamed_addr #1 {\r\nstart:\r\n  ret void\r\n}\r\n```\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/79108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/79108/timeline", "performed_via_github_app": null, "state_reason": "completed"}