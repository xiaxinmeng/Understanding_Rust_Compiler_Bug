{"url": "https://api.github.com/repos/rust-lang/rust/issues/104567", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104567/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104567/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104567/events", "html_url": "https://github.com/rust-lang/rust/issues/104567", "id": 1454778178, "node_id": "I_kwDOAAsO6M5WtidC", "number": 104567, "title": "Valgrind reported some error", "user": {"login": "jiangbo", "id": 14179422, "node_id": "MDQ6VXNlcjE0MTc5NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/14179422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiangbo", "html_url": "https://github.com/jiangbo", "followers_url": "https://api.github.com/users/jiangbo/followers", "following_url": "https://api.github.com/users/jiangbo/following{/other_user}", "gists_url": "https://api.github.com/users/jiangbo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiangbo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiangbo/subscriptions", "organizations_url": "https://api.github.com/users/jiangbo/orgs", "repos_url": "https://api.github.com/users/jiangbo/repos", "events_url": "https://api.github.com/users/jiangbo/events{/privacy}", "received_events_url": "https://api.github.com/users/jiangbo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-11-18T09:33:52Z", "updated_at": "2022-12-09T12:24:40Z", "closed_at": "2022-12-09T12:24:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "I used axum to write an http service, and when I used valgrind to analyze it, it prompted some errors. \r\nI don't know if there is a problem, can someone help me?\r\n\r\nenv:\r\nvirtual box 7.0.2\r\ncentos 7\r\nustup 1.25.1 (bb60b1e89 2022-07-12)\r\ninfo: This is the version for the rustup toolchain manager, not the rustc compiler.\r\ninfo: The currently active `rustc` version is `rustc 1.65.0 (897e37553 2022-11-02)`\r\n\r\n```text\r\n[root@centos7 debug]# valgrind --leak-check=full ./decrypt\r\n==9829== Memcheck, a memory error detector\r\n==9829== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.\r\n==9829== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info\r\n==9829== Command: ./decrypt\r\n==9829== \r\n==9829== Syscall param statx(file_name) points to unaddressable byte(s)\r\n==9829==    at 0x5A6FE29: syscall (in /usr/lib64/libc-2.17.so)\r\n==9829==    by 0x42B99E: statx (weak.rs:182)\r\n==9829==    by 0x42B99E: std::sys::unix::fs::try_statx (fs.rs:161)\r\n==9829==    by 0x41F7A2: file_attr (fs.rs:955)\r\n==9829==    by 0x41F7A2: metadata (fs.rs:550)\r\n==9829==    by 0x41F7A2: std::fs::buffer_capacity_required (fs.rs:718)\r\n==9829==    by 0x41F97D: <std::fs::File as std::io::Read>::read_to_string (fs.rs:752)\r\n==9829==    by 0x39ABC6: num_cpus::linux::Cgroup::raw_param (linux.rs:246)\r\n==9829==    by 0x39A971: num_cpus::linux::Cgroup::param (linux.rs:237)\r\n==9829==    by 0x39A599: num_cpus::linux::Cgroup::quota_us (linux.rs:219)\r\n==9829==    by 0x39A38B: num_cpus::linux::Cgroup::cpu_quota (linux.rs:203)\r\n==9829==    by 0x399F26: num_cpus::linux::load_cgroups (linux.rs:154)\r\n==9829==    by 0x399B8D: num_cpus::linux::init_cgroups (linux.rs:134)\r\n==9829==    by 0x3A45C8: core::ops::function::FnOnce::call_once (function.rs:248)\r\n==9829==    by 0x392F02: std::sync::once::Once::call_once::{{closure}} (once.rs:276)\r\n==9829==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\r\n==9829== \r\n==9829== Syscall param statx(buf) points to unaddressable byte(s)\r\n==9829==    at 0x5A6FE29: syscall (in /usr/lib64/libc-2.17.so)\r\n==9829==    by 0x42B99E: statx (weak.rs:182)\r\n==9829==    by 0x42B99E: std::sys::unix::fs::try_statx (fs.rs:161)\r\n==9829==    by 0x41F7A2: file_attr (fs.rs:955)\r\n==9829==    by 0x41F7A2: metadata (fs.rs:550)\r\n==9829==    by 0x41F7A2: std::fs::buffer_capacity_required (fs.rs:718)\r\n==9829==    by 0x41F97D: <std::fs::File as std::io::Read>::read_to_string (fs.rs:752)\r\n==9829==    by 0x39ABC6: num_cpus::linux::Cgroup::raw_param (linux.rs:246)\r\n==9829==    by 0x39A971: num_cpus::linux::Cgroup::param (linux.rs:237)\r\n==9829==    by 0x39A599: num_cpus::linux::Cgroup::quota_us (linux.rs:219)\r\n==9829==    by 0x39A38B: num_cpus::linux::Cgroup::cpu_quota (linux.rs:203)\r\n==9829==    by 0x399F26: num_cpus::linux::load_cgroups (linux.rs:154)\r\n==9829==    by 0x399B8D: num_cpus::linux::init_cgroups (linux.rs:134)\r\n==9829==    by 0x3A45C8: core::ops::function::FnOnce::call_once (function.rs:248)\r\n==9829==    by 0x392F02: std::sync::once::Once::call_once::{{closure}} (once.rs:276)\r\n==9829==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\r\n==9829== \r\n```\r\n", "closed_by": {"login": "jiangbo", "id": 14179422, "node_id": "MDQ6VXNlcjE0MTc5NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/14179422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiangbo", "html_url": "https://github.com/jiangbo", "followers_url": "https://api.github.com/users/jiangbo/followers", "following_url": "https://api.github.com/users/jiangbo/following{/other_user}", "gists_url": "https://api.github.com/users/jiangbo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiangbo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiangbo/subscriptions", "organizations_url": "https://api.github.com/users/jiangbo/orgs", "repos_url": "https://api.github.com/users/jiangbo/repos", "events_url": "https://api.github.com/users/jiangbo/events{/privacy}", "received_events_url": "https://api.github.com/users/jiangbo/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104567/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104567/timeline", "performed_via_github_app": null, "state_reason": "completed"}