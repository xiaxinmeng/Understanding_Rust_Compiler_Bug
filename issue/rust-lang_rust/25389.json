{"url": "https://api.github.com/repos/rust-lang/rust/issues/25389", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25389/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25389/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25389/events", "html_url": "https://github.com/rust-lang/rust/issues/25389", "id": 76153153, "node_id": "MDU6SXNzdWU3NjE1MzE1Mw==", "number": 25389, "title": "ICE with boxed closure includes argument with lifetime and Drop", "user": {"login": "seanmonstar", "id": 51479, "node_id": "MDQ6VXNlcjUxNDc5", "avatar_url": "https://avatars.githubusercontent.com/u/51479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seanmonstar", "html_url": "https://github.com/seanmonstar", "followers_url": "https://api.github.com/users/seanmonstar/followers", "following_url": "https://api.github.com/users/seanmonstar/following{/other_user}", "gists_url": "https://api.github.com/users/seanmonstar/gists{/gist_id}", "starred_url": "https://api.github.com/users/seanmonstar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seanmonstar/subscriptions", "organizations_url": "https://api.github.com/users/seanmonstar/orgs", "repos_url": "https://api.github.com/users/seanmonstar/repos", "events_url": "https://api.github.com/users/seanmonstar/events{/privacy}", "received_events_url": "https://api.github.com/users/seanmonstar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 43009118, "node_id": "MDU6TGFiZWw0MzAwOTExOA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-destructors", "name": "A-destructors", "color": "f7e101", "default": false, "description": "Area: destructors (Drop, ..)"}, {"id": 122406831, "node_id": "MDU6TGFiZWwxMjI0MDY4MzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-closures", "name": "A-closures", "color": "f7e101", "default": false, "description": "Area: closures (`|args| { .. }`)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-13T22:57:50Z", "updated_at": "2015-07-29T08:23:13Z", "closed_at": "2015-07-29T08:23:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Code:\n\n``` rust\nstruct Foo<'a> {\n    a: &'a str\n}\n\nimpl<'a> Drop for Foo<'a> {\n    fn drop(&mut self) {}\n}\n\nfn main() {\n    let _: Vec<Box<Fn(Foo)>> = Vec::new();\n}\n```\n\nError:\n\n```\nerror: internal compiler error: cannot relate bound region: ReScope(DestructionScope(26)) <= ReLateBound(DebruijnIndex { depth: 1 }, BrAnon(0))\n```\n\nBacktrace using `1.0.0-beta.5` (also occurs with `rustc 1.1.0-nightly (c2b30b86d 2015-05-12) (built 2015-05-13)`):\n\n```\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:149\n\nstack backtrace:\n   1:     0x7f4ed2c18429 - sys::backtrace::write::h3fdf06e7a8dd7bced4r\n   2:     0x7f4ed2c20136 - panicking::on_panic::hdc3f6d7788894b93jrw\n   3:     0x7f4ed2be3442 - rt::unwind::begin_unwind_inner::h93ec8cb6029f2822t6v\n   4:     0x7f4ed01ae43d - rt::unwind::begin_unwind::h13038079570089827110\n   5:     0x7f4ed01ae3d2 - diagnostic::SpanHandler::span_bug::h81555737e15010e3EqB\n   6:     0x7f4ed0c8079e - middle::infer::region_inference::RegionVarBindings<'a, 'tcx>::make_subregion::ha14bc637a5d82b0dtiv\n   7:     0x7f4ed0c9ad2d - middle::infer::mk_subr::h5555b742f1f8903eXWy\n   8:     0x7f4ed19c6524 - check::regionck::type_must_outlive::h45e3ba7d488e34d2QBe\n   9:     0x7f4ed19c4489 - check::dropck::iterate_over_potentially_unsafe_regions_in_type::h582cacd73f4ee5f6CDa\n  10:     0x7f4ed19c45e4 - check::dropck::iterate_over_potentially_unsafe_regions_in_type::h582cacd73f4ee5f6CDa\n  11:     0x7f4ed19c45e4 - check::dropck::iterate_over_potentially_unsafe_regions_in_type::h582cacd73f4ee5f6CDa\n  12:     0x7f4ed19c45e4 - check::dropck::iterate_over_potentially_unsafe_regions_in_type::h582cacd73f4ee5f6CDa\n  13:     0x7f4ed19c3218 - check::dropck::check_safety_of_destructor_if_necessary::hd55366388bca82c5Mxa\n  14:     0x7f4ed19f508d - check::regionck::check_safety_of_rvalue_destructor_if_necessary::h34584ca2e6bb57b0gXd\n  15:     0x7f4ed19eebcf - check::regionck::visit_expr::h410fd5fb32b6f6c0Yhd\n  16:     0x7f4ed19ecd7d - check::regionck::Rcx<'a, 'tcx>::visit_fn_body::h8dbb31ea8fa0d01apUc\n  17:     0x7f4ed1a668a6 - check::check_bare_fn::he66bf0548da8b8d1twn\n  18:     0x7f4ed1a6f09c - check::check_method_body::h5b78b6a12b2b5463Y7n\n  19:     0x7f4ed1a64568 - check::CheckItemBodiesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::h5534b4c58b22cf23wtn\n  20:     0x7f4ed1b286aa - check_crate::closure.38021\n  21:     0x7f4ed1b23a40 - check_crate::h44f7d6f01042e613XcC\n  22:     0x7f4ed315bc88 - driver::phase_3_run_analysis_passes::h071f1f038f4270canGa\n  23:     0x7f4ed313cd85 - driver::compile_input::hc5c2173550d25b21Qba\n  24:     0x7f4ed31fe551 - run_compiler::h5fd7a3cba8c0dcd3z4b\n  25:     0x7f4ed31fc1a2 - boxed::F.FnBox<A>::call_box::h13268679164253669965\n  26:     0x7f4ed31fb6d9 - rt::unwind::try::try_fn::h1333595601538020842\n  27:     0x7f4ed2c92aa8 - rust_try_inner\n  28:     0x7f4ed2c92a95 - rust_try\n  29:     0x7f4ed31fb988 - boxed::F.FnBox<A>::call_box::h18060233810932446010\n  30:     0x7f4ed2c1f021 - sys::thread::create::thread_start::h7002e49f5ed4f198aqv\n  31:     0x7f4ecd4a1181 - start_thread\n  32:     0x7f4ed286947c - __clone\n  33:                0x0 - <unknown>\n```\n\nPlaypen: http://is.gd/s4uWQW\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25389/timeline", "performed_via_github_app": null, "state_reason": "completed"}