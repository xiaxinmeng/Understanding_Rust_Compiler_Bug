{"url": "https://api.github.com/repos/rust-lang/rust/issues/86912", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86912/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86912/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86912/events", "html_url": "https://github.com/rust-lang/rust/issues/86912", "id": 938089172, "node_id": "MDU6SXNzdWU5MzgwODkxNzI=", "number": 86912, "title": "array::map stack usage", "user": {"login": "programmerjake", "id": 4584340, "node_id": "MDQ6VXNlcjQ1ODQzNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4584340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/programmerjake", "html_url": "https://github.com/programmerjake", "followers_url": "https://api.github.com/users/programmerjake/followers", "following_url": "https://api.github.com/users/programmerjake/following{/other_user}", "gists_url": "https://api.github.com/users/programmerjake/gists{/gist_id}", "starred_url": "https://api.github.com/users/programmerjake/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/programmerjake/subscriptions", "organizations_url": "https://api.github.com/users/programmerjake/orgs", "repos_url": "https://api.github.com/users/programmerjake/repos", "events_url": "https://api.github.com/users/programmerjake/events{/privacy}", "received_events_url": "https://api.github.com/users/programmerjake/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1049491442, "node_id": "MDU6TGFiZWwxMDQ5NDkxNDQy", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-heavy", "name": "I-heavy", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to binary size of generated code."}, {"id": 3425147156, "node_id": "LA_kwDOAAsO6M7MJ5kU", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-array", "name": "A-array", "color": "f7e101", "default": false, "description": "Area: [T; N]"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2021-07-06T16:56:45Z", "updated_at": "2023-04-15T20:39:24Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "I don't know if this is the right place for this, but I'd like to report that `array::map` uses the stack excessively and operating on larger arrays result in unexpected stack overflows.\r\n\r\nMinimal example: https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=2d96e8f66b3432a8d1ecf0ca4331f85a\r\n\r\nIn the example, at some point more than 16 times more stack is used than the original array size.\r\n\r\nAs far as I've looked into the actual code, the only thing that stood out to me is use of `core::mem::transmute_copy` instead of `core::mem::transmute` in `core::array::IntoIter::new`, but I doubt it's the reason for this.\r\n\r\n_Originally posted by @PonasKovas in https://github.com/rust-lang/rust/issues/75243#issuecomment-874732134_", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86912/timeline", "performed_via_github_app": null, "state_reason": null}