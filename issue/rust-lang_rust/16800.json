{"url": "https://api.github.com/repos/rust-lang/rust/issues/16800", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16800/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16800/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16800/events", "html_url": "https://github.com/rust-lang/rust/issues/16800", "id": 41332748, "node_id": "MDU6SXNzdWU0MTMzMjc0OA==", "number": 16800, "title": "ICE when compiling code", "user": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-08-27T21:28:23Z", "updated_at": "2014-09-03T19:36:12Z", "closed_at": "2014-09-03T19:36:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When compiling https://github.com/retep998/rustoban/tree/bcab8157692ff3c21cc8d63dc954a568cc968ff0\nFirst I compiled using cargo and got\n\n```\n$ cargo build -v\n     Running `rustc A:\\msys64\\home\\retep998\\rustoban\\src\\main.rs --crate-name rustoban --crate-type bin --out-dir A:\\msys64\\home\\retep998\\rustoban\\target --dep-info A:\\msys64\\home\\retep998\\rustoban\\target\\.fingerprint\\rustoban-012bcebb903b7931\\dep-bin-rustoban -L A:\\msys64\\home\\retep998\\rustoban\\target -L A:\\msys64\\home\\retep998\\rustoban\\target\\deps`\n   Compiling rustoban v0.0.1 (file:///A:/msys64/home/retep998/rustoban)\nA:\\msys64\\home\\retep998\\rustoban\\src\\level.rs:10:1: 10:57 warning: code is never used: `MAX_SIZE`, #[warn(dead_code)] on by default\nA:\\msys64\\home\\retep998\\rustoban\\src\\level.rs:10 static MAX_SIZE: Size2D = Size2D{width: 80, height: 23};\n                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nA:\\msys64\\home\\retep998\\rustoban\\src\\level.rs:13:5: 13:17 warning: code is never used: `size`, #[warn(dead_code)] on by default\nA:\\msys64\\home\\retep998\\rustoban\\src\\level.rs:13     size: Size2D,\n                                                     ^~~~~~~~~~~~\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'unreachable', A:\\msys64\\home\\retep998\\rust\\src\\librustc\\middle\\trans\\type_of.rs:218\n\n\nCould not compile `rustoban`.\n\nCaused by:\n  Process didn't exit successfully: `rustc A:\\msys64\\home\\retep998\\rustoban\\src\\main.rs --crate-name rustoban --crate-type bin --out-dir A:\\msys64\\home\\retep998\\rustoban\\target --dep-info A:\\msys64\\home\\retep998\\rustoban\\target\\.fingerprint\\rustoban-012bcebb903b7931\\dep-bin-rustoban -L A:\\msys64\\home\\retep998\\rustoban\\target -L A:\\msys64\\home\\retep998\\rustoban\\target\\deps` (status=101)\n```\n\nSo then I ran rustc from gdb to get a full stacktrace\n\n```\n$ gdb rustc\nGNU gdb (GDB) 7.8\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-w64-mingw32\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from rustc...done.\n(gdb) run src/main.rs\nStarting program: A:\\rust64\\bin\\rustc.exe src/main.rs\n[New Thread 14968.0x1520]\n[New Thread 14968.0x55bc]\nsrc\\level.rs:10:1: 10:57 warning: code is never used: `MAX_SIZE`, #[warn(dead_code)] on by default\nsrc\\level.rs:10 static MAX_SIZE: Size2D = Size2D{width: 80, height: 23};\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc\\level.rs:13:5: 13:17 warning: code is never used: `size`, #[warn(dead_code)] on by default\nsrc\\level.rs:13     size: Size2D,\n                    ^~~~~~~~~~~~\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 14968.0x55bc]\nje_huge_salloc () at A:/msys64/home/retep998/rust/src/jemalloc/src/huge.c:193\n193             ret = node->size;\n(gdb) bt\n#0  je_huge_salloc ()\n    at A:/msys64/home/retep998/rust/src/jemalloc/src/huge.c:193\n#1  0x00000000637d53a8 in je_isalloc ()\n    at include/jemalloc/internal/jemalloc_internal.h:727\n#2  je_dallocx ()\n    at A:/msys64/home/retep998/rust/src/jemalloc/src/jemalloc.c:1771\n#3  0x0000000061f369a5 in middle::trans::adt::mk_struct::haef641ecaeb9d3d7YNt\n    () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#4  0x0000000061e141c0 in middle::trans::adt::represent_type::ha68319fbe6c0a90bimt () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#5  0x0000000061e1bc2d in middle::trans::type_of::sizing_type_of::hb8d66a4c8a93b724Ma9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#6  0x0000000061f36601 in middle::trans::adt::mk_struct::haef641ecaeb9d3d7YNt\n    () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#7  0x0000000061e141c0 in middle::trans::adt::represent_type::ha68319fbe6c0a90bimt () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#8  0x0000000061e0e6d9 in middle::trans::type_of::type_of::h78d399b053e3623dIh9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#9  0x0000000061e0e6ae in middle::trans::type_of::type_of::h78d399b053e3623dIh9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#10 0x0000000061e0e2bf in middle::trans::type_of::type_of::h78d399b053e3623dIh9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#11 0x0000000061f39e74 in middle::trans::adt::struct_llfields::h206178ff796aa467zfu () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#12 0x0000000061e98581 in middle::trans::adt::finish_type_of::h05a7814766e4235211t () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#13 0x0000000061e0eb17 in middle::trans::type_of::type_of::h78d399b053e3623dIh9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#14 0x0000000061e0dec1 in middle::trans::type_of::type_of::h78d399b053e3623dIh9 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#15 0x0000000061e440e7 in middle::trans::base::alloc_ty::h018db85475642681mTd\n    () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#16 0x0000000061eef781 in middle::trans::_match::mk_binding_alloca::h4969656315549397990 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#17 0x0000000061eb5ddb in middle::trans::_match::store_local::he1a21cfffa050be4A2h () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#18 0x0000000061e05b7b in middle::trans::base::init_local::he7cbcde5c1956afdWFd () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#19 0x0000000061e0508c in middle::trans::controlflow::trans_stmt::hac36615c99ac44fclhY () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#20 0x0000000061e0695d in middle::trans::controlflow::trans_block::h992f76f1deffb940wmY () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#21 0x0000000061ec0920 in middle::trans::base::trans_closure::h252b88d832aec661vye () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#22 0x0000000061df7113 in middle::trans::base::trans_fn::h739d4f2f94d4f049iKe\n    () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#23 0x0000000061ec3167 in middle::trans::meth::trans_impl::h190f2654818d6d98i9j () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#24 0x0000000061df26ba in middle::trans::base::trans_item::h588143bd387a01d1i2e () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#25 0x0000000061df2390 in middle::trans::base::trans_item::h588143bd387a01d1i2e () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#26 0x0000000061eca30d in middle::trans::base::trans_crate::h41a261962f300c38JWf () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#27 0x00000000622a32ea in driver::driver::phase_4_translate_to_llvm::h8cf9745bc029f2a2Qyy () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#28 0x000000006229c78f in driver::driver::compile_input::he4e9a6195a5d54dchby\n    () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#29 0x00000000623330d9 in driver::run_compiler::h71eecfc64ef3e541aIB ()\n   from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#30 0x00000000623317b5 in driver::main_args::closure.138287 ()\n   from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#31 0x0000000062343b02 in task::TaskBuilder$LT$S$GT$::try_future::closure.139405 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#32 0x00000000623439fc in task::TaskBuilder$LT$S$GT$::spawn_internal::closure.139382 () from A:\\rust64\\bin\\rustc-4e7c5e5c.dll\n#33 0x000000006374ee77 in task::spawn_opts::closure.8796 ()\n   from A:\\rust64\\bin\\native-4e7c5e5c.dll\n#34 0x0000000063820d4f in rust_try_inner ()\n   from A:\\rust64\\bin\\rustrt-4e7c5e5c.dll\n#35 0x0000000063820d29 in rust_try () from A:\\rust64\\bin\\rustrt-4e7c5e5c.dll\n#36 0x00000000637b5da6 in unwind::try::he51b9bde125c595fLOd ()\n   from A:\\rust64\\bin\\rustrt-4e7c5e5c.dll\n#37 0x00000000637b5a7f in task::Task::run::h6502d549d95597afJbd ()\n   from A:\\rust64\\bin\\rustrt-4e7c5e5c.dll\n#38 0x000000006374ecb0 in task::spawn_opts::closure.8742 ()\n   from A:\\rust64\\bin\\native-4e7c5e5c.dll\n#39 0x00000000637b7bf1 in thread::thread_start::hc05d3a3e9c547ba5vAd ()\n   from A:\\rust64\\bin\\rustrt-4e7c5e5c.dll\n#40 0x00007ffe53eb16ad in KERNEL32!BaseThreadInitThunk ()\n   from C:\\WINDOWS\\system32\\kernel32.dll\n#41 0x00007ffe566934a5 in ntdll!RtlUserThreadStart ()\n   from C:\\WINDOWS\\SYSTEM32\\ntdll.dll\n#42 0x0000000000000000 in ?? ()\nBacktrace stopped: previous frame inner to this frame (corrupt stack?)\n(gdb)\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16800/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16800/timeline", "performed_via_github_app": null, "state_reason": "completed"}