{"url": "https://api.github.com/repos/rust-lang/rust/issues/27257", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27257/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27257/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27257/events", "html_url": "https://github.com/rust-lang/rust/issues/27257", "id": 97063756, "node_id": "MDU6SXNzdWU5NzA2Mzc1Ng==", "number": 27257, "title": "Edge case on dead_code lint with unused variants", "user": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-07-24T14:20:33Z", "updated_at": "2016-10-22T12:54:36Z", "closed_at": "2016-10-22T12:53:49Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Using this code: https://github.com/retep998/winapi-rs/blob/lint-fail/src/winnt.rs#L2061-L2070\n\nBuild log: https://ci.appveyor.com/project/retep998/winapi-rs/build/1.0.327\n\nRelevant warnings:\n\n```\nsrc\\winnt.rs:2062:5: 2062:34 warning: variant is never used: `UmsThreadInvalidInfoClass`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2062     UmsThreadInvalidInfoClass = 0, \n                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2063:5: 2063:25 warning: variant is never used: `UmsThreadUserContext`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2063     UmsThreadUserContext, \n                      ^~~~~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2064:5: 2064:22 warning: variant is never used: `UmsThreadPriority`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2064     UmsThreadPriority,              // Reserved \n                      ^~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2065:5: 2065:22 warning: variant is never used: `UmsThreadAffinity`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2065     UmsThreadAffinity,              // Reserved \n                      ^~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2066:5: 2066:17 warning: variant is never used: `UmsThreadTeb`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2066     UmsThreadTeb, \n                      ^~~~~~~~~~~~\nsrc\\winnt.rs:2067:5: 2067:25 warning: variant is never used: `UmsThreadIsSuspended`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2067     UmsThreadIsSuspended, \n                      ^~~~~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2068:5: 2068:26 warning: variant is never used: `UmsThreadIsTerminated`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2068     UmsThreadIsTerminated, \n                      ^~~~~~~~~~~~~~~~~~~~~\nsrc\\winnt.rs:2069:5: 2069:26 warning: variant is never used: `UmsThreadMaxInfoClass`, #[warn(dead_code)] on by default \nsrc\\winnt.rs:2069     UmsThreadMaxInfoClass, \n                      ^~~~~~~~~~~~~~~~~~~~~\n```\n\nThe enum is marked pub just like other enums right next to it. There is absolutely no reason for this lint to trigger, yet it is triggering. I don't get it.\n\nLint triggers on\n`rustc 1.3.0-nightly (be23d44a5 2015-07-20) i686-pc-windows-gnu`\n`rustc 1.3.0-nightly (7ea2674c7 2015-07-13) x86_64-pc-windows-msvc`\nLint fails to trigger on\n`rustc 1.1.0 (35ceea399 2015-06-19) x86_64-pc-windows-gnu`\n", "closed_by": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27257/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27257/timeline", "performed_via_github_app": null, "state_reason": "completed"}