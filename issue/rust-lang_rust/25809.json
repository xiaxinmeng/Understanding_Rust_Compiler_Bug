{"url": "https://api.github.com/repos/rust-lang/rust/issues/25809", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25809/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25809/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25809/events", "html_url": "https://github.com/rust-lang/rust/issues/25809", "id": 81193935, "node_id": "MDU6SXNzdWU4MTE5MzkzNQ==", "number": 25809, "title": "LLVM assertion failed", "user": {"login": "jdub", "id": 276281, "node_id": "MDQ6VXNlcjI3NjI4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/276281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdub", "html_url": "https://github.com/jdub", "followers_url": "https://api.github.com/users/jdub/followers", "following_url": "https://api.github.com/users/jdub/following{/other_user}", "gists_url": "https://api.github.com/users/jdub/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdub/subscriptions", "organizations_url": "https://api.github.com/users/jdub/orgs", "repos_url": "https://api.github.com/users/jdub/repos", "events_url": "https://api.github.com/users/jdub/events{/privacy}", "received_events_url": "https://api.github.com/users/jdub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-05-27T00:08:08Z", "updated_at": "2016-06-09T22:26:18Z", "closed_at": "2016-06-09T22:26:18Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've tried to find a minimally reproducible version of this, but... I haven't figured out the right combination of minimal code vs. compiler version and configuration. :smile:\n\nI'm goofing around with kernel stuff, and stumbled on an LLVM assertion failure. [Here's the relevant commit.](https://github.com/jdub/derp/tree/83d1209e8299ec6d304f13f0b552ce015cf48dad)\n\nNote that it _only_ fails with the combination of `--target` (building for i686 on x86_64), `--release` and `-C soft-float` (which I don't think I need right now anyway, but here we are).\n\n```\nLD_LIBRARY_PATH=opt/cross/lib RUSTC=opt/cross/bin/rustc cargo rustc --verbose --release --target=i686-unknown-linux-gnu -- -C no-stack-check -C soft-float\n   Compiling derp v0.0.0 (file:///home/jdub/src/derp/derp)\n     Running `opt/cross/bin/rustc src/lib.rs --crate-name derp --crate-type staticlib -C opt-level=3 -C no-stack-check -C soft-float --out-dir /home/jdub/src/derp/derp/target/i686-unknown-linux-gnu/release --emit=dep-info,link --target i686-unknown-linux-gnu -L dependency=/home/jdub/src/derp/derp/target/i686-unknown-linux-gnu/release -L dependency=/home/jdub/src/derp/derp/target/i686-unknown-linux-gnu/release/deps --extern rlibc=/home/jdub/src/derp/derp/target/i686-unknown-linux-gnu/release/deps/librlibc-3bf401f130e6242e.rlib`\n       Fresh rlibc v0.1.3\nrustc: /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/lib/CodeGen/SelectionDAG/SelectionDAG.cpp:4684: llvm::SDValue llvm::SelectionDAG::getLoad(llvm::ISD::MemIndexedMode, llvm::ISD::LoadExtType, llvm::EVT, llvm::SDLoc, llvm::SDValue, llvm::SDValue, llvm::SDValue, llvm::EVT, llvm::MachineMemOperand*): Assertion `MemVT.getScalarType().bitsLT(VT.getScalarType()) && \"Should only be an extending load, not truncating!\"' failed.\nCould not compile `derp`.\n```\n\nThe rustc version I'm using:\n\n```\n$ LD_LIBRARY_PATH=opt/cross/lib opt/cross/bin/rustc --version\nrustc 1.2.0-nightly (7c4eedc21 2015-05-25) (built 2015-05-25)\n```\n\nPlease let me know if there's anything else I can provide.\n", "closed_by": {"login": "apasel422", "id": 8644784, "node_id": "MDQ6VXNlcjg2NDQ3ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8644784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apasel422", "html_url": "https://github.com/apasel422", "followers_url": "https://api.github.com/users/apasel422/followers", "following_url": "https://api.github.com/users/apasel422/following{/other_user}", "gists_url": "https://api.github.com/users/apasel422/gists{/gist_id}", "starred_url": "https://api.github.com/users/apasel422/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apasel422/subscriptions", "organizations_url": "https://api.github.com/users/apasel422/orgs", "repos_url": "https://api.github.com/users/apasel422/repos", "events_url": "https://api.github.com/users/apasel422/events{/privacy}", "received_events_url": "https://api.github.com/users/apasel422/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25809/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25809/timeline", "performed_via_github_app": null, "state_reason": "completed"}