{"url": "https://api.github.com/repos/rust-lang/rust/issues/105825", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105825/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105825/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105825/events", "html_url": "https://github.com/rust-lang/rust/issues/105825", "id": 1501358423, "node_id": "I_kwDOAAsO6M5ZfOlX", "number": 105825, "title": "`link.exe` path issue in Windows with rust 1.65+", "user": {"login": "ebraraktas", "id": 62459770, "node_id": "MDQ6VXNlcjYyNDU5Nzcw", "avatar_url": "https://avatars.githubusercontent.com/u/62459770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebraraktas", "html_url": "https://github.com/ebraraktas", "followers_url": "https://api.github.com/users/ebraraktas/followers", "following_url": "https://api.github.com/users/ebraraktas/following{/other_user}", "gists_url": "https://api.github.com/users/ebraraktas/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebraraktas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebraraktas/subscriptions", "organizations_url": "https://api.github.com/users/ebraraktas/orgs", "repos_url": "https://api.github.com/users/ebraraktas/repos", "events_url": "https://api.github.com/users/ebraraktas/events{/privacy}", "received_events_url": "https://api.github.com/users/ebraraktas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 2413861294, "node_id": "MDU6TGFiZWwyNDEzODYxMjk0", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-untriaged", "name": "regression-untriaged", "color": "e4008a", "default": false, "description": "Untriaged performance or correctness regression."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-17T12:08:14Z", "updated_at": "2022-12-18T11:26:11Z", "closed_at": "2022-12-17T13:12:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "First of all, I am not sure if this is the correct repository to open this issue, it may be related to `cargo` or `rustup`.\r\n<!--\r\nThank you for filing a regression report! \ud83d\udc1b A regression is something that changed between versions of Rust but was not supposed to.\r\n\r\nPlease provide a short summary of the regression, along with any information you feel is relevant to replicate it.\r\n-->\r\n\r\n### Code\r\n\r\n[This repository](https://github.com/ebraraktas/rust-windows-linker-path-bug) shows how to reproduce the issue. For demo, there is [a simple github action](https://github.com/ebraraktas/rust-windows-linker-path-bug/blob/main/.github/workflows/bug_demo.yaml) which [modifies the `PATH`](https://github.com/ebraraktas/rust-windows-linker-path-bug/blob/ad39239f3d1c0f5e2c8064b0cfdb7d378ff59042/.github/workflows/bug_demo.yaml#L23) and [tries to build `proc-macro2`](https://github.com/ebraraktas/rust-windows-linker-path-bug/blob/ad39239f3d1c0f5e2c8064b0cfdb7d378ff59042/.github/workflows/bug_demo.yaml#L25). \r\n\r\nI expected to see this happen: With rust 1.64 and older, I can build that crate successfully, as one can see from the logs of [this run](https://github.com/ebraraktas/rust-windows-linker-path-bug/actions/runs/3594901994).\r\n\r\nInstead, this happened: With rust 1.65+, rust fails to find correct `link.exe` after the `PATH` modification, as one can see from the logs of [this run](https://github.com/ebraraktas/rust-windows-linker-path-bug/actions/runs/3594916074). I expect it to find the correct `link.exe`, as described in [this comment](https://github.com/rust-lang/rustup/issues/1455#issuecomment-459995379).\r\n\r\n### Version it worked on\r\n\r\nIt most recently worked on: 1.64\r\n\r\n### Version with regression\r\n\r\n1.65\r\n", "closed_by": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105825/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105825/timeline", "performed_via_github_app": null, "state_reason": "completed"}