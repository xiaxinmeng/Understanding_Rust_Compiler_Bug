{"url": "https://api.github.com/repos/rust-lang/rust/issues/101659", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101659/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101659/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101659/events", "html_url": "https://github.com/rust-lang/rust/issues/101659", "id": 1368658325, "node_id": "I_kwDOAAsO6M5RlBGV", "number": 101659, "title": "Extend macro invocation without the `!` typo help suggestion for all user-defined macros", "user": {"login": "Rageking8", "id": 106309953, "node_id": "U_kgDOBlYpQQ", "avatar_url": "https://avatars.githubusercontent.com/u/106309953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rageking8", "html_url": "https://github.com/Rageking8", "followers_url": "https://api.github.com/users/Rageking8/followers", "following_url": "https://api.github.com/users/Rageking8/following{/other_user}", "gists_url": "https://api.github.com/users/Rageking8/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rageking8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rageking8/subscriptions", "organizations_url": "https://api.github.com/users/Rageking8/orgs", "repos_url": "https://api.github.com/users/Rageking8/repos", "events_url": "https://api.github.com/users/Rageking8/events{/privacy}", "received_events_url": "https://api.github.com/users/Rageking8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-09-10T15:45:02Z", "updated_at": "2022-11-10T10:24:37Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\nalong with any information you feel relevant to replicating the bug.\n\nIf you cannot produce a minimal reproduction case (something that would work in\nisolation), please provide the steps or even link to a repository that causes\nthe problematic output to occur.\n-->\n\nGiven the following code: [link](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=d7c319a7f8606ba49e50bfab044d86a6)\n\n```rust\n#![allow(unused)]\nmacro_rules! test {\n    () => { 123 }\n}\n\nfn main() {\n    let x = test();\n}\n```\n\nThe current output is:\n\n```\nCompiling playground v0.0.1 (/playground)\nerror[E0423]: expected function, found attribute macro `test`\n --> src/main.rs:7:13\n  |\n7 |     let x = test();\n  |             ^^^^ not a function\n\nFor more information about this error, try `rustc --explain E0423`.\nerror: could not compile `playground` due to previous error\n```\n\n<!-- The following is not always necessary. -->\nIdeally the output should contain a help note which suggests adding a `!` for macro invocation.\n\nNote: if the above code snippet is changed slightly to (added `_` prefix to the macro name and invalid invocation name): [link](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=1c6f4b964f1a5c5eb638377df8fdc957)\n```rust\n#![allow(unused)]\nmacro_rules! _test {\n    () => { 123 }\n}\n\nfn main() {\n    let x = _test();\n}\n```\nThe current output is:\n```\nCompiling playground v0.0.1 (/playground)\nerror[E0425]: cannot find function `_test` in this scope\n  --> src/main.rs:16:13\n   |\n16 |     let x = _test();\n   |             ^^^^^ not found in this scope\n\nFor more information about this error, try `rustc --explain E0425`.\nerror: could not compile `playground` due to previous error\n```\nNot sure if the different error message that arises from a slight change in the code is intentional or is even relevant in this issue's context. If you know why this is the case, please let me know. (Note: if this part is nonsensical please ignore it, I am very new to rust). Thanks a lot.\n<!--\nIf the problem is not self-explanatory, please provide a rationale for the\nchange.\n-->\n\n<!--\nIf dramatically different output is caused by small changes, consider also\nadding them here.\n\nIf you're using the stable version of the compiler, you should also check if the\nbug also exists in the beta or nightly versions. The output might also be\ndifferent depending on the Edition.\n-->\n\n\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":null}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101659/timeline", "performed_via_github_app": null, "state_reason": null}