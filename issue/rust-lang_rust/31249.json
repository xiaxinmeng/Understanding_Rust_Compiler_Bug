{"url": "https://api.github.com/repos/rust-lang/rust/issues/31249", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31249/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31249/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31249/events", "html_url": "https://github.com/rust-lang/rust/issues/31249", "id": 129307542, "node_id": "MDU6SXNzdWUxMjkzMDc1NDI=", "number": 31249, "title": "Wrapping code in `fn main` too much in the book's code examples", "user": {"login": "carols10cents", "id": 193874, "node_id": "MDQ6VXNlcjE5Mzg3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/193874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carols10cents", "html_url": "https://github.com/carols10cents", "followers_url": "https://api.github.com/users/carols10cents/followers", "following_url": "https://api.github.com/users/carols10cents/following{/other_user}", "gists_url": "https://api.github.com/users/carols10cents/gists{/gist_id}", "starred_url": "https://api.github.com/users/carols10cents/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carols10cents/subscriptions", "organizations_url": "https://api.github.com/users/carols10cents/orgs", "repos_url": "https://api.github.com/users/carols10cents/repos", "events_url": "https://api.github.com/users/carols10cents/events{/privacy}", "received_events_url": "https://api.github.com/users/carols10cents/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-01-28T00:03:41Z", "updated_at": "2016-01-30T14:50:53Z", "closed_at": "2016-01-30T14:50:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've only found this to be a problem in the [testing section](https://doc.rust-lang.org/book/testing.html) but there could be more.\n\nIn the code example that follows \"Let's make our test fail:\", if you click the \"Run\" button to open that example in the playground, running it exits successfully when it's supposed to fail because the test gets wrapped in `fn main`:\n\n<img width=\"775\" alt=\"screen shot 2016-01-27 at 6 53 20 pm\" src=\"https://cloud.githubusercontent.com/assets/193874/12632706/033c5500-c528-11e5-9c69-331b9c559ef2.png\">\n\nI'm not sure exactly where the `fn main` is being added, but if I inspect the HTML of the page there's a `<span class=\"rusttest\">` that contains `fn main`:\n\n<img width=\"1273\" alt=\"screen shot 2016-01-27 at 6 52 39 pm\" src=\"https://cloud.githubusercontent.com/assets/193874/12632750/56a84a6e-c528-11e5-9e82-b647079a12ef.png\">\n\nIs there a way to opt out of the main wrapping in this case?\n\nI know @steveklabnik is redoing the book; is integration with play.rust-lang.org going to be a part of the new book too, or is this irrelevant? Is this something that's just part of TRPL or is it part of rustbook that other books might use?\n\nI'm going to go research the answers to these questions but wanted to post this in the meantime :)\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31249/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31249/timeline", "performed_via_github_app": null, "state_reason": "completed"}