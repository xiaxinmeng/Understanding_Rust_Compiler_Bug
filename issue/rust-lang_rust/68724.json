{"url": "https://api.github.com/repos/rust-lang/rust/issues/68724", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/68724/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/68724/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/68724/events", "html_url": "https://github.com/rust-lang/rust/issues/68724", "id": 558516281, "node_id": "MDU6SXNzdWU1NTg1MTYyODE=", "number": 68724, "title": "type annotations required when working with default type parameters", "user": {"login": "Luro02", "id": 24826124, "node_id": "MDQ6VXNlcjI0ODI2MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/24826124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Luro02", "html_url": "https://github.com/Luro02", "followers_url": "https://api.github.com/users/Luro02/followers", "following_url": "https://api.github.com/users/Luro02/following{/other_user}", "gists_url": "https://api.github.com/users/Luro02/gists{/gist_id}", "starred_url": "https://api.github.com/users/Luro02/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Luro02/subscriptions", "organizations_url": "https://api.github.com/users/Luro02/orgs", "repos_url": "https://api.github.com/users/Luro02/repos", "events_url": "https://api.github.com/users/Luro02/events{/privacy}", "received_events_url": "https://api.github.com/users/Luro02/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-02-01T09:56:18Z", "updated_at": "2020-02-01T09:56:49Z", "closed_at": "2020-02-01T09:56:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "While working with default type parameters I got this error\r\n\r\n```\r\nerror[E0282]: type annotations needed for `Example<&str, P>`\r\n --> src/main.rs:9:19\r\n  |\r\n9 |     let example = Example {\r\n  |         -------   ^^^^^^^ cannot infer type for type parameter `P`\r\n  |         |\r\n  |         consider giving `example` the explicit type `Example<&str, P>`, where the type parameter `P` is specified\r\n```\r\n\r\n```rust\r\nuse core::marker::PhantomData;\r\n\r\nstruct Example<T, P = ()> {\r\n    value: T,\r\n    _p: PhantomData<P>,\r\n}\r\n\r\nfn main() {\r\n    let example = Example {\r\n        value: \"hi\",\r\n        _p: PhantomData,\r\n    };\r\n}\r\n```\r\n[playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&code=use%20core%3A%3Amarker%3A%3APhantomData%3B%0A%0Astruct%20Example%3CT%2C%20P%20%3D%20()%3E%20%7B%0A%20%20%20%20value%3A%20T%2C%0A%20%20%20%20_p%3A%20PhantomData%3CP%3E%2C%0A%7D%0A%0Afn%20main()%20%7B%0A%20%20%20%20let%20example%20%3D%20Example%20%7B%0A%20%20%20%20%20%20%20%20value%3A%20%22hi%22%2C%0A%20%20%20%20%20%20%20%20_p%3A%20PhantomData%2C%0A%20%20%20%20%7D%3B%0A%7D)\r\n\r\nThis can be solved by changing\r\n```rust\r\nlet example = Example {\r\n    value: \"hi\",\r\n    _p: PhantomData,\r\n};\r\n```\r\n\r\nto\r\n\r\n```rust\r\nlet example = Example::<_>{\r\n    value: \"hi\",\r\n    _p: PhantomData,\r\n};\r\n```\r\n\r\nI think the compiler should be able to infer the type, based on the default type and it should not require the turbo fish syntax? This part of the RFC would not hold true https://github.com/rust-lang/rfcs/blob/master/text/0213-defaulted-type-params.md#extending-types-without-breaking-clients\r\n\r\nThis might be a duplicate of #27336", "closed_by": {"login": "Luro02", "id": 24826124, "node_id": "MDQ6VXNlcjI0ODI2MTI0", "avatar_url": "https://avatars.githubusercontent.com/u/24826124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Luro02", "html_url": "https://github.com/Luro02", "followers_url": "https://api.github.com/users/Luro02/followers", "following_url": "https://api.github.com/users/Luro02/following{/other_user}", "gists_url": "https://api.github.com/users/Luro02/gists{/gist_id}", "starred_url": "https://api.github.com/users/Luro02/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Luro02/subscriptions", "organizations_url": "https://api.github.com/users/Luro02/orgs", "repos_url": "https://api.github.com/users/Luro02/repos", "events_url": "https://api.github.com/users/Luro02/events{/privacy}", "received_events_url": "https://api.github.com/users/Luro02/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/68724/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/68724/timeline", "performed_via_github_app": null, "state_reason": "completed"}