{"url": "https://api.github.com/repos/rust-lang/rust/issues/5085", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/5085/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/5085/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/5085/events", "html_url": "https://github.com/rust-lang/rust/issues/5085", "id": 11281435, "node_id": "MDU6SXNzdWUxMTI4MTQzNQ==", "number": 5085, "title": "Update rust.md et al with proper use of newly required explicit `self` parameter", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/10", "html_url": "https://github.com/rust-lang/rust/milestone/10", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/10/labels", "id": 234060, "node_id": "MDk6TWlsZXN0b25lMjM0MDYw", "number": 10, "title": "0.7", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 110, "state": "closed", "created_at": "2012-12-22T22:31:59Z", "updated_at": "2013-07-04T01:21:16Z", "due_on": "2013-06-30T07:00:00Z", "closed_at": "2013-07-04T01:21:16Z"}, "comments": 3, "created_at": "2013-02-22T10:55:52Z", "updated_at": "2013-04-29T23:35:08Z", "closed_at": "2013-04-29T23:35:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While trying to explore how the rust trait system deals with method name collisions [^1], I had some difficulty even getting started with simple examples.  So I decided to consult `rust.md`.\n\nHowever, transcribing the current examples out of `rust.md` and into a new source file does not work \"out of the box\", because the examples use legacy syntax and cause warnings to be issued [^2].  When I attempted to fix the transcribed examples to get rid of the warnings, more problems arose.\n\nPartial list of issues in current trait examples:\n1. The first `trait Shape` example should have explicit `self` parameters.\n2. The `draw_twice` example complains due to use of moved value, `sh`\n3. The `impl Shape for Circle` example needs an explicit self\n4. The Object types `trait Printable` example needs an example `self` parameter [^3]\n\netc\n\n---\n\nI argue that it is important to fix these examples, since if the examples are not corrected, it is ambiguous to the reader what format a self parameter is supposed to take.  E.g. I initially attempted to correct the problem in this manner (adding a named parameter for the self argument, by analogy with how one puts in names for other method arguments declared on the trait):\n\n```\ntrait Shape           { fn draw(     self,    Surface); }\nimpl Shape for Circle { fn draw(this:self, s: Surface) { do_draw_circle(s, self); } }\n```\n\nbut that (obviously?) is not the correct fix, and the compiler complains:\n\n```\ntrait-play.rs:29:37: 29:41 error: use of undeclared type name `self`\ntrait-play.rs:29 impl Shape for Circle { fn draw(this:self, s: Surface) { do_draw_circle(s, self); } }\n                                                      ^~~~\nerror: aborting due to previous error\n```\n\n(I am aware that the correct fix is to leave the name off of the `self` parameter; the point is that the documentation needs to reflect this.)\n## Footnotes\n\n[^1]: I infer method name collisions to be the motivation for using the syntax `traitname::f()` for static method invocation, and not `typeparameter::f()`; but I wanted to test that name collisions are indeed resolved in some manner.\n\n[^2]:  I assume we must be compiling the extracted code samples in some sort of legacy compiler mode?  (Maybe these examples should be forcibly tested in a vanilla mode.)  Or maybe the issue is that we ignore warnings when compiling the documentation?  That should be something one has to opt-into in a written example, though, if possible.\n\n[^3]: Worse, after adding \"the obvious\" `self` parameter, the code no longer compiles:\n\n```\ntrait Printable {\n  fn to_str(self) -> ~str;\n}\n\nimpl Printable for int {\n  fn to_str(self) -> ~str { int::to_str(self) }\n}\n```\n\nyields:\n\n```\nerror: internal compiler error: methods with by-value self should not be called on objects\n```\n", "closed_by": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/5085/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/5085/timeline", "performed_via_github_app": null, "state_reason": "completed"}