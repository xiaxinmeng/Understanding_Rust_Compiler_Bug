{"url": "https://api.github.com/repos/rust-lang/rust/issues/56942", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56942/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56942/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56942/events", "html_url": "https://github.com/rust-lang/rust/issues/56942", "id": 391992905, "node_id": "MDU6SXNzdWUzOTE5OTI5MDU=", "number": 56942, "title": "Rustc segfault", "user": {"login": "jethrogb", "id": 1132307, "node_id": "MDQ6VXNlcjExMzIzMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1132307?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jethrogb", "html_url": "https://github.com/jethrogb", "followers_url": "https://api.github.com/users/jethrogb/followers", "following_url": "https://api.github.com/users/jethrogb/following{/other_user}", "gists_url": "https://api.github.com/users/jethrogb/gists{/gist_id}", "starred_url": "https://api.github.com/users/jethrogb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jethrogb/subscriptions", "organizations_url": "https://api.github.com/users/jethrogb/orgs", "repos_url": "https://api.github.com/users/jethrogb/repos", "events_url": "https://api.github.com/users/jethrogb/events{/privacy}", "received_events_url": "https://api.github.com/users/jethrogb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-12-18T04:34:30Z", "updated_at": "2018-12-19T15:23:37Z", "closed_at": "2018-12-19T15:23:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Commit 9fe5cb5342244a716055fa0162e795deabd4985c\r\n```\r\n\"rustc\" received signal SIGSEGV, Segmentation fault.\r\n\r\n#0  0x00007fffecee0079 in matchVectorShuffleWithSHUFPD(llvm::MVT, llvm::SDValue&, llvm::SDValue&, unsigned int&, llvm::ArrayRef<int>) [clone .isra.591] ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#1  0x00007fffecee0077 in matchVectorShuffleWithSHUFPD(llvm::MVT, llvm::SDValue&, llvm::SDValue&, unsigned int&, llvm::ArrayRef<int>) [clone .isra.591] ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#2  0x00007fffecee0077 in matchVectorShuffleWithSHUFPD(llvm::MVT, llvm::SDValue&, llvm::SDValue&, unsigned int&, llvm::ArrayRef<int>) [clone .isra.591] ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#3  0x00007fffed00cec7 in llvm::X86TTIImpl::getShuffleCost(llvm::TargetTransformInfo::ShuffleKind, llvm::Type*, int, llvm::Type*) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#4  0x00007fffed00fd62 in llvm::X86TTIImpl::getArithmeticReductionCost(unsigned int, llvm::Type*, bool) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#5  0x00007fffed7a0216 in tryToVectorizeHorReductionOrInstOperands(llvm::PHINode*, llvm::Instruction*, llvm::BasicBlock*, llvm::slpvectorizer::BoUpSLP&, llvm::TargetTransformInfo*, llvm::function_ref<bool (llvm::Instruction*, llvm::slpvectorizer::BoUpSLP&)>) [clone .constprop.1274] ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#6  0x00007fffed7a0cba in llvm::SLPVectorizerPass::vectorizeRootInstruction(llvm::PHINode*, llvm::Value*, llvm::BasicBlock*, llvm::slpvectorizer::BoUpSLP&, llvm::TargetTransformInfo*) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#7  0x00007fffed7a1bd1 in llvm::SLPVectorizerPass::vectorizeChainsInBlock(llvm::BasicBlock*, llvm::slpvectorizer::BoUpSLP&) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#8  0x00007fffed7a2835 in llvm::SLPVectorizerPass::runImpl(llvm::Function&, llvm::ScalarEvolution*, llvm::TargetTransformInfo*, llvm::TargetLibraryInfo*, llvm::AAResults*, llvm::LoopInfo*, llvm::DominatorTree*, llvm::AssumptionCache*, llvm::DemandedBits*, llvm::OptimizationRemarkEmitter*) [clone .part.1249] ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#9  0x00007fffed7a3d69 in (anonymous namespace)::SLPVectorizer::runOnFunction(llvm::Function&) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#10 0x00007fffee924090 in llvm::FPPassManager::runOnFunction(llvm::Function&) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#11 0x00007fffee924253 in llvm::FPPassManager::runOnModule(llvm::Module&) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#12 0x00007fffee924fa0 in llvm::legacy::PassManagerImpl::run(llvm::Module&) ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#13 0x00007fffee8a8a79 in LLVMRunPassManager ()\r\n   from .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so\r\n#14 0x00007fffecca8f16 in rustc_codegen_llvm::back::lto::run_pass_manager::h9f668e9524da09a0 (cgcx=0x7fffe9aa22c0, module=0x7fffe9aa1ac0, config=0x55555e5a5670, thin=<optimized out>)\r\n    at src/librustc_codegen_llvm/back/lto.rs:573\r\n#15 0x00007fffecca96b1 in rustc_codegen_llvm::back::lto::optimize_thin_module::h3c6d4e91de0f74ec (thin_module=0x7fffe9aa2018, cgcx=0x7fffe9aa22c0, timeline=0x7fffe9aa2160)\r\n    at src/librustc_codegen_llvm/back/lto.rs:786\r\n#16 0x00007fffecdc3e75 in _$LT$rustc_codegen_ssa..back..lto..LtoModuleCodegen$LT$B$GT$$GT$::optimize::h4d6398ed46f7a71c () at src/librustc_codegen_llvm/lib.rs:208\r\n#17 0x00007fffeccc1b3d in rustc_codegen_ssa::back::write::execute_lto_work_item::h07eadc717511bec0 (cgcx=<optimized out>, module_config=0x55555e5a5670, timeline=<optimized out>, module=<optimized out>)\r\n    at .../rust/src/librustc_codegen_ssa/back/write.rs:854\r\n#18 rustc_codegen_ssa::back::write::execute_work_item::h8527157494ed5c9e (cgcx=0x7fffe9aa22c0, \r\n    work_item=<unknown type in .../rust/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-linux-gnu/codegen-backends/librustc_codegen_llvm-llvm.so, CU 0x237ec8, DIE 0x284a58>, timeline=0x7fffe9aa2160) at .../rust/src/librustc_codegen_ssa/back/write.rs:702\r\n#19 0x00007fffecc87f98 in rustc_codegen_ssa::back::write::spawn_work::_$u7b$$u7b$closure$u7d$$u7d$::h6f4b9cddacb48edb ()\r\n    at .../rust/src/librustc_codegen_ssa/back/write.rs:1562\r\n#20 std::sys_common::backtrace::__rust_begin_short_backtrace::hea0602731662b0d7 (f=...) at .../rust/src/libstd/sys_common/backtrace.rs:136\r\n#21 0x00007fffecc88ca6 in std::thread::Builder::spawn_unchecked::_$u7b$$u7b$closure$u7d$$u7d$::_$u7b$$u7b$closure$u7d$$u7d$::h04efdf50d8efef73 ()\r\n    at .../rust/src/libstd/thread/mod.rs:479\r\n#22 _$LT$std..panic..AssertUnwindSafe$LT$F$GT$$u20$as$u20$core..ops..function..FnOnce$LT$$LP$$RP$$GT$$GT$::call_once::h308211923a1f5e58 (self=..., _args=<optimized out>)\r\n    at .../rust/src/libstd/panic.rs:319\r\n#23 std::panicking::try::do_call::h7fd3abe3303a43ff (data=<optimized out>) at .../rust/src/libstd/panicking.rs:306\r\n#24 0x00007ffff76d6a9a in __rust_maybe_catch_panic (f=0x4, data=0x7fffe9a9fe1f \"_\\310\\026\\031\\260\\377\\177\", data_ptr=0x7fffe9aa2658, vtable_ptr=0x7fffe9aa2660) at src/libpanic_unwind/lib.rs:102\r\n#25 0x00007fffecc88b2a in std::panicking::try::h2906051b5766eea8 (f=...) at .../rust/src/libstd/panicking.rs:285\r\n#26 0x00007fffecdbdae4 in std::panic::catch_unwind::h2e17efba275aa578 (f=...) at .../rust/src/libstd/panic.rs:398\r\n#27 std::thread::Builder::spawn_unchecked::_$u7b$$u7b$closure$u7d$$u7d$::h57e25d37655272ee () at .../rust/src/libstd/thread/mod.rs:478\r\n#28 _$LT$F$u20$as$u20$alloc..boxed..FnBox$LT$A$GT$$GT$::call_box::hff92c3a4cf934e48 (self=0x7fffdc171be0, args=<optimized out>) at .../rust/src/liballoc/boxed.rs:673\r\n#29 0x00007ffff76cc21e in _$LT$alloc..boxed..Box$LT$$LP$dyn$u20$alloc..boxed..FnBox$LT$A$C$$u20$Output$u3d$R$GT$$u20$$u2b$$u20$$u27$a$RP$$GT$$u20$as$u20$core..ops..function..FnOnce$LT$A$GT$$GT$::call_once::h504cb5f34d4708be (self=..., args=<optimized out>) at .../rust/src/liballoc/boxed.rs:683\r\n#30 std::sys_common::thread::start_thread::h4c4e79f8fe58aba3 (main=0x7fffdc116670 \"\\340\\033\\027\\334\\377\\177\") at src/libstd/sys_common/thread.rs:24\r\n#31 0x00007ffff76c3f16 in std::sys::unix::thread::Thread::new::thread_start::h6de2632ac055ee80 (main=0x7fffe9a9fe1f) at src/libstd/sys/unix/thread.rs:91\r\n#32 0x00007ffff12a66ba in start_thread (arg=0x7fffe9aa3700) at pthread_create.c:333\r\n#33 0x00007ffff737541d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n```\r\n\r\nStage 2 build finishes fine, this failure happens when building `std` for `x86_64-fortanix-unknown-sgx` with `xargo`.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56942/timeline", "performed_via_github_app": null, "state_reason": "completed"}