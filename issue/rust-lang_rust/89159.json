{"url": "https://api.github.com/repos/rust-lang/rust/issues/89159", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/89159/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/89159/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/89159/events", "html_url": "https://github.com/rust-lang/rust/issues/89159", "id": 1003276540, "node_id": "I_kwDOAAsO6M47zMj8", "number": 89159, "title": "\"struct defined here\" doesn't show where the struct is defined", "user": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-21T21:02:10Z", "updated_at": "2021-09-29T13:27:05Z", "closed_at": "2021-09-29T13:27:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nWhen a `struct` defined outside of the current crate is used with not enough generics, the note in the error says \"struct defined here\" but doesn't show where.\r\n\r\nGiven the following [code](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=561e2845762fff0f305fcbdab454916d): <!-- Please provide a link to play.rust-lang.org -->\r\n\r\n```rust\r\nstruct S<T>(T);\r\n\r\npub fn f(_: Box, _: S)  {}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0107]: missing generics for struct `Box`\r\n   --> src/lib.rs:3:13\r\n    |\r\n3   | pub fn f(_: Box, _: S)  {}\r\n    |             ^^^ expected at least 1 generic argument\r\n    |\r\nnote: struct defined here, with at least 1 generic parameter: `T`\r\nhelp: add missing generic argument\r\n    |\r\n3   | pub fn f(_: Box<T>, _: S)  {}\r\n    |             ~~~~~~\r\n\r\nerror[E0107]: missing generics for struct `S`\r\n --> src/lib.rs:3:21\r\n  |\r\n3 | pub fn f(_: Box, _: S)  {}\r\n  |                     ^ expected 1 generic argument\r\n  |\r\nnote: struct defined here, with 1 generic parameter: `T`\r\n --> src/lib.rs:1:8\r\n  |\r\n1 | struct S<T>(T);\r\n  |        ^ -\r\nhelp: add missing generic argument\r\n  |\r\n3 | pub fn f(_: Box, _: S<T>)  {}\r\n  |                     ~~~~\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally, the output should look like this:\r\n\r\n```\r\nerror[E0107]: missing generics for struct `Box`\r\n   --> ./test.rs:3:13\r\n    |\r\n3   | pub fn f(_: Box, _: S) {}\r\n    |             ^^^ expected at least 1 generic argument\r\n    |\r\nnote: struct defined here, with at least 1 generic parameter: `T`\r\n   --> /.../repos/rust/library/alloc/src/boxed.rs:172:12\r\n    |\r\n172 | pub struct Box<\r\n    |            ^^^\r\n173 |     T: ?Sized,\r\n    |     -\r\nhelp: add missing generic argument\r\n    |\r\n3   | pub fn f(_: Box<T>, _: S) {}\r\n    |             ~~~~~~\r\n\r\n# error for S unchanged\r\n```\r\n\r\n<!--\r\nIf the problem is not self-explanatory, please provide a rationale for the\r\nchange.\r\n-->\r\n\r\n<!--\r\nIf dramatically different output is caused by small changes, consider also\r\nadding them here.\r\n\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions. The output might also be\r\ndifferent depending on the Edition.\r\n-->\r\n\r\n---\r\n\r\nI'm willing to work on this, though I don't have a clue why this is happening (yet). An interesting thing to notice is that the current box error is actually indented more, I suppose it's because `Box`  is located on a 3 digit line (172, currently). So it's like that part of the error is somewhere, but it's lost?", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/89159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/89159/timeline", "performed_via_github_app": null, "state_reason": "completed"}