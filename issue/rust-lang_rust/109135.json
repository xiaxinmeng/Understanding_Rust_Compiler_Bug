{"url": "https://api.github.com/repos/rust-lang/cargo/issues/11852", "repository_url": "https://api.github.com/repos/rust-lang/cargo", "labels_url": "https://api.github.com/repos/rust-lang/cargo/issues/11852/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/cargo/issues/11852/comments", "events_url": "https://api.github.com/repos/rust-lang/cargo/issues/11852/events", "html_url": "https://github.com/rust-lang/cargo/issues/11852", "id": 1624184530, "node_id": "I_kwDOAQnScc5gzxbS", "number": 11852, "title": "Working directory different between cargo run and test", "user": {"login": "dkorsunsky", "id": 89079827, "node_id": "MDQ6VXNlcjg5MDc5ODI3", "avatar_url": "https://avatars.githubusercontent.com/u/89079827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkorsunsky", "html_url": "https://github.com/dkorsunsky", "followers_url": "https://api.github.com/users/dkorsunsky/followers", "following_url": "https://api.github.com/users/dkorsunsky/following{/other_user}", "gists_url": "https://api.github.com/users/dkorsunsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkorsunsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkorsunsky/subscriptions", "organizations_url": "https://api.github.com/users/dkorsunsky/orgs", "repos_url": "https://api.github.com/users/dkorsunsky/repos", "events_url": "https://api.github.com/users/dkorsunsky/events{/privacy}", "received_events_url": "https://api.github.com/users/dkorsunsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 137469209, "node_id": "MDU6TGFiZWwxMzc0NjkyMDk=", "url": "https://api.github.com/repos/rust-lang/cargo/labels/A-documenting-cargo-itself", "name": "A-documenting-cargo-itself", "color": "fbca04", "default": false, "description": "Area: Cargo's documentation"}], "state": "closed", "locked": false, "assignee": {"login": "jofas", "id": 20799702, "node_id": "MDQ6VXNlcjIwNzk5NzAy", "avatar_url": "https://avatars.githubusercontent.com/u/20799702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jofas", "html_url": "https://github.com/jofas", "followers_url": "https://api.github.com/users/jofas/followers", "following_url": "https://api.github.com/users/jofas/following{/other_user}", "gists_url": "https://api.github.com/users/jofas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jofas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jofas/subscriptions", "organizations_url": "https://api.github.com/users/jofas/orgs", "repos_url": "https://api.github.com/users/jofas/repos", "events_url": "https://api.github.com/users/jofas/events{/privacy}", "received_events_url": "https://api.github.com/users/jofas/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jofas", "id": 20799702, "node_id": "MDQ6VXNlcjIwNzk5NzAy", "avatar_url": "https://avatars.githubusercontent.com/u/20799702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jofas", "html_url": "https://github.com/jofas", "followers_url": "https://api.github.com/users/jofas/followers", "following_url": "https://api.github.com/users/jofas/following{/other_user}", "gists_url": "https://api.github.com/users/jofas/gists{/gist_id}", "starred_url": "https://api.github.com/users/jofas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jofas/subscriptions", "organizations_url": "https://api.github.com/users/jofas/orgs", "repos_url": "https://api.github.com/users/jofas/repos", "events_url": "https://api.github.com/users/jofas/events{/privacy}", "received_events_url": "https://api.github.com/users/jofas/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2023-03-14T19:11:54Z", "updated_at": "2023-03-29T09:15:21Z", "closed_at": "2023-03-29T09:15:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am not sure whether this should be classified as a bug...\n\nWhen I use cargo run from my workspace root directory, my working directory seems to always point to the manifest dir for the top-level workspace.  However, when I use cargo test from the same location, my working directory will be set to the manifest dir of the crate, whose tests are being run at the time.\n\nThis is really counter-intuitive behaviour, IMHO.  \n\nShould this not be consistent in all cases between cargo run and cargo test?  Specifically, if I cargo run/test from the workspace root, it should set working directory to the workspace manifest dir.  If I cargo run/test from the specific crate directory (or maybe even with the -p option), the working directory should be set to the manifest dir for that crate.\n\nIncidentally, using the --manifest-path option doesn't seem to affect any of the above.\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"jofas\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/cargo/issues/11852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/cargo/issues/11852/timeline", "performed_via_github_app": null, "state_reason": "completed"}