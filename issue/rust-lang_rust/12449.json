{"url": "https://api.github.com/repos/rust-lang/rust/issues/12449", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/12449/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/12449/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/12449/events", "html_url": "https://github.com/rust-lang/rust/issues/12449", "id": 28065149, "node_id": "MDU6SXNzdWUyODA2NTE0OQ==", "number": 12449, "title": "Possible bloat from over-use of default methods on trait objects", "user": {"login": "zkamsler", "id": 944662, "node_id": "MDQ6VXNlcjk0NDY2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/944662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zkamsler", "html_url": "https://github.com/zkamsler", "followers_url": "https://api.github.com/users/zkamsler/followers", "following_url": "https://api.github.com/users/zkamsler/following{/other_user}", "gists_url": "https://api.github.com/users/zkamsler/gists{/gist_id}", "starred_url": "https://api.github.com/users/zkamsler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zkamsler/subscriptions", "organizations_url": "https://api.github.com/users/zkamsler/orgs", "repos_url": "https://api.github.com/users/zkamsler/repos", "events_url": "https://api.github.com/users/zkamsler/events{/privacy}", "received_events_url": "https://api.github.com/users/zkamsler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-02-21T19:13:35Z", "updated_at": "2015-03-02T17:42:45Z", "closed_at": "2015-03-02T17:42:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am not sure if this is an issue as such, but I figured that I ought to mention it.\n\nI don't know the current linker behavior, but the best case is that all implementations of default methods for types that are coerced to trait objects must be generated and cannot be stripped because they are referenced by their vtable. As a result, there are a may be a number of method implementations that cannot be removed even if they do not happen to be used.\n\nThis is most notable for the `io::Writer` and `io::Reader` traits, which are often used behind trait objects and have a number of default methods. `Writer` has 28 default methods (not including `flush` and `by_ref`), which is up to 513 methods over 19 implementations. `Reader` has 31 default methods (not including `by_ref` and `bytes`), which is up to 620 methods over 20 implementations.\n\nI do not mean to suggest that default methods should not be used for traits that are often uses as trait objects, but merely that some care should be used when adding them. In some cases things like such as wrapper structs, or the unpopular trait-just-to-add-methods may be appropriate.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/12449/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/12449/timeline", "performed_via_github_app": null, "state_reason": "completed"}