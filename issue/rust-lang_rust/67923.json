{"url": "https://api.github.com/repos/rust-lang/rust/issues/67923", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/67923/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/67923/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/67923/events", "html_url": "https://github.com/rust-lang/rust/issues/67923", "id": 545653449, "node_id": "MDU6SXNzdWU1NDU2NTM0NDk=", "number": 67923, "title": "compile hello-world error,cannot open input file 'userenv.lib', which only in windows msvc x64  toolchain?", "user": {"login": "woodgear", "id": 16863223, "node_id": "MDQ6VXNlcjE2ODYzMjIz", "avatar_url": "https://avatars.githubusercontent.com/u/16863223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/woodgear", "html_url": "https://github.com/woodgear", "followers_url": "https://api.github.com/users/woodgear/followers", "following_url": "https://api.github.com/users/woodgear/following{/other_user}", "gists_url": "https://api.github.com/users/woodgear/gists{/gist_id}", "starred_url": "https://api.github.com/users/woodgear/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/woodgear/subscriptions", "organizations_url": "https://api.github.com/users/woodgear/orgs", "repos_url": "https://api.github.com/users/woodgear/repos", "events_url": "https://api.github.com/users/woodgear/events{/privacy}", "received_events_url": "https://api.github.com/users/woodgear/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-06T10:27:24Z", "updated_at": "2020-01-13T05:01:32Z", "closed_at": "2020-01-13T05:01:32Z", "author_association": "NONE", "active_lock_reason": null, "body": "when i run hello-world in stable-x86_64-pc-windows-msvc,it report error as below\r\n```bat\r\n \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.16.27023\\\\bin\\\\HostX64\\\\x64\\\\link.exe\" \"/NOLOGO\" \"/NXCOMPAT\" \"/LIBPATH:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.15utgk64b8nt1ubj.rcgu.o\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.2j6uxpld6oib034n.rcgu.o\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.3murdtey7cpdkd6p.rcgu.o\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.40lswzy8eawu2yqz.rcgu.o\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.tebnbovbklttqvw.rcgu.o\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.ue5uqjw6bhetr7z.rcgu.o\" \"/OUT:C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.exe\" \"C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\\\\hello.3zhlnuoob0w4xncc.rcgu.o\" \"/OPT:REF,NOICF\" \"/DEBUG\" \"/NATVIS:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\etc\\\\intrinsic.natvis\" \"/NATVIS:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\etc\\\\liballoc.natvis\" \"/NATVIS:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\etc\\\\libcore.natvis\" \"/LIBPATH:C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\" \"/LIBPATH:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libstd-5b22050550251134.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libpanic_unwind-260ca2d6289626eb.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libhashbrown-b5ac017a6340c197.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\librustc_std_workspace_alloc-ba9f1079b4500221.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libbacktrace-fe3d010475c87007.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\librustc_demangle-79afb35175c2f4c1.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libunwind-0c31b607576e7b75.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcfg_if-9e27e09e9ac1f8a4.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\liblibc-e851a9fa44503f61.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\liballoc-526ee5f5144a89c1.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\librustc_std_workspace_core-51cfba15e98dcf36.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcore-ec0c894b064dd991.rlib\" \"C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\\\\libcompiler_builtins-71d42338e4e8306c.rlib\" \"advapi32.lib\" \"ws2_32.lib\" \"userenv.lib\" \"msvcrt.lib\"\r\n  = note: LINK : fatal error LNK1181: cannot open input file 'userenv.lib'\r\n```\r\ni notes that those LIBPATH are point to \r\n```bat\r\n/LIBPATH:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\"\r\n/LIBPATH:C:\\\\Users\\\\developer\\\\Desktop\\\\hello\\\\target\\\\debug\\\\deps\" \"\r\n/LIBPATH:C:\\\\Users\\\\developer\\\\.rustup\\\\toolchains\\\\stable-x86_64-pc-windows-msvc\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\"\r\n```\r\nbut no windows sdk path\r\nso i add  windows sdk libpath manually\r\n```bat\r\nrustc -L \"C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.16299.0\\um\\x64\" src\\main.rs \r\n```\r\nand that works fine.\r\ni also notes that if i switch to  stable-i686-pc-windows-msvc,and it works fine too.\r\nso how should i fix those?\r\nrust version \r\n```bat\r\ninstalled toolchains\r\n--------------------\r\n\r\nstable-i686-pc-windows-msvc (default)\r\nstable-x86_64-pc-windows-msvc\r\n\r\nactive toolchain\r\n----------------\r\n\r\nstable-i686-pc-windows-msvc (default)\r\nrustc 1.40.0 (73528e339 2019-12-16)\r\n```\r\nwindows version\r\n```bat\r\nwindows 10 64 v1809\r\n```\r\nvisual studio  \r\n```\r\n{\r\n  \"version\": \"1.0\",\r\n  \"components\": [\r\n    \"Microsoft.VisualStudio.Component.CoreEditor\",\r\n    \"Microsoft.VisualStudio.Component.StartPageExperiment.Cpp\",\r\n    \"Microsoft.VisualStudio.Workload.CoreEditor\",\r\n    \"Microsoft.VisualStudio.Component.Roslyn.Compiler\",\r\n    \"Microsoft.Component.MSBuild\",\r\n    \"Microsoft.VisualStudio.Component.Static.Analysis.Tools\",\r\n    \"Microsoft.VisualStudio.Component.TextTemplating\",\r\n    \"Microsoft.VisualStudio.Component.Debugger.JustInTime\",\r\n    \"Microsoft.VisualStudio.Component.NuGet\",\r\n    \"Microsoft.VisualStudio.ComponentGroup.WebToolsExtensions\",\r\n    \"Microsoft.VisualStudio.Component.VC.CoreIde\",\r\n    \"Microsoft.VisualStudio.Component.VC.Redist.14.Latest\",\r\n    \"Microsoft.VisualStudio.ComponentGroup.NativeDesktop.Core\",\r\n    \"Microsoft.VisualStudio.Component.VC.Tools.x86.x64\",\r\n    \"Microsoft.VisualStudio.Component.Graphics.Win81\",\r\n    \"Microsoft.VisualStudio.Component.Graphics.Tools\",\r\n    \"Microsoft.VisualStudio.Component.VC.DiagnosticTools\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.17763\",\r\n    \"Microsoft.VisualStudio.Component.VC.CMake.Project\",\r\n    \"Microsoft.VisualStudio.Component.VC.ATL\",\r\n    \"Microsoft.VisualStudio.Component.VC.TestAdapterForBoostTest\",\r\n    \"Microsoft.VisualStudio.Component.VC.TestAdapterForGoogleTest\",\r\n    \"Microsoft.Component.VC.Runtime.UCRTSDK\",\r\n    \"Microsoft.VisualStudio.Component.Windows81SDK\",\r\n    \"Microsoft.VisualStudio.Component.WinXP\",\r\n    \"Microsoft.VisualStudio.Component.VC.ATLMFC\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.17134\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.16299.UWP\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.16299.UWP.Native\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.16299.Desktop\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.16299.Desktop.arm\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.15063.UWP\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.15063.UWP.Native\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK.15063.Desktop\",\r\n    \"Microsoft.VisualStudio.Component.VC.140\",\r\n    \"Microsoft.VisualStudio.Workload.NativeDesktop\",\r\n    \"Microsoft.VisualStudio.Component.VC.Tools.ARM64\",\r\n    \"Microsoft.VisualStudio.Component.VC.Tools.ARM\",\r\n    \"Microsoft.Component.VC.Runtime.OSSupport\",\r\n    \"Microsoft.VisualStudio.Component.Windows10SDK\",\r\n    \"Microsoft.VisualStudio.Component.VC.ATL.Spectre\",\r\n    \"Microsoft.VisualStudio.Component.VC.ATLMFC.Spectre\",\r\n    \"Microsoft.VisualStudio.Component.VC.Runtimes.x86.x64.Spectre\"\r\n  ]\r\n}\r\n```", "closed_by": {"login": "woodgear", "id": 16863223, "node_id": "MDQ6VXNlcjE2ODYzMjIz", "avatar_url": "https://avatars.githubusercontent.com/u/16863223?v=4", "gravatar_id": "", "url": "https://api.github.com/users/woodgear", "html_url": "https://github.com/woodgear", "followers_url": "https://api.github.com/users/woodgear/followers", "following_url": "https://api.github.com/users/woodgear/following{/other_user}", "gists_url": "https://api.github.com/users/woodgear/gists{/gist_id}", "starred_url": "https://api.github.com/users/woodgear/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/woodgear/subscriptions", "organizations_url": "https://api.github.com/users/woodgear/orgs", "repos_url": "https://api.github.com/users/woodgear/repos", "events_url": "https://api.github.com/users/woodgear/events{/privacy}", "received_events_url": "https://api.github.com/users/woodgear/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/67923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/67923/timeline", "performed_via_github_app": null, "state_reason": "completed"}