{"url": "https://api.github.com/repos/rust-lang/rust/issues/88181", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/88181/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/88181/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/88181/events", "html_url": "https://github.com/rust-lang/rust/issues/88181", "id": 975602730, "node_id": "MDU6SXNzdWU5NzU2MDI3MzA=", "number": 88181, "title": "Compile firefox 91.0.1esr on Openindiana (Illumos) with rustc 1.54 I get  (signal: 11, SIGSEGV: invalid memory reference)", "user": {"login": "cgrzemba", "id": 832047, "node_id": "MDQ6VXNlcjgzMjA0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/832047?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgrzemba", "html_url": "https://github.com/cgrzemba", "followers_url": "https://api.github.com/users/cgrzemba/followers", "following_url": "https://api.github.com/users/cgrzemba/following{/other_user}", "gists_url": "https://api.github.com/users/cgrzemba/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgrzemba/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgrzemba/subscriptions", "organizations_url": "https://api.github.com/users/cgrzemba/orgs", "repos_url": "https://api.github.com/users/cgrzemba/repos", "events_url": "https://api.github.com/users/cgrzemba/events{/privacy}", "received_events_url": "https://api.github.com/users/cgrzemba/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-08-20T10:38:35Z", "updated_at": "2023-04-02T07:16:31Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "<!-- Thanks for filing a \ud83d\udc1b bug report \ud83d\ude04! -->\r\n\r\n**Problem**\r\n<!-- A clear and concise description of what the bug is. -->\r\nBuild of firefox 91.0.1esr fails on Openindiana ( illumos-e31da75739 )\r\n<!-- including what currently happens and what you expected to happen. -->\r\n\r\n**Steps**\r\n<!-- The steps to reproduce the bug. -->\r\n1. install current Cargo and Rust toolchain with rustup\r\n2. Compile Firefox 91.0.1esr on Openindiana \r\n3. build fails with:\r\n    Caused by:\r\n  process didn't exit successfully: `CARGO=/ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/cargo CARGO_CRATE_NAME=gleam CARGO_MANIFEST_DIR=/ws/grzemba/oi-userland/components/web/firefox/firefox-91.0.1/third_party/rust/gleam CARGO_PKG_AUTHORS='The Servo Project Developers' CARGO_PKG_DESCRIPTION='Generated OpenGL bindings and wrapper for Servo.' CARGO_PKG_HOMEPAGE='' CARGO_PKG_LICENSE=Apache-2.0/MIT CARGO_PKG_LICENSE_FILE='' CARGO_PKG_NAME=gleam CARGO_PKG_REPOSITORY='https://github.com/servo/gleam' CARGO_PKG_VERSION=0.13.1 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=13 CARGO_PKG_VERSION_PATCH=1 CARGO_PKG_VERSION_PRE='' LD_LIBRARY_PATH='/ws/grzemba/oi-userland/components/web/firefox/build/amd64/release/deps:/ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib' OUT_DIR=/ws/grzemba/oi-userland/components/web/firefox/build/amd64/x86_64-unknown-illumos/release/build/gleam-6dfefb1476b81be1/out /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/rustc --crate-name gleam /ws/grzemba/oi-userland/components/web/firefox/firefox-91.0.1/third_party/rust/gleam/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=2 -C panic=abort -C embed-bitcode=no -C metadata=b9aeb35a6beb714e -C extra-filename=-b9aeb35a6beb714e --out-dir /ws/grzemba/oi-userland/components/web/firefox/build/amd64/x86_64-unknown-illumos/release/deps --target x86_64-unknown-illumos -C linker=/ws/grzemba/oi-userland/components/web/firefox/firefox-91.0.1/build/cargo-linker -L dependency=/ws/grzemba/oi-userland/components/web/firefox/build/amd64/x86_64-unknown-illumos/release/deps -L dependency=/ws/grzemba/oi-userland/components/web/firefox/build/amd64/release/deps --cap-lints warn --cap-lints warn -Cembed-bitcode=yes -C codegen-units=1` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nwarning: 1 warning emitted\r\n\r\nerror: build failed\r\n\r\n$ gdb /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/rustc core\r\nGNU gdb (GDB) 10.1\r\nCopyright (C) 2020 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.\r\nType \"show copying\" and \"show warranty\" for details.\r\nThis GDB was configured as \"i386-pc-solaris2.11\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<https://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n    <http://www.gnu.org/software/gdb/documentation/>.\r\n\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/rustc...\r\n(No debugging symbols found in /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/rustc)\r\n[New LWP 1]\r\n[New LWP 2]\r\n[New LWP 3]\r\n\r\nwarning: Unexpected size of section `.reg2/1' in core file.\r\n[Thread debugging using libthread_db enabled]\r\n[New Thread 1 (LWP 1)]\r\n[New Thread 2 (LWP 2)]\r\n[New Thread 3        ]\r\nCore was generated by `/ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/bin/rustc --crate-'.\r\nProgram terminated with signal SIGKILL, Killed.\r\n\r\nwarning: Unexpected size of section `.reg2/1' in core file.\r\n#0  0x00007fffaee6d58a in __lwp_wait () from /lib/64/libc.so.1\r\n[Current thread is 1 (LWP    1        )]\r\n(gdb) bt\r\n#0  0x00007fffaee6d58a in __lwp_wait () from /lib/64/libc.so.1\r\nrust-lang/cargo#1  0x00007fffaee55b51 in lwp_wait () from /lib/64/libc.so.1\r\nrust-lang/cargo#2  0x00007fffaee626c0 in _thrp_join () from /lib/64/libc.so.1\r\nrust-lang/cargo#3  0x00007fffaee62799 in pthread_join () from /lib/64/libc.so.1\r\nrust-lang/cargo#4  0x00007fff9de9c840 in std::sys::unix::thread::Thread::join () at library/std/src/sys/unix/thread.rs:177\r\nrust-lang/cargo#5  0x00007fff94512a26 in std::thread::JoinHandle<T>::join ()\r\n   from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib/librustc_driver-59d606deb391e5dd.so\r\nrust-lang/cargo#6  0x00007fff94535581 in rustc_interface::util::setup_callbacks_and_run_in_thread_pool_with_globals ()\r\n   from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib/librustc_driver-59d606deb391e5dd.so\r\nrust-lang/cargo#7  0x00007fff94591275 in rustc_driver::RunCompiler::run ()\r\n   from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib/librustc_driver-59d606deb391e5dd.so\r\nrust-lang/cargo#8  0x00007fff945077fb in <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once ()\r\n   from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib/librustc_driver-59d606deb391e5dd.so\r\nrust-lang/cargo#9  0x00007fff945994c3 in rustc_driver::main ()\r\n   from /ws/grzemba/.rustup/toolchains/stable-x86_64-unknown-illumos/lib/librustc_driver-59d606deb391e5dd.so\r\nrust-lang/cargo#10 0x0000000000400c7e in rustc_main::main ()\r\nrust-lang/cargo#11 0x0000000000400d1a in std::sys_common::backtrace::__rust_begin_short_backtrace ()\r\nrust-lang/cargo#12 0x0000000000400cec in std::rt::lang_start::_$u7b$$u7b$closure$u7d$$u7d$::h39bb1db379497404 ()\r\nrust-lang/cargo#13 0x00007fff9de9214b in core::ops::function::impls::{{impl}}::call_once<(),Fn<()>> ()\r\n    at /rustc/a178d0322ce20e33eac124758e837cbd80a6f633/library/core/src/ops/function.rs:259\r\nrust-lang/cargo#14 std::panicking::try::do_call<&Fn<()>,i32> () at library/std/src/panicking.rs:401\r\nrust-lang/cargo#15 std::panicking::try<i32,&Fn<()>> () at library/std/src/panicking.rs:365\r\nrust-lang/cargo#16 std::panic::catch_unwind<&Fn<()>,i32> () at library/std/src/panic.rs:434\r\nrust-lang/cargo#17 std::rt::lang_start_internal () at library/std/src/rt.rs:34\r\nrust-lang/cargo#18 0x0000000000400ca9 in main ()\r\n\r\n\r\n**Possible Solution(s)**\r\n<!-- Not obligatory, but suggest a fix/reason for the bug, -->\r\n<!-- or ideas how to implement the addition or change -->\r\n\r\n**Notes**\r\n\r\nOutput of `cargo version`:\r\ncargo 1.54.0 (5ae8d74b3 2021-06-22)\r\n\r\n<!-- Also, any additional context or information you feel may be relevant to the issue. -->\r\n<!-- (e.g rust version, OS platform/distribution/version, target toolchain(s), release channel.. -->\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/88181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/88181/timeline", "performed_via_github_app": null, "state_reason": null}