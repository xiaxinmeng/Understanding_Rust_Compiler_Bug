{"url": "https://api.github.com/repos/rust-lang/rust/issues/8337", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8337/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8337/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8337/events", "html_url": "https://github.com/rust-lang/rust/issues/8337", "id": 17696299, "node_id": "MDU6SXNzdWUxNzY5NjI5OQ==", "number": 8337, "title": "Use the size of numeric literals to inform the inferred numeric type", "user": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2013-08-06T15:22:06Z", "updated_at": "2014-08-12T22:24:35Z", "closed_at": "2014-08-12T22:24:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I've annotated the following program with its current output:\n\n``` rust\nfn foo<T: Signed>(x: T, y: T) {\n    printfln!(\"%?, %?\", x, y);\n}\n\nfn main() {\n    foo(1, 8_000_000_000);      // 1, -589934592\n    foo(1, 8_000_000_000i64);   // 1, 8000000000\n    foo(1i8, 8_000_000_000);    // 1, 0\n    //foo(1, 8_000_000_000i8);  // error: literal out of range for its type\n}\n```\n\nAs shown by the last (commented-out) line, Rust is already smart enough to reject numeric literals whose values are larger than the maximum value that can be represented by their type, but only when their type is specified by a suffix:\n1. As shown by the first call to `foo`, it's perfectly willing to infer the default type of `int`, even when the value is too large to be contained in an `int`.\n2. As shown by the third call to `foo`, it's perfectly willing to infer a concrete type from a previously-given numeric suffix, even when that type is too small to hold the value of the later, un-suffixed literal.\n\nThis might be naive of me, but it would be wonderful if these issues could be addressed somehow. The first issue would be complicated by the fact that `int` is a different size on different architectures, and that inferring the type to `i64` would require assigning the same type to the prior literal. The second issue would require recognizing that `1i8` and `8_000_000_000` cannot be the same type without overflow, and would throw an error just as the `8_000_000_000i8` line does today.\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8337/timeline", "performed_via_github_app": null, "state_reason": "completed"}