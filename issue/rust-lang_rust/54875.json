{"url": "https://api.github.com/repos/rust-lang/rust/issues/54875", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/54875/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54875/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/54875/events", "html_url": "https://github.com/rust-lang/rust/issues/54875", "id": 367489141, "node_id": "MDU6SXNzdWUzNjc0ODkxNDE=", "number": 54875, "title": "Compiler panic while installing cargo-src on Windows 10 ", "user": {"login": "pip25", "id": 11923134, "node_id": "MDQ6VXNlcjExOTIzMTM0", "avatar_url": "https://avatars.githubusercontent.com/u/11923134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pip25", "html_url": "https://github.com/pip25", "followers_url": "https://api.github.com/users/pip25/followers", "following_url": "https://api.github.com/users/pip25/following{/other_user}", "gists_url": "https://api.github.com/users/pip25/gists{/gist_id}", "starred_url": "https://api.github.com/users/pip25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pip25/subscriptions", "organizations_url": "https://api.github.com/users/pip25/orgs", "repos_url": "https://api.github.com/users/pip25/repos", "events_url": "https://api.github.com/users/pip25/events{/privacy}", "received_events_url": "https://api.github.com/users/pip25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-06T19:41:33Z", "updated_at": "2020-03-10T11:21:21Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "As per the [documentation](https://crates.io/crates/cargo-src#installing) I've ran \r\n\"cargo +nightly install cargo-src\"\r\nIt consistently produces the following result (with backtrace enabled):\r\n\r\n```\r\n    Updating crates.io index\r\n  Installing cargo-src v0.1.5\r\n   Compiling serde v1.0.79\r\n   Compiling semver-parser v0.7.0\r\n   Compiling version_check v0.1.5\r\n   Compiling winapi v0.3.6\r\n   Compiling winapi-build v0.1.1\r\n   Compiling void v1.0.2\r\n   Compiling rand_core v0.3.0\r\n   Compiling stable_deref_trait v1.1.1\r\n   Compiling nodrop v0.1.12\r\n   Compiling cfg-if v0.1.5\r\n   Compiling winapi v0.2.8\r\n   Compiling scopeguard v0.3.3\r\n   Compiling byteorder v1.2.6\r\n   Compiling memoffset v0.2.1\r\n   Compiling crossbeam-utils v0.5.0\r\n   Compiling lazycell v1.2.0\r\n   Compiling libc v0.2.43\r\n   Compiling futures v0.1.24\r\n   Compiling slab v0.4.1\r\n   Compiling proc-macro2 v0.4.20\r\n   Compiling unicode-xid v0.1.0\r\n   Compiling ryu v0.2.6\r\n   Compiling unicode-xid v0.0.4\r\n   Compiling scoped-tls v0.1.2\r\n   Compiling ucd-util v0.1.1\r\n   Compiling rustc-serialize v0.3.24\r\n   Compiling regex v1.0.5\r\n   Compiling quote v0.3.15\r\n   Compiling matches v0.1.8\r\n   Compiling unicode-width v0.1.5\r\n   Compiling rustc-demangle v0.1.9\r\n   Compiling httparse v1.3.3\r\n   Compiling take v0.1.0\r\n   Compiling endian-type v0.1.2\r\n   Compiling bitflags v1.0.4\r\n   Compiling pest v1.0.6\r\n   Compiling nibble_vec v0.0.4\r\n   Compiling unicode-normalization v0.1.7\r\n   Compiling slab v0.3.0\r\n   Compiling try-lock v0.1.0\r\n   Compiling smallvec v0.2.1\r\n   Compiling safemem v0.3.0\r\n   Compiling utf8-ranges v1.0.1\r\n   Compiling itoa v0.4.3\r\n   Compiling utf8-ranges v0.1.3\r\n   Compiling regex-syntax v0.3.9\r\n   Compiling vec_map v0.8.1\r\n   Compiling strsim v0.7.0\r\n   Compiling language-tags v0.2.2\r\n   Compiling unicode_categories v0.1.1\r\n   Compiling percent-encoding v1.0.1\r\n   Compiling typed-arena v1.4.1\r\n   Compiling entities v1.0.1\r\n   Compiling rls-blacklist v0.1.2\r\n   Compiling unreachable v1.0.0\r\nthread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 1, kind: Other, message: \"Nem megfelel\u0151 funkci\u00f3.\" }', libcore\\result.rs:1009:5\r\nstack backtrace:\r\n   0: <std::path::Iter<'a> as core::convert::AsRef<std::path::Path>>::as_ref\r\n   1: std::panicking::take_hook\r\n   2: std::panicking::take_hook\r\n   3: <rustc::ty::sty::Binder<rustc::ty::ProjectionPredicate<'tcx>> as rustc::ty::ToPredicate<'tcx>>::to_predicate\r\n   4: std::panicking::rust_panic_with_hook\r\n   5: std::panicking::begin_panic_fmt\r\n   6: rust_begin_unwind\r\n   7: rustc_metadata::locator::Context::report_errs\r\n   8: rustc_metadata::locator::Context::maybe_load_library_crate\r\n   9: rustc_metadata::creader::CrateLoader::new\r\n  10: rustc_metadata::creader::CrateLoader::new\r\n  11: rustc_metadata::creader::CrateLoader::process_extern_crate\r\n  12: rustc_resolve::build_reduced_graph::<impl rustc_resolve::ToNameBinding<'a> for (&'a rustc_resolve::ModuleData<'a>, rustc::ty::Visibility, syntax_pos::span_encoding::Span, syntax_pos::hygiene::Mark)>::to_name_binding\r\n  13: <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor<'a, 'b, 'cl> as syntax::visit::Visitor<'a>>::visit_item\r\n  14: <rustc_resolve::BindingError as core::cmp::PartialOrd>::partial_cmp\r\n  15: <unknown>\r\n  16: <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor<'a, 'b, 'cl> as syntax::visit::Visitor<'a>>::visit_item\r\n  17: <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor<'a, 'b, 'cl> as syntax::visit::Visitor<'a>>::visit_ty\r\n  18: syntax::ext::expand::MacroExpander::expand_crate\r\n  19: syntax::ext::expand::MacroExpander::expand_crate\r\n  20: syntax::ext::expand::MacroExpander::expand_crate\r\n  21: rustc_driver::target_features::add_configuration\r\n  22: rustc_driver::target_features::add_configuration\r\n  23: rustc_driver::driver::count_nodes\r\n  24: rustc_driver::driver::compile_input\r\n  25: rustc_driver::run_compiler\r\n  26: <env_logger::filter::inner::Filter as core::fmt::Display>::fmt\r\n  27: rustc_driver::run_compiler\r\n  28: rustc_driver::target_features::add_configuration\r\n  29: _rust_maybe_catch_panic\r\n  30: <rustc_driver::derive_registrar::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor<'v>>::visit_trait_item\r\n  31: rustc_driver::main\r\n  32: std::rt::lang_start_internal\r\n  33: <unknown>\r\n  34: BaseThreadInitThunk\r\n  35: RtlValidSecurityDescriptor\r\n  36: RtlValidSecurityDescriptor\r\n  37: <unknown>\r\nquery stack during panic:\r\nend of query stack\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.31.0-nightly (fddcd316a 2018-10-05) running on i686-pc-windows-msvc\r\n\r\nnote: compiler flags: -C opt-level=3 --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nerror: Could not compile `unreachable`.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: failed to compile `cargo-src v0.1.5`, intermediate artifacts can be found at `R:\\Temp\\cargo-install8Atx0e`\r\n\r\nCaused by:\r\n  build failed\r\n```\r\n\r\nSmall added explanation: I'm running a Hungarian version of Windows; the error message \"Nem megfelel\u0151 funkci\u00f3\" means \"inappropriate function\". Not sure if it matters, but since cargo is installed into the user directory by rustup, it might be relevant that my username has special characters and spaces in it.\r\n\r\nThe same result occurs if I try using the stable compiler (1.29.1), although that is less relevant since cargo-src requires nightly. Both compilers have only been installed an hour ago, so they are as recent as they can be.\r\n\r\nI've also tried cloning the repo of the dependency and building \"unreachable v1.0.0\" separately, that build succeeds without issues.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/54875/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/54875/timeline", "performed_via_github_app": null, "state_reason": null}