{"url": "https://api.github.com/repos/rust-lang/rust/issues/25533", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25533/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25533/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25533/events", "html_url": "https://github.com/rust-lang/rust/issues/25533", "id": 77294906, "node_id": "MDU6SXNzdWU3NzI5NDkwNg==", "number": 25533, "title": "found external impl of Drop trait on something other than a struct", "user": {"login": "hannobraun", "id": 85732, "node_id": "MDQ6VXNlcjg1NzMy", "avatar_url": "https://avatars.githubusercontent.com/u/85732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannobraun", "html_url": "https://github.com/hannobraun", "followers_url": "https://api.github.com/users/hannobraun/followers", "following_url": "https://api.github.com/users/hannobraun/following{/other_user}", "gists_url": "https://api.github.com/users/hannobraun/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannobraun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannobraun/subscriptions", "organizations_url": "https://api.github.com/users/hannobraun/orgs", "repos_url": "https://api.github.com/users/hannobraun/repos", "events_url": "https://api.github.com/users/hannobraun/events{/privacy}", "received_events_url": "https://api.github.com/users/hannobraun/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-05-17T12:05:16Z", "updated_at": "2015-05-17T12:16:57Z", "closed_at": "2015-05-17T12:16:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "After upgrading to the latest nightly, I'm getting the following ICE:\n\n```\n$ RUST_BACKTRACE=1 ./compile \nerror: internal compiler error: found external impl of Drop trait on something other than a struct\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/diagnostic.rs:230\n\nstack backtrace:\n   1:     0x7f91f05a95f9 - sys::backtrace::write::hd2f06b81947b79f9Z5r\n   2:     0x7f91f05b1549 - panicking::on_panic::h379629e2f875556f0Kw\n   3:     0x7f91f0572242 - rt::unwind::begin_unwind_inner::hf50e1cb5ef04764faqw\n   4:     0x7f91ed929aad - rt::unwind::begin_unwind::h18238440530611376182\n   5:     0x7f91ed92a16b - diagnostic::Handler::bug::h95749c0f5471b698C8B\n   6:     0x7f91ee5110fb - session::Session::bug::h86c2b9d81379859fjor\n   7:     0x7f91efe1581e - coherence::CoherenceChecker<'a, 'tcx>::populate_destructor_table::closure.38252\n   8:     0x7f91efe276f7 - check_crate::closure.38912\n   9:     0x7f91efe22660 - check_crate::h078e0dd73c1e8d63sJC\n  10:     0x7f91f0af925f - driver::phase_3_run_analysis_passes::h3de54ea1b6be4ccatGa\n  11:     0x7f91f0add0dc - driver::compile_input::hc024216fb44f7d1dQba\n  12:     0x7f91f0b93271 - run_compiler::h392ab883257c201275b\n  13:     0x7f91f0b90ac2 - boxed::F.FnBox<A>::call_box::h13297996779729685439\n  14:     0x7f91f0b90089 - rt::unwind::try::try_fn::h8014472797410401481\n  15:     0x7f91f0629c58 - rust_try_inner\n  16:     0x7f91f0629c45 - rust_try\n  17:     0x7f91f0b90324 - boxed::F.FnBox<A>::call_box::h17680289574234719171\n  18:     0x7f91f05b02e1 - sys::thread::Thread::new::thread_start::h9e7ef2bf39143d92hxv\n  19:     0x7f91ea62a181 - start_thread\n  20:     0x7f91f01f247c - __clone\n  21:                0x0 - <unknown>\n```\n\nThis is the Rust version:\n\n```\nrustc 1.1.0-nightly (7a52835c1 2015-05-16) (built 2015-05-16)\nbinary: rustc\ncommit-hash: 7a52835c1a6da00dd054c2e934a70a0c231dffd1\ncommit-date: 2015-05-16\nbuild-date: 2015-05-16\nhost: x86_64-unknown-linux-gnu\nrelease: 1.1.0-nightly\n```\n\nHere's the program that fails to compile: https://github.com/hannobraun/embedded/blob/8cf4ee0c864ec473dbab153de2a4acfeece102c5/blink/main.rs\nAnd here's the build command: https://github.com/hannobraun/embedded/blob/bdd9d5555dfb31d7b43f51d1df00f9f9dc8eb9f2/compile\n\nEverything was working fine before the update. I think this is the version I was on before (but I'm not sure, it might have been a more recent one):\n\n```\nrustc 1.1.0-nightly (7bd71637c 2015-05-06) (built 2015-05-06)\n```\n", "closed_by": {"login": "hannobraun", "id": 85732, "node_id": "MDQ6VXNlcjg1NzMy", "avatar_url": "https://avatars.githubusercontent.com/u/85732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannobraun", "html_url": "https://github.com/hannobraun", "followers_url": "https://api.github.com/users/hannobraun/followers", "following_url": "https://api.github.com/users/hannobraun/following{/other_user}", "gists_url": "https://api.github.com/users/hannobraun/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannobraun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannobraun/subscriptions", "organizations_url": "https://api.github.com/users/hannobraun/orgs", "repos_url": "https://api.github.com/users/hannobraun/repos", "events_url": "https://api.github.com/users/hannobraun/events{/privacy}", "received_events_url": "https://api.github.com/users/hannobraun/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25533/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25533/timeline", "performed_via_github_app": null, "state_reason": "completed"}