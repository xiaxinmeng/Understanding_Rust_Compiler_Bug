{"url": "https://api.github.com/repos/rust-lang/rust/issues/56399", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56399/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56399/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56399/events", "html_url": "https://github.com/rust-lang/rust/issues/56399", "id": 386425901, "node_id": "MDU6SXNzdWUzODY0MjU5MDE=", "number": 56399, "title": "can not cross build rust-std for mingw-w64", "user": {"login": "pingplug", "id": 6712475, "node_id": "MDQ6VXNlcjY3MTI0NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6712475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pingplug", "html_url": "https://github.com/pingplug", "followers_url": "https://api.github.com/users/pingplug/followers", "following_url": "https://api.github.com/users/pingplug/following{/other_user}", "gists_url": "https://api.github.com/users/pingplug/gists{/gist_id}", "starred_url": "https://api.github.com/users/pingplug/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pingplug/subscriptions", "organizations_url": "https://api.github.com/users/pingplug/orgs", "repos_url": "https://api.github.com/users/pingplug/repos", "events_url": "https://api.github.com/users/pingplug/events{/privacy}", "received_events_url": "https://api.github.com/users/pingplug/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-01T05:32:39Z", "updated_at": "2018-12-03T02:30:47Z", "closed_at": "2018-12-03T02:30:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "System: Arch Linux\r\nCompiler:\r\n  gcc 8.2.1+20181127-1 (https://www.archlinux.org/packages/testing/x86_64/gcc/)\r\n  mingw-w64-gcc 8.2.1 with the same source above\r\nMinGW version: the latest git source (6.0.0 until 2018-11-27)\r\nrust version: 1.30.0 and 1.30.1\r\nconfig:\r\n```\r\n[llvm]\r\nenabled = true\r\noptimize = true\r\nrelease-debuginfo = false\r\nassertions = false\r\nccache = false\r\nstatic-libstdcpp = true\r\nninja = true\r\ntargets = \"X86\"\r\nexperimental-targets = \"\"\r\nlink-jobs = 0\r\nlink-shared = false\r\n\r\n[build]\r\nbuild = \"x86_64-unknown-linux-gnu\"\r\nhost = [\"x86_64-unknown-linux-gnu\"]\r\ntarget = [\"i686-unknown-linux-gnu\", \"x86_64-unknown-linux-gnu\", \"i686-pc-windows-gnu\", \"x86_64-pc-windows-gnu\"]\r\ndocs = true\r\ncompiler-docs = true\r\nsubmodules = true\r\nfast-submodules = true\r\ngdb = \"gdb\"\r\nnodejs = \"node\"\r\npython = \"python2.7\"\r\nlocked-deps = false\r\nvendor = true\r\nfull-bootstrap = false\r\nextended = true\r\ntools = [\"cargo\", \"rls\", \"rustfmt\", \"analysis\", \"src\"]\r\nverbose = 0\r\nsanitizers = false\r\nprofiler = false\r\nopenssl-static = false\r\nlow-priority = false\r\nconfigure-args = []\r\nlocal-rebuild = false\r\nprint-step-timings = false\r\n\r\n[install]\r\nprefix = \"/usr\"\r\nsysconfdir = \"/etc\"\r\ndocdir = \"share/doc/rust\"\r\nbindir = \"bin\"\r\nlibdir = \"lib\"\r\nmandir = \"share/man\"\r\ndatadir = \"share\"\r\ninfodir = \"share/info\"\r\nlocalstatedir = \"/var/lib\"\r\n\r\n[rust]\r\ndebug = false\r\noptimize = true\r\ncodegen-units = 1\r\ndebug-assertions = false\r\ndebuginfo = true\r\ndebuginfo-lines = true\r\ndebuginfo-only-std = false\r\nuse-jemalloc = true\r\ndebug-jemalloc = false\r\nbacktrace = true\r\nincremental = false\r\nexperimental-parallel-queries = false\r\ndefault-linker = \"cc\"\r\nchannel = \"stable\"\r\nrpath = false\r\nverbose-tests = false\r\noptimize-tests = true\r\ndebuginfo-tests = false\r\ncodegen-tests = true\r\nignore-git = true\r\ndist-src = false\r\ntest-miri = false\r\ncodegen-backends = [\"llvm\"]\r\ncodegen-backends-dir = \"codegen-backends\"\r\nlld = true\r\nllvm-tools = false\r\nlldb = false\r\ndeny-warnings = false\r\nbacktrace-on-ice = false\r\nverify-llvm-ir = false\r\nremap-debuginfo = false\r\n\r\n[target.i686-unknown-linux-gnu]\r\ncc = \"cc\"\r\ncxx = \"c++\"\r\nar = \"ar\"\r\nranlib = \"ranlib\"\r\nlinker = \"cc\"\r\ncrt-static = false\r\n\r\n[target.x86_64-unknown-linux-gnu]\r\ncc = \"cc\"\r\ncxx = \"c++\"\r\nar = \"ar\"\r\nranlib = \"ranlib\"\r\nlinker = \"cc\"\r\ncrt-static = false\r\n\r\n[target.i686-pc-windows-gnu]\r\ncc = \"i686-w64-mingw32-cc\"\r\ncxx = \"i686-w64-mingw32-c++\"\r\nar = \"i686-w64-mingw32-ar\"\r\nranlib = \"i686-w64-mingw32-ranlib\"\r\nlinker = \"i686-w64-mingw32-cc\"\r\ncrt-static = true\r\n\r\n[target.x86_64-pc-windows-gnu]\r\ncc = \"x86_64-w64-mingw32-cc\"\r\ncxx = \"x86_64-w64-mingw32-c++\"\r\nar = \"x86_64-w64-mingw32-ar\"\r\nlinker = \"x86_64-w64-mingw32-cc\"\r\ncrt-static = true\r\n\r\n[dist]\r\n```\r\nerror:\r\n```\r\nBuilding stage2 std artifacts (x86_64-unknown-linux-gnu -> x86_64-pc-windows-gnu)\r\n   Compiling core v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/libcore)                                                                                            \r\n   Compiling unwind v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/libunwind)\r\n   Compiling compiler_builtins v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/rustc/compiler_builtins_shim)\r\n   Compiling alloc_jemalloc v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/liballoc_jemalloc)\r\n   Compiling std v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/libstd)\r\nerror: failed to run custom build command for `std v0.0.0 (file:///tmp/rust/src/rustc-1.30.1-src/src/libstd)`\r\nprocess didn't exit successfully: `/tmp/rust/src/rustc-1.30.1-src/build/x86_64-unknown-linux-gnu/stage2-std/release/build/std-3da6ca96e3eedf5f/build-script-build` (exit code: 101)\r\n--- stdout\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/Makefile.am\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/state.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/LICENSE\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/posix.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/elf.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/Mark.Twain-Tom.Sawyer.txt\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/stest.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/backtrace-supported.h.in\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/mmap.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/ttest.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/ztest.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/pecoff.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config.h.in\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/backtrace.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/configure.ac\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/read.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/dwarf.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/README.md\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/configure\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/Makefile.in\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/nounwind.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config.sub\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config.guess\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/mmapio.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/edtest2.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/move-if-change\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/testlib.h\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/edtest.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/ltmain.sh\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/aclocal.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/unknown.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/simple.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/acinclude.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/print.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/testlib.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/btest.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/alloc.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/macho.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/sort.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config/ltoptions.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config/lt~obsolete.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config/ltsugar.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config/libtool.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/config/ltversion.m4\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/atomic.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/xcoff.c\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/filetype.awk\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/install-sh\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/missing\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/internal.h\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/backtrace.h\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/filenames.h\r\ncargo:rerun-if-changed=/tmp/rust/src/rustc-1.30.1-src/src/libstd/../libbacktrace/fileline.c\r\ncargo:rustc-link-lib=static=backtrace\r\ncargo:rustc-link-search=native=/tmp/rust/src/rustc-1.30.1-src/build/x86_64-pc-windows-gnu/native/libbacktrace/\r\nTARGET = Some(\"x86_64-pc-windows-gnu\")\r\nOPT_LEVEL = Some(\"2\")\r\nHOST = Some(\"x86_64-unknown-linux-gnu\")\r\nCC_x86_64-pc-windows-gnu = Some(\"x86_64-w64-mingw32-cc\")\r\nCFLAGS_x86_64-pc-windows-gnu = Some(\"-ffunction-sections -fdata-sections -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions --param=ssp-buffer-size=4 -m64\")\r\nrunning: \"x86_64-w64-mingw32-cc\" \"-O2\" \"-ffunction-sections\" \"-fdata-sections\" \"-ffunction-sections\" \"-fdata-sections\" \"-g\" \"-pipe\" \"-Wall\" \"-Wp,-D_FORTIFY_SOURCE=2\" \"-fexceptions\" \"--param=ssp-buffer-size=4\" \"-m64\" \"-g\" \"-fno-omit-frame-pointer\" \"-m64\" \"-static\" \"-I\" \"../libbacktrace\" \"-I\" \"/tmp/rust/src/rustc-1.30.1-src/build/x86_64-pc-windows-gnu/native/libbacktrace\" \"-fvisibility=hidden\" \"-DBACKTRACE_SUPPORTED=1\" \"-DBACKTRACE_USES_MALLOC=1\" \"-DBACKTRACE_SUPPORTS_THREADS=0\" \"-DBACKTRACE_SUPPORTS_DATA=0\" \"-DHAVE_DL_ITERATE_PHDR=1\" \"-D_GNU_SOURCE=1\" \"-D_LARGE_FILES=1\" \"-o\" \"/tmp/rust/src/rustc-1.30.1-src/build/x86_64-pc-windows-gnu/native/libbacktrace/../libbacktrace/alloc.o\" \"-c\" \"../libbacktrace/alloc.c\"\r\ncargo:warning=during RTL pass: final\r\ncargo:warning=../libbacktrace/alloc.c: In function 'backtrace_free':\r\ncargo:warning=../libbacktrace/alloc.c:75:1: internal compiler error: in based_loc_descr, at dwarf2out.c:14279\r\ncargo:warning= }\r\ncargo:warning= ^\r\ncargo:warning=Please submit a full bug report,\r\ncargo:warning=with preprocessed source if appropriate.\r\ncargo:warning=See <https://gcc.gnu.org/bugs/> for instructions.\r\nexit code: 1\r\n\r\n--- stderr\r\nthread 'main' panicked at '\r\n\r\nInternal error occurred: Command \"x86_64-w64-mingw32-cc\" \"-O2\" \"-ffunction-sections\" \"-fdata-sections\" \"-ffunction-sections\" \"-fdata-sections\" \"-g\" \"-pipe\" \"-Wall\" \"-Wp,-D_FORTIFY_SOURCE=2\" \"-fexceptions\" \"--param=ssp-buffer-size=4\" \"-m64\" \"-g\" \"-fno-omit-frame-pointer\" \"-m64\" \"-static\" \"-I\" \"../libbacktrace\" \"-I\" \"/tmp/rust/src/rustc-1.30.1-src/build/x86_64-pc-windows-gnu/native/libbacktrace\" \"-fvisibility=hidden\" \"-DBACKTRACE_SUPPORTED=1\" \"-DBACKTRACE_USES_MALLOC=1\" \"-DBACKTRACE_SUPPORTS_THREADS=0\" \"-DBACKTRACE_SUPPORTS_DATA=0\" \"-DHAVE_DL_ITERATE_PHDR=1\" \"-D_GNU_SOURCE=1\" \"-D_LARGE_FILES=1\" \"-o\" \"/tmp/rust/src/rustc-1.30.1-src/build/x86_64-pc-windows-gnu/native/libbacktrace/../libbacktrace/alloc.o\" \"-c\" \"../libbacktrace/alloc.c\" with args \"x86_64-w64-mingw32-cc\" did not execute successfully (status code exit code: 1).\r\n\r\n', vendor/cc/src/lib.rs:2260:5\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\ncommand did not execute successfully: \"/tmp/rust/src/rustc-1.30.1-src/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"build\" \"--target\" \"x86_64-pc-windows-gnu\" \"-j\" \"8\" \"--release\" \"--frozen\" \"--features\" \"panic-unwind jemalloc backtrace\" \"--manifest-path\" \"/tmp/rust/src/rustc-1.30.1-src/src/libstd/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101\r\nthread 'main' panicked at 'cargo must succeed', bootstrap/compile.rs:1112:9\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nfailed to run: /tmp/rust/src/rustc-1.30.1-src/build/bootstrap/debug/bootstrap build\r\nBuild completed unsuccessfully in 1:23:10\r\n```\r\nI'm not sure if this is a GCC bug\r\nI will test again with gcc 8.2.0 if I have time", "closed_by": {"login": "pingplug", "id": 6712475, "node_id": "MDQ6VXNlcjY3MTI0NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6712475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pingplug", "html_url": "https://github.com/pingplug", "followers_url": "https://api.github.com/users/pingplug/followers", "following_url": "https://api.github.com/users/pingplug/following{/other_user}", "gists_url": "https://api.github.com/users/pingplug/gists{/gist_id}", "starred_url": "https://api.github.com/users/pingplug/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pingplug/subscriptions", "organizations_url": "https://api.github.com/users/pingplug/orgs", "repos_url": "https://api.github.com/users/pingplug/repos", "events_url": "https://api.github.com/users/pingplug/events{/privacy}", "received_events_url": "https://api.github.com/users/pingplug/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56399/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56399/timeline", "performed_via_github_app": null, "state_reason": "completed"}