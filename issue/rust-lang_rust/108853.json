{"url": "https://api.github.com/repos/rust-lang/rust/issues/108853", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/108853/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/108853/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/108853/events", "html_url": "https://github.com/rust-lang/rust/issues/108853", "id": 1613092355, "node_id": "I_kwDOAAsO6M5gJdYD", "number": 108853, "title": "Latest nightly are failing to build non-toy projects at linking stage when using LTO optimization", "user": {"login": "dbachelot", "id": 101317839, "node_id": "U_kgDOBgn8zw", "avatar_url": "https://avatars.githubusercontent.com/u/101317839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbachelot", "html_url": "https://github.com/dbachelot", "followers_url": "https://api.github.com/users/dbachelot/followers", "following_url": "https://api.github.com/users/dbachelot/following{/other_user}", "gists_url": "https://api.github.com/users/dbachelot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbachelot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbachelot/subscriptions", "organizations_url": "https://api.github.com/users/dbachelot/orgs", "repos_url": "https://api.github.com/users/dbachelot/repos", "events_url": "https://api.github.com/users/dbachelot/events{/privacy}", "received_events_url": "https://api.github.com/users/dbachelot/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}, {"id": 2413861294, "node_id": "MDU6TGFiZWwyNDEzODYxMjk0", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-untriaged", "name": "regression-untriaged", "color": "e4008a", "default": false, "description": "Untriaged performance or correctness regression."}, {"id": 5257912668, "node_id": "LA_kwDOAAsO6M8AAAABOWVhXA", "url": "https://api.github.com/repos/rust-lang/rust/labels/-Zbuild-std", "name": "-Zbuild-std", "color": "382EF0", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2023-03-07T09:57:09Z", "updated_at": "2023-03-31T06:51:43Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "After updating to the latest version of Rust, I found that many of my projects are failing to compile at linking stage when doing size-optimized builds (cf. https://github.com/johnthagen/min-sized-rust). I found the possible nightly-to-nightly regression to be from `nightly-2023-02-27` to `nightly-2023-02-28`. This seems to be a real issue since min-sized builds are widely used. Also I failed to reproduce this in a toy project.\r\n\r\nTo trigger that \"bug\" I used these compiler flags:\r\n```bash\r\nOPTI_FLAGS=\"-C link-dead-code=n -C lto=fat -C opt-level=z -C embed-bitcode=yes -C panic=abort\"\r\nOPTI_ARGS=\"-Z build-std=std,panic_abort -Z build-std-features=panic_immediate_abort\"\r\n\r\n# for linux you might want to use -C panic=abort to overpass another bug\r\n\r\nRUSTFLAGS=$OPTI_FLAGS cargo +nightly build --target x86_64-unknown-linux-gnu --release $OPTI_ARGS\r\nRUSTFLAGS=$OPTI_FLAGS XWIN_ARCH=\"x86_64\" XWIN_CACHE_DIR=\"/tmp/xwin_64\" cargo +nightly xwin build --target x86_64-pc-windows-msvc --release $OPTI_ARGS\r\n```\r\n\r\nPossible linked issues:\r\n- https://github.com/rust-lang/rust/issues/107016\r\n- https://github.com/rust-lang/rust/issues/108030\r\n- https://github.com/rust-lang/compiler-builtins/issues/347\r\n\r\nI tried to build those projects with the latest working nightly (`nightly-2023-02-27`) and the first non-working nightly (`nightly-2023-02-28`):\r\n- RustHound (https://github.com/OPENCYBER-FR/RustHound - 534 stars)\r\n- RustScan (https://github.com/RustScan/RustScan - 9.4k stars)\r\n- Helix (https://github.com/helix-editor/helix - 19.6k stars)\r\n\r\nI expected to see this happen: build succeed in both cases.\r\n\r\nInstead, this happened: linker errors on the first non-working nightly (`nightly-2023-02-28`) and compile success with the latest working nightly (`nightly-2023-02-27`). This show a possible regression.\r\n\r\nFor RustHound (using `nightly-2023-02-28`):\r\n<details><summary>Compile error</summary>\r\n<p>\r\n\r\n```\r\n   Compiling rusthound v1.1.62 (/$USER/Projets/XXX/RustHound)\r\nerror: linking with `lld-link` failed: exit status: 1\r\n  |\r\n  = note: LC_ALL=\"C\" PATH=\"/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/bin:/$USER/.vscode-server/bin/441438abd1ac652551dbe4d408dfcec8a499b8bf/bin/remote-cli:/$USER/.local/bin:/$USER/.cargo/bin:/$USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/tmp\" VSLANG=\"1033\" \"lld-link\" \"-flavor\" \"link\" \"/NOLOGO\" \"/tmp/rustcAWOQqQ/symbols.o\" \"/$USER/Projets/XXX/RustHound/target/x86_64-pc-windows-msvc/release/deps/rusthound.rusthound.4bfd0cff-cgu.3.rcgu.o\" \"/LIBPATH:/$USER/Projets/XXX/RustHound/target/x86_64-pc-windows-msvc/release/deps\" \"/LIBPATH:/$USER/Projets/XXX/RustHound/target/release/deps\" \"/LIBPATH:/tmp/xwin_64/crt/lib/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/um/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/ucrt/x86_64\" \"/LIBPATH:/$USER/.cargo/registry/src/github.com-1ecc6299db9ec823/windows_x86_64_msvc-0.42.1/lib\" \"/LIBPATH:/$USER/.cargo/registry/src/github.com-1ecc6299db9ec823/windows_x86_64_msvc-0.34.0/lib\" \"/LIBPATH:/$USER/Projets/XXX/RustHound/target/x86_64-pc-windows-msvc/release/build/ring-175a80523169bc78/out\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/tmp/rustcAWOQqQ/libring-98a43d4a731d3bc1.rlib\" \"/$USER/Projets/XXX/RustHound/target/x86_64-pc-windows-msvc/release/deps/libcompiler_builtins-a57aa224b6747535.rlib\" \"windows.lib\" \"windows.lib\" \"iphlpapi.lib\" \"bcrypt.lib\" \"ntdll.lib\" \"windows.lib\" \"advapi32.lib\" \"cfgmgr32.lib\" \"credui.lib\" \"fwpuclnt.lib\" \"gdi32.lib\" \"kernel32.lib\" \"msimg32.lib\" \"ntdll.lib\" \"ole32.lib\" \"opengl32.lib\" \"runtimeobject.lib\" \"secur32.lib\" \"user32.lib\" \"winspool.lib\" \"ws2_32.lib\" \"kernel32.lib\" \"advapi32.lib\" \"userenv.lib\" \"kernel32.lib\" \"ws2_32.lib\" \"bcrypt.lib\" \"msvcrt.lib\" \"legacy_stdio_definitions.lib\" \"/NXCOMPAT\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/OUT:/$USER/Projets/XXX/RustHound/target/x86_64-pc-windows-msvc/release/deps/rusthound.exe\" \"/OPT:REF,ICF\" \"/DEBUG\"\r\n  = note: lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::ha70d088502189c5c\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h75be24e30ae66717)\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h2923ea1dd2188a7b)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::h3facc516142b808f\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::hc9f2c5447bea3c19)\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::ha0c8059f27d2ee43)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hc3c814c714409716\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h5da56a5404567510)\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::he654838393c6dac6)\r\n          >>> referenced by libcompiler_builtins-a57aa224b6747535.rlib(compiler_builtins-a57aa224b6747535.compiler_builtins.08706f9d-cgu.7.rcgu.o):(compiler_builtins::int::specialized_div_rem::u32_div_rem::hb22b2448b8f01ed2)\r\n          \r\n\r\nerror: could not compile `rusthound` due to previous error\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nFor RustScan (using `nightly-2023-02-28`):\r\n<details><summary>Compile error</summary>\r\n<p>\r\n\r\n```\r\n   Compiling rustscan v2.1.1 (/$USER/Projets/XXX/RustScan)\r\nerror: linking with `lld-link` failed: exit status: 1\r\n  |\r\n  = note: LC_ALL=\"C\" PATH=\"/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/bin:/$USER/.vscode-server/bin/441438abd1ac652551dbe4d408dfcec8a499b8bf/bin/remote-cli:/$USER/.local/bin:/$USER/.cargo/bin:/$USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/tmp\" VSLANG=\"1033\" \"lld-link\" \"-flavor\" \"link\" \"/NOLOGO\" \"/tmp/rustcMAAVJR/symbols.o\" \"/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/deps/rustscan.rustscan.2fa56812-cgu.0.rcgu.o\" \"/LIBPATH:/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/deps\" \"/LIBPATH:/$USER/Projets/XXX/RustScan/target/release/deps\" \"/LIBPATH:/tmp/xwin_64/crt/lib/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/um/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/ucrt/x86_64\" \"/LIBPATH:/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/build/wepoll-ffi-719df429f6c384f7/out\" \"/LIBPATH:/$USER/.cargo/registry/src/github.com-1ecc6299db9ec823/windows_x86_64_msvc-0.42.0/lib\" \"/LIBPATH:/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/build/ring-a690ee922a6572a9/out\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/tmp/rustcMAAVJR/libring-188f86f2fd8f068a.rlib\" \"/tmp/rustcMAAVJR/libwepoll_ffi-48d31142813b117f.rlib\" \"/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/deps/libcompiler_builtins-18ed03317118022b.rlib\" \"iphlpapi.lib\" \"bcrypt.lib\" \"ntdll.lib\" \"windows.lib\" \"advapi32.lib\" \"advapi32.lib\" \"cfgmgr32.lib\" \"credui.lib\" \"fwpuclnt.lib\" \"gdi32.lib\" \"kernel32.lib\" \"msimg32.lib\" \"ntdll.lib\" \"ole32.lib\" \"opengl32.lib\" \"secur32.lib\" \"shell32.lib\" \"synchronization.lib\" \"user32.lib\" \"winspool.lib\" \"ws2_32.lib\" \"kernel32.lib\" \"advapi32.lib\" \"userenv.lib\" \"kernel32.lib\" \"ws2_32.lib\" \"bcrypt.lib\" \"msvcrt.lib\" \"legacy_stdio_definitions.lib\" \"/NXCOMPAT\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/OUT:/$USER/Projets/XXX/RustScan/target/x86_64-pc-windows-msvc/release/deps/rustscan.exe\" \"/OPT:REF,ICF\" \"/DEBUG\"\r\n  = note: lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hf83a56f591ad91c2\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::he7ed35977b0d0fac)\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h00538ae7c426f37f)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hae711d779ec4e591\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h659e210b754e206f)\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h970afb9c096c3a26)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::h183171ab1b2751dc\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h6c6b22f19a38a7e4)\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::hb512d2478bac3150)\r\n          >>> referenced by libcompiler_builtins-18ed03317118022b.rlib(compiler_builtins-18ed03317118022b.compiler_builtins.c902bbf6-cgu.7.rcgu.o):(compiler_builtins::int::specialized_div_rem::u32_div_rem::h4103159706e15559)\r\n          \r\n\r\nerror: could not compile `rustscan` due to previous error\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nFor Helix (using `nightly-2023-02-28`):\r\n<details><summary>Compile error</summary>\r\n<p>\r\n\r\n```\r\n   Compiling helix-tui v0.6.0 (/$USER/Projets/XXX/Helix/helix-tui)\r\nerror: linking with `lld-link` failed: exit status: 1\r\n  |\r\n  = note: LC_ALL=\"C\" PATH=\"/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/bin:/$USER/.vscode-server/bin/441438abd1ac652551dbe4d408dfcec8a499b8bf/bin/remote-cli:/$USER/.local/bin:/$USER/.cargo/bin:/$USER/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/tmp\" VSLANG=\"1033\" \"lld-link\" \"-flavor\" \"link\" \"/NOLOGO\" \"/tmp/rustcIC5pT0/symbols.o\" \"/$USER/Projets/XXX/Helix/target/x86_64-pc-windows-msvc/release/deps/hx.hx.97f34d47-cgu.12.rcgu.o\" \"/LIBPATH:/$USER/Projets/XXX/Helix/target/x86_64-pc-windows-msvc/release/deps\" \"/LIBPATH:/$USER/Projets/XXX/Helix/target/release/deps\" \"/LIBPATH:/tmp/xwin_64/crt/lib/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/um/x86_64\" \"/LIBPATH:/tmp/xwin_64/sdk/lib/ucrt/x86_64\" \"/LIBPATH:/$USER/.cargo/registry/src/github.com-1ecc6299db9ec823/windows_x86_64_msvc-0.42.1/lib\" \"/LIBPATH:/$USER/Projets/XXX/Helix/target/x86_64-pc-windows-msvc/release/build/tree-sitter-2a9907837c51abd5/out\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/tmp/rustcIC5pT0/libtree_sitter-846e7dfbf9fccdfd.rlib\" \"/$USER/Projets/XXX/Helix/target/x86_64-pc-windows-msvc/release/deps/libcompiler_builtins-15b4049fca2c0d34.rlib\" \"windows.lib\" \"ntdll.lib\" \"legacy_stdio_definitions.lib\" \"windows.lib\" \"kernel32.lib\" \"advapi32.lib\" \"ole32.lib\" \"oleaut32.lib\" \"bcrypt.lib\" \"windows.lib\" \"advapi32.lib\" \"cfgmgr32.lib\" \"fwpuclnt.lib\" \"gdi32.lib\" \"kernel32.lib\" \"msimg32.lib\" \"ntdll.lib\" \"ole32.lib\" \"opengl32.lib\" \"runtimeobject.lib\" \"shell32.lib\" \"shlwapi.lib\" \"synchronization.lib\" \"user32.lib\" \"winspool.lib\" \"ws2_32.lib\" \"kernel32.lib\" \"advapi32.lib\" \"userenv.lib\" \"kernel32.lib\" \"ws2_32.lib\" \"bcrypt.lib\" \"msvcrt.lib\" \"legacy_stdio_definitions.lib\" \"/NXCOMPAT\" \"/LIBPATH:/$USER/.rustup/toolchains/nightly-2023-02-28-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-pc-windows-msvc/lib\" \"/OUT:/$USER/Projets/XXX/Helix/target/x86_64-pc-windows-msvc/release/deps/hx.exe\" \"/OPT:REF,ICF\" \"/DEBUG\"\r\n  = note: lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hc27fcf92225fa76d\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::hde1da1a440758e53)\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u8$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h69f3e9a4cec906c3)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hc09440a623908dd2\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h8fa431404ce61bc8)\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u16$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h66ae3ce6d28d7dc9)\r\n          \r\n          lld-link: error: undefined symbol: _$LT$T$u20$as$u20$core..convert..TryInto$LT$U$GT$$GT$::try_into::hcee917ca27ced0ac\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::wrapping_shl::h51b6ed721278058c)\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.3.rcgu.o):(_$LT$u32$u20$as$u20$compiler_builtins..int..Int$GT$::logical_shr::h337b670af4036651)\r\n          >>> referenced by libcompiler_builtins-15b4049fca2c0d34.rlib(compiler_builtins-15b4049fca2c0d34.compiler_builtins.b4f7fc22-cgu.7.rcgu.o):(compiler_builtins::int::specialized_div_rem::u32_div_rem::hc40953c0c14b372c)\r\n          \r\n\r\nerror: could not compile `helix-term` due to previous error\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nPlease note that I used windows cross compilation builds as an example, ~~but same thing can happen with other targets (even when not cross-compiling)~~. _Also note that the linking errors can be different regarding the selected target._\r\n\r\nAfter some more tests with Linux (and checking [this](https://github.com/rust-lang/rust/issues/107016) issue), I found that we need to add `-C panic=abort` to overpass another linking issue (cf. https://github.com/rust-lang/rust/issues/107016#issuecomment-1401116129). This doesn't resolve the issue for Windows cross-compilation however.\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/108853/reactions", "total_count": 7, "+1": 7, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/108853/timeline", "performed_via_github_app": null, "state_reason": null}