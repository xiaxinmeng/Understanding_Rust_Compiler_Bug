{"url": "https://api.github.com/repos/rust-lang/rust/issues/2926", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2926/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2926/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2926/events", "html_url": "https://github.com/rust-lang/rust/issues/2926", "id": 5640672, "node_id": "MDU6SXNzdWU1NjQwNjcy", "number": 2926, "title": "ICE when trying to access shared-access-boxed vector in iface impl", "user": {"login": "iamtakingiteasy", "id": 621285, "node_id": "MDQ6VXNlcjYyMTI4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/621285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamtakingiteasy", "html_url": "https://github.com/iamtakingiteasy", "followers_url": "https://api.github.com/users/iamtakingiteasy/followers", "following_url": "https://api.github.com/users/iamtakingiteasy/following{/other_user}", "gists_url": "https://api.github.com/users/iamtakingiteasy/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamtakingiteasy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamtakingiteasy/subscriptions", "organizations_url": "https://api.github.com/users/iamtakingiteasy/orgs", "repos_url": "https://api.github.com/users/iamtakingiteasy/repos", "events_url": "https://api.github.com/users/iamtakingiteasy/events{/privacy}", "received_events_url": "https://api.github.com/users/iamtakingiteasy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2012-07-16T14:42:13Z", "updated_at": "2012-07-18T01:50:06Z", "closed_at": "2012-07-18T01:50:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "For the following code:\n\n```\nimport io::*;\nimport to_str::*;\n\nimpl <T : to_str copy> of to_str for @[mut T] {\n    fn to_str() -> str {\n        let tmp = copy self;\n        tmp.map(|x| { x.to_str() }).to_str()\n    }\n}\n\nfn main() {\n    println((@[mut 1, 2, 3]).to_str());\n}\n```\n\nrustc-0.3 produces an ICE:\n\n```\nexample.rs:7:8: 7:11 error: internal compiler error: aliased ptr with a non-none lp\nexample.rs:7         tmp.map(|x| { x.to_str() }).to_str()\n                     ^~~\n```\n\nThis is not happens with unique boxes (`~[mut 1,2,3]`/`for ~[mut T]`)\n\nAlso tested on git snapshot (`rustc 0.3 (6081eb7 2012-07-15 05:41:24 -0700)`) -- same thing, except i had to change `str` to `~str` to make it not fail with `error: bare 'str' is not a type`\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2926/timeline", "performed_via_github_app": null, "state_reason": "completed"}