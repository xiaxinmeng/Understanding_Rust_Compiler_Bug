{"url": "https://api.github.com/repos/rust-lang/rust/issues/105928", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105928/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105928/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105928/events", "html_url": "https://github.com/rust-lang/rust/issues/105928", "id": 1503812922, "node_id": "I_kwDOAAsO6M5Zol06", "number": 105928, "title": "Standalone 1.66.0 x86_64-unknown-linux-gnu installer fails with `--without=rust-docs` option", "user": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-20T00:25:04Z", "updated_at": "2022-12-20T16:26:34Z", "closed_at": "2022-12-20T16:26:34Z", "author_association": "NONE", "active_lock_reason": null, "body": "If I untar the standalone installer and run it thusly, it fails (this example in a fresh `ubuntu:latest` docker container):\r\n\r\n```\r\nroot@90bec9bc7367:/tmp/rust-1.66.0-x86_64-unknown-linux-gnu# /bin/bash install.sh --without=rust-docs\r\ninstall: creating uninstall script at /usr/local/lib/rustlib/uninstall.sh\r\ninstall: installing component 'rustc'\r\ninstall: installing component 'rust-std-x86_64-unknown-linux-gnu'\r\ninstall: installing component '-json-preview'\r\ninstall: error: manifest for -json-preview does not exist at /tmp/rust-1.66.0-x86_64-unknown-linux-gnu/-json-preview/manifest.in. see logs at '/usr/local/lib/rustlib/install.log'\r\n```\r\n\r\nThe referenced log file looked successful until the `-json-preview` step showed up. Here's the last few lines:\r\n\r\n```\r\ninstall: copying file /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-860619b93700e7eb.rlib\r\n$ cp /tmp/rust-1.66.0-x86_64-unknown-linux-gnu/rust-std-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-860619b93700e7eb.rlib /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-860619b93700e7eb.rlib\r\n$ chmod 644 /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-860619b93700e7eb.rlib\r\n$ echo \"file:/usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcore-860619b93700e7eb.rlib\" >> \"/usr/local/lib/rustlib/manifest-rust-std-x86_64-unknown-linux-gnu\"\r\n$ umask 022 && mkdir -p \"/usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib\"\r\ninstall: copying file /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_demangle-5bde27582a7f5af7.rlib\r\n$ cp /tmp/rust-1.66.0-x86_64-unknown-linux-gnu/rust-std-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_demangle-5bde27582a7f5af7.rlib /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_demangle-5bde27582a7f5af7.rlib\r\n$ chmod 644 /usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_demangle-5bde27582a7f5af7.rlib\r\n$ echo \"file:/usr/local/lib/rustlib/x86_64-unknown-linux-gnu/lib/librustc_demangle-5bde27582a7f5af7.rlib\" >> \"/usr/local/lib/rustlib/manifest-rust-std-x86_64-unknown-linux-gnu\"\r\ninstall: installing component '-json-preview'\r\ninstall: error: manifest for -json-preview does not exist at /tmp/rust-1.66.0-x86_64-unknown-linux-gnu/-json-preview/manifest.in. see logs at '/usr/local/lib/rustlib/install.log'\r\n```\r\n\r\nThe only hit I got for `\"-json-preview\"` is in this issue where it sounds like it affected nightly packages: https://github.com/compiler-explorer/compiler-explorer/issues/4345\r\n\r\nWe depend on the standalone installers for building internal distribution packages, so this is currently a blocker for us to upgrade to 1.66.0. Thank you for taking a look \ud83d\ude4f\ud83c\udffb ", "closed_by": {"login": "acfoltzer", "id": 205266, "node_id": "MDQ6VXNlcjIwNTI2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/205266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/acfoltzer", "html_url": "https://github.com/acfoltzer", "followers_url": "https://api.github.com/users/acfoltzer/followers", "following_url": "https://api.github.com/users/acfoltzer/following{/other_user}", "gists_url": "https://api.github.com/users/acfoltzer/gists{/gist_id}", "starred_url": "https://api.github.com/users/acfoltzer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/acfoltzer/subscriptions", "organizations_url": "https://api.github.com/users/acfoltzer/orgs", "repos_url": "https://api.github.com/users/acfoltzer/repos", "events_url": "https://api.github.com/users/acfoltzer/events{/privacy}", "received_events_url": "https://api.github.com/users/acfoltzer/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105928/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}