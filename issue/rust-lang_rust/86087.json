{"url": "https://api.github.com/repos/rust-lang/rust/issues/86087", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86087/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86087/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86087/events", "html_url": "https://github.com/rust-lang/rust/issues/86087", "id": 913054632, "node_id": "MDU6SXNzdWU5MTMwNTQ2MzI=", "number": 86087, "title": "musl compiler return relocation R_X86_64_32 against", "user": {"login": "FH0", "id": 32861476, "node_id": "MDQ6VXNlcjMyODYxNDc2", "avatar_url": "https://avatars.githubusercontent.com/u/32861476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FH0", "html_url": "https://github.com/FH0", "followers_url": "https://api.github.com/users/FH0/followers", "following_url": "https://api.github.com/users/FH0/following{/other_user}", "gists_url": "https://api.github.com/users/FH0/gists{/gist_id}", "starred_url": "https://api.github.com/users/FH0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FH0/subscriptions", "organizations_url": "https://api.github.com/users/FH0/orgs", "repos_url": "https://api.github.com/users/FH0/repos", "events_url": "https://api.github.com/users/FH0/events{/privacy}", "received_events_url": "https://api.github.com/users/FH0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-06-07T03:31:36Z", "updated_at": "2021-06-07T11:10:40Z", "closed_at": "2021-06-07T11:10:40Z", "author_association": "NONE", "active_lock_reason": null, "body": " \"x86_64-linux-musl-gcc\" \"-Wl,--as-needed\" \"-Wl,-z,noexecstack\" \"-m64\" \"-Wl,--eh-frame-hdr\" \"-nostartfiles\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained/rcrt1.o\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained/crti.o\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained/crtbeginS.o\" \"-L\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib\" \"-L\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.0.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.1.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.10.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.11.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.12.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.13.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.14.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.15.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.2.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.3.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.4.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.5.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.6.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.7.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.8.rcgu.o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.tmp.3wx6fb0e-cgu.9.rcgu.o\" \"-o\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/examples/tmp-cd59872955c76a2b.15on9x4emk26bik9.rcgu.o\" \"-Wl,--gc-sections\" \"-static-pie\" \"-Wl,-zrelro\" \"-Wl,-znow\" \"-nodefaultlibs\" \"-L\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps\" \"-L\" \"/root/rust/target/debug/deps\" \"-L\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/build/openssl-sys-e453397da622a7d3/out/openssl-build/install/lib\" \"-L\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/build/rust-crypto-25bdc1fd89ca8108/out\" \"-L\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib\" \"-Wl,-Bstatic\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl-28c2e49051af4160.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libonce_cell-5642f7346cab9dcb.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libbitflags-28259992d18050dd.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libforeign_types-fe894c0e43c48592.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libforeign_types_shared-dee8b5bc7d9b385c.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libcfg_if-d96e28c45209172e.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib\" \"/root/rust/target/x86_64-unknown-linux-musl/debug/deps/liblibc-0cb914ac4663469a.rlib\" \"-Wl,--start-group\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libstd-8d748018af634a5d.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libpanic_unwind-6a3a1b575c0df078.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libminiz_oxide-013c226ac04dd227.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libadler-f083c7d0e52e252b.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libobject-d33d8531527b9d60.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libaddr2line-8b84a0e6c7b21963.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libgimli-612cc5ce7b865a02.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/librustc_demangle-4e201d3c7a15737a.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libhashbrown-d784133cc13ccede.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/librustc_std_workspace_alloc-f22706ddc991522e.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libunwind-6223d76a09277af7.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libcfg_if-7cd95d1d5888f667.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/liblibc-0a03e83fc44965da.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/liballoc-116eb0a84266274d.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/librustc_std_workspace_core-021f5765c12001ad.rlib\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libcore-e7aaf4005a5ab47a.rlib\" \"-Wl,--end-group\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/libcompiler_builtins-36e2387c88d0da0b.rlib\" \"-fPIE\" \"-static\" \"-s\" \"-Wl,-Bdynamic\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained/crtendS.o\" \"/root/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/self-contained/crtn.o\"\r\n\r\n```\r\n  = note: /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(s3_lib.o): relocation R_X86_64_32 against `.text.cipher_compare' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(ssl_ciph.o): relocation R_X86_64_32S against `.bss.ssl_cipher_methods' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(ssl_init.o): relocation R_X86_64_32 against `.rodata.ossl_init_ssl_base_ossl_.str1.1' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(aes_core.o): relocation R_X86_64_32 against `.rodata.rcon' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(a_int.o): relocation R_X86_64_32 against `.rodata.c2i_ibuf.str1.1' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(ameth_lib.o): relocation R_X86_64_32 against `.text.ameth_cmp_BSEARCH_CMP_FN' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(asn1_lib.o): relocation R_X86_64_32 against `.rodata.ASN1_get_object.str1.1' can not be used when making a PIE object; recompile with -fPIE\r\n          /usr/local/x86_64-linux-musl-native/bin/../lib/gcc/x86_64-linux-musl/10.2.1/../../../../x86_64-linux-musl/bin/ld: /root/rust/target/x86_64-unknown-linux-musl/debug/deps/libopenssl_sys-9fb2b56c18278e39.rlib(asn_pack.o): relocation R_X86_64_32 against `.rodata.ASN1_item_pack.str1.1' can not be used when making a PIE object; recompile with -fPIE\r\n```\r\n\r\nIt can't work like this. But it works fine if change `x86_64-unknown-linux-musl` to `x86_64-unknown-linux-gnu`. I'am trying to solve it by adding `-fPIE`, but the error has not changed.\r\n\r\n```\r\n[build]\r\ntarget = \"x86_64-unknown-linux-musl\"\r\nrustflags = [\r\n\t\"-C\", \"link-arg=-fPIE\",\r\n\t\"-C\", \"link-arg=-static\",\r\n\t\"-C\", \"link-arg=-s\",\r\n\t\"-C\", \"target-feature=+crt-static\",\r\n]\r\n```", "closed_by": {"login": "FH0", "id": 32861476, "node_id": "MDQ6VXNlcjMyODYxNDc2", "avatar_url": "https://avatars.githubusercontent.com/u/32861476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FH0", "html_url": "https://github.com/FH0", "followers_url": "https://api.github.com/users/FH0/followers", "following_url": "https://api.github.com/users/FH0/following{/other_user}", "gists_url": "https://api.github.com/users/FH0/gists{/gist_id}", "starred_url": "https://api.github.com/users/FH0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FH0/subscriptions", "organizations_url": "https://api.github.com/users/FH0/orgs", "repos_url": "https://api.github.com/users/FH0/repos", "events_url": "https://api.github.com/users/FH0/events{/privacy}", "received_events_url": "https://api.github.com/users/FH0/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86087/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86087/timeline", "performed_via_github_app": null, "state_reason": "completed"}