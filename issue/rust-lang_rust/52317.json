{"url": "https://api.github.com/repos/rust-lang/rust/issues/52317", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52317/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52317/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52317/events", "html_url": "https://github.com/rust-lang/rust/issues/52317", "id": 340727936, "node_id": "MDU6SXNzdWUzNDA3Mjc5MzY=", "number": 52317, "title": "Rustdoc cann't build rust documentation with custom libdir.", "user": {"login": "o01eg", "id": 397177, "node_id": "MDQ6VXNlcjM5NzE3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/397177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/o01eg", "html_url": "https://github.com/o01eg", "followers_url": "https://api.github.com/users/o01eg/followers", "following_url": "https://api.github.com/users/o01eg/following{/other_user}", "gists_url": "https://api.github.com/users/o01eg/gists{/gist_id}", "starred_url": "https://api.github.com/users/o01eg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/o01eg/subscriptions", "organizations_url": "https://api.github.com/users/o01eg/orgs", "repos_url": "https://api.github.com/users/o01eg/repos", "events_url": "https://api.github.com/users/o01eg/events{/privacy}", "received_events_url": "https://api.github.com/users/o01eg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-07-12T17:22:28Z", "updated_at": "2019-02-19T14:47:30Z", "closed_at": "2018-07-19T03:05:19Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Looks like something related to https://github.com/rust-lang/rust/issues/45345\r\n\r\n```\r\n Documenting core v0.0.0 (file:///tmp/portage/dev-lang/rust-9999/work/rust-git-src/src/libcore)\r\n     Running `/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/bootstrap/debug/rustdoc --crate-name core libcore/lib.rs --target x86_64-unknown-linux-gnu -o /tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/doc -L dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/release/deps`\r\nrustdoc command: \"/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage2/bin/rustdoc\" \"--crate-name\" \"core\" \"libcore/lib.rs\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-o\" \"/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/doc\" \"-L\" \"dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps\" \"-L\" \"dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/release/deps\" \"--cfg\" \"stage1\" \"--cfg\" \"dox\" \"--sysroot\" \"/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1\" \"-Z\" \"force-unstable-if-unmarked\" \"--linker\" \"x86_64-pc-linux-gnu-gcc\" \"-Z\" \"unstable-options\" \"-Z\" \"unstable-options\" \"--crate-version\" \"1.29.0-dev (d334027c5 2018-07-12)\"\r\n/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage2/bin/rustdoc: error while loading shared libraries: librustc_driver-8d7fdf72b3fbbc6b.so: cannot open shared object file: No such file or directory\r\nerror: Could not document `core`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/bootstrap/debug/rustdoc --crate-name core libcore/lib.rs --target x86_64-unknown-linux-gnu -o /tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/doc -L dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-std/release/deps` (exit code: 127)\r\n\r\n\r\ncommand did not execute successfully: \"/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"doc\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-j\" \"1\" \"-v\" \"--release\" \"--locked\" \"--features\" \"panic-unwind jemalloc backtrace\" \"--manifest-path\" \"/tmp/portage/dev-lang/rust-9999/work/rust-git-src/src/libstd/Cargo.toml\" \"--no-deps\" \"-p\" \"alloc\" \"-p\" \"core\" \"-p\" \"std\" \"-p\" \"std_unicode\"\r\nexpected success, got: exit code: 101\r\n```\r\n\r\nbut file exists: \r\n```\r\n$ find /tmp/portage/ -name librustc_driver-8d7fdf72b3fbbc6b.so\r\n/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage2/lib64/rust-9999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-8d7fdf72b3fbbc6b.so\r\n/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage2/lib/librustc_driver-8d7fdf72b3fbbc6b.so\r\n/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1/lib64/rust-9999/rustlib/x86_64-unknown-linux-gnu/lib/librustc_driver-8d7fdf72b3fbbc6b.so\r\n/tmp/portage/dev-lang/rust-9999/work/rust-git-src/build/x86_64-unknown-linux-gnu/stage1-rustc/x86_64-unknown-linux-gnu/release/deps/librustc_driver-8d7fdf72b3fbbc6b.so\r\n```\r\n\r\nconfig.toml:\r\n```toml\r\n[llvm]\r\noptimize = true\r\nrelease-debuginfo = false\r\nassertions = false\r\ntargets = \"X86;Mips;NVPTX;BPF;AArch64\"\r\n[build]\r\nbuild = \"x86_64-unknown-linux-gnu\"\r\nhost = [\"x86_64-unknown-linux-gnu\"]\r\ntarget = [\"i686-unknown-linux-gnu\",\"x86_64-unknown-linux-gnu\",\"wasm32-unknown-unknown\"]\r\ndocs = true\r\nsubmodules = false\r\npython = \"python2.7\"\r\nlocked-deps = true\r\nvendor = false\r\nverbose = 2\r\nsanitizers = true\r\nextended = true\r\ntools=[\"src\", \"rls\", \"analysis\", \"rustfmt\", \"clippy\"]\r\n[install]\r\nprefix = \"/usr\"\r\nlibdir = \"lib64/rust-9999\"\r\ndocdir = \"share/doc/rust-9999\"\r\nmandir = \"share/rust-9999/man\"\r\n[rust]\r\noptimize = true\r\ndebuginfo = false\r\ndebug-assertions = false\r\nuse-jemalloc = true\r\ndefault-linker = \"x86_64-pc-linux-gnu-gcc\"\r\nrpath = false\r\nignore-git = false\r\nlld = true\r\nllvm-tools = true\r\n[target.i686-unknown-linux-gnu]\r\ncc = \"x86_64-pc-linux-gnu-gcc\"\r\ncxx = \"x86_64-pc-linux-gnu-g++\"\r\nlinker = \"x86_64-pc-linux-gnu-gcc\"\r\nar = \"x86_64-pc-linux-gnu-ar\"\r\n[target.x86_64-unknown-linux-gnu]\r\ncc = \"x86_64-pc-linux-gnu-gcc\"\r\ncxx = \"x86_64-pc-linux-gnu-g++\"\r\nlinker = \"x86_64-pc-linux-gnu-gcc\"\r\nar = \"x86_64-pc-linux-gnu-ar\"\r\n[target.wasm32-unknown-unknown]\r\n```\r\n\r\nAffected rust version: 2d5a295d518b499360ec05df5447351a1e325846\r\n\r\nKnown to work revision: 478226cc2ab768d45cc8284652c5997559b7b05f", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52317/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52317/timeline", "performed_via_github_app": null, "state_reason": "completed"}