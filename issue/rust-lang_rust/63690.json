{"url": "https://api.github.com/repos/rust-lang/rust/issues/63690", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63690/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63690/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63690/events", "html_url": "https://github.com/rust-lang/rust/issues/63690", "id": 482025617, "node_id": "MDU6SXNzdWU0ODIwMjU2MTc=", "number": 63690, "title": "Diagnostics could be better for unclosed delimiters", "user": {"login": "sgrif", "id": 1529387, "node_id": "MDQ6VXNlcjE1MjkzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1529387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgrif", "html_url": "https://github.com/sgrif", "followers_url": "https://api.github.com/users/sgrif/followers", "following_url": "https://api.github.com/users/sgrif/following{/other_user}", "gists_url": "https://api.github.com/users/sgrif/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgrif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgrif/subscriptions", "organizations_url": "https://api.github.com/users/sgrif/orgs", "repos_url": "https://api.github.com/users/sgrif/repos", "events_url": "https://api.github.com/users/sgrif/events{/privacy}", "received_events_url": "https://api.github.com/users/sgrif/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 27424086, "node_id": "MDU6TGFiZWwyNzQyNDA4Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-parser", "name": "A-parser", "color": "f7e101", "default": false, "description": "Area: The parsing of Rust source code to an AST."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 693665463, "node_id": "MDU6TGFiZWw2OTM2NjU0NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/WG-diagnostics", "name": "WG-diagnostics", "color": "c2e0c6", "default": false, "description": "Working group: diagnostics"}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}], "state": "closed", "locked": false, "assignee": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-18T18:55:27Z", "updated_at": "2019-11-04T05:42:40Z", "closed_at": "2019-11-04T05:42:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Depending on where the unclosed delimiter is in the file, you can get dozens or even hundreds of meaningless errors after the unclosed delimiter. Since terminals display the last output from a program, this means that the actual error gets completely buried. This afternoon I had to scroll through more than 200 lines of output to find where the actual error was. This can be reproduced by taking any reasonably large file, deleting the closing `}` of a function towards the top, and trying to build it.\r\n\r\n<details>\r\n<summary>Example Output</summary>\r\n\r\n```\r\nerror: this file contains an un-closed delimiter\r\n   --> src/controllers/helpers/pagination.rs:175:3\r\n    |\r\n16  | impl Page {\r\n    |           - un-closed delimiter\r\n17  |     fn new(params: &IndexMap<String, String>) -> CargoResult<Self> {\r\n    |                                                                    - this delimiter might not be properly closed...\r\n...\r\n31  | }\r\n    | - ...as it matches this but it has different indentation\r\n...\r\n175 | }\r\n    |   ^\r\n\r\nerror: this file contains an un-closed delimiter\r\n   --> src/controllers/helpers/pagination.rs:175:3\r\n    |\r\n16  | impl Page {\r\n    |           - un-closed delimiter\r\n17  |     fn new(params: &IndexMap<String, String>) -> CargoResult<Self> {\r\n    |                                                                    - this delimiter might not be properly closed...\r\n...\r\n31  | }\r\n    | - ...as it matches this but it has different indentation\r\n...\r\n175 | }\r\n    |   ^\r\n\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n  --> src/controllers/helpers/pagination.rs:34:12\r\n   |\r\n34 | pub(crate) struct PaginationOptions {\r\n   |            ^^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:39:1\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n  --> src/controllers/helpers/pagination.rs:34:12\r\n   |\r\n34 | pub(crate) struct PaginationOptions {\r\n   |            ^^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:39:1\r\n   |\r\n37 | }\r\n   |  - expected one of 11 possible tokens here\r\n38 |\r\n39 | impl PaginationOptions {\r\n   | ^^^^ unexpected token\r\n\r\n   |\r\n37 | }\r\n   |  - expected one of 11 possible tokens here\r\n38 |\r\n39 | impl PaginationOptions {\r\n   | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `trait`\r\n  --> src/controllers/helpers/pagination.rs:69:12\r\n   |\r\n69 | pub(crate) trait Paginate: Sized {\r\n   |            ^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:78:1\r\n   |\r\n76 | }\r\n   |  - expected one of 11 possible tokens here\r\n77 |\r\n78 | impl<T> Paginate for T {}\r\n   | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `trait`\r\n  --> src/controllers/helpers/pagination.rs:69:12\r\n   |\r\n69 | pub(crate) trait Paginate: Sized {\r\n   |            ^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `(`, `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n  --> src/controllers/helpers/pagination.rs:80:5\r\n   |\r\n80 | pub struct Paginated<T> {\r\n   |     ^^^^^^ expected one of 9 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:78:1\r\n   |\r\n76 | }\r\n   |  - expected one of 11 possible tokens here\r\n77 |\r\n78 | impl<T> Paginate for T {}\r\n   | ^^^^ unexpected token\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:85:1\r\n   |\r\n83 | }\r\n   |  - expected one of 11 possible tokens here\r\n\r\n84 |\r\n85 | impl<T> Paginated<T> {\r\n   | ^^^^ unexpected token\r\n\r\nerror: expected one of `(`, `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n  --> src/controllers/helpers/pagination.rs:80:5\r\n   |\r\n80 | pub struct Paginated<T> {\r\n   |     ^^^^^^ expected one of 9 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:120:1\r\n    |\r\n118 | }\r\n    |  - expected one of 11 possible tokens here\r\n119 |\r\n120 | impl<T> IntoIterator for Paginated<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n  --> src/controllers/helpers/pagination.rs:85:1\r\n   |\r\n83 | }\r\n   |  - expected one of 11 possible tokens here\r\n84 |\r\n85 | impl<T> Paginated<T> {\r\n   | ^^^^ unexpected token\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n   --> src/controllers/helpers/pagination.rs:130:12\r\n    |\r\n130 | pub(crate) struct PaginatedQuery<T> {\r\n\r\n    |            ^^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:135:1\r\n    |\r\n133 | }\r\n    |  - expected one of 11 possible tokens here\r\n134 |\r\n135 | impl<T> PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:120:1\r\n    |\r\n118 | }\r\n    |  - expected one of 11 possible tokens here\r\n119 |\r\n120 | impl<T> IntoIterator for Paginated<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `default`, `existential`, `extern`, `fn`, `type`, or `unsafe`, found `struct`\r\n   --> src/controllers/helpers/pagination.rs:130:12\r\n    |\r\n130 | pub(crate) struct PaginatedQuery<T> {\r\n    |            ^^^^^^ expected one of 8 possible tokens here\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:149:1\r\n    |\r\n147 | }\r\n    |  - expected one of 11 possible tokens here\r\n148 |\r\n149 | impl<T> QueryId for PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:135:1\r\n    |\r\n133 | }\r\n    |  - expected one of 11 possible tokens here\r\n134 |\r\n135 | impl<T> PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:154:1\r\n    |\r\n152 | }\r\n    |  - expected one of 11 possible tokens here\r\n153 |\r\n154 | impl<T: Query> Query for PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:149:1\r\n    |\r\n147 | }\r\n    |  - expected one of 11 possible tokens here\r\n148 |\r\n149 | impl<T> QueryId for PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:158:1\r\n    |\r\n156 | }\r\n    |  - expected one of 11 possible tokens here\r\n157 |\r\n158 | impl<T, DB> RunQueryDsl<DB> for PaginatedQuery<T> {}\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:154:1\r\n    |\r\n152 | }\r\n    |  - expected one of 11 possible tokens here\r\n153 |\r\n154 | impl<T: Query> Query for PaginatedQuery<T> {\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:158:1\r\n    |\r\n156 | }\r\n    |  - expected one of 11 possible tokens here\r\n157 |\r\n158 | impl<T, DB> RunQueryDsl<DB> for PaginatedQuery<T> {}\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:160:1\r\n    |\r\n158 | impl<T, DB> RunQueryDsl<DB> for PaginatedQuery<T> {}\r\n    |                                                     - expected one of 11 possible tokens here\r\n159 |\r\n160 | impl<T> QueryFragment<Pg> for PaginatedQuery<T>\r\n    | ^^^^ unexpected token\r\n\r\nerror: expected one of `async`, `const`, `crate`, `default`, `existential`, `extern`, `fn`, `pub`, `type`, `unsafe`, or `}`, found `impl`\r\n   --> src/controllers/helpers/pagination.rs:160:1\r\n    |\r\n158 | impl<T, DB> RunQueryDsl<DB> for PaginatedQuery<T> {}\r\n    |                                                     - expected one of 11 possible tokens here\r\n159 |\r\n160 | impl<T> QueryFragment<Pg> for PaginatedQuery<T>\r\n    | ^^^^ unexpected token\r\n```\r\n\r\n</details>", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63690/timeline", "performed_via_github_app": null, "state_reason": "completed"}