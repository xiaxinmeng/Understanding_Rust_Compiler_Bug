{"url": "https://api.github.com/repos/rust-lang/rust/issues/34987", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34987/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34987/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34987/events", "html_url": "https://github.com/rust-lang/rust/issues/34987", "id": 167155675, "node_id": "MDU6SXNzdWUxNjcxNTU2NzU=", "number": 34987, "title": "MUSL dynamic linking support", "user": {"login": "zhangyt26", "id": 1720292, "node_id": "MDQ6VXNlcjE3MjAyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1720292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangyt26", "html_url": "https://github.com/zhangyt26", "followers_url": "https://api.github.com/users/zhangyt26/followers", "following_url": "https://api.github.com/users/zhangyt26/following{/other_user}", "gists_url": "https://api.github.com/users/zhangyt26/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangyt26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangyt26/subscriptions", "organizations_url": "https://api.github.com/users/zhangyt26/orgs", "repos_url": "https://api.github.com/users/zhangyt26/repos", "events_url": "https://api.github.com/users/zhangyt26/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangyt26/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}, {"id": 630662867, "node_id": "MDU6TGFiZWw2MzA2NjI4Njc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-musl", "name": "O-musl", "color": "6e6ec0", "default": false, "description": "Target: The musl libc"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2016-07-23T00:19:00Z", "updated_at": "2017-10-03T00:16:52Z", "closed_at": "2017-08-25T12:23:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "i noticed current musl target doesn't support dynamic linking: \nhttps://github.com/rust-lang/rust/blob/936b32a514b73c1d3dfcbd9d17818f9f18bf4883/src/librustc_back/target/linux_musl_base.rs#L63\n\ni was working to make an executable shared lib, but linked statically with musl, so that the library doesn't expect glibc from host system, and it can also be called from other languages dynamically. i was hoping dylib or cdylib for musl target is going to help me with that.\n\ni also tried the following:\ni follow the tutorial here: https://doc.rust-lang.org/book/advanced-linking.html#linux\nand at the end of the compilation, instead of an executable, i chose staticlib as crate-type.\nthe above steps work fine. \n\nafter getting the staticlib .a file, i was trying to use:\n`musl-gcc -shared -o libexample.so -Wl,--whole-archive libexample.a`\nto convert the staticlib to dynamic lib, but no luck.\nbunch of multiple definitions and missing definitions error.\n\nis this even possible with musl? a shared lib with musl statically linked?\n", "closed_by": {"login": "aidanhs", "id": 1050652, "node_id": "MDQ6VXNlcjEwNTA2NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1050652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aidanhs", "html_url": "https://github.com/aidanhs", "followers_url": "https://api.github.com/users/aidanhs/followers", "following_url": "https://api.github.com/users/aidanhs/following{/other_user}", "gists_url": "https://api.github.com/users/aidanhs/gists{/gist_id}", "starred_url": "https://api.github.com/users/aidanhs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aidanhs/subscriptions", "organizations_url": "https://api.github.com/users/aidanhs/orgs", "repos_url": "https://api.github.com/users/aidanhs/repos", "events_url": "https://api.github.com/users/aidanhs/events{/privacy}", "received_events_url": "https://api.github.com/users/aidanhs/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34987/timeline", "performed_via_github_app": null, "state_reason": "completed"}