{"url": "https://api.github.com/repos/rust-lang/rust/issues/36532", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36532/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36532/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36532/events", "html_url": "https://github.com/rust-lang/rust/issues/36532", "id": 177443124, "node_id": "MDU6SXNzdWUxNzc0NDMxMjQ=", "number": 36532, "title": "Compiler doesn't have found my variable identifier ?", "user": {"login": "Songbird0", "id": 13397428, "node_id": "MDQ6VXNlcjEzMzk3NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/13397428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Songbird0", "html_url": "https://github.com/Songbird0", "followers_url": "https://api.github.com/users/Songbird0/followers", "following_url": "https://api.github.com/users/Songbird0/following{/other_user}", "gists_url": "https://api.github.com/users/Songbird0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Songbird0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Songbird0/subscriptions", "organizations_url": "https://api.github.com/users/Songbird0/orgs", "repos_url": "https://api.github.com/users/Songbird0/repos", "events_url": "https://api.github.com/users/Songbird0/events{/privacy}", "received_events_url": "https://api.github.com/users/Songbird0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-09-16T14:44:03Z", "updated_at": "2016-09-16T16:14:02Z", "closed_at": "2016-09-16T16:14:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi,\n\nWhen I run my `cargo test` command, the compiler doesn't have found my variable - she's initialized in a macro.\n\nI tried this code:\n\n**No worries for `#[macro_export]` attribute, the macro is in a module.**\n\n``` Rust\n//We're in lib.rs file\n#[macro_export]\nmacro_rules! log {\n        ($log_type:expr, $message_content:expr) => {\n            let mut content : String = String::new();\n            content.push_str($log_type);\n            content.push_str($message_content);\n            println!(\"{}\", &content);\n    };\n\n    ($log_type:expr, $message_content:expr, $variable:expr) => {\n            let mut content : String = String::new();\n            content.push_str($log_type);\n            content.push_str($message_content);\n            content.push_str($variable);\n            println!(\"{}\", &content);\n    };\n}\n\n// This test is in the same file which the macro's declaration..\n#[test]\nfn pack_logger_proce_custom()\n{\n    log!(\"[CUSTOM]:\", \"CUSTOM log is OK. (run with two args)\"); //Will fail... Why ?\n}\n\n```\n\nI expected to see this happen:\n\n``` information\n[CUSTOM]: CUSTOM log is OK. (run with two args)\n```\n\nInstead, this happened: **Nothing**, an error.\n## Meta\n\n`rustc --version --verbose`:\n\n```\nrustc 1.9.0 (e4e8b6668 2016-05-18)\nbinary: rustc\ncommit-hash: e4e8b666850a763fdf1c3c2c142856ab51e32779\ncommit-date: 2016-05-18\nhost: x86_64-unknown-linux-gnu\nrelease: 1.9.0\n```\n\nBacktrace (in _verbose_ mode):\n\n``` error\n   Compiling verbose_bird v0.0.1 (file:///home/songbird/Documents/RustDev/Verbose_Bird)\n     Running `rustc src/lib.rs --crate-name verbose_bird --crate-type lib -g --test -C metadata=08d4ada3bc6a277f -C extra-filename=-08d4ada3bc6a277f --out-dir /home/songbird/Documents/RustDev/Verbose_Bird/target/debug --emit=dep-info,link -L dependency=/home/songbird/Documents/RustDev/Verbose_Bird/target/debug -L dependency=/home/songbird/Documents/RustDev/Verbose_Bird/target/debug/deps`\nsrc/lib.rs:21:5: 21:12 error: unresolved name `content` [E0425]\nsrc/lib.rs:21               content.push_str($log_type);\n                            ^~~~~~~\nsrc/lib.rs:70:2: 70:61 note: in this expansion of log! (defined in src/lib.rs)\nsrc/lib.rs:21:5: 21:12 help: run `rustc --explain E0425` to see a detailed explanation\nsrc/lib.rs:22:5: 22:12 error: unresolved name `content` [E0425]\nsrc/lib.rs:22               content.push_str($message_content);\n                            ^~~~~~~\nsrc/lib.rs:70:2: 70:61 note: in this expansion of log! (defined in src/lib.rs)\nsrc/lib.rs:22:5: 22:12 help: run `rustc --explain E0425` to see a detailed explanation\nsrc/lib.rs:23:21: 23:28 error: unresolved name `content` [E0425]\nsrc/lib.rs:23               println!(\"{}\", &content);\n                                            ^~~~~~~\n<std macros>:2:25: 2:56 note: in this expansion of format_args!\n<std macros>:3:1: 3:54 note: in this expansion of print! (defined in <std macros>)\nsrc/lib.rs:23:5: 23:29 note: in this expansion of println! (defined in <std macros>)\nsrc/lib.rs:70:2: 70:61 note: in this expansion of log! (defined in src/lib.rs)\nsrc/lib.rs:23:21: 23:28 help: run `rustc --explain E0425` to see a detailed explanation\nerror: aborting due to 3 previous errors\nerror: Could not compile `verbose_bird`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/lib.rs --crate-name verbose_bird --crate-type lib -g --test -C metadata=08d4ada3bc6a277f -C extra-filename=-08d4ada3bc6a277f --out-dir /home/songbird/Documents/RustDev/Verbose_Bird/target/debug --emit=dep-info,link -L dependency=/home/songbird/Documents/RustDev/Verbose_Bird/target/debug -L dependency=/home/songbird/Documents/RustDev/Verbose_Bird/target/debug/deps` (exit code: 101)\n\n```\n\nI hope this can help you, thanks for your help.\n", "closed_by": {"login": "Songbird0", "id": 13397428, "node_id": "MDQ6VXNlcjEzMzk3NDI4", "avatar_url": "https://avatars.githubusercontent.com/u/13397428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Songbird0", "html_url": "https://github.com/Songbird0", "followers_url": "https://api.github.com/users/Songbird0/followers", "following_url": "https://api.github.com/users/Songbird0/following{/other_user}", "gists_url": "https://api.github.com/users/Songbird0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Songbird0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Songbird0/subscriptions", "organizations_url": "https://api.github.com/users/Songbird0/orgs", "repos_url": "https://api.github.com/users/Songbird0/repos", "events_url": "https://api.github.com/users/Songbird0/events{/privacy}", "received_events_url": "https://api.github.com/users/Songbird0/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36532/timeline", "performed_via_github_app": null, "state_reason": "completed"}