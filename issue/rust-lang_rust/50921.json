{"url": "https://api.github.com/repos/rust-lang/rust/issues/50921", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50921/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50921/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50921/events", "html_url": "https://github.com/rust-lang/rust/issues/50921", "id": 324730033, "node_id": "MDU6SXNzdWUzMjQ3MzAwMzM=", "number": 50921, "title": "Windows issue - running build from x64 Native Tools prompt fails", "user": {"login": "jntrnr", "id": 547158, "node_id": "MDQ6VXNlcjU0NzE1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/547158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jntrnr", "html_url": "https://github.com/jntrnr", "followers_url": "https://api.github.com/users/jntrnr/followers", "following_url": "https://api.github.com/users/jntrnr/following{/other_user}", "gists_url": "https://api.github.com/users/jntrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jntrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jntrnr/subscriptions", "organizations_url": "https://api.github.com/users/jntrnr/orgs", "repos_url": "https://api.github.com/users/jntrnr/repos", "events_url": "https://api.github.com/users/jntrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/jntrnr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-20T18:23:01Z", "updated_at": "2018-05-21T01:34:47Z", "closed_at": "2018-05-21T01:34:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "One way to build using VS is to, instead of using cmd.exe, run the Native Tools command prompt for VS.  This takes out the step of having to run the batch file that sets the environment variables, letting you run apps like \"cl.exe\" for your path.\r\n\r\nUnfortunately, this seems to have some issues.  We may want to explicitly warn against using this in the README.\r\n\r\n```\r\nDone Building Project \"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\tools\\yaml2obj\\yaml2obj.vc\r\nxproj\" (default targets).\r\n\r\nDone Building Project \"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\ALL_BUILD.vcxproj\" (defaul\r\nt targets) -- FAILED.\r\n\r\nDone Building Project \"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\install.vcxproj\" (default\r\ntargets) -- FAILED.\r\n\r\n\r\nBuild FAILED.\r\n\r\n\"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\install.vcxproj\" (default target) (1) ->\r\n\"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\ALL_BUILD.vcxproj\" (default target) (3) ->\r\n\"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\tools\\llvm-cfi-verify\\lib\\LLVMCFIVerify.vcxproj\"\r\n (default target) (33) ->\r\n\"C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\DebugInfo\\PDB\\LLVMDebugInfoPDB.vcxproj\" (def\r\nault target) (39) ->\r\n(ClCompile target) ->\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\PDB.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\DebugInfo\\PDB\\LLVMD\r\nebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIADataStream.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\Debug\r\nInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIAEnumDebugStreams.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\r\n\\DebugInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIAEnumLineNumbers.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\\r\nDebugInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIAEnumSourceFiles.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\\r\nDebugInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIAEnumSymbols.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\Debu\r\ngInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIAEnumTables.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\Debug\r\nInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIALineNumber.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\Debug\r\nInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIARawSymbol.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\DebugI\r\nnfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIASession.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\DebugInf\r\no\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIASourceFile.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\Debug\r\nInfo\\PDB\\LLVMDebugInfoPDB.vcxproj]\r\n  c:\\users\\jonathan\\source\\rust\\src\\llvm\\include\\llvm\\debuginfo\\pdb\\dia\\diasupport.h(34): fatal error C1083: Cannot ope\r\nn include file: 'atlbase.h': No such file or directory (compiling source file C:\\Users\\Jonathan\\source\\rust\\src\\llvm\\li\r\nb\\DebugInfo\\PDB\\DIA\\DIATable.cpp) [C:\\Users\\Jonathan\\source\\rust\\build\\x86_64-pc-windows-msvc\\llvm\\build\\lib\\DebugInfo\\\r\nPDB\\LLVMDebugInfoPDB.vcxproj]\r\n\r\n    0 Warning(s)\r\n    12 Error(s)\r\n\r\nTime Elapsed 00:20:45.92\r\nthread 'main' panicked at '\r\ncommand did not execute successfully, got: exit code: 1\r\n```", "closed_by": {"login": "jntrnr", "id": 547158, "node_id": "MDQ6VXNlcjU0NzE1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/547158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jntrnr", "html_url": "https://github.com/jntrnr", "followers_url": "https://api.github.com/users/jntrnr/followers", "following_url": "https://api.github.com/users/jntrnr/following{/other_user}", "gists_url": "https://api.github.com/users/jntrnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/jntrnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jntrnr/subscriptions", "organizations_url": "https://api.github.com/users/jntrnr/orgs", "repos_url": "https://api.github.com/users/jntrnr/repos", "events_url": "https://api.github.com/users/jntrnr/events{/privacy}", "received_events_url": "https://api.github.com/users/jntrnr/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50921/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50921/timeline", "performed_via_github_app": null, "state_reason": "completed"}