{"url": "https://api.github.com/repos/rust-lang/rust/issues/51810", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51810/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51810/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51810/events", "html_url": "https://github.com/rust-lang/rust/issues/51810", "id": 335817225, "node_id": "MDU6SXNzdWUzMzU4MTcyMjU=", "number": 51810, "title": "Deprecate core::arch::{x86,x86_64}::__{read,write}eflags ", "user": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-06-26T13:22:32Z", "updated_at": "2018-07-07T21:32:03Z", "closed_at": "2018-07-07T21:32:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Compiler-generated code can use the eflags register in between `__{read,write}eflags` calls, making these two intrinsics impossible to use correctly for the cases in which the user reads-modifies-writes to the eflags registers. \r\n\r\nEven read only operations like performing an alu operation in Rust, and then checking sf or zf by calling these intrinsics are not guaranteed to work either.\r\n\r\nThe only reliable way to perform these operations is using a single assembly block (e.g. via inline assembly). \r\n\r\nThis is further discussed in https://github.com/rust-lang-nursery/stdsimd/issues/485\r\n\r\nThis issue proposes to deprecate these intrinsics and mark them with `#[doc(hidden)]`, so that we can potentially remove them, maybe in the Rust 2018 edition.\r\n\r\nEDIT: There is a PR implementing the deprecation here that would need review before being merged: https://github.com/rust-lang-nursery/stdsimd/pull/494\r\n\r\ncc @BurntSushi ", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51810/timeline", "performed_via_github_app": null, "state_reason": "completed"}