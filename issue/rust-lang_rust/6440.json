{"url": "https://api.github.com/repos/rust-lang/rust/issues/6440", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6440/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6440/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6440/events", "html_url": "https://github.com/rust-lang/rust/issues/6440", "id": 14241444, "node_id": "MDU6SXNzdWUxNDI0MTQ0NA==", "number": 6440, "title": "NumCast::from() crashes compiler", "user": {"login": "vmx", "id": 42839, "node_id": "MDQ6VXNlcjQyODM5", "avatar_url": "https://avatars.githubusercontent.com/u/42839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vmx", "html_url": "https://github.com/vmx", "followers_url": "https://api.github.com/users/vmx/followers", "following_url": "https://api.github.com/users/vmx/following{/other_user}", "gists_url": "https://api.github.com/users/vmx/gists{/gist_id}", "starred_url": "https://api.github.com/users/vmx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vmx/subscriptions", "organizations_url": "https://api.github.com/users/vmx/orgs", "repos_url": "https://api.github.com/users/vmx/repos", "events_url": "https://api.github.com/users/vmx/events{/privacy}", "received_events_url": "https://api.github.com/users/vmx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-05-12T23:19:48Z", "updated_at": "2013-06-20T09:39:52Z", "closed_at": "2013-06-20T09:39:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't know exactly what the problem is as I'm new to Rust. Though this little script crashed the compiler:\n\n``` rust\nuse core::num::NumCast;\n\ntrait Decode {\n    fn decode(&self) -> Self;\n}\n\nimpl Decode for f32 {\n    fn decode(&self) -> f32 {\n        3.2f32\n    }\n}\n\nfn decode_test<T: Float + Decode>(value: T) {\n    let mut float_part = value.decode();\n    float_part *= NumCast::from(2.0);\n    io::println(fmt!(\"decode test: %?\", float_part))\n}\n\nfn main() {\n    decode_test(5.5f32);\n}\n```\n\nHere's the crash backtrace:\n\n```\n$ RUST_LOG=rustc=1,::rt::backtrace rustc bug3.rs  \nrust: task failed at 'assertion failed: !bcx.ccx().maps.moves_map.contains(&arg_expr.id)', /home/vmx/src/rust/rust/src/librustc/middle/trans/callee.rs:746\n/home/vmx/src/build/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f4a57233beb]\n/home/vmx/src/build/bin/../lib/librustrt.so(+0x2cb79)[0x7f4a57244b79]\n/home/vmx/src/build/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7f4a57235b90]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x11839b)[0x7f4a5920439b]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x118342)[0x7f4a59204342]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys14__extensions__9meth_69349fail_with17_ac9eb45dc42bd6906_07preE+0x6b)[0x7f4a59150e1b]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee14trans_arg_expr16_a7171168f339fdb6_07preE+0x1fcd)[0x7f4a576ab4bd]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x233427)[0x7f4a576a9427]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2332ad)[0x7f4a576a92ad]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_args17_b7d5d85970c828216_07preE+0x1be)[0x7f4a576a7c0e]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x230d96)[0x7f4a576a6d96]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_603e193484687ac26_07preE+0x5fc)[0x7f4a57655f0c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner16_fad8eab25a946276_07preE+0x129)[0x7f4a5768c9c9]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x250f33)[0x7f4a576c6f33]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x24a7e3)[0x7f4a576c07e3]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2460a2)[0x7f4a576bc0a2]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into16_40d0456c867f93f6_07preE+0xb71)[0x7f4a57608551]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_stmt17_43bf28ec6768e7a76_07preE+0x646)[0x7f4a576073b6]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x1906da)[0x7f4a576066da]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x1905fa)[0x7f4a576065fa]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block16_b496e3154f1b38e6_07preE+0x1b4)[0x7f4a57604c74]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_fcb2fd41ff432b416_07preE+0xa61)[0x7f4a577320e1]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base8trans_fn17_d7c68e73d1906ae46_07preE+0x685)[0x7f4a575ba485]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans12monomorphize14monomorphic_fn17_e47b70ff4fc54afc6_07preE+0x4937)[0x7f4a575bf347]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee25trans_fn_ref_with_vtables16_6c244cb718e619a6_07preE+0x11ac)[0x7f4a5768ae3c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee12trans_fn_ref17_ef426c51276dbd416_07preE+0x88e)[0x7f4a576868ce]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee5trans17_c4eeac58e3f0d1586_07preE+0x7c0)[0x7f4a57684840]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x216b28)[0x7f4a5768cb28]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2307fd)[0x7f4a576a67fd]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10with_scope17_603e193484687ac26_07preE+0x5fc)[0x7f4a57655f0c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee16trans_call_inner16_fad8eab25a946276_07preE+0x129)[0x7f4a5768c9c9]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans6callee10trans_call17_daeffb46f6d8cc626_07preE+0x324)[0x7f4a5768c5b4]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x240da7)[0x7f4a576b6da7]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4expr10trans_into16_40d0456c867f93f6_07preE+0x955)[0x7f4a57608335]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_stmt17_43bf28ec6768e7a76_07preE+0x646)[0x7f4a576073b6]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x1906da)[0x7f4a576066da]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x1905fa)[0x7f4a576065fa]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans11controlflow11trans_block16_b496e3154f1b38e6_07preE+0x1b4)[0x7f4a57604c74]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base13trans_closure17_fcb2fd41ff432b416_07preE+0xa61)[0x7f4a577320e1]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base8trans_fn17_d7c68e73d1906ae46_07preE+0x685)[0x7f4a575ba485]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base10trans_item17_76fafa1ef87a67ad6_07preE+0x11c9)[0x7f4a575b0b59]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2c3488)[0x7f4a57739488]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x21c129)[0x7f4a57692129]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base9trans_mod16_89439393d55e18e6_07preE+0xa5)[0x7f4a57738f95]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle5trans4base11trans_crate16_4ca7c4c1d2a904b6_07preE+0x2202)[0x7f4a57757242]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_rest17_8455b26eec54ff806_07preE+0x3e1c)[0x7f4a57e39a1c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_upto17_cba46c96e7b779736_07preE+0x192)[0x7f4a57e3d2f2]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver13compile_input17_5312304d495027516_07preE+0x107)[0x7f4a57e3d777]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN12run_compiler17_faf6647f92eef22b6_07preE+0x2bf4)[0x7f4a57e69434]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa052fe)[0x7f4a57e7b2fe]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa02e0c)[0x7f4a57e78e0c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa00f9c)[0x7f4a57e76f9c]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa055d0)[0x7f4a57e7b5d0]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xe3723)[0x7f4a591cf723]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x15bc08)[0x7f4a59247c08]\n/home/vmx/src/build/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f4a57234594]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/vmx/src/rust/rust/src/librustc/rustc.rc:349\n/home/vmx/src/build/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f4a57233beb]\n/home/vmx/src/build/bin/../lib/librustrt.so(+0x2cb79)[0x7f4a57244b79]\n/home/vmx/src/build/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7f4a57235b90]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x11839b)[0x7f4a5920439b]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x1183e2)[0x7f4a592043e2]\n/home/vmx/src/build/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xc3d04)[0x7f4a591afd04]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN7monitor17_9fc4cea5345c48116_07preE+0x6bc5)[0x7f4a57e711f5]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa055d0)[0x7f4a57e7b5d0]\n/home/vmx/src/build/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN4main15_c4de63b748e03d6_07preE+0x69)[0x7f4a57e7b239]\nrustc(_rust_main+0x2e)[0x400cae]\n/home/vmx/src/build/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f4a57234594]\nrust: domain main @0x12a6410 root task failed\n```\n", "closed_by": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6440/timeline", "performed_via_github_app": null, "state_reason": "completed"}