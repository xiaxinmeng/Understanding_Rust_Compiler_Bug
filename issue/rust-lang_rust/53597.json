{"url": "https://api.github.com/repos/rust-lang/rust/issues/53597", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/53597/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/53597/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/53597/events", "html_url": "https://github.com/rust-lang/rust/issues/53597", "id": 352898937, "node_id": "MDU6SXNzdWUzNTI4OTg5Mzc=", "number": 53597, "title": "Bug: No error when type is leaked from private mod", "user": {"login": "pepsighan", "id": 29191131, "node_id": "MDQ6VXNlcjI5MTkxMTMx", "avatar_url": "https://avatars.githubusercontent.com/u/29191131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pepsighan", "html_url": "https://github.com/pepsighan", "followers_url": "https://api.github.com/users/pepsighan/followers", "following_url": "https://api.github.com/users/pepsighan/following{/other_user}", "gists_url": "https://api.github.com/users/pepsighan/gists{/gist_id}", "starred_url": "https://api.github.com/users/pepsighan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pepsighan/subscriptions", "organizations_url": "https://api.github.com/users/pepsighan/orgs", "repos_url": "https://api.github.com/users/pepsighan/repos", "events_url": "https://api.github.com/users/pepsighan/events{/privacy}", "received_events_url": "https://api.github.com/users/pepsighan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 66893153, "node_id": "MDU6TGFiZWw2Njg5MzE1Mw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-visibility", "name": "A-visibility", "color": "f7e101", "default": false, "description": "Area: visibility/privacy modifiers such as `pub`"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-08-22T10:46:03Z", "updated_at": "2019-03-23T13:52:00Z", "closed_at": "2019-03-23T13:51:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "The compiler does not error on leakage of  type from private mod. \r\n\r\nCode:\r\n```\r\nmod b {\r\n    pub struct B;\r\n\r\n    pub mod c {\r\n        pub struct C;\r\n    }\r\n}\r\n\r\npub struct A {\r\n    b: b::B,\r\n    c: b::c::C,\r\n}\r\n\r\nimpl A {\r\n    pub fn new(b: b::B, c: b::c::C) -> A {\r\n        A { b, c }\r\n    }\r\n}\r\n```\r\n\r\nThis lib compiles without a problem (no private type leaked error). \r\nBut there is no way to use it in other libs/bins or in tests, as the types are actually private.\r\n\r\nCompiled on:\r\n```\r\nrustc 1.30.0-nightly (33b923fd4 2018-08-18)\r\nbinary: rustc\r\ncommit-hash: 33b923fd44c5c5925e635815fce68bdf1f98740f\r\ncommit-date: 2018-08-18\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.30.0-nightly\r\nLLVM version: 7.0\r\n```\r\nand\r\n```\r\nrustc 1.30.0-nightly (33b923fd4 2018-08-18)\r\nbinary: rustc\r\ncommit-hash: 33b923fd44c5c5925e635815fce68bdf1f98740f\r\ncommit-date: 2018-08-18\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.30.0-nightly\r\nLLVM version: 7.0\r\n```", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/53597/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/53597/timeline", "performed_via_github_app": null, "state_reason": "completed"}