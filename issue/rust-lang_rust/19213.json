{"url": "https://api.github.com/repos/rust-lang/rust/issues/19213", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19213/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19213/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19213/events", "html_url": "https://github.com/rust-lang/rust/issues/19213", "id": 49796535, "node_id": "MDU6SXNzdWU0OTc5NjUzNQ==", "number": 19213, "title": "Path::filename_str for paths with invalid UTF8 characters", "user": {"login": "dan-t", "id": 750714, "node_id": "MDQ6VXNlcjc1MDcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/750714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dan-t", "html_url": "https://github.com/dan-t", "followers_url": "https://api.github.com/users/dan-t/followers", "following_url": "https://api.github.com/users/dan-t/following{/other_user}", "gists_url": "https://api.github.com/users/dan-t/gists{/gist_id}", "starred_url": "https://api.github.com/users/dan-t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dan-t/subscriptions", "organizations_url": "https://api.github.com/users/dan-t/orgs", "repos_url": "https://api.github.com/users/dan-t/repos", "events_url": "https://api.github.com/users/dan-t/events{/privacy}", "received_events_url": "https://api.github.com/users/dan-t/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-11-22T16:19:02Z", "updated_at": "2014-11-23T21:19:10Z", "closed_at": "2014-11-23T21:19:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nrustc 0.13.0-nightly (81eeec094 2014-11-21 23:16:48 +0000)\nbinary: rustc\ncommit-hash: 81eeec0941f936f0f3de881c3991a74f32fe0625\ncommit-date: 2014-11-21 23:16:48 +0000\nhost: x86_64-unknown-linux-gnu\nrelease: 0.13.0-nightly\n```\n\nI've some strange paths in my music collection, for which\n`Path::filename_str` returns `None`.\n\nThe paths seem to contain a non UTF8 character, so the question is, how should\n`Path::filename_str` behave, should it just return a `\ufffd` for the invalid characters?\n\nHere's a list of the files, `display` is the result of calling\n`Path::display`, `dirname_str` of `Path::dirname_str` and so on.\n\n```\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/19 - \ufffdPimps Up, Aces High! 0700 hrs. (Westside Swashbuckling Parade).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[49, 57, 32, 45, 32, 161, 80, 105, 109, 112, 115, 32, 85, 112, 44, 32, 65, 99, 101, 115, 32, 72, 105, 103, 104, 33, 32, 48, 55, 48, 48, 32, 104, 114, 115, 46, 32, 40, 87, 101, 115, 116, 115, 105, 100, 101, 32, 83, 119, 97, 115, 104, 98, 117, 99, 107, 108, 105, 110, 103, 32, 80, 97, 114, 97, 100, 101, 41, 46, 111, 103, 103]'\nfilename_display: '19 - \ufffdPimps Up, Aces High! 0700 hrs. (Westside Swashbuckling Parade).ogg'\n\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/14 - \ufffdKamikaze! 0500 hrs. (-Take a Piece of Me-).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[49, 52, 32, 45, 32, 161, 75, 97, 109, 105, 107, 97, 122, 101, 33, 32, 48, 53, 48, 48, 32, 104, 114, 115, 46, 32, 40, 45, 84, 97, 107, 101, 32, 97, 32, 80, 105, 101, 99, 101, 32, 111, 102, 32, 77, 101, 45, 41, 46, 111, 103, 103]'\nfilename_display: '14 - \ufffdKamikaze! 0500 hrs. (-Take a Piece of Me-).ogg'\n\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/21 - L.O.L. -- \ufffdLoser On Line! (Hate The Player, Hate The Game).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[50, 49, 32, 45, 32, 76, 46, 79, 46, 76, 46, 32, 45, 45, 32, 161, 76, 111, 115, 101, 114, 32, 79, 110, 32, 76, 105, 110, 101, 33, 32, 40, 72, 97, 116, 101, 32, 84, 104, 101, 32, 80, 108, 97, 121, 101, 114, 44, 32, 72, 97, 116, 101, 32, 84, 104, 101, 32, 71, 97, 109, 101, 41, 46, 111, 103, 103]'\nfilename_display: '21 - L.O.L. -- \ufffdLoser On Line! (Hate The Player, Hate The Game).ogg'\n\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/03 - \ufffdGet Up,Punk! 0200 hrs. (Joint Special Operations Task Force).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[48, 51, 32, 45, 32, 161, 71, 101, 116, 32, 85, 112, 44, 80, 117, 110, 107, 33, 32, 48, 50, 48, 48, 32, 104, 114, 115, 46, 32, 40, 74, 111, 105, 110, 116, 32, 83, 112, 101, 99, 105, 97, 108, 32, 79, 112, 101, 114, 97, 116, 105, 111, 110, 115, 32, 84, 97, 115, 107, 32, 70, 111, 114, 99, 101, 41, 46, 111, 103, 103]'\nfilename_display: '03 - \ufffdGet Up,Punk! 0200 hrs. (Joint Special Operations Task Force).ogg'\n\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/10 - \ufffdFire In The Hole! 0400hrs. (Joint Special Operations Task Force).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[49, 48, 32, 45, 32, 161, 70, 105, 114, 101, 32, 73, 110, 32, 84, 104, 101, 32, 72, 111, 108, 101, 33, 32, 48, 52, 48, 48, 104, 114, 115, 46, 32, 40, 74, 111, 105, 110, 116, 32, 83, 112, 101, 99, 105, 97, 108, 32, 79, 112, 101, 114, 97, 116, 105, 111, 110, 115, 32, 84, 97, 115, 107, 32, 70, 111, 114, 99, 101, 41, 46, 111, 103, 103]'\nfilename_display: '10 - \ufffdFire In The Hole! 0400hrs. (Joint Special Operations Task Force).ogg'\n\ndisplay         : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners/06 - \ufffdVaqueros y Indios! (Joint Special Operations Task Force).ogg'\ndirname_str     : '/home/dan/Music/General Patton Vs. The X-Ecutioners/General Patton Vs. The X-Ecutioners'\nfilename_str    : ''\nfilename        : '[48, 54, 32, 45, 32, 161, 86, 97, 113, 117, 101, 114, 111, 115, 32, 121, 32, 73, 110, 100, 105, 111, 115, 33, 32, 40, 74, 111, 105, 110, 116, 32, 83, 112, 101, 99, 105, 97, 108, 32, 79, 112, 101, 114, 97, 116, 105, 111, 110, 115, 32, 84, 97, 115, 107, 32, 70, 111, 114, 99, 101, 41, 46, 111, 103, 103]'\nfilename_display: '06 - \ufffdVaqueros y Indios! (Joint Special Operations Task Force).ogg'\n```\n", "closed_by": {"login": "aturon", "id": 709807, "node_id": "MDQ6VXNlcjcwOTgwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/709807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aturon", "html_url": "https://github.com/aturon", "followers_url": "https://api.github.com/users/aturon/followers", "following_url": "https://api.github.com/users/aturon/following{/other_user}", "gists_url": "https://api.github.com/users/aturon/gists{/gist_id}", "starred_url": "https://api.github.com/users/aturon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aturon/subscriptions", "organizations_url": "https://api.github.com/users/aturon/orgs", "repos_url": "https://api.github.com/users/aturon/repos", "events_url": "https://api.github.com/users/aturon/events{/privacy}", "received_events_url": "https://api.github.com/users/aturon/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19213/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19213/timeline", "performed_via_github_app": null, "state_reason": "completed"}