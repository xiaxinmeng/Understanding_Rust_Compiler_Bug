{"url": "https://api.github.com/repos/rust-lang/rust/issues/89577", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/89577/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/89577/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/89577/events", "html_url": "https://github.com/rust-lang/rust/issues/89577", "id": 1016908497, "node_id": "I_kwDOAAsO6M48nMrR", "number": 89577, "title": "1.53.0 broke ui/consts/const-eval/ub-*.rs tests on s390x (big-endian, 64-bit) (regression)", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 896260695, "node_id": "MDU6TGFiZWw4OTYyNjA2OTU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-SystemZ", "name": "O-SystemZ", "color": "6e6ec0", "default": false, "description": "Target: SystemZ processors (s390x)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-10-05T21:46:51Z", "updated_at": "2021-10-11T03:49:29Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Probably because s390x is 64-bit big-endian not little-endian, e.g.: \r\n\r\n[Debian build log, warning several MB](https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=s390x&ver=1.53.0%2Bdfsg1-1%7Eexp1&stamp=1633466251&raw=0)\r\n\r\n<details><summary>\r\nsample\r\n</summary>\r\n\r\n~~~~\r\n------------------------------------------\r\ndiff of 64bit.stderr:\r\n\r\n6          |\r\n7          = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rustc repository if you believe it should not be considered undefined behavior.\r\n8          = note: the raw bytes of the constant (size: 8, align: 8) {\r\n-                      01 00 00 00 00 00 00 00                         \u2502 ........\r\n+                      00 00 00 00 00 00 00 01                         \u2502 ........\r\n10                 }\r\n11      \r\n12      error[E0080]: it is undefined behavior to use this value\r\n\r\n116        |\r\n117        = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rustc repository if you believe it should not be considered undefined behavior.\r\n118        = note: the raw bytes of the constant (size: 8, align: 4) {\r\n-                      78 00 00 00 ff ff ff ff                         \u2502 x.......\r\n+                      00 00 00 78 ff ff ff ff                         \u2502 ...x....\r\n120                }\r\n121     \r\n122     error[E0080]: it is undefined behavior to use this value\r\n~~~~\r\n</details>\r\n\r\n~~~~\r\ntest [ui] ui/consts/const-eval/ub-enum.rs ... FAILED\r\ntest [ui] ui/consts/const-eval/ub-int-array.rs ... FAILED\r\ntest [ui] ui/consts/const-eval/ub-nonnull.rs ... FAILED\r\ntest [ui] ui/consts/const-eval/ub-ref-ptr.rs ... FAILED\r\ntest [ui] ui/consts/const-eval/ub-uninhabit.rs ... FAILED\r\ntest [ui] ui/consts/const-eval/ub-wide-ptr.rs ... FAILED\r\n~~~~\r\n\r\nThese tests were fine in 1.52 so the culprit is probably #76881 @hameerabbasi . I will revert it in Debian for now.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/89577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/89577/timeline", "performed_via_github_app": null, "state_reason": null}