{"url": "https://api.github.com/repos/rust-lang/rust/issues/31343", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31343/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31343/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31343/events", "html_url": "https://github.com/rust-lang/rust/issues/31343", "id": 130354035, "node_id": "MDU6SXNzdWUxMzAzNTQwMzU=", "number": 31343, "title": "Tracking issue for std::io::set_panic and set_print", "user": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 1448485701, "node_id": "MDU6TGFiZWwxNDQ4NDg1NzAx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-error-handling", "name": "A-error-handling", "color": "f7e101", "default": false, "description": "Area: Error handling"}, {"id": 2238437210, "node_id": "MDU6TGFiZWwyMjM4NDM3MjEw", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-io", "name": "A-io", "color": "f7e101", "default": false, "description": "Area: std::io, std::fs, std::net and std::path"}, {"id": 2238476604, "node_id": "MDU6TGFiZWwyMjM4NDc2NjA0", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-fmt", "name": "A-fmt", "color": "f7e101", "default": false, "description": "Area: std::fmt"}, {"id": 2240305001, "node_id": "MDU6TGFiZWwyMjQwMzA1MDAx", "url": "https://api.github.com/repos/rust-lang/rust/labels/Libs-Tracked", "name": "Libs-Tracked", "color": "d4c5f9", "default": false, "description": "Libs issues that are tracked on the team's project board."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 27, "created_at": "2016-02-01T12:48:23Z", "updated_at": "2022-10-12T15:11:30Z", "closed_at": "2021-03-31T18:40:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`std::io` contains these two public unstable functions:\n\n``` rust\n/// Resets the thread-local stderr handle to the specified writer\n///\n/// This will replace the current thread's stderr handle, returning the old\n/// handle. All future calls to `panic!` and friends will emit their output to\n/// this specified handle.\n///\n/// Note that this does not need to be called for all new threads; the default\n/// output handle is to the process's stderr stream.\npub fn set_panic(sink: Box<Write + Send>) -> Option<Box<Write + Send>> { \u2026 }\n\n/// Resets the thread-local stdout handle to the specified writer\n///\n/// This will replace the current thread's stdout handle, returning the old\n/// handle. All future calls to `print!` and friends will emit their output to\n/// this specified handle.\n///\n/// Note that this does not need to be called for all new threads; the default\n/// output handle is to the process's stdout stream.\npub fn set_print(sink: Box<Write + Send>) -> Option<Box<Write + Send>> { \u2026 }\n```\n\nThey both have `#[doc(hidden)]`. Anyone knows why?\n\nThe also both have:\n\n``` rust\n#[unstable(feature = \"set_stdio\",\n           reason = \"this function may disappear completely or be replaced \\\n                     with a more general mechanism\",\n           issue = \"0\")]\n```\n\nTheir functionality is evidently useful, since the `test` crate uses them to capture the output of tests on only show it when they fail. External test harnesses would likely want to have similar functionality.\n\nThis issue is about eventually stabilizing either these functions or a more general mechanism.\n\nFor `set_panic`, that mechanism might be panic handlers (#30449) though it would be nice to be able to not duplicate most of the work done in the default handler just to change the output stream. This still leaves `set_print`.\n", "closed_by": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31343/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31343/timeline", "performed_via_github_app": null, "state_reason": "completed"}