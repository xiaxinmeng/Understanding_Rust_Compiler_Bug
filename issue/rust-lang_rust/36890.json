{"url": "https://api.github.com/repos/rust-lang/rust/issues/36890", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36890/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36890/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36890/events", "html_url": "https://github.com/rust-lang/rust/issues/36890", "id": 180454351, "node_id": "MDU6SXNzdWUxODA0NTQzNTE=", "number": 36890, "title": "Tracking issue for `illegal_floating_point_constant_pattern` compatibility lint", "user": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-10-01T12:34:08Z", "updated_at": "2017-06-19T20:58:58Z", "closed_at": "2017-06-01T07:44:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is the **summary issue** for the `illegal_floating_point_constant_pattern`\r\nfuture-compatibility warning and other related errors. The goal of\r\nthis page is describe why this change was made and how you can fix\r\ncode that is affected by it. It also provides a place to ask questions\r\nor register a complaint if you feel the change should not be made. For\r\nmore information on the policy around future-compatibility warnings,\r\nsee our [breaking change policy guidelines](https://github.com/rust-lang/rfcs/blob/master/text/1589-rustc-bug-fix-procedure.md).\r\n#### What is the warning for?\r\n\r\nRust 1.0 accepted a number of patterns -- and in particular accepted constant in patterns --\r\nin a broader range of situations that was originally intended. [RFC 1445](https://github.com/rust-lang/rfcs/pull/1445) spelled out\r\nsome restrictions on what kinds of constants can be used in patterns, at least until the\r\nfinal semantics are affirmatively decided. Among the changes was the ruling that floating\r\npoint values should not be usable in patterns.\r\n\r\nThis means that a match like this:\r\n\r\n``` rust\r\nmatch foo() {\r\n    3.0 => ...,\r\n    _ => ...\r\n}\r\n```\r\n\r\nshould be written to:\r\n\r\n``` rust\r\nmatch foo() {\r\n    x if x == 3.0 => ...,\r\n    _ => ...\r\n}\r\n```\r\n\r\nAmong other things, this clarifies that the semantics are the same as `==` normally uses. So e.g. `0` and `-0` compare equal, and `NaN` compares unequal to everything (including itself).\r\n#### When will this warning become a hard error?\r\n\r\nAt the beginning of each 6-week release cycle, the Rust compiler team\r\nwill review the set of outstanding future compatibility warnings and\r\nnominate some of them for **Final Comment Period**. Toward the end of\r\nthe cycle, we will review any comments and make a final determination\r\nwhether to convert the warning into a hard error or remove it\r\nentirely.\r\n#### Current status\r\n- [x] https://github.com/rust-lang/rust/pull/32199 introduces the `illegal_floating_point_constant_pattern` lint as warn-by-default\r\n- [x] https://github.com/rust-lang/rust/pull/36894 makes the `illegal_floating_point_constant_pattern` lint deny-by-default\r\n- [x] https://github.com/rust-lang/rust/pull/42136 makes the `illegal_floating_point_constant_pattern` lint a hard error # # #\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36890/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36890/timeline", "performed_via_github_app": null, "state_reason": "completed"}