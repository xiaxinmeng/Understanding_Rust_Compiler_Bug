{"url": "https://api.github.com/repos/rust-lang/rust/issues/42713", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42713/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42713/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42713/events", "html_url": "https://github.com/rust-lang/rust/issues/42713", "id": 236646924, "node_id": "MDU6SXNzdWUyMzY2NDY5MjQ=", "number": 42713, "title": "rustc 1.16.0 test failure - run-make/linker-output-non-utf8", "user": {"login": "daym", "id": 7755349, "node_id": "MDQ6VXNlcjc3NTUzNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/7755349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daym", "html_url": "https://github.com/daym", "followers_url": "https://api.github.com/users/daym/followers", "following_url": "https://api.github.com/users/daym/following{/other_user}", "gists_url": "https://api.github.com/users/daym/gists{/gist_id}", "starred_url": "https://api.github.com/users/daym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daym/subscriptions", "organizations_url": "https://api.github.com/users/daym/orgs", "repos_url": "https://api.github.com/users/daym/repos", "events_url": "https://api.github.com/users/daym/events{/privacy}", "received_events_url": "https://api.github.com/users/daym/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-06-17T08:07:20Z", "updated_at": "2017-06-17T08:54:52Z", "closed_at": "2017-06-17T08:54:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "We are trying to enable rustc tests in the Guix distribution and are now down to two test failures total.\r\n\r\nOne test failure is in run-make/linker-output-non-utf8.\r\n\r\nThis seems to test whether funny characters in directory names work.\r\n\r\nUnfortunately I don't know what the cause is (i.e. which other package we should update). Therefore I ask here: What can I do about it? The person who wrote the test probably knows :)\r\n\r\nI've found https://github.com/rust-lang/rust/issues/29122 https://github.com/wthrowe/rust/commit/19664fdf8d1b8fc5fd3b359c2440625b2b4d8cec  https://github.com/rust-lang/rust/pull/29134 about it.\r\n\r\nOutput follows:\r\n```\r\ntest [run-make] run-make/linker-output-non-utf8 ... FAILED\r\n---- [run-make] run-make/linker-output-non-utf8 stdout ----\r\n        \r\nerror: make failed\r\nstatus: exit code: 2\r\ncommand: \"make\"\r\nstdout:\r\n------------------------------------------\r\nmake[1]: Entering directory '/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/src/test/run-make/linker-output-non-utf8'\r\nLD_LIBRARY_PATH=\"/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu:/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/lib:/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/lib:/gnu/store/ad2cqzpfvcs08iackla9npif4k1nsqad-llvm-3.9.1/lib:\" '/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/bin/rustc' --out-dir /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu -L /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu  library.rs\r\nmkdir /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu/zzz$'\\xff'\r\nmv /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu/liblibrary.a /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu/zzz$'\\xff'\r\nLIBRARY_PATH=/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu/zzz$'\\xff' LD_LIBRARY_PATH=\"/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu:/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/lib:/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/lib:/gnu/store/ad2cqzpfvcs08iackla9npif4k1nsqad-llvm-3.9.1/lib:\" '/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/stage2/bin/rustc' --out-dir /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu -L /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/x86_64-unknown-linux-gnu/test/run-make/linker-output-non-utf8.stage2-x86_64-unknown-linux-gnu  exec.rs 2>&1 | grep this_symbol_not_defined\r\nmake[1]: Leaving directory '/tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/src/test/run-make/linker-output-non-utf8'\r\n\r\n------------------------------------------\r\nstderr:\r\n------------------------------------------\r\nmake[1]: warning: jobserver unavailable: using -j1.  Add '+' to parent make rule.\r\nnote: link against the following native artifacts when linking against this static library\r\n\r\nnote: the order and any duplication can be significant on some platforms, and so may need to be preserved\r\n\r\nnote: library: dl\r\n\r\nnote: library: pthread\r\n\r\nnote: library: gcc_s\r\n\r\nnote: library: c\r\n\r\nnote: library: m\r\n\r\nnote: library: rt\r\n\r\nnote: library: util\r\n\r\nmake[1]: *** [Makefile:22: all] Error 1\r\n\r\n------------------------------------------\r\n\r\nthread '[run-make] run-make/linker-output-non-utf8' panicked at 'explicit panic', /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/src/tools/compiletest/src/runtest.rs:2474\r\nstack backtrace:\r\n   1:     0x7ffff7499d4c - std::sys::imp::backtrace::tracing::imp::write::h59f11508bbbb14ed\r\n                        at /tmp/guix-build-rustc-1.16.0.drv-0/rustc-1.16.0-src/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n```\r\n", "closed_by": {"login": "daym", "id": 7755349, "node_id": "MDQ6VXNlcjc3NTUzNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/7755349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daym", "html_url": "https://github.com/daym", "followers_url": "https://api.github.com/users/daym/followers", "following_url": "https://api.github.com/users/daym/following{/other_user}", "gists_url": "https://api.github.com/users/daym/gists{/gist_id}", "starred_url": "https://api.github.com/users/daym/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daym/subscriptions", "organizations_url": "https://api.github.com/users/daym/orgs", "repos_url": "https://api.github.com/users/daym/repos", "events_url": "https://api.github.com/users/daym/events{/privacy}", "received_events_url": "https://api.github.com/users/daym/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42713/timeline", "performed_via_github_app": null, "state_reason": "completed"}