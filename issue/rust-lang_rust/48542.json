{"url": "https://api.github.com/repos/rust-lang/rust/issues/48542", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48542/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48542/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48542/events", "html_url": "https://github.com/rust-lang/rust/issues/48542", "id": 300109654, "node_id": "MDU6SXNzdWUzMDAxMDk2NTQ=", "number": 48542, "title": "Compiler panic while building alga", "user": {"login": "rocurley", "id": 1490832, "node_id": "MDQ6VXNlcjE0OTA4MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1490832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rocurley", "html_url": "https://github.com/rocurley", "followers_url": "https://api.github.com/users/rocurley/followers", "following_url": "https://api.github.com/users/rocurley/following{/other_user}", "gists_url": "https://api.github.com/users/rocurley/gists{/gist_id}", "starred_url": "https://api.github.com/users/rocurley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rocurley/subscriptions", "organizations_url": "https://api.github.com/users/rocurley/orgs", "repos_url": "https://api.github.com/users/rocurley/repos", "events_url": "https://api.github.com/users/rocurley/events{/privacy}", "received_events_url": "https://api.github.com/users/rocurley/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-02-26T04:58:20Z", "updated_at": "2018-02-27T07:53:00Z", "closed_at": "2018-02-27T07:53:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "<short summary of the bug>\r\n\r\nI tried this code:\r\n\r\n```\r\ngit clone git@github.com:sebcrozet/alga.git\r\ncd alga\r\nexport RUST_BACKTRACE=full\r\ncargo build --verbose\r\n```\r\n\r\nI expected to see this happen: Alga builds successfully, or fails to build with compile errors.\r\n\r\nInstead, this happened: The compiler panicked.\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.26.0-nightly (322d7f7b9 2018-02-25)\r\nbinary: rustc\r\ncommit-hash: 322d7f7b97f1672bade31e1c43d5753e0e45a1a8\r\ncommit-date: 2018-02-25\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.26.0-nightly\r\nLLVM version: 6.0\r\n```\r\n\r\nBacktrace:\r\n\r\n\r\n\r\n```\r\n       Fresh unicode-xid v0.0.4\r\n       Fresh num-traits v0.2.0\r\n       Fresh cfg-if v0.1.2\r\n       Fresh utf8-ranges v0.1.3\r\n       Fresh approx v0.1.1\r\n       Fresh regex-syntax v0.3.9\r\n       Fresh rustc-serialize v0.3.24\r\n       Fresh winapi v0.2.8\r\n       Fresh libc v0.2.36\r\n       Fresh winapi-build v0.1.1\r\n       Fresh quote v0.3.15\r\n       Fresh edit-distance v1.0.0\r\n       Fresh synom v0.11.3\r\n       Fresh num-traits v0.1.43\r\n       Fresh log v0.4.1\r\n       Fresh num-complex v0.1.42\r\n       Fresh memchr v0.1.11\r\n       Fresh rand v0.4.2\r\n       Fresh syn v0.11.11\r\n   Compiling log v0.3.9\r\n   Compiling alga v0.5.3 (file:///home/roger/alga/alga)\r\n     Running `rustc --crate-name alga alga/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=7d8a4bc96630a5c1 -C extra-filename=-7d8a4bc96630a5c1 --out-dir /home/roger/alga/target/debug/deps -C incremental=/home/roger/alga/target/debug/incremental -L dependency=/home/roger/alga/target/debug/deps --extern num_complex=/home/roger/alga/target/debug/deps/libnum_complex-070709ff52c451f1.rlib --extern approx=/home/roger/alga/target/debug/deps/libapprox-c539f28333436395.rlib --extern num_traits=/home/roger/alga/target/debug/deps/libnum_traits-40976005af172ca0.rlib`\r\n     Running `rustc --crate-name log /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/log-0.3.9/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=\"default\"' --cfg 'feature=\"log\"' --cfg 'feature=\"use_std\"' -C metadata=744c229531176343 -C extra-filename=-744c229531176343 --out-dir /home/roger/alga/target/debug/deps -L dependency=/home/roger/alga/target/debug/deps --extern log=/home/roger/alga/target/debug/deps/liblog-5e7b6585e95ec20d.rlib --cap-lints allow`\r\nwarning: unused macro definition\r\n   --> alga/src/macros.rs:143:1\r\n    |\r\n143 | / macro_rules! impl_approx_eq {\r\n144 | |     ($V:expr; $($T:ty),* $(,)*) => {\r\n145 | |         $(impl ApproxEq for $T {\r\n146 | |             type Eps = $T;\r\n...   |\r\n158 | |     }\r\n159 | | }\r\n    | |_^\r\n    |\r\n    = note: #[warn(unused_macros)] on by default\r\n\r\nwarning: unused macro definition\r\n  --> alga/src/general/one_operator.rs:84:1\r\n   |\r\n84 | / macro_rules! impl_quasigroup(\r\n85 | |     (<$M:ty> for $($T:tt)+) => {\r\n86 | |         impl_marker!($crate::general::AbstractQuasigroup<$M>; $($T)+);\r\n87 | |     }\r\n88 | | );\r\n   | |__^\r\n\r\nwarning: unused macro definition\r\n   --> alga/src/general/one_operator.rs:182:1\r\n    |\r\n182 | / macro_rules! impl_loop(\r\n183 | |     (<$M:ty> for $($T:tt)+) => {\r\n184 | |         impl_quasigroup!(<$M> for $($T)+);\r\n185 | |         impl_marker!($crate::general::AbstractLoop<$M>; $($T)+);\r\n186 | |     }\r\n187 | | );\r\n    | |__^\r\n\r\nthread 'rustc' panicked at 'assertion failed: `(left != right)`\r\n  left: `ParamEnv(Binder(ProjectionPredicate(ProjectionTy { substs: Slice([<Self as linear::vector::EuclideanSpace>::Coordinates, <Self as linear::vector::EuclideanSpace>::Real]), item_def_id: DefId(2/0:893 ~ core[ffe9]::ops[0]::arith[0]::Mul[0]::Output[0]) }, <Self as linear::vector::EuclideanSpace>::Coordinates)))`,\r\n right: `ParamEnv(Binder(ProjectionPredicate(ProjectionTy { substs: Slice([<Self as linear::vector::EuclideanSpace>::Coordinates, <Self as linear::vector::EuclideanSpace>::Real]), item_def_id: DefId(2/0:893 ~ core[ffe9]::ops[0]::arith[0]::Mul[0]::Output[0]) }, <Self as linear::vector::EuclideanSpace>::Coordinates)))`', librustc/traits/project.rs:146:17\r\nstack backtrace:\r\n       Fresh aho-corasick v0.5.3\r\n   Compiling rand v0.3.22\r\n     Running `rustc --crate-name rand /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.3.22/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=cdfe1b40051a65c0 -C extra-filename=-cdfe1b40051a65c0 --out-dir /home/roger/alga/target/debug/deps -L dependency=/home/roger/alga/target/debug/deps --extern libc=/home/roger/alga/target/debug/deps/liblibc-82c069f3a2b79d60.rlib --extern rand=/home/roger/alga/target/debug/deps/librand-b4a86ac63f7e2602.rlib --cap-lints allow`\r\n   0:     0x7f1be23fc083 - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::hc40e1d8049414718\r\n                               at libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1:     0x7f1be23f35c4 - std::sys_common::backtrace::_print::hf0e087caed6cb7b0\r\n                               at libstd/sys_common/backtrace.rs:71\r\n   2:     0x7f1be23f8d0d - std::panicking::default_hook::{{closure}}::h51b503c8121f2e1c\r\n                               at libstd/sys_common/backtrace.rs:59\r\n                               at libstd/panicking.rs:206\r\n   3:     0x7f1be23f8a09 - std::panicking::default_hook::h92f8d7a75f029a40\r\n                               at libstd/panicking.rs:222\r\n   4:     0x7f1bdee728dd - core::ops::function::Fn::call::h6f1946f7b82ebda6\r\n   5:     0x7f1be23f91a9 - std::panicking::rust_panic_with_hook::hd9e2db57fe6c41ab\r\n                               at libstd/panicking.rs:401\r\n   6:     0x7f1be23f8f92 - std::panicking::begin_panic_fmt::he73ce2d8bf11fd27\r\n                               at libstd/panicking.rs:347\r\n   7:     0x7f1bdf1847e2 - rustc::traits::project::ProjectionTyCandidateSet::push_candidate::ha024fea861181222\r\n   8:     0x7f1bdf188dd2 - rustc::traits::project::opt_normalize_projection_type::h02002e97c58b49f0\r\n   9:     0x7f1bdf187d43 - rustc::traits::project::normalize_projection_type::h5e7902796a371a8d\r\n  10:     0x7f1bdf18762c - <rustc::traits::project::AssociatedTypeNormalizer<'a, 'b, 'gcx, 'tcx> as rustc::ty::fold::TypeFolder<'gcx, 'tcx>>::fold_ty::he381d91bc09bdb67\r\n  11:     0x7f1bdf20e43a - rustc::ty::subst::<impl rustc::ty::fold::TypeFoldable<'tcx> for &'tcx rustc::ty::Slice<rustc::ty::subst::Kind<'tcx>>>::super_fold_with::ha71b815487303d31\r\n  12:     0x7f1bdf235bae - rustc::ty::structural_impls::<impl rustc::ty::fold::TypeFoldable<'tcx> for rustc::ty::Predicate<'tcx>>::super_fold_with::hea4902f777d2175b\r\n  13:     0x7f1bdf1b429c - rustc::traits::structural_impls::<impl rustc::ty::fold::TypeFoldable<'tcx> for rustc::traits::Obligation<'tcx, O>>::super_fold_with::h1ba5b2b2fe1621e4\r\n  14:     0x7f1bdf186a22 - rustc::traits::project::normalize_with_depth::hf81b47cb9116b1c3\r\n  15:     0x7f1bdf211c42 - rustc::ty::wf::WfPredicates::normalize::{{closure}}::h71ad22c86f3c0522\r\n  16:     0x7f1bdefd6999 - <core::iter::FlattenCompat<I, U> as core::iter::iterator::Iterator>::next::h94fe5fc1c26c92de\r\n  17:     0x7f1bdee603d7 - <alloc::vec::Vec<T>>::extend_desugared::h8b4f0c1acfe220ed\r\n  18:     0x7f1bdefccbd2 - <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T, I>>::from_iter::h6837c8edade6e005\r\n  19:     0x7f1bdf211a34 - rustc::ty::wf::predicate_obligations::h9c1277faf834c873\r\n  20:     0x7f1be10945b3 - rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor::check_where_clauses::h1041071718cea538\r\n  21:     0x7f1be108c8d3 - rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor::check_item_well_formed::hf288ce8ced63b0b9\r\n  22:     0x7f1be10957a8 - <rustc_typeck::check::wfcheck::CheckTypeWellFormedVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'v>>::visit_item::h1c404553f56c4f6d\r\n  23:     0x7f1be10fda88 - rustc_typeck::check_crate::{{closure}}::he4ecaea81fbca6c0\r\n  24:     0x7f1be10f979c - rustc_typeck::check_crate::ha126f305510d32a8\r\n  25:     0x7f1be27454c9 - rustc::ty::context::TyCtxt::create_and_enter::hd9afe302f04a8060\r\n  26:     0x7f1be27a652e - rustc_driver::driver::compile_input::hf08ee19e2779d9bb\r\n  27:     0x7f1be27c2c5a - rustc_driver::run_compiler::hb8a2a908a67aef0b\r\n  28:     0x7f1be26ee6ea - std::sys_common::backtrace::__rust_begin_short_backtrace::hf2003ffe9c7c219d\r\n  29:     0x7f1be2411c6e - __rust_maybe_catch_panic\r\n                               at libpanic_unwind/lib.rs:102\r\n  30:     0x7f1be2727936 - <F as alloc::boxed::FnBox<A>>::call_box::h6eec575c3921fe72\r\n  31:     0x7f1be240902b - std::sys::unix::thread::Thread::new::thread_start::h2d04eaf7b6bb3a88\r\n                               at /checkout/src/liballoc/boxed.rs:793\r\n                               at libstd/sys_common/thread.rs:24\r\n                               at libstd/sys/unix/thread.rs:90\r\n  32:     0x7f1bdd2f76b9 - start_thread\r\n  33:     0x7f1be20ca3dc - clone\r\n  34:                0x0 - <unknown>\r\n   Compiling compiletest_rs v0.2.10\r\n     Running `rustc --crate-name compiletest_rs /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=afc0fa449a30a718 -C extra-filename=-afc0fa449a30a718 --out-dir /home/roger/alga/target/debug/deps -L dependency=/home/roger/alga/target/debug/deps --extern rustc_serialize=/home/roger/alga/target/debug/deps/librustc_serialize-b181cb2d64ae0c9e.rlib --extern log=/home/roger/alga/target/debug/deps/liblog-744c229531176343.rlib --cap-lints allow`\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.26.0-nightly (322d7f7b9 2018-02-25) running on x86_64-unknown-linux-gnu\r\n\r\nerror: Could not compile `alga`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name alga alga/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=7d8a4bc96630a5c1 -C extra-filename=-7d8a4bc96630a5c1 --out-dir /home/roger/alga/target/debug/deps -C incremental=/home/roger/alga/target/debug/incremental -L dependency=/home/roger/alga/target/debug/deps --extern num_complex=/home/roger/alga/target/debug/deps/libnum_complex-070709ff52c451f1.rlib --extern approx=/home/roger/alga/target/debug/deps/libapprox-c539f28333436395.rlib --extern num_traits=/home/roger/alga/target/debug/deps/libnum_traits-40976005af172ca0.rlib` (exit code: 101)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror[E0432]: unresolved import `test::TestPaths`\r\n  --> /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs:34:5\r\n   |\r\n34 | use test::TestPaths;\r\n   |     ^^^^^^^^^^^^^^^ no `TestPaths` in the root. Did you mean to use `TestOpts`?\r\n\r\nerror[E0432]: unresolved import `test::TestPaths`\r\n  --> /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/runtest.rs:20:5\r\n   |\r\n20 | use test::TestPaths;\r\n   |     ^^^^^^^^^^^^^^^ no `TestPaths` in the root. Did you mean to use `TestOpts`?\r\n\r\nerror[E0560]: struct `test::TestOpts` has no field named `quiet`\r\n   --> /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs:100:9\r\n    |\r\n100 |         quiet: config.quiet,\r\n    |         ^^^^^^ `test::TestOpts` does not have this field\r\n    |\r\n    = note: available fields are: `list`, `filter`, `filter_exact`, `run_ignored`, `run_tests` ... and 8 others\r\n\r\nerror[E0593]: closure is expected to take 0 arguments, but it takes a single 0-tuple as argument\r\n   --> /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs:263:21\r\n    |\r\n263 |       test::DynTestFn(Box::new(move |()| {\r\n    |                       ^        --------- takes a single 0-tuple as argument\r\n    |  _____________________|\r\n    | |\r\n264 | |         runtest::run(config, &testpaths)\r\n265 | |     }))\r\n    | |______^ expected closure that takes 0 arguments\r\n    |\r\n    = note: required because of the requirements on the impl of `std::boxed::FnBox<()>` for `[closure@/home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs:263:30: 265:6 config:_, testpaths:_]`\r\n    = note: required for the cast to the object type `std::boxed::FnBox<(), Output=()> + std::marker::Send`\r\nhelp: change the closure to take multiple arguments instead of a single tuple\r\n    |\r\n263 |     test::DynTestFn(Box::new(|| {\r\n    |                              ^^\r\n\r\nerror: aborting due to 4 previous errors\r\n\r\nerror: Could not compile `compiletest_rs`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name compiletest_rs /home/roger/.cargo/registry/src/github.com-1ecc6299db9ec823/compiletest_rs-0.2.10/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=afc0fa449a30a718 -C extra-filename=-afc0fa449a30a718 --out-dir /home/roger/alga/target/debug/deps -L dependency=/home/roger/alga/target/debug/deps --extern rustc_serialize=/home/roger/alga/target/debug/deps/librustc_serialize-b181cb2d64ae0c9e.rlib --extern log=/home/roger/alga/target/debug/deps/liblog-744c229531176343.rlib --cap-lints allow` (exit code: 101)\r\n```", "closed_by": {"login": "ishitatsuyuki", "id": 12389383, "node_id": "MDQ6VXNlcjEyMzg5Mzgz", "avatar_url": "https://avatars.githubusercontent.com/u/12389383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitatsuyuki", "html_url": "https://github.com/ishitatsuyuki", "followers_url": "https://api.github.com/users/ishitatsuyuki/followers", "following_url": "https://api.github.com/users/ishitatsuyuki/following{/other_user}", "gists_url": "https://api.github.com/users/ishitatsuyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitatsuyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitatsuyuki/subscriptions", "organizations_url": "https://api.github.com/users/ishitatsuyuki/orgs", "repos_url": "https://api.github.com/users/ishitatsuyuki/repos", "events_url": "https://api.github.com/users/ishitatsuyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitatsuyuki/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48542/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48542/timeline", "performed_via_github_app": null, "state_reason": "completed"}