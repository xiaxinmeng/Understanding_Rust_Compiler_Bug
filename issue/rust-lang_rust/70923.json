{"url": "https://api.github.com/repos/rust-lang/rust/issues/70923", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/70923/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/70923/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/70923/events", "html_url": "https://github.com/rust-lang/rust/issues/70923", "id": 596494333, "node_id": "MDU6SXNzdWU1OTY0OTQzMzM=", "number": 70923, "title": "Some errors only show up with `cargo build` not `cargo check`", "user": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-04-08T11:05:10Z", "updated_at": "2020-04-30T18:15:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is partially due to the fact that our `analysis` query https://github.com/rust-lang/rust/blob/537ccdf3ac44c8c7a8d36cbdbe6fb224afabb7ae/src/librustc_interface/passes.rs#L775 does not invoke the `optimized_mir` query on all items in the current crate, and also because we don't run monomorphization when building bin crates.\r\n\r\n* [ ] run `optimized_mir` query in `analysis`\r\n    * this may cause slowdowns for `cargo check` because we'd be doing optimizations now\r\n    * All const propagation lints are emitted in `optimized_mir`, but we may add more in the future.\r\n* [ ] run monomorphization where possible.\r\n    * Not sure how useful this is, it will only give us additional lints in very specific situations. (e.g. when we subtract something form an associated constant, we may get an overflow error depending on the value of the constant).\r\n    * This will also be significantly more expensive than just running `optimized_mir`\r\n\r\ncc @Centril ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/70923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/70923/timeline", "performed_via_github_app": null, "state_reason": null}