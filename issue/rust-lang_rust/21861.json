{"url": "https://api.github.com/repos/rust-lang/rust/issues/21861", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21861/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21861/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21861/events", "html_url": "https://github.com/rust-lang/rust/issues/21861", "id": 56202168, "node_id": "MDU6SXNzdWU1NjIwMjE2OA==", "number": 21861, "title": "Use of regex! involves .so file, which executable does not find.", "user": {"login": "John-Nagle", "id": 942608, "node_id": "MDQ6VXNlcjk0MjYwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/942608?v=4", "gravatar_id": "", "url": "https://api.github.com/users/John-Nagle", "html_url": "https://github.com/John-Nagle", "followers_url": "https://api.github.com/users/John-Nagle/followers", "following_url": "https://api.github.com/users/John-Nagle/following{/other_user}", "gists_url": "https://api.github.com/users/John-Nagle/gists{/gist_id}", "starred_url": "https://api.github.com/users/John-Nagle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/John-Nagle/subscriptions", "organizations_url": "https://api.github.com/users/John-Nagle/orgs", "repos_url": "https://api.github.com/users/John-Nagle/repos", "events_url": "https://api.github.com/users/John-Nagle/events{/privacy}", "received_events_url": "https://api.github.com/users/John-Nagle/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2015-02-02T06:50:33Z", "updated_at": "2015-02-02T19:55:38Z", "closed_at": "2015-02-02T17:05:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "(Using rustc 1.0.0-nightly (1d00c545e 2015-01-30 19:56:34 +0000)) \n\nProgram using an external crate which uses \"regex!\" builds normally, but upon execution: \n\"target/rss_client: error while loading shared libraries: libregex_macros-fdf5a2d7af19fd78.so: cannot open shared object file: No such file or directory\"\n\nThe desired .so file is in target/deps, and the executable doesn't look there unless I set LD_LIBRARY_PATH.  Then the program runs.\n\nBut why is \"regex\" in a .so file? Here's my target/deps directory:\n\n```\nlibchrono-2760812556f7a811.rlib\nlibcookie-4a08a2c06bb5c4fc.rlib\nlibgcc-3361713823cacea0.rlib\nlibhyper-9e6a74d72671a096.rlib\nliblibc-6b537f2898b2a028.rlib\nliblog-b7487854e865255d.rlib\nlibmatches-68db25b520030534.rlib\nlibmime-115ca8125c42dc12.rlib\nlibmucell-178e4fc583386697.rlib\nlibopenssl-ff2380beb920b0db.rlib\nlibopenssl-sys-1d498ee6f4e8d500.rlib\nlibpkg-config-be6313c85913bcf0.rlib\nlibregex-50925f1e98b93309.rlib\nlibregex_macros-fdf5a2d7af19fd78.so <---- How did that get in there?\nlibrustc-serialize-181d5959361aa206.rlib\nlibtime-2215e3ac75eaa2c7.rlib\nlibunicase-88de2458e97b894d.rlib\nlibunsafe-any-3f018797a3613438.rlib\nliburl-4c384fb33b0bde93.rlib\nlibxml-25cb934bf93db2fd.rlib\n```\n\nEverything else is statically linked, and normally nothing in the \"deps\" directory is needed for execution. Why did \"cargo build\" generate a \".so\" file? Did someone build \"regex\" as a dynamic library by mistake? I've been looking at the relevant .toml files for something that would cause this, but I'm not finding it.\n\nWhere is static vs. dynamic library generation under Cargo control documented, anyway? Not finding anything in \"http://doc.crates.io/guide.html\". Obviously there's something somewhere which says \"make this a shared library\". But where?\n\nAgain, the program works if LD_LIBRARY_PATH includes the directory with that .so file. \n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21861/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21861/timeline", "performed_via_github_app": null, "state_reason": "completed"}