{"url": "https://api.github.com/repos/rust-lang/rust/issues/47872", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47872/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47872/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47872/events", "html_url": "https://github.com/rust-lang/rust/issues/47872", "id": 292730469, "node_id": "MDU6SXNzdWUyOTI3MzA0Njk=", "number": 47872, "title": "configure: Give a better error when the local rustc version is too old", "user": {"login": "paulmenzel", "id": 9318792, "node_id": "MDQ6VXNlcjkzMTg3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9318792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmenzel", "html_url": "https://github.com/paulmenzel", "followers_url": "https://api.github.com/users/paulmenzel/followers", "following_url": "https://api.github.com/users/paulmenzel/following{/other_user}", "gists_url": "https://api.github.com/users/paulmenzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmenzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmenzel/subscriptions", "organizations_url": "https://api.github.com/users/paulmenzel/orgs", "repos_url": "https://api.github.com/users/paulmenzel/repos", "events_url": "https://api.github.com/users/paulmenzel/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmenzel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 419557634, "node_id": "MDU6TGFiZWw0MTk1NTc2MzQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-medium", "name": "E-medium", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Medium / intermediate"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-01-30T10:30:34Z", "updated_at": "2023-06-19T20:42:57Z", "closed_at": "2023-06-19T20:42:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$ wget https://static.rust-lang.org/dist/rustc-1.23.0-src.tar.gz\r\nfetching https://static.rust-lang.org/dist/rustc-1.23.0-src.tar.gz\r\n--2018-01-30 11:12:15--  https://static.rust-lang.org/dist/rustc-1.23.0-src.tar.gz\r\nResolving static.rust-lang.org... 52.222.253.135, 52.222.253.206, 52.222.253.85, ...\r\nConnecting to static.rust-lang.org|52.222.253.135|:443... connected.\r\nHTTP request sent, awaiting response... 200 OK\r\nLength: 60010149 (57M) [application/x-tar]\r\nSaving to: \u2018/dev/shm/bee-root/rustc/files/rustc-1.23.0-src.tar.gz\u2019\r\n\r\n/dev/shm/bee-root/rustc/fil 100%[=========================================>]  57.23M  4.64MB/s    in 15s\r\n\r\n2018-01-30 11:12:30 (3.93 MB/s) - \u2018/dev/shm/bee-root/rustc/files/rustc-1.23.0-src.tar.gz\u2019 saved [60010149/60010149]\r\n\r\n-rw-r--r-- 1 root system 60010149 Jan  4 17:02 /dev/shm/bee-root/rustc/files/rustc-1.23.0-src.tar.gz\r\n$ # extract and change directory\r\n$ ./configure --prefix=${PREFIX} \\\r\n                   --mandir=${MANDIR} \\\r\n                   --libdir=${LIBDIR} \\\r\n                   --enable-local-rust \\\r\n                   --disable-rpath \\\r\n                   --enable-extended \\\r\n                   --disable-codegen-tests\r\nconfigure: processing command line\r\nconfigure:\r\nconfigure: build.extended       := True\r\nconfigure: rust.rpath           := False\r\nconfigure: install.libdir       := /usr/lib\r\nconfigure: rust.codegen-tests   := False\r\nconfigure: install.prefix       := /usr\r\nconfigure: build.rustc          := /usr/bin/rustc\r\nconfigure: build.cargo          := /usr/bin/cargo\r\nconfigure: install.mandir       := /usr/share/man\r\nconfigure: build.configure-args := ['--prefix=/usr', '--mandir=/usr/share/man', ' ...\r\nconfigure:\r\nconfigure: writing `config.toml` in current directory\r\nconfigure:\r\nconfigure: run `python /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/x.py --help`\r\nconfigure:\r\n$ make -j63\r\ninfo: looks like you are running this command under `sudo`\r\n      and so in order to preserve your $HOME this will now\r\n      use vendored sources by default. Note that if this\r\n      does not work you should run a normal build first\r\n      before running a command like `sudo make install`\r\n   Compiling serde v1.0.21   \r\n   Compiling itoa v0.3.4\r\n   Compiling getopts v0.2.15 \r\n   Compiling unicode-xid v0.0.4\r\n   Compiling lazy_static v0.2.11\r\n   Compiling dtoa v0.4.2\r\n   Compiling quote v0.3.15   \r\n   Compiling cc v1.0.3\r\n   Compiling num-traits v0.1.40\r\n   Compiling cfg-if v0.1.2\r\n   Compiling libc v0.2.33\r\n   Compiling synom v0.11.3\r\n   Compiling syn v0.11.11\r\n   Compiling filetime v0.1.14\r\n   Compiling num_cpus v1.7.0\r\n   Compiling build_helper v0.1.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/build_helper)\r\n   Compiling cmake v0.1.28\r\n   Compiling serde_derive_internals v0.17.0\r\n   Compiling serde_derive v1.0.21\r\n   Compiling serde_json v1.0.6\r\n   Compiling toml v0.4.5\r\n   Compiling bootstrap v0.0.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/bootstrap)\r\n    Finished dev [unoptimized] target(s) in 36.55 secs\r\nBuilding stage0 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n   Compiling cfg-if v0.1.2\r\n   Compiling unwind v0.0.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libunwind)\r\n   Compiling libc v0.2.33\r\n   Compiling core v0.0.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore)\r\n   Compiling cc v1.0.3\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1049:13\r\n     |\r\n1049 |         (0..=self.end).get(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1054:13\r\n     |\r\n1054 |         (0..=self.end).get_mut(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1059:13\r\n     |\r\n1059 |         (0..=self.end).get_unchecked(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1064:13\r\n     |\r\n1064 |         (0..=self.end).get_unchecked_mut(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1069:13\r\n     |\r\n1069 |         (0..=self.end).index(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\nerror: expected one of `)` or `,`, found `=`\r\n    --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/slice/mod.rs:1074:13\r\n     |\r\n1074 |         (0..=self.end).index_mut(slice)\r\n     |             ^ expected one of `)` or `,` here\r\n\r\n   Compiling filetime v0.1.14\r\n   Compiling build_helper v0.1.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/build_helper)\r\nerror[E0522]: definition of an unknown language item: `generator`.\r\n   --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/ops/generator.rs:76:1\r\n    |\r\n76  | / pub trait Generator {\r\n77  | |     /// The type of value this generator yields.\r\n78  | |     ///\r\n79  | |     /// This associated type corresponds to the `yield` expression and the\r\n...   |\r\n119 | |     fn resume(&mut self) -> GeneratorState<Self::Yield, Self::Return>;\r\n120 | | }\r\n    | |_^\r\n\r\nerror[E0522]: definition of an unknown language item: `generator_state`.\r\n  --> /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/ops/generator.rs:19:1\r\n   |\r\n19 | / pub enum GeneratorState<Y, R> {\r\n20 | |     /// The generator suspended with a value.\r\n21 | |     ///\r\n22 | |     /// This state indicates that a generator has been suspended, and typically\r\n...  |\r\n33 | |     Complete(R),\r\n34 | | }\r\n   | |_^\r\nerror: aborting due to 8 previous errors\r\n\r\n   Compiling std v0.0.0 (file:///dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libstd)\r\nerror: Could not compile `core`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/dev/shm/bee-root/rustc/rustc-1.23.0-0/build/build/bootstrap/debug/rustc --crate-name core /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libcore/lib.rs --error-format json --crate-type lib --emit=dep-info,link -C opt-level=2 -C metadata=4474a6595f5a1cf9 -C extra-filename=-4474a6595f5a1cf9 --out-dir /dev/shm/bee-root/rustc/rustc-1.23.0-0/build/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/dev/shm/bee-root/rustc/rustc-1.23.0-0/build/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/dev/shm/bee-root/rustc/rustc-1.23.0-0/build/build/x86_64-unknown-linux-gnu/stage0-std/release/deps` (exit code: 101)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\nthread 'main' panicked at 'command did not execute successfully: \"/usr/bin/cargo\" \"build\" \"--target\" \"x86_64-unknown-linux-gnu\" \"--release\" \"--frozen\" \"--features\" \"panic-unwind jemalloc backtrace\" \"--manifest-path\" \"/dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/libstd/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101', /dev/shm/bee-root/rustc/rustc-1.23.0-0/source/src/bootstrap/compile.rs:882:8\r\nstack backtrace:\r\n   0: std::sys::imp::backtrace::tracing::imp::unwind_backtrace\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::_print\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/sys_common/backtrace.rs:71\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/sys_common/backtrace.rs:60\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:381\r\n   3: std::panicking::default_hook\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:397\r\n   4: std::panicking::rust_panic_with_hook\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:611\r\n   5: std::panicking::begin_panic\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:572\r\n   6: std::panicking::begin_panic_fmt\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:522\r\n   7: bootstrap::compile::run_cargo\r\n   8: <bootstrap::compile::Std as bootstrap::builder::Step>::run\r\n   9: bootstrap::builder::Builder::ensure\r\n  10: <bootstrap::compile::Test as bootstrap::builder::Step>::run\r\n  11: bootstrap::builder::Builder::ensure\r\n  12: <bootstrap::compile::Rustc as bootstrap::builder::Step>::run\r\n  13: bootstrap::builder::Builder::ensure\r\n  14: <bootstrap::compile::Assemble as bootstrap::builder::Step>::run\r\n  15: bootstrap::builder::Builder::ensure\r\n  16: bootstrap::builder::Builder::compiler\r\n  17: <bootstrap::compile::Assemble as bootstrap::builder::Step>::run\r\n  18: bootstrap::builder::Builder::ensure\r\n  19: bootstrap::builder::Builder::compiler\r\n  20: <bootstrap::compile::Std as bootstrap::builder::Step>::make_run\r\n  21: bootstrap::builder::StepDescription::maybe_run\r\n  22: bootstrap::builder::StepDescription::run\r\n  23: bootstrap::builder::Builder::run\r\n  24: bootstrap::Build::build\r\n  25: bootstrap::main\r\n  26: __rust_maybe_catch_panic\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libpanic_unwind/lib.rs:99\r\n  27: std::rt::lang_start\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panicking.rs:459\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/panic.rs:361\r\n             at /scratch/local/bee-root/rustc/rustc-1.21.0-2/source/src/libstd/rt.rs:61\r\n  28: main\r\n  29: __libc_start_main\r\n             at ../csu/libc-start.c:295\r\n  30: _start\r\n             at ../sysdeps/x86_64/start.S:120\r\nfailed to run: /dev/shm/bee-root/rustc/rustc-1.23.0-0/build/build/bootstrap/debug/bootstrap build\r\nBuild completed unsuccessfully in 0:00:43\r\nMakefile:22: recipe for target 'all' failed\r\nmake: *** [all] Error 1\r\n```", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47872/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47872/timeline", "performed_via_github_app": null, "state_reason": "completed"}