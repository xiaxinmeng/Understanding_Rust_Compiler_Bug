{"url": "https://api.github.com/repos/rust-lang/rust/issues/19208", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19208/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19208/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19208/events", "html_url": "https://github.com/rust-lang/rust/issues/19208", "id": 49785394, "node_id": "MDU6SXNzdWU0OTc4NTM5NA==", "number": 19208, "title": "ICE on questionable use of trait", "user": {"login": "mitsuhiko", "id": 7396, "node_id": "MDQ6VXNlcjczOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mitsuhiko", "html_url": "https://github.com/mitsuhiko", "followers_url": "https://api.github.com/users/mitsuhiko/followers", "following_url": "https://api.github.com/users/mitsuhiko/following{/other_user}", "gists_url": "https://api.github.com/users/mitsuhiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/mitsuhiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mitsuhiko/subscriptions", "organizations_url": "https://api.github.com/users/mitsuhiko/orgs", "repos_url": "https://api.github.com/users/mitsuhiko/repos", "events_url": "https://api.github.com/users/mitsuhiko/events{/privacy}", "received_events_url": "https://api.github.com/users/mitsuhiko/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-11-22T12:03:36Z", "updated_at": "2014-11-22T13:52:36Z", "closed_at": "2014-11-22T12:20:02Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code:\n\n``` rust\n#![feature(if_let, while_let)]\n\nuse std::io;\n\npub struct Test<W: Writer> {\n    writer: W,\n}\n\nimpl<W: Writer> Test<W> {\n\n    pub fn new(writer: W) -> Test<W> {\n        Test {\n            writer: writer,\n        }\n    }\n\n    pub fn write_something(&mut self) -> io::IoResult<()> {\n        try!(writeln!(self.writer, \"\"));\n        Ok(())\n    }\n}\n```\n\nProduces this very hard to understand error:\n\n```\n<std macros>:3:24: 18:34 error: type `W` cannot be dereferenced\n<std macros>:3         let dst = &mut *$dst;\n<std macros>:4         format_args!(|args| { dst.write_fmt(args) }, $($arg)*)\n<std macros>:5     })\n<std macros>:6 )\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'index out of bounds: the len is 6 but the index is 6', /Users/rustbuild/src/rust-buildbot/slave/nightly-mac/build/src/libsyntax/lib.rs:1\n\nstack backtrace:\n   1:        0x10e61aba2 - rt::backtrace::imp::write::h90a8813e205226e59it\n   2:        0x10e61dd3d - failure::on_fail::h02cd561a89cb7027gBt\n   3:        0x10e88df65 - unwind::begin_unwind_inner::h4bc3350c0517820112c\n   4:        0x10e88dbaf - unwind::begin_unwind_fmt::hd106a62827b11c87c0c\n   5:        0x10e88d952 - rust_begin_unwind\n   6:        0x10e8d8fec - panicking::panic_fmt::h17addcbe3c55edecaOl\n   7:        0x10e8e15b1 - panicking::panic_bounds_check::he446012f6f64f624IMl\n   8:        0x10c59c015 - codemap::FileMap::get_line::h765ba394c07c5a54m4E\n   9:        0x10c5ca703 - diagnostic::emit::hb066201a777f2165wvG\n  10:        0x10c5c6f98 - diagnostic::EmitterWriter.Emitter::emit::h165058475e3b3ec5lrG\n  11:        0x10c5c5785 - diagnostic::Handler::emit::hde0ac2d5b40efe25F8F\n  12:        0x10c5981ab - diagnostic::SpanHandler::span_err::h2eaa3c8ca5c5b97cEWF\n  13:        0x10b9df920 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message_str_with_expected::h6ee55cab43056003TKF\n  14:        0x10b92f921 - middle::typeck::infer::InferCtxt<'a, 'tcx>::type_error_message::h3d8733aff7464519dQF\n  15:        0x10b940539 - middle::typeck::check::check_expr_with_unifier::h40fb1c6e261626f5Nzm\n  16:        0x10b93e934 - middle::typeck::check::check_expr_with_unifier::h40fb1c6e261626f5Nzm\n  17:        0x10b96d0b3 - middle::typeck::check::check_decl_local::hfecf573d1629e05egto\n  18:        0x10b96d2a3 - middle::typeck::check::check_stmt::h837abcc8fc4466f6gvo\n  19:        0x10b8f41e8 - middle::typeck::check::check_block_with_expected::hb5675eefe857af90vzo\n  20:        0x10b93a760 - middle::typeck::check::check_expr_with_unifier::h40fb1c6e261626f5Nzm\n  21:        0x10b82e2db - middle::typeck::check::_match::check_match::h3caf386ed888768e5P8\n  22:        0x10b93a683 - middle::typeck::check::check_expr_with_unifier::h40fb1c6e261626f5Nzm\n  23:        0x10b8f4522 - middle::typeck::check::check_block_with_expected::hb5675eefe857af90vzo\n  24:        0x10b93a760 - middle::typeck::check::check_expr_with_unifier::h40fb1c6e261626f5Nzm\n  25:        0x10b96d2fa - middle::typeck::check::check_stmt::h837abcc8fc4466f6gvo\n  26:        0x10b8f41e8 - middle::typeck::check::check_block_with_expected::hb5675eefe857af90vzo\n  27:        0x10b8cdf00 - middle::typeck::check::check_fn::hd44de11a490be98ce0i\n  28:        0x10b8f0aae - middle::typeck::check::check_bare_fn::h3c7a1f5d35e30589jPi\n  29:        0x10b8f754f - middle::typeck::check::check_method_body::he0c86eb88bb45c1blkj\n  30:        0x10b8edb88 - middle::typeck::check::check_item::h4ddfa2a018f36791t9i\n  31:        0x10b8f07d0 - middle::typeck::check::check_item_types::h1ade2b1cc61bf6batOi\n  32:        0x10bc74826 - util::common::time::h8028586279873844585\n  33:        0x10bc73ca4 - middle::typeck::check_crate::h3a5b374f87cce2eecwM\n  34:        0x10b265393 - driver::driver::phase_3_run_analysis_passes::hdc8c835c5059844etfS\n  35:        0x10b2598bc - driver::driver::compile_input::h1998d439bb2aa565dWR\n  36:        0x10b2d7bc5 - driver::run_compiler::h8a3c490c622774caHUT\n  37:        0x10b2d639e - driver::run::closure.59807\n  38:        0x10b0edc5b - task::TaskBuilder<S>::try_future::closure.39061\n  39:        0x10b0edb53 - task::TaskBuilder<S>::spawn_internal::closure.39032\n  40:        0x10b0b17bd - task::NativeSpawner.Spawner::spawn::closure.2475\n  41:        0x10e8f082c - rust_try_inner\n  42:        0x10e8f0816 - rust_try\n  43:        0x10e88b707 - unwind::try::h9549aa28335b576amRc\n  44:        0x10e88b59c - task::Task::run::h7f22cfdcfa218bd192b\n  45:        0x10b0b15e3 - task::NativeSpawner.Spawner::spawn::closure.2399\n  46:        0x10e88cdd7 - thread::thread_start::h08cb83a10e608715foc\n  47:     0x7fff9260c2fc - _pthread_body\n  48:     0x7fff9260c279 - _pthread_body\n```\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19208/timeline", "performed_via_github_app": null, "state_reason": "completed"}