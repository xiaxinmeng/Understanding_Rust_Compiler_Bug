{"url": "https://api.github.com/repos/rust-lang/rust/issues/21909", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/21909/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/21909/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/21909/events", "html_url": "https://github.com/rust-lang/rust/issues/21909", "id": 56433274, "node_id": "MDU6SXNzdWU1NjQzMzI3NA==", "number": 21909, "title": "ICE: assertion failed: did.krate != ast::LOCAL_CRATE", "user": {"login": "matthewhammer", "id": 1183963, "node_id": "MDQ6VXNlcjExODM5NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/1183963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewhammer", "html_url": "https://github.com/matthewhammer", "followers_url": "https://api.github.com/users/matthewhammer/followers", "following_url": "https://api.github.com/users/matthewhammer/following{/other_user}", "gists_url": "https://api.github.com/users/matthewhammer/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewhammer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewhammer/subscriptions", "organizations_url": "https://api.github.com/users/matthewhammer/orgs", "repos_url": "https://api.github.com/users/matthewhammer/repos", "events_url": "https://api.github.com/users/matthewhammer/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewhammer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-02-03T20:36:26Z", "updated_at": "2015-02-16T03:52:38Z", "closed_at": "2015-02-16T03:52:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "The code below triggers an internal compiler error:\n\n```\nthread 'rustc' panicked at 'assertion failed: did.krate != ast::LOCAL_CRATE', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustc/middle/ty.rs:5341\n```\n\nSmallest input file that tickles the error:\n\n```\ntrait A<X> { }\ntrait B { type X; type Y : A<Self::X>; }\nfn main () { }\n```\n\nWhen the bounds on `Y` are lifted, the bug goes away for me.  That is, the following code compiles without an error:\n\n```\ntrait A<X> { }\ntrait B { type X; type Y; }\nfn main () { }\n```\n- Version info:\n\n```\nrustc 1.0.0-nightly (f1398d273 2015-01-31 20:21:02 +0000)\nbinary: rustc\ncommit-hash: f1398d2736f132dd4af828b3d9134691f924b7e1\ncommit-date: 2015-01-31 20:21:02 +0000\nhost: x86_64-apple-darwin\nrelease: 1.0.0-nightly\n```\n- Backtrace:\n\n```\nstack backtrace:\n   1:        0x10d966b27 - sys::backtrace::write::h1e2c8d6454da8cd1Xsu\n   2:        0x10d98ccac - failure::on_fail::hc34cc2536b843a6dlwB\n   3:        0x10d8ed878 - rt::unwind::begin_unwind_inner::hc1db7917310b1e46PdB\n   4:        0x10a931c55 - rt::unwind::begin_unwind::h10851544081918456271\n   5:        0x10ac96d80 - middle::ty::lookup_trait_def::h2256fffe21aabd99WH7\n   6:        0x10acdbc17 - middle::ty::predicates_for_trait_ref::h5f31438d5452493c2I7\n   7:        0x10acb3dcb - middle::traits::util::Elaborator<'cx, 'tcx>.Iterator::next::h8fa8483eadd3bbe7IgT\n   8:        0x10acb9d94 - middle::traits::util::Supertraits<'cx, 'tcx>.Iterator::next::h55572798b69df69ajjT\n   9:        0x10a5face7 - astconv::ast_ty_to_ty::closure.32964\n  10:        0x10a594dc0 - astconv::ast_ty_to_ty::h28c37a0bcd64f3d22ru\n  11:        0x10a5f0eed - vec::Vec<T>.FromIterator<T>::from_iter::h8194170135992664305\n  12:        0x10a5ee9fe - astconv::convert_angle_bracketed_parameters::h14e1151854724c322zt\n  13:        0x10a5f2d2b - astconv::ast_path_to_trait_ref::h8901deac3602014bVMt\n  14:        0x10a5a081b - astconv::instantiate_trait_ref::haaed26dc31d8d3a8CJt\n  15:        0x10a5f20ea - astconv::instantiate_poly_trait_ref::h5e153a7725bdcb786Ht\n  16:        0x10a622fcb - collect::compute_bounds::hbff2a6aea3e3160byRw\n  17:        0x10a60a5fd - collect::trait_def_of_item::hc2a893dcfe8940b96bw\n  18:        0x10a608bdf - collect::CollectTraitDefVisitor<'a, 'tcx>.visit..Visitor<'v>::visit_item::haff1fcbfc2eb31abLmv\n  19:        0x10a648c6f - check_crate::closure.34094\n  20:        0x10a646c75 - check_crate::he1eddd9d21d7c627g8z\n  21:        0x109ff6725 - driver::phase_3_run_analysis_passes::h5ea5b4fae09df7e4tGa\n  22:        0x109fdcb9c - driver::compile_input::hfeebf01fd34be13bBba\n  23:        0x10a0aa27e - run_compiler::h47834abf04acfba99ac\n  24:        0x10a0a729f - thunk::F.Invoke<A, R>::invoke::h2084430363117493962\n  25:        0x10a0a5f30 - rt::unwind::try::try_fn::h12547055720005252601\n  26:        0x10da03b69 - rust_try_inner\n  27:        0x10da03b56 - rust_try\n  28:        0x10a0a65f4 - thunk::F.Invoke<A, R>::invoke::h838828363178605749\n  29:        0x10d977333 - sys::thread::thread_start::h502153f3460908456lx\n  30:     0x7fff951c02fc - _pthread_body\n  31:     0x7fff951c0279 - _pthread_body\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/21909/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/21909/timeline", "performed_via_github_app": null, "state_reason": "completed"}