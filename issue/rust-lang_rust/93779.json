{"url": "https://api.github.com/repos/rust-lang/rust/issues/93779", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/93779/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/93779/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/93779/events", "html_url": "https://github.com/rust-lang/rust/issues/93779", "id": 1127451904, "node_id": "I_kwDOAAsO6M5DM40A", "number": 93779, "title": "Minor: Compiler panic based on Cargo.toml \"version\" value", "user": {"login": "rvthak", "id": 47509359, "node_id": "MDQ6VXNlcjQ3NTA5MzU5", "avatar_url": "https://avatars.githubusercontent.com/u/47509359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rvthak", "html_url": "https://github.com/rvthak", "followers_url": "https://api.github.com/users/rvthak/followers", "following_url": "https://api.github.com/users/rvthak/following{/other_user}", "gists_url": "https://api.github.com/users/rvthak/gists{/gist_id}", "starred_url": "https://api.github.com/users/rvthak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rvthak/subscriptions", "organizations_url": "https://api.github.com/users/rvthak/orgs", "repos_url": "https://api.github.com/users/rvthak/repos", "events_url": "https://api.github.com/users/rvthak/events{/privacy}", "received_events_url": "https://api.github.com/users/rvthak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-02-08T16:03:34Z", "updated_at": "2022-03-29T13:50:33Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "### Minimal reproduction\r\n\r\nThe bug appears while following this tutorial:\r\nhttps://docs.elrond.com/developers/tutorials/crowdfunding-p1/\r\n\r\n1. Install Elrond IDE extension on vscode\r\n(https://marketplace.visualstudio.com/items?itemName=Elrond.vscode-elrond-ide)\r\n\r\n2. On terminal:\r\n`erdpy contract new crowdfunding --template adder`\r\n`code crowdfunding`\r\n\r\n3. Open file Cargo.toml\r\n4. Set \"version\" to \"0.0.1\"\r\n5. Compile the code using `erdpy contract build`\r\n6. Compiler panics (It makes no sence)\r\n7. If you change \"version\" to something else (like 0.1.1) the problem self resolves.\r\n8. Setting the value back to \"0.0.1\" causes the compiler to panic again\r\n\r\n### Code\r\nIt doesn't seem to be affected at all by the rust code itself\r\n\r\n### Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\n<version>\r\nrustc 1.58.1 (db9d1b20b 2022-01-20)\r\nbinary: rustc\r\ncommit-hash: db9d1b20bba1968c1ec1fc49616d4742c1725b4b\r\ncommit-date: 2022-01-20\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.58.1\r\nLLVM version: 13.0.0\r\n```\r\n\r\n### Error output\r\n\r\n```\r\n<output>\r\nINFO:projects.core:build_project.directory: /home/pigeon/Downloads/contract/crowdfunding\r\nINFO:projects.core:build_project.debug: False\r\nINFO:myprocess:run_process: ['rustc', '--version'], in folder: None\r\nINFO:myprocess:Successful run. Output:\r\nrustc 1.59.0-nightly (78fd0f633 2021-12-29)\r\n\r\nCompiling crowdfunding v0.0.1 (/home/pigeon/Downloads/contract/crowdfunding)\r\nCompiling crowdfunding-meta v0.0.0 (/home/pigeon/Downloads/contract/crowdfunding/meta)\r\nthread 'rustc' panicked at 'no entry found for key', compiler/rustc_metadata/src/rmeta/decoder.rs:1631:13\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.59.0-nightly (78fd0f633 2021-12-29) running on x86_64-unknown-linux-gnu\r\n\r\nnote: compiler flags: -C embed-bitcode=no -C debuginfo=2 -C incremental --crate-type bin\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\n#0 [typeck] type-checking `main`\r\n#1 [analysis] running analysis passes on this crate\r\nend of query stack\r\nerror: could not compile `crowdfunding-meta`\r\nCRITICAL:cli:Build error: error code = 101, see output.\r\n```\r\n\r\n\r\n\r\n<p>\r\n\r\n```\r\nIm a newbie to both rust and vscode and all the methods of setting RUST_BACKTRACE didn't seem to work for me. How do you properly set its value?\r\n<backtrace>\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/93779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/93779/timeline", "performed_via_github_app": null, "state_reason": null}