{"url": "https://api.github.com/repos/rust-lang/rust/issues/46536", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46536/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46536/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46536/events", "html_url": "https://github.com/rust-lang/rust/issues/46536", "id": 279727867, "node_id": "MDU6SXNzdWUyNzk3Mjc4Njc=", "number": 46536, "title": "Tests succeeded with panic inside", "user": {"login": "kpp", "id": 467709, "node_id": "MDQ6VXNlcjQ2NzcwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/467709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kpp", "html_url": "https://github.com/kpp", "followers_url": "https://api.github.com/users/kpp/followers", "following_url": "https://api.github.com/users/kpp/following{/other_user}", "gists_url": "https://api.github.com/users/kpp/gists{/gist_id}", "starred_url": "https://api.github.com/users/kpp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kpp/subscriptions", "organizations_url": "https://api.github.com/users/kpp/orgs", "repos_url": "https://api.github.com/users/kpp/repos", "events_url": "https://api.github.com/users/kpp/events{/privacy}", "received_events_url": "https://api.github.com/users/kpp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 630810559, "node_id": "MDU6TGFiZWw2MzA4MTA1NTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-libtest", "name": "A-libtest", "color": "f7e101", "default": false, "description": "Area: #[test] related"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-12-06T12:01:33Z", "updated_at": "2022-05-16T11:37:41Z", "closed_at": "2022-05-16T11:37:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Unit tests with panic inside caused tests to pass successfully.\r\n\r\nI tried this: `cargo test -j8`\r\n\r\nI expected to see this happen: 2 of 250 tests failed with description:\r\n```\r\nfailures:\r\n\r\n---- toxcore_tests::network_tests::networking_core_new_test stdout ----\r\n\tthread 'toxcore_tests::network_tests::networking_core_new_test' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n\r\n---- toxcore_tests::network_tests::networking_core_register_test stdout ----\r\n\tthread 'toxcore_tests::network_tests::networking_core_register_test' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n\r\n\r\nfailures:\r\n    toxcore_tests::network_tests::networking_core_new_test\r\n    toxcore_tests::network_tests::networking_core_register_test\r\n\r\ntest result: FAILED. 248 passed; 2 failed; 0 ignored; 0 measured; 0 filtered out\r\n\r\nerror: test failed, to rerun pass '--lib'\r\n```\r\n\r\nInstead, this happened: 250 tests passed:\r\n\r\n```\r\n~/zetox$ cargo test -j8\r\n   Compiling winapi v0.2.8\r\n   Compiling winapi-build v0.1.1\r\n   Compiling rustc-serialize v0.3.24\r\n   Compiling regex-syntax v0.3.9\r\n   Compiling utf8-ranges v0.1.3\r\n   Compiling memchr v0.1.11\r\n   Compiling tokio-timer v0.1.2\r\n   Compiling env_logger v0.4.3\r\n   Compiling aho-corasick v0.5.3\r\n   Compiling kernel32-sys v0.2.2\r\n   Compiling thread-id v2.0.0\r\n   Compiling thread_local v0.2.7\r\n   Compiling regex v0.1.80\r\n   Compiling env_logger v0.3.5\r\n   Compiling quickcheck v0.4.1\r\n   Compiling tox v0.0.1 (file:///home/humbug/zetox)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 20.8 secs\r\n     Running target/debug/deps/tox-496c483329a13367\r\n\r\nrunning 250 tests\r\ntest toxcore::dht::test::bucket_default_test ... ok\r\ntest toxcore::dht::test::bucket_position_test ... ok\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\ntest toxcore::dht_node::test::dht_node_create_getn_test ... ok\r\ntest toxcore::dht_node::test::dht_node_create_ping_req_test ... ok\r\ntest toxcore::dht::test::kbucket_position_test ... ok\r\ntest toxcore::dht::test::dht_packet_new_test ... ok\r\ntest toxcore::dht::test::kbucket_iter_next_test ... ok\r\ntest toxcore::dht::test::bucket_iter_next_test ... ok\r\ntest toxcore::dht_node::test::dht_node_new ... ok\r\ntest toxcore::dht_node::test::dht_node_pk_test ... ok\r\ntest toxcore::dht_node::test::dht_node_create_ping_resp_test ... ok\r\ntest toxcore::dht_node::test::dht_node_request_nodes_test ... ok\r\ntest toxcore::dht_node::test::dht_node_request_ping_test ... ok\r\ntest toxcore::dht::test::kbucket_contains_test ... ok\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\ntest toxcore::dht::test::bucket_contains_test ... ok\r\ntest toxcore::dht_node::test::dht_node_sk_test ... ok\r\ntest toxcore::dht::test::kbucket_can_add_test ... ok\r\ntest toxcore::dht_node::test::dht_node_handle_packet_sendn_test ... ok\r\ntest toxcore::dht_node::test::dht_node_handle_packet ... ok\r\ntest toxcore::dht_node::test::dht_node_respond_ping_test ... ok\r\ntest toxcore::dht_node::test::tox_codec_decode_test ... ok\r\ntest toxcore::state_format::old::dht_state_kind_test ... ok\r\ntest toxcore::state_format::old::eof_kind_test ... ok\r\ntest toxcore::dht_node::test::dht_node_create_sendn_test ... ok\r\ntest toxcore::state_format::old::friend_state_new_from_pk_test ... ok\r\ntest toxcore::dht_node::test::tox_codec_encode_test ... ok\r\ntest toxcore::state_format::old::friends_kind_test ... ok\r\ntest toxcore::state_format::old::name_kind_test ... ok\r\ntest toxcore::state_format::old::name_to_bytes_test ... ok\r\ntest toxcore::state_format::old::nospam_keys_kind_test ... ok\r\ntest toxcore::state_format::old::path_nodes_kind_test ... ok\r\ntest toxcore::dht_node::test::dht_node_send_nodes ... ok\r\ntest toxcore::state_format::old::path_nodes_test ... ok\r\ntest toxcore::dht_node::test::dht_node_request_nodes_close_test ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_name ... ok\r\ntest toxcore::dht_node::test::dht_node_try_add_to_empty ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_nospamkeys ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_dht ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_status ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_status_msg ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_path_nodes ... ok\r\ntest toxcore::state_format::old::friends_is_friend_test ... ok\r\ntest toxcore::dht_node::test::receive_packets_test ... ok\r\ntest toxcore::dht_node::test::send_packets_test ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_tcp_relays ... ok\r\ntest toxcore::state_format::old::friend_state_parse_bytes_test ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_dht ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_eof ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_name ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_friends ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_nospamkeys ... ok\r\ntest toxcore::state_format::old::section_data_parse_bytes_test ... ok\r\ntest toxcore::state_format::old::section_data_into_section_test_random ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_status ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_path_nodes ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_status_msg ... ok\r\ntest toxcore::state_format::old::status_msg_kind_test ... ok\r\ntest toxcore::state_format::old::status_msg_to_bytes_test ... ok\r\ntest toxcore::state_format::old::tcp_relays_kind_test ... ok\r\ntest toxcore::state_format::old::state_add_friend_norequest_test ... ok\r\ntest toxcore::state_format::old::user_status_kind_test ... ok\r\ntest toxcore::tcp::codec::tests::decode_encrypted_packet_incomplete ... ok\r\ntest toxcore::tcp::codec::tests::decode_encrypted_packet_wrong_key ... ok\r\ntest toxcore::tcp::codec::tests::decode_encrypted_packet_zero_length ... ok\r\ntest toxcore::tcp::codec::tests::decode_packet_error ... ok\r\ntest toxcore::tcp::codec::tests::decode_packet_imcomplete ... ok\r\ntest toxcore::tcp::codec::tests::encode_decode ... ok\r\ntest toxcore::tcp::codec::tests::encode_packet_too_big ... ok\r\ntest toxcore::tcp::handshake::tests::client_decode_incomplete ... ok\r\ntest toxcore::tcp::handshake::tests::client_encode_decode ... ok\r\ntest toxcore::tcp::handshake::tests::client_encode_too_big ... ok\r\ntest toxcore::tcp::handshake::tests::server_decode_incomplete ... ok\r\ntest toxcore::tcp::handshake::tests::server_encode_decode ... ok\r\ntest toxcore::tcp::handshake::tests::server_encode_too_big ... ok\r\ntest toxcore::tcp::secure::tests::test_secure_communication ... ok\r\ntest toxcore::tcp::tests::client_handshake_with_bad_payload ... ok\r\ntest toxcore::tcp::tests::client_handshake_with_different_keypair ... ok\r\ntest toxcore::tcp::tests::network_handshake ... ok\r\ntest toxcore::tcp::tests::secure_communication_with_handshake ... ok\r\ntest toxcore::tcp::tests::server_handshake_with_bad_payload ... ok\r\ntest toxcore::tcp::tests::server_handshake_with_different_keypair ... ok\r\ntest toxcore::timeout::test::node_timeout_id_test ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_test_tcp_relays ... ok\r\ntest toxcore::timeout::test::node_timeout_new_test ... ok\r\ntest toxcore::timeout::test::node_timeout_pk_test ... ok\r\ntest toxcore::timeout::test::timeout_queue_add_test ... ok\r\ntest toxcore::timeout::test::timeout_queue_deref_test ... ok\r\ntest toxcore::state_format::old::tcp_relays_test ... ok\r\ntest toxcore::state_format::old::state_is_own_pk_test ... ok\r\ntest toxcore::timeout::test::timeout_queue_get_timed_out_test ... ok\r\ntest toxcore::timeout::test::timeout_queue_push_test ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u16_pass ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u32_fail ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u32_pass ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u64_fail ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u64_pass ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u8_fail ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u8_pass ... ok\r\ntest toxcore_tests::binary_io_tests::ne_u64_test ... ok\r\ntest toxcore_tests::binary_io_tests::xor_checksum_test ... ok\r\ntest toxcore::timeout::test::timeout_queue_remove_test ... ok\r\ntest toxcore_tests::binary_io_tests::append_zeros_test_u16_fail ... ok\r\ntest toxcore_tests::crypto_core_tests::decrypt_data_symmetric_test ... ok\r\ntest toxcore_tests::crypto_core_tests::encrypt_data_symmetric_test ... ok\r\ntest toxcore_tests::crypto_core_tests::encrypt_precompute_test ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_number_test_0xff0000_plus_0x011000 ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_test_0xf_plus_one ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_test_0xff_max ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_test_0xff_plus_one ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_number_test_zero_plus_0xff00 ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_test_zero_plus_one ... ok\r\ntest toxcore_tests::crypto_core_tests::increment_nonce_test_random ... ok\r\ntest toxcore_tests::crypto_core_tests::nonce_parse_bytes_test ... ok\r\ntest toxcore_tests::crypto_core_tests::public_key_cmp_test_empty ... ok\r\ntest toxcore_tests::crypto_core_tests::public_key_cmp_test_random ... ok\r\ntest toxcore_tests::crypto_core_tests::public_key_valid_test ... ok\r\ntest toxcore_tests::crypto_core_tests::public_key_parse_bytes_test ... ok\r\ntest toxcore_tests::crypto_core_tests::random_u32_test ... ok\r\ntest toxcore_tests::crypto_core_tests::random_u64_test ... ok\r\ntest toxcore_tests::crypto_core_tests::secret_key_parse_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::bucket_1_capacity_try_add_test ... ok\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\ntest toxcore_tests::dht_tests::bucket_new_test ... ok\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\nERROR:tox::toxcore::dht: Treating Some(0) as None\r\ntest toxcore_tests::dht_tests::bucket_remove_test ... ok\r\ntest toxcore_tests::crypto_core_tests::crypto_init_test ... ok\r\ntest toxcore_tests::dht_tests::bucket_try_add_test ... ok\r\ntest toxcore_tests::dht_tests::dht_packet_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::dht_packet_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::dht_tests::dht_packet_ping_resp_test ... ok\r\ntest toxcore_tests::dht_tests::dht_packet_ping_resp_test_invalid ... ok\r\ntest toxcore_tests::dht_tests::dht_packet_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::dht_paket_get_payload_test ... ok\r\ntest toxcore_tests::dht_tests::dht_request_get_request_test ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_kind_test ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_new_test ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_parse_bytes_rest_test ... ok\r\ntest toxcore::state_format::old::state_parse_bytes_test_magic ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ip_addr_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::dht_tests::ip_addr_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ip_type_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ip_type_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::dht_tests::ipv4_addr_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ipv6_addr_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::dht_request_new_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_index_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_new_test ... ok\r\ntest toxcore_tests::dht_tests::bucket_is_empty_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_size_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_try_add_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_deref_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_id_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_new_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_parse_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_req_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_deref_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_id_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_parse_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::nat_ping_resp_to_bytes_test_cmp_to_req ... ok\r\ntest toxcore_tests::dht_tests::packed_node_ip_test ... ok\r\ntest toxcore_tests::dht_tests::packed_node_new_test_ip_type_TCP_IPv4 ... ok\r\ntest toxcore_tests::dht_tests::packed_node_new_test_ip_type_TCP_IPv6 ... ok\r\ntest toxcore_tests::dht_tests::packed_node_new_test_ip_type_UDP_IPv4 ... ok\r\ntest toxcore_tests::dht_tests::packed_node_new_test_ip_type_UDP_IPv6 ... ok\r\ntest toxcore_tests::dht_tests::packed_node_parse_bytes_multiple_n_test ... ok\r\ntest toxcore::state_format::old::state_parse_bytes_test_section_detect ... ok\r\ntest toxcore_tests::dht_tests::packed_node_parse_bytes_multiple_test ... ok\r\ntest toxcore_tests::dht_tests::packed_node_parse_bytes_test_port ... ok\r\ntest toxcore_tests::dht_tests::packed_node_to_bytes_test_ipv4 ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_from_bytes_test_length_short ... ok\r\ntest toxcore::timeout::test::node_timeout_is_timed_out_test ... ok\r\ntest toxcore_tests::dht_tests::packed_node_to_bytes_test_ipv6 ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_from_bytes_test_length_too_long ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_from_bytes_test_wrong_iptype ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_from_bytes_test_no_iptype ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_to_bytes_test_pk ... ok\r\ntest toxcore_tests::dht_tests::ping_req_id_test ... ok\r\ntest toxcore_tests::dht_tests::ping_req_kind_test ... ok\r\ntest toxcore_tests::dht_tests::ping_req_new_test ... ok\r\ntest toxcore_tests::dht_tests::ping_req_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::packed_nodes_parse_bytes_test_length_too_long ... ok\r\ntest toxcore_tests::dht_tests::ping_req_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_from_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_id_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_kind_test ... ok\r\ntest toxcore_tests::dht_tests::ping_req_parse_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_to_bytes_test_cmp_ping_req ... ok\r\ntest toxcore_tests::dht_tests::public_key_distance_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_parse_test ... ok\r\ntest toxcore_tests::dht_tests::ping_resp_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::send_nodes_kind_test ... ok\r\ntest toxcore_tests::dht_tests::send_nodes_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_remove_test ... ok\r\ntest toxcore_tests::network_tests::bind_udp_test ... ok\r\ntest toxcore_tests::network_tests::networking_core_new_test ... ok\r\ntest toxcore_tests::network_tests::networking_core_register_test ... ok\r\ntest toxcore_tests::packet_kind_tests::packet_kind_from_bytes_test ... ok\r\nthread 'thread '<unnamed><unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }' panicked at '', /checkout/src/libcore/result.rs:called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }906', /checkout/src/libcore/result.rs:4\r\n:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nERROR:tox::toxcore::network: Failed to bind to any port in range!\r\nthread '<unnamed>' panicked at 'This should have worked; bind_udp()', src/toxcore_tests/network_tests.rs:82:24\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\ntest toxcore_tests::packet_kind_tests::user_status_parse_bytes_rest_test ... okthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', ERROR:tox::toxcore::network: Failed to bind to any port in range!/checkout/src/libcore/result.rs\r\n:thread '906:4\r\n<unnamed>' panicked at 'This should have worked; bind_udp()', src/toxcore_tests/network_tests.rs:82:24\r\n\r\nthread 'thread '<unnamed><unnamed>' panicked at '' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }thread 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', <unnamed>', /checkout/src/libcore/result.rs' panicked at '/checkout/src/libcore/result.rs:called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }:906thread '', 906:<unnamed>:4' panicked at '4\r\ncalled `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }\r\n', /checkout/src/libcore/result.rs:906:4\r\nthread 'thread '<unnamed><unnamed>thread '' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }/checkout/src/libcore/result.rs', :/checkout/src/libcore/result.rs906:906' panicked at 'thread 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }<unnamed>thread '' panicked at '<unnamed>thread ':<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', ', thread ':thread '/checkout/src/libcore/result.rs<unnamed><unnamed>:' panicked at '' panicked at '' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', <unnamed>/checkout/src/libcore/result.rs:/checkout/src/libcore/result.rs' panicked at '906:called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }:', 44called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n4\r\nERROR:tox::toxcore::network: Failed to bind to any port in range!906:thread '4\r\nthread 'thread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n\r\ncalled `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906thread ':<unnamed>4' panicked at '\r\ncalled `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\ncalled `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906/checkout/src/libcore/result.rs::\r\n4906\r\n:4\r\n<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n', /checkout/src/libcore/result.rs<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }\r\n:906thread '<unnamed>' panicked at 'thread 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }<unnamed>', ' panicked at '/checkout/src/libcore/result.rscalled `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', :thread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }thread '', <unnamed>/checkout/src/libcore/result.rs' panicked at ':called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }906', :/checkout/src/libcore/result.rs4:\r\n906:4\r\nthread '<unnamed>' panicked at 'This should have worked; bind_udp()', src/toxcore_tests/network_tests.rs:82:24\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n:906', :/checkout/src/libcore/result.rs:906:44\r\n\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n4\r\n/checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>thread '' panicked at '<unnamed>called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }' panicked at '', called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }/checkout/src/libcore/result.rs', :/checkout/src/libcore/result.rs906::9064:\r\n4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\nthread 'thread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }thread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n', thread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\n/checkout/src/libcore/result.rs:906:4\r\nthread '<unnamed>' panicked at 'called `Result::unwrap()` on an `Err` value: Error { repr: Os { code: 24, message: \"Too many open files\" } }', /checkout/src/libcore/result.rs:906:4\r\ntest toxcore_tests::dht_tests::send_nodes_with_nodes_test ... ok\r\ntest toxcore_tests::dht_tests::send_nodes_from_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::send_nodes_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::friend_status_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::dht_state_from_bytes ... ok\r\ntest toxcore_tests::state_format_old_tests::dht_state_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::dht_state_to_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::name_parse_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::nospam_keys_default_test ... ok\r\ntest toxcore_tests::state_format_old_tests::nospam_keys_from_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::nospam_keys_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::section_kind_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::section_kind_parse_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::section_kind_to_bytes_test ... ok\r\ntest toxcore_tests::dht_tests::kbucket_get_closest_test ... ok\r\ntest toxcore_tests::dht_tests::get_nodes_response_test ... ok\r\ntest toxcore_tests::state_format_old_tests::user_status_default_test ... ok\r\ntest toxcore_tests::state_format_old_tests::user_status_parse_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::status_message_parse_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::user_status_to_bytes_test ... ok\r\ntest toxcore_tests::toxid_tests::no_spam_default_test ... ok\r\ntest toxcore_tests::toxid_tests::no_spam_fmt_test ... ok\r\ntest toxcore_tests::state_format_old_tests::user_status_parse_bytes_test_rest ... ok\r\ntest toxcore_tests::toxid_tests::no_spam_new_test ... ok\r\ntest toxcore_tests::toxid_tests::no_spam_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::toxid_tests::no_spam_from_bytes_test ... ok\r\ntest toxcore_tests::toxid_tests::tox_id_fmt_test ... ok\r\ntest toxcore_tests::toxid_tests::tox_id_new_nospam_test ... ok\r\ntest toxcore_tests::toxid_tests::tox_id_from_bytes_test ... ok\r\ntest toxcore_tests::toxid_tests::tox_id_to_bytes_test ... ok\r\ntest toxcore_tests::toxid_tests::tox_id_parse_bytes_rest_test ... ok\r\ntest toxcore_tests::state_format_old_tests::friends_add_friend_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::get_salt_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::is_encrypted_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_decrypt_error_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_decrypt_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_encrypt_error_test ... ok\r\ntest toxcore_tests::state_format_old_tests::friends_to_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::friends_parse_bytes_test ... ok\r\ntest toxcore_tests::state_format_old_tests::state_to_bytes_test ... ok\r\ntest toxencryptsave::pass_key_new_test ... ok\r\ntest toxencryptsave::pass_key_with_salt_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_encrypt_test ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_random ... ok\r\ntest toxcore::state_format::old::section_data_into_sect_mult_test_friends ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_key_decrypt_test ... ok\r\ntest toxencryptsave_tests::encryptsave_tests::pass_key_encrypt_test ... ok\r\n\r\ntest result: ok. 250 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\r\n\r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.24.0-nightly (cfba0d446 2017-12-05)\r\nbinary: rustc\r\ncommit-hash: cfba0d446e8ab90f0c81aa0942819d05621c8b8e\r\ncommit-date: 2017-12-05\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.24.0-nightly\r\nLLVM version: 4.0\r\n```\r\n\r\nNo backtrace available. Here is a screenshot with green oks to prove the issue is not a joke.\r\n\r\n![cargo_test](https://user-images.githubusercontent.com/467709/33660758-0847ca18-da96-11e7-9c05-5987451d2945.png)\r\n\r\nThe incident is reproducible with 30% chance on https://github.com/zetok/tox/commit/1ceb098a417807392b7eacafd8f2b68713ccf1da with:\r\n\r\n```\r\ngit co Cargo.lock\r\ncargo clean\r\ncargo test -j8 # expected 2 of 250 failed\r\ncargo update -p clippy\r\ncargo test -j8 # succeeded somehow ?!\r\n```\r\n", "closed_by": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46536/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46536/timeline", "performed_via_github_app": null, "state_reason": "completed"}