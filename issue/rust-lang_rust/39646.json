{"url": "https://api.github.com/repos/rust-lang/rust/issues/39646", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39646/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39646/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39646/events", "html_url": "https://github.com/rust-lang/rust/issues/39646", "id": 206231562, "node_id": "MDU6SXNzdWUyMDYyMzE1NjI=", "number": 39646, "title": "SIGILL when panicking (unwinding?) on sparc64-linux", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 632899563, "node_id": "MDU6TGFiZWw2MzI4OTk1NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-SPARC", "name": "O-SPARC", "color": "6e6ec0", "default": false, "description": "Target: SPARC processors"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-08T15:31:40Z", "updated_at": "2018-02-23T13:59:01Z", "closed_at": "2018-02-23T13:59:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### STR\r\n\r\n``` rust\r\nfn main() {\r\n    panic!();\r\n}\r\n```\r\n\r\n```\r\n$ rustc --target sparc64-unknown-linux-gnu panic.rs\r\n\r\n$ QEMU_LD_PREFIX=/usr/sparc64-linux-gnu qemu-sparc64-static panic\r\nthread 'main' panicked at 'explicit panic', panic.rs:1\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nIllegal instruction (core dumped)\r\n```\r\n\r\nSyscall trace:\r\n\r\n<details>\r\n783 brk(NULL) = 0x0000004000132000\r\n783 uname(0x400093376a) = 0\r\n783 access(\"/etc/ld.so.nohwcap\",F_OK) = -1 errno=2 (No such file or directory)\r\n783 mmap(NULL,8192,PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS,-1,0) = 0x0000004000a5a000\r\n783 access(\"/etc/ld.so.preload\",R_OK) = -1 errno=2 (No such file or directory)\r\n783 open(\"/etc/ld.so.cache\",O_RDONLY|O_CLOEXEC) = 3\r\n783 fstat64(3,0x0000004000932c40) = 0\r\n783 mmap(NULL,17171,PROT_READ,MAP_PRIVATE,3,0) = 0x0000004000a5c000\r\n783 close(3) = 0\r\n783 open(\"/lib/sparc64-linux-gnu/tls/libdl.so.2\",O_RDONLY|O_CLOEXEC) = -1 errno=2 (No such file or directory)\r\n783 stat64(\"/lib/sparc64-linux-gnu/tls\",0x0000004000932c50) = -1 errno=2 (No such file or directory)\r\n783 open(\"/lib/sparc64-linux-gnu/libdl.so.2\",O_RDONLY|O_CLOEXEC) = -1 errno=2 (No such file or directory)\r\n783 stat64(\"/lib/sparc64-linux-gnu\",0x0000004000932c50) = -1 errno=2 (No such file or directory)\r\n783 open(\"/usr/lib/sparc64-linux-gnu/tls/libdl.so.2\",O_RDONLY|O_CLOEXEC) = -1 errno=2 (No such file or directory)\r\n783 stat64(\"/usr/lib/sparc64-linux-gnu/tls\",0x0000004000932c50) = -1 errno=2 (No such file or directory)\r\n783 open(\"/usr/lib/sparc64-linux-gnu/libdl.so.2\",O_RDONLY|O_CLOEXEC) = -1 errno=2 (No such file or directory)\r\n783 stat64(\"/usr/lib/sparc64-linux-gnu\",0x0000004000932c50) = -1 errno=2 (No such file or directory)\r\n783 open(\"/lib/tls/libdl.so.2\",O_RDONLY|O_CLOEXEC) = -1 errno=2 (No such file or directory)\r\n783 stat64(\"/lib/tls\",0x0000004000932c50) = -1 errno=2 (No such file or directory)\r\n783 open(\"/lib/libdl.so.2\",O_RDONLY|O_CLOEXEC) = 3\r\n783 read(3,0x933020,832) = 832\r\n783 fstat64(3,0x0000004000932c30) = 0\r\n783 mmap(NULL,1065984,PROT_EXEC|PROT_READ,MAP_PRIVATE|MAP_DENYWRITE,3,0) = 0x0000004000a62000\r\n783 mprotect(0x0000004000a66000,1040384,PROT_NONE) = 0\r\n783 mmap(0x0000004000b64000,16384,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_DENYWRITE|MAP_FIXED,3,0x2000) = 0x0000004000b64000\r\n783 close(3) = 0\r\n783 open(\"/lib/librt.so.1\",O_RDONLY|O_CLOEXEC) = 3\r\n783 read(3,0x932ff0,832) = 832\r\n783 fstat64(3,0x0000004000932c00) = 0\r\n783 mmap(NULL,1085880,PROT_EXEC|PROT_READ,MAP_PRIVATE|MAP_DENYWRITE,3,0) = 0x0000004000b68000\r\n783 mprotect(0x0000004000b70000,1040384,PROT_NONE) = 0\r\n783 mmap(0x0000004000c6e000,16384,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_DENYWRITE|MAP_FIXED,3,0x6000) = 0x0000004000c6e000\r\n783 close(3) = 0\r\n783 open(\"/lib/libpthread.so.0\",O_RDONLY|O_CLOEXEC) = 3\r\n783 read(3,0x932fc0,832) = 832\r\n783 fstat64(3,0x0000004000932bd0) = 0\r\n783 mmap(NULL,1166640,PROT_EXEC|PROT_READ,MAP_PRIVATE|MAP_DENYWRITE,3,0) = 0x0000004000c72000\r\n783 mprotect(0x0000004000c8a000,1040384,PROT_NONE) = 0\r\n783 mmap(0x0000004000d88000,16384,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_DENYWRITE|MAP_FIXED,3,0x16000) = 0x0000004000d88000\r\n783 mmap(0x0000004000d8c000,11568,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS|MAP_FIXED,-1,0) = 0x0000004000d8c000\r\n783 close(3) = 0\r\n783 open(\"/lib/libgcc_s.so.1\",O_RDONLY|O_CLOEXEC) = 3\r\n783 read(3,0x932f90,832) = 832\r\n783 fstat64(3,0x0000004000932ba0) = 0\r\n783 mmap(NULL,8192,PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS,-1,0) = 0x0000004000d90000\r\n783 mmap(NULL,1116712,PROT_EXEC|PROT_READ,MAP_PRIVATE|MAP_DENYWRITE,3,0) = 0x0000004000d92000\r\n783 mprotect(0x0000004000da2000,1040384,PROT_NONE) = 0\r\n783 mmap(0x0000004000ea0000,16384,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_DENYWRITE|MAP_FIXED,3,0xe000) = 0x0000004000ea0000\r\n783 close(3) = 0\r\n783 open(\"/lib/libc.so.6\",O_RDONLY|O_CLOEXEC) = 3\r\n783 read(3,0x932f60,832) = 832\r\n783 fstat64(3,0x0000004000932b70) = 0\r\n783 mmap(NULL,2506496,PROT_EXEC|PROT_READ,MAP_PRIVATE|MAP_DENYWRITE,3,0) = 0x0000004000ea4000\r\n783 mprotect(0x0000004000ffe000,1048576,PROT_NONE) = 0\r\n783 mmap(0x00000040010fe000,32768,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_DENYWRITE|MAP_FIXED,3,0x15a000) = 0x00000040010fe000\r\n783 mmap(0x0000004001106000,7936,PROT_EXEC|PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS|MAP_FIXED,-1,0) = 0x0000004001106000\r\n783 close(3) = 0\r\n783 mmap(NULL,8192,PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS,-1,0) = 0x0000004001108000\r\n783 mprotect(0x00000040010fe000,16384,PROT_READ) = 0\r\n783 mprotect(0x0000004000ea0000,8192,PROT_READ) = 0\r\n783 mprotect(0x0000004000d88000,8192,PROT_READ) = 0\r\n783 mprotect(0x0000004000c6e000,8192,PROT_READ) = 0\r\n783 mprotect(0x0000004000b64000,8192,PROT_READ) = 0\r\n783 mprotect(0x000000400012c000,16384,PROT_READ) = 0\r\n783 mprotect(0x0000004000a56000,8192,PROT_READ) = 0\r\n783 munmap(0x0000004000a5c000,17171) = 0\r\n783 set_tid_address(274895767616,17171,274887555240,274888752024,274892133624,1) = 783\r\n783 set_robust_list(274895767632,24,274887555240,274888752024,274892133624,1) = -1 errno=38 (Function not implemented)\r\n783 rt_sigaction(32,0x0000004000933760,NULL) = 0\r\n783 rt_sigaction(33,0x0000004000933760,NULL) = -1 errno=22 (Invalid argument)\r\n783 rt_sigprocmask(SIG_UNBLOCK,0x0000004000933960,NULL) = 0\r\n783 getrlimit(3,274887555400,0,8,274893819160,274891036664) = 0\r\n783 rt_sigaction(SIGPIPE,0x00000040009332f0,0x0000004000933388) = 0\r\n783 brk(NULL) = 0x0000004000132000\r\n783 brk(0x0000004000154000) = 0x0000004000132000\r\n783 mmap(NULL,1048576,PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANONYMOUS,-1,0) = 0x000000400110a000\r\n783 open(\"/proc/self/maps\",O_RDONLY|O_CLOEXEC) = 3\r\n783 getrlimit(3,274887554544,1,274879156384,274888752024,274895773712) = 0\r\n783 fstat64(3,0x0000004000933090) = 0\r\n783 read(3,0x110a2c0,4096) = 3671\r\n783 close(3) = 0\r\n783 sched_getaffinity(783,32,274895773712,-16,0,274895746512) = 16\r\n783 mmap(0x0000004000134000,8192,PROT_NONE,MAP_PRIVATE|MAP_ANONYMOUS|MAP_FIXED,-1,0) = 0x0000004000134000\r\n783 rt_sigaction(SIGSEGV,0x00000040009334d0,NULL) = 0\r\n783 rt_sigaction(10,0x00000040009334d0,NULL) = 0\r\n783 sigaltstack((nil),0x40009335e8) = 0\r\n783 write(2,0x24887,8)thread ' = 8\r\n783 write(2,0x110a040,4)main = 4\r\n783 write(2,0x2488f,15)' panicked at ' = 15\r\n783 write(2,0x23570,14)explicit panic = 14\r\n783 write(2,0x2489e,3)',  = 3\r\n783 write(2,0x2357e,8)panic.rs = 8\r\n783 write(2,0x243de,1): = 1\r\n783 write(2,0x932adf,1)1 = 1\r\n783 write(2,0x23d86,1)\r\n = 1\r\n783 write(2,0x248b0,51)note: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n = 51\r\nIllegal instruction (core dumped)\r\n</details>\r\n\r\nWith RUST_BACKTRACE\r\n\r\n```\r\n$ QEMU_LD_PREFIX=/usr/sparc64-linux-gnu RUST_BACKTRACE=1 qemu-sparc64-static panic\r\nthread 'main' panicked at 'explicit panic', panic.rs:1\r\nstack backtrace:\r\nIllegal instruction (core dumped)\r\n```\r\n\r\n`std` for sparc64-linux was built using rustbuild.\r\n\r\nNo GDB info at this moment.\r\n\r\n### Meta\r\n\r\n```\r\n$ rustc -V\r\nrustc 1.17.0-dev\r\n\r\n$ git rev-parse HEAD\r\nc14f87e3b0823407a91a283796bf78ef83d5fe99\r\n```\r\n", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39646/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39646/timeline", "performed_via_github_app": null, "state_reason": "completed"}