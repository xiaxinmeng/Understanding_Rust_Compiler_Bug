{"url": "https://api.github.com/repos/rust-lang/rust/issues/16834", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16834/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16834/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16834/events", "html_url": "https://github.com/rust-lang/rust/issues/16834", "id": 41458024, "node_id": "MDU6SXNzdWU0MTQ1ODAyNA==", "number": 16834, "title": "ICE: 'position 0 does not resolve to a source location', libsyntax/ast_util.rs:776", "user": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-08-28T23:45:06Z", "updated_at": "2015-02-23T23:51:23Z", "closed_at": "2015-02-23T23:51:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following test case causes an ICE when built with the peg_syntax_ext crate from kevinmehall/rust-peg@9a3b39949b5048f936589e4c92ffa98ed13f89f9.\n\n```\n#![feature(phase)]\n#[phase(plugin)]\nextern crate peg_syntax_ext;\n\npeg! html(r#\"\n#[pub]\nname -> ()\n  = \"_\" {}\n\"#)\n\nfn main() {}\n```\n\nCompiler output:\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'position 0 does not resolve to a source location', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/libsyntax/ast_util.rs:776\n\nstack backtrace:\n   1:     0x7fa438048550 - rt::backtrace::imp::write::h0180e7ded76a3ff2c0q\n   2:     0x7fa43804b740 - failure::on_fail::h3f169393c89b5f90Tlr\n   3:     0x7fa4388154f0 - unwind::begin_unwind_inner::haeb9517b5061bc86Zie\n   4:     0x7fa438815190 - unwind::begin_unwind_fmt::hc1882fc6f561bb94pge\n   5:     0x7fa43688ae90 - codemap::CodeMap::lookup_filemap_idx::h10b3ee17be9c5432ICE\n   6:     0x7fa436889110 - codemap::CodeMap::lookup_char_pos::h5b5a630876afd491VpE\n   7:     0x7fa436889970 - codemap::CodeMap::lookup_char_pos_adj::h3dda461537267fd7aqE\n   8:     0x7fa436889ad0 - codemap::CodeMap::span_to_string::h57cd41062abb86a0GqE\n   9:     0x7fa436892450 - diagnostic::emit::h50ff1b210b930a0ciGF\n  10:     0x7fa43688f310 - diagnostic::EmitterWriter.Emitter::emit::hb5c65e3cb338e8f1PBF\n  11:     0x7fa43688d5a0 - diagnostic::Handler::emit::h27cd8f8169f9f1e0ejF\n  12:     0x7fa4368858d0 - diagnostic::SpanHandler::span_fatal::h84dd777f8f8c1c71G6E\n  13:     0x7fa4368a6270 - parse::parser::Parser<'a>::span_fatal::h6feb32f6fee26899qsL\n  14:     0x7fa4368a6110 - parse::parser::Parser<'a>::unexpected_last::h17851a417e9d99f5CEK\n  15:     0x7fa4368bb4b0 - parse::parser::Parser<'a>::lit_from_token::he3c36ca9bf167f1fx7L\n  16:     0x7fa4368c0030 - parse::parser::Parser<'a>::parse_lit::h4d5b15d3b94f229eB9L\n  17:     0x7fa4368c1bc0 - parse::parser::Parser<'a>::parse_bottom_expr::h99dfb0de25bba2627qM\n  18:     0x7fa4368c91b0 - parse::parser::Parser<'a>::parse_dot_or_call_expr::h9ab0edda75ded749LJM\n  19:     0x7fa4368cbc50 - parse::parser::Parser<'a>::parse_prefix_expr::h4eaf1f79d4f4857fF1M\n  20:     0x7fa4368cca00 - parse::parser::Parser<'a>::parse_binops::h947e6e05d0b0b27eR6M\n  21:     0x7fa4368cd2a0 - parse::parser::Parser<'a>::parse_assign_expr::h009d78b784112770kaN\n  22:     0x7fa4368094e0 - parse::parser::Parser<'a>::parse_expr::hfc261db4a505db9dpkN\n  23:     0x7fa4297c5e20 - rustast::parse_expr::he5bbdd2b5763894erhf\n  24:     0x7fa4297c34e0 - translate::compile_expr::write_seq::hb1126876b6cb74a2Stc\n  25:     0x7fa4297c34e0 - translate::compile_expr::write_seq::hb1126876b6cb74a2Stc\n  26:     0x7fa4297a33c0 - translate::compile_expr::h5094d61a4008fbf18ib\n  27:     0x7fa429794350 - translate::compile_rule::haf8139bbb327375eZRa\n  28:     0x7fa429794310 - translate::compile_grammar::closure.6998\n  29:     0x7fa42976f2e0 - iter::Map<'a, A, B, T>::do_map::h10536932640034149653\n  30:     0x7fa42976f280 - iter::Map<'a, A, B, T>.Iterator<B>::next::h4261416536425720484\n  31:     0x7fa42976f140 - iter::Chain<T, U>.Iterator<A>::next::h1971926529743156518\n  32:     0x7fa42976ed20 - iter::Chain<T, U>.Iterator<A>::next::h14287975248411857265\n  33:     0x7fa42976ece0 - iter::ByRef<'a, T>.Iterator<A>::next::h14318444722290777202\n  34:     0x7fa42976dac0 - vec::Vec<T>.FromIterator<T>::from_iter::h866126017639234570\n  35:     0x7fa42976da60 - iter::Iterator::collect::h10075527237379173284\n  36:     0x7fa42976d530 - translate::compile_grammar::h4112be70760c82bd3ca\n  37:     0x7fa4297f1940 - expand_peg::h079d28b58b6a838cPlf\n  38:     0x7fa4297f0340 - expand_peg_str::hd13f862b60d56391njf\n  39:     0x7fa43691c520 - ext::base::BasicIdentMacroExpander.IdentMacroExpander::expand::h84d284d3390544dfUo3\n  40:     0x7fa4369a6310 - ext::expand::expand_item_mac::h2eb76d8c02387ca32ca\n  41:     0x7fa4369a38f0 - ext::expand::expand_item::h5625fd530c3e4f0bJ49\n  42:     0x7fa4369ac0a0 - ext::expand::MacroExpander<'a, 'b>.Folder::fold_item::h31bab50b516a58661Qa\n  43:     0x7fa4369ac040 - fold::noop_fold_mod::closure.51777\n  44:     0x7fa43694d850 - iter::Iterator::collect::h9826799766022981870\n  45:     0x7fa4369ab610 - fold::Folder::fold_mod::h11090640345785019466\n  46:     0x7fa4369db7c0 - ext::expand::expand_crate::h1cf476cac6b249fbUTa\n  47:     0x7fa43947d850 - driver::driver::phase_2_configure_and_expand::closure.134892\n  48:     0x7fa439296ff0 - driver::driver::phase_2_configure_and_expand::h3fdf630bc846160c0hy\n  49:     0x7fa4394af220 - driver::driver::pretty_print_input::h51847602a767b406rfz\n  50:     0x7fa4394d26b0 - driver::run_compiler::h64228d2c335d66c5kIB\n  51:     0x7fa4394d25c0 - driver::main_args::closure.138204\n  52:     0x7fa4394e4850 - task::TaskBuilder<S>::try_future::closure.139320\n  53:     0x7fa4394e4650 - task::TaskBuilder<S>::spawn_internal::closure.139297\n  54:     0x7fa439f20ec0 - task::spawn_opts::closure.8367\n  55:     0x7fa43886df90 - rust_try_inner\n  56:     0x7fa43886df80 - rust_try\n  57:     0x7fa438812b20 - unwind::try::h03d8d1d4cb0de0c1f7d\n  58:     0x7fa4388128e0 - task::Task::run::hafab6bcab45e61e5zdd\n  59:     0x7fa439f20c20 - task::spawn_opts::closure.8313\n  60:     0x7fa4388146e0 - thread::thread_start::hba588af1f803bb5blCd\n  61:     0x7fa437adffe0 - start_thread\n  62:     0x7fa4384e4019 - __clone\n  63:                0x0 - <unknown>\n```\n", "closed_by": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16834/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16834/timeline", "performed_via_github_app": null, "state_reason": "completed"}