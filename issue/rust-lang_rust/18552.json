{"url": "https://api.github.com/repos/rust-lang/rust/issues/18552", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18552/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18552/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18552/events", "html_url": "https://github.com/rust-lang/rust/issues/18552", "id": 47551832, "node_id": "MDU6SXNzdWU0NzU1MTgzMg==", "number": 18552, "title": "debuginfo tests fail against stock gdb 7.8.1", "user": {"login": "bkoropoff", "id": 2101303, "node_id": "MDQ6VXNlcjIxMDEzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/2101303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkoropoff", "html_url": "https://github.com/bkoropoff", "followers_url": "https://api.github.com/users/bkoropoff/followers", "following_url": "https://api.github.com/users/bkoropoff/following{/other_user}", "gists_url": "https://api.github.com/users/bkoropoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkoropoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkoropoff/subscriptions", "organizations_url": "https://api.github.com/users/bkoropoff/orgs", "repos_url": "https://api.github.com/users/bkoropoff/repos", "events_url": "https://api.github.com/users/bkoropoff/events{/privacy}", "received_events_url": "https://api.github.com/users/bkoropoff/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-02T22:43:36Z", "updated_at": "2014-11-02T22:51:46Z", "closed_at": "2014-11-02T22:51:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Since I determined #17808 is due to a patch to gdb applied by Fedora's packager, I built stock gdb 7.8.1 from source and put it in my path.  I get two failures:\n\n```\nfailures:\n\n---- [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs stdout ----\n    NOTE: compiletest thinks it is using GDB version 7.8\n\n    error: line not found in debugger output: $1 = RegularStruct = {the_first_field = 101, the_second_field = 102.5, the_third_field = false}\n\n    status: exit code: 0\n    command: gdb -quiet -batch -nx -command=x86_64-unknown-linux-gnu/test/debuginfo-gdb/gdb-pretty-struct-and-enums-pre-gdb-7-7.debugger.script\n    stdout:\n    ------------------------------------------\n    GNU gdb (GDB) 7.8.1\n    Copyright (C) 2014 Free Software Foundation, Inc.\n    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n    This is free software: you are free to change and redistribute it.\n    There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n    and \"show warranty\" for details.\n    This GDB was configured as \"x86_64-unknown-linux-gnu\".\n    Type \"show configuration\" for configuration details.\n    For bug reporting instructions, please see:\n    <http://www.gnu.org/software/gdb/bugs/>.\n    Find the GDB manual and other documentation resources online at:\n    <http://www.gnu.org/software/gdb/documentation/>.\n    For help, type \"help\".\n    Type \"apropos word\" to search for commands related to \"word\".\n    Breakpoint 1 at 0x9f2: file /home/bkoropoff/Source/rust/src/test/debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs, line 67.\n    [Thread debugging using libthread_db enabled]\n    Using host libthread_db library \"/lib64/libthread_db.so.1\".\n\n    Breakpoint 1, gdb-pretty-struct-and-enums-pre-gdb-7-7::main () at /home/bkoropoff/Source/rust/src/test/debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs:67\n    67      zzz(); // #break\n    $1 = {the_first_field = 101, the_second_field = 102.5, the_third_field = false}\n    $2 = {<No data fields>}\n    $3 = CStyleEnumVar1\n    $4 = CStyleEnumVar2\n    $5 = CStyleEnumVar3\n    A debugging session is active.\n\n        Inferior 1 [process 23408] will be killed.\n\n    Quit anyway? (y or n) [answered Y; input not from terminal]\n\n    ------------------------------------------\n    stderr:\n    ------------------------------------------\n\n    ------------------------------------------\n\n    task '[debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs' panicked at 'explicit panic', /home/bkoropoff/Source/rust/src/compiletest/runtest.rs:1485\n\n\n---- [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums.rs stdout ----\n    NOTE: compiletest thinks it is using GDB version 7.8\n\n    error: line not found in debugger output: $1 = RegularStruct = {the_first_field = 101, the_second_field = 102.5, the_third_field = false, the_fourth_field = \"I'm so pretty, oh so pretty...\"}\n\n    status: exit code: 0\n    command: gdb -quiet -batch -nx -command=x86_64-unknown-linux-gnu/test/debuginfo-gdb/gdb-pretty-struct-and-enums.debugger.script\n    stdout:\n    ------------------------------------------\n    GNU gdb (GDB) 7.8.1\n    Copyright (C) 2014 Free Software Foundation, Inc.\n    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n    This is free software: you are free to change and redistribute it.\n    There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n    and \"show warranty\" for details.\n    This GDB was configured as \"x86_64-unknown-linux-gnu\".\n    Type \"show configuration\" for configuration details.\n    For bug reporting instructions, please see:\n    <http://www.gnu.org/software/gdb/bugs/>.\n    Find the GDB manual and other documentation resources online at:\n    <http://www.gnu.org/software/gdb/documentation/>.\n    For help, type \"help\".\n    Type \"apropos word\" to search for commands related to \"word\".\n    Breakpoint 1 at 0xbf1: file /home/bkoropoff/Source/rust/src/test/debuginfo/gdb-pretty-struct-and-enums.rs, line 164.\n    [Thread debugging using libthread_db enabled]\n    Using host libthread_db library \"/lib64/libthread_db.so.1\".\n\n    Breakpoint 1, gdb-pretty-struct-and-enums::main () at /home/bkoropoff/Source/rust/src/test/debuginfo/gdb-pretty-struct-and-enums.rs:164\n    164     zzz(); // #break\n    $1 = {the_first_field = 101, the_second_field = 102.5, the_third_field = false, the_fourth_field = {data_ptr = 0x555555554d60 <str1153> \"I'm so pretty, oh so pretty...blub\", length = 30}}\n    $2 = {true, 103, {data_ptr = 0x555555554d7e <str1154> \"blub\", length = 4}}\n    $3 = {-104.5, 105}\n    $4 = {<No data fields>}\n    $5 = CStyleEnumVar1\n    $6 = CStyleEnumVar2\n    $7 = CStyleEnumVar3\n    $8 = {{RUST$ENUM$DISR = MixedEnumCStyleVar}, {RUST$ENUM$DISR = MixedEnumCStyleVar, 32767, 31592, 128}, {RUST$ENUM$DISR = MixedEnumCStyleVar, field1 = 6.9533487637067068e-310, field2 = -134250192}}\n    $9 = {{RUST$ENUM$DISR = MixedEnumTupleVar}, {RUST$ENUM$DISR = MixedEnumTupleVar, 106, 107, false}, {RUST$ENUM$DISR = MixedEnumTupleVar, field1 = 6.9533483476988382e-310, field2 = -1}}\n    $10 = {{RUST$ENUM$DISR = MixedEnumStructVar}, {RUST$ENUM$DISR = MixedEnumStructVar, 32767, 0, false}, {RUST$ENUM$DISR = MixedEnumStructVar, field1 = 108.5, field2 = 109}}\n    $11 = {{RUST$ENUM$DISR = Some}, {RUST$ENUM$DISR = Some, 110}}\n    $12 = {{RUST$ENUM$DISR = None}, {RUST$ENUM$DISR = None, 4094446033}}\n    $13 = {{RUST$ENUM$DISR = NestedVariant1, {regular_struct = {the_first_field = 111, the_second_field = 112.5, the_third_field = true, the_fourth_field = {data_ptr = 0x555555554d90 <str1156> \"NestedStructString1\", length = 19}}, tuple_struct = {113.5, 114}, empty_struct = {<No data fields>}, c_style_enum = CStyleEnumVar2, mixed_enum = {{RUST$ENUM$DISR = MixedEnumTupleVar}, {RUST$ENUM$DISR = MixedEnumTupleVar, 115, 116, false}, {RUST$ENUM$DISR = MixedEnumTupleVar, field1 = 6.9533483476992829e-310, field2 = -10240}}}}, {RUST$ENUM$DISR = NestedVariant1, abc = {regular_struct = {the_first_field = 111, the_second_field = 112.5, the_third_field = true, the_fourth_field = {data_ptr = 0x555555554d90 <str1156> \"NestedStructString1\", length = 19}}, tuple_struct = {113.5, 114}, empty_struct = {<No data fields>}, c_style_enum = CStyleEnumVar2, mixed_enum = {{RUST$ENUM$DISR = MixedEnumTupleVar}, {RUST$ENUM$DISR = MixedEnumTupleVar, 115, 116, false}, {RUST$ENUM$DISR = MixedEnumTupleVar, field1 = 6.9533483476992829e-310, field2 = -10240}}}}}\n    $14 = {{RUST$ENUM$DISR = NestedVariant2, {regular_struct = {the_first_field = 117, the_second_field = 118.5, the_third_field = false, the_fourth_field = {data_ptr = 0x555555554db0 <str1157> \"NestedStructString10\\001\\033\\003;@\", length = 20}}, tuple_struct = {119.5, 120}, empty_struct = {<No data fields>}, c_style_enum = CStyleEnumVar3, mixed_enum = {{RUST$ENUM$DISR = MixedEnumStructVar}, {RUST$ENUM$DISR = MixedEnumStructVar, 0, 0, false}, {RUST$ENUM$DISR = MixedEnumStructVar, field1 = 121.5, field2 = -122}}}}, {RUST$ENUM$DISR = NestedVariant2, abc = {regular_struct = {the_first_field = 117, the_second_field = 118.5, the_third_field = false, the_fourth_field = {data_ptr = 0x555555554db0 <str1157> \"NestedStructString10\\001\\033\\003;@\", length = 20}}, tuple_struct = {119.5, 120}, empty_struct = {<No data fields>}, c_style_enum = CStyleEnumVar3, mixed_enum = {{RUST$ENUM$DISR = MixedEnumStructVar}, {RUST$ENUM$DISR = MixedEnumStructVar, 0, 0, false}, {RUST$ENUM$DISR = MixedEnumStructVar, field1 = 121.5, field2 = -122}}}}}\n    A debugging session is active.\n\n        Inferior 1 [process 23432] will be killed.\n\n    Quit anyway? (y or n) [answered Y; input not from terminal]\n\n    ------------------------------------------\n    stderr:\n    ------------------------------------------\n\n    ------------------------------------------\n\n    task '[debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums.rs' panicked at 'explicit panic', /home/bkoropoff/Source/rust/src/compiletest/runtest.rs:1485\n\n\n\nfailures:\n    [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums-pre-gdb-7-7.rs\n    [debuginfo-gdb] debuginfo/gdb-pretty-struct-and-enums.rs\n```\n\ncc @michaelwoerister \n", "closed_by": {"login": "bkoropoff", "id": 2101303, "node_id": "MDQ6VXNlcjIxMDEzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/2101303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkoropoff", "html_url": "https://github.com/bkoropoff", "followers_url": "https://api.github.com/users/bkoropoff/followers", "following_url": "https://api.github.com/users/bkoropoff/following{/other_user}", "gists_url": "https://api.github.com/users/bkoropoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkoropoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkoropoff/subscriptions", "organizations_url": "https://api.github.com/users/bkoropoff/orgs", "repos_url": "https://api.github.com/users/bkoropoff/repos", "events_url": "https://api.github.com/users/bkoropoff/events{/privacy}", "received_events_url": "https://api.github.com/users/bkoropoff/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18552/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18552/timeline", "performed_via_github_app": null, "state_reason": "completed"}