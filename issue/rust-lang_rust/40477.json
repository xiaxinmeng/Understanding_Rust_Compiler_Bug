{"url": "https://api.github.com/repos/rust-lang/rust/issues/40477", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40477/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40477/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40477/events", "html_url": "https://github.com/rust-lang/rust/issues/40477", "id": 213841095, "node_id": "MDU6SXNzdWUyMTM4NDEwOTU=", "number": 40477, "title": "For function signatures with arrays, the generated PDB file crashes MSVC's msdia DLL", "user": {"login": "staktrace", "id": 485789, "node_id": "MDQ6VXNlcjQ4NTc4OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/485789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staktrace", "html_url": "https://github.com/staktrace", "followers_url": "https://api.github.com/users/staktrace/followers", "following_url": "https://api.github.com/users/staktrace/following{/other_user}", "gists_url": "https://api.github.com/users/staktrace/gists{/gist_id}", "starred_url": "https://api.github.com/users/staktrace/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staktrace/subscriptions", "organizations_url": "https://api.github.com/users/staktrace/orgs", "repos_url": "https://api.github.com/users/staktrace/repos", "events_url": "https://api.github.com/users/staktrace/events{/privacy}", "received_events_url": "https://api.github.com/users/staktrace/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-03-13T17:30:44Z", "updated_at": "2017-06-22T10:34:35Z", "closed_at": "2017-06-22T10:34:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Backstory in https://bugzilla.mozilla.org/show_bug.cgi?id=1343625 (comment 16 has dmajor's analysis).\r\n\r\nIn summary: when building on windows, rustc can generate symbol names into the .pdb file that microsoft's DIA library doesn't like. In particular, it can result in calls to `get_undecoratedNameEx` to crash with a divide-by-zero. This is a bug in the DIA library which I reported to a friend at Microsoft and which has been fixed. However, older versions of the DIA library still have this problem, so rustc should probably be updated to not generate such symbols.\r\n\r\nThis bug results in the mozilla-central dump_syms.exe crashing which in turn generates a bad .sym file which causes windows debug tests to blow up. For now I have a workaround patch ready to land that catches the div-by-zero in dump_syms.exe. @luser suggested that if there is some runtime workaround (e.g. setting rustflags or something) that can avoid this problem, we should do that instead - so if there is anything I can try along those lines, please let me know.\r\n\r\n/cc @michaelwoerister", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40477/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40477/timeline", "performed_via_github_app": null, "state_reason": "completed"}