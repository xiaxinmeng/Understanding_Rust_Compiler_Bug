{"url": "https://api.github.com/repos/rust-lang/rust/issues/106026", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/106026/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/106026/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/106026/events", "html_url": "https://github.com/rust-lang/rust/issues/106026", "id": 1507080545, "node_id": "I_kwDOAAsO6M5Z1Dlh", "number": 106026, "title": "Continue performing Data Oriented Design optimization in enums with variants of similar size", "user": {"login": "SUPERCILEX", "id": 9490724, "node_id": "MDQ6VXNlcjk0OTA3MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9490724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SUPERCILEX", "html_url": "https://github.com/SUPERCILEX", "followers_url": "https://api.github.com/users/SUPERCILEX/followers", "following_url": "https://api.github.com/users/SUPERCILEX/following{/other_user}", "gists_url": "https://api.github.com/users/SUPERCILEX/gists{/gist_id}", "starred_url": "https://api.github.com/users/SUPERCILEX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SUPERCILEX/subscriptions", "organizations_url": "https://api.github.com/users/SUPERCILEX/orgs", "repos_url": "https://api.github.com/users/SUPERCILEX/repos", "events_url": "https://api.github.com/users/SUPERCILEX/events{/privacy}", "received_events_url": "https://api.github.com/users/SUPERCILEX/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-22T00:26:26Z", "updated_at": "2022-12-25T07:57:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Original discussion: https://internals.rust-lang.org/t/automated-data-oriented-design-dod-transformations/18011\r\n\r\nProblem:\r\n```rust\r\nenum E {\r\n    A(u64, u32, u16, u8, bool),\r\n    B(u64),\r\n}\r\n```\r\nIf you add anything to variat `B`, the size of the enum jumps from 16 bytes to 24, even though the tag byte should continue to be able to be shared with the bool. It's possible that this is intentional, but we couldn't figure out conclusively why in IRLO.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/106026/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/106026/timeline", "performed_via_github_app": null, "state_reason": null}