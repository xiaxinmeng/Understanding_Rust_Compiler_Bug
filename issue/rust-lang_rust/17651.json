{"url": "https://api.github.com/repos/rust-lang/rust/issues/17651", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17651/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17651/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17651/events", "html_url": "https://github.com/rust-lang/rust/issues/17651", "id": 44425650, "node_id": "MDU6SXNzdWU0NDQyNTY1MA==", "number": 17651, "title": "ICE: 'assertion failed: ty::type_is_sized(bcx.tcx(), contents_ty)', /home/laumann/rustlang/src/librustc/middle/trans/expr.rs:1556", "user": {"login": "laumann", "id": 390428, "node_id": "MDQ6VXNlcjM5MDQyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/390428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laumann", "html_url": "https://github.com/laumann", "followers_url": "https://api.github.com/users/laumann/followers", "following_url": "https://api.github.com/users/laumann/following{/other_user}", "gists_url": "https://api.github.com/users/laumann/gists{/gist_id}", "starred_url": "https://api.github.com/users/laumann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laumann/subscriptions", "organizations_url": "https://api.github.com/users/laumann/orgs", "repos_url": "https://api.github.com/users/laumann/repos", "events_url": "https://api.github.com/users/laumann/events{/privacy}", "received_events_url": "https://api.github.com/users/laumann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-09-30T11:06:54Z", "updated_at": "2014-10-14T15:20:15Z", "closed_at": "2014-10-14T15:20:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\nenum AnEnum {\n    Something(Box<[u8]>)\n}\n\nfn main() {\n    let buf = [0u8, ..1024];\n\n    let (tx, rx) = channel();\n    spawn(proc() {\n        tx.send(Something(box *buf.slice(0, 10)));\n    });\n\n    let _smth = rx.recv();\n}\n```\n\nCompilation backtrace\n\n```\n> RUST_BACKTRACE=1 rustc bug-report.rs                                                                               ~/rust@sneglzilla\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'assertion failed: ty::type_is_sized(bcx.tcx(), contents_ty)', /home/laumann/rustlang/src/librustc/middle/trans/expr.rs:1556\n\nstack backtrace:\n   1:     0x7fce2e68b7f0 - rt::backtrace::imp::write::h18da00e3fa21aa27UVq\n   2:     0x7fce2e68e980 - failure::on_fail::hf0bf9ceb951d492amhr\n   3:     0x7fce32c0e070 - unwind::begin_unwind_inner::h6b7f27e30df90d49SUd\n   4:     0x7fce3325f3d0 - unwind::begin_unwind::h11203309285505231177\n   5:     0x7fce3364dff0 - middle::trans::expr::trans_uniq_expr::hf654a567423fe43f8T4\n   6:     0x7fce3364eb00 - middle::trans::expr::trans_unary::hf911da575068b68f2P4\n   7:     0x7fce33643e80 - middle::trans::expr::trans_unadjusted::hccc8ccb9a94a90ec2v3\n   8:     0x7fce33607cd0 - middle::trans::expr::trans_into::h6cee4eb39aeb67db4K2\n   9:     0x7fce33659160 - middle::trans::expr::trans_adt::hf361baf5d06d970aaH4\n  10:     0x7fce3363c5b0 - middle::trans::base::trans_named_tuple_constructor::hef48ebcafb37b2f3Cdf\n  11:     0x7fce3360fae0 - middle::trans::callee::trans_call_inner::h6360d135c41f8588V01\n  12:     0x7fce336368c0 - middle::trans::callee::trans_call::hbcb2abdb833634a2gV1\n  13:     0x7fce336452e0 - middle::trans::expr::trans_rvalue_dps_unadjusted::ha391dd13a949111bd93\n  14:     0x7fce33643e80 - middle::trans::expr::trans_unadjusted::hccc8ccb9a94a90ec2v3\n  15:     0x7fce336092a0 - middle::trans::expr::trans::heb5629bc9dc8455bYO2\n  16:     0x7fce3363cd20 - middle::trans::callee::trans_args::hfb38277828a15ad7Sl2\n  17:     0x7fce3360fae0 - middle::trans::callee::trans_call_inner::h6360d135c41f8588V01\n  18:     0x7fce33637580 - middle::trans::callee::trans_method_call::h045a13573e018f1coW1\n  19:     0x7fce336452e0 - middle::trans::expr::trans_rvalue_dps_unadjusted::ha391dd13a949111bd93\n  20:     0x7fce33607cd0 - middle::trans::expr::trans_into::h6cee4eb39aeb67db4K2\n  21:     0x7fce336070a0 - middle::trans::controlflow::trans_stmt_semi::hb02369797d17f5e1fRY\n  22:     0x7fce33606650 - middle::trans::controlflow::trans_stmt::h5279c34802b7a3172MY\n  23:     0x7fce33608160 - middle::trans::controlflow::trans_block::h5bbf02ac441333a58RY\n  24:     0x7fce336452e0 - middle::trans::expr::trans_rvalue_dps_unadjusted::ha391dd13a949111bd93\n  25:     0x7fce33607cd0 - middle::trans::expr::trans_into::h6cee4eb39aeb67db4K2\n  26:     0x7fce33608160 - middle::trans::controlflow::trans_block::h5bbf02ac441333a58RY\n  27:     0x7fce336b3b00 - middle::trans::base::trans_closure::h2de5277f401e7e0eSXe\n  28:     0x7fce3365a640 - middle::trans::closure::trans_expr_fn::h38a72da08133e093k4i\n  29:     0x7fce336452e0 - middle::trans::expr::trans_rvalue_dps_unadjusted::ha391dd13a949111bd93\n  30:     0x7fce33643e80 - middle::trans::expr::trans_unadjusted::hccc8ccb9a94a90ec2v3\n  31:     0x7fce336092a0 - middle::trans::expr::trans::heb5629bc9dc8455bYO2\n  32:     0x7fce3363cd20 - middle::trans::callee::trans_args::hfb38277828a15ad7Sl2\n  33:     0x7fce3360fae0 - middle::trans::callee::trans_call_inner::h6360d135c41f8588V01\n  34:     0x7fce336368c0 - middle::trans::callee::trans_call::hbcb2abdb833634a2gV1\n  35:     0x7fce336452e0 - middle::trans::expr::trans_rvalue_dps_unadjusted::ha391dd13a949111bd93\n  36:     0x7fce33607cd0 - middle::trans::expr::trans_into::h6cee4eb39aeb67db4K2\n  37:     0x7fce336070a0 - middle::trans::controlflow::trans_stmt_semi::hb02369797d17f5e1fRY\n  38:     0x7fce33606650 - middle::trans::controlflow::trans_stmt::h5279c34802b7a3172MY\n  39:     0x7fce33608160 - middle::trans::controlflow::trans_block::h5bbf02ac441333a58RY\n  40:     0x7fce336b3b00 - middle::trans::base::trans_closure::h2de5277f401e7e0eSXe\n  41:     0x7fce335fa1b0 - middle::trans::base::trans_fn::h8818c59c3b560decg9e\n  42:     0x7fce335f76c0 - middle::trans::base::trans_item::hbdab4d8b520880d6zsf\n  43:     0x7fce336bee00 - middle::trans::base::trans_crate::h8dc93a451eb88c6ePsg\n  44:     0x7fce33ab8bf0 - driver::driver::phase_4_translate_to_llvm::hae0d2e943d04f1f7bZw\n  45:     0x7fce33ab04c0 - driver::driver::compile_input::hd932c63f3dc5f11b9vw\n  46:     0x7fce33b31c80 - driver::run_compiler::ha2ce4a245eb2a747dmA\n  47:     0x7fce33b31b60 - driver::main_args::closure.146353\n  48:     0x7fce33295bf0 - task::TaskBuilder<S>::try_future::closure.101568\n  49:     0x7fce332959e0 - task::TaskBuilder<S>::spawn_internal::closure.101539\n  50:     0x7fce32f676d0 - task::spawn_opts::closure.8494\n  51:     0x7fce32c6e220 - rust_try_inner\n  52:     0x7fce32c6e210 - rust_try\n  53:     0x7fce32c0b200 - unwind::try::he73fe587a864f313AJd\n  54:     0x7fce32c0b090 - task::Task::run::h3386e28ab4ecfaf2UYc\n  55:     0x7fce32f67440 - task::spawn_opts::closure.8434\n  56:     0x7fce32c0d110 - thread::thread_start::h86c5236ebccc312cpjd\n  57:     0x7fce2da36250 - start_thread\n  58:     0x7fce328e43b9 - clone\n  59:                0x0 - <unknown>\n```\n\nVersion\n\n```\n> rustc --version\nrustc 0.12.0-dev (740905042 2014-09-29 23:52:21 +0000)\n```\n\nSeems to be _very_ similar to #16813 and #17118, but the difference is trying to send the value over a channel (removing this gives a \"cannot move a value of type [u8]: the size of [u8] cannot be statically determined)\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17651/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17651/timeline", "performed_via_github_app": null, "state_reason": "completed"}