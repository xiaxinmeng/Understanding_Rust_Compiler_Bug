{"url": "https://api.github.com/repos/rust-lang/rust/issues/4260", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/4260/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/4260/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/4260/events", "html_url": "https://github.com/rust-lang/rust/issues/4260", "id": 9487764, "node_id": "MDU6SXNzdWU5NDg3NzY0", "number": 4260, "title": "ICE with library crate", "user": {"login": "jesse99", "id": 425055, "node_id": "MDQ6VXNlcjQyNTA1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/425055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jesse99", "html_url": "https://github.com/jesse99", "followers_url": "https://api.github.com/users/jesse99/followers", "following_url": "https://api.github.com/users/jesse99/following{/other_user}", "gists_url": "https://api.github.com/users/jesse99/gists{/gist_id}", "starred_url": "https://api.github.com/users/jesse99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jesse99/subscriptions", "organizations_url": "https://api.github.com/users/jesse99/orgs", "repos_url": "https://api.github.com/users/jesse99/repos", "events_url": "https://api.github.com/users/jesse99/events{/privacy}", "received_events_url": "https://api.github.com/users/jesse99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 13242248, "node_id": "MDU6TGFiZWwxMzI0MjI0OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-metadata", "name": "A-metadata", "color": "f7e101", "default": false, "description": "Area: crate metadata"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/9", "html_url": "https://github.com/rust-lang/rust/milestone/9", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/9/labels", "id": 194126, "node_id": "MDk6TWlsZXN0b25lMTk0MTI2", "number": 9, "title": "0.6", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 203, "state": "closed", "created_at": "2012-10-11T18:15:24Z", "updated_at": "2015-01-21T01:43:22Z", "due_on": "2013-03-25T07:00:00Z", "closed_at": "2013-04-02T18:27:52Z"}, "comments": 4, "created_at": "2012-12-23T04:41:01Z", "updated_at": "2013-03-21T19:44:40Z", "closed_at": "2013-03-21T19:44:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Getting an ICE trying to use [rparse](https://github.com/jesse99/rparse) with 0.5. Annoyingly it only happens when I actually use the rparse library: if I simply paste the relevant rparse code into my test case it compiles fine. Here is the test case. It assumes that you have rparse d5baebecf681870b4f06660968c15c7d823b3cfe available (rparse doesn't have any dependencies so it should be simple to build):\n\n```\n#[allow(non_implicitly_copyable_typarams)];\n\nextern mod std;\n\nextern mod rparse (name = \"rparse\", vers = \"0.6\");\nuse rparse::{StringParsers, seq2};\n\npriv fn langtag()\n{\n    let suffix = do seq2(\"oh\".lit(), \"noes\".lit()) \n        |_l, _name| {result::Ok(~\"-\")};\n    fmt!(\"%?\", suffix);\n}\n\n//RUST_LOG=rustc=1,::rt::backtrace rustc -L . --test rparse_ice.rs\n//rust: task failed at 'Key not found in table: 5331', /Users/jessejones/Source/Third_Party/rust/src/librustc/rustc.rc:1\n//error: internal compiler error: unexpected failure\n//note: the compiler hit an unexpected failure path. this is a bug\n//note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\n//rust: task failed at 'explicit failure', /Users/jessejones/Source/Third_Party/rust/src/librustc/rustc.rc:425\n//rust: domain main @0x7f8134800010 root task failed\n//rust: task failed at 'killed', /Users/jessejones/Source/Third_Party/rust/src/libcore/task/mod.rs:570\n//make: *** [rparse_ice] Error 101\n//exited with code 2\n\n// Note that there is no ICE if the seq2+ret code is pasted into here (and given new names like seq2b and retb).\n// Also the ICE happens with rparse optimizations on and off (on is the default).\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/4260/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/4260/timeline", "performed_via_github_app": null, "state_reason": "completed"}