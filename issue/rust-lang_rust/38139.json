{"url": "https://api.github.com/repos/rust-lang/rust/issues/38139", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38139/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38139/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38139/events", "html_url": "https://github.com/rust-lang/rust/issues/38139", "id": 193255655, "node_id": "MDU6SXNzdWUxOTMyNTU2NTU=", "number": 38139, "title": "ICE from inside libserialize (index out of bounds)", "user": {"login": "sdleffler", "id": 5241142, "node_id": "MDQ6VXNlcjUyNDExNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/5241142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdleffler", "html_url": "https://github.com/sdleffler", "followers_url": "https://api.github.com/users/sdleffler/followers", "following_url": "https://api.github.com/users/sdleffler/following{/other_user}", "gists_url": "https://api.github.com/users/sdleffler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdleffler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdleffler/subscriptions", "organizations_url": "https://api.github.com/users/sdleffler/orgs", "repos_url": "https://api.github.com/users/sdleffler/repos", "events_url": "https://api.github.com/users/sdleffler/events{/privacy}", "received_events_url": "https://api.github.com/users/sdleffler/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-12-03T01:28:30Z", "updated_at": "2016-12-03T15:40:23Z", "closed_at": "2016-12-03T15:40:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Dealing with the (now current) issues with nightly cargo, I decided to run `cargo update`, `rustup default stable` and then `cargo build`. The result was this:\r\n\r\n```\r\nsean@sean-Samus:~/Projects/tll-array$ RUST_BACKTRACE=1 cargo build --verbose\r\n       Fresh type-operators v0.3.4\r\n       Fresh void v1.0.2\r\n       Fresh type-level-logic v0.1.0\r\n       Fresh unreachable v0.1.1\r\n       Fresh tll-iterator v0.1.0 (https://github.com/sdleffler/tll-iterator-rs.git#95b65ff1)\r\n   Compiling tll-array v0.1.0 (file:///home/sean/Projects/tll-array)\r\n     Running `rustc src/lib.rs --crate-name tll_array --crate-type lib -g -C metadata=60569300049d440b --out-dir /home/sean/Projects/tll-array/target/debug/deps --emit=dep-info,link -L dependency=/home/sean/Projects/tll-array/target/debug/deps --extern type_operators=/home/sean/Projects/tll-array/target/debug/deps/libtype_operators-d56a22000476e4e5.rlib --extern unreachable=/home/sean/Projects/tll-array/target/debug/deps/libunreachable-cf0b03299c3c2c2d.rlib --extern tll_iterator=/home/sean/Projects/tll-array/target/debug/deps/libtll_iterator-0e29413326ade8e9.rlib --extern type_level_logic=/home/sean/Projects/tll-array/target/debug/deps/libtype_level_logic-8b7ddf90d709f195.rlib`\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: run with `RUST_BACKTRACE=1` for a backtrace\r\n\r\nthread 'rustc' panicked at 'index out of bounds: the len is 109251 but the index is 109251', ../src/libserialize/leb128.rs:46\r\nstack backtrace:\r\n   1:     0x7fe4a217885f - std::sys::backtrace::tracing::imp::write::h6f1d53a70916b90d\r\n   2:     0x7fe4a2187dbd - std::panicking::default_hook::{{closure}}::h137e876f7d3b5850\r\n   3:     0x7fe4a218522e - std::panicking::default_hook::h0ac3811ec7cee78c\r\n   4:     0x7fe4a2185918 - std::panicking::rust_panic_with_hook::hc303199e04562edf\r\n   5:     0x7fe4a21857b2 - std::panicking::begin_panic::h6ed03353807cf54d\r\n   6:     0x7fe4a21856f0 - std::panicking::begin_panic_fmt::hc321cece241bb2f5\r\n   7:     0x7fe4a2185671 - rust_begin_unwind\r\n   8:     0x7fe4a21d2fff - core::panicking::panic_fmt::h27224b181f9f037f\r\n   9:     0x7fe4a21d2fa3 - core::panicking::panic_bounds_check::h19e9bbc59320a57e\r\n  10:     0x7fe49b5082ef - <serialize::opaque::Decoder<'a> as serialize::serialize::Decoder>::read_usize::hdb6b9929c2878103\r\n  11:     0x7fe49fde1798 - rustc_metadata::decoder::<impl rustc_metadata::cstore::MetadataBlob>::get_root::ha0bece0640a71bb4\r\n  12:     0x7fe49fe0a3bf - rustc_metadata::loader::Context::extract_one::h893f537a80fcaa7b\r\n  13:     0x7fe49fe07729 - rustc_metadata::loader::Context::find_library_crate::h0ae9ebab39601e07\r\n  14:     0x7fe49fdf60b9 - rustc_metadata::creader::CrateReader::load::hbbb9048f37b5929d\r\n  15:     0x7fe49fdf54d8 - rustc_metadata::creader::CrateReader::resolve_crate::h0ea8ce3f005d5018\r\n  16:     0x7fe49fe1359a - rustc_metadata::creader::CrateReader::resolve_crate_deps::{{closure}}::hba6352ef73c55dfc\r\n  17:     0x7fe49fd87c16 - <std::collections::hash::map::HashMap<K, V, S> as core::iter::traits::FromIterator<(K, V)>>::from_iter::hfdd794029d934f9e\r\n  18:     0x7fe49fdf384f - rustc_metadata::creader::CrateReader::register_crate::h5c79c40329468538\r\n  19:     0x7fe49fdf5853 - rustc_metadata::creader::CrateReader::resolve_crate::h0ea8ce3f005d5018\r\n  20:     0x7fe49fdfdf86 - <rustc_metadata::creader::CrateLoader<'a> as rustc::middle::cstore::CrateLoader>::process_item::h2c1f1f8ea009fc17\r\n  21:     0x7fe4a1756cfa - <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor<'a, 'b> as syntax::visit::Visitor>::visit_item::hca6f65f5d1f072d8\r\n  22:     0x7fe4a1755fbe - rustc_resolve::build_reduced_graph::<impl rustc_resolve::Resolver<'b>>::build_reduced_graph::h394847c4f1568da6\r\n  23:     0x7fe4a254417b - rustc_driver::driver::phase_2_configure_and_expand::{{closure}}::hdfad824fa7e49709\r\n  24:     0x7fe4a24faa58 - rustc_driver::driver::phase_2_configure_and_expand::h2f62e5b496da5c2b\r\n  25:     0x7fe4a24f1efb - rustc_driver::driver::compile_input::hef221f9f618e92f5\r\n  26:     0x7fe4a251e206 - rustc_driver::run_compiler::h7dddd4089f8330b4\r\n  27:     0x7fe4a245a2c3 - std::panicking::try::do_call::h1e3ece12e3f812df\r\n  28:     0x7fe4a218fcb6 - __rust_maybe_catch_panic\r\n  29:     0x7fe4a24784f9 - <F as alloc::boxed::FnBox<A>>::call_box::h05b222e46803eb30\r\n  30:     0x7fe4a2183c80 - std::sys::thread::Thread::new::thread_start::h759e10bc4abc7e72\r\n  31:     0x7fe49b0cd6f9 - start_thread\r\n  32:     0x7fe4a1e47b5c - clone\r\n  33:                0x0 - <unknown>\r\n\r\nerror: Could not compile `tll-array`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc src/lib.rs --crate-name tll_array --crate-type lib -g -C metadata=60569300049d440b --out-dir /home/sean/Projects/tll-array/target/debug/deps --emit=dep-info,link -L dependency=/home/sean/Projects/tll-array/target/debug/deps --extern type_operators=/home/sean/Projects/tll-array/target/debug/deps/libtype_operators-d56a22000476e4e5.rlib --extern unreachable=/home/sean/Projects/tll-array/target/debug/deps/libunreachable-cf0b03299c3c2c2d.rlib --extern tll_iterator=/home/sean/Projects/tll-array/target/debug/deps/libtll_iterator-0e29413326ade8e9.rlib --extern type_level_logic=/home/sean/Projects/tll-array/target/debug/deps/libtype_level_logic-8b7ddf90d709f195.rlib` (exit code: 101)\r\n```\r\n\r\n```\r\nsean@sean-Samus:~/Projects/tll-array$ cargo --version --verbose\r\ncargo 0.13.0-nightly (eca9e15 2016-11-01)\r\n```\r\n\r\n```\r\nsean@sean-Samus:~/Projects/tll-array$ rustc --version --verbose\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nbinary: rustc\r\ncommit-hash: 2c6933acc05c61e041be764cb1331f6281993f3f\r\ncommit-date: 2016-11-07\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.13.0\r\n```\r\n\r\nI'm not sure that any of my code itself was responsible for this ICE, so I haven't pasted/linked any of it here. If that is not the case, please let me know.\r\n\r\nTesing a little further, this also occurs with beta rustc:\r\n\r\n```\r\nsean@sean-Samus:~/Projects/tll-array$ rustc --version --verbose\r\nrustc 1.14.0-beta.2 (e627a2e6e 2016-11-16)\r\nbinary: rustc\r\ncommit-hash: e627a2e6edbc7b7fd205de8ca7c86cff76655f4d\r\ncommit-date: 2016-11-16\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.14.0-beta.2\r\nLLVM version: 3.9\r\n```", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38139/timeline", "performed_via_github_app": null, "state_reason": "completed"}