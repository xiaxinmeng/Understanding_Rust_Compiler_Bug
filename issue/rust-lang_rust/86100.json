{"url": "https://api.github.com/repos/rust-lang/rust/issues/86100", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86100/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86100/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86100/events", "html_url": "https://github.com/rust-lang/rust/issues/86100", "id": 913574947, "node_id": "MDU6SXNzdWU5MTM1NzQ5NDc=", "number": 86100, "title": "Error output for mismatched types with a 1-ary tuple could hint to add a missing comma", "user": {"login": "asquared31415", "id": 34665709, "node_id": "MDQ6VXNlcjM0NjY1NzA5", "avatar_url": "https://avatars.githubusercontent.com/u/34665709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asquared31415", "html_url": "https://github.com/asquared31415", "followers_url": "https://api.github.com/users/asquared31415/followers", "following_url": "https://api.github.com/users/asquared31415/following{/other_user}", "gists_url": "https://api.github.com/users/asquared31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/asquared31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asquared31415/subscriptions", "organizations_url": "https://api.github.com/users/asquared31415/orgs", "repos_url": "https://api.github.com/users/asquared31415/repos", "events_url": "https://api.github.com/users/asquared31415/events{/privacy}", "received_events_url": "https://api.github.com/users/asquared31415/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}, {"id": 1596122811, "node_id": "MDU6TGFiZWwxNTk2MTIyODEx", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-newcomer-roadblock", "name": "D-newcomer-roadblock", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error hard to understand for new users"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-07T13:52:59Z", "updated_at": "2021-06-11T13:06:46Z", "closed_at": "2021-06-11T13:06:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Type mismatch errors with a 1-tuple and a single value wrapped in parentheses could be improved.\r\n\r\n```rust\r\nlet _t: (u8,) = (1);\r\n```\r\n\r\n[Playground link](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=63829ad8aa4edd929fa9430cae7fc397) with a few other examples\r\n\r\nThe current output is:\r\n\r\n```\r\nwarning: unnecessary parentheses around assigned value\r\n --> src/main.rs:2:21\r\n  |\r\n2 |     let _t: (u8,) = (1);\r\n  |                     ^^^ help: remove these parentheses\r\n  |\r\n  = note: `#[warn(unused_parens)]` on by default\r\n\r\nerror[E0308]: mismatched types\r\n --> src/main.rs:2:21\r\n  |\r\n2 |     let _t: (u8,) = (1);\r\n  |             -----   ^^^ expected tuple, found integer\r\n  |             |\r\n  |             expected due to this\r\n  |\r\n  = note: expected tuple `(u8,)`\r\n              found type `{integer}`\r\n```\r\n\r\nIdeally the E0308 mismatched types error could have a hint when the type of the value and the type of the element in the 1-tuple match that is something along the lines of\r\n\r\n```\r\nhelp: a tuple with one element needs a comma\r\n    let _t: (u8,) = (1,);\r\n                      ^\r\n```\r\n\r\nI believe that this could improve newcomers' experience by highlighting the difference in the types, especially when the type is inferred like in some of the other playground examples, and explaining the syntax to create a tuple.\r\n\r\nInspired by #86019 \r\n\r\n@rustbot label +D-papercut +D-newcomer-roadblock\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86100/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86100/timeline", "performed_via_github_app": null, "state_reason": "completed"}