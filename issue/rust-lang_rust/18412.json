{"url": "https://api.github.com/repos/rust-lang/rust/issues/18412", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18412/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18412/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18412/events", "html_url": "https://github.com/rust-lang/rust/issues/18412", "id": 47103876, "node_id": "MDU6SXNzdWU0NzEwMzg3Ng==", "number": 18412, "title": "ICE when assigning a method to a variable", "user": {"login": "murarth", "id": 1332722, "node_id": "MDQ6VXNlcjEzMzI3MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1332722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/murarth", "html_url": "https://github.com/murarth", "followers_url": "https://api.github.com/users/murarth/followers", "following_url": "https://api.github.com/users/murarth/following{/other_user}", "gists_url": "https://api.github.com/users/murarth/gists{/gist_id}", "starred_url": "https://api.github.com/users/murarth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/murarth/subscriptions", "organizations_url": "https://api.github.com/users/murarth/orgs", "repos_url": "https://api.github.com/users/murarth/repos", "events_url": "https://api.github.com/users/murarth/events{/privacy}", "received_events_url": "https://api.github.com/users/murarth/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-10-29T02:10:11Z", "updated_at": "2014-10-31T05:00:11Z", "closed_at": "2014-10-31T05:00:11Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was curious whether it would be possible to treat a method like a function, so I gave it a try.\n\n``` rust\nstruct A;\n\nimpl A {\n    fn foo(&self) { }\n}\n\nfn main() {\n    let f = A::foo;\n    f(&A);\n}\n```\n\nThis is the version of rustc:\n\n```\n$ rustc -v\nrustc 0.13.0-nightly (bd7138dd6 2014-10-27 23:02:55 +0000)\n```\n\nAnd this is the error:\n\n```\nx.rs:8:13: 8:19 error: internal compiler error: uncategorized def for expr 26: DefMethod(DefId { krate: 0, node: 8 }, None, FromImpl(DefId { krate: 0, node: 7 }))\nx.rs:8     let f = A::foo;\n                   ^~~~~~\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/libsyntax/diagnostic.rs:116\n\nstack backtrace:\n   1:     0x7ffe6856e070 - rt::backtrace::imp::write::h5a0997daa091452aAdq\n   2:     0x7ffe68571160 - failure::on_fail::hc2bbfb16552a42a7Xyq\n   3:     0x7ffe6caae180 - unwind::begin_unwind_inner::hba0c3c1372f5cb73PRd\n   4:     0x7ffe692c39b0 - unwind::begin_unwind::h2734907025152909083\n   5:     0x7ffe692c3930 - diagnostic::SpanHandler::span_bug::h963265597453565ah6F\n   6:     0x7ffe6d4a4b10 - middle::ty::expr_kind::hdf6435478ca3d03fa9I\n   7:     0x7ffe6d46cb30 - middle::trans::expr::trans_into::h59e7bbcc4d5362a6dG4\n   8:     0x7ffe6d536370 - middle::trans::_match::store_local::closure.126275\n   9:     0x7ffe6d536160 - middle::trans::_match::mk_binding_alloca::h7586589838283757987\n  10:     0x7ffe6d505760 - middle::trans::_match::store_local::haee979a4ae164c29qwk\n  11:     0x7ffe6d46c180 - middle::trans::base::init_local::h14997c0412bcab7fybg\n  12:     0x7ffe6d46b540 - middle::trans::controlflow::trans_stmt::h0b313766085d2deenR0\n  13:     0x7ffe6d46cf50 - middle::trans::controlflow::trans_block::he2d4b6f33ad56bdctW0\n  14:     0x7ffe6d50c730 - middle::trans::base::trans_closure::hf302583eb5981ca2Y2g\n  15:     0x7ffe6d460250 - middle::trans::base::trans_fn::h2698897672e52421meh\n  16:     0x7ffe6d45d990 - middle::trans::base::trans_item::h108ceed97013196fFxh\n  17:     0x7ffe6d516d10 - middle::trans::base::trans_crate::h2959ddec9d0661d4wvi\n  18:     0x7ffe6d934da0 - driver::driver::phase_4_translate_to_llvm::h871e70ba7828df26FnA\n  19:     0x7ffe6d92b610 - driver::driver::compile_input::hc2f03680b6cd2d08zUz\n  20:     0x7ffe6d9ae5c0 - driver::run_compiler::h7d611b9a41d83191KHD\n  21:     0x7ffe6d9ae4b0 - driver::run::closure.144980\n  22:     0x7ffe6d12bfd0 - task::TaskBuilder<S>::try_future::closure.103244\n  23:     0x7ffe6d12bdc0 - task::TaskBuilder<S>::spawn_internal::closure.103215\n  24:     0x7ffe6cdf8a80 - task::NativeSpawner.Spawner::spawn::closure.8444\n  25:     0x7ffe6cb07650 - rust_try_inner\n  26:     0x7ffe6cb07640 - rust_try\n  27:     0x7ffe6caab920 - unwind::try::hc0b42c9b6f96abb8xGd\n  28:     0x7ffe6caab7b0 - task::Task::run::h1c3d2c1e07305f00nMc\n  29:     0x7ffe6cdf87c0 - task::NativeSpawner.Spawner::spawn::closure.8382\n  30:     0x7ffe6caad050 - thread::thread_start::h962311e4e7f76acfC7c\n  31:     0x7ffe6791b0c0 - start_thread\n  32:     0x7ffe6c775f89 - __clone\n  33:                0x0 - <unknown>\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18412/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18412/timeline", "performed_via_github_app": null, "state_reason": "completed"}