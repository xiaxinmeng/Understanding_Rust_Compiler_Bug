{"url": "https://api.github.com/repos/rust-lang/rust/issues/72755", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72755/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72755/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72755/events", "html_url": "https://github.com/rust-lang/rust/issues/72755", "id": 627494317, "node_id": "MDU6SXNzdWU2Mjc0OTQzMTc=", "number": 72755, "title": "Rustc keeps suggesting to increase type_length_limit instead of giving the final value", "user": {"login": "NotWearingPants", "id": 26556598, "node_id": "MDQ6VXNlcjI2NTU2NTk4", "avatar_url": "https://avatars.githubusercontent.com/u/26556598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotWearingPants", "html_url": "https://github.com/NotWearingPants", "followers_url": "https://api.github.com/users/NotWearingPants/followers", "following_url": "https://api.github.com/users/NotWearingPants/following{/other_user}", "gists_url": "https://api.github.com/users/NotWearingPants/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotWearingPants/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotWearingPants/subscriptions", "organizations_url": "https://api.github.com/users/NotWearingPants/orgs", "repos_url": "https://api.github.com/users/NotWearingPants/repos", "events_url": "https://api.github.com/users/NotWearingPants/events{/privacy}", "received_events_url": "https://api.github.com/users/NotWearingPants/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-29T19:33:59Z", "updated_at": "2023-03-28T15:08:54Z", "closed_at": "2023-03-28T15:08:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried compiling this code:\r\n\r\n```rust\r\nfn main() {\r\n\tlet x = vec!(1, 2, 3);\r\n\r\n\tlet y: std::vec::Vec<u32> = x.iter()\r\n\t\t.map(|byte| *byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.map(|byte| byte)\r\n\t\t.collect();\r\n\r\n\tprintln!(\"{}\", y[0]);\r\n}\r\n```\r\n(don't ask why... lol)\r\n\r\nI expected it to compile and print 1, because I just have some maps which don't affect the vector.\r\n\r\nInstead, the compiler printed:\r\n```\r\nerror: reached the type-length limit while instantiating `<std::iter::Map<std::iter::Map<s...osure@src\\main.rs:13:8: 13:19]]>`\r\n    |\r\n    = note: consider adding a `#![type_length_limit=\"1376294\"]` attribute to your crate\r\n\r\nerror: aborting due to previous error\r\n```\r\n\r\nI have no idea why it fails, but I do as it says and add the `type_length_limit=\"1376294\"` line to the top of the file.\r\n\r\nRecompiling, it gives the same output but now with `type_length_limit=\"2752543\"`.\r\n\r\nAfter using the new value and recompiling, it now wants 5505048.\r\n\r\nRepeating the same process, I get 11010065, then 22020106, then 44040195, etc.\r\nBasically it keeps almost doubling the value each time, and my code still doesn't compile for some reason.\r\n\r\nThe compiler should either give me the final value that would work, or fail with a better error message if no value would work, or better - succeed in compiling this simple program that would simply work in other programming languages.\r\n\r\n### Meta\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.43.1 (8d69840ab 2020-05-04)\r\nbinary: rustc\r\ncommit-hash: 8d69840ab92ea7f4d323420088dd8c9775f180cd\r\ncommit-date: 2020-05-04\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.43.1\r\nLLVM version: 9.0\r\n```\r\n", "closed_by": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72755/timeline", "performed_via_github_app": null, "state_reason": "completed"}