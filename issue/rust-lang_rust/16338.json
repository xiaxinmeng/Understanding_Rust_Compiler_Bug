{"url": "https://api.github.com/repos/rust-lang/rust/issues/16338", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16338/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16338/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16338/events", "html_url": "https://github.com/rust-lang/rust/issues/16338", "id": 39772578, "node_id": "MDU6SXNzdWUzOTc3MjU3OA==", "number": 16338, "title": "ICE when specializing function with wrong number of parameters", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-08-07T21:56:02Z", "updated_at": "2014-08-17T22:56:21Z", "closed_at": "2014-08-17T22:56:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### STR\n\n``` rust\nuse std::mem;\nuse std::raw::Slice;\n\nunsafe fn foo<T>(s: &mut [T]) {\n    // GOOD\n    let Slice { data: data, len: len } = mem::transmute::<&mut [T], Slice<T>>(s);\n\n    // ICE\n    let Slice { data: data, len: len } = mem::transmute::<&mut [T]>(s);\n}\n\nfn main() {}\n```\n#### Output\n\n``` rust\nice.rs:9:42: 9:68 error: too few type parameters provided: expected 2 parameter(s) but found 1 parameter(s) [E0089]\nice.rs:9     let Slice { data: data, len: len } = mem::transmute::<&mut [T]>(s);\n                                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~\nice.rs:1:1: 1:1 error: internal compiler error: Type parameter <generic #0> out of range when substituting (root type=*const <generic #0>)\nice.rs:1 use std::mem;\n         ^\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /var/tmp/paludis/build/dev-lang-rust-scm/work/rust-scm/src/libsyntax/ast_util.rs:784\n```\n#### Backtrace\n\n``` rust\n   1:     0x7fa3eba4aea0 - rt::backtrace::imp::write::h8c6f09e2c045ded4t9p\n   2:     0x7fa3eba4df40 - <unknown>\n   3:     0x7fa3eff78870 - unwind::begin_unwind_inner::hde1fdf0d3c58be46M8d\n   4:     0x7fa3ec5c5330 - <unknown>\n   5:     0x7fa3ec5c5280 - diagnostic::SpanHandler::span_bug::hb643991b73dd73ceBID\n   6:     0x7fa3f077ffa0 - driver::session::Session::span_bug::h1958b9cf10e9936dPix\n   7:     0x7fa3f085b820 - middle::subst::SubstFolder<'a>.TypeFolder::fold_ty::hce1dda7c9bfc1345nuW\n   8:     0x7fa3f085b820 - middle::subst::SubstFolder<'a>.TypeFolder::fold_ty::hce1dda7c9bfc1345nuW\n   9:     0x7fa3f085b730 - <unknown>\n  10:     0x7fa3f0aa35e0 - middle::ty::lookup_field_type::heb4c950674abc5c0L3F\n  11:     0x7fa3f0afaa50 - middle::typeck::check::_match::check_struct_pat_fields::h528d0ebfe42c2cf1L2H\n  12:     0x7fa3f0afdf30 - middle::typeck::check::_match::check_struct_pat::h2604e2d1497de3f1t9H\n  13:     0x7fa3f0af05e0 - middle::typeck::check::_match::check_pat::h85bcdea4f0a9f3f86dI\n  14:     0x7fa3f0c08610 - middle::typeck::check::check_decl_local::h5110173195dc124a2mV\n  15:     0x7fa3f0c08830 - middle::typeck::check::check_stmt::h3bf06fef24ff92409oV\n  16:     0x7fa3f0b72d90 - <unknown>\n  17:     0x7fa3f0b6ebf0 - <unknown>\n  18:     0x7fa3f0b6e910 - <unknown>\n  19:     0x7fa3f0b67a90 - middle::typeck::check::check_item::h90885b67c7c48ea1m1Q\n  20:     0x7fa3f0b6e710 - middle::typeck::check::check_item_types::h935cc44dce5d3acbQrQ\n  21:     0x7fa3f05c02d0 - <unknown>\n  22:     0x7fa3f0d7a940 - middle::typeck::check_crate::h679dbd3e8e3966d8GJh\n  23:     0x7fa3f0e4b0d0 - driver::driver::phase_3_run_analysis_passes::ha24ce155c6a41a29Ibw\n  24:     0x7fa3f0e46240 - driver::driver::compile_input::h2be4ad1a0cb48e63XXv\n  25:     0x7fa3f0ee8d70 - <unknown>\n  26:     0x7fa3f0ee8c80 - <unknown>\n  27:     0x7fa3f0efac80 - <unknown>\n  28:     0x7fa3f0efaa80 - <unknown>\n  29:     0x7fa3f02d1d60 - <unknown>\n  30:     0x7fa3effc7ec0 - <unknown>\n  31:     0x7fa3effc7eb0 - rust_try\n  32:     0x7fa3eff75ed0 - unwind::try::hbe9a6258c56c4daahXd\n  33:     0x7fa3eff75c70 - task::Task::run::hf1f50bebcf947c0cT4c\n  34:     0x7fa3f02d1b20 - <unknown>\n  35:     0x7fa3eff77ab0 - <unknown>\n  36:     0x7fa3eadca000 - start_thread\n  37:     0x7fa3efc47269 - clone\n  38:                0x0 - <unknown>\n```\n#### Version\n\n```\nrustc 0.12.0-pre (8a02304a4 2014-08-07 11:31:05 +0000)\n```\n\n---\n\nSimilar ICE message/backtrace to #15873 and #16218, but triggered differently.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16338/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16338/timeline", "performed_via_github_app": null, "state_reason": "completed"}