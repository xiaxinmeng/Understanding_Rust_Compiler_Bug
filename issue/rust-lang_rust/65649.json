{"url": "https://api.github.com/repos/rust-lang/rust/issues/65649", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/65649/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/65649/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/65649/events", "html_url": "https://github.com/rust-lang/rust/issues/65649", "id": 509741656, "node_id": "MDU6SXNzdWU1MDk3NDE2NTY=", "number": 65649, "title": "Segfault while compiling unicode-xid on Raspberry Pi 3", "user": {"login": "krumberg", "id": 212796, "node_id": "MDQ6VXNlcjIxMjc5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/212796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krumberg", "html_url": "https://github.com/krumberg", "followers_url": "https://api.github.com/users/krumberg/followers", "following_url": "https://api.github.com/users/krumberg/following{/other_user}", "gists_url": "https://api.github.com/users/krumberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/krumberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krumberg/subscriptions", "organizations_url": "https://api.github.com/users/krumberg/orgs", "repos_url": "https://api.github.com/users/krumberg/repos", "events_url": "https://api.github.com/users/krumberg/events{/privacy}", "received_events_url": "https://api.github.com/users/krumberg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-21T05:39:27Z", "updated_at": "2019-10-22T10:58:26Z", "closed_at": "2019-10-22T10:58:26Z", "author_association": "NONE", "active_lock_reason": null, "body": "Summary\r\nWhen I try to install cargo-run-script using the stable (or unstable) toolchain I get a segfault. \r\n\r\nThe issue occurs on arm v7l (Raspberry Pi 3, Raspbian Stretch), but not on x86_64.\r\n\r\nrustc \u2014version\r\nrustc 1.38.0 (625451e37 2019-09-23)\r\nbinary: rustc\r\ncommit-hash: 625451e376bb2e5283fc4741caa0a3e8a2ca4d54\r\ncommit-date: 2019-09-23\r\nhost: armv7-unknown-linux-gnueabihf\r\nrelease: 1.38.0\r\nLLVM version: 9.0\r\n\r\nStacktrace:\r\ncargo install  cargo-run-script\r\n    Updating crates.io index\r\n  Installing cargo-run-script v0.1.0\r\n   Compiling proc-macro2 v1.0.6\r\n   Compiling unicode-xid v0.2.0\r\n   Compiling syn v1.0.5\r\n   Compiling serde v1.0.101\r\nerror: Could not compile `unicode-xid`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name unicode_xid /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/unicode-xid-0.2.0/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 --cfg 'feature=\"default\"' -C metadata=7ba4255d362b475e -C extra-filename=-7ba4255d362b475e --out-dir /tmp/cargo-installzhLsBF/release/deps -L dependency=/tmp/cargo-installzhLsBF/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: failed to prepare thin LTO module: file doesn't start with bitcode header\r\n\r\nthread '<unnamed>' panicked at 'src/librustc_codegen_ssa/back/write.rs:1545: worker thread panicked', src/librustc/util/bug.rs:37:26\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `serde`.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: Could not compile `syn`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name build_script_build /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/syn-1.0.5/build.rs --color always --crate-type bin --emit=dep-info,link -C opt-level=3 --cfg 'feature=\"clone-impls\"' --cfg 'feature=\"default\"' --cfg 'feature=\"derive\"' --cfg 'feature=\"parsing\"' --cfg 'feature=\"printing\"' --cfg 'feature=\"proc-macro\"' --cfg 'feature=\"quote\"' --cfg 'feature=\"visit\"' -C metadata=7f313fb82653122f -C extra-filename=-7f313fb82653122f --out-dir /tmp/cargo-installzhLsBF/release/build/syn-7f313fb82653122f -L dependency=/tmp/cargo-installzhLsBF/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: failed to compile `cargo-run-script v0.1.0`, intermediate artifacts can be found at `/tmp/cargo-installzhLsBF`\r\n\r\nCaused by:\r\n  Could not compile `proc-macro2`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name build_script_build /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro2-1.0.6/build.rs --color always --crate-type bin --emit=dep-info,link -C opt-level=3 --cfg 'feature=\"default\"' --cfg 'feature=\"proc-macro\"' -C metadata=7e8798823c7101b3 -C extra-filename=-7e8798823c7101b3 --out-dir /tmp/cargo-installzhLsBF/release/build/proc-macro2-7e8798823c7101b3 -L dependency=/tmp/cargo-installzhLsBF/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\npi@raspberrypi:~ $ cargo install  unicode-xic\r\n    Updating crates.io index\r\nerror: could not find `unicode-xic` in registry `https://github.com/rust-lang/crates.io-index`\r\npi@raspberrypi:~ $ cargo install  cargo-run-script\r\n    Updating crates.io index\r\n  Installing cargo-run-script v0.1.0\r\n   Compiling proc-macro2 v1.0.6\r\n   Compiling unicode-xid v0.2.0\r\n   Compiling syn v1.0.5\r\n   Compiling serde v1.0.101\r\nerror: Could not compile `unicode-xid`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name unicode_xid /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/unicode-xid-0.2.0/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 --cfg 'feature=\"default\"' -C metadata=7ba4255d362b475e -C extra-filename=-7ba4255d362b475e --out-dir /tmp/cargo-installJbryfx/release/deps -L dependency=/tmp/cargo-installJbryfx/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: Could not compile `syn`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name build_script_build /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/syn-1.0.5/build.rs --color always --crate-type bin --emit=dep-info,link -C opt-level=3 --cfg 'feature=\"clone-impls\"' --cfg 'feature=\"default\"' --cfg 'feature=\"derive\"' --cfg 'feature=\"parsing\"' --cfg 'feature=\"printing\"' --cfg 'feature=\"proc-macro\"' --cfg 'feature=\"quote\"' --cfg 'feature=\"visit\"' -C metadata=7f313fb82653122f -C extra-filename=-7f313fb82653122f --out-dir /tmp/cargo-installJbryfx/release/build/syn-7f313fb82653122f -L dependency=/tmp/cargo-installJbryfx/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\n*** Error in `/home/pi/.rustup/toolchains/stable-armv7-unknown-linux-gnueabihf/bin/rustc': double free or corruption (out): 0x6cfbf468 ***\r\nerror: Could not compile `proc-macro2`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name build_script_build /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/proc-macro2-1.0.6/build.rs --color always --crate-type bin --emit=dep-info,link -C opt-level=3 --cfg 'feature=\"default\"' --cfg 'feature=\"proc-macro\"' -C metadata=7e8798823c7101b3 -C extra-filename=-7e8798823c7101b3 --out-dir /tmp/cargo-installJbryfx/release/build/proc-macro2-7e8798823c7101b3 -L dependency=/tmp/cargo-installJbryfx/release/deps --cap-lints allow` (signal: 6, SIGABRT: process abort signal)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: failed to compile `cargo-run-script v0.1.0`, intermediate artifacts can be found at `/tmp/cargo-installJbryfx`\r\n\r\nCaused by:\r\n  Could not compile `serde`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name build_script_build /home/pi/.cargo/registry/src/github.com-1ecc6299db9ec823/serde-1.0.101/build.rs --color always --crate-type bin --emit=dep-info,link -C opt-level=3 --cfg 'feature=\"default\"' --cfg 'feature=\"std\"' -C metadata=62086cf108e95a88 -C extra-filename=-62086cf108e95a88 --out-dir /tmp/cargo-installJbryfx/release/build/serde-62086cf108e95a88 -L dependency=/tmp/cargo-installJbryfx/release/deps --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\n\r\n\r\n", "closed_by": {"login": "krumberg", "id": 212796, "node_id": "MDQ6VXNlcjIxMjc5Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/212796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krumberg", "html_url": "https://github.com/krumberg", "followers_url": "https://api.github.com/users/krumberg/followers", "following_url": "https://api.github.com/users/krumberg/following{/other_user}", "gists_url": "https://api.github.com/users/krumberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/krumberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krumberg/subscriptions", "organizations_url": "https://api.github.com/users/krumberg/orgs", "repos_url": "https://api.github.com/users/krumberg/repos", "events_url": "https://api.github.com/users/krumberg/events{/privacy}", "received_events_url": "https://api.github.com/users/krumberg/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/65649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/65649/timeline", "performed_via_github_app": null, "state_reason": "completed"}