{"url": "https://api.github.com/repos/rust-lang/rust/issues/51749", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51749/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51749/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51749/events", "html_url": "https://github.com/rust-lang/rust/issues/51749", "id": 335135555, "node_id": "MDU6SXNzdWUzMzUxMzU1NTU=", "number": 51749, "title": "panic during build of unrust: region_obligations not empty", "user": {"login": "kevinw", "id": 7930, "node_id": "MDQ6VXNlcjc5MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/7930?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevinw", "html_url": "https://github.com/kevinw", "followers_url": "https://api.github.com/users/kevinw/followers", "following_url": "https://api.github.com/users/kevinw/following{/other_user}", "gists_url": "https://api.github.com/users/kevinw/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevinw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevinw/subscriptions", "organizations_url": "https://api.github.com/users/kevinw/orgs", "repos_url": "https://api.github.com/users/kevinw/repos", "events_url": "https://api.github.com/users/kevinw/events{/privacy}", "received_events_url": "https://api.github.com/users/kevinw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-06-23T22:30:46Z", "updated_at": "2019-05-08T00:45:32Z", "closed_at": "2019-05-08T00:45:31Z", "author_association": "NONE", "active_lock_reason": null, "body": "panic while compiling the [unrust](https://github.com/unrust/unrust) crate with nightly\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n\r\n```\r\nrustc 1.28.0-nightly (cbc4c8380 2018-06-22)\r\nbinary: rustc\r\ncommit-hash: cbc4c8380fb92a719ae9be40f9da44ca7e3e2f3f\r\ncommit-date: 2018-06-22\r\nhost: x86_64-apple-darwin\r\nrelease: 1.28.0-nightly\r\nLLVM version: 6.0\r\n```\r\n\r\nBacktrace:\r\n\r\n```\r\ncomputer:conetracing kevin$ RUST_BACKTRACE=1 cargo build --verbose\r\n       Fresh void v1.0.2\r\n       Fresh libc v0.2.40\r\n       Fresh lazy_static v1.0.0\r\n       Fresh ucd-util v0.1.1\r\n       Fresh glob v0.2.11\r\n       Fresh cfg-if v0.1.3\r\n       Fresh utf8-ranges v1.0.0\r\n       Fresh unicode-width v0.1.4\r\n       Fresh unicode-xid v0.1.0\r\n       Fresh bitflags v1.0.3\r\n       Fresh vec_map v0.8.1\r\n       Fresh strsim v0.7.0\r\n       Fresh ansi_term v0.11.0\r\n       Fresh foreign-types-shared v0.1.1\r\n       Fresh peeking_take_while v0.1.2\r\n       Fresh block v0.1.6\r\n       Fresh adler32 v1.0.2\r\n       Fresh byteorder v1.2.3\r\n       Fresh lazy_static v0.2.11\r\n       Fresh approx v0.1.1\r\n       Fresh serde v1.0.55\r\n       Fresh lzw v0.10.0\r\n       Fresh hound v3.4.0\r\n       Fresh fnv v1.0.6\r\n       Fresh typed-arena v1.3.0\r\n       Fresh futures v0.1.21\r\n       Fresh obj v0.8.2\r\n       Fresh unreachable v1.0.0\r\n       Fresh memchr v2.0.1\r\n       Fresh memchr v1.0.2\r\n       Fresh atty v0.2.10\r\n       Fresh which v1.0.5\r\n       Fresh malloc_buf v0.0.6\r\n       Fresh time v0.1.40\r\n       Fresh rand v0.4.2\r\n       Fresh shared_library v0.1.8\r\n       Fresh regex-syntax v0.5.6\r\n       Fresh log v0.4.1\r\n       Fresh textwrap v0.9.0\r\n       Fresh proc-macro2 v0.2.3\r\n       Fresh proc-macro2 v0.3.8\r\n       Fresh xml-rs v0.7.0\r\n       Fresh foreign-types v0.3.2\r\n       Fresh inflate v0.4.2\r\n       Fresh deflate v0.7.18\r\n       Fresh thread_local v0.3.5\r\n       Fresh aho-corasick v0.6.4\r\n       Fresh nom v4.0.0\r\n       Fresh nom v3.2.1\r\n       Fresh objc v0.2.2\r\n       Fresh libloading v0.4.3\r\n       Fresh khronos_api v2.2.0\r\n       Fresh log v0.3.9\r\n       Fresh clap v2.31.2\r\n       Fresh quote v0.4.2\r\n       Fresh quote v0.5.2\r\n       Fresh core-foundation-sys v0.5.1\r\n       Fresh num-traits v0.2.4\r\n       Fresh regex v0.2.11\r\n       Fresh uni-glsl v0.1.0 (file:///Users/kevin/src/unrust/uni-glsl)\r\n       Fresh cexpr v0.2.3\r\n       Fresh gl_generator v0.9.0\r\n       Fresh clang-sys v0.21.2\r\n       Fresh gl_generator v0.6.1\r\n       Fresh syn v0.13.10\r\n       Fresh core-foundation v0.5.1\r\n       Fresh num-integer v0.1.38\r\n       Fresh num-traits v0.1.43\r\n       Fresh env_logger v0.4.3\r\n       Fresh serde_derive v1.0.55\r\n       Fresh num-derive v0.2.1\r\n       Fresh unrust-derive v0.1.0 (file:///Users/kevin/src/unrust/unrust-derive)\r\n       Fresh core-graphics v0.13.0\r\n       Fresh num-iter v0.1.37\r\n       Fresh num-rational v0.1.42\r\n       Fresh cgmath v0.16.1\r\n       Fresh bindgen v0.32.3\r\n       Fresh cocoa v0.14.0\r\n       Fresh png v0.12.0\r\n       Fresh gleam v0.5.0\r\n       Fresh gl v0.6.5\r\n       Fresh winit v0.13.1\r\n       Fresh image v0.19.0\r\n       Fresh cgl v0.2.2\r\n       Fresh webgl v0.1.0 (file:///Users/kevin/src/unrust/webgl)\r\n       Fresh coreaudio-sys v0.2.2 (file:///Users/kevin/src/coreaudio-sys)\r\n       Fresh glutin v0.15.0\r\n       Fresh coreaudio-rs v0.9.1 (file:///Users/kevin/src/coreaudio-rs)\r\n       Fresh uni-app v0.1.0 (file:///Users/kevin/src/unrust/uni-app)\r\n       Fresh cpal v0.8.1 (file:///Users/kevin/src/cpal)\r\n       Fresh uni-pad v0.1.0 (file:///Users/kevin/src/unrust/uni-pad)\r\n       Fresh uni-snd v0.1.0 (file:///Users/kevin/src/unrust/uni-snd)\r\n   Compiling unrust v0.1.1 (file:///Users/kevin/src/unrust)\r\n     Running `rustc --crate-name unrust /Users/kevin/src/unrust/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=\"default\"' -C metadata=51b65ca54940ec8f -C extra-filename=-51b65ca54940ec8f --out-dir /Users/kevin/src/conetracing/target/debug/deps -C incremental=/Users/kevin/src/conetracing/target/debug/incremental -L dependency=/Users/kevin/src/conetracing/target/debug/deps --extern bitflags=/Users/kevin/src/conetracing/target/debug/deps/libbitflags-c990d7bd8f03d465.rlib --extern cgmath=/Users/kevin/src/conetracing/target/debug/deps/libcgmath-31b6271ae6e769e9.rlib --extern fnv=/Users/kevin/src/conetracing/target/debug/deps/libfnv-4abe3704733a22f9.rlib --extern futures=/Users/kevin/src/conetracing/target/debug/deps/libfutures-203db50c8c9d93bc.rlib --extern hound=/Users/kevin/src/conetracing/target/debug/deps/libhound-fc016b1814fdc0e4.rlib --extern image=/Users/kevin/src/conetracing/target/debug/deps/libimage-1967be20c5d5813c.rlib --extern lazy_static=/Users/kevin/src/conetracing/target/debug/deps/liblazy_static-891d049fce5a0893.rlib --extern obj=/Users/kevin/src/conetracing/target/debug/deps/libobj-548dea30b3de4279.rlib --extern typed_arena=/Users/kevin/src/conetracing/target/debug/deps/libtyped_arena-4d76a44c7a34bd2d.rlib --extern uni_app=/Users/kevin/src/conetracing/target/debug/deps/libuni_app-21a4577913886d3a.rlib --extern uni_glsl=/Users/kevin/src/conetracing/target/debug/deps/libuni_glsl-c13d623c07b38b9e.rlib --extern uni_pad=/Users/kevin/src/conetracing/target/debug/deps/libuni_pad-f38219fdc25cf95f.rlib --extern uni_snd=/Users/kevin/src/conetracing/target/debug/deps/libuni_snd-3a36a8cd30199129.rlib --extern unrust_derive=/Users/kevin/src/conetracing/target/debug/deps/libunrust_derive-d5c490821a959f43.dylib --extern webgl=/Users/kevin/src/conetracing/target/debug/deps/libwebgl-e12cd4b26b69fa11.rlib`\r\nthread 'main' panicked at 'region_obligations not empty: [\r\n    (\r\n        NodeId(\r\n            2868\r\n        ),\r\n        RegionObligation(sub_region='_#1r, sup_type=engine::asset::asset_database::AssetDatabaseContext<FS>)\r\n    )\r\n]', librustc/infer/mod.rs:1057:9\r\nstack backtrace:\r\n   0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace\r\n   1: std::sys_common::backtrace::print\r\n   2: std::panicking::default_hook::{{closure}}\r\n   3: std::panicking::default_hook\r\n   4: rustc::util::common::panic_hook\r\n   5: std::panicking::rust_panic_with_hook\r\n   6: std::panicking::continue_panic_fmt\r\n   7: std::panicking::begin_panic_fmt\r\n   8: rustc::infer::InferCtxt::take_and_reset_region_constraints\r\n   9: rustc_mir::borrow_check::nll::type_check::TypeChecker::prove_predicates\r\n  10: <rustc_mir::borrow_check::nll::type_check::TypeVerifier<'a, 'b, 'gcx, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_constant\r\n  11: <rustc_mir::borrow_check::nll::type_check::TypeVerifier<'a, 'b, 'gcx, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_mir\r\n  12: rustc_mir::borrow_check::nll::type_check::type_check_internal\r\n  13: rustc_mir::borrow_check::nll::compute_regions\r\n  14: rustc_mir::borrow_check::do_mir_borrowck\r\n  15: rustc::ty::context::tls::with_related_context\r\n  16: rustc::infer::InferCtxtBuilder::enter\r\n  17: rustc_mir::borrow_check::mir_borrowck\r\n  18: rustc::ty::query::__query_compute::mir_borrowck\r\n  19: rustc::ty::query::<impl rustc::ty::query::config::QueryAccessors<'tcx> for rustc::ty::query::queries::mir_borrowck<'tcx>>::compute\r\n  20: rustc::ty::context::tls::with_context\r\n  21: rustc::dep_graph::graph::DepGraph::with_task_impl\r\n  22: rustc::ty::context::tls::with_related_context\r\n  23: rustc::ty::query::plumbing::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::force_query_with_job\r\n  24: rustc::ty::query::plumbing::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::get_query\r\n  25: rustc::ty::query::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::mir_borrowck\r\n  26: rustc::ty::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::par_body_owners\r\n  27: rustc::util::common::time\r\n  28: rustc::ty::context::tls::enter_context\r\n  29: <std::thread::local::LocalKey<T>>::with\r\n  30: rustc::ty::context::TyCtxt::create_and_enter\r\n  31: rustc_driver::driver::compile_input\r\n  32: rustc_driver::run_compiler_with_pool\r\n  33: <scoped_tls::ScopedKey<T>>::set\r\n  34: <scoped_tls::ScopedKey<T>>::set\r\n  35: syntax::with_globals\r\n  36: <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once\r\n  37: __rust_maybe_catch_panic\r\n  38: rustc_driver::run\r\n  39: rustc_driver::main\r\n  40: std::rt::lang_start::{{closure}}\r\n  41: std::panicking::try::do_call\r\n  42: __rust_maybe_catch_panic\r\n  43: std::rt::lang_start_internal\r\n  44: main\r\nquery stack during panic:\r\n#0 [mir_borrowck] processing `<engine::asset::asset_database::AssetDatabase<FS, F> as std::ops::Deref>::deref`\r\nend of query stack\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.28.0-nightly (cbc4c8380 2018-06-22) running on x86_64-apple-darwin\r\n\r\nnote: compiler flags: -C debuginfo=2 -C incremental --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nerror: Could not compile `unrust`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name unrust /Users/kevin/src/unrust/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg feature=\"default\" -C metadata=51b65ca54940ec8f -C extra-filename=-51b65ca54940ec8f --out-dir /Users/kevin/src/conetracing/target/debug/deps -C incremental=/Users/kevin/src/conetracing/target/debug/incremental -L dependency=/Users/kevin/src/conetracing/target/debug/deps --extern bitflags=/Users/kevin/src/conetracing/target/debug/deps/libbitflags-c990d7bd8f03d465.rlib --extern cgmath=/Users/kevin/src/conetracing/target/debug/deps/libcgmath-31b6271ae6e769e9.rlib --extern fnv=/Users/kevin/src/conetracing/target/debug/deps/libfnv-4abe3704733a22f9.rlib --extern futures=/Users/kevin/src/conetracing/target/debug/deps/libfutures-203db50c8c9d93bc.rlib --extern hound=/Users/kevin/src/conetracing/target/debug/deps/libhound-fc016b1814fdc0e4.rlib --extern image=/Users/kevin/src/conetracing/target/debug/deps/libimage-1967be20c5d5813c.rlib --extern lazy_static=/Users/kevin/src/conetracing/target/debug/deps/liblazy_static-891d049fce5a0893.rlib --extern obj=/Users/kevin/src/conetracing/target/debug/deps/libobj-548dea30b3de4279.rlib --extern typed_arena=/Users/kevin/src/conetracing/target/debug/deps/libtyped_arena-4d76a44c7a34bd2d.rlib --extern uni_app=/Users/kevin/src/conetracing/target/debug/deps/libuni_app-21a4577913886d3a.rlib --extern uni_glsl=/Users/kevin/src/conetracing/target/debug/deps/libuni_glsl-c13d623c07b38b9e.rlib --extern uni_pad=/Users/kevin/src/conetracing/target/debug/deps/libuni_pad-f38219fdc25cf95f.rlib --extern uni_snd=/Users/kevin/src/conetracing/target/debug/deps/libuni_snd-3a36a8cd30199129.rlib --extern unrust_derive=/Users/kevin/src/conetracing/target/debug/deps/libunrust_derive-d5c490821a959f43.dylib --extern webgl=/Users/kevin/src/conetracing/target/debug/deps/libwebgl-e12cd4b26b69fa11.rlib` (exit code: 101)\r\n```\r\n", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51749/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51749/timeline", "performed_via_github_app": null, "state_reason": "completed"}