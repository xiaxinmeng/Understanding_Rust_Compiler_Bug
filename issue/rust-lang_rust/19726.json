{"url": "https://api.github.com/repos/rust-lang/rust/issues/19726", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19726/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19726/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19726/events", "html_url": "https://github.com/rust-lang/rust/issues/19726", "id": 51654065, "node_id": "MDU6SXNzdWU1MTY1NDA2NQ==", "number": 19726, "title": "ICE when trying use associated types", "user": {"login": "canndrew", "id": 5555066, "node_id": "MDQ6VXNlcjU1NTUwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5555066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canndrew", "html_url": "https://github.com/canndrew", "followers_url": "https://api.github.com/users/canndrew/followers", "following_url": "https://api.github.com/users/canndrew/following{/other_user}", "gists_url": "https://api.github.com/users/canndrew/gists{/gist_id}", "starred_url": "https://api.github.com/users/canndrew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canndrew/subscriptions", "organizations_url": "https://api.github.com/users/canndrew/orgs", "repos_url": "https://api.github.com/users/canndrew/repos", "events_url": "https://api.github.com/users/canndrew/events{/privacy}", "received_events_url": "https://api.github.com/users/canndrew/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-12-11T07:09:11Z", "updated_at": "2014-12-11T09:24:40Z", "closed_at": "2014-12-11T09:24:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following code causes an ICE in an up-to-date rustc\n\n```\n#![feature(associated_types)]\n\ntrait HKT<Arg> {\n  type Res;\n}\n\nenum MakePair {}\n\nimpl<T> HKT<T> for MakePair {\n  type Res = (T, T);\n}\n\nfn main() {\n}\n```\n\nHere is the full rustc output\n\n```\naaa.rs:1:1: 1:1 error: internal compiler error: Type parameter `Res/AssocSpace.1` (Res/AssocSpace/1) out of range when substituting (root type=Res) substs=Substs[types=[[T];[MakePair];[(T, T)];[]], regions=[[];[];[];[]]]\naaa.rs:1 #![feature(associated_types)]\n         ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'Box<Any>', /home/acann/src/rust/rust/src/libsyntax/diagnostic.rs:129\n\nstack backtrace:\n   1: 0xb73bbbc0 - rt::backtrace::imp::write::h284a095c7aee31ccGOx\n   2: 0xb73beb30 - failure::on_fail::h2d0aefabf893c1186fy\n   3: 0xb721d460 - unwind::begin_unwind_inner::h4d26c479cdc48a2fCJc\n   4: 0xb58c4660 - unwind::begin_unwind::h5309064723466376297\n   5: 0xb58c45d0 - diagnostic::SpanHandler::span_bug::h782453507c017400a4E\n   6: 0xb6140bf0 - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h24e968235489f2b9i92\n   7: 0xb6269760 - middle::ty_fold::VecPerParamSpace<T>.TypeFoldable<'tcx>::fold_with::closure.90750\n   8: 0xb6159600 - middle::subst::VecPerParamSpace<T>::map_enumerated::h3314737924672344624\n   9: 0xb6269420 - middle::ty_fold::TypeFolder::fold_substs::h10596287227473156004\n  10: 0xb6299870 - middle::ty_fold::Vec<T>.TypeFoldable<'tcx>::fold_with::closure.93166\n  11: 0xb62996d0 - iter::IteratorExt::collect::h12530763557803807858\n  12: 0xb6299540 - middle::ty_fold::ty..ParamBounds<'tcx>.TypeFoldable<'tcx>::fold_with::h17172715228212896389\n  13: 0xb62898b0 - middle::ty::Generics<'tcx>::to_bounds::h5b7ef3c2a0d468ca1Me\n  14: 0xb6b1fd80 - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>::check_impl::closure.29495\n  15: 0xb6b1c390 - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>::with_fcx::hea08a92c982ee16bARi\n  16: 0xb6b22800 - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>.Visitor<'v>::visit_item::h83cff511db621e2e61i\n  17: 0xb6eee9d0 - check_crate::closure.42370\n  18: 0xb6eeb0a0 - util::common::time::h18259353318660871853\n  19: 0xb6eea2a0 - check_crate::he7c5ea6b87c52b3bSFy\n  20: 0xb75e56a0 - driver::phase_3_run_analysis_passes::h5e7f909e754bbebfCta\n  21: 0xb75d3f90 - driver::compile_input::he705e5abc840cf58pba\n  22: 0xb7672420 - run_compiler::h3736912802393701EYb\n  23: 0xb7672300 - run::closure.21407\n  24: 0xb7683a90 - task::TaskBuilder::try_future::closure.22861\n  25: 0xb7395df0 - task::TaskBuilder::spawn_internal::closure.30624\n  26: 0xb721b200 - task::Task::spawn::closure.5731\n  27: 0xb721cdf0 - unwind::try::try_fn::h41e9940f84e74506VAc\n  28: 0xb72863a0 - rust_try_inner\n  29: 0xb7286360 - rust_try\n  30: 0xb721b2e0 - unwind::try::h645db934c3e71637Tyc\n  31: 0xb721b090 - task::Task::run::h8509a48449169e4efKb\n  32: 0xb721ac80 - task::Task::spawn::closure.5707\n  33: 0xb721c610 - thread::thread_start::h51b85550e3f54be9w1b\n  34: 0xb35def80 - start_thread\n  35: 0xb711b082 - __clone\n  36:        0x0 - <unknown>\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19726/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19726/timeline", "performed_via_github_app": null, "state_reason": "completed"}