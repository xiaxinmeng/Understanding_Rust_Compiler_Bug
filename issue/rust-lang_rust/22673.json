{"url": "https://api.github.com/repos/rust-lang/rust/issues/22673", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22673/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22673/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22673/events", "html_url": "https://github.com/rust-lang/rust/issues/22673", "id": 58506314, "node_id": "MDU6SXNzdWU1ODUwNjMxNA==", "number": 22673, "title": "Recursive use of Self for RHS in PartialEq causes ICE", "user": {"login": "robo-corg", "id": 202000, "node_id": "MDQ6VXNlcjIwMjAwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/202000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robo-corg", "html_url": "https://github.com/robo-corg", "followers_url": "https://api.github.com/users/robo-corg/followers", "following_url": "https://api.github.com/users/robo-corg/following{/other_user}", "gists_url": "https://api.github.com/users/robo-corg/gists{/gist_id}", "starred_url": "https://api.github.com/users/robo-corg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robo-corg/subscriptions", "organizations_url": "https://api.github.com/users/robo-corg/orgs", "repos_url": "https://api.github.com/users/robo-corg/repos", "events_url": "https://api.github.com/users/robo-corg/events{/privacy}", "received_events_url": "https://api.github.com/users/robo-corg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-02-22T15:32:44Z", "updated_at": "2015-06-18T00:54:04Z", "closed_at": "2015-06-18T00:54:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "On rustc 1.0.0-nightly (2b01a37ec 2015-02-21) (built 2015-02-21) the follow causes an ICE:\n\n``` rust\ntrait Expr : PartialEq<Self::Item> {\n    type Item = Expr;\n}\n\nfn main() {}\n```\n\nFull backtrace:\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'assertion failed: did.krate != ast::LOCAL_CRATE', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustc/middle/ty.rs:5461\n\nstack backtrace:\n   1:        0x10b7aebe3 - sys::backtrace::write::hc8e3cee73e646c590nC\n   2:        0x10b7dcbe5 - panicking::on_panic::h00b47941f5bc8a02HOL\n   3:        0x10b706418 - rt::unwind::begin_unwind_inner::h539538ef7f909326UvL\n   4:        0x108472895 - rt::unwind::begin_unwind::h7610573592537740396\n   5:        0x1087eb7dc - middle::ty::lookup_trait_def::h00103e323589b59cNla\n   6:        0x108812687 - middle::ty::predicates_for_trait_ref::h59dd4f8104908ae1Vna\n   7:        0x10880c125 - middle::traits::util::Elaborator<'cx, 'tcx>.Iterator::next::h9dd8ee47ae7ea8d3QkV\n   8:        0x108811fd1 - middle::traits::util::Supertraits<'cx, 'tcx>.Iterator::next::h2583ba3461accfb9rnV\n   9:        0x108109246 - astconv::ast_ty_to_ty::closure.34580\n  10:        0x1080a36cb - astconv::ast_ty_to_ty::hb64a583bfbbc7b64Ncw\n  11:        0x1080ff44d - astconv::ast_ty_arg_to_ty::h51a53c78e1218ba4sbw\n  12:        0x1080feff0 - vec::Vec<T>.FromIterator<T>::from_iter::h8575313848639105278\n  13:        0x1080fc2e0 - astconv::convert_angle_bracketed_parameters::h9209f0db8109fac9biv\n  14:        0x108101457 - astconv::ast_path_to_trait_ref::h2a3b7b2e77e3fde5Vvv\n  15:        0x1080af1fb - astconv::instantiate_trait_ref::h65c5bb030d486323Csv\n  16:        0x1081007ea - astconv::instantiate_poly_trait_ref::hb7df5c75231f22c61qv\n  17:        0x10813049f - collect::compute_bounds::h0eb0cb5207e10f2ccTy\n  18:        0x10811270f - collect::trait_def_of_item::hb48744a94bcef339Q2x\n  19:        0x108110c0f - collect::CollectTraitDefVisitor<'a, 'tcx>.visit..Visitor<'v>::visit_item::h4c7bef27b106e20cS8w\n  20:        0x10815d07f - check_crate::closure.35774\n  21:        0x10815b02e - check_crate::hbe2eb4aab434ad7cVjC\n  22:        0x107ac68db - driver::phase_3_run_analysis_passes::h50728865d3ffa6b2gHa\n  23:        0x107aabb9d - driver::compile_input::h349b039ebe75c13eGba\n  24:        0x107b84857 - run_compiler::h1e4d87c6044fbf6dZbc\n  25:        0x107b81cd1 - thunk::F.Invoke<A, R>::invoke::h2059937391804860278\n  26:        0x107b80930 - rt::unwind::try::try_fn::h11862807381821880905\n  27:        0x10b8567e9 - rust_try_inner\n  28:        0x10b8567d6 - rust_try\n  29:        0x107b81095 - thunk::F.Invoke<A, R>::invoke::h6573516661401600357\n  30:        0x10b7c5ac3 - sys::thread::thread_start::h9e3555425c6999b2e4G\n  31:     0x7fff8fd0d268 - _pthread_body\n  32:     0x7fff8fd0d1e5 - _pthread_body\n", "closed_by": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22673/timeline", "performed_via_github_app": null, "state_reason": "completed"}