{"url": "https://api.github.com/repos/rust-lang/rust/issues/104288", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104288/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104288/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104288/events", "html_url": "https://github.com/rust-lang/rust/issues/104288", "id": 1445619635, "node_id": "I_kwDOAAsO6M5WKmez", "number": 104288, "title": "Tracking Issue for `impl for<'a> Trait<'a>`", "user": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-11T15:19:59Z", "updated_at": "2022-11-30T15:14:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Some context can be found in [this comment](https://github.com/rust-lang/rust/issues/96194#issuecomment-1124745154).\r\n\r\nWe would like to support using higher kinded lifetimes in opaque types. \r\n\r\nAt present \r\n\r\n```rust\r\n#![feature(type_alias_impl_trait)]\r\n\r\ntrait Tr<'a> {\r\n\ttype Assoc;\r\n}\r\n\r\nimpl<'a> Tr<'a> for () {\r\n\ttype Assoc = ();\r\n}\r\n\r\ntype Associated<'a> = impl Copy;\r\ntype Associated2<'a> = impl Copy + 'a;\r\n\r\nfn f() -> impl for<'a> Tr<'a, Assoc = Associated2<'a>> {}\r\nfn f1() -> impl for<'a> Tr<'a, Assoc = Associated<'a>> {}\r\n\r\nimpl<'a> Tr<'a> for i32 {\r\n\ttype Assoc = &'a ();\r\n}\r\n\r\nfn f2() -> impl for<'a> Tr<'a, Assoc = Associated2<'a>> { 42_i32 }\r\nfn f3() -> impl for<'a> Tr<'a, Assoc = Associated<'a>> { 42_i32 }\r\n```\r\n\r\nICEs the compiler and the equivalent code for RPIT doesn't compile.\r\n\r\nAn implementation should also add tests that actually use the higher kinded lifetimes, e.g. via closures or similar datastructures.\r\n\r\n### About tracking issues\r\n\r\nTracking issues are used to record the overall progress of implementation.\r\nThey are also used as hubs connecting to other relevant issues, e.g., bugs or open design questions.\r\nA tracking issue is however *not* meant for large scale discussion, questions, or bug reports about a feature.\r\nInstead, open a dedicated issue for the specific matter and add the relevant feature gate label.\r\n\r\n### Steps\r\n\r\n- [ ] Replace the error from https://github.com/rust-lang/rust/pull/97039 with a feature gate and then implement meaningful semantics.\r\n- [ ] Adjust documentation ([see instructions on rustc-dev-guide][doc-guide])\r\n- [ ] Stabilization PR ([see instructions on rustc-dev-guide][stabilization-guide])\r\n\r\n[stabilization-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#stabilization-pr\r\n[doc-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#documentation-prs\r\n\r\n### Unresolved Questions\r\n\r\n### Implementation history\r\n\r\n* https://github.com/rust-lang/rust/issues/96194 issue where this was noticed\r\n* https://github.com/rust-lang/rust/pull/97039", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104288/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104288/timeline", "performed_via_github_app": null, "state_reason": null}