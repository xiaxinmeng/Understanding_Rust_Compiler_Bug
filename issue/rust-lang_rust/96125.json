{"url": "https://api.github.com/repos/rust-lang/rust/issues/96125", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/96125/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/96125/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/96125/events", "html_url": "https://github.com/rust-lang/rust/issues/96125", "id": 1206201895, "node_id": "I_kwDOAAsO6M5H5S4n", "number": 96125, "title": "`macro_rules` expansion doesn't appear to expand properly.", "user": {"login": "AlterionX", "id": 6303968, "node_id": "MDQ6VXNlcjYzMDM5Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/6303968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlterionX", "html_url": "https://github.com/AlterionX", "followers_url": "https://api.github.com/users/AlterionX/followers", "following_url": "https://api.github.com/users/AlterionX/following{/other_user}", "gists_url": "https://api.github.com/users/AlterionX/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlterionX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlterionX/subscriptions", "organizations_url": "https://api.github.com/users/AlterionX/orgs", "repos_url": "https://api.github.com/users/AlterionX/repos", "events_url": "https://api.github.com/users/AlterionX/events{/privacy}", "received_events_url": "https://api.github.com/users/AlterionX/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-16T19:45:52Z", "updated_at": "2022-04-18T15:05:43Z", "closed_at": "2022-04-18T15:05:43Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nI constructed a relatively minimal example of what I was trying to do [as a gist](https://gist.github.com/e76423ee3aabba36bb533791ab4b9d4a) or [in rust playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=e76423ee3aabba36bb533791ab4b9d4a)\r\n\r\nI expected that uncommenting the section currently commented out would still compile. Instead, the compiler complains that it's probably not valid after expanding one token, then proceeds to ignore the rest of the macro expansion. This feels very... out of character for the rust compiler, if that makes any sense.\r\n\r\nEDIT: Also, it says that as_pat! is an unused macro. While it might technically be unused, this feels mildly unexpected as well.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\nPlayground lists the compiler version as 1.62.0-nightly (2022-04-15 3f391b84552f210adec7)\r\n\r\nEDIT: If anyone could suggest a better name for the issue, I'd be happy to change it.", "closed_by": {"login": "AlterionX", "id": 6303968, "node_id": "MDQ6VXNlcjYzMDM5Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/6303968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlterionX", "html_url": "https://github.com/AlterionX", "followers_url": "https://api.github.com/users/AlterionX/followers", "following_url": "https://api.github.com/users/AlterionX/following{/other_user}", "gists_url": "https://api.github.com/users/AlterionX/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlterionX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlterionX/subscriptions", "organizations_url": "https://api.github.com/users/AlterionX/orgs", "repos_url": "https://api.github.com/users/AlterionX/repos", "events_url": "https://api.github.com/users/AlterionX/events{/privacy}", "received_events_url": "https://api.github.com/users/AlterionX/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/96125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/96125/timeline", "performed_via_github_app": null, "state_reason": "completed"}