{"url": "https://api.github.com/repos/rust-lang/rust/issues/75582", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/75582/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/75582/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/75582/events", "html_url": "https://github.com/rust-lang/rust/issues/75582", "id": 679712769, "node_id": "MDU6SXNzdWU2Nzk3MTI3Njk=", "number": 75582, "title": "x.py tidy doesn't ignore untracked files", "user": {"login": "arora-aman", "id": 4193035, "node_id": "MDQ6VXNlcjQxOTMwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4193035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arora-aman", "html_url": "https://github.com/arora-aman", "followers_url": "https://api.github.com/users/arora-aman/followers", "following_url": "https://api.github.com/users/arora-aman/following{/other_user}", "gists_url": "https://api.github.com/users/arora-aman/gists{/gist_id}", "starred_url": "https://api.github.com/users/arora-aman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arora-aman/subscriptions", "organizations_url": "https://api.github.com/users/arora-aman/orgs", "repos_url": "https://api.github.com/users/arora-aman/repos", "events_url": "https://api.github.com/users/arora-aman/events{/privacy}", "received_events_url": "https://api.github.com/users/arora-aman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-08-16T08:14:42Z", "updated_at": "2020-11-10T12:15:22Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Tidy exists as an external tool that `x.py` calls, and it has a fixed set of paths that it ignores. Which is unlike other `x.py` commands which ignore untracked files.\r\n\r\nThis causes problems when some of the ignored paths get moved. eg: as part of https://github.com/rust-lang/rust/commit/2c31b45ae878b821975c4ebd94cc1e49f6073fd0 src/stdarch was moved to library/stdarch.\r\n\r\n<details>\r\n<summary>\r\nError log\r\n</summary>\r\n\r\n```\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/android-install-ndk.sh:2: copyright notices attributed to the Rust Project Developers are deprecated\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/android-install-sdk.sh:2: copyright notices attributed to the Rust Project Developers are deprecated\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/android-install-sdk.sh:49: line longer than 100 chars\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/android-sysimage.sh:3: copyright notices attributed to the Rust Project Developers are deprecated\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/run.sh:29: tab character\r\ntidy error: /users/a52arora/rust/src/stdarch/ci/run.sh:30: tab character\r\n```\r\n</details>\r\n\r\nOn one hand I appreciate this, because it tells me to go remove files that aren't required anymore. But on the otherhand I usually run tests in a detached screen session only to come find tests didn't run because of tidy error due to moved submodules.\r\n\r\nI'd prefer if the untracked files were ignored and instead at the end of the build log I got a warning saying \"Tidy error in untracked directory/file\" or someother way of letting me know that a submodule was moved and I should clean up.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/75582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/75582/timeline", "performed_via_github_app": null, "state_reason": null}