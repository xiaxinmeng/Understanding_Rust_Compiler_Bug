{"url": "https://api.github.com/repos/rust-lang/rust/issues/47159", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47159/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47159/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47159/events", "html_url": "https://github.com/rust-lang/rust/issues/47159", "id": 285745226, "node_id": "MDU6SXNzdWUyODU3NDUyMjY=", "number": 47159, "title": "Regression: issue #43941 (pointer methods) causes code in nvml crate to no longer compile", "user": {"login": "raphaelcohn", "id": 1307097, "node_id": "MDQ6VXNlcjEzMDcwOTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1307097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raphaelcohn", "html_url": "https://github.com/raphaelcohn", "followers_url": "https://api.github.com/users/raphaelcohn/followers", "following_url": "https://api.github.com/users/raphaelcohn/following{/other_user}", "gists_url": "https://api.github.com/users/raphaelcohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/raphaelcohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raphaelcohn/subscriptions", "organizations_url": "https://api.github.com/users/raphaelcohn/orgs", "repos_url": "https://api.github.com/users/raphaelcohn/repos", "events_url": "https://api.github.com/users/raphaelcohn/events{/privacy}", "received_events_url": "https://api.github.com/users/raphaelcohn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-01-03T16:53:46Z", "updated_at": "2018-01-10T02:19:10Z", "closed_at": "2018-01-10T02:19:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "In this crate, there is an extension trait:-\r\n\r\n```rust\r\npub trait PMEMblkpoolEx\r\n{\r\n...\r\n    /// Returns false if the block has previously had its error condition set\r\n\t#[inline(always)]\r\n\tfn read(self, to: *mut c_void, zeroBasedBlockIndex: usize) -> bool;\r\n...\r\n}\r\n```\r\n\r\nThis is then impl'd for an existing pointer:-\r\n\r\n```rust\r\nimpl PMEMblkpoolEx for *mut PMEMblkpool\r\n{\r\n...\r\n    \r\n\t#[inline(always)]\r\n\tfn read(self, to: *mut c_void, zeroBasedBlockIndex: usize) -> bool\r\n\t{\r\n        ...\r\n        }\r\n...\r\n}\r\n```\r\n\r\nCompiling this produces:-\r\n\r\n```bash\r\nerror: use of unstable library feature 'pointer_methods' (see issue #43941)\r\n  --> src/blockPool/BlockPool.rs:69:10\r\n   |\r\n69 |   self.0.read(to, zeroBasedBlockIndex)\r\n   |          ^^^^\r\n   |\r\n   = help: add #![feature(pointer_methods)] to the crate attributes to enable\r\n```\r\n\r\nThis is wrong on several levels. Firstly, adding a new feature to the std lib broke existing code. Secondly, the error message is decidedly incorrect. I'm actually in favour of the new pointer methods, so I'm happy to fix the code in this crate going forward (?would specialization help?), but I feel something got missed here in the implementation process. There's a decided lack of documentation around it - the unstable book contains no details, and the tracking issue is equally thin.", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47159/timeline", "performed_via_github_app": null, "state_reason": "completed"}