{"url": "https://api.github.com/repos/rust-lang/rust/issues/15608", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15608/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15608/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15608/events", "html_url": "https://github.com/rust-lang/rust/issues/15608", "id": 37668181, "node_id": "MDU6SXNzdWUzNzY2ODE4MQ==", "number": 15608, "title": "ICE `index out of bounds: the len is 1 but the index is 1`", "user": {"login": "tomaka", "id": 1412254, "node_id": "MDQ6VXNlcjE0MTIyNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1412254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomaka", "html_url": "https://github.com/tomaka", "followers_url": "https://api.github.com/users/tomaka/followers", "following_url": "https://api.github.com/users/tomaka/following{/other_user}", "gists_url": "https://api.github.com/users/tomaka/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomaka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomaka/subscriptions", "organizations_url": "https://api.github.com/users/tomaka/orgs", "repos_url": "https://api.github.com/users/tomaka/repos", "events_url": "https://api.github.com/users/tomaka/events{/privacy}", "received_events_url": "https://api.github.com/users/tomaka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-07-11T15:04:08Z", "updated_at": "2014-10-25T21:59:17Z", "closed_at": "2014-10-25T21:59:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I get an ICE when compiling [the `lib.rs` file here](https://github.com/Tomaka17/rust-hl-lua/tree/8f3cfd4d759a7a05bf8a8f2a76750578ceda5b37/rust-hl-lua/src) (warning: there's a lot of code).\n\nThe code was compiling perfectly, then I added some template parameters to types and traits that are being used almost everywhere, and after updating everything I have this ICE ([the diff is here](https://github.com/Tomaka17/rust-hl-lua/commit/8f3cfd4d759a7a05bf8a8f2a76750578ceda5b37)). I don't even know where to start if I had to simplify the case.\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'index out of bounds: the len is 1 but the index is 1', C:\\bot\\slave\\nightly-win\\build\\src\\librustc\\middle\\subst.rs:405\n```\n\nI'm using today's nightly (`rustc 0.11.0-nightly (b57d272e9908e164a72bd1a688141031705e1208 2014-07-11 01:11:36 +0000`) and I'm on Windows 7.\n\nHere is the stack trace:\n\n```\nBreakpoint 1, 0x61f882a0 in rust_fail ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n(gdb) bt\n#0  0x61f882a0 in rust_fail ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#1  0x61f88b31 in unwind::begin_unwind_inner::hd5b74d0d9af0059cmId ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#2  0x61f8863d in unwind::begin_unwind_fmt::h8fcff7e668106e5aPFd ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#3  0x61f8846e in rust_begin_unwind ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#4  0x61fd1018 in failure::begin_unwind::h5a3f5688938f2a07pqj ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#5  0x61fd544f in failure::fail_bounds_check::h60523e43493e41dfBoj ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#6  0x70f7d1dd in middle::ty_fold::ty..Region.TypeFoldable::fold_with::h16433011\n332248510048 () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#7  0x70f7d083 in middle::ty_fold::VecPerParamSpace$LT$T$GT$.TypeFoldable::fold_\nwith::closure.Name$LP$97406$RP$ ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#8  0x70f7be80 in _fu4272___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#9  0x70f7bc74 in middle::ty_fold::TypeFolder::fold_substs::h1698835327014201925\n7 () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#10 0x710df7b0 in middle::subst::T.Subst::subst_spanned::h10575283722499378383\n    () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#11 0x7119ddae in _fu1548___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#12 0x710cdeba in _fu1402___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#13 0x7119d74d in _fu4692___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#14 0x7119bf31 in _fu4690___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#15 0x7100594c in _fu4368___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#16 0x70f61a21 in middle::trans::base::get_res_dtor::h43536432cbfe0d4eclp ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#17 0x70f612f9 in middle::trans::glue::trans_struct_drop::h42859e59039df393i2c\n    () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#18 0x70f61229 in middle::trans::glue::trans_struct_drop_flag::closure.Name$LP$9\n6957$RP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#19 0x70f61002 in middle::trans::base::with_cond::hdde4c7284044e5bdpdq ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#20 0x70f59920 in middle::trans::glue::make_drop_glue::as_closure.Name$LP$96921$\nRP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#21 0x70f58ba3 in _fu4226___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#22 0x70f55238 in _fu9000___ZN11collections7hashmap5table25RawTable$LT$K$C$$x20V\n$GT$8read_mut15__STATIC_FMTSTR20hbb022b69c160dbe0MKdE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#23 0x70f54775 in middle::trans::glue::drop_ty::ha3b6364fb047419cgPc ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#24 0x70f64b18 in middle::trans::glue::drop_ty::as_closure.Name$LP$96985$RP$\n    () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#25 0x71006599 in middle::trans::base::iter_structural_ty::closure.Name$LP$10085\n9$RP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#26 0x71005f0f in middle::trans::expr::with_field_tys::h11670827326678244581\n    () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#27 0x70f53ff3 in _fu7524___ZN6to_str10T.ToString9to_string15__STATIC_FMTSTR20h1\n0d1156ed4fb4e120tdE () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#28 0x70f599c9 in middle::trans::glue::make_drop_glue::as_closure.Name$LP$96921$\nRP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#29 0x70f58ba3 in _fu4226___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#30 0x70f55238 in _fu9000___ZN11collections7hashmap5table25RawTable$LT$K$C$$x20V\n$GT$8read_mut15__STATIC_FMTSTR20hbb022b69c160dbe0MKdE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#31 0x70f54775 in middle::trans::glue::drop_ty::ha3b6364fb047419cgPc ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#32 0x710ab323 in middle::trans::cleanup::DropValue.Cleanup::trans::h9e58dd07218\n58cdbJkJ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#33 0x70f63ee8 in _fu1225___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#34 0x70fa2dcd in _fu4313___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#35 0x70f8e7db in _fu6998___ZN3vec12Vec$LT$T$GT$4push15__STATIC_FMTSTR20hbf8f0fb\n3ab316886c2hE () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#36 0x70f475b9 in _fu1201___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#37 0x70f47a25 in middle::trans::controlflow::trans_block::h34e9413fdca19211oic\n() from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#38 0x7100e36c in _fu1307___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#39 0x70f19c46 in _fu1186___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#40 0x70f1c180 in _fu1191___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#41 0x70f71b98 in _fu12652___ZN3ast11LOCAL_CRATE20h254b1fc55dc8ccb0EfcE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#42 0x70f6d2d6 in _fu1231___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#43 0x70f7fe6c in _fu1246___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#44 0x70f7fbdd in middle::trans::callee::trans_method_call::closure.Name$LP$9746\n9$RP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#45 0x70f77f39 in middle::trans::callee::trans_call_inner::h72cbf70f83e61b01M2e\n() from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#46 0x70f7f8c3 in _fu1245___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#47 0x70f8e318 in _fu6998___ZN3vec12Vec$LT$T$GT$4push15__STATIC_FMTSTR20hbf8f0fb\n3ab316886c2hE () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#48 0x70f475b9 in _fu1201___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#49 0x71048f13 in middle::trans::_match::store_local::closure.Name$LP$101895$RP$\n () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#50 0x71048d0e in middle::trans::_match::mk_binding_alloca::h5956479867704565935\n () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#51 0x71008812 in middle::trans::_match::store_local::h213fef90d26e8a57F4t ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#52 0x70f46aa4 in _fu1196___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#53 0x70f46157 in _fu1193___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#54 0x70f4793f in middle::trans::controlflow::trans_block::h34e9413fdca19211oic\n() from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#55 0x7100e36c in _fu1307___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#56 0x70f19c46 in _fu1186___ZN9LOG_LEVEL20h8fa6e58be0a929cajiaE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#57 0x70f12e5c in _fu4202___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#58 0x70f12437 in middle::trans::base::trans_item::hc972132e3a4e27cf42q ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#59 0x70f12437 in middle::trans::base::trans_item::hc972132e3a4e27cf42q ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#60 0x7101f03f in _fu4399___ZN3vec10PTR_MARKER20h2f6eaa45629a18b5TDhE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#61 0x71713a14 in driver::driver::phase_4_translate_to_llvm::h118acda94908ba87fV\nq () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#62 0x7170c994 in _fu6934___ZN4cell29Ref$LT$$x27b$C$$x20T$GT$.Drop4drop15__STATI\nC_FMTSTR20haa0baa433b61d481cViE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#63 0x717b2467 in _fu6208___ZN4cell32RefMut$LT$$x27b$C$$x20T$GT$.Drop4drop15__ST\nATIC_FMTSTR20haa0baa433b61d481tZiE ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#64 0x717af84d in driver::main_args::closure.Name$LP$134043$RP$ ()\n   from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#65 0x717c1e7e in task::TaskBuilder$LT$S$GT$::try_future::closure.Name$LP$135192\n$RP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#66 0x717c1d9c in task::TaskBuilder$LT$S$GT$::spawn_internal::closure.Name$LP$13\n5169$RP$ () from C:\\Compilation\\Rust\\bin\\rustc-4e7c5e5c.dll\n#67 0x70c301e8 in task::spawn_opts::closure.Name$LP$8439$RP$ ()\n   from C:\\Compilation\\Rust\\bin\\native-4e7c5e5c.dll\n#68 0x61f88295 in unwind::try::try_fn::h15894d0e8262efdc8yd ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#69 0x61fe6636 in rust_try () from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#70 0x61f85fd7 in unwind::try::hd8da966e728462f6Lwd ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#71 0x61f85d6a in task::Task::run::h0062677dbabfc9b8bXc ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#72 0x70c30087 in task::spawn_opts::closure.Name$LP$8385$RP$ ()\n   from C:\\Compilation\\Rust\\bin\\native-4e7c5e5c.dll\n#73 0x61f87def in thread::thread_start::h643f66d39f4ca9b1Jjd ()\n   from C:\\Compilation\\Rust\\bin\\rustrt-4e7c5e5c.dll\n#74 0x7520338a in KERNEL32!BaseThreadInitThunk ()\n   from C:\\Windows\\syswow64\\kernel32.dll\n#75 0x77389f72 in ntdll!RtlInitializeExceptionChain ()\n   from C:\\Windows\\system32\\ntdll.dll\n#76 0x77389f45 in ntdll!RtlInitializeExceptionChain ()\n   from C:\\Windows\\system32\\ntdll.dll\n#77 0x00000000 in ?? ()\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15608/timeline", "performed_via_github_app": null, "state_reason": "completed"}