{"url": "https://api.github.com/repos/rust-lang/rust/issues/110306", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/110306/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/110306/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/110306/events", "html_url": "https://github.com/rust-lang/rust/issues/110306", "id": 1667350733, "node_id": "I_kwDOAAsO6M5jYcDN", "number": 110306, "title": "Unexpected panic with \"--print file-names\"", "user": {"login": "SonicStark", "id": 50692172, "node_id": "MDQ6VXNlcjUwNjkyMTcy", "avatar_url": "https://avatars.githubusercontent.com/u/50692172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SonicStark", "html_url": "https://github.com/SonicStark", "followers_url": "https://api.github.com/users/SonicStark/followers", "following_url": "https://api.github.com/users/SonicStark/following{/other_user}", "gists_url": "https://api.github.com/users/SonicStark/gists{/gist_id}", "starred_url": "https://api.github.com/users/SonicStark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SonicStark/subscriptions", "organizations_url": "https://api.github.com/users/SonicStark/orgs", "repos_url": "https://api.github.com/users/SonicStark/repos", "events_url": "https://api.github.com/users/SonicStark/events{/privacy}", "received_events_url": "https://api.github.com/users/SonicStark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-14T01:01:42Z", "updated_at": "2023-04-14T03:52:28Z", "closed_at": "2023-04-14T03:52:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for finding an Internal Compiler Error! \ud83e\uddca  If possible, try to provide\r\na minimal verifiable example. You can read \"Rust Bug Minimization Patterns\" for\r\nhow to create smaller examples.\r\nhttp://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/\r\n-->\r\n\r\n### Code\r\n\r\nThe panic happens when running this in Powershell:\r\n```text\r\n.\\bin\\rustc.exe --print file-names\r\n```\r\n\r\nAlthough this may not be a proper usage of `rustc`, it does CRASH.\r\n\r\nBy the way, other *print requests* all work well, such as `--print target-libdir` and `--print tls-models`.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.68.2 (9eb3afe9e 2023-03-27)\r\nbinary: rustc\r\ncommit-hash: 9eb3afe9ebe9c7d2b84b71002d44f4a0edac95e0\r\ncommit-date: 2023-03-27\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.68.2\r\nLLVM version: 15.0.6\r\n```\r\n\r\n### Error output\r\n\r\n```\r\nPS D:\\rust-1-68-2-msvc> .\\bin\\rustc.exe --print file-names\r\nthread 'rustc' panicked at 'called `Option::unwrap()` on a `None` value', compiler\\rustc_driver\\src\\lib.rs:627:44\r\nstack backtrace:\r\n   0:     0x7ffab1b79d02 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hbb6eec21cb8e3d1b\r\n   1:     0x7ffab1bb570b - core::fmt::write::h3f34d6e08b5a11e8\r\n   2:     0x7ffab1b6cdfa - <std::io::IoSlice as core::fmt::Debug>::fmt::h1d8b4e60e4c9e548\r\n   3:     0x7ffab1b79a4b - std::sys::common::alloc::realloc_fallback::h258dcd65da5985d2\r\n   4:     0x7ffab1b7d3f9 - std::panicking::default_hook::h90b70b966050cb60\r\n   5:     0x7ffab1b7d07b - std::panicking::default_hook::h90b70b966050cb60\r\n   6:     0x7ffa28759425 - rustc_driver[fbeb20e0897b27eb]::describe_lints\r\n   7:     0x7ffab1b7dd5f - std::panicking::rust_panic_with_hook::h1d50ae3462f62f01\r\n   8:     0x7ffab1b7da7b - <std::panicking::begin_panic_handler::StrPanicPayload as core::panic::BoxMeUp>::get::h79e1803705c718ce\r\n   9:     0x7ffab1b7a9ff - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hbb6eec21cb8e3d1b\r\n  10:     0x7ffab1b7d770 - rust_begin_unwind\r\n  11:     0x7ffab1beb3d5 - core::panicking::panic_fmt::haf2d819891c687b2\r\n  12:     0x7ffab1beb48c - core::panicking::panic::h042a634ba7545525\r\n  13:     0x7ffa25efd736 - rustc_driver[fbeb20e0897b27eb]::list_metadata\r\n  14:     0x7ffa2870ec1f - _rust_realloc\r\n  15:     0x7ffa28728c1d - <tracing_subscriber[26f67001ed29df73]::util::TryInitError as core[15ae0b8045847941]::fmt::Display>::fmt\r\n  16:     0x7ffa28726009 - <tracing_subscriber[26f67001ed29df73]::util::TryInitError as core[15ae0b8045847941]::fmt::Display>::fmt\r\n  17:     0x7ffa2872bdae - <tracing_subscriber[26f67001ed29df73]::util::TryInitError as core[15ae0b8045847941]::fmt::Display>::fmt\r\n  18:     0x7ffa28716d7d - <tracing_subscriber[26f67001ed29df73]::util::TryInitError as core[15ae0b8045847941]::fmt::Display>::fmt\r\n  19:     0x7ffab1b9021c - std::sys::windows::thread::Thread::new::hf7aab9c244c58572\r\n  20:     0x7ffb02367614 - BaseThreadInitThunk\r\n  21:     0x7ffb045226a1 - RtlUserThreadStart\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.68.2 (9eb3afe9e 2023-03-27) running on x86_64-pc-windows-msvc\r\n\r\nquery stack during panic:\r\nend of query stack\r\n```\r\n", "closed_by": {"login": "SonicStark", "id": 50692172, "node_id": "MDQ6VXNlcjUwNjkyMTcy", "avatar_url": "https://avatars.githubusercontent.com/u/50692172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SonicStark", "html_url": "https://github.com/SonicStark", "followers_url": "https://api.github.com/users/SonicStark/followers", "following_url": "https://api.github.com/users/SonicStark/following{/other_user}", "gists_url": "https://api.github.com/users/SonicStark/gists{/gist_id}", "starred_url": "https://api.github.com/users/SonicStark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SonicStark/subscriptions", "organizations_url": "https://api.github.com/users/SonicStark/orgs", "repos_url": "https://api.github.com/users/SonicStark/repos", "events_url": "https://api.github.com/users/SonicStark/events{/privacy}", "received_events_url": "https://api.github.com/users/SonicStark/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/110306/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/110306/timeline", "performed_via_github_app": null, "state_reason": "completed"}