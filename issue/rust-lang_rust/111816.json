{"url": "https://api.github.com/repos/rust-lang/rust/issues/111816", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/111816/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/111816/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/111816/events", "html_url": "https://github.com/rust-lang/rust/issues/111816", "id": 1718449719, "node_id": "I_kwDOAAsO6M5mbXY3", "number": 111816, "title": "The backtrace printed by assert_eq is wrong with panic=abort", "user": {"login": "e00E", "id": 1462179, "node_id": "MDQ6VXNlcjE0NjIxNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1462179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/e00E", "html_url": "https://github.com/e00E", "followers_url": "https://api.github.com/users/e00E/followers", "following_url": "https://api.github.com/users/e00E/following{/other_user}", "gists_url": "https://api.github.com/users/e00E/gists{/gist_id}", "starred_url": "https://api.github.com/users/e00E/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/e00E/subscriptions", "organizations_url": "https://api.github.com/users/e00E/orgs", "repos_url": "https://api.github.com/users/e00E/repos", "events_url": "https://api.github.com/users/e00E/events{/privacy}", "received_events_url": "https://api.github.com/users/e00E/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-05-21T10:21:14Z", "updated_at": "2023-05-23T12:11:01Z", "closed_at": "2023-05-23T12:10:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "stable-x86_64-unknown-linux-gnu\r\nrustc 1.69.0 (84c898d65 2023-04-16\r\n\r\nConsider the following rust program:\r\n\r\n```rust\r\nfn main() {\r\n    foo();\r\n}\r\n\r\nfn foo() {\r\n    bar();\r\n}\r\n\r\nfn bar() {\r\n    assert_eq!(false, true);\r\n}\r\n```\r\n\r\nThis program panics. The call stack at the panic is `bar <- foo <- main`.\r\n\r\nI am going to run this program while varying the `-Cpanic` argument like so:\r\n\r\n```\r\nrustc -Cpanic=unwind -Cdebuginfo=1 a.rs && env RUST_BACKTRACE=full ./a\r\n```\r\n\r\nWith `-Cpanic=unwind`:\r\n\r\n<details>\r\n\r\n```\r\nthread 'main' panicked at 'assertion failed: `(left == right)`\r\n  left: `false`,\r\n right: `true`', a.rs:10:5\r\nstack backtrace:\r\n   0:     0x555d9bd4c5aa - std::backtrace_rs::backtrace::libunwind::trace::ha9053a9a07ca49cb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x555d9bd4c5aa - std::backtrace_rs::backtrace::trace_unsynchronized::h9c2852a457ad564e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x555d9bd4c5aa - std::sys_common::backtrace::_print_fmt::h457936fbfaa0070f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x555d9bd4c5aa - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h5779d7bf7f70cb0c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x555d9bd6620e - core::fmt::write::h5a4baaff1bcd3eb5\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/fmt/mod.rs:1232:17\r\n   5:     0x555d9bd4a735 - std::io::Write::write_fmt::h4bc1f301cb9e9cce\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/io/mod.rs:1684:15\r\n   6:     0x555d9bd4c375 - std::sys_common::backtrace::_print::h5fcdc36060f177e8\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x555d9bd4c375 - std::sys_common::backtrace::print::h54ca9458b876c8bf\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x555d9bd4d9cf - std::panicking::default_hook::{{closure}}::hbe471161c7664ed6\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:271:22\r\n   9:     0x555d9bd4d70b - std::panicking::default_hook::ha3500da57aa4ac4f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:290:9\r\n  10:     0x555d9bd4df78 - std::panicking::rust_panic_with_hook::h50c09d000dc561d2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:692:13\r\n  11:     0x555d9bd4de79 - std::panicking::begin_panic_handler::{{closure}}::h9e2b2176e00e0d9c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:583:13\r\n  12:     0x555d9bd4ca16 - std::sys_common::backtrace::__rust_end_short_backtrace::h5739b8e512c09d02\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:150:18\r\n  13:     0x555d9bd4db82 - rust_begin_unwind\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:579:5\r\n  14:     0x555d9bd34ed3 - core::panicking::panic_fmt::hf33a1475b4dc5c3e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:64:14\r\n  15:     0x555d9bd3514f - core::panicking::assert_failed_inner::haf9816227b20b6f2\r\n  16:     0x555d9bd356e6 - core::panicking::assert_failed::hfe4604f1e2156329\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:211:5\r\n  17:     0x555d9bd355d2 - a::bar::h54068ed5e62eaea6\r\n                               at /tmp/a/a.rs:10:5\r\n  18:     0x555d9bd35586 - a::foo::hbe93c09168c5d787\r\n                               at /tmp/a/a.rs:6:5\r\n  19:     0x555d9bd35576 - a::main::hf778f5e35fefb56f\r\n                               at /tmp/a/a.rs:2:5\r\n  20:     0x555d9bd35503 - core::ops::function::FnOnce::call_once::h0cda876b3b6f352f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/ops/function.rs:250:5\r\n  21:     0x555d9bd354e9 - std::sys_common::backtrace::__rust_begin_short_backtrace::hcd8ad9bf1b410bdc\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:134:18\r\n  22:     0x555d9bd35659 - std::rt::lang_start::{{closure}}::h135e76f90c71d025\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:166:18\r\n  23:     0x555d9bd48a6c - core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once::hd6efcd3bec896f2c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/ops/function.rs:287:13\r\n  24:     0x555d9bd48a6c - std::panicking::try::do_call::hce04e543bb1f4cbb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:487:40\r\n  25:     0x555d9bd48a6c - std::panicking::try::h3342dd4e1f680968\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:451:19\r\n  26:     0x555d9bd48a6c - std::panic::catch_unwind::h148ce1e59ac0cee7\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panic.rs:140:14\r\n  27:     0x555d9bd48a6c - std::rt::lang_start_internal::{{closure}}::h25f9dda2057a67fe\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:148:48\r\n  28:     0x555d9bd48a6c - std::panicking::try::do_call::h7caaaeaf9401650b\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:487:40\r\n  29:     0x555d9bd48a6c - std::panicking::try::he7d15285746cbbc2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:451:19\r\n  30:     0x555d9bd48a6c - std::panic::catch_unwind::h89fb4f50c0301fe0\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panic.rs:140:14\r\n  31:     0x555d9bd48a6c - std::rt::lang_start_internal::h078acd489417d3c1\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:148:20\r\n  32:     0x555d9bd35637 - std::rt::lang_start::h123fe1c2f5ee3bc1\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:165:17\r\n  33:     0x555d9bd355fe - main\r\n  34:     0x7f78e854c850 - <unknown>\r\n  35:     0x7f78e854c90a - __libc_start_main\r\n  36:     0x555d9bd35405 - _start\r\n  37:                0x0 - <unknown>\r\n```\r\n\r\n</details>\r\n\r\nWith `-Cpanic=abort`:\r\n\r\n<details>\r\n\r\n```\r\nthread 'main' panicked at 'assertion failed: `(left == right)`\r\n  left: `false`,\r\n right: `true`', a.rs:10:5\r\nstack backtrace:\r\n   0:     0x557cb620a58a - std::backtrace_rs::backtrace::libunwind::trace::ha9053a9a07ca49cb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x557cb620a58a - std::backtrace_rs::backtrace::trace_unsynchronized::h9c2852a457ad564e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x557cb620a58a - std::sys_common::backtrace::_print_fmt::h457936fbfaa0070f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x557cb620a58a - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h5779d7bf7f70cb0c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x557cb6223d9e - core::fmt::write::h5a4baaff1bcd3eb5\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/fmt/mod.rs:1232:17\r\n   5:     0x557cb6208715 - std::io::Write::write_fmt::h4bc1f301cb9e9cce\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/io/mod.rs:1684:15\r\n   6:     0x557cb620a355 - std::sys_common::backtrace::_print::h5fcdc36060f177e8\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x557cb620a355 - std::sys_common::backtrace::print::h54ca9458b876c8bf\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x557cb620b76f - std::panicking::default_hook::{{closure}}::hbe471161c7664ed6\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:271:22\r\n   9:     0x557cb620b4ab - std::panicking::default_hook::ha3500da57aa4ac4f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:290:9\r\n  10:     0x557cb620bd18 - std::panicking::rust_panic_with_hook::h50c09d000dc561d2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:692:13\r\n  11:     0x557cb620bc19 - std::panicking::begin_panic_handler::{{closure}}::h9e2b2176e00e0d9c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:583:13\r\n  12:     0x557cb620a9f6 - std::sys_common::backtrace::__rust_end_short_backtrace::h5739b8e512c09d02\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:150:18\r\n  13:     0x557cb620b922 - rust_begin_unwind\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:579:5\r\n  14:     0x557cb61f2ed3 - core::panicking::panic_fmt::hf33a1475b4dc5c3e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:64:14\r\n  15:     0x557cb61f314f - core::panicking::assert_failed_inner::haf9816227b20b6f2\r\n  16:     0x557cb61f36c6 - core::panicking::assert_failed::hfe4604f1e2156329\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:211:5\r\n```\r\n\r\n</details>\r\n\r\nNow I am going to change the `assert_eq` to `assert`:\r\n\r\n```rust\r\nassert!(false == true, \"expected {} == {} but they weren't\", false, true);\r\n```\r\n\r\nWith `-Cpanic=unwind`:\r\n\r\n<details>\r\n\r\n```\r\nthread 'main' panicked at 'expected false == true but they weren't', a.rs:10:5\r\nstack backtrace:\r\n   0:     0x564f3069467a - std::backtrace_rs::backtrace::libunwind::trace::ha9053a9a07ca49cb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x564f3069467a - std::backtrace_rs::backtrace::trace_unsynchronized::h9c2852a457ad564e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x564f3069467a - std::sys_common::backtrace::_print_fmt::h457936fbfaa0070f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x564f3069467a - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h5779d7bf7f70cb0c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x564f306ae2de - core::fmt::write::h5a4baaff1bcd3eb5\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/fmt/mod.rs:1232:17\r\n   5:     0x564f30692805 - std::io::Write::write_fmt::h4bc1f301cb9e9cce\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/io/mod.rs:1684:15\r\n   6:     0x564f30694445 - std::sys_common::backtrace::_print::h5fcdc36060f177e8\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x564f30694445 - std::sys_common::backtrace::print::h54ca9458b876c8bf\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x564f30695a9f - std::panicking::default_hook::{{closure}}::hbe471161c7664ed6\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:271:22\r\n   9:     0x564f306957db - std::panicking::default_hook::ha3500da57aa4ac4f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:290:9\r\n  10:     0x564f30696048 - std::panicking::rust_panic_with_hook::h50c09d000dc561d2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:692:13\r\n  11:     0x564f30695f49 - std::panicking::begin_panic_handler::{{closure}}::h9e2b2176e00e0d9c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:583:13\r\n  12:     0x564f30694ae6 - std::sys_common::backtrace::__rust_end_short_backtrace::h5739b8e512c09d02\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:150:18\r\n  13:     0x564f30695c52 - rust_begin_unwind\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:579:5\r\n  14:     0x564f3067ced3 - core::panicking::panic_fmt::hf33a1475b4dc5c3e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:64:14\r\n  15:     0x564f3067d5fd - a::bar::h54068ed5e62eaea6\r\n                               at /tmp/a/a.rs:10:5\r\n  16:     0x564f3067d576 - a::foo::hbe93c09168c5d787\r\n                               at /tmp/a/a.rs:6:5\r\n  17:     0x564f3067d566 - a::main::hf778f5e35fefb56f\r\n                               at /tmp/a/a.rs:2:5\r\n  18:     0x564f3067d503 - core::ops::function::FnOnce::call_once::h0cda876b3b6f352f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/ops/function.rs:250:5\r\n  19:     0x564f3067d4e9 - std::sys_common::backtrace::__rust_begin_short_backtrace::hcd8ad9bf1b410bdc\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:134:18\r\n  20:     0x564f3067d679 - std::rt::lang_start::{{closure}}::h135e76f90c71d025\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:166:18\r\n  21:     0x564f30690b3c - core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once::hd6efcd3bec896f2c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/ops/function.rs:287:13\r\n  22:     0x564f30690b3c - std::panicking::try::do_call::hce04e543bb1f4cbb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:487:40\r\n  23:     0x564f30690b3c - std::panicking::try::h3342dd4e1f680968\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:451:19\r\n  24:     0x564f30690b3c - std::panic::catch_unwind::h148ce1e59ac0cee7\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panic.rs:140:14\r\n  25:     0x564f30690b3c - std::rt::lang_start_internal::{{closure}}::h25f9dda2057a67fe\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:148:48\r\n  26:     0x564f30690b3c - std::panicking::try::do_call::h7caaaeaf9401650b\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:487:40\r\n  27:     0x564f30690b3c - std::panicking::try::he7d15285746cbbc2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:451:19\r\n  28:     0x564f30690b3c - std::panic::catch_unwind::h89fb4f50c0301fe0\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panic.rs:140:14\r\n  29:     0x564f30690b3c - std::rt::lang_start_internal::h078acd489417d3c1\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:148:20\r\n  30:     0x564f3067d657 - std::rt::lang_start::h123fe1c2f5ee3bc1\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/rt.rs:165:17\r\n  31:     0x564f3067d61e - main\r\n  32:     0x7fbbad08d850 - <unknown>\r\n  33:     0x7fbbad08d90a - __libc_start_main\r\n  34:     0x564f3067d405 - _start\r\n  35:                0x0 - <unknown>\r\n```\r\n\r\n</details>\r\n\r\n\r\nWith `-Cpanic=abort`:\r\n\r\n<details>\r\n\r\n```\r\nthread 'main' panicked at 'expected false == true but they weren't', a.rs:10:5\r\nstack backtrace:\r\n   0:     0x5562f55a165a - std::backtrace_rs::backtrace::libunwind::trace::ha9053a9a07ca49cb\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x5562f55a165a - std::backtrace_rs::backtrace::trace_unsynchronized::h9c2852a457ad564e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x5562f55a165a - std::sys_common::backtrace::_print_fmt::h457936fbfaa0070f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x5562f55a165a - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h5779d7bf7f70cb0c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x5562f55bae6e - core::fmt::write::h5a4baaff1bcd3eb5\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/fmt/mod.rs:1232:17\r\n   5:     0x5562f559f7e5 - std::io::Write::write_fmt::h4bc1f301cb9e9cce\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/io/mod.rs:1684:15\r\n   6:     0x5562f55a1425 - std::sys_common::backtrace::_print::h5fcdc36060f177e8\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x5562f55a1425 - std::sys_common::backtrace::print::h54ca9458b876c8bf\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x5562f55a283f - std::panicking::default_hook::{{closure}}::hbe471161c7664ed6\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:271:22\r\n   9:     0x5562f55a257b - std::panicking::default_hook::ha3500da57aa4ac4f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:290:9\r\n  10:     0x5562f55a2de8 - std::panicking::rust_panic_with_hook::h50c09d000dc561d2\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:692:13\r\n  11:     0x5562f55a2ce9 - std::panicking::begin_panic_handler::{{closure}}::h9e2b2176e00e0d9c\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:583:13\r\n  12:     0x5562f55a1ac6 - std::sys_common::backtrace::__rust_end_short_backtrace::h5739b8e512c09d02\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/sys_common/backtrace.rs:150:18\r\n  13:     0x5562f55a29f2 - rust_begin_unwind\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/std/src/panicking.rs:579:5\r\n  14:     0x5562f5589ed3 - core::panicking::panic_fmt::hf33a1475b4dc5c3e\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/panicking.rs:64:14\r\n  15:     0x5562f558a5dd - a::bar::h54068ed5e62eaea6\r\n                               at /tmp/a/a.rs:10:5\r\n  16:     0x5562f558a556 - a::foo::hbe93c09168c5d787\r\n                               at /tmp/a/a.rs:6:5\r\n  17:     0x5562f558a546 - a::main::hf778f5e35fefb56f\r\n                               at /tmp/a/a.rs:2:5\r\n  18:     0x5562f558a503 - core::ops::function::FnOnce::call_once::h0cda876b3b6f352f\r\n                               at /rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library/core/src/ops/function.rs:250:5\r\n```\r\n\r\n</details>\r\n\r\n---\r\n\r\nThe part of the backtrace that is meaningful is the `bar <- foo <- main` relation. This part was found in all configurations except when using `-Cpanic=abort` with `assert_eq`. This is a bug because as evidenced by the other backtraces, `main`, `foo`, and `bar` are part of the call stack at this point. Yet they are not printed. Even when accepting that asserts might print incorrect backtraces in an abort configuration (which I don't), it is still separately unexpected that the backtrace is only incorrect with `assert_eq` but not with `assert`.", "closed_by": {"login": "apiraino", "id": 6098822, "node_id": "MDQ6VXNlcjYwOTg4MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/6098822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apiraino", "html_url": "https://github.com/apiraino", "followers_url": "https://api.github.com/users/apiraino/followers", "following_url": "https://api.github.com/users/apiraino/following{/other_user}", "gists_url": "https://api.github.com/users/apiraino/gists{/gist_id}", "starred_url": "https://api.github.com/users/apiraino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apiraino/subscriptions", "organizations_url": "https://api.github.com/users/apiraino/orgs", "repos_url": "https://api.github.com/users/apiraino/repos", "events_url": "https://api.github.com/users/apiraino/events{/privacy}", "received_events_url": "https://api.github.com/users/apiraino/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/111816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/111816/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}