{"url": "https://api.github.com/repos/rust-lang/rust/issues/37606", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37606/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37606/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37606/events", "html_url": "https://github.com/rust-lang/rust/issues/37606", "id": 187506341, "node_id": "MDU6SXNzdWUxODc1MDYzNDE=", "number": 37606, "title": "Compilation failure: \"fatal runtime error: out of memory\"", "user": {"login": "bpowers", "id": 854918, "node_id": "MDQ6VXNlcjg1NDkxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/854918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpowers", "html_url": "https://github.com/bpowers", "followers_url": "https://api.github.com/users/bpowers/followers", "following_url": "https://api.github.com/users/bpowers/following{/other_user}", "gists_url": "https://api.github.com/users/bpowers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpowers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpowers/subscriptions", "organizations_url": "https://api.github.com/users/bpowers/orgs", "repos_url": "https://api.github.com/users/bpowers/repos", "events_url": "https://api.github.com/users/bpowers/events{/privacy}", "received_events_url": "https://api.github.com/users/bpowers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-05T16:22:27Z", "updated_at": "2017-05-16T12:41:06Z", "closed_at": "2017-05-16T12:41:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have a recursive function that takes a closure, and calls it in order to return a value.  I expect it to work (or at least give me an error message), but instead `rustc` runs out of memory (on my linux system w/ 8 GB of RAM).\r\n\r\nThe code is here:\r\nhttps://play.rust-lang.org/?gist=4534e70a5ca797295ca3e20374f4f08d&version=stable&backtrace=0\r\nAnd also available here:\r\nhttps://github.com/bpowers/rust-compilation-failure\r\nIt fails both when running `cargo test`, `cargo build`, and `rustc src/lib.rs --crate-type lib`.\r\n\r\n`perf record` suggests the majority of time is spent in `rustc::ty::walk::push_subtypes` -- I imagine I'm hitting some bug where we recurse and add more items onto the subtype list than we consume, but IDK.\r\n\r\nThe code is quite likely buggy (I'm quite likely specifying the closure constraint wrong -- this is my first serious rust project), but ideally the compiler would give me an error I could stare at rather than crashing.\r\n\r\n## Meta\r\n\r\nTested under both stable + nightly:\r\n- rustc 1.12.1 (d4f39402a 2016-10-19)\r\n- rustc 1.14.0-nightly (5665bdf3e 2016-11-02)", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37606/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37606/timeline", "performed_via_github_app": null, "state_reason": "completed"}