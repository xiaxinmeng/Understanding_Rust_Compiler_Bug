{"url": "https://api.github.com/repos/rust-lang/rust/issues/3680", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3680/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3680/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3680/events", "html_url": "https://github.com/rust-lang/rust/issues/3680", "id": 7399743, "node_id": "MDU6SXNzdWU3Mzk5NzQz", "number": 3680, "title": "internal compiler error trying to match `None` against `Err(_)`", "user": {"login": "ben0x539", "id": 24142, "node_id": "MDQ6VXNlcjI0MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/24142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ben0x539", "html_url": "https://github.com/ben0x539", "followers_url": "https://api.github.com/users/ben0x539/followers", "following_url": "https://api.github.com/users/ben0x539/following{/other_user}", "gists_url": "https://api.github.com/users/ben0x539/gists{/gist_id}", "starred_url": "https://api.github.com/users/ben0x539/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ben0x539/subscriptions", "organizations_url": "https://api.github.com/users/ben0x539/orgs", "repos_url": "https://api.github.com/users/ben0x539/repos", "events_url": "https://api.github.com/users/ben0x539/events{/privacy}", "received_events_url": "https://api.github.com/users/ben0x539/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/8", "html_url": "https://github.com/rust-lang/rust/milestone/8", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/8/labels", "id": 144598, "node_id": "MDk6TWlsZXN0b25lMTQ0NTk4", "number": 8, "title": "0.5", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 206, "state": "closed", "created_at": "2012-07-12T19:45:03Z", "updated_at": "2013-06-13T02:57:55Z", "due_on": "2012-12-22T08:00:00Z", "closed_at": "2013-06-13T02:57:55Z"}, "comments": 2, "created_at": "2012-10-06T19:57:22Z", "updated_at": "2014-06-16T21:56:22Z", "closed_at": "2012-12-12T01:39:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is a reduced, invalid code snippet that produces an internal compiler error after diagnosing a type error:\n\n```\nfn f() {\n    match None {\n            Err(_) => ()\n    }\n}\n```\n\nHere is the stack traces produced by the `RUST_LOG` settings suggested by the original error message:\n\n```\n$ RUST_LOG=rustc=0,::rt::backtrace rustc foo.rs\nfoo.rs:3:12: 3:21 error: mismatched types: expected `core::result::Result<<V2>,<V3>>` but found `core::option::Option<<V1>>` (expected enum core::result::Result but found enum core::option::Option)\nfoo.rs:3             Err(_) => ()\n                     ^~~~~~~~~\nrust: task failed at 'index out of bounds: the len is 1 but the index is 1', /home/ben/code/repos/rust/src/rustc/middle/ty.rs:1451\n/home/ben/local/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f89a8502e9d]\n/home/ben/local/lib/librustrt.so(+0x3377d)[0x7f89a851a77d]\n/home/ben/local/lib/librustrt.so(upcall_fail+0x1a8)[0x7f89a8505788]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(_ZN2rt20rt_fail_bounds_check17_e739cc78d15657703_04E+0x1a0)[0x7f89a9b46cd0]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x29f504)[0x7f89a89ea504]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(_ZN6middle2ty5subst17_7a3ff3a9684ad3303_04E+0x2fb)[0x7f89a88e5dbb]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x100521)[0x7f89a884b521]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x3341dd)[0x7f89a8a7f1dd]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x32a8cf)[0x7f89a8a758cf]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x325182)[0x7f89a8a70182]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x3bc990)[0x7f89a8b07990]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x69bcc0)[0x7f89a8de6cc0]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x3326b8)[0x7f89a8a7d6b8]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x69bcc0)[0x7f89a8de6cc0]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x385240)[0x7f89a8ad0240]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x383943)[0x7f89a8ace943]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x38119a)[0x7f89a8acc19a]\n/home/ben/local/lib/libsyntax-84efebcb12c867a2-0.4.so(+0xb11cd)[0x7f89a92791cd]\n/home/ben/local/lib/libsyntax-84efebcb12c867a2-0.4.so(+0xb1034)[0x7f89a9279034]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(_ZN6middle6typeck11check_crate17_bbe1149ff42c4fc93_04E+0xd49)[0x7f89a8bae5b9]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(_ZN6driver6driver12compile_upto17_25761dc338c52ad63_04E+0x1646)[0x7f89a8dbbeb6]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(+0x69bcc0)[0x7f89a8de6cc0]\n/home/ben/local/lib/librustc-c84825241471686d-0.4.so(_ZN6driver6driver13compile_input17_3df932b1ac436bdb3_04E+0xbd)[0x7f89a8dbf1bd]\nrustc[0x4091d6]\nrustc[0x412534]\nrustc[0x40e9b3]\nrustc[0x40d66c]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x7985f)[0x7f89a9b7b85f]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb9540)[0x7f89a9bbb540]\n/home/ben/local/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f89a8503644]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=0,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/ben/code/repos/rust/src/rustc/driver/rustc.rs:275\n/home/ben/local/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f89a8502e9d]\n/home/ben/local/lib/librustrt.so(+0x3377d)[0x7f89a851a77d]\n/home/ben/local/lib/librustrt.so(upcall_fail+0x1a8)[0x7f89a8505788]\nrustc(_rust_main+0x838)[0x411d48]\nrustc[0x412534]\n/home/ben/local/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f89a8503644]\nrust: domain main @0x1779200 root task failed\nrust: task failed at 'killed', /home/ben/code/repos/rust/src/libcore/task.rs:663\n/home/ben/local/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x5d)[0x7f89a8502e9d]\n/home/ben/local/lib/librustrt.so(+0x3377d)[0x7f89a851a77d]\n/home/ben/local/lib/librustrt.so(upcall_fail+0x1a8)[0x7f89a8505788]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(_ZN4task5yield16_9531951b4f79f8b3_04E+0xbd)[0x7f89a9b64e1d]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x946e6)[0x7f89a9b966e6]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(_ZN7private11weaken_task17_16b955f1119438ce3_04E+0xd2)[0x7f89a9b96522]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x9441b)[0x7f89a9b9641b]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb9540)[0x7f89a9bbb540]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x93770)[0x7f89a9b95770]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x9310e)[0x7f89a9b9510e]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x92776)[0x7f89a9b94776]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0x7985f)[0x7f89a9b7b85f]\n/home/ben/local/lib/libcore-c3ca5d77d81b46c1-0.4.so(+0xb9540)[0x7f89a9bbb540]\n/home/ben/local/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f89a8503644]\n```\n\nThis is with `rustc` built on `incoming` at commit f96a2a2ca16a44f869336f7e28fc261551c1184c.\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3680/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3680/timeline", "performed_via_github_app": null, "state_reason": "completed"}