{"url": "https://api.github.com/repos/rust-lang/rust/issues/84245", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/84245/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/84245/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/84245/events", "html_url": "https://github.com/rust-lang/rust/issues/84245", "id": 859926253, "node_id": "MDU6SXNzdWU4NTk5MjYyNTM=", "number": 84245, "title": "rustc fails randomly with (signal: 11, SIGSEGV: invalid memory reference)", "user": {"login": "nappa85", "id": 7566389, "node_id": "MDQ6VXNlcjc1NjYzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/7566389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nappa85", "html_url": "https://github.com/nappa85", "followers_url": "https://api.github.com/users/nappa85/followers", "following_url": "https://api.github.com/users/nappa85/following{/other_user}", "gists_url": "https://api.github.com/users/nappa85/gists{/gist_id}", "starred_url": "https://api.github.com/users/nappa85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nappa85/subscriptions", "organizations_url": "https://api.github.com/users/nappa85/orgs", "repos_url": "https://api.github.com/users/nappa85/repos", "events_url": "https://api.github.com/users/nappa85/events{/privacy}", "received_events_url": "https://api.github.com/users/nappa85/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2021-04-16T15:30:58Z", "updated_at": "2023-06-01T18:19:48Z", "closed_at": "2021-05-04T07:08:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "I know this bug doesn't forllow the template, I'll try to be as precise as possible, but I can't reproduce systematically the problem...\r\nI've created a really big project, almost made completely of serde proc-macros, you can find it here: https://github.com/nappa85/serde_fix/\r\nAs soon as the project started getting bigger, the builds started failing, I've split it in a workspace, but I haven't solved completely the problem.\r\n\r\nThe fails are random, and seems to happen more often on a \"dirty\" environment, where with \"dirty\" I mean without calling `cargo clean` before.\r\n\r\nI noticed the failure rate is kind of inverse proportional to the number (or the kind) of errors in the code.\r\nFor example, before implementing Default for every enum in the code, and therefore having an error for missing Default for every non Option-wrapped enum, it was really hard to get a non failing build.\r\n\r\nNow that the code is cleaner, to trigger the failure I created a script that adds a comment to a shared crate and then restarts `\u00a2argo check` for all toolchains: https://github.com/nappa85/serde_fix/blob/master/runtest.sh\r\nI run it like `I=0; while ./runtest.sh; do :; done`\r\n\r\nNormally rustc fails with something like:\r\n```\r\n  process didn't exit successfully: `rustc --crate-name fixt11 --edition=2018 fixt11/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type lib --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 -C metadata=045522708ff761af -C extra-filename=-045522708ff761af --out-dir /home/marcon/Progetti/serde_fix/target/debug/deps -C incremental=/home/marcon/Progetti/serde_fix/target/debug/incremental -L dependency=/home/marcon/Progetti/serde_fix/target/debug/deps --extern fix_common=/home/marcon/Progetti/serde_fix/target/debug/deps/libfix_common-b432d750f411466d.rmeta --extern serde=/home/marcon/Progetti/serde_fix/target/debug/deps/libserde-3d4d15af8ef49c31.rmeta --extern serde_fix=/home/marcon/Progetti/serde_fix/target/debug/deps/libserde_fix-798dff9103619a78.rmeta` (signal: 11, SIGSEGV: invalid memory reference)\r\n```\r\n\r\nSometimes, after a failure, I'm not able to restart a build until I run `cargo clean`, the build fails with:\r\n```\r\nmemory allocation of 104733814464 bytes failed\r\nAborted (core dumped)\r\n```\r\n\r\nOnly once it failed with a backtrace, that is:\r\n\r\n<details><summary>Backtrace</summary>\r\n\r\n```\r\nthread 'rustc' panicked at 'index out of bounds: the len is 30 but the index is 1127271296', compiler/rustc_metadata/src/creader.rs:134:21\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.52.0-beta.3 (215738137 2021-04-06) running on x86_64-unknown-linux-gnu\r\n\r\nnote: compiler flags: -C embed-bitcode=no -C debuginfo=2 -C incremental --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\nthread 'rustc' panicked at 'index out of bounds: the len is 30 but the index is 1127271296', compiler/rustc_metadata/src/creader.rs:134:21\r\nstack backtrace:\r\n   0:     0x7fc8e99fbb00 - std::backtrace_rs::backtrace::libunwind::trace::hc65bb72b4a549d12\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/../../backtrace/src/backtrace/libunwind.rs:90:5\r\n   1:     0x7fc8e99fbb00 - std::backtrace_rs::backtrace::trace_unsynchronized::h6e6089972b3c123e\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x7fc8e99fbb00 - std::sys_common::backtrace::_print_fmt::h6a259ed64281b14e\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:67:5\r\n   3:     0x7fc8e99fbb00 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hada463cae5e69c09\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:46:22\r\n   4:     0x7fc8e9a6a22f - core::fmt::write::hd526fa92c7915d40\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1092:17\r\n   5:     0x7fc8e99efc12 - std::io::Write::write_fmt::h6bc7fe34c0e5e633\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/io/mod.rs:1572:15\r\n   6:     0x7fc8e99ff835 - std::sys_common::backtrace::_print::h2485fe440d733b74\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:49:5\r\n   7:     0x7fc8e99ff835 - std::sys_common::backtrace::print::hfe9bf64cf6d5131b\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:36:9\r\n   8:     0x7fc8e99ff835 - std::panicking::default_hook::{{closure}}::h9da41c6d765e6d84\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:208:50\r\n   9:     0x7fc8e99ff2e3 - std::panicking::default_hook::h12592fd0ecea94ff\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:225:9\r\n  10:     0x7fc8ea1d015b - rustc_driver::report_ice::h14075d822d976f42\r\n  11:     0x7fc8c94c7013 - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h3c569397dd37cb4f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/alloc/src/boxed.rs:1560:9\r\n  12:     0x7fc8c953b856 - proc_macro::bridge::client::<impl proc_macro::bridge::Bridge>::enter::{{closure}}::{{closure}}::hbab5ec22efadb322\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/proc_macro/src/bridge/client.rs:320:21\r\n  13:     0x7fc8e99fffa0 - std::panicking::rust_panic_with_hook::h48e31a52a6a5e11f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:595:17\r\n  14:     0x7fc8e99ffb17 - std::panicking::begin_panic_handler::{{closure}}::h74f000b3d866b063\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:497:13\r\n  15:     0x7fc8e99fbfbc - std::sys_common::backtrace::__rust_end_short_backtrace::h1dcb6d2a32dff0c7\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:141:18\r\n  16:     0x7fc8e99ffa79 - rust_begin_unwind\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:493:5\r\n  17:     0x7fc8e99c5d71 - core::panicking::panic_fmt::h2ffa803fe69f2062\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/panicking.rs:92:14\r\n  18:     0x7fc8e99c5d32 - core::panicking::panic_bounds_check::h5773bda7b4a076e6\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/panicking.rs:69:5\r\n  19:     0x7fc8ebab862c - rustc_metadata::rmeta::decoder::cstore_impl::<impl rustc_middle::middle::cstore::CrateStore for rustc_metadata::creader::CStore>::def_key::h1eeb2356d4a28b3d\r\n  20:     0x7fc8ebd7a0ef - <rustc_middle::ty::print::pretty::FmtPrinter<F> as rustc_middle::ty::print::Printer>::print_def_path::h3bb922496dadfb41\r\n  21:     0x7fc8eb26dc99 - <rustc_middle::ty::print::pretty::TraitRefPrintOnlyTraitPath as core::fmt::Display>::fmt::h4a04071e8290f357\r\n  22:     0x7fc8e9a6a22f - core::fmt::write::hd526fa92c7915d40\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1092:17\r\n  23:     0x7fc8eb1a8683 - rustc_middle::ty::print::pretty::<impl rustc_middle::ty::print::Print<P> for rustc_middle::ty::sty::TraitRef>::print::h9521597995ad138a\r\n  24:     0x7fc8eb1a9610 - rustc_middle::ty::print::pretty::<impl core::fmt::Display for rustc_middle::ty::sty::TraitRef>::fmt::h26da59f47c87408c\r\n  25:     0x7fc8eb26fd50 - std::thread::local::LocalKey<T>::with::h68d1568c0faa00d6\r\n  26:     0x7fc8eb1a2d2f - rustc_middle::ty::structural_impls::<impl core::fmt::Debug for rustc_middle::ty::sty::TraitRef>::fmt::h8a3645189c9ebbcc\r\n  27:     0x7fc8e9a6a22f - core::fmt::write::hd526fa92c7915d40\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1092:17\r\n  28:     0x7fc8e9a6b404 - core::fmt::Formatter::write_fmt::h065f17fef40bc6c2\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1535:9\r\n  29:     0x7fc8eb259467 - rustc_middle::ty::structural_impls::<impl core::fmt::Debug for rustc_middle::ty::PredicateKind>::fmt::ha8923a8a7af3bbd3\r\n  30:     0x7fc8e9a66eee - core::fmt::builders::DebugTuple::field::{{closure}}::h399721513d1e5c1f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:345:17\r\n  31:     0x7fc8e9a66eee - core::result::Result<T,E>::and_then::hfef0617aa62e9568\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/result.rs:704:22\r\n  32:     0x7fc8e9a66eee - core::fmt::builders::DebugTuple::field::hf6cdfea1b13336ce\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:332:23\r\n  33:     0x7fc8eb1ab45c - <rustc_middle::ty::sty::Binder<T> as core::fmt::Debug>::fmt::he45a983435a30287\r\n  34:     0x7fc8e9a6a22f - core::fmt::write::hd526fa92c7915d40\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1092:17\r\n  35:     0x7fc8e9a6b404 - core::fmt::Formatter::write_fmt::h065f17fef40bc6c2\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1535:9\r\n  36:     0x7fc8eb24d0a8 - <&T as core::fmt::Debug>::fmt::h1aabd3b18a66933c\r\n  37:     0x7fc8e9a6709a - core::fmt::builders::DebugInner::entry::{{closure}}::h48f301b78689925a\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:417:17\r\n  38:     0x7fc8e9a6709a - core::result::Result<T,E>::and_then::ha138ac621db2bd1e\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/result.rs:704:22\r\n  39:     0x7fc8e9a6709a - core::fmt::builders::DebugInner::entry::h7bfe5b8dcccf238e\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:403:23\r\n  40:     0x7fc8e9a67169 - core::fmt::builders::DebugSet::entry::ha731768ebd0e8466\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:492:9\r\n  41:     0x7fc8eb1f64cb - core::fmt::builders::DebugList::entries::h61aaca8ba055eb1e\r\n  42:     0x7fc8eb25026e - <[T] as core::fmt::Debug>::fmt::h25f46d002945aa4b\r\n  43:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::{{closure}}::h593a8be22597e88b\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:154:17\r\n  44:     0x7fc8e9a66c4e - core::result::Result<T,E>::and_then::h7bb0007399fd060f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/result.rs:704:22\r\n  45:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::h569d908b4e5aeafe\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:137:23\r\n  46:     0x7fc8eb25adca - <rustc_middle::ty::ParamEnv as core::fmt::Debug>::fmt::hb568634497a886cd\r\n  47:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::{{closure}}::h593a8be22597e88b\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:154:17\r\n  48:     0x7fc8e9a66c4e - core::result::Result<T,E>::and_then::h7bb0007399fd060f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/result.rs:704:22\r\n  49:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::h569d908b4e5aeafe\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:137:23\r\n  50:     0x7fc8ea7d589e - <&T as core::fmt::Debug>::fmt::h645ead9d504051b6\r\n  51:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::{{closure}}::h593a8be22597e88b\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:154:17\r\n  52:     0x7fc8e9a66c4e - core::result::Result<T,E>::and_then::h7bb0007399fd060f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/result.rs:704:22\r\n  53:     0x7fc8e9a66c4e - core::fmt::builders::DebugStruct::field::h569d908b4e5aeafe\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/builders.rs:137:23\r\n  54:     0x7fc8ea881fcc - <rustc_middle::infer::canonical::Canonical<V> as core::fmt::Debug>::fmt::h7cde9e99c95c7130\r\n  55:     0x7fc8e9a6a22f - core::fmt::write::hd526fa92c7915d40\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:1092:17\r\n  56:     0x7fc8e9a5cacc - core::fmt::Write::write_fmt::h451c56ba82d6e1f2\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/fmt/mod.rs:182:9\r\n  57:     0x7fc8e9a5cacc - alloc::fmt::format::hebf2b2426874b3ab\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/alloc/src/fmt.rs:578:5\r\n  58:     0x7fc8ea861e8e - std::thread::local::LocalKey<T>::with::h3cf8c01b4104782a\r\n  59:     0x7fc8ea96e2f3 - rustc_middle::ty::print::pretty::with_no_trimmed_paths::h3b3ec82570b1ec62\r\n  60:     0x7fc8ea8707e8 - std::thread::local::LocalKey<T>::with::hc0ef46ad7cc87747\r\n  61:     0x7fc8ea96fc96 - rustc_middle::ty::print::pretty::with_forced_impl_filename_line::h108438a8f664d238\r\n  62:     0x7fc8ea96b809 - rustc_query_impl::make_query::type_op_prove_predicate::h9220fc01f9f25825\r\n  63:     0x7fc8ea9efa21 - <core::iter::adapters::map::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::h40129cc4908fdd14\r\n  64:     0x7fc8ea9d0fee - <hashbrown::map::HashMap<K,V,S,A> as core::iter::traits::collect::Extend<(K,V)>>::extend::h8f2fc321eb2c02f3\r\n  65:     0x7fc8ea74a982 - rustc_query_system::query::plumbing::QueryState<D,K>::try_collect_active_jobs::h863c9c6d29de8915\r\n  66:     0x7fc8ea88d58a - rustc_query_impl::Queries::try_collect_active_jobs::hd38829f4a212615d\r\n  67:     0x7fc8ea954950 - <rustc_query_impl::plumbing::QueryCtxt as rustc_query_system::query::QueryContext>::try_collect_active_jobs::hb23e4fd740dc5332\r\n  68:     0x7fc8ea7ad38c - rustc_query_system::query::job::print_query_stack::h03d1a6b10b1d44fc\r\n  69:     0x7fc8ea29f3e8 - rustc_interface::interface::try_print_query_stack::h926cd20fc6bdd631\r\n  70:     0x7fc8ea1d0568 - rustc_driver::report_ice::h14075d822d976f42\r\n  71:     0x7fc8c94c7013 - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h3c569397dd37cb4f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/alloc/src/boxed.rs:1560:9\r\n  72:     0x7fc8c953b856 - proc_macro::bridge::client::<impl proc_macro::bridge::Bridge>::enter::{{closure}}::{{closure}}::hbab5ec22efadb322\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/proc_macro/src/bridge/client.rs:320:21\r\n  73:     0x7fc8e99fffa0 - std::panicking::rust_panic_with_hook::h48e31a52a6a5e11f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:595:17\r\n  74:     0x7fc8e99ffb17 - std::panicking::begin_panic_handler::{{closure}}::h74f000b3d866b063\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:497:13\r\n  75:     0x7fc8e99fbfbc - std::sys_common::backtrace::__rust_end_short_backtrace::h1dcb6d2a32dff0c7\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys_common/backtrace.rs:141:18\r\n  76:     0x7fc8e99ffa79 - rust_begin_unwind\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/panicking.rs:493:5\r\n  77:     0x7fc8e99c5d71 - core::panicking::panic_fmt::h2ffa803fe69f2062\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/panicking.rs:92:14\r\n  78:     0x7fc8e99c5d32 - core::panicking::panic_bounds_check::h5773bda7b4a076e6\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/core/src/panicking.rs:69:5\r\n  79:     0x7fc8ebab894c - rustc_metadata::rmeta::decoder::cstore_impl::<impl rustc_middle::middle::cstore::CrateStore for rustc_metadata::creader::CStore>::def_path_hash::hdeb4797963c3acdb\r\n  80:     0x7fc8ebcfb448 - rustc_middle::ich::impls_ty::<impl rustc_data_structures::stable_hasher::HashStable<rustc_middle::ich::hcx::StableHashingContext> for rustc_middle::ty::sty::Binder<T>>::hash_stable::h0bc8e5fa48caf7ef\r\n  81:     0x7fc8ec7416b8 - <[T] as rustc_data_structures::stable_hasher::HashStable<CTX>>::hash_stable::hb2ff12798e00d2cf\r\n  82:     0x7fc8ebd86f95 - std::thread::local::LocalKey<T>::with::h026ca23f210d852a\r\n  83:     0x7fc8ebd6f13a - <rustc_middle::ty::ParamEnv as rustc_data_structures::stable_hasher::HashStable<rustc_middle::ich::hcx::StableHashingContext>>::hash_stable::hadda05d1178338a7\r\n  84:     0x7fc8ec28a69c - <T as rustc_query_system::dep_graph::dep_node::DepNodeParams<Ctxt>>::to_fingerprint::h5698ecf1313e3882\r\n  85:     0x7fc8eb723a9b - rustc_query_system::query::plumbing::get_query_impl::h72f3bbe3292ffc38\r\n  86:     0x7fc8eb7902e2 - <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::type_op_prove_predicate::h04b6f050f5152004\r\n  87:     0x7fc8ebc55517 - rustc_trait_selection::traits::query::type_op::prove_predicate::<impl rustc_trait_selection::traits::query::type_op::QueryTypeOp for rustc_middle::traits::query::type_op::ProvePredicate>::perform_query::h397428cd22c8c9fd\r\n  88:     0x7fc8eb98dcf0 - rustc_trait_selection::traits::query::type_op::QueryTypeOp::fully_perform_into::h94dcc2be82a9aeaa\r\n  89:     0x7fc8eb9c136f - <rustc_middle::ty::ParamEnvAnd<Q> as rustc_trait_selection::traits::query::type_op::TypeOp>::fully_perform::h04e0cc5568411883\r\n  90:     0x7fc8eba1d78a - rustc_mir::borrow_check::type_check::TypeChecker::prove_predicate::hfc839dbb47558707\r\n  91:     0x7fc8eba1e55a - rustc_mir::borrow_check::type_check::TypeChecker::typeck_mir::hb537c1493bbbc772\r\n  92:     0x7fc8eba0cda7 - rustc_mir::borrow_check::type_check::type_check::h3ef8589778be93bb\r\n  93:     0x7fc8eb8d5505 - rustc_mir::borrow_check::nll::compute_regions::hdd67fe62f7968159\r\n  94:     0x7fc8eb9cc548 - rustc_mir::borrow_check::do_mir_borrowck::hdb3499e3f0ebcb3b\r\n  95:     0x7fc8eb8c3741 - rustc_infer::infer::InferCtxtBuilder::enter::hfa814de4c996f100\r\n  96:     0x7fc8eb9cb8c4 - rustc_mir::borrow_check::mir_borrowck::hb3eca2a663210af2\r\n  97:     0x7fc8eb9c58be - core::ops::function::FnOnce::call_once::h35eb2fbe226edf89\r\n  98:     0x7fc8ec2fdaab - rustc_middle::dep_graph::<impl rustc_query_system::dep_graph::DepKind for rustc_middle::dep_graph::dep_node::DepKind>::with_deps::hf474419eae80c4c6\r\n  99:     0x7fc8eb7952cc - rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl::h28fda917f446592e\r\n 100:     0x7fc8eb74d64e - rustc_query_system::query::plumbing::force_query_with_job::hd140b4d540507fce\r\n 101:     0x7fc8eb717ac3 - rustc_query_system::query::plumbing::get_query_impl::h48229917e4bc1a4a\r\n 102:     0x7fc8eb78e5ed - <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::mir_borrowck::h984bfd92206b0b45\r\n 103:     0x7fc8eb47adf5 - rustc_middle::ty::<impl rustc_middle::ty::context::TyCtxt>::par_body_owners::h792122383dbfd12e\r\n 104:     0x7fc8ebe3b3d7 - rustc_interface::passes::analysis::h391678db2ed31e9c\r\n 105:     0x7fc8ea98ba4a - rustc_middle::dep_graph::<impl rustc_query_system::dep_graph::DepKind for rustc_middle::dep_graph::dep_node::DepKind>::with_deps::hd0507447f9fbb9af\r\n 106:     0x7fc8ec2ada90 - rustc_query_system::dep_graph::graph::DepGraph<K>::with_task_impl::h447795d359c1b960\r\n 107:     0x7fc8ec30d8f7 - rustc_data_structures::stack::ensure_sufficient_stack::h419f23b903c263df\r\n 108:     0x7fc8ec1dfc01 - rustc_query_system::query::plumbing::force_query_with_job::h36761774af3a5891\r\n 109:     0x7fc8ec1c945b - rustc_query_system::query::plumbing::get_query_impl::hf9f05e7ca537c4ce\r\n 110:     0x7fc8ec294def - <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::analysis::he5fdc9b8bdc0c796\r\n 111:     0x7fc8ebe2927b - rustc_interface::passes::QueryContext::enter::hef42bd104aedbb85\r\n 112:     0x7fc8ebdfff05 - rustc_interface::queries::<impl rustc_interface::interface::Compiler>::enter::h60cfe93b7b0e1e5f\r\n 113:     0x7fc8ebdfa521 - rustc_span::with_source_map::hd8e0dcfd833db880\r\n 114:     0x7fc8ebe00ede - rustc_interface::interface::create_compiler_and_run::h016141feddeec777\r\n 115:     0x7fc8ebdfb3d8 - scoped_tls::ScopedKey<T>::set::h251cc53c4edaefe8\r\n 116:     0x7fc8ebe01294 - std::sys_common::backtrace::__rust_begin_short_backtrace::h8e422294f8c54ce3\r\n 117:     0x7fc8ebe188f5 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h9d09c7ff9f326ef9\r\n 118:     0x7fc8e9a0f8e8 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h36b08298aa835de6\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/alloc/src/boxed.rs:1546:9\r\n 119:     0x7fc8e9a0f8e8 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h39c1de95e16a780f\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/alloc/src/boxed.rs:1546:9\r\n 120:     0x7fc8e9a0f8e8 - std::sys::unix::thread::Thread::new::thread_start::ha33b608c43829834\r\n                               at /rustc/215738137bcbef2c3637a5bd290ef612cffe6ba5/library/std/src/sys/unix/thread.rs:71:17\r\n 121:     0x7fc8e9935450 - start_thread\r\n 122:     0x7fc8e9843d53 - clone\r\n 123:                0x0 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.52.0-beta.3 (215738137 2021-04-06) running on x86_64-unknown-linux-gnu\r\n\r\nnote: compiler flags: -C embed-bitcode=no -C debuginfo=2 -C incremental --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\nend of query stack\r\nthread panicked while panicking. aborting.\r\nerror: could not compile `fix50sp2`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name fix50sp2 --edition=2018 fix50sp2/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type lib --emit=dep-info,metadata -C embed-bitcode=no -C debuginfo=2 -C metadata=7a0544dae5cc1f1e -C extra-filename=-7a0544dae5cc1f1e --out-dir /home/marco/Progetti/temp/target/debug/deps -C incremental=/home/marco/Progetti/temp/target/debug/incremental -L dependency=/home/marco/Progetti/temp/target/debug/deps --extern fix_common=/home/marco/Progetti/temp/target/debug/deps/libfix_common-87626cf92204a1bc.rmeta --extern fixt11=/home/marco/Progetti/temp/target/debug/deps/libfixt11-69bd0e267a8a01af.rmeta --extern serde=/home/marco/Progetti/temp/target/debug/deps/libserde-3d4b116345418cef.rmeta --extern serde_fix=/home/marco/Progetti/temp/target/debug/deps/libserde_fix-b1f436314963cc65.rmeta` (signal: 4, SIGILL: illegal instruction)\r\n```\r\n\r\n</details>\r\n\r\nMy machine is an AMD Ryzen 7 4700U with 16GB of RAM running Kubuntu 21.04 (same problems with 20.04 and 20.10).\r\nIf you need any additional info, just ask me, my goal is to help improve the compiler.", "closed_by": {"login": "nappa85", "id": 7566389, "node_id": "MDQ6VXNlcjc1NjYzODk=", "avatar_url": "https://avatars.githubusercontent.com/u/7566389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nappa85", "html_url": "https://github.com/nappa85", "followers_url": "https://api.github.com/users/nappa85/followers", "following_url": "https://api.github.com/users/nappa85/following{/other_user}", "gists_url": "https://api.github.com/users/nappa85/gists{/gist_id}", "starred_url": "https://api.github.com/users/nappa85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nappa85/subscriptions", "organizations_url": "https://api.github.com/users/nappa85/orgs", "repos_url": "https://api.github.com/users/nappa85/repos", "events_url": "https://api.github.com/users/nappa85/events{/privacy}", "received_events_url": "https://api.github.com/users/nappa85/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/84245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/84245/timeline", "performed_via_github_app": null, "state_reason": "completed"}