{"url": "https://api.github.com/repos/rust-lang/rust/issues/76354", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/76354/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76354/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/76354/events", "html_url": "https://github.com/rust-lang/rust/issues/76354", "id": 693867438, "node_id": "MDU6SXNzdWU2OTM4Njc0Mzg=", "number": 76354, "title": "Does `[T]::array_chunks` really need to be an iterator?", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}, {"id": 3425147156, "node_id": "LA_kwDOAAsO6M7MJ5kU", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-array", "name": "A-array", "color": "f7e101", "default": false, "description": "Area: [T; N]"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2020-09-05T00:51:03Z", "updated_at": "2023-03-07T05:34:55Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "After bit after reviewing the code in https://github.com/rust-lang/rust/pull/75021 I had a thought: if this iterator is mostly just a wrapper on a slice iterator, does it even need to be an iterator at all?\r\n\r\nThe original `.chunks()` call does (as does `.windows`), because the slices it wants to return don't exist anywhere.\r\n\r\nBut the arrays returned by `array_chunks` are inline in the original slice allocation, so the API could just return the slice that the method is already creating, instead of hiding it in an iterator.\r\n\r\nTo be more concrete:\r\n```rust\r\nimpl [T] { \r\n    pub fn array_chunks<const N: usize>(&self) -> (&[[T;N]], &[T]);\r\n    pub fn array_chunks_mut<const N: usize>(&mut self) -> (&mut [[T;N]], &mut [T]);\r\n}\r\n```\r\n\r\nNot only would this be more general (the `ArrayChunks` type doesn't currently expose the slice), but I think it would make it less likely that people would forget to correctly handle the `.remainder()`.  (While still being easy to ignore it with `.0` if they insist.)  And returning tuples like this has precedent with `split_*` and `align_to` and such.  (Many other names could work too, like `.as_chunks(_mut)`.)\r\n\r\nAlso, such a method would be nice to have as the inverse of a hypothetical `flatten: &[[T; N]] -> &[T]`.  (EDIT: No longer as hypothetical, #95629.)\r\n\r\n`array_chunks` tracking issue https://github.com/rust-lang/rust/issues/74985", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/76354/reactions", "total_count": 28, "+1": 28, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/76354/timeline", "performed_via_github_app": null, "state_reason": null}