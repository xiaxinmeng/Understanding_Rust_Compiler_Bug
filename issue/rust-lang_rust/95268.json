{"url": "https://api.github.com/repos/rust-lang/rust/issues/95268", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95268/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95268/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95268/events", "html_url": "https://github.com/rust-lang/rust/issues/95268", "id": 1179221117, "node_id": "I_kwDOAAsO6M5GSXx9", "number": 95268, "title": "No syntactic way to specify GATs with where bounds in where clauses", "user": {"login": "joe-hauns", "id": 28921820, "node_id": "MDQ6VXNlcjI4OTIxODIw", "avatar_url": "https://avatars.githubusercontent.com/u/28921820?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joe-hauns", "html_url": "https://github.com/joe-hauns", "followers_url": "https://api.github.com/users/joe-hauns/followers", "following_url": "https://api.github.com/users/joe-hauns/following{/other_user}", "gists_url": "https://api.github.com/users/joe-hauns/gists{/gist_id}", "starred_url": "https://api.github.com/users/joe-hauns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joe-hauns/subscriptions", "organizations_url": "https://api.github.com/users/joe-hauns/orgs", "repos_url": "https://api.github.com/users/joe-hauns/repos", "events_url": "https://api.github.com/users/joe-hauns/events{/privacy}", "received_events_url": "https://api.github.com/users/joe-hauns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1485960423, "node_id": "MDU6TGFiZWwxNDg1OTYwNDIz", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-generic_associated_types", "name": "F-generic_associated_types", "color": "f9c0cc", "default": false, "description": "`#![feature(generic_associated_types)]` a.k.a. GATs"}, {"id": 3307663436, "node_id": "MDU6TGFiZWwzMzA3NjYzNDM2", "url": "https://api.github.com/repos/rust-lang/rust/labels/GATs-triaged", "name": "GATs-triaged", "color": "e88000", "default": false, "description": "Issues using the `generic_associated_types` feature that have been triaged"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-24T09:13:08Z", "updated_at": "2022-08-22T18:31:59Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "\r\nHi!\r\n\r\nI was trying to use GATs in one of my projects, and ran into the following issue. \r\n\r\n```rust\r\n#![feature(generic_associated_types)]\r\n\r\ntrait ModuleConfig {\r\n\r\n    type Type1;\r\n\r\n    type Type2<'a>\r\n        where Self::Type1: 'a;\r\n\r\n}\r\n\r\ntrait ModuleConfigSpec<T>\r\n    where Self: for<'a> ModuleConfig<\r\n        Type2<'a> = &'a T\r\n        >,\r\n{ }\r\n\r\nfn main() {\r\n    println!(\"Hello, world!\");\r\n}\r\n\r\n\r\n```\r\n\r\nThis code does not compile, because the `for<'a>` bound in `ModuleConfigSpec` is not restricted by a `where Self::Type1: 'a`, which makes sense.\r\nBut as there is no way to specify this where bound, this means that GATs with where bounds cannot be passed to traits as concrete arguments. \r\nI expected it to be possible to specify where bounds locally for every GAT specified. Like in this case I expected to be able to write something like \r\n```\r\n\r\ntrait ModuleConfigSpec<T>\r\n    where Self: ModuleConfig<\r\n        for<'a> Type2<'a> = &'a T where Self::Type1: 'a,\r\n        >,\r\n{ }\r\n\r\n```\r\n\r\nInterestingly the code complies if we replace `trait ModuleConfigSpec` by \r\n```\r\nfn takes_spec_module_config<M, T>() \r\n    where M: for<'a> ModuleConfig<\r\n        Type2<'a> = &'a T\r\n    >\r\n{  }\r\n```\r\nwhich specifies the very same trait bounds.\r\n\r\n### Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.61.0-nightly (5f3700105 2022-03-22)\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95268/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95268/timeline", "performed_via_github_app": null, "state_reason": null}