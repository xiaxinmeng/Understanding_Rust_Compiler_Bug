{"url": "https://api.github.com/repos/rust-lang/rust/issues/100357", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/100357/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100357/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/100357/events", "html_url": "https://github.com/rust-lang/rust/issues/100357", "id": 1334089811, "node_id": "I_kwDOAAsO6M5PhJhT", "number": 100357, "title": "llvm build failure", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-10T05:28:05Z", "updated_at": "2022-08-12T10:47:54Z", "closed_at": "2022-08-12T10:47:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "````\r\nBuilding rustbuild\r\n    Finished dev [unoptimized] target(s) in 0.04s\r\nBuilding stage0 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n    Finished release [optimized] target(s) in 0.19s\r\nCopying stage0 std from stage0 (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)\r\nBuilding stage0 compiler artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n    Finished release [optimized] target(s) in 0.24s\r\nCopying stage0 rustc from stage0 (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)\r\nAssembling stage1 compiler (x86_64-unknown-linux-gnu)\r\nBuilding sanitizers for x86_64-unknown-linux-gnu\r\nCMAKE_TOOLCHAIN_FILE_x86_64-unknown-linux-gnu = None\r\nCMAKE_TOOLCHAIN_FILE_x86_64_unknown_linux_gnu = None\r\nHOST_CMAKE_TOOLCHAIN_FILE = None\r\nCMAKE_TOOLCHAIN_FILE = None\r\nCMAKE_PREFIX_PATH_x86_64-unknown-linux-gnu = None\r\nCMAKE_PREFIX_PATH_x86_64_unknown_linux_gnu = None\r\nHOST_CMAKE_PREFIX_PATH = None\r\nCMAKE_PREFIX_PATH = None\r\nCMAKE_x86_64-unknown-linux-gnu = None\r\nCMAKE_x86_64_unknown_linux_gnu = None\r\nHOST_CMAKE = None\r\nCMAKE = None\r\nrunning: \"cmake\" \"/home/matthias/vcs/github/rust/src/llvm-project/compiler-rt\" \"-G\" \"Ninja\" \"-DCMAKE_C_COMPILER_TARGET=x86_64-unknown-linux-gnu\" \"-DCOMPILER_RT_BUILD_BUILTINS=OFF\" \"-DCOMPILER_RT_BUILD_CRT=OFF\" \"-DCOMPILER_RT_BUILD_LIBFUZZER=OFF\" \"-DCOMPILER_RT_BUILD_PROFILE=OFF\" \"-DCOMPILER_RT_BUILD_SANITIZERS=ON\" \"-DCOMPILER_RT_BUILD_XRAY=OFF\" \"-DCOMPILER_RT_DEFAULT_TARGET_ONLY=ON\" \"-DCOMPILER_RT_USE_LIBCXX=OFF\" \"-DLLVM_CONFIG_PATH=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/ci-llvm/bin/llvm-config\" \"-DCMAKE_INSTALL_MESSAGE=LAZY\" \"-DCMAKE_C_COMPILER=clang\" \"-DCMAKE_CXX_COMPILER=clang++\" \"-DCMAKE_ASM_COMPILER=clang\" \"-DCMAKE_C_FLAGS=-ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu\" \"-DCMAKE_CXX_FLAGS=-ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu\" \"-DCMAKE_SHARED_LINKER_FLAGS= -Wl,-Bsymbolic -static-libstdc++\" \"-DCMAKE_MODULE_LINKER_FLAGS= -Wl,-Bsymbolic -static-libstdc++\" \"-DCMAKE_EXE_LINKER_FLAGS= -Wl,-Bsymbolic -static-libstdc++\" \"-DCMAKE_INSTALL_PREFIX=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/native/sanitizers\" \"-DCMAKE_ASM_FLAGS= -ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu\" \"-DCMAKE_BUILD_TYPE=Release\"\r\nCMake Warning at cmake/Modules/CompilerRTUtils.cmake:352 (message):\r\n  llvm-config finding testingsupport failed with status 1\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:70 (load_llvm_config)\r\n\r\n\r\nCMake Warning at cmake/Modules/CompilerRTUtils.cmake:390 (message):\r\n  LLVM CMake path\r\n  (/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/ci-llvm/lib/cmake/llvm/LLVMConfig.cmake)\r\n  reported by llvm-config does not exist\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:70 (load_llvm_config)\r\n\r\n\r\n-- LLVM_MAIN_SRC_DIR: \"/home/matthias/vcs/github/rust/src/llvm-project/llvm\"\r\n-- Attempting to mock the changes made by LLVMConfig.cmake\r\n-- LLVM_CMAKE_DIR: \"/home/matthias/vcs/github/rust/src/llvm-project/llvm/cmake/modules\"\r\n-- Using CMAKE_C_COMPILER_TARGET (x86_64-unknown-linux-gnu) as TARGET_TRIPLE\r\n-- TARGET_TRIPLE: \"x86_64-unknown-linux-gnu\"\r\n-- Compiler-RT supported architectures: x86_64\r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/native/sanitizers/build\r\nrunning: \"cmake\" \"--build\" \".\" \"--target\" \"clang_rt.asan-x86_64\" \"--config\" \"Release\" \"--\" \"-j\" \"4\"\r\n[  7%/6/4/79,0.276] Building CXX object lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_platform_limits_posix.cpp.o\r\nFAILED: lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_platform_limits_posix.cpp.o\r\n/usr/bin/clang++ -DHAVE_RPC_XDR_H=0 -I/home/matthias/vcs/github/rust/src/llvm-project/compiler-rt/lib/sanitizer_common/.. -ffunction-sections -fdata-sections -fPIC --target=x86_64-unknown-linux-gnu -Wall -std=c++14 -Wno-unused-parameter -O3 -DNDEBUG  -fPIC -fno-builtin -fno-exceptions -fomit-frame-pointer -funwind-tables -fno-stack-protector -fno-sanitize=safe-stack -fvisibility=hidden -fno-lto -Wthread-safety -Wthread-safety-reference -Wthread-safety-beta -O3 -gline-tables-only -Wno-gnu -Wno-variadic-macros -Wno-c99-extensions -nostdinc++ -Wno-format -fno-rtti -Wframe-larger-than=570 -Wglobal-constructors -MD -MT lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_platform_limits_posix.cpp.o -MF lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_platform_limits_posix.cpp.o.d -o lib/sanitizer_common/CMakeFiles/RTSanitizerCommon.x86_64.dir/sanitizer_platform_limits_posix.cpp.o -c /home/matthias/vcs/github/rust/src/llvm-project/compiler-rt/lib/sanitizer_common/sanitizer_platform_limits_posix.cpp\r\nIn file included from /home/matthias/vcs/github/rust/src/llvm-project/compiler-rt/lib/sanitizer_common/sanitizer_platform_limits_posix.cpp:76:\r\nIn file included from /usr/include/linux/fs.h:19:\r\n/usr/include/linux/mount.h:95:6: error: redefinition of 'fsconfig_command'\r\nenum fsconfig_command {\r\n     ^\r\n/usr/include/sys/mount.h:189:6: note: previous definition is here\r\nenum fsconfig_command\r\n     ^\r\nIn file included from /home/matthias/vcs/github/rust/src/llvm-project/compiler-rt/lib/sanitizer_common/sanitizer_platform_limits_posix.cpp:76:\r\nIn file included from /usr/include/linux/fs.h:19:\r\n/usr/include/linux/mount.h:129:8: error: redefinition of 'mount_attr'\r\nstruct mount_attr {\r\n       ^\r\n/usr/include/sys/mount.h:161:8: note: previous definition is here\r\nstruct mount_attr\r\n       ^\r\n2 errors generated.\r\n[ 11%/9/1/79,0.503] Building CXX object lib/sanitizer_common/CMakeFiles/RTSanitizerCommonLibc.x86_64.dir/sanitizer_linux_libcdep.cpp.o\r\nninja: build stopped: subcommand failed.\r\nthread 'main' panicked at '\r\ncommand did not execute successfully, got: exit status: 1\r\n\r\nbuild script failed, must exit now', /home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/cmake-0.1.48/src/lib.rs:975:5\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\tfinished in 1.101 seconds\r\nBuild completed unsuccessfully in 0:00:02\r\n````\r\nconfig.toml\r\n````toml\r\nchangelog-seen = 2\r\n[llvm]\r\ndownload-ci-llvm = true\r\nninja = true\r\n[build]\r\nextended = true\r\ntools = [\"cargo\", \"rls\", \"clippy\", \"rustfmt\", \"analysis\", \"src\", \"miri\", \"rust-analyzer\"]\r\nsanitizers = true\r\nprofiler = true\r\nlow-priority = true\r\n[install]\r\n[rust]\r\ncodegen-units = 0\r\nbacktrace-on-ice = true\r\n[target.x86_64-unknown-linux-gnu]\r\nar = \"llvm-ar\"\r\nranlib = \"llvm-ranlib\"\r\n[dist]\r\n````", "closed_by": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/100357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/100357/timeline", "performed_via_github_app": null, "state_reason": "completed"}