{"url": "https://api.github.com/repos/rust-lang/rust/issues/39330", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39330/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39330/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39330/events", "html_url": "https://github.com/rust-lang/rust/issues/39330", "id": 203530707, "node_id": "MDU6SXNzdWUyMDM1MzA3MDc=", "number": 39330, "title": "(Mostly) diagnostics involving `super` are weird", "user": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 239393, "node_id": "MDU6TGFiZWwyMzkzOTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-resolve", "name": "A-resolve", "color": "f7e101", "default": false, "description": "Area: Path resolution"}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-01-27T00:34:59Z", "updated_at": "2017-01-30T02:11:14Z", "closed_at": "2017-01-30T02:11:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```rust\r\npub mod a {\r\n    use super as root;\r\n}\r\n// error[E0432]: unresolved import `super`\r\n//  --> <anon>:3:9\r\n//   |\r\n// 3 |     use super as root;\r\n//   |         ^^^^^^^^^^^^^ no `super` in the root\r\n```\r\n\r\n`super` is a keyword. There can\u2019t ever be anything named `super` in the root.\r\n\r\n```rust\r\nfn main() {\r\n    let super = 2;\r\n}\r\n// error[E0531]: unresolved unit struct/variant or constant `super`\r\n//  --> <anon>:2:9\r\n//   |\r\n// 2 |     let super = 2;\r\n//   |         ^^^^^\r\n```\r\n\r\nSimilarly, rustc should be reporting that `super` is a keyword and cannot be used as an identifier. I suspect the error arises from the fact that super is parsed to be the whole pattern here. Example below results in the same diagnostic, but may be easier to understand why the error is what it is:\r\n\r\n```rust\r\nfn main() {\r\n    match 2 {\r\n        super => {}\r\n    }\r\n}\r\n// same error\r\n```\r\n\r\nNotably you cannot have something like this either:\r\n\r\n```rust\r\nmod a {}\r\nstruct a; // a is already defined\r\n\r\nfn main() {\r\n    let ::a = 2;\r\n}\r\n```\r\n\r\nSo in general this error message could be improved to say that `super` is a module (?) and cannot be used in a pattern this way.\r\n\r\n---\r\n\r\nWe over at the #rust-lang have ideas how a `use super as root` could be used to make life easier (@solson said they\u2019ll write an RFC). In other cases resolve should probably just stop accepting `super` by itself and/or just resolve it to a module.", "closed_by": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39330/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39330/timeline", "performed_via_github_app": null, "state_reason": "completed"}