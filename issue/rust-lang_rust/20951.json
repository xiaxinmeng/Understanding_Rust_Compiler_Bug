{"url": "https://api.github.com/repos/rust-lang/rust/issues/20951", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20951/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20951/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20951/events", "html_url": "https://github.com/rust-lang/rust/issues/20951", "id": 53998256, "node_id": "MDU6SXNzdWU1Mzk5ODI1Ng==", "number": 20951, "title": "SIGABRT in LLVM during stage0/librustc_typeck (RUSTFLAGS=-g)", "user": {"login": "ktossell", "id": 297442, "node_id": "MDQ6VXNlcjI5NzQ0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/297442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktossell", "html_url": "https://github.com/ktossell", "followers_url": "https://api.github.com/users/ktossell/followers", "following_url": "https://api.github.com/users/ktossell/following{/other_user}", "gists_url": "https://api.github.com/users/ktossell/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktossell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktossell/subscriptions", "organizations_url": "https://api.github.com/users/ktossell/orgs", "repos_url": "https://api.github.com/users/ktossell/repos", "events_url": "https://api.github.com/users/ktossell/events{/privacy}", "received_events_url": "https://api.github.com/users/ktossell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-11T17:34:56Z", "updated_at": "2015-01-14T10:23:12Z", "closed_at": "2015-01-14T10:23:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\ngit pull #2127e0d56d85ff48aafce90ab762650e46370b63\n./configure --enable-clang --disable-libcpp --prefix=/home/ken/proj/rust --enable-ccache\nmake clean\nmake RUSTFLAGS=-g VERBOSE=1\n```\n\n```\nCFG_LLVM_LINKAGE_FILE=/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/rt/llvmdeps.rs LD_LIBRARY_PATH=/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/stage0/lib:$LD_LIBRARY_PATH   x86_64-unknown-linux-gnu/stage0/bin/rustc --cfg stage0 -g -O --cfg rtopt --cfg debug -C prefer-dynamic -Z no-landing-pads --target=x86_64-unknown-linux-gnu  -W warnings -L \"x86_64-unknown-linux-gnu/rt\" -L \"/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/llvm/Release+Asserts/lib\" -L \"\"  --out-dir x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib -C extra-filename=-4e7c5e5c /home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs\n/home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs:68:1: 68:15 warning: unused attribute, #[warn(unused_attributes)] on by default\n/home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs:68 #![staged_api]\n                                                           ^~~~~~~~~~~~~~\nrustc: /home/rustbuild/src/rust-buildbot/slave/snap3-linux/build/src/llvm/lib/IR/DebugInfo.cpp:159: uint64_t llvm::DIVariable::getPieceOffset() const: Assertion `isVariablePiece()' failed.\n/home/ken/proj/rust/src/rust/mk/target.mk:165: recipe for target 'x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rustc_typeck' failed\nmake: *** [x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/stamp.rustc_typeck] Aborted (core dumped)\n```\n\n```\n~/p/r/s/rust git:master \u276f\u276f\u276f CFG_LLVM_LINKAGE_FILE=/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/rt/llvmdeps.rs LD_LIBRARY_PATH=/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/stage0/lib:$LD_LIBRARY_PATH  gdb --args x86_64-unknown-linux-gnu/stage0/bin/rustc --cfg stage0 -g -O --cfg rtopt --cfg debug -C prefer-dynamic -Z no-landing-pads --target=x86_64-unknown-linux-gnu  -W warnings -L \"x86_64-unknown-linux-gnu/rt\" -L \"/home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/llvm/Release+Asserts/lib\" -L \"\"  --out-dir x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib -C extra-filename=-4e7c5e5c /home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs\nGNU gdb (GDB) 7.8.1\n[...]\nReading symbols from x86_64-unknown-linux-gnu/stage0/bin/rustc...done.\n(gdb) r\nStarting program: /home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/stage0/bin/rustc --cfg stage0 -g -O --cfg rtopt --cfg debug -C prefer-dynamic -Z no-landing-pads --target=x86_64-unknown-linux-gnu -W warnings -L x86_64-unknown-linux-gnu/rt -L /home/ken/proj/rust/src/rust/x86_64-unknown-linux-gnu/llvm/Release+Asserts/lib -L '' --out-dir x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib -C extra-filename=-4e7c5e5c /home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs\nwarning: Could not load shared library symbols for linux-vdso.so.1.\nDo you need \"set solib-search-path\" or \"set sysroot\"?\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\n[New Thread 0x7ffff63ff700 (LWP 21477)]\n/home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs:68:1: 68:15 warning: unused attribute, #[warn(unused_attributes)] on by default\n/home/ken/proj/rust/src/rust/src/librustc_typeck/lib.rs:68 #![staged_api]\n                                                           ^~~~~~~~~~~~~~\nrustc: /home/rustbuild/src/rust-buildbot/slave/snap3-linux/build/src/llvm/lib/IR/DebugInfo.cpp:159: uint64_t llvm::DIVariable::getPieceOffset() const: Assertion `isVariablePiece()' failed.\n\nProgram received signal SIGABRT, Aborted.\n[Switching to Thread 0x7ffff63ff700 (LWP 21477)]\n0x00007ffff6f28a97 in raise () from /usr/lib/libc.so.6\n(gdb) bt\n#0  0x00007ffff6f28a97 in raise () from /usr/lib/libc.so.6\n#1  0x00007ffff6f29e6a in abort () from /usr/lib/libc.so.6\n#2  0x00007ffff6f218bd in __assert_fail_base () from /usr/lib/libc.so.6\n#3  0x00007ffff6f21972 in __assert_fail () from /usr/lib/libc.so.6\n#4  0x0000555556f3b24a in llvm::DIVariable::getPieceOffset() const ()\n#5  0x000055555721a756 in llvm::DwarfUnit::addComplexAddress(llvm::DbgVariable const&, llvm::DIE&, llvm::dwarf::Attribute, llvm::MachineLocation const&) ()\n#6  0x000055555721ac3e in llvm::DwarfUnit::addVariableAddress(llvm::DbgVariable const&, llvm::DIE&, llvm::MachineLocation) ()\n#7  0x000055555721f3d1 in llvm::DwarfUnit::constructVariableDIEImpl(llvm::DbgVariable const&, bool) ()\n#8  0x000055555721f54c in llvm::DwarfUnit::constructVariableDIE(llvm::DbgVariable&, bool) ()\n#9  0x0000555556a374fa in llvm::DwarfDebug::createScopeChildrenDIE(llvm::DwarfCompileUnit&, llvm::LexicalScope*, llvm::SmallVectorImpl<std::unique_ptr<llvm::DIE, std::default_delete<llvm::DIE> > >&, unsigned int*) ()\n#10 0x0000555556a379f7 in llvm::DwarfDebug::createAndAddScopeChildren(llvm::DwarfCompileUnit&, llvm::LexicalScope*, llvm::DIE&) ()\n#11 0x0000555556a37d7c in llvm::DwarfDebug::constructSubprogramScopeDIE(llvm::DwarfCompileUnit&, llvm::LexicalScope*) ()\n#12 0x0000555556a3bdfc in llvm::DwarfDebug::endFunction(llvm::MachineFunction const*) ()\n#13 0x0000555556a169f9 in llvm::AsmPrinter::EmitFunctionBody() ()\n#14 0x0000555556826783 in llvm::X86AsmPrinter::runOnMachineFunction(llvm::MachineFunction&) ()\n#15 0x0000555556ebee8f in llvm::FPPassManager::runOnFunction(llvm::Function&) ()\n#16 0x0000555556ebeedb in llvm::FPPassManager::runOnModule(llvm::Module&) ()\n#17 0x0000555556ec061f in llvm::legacy::PassManagerImpl::run(llvm::Module&) ()\n#18 0x000055555646174e in LLVMRustWriteOutputFile (Target=0x7fffd01b3e30, PMR=0x7fffcb0d72b0, \n    M=0x7ffff0004f90, \n    path=0x7fffdb9e9580 \"x86_64-unknown-linux-gnu/stage0/lib/rustlib/x86_64-unknown-linux-gnu/lib/rustc_typeck-4e7c5e5c.0.o\", FileType=llvm::TargetMachine::CGFT_ObjectFile)\n    at /home/rustbuild/src/rust-buildbot/slave/snap3-linux/build/src/rustllvm/PassWrapper.cpp:211\n#19 0x00005555558072f0 in back::write::write_output_file::h4a807fe5501cbdf3U6b ()\n#20 0x0000555555809478 in back::write::optimize_and_codegen::unboxed_closure.36426 ()\n#21 0x00005555558142cd in back::write::execute_work_item::had3c2de75e78498bVXc ()\n#22 0x000055555580ab01 in back::write::run_passes::h27387495ebd9f18eVFc ()\n#23 0x0000555555733834 in driver::phase_5_run_llvm_passes::h74facfaf246638e4IGa ()\n#24 0x0000555555713d6e in driver::compile_input::h2f891483b4eb79a6vba ()\n#25 0x00005555557db11e in thunk::F.Invoke$LT$A$C$$u{20}R$GT$::invoke::h5746357467572345012 ()\n#26 0x00005555557d7f0f in rt::unwind::try::try_fn::h1650409585031243765 ()\n#27 0x0000555557433879 in rust_try_inner ()\n#28 0x0000555557433866 in rust_try ()\n#29 0x00005555557d8626 in thunk::F.Invoke$LT$A$C$$u{20}R$GT$::invoke::h7797410085787637463 ()\n#30 0x000055555742d712 in sys::thread::thread_start::h6c63e7163c0f0d94Xkw ()\n#31 0x00007ffff7bc6314 in start_thread () from /usr/lib/libpthread.so.0\n#32 0x00007ffff6fdd24d in clone () from /usr/lib/libc.so.6\n(gdb) \n```\n", "closed_by": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20951/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20951/timeline", "performed_via_github_app": null, "state_reason": "completed"}