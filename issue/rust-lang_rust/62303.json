{"url": "https://api.github.com/repos/rust-lang/rust/issues/62303", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62303/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62303/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62303/events", "html_url": "https://github.com/rust-lang/rust/issues/62303", "id": 463226181, "node_id": "MDU6SXNzdWU0NjMyMjYxODE=", "number": 62303, "title": "Any trait should be unsafe", "user": {"login": "rustonaut", "id": 7632017, "node_id": "MDQ6VXNlcjc2MzIwMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/7632017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rustonaut", "html_url": "https://github.com/rustonaut", "followers_url": "https://api.github.com/users/rustonaut/followers", "following_url": "https://api.github.com/users/rustonaut/following{/other_user}", "gists_url": "https://api.github.com/users/rustonaut/gists{/gist_id}", "starred_url": "https://api.github.com/users/rustonaut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rustonaut/subscriptions", "organizations_url": "https://api.github.com/users/rustonaut/orgs", "repos_url": "https://api.github.com/users/rustonaut/repos", "events_url": "https://api.github.com/users/rustonaut/events{/privacy}", "received_events_url": "https://api.github.com/users/rustonaut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 125141240, "node_id": "MDU6TGFiZWwxMjUxNDEyNDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-dst", "name": "A-dst", "color": "f7e101", "default": false, "description": "Area: Dynamically Sized Types"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-02T13:21:10Z", "updated_at": "2019-12-22T22:38:16Z", "closed_at": "2019-12-22T22:38:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "## What is wrong?\r\n\r\nSince `type_id()` is stable rust programs rely on `Any` to be implemented correctly for rust safety relevant thinks (like downcast).\r\n\r\nGiven the coding guide lines `Any` needs to be a `unsafe`-to-implement trait as implementing it wrongly causes unsafety.\r\n\r\n## Is it a problem?\r\n\r\nLuckily no on can (currently) implement `Any` per-hand as any implementation conflicts with it's wild card implementations this means:\r\n1. All impl. of `Any` happen to be correct.\r\n2. We can change it without causing breakage, at last as far as I can tell.\r\n\r\n## Why should we change it?\r\n\r\nThe std is often used as an example for how thinks are done correctly in rust. If it is unsafe people looking at it would potentially think about why it needs to be unsafe and learn something from it. But if it isn't they might be surprised when there `Any` like trait is leads to unsafe behavior.\r\n\r\n## What if we can't change it?\r\n\r\nI think we can, as practically no one can implement any by hand. But if we can't we should at last document that it should be any in it's rust doc.\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62303/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62303/timeline", "performed_via_github_app": null, "state_reason": "completed"}