{"url": "https://api.github.com/repos/rust-lang/rust/issues/16750", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16750/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16750/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16750/events", "html_url": "https://github.com/rust-lang/rust/issues/16750", "id": 41090916, "node_id": "MDU6SXNzdWU0MTA5MDkxNg==", "number": 16750, "title": "ICE On Simple Example", "user": {"login": "Fizzixnerd", "id": 5892651, "node_id": "MDQ6VXNlcjU4OTI2NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/5892651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Fizzixnerd", "html_url": "https://github.com/Fizzixnerd", "followers_url": "https://api.github.com/users/Fizzixnerd/followers", "following_url": "https://api.github.com/users/Fizzixnerd/following{/other_user}", "gists_url": "https://api.github.com/users/Fizzixnerd/gists{/gist_id}", "starred_url": "https://api.github.com/users/Fizzixnerd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Fizzixnerd/subscriptions", "organizations_url": "https://api.github.com/users/Fizzixnerd/orgs", "repos_url": "https://api.github.com/users/Fizzixnerd/repos", "events_url": "https://api.github.com/users/Fizzixnerd/events{/privacy}", "received_events_url": "https://api.github.com/users/Fizzixnerd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-08-25T18:33:21Z", "updated_at": "2014-09-01T21:26:07Z", "closed_at": "2014-09-01T21:26:07Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following simple definition of a data structure results in an ICE.\n\nReplacing the main function with an empty one results in successful compilations (albeit with many unused-code warnings).\n\nInformation:\n\nuname --all:\n\n```\nLinux ultrawalker 3.13.0-27-generic #50-Ubuntu SMP Thu May 15 18:06:16 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n```\n\nrustc -v:\n\n```\nrustc 0.12.0-pre (5ad7afc2d 2014-08-24 11:16:02 +0000)\n```\n\nrustc error message:\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'No def'n found for syntax::ast::DefId{krate: 0u32, node: 17u32} in tcx.tcache', /home/matt/src/rust/src/librustc/middle/ty.rs:3845\n```\n\nOffending Code:\n\n```\n// A Contact object.\n\nextern crate core;\n\nuse core::fmt;\n\nstruct ContactObj {\n    name: Name,\n    phone: PhoneNumber,\n    email: EmailAddress,\n}\n\ntrait Contact {\n    fn name(&self) -> &Name;\n    fn phone(&self) -> &PhoneNumber;\n    fn email(&self) -> &EmailAddress;\n    fn short_name(&self) -> &Name;\n}\n\nstruct Name {\n    honorific: Option<String>,\n    first: String,\n    middle: Option<String>,\n    last: Option<String>,\n    post: Option<String>\n}\n\nstruct PhoneNumber {\n    country_code: Option<String>,\n    area_code: Option<String>,\n    first_half: String,\n    second_half: String\n}\n\nstruct EmailAddress {\n    username: String,\n    domain: String\n}\n\nfn main() {\n    let my_contact =\n        Contact {\n            name: Name {\n                honorific: Some(\"Mr.\"),\n                first: \"John\",\n                middle: Some(\"F.\"),\n                last: Some(\"Smith\"),\n                post: Some(\"I\")\n            },\n            phone: PhoneNumber {\n                country_code: Some(\"x\"),\n                area_code: Some(\"xxx\"),\n                first_half: \"xxx\",\n                second_half: \"xxxx\"\n            },\n            email: EmailAddress {\n                username: \"john.f.smith\",\n                domain: \"example.com\"\n            }\n        };\n\n    println!(\"{}\", my_contact);\n}\n```\n\nFurther information is available upon request.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16750/timeline", "performed_via_github_app": null, "state_reason": "completed"}