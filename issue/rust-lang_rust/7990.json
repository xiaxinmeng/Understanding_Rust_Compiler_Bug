{"url": "https://api.github.com/repos/rust-lang/rust/issues/7990", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/7990/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/7990/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/7990/events", "html_url": "https://github.com/rust-lang/rust/issues/7990", "id": 17085643, "node_id": "MDU6SXNzdWUxNzA4NTY0Mw==", "number": 7990, "title": "\"error: internal compiler error sequence_element_type called on non-sequence value\"", "user": {"login": "jeaye", "id": 1057635, "node_id": "MDQ6VXNlcjEwNTc2MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1057635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeaye", "html_url": "https://github.com/jeaye", "followers_url": "https://api.github.com/users/jeaye/followers", "following_url": "https://api.github.com/users/jeaye/following{/other_user}", "gists_url": "https://api.github.com/users/jeaye/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeaye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeaye/subscriptions", "organizations_url": "https://api.github.com/users/jeaye/orgs", "repos_url": "https://api.github.com/users/jeaye/repos", "events_url": "https://api.github.com/users/jeaye/events{/privacy}", "received_events_url": "https://api.github.com/users/jeaye/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-07-23T06:23:24Z", "updated_at": "2014-01-23T15:53:20Z", "closed_at": "2014-01-23T15:53:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "Dupe of #931 which just occurred to me on the latest master as of 07/22/13: fc058191818e4440d36e5ed4ef61bc0a9711be11\n\nI've been able to pinpoint the error to: \n\n``` rust\nstruct Foo\n{ x: i32 }\n\nimpl Index<uint, i32> for Foo\n{\n  fn index(&self, _rhs: &uint) -> i32\n  { self.x }\n}\n\nfn main()\n{\n  let mut foo = Foo { x: 0 };\n\n  foo[0] += 5; // ICE -- This wouldn't work as expected anyway ^_^\n}\n```\n\nBack trace:\n\n```\nindex.rs:12:10: 12:13 warning: variable does not need to be mutable [-W unused-mut (default)]\nindex.rs:12   let mut foo = Foo { x: 0 };\n                      ^~~\nerror: internal compiler error: sequence_element_type called on non-sequence value\nrust: task failed at 'explicit failure', /home/jeaye/projects/rust/src/libsyntax/diagnostic.rs:96\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fec19906b4b]\n/usr/local/bin/../lib/librustrt.so(+0x2c189)[0x7fec19918189]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fec19908b80]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x569)[0x7fec1cd7d9a9]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11daf2)[0x7fec1cd7daf2]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11d361)[0x7fec1cd7d361]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11daa4)[0x7fec1cd7daa4]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11d361)[0x7fec1cd7d361]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x8c7bc)[0x7fec1ccec7bc]\n/usr/local/bin/../lib/libsyntax-64629f7f0c6a9bc-0.8-pre.so(_ZN10diagnostic14__extensions__10meth_102795fatal17_e0de3d9f29108f6414_0$x2e8$x2dpreE+0x104)[0x7fec1c1e3244]\n/usr/local/bin/../lib/libsyntax-64629f7f0c6a9bc-0.8-pre.so(_ZN10diagnostic14__extensions__10meth_103303bug17_e0de3d9f29108f6414_0$x2e8$x2dpreE+0xbb)[0x7fec1c1e3c2b]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver7session14__extensions__10meth_224083bug16_e3e78dc632d928214_0$x2e8$x2dpreE+0x7e)[0x7fec1b5d3d6e]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle2ty21sequence_element_type17_79bf73842cea60ec14_0$x2e8$x2dpreE+0xa4)[0x7fec1b632f34]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4tvec9vec_types17_c995c5b5643f6cc614_0$x2e8$x2dpreE+0x16c)[0x7fec1b678fdc]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4expr23trans_lvalue_unadjusted16_2ccf0866d5adf6114_0$x2e8$x2dpreE+0x14d3)[0x7fec1b6651f3]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4expr15trans_assign_op17_e5512138f0397c8e14_0$x2e8$x2dpreE+0xc8)[0x7fec1b6708c8]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4expr28trans_rvalue_stmt_unadjusted17_e743bcf24fc3ff9214_0$x2e8$x2dpreE+0x6cb)[0x7fec1b66b0eb]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4expr10trans_into17_fd826bbaa6c577dc14_0$x2e8$x2dpreE+0x745)[0x7fec1b608fb5]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base10trans_stmt17_32578ccc54f2e73114_0$x2e8$x2dpreE+0x33f)[0x7fec1b6081df]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans11controlflow11trans_block17_10c62780397d154814_0$x2e8$x2dpreE+0x140)[0x7fec1b606b30]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base13trans_closure16_4f65ce6c1113d3514_0$x2e8$x2dpreE+0x626)[0x7fec1b6f1c56]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base8trans_fn17_3d4e70972de090f914_0$x2e8$x2dpreE+0x22d)[0x7fec1b5d740d]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base10trans_item16_e1ddaa9c2cd2a5314_0$x2e8$x2dpreE+0x8d0)[0x7fec1b5d2eb0]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base9trans_mod17_53a5af7fb0c6e25114_0$x2e8$x2dpreE+0xab)[0x7fec1b6f653b]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6middle5trans4base11trans_crate16_fc5da7c42ab142714_0$x2e8$x2dpreE+0x475)[0x7fec1b704765]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x7c182c)[0x7fec1bc7e82c]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver12compile_rest17_18952f36682045c414_0$x2e8$x2dpreE+0x282d)[0x7fec1bc7c02d]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver12compile_upto17_74ca6f6f22bc402a14_0$x2e8$x2dpreE+0x134)[0x7fec1bc7eb54]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN6driver6driver13compile_input17_212abc2da686188114_0$x2e8$x2dpreE+0xd5)[0x7fec1bc7eee5]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN12run_compiler15_609f1e2f20762914_0$x2e8$x2dpreE+0x18f4)[0x7fec1bca2a64]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x804ede)[0x7fec1bcc1ede]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x800b84)[0x7fec1bcbdb84]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(+0x7fa202)[0x7fec1bcb7202]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0xef8ff)[0x7fec1cd4f8ff]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7fec199074cb]\nrust: task failed at 'explicit failure', /home/jeaye/projects/rust/src/librustc/rustc.rs:364\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fec19906b4b]\n/usr/local/bin/../lib/librustrt.so(+0x2c189)[0x7fec19918189]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fec19908b80]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(_ZN3sys13begin_unwind_16_89e154cd091567114_0$x2e8$x2dpreE+0x569)[0x7fec1cd7d9a9]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11daf2)[0x7fec1cd7daf2]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11d361)[0x7fec1cd7d361]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11daa4)[0x7fec1cd7daa4]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x11d361)[0x7fec1cd7d361]\n/usr/local/bin/../lib/libstd-6c65cf4b443341b1-0.8-pre.so(+0x8c7bc)[0x7fec1ccec7bc]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN7monitor17_e6a2314412aceb3314_0$x2e8$x2dpreE+0x2f65)[0x7fec1bca6565]\n/usr/local/bin/../lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so(_ZN4main15_f3d16eaf7d573814_0$x2e8$x2dpreE+0x69)[0x7fec1bcc1e19]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x2b)[0x7fec199074cb]\nrust: domain main @0x15a5d70 root task failed\n```\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/7990/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/7990/timeline", "performed_via_github_app": null, "state_reason": "completed"}