{"url": "https://api.github.com/repos/rust-lang/rust/issues/76140", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/76140/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76140/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/76140/events", "html_url": "https://github.com/rust-lang/rust/issues/76140", "id": 688845073, "node_id": "MDU6SXNzdWU2ODg4NDUwNzM=", "number": 76140, "title": "confusable_idents lint diagnostic is confusing", "user": {"login": "fintelia", "id": 4943209, "node_id": "MDQ6VXNlcjQ5NDMyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4943209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fintelia", "html_url": "https://github.com/fintelia", "followers_url": "https://api.github.com/users/fintelia/followers", "following_url": "https://api.github.com/users/fintelia/following{/other_user}", "gists_url": "https://api.github.com/users/fintelia/gists{/gist_id}", "starred_url": "https://api.github.com/users/fintelia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fintelia/subscriptions", "organizations_url": "https://api.github.com/users/fintelia/orgs", "repos_url": "https://api.github.com/users/fintelia/repos", "events_url": "https://api.github.com/users/fintelia/events{/privacy}", "received_events_url": "https://api.github.com/users/fintelia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235137, "node_id": "MDU6TGFiZWwyMzUxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lint", "name": "A-lint", "color": "f7e101", "default": false, "description": "Area: Lints (warnings about flaws in source code) such as unused_mut."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596121013, "node_id": "MDU6TGFiZWwxNTk2MTIxMDEz", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-confusing", "name": "D-confusing", "color": "c9f7a3", "default": false, "description": "Confusing diagnostic error that should be reworked"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-08-31T02:00:32Z", "updated_at": "2020-08-31T03:46:43Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If you have a program containing two variables named `\u03c1` and `p` (that is the Greek letter Rho and the English letter P respectively), you'll get a warning like this:\r\n```\r\nwarning: identifier pair considered confusable between `p` and `\u03c1`\r\n   --> src/foo.rs:96:13\r\n    |\r\n96  |         let \u03c1 = ...;\r\n    |             ^\r\n    | \r\n   ::: src/lib.rs:459:24\r\n    |\r\n459 |                 .map(|(p, idx)| { ... })\r\n    |                        - this is where the previous identifier occurred\r\n    |\r\n    = note: `#[warn(confusable_idents)]` on by default\r\n```\r\n\r\nThis lint is an extremely clever way to detect possible homoglyph issues. However, I think that this message could be worded better to help the programmer if the non-ascii indentifier was actually intentional.\r\n\r\nTo start, there should be more emphasis that this warning was triggered because the program contains _both_ of the listed identifiers. As far as I know, this is the only lint that can trigger based on the names of local variables in completely non-overlapping scopes and even when they are in completely different modules. Perhaps it could read something like \r\n> warning: crate contains both `p` and `\u03c1` identifiers which might be confused\r\n\r\nAdditionally, the second code snippet annotation would be better with \"other\" rather than \"previous\" since the two usages might not be ordered with respect to each other.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/76140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/76140/timeline", "performed_via_github_app": null, "state_reason": null}