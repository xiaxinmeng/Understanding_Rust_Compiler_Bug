{"url": "https://api.github.com/repos/rust-lang/rust/issues/79557", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/79557/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/79557/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/79557/events", "html_url": "https://github.com/rust-lang/rust/issues/79557", "id": 753362777, "node_id": "MDU6SXNzdWU3NTMzNjI3Nzc=", "number": 79557, "title": "[ER] Suboptimal error message in a case of min_const_generics inference failure", "user": {"login": "leonardo-m", "id": 22328461, "node_id": "MDQ6VXNlcjIyMzI4NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/22328461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leonardo-m", "html_url": "https://github.com/leonardo-m", "followers_url": "https://api.github.com/users/leonardo-m/followers", "following_url": "https://api.github.com/users/leonardo-m/following{/other_user}", "gists_url": "https://api.github.com/users/leonardo-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/leonardo-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leonardo-m/subscriptions", "organizations_url": "https://api.github.com/users/leonardo-m/orgs", "repos_url": "https://api.github.com/users/leonardo-m/repos", "events_url": "https://api.github.com/users/leonardo-m/events{/privacy}", "received_events_url": "https://api.github.com/users/leonardo-m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 2237029335, "node_id": "MDU6TGFiZWwyMjM3MDI5MzM1", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-min_const_generics", "name": "F-min_const_generics", "color": "f9c0cc", "default": false, "description": "Minimal const generics MVP"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-11-30T10:39:52Z", "updated_at": "2020-12-30T19:40:57Z", "closed_at": "2020-12-06T10:28:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "This code:\r\n\r\n```rust\r\n#![feature(min_const_generics)]\r\nfn foo<const N: usize, const K: usize>(data: [u32; N]) -> [u32; K] {\r\n    [0; K]\r\n}\r\nfn main() {\r\n    let a = foo::<_, 2>([0, 1, 2]);\r\n}\r\n```\r\n\r\nGives (with rustc 1.50.0-nightly 349b3b324 2020-11-29):\r\n\r\n```rust\r\nerror[E0747]: type provided when a constant was expected\r\n --> ...\\test.rs:6:19\r\n  |\r\n6 |     let a = foo::<_, 2>([0, 1, 2]);\r\n  |                   ^\r\n```\r\n\r\nTwo problems:\r\n1) In the code I've used the underscore hoping rustc to infer the value of N, but for some reason it failed.\r\n2) Beside the type inference failure, the error message is not the best possible. I didn't provide a type. A better error message could say \"unable to infer the const argument N, please specify\".", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/79557/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/79557/timeline", "performed_via_github_app": null, "state_reason": "completed"}