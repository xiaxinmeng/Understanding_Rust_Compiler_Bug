{"url": "https://api.github.com/repos/rust-lang/rust/issues/37038", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37038/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37038/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37038/events", "html_url": "https://github.com/rust-lang/rust/issues/37038", "id": 181805577, "node_id": "MDU6SXNzdWUxODE4MDU1Nzc=", "number": 37038, "title": "linking error: bad reloc address 0x0 in section `.rdata'", "user": {"login": "c0ldhell", "id": 22556294, "node_id": "MDQ6VXNlcjIyNTU2Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/22556294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c0ldhell", "html_url": "https://github.com/c0ldhell", "followers_url": "https://api.github.com/users/c0ldhell/followers", "following_url": "https://api.github.com/users/c0ldhell/following{/other_user}", "gists_url": "https://api.github.com/users/c0ldhell/gists{/gist_id}", "starred_url": "https://api.github.com/users/c0ldhell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c0ldhell/subscriptions", "organizations_url": "https://api.github.com/users/c0ldhell/orgs", "repos_url": "https://api.github.com/users/c0ldhell/repos", "events_url": "https://api.github.com/users/c0ldhell/events{/privacy}", "received_events_url": "https://api.github.com/users/c0ldhell/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-08T05:19:56Z", "updated_at": "2016-10-08T06:33:56Z", "closed_at": "2016-10-08T06:33:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi. \n\n```\nrustc 1.14.0-nightly (3210fd5c2 2016-10-05)\nbinary: rustc\ncommit-hash: 3210fd5c20ffc6da420eb00e60bdc8704577fd3b\ncommit-date: 2016-10-05\nhost: x86_64-unknown-linux-gnu\nrelease: 1.14.0-nightly\n```\n\n```\n$ i686-w64-mingw32-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=i686-w64-mingw32-gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-w64-mingw32/4.8/lto-wrapper\nTarget: i686-w64-mingw32\nConfigured with: ../../src/configure --build=x86_64-linux-gnu --prefix=/usr --includedir='/usr/include' --mandir='/usr/share/man' --infodir='/usr/share/info' --sysconfdir=/etc --localstatedir=/var --libexecdir='/usr/lib/gcc-mingw-w64' --disable-maintainer-mode --disable-dependency-tracking --prefix=/usr --enable-shared --enable-static --disable-multilib --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --libdir=/usr/lib --enable-libstdcxx-time=yes --with-tune=generic --enable-version-specific-runtime-libs --enable-threads=posix --enable-fully-dynamic-string --enable-sjlj-exceptions --enable-libgomp --enable-languages=c,c++,fortran,objc,obj-c++ --enable-lto --with-plugin-ld --target=i686-w64-mingw32 --with-gxx-include-dir=/usr/include/c++/4.8 --with-as=/usr/bin/i686-w64-mingw32-as --with-ld=/usr/bin/i686-w64-mingw32-ld\nThread model: posix\ngcc version 4.8.2 (GCC) \n```\n\nI install `rustup target add i686-pc-windows-gnu` toolchain and edit cargo config\n\n```\n$ cat ~/.cargo/config\n[target.x86_64-pc-windows-gnu]\nlinker = \"/usr/bin/x86_64-w64-mingw32-gcc\"\n\n[target.i686-pc-windows-gnu]\nlinker = \"/usr/bin/i686-w64-mingw32-gcc\"\n```\n\nThen build for x86_64\n\n```\n$ cargo build --release --target \"x86_64-pc-windows-gnu\"\n   Compiling foo v0.1.0 (file:///home/user/Projects/rust/foo)\n    Finished release [optimized] target(s) in 0.62 secs\n```\n\nThat's ok, no questions. \n\nBut if I compile to i686\n\n```\n$ LANGUAGE=en_US.UTF-8 cargo build --release --target \"i686-pc-windows-gnu\"\n   Compiling foo v0.1.0 (file:///home/user/Projects/rust/foo)\nerror: linking with `/usr/bin/i686-w64-mingw32-gcc` failed: exit code: 1\n  |\n  = note: \"/usr/bin/i686-w64-mingw32-gcc\" \"-Wl,--enable-long-section-names\" \"-fno-use-linker-plugin\" \"-Wl,--nxcompat\" \"-nostdlib\" \"-Wl,--large-address-aware\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/crt2.o\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/rsbegin.o\" \"-L\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib\" \"/home/user/Projects/rust/foo/target/i686-pc-windows-gnu/release/foo.0.o\" \"-o\" \"/home/user/Projects/rust/foo/target/i686-pc-windows-gnu/release/foo.exe\" \"-Wl,--gc-sections\" \"-nodefaultlibs\" \"-L\" \"/home/user/Projects/rust/foo/target/i686-pc-windows-gnu/release/deps\" \"-L\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib\" \"-Wl,-Bstatic\" \"-Wl,-Bdynamic\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libstd-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libpanic_unwind-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libunwind-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/librand-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libcollections-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/librustc_unicode-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/liblibc-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/liballoc-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/liballoc_system-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libcore-6eb85298.rlib\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libcompiler_builtins-6eb85298.rlib\" \"-l\" \"ws2_32\" \"-l\" \"userenv\" \"-l\" \"shell32\" \"-l\" \"advapi32\" \"-l\" \"gcc_eh\" \"-l\" \"gcc_eh\" \"-lmingwex\" \"-lmingw32\" \"-lgcc\" \"-lmsvcrt\" \"-luser32\" \"-lkernel32\" \"/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/rsend.o\"\n  = note: /home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libpanic_unwind-6eb85298.rlib(panic_unwind-6eb85298.0.o):(.text+0x2e5): undefined reference to `_Unwind_Resume'\n/home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libpanic_unwind-6eb85298.rlib(panic_unwind-6eb85298.0.o):(.text+0x609): undefined reference to `_Unwind_RaiseException'\n/usr/bin/i686-w64-mingw32-ld: /home/user/.multirust/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/i686-pc-windows-gnu/lib/libpanic_unwind-6eb85298.rlib(panic_unwind-6eb85298.0.o): bad reloc address 0x0 in section `.rdata'\ncollect2: error: ld returned 1 exit status\n\n\nerror: aborting due to previous error\n\nerror: Could not compile `foo`.\n\nTo learn more, run the command again with --verbose.\n\n```\n", "closed_by": {"login": "c0ldhell", "id": 22556294, "node_id": "MDQ6VXNlcjIyNTU2Mjk0", "avatar_url": "https://avatars.githubusercontent.com/u/22556294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/c0ldhell", "html_url": "https://github.com/c0ldhell", "followers_url": "https://api.github.com/users/c0ldhell/followers", "following_url": "https://api.github.com/users/c0ldhell/following{/other_user}", "gists_url": "https://api.github.com/users/c0ldhell/gists{/gist_id}", "starred_url": "https://api.github.com/users/c0ldhell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/c0ldhell/subscriptions", "organizations_url": "https://api.github.com/users/c0ldhell/orgs", "repos_url": "https://api.github.com/users/c0ldhell/repos", "events_url": "https://api.github.com/users/c0ldhell/events{/privacy}", "received_events_url": "https://api.github.com/users/c0ldhell/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37038/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37038/timeline", "performed_via_github_app": null, "state_reason": "completed"}