{"url": "https://api.github.com/repos/rust-lang/rust/issues/53940", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/53940/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/53940/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/53940/events", "html_url": "https://github.com/rust-lang/rust/issues/53940", "id": 356690148, "node_id": "MDU6SXNzdWUzNTY2OTAxNDg=", "number": 53940, "title": "On macOS rust-lld fails for aarch64-unknown-none target", "user": {"login": "ncihnegn", "id": 12021721, "node_id": "MDQ6VXNlcjEyMDIxNzIx", "avatar_url": "https://avatars.githubusercontent.com/u/12021721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ncihnegn", "html_url": "https://github.com/ncihnegn", "followers_url": "https://api.github.com/users/ncihnegn/followers", "following_url": "https://api.github.com/users/ncihnegn/following{/other_user}", "gists_url": "https://api.github.com/users/ncihnegn/gists{/gist_id}", "starred_url": "https://api.github.com/users/ncihnegn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ncihnegn/subscriptions", "organizations_url": "https://api.github.com/users/ncihnegn/orgs", "repos_url": "https://api.github.com/users/ncihnegn/repos", "events_url": "https://api.github.com/users/ncihnegn/events{/privacy}", "received_events_url": "https://api.github.com/users/ncihnegn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-09-04T07:45:46Z", "updated_at": "2018-09-08T08:18:59Z", "closed_at": "2018-09-08T08:18:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "To reproduce:\r\n\r\n> git clone https://github.com/andre-richter/rust-raspi3-tutorial\r\n> cd rust-raspi3-tutorial/01_bareminimum\r\n> make\r\n\r\n>  Compiling kernel8 v0.1.0 (file:///Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum)\r\n     Running `rustc --crate-name kernel8 src/main.rs --crate-type bin --emit=dep-info,link -C opt-level=3 -C metadata=856c7337adaf6150 -C extra-filename=-856c7337adaf6150 --out-dir /Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps --target aarch64-unknown-none -L dependency=/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps -L dependency=/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/release/deps --extern panic_abort=/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps/libpanic_abort-d8d8752c0588d4de.rlib -C link-arg=-Tlink.ld -C target-feature=-fp-armv8 -C target-cpu=cortex-a53 --sysroot /Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/../xbuild_sysroot`\r\nerror: linking with `rust-lld` failed: signal: 6\r\n  |\r\n  = note: \"rust-lld\" \"-flavor\" \"gnu\" \"-L\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/../xbuild_sysroot/lib/rustlib/aarch64-unknown-none/lib\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps/kernel8-856c7337adaf6150.kernel8.bsr98c9g-cgu.0.rcgu.o\" \"-o\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps/kernel8-856c7337adaf6150\" \"--gc-sections\" \"-no-pie\" \"-O1\" \"-L\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps\" \"-L\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/release/deps\" \"-L\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/../xbuild_sysroot/lib/rustlib/aarch64-unknown-none/lib\" \"--start-group\" \"-Bstatic\" \"/Users//Projects/rust/rust-raspi3-tutorial/01_bareminimum/target/aarch64-unknown-none/release/deps/libpanic_abort-d8d8752c0588d4de.rlib\" \"/Users//Projects/rust/rust-raspi3-tutorial/xbuild_sysroot/lib/rustlib/aarch64-unknown-none/lib/libcore-8dba9ab814d18195.rlib\" \"--end-group\" \"/Users//Projects/rust/rust-raspi3-tutorial/xbuild_sysroot/lib/rustlib/aarch64-unknown-none/lib/libcompiler_builtins-1f5a0835bd5086bd.rlib\" \"-Tlink.ld\" \"-Bdynamic\"\r\n  = note: rust-lld(15355,0x7fffa2cd2380) malloc: *** mach_vm_map(size=18446462616956137472) failed (error code=3)\r\n          *** error: can't allocate region\r\n          *** set a breakpoint in malloc_error_break to debug\r\n          libc++abi.dylib: terminating with uncaught exception of type std::bad_alloc: std::bad_alloc\r\n\r\nBacktrace:\r\n> (lldb) bt\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\r\n  * frame #0: 0x00007fff6a30eb66 libsystem_kernel.dylib`__pthread_kill + 10\r\n    frame #1: 0x00007fff6a4d9080 libsystem_pthread.dylib`pthread_kill + 333\r\n    frame #2: 0x00007fff6a26a1ae libsystem_c.dylib`abort + 127\r\n    frame #3: 0x00007fff68164f8f libc++abi.dylib`abort_message + 245\r\n    frame #4: 0x00007fff68165113 libc++abi.dylib`default_terminate_handler() + 241\r\n    frame #5: 0x00007fff695a6eab libobjc.A.dylib`_objc_terminate() + 105\r\n    frame #6: 0x00007fff681807c9 libc++abi.dylib`std::__terminate(void (*)()) + 8\r\n    frame #7: 0x00007fff6818026f libc++abi.dylib`__cxa_throw + 121\r\n    frame #8: 0x0000000100517028 libLLVM.dylib`llvm::report_bad_alloc_error(char const*, bool) + 108\r\n    frame #9: 0x0000000100529320 libLLVM.dylib`llvm::SmallVectorBase::grow_pod(void*, unsigned long, unsigned long) + 124\r\n    frame #10: 0x000000010027b8e3 rust-lld`_GLOBAL__sub_I_TargetOptionsCommandFlags.cpp + 4915\r\n    frame #11: 0x0000000100440ac6 dyld`ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) + 420\r\n    frame #12: 0x0000000100440cf6 dyld`ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 40\r\n    frame #13: 0x000000010043c218 dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, char const*, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) + 330\r\n    frame #14: 0x000000010043b34e dyld`ImageLoader::processInitializers(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&, ImageLoader::UninitedUpwards&) + 134\r\n    frame #15: 0x000000010043b3e2 dyld`ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 74\r\n    frame #16: 0x000000010042c567 dyld`dyld::initializeMainExecutable() + 196\r\n    frame #17: 0x0000000100431239 dyld`dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**, unsigned long*) + 7242\r\n    frame #18: 0x000000010042b3d4 dyld`dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*) + 453\r\n    frame #19: 0x000000010042b1d2 dyld`_dyld_start + 54\r\n(lldb)", "closed_by": {"login": "ncihnegn", "id": 12021721, "node_id": "MDQ6VXNlcjEyMDIxNzIx", "avatar_url": "https://avatars.githubusercontent.com/u/12021721?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ncihnegn", "html_url": "https://github.com/ncihnegn", "followers_url": "https://api.github.com/users/ncihnegn/followers", "following_url": "https://api.github.com/users/ncihnegn/following{/other_user}", "gists_url": "https://api.github.com/users/ncihnegn/gists{/gist_id}", "starred_url": "https://api.github.com/users/ncihnegn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ncihnegn/subscriptions", "organizations_url": "https://api.github.com/users/ncihnegn/orgs", "repos_url": "https://api.github.com/users/ncihnegn/repos", "events_url": "https://api.github.com/users/ncihnegn/events{/privacy}", "received_events_url": "https://api.github.com/users/ncihnegn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/53940/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/53940/timeline", "performed_via_github_app": null, "state_reason": "completed"}