{"url": "https://api.github.com/repos/rust-lang/rust/issues/38638", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38638/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38638/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38638/events", "html_url": "https://github.com/rust-lang/rust/issues/38638", "id": 197737483, "node_id": "MDU6SXNzdWUxOTc3Mzc0ODM=", "number": 38638, "title": "rustdoc: rustc panicked at 'assertion failed: !self.is_proc_macro(item_id)'", "user": {"login": "fluxxu", "id": 4956828, "node_id": "MDQ6VXNlcjQ5NTY4Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4956828?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fluxxu", "html_url": "https://github.com/fluxxu", "followers_url": "https://api.github.com/users/fluxxu/followers", "following_url": "https://api.github.com/users/fluxxu/following{/other_user}", "gists_url": "https://api.github.com/users/fluxxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/fluxxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fluxxu/subscriptions", "organizations_url": "https://api.github.com/users/fluxxu/orgs", "repos_url": "https://api.github.com/users/fluxxu/repos", "events_url": "https://api.github.com/users/fluxxu/events{/privacy}", "received_events_url": "https://api.github.com/users/fluxxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2016-12-27T17:59:27Z", "updated_at": "2017-01-13T05:40:54Z", "closed_at": "2017-01-13T05:40:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "rustdoc panic while generating documentation\r\n\r\nReproduce:\r\n- ```diesel_codegen = { version = \"0.9.0\" }```\r\n- ```#![feature(proc_macro)]```\r\n- ```#[macro_use] extern crate diesel_codegen;```\r\n- ```pub use <whatever>;```\r\n- ```cargo doc```\r\n\r\nI made a minimal example here:\r\nhttps://github.com/fluxxu/rustdoc-issue\r\n\r\nI expected to see this happen: documentation generated\r\n\r\nInstead, this happened: \r\n```\r\nthread 'rustc' panicked at 'assertion failed: !self.is_proc_macro(item_id)', C:\\bot\\slave\\nightly-dist-rustc-win-msvc-64\\build\\src\\librustc_metadata\\decoder.rs:523\r\n```\r\n\r\n## Backtrace\r\n```\r\nthread 'rustc' panicked at 'assertion failed: !self.is_proc_macro(item_id)', C:\\bot\\slave\\nightly-dist-rustc-win-msvc-64\\build\\src\\librustc_metadata\\decoder.rs:523\r\nstack backtrace:\r\n   0:     0x7fffc324edaa - std::panicking::Location::line::h3f91a23a140528f1\r\n   1:     0x7fffc324e234 - std::panicking::Location::line::h3f91a23a140528f1\r\n   2:     0x7fffc3251c8d - std::panicking::rust_panic_with_hook::h7e1d2cc288a6d6e6\r\n   3:     0x7fffbce05229 - <unknown>\r\n   4:     0x7fffbce743f0 - rustc_metadata::decoder::<impl rustc_metadata::cstore::CrateMetadata>::entry::hb1a80ffab1c26775\r\n   5:     0x7fffbce76ba7 - rustc_metadata::decoder::<impl rustc_metadata::cstore::CrateMetadata>::get_visibility::hed8ab8e78c5d211c\r\n   6:     0x7fffbce7717c - rustc_metadata::decoder::<impl rustc_metadata::cstore::CrateMetadata>::get_impl_trait::h82138501e2416767\r\n   7:     0x7fffbce80369 - rustc_metadata::cstore_impl::<impl rustc::middle::cstore::CrateStore<'tcx> for rustc_metadata::cstore::CStore>::impl_trait_ref::h8de74aa911835a28\r\n   8:     0x7fffb702f3f1 - rustc::ty::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::impl_trait_ref::hfb1edfda95a13315\r\n   9:     0x7fffd2e866f3 - rustdoc::clean::inline::build_impl::h53c2f0f1eb945e58\r\n  10:     0x7fffd2e86023 - rustdoc::clean::inline::build_impls::h13bbf40f3f04e450\r\n  11:     0x7fffd2e813f4 - rustdoc::clean::inline::try_inline::h58b3a816a2eb28de\r\n  12:     0x7fffd2e80adf - rustdoc::clean::inline::try_inline::h58b3a816a2eb28de\r\n  13:     0x7fffd2eae888 - <rustdoc::doctree::Import as rustdoc::clean::Clean<collections::vec::Vec<rustdoc::clean::Item>>>::clean::h8bae7a1765e79682\r\n  14:     0x7fffd2e8e634 - <rustdoc::doctree::Module as rustdoc::clean::Clean<rustdoc::clean::Item>>::clean::h218d3de5ed973d32\r\n  15:     0x7fffd2e7baaa - <unknown>\r\n  16:     0x7fffd2e8ee7f - <rustdoc::doctree::Module as rustdoc::clean::Clean<rustdoc::clean::Item>>::clean::h218d3de5ed973d32\r\n  17:     0x7fffd2e7baaa - <unknown>\r\n  18:     0x7fffd2e8ee7f - <rustdoc::doctree::Module as rustdoc::clean::Clean<rustdoc::clean::Item>>::clean::h218d3de5ed973d32\r\n  19:     0x7fffd2e8b209 - <rustdoc::visit_ast::RustdocVisitor<'a, 'tcx> as rustdoc::clean::Clean<rustdoc::clean::Crate>>::clean::h81959a1f562bc98e\r\n  20:     0x7fffd2eb8d97 - rustdoc::core::run_core::h4b58c98803e5877c\r\n  21:     0x7fffd2ddb27f - <unknown>\r\n  22:     0x7fffd2e31d48 - <unknown>\r\n  23:     0x7fffd2eb61ec - rustdoc::core::run_core::h4b58c98803e5877c\r\n  24:     0x7fffd2dfec4d - <unknown>\r\n  25:     0x7fffc3254611 - _rust_maybe_catch_panic\r\n  26:     0x7fffd2e2301b - <unknown>\r\n  27:     0x7fffc324c2fe - std::sys::imp::thread::Thread::new::hb29119a6ae6621b3\r\n  28:     0x7fffe97e8363 - BaseThreadInitThunk\r\n\r\nerror: Could not document `s2`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustdoc --crate-name s2 src\\lib.rs -o C:\\Users\\fluxx\\Projects\\s2\\target\\doc -L dependency=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps --extern rand=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\librand-26cfd8d095643d5f.rlib --extern error_chain=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\liberror_chain-c70cadd7b5aa5bb1.rlib --extern lazy_static=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\liblazy_static-558fd24daf596ca5.rlib --extern crypto=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libcrypto-84c1bd1acc23cedb.rlib --extern uuid=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libuuid-3b9ce1f07977469a.rlib --extern router=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\librouter-1ec5c88e036a1c55.rlib --extern staticfile=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libstaticfile-71a9fe52eddc1691.rlib --extern serde_json=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libserde_json-99385da38ca59b91.rlib --extern base64=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libbase64-703ed5cb661c42b8.rlib --extern serde_derive=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\serde_derive-f9682affc7dd49fb.dll --extern diesel_codegen=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\diesel_codegen-b5b438de9650d88f.dll --extern serde=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libserde-f5bb5456e04e9a13.rlib --extern chrono=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libchrono-df04c67c2203866e.rlib --extern diesel=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libdiesel-bd497f9a6d56d1ca.rlib --extern iron=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libiron-43102b3f2688c72f.rlib --extern dotenv=C:\\Users\\fluxx\\Projects\\s2\\target\\debug\\deps\\libdotenv-c0d2b5ada142d175.rlib` (exit code: 101)\r\n```\r\n\r\n## Meta\r\n```\r\nrustc 1.15.0-nightly (71c06a56a 2016-12-18)\r\nbinary: rustc\r\ncommit-hash: 71c06a56a120a0d5e3b224105ee3e6754f83e5fa\r\ncommit-date: 2016-12-18\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.15.0-nightly\r\nLLVM version: 3.9\r\n```", "closed_by": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38638/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38638/timeline", "performed_via_github_app": null, "state_reason": "completed"}