{"url": "https://api.github.com/repos/rust-lang/rust/issues/17554", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17554/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17554/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17554/events", "html_url": "https://github.com/rust-lang/rust/issues/17554", "id": 43998447, "node_id": "MDU6SXNzdWU0Mzk5ODQ0Nw==", "number": 17554, "title": "rustdoc: Document how and when rustdoc wraps a code block in a main function.", "user": {"login": "DanielKeep", "id": 77238, "node_id": "MDQ6VXNlcjc3MjM4", "avatar_url": "https://avatars.githubusercontent.com/u/77238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DanielKeep", "html_url": "https://github.com/DanielKeep", "followers_url": "https://api.github.com/users/DanielKeep/followers", "following_url": "https://api.github.com/users/DanielKeep/following{/other_user}", "gists_url": "https://api.github.com/users/DanielKeep/gists{/gist_id}", "starred_url": "https://api.github.com/users/DanielKeep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DanielKeep/subscriptions", "organizations_url": "https://api.github.com/users/DanielKeep/orgs", "repos_url": "https://api.github.com/users/DanielKeep/repos", "events_url": "https://api.github.com/users/DanielKeep/events{/privacy}", "received_events_url": "https://api.github.com/users/DanielKeep/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2014-09-26T04:03:55Z", "updated_at": "2015-01-16T06:03:08Z", "closed_at": "2015-01-16T06:03:08Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, there is no indication in the documentation for rustdoc that it wraps code blocks in `fn main() { ... }`, nor how to stop it from doing so.\n\nTo give an example of how this can be very confusing, if you try to test the following code block, you get an error stating \"unresolved import `f1`.  There is no `f1` in `???`\" which is (seemingly) not true.\n\n```\npub fn f1() {}\n\nmod a {\n    use f1;\n    fn f2() { f1() }\n}\n```\n\nPreferably, the docs should note that, by default, all code blocks are wrapped in a main function, that this can be avoided by ensuring the string \"fn main\" appears (or whatever the actual test is; I _think_ it just looks for a string in the input), and that `#` can be used to hide this from the rendered output (which is already in the docs in a different context).\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17554/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17554/timeline", "performed_via_github_app": null, "state_reason": "completed"}