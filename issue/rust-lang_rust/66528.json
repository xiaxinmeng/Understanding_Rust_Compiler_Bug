{"url": "https://api.github.com/repos/rust-lang/rust/issues/66528", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66528/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66528/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66528/events", "html_url": "https://github.com/rust-lang/rust/issues/66528", "id": 524640304, "node_id": "MDU6SXNzdWU1MjQ2NDAzMDQ=", "number": 66528, "title": "cargo doc: add option to document specific private items", "user": {"login": "Monnoroch", "id": 1500400, "node_id": "MDQ6VXNlcjE1MDA0MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1500400?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Monnoroch", "html_url": "https://github.com/Monnoroch", "followers_url": "https://api.github.com/users/Monnoroch/followers", "following_url": "https://api.github.com/users/Monnoroch/following{/other_user}", "gists_url": "https://api.github.com/users/Monnoroch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Monnoroch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Monnoroch/subscriptions", "organizations_url": "https://api.github.com/users/Monnoroch/orgs", "repos_url": "https://api.github.com/users/Monnoroch/repos", "events_url": "https://api.github.com/users/Monnoroch/events{/privacy}", "received_events_url": "https://api.github.com/users/Monnoroch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-18T18:23:04Z", "updated_at": "2019-11-19T11:42:41Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "## Problem\r\n\r\nI often find myself wanting to expose documentation for a private API that shouldn't be called directly, but is an important enough implementation detail for the advanced users of my library to benefit from reading it.\r\n\r\n## Proposal\r\n\r\nI want to propose a `#[doc(visible)]` attribute that is analogous to the `#[doc(hidden)]` one. The new attribute would exclude the labeled item from being removed by the [`strip-private`](https://doc.rust-lang.org/rustdoc/passes.html#strip-private) rustdoc pass.\r\n\r\n## Alternative solutions considered:\r\n\r\n### Making the API public.\r\n\r\nSolves the problem, but also creates a new one. Especially bad if the API in question is by itself unsafe and relies heavily on implementation of other parts of the library to guarantee safety. I really don't want users to call such an API.\r\n\r\n### Fake item\r\n\r\nI could create a fake public struct / method and add my \"hidden\" documentation to it. This however does not really solve the problem, as the documentation has links to private items that wouldn't work without making the items public. In addition, it's just a nightmare to debug and support such documentation.\r\n\r\n### Module-level documentation\r\n\r\nSame problem as above, links still will not work.\r\n\r\n### `cargo doc --document-private-items`\r\n\r\nSee https://github.com/rust-lang/cargo/issues/1520.\r\n\r\nAlso solves the problem, but creates a new one: it adds a ton of clutter making all the documentation much less readable and useful.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66528/reactions", "total_count": 5, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66528/timeline", "performed_via_github_app": null, "state_reason": null}