{"url": "https://api.github.com/repos/rust-lang/rust/issues/24520", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24520/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24520/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24520/events", "html_url": "https://github.com/rust-lang/rust/issues/24520", "id": 69092561, "node_id": "MDU6SXNzdWU2OTA5MjU2MQ==", "number": 24520, "title": "ICE: FulfillmentError(Obligation, ... Unimplemented). Drop related?", "user": {"login": "frankmcsherry", "id": 5741500, "node_id": "MDQ6VXNlcjU3NDE1MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5741500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frankmcsherry", "html_url": "https://github.com/frankmcsherry", "followers_url": "https://api.github.com/users/frankmcsherry/followers", "following_url": "https://api.github.com/users/frankmcsherry/following{/other_user}", "gists_url": "https://api.github.com/users/frankmcsherry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frankmcsherry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frankmcsherry/subscriptions", "organizations_url": "https://api.github.com/users/frankmcsherry/orgs", "repos_url": "https://api.github.com/users/frankmcsherry/repos", "events_url": "https://api.github.com/users/frankmcsherry/events{/privacy}", "received_events_url": "https://api.github.com/users/frankmcsherry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-04-17T08:16:27Z", "updated_at": "2016-12-01T17:51:07Z", "closed_at": "2016-12-01T17:51:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Sorry about the incoming wall of text. The backtrace was over 100 frames long.\n\n```\nsrc/main.rs:1:1: 1:1 error: internal compiler error: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(progress::graph::Graph)),depth=0),Unimplemented)]` fulfilling during trans\nsrc/main.rs:1 #![feature(test)]\n              ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:131\n\nstack backtrace:\n   1:        0x1060014e7 - sys::backtrace::write::h068e87ba7a3fd301gQC\n   2:        0x10602f6e3 - panicking::on_panic::h9e41b927365e32bamRI\n   3:        0x105f523de - rt::unwind::begin_unwind_inner::h3e325126f8078272XyI\n   4:        0x105714f9e - rt::unwind::begin_unwind::h3211255641542373370\n   5:        0x105714f4b - diagnostic::SpanHandler::span_bug::hff4b0b64c47f0dfdImB\n   6:        0x102e7821c - session::Session::span_bug::hc46039cb76696aca3dr\n   7:        0x102a12fbd - trans::monomorphize::normalize_associated_type::h12231547644293220421\n   8:        0x102b903fe - trans::adt::represent_type_uncached::h2b040bfeed2f1048cqH\n   9:        0x102a39161 - trans::adt::represent_type::h9e0893753263a362wgH\n  10:        0x102a88815 - trans::type_of::in_memory_type_of::hdb9ea0b5b50d1503dRo\n  11:        0x102a88be6 - trans::type_of::in_memory_type_of::hdb9ea0b5b50d1503dRo\n  12:        0x102aefbf2 - trans::type_of::type_of_rust_fn::h7aaf51c82b01175bSEo\n  13:        0x102af8be4 - trans::base::decl_rust_fn::ha107786e3eafcdbfAFr\n  14:        0x102a1edbc - trans::monomorphize::monomorphic_fn::closure.40962\n  15:        0x102a1128c - trans::monomorphize::monomorphic_fn::h3e749e73218f4787Ytd\n  16:        0x102a3c13d - trans::glue::trans_struct_drop::h7c0455ac053aaa21dPe\n  17:        0x102a38af2 - trans::glue::trans_struct_drop_flag::hae07232667dbcdd6jLe\n  18:        0x102a30a44 - trans::glue::get_drop_glue::h0a87d55576ed29388De\n  19:        0x102a2fc04 - trans::glue::drop_ty::hcdfd60e4171c3591CAe\n  20:        0x102b9b6a9 - trans::cleanup::DropValue<'tcx>.Cleanup<'tcx>::trans::hed5557b0a4f24babfnL\n  21:        0x102b9a973 - trans::cleanup::FunctionContext<'blk, 'tcx>.CleanupHelperMethods<'blk, 'tcx>::trans_cleanups_to_exit_scope::h5da55477fd4a9ca0JXK\n  22:        0x102b9cf70 - trans::cleanup::FunctionContext<'blk, 'tcx>.CleanupHelperMethods<'blk, 'tcx>::get_or_create_landing_pad::h0f2581b371e44b34laL\n  23:        0x102afc441 - trans::cleanup::FunctionContext<'blk, 'tcx>.CleanupMethods<'blk, 'tcx>::get_landing_pad::h9e926543e6339004HMK\n  24:        0x102a44cd2 - trans::base::invoke::h342d1e09138d3c20dws\n  25:        0x102a6c088 - trans::callee::trans_call_inner::h11309187956010816983\n  26:        0x102a75fd3 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  27:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  28:        0x102b48018 - trans::_match::mk_binding_alloca::h1331137928913725611\n  29:        0x102a264be - trans::base::init_local::h4d0c44251f5616e0LMs\n  30:        0x102a28082 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  31:        0x102a7684d - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  32:        0x102a74d70 - trans::expr::trans_unadjusted::hcd769ff96a7057e9SXh\n  33:        0x102a28db5 - trans::expr::trans::hb0430202c61993f1Alh\n  34:        0x102a26590 - trans::base::init_local::h4d0c44251f5616e0LMs\n  35:        0x102a28082 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  36:        0x102a7684d - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  37:        0x102a74d70 - trans::expr::trans_unadjusted::hcd769ff96a7057e9SXh\n  38:        0x102a28db5 - trans::expr::trans::hb0430202c61993f1Alh\n  39:        0x102a26590 - trans::base::init_local::h4d0c44251f5616e0LMs\n  40:        0x102a28082 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  41:        0x102b086f5 - trans::base::trans_closure::h0cf6b3d7454a8b60Ott\n  42:        0x102a0f953 - trans::base::trans_fn::h433c7021f2906971xEt\n  43:        0x102a11262 - trans::monomorphize::monomorphic_fn::h3e749e73218f4787Ytd\n  44:        0x102a568c1 - trans::callee::trans_fn_ref_with_substs::h80310b0a5f68b440Ybg\n  45:        0x102a54c97 - trans::callee::trans_fn_ref::hb55f5137d1250e1c1Zf\n  46:        0x102a52910 - trans::callee::trans::h579a553875033cd7iPf\n  47:        0x102a68fdb - trans::callee::trans_call_inner::h14040639794469394585\n  48:        0x102a77410 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  49:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  50:        0x102a283e0 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  51:        0x102b086f5 - trans::base::trans_closure::h0cf6b3d7454a8b60Ott\n  52:        0x102aab103 - trans::closure::trans_closure_expr::h7d93937ee65119b6qxx\n  53:        0x102a775e8 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  54:        0x102a74d70 - trans::expr::trans_unadjusted::hcd769ff96a7057e9SXh\n  55:        0x102a28db5 - trans::expr::trans::hb0430202c61993f1Alh\n  56:        0x102a6305f - trans::callee::trans_args::h8911f65b82011b268Rg\n  57:        0x102a6bf25 - trans::callee::trans_call_inner::h11309187956010816983\n  58:        0x102a75fd3 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  59:        0x102a74d70 - trans::expr::trans_unadjusted::hcd769ff96a7057e9SXh\n  60:        0x102a28db5 - trans::expr::trans::hb0430202c61993f1Alh\n  61:        0x102a6305f - trans::callee::trans_args::h8911f65b82011b268Rg\n  62:        0x102a6bf25 - trans::callee::trans_call_inner::h11309187956010816983\n  63:        0x102a75fd3 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  64:        0x102a74d70 - trans::expr::trans_unadjusted::hcd769ff96a7057e9SXh\n  65:        0x102a28db5 - trans::expr::trans::hb0430202c61993f1Alh\n  66:        0x102a6305f - trans::callee::trans_args::h8911f65b82011b268Rg\n  67:        0x102a6bf25 - trans::callee::trans_call_inner::h11309187956010816983\n  68:        0x102a75fd3 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  69:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  70:        0x102a261d2 - trans::controlflow::trans_stmt_semi::h6bfbf1021d5dc568K5d\n  71:        0x102a28057 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  72:        0x102a7684d - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  73:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  74:        0x102b2c230 - trans::_match::trans_match_inner::h429c20c80c5d495diUw\n  75:        0x102a767e0 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  76:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  77:        0x102a283e0 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  78:        0x102a7a78c - trans::expr::trans_rvalue_stmt_unadjusted::hb626d0fb5e7ed8a1Ani\n  79:        0x102a273d7 - trans::expr::trans_into::h708dad454f03ea40ffh\n  80:        0x102b2c230 - trans::_match::trans_match_inner::h429c20c80c5d495diUw\n  81:        0x102a767e0 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  82:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  83:        0x102b48018 - trans::_match::mk_binding_alloca::h1331137928913725611\n  84:        0x102a264be - trans::base::init_local::h4d0c44251f5616e0LMs\n  85:        0x102a28082 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  86:        0x102a7684d - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  87:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  88:        0x102a283e0 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  89:        0x102b086f5 - trans::base::trans_closure::h0cf6b3d7454a8b60Ott\n  90:        0x102a0f953 - trans::base::trans_fn::h433c7021f2906971xEt\n  91:        0x102a11262 - trans::monomorphize::monomorphic_fn::h3e749e73218f4787Ytd\n  92:        0x102a568c1 - trans::callee::trans_fn_ref_with_substs::h80310b0a5f68b440Ybg\n  93:        0x102a54c97 - trans::callee::trans_fn_ref::hb55f5137d1250e1c1Zf\n  94:        0x102a52910 - trans::callee::trans::h579a553875033cd7iPf\n  95:        0x102a68fdb - trans::callee::trans_call_inner::h14040639794469394585\n  96:        0x102a77410 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n  97:        0x102a2725c - trans::expr::trans_into::h708dad454f03ea40ffh\n  98:        0x102a261d2 - trans::controlflow::trans_stmt_semi::h6bfbf1021d5dc568K5d\n  99:        0x102a28057 - trans::controlflow::trans_block::h2f4843422ff4f190G6d\n  100:        0x102a77855 - trans::expr::trans_rvalue_dps_unadjusted::h95d4d9eada139b8dlti\n ... <frames omitted>\n\nCould not compile `timely`.\n\nTo learn more, run the command again with --verbose.\nEchidnatron% \n```\n\nThis seems to be something I can avoid by switching some logic out of `Drop` and in to an explicitly called method (`seal()`, in the code). I have [a commit checked in](https://github.com/frankmcsherry/timely-dataflow/commit/5f568b83cde4dc196842ee05eeef52338eb88969) that is just a few edits away from the ICE; instructions to reproduce are to comment out the behavior of `seal()` in `src/progress/nested/subgraph.rs` line 384, uncomment the `Drop` impl in the same file, lines 414-416, and then run `cargo bench`.\n", "closed_by": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24520/timeline", "performed_via_github_app": null, "state_reason": "completed"}