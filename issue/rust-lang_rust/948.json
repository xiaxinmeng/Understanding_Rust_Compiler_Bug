{"url": "https://api.github.com/repos/rust-lang/rust/issues/948", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/948/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/948/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/948/events", "html_url": "https://github.com/rust-lang/rust/issues/948", "id": 1690416, "node_id": "MDU6SXNzdWUxNjkwNDE2", "number": 948, "title": "typestate hang: record update with \"fail\"", "user": {"login": "jruderman", "id": 692547, "node_id": "MDQ6VXNlcjY5MjU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/692547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jruderman", "html_url": "https://github.com/jruderman", "followers_url": "https://api.github.com/users/jruderman/followers", "following_url": "https://api.github.com/users/jruderman/following{/other_user}", "gists_url": "https://api.github.com/users/jruderman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jruderman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jruderman/subscriptions", "organizations_url": "https://api.github.com/users/jruderman/orgs", "repos_url": "https://api.github.com/users/jruderman/repos", "events_url": "https://api.github.com/users/jruderman/events{/privacy}", "received_events_url": "https://api.github.com/users/jruderman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2011-09-20T18:33:21Z", "updated_at": "2014-06-16T21:56:39Z", "closed_at": "2012-01-20T01:24:41Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\nfn main() {\n    let origin = {x: 0, y: 0};\n    let f = {x: (fail) with origin};\n}\n```\n\nHangs rustc:\n\n```\n(gdb) bt\n#0  memory_region::malloc (this=0x1c00ea0, size=12, tag=0x8bf3cd \"tdesc\", zero=true) at ../src/rt/memory_region.cpp:85\n#1  0x00898731 in upcall_malloc (task=0x1c00df0, nbytes=12, td=0x0) at ../src/rt/rust_upcall.cpp:70\n#2  0x00937b09 in bitv::clone ()\n#3  0x00370b16 in middle::tstate::tritv::tritv_clone ()\n#4  0x00359e1f in middle::tstate::states::seq_states ()\n#5  0x0036a78b in middle::tstate::states::find_pre_post_state_stmt ()\n#6  0x0036b2ac in middle::tstate::states::find_pre_post_state_block ()\n#7  0x0036c13b in middle::tstate::states::find_pre_post_state_fn ()\n#8  0x00315f8a in middle::tstate::ck::check_fn_states ()\n#9  0x003167bb in middle::tstate::ck::fn_states ()\n#10 0x00390db0 in syntax::visit::visit_item ()\n#11 0x00609da2 in syntax::visit::default_visitor::thunk5459 ()\n#12 0x003908bb in syntax::visit::visit_mod ()\n#13 0x00609bef in syntax::visit::default_visitor::thunk5456 ()\n#14 0x003905e2 in syntax::visit::visit_crate ()\n#15 0x00317bfe in middle::tstate::ck::check_crate ()\n#16 0x00647105 in driver::rustc::compile_input::thunk8141 ()\n#17 0x00559460 in driver::rustc::time ()\n#18 0x0055e4ca in driver::rustc::compile_input ()\n#19 0x0057e8d8 in driver::rustc::main ()\n#20 0x0058042f in _rust_main ()\n#21 0x0064c40f in _rust_main_wrap ()\n#22 0xdeadbeef in ?? ()\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/948/timeline", "performed_via_github_app": null, "state_reason": "completed"}