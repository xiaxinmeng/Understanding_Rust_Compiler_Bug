{"url": "https://api.github.com/repos/rust-lang/rust/issues/37725", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37725/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37725/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37725/events", "html_url": "https://github.com/rust-lang/rust/issues/37725", "id": 188862666, "node_id": "MDU6SXNzdWUxODg4NjI2NjY=", "number": 37725, "title": "rustc internal compiler error: librustc/infer/mod.rs:699", "user": {"login": "dnsl48", "id": 9313746, "node_id": "MDQ6VXNlcjkzMTM3NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/9313746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnsl48", "html_url": "https://github.com/dnsl48", "followers_url": "https://api.github.com/users/dnsl48/followers", "following_url": "https://api.github.com/users/dnsl48/following{/other_user}", "gists_url": "https://api.github.com/users/dnsl48/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnsl48/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnsl48/subscriptions", "organizations_url": "https://api.github.com/users/dnsl48/orgs", "repos_url": "https://api.github.com/users/dnsl48/repos", "events_url": "https://api.github.com/users/dnsl48/events{/privacy}", "received_events_url": "https://api.github.com/users/dnsl48/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-11-11T22:13:32Z", "updated_at": "2017-06-29T02:31:01Z", "closed_at": "2017-06-29T02:31:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiler panicks instead of showing an appropriate error message in case boundaries are not satisfied.\r\n\r\nI tried this code:\r\nhttps://gist.github.com/dnsl48/d3a4a380a24e1f25ff220540cebd9806#file-source-rs\r\n```\r\npub struct Word;\r\n\r\n\r\npub struct Pointer<'a> {\r\n    val: &'a Word\r\n}\r\n\r\n\r\n\r\nimpl<'a> Pointer<'a> {\r\n    pub fn into<T> (self) -> Option<T>\r\n        where &'a Word: Into<Result<T, &'a Word>>\r\n    {\r\n        let result: Result<T, _> = self.val.into ();\r\n        result.ok ()\r\n    }\r\n}\r\n\r\n\r\n\r\npub trait FromPointer<'a>: Sized {\r\n    fn from_pointer (Pointer<'a>) -> Option<Self>;\r\n}\r\n\r\n\r\nimpl<'a> FromPointer<'a> for u8 where &'a Word: Into<Result<u8, &'a Word>> {\r\n    fn from_pointer (pointer: Pointer<'a>) -> Option<Self> { pointer.into::<u8> () }\r\n}\r\n\r\n\r\nfn main() { }\r\n```\r\n\r\nIn the result compiler panicked with the following message:\r\nhttps://gist.github.com/dnsl48/d3a4a380a24e1f25ff220540cebd9806#file-error\r\n```\r\nerror: internal compiler error: ../src/librustc/infer/mod.rs:699: Encountered errors `[FulfillmentError(Obligation(predicate=Binder(TraitPredicate(<std::result::Result<u8, &Word> as std::convert::From<&Word>>)),depth=1),Unimplemented)]` resolving bounds after type-checking\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n```\r\n\r\n## Meta\r\n```\r\n$ rustc --version --verbose\r\nrustc 1.13.0 (2c6933acc 2016-11-07)\r\nbinary: rustc\r\ncommit-hash: 2c6933acc05c61e041be764cb1331f6281993f3f\r\ncommit-date: 2016-11-07\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.13.0\r\n```\r\n\r\n## Backtrace:\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', ../src/librustc_errors/lib.rs:602\r\nstack backtrace:\r\n   1:     0x7ff032d0985f - std::sys::backtrace::tracing::imp::write::h6f1d53a70916b90d\r\n   2:     0x7ff032d18dbd - std::panicking::default_hook::{{closure}}::h137e876f7d3b5850\r\n   3:     0x7ff032d1622e - std::panicking::default_hook::h0ac3811ec7cee78c\r\n   4:     0x7ff032d16918 - std::panicking::rust_panic_with_hook::hc303199e04562edf\r\n   5:     0x7ff031878378 - std::panicking::begin_panic::hf3c77cb5fd5814c4\r\n   6:     0x7ff03196ddf5 - rustc::session::opt_span_bug_fmt::{{closure}}::hf0e25c590c479ec5\r\n   7:     0x7ff03189685a - rustc::session::span_bug_fmt::h42d4c0a219d5e4ec\r\n   8:     0x7ff0319740e2 - rustc_trans::common::fulfill_obligation::{{closure}}::{{closure}}::hb19019dff3d27900\r\n   9:     0x7ff031908802 - rustc_trans::common::fulfill_obligation::hc5c403d8dc435d27\r\n  10:     0x7ff031902718 - rustc_trans::collector::do_static_dispatch::h70f77266775460b2\r\n  11:     0x7ff031901b49 - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_operand::hcb81ecfa21b561eb\r\n  12:     0x7ff031902459 - <rustc_trans::collector::MirNeighborCollector<'a, 'tcx> as rustc::mir::visit::Visitor<'tcx>>::visit_terminator_kind::h3f9e14a5cd0a0cbd\r\n  13:     0x7ff031891995 - rustc::mir::visit::Visitor::visit_mir::h06603f079eadd52e\r\n  14:     0x7ff0318ffb32 - rustc_trans::collector::collect_items_rec::h58706c6ceb59a24d\r\n  15:     0x7ff031900692 - rustc_trans::collector::collect_items_rec::h58706c6ceb59a24d\r\n  16:     0x7ff0319713b2 - rustc_trans::base::collect_and_partition_translation_items::{{closure}}::h3a209f998241a340\r\n  17:     0x7ff0318e6518 - rustc_trans::base::collect_and_partition_translation_items::h26e28c343e8a4a22\r\n  18:     0x7ff0318e0c4c - rustc_trans::base::trans_crate::h7b6c2eb43ae0c1da\r\n  19:     0x7ff03309aa0d - rustc_driver::driver::phase_4_translate_to_llvm::h0646ffc4a1716d29\r\n  20:     0x7ff0330d5e2a - rustc_driver::driver::compile_input::{{closure}}::h5a81b1e8a8f3f531\r\n  21:     0x7ff0330c16a3 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::h4091eeab6f271a29\r\n  22:     0x7ff0330983ad - rustc_driver::driver::phase_3_run_analysis_passes::hff1c31d493acfd09\r\n  23:     0x7ff033084a39 - rustc_driver::driver::compile_input::hef221f9f618e92f5\r\n  24:     0x7ff0330af206 - rustc_driver::run_compiler::h7dddd4089f8330b4\r\n  25:     0x7ff032feb2c3 - std::panicking::try::do_call::h1e3ece12e3f812df\r\n  26:     0x7ff032d20cb6 - __rust_maybe_catch_panic\r\n  27:     0x7ff0330094f9 - <F as alloc::boxed::FnBox<A>>::call_box::h05b222e46803eb30\r\n  28:     0x7ff032d14c80 - std::sys::thread::Thread::new::thread_start::h759e10bc4abc7e72\r\n  29:     0x7ff02bc89453 - start_thread\r\n  30:     0x7ff0329e57de - __GI___clone\r\n31: 0x0 - <unknown>\r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37725/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37725/timeline", "performed_via_github_app": null, "state_reason": "completed"}