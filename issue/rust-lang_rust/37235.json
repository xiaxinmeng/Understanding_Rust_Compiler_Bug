{"url": "https://api.github.com/repos/rust-lang/rust/issues/37235", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37235/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37235/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37235/events", "html_url": "https://github.com/rust-lang/rust/issues/37235", "id": 183499223, "node_id": "MDU6SXNzdWUxODM0OTkyMjM=", "number": 37235, "title": "Slowdown with -C panic=abort", "user": {"login": "Digipom", "id": 2005192, "node_id": "MDQ6VXNlcjIwMDUxOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2005192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Digipom", "html_url": "https://github.com/Digipom", "followers_url": "https://api.github.com/users/Digipom/followers", "following_url": "https://api.github.com/users/Digipom/following{/other_user}", "gists_url": "https://api.github.com/users/Digipom/gists{/gist_id}", "starred_url": "https://api.github.com/users/Digipom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Digipom/subscriptions", "organizations_url": "https://api.github.com/users/Digipom/orgs", "repos_url": "https://api.github.com/users/Digipom/repos", "events_url": "https://api.github.com/users/Digipom/events{/privacy}", "received_events_url": "https://api.github.com/users/Digipom/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-10-17T19:03:02Z", "updated_at": "2016-12-23T17:58:57Z", "closed_at": "2016-12-23T17:54:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi team, I decided to check out https://www.reddit.com/r/rust/comments/3wxi9x/why_is_rust_much_slower_than_swift_in_this_simple/ and wanted to see what kind of an impact the new panic=abort flag would have, and I noticed that this microbenchmark actually takes longer to run if -C panic=abort is passed on the command line.\n\nCode:\n\n```\nfn fib(n: i64) -> i64 {\n    if n <= 2 {\n        1\n    } else {\n        fib(n - 1) + fib(n - 2)\n    }\n}\n\nfn main() {\n    let num = 45;\n    println!(\"{}\", fib(num))\n}\n```\n\n> rustc --version\n> rustc 1.12.0 (3191fbae9 2016-09-23)\n\nUsing the 'stable' branch of the compiler. \n\nWithout panic=abort:\n\n```\nrustc -O fib.rs -o fib_rs\ntime ./fib_rs\n1134903170\n\nreal    0m1.866s\nuser    0m1.861s\nsys     0m0.003s\n```\n\nWith panic=abort:\n\n```\nrustc -O fib.rs -C panic=abort -o fib_rs\ntime ./fib_rs\n1134903170\n\nreal    0m2.295s\nuser    0m2.291s\nsys     0m0.002s\n```\n\nDiffed ASM:  https://www.diffchecker.com/ocF7TSsM\n\nThe times are relatively consistent in several runs of each test. These tests were done on a Macbook Pro i7 with OSX 10.11.6 (El Capitan).\n", "closed_by": {"login": "Digipom", "id": 2005192, "node_id": "MDQ6VXNlcjIwMDUxOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2005192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Digipom", "html_url": "https://github.com/Digipom", "followers_url": "https://api.github.com/users/Digipom/followers", "following_url": "https://api.github.com/users/Digipom/following{/other_user}", "gists_url": "https://api.github.com/users/Digipom/gists{/gist_id}", "starred_url": "https://api.github.com/users/Digipom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Digipom/subscriptions", "organizations_url": "https://api.github.com/users/Digipom/orgs", "repos_url": "https://api.github.com/users/Digipom/repos", "events_url": "https://api.github.com/users/Digipom/events{/privacy}", "received_events_url": "https://api.github.com/users/Digipom/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37235/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37235/timeline", "performed_via_github_app": null, "state_reason": "completed"}