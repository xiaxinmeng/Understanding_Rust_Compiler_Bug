{"url": "https://api.github.com/repos/rust-lang/rust/issues/24130", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24130/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24130/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24130/events", "html_url": "https://github.com/rust-lang/rust/issues/24130", "id": 66730204, "node_id": "MDU6SXNzdWU2NjczMDIwNA==", "number": 24130, "title": "Confusing error when using type that doesn't conform to Sync due to a field that doesn't conform", "user": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-06T23:26:13Z", "updated_at": "2015-04-07T17:07:36Z", "closed_at": "2015-04-07T17:07:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When a type doesn't conform to `Sync` because it contains a field that doesn't conform, the error message yielded when trying to use that type where `Sync` is required is confusing. It talks about the type of the field itself, without actually mentioning that this is a field of the type in question, but it flags the point where the type is used rather than the field definition.\n\nExample:\n\n``` rust\ntrait Trait {\n    fn _foo(&self) {}\n}\n\nstruct Foo {\n    foo: Box<Trait+Send>\n}\n\nfn assert_is_sync<T: Sync>() {}\n\nfn main() {\n    assert_is_sync::<Foo>();\n}\n```\n\nprints\n\n```\nunnamed.rs:12:5: 12:26 error: the trait `core::marker::Sync` is not implemented for the type `Trait + Send` [E0277]\nunnamed.rs:12     assert_is_sync::<Foo>();\n                  ^~~~~~~~~~~~~~~~~~~~~\nunnamed.rs:12:5: 12:26 note: `Trait + Send` cannot be shared between threads safely\nunnamed.rs:12     assert_is_sync::<Foo>();\n                  ^~~~~~~~~~~~~~~~~~~~~\nerror: aborting due to previous error\n```\n\nThe only way to understand this error is to know that `Foo` contains a field whose type includes `Trait + Send` and correctly guess this means that `Foo` does not conform to `Send`.\n", "closed_by": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24130/timeline", "performed_via_github_app": null, "state_reason": "completed"}