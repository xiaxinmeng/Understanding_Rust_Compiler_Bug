{"url": "https://api.github.com/repos/rust-lang/rust/issues/101626", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101626/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101626/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101626/events", "html_url": "https://github.com/rust-lang/rust/issues/101626", "id": 1368182900, "node_id": "I_kwDOAAsO6M5RjNB0", "number": 101626, "title": "Edge case does not suggest changing invalid `public` with `pub`", "user": {"login": "Rageking8", "id": 106309953, "node_id": "U_kgDOBlYpQQ", "avatar_url": "https://avatars.githubusercontent.com/u/106309953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rageking8", "html_url": "https://github.com/Rageking8", "followers_url": "https://api.github.com/users/Rageking8/followers", "following_url": "https://api.github.com/users/Rageking8/following{/other_user}", "gists_url": "https://api.github.com/users/Rageking8/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rageking8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rageking8/subscriptions", "organizations_url": "https://api.github.com/users/Rageking8/orgs", "repos_url": "https://api.github.com/users/Rageking8/repos", "events_url": "https://api.github.com/users/Rageking8/events{/privacy}", "received_events_url": "https://api.github.com/users/Rageking8/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 2413861294, "node_id": "MDU6TGFiZWwyNDEzODYxMjk0", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-untriaged", "name": "regression-untriaged", "color": "e4008a", "default": false, "description": "Untriaged performance or correctness regression."}], "state": "closed", "locked": false, "assignee": {"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-09-09T18:25:47Z", "updated_at": "2022-10-20T15:08:07Z", "closed_at": "2022-09-12T15:57:50Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\nalong with any information you feel relevant to replicating the bug.\n\nIf you cannot produce a minimal reproduction case (something that would work in\nisolation), please provide the steps or even link to a repository that causes\nthe problematic output to occur.\n-->\n\nGiven the following code: [link](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=30d2fb5d1b3b7cbfd0f9d377e0d0a11f)\n\n```rust\nmod test {\n    public const X: i32 = 123;\n}\n\nfn main() {\n    println!(\"{}\", test::X);\n}\n```\n\nThe current output on stable 1.63.0:\n```\n   Compiling playground v0.0.1 (/playground)\nerror: expected one of `!` or `::`, found keyword `const`\n --> src/main.rs:2:12\n  |\n2 |     public const X: i32 = 123;\n  |            ^^^^^ expected one of `!` or `::`\n\nerror: could not compile `playground` due to previous error\n```\n\n\nThe current output on Beta version 1.64.0-beta.6 (2022-09-09 25912c09710a2de2a97b):\n```\n   Compiling playground v0.0.1 (/playground)\nerror: expected one of `!` or `::`, found keyword `const`\n --> src/main.rs:2:12\n  |\n2 |     public const X: i32 = 123;\n  |            ^^^^^ expected one of `!` or `::`\n  |\nhelp: write `pub` instead of `public` to make the item public\n  |\n2 |     pub const X: i32 = 123;\n  |     ~~~\n\nerror: could not compile `playground` due to previous error\n```\n\nThe current output on Nightly version 1.65.0-nightly (2022-09-09 1d37ed661a6922e7a167):\n\n```\n   Compiling playground v0.0.1 (/playground)\nerror: expected one of `!` or `::`, found keyword `const`\n --> src/main.rs:2:12\n  |\n2 |     public const X: i32 = 123;\n  |            ^^^^^ expected one of `!` or `::`\n\nerror: could not compile `playground` due to previous error\n```\n\nSince #99903 ( cc @gimbles ) is somewhat recent the help diagnostics improvement currently is only on beta. However, the latest nightly has regressions regarding the suggestion as shown above. Hence, the output should suggest changing `public` with `pub` as that is the desired output.\n\nNote: base issue for improved diagnostics (`public` -> `pub`): #99653\n\nNote: since this is technically a regression from beta to nightly, what should be the appropriate label to add? The one below this?\n@rustbot label +regression-untriaged\n\n<!--\nIf the problem is not self-explanatory, please provide a rationale for the\nchange.\n-->\n\n<!--\nIf dramatically different output is caused by small changes, consider also\nadding them here.\n\nIf you're using the stable version of the compiler, you should also check if the\nbug also exists in the beta or nightly versions. The output might also be\ndifferent depending on the Edition.\n-->\n\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"chenyukang\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101626/timeline", "performed_via_github_app": null, "state_reason": "completed"}