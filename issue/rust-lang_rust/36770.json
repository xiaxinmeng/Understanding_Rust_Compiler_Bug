{"url": "https://api.github.com/repos/rust-lang/rust/issues/36770", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36770/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36770/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36770/events", "html_url": "https://github.com/rust-lang/rust/issues/36770", "id": 179503777, "node_id": "MDU6SXNzdWUxNzk1MDM3Nzc=", "number": 36770, "title": "Story for C libraries which embed Rust", "user": {"login": "mystor", "id": 1261662, "node_id": "MDQ6VXNlcjEyNjE2NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/1261662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mystor", "html_url": "https://github.com/mystor", "followers_url": "https://api.github.com/users/mystor/followers", "following_url": "https://api.github.com/users/mystor/following{/other_user}", "gists_url": "https://api.github.com/users/mystor/gists{/gist_id}", "starred_url": "https://api.github.com/users/mystor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mystor/subscriptions", "organizations_url": "https://api.github.com/users/mystor/orgs", "repos_url": "https://api.github.com/users/mystor/repos", "events_url": "https://api.github.com/users/mystor/events{/privacy}", "received_events_url": "https://api.github.com/users/mystor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-09-27T14:09:05Z", "updated_at": "2019-10-03T08:05:47Z", "closed_at": "2019-10-03T08:05:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "There is a bit of an interesting problem with regard to how best to support the use case of traditionally C/C++ libraries which want to implement a feature or component in Rust. Currently this would be handled by building the rust component into a staticlib and linking it into the C library. This means that nothing changes for C consumers, but sucks if any of the consumers of this library, either directly or through other dependencies, want to also use rust, as there is already a copy of the rust standard library embedded in the library.\n\nIt would be nice if we could come up with some sort of story for how we can handle this situation well to make rust even more appealing for replacing components of or implementing new features in traditionally C libraries.\n\nMy immediate thought would be to allow for a new build target strawman-named \"staticlib-nostd\" which would not include the stdlib, and allow for rust's standard library to be linked in separately, meaning that the downstream library could share the standard library with the upstream library. I haven't put too much thought into what that would look like. This also doesn't solve any problems with duplicated dependencies other than the standard library.\n\ncc @alexcrichton\n", "closed_by": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36770/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36770/timeline", "performed_via_github_app": null, "state_reason": "completed"}