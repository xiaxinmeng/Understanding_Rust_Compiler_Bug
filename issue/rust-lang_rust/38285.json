{"url": "https://api.github.com/repos/rust-lang/rust/issues/38285", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/38285/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/38285/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/38285/events", "html_url": "https://github.com/rust-lang/rust/issues/38285", "id": 194782416, "node_id": "MDU6SXNzdWUxOTQ3ODI0MTY=", "number": 38285, "title": "Allow users to have 2 different build scripts for Windows depending if rust is the msvc or if it is the gnu build.", "user": {"login": "AraHaan", "id": 15173749, "node_id": "MDQ6VXNlcjE1MTczNzQ5", "avatar_url": "https://avatars.githubusercontent.com/u/15173749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AraHaan", "html_url": "https://github.com/AraHaan", "followers_url": "https://api.github.com/users/AraHaan/followers", "following_url": "https://api.github.com/users/AraHaan/following{/other_user}", "gists_url": "https://api.github.com/users/AraHaan/gists{/gist_id}", "starred_url": "https://api.github.com/users/AraHaan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AraHaan/subscriptions", "organizations_url": "https://api.github.com/users/AraHaan/orgs", "repos_url": "https://api.github.com/users/AraHaan/repos", "events_url": "https://api.github.com/users/AraHaan/events{/privacy}", "received_events_url": "https://api.github.com/users/AraHaan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-12-10T17:59:58Z", "updated_at": "2016-12-11T23:44:21Z", "closed_at": "2016-12-11T23:44:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "The issue is that build scripts cannot have the ability to get if the build of rust is msvc or the gnu build for windows so then it fails.\r\n\r\nSo, with that it would be nice to have build scripts to be able to do it or at least for windows a custom build script for only the msvc build and then a different one for the gnu windows build.\r\n\r\nThe reason for this is because if you want to import a lib file for a msvc build version because the gnu produces corrupt binaries they would have to have:\r\n``__declspec(dllimport)``\r\n\r\nThat is if they are linking to a *lib file made in C or C++ (like the original cpython lib file shipped with the installable python)\r\n\r\nThe suggestion is to have support for something like this entirely in Cargo.toml:\r\n\r\n```toml\r\n[package]\r\nname = \"crate name here\"\r\nversion = \"version here\"\r\ndescription = \"description here\"\r\nauthors = [\"creators here\"]\r\nreadme = \"readme file here\"\r\nkeywords = [\r\n    \"keywords here\",\r\n]\r\nhomepage = \"homepage here\"\r\nrepository = \"repo here\"\r\ndocumentation = \"documentation here\"\r\nlicense = \"MIT\"\r\nexclude = [\r\n    \"exclude files here.\",\r\n]\r\n\r\n[package.x86_64-pc-windows-msvc]\r\nbuild = \"custombuildscripthere.rs\"\r\n\r\n[package.i686-pc-windows-msvc]\r\nbuild = \"custombuildscripthere.rs\"\r\n\r\n[package.x86_64-pc-windows-gnu]\r\nbuild = \"custombuildscripthere.rs\"\r\n\r\n[package.i686-pc-windows-gnu]\r\nbuild = \"custombuildscripthere.rs\"\r\n```\r\n\r\nThis is so that way Windows would have a better build system for multi platform crates that relies on C or C++ code that has multiple platform implementations like Python's C API for example.", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/38285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/38285/timeline", "performed_via_github_app": null, "state_reason": "completed"}