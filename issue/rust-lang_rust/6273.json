{"url": "https://api.github.com/repos/rust-lang/rust/issues/6273", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6273/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6273/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6273/events", "html_url": "https://github.com/rust-lang/rust/issues/6273", "id": 14012937, "node_id": "MDU6SXNzdWUxNDAxMjkzNw==", "number": 6273, "title": "Refactor callee data to store FnSig and associated info instead of ty::t", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37234, "node_id": "MDU6TGFiZWwzNzIzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}, {"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-05-06T18:01:37Z", "updated_at": "2015-04-30T20:56:07Z", "closed_at": "2015-04-30T20:56:07Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Right now we store a `ty::t` with the callee id for a call that will contain the type of the callee. But this is not really the right thing---it is both too narrow and too general.\n\nToo narrow because it doesn't store all the information one might want about a callsite. So we wind up needing things like the method_map. Too general because callees must have function types (except for methods, but maybe they will eventually have bare fn types too)---so there is no reason to use a `ty::t`, which could store any type at all.\n\nAs a side-effect of this, there is a FIXME in the code that relates to the fact that the ty::t we store for simple functions is the bare function _before_ we have substituted the regions and the ty::t we store for methods is afterwards. The method code is correct, the type of the callee should include the concrete regions, but it is inconvenient to do so for functions. I've worked around this for now in regionck and elsewhere by not examining the type of the callee.\n\n@erickt was doing some work on this.\n\ncc #5074 (though not _precisely_ a dependency)\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6273/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6273/timeline", "performed_via_github_app": null, "state_reason": "completed"}