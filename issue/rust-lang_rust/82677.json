{"url": "https://api.github.com/repos/rust-lang/rust/issues/82677", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/82677/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/82677/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/82677/events", "html_url": "https://github.com/rust-lang/rust/issues/82677", "id": 819185785, "node_id": "MDU6SXNzdWU4MTkxODU3ODU=", "number": 82677, "title": "Track Windows 7 vs. delete-on-close fixes", "user": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-01T19:37:49Z", "updated_at": "2021-03-26T11:53:31Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Rust #82605 reverted LLVM [D81803](https://reviews.llvm.org/D81803), \"Avoid setting the delete-on-close bit if a TempFile doesn't reside on a local drive,\" because that regressed Windows 7 in #81051.\r\n\r\nThat change was meant to fix [LLVM PR42623](https://bugs.llvm.org/show_bug.cgi?id=42623), which also references Rust #54216. It would be nice if some Windows user could verify if that was fixed on a nightly where we still had the change, roughly 2021-01-13 through 2021-02-28. But since it left Windows 7 unable to create _any_ archives, we decided that regression was worse than the fix.\r\n\r\n[LLVM 48378](https://bugs.llvm.org/show_bug.cgi?id=48378) also reported a Windows 7 regression that seems to be the same root cause. Perhaps there will be a new update that makes it all work for Windows 7, so we can have the best of both. Another possibility suggested in a [compiler meeting](https://zulip-archive.rust-lang.org/238009tcompilermeetings/76458weeklymeeting2021021854818.html#226830050) was to use runtime platform detection, skipping D81803's code on Windows 7, but letting us still have the bug fix on newer Windows.\r\n\r\nAlternatively, when Rust eventually decides to stop supporting Windows 7, we can just drop the revert / reapply D81803.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/82677/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/82677/timeline", "performed_via_github_app": null, "state_reason": null}