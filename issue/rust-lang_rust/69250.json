{"url": "https://api.github.com/repos/rust-lang/rust/issues/69250", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/69250/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/69250/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/69250/events", "html_url": "https://github.com/rust-lang/rust/issues/69250", "id": 566572815, "node_id": "MDU6SXNzdWU1NjY1NzI4MTU=", "number": 69250, "title": "Documentation unclear with Fn trait on extern \"C\" function pointers", "user": {"login": "MarkMcCaskey", "id": 5770194, "node_id": "MDQ6VXNlcjU3NzAxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5770194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkMcCaskey", "html_url": "https://github.com/MarkMcCaskey", "followers_url": "https://api.github.com/users/MarkMcCaskey/followers", "following_url": "https://api.github.com/users/MarkMcCaskey/following{/other_user}", "gists_url": "https://api.github.com/users/MarkMcCaskey/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkMcCaskey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkMcCaskey/subscriptions", "organizations_url": "https://api.github.com/users/MarkMcCaskey/orgs", "repos_url": "https://api.github.com/users/MarkMcCaskey/repos", "events_url": "https://api.github.com/users/MarkMcCaskey/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkMcCaskey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 45472092, "node_id": "MDU6TGFiZWw0NTQ3MjA5Mg==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-ffi", "name": "A-ffi", "color": "f7e101", "default": false, "description": "Area: Foreign Function Interface (FFI)"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-02-18T00:13:40Z", "updated_at": "2022-04-25T21:42:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The relevant docs are [here](https://doc.rust-lang.org/std/primitive.fn.html) and [here in the repo](https://github.com/rust-lang/rust/blob/master/src/libstd/primitive_docs.rs#L1133-L1135):\r\n\r\n> In addition, function pointers of any signature, ABI, or safety are Copy, and all safe function pointers implement Fn, FnMut, and FnOnce. This works because these traits are specially known to the compiler.\r\n\r\nThe code:\r\n\r\n```Rust\r\nextern \"C\" fn abc(x: u32) {\r\n    println!(\"Hello, {}\", x);\r\n}\r\n\r\nfn do_it<F: Fn(u32)>(f: F, n: u32) {\r\n    f(n)\r\n}\r\n\r\nfn main() {\r\n    do_it(abc, 5);\r\n}\r\n```\r\n\r\nDoes not compile even though `abc` can be called without `unsafe`, which the docs seem to suggest is sufficient for this to work.\r\n\r\n[Rust playground demonstrating the issue](https://play.rust-lang.org/?version=stable&mode=debug&edition=2015&gist=8735414c1ecb5b4e58d9997912419b21)\r\n\r\nI'd be happy to update the docs, but unfortunately I think I don't understand why this doesn't work well enough to do so.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/69250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/69250/timeline", "performed_via_github_app": null, "state_reason": null}