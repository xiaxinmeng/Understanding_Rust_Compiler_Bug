{"url": "https://api.github.com/repos/rust-lang/rust/issues/34448", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34448/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34448/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34448/events", "html_url": "https://github.com/rust-lang/rust/issues/34448", "id": 162113399, "node_id": "MDU6SXNzdWUxNjIxMTMzOTk=", "number": 34448, "title": "Internal compiler error with string constant", "user": {"login": "koba-e964", "id": 3303362, "node_id": "MDQ6VXNlcjMzMDMzNjI=", "avatar_url": "https://avatars.githubusercontent.com/u/3303362?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koba-e964", "html_url": "https://github.com/koba-e964", "followers_url": "https://api.github.com/users/koba-e964/followers", "following_url": "https://api.github.com/users/koba-e964/following{/other_user}", "gists_url": "https://api.github.com/users/koba-e964/gists{/gist_id}", "starred_url": "https://api.github.com/users/koba-e964/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koba-e964/subscriptions", "organizations_url": "https://api.github.com/users/koba-e964/orgs", "repos_url": "https://api.github.com/users/koba-e964/repos", "events_url": "https://api.github.com/users/koba-e964/events{/privacy}", "received_events_url": "https://api.github.com/users/koba-e964/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-06-24T09:51:25Z", "updated_at": "2017-04-06T10:51:56Z", "closed_at": "2017-04-06T10:51:56Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I tried to define a string constant in `src/main.rs`, the compiler was terminated by internal error. \nI tried `cargo run` in the repository [koba-e964/calc-rust:bug-report](https://github.com/koba-e964/calc-rust/tree/bug-report):\n\nThe compiler was terminated because of internal error, with the following output:\n\n```\n(some lines omitted)\nerror: internal compiler error: Error constructed but not emitted\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'explicit panic', ../src/libsyntax/errors/mod.rs:370\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\n\nerror: Could not compile `calc`.\n```\n## Meta\n\n`rustc --version --verbose`:\n\n```\nrustc 1.11.0-nightly (5522e678b 2016-06-20)\nbinary: rustc\ncommit-hash: 5522e678bcefe14cc2ab3d0ab329b7059ce52b36\ncommit-date: 2016-06-20\nhost: x86_64-apple-darwin\nrelease: 1.11.0-nightly\n```\n\nBacktrace (`RUST_BACKTRACE=1 cargo run`):\n\n```\n   Compiling libc v0.2.12\n   Compiling peg v0.3.13\n   Compiling winapi-build v0.1.1\n   Compiling strsim v0.3.0\n   Compiling kernel32-sys v0.2.2\n   Compiling regex-syntax v0.3.3\n   Compiling winapi v0.2.7\n   Compiling memchr v0.1.11\n   Compiling utf8-ranges v0.1.3\n   Compiling aho-corasick v0.5.2\n   Compiling rustc-serialize v0.3.19\n   Compiling thread-id v2.0.0\n   Compiling thread_local v0.2.6\n   Compiling regex v0.1.71\n   Compiling docopt v0.6.81\n   Compiling docopt_macros v0.6.84\n   Compiling calc v0.1.0 (file:///Users/koba_mac/srcview/calc-rust)\nsrc/interpret.rs:41:21: 41:26 warning: unused variable: `f`, #[warn(unused_variables)] on by default\nsrc/interpret.rs:41         AST::FunApp(ref f, ref es) => panic!(\"eval_funapp\"),\n                                        ^~~~~\nsrc/interpret.rs:41:28: 41:34 warning: unused variable: `es`, #[warn(unused_variables)] on by default\nsrc/interpret.rs:41         AST::FunApp(ref f, ref es) => panic!(\"eval_funapp\"),\n                                               ^~~~~~\nsrc/typing.rs:34:21: 34:26 warning: unused variable: `f`, #[warn(unused_variables)] on by default\nsrc/typing.rs:34         AST::FunApp(ref f, ref es) => panic!(\"typing_funapp\"),\n                                     ^~~~~\nsrc/typing.rs:34:28: 34:34 warning: unused variable: `es`, #[warn(unused_variables)] on by default\nsrc/typing.rs:34         AST::FunApp(ref f, ref es) => panic!(\"typing_funapp\"),\n                                            ^~~~~~\nerror: internal compiler error: Error constructed but not emitted\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'explicit panic', ../src/libsyntax/errors/mod.rs:370\nstack backtrace:\n   1:        0x106e1bb4b - std::sys::backtrace::tracing::imp::write::h6528da8103c51ab9\n   2:        0x106e2882a - std::panicking::default_hook::_$u7b$$u7b$closure$u7d$$u7d$::hbe741a5cc3c49508\n   3:        0x106e2835b - std::panicking::default_hook::he0146e6a74621cb4\n   4:        0x106dede08 - std::panicking::rust_panic_with_hook::h983af77c1a2e581b\n   5:        0x1041c5004 - std::panicking::begin_panic::h0bf39f6d43ab9349\n   6:        0x1041cd638 - _<syntax..errors..DiagnosticBuilder<'a> as core..ops..Drop>::drop::h7bf6d745882a0d7c\n   7:        0x107c11fa0 - syntax..errors..DiagnosticBuilder::drop.21685::h11584c18ad2b9e97\n   8:        0x107c11f57 - std..result..Result<Parsed, syntax..errors..DiagnosticBuilder>::drop.21682::hdff0d2eaebc0cefd\n   9:        0x107c01a8b - docopt_macros::expand::hf63339f6a0f063b6\n  10:        0x102a6b089 - _<F as syntax..ext..base..TTMacroExpander>::expand::h9e11b515514e3f92\n  11:        0x1043c0626 - syntax::ext::expand::expand_mac_invoc::mac_result::hae15856b289b7c95\n  12:        0x10444e9fb - syntax::ext::expand::expand_annotatable::_$u7b$$u7b$closure$u7d$$u7d$::h8520d1055a82cb81\n  13:        0x10440cb87 - syntax::ext::expand::expand_annotatable::h05daf8dbfd45385d\n  14:        0x10440b1ec - syntax::ext::expand::expand_item::h0c304e718d09cf1e\n  15:        0x104417101 - _<syntax..ext..expand..MacroExpander<'a, 'b> as syntax..fold..Folder>::fold_item::h7e3a9cc89287eb31\n  16:        0x104416db0 - syntax::fold::noop_fold_mod::h9b639661453b4e4a\n  17:        0x104410c25 - syntax::ext::expand::expand_item_kind::h77370e172ebc6967\n  18:        0x104451b2d - syntax::fold::Folder::fold_item_simple::h389274292ee655e4\n  19:        0x104451716 - _<syntax..ptr..P<T>>::map::h0f976487c864d039\n  20:        0x10440def0 - syntax::ext::expand::expand_annotatable::h05daf8dbfd45385d\n  21:        0x10440b1ec - syntax::ext::expand::expand_item::h0c304e718d09cf1e\n  22:        0x104417347 - _<syntax..ext..expand..MacroExpander<'a, 'b> as syntax..fold..Folder>::fold_item::h7e3a9cc89287eb31\n  23:        0x104466571 - _<syntax..ext..expand..MacroExpander<'a, 'b> as syntax..fold..Folder>::fold_crate::hc04a1c2ade6e09bb\n  24:        0x104467a31 - syntax::ext::expand::expand_crate::h751c1b1de09c42dd\n  25:        0x1023aff98 - rustc_driver::driver::phase_2_configure_and_expand::_$u7b$$u7b$closure$u7d$$u7d$::hfdc4ab61e58580ac\n  26:        0x102364181 - rustc_driver::driver::phase_2_configure_and_expand::h7aa0bb3346817b72\n  27:        0x10233751e - rustc_driver::driver::compile_input::hfd60b020f6d0208d\n  28:        0x102328b54 - rustc_driver::run_compiler::h884d01d12eb76bbb\n  29:        0x102325b5f - std::panicking::try::call::hd72cf79141f67e60\n  30:        0x106e2f90b - __rust_try\n  31:        0x106e2f8a5 - __rust_maybe_catch_panic\n  32:        0x10232666b - _<F as alloc..boxed..FnBox<A>>::call_box::h589d2091babf223a\n  33:        0x106e272a8 - std::sys::thread::Thread::new::thread_start::h9c883b6d445ece46\n  34:     0x7fff8ab9799c - _pthread_body\n  35:     0x7fff8ab97919 - _pthread_start\n\nerror: Could not compile `calc`.\n\nTo learn more, run the command again with --verbose.\n```\n\n[Here](https://travis-ci.org/koba-e964/calc-rust/builds/139983383) is the output of Travis CI, which also has unexpected compiler termination.\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34448/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34448/timeline", "performed_via_github_app": null, "state_reason": "completed"}