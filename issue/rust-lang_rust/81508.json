{"url": "https://api.github.com/repos/rust-lang/rust/issues/81508", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81508/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81508/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81508/events", "html_url": "https://github.com/rust-lang/rust/issues/81508", "id": 796756959, "node_id": "MDU6SXNzdWU3OTY3NTY5NTk=", "number": 81508, "title": "Confusing diagnostic when improperly using constant as type.", "user": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1596122130, "node_id": "MDU6TGFiZWwxNTk2MTIyMTMw", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-papercut", "name": "D-papercut", "color": "c9f7a3", "default": false, "description": "Diagnostic error that needs small tweaks"}], "state": "closed", "locked": false, "assignee": {"login": "kwj2104", "id": 742632, "node_id": "MDQ6VXNlcjc0MjYzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/742632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwj2104", "html_url": "https://github.com/kwj2104", "followers_url": "https://api.github.com/users/kwj2104/followers", "following_url": "https://api.github.com/users/kwj2104/following{/other_user}", "gists_url": "https://api.github.com/users/kwj2104/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwj2104/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwj2104/subscriptions", "organizations_url": "https://api.github.com/users/kwj2104/orgs", "repos_url": "https://api.github.com/users/kwj2104/repos", "events_url": "https://api.github.com/users/kwj2104/events{/privacy}", "received_events_url": "https://api.github.com/users/kwj2104/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kwj2104", "id": 742632, "node_id": "MDQ6VXNlcjc0MjYzMg==", "avatar_url": "https://avatars.githubusercontent.com/u/742632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwj2104", "html_url": "https://github.com/kwj2104", "followers_url": "https://api.github.com/users/kwj2104/followers", "following_url": "https://api.github.com/users/kwj2104/following{/other_user}", "gists_url": "https://api.github.com/users/kwj2104/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwj2104/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwj2104/subscriptions", "organizations_url": "https://api.github.com/users/kwj2104/orgs", "repos_url": "https://api.github.com/users/kwj2104/repos", "events_url": "https://api.github.com/users/kwj2104/events{/privacy}", "received_events_url": "https://api.github.com/users/kwj2104/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2021-01-29T10:16:44Z", "updated_at": "2021-04-12T03:13:21Z", "closed_at": "2021-04-12T03:13:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The following code...\r\n```rust\r\n#[allow(non_upper_case_globals)]\r\npub const Foo: &str = \"\";\r\n\r\nmod submod {\r\n    use super::Foo;\r\n    fn function() {\r\n        println!(\"{}\", Foo::Bar);\r\n    }\r\n}\r\n```\r\n\r\n...yields the following error and warning:\r\n\r\n```\r\nerror[E0433]: failed to resolve: use of undeclared type `Foo`\r\n --> src/lib.rs:7:24\r\n  |\r\n7 |         println!(\"{}\", Foo::Bar);\r\n  |                        ^^^ use of undeclared type `Foo`\r\n\r\nwarning: unused import: `super::Foo`\r\n --> src/lib.rs:5:9\r\n  |\r\n5 |     use super::Foo;\r\n  |         ^^^^^^^^^^\r\n  |\r\n  = note: `#[warn(unused_imports)]` on by default\r\n```\r\n\r\nThe warning says that `Foo` is not used but it clearly is, just not properly. This error is normally easier to spot when using the proper casing for constants, but that might not always be the case. Perhaps in this instance, we should look for other items with the exact same name and point out that the user is trying to use a constant as a type. \r\n\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"kwj2104\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81508/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81508/timeline", "performed_via_github_app": null, "state_reason": "completed"}