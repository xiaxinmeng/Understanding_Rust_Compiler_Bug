{"url": "https://api.github.com/repos/rust-lang/rust/issues/31363", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31363/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31363/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31363/events", "html_url": "https://github.com/rust-lang/rust/issues/31363", "id": 130637865, "node_id": "MDU6SXNzdWUxMzA2Mzc4NjU=", "number": 31363, "title": "rustc build core dump on OpenBSD", "user": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 311417367, "node_id": "MDU6TGFiZWwzMTE0MTczNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-openbsd", "name": "O-openbsd", "color": "6e6ec0", "default": false, "description": "Operating system: OpenBSD"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2016-02-02T10:18:40Z", "updated_at": "2016-02-18T10:35:33Z", "closed_at": "2016-02-18T10:35:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am investigating a core dump issue (rustc compiler crash without panic) under OpenBSD during the build. The segfault occurs at stage2 during libcore building.\n\nIt seems to occurs occasionnally on OpenBSD buildhost.\n\nNote that rustc under OpenBSD use system `malloc(3)`, that comes with several security options (see http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/malloc.conf.5).\n\nBacktrace of one build:\n\n```\n(gdb) bt\n#0  0x00000f38e4e53170 in str::from_utf8::h677e0dbe19ab7a5adYR ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#1  0x00000f38e4de62a1 in ffi::os_str::OsString::into_string::h08ad47b28c773394gSe ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#2  0x00000f38e4de8498 in env::Args.Iterator::next::he30da4a3586351acwle ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#3  0x00000f38e27c5c7f in main::he8593f4eb18ffee8dMd ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/librustc_driver-db5a760f.so\n#4  0x00000f38e4e1ac0e in sys_common::unwind::try::try_fn::h17969813569916126057 ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#5  0x00000f38e4e122dc in __rust_try ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#6  0x00000f38e4e0a046 in sys_common::unwind::inner_try::h5984569719e85a59C7s ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#7  0x00000f38e4e1a724 in rt::lang_start::h7b315fa4cd5a7fa9Kiy ()\n   from /data/semarie/obj/rust/x86_64-unknown-openbsd/stage2/lib/libstd-db5a760f.so\n#8  0x00000f363ed00aa1 in _start () from /data/semarie/core/stage2/bin/rustc\n#9  0x0000000000000000 in ?? ()\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31363/timeline", "performed_via_github_app": null, "state_reason": "completed"}