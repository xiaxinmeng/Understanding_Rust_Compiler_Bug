{"url": "https://api.github.com/repos/rust-lang/rust/issues/34331", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34331/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34331/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34331/events", "html_url": "https://github.com/rust-lang/rust/issues/34331", "id": 160938595, "node_id": "MDU6SXNzdWUxNjA5Mzg1OTU=", "number": 34331, "title": "Error unable to find scope infor for NodeExpr on Stable and Nightly when using std::path::MAIN_SEPARATOR", "user": {"login": "elliottneilclark", "id": 169547, "node_id": "MDQ6VXNlcjE2OTU0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/169547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elliottneilclark", "html_url": "https://github.com/elliottneilclark", "followers_url": "https://api.github.com/users/elliottneilclark/followers", "following_url": "https://api.github.com/users/elliottneilclark/following{/other_user}", "gists_url": "https://api.github.com/users/elliottneilclark/gists{/gist_id}", "starred_url": "https://api.github.com/users/elliottneilclark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elliottneilclark/subscriptions", "organizations_url": "https://api.github.com/users/elliottneilclark/orgs", "repos_url": "https://api.github.com/users/elliottneilclark/repos", "events_url": "https://api.github.com/users/elliottneilclark/events{/privacy}", "received_events_url": "https://api.github.com/users/elliottneilclark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-06-17T17:36:13Z", "updated_at": "2017-04-06T14:04:29Z", "closed_at": "2017-04-06T14:04:29Z", "author_association": "NONE", "active_lock_reason": null, "body": "Unable to compile danielpclark/faster_path on either stable or nightly.\n\nI tried this:\n`git clone https://github.com/danielpclark/faster_path.git && cd faster_path && cargo update && cargo test`\nI expected to see this happen: it either to compile or provide a compilation error.\nInstead, this happened: The compiler panicked.\n## Stable\n\n`rustc --version --verbose`:\nrustc 1.9.0 (e4e8b6668 2016-05-18)\nbinary: rustc\ncommit-hash: e4e8b666850a763fdf1c3c2c142856ab51e32779\ncommit-date: 2016-05-18\nhost: x86_64-apple-darwin\nrelease: 1.9.0\n\nBacktrace:\n\n```\nRUST_BACKTRACE=1 cargo build --verbose                                                                                    101 \u21b5\n       Fresh libc v0.2.11\n   Compiling faster_path v0.0.1 (file:///Users/elliott/Code/Public/faster_path)\n     Running `rustc src/lib.rs --crate-name faster_path --crate-type dylib -g --out-dir /Users/elliott/Code/Public/faster_path/target/debug --emit=dep-info,link -L dependency=/Users/elliott/Code/Public/faster_path/target/debug -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps --extern libc=/Users/elliott/Code/Public/faster_path/target/debug/deps/liblibc-38919d24e617a235.rlib`\nsrc/basename_for_chop.rs:20:12: 20:26 error: internal compiler error: ../src/librustc_trans/debuginfo/metadata.rs:910: debuginfo: Could not find scope info for node NodeExpr(expr(1173: '/'))\nsrc/basename_for_chop.rs:20       Some(MAIN_SEPARATOR) => { offset = offset + 1 },\n                                       ^~~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/errors/mod.rs:536\nstack backtrace:\n   1:        0x1081b23a8 - std::sys::backtrace::tracing::imp::write::h4c73fcd3363076f5\n   2:        0x1081be7f5 - std::panicking::default_hook::_$u7b$$u7b$closure$u7d$$u7d$::h0422dbb3077e6747\n   3:        0x1081be32f - std::panicking::default_hook::haac48fa641db8fa2\n   4:        0x108182f86 - std::sys_common::unwind::begin_unwind_inner::h39d40f52add53ef7\n   5:        0x10460ce6b - std::sys_common::unwind::begin_unwind::hb6dfe67d47a39536\n   6:        0x10460ce0b - syntax::errors::Handler::span_bug::h98fe6cb651d17ad3\n   7:        0x104642e8f - rustc::session::opt_span_bug_fmt::_$u7b$$u7b$closure$u7d$$u7d$::hda87a029f26efa73\n   8:        0x104642d66 - rustc::session::span_bug_fmt::hbb98cefb6da7b8d2\n   9:        0x1046f7ebb - rustc_trans::debuginfo::metadata::scope_metadata::h8bc8a8d2f7e800cb\n  10:        0x1046eaeea - rustc_trans::debuginfo::source_loc::set_source_location::h8b3972858edfdcb2\n  11:        0x104645db1 - rustc_trans::build::ICmp::hfb8885280dc80daf\n  12:        0x104652206 - rustc_trans::base::compare_scalar_types::hcae3d4bada8a343b\n  13:        0x10473564a - rustc_trans::_match::compile_submatch_continue::hcd7f8b7be900c70d\n  14:        0x104731680 - rustc_trans::_match::compile_submatch::h1de5752782f6605b\n  15:        0x104736f60 - rustc_trans::_match::compile_submatch_continue::hcd7f8b7be900c70d\n  16:        0x104731680 - rustc_trans::_match::compile_submatch::h1de5752782f6605b\n  17:        0x1047398c8 - rustc_trans::_match::trans_match_inner::hed0f6414d25cfb0d\n  18:        0x104703b04 - rustc_trans::expr::trans_rvalue_dps_unadjusted::hfc708f6d884d180a\n  19:        0x10467bb35 - rustc_trans::expr::trans_into::h42fcfc33be1fd4c2\n  20:        0x10467321e - rustc_trans::controlflow::trans_block::hbf71b2a467189fc4\n  21:        0x104707a0f - rustc_trans::expr::trans_rvalue_stmt_unadjusted::h6a58e578dd012c09\n  22:        0x10467bb05 - rustc_trans::expr::trans_into::h42fcfc33be1fd4c2\n  23:        0x1046e0f62 - rustc_trans::controlflow::trans_stmt_semi::hcba83f2a6075f097\n  24:        0x104672f16 - rustc_trans::controlflow::trans_block::hbf71b2a467189fc4\n  25:        0x104671780 - rustc_trans::base::trans_closure::h3bda42021fe9c927\n  26:        0x104673911 - rustc_trans::base::trans_fn::he1c838fa1dbfdc03\n  27:        0x10467e165 - rustc_trans::base::trans_item::hf167e469e36b8935\n  28:        0x104696416 - _<base..TransItemsWithinModVisitor<'a, 'tcx> as rustc..hir..intravisit..Visitor<'v>>::visit_item::hfd0663a7c8d5f16c\n  29:        0x104694356 - rustc::hir::intravisit::walk_item::h511d7aa5180d79ae\n  30:        0x104684eae - rustc_trans::base::trans_crate::h62301dd3c79c73a7\n  31:        0x103d1f73a - rustc_driver::driver::phase_4_translate_to_llvm::hd44e506f53bb81e3\n  32:        0x103d1deec - rustc_driver::driver::compile_input::_$u7b$$u7b$closure$u7d$$u7d$::h9811bece2a8f1da7\n  33:        0x103d1a7dd - rustc_driver::driver::phase_3_run_analysis_passes::_$u7b$$u7b$closure$u7d$$u7d$::hc699330eb6f2bc1e\n  34:        0x103d14392 - rustc::ty::context::TyCtxt::create_and_enter::h656b2d3a4956519e\n  35:        0x103d10cdc - rustc_driver::driver::phase_3_run_analysis_passes::h83da042ec4b8ea10\n  36:        0x103ce4571 - rustc_driver::driver::compile_input::h6491aaddd9e61258\n  37:        0x103ccad8f - rustc_driver::run_compiler::h80b2ba5e4d787c5f\n  38:        0x103cc8122 - std::sys_common::unwind::try::try_fn::h34e27823ddd1d5e9\n  39:        0x1081afb3b - __rust_try\n  40:        0x1081afac3 - std::sys_common::unwind::inner_try::h9eebd8dc83f388a6\n  41:        0x103cc89b9 - _<F as std..boxed..FnBox<A>>::call_box::h3d5d78986dfac5b2\n  42:        0x1081bd6c8 - std::sys::thread::Thread::new::thread_start::h471ad90789353b5b\n  43:     0x7fff9478c99c - _pthread_body\n  44:     0x7fff9478c919 - _pthread_start\n\nerror: Could not compile `faster_path`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/lib.rs --crate-name faster_path --crate-type dylib -g --out-dir /Users/elliott/Code/Public/faster_path/target/debug --emit=dep-info,link -L dependency=/Users/elliott/Code/Public/faster_path/target/debug -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps --extern libc=/Users/elliott/Code/Public/faster_path/target/debug/deps/liblibc-38919d24e617a235.rlib` (exit code: 101)\n```\n## Nightly\n\n`rustc --version --verbose`:\n\n```\nrustc 1.11.0-nightly (bb4a79b08 2016-06-15)\nbinary: rustc\ncommit-hash: bb4a79b087158f396b984bdf552d2c90890b12a3\ncommit-date: 2016-06-15\nhost: x86_64-apple-darwin\nrelease: 1.11.0-nightly\n```\n\nBacktrace:\n\n```\nRUST_BACKTRACE=1 cargo build --verbose\n   Compiling libc v0.2.11\n     Running `rustc /Users/elliott/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.11/src/lib.rs --crate-name libc --crate-type lib -g --cfg feature=\\\"default\\\" --cfg feature=\\\"use_std\\\" -C metadata=6b483f9a7097e9a4 -C extra-filename=-6b483f9a7097e9a4 --out-dir /Users/elliott/Code/Public/faster_path/target/debug/deps --emit=dep-info,link -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps --cap-lints allow`\n   Compiling faster_path v0.0.1 (file:///Users/elliott/Code/Public/faster_path)\n     Running `rustc src/lib.rs --crate-name faster_path --crate-type dylib -g --out-dir /Users/elliott/Code/Public/faster_path/target/debug --emit=dep-info,link -L dependency=/Users/elliott/Code/Public/faster_path/target/debug -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps --extern libc=/Users/elliott/Code/Public/faster_path/target/debug/deps/liblibc-6b483f9a7097e9a4.rlib`\nsrc/basename_for_chop.rs:20:12: 20:26 error: internal compiler error: ../src/librustc_trans/debuginfo/metadata.rs:909: debuginfo: Could not find scope info for node NodeExpr(expr(1163: '/'))\nsrc/basename_for_chop.rs:20       Some(MAIN_SEPARATOR) => { offset = offset + 1 },\n                                       ^~~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/errors/mod.rs:545\nstack backtrace:\n   1:        0x1134500ab - std::sys::backtrace::tracing::imp::write::h6528da8103c51ab9\n   2:        0x11345ca5a - std::panicking::default_hook::_$u7b$$u7b$closure$u7d$$u7d$::hbe741a5cc3c49508\n   3:        0x11345c58b - std::panicking::default_hook::he0146e6a74621cb4\n   4:        0x113422368 - std::panicking::rust_panic_with_hook::h983af77c1a2e581b\n   5:        0x10f11252b - std::panicking::begin_panic::hf9f206df23a555af\n   6:        0x10f1123bd - rustc::session::opt_span_bug_fmt::_$u7b$$u7b$closure$u7d$$u7d$::h083e19915ee66466\n   7:        0x10f1121a2 - rustc::session::span_bug_fmt::h0ed5e1c04618deff\n   8:        0x10f1f0bb1 - rustc_trans::debuginfo::metadata::scope_metadata::h88a7aa4543e957f8\n   9:        0x10f1e3560 - rustc_trans::debuginfo::source_loc::set_source_location::h72462a7b259b1995\n  10:        0x10f1156ef - rustc_trans::build::ICmp::hecf445429fe7bc68\n  11:        0x10f1229c3 - rustc_trans::base::compare_scalar_types::h976479cb6082dcea\n  12:        0x10f234b8a - rustc_trans::_match::compile_submatch_continue::hddafc0ec12927206\n  13:        0x10f230400 - rustc_trans::_match::compile_submatch::hd9532ace09ec5f72\n  14:        0x10f2366f1 - rustc_trans::_match::compile_submatch_continue::hddafc0ec12927206\n  15:        0x10f230400 - rustc_trans::_match::compile_submatch::hd9532ace09ec5f72\n  16:        0x10f239589 - rustc_trans::_match::trans_match_inner::h6c279313259c5422\n  17:        0x10f1fcf63 - rustc_trans::expr::trans_rvalue_dps_unadjusted::hadda29044ed9a2df\n  18:        0x10f14c28a - rustc_trans::expr::trans_into::h39379abaf24a5d90\n  19:        0x10f143581 - rustc_trans::controlflow::trans_block::h7ec6b213337f773e\n  20:        0x10f200f99 - rustc_trans::expr::trans_rvalue_stmt_unadjusted::h3b7a708ec9feb123\n  21:        0x10f14c25a - rustc_trans::expr::trans_into::h39379abaf24a5d90\n  22:        0x10f1dcf1f - rustc_trans::controlflow::trans_stmt_semi::hd28c1af600c97612\n  23:        0x10f1431d0 - rustc_trans::controlflow::trans_block::h7ec6b213337f773e\n  24:        0x10f13d632 - rustc_trans::base::trans_closure::h9e96f7e9279dd729\n  25:        0x10f143dfd - rustc_trans::base::trans_fn::ha453f4075c16fe7d\n  26:        0x10f14e7b2 - rustc_trans::base::trans_item::hca2904a0eb6b2a6f\n  27:        0x10f166e81 - _<rustc_trans..base..TransItemsWithinModVisitor<'a, 'tcx> as rustc..hir..intravisit..Visitor<'v>>::visit_item::hc86f557d139a067e\n  28:        0x10f165298 - rustc::hir::intravisit::walk_item::he9a143fadf3af5d7\n  29:        0x10f157c71 - rustc_trans::base::trans_crate::h999c47a06d45abea\n  30:        0x10e9bbc9a - rustc_driver::driver::phase_4_translate_to_llvm::had910d0e745bc40f\n  31:        0x10e9b907f - rustc_driver::driver::compile_input::_$u7b$$u7b$closure$u7d$$u7d$::hf187cb470aad2bf2\n  32:        0x10e9b5754 - rustc_driver::driver::phase_3_run_analysis_passes::_$u7b$$u7b$closure$u7d$$u7d$::hd565ad56c5876a16\n  33:        0x10e9af410 - rustc::ty::context::TyCtxt::create_and_enter::habef58c7230d34f9\n  34:        0x10e979901 - rustc_driver::driver::compile_input::hfd60b020f6d0208d\n  35:        0x10e9666d4 - rustc_driver::run_compiler::h884d01d12eb76bbb\n  36:        0x10e9636df - std::panicking::try::call::hd72cf79141f67e60\n  37:        0x113463b3b - __rust_try\n  38:        0x113463ad5 - __rust_maybe_catch_panic\n  39:        0x10e9641eb - _<F as alloc..boxed..FnBox<A>>::call_box::h589d2091babf223a\n  40:        0x11345b4d8 - std::sys::thread::Thread::new::thread_start::h9c883b6d445ece46\n  41:     0x7fff9478c99c - _pthread_body\n  42:     0x7fff9478c919 - _pthread_start\n\nerror: Could not compile `faster_path`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/lib.rs --crate-name faster_path --crate-type dylib -g --out-dir /Users/elliott/Code/Public/faster_path/target/debug --emit=dep-info,link -L dependency=/Users/elliott/Code/Public/faster_path/target/debug -L dependency=/Users/elliott/Code/Public/faster_path/target/debug/deps --extern libc=/Users/elliott/Code/Public/faster_path/target/debug/deps/liblibc-6b483f9a7097e9a4.rlib` (exit code: 101)\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34331/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34331/timeline", "performed_via_github_app": null, "state_reason": "completed"}