{"url": "https://api.github.com/repos/rust-lang/rust/issues/50604", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50604/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50604/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50604/events", "html_url": "https://github.com/rust-lang/rust/issues/50604", "id": 321883923, "node_id": "MDU6SXNzdWUzMjE4ODM5MjM=", "number": 50604, "title": "Spurious access violation (exit code: 3221225477) when compiling libsyntax with MSVC", "user": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 266005765, "node_id": "MDU6TGFiZWwyNjYwMDU3NjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-msvc", "name": "O-windows-msvc", "color": "6e6ec0", "default": false, "description": "Toolchain: MSVC, Operating system: Windows"}, {"id": 371266501, "node_id": "MDU6TGFiZWwzNzEyNjY1MDE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-spurious", "name": "A-spurious", "color": "f7e101", "default": false, "description": "Area: Spurious failures in builds (spuriously == for no apparent reason)"}, {"id": 593503757, "node_id": "MDU6TGFiZWw1OTM1MDM3NTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-infra", "name": "T-infra", "color": "bfd4f2", "default": false, "description": "Relevant to the infrastructure team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-05-10T10:26:59Z", "updated_at": "2021-06-15T09:28:18Z", "closed_at": "2021-06-15T09:28:18Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Symptom: On MSVC builders (Windows), when compiling libsyntax in either stage0 or stage1, the compiler `rustc` will crash with exit code 3221225477 (= 0xc0000005 = access violation). \r\n\r\nWe suspect this is related to #50329 (merged at 2018-05-02T10:13:06Z).\r\n\r\n<details><summary>Sample crash log</summary>\r\n\r\n```\r\nerror: Could not compile `syntax`.\r\nCaused by:\r\n  process didn't exit successfully: `C:\\projects\\rust\\build\\bootstrap/debug/rustc --crate-name syntax libsyntax\\lib.rs --color always --error-format json --crate-type dylib --emit=dep-info,link -C prefer-dynamic -C opt-level=3 -C metadata=7ac7668085f2897f -C extra-filename=-7ac7668085f2897f --out-dir C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps --target i686-pc-windows-msvc -L dependency=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps -L dependency=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\release\\deps --extern bitflags=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\libbitflags-9ba1f7028730cd0a.rlib --extern log=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\liblog-001e68131969f2ec.rlib --extern rustc_errors=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\rustc_errors-ffee8b3fc130b2b1.dll --extern syntax_pos=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\syntax_pos-1048adc53f632b89.dll --extern rustc_data_structures=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\rustc_data_structures-3a7257003acd8e8b.dll --extern scoped_tls=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\libscoped_tls-49f5fac2ae1c97d0.rlib --extern serialize=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\serialize-f37b7ca68fe29329.dll --extern serialize=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\libserialize-f37b7ca68fe29329.rlib --extern rustc_target=C:\\projects\\rust\\build\\i686-pc-windows-msvc\\stage0-rustc\\i686-pc-windows-msvc\\release\\deps\\rustc_target-63878e92b639df83.dll` (exit code: 3221225477)\r\ncommand did not execute successfully: \"C:\\\\projects\\\\rust\\\\build\\\\i686-pc-windows-msvc\\\\stage0/bin\\\\cargo.exe\" \"build\" \"--target\" \"i686-pc-windows-msvc\" \"-j\" \"4\" \"--release\" \"--locked\" \"--color\" \"always\" \"--features\" \"\" \"--manifest-path\" \"C:\\\\projects\\\\rust\\\\src/rustc/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101\r\nthread 'main' panicked at 'cargo must succeed', bootstrap\\compile.rs:1091:9\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\r\n\r\n</details>\r\n\r\nFirst seen on the following PRs:\r\n\r\n* https://github.com/rust-lang/rust/pull/50503#issuecomment-387208721 (2018-05-07T21:14:30Z)\r\n* https://github.com/rust-lang/rust/pull/50161#issuecomment-387980444 (2018-05-10T07:52:11Z)\r\n\r\ncc #33434 (parent issue)", "closed_by": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50604/timeline", "performed_via_github_app": null, "state_reason": "completed"}