{"url": "https://api.github.com/repos/rust-lang/rust/issues/83151", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/83151/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/83151/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/83151/events", "html_url": "https://github.com/rust-lang/rust/issues/83151", "id": 831951011, "node_id": "MDU6SXNzdWU4MzE5NTEwMTE=", "number": 83151, "title": "rustc book should document the ABIs rustc supports", "user": {"login": "mcclure", "id": 277318, "node_id": "MDQ6VXNlcjI3NzMxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/277318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcclure", "html_url": "https://github.com/mcclure", "followers_url": "https://api.github.com/users/mcclure/followers", "following_url": "https://api.github.com/users/mcclure/following{/other_user}", "gists_url": "https://api.github.com/users/mcclure/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcclure/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcclure/subscriptions", "organizations_url": "https://api.github.com/users/mcclure/orgs", "repos_url": "https://api.github.com/users/mcclure/repos", "events_url": "https://api.github.com/users/mcclure/events{/privacy}", "received_events_url": "https://api.github.com/users/mcclure/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-15T15:54:40Z", "updated_at": "2021-03-15T18:12:59Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I am learning Rust. While reading the Rust reference, I learned about the interesting \"ABI\" feature, where `extern \"anystring\"` before a function or `{ }` bare block containing functions will declare functions using a special ABI other than \"Rust\". However I found a problem, which is that there was no list of ABI strings. The reference has a partial list of ABIs but it is incomplete and does not clarify on what platforms those ABI strings are supported.\r\n\r\nI created an [issue about this on the Reference repo](https://github.com/rust-lang/reference/issues/975) and after some discussion my opinion, as well as what I perceive to be the consensus in that issue thread, is that the most appropriate place to document the ABI strings would be the rustc book. (There are some ABIs [already documented in the reference](https://doc.rust-lang.org/stable/reference/items/external-blocks.html#abi) which *are* appropriate for callout in the reference\u2014 three ABIs \"Rust\" \"C\" \"system\" which all implementations are required to implement, and several defined ABIs that \"system\" is guaranteed to alias to\u2014\u00a0but other than those language-reference-required ABIs, which ABI strings are supported and what they do are implementation-defined. As rustc is an implementation [**the** implementation] this means that the complete list should be documented by rustc.)\r\n\r\nHowever if I look in the [rustc book and search the book for the word \"abi\"](https://doc.rust-lang.org/stable/rustc/index.html?search=abi), I find no discussion of the ABI strings.\r\n\r\nApparently people who need this information currently are [consulting the Rust source directly](https://github.com/rust-lang/rust/blob/b593389edbaa9ea0c90f0ed419283842f534e50a/compiler/rustc_target/src/spec/abi.rs#L60-L92), but I feel strongly the source is not an adequate replacement for documentation as it is difficult to find, difficult to read, and contains no details about where the ABIs are available or what they do.\r\n\r\nMy **\"expected behavior\"** is that there should be a section defining the full list of rustc's supported ABI strings in the [rustc book](https://doc.rust-lang.org/stable/rustc), probably a top-level section or a subsection under section 6. For each ABI, this section should list:\r\n\r\n* What does the ABI do?\r\n* On what platforms and ISAs (x86_32 Windows, x86_64 Windows, Mac, etc) is the ABI available?\r\n* Is the ABI legal on function items or only extern blocks? (For example it was explained to me in the Rust reference issue that ABI \"rust-intrinsic\" is only allowed on extern blocks.)\r\n* Is support for the ABI stable or unstable? (The Rust reference does not document unstable language features because it is paired with [an entire separate book documenting the unstable features](https://doc.rust-lang.org/nightly/unstable-book/), but the rustc book does not have this kind of split and has nowhere else documentation for the unstable features could go.)\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/83151/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/83151/timeline", "performed_via_github_app": null, "state_reason": null}