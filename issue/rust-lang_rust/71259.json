{"url": "https://api.github.com/repos/rust-lang/rust/issues/71259", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/71259/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/71259/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/71259/events", "html_url": "https://github.com/rust-lang/rust/issues/71259", "id": 602190712, "node_id": "MDU6SXNzdWU2MDIxOTA3MTI=", "number": 71259, "title": "Duplicate crate macros failing to differentiate", "user": {"login": "LucioFranco", "id": 5758045, "node_id": "MDQ6VXNlcjU3NTgwNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5758045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LucioFranco", "html_url": "https://github.com/LucioFranco", "followers_url": "https://api.github.com/users/LucioFranco/followers", "following_url": "https://api.github.com/users/LucioFranco/following{/other_user}", "gists_url": "https://api.github.com/users/LucioFranco/gists{/gist_id}", "starred_url": "https://api.github.com/users/LucioFranco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LucioFranco/subscriptions", "organizations_url": "https://api.github.com/users/LucioFranco/orgs", "repos_url": "https://api.github.com/users/LucioFranco/repos", "events_url": "https://api.github.com/users/LucioFranco/events{/privacy}", "received_events_url": "https://api.github.com/users/LucioFranco/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-04-17T19:36:25Z", "updated_at": "2020-04-18T14:24:40Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Here is a reproduction:\r\n\r\nhttps://github.com/LucioFranco/rustc-duplicate-macro-bug/\r\n\r\nI've added comments on how to trigger the bug. But it looks like if we have one crate but two versions imported into the same project. Aka using cargo's rename feature, then rust picks up that if we use one of the macros that the other one even if its from a different version is the same. Commenting out the tower01 `assert_request_eq` allows the second one to compile properly. If its not commented out the `tower03` version will fail to compile because it is attempting to use the `tower01` version which doesn't await the inner future.\r\n\r\n### Meta\r\n\r\nThis happens currently on `rustc 1.42.0 (b8cedc004 2020-03-09)` but not on a newer nightly `cargo 1.44.0-nightly (390e8f245 2020-04-07)`. So this has probably been fixed but I couldn't find any issue for this specific problem.\r\n\r\n</p>\r\n</details>\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/71259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/71259/timeline", "performed_via_github_app": null, "state_reason": null}