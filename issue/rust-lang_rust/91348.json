{"url": "https://api.github.com/repos/rust-lang/rust/issues/91348", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91348/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91348/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91348/events", "html_url": "https://github.com/rust-lang/rust/issues/91348", "id": 1065745730, "node_id": "I_kwDOAAsO6M4_hf1C", "number": 91348, "title": "GATs: repeating not-locally-required bounds on impls?", "user": {"login": "dhardy", "id": 134893, "node_id": "MDQ6VXNlcjEzNDg5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/134893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhardy", "html_url": "https://github.com/dhardy", "followers_url": "https://api.github.com/users/dhardy/followers", "following_url": "https://api.github.com/users/dhardy/following{/other_user}", "gists_url": "https://api.github.com/users/dhardy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhardy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhardy/subscriptions", "organizations_url": "https://api.github.com/users/dhardy/orgs", "repos_url": "https://api.github.com/users/dhardy/repos", "events_url": "https://api.github.com/users/dhardy/events{/privacy}", "received_events_url": "https://api.github.com/users/dhardy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1485960423, "node_id": "MDU6TGFiZWwxNDg1OTYwNDIz", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-generic_associated_types", "name": "F-generic_associated_types", "color": "f9c0cc", "default": false, "description": "`#![feature(generic_associated_types)]` a.k.a. GATs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-11-29T08:28:31Z", "updated_at": "2021-12-13T23:21:42Z", "closed_at": "2021-12-13T23:21:42Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "See: #87479\r\n\r\nSo, I believe #89970 broke my code [kas-text](https://github.com/kas-gui/kas-text/blob/master/src/format.rs) (nightly rustc + `--feature gat`).\r\n\r\n> Let's focus on the iter function. The first thing to realize is that we know that Self: 'a because of &'a self\r\n\r\nThis isn't true in *general*, though it may be in specific instances. My code (reduced) exemplifies this perfectly:\r\n```rust\r\npub trait FormattableText: std::fmt::Debug {\r\n    type FontTokenIter<'a>: Iterator<Item = FontToken>;\r\n\r\n    fn font_tokens<'a>(&'a self, dpp: f32, pt_size: f32) -> Self::FontTokenIter<'a>;\r\n}\r\n\r\nimpl<'t> FormattableText for &'t str {\r\n    type FontTokenIter<'a> = std::iter::Empty<FontToken>;\r\n\r\n    fn font_tokens<'a>(&'a self, _: f32, _: f32) -> Self::FontTokenIter<'a> {\r\n        std::iter::empty()\r\n    }\r\n}\r\n```\r\nHere, `font_tokens` *may* return an iterator over an instance of `Self`... but it also may not (`&str` does not have any formatting). ~~A possible workaround in the impl is to write a custom iterator with a reference to the `&str` *anyway*, but this seems unnecessary.~~", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91348/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91348/timeline", "performed_via_github_app": null, "state_reason": "completed"}