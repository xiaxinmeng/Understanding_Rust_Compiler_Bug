{"url": "https://api.github.com/repos/rust-lang/rust/issues/24956", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24956/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24956/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24956/events", "html_url": "https://github.com/rust-lang/rust/issues/24956", "id": 71977203, "node_id": "MDU6SXNzdWU3MTk3NzIwMw==", "number": 24956, "title": "ICE when run-pass test match-arm-statics is compiled with debuginfo", "user": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-04-29T20:14:05Z", "updated_at": "2017-02-02T20:56:49Z", "closed_at": "2017-02-02T20:56:49Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Compiling the test match-arm-statics with debug information (`rustc -g src/test/run-pass/match-arm-statics.rs`) causes an ICE:\n\n```\n../src/test/run-pass/match-arm-statics.rs:135:9: 135:19 error: internal compiler error: debuginfo: Could not find scope info for node NodeExpr(Expr { id: 48, node: ExprLit(Spanned { node: LitBool(false), span: Span { lo: BytePos(868), hi: BytePos(873), expn_id: ExpnId(4294967295) } }), span: Span { lo: BytePos(868), hi: BytePos(873), expn_id: ExpnId(4294967295) } })\n../src/test/run-pass/match-arm-statics.rs:135         STATIC_FOO => 3,\n                                                      ^~~~~~~~~~\n<std macros>:1:1: 9:39 note: in expansion of assert_eq!\n../src/test/run-pass/match-arm-statics.rs:132:5: 141:11 note: expansion site\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /home/ariel/Rust/source.arielb1/src/libsyntax/diagnostic.rs:170\n\nstack backtrace:\n   1:     0x7f4bfdd55ecf - sys::backtrace::write::h559186d920312a32qYr\n                        at /home/ariel/Rust/source.arielb1/src/libstd/sys/unix/backtrace.rs:158\n   2:     0x7f4bfdd7ed72 - panicking::on_panic::h8564e17e4133b3e8low\n                        at /home/ariel/Rust/source.arielb1/src/libstd/panicking.rs:47\n   3:     0x7f4bfdcc141e - rt::unwind::begin_unwind_inner::hfbbfddab1bfb087av3v\n                        at /home/ariel/Rust/source.arielb1/src/libstd/rt/unwind.rs:569\n   4:     0x7f4bf9b41367 - rt::unwind::begin_unwind::h7619580709946955206\n                        at /home/ariel/Rust/source.arielb1/src/libstd/rt/unwind.rs:522\n   5:     0x7f4bf9b412fe - diagnostic::SpanHandler::span_bug::hb39c3fcb069eb3d0cFB\n                        at /home/ariel/Rust/source.arielb1/build/<std macros>:3\n   6:     0x7f4bfa7fee68 - session::Session::span_bug::hddd01ab440b6016b3yq\n                        at /home/ariel/Rust/source.arielb1/src/librustc/session/mod.rs:190\n   7:     0x7f4bfc445bd8 - trans::debuginfo::scope_metadata::hf9fd39861fe17736Qwx\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/debuginfo.rs:1783\n   8:     0x7f4bfc449003 - trans::debuginfo::set_source_location::h85432d1b64ef8ed5yZw\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/debuginfo.rs:1192\n   9:     0x7f4bfc31a06e - trans::debuginfo::DebugLoc::apply::hbde8b0970990a654WXw\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/debuginfo.rs:1131\n  10:     0x7f4bfc2067fb - trans::build::ICmp::hb71e7910d1b8469dObk\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/build.rs:869\n  11:     0x7f4bfc2419e1 - trans::base::compare_scalar_types::h706f31ea0109b3d0Leg\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:330\n  12:     0x7f4bfc52c1df - trans::_match::compare_values::h710e2cbfb6f1c2edYnH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:846\n  13:     0x7f4bfc536598 - trans::_match::compile_submatch_continue::h16329fc951fe728aMJH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1194\n  14:     0x7f4bfc533cd8 - trans::_match::compile_submatch::h6a4ca73fe05b4716SDH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1013\n  15:     0x7f4bfc537222 - trans::_match::compile_submatch_continue::h16329fc951fe728aMJH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1257\n  16:     0x7f4bfc533cd8 - trans::_match::compile_submatch::h6a4ca73fe05b4716SDH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1013\n  17:     0x7f4bfc5357a8 - trans::_match::compile_submatch_continue::h16329fc951fe728aMJH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1103\n  18:     0x7f4bfc533cd8 - trans::_match::compile_submatch::h6a4ca73fe05b4716SDH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1013\n  19:     0x7f4bfc5357a8 - trans::_match::compile_submatch_continue::h16329fc951fe728aMJH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1103\n  20:     0x7f4bfc533cd8 - trans::_match::compile_submatch::h6a4ca73fe05b4716SDH\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1013\n  21:     0x7f4bfc53c287 - trans::_match::trans_match_inner::h5f0836ef38b9f073DbI\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1492\n  22:     0x7f4bfc4a6ba9 - trans::_match::trans_match::h239fad96f5ef96e0n2H\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1294\n  23:     0x7f4bfc495ee4 - trans::expr::trans_rvalue_dps_unadjusted::h80f896fb3faf1245F7A\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:961\n  24:     0x7f4bfc421019 - trans::expr::trans_into::h3ccaf3b6ea8f775508z\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:191\n  25:     0x7f4bfc495c6f - trans::expr::trans_rvalue_dps_unadjusted::h80f896fb3faf1245F7A\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:952\n  26:     0x7f4bfc49591f - trans::expr::trans_unadjusted::h268cb494e1c93df6cCA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:514\n  27:     0x7f4bfc2174b3 - trans::expr::trans::h981e3932d3447597jfA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:268\n  28:     0x7f4bfc4203c3 - trans::expr::trans_to_lvalue::h7887d39729fe05aelBA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:477\n  29:     0x7f4bfc4a05a4 - trans::expr::trans_addr_of::h8d9a53b67ba55fb7FXB\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:1618\n  30:     0x7f4bfc49ca84 - trans::expr::trans_datum_unadjusted::h7cc55f88be98701dIGA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:601\n  31:     0x7f4bfc4956bf - trans::expr::trans_unadjusted::h268cb494e1c93df6cCA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:496\n  32:     0x7f4bfc420f98 - trans::expr::trans_into::h3ccaf3b6ea8f775508z\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:188\n  33:     0x7f4bfc27f4e8 - trans::expr::trans_adt::h0f77a7165e0d6f39oDB\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:1468\n  34:     0x7f4bfc4962b7 - trans::expr::trans_rvalue_dps_unadjusted::h80f896fb3faf1245F7A\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:1030\n  35:     0x7f4bfc49591f - trans::expr::trans_unadjusted::h268cb494e1c93df6cCA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:514\n  36:     0x7f4bfc2174b3 - trans::expr::trans::h981e3932d3447597jfA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:268\n  37:     0x7f4bfc4203c3 - trans::expr::trans_to_lvalue::h7887d39729fe05aelBA\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:477\n  38:     0x7f4bfc53bd3d - trans::_match::trans_match_inner::h5f0836ef38b9f073DbI\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/macros.rs:1438\n  39:     0x7f4bfc4a6ba9 - trans::_match::trans_match::h239fad96f5ef96e0n2H\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/_match.rs:1294\n  40:     0x7f4bfc495ee4 - trans::expr::trans_rvalue_dps_unadjusted::h80f896fb3faf1245F7A\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:961\n  41:     0x7f4bfc421019 - trans::expr::trans_into::h3ccaf3b6ea8f775508z\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:191\n  42:     0x7f4bfc2797ad - trans::controlflow::trans_block::hb579432ea112bfeen6u\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/controlflow.rs:135\n  43:     0x7f4bfc495f66 - trans::expr::trans_rvalue_dps_unadjusted::h80f896fb3faf1245F7A\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:964\n  44:     0x7f4bfc421019 - trans::expr::trans_into::h3ccaf3b6ea8f775508z\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/expr.rs:191\n  45:     0x7f4bfc420186 - trans::controlflow::trans_stmt_semi::hbc63e50e355c2024r5u\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/controlflow.rs:91\n  46:     0x7f4bfc41fe4f - trans::controlflow::trans_stmt::h05ea3db289f03891I1u\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/controlflow.rs:59\n  47:     0x7f4bfc27948d - trans::controlflow::trans_block::hb579432ea112bfeen6u\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/controlflow.rs:113\n  48:     0x7f4bfc2766c2 - trans::base::trans_closure::h6d1530c49561d4cdIFh\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:1575\n  49:     0x7f4bfc279fbd - trans::base::trans_fn::hc581d87839a8bc70qQh\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:1626\n  50:     0x7f4bfc286c54 - trans::base::trans_item::h90343d4245c9b7d4Cei\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:1974\n  51:     0x7f4bfc29221c - trans::base::trans_mod::h47fae6c30e7d7488dli\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:2072\n  52:     0x7f4bfc2ae192 - trans::base::trans_crate::h411bbccf6051a049p3i\n                        at /home/ariel/Rust/source.arielb1/src/librustc_trans/trans/base.rs:2678\n  53:     0x7f4bfe5a545c - driver::phase_4_translate_to_llvm::closure.23322\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/driver.rs:726\n  54:     0x7f4bfe5a4e56 - util::common::time::h107191199815012417\n                        at /home/ariel/Rust/source.arielb1/src/librustc/util/common.rs:39\n  55:     0x7f4bfe419f32 - driver::phase_4_translate_to_llvm::hd66343dc557f2851nOa\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/driver.rs:725\n  56:     0x7f4bfe39dce5 - driver::compile_input::he2415a83948b6cffQba\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/driver.rs:141\n  57:     0x7f4bfe61650f - run_compiler::h4bb177005d929e8465b\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/lib.rs:156\n  58:     0x7f4bfe612feb - run::closure.26036\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/lib.rs:99\n  59:     0x7f4bfe6121d8 - monitor::closure.26008\n                        at /home/ariel/Rust/source.arielb1/src/librustc_driver/lib.rs:813\n  60:     0x7f4bfe6120b5 - boxed::F.FnBox<A>::call_box::h5443103248061583594\n                        at /home/ariel/Rust/source.arielb1/src/liballoc/boxed.rs:369\n  61:     0x7f4bfe61183e - boxed::Box<FnBox<A, Output $u3d$$u20$R$GT$$u2b$$u20$Send$u20$$u2b$$u20$$u27$a$GT$.FnOnce$LT$A$GT$::call_once::h13737207089984465542\n                        at /home/ariel/Rust/source.arielb1/src/liballoc/boxed.rs:385\n  62:     0x7f4bfe610e0b - thread::Builder::spawn_inner::closure.25963\n                        at /home/ariel/Rust/source.arielb1/src/libstd/thread/mod.rs:346\n  63:     0x7f4bfe610d8e - rt::unwind::try::try_fn::__rust_abi::h14508903566358963269\n                        at /home/ariel/Rust/source.arielb1/src/libstd/rt/unwind.rs:139\n  64:     0x7f4bfe610d29 - rt::unwind::try::try_fn::h14508903566358963269\n  65:     0x7f4bfdeadf28 - rust_try_inner\n  66:     0x7f4bfdeadf15 - rust_try\n  67:     0x7f4bfe6102d9 - rt::unwind::try::h16873351650945250128\n                        at /home/ariel/Rust/source.arielb1/src/libstd/rt/unwind.rs:125\n  68:     0x7f4bfe6100bc - thread::Builder::spawn_inner::closure.25885\n                        at /home/ariel/Rust/source.arielb1/src/libstd/thread/mod.rs:346\n  69:     0x7f4bfe611a70 - boxed::F.FnBox<A>::call_box::h6821850039505705260\n                        at /home/ariel/Rust/source.arielb1/src/liballoc/boxed.rs:369\n  70:     0x7f4bfdd4db0e - boxed::Box<FnBox<A, Output $u3d$$u20$R$GT$$u2b$$u20$$u27$a$GT$.FnOnce$LT$A$GT$::call_once::h8025055706015138956\n                        at /home/ariel/Rust/source.arielb1/src/liballoc/boxed.rs:377\n  71:     0x7f4bfdd4da46 - sys_common::thread::start_thread::h849d0760ffa46914o0q\n                        at /home/ariel/Rust/source.arielb1/src/libstd/sys/common/thread.rs:30\n  72:     0x7f4bfdd7acf4 - sys::thread::Thread::new::thread_start::__rust_abi\n                        at /home/ariel/Rust/source.arielb1/src/libstd/sys/unix/thread.rs:77\n  73:     0x7f4bfdd7acd4 - sys::thread::Thread::new::thread_start::h246b8d39c875ef72R9u\n  74:     0x7f4bf70b70a3 - start_thread\n  75:     0x7f4bfd92c04c - clone\n  76:                0x0 - <unknown>\n```\n\nThis affects various versions of rustc including `6b95d8bed 2015-04-09` and `551a74ddd 2015-04-29`, and causes `make test` to fail when rustc is configured with `--enable-debuginfo`.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24956/timeline", "performed_via_github_app": null, "state_reason": "completed"}