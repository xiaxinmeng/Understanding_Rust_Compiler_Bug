{"url": "https://api.github.com/repos/rust-lang/rust/issues/77933", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/77933/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/77933/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/77933/events", "html_url": "https://github.com/rust-lang/rust/issues/77933", "id": 721401695, "node_id": "MDU6SXNzdWU3MjE0MDE2OTU=", "number": 77933, "title": "Tracking Issue for -Z codegen-backend", "user": {"login": "XAMPPRocky", "id": 4464295, "node_id": "MDQ6VXNlcjQ0NjQyOTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4464295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/XAMPPRocky", "html_url": "https://github.com/XAMPPRocky", "followers_url": "https://api.github.com/users/XAMPPRocky/followers", "following_url": "https://api.github.com/users/XAMPPRocky/following{/other_user}", "gists_url": "https://api.github.com/users/XAMPPRocky/gists{/gist_id}", "starred_url": "https://api.github.com/users/XAMPPRocky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/XAMPPRocky/subscriptions", "organizations_url": "https://api.github.com/users/XAMPPRocky/orgs", "repos_url": "https://api.github.com/users/XAMPPRocky/repos", "events_url": "https://api.github.com/users/XAMPPRocky/events{/privacy}", "received_events_url": "https://api.github.com/users/XAMPPRocky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 3537211959, "node_id": "LA_kwDOAAsO6M7S1ZI3", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-tracking-impl-incomplete", "name": "S-tracking-impl-incomplete", "color": "4682b4", "default": false, "description": ""}, {"id": 5226909857, "node_id": "LA_kwDOAAsO6M8AAAABN4xQoQ", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-cli", "name": "A-cli", "color": "f7e101", "default": false, "description": "Area: Command line interface to the compiler."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-10-14T12:08:12Z", "updated_at": "2023-03-05T01:55:13Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for creating a tracking issue! \ud83d\udcdc Tracking issues are for tracking a\r\nfeature from implementation to stabilisation. Make sure to include the relevant\r\nRFC for the feature if it has one. Otherwise provide a short summary of the\r\nfeature and link any relevant PRs or issues, and remove any sections that are\r\nnot relevant to the feature.\r\n\r\nRemember to add team labels to the tracking issue.\r\nFor a language team feature, this would e.g., be `T-lang`.\r\nSuch a feature should also be labeled with e.g., `F-my_feature`.\r\nThis label is used to associate issues (e.g., bugs and design questions) to the feature.\r\n-->\r\n\r\nThis is a tracking issue for the `-Zcodegen-backend` compiler flag.\r\n\r\nrustc today only supports one stable backend (\"llvm\"), but it has many unstable backends.\r\n\r\nIn the future, it will support multiple stable backends.\r\n\r\nOur plan is that the stable backends will all be allowlisted in the compiler. The general pattern will be that every stable backend will be denoted by an identifier with no `.` in its name (e.g. \"cranelift\", \"gcc\", \"llvm\"). When we start reaching a point where one of the alternative backends is getting close to being ready to stabilize, we will then discuss how to offer a stable form of this flag (i.e. `-C codegen-backend` flag).\r\n\r\nMeanwhile, the `-Z codegen-backend` flag will always *unstably* support an interface for connecting to an arbitrary backend loaded as a dynamic library, as described below.\r\n\r\n----\r\n\r\nThis flag unstably allows you specify a path to a dynamic library containing a function named `__rustc_codegen_backend` with a signature of `fn() -> Box<dyn  rustc_codegen_ssa::traits::CodegenBackend>` to use as code generation backend at runtime. ([`CodegenBackend` trait](https://doc.rust-lang.org/nightly/nightly-rustc/rustc_codegen_ssa/traits/trait.CodegenBackend.html))\r\n\r\n### Example\r\n\r\n```rust\r\nuse rustc_codegen_ssa::traits::CodegenBackend;\r\n\r\nstruct MyBackend;\r\n\r\nimpl CodegenBackend for MyBackend {\r\n   // Implement codegen methods\r\n}\r\n\r\n#[no_mangle]\r\npub fn __rustc_codegen_backend() -> Box<dyn CodegenBackend> {\r\n    Box::new(MyBackend)\r\n}\r\n```\r\n\r\n### About tracking issues\r\n\r\nTracking issues are used to record the overall progress of implementation.\r\nThey are also used as hubs connecting to other relevant issues, e.g., bugs or open design questions.\r\nA tracking issue is however *not* meant for large scale discussion, questions, or bug reports about a feature.\r\nInstead, open a dedicated issue for the specific matter and add the relevant feature gate label.\r\n\r\n### Implementation history\r\n\r\n<!--\r\nInclude a list of all the PRs that were involved in implementing the feature.\r\n-->\r\n\r\n- Initial Implementation https://github.com/rust-lang/rust/pull/45684\r\n- Add `codegen-backend` to deps https://github.com/rust-lang/rust/pull/77565\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/77933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/77933/timeline", "performed_via_github_app": null, "state_reason": null}