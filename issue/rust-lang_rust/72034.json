{"url": "https://api.github.com/repos/rust-lang/rust/issues/72034", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72034/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72034/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72034/events", "html_url": "https://github.com/rust-lang/rust/issues/72034", "id": 615051353, "node_id": "MDU6SXNzdWU2MTUwNTEzNTM=", "number": 72034, "title": "Including a linker script with a built in target", "user": {"login": "overdrivenpotato", "id": 5241210, "node_id": "MDQ6VXNlcjUyNDEyMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5241210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/overdrivenpotato", "html_url": "https://github.com/overdrivenpotato", "followers_url": "https://api.github.com/users/overdrivenpotato/followers", "following_url": "https://api.github.com/users/overdrivenpotato/following{/other_user}", "gists_url": "https://api.github.com/users/overdrivenpotato/gists{/gist_id}", "starred_url": "https://api.github.com/users/overdrivenpotato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/overdrivenpotato/subscriptions", "organizations_url": "https://api.github.com/users/overdrivenpotato/orgs", "repos_url": "https://api.github.com/users/overdrivenpotato/repos", "events_url": "https://api.github.com/users/overdrivenpotato/events{/privacy}", "received_events_url": "https://api.github.com/users/overdrivenpotato/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 106552066, "node_id": "MDU6TGFiZWwxMDY1NTIwNjY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-MIPS", "name": "O-MIPS", "color": "6e6ec0", "default": false, "description": "Target: MIPS processors"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 632453790, "node_id": "MDU6TGFiZWw2MzI0NTM3OTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-target-specs", "name": "A-target-specs", "color": "f7e101", "default": false, "description": "Area: compile-target specifications"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-05-09T00:29:36Z", "updated_at": "2020-05-09T20:17:44Z", "closed_at": "2020-05-09T20:17:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hello! I'm filing an issue here after being redirected through Discord and Zulip. I'm trying to add support for a new target which requires an associated linker script. I can confirm it works locally with `rust-lld` and a custom JSON target file. I can't seem to find a way to add this linker script to rustc, so I am asking for help.\r\n\r\nFor context, the platform is the Sony PSP. It's essentially a bare metal `mips2` target which requires a custom linker script for special `.rodata.xyz` sections which cannot be merged into `.rodata`. These sections store module information such as the module entry point, and the platform uses these for linking to system libraries as well.\r\n\r\n[Here] is an example of the linker script that the platform needs. Note the special handling of the `.rodata.sceNid` section, for example.\r\n\r\nThe PSP homebrew community does not seem to care about adding LLVM support for C/C++, rather they are focused on a GCC-based toolchain, so there is no real demand to merge this upstream in LLVM. Besides this, LLVM can correctly compile object code for this target, it only needs this special linker script for the final executable section layout.\r\n\r\nI am familiar enough with the codebase to add this target spec, but how can I embed this linker script along with it?\r\n\r\n[Here]: https://github.com/overdrivenpotato/rust-psp/blob/master/examples/hello-world/linkfile.ld", "closed_by": {"login": "overdrivenpotato", "id": 5241210, "node_id": "MDQ6VXNlcjUyNDEyMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5241210?v=4", "gravatar_id": "", "url": "https://api.github.com/users/overdrivenpotato", "html_url": "https://github.com/overdrivenpotato", "followers_url": "https://api.github.com/users/overdrivenpotato/followers", "following_url": "https://api.github.com/users/overdrivenpotato/following{/other_user}", "gists_url": "https://api.github.com/users/overdrivenpotato/gists{/gist_id}", "starred_url": "https://api.github.com/users/overdrivenpotato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/overdrivenpotato/subscriptions", "organizations_url": "https://api.github.com/users/overdrivenpotato/orgs", "repos_url": "https://api.github.com/users/overdrivenpotato/repos", "events_url": "https://api.github.com/users/overdrivenpotato/events{/privacy}", "received_events_url": "https://api.github.com/users/overdrivenpotato/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72034/timeline", "performed_via_github_app": null, "state_reason": "completed"}