{"url": "https://api.github.com/repos/rust-lang/rust/issues/19129", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/19129/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/19129/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/19129/events", "html_url": "https://github.com/rust-lang/rust/issues/19129", "id": 49475505, "node_id": "MDU6SXNzdWU0OTQ3NTUwNQ==", "number": 19129, "title": "ICE: When implementing trait with a generic parameter and an associated output type", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-11-20T00:53:39Z", "updated_at": "2014-12-17T23:43:23Z", "closed_at": "2014-12-17T23:43:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "### STR\n\n``` rust\n#![feature(associated_types)]\n\n// This was an ICE (#17388), which got fixed by #18868\ntrait Trait<T> {\n    type Output;\n\n    fn fun() -> <Self as Trait<T>>::Output;\n}\n\n// The new ICE gets triggered by this `impl`\nimpl<T> Trait<T> for () {\n    type Output = ();\n\n    fn fun() {}\n}\n\nfn main() {}\n```\n### Output\n\n``` rust\nice.rs:1:1: 1:1 error: internal compiler error: Type parameter `Output/AssocSpace.1` (Output/AssocSpace/1) out of range when substituting (root type=Output) substs=Substs[types=[[T];[()];[()];[]], regions=[[];[];[];[]]]\nice.rs:1 #![feature(associated_types)]\n         ^\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' panicked at 'Box<Any>', /var/tmp/paludis/build/dev-lang-rust-scm/work/rust-scm/src/libsyntax/diagnostic.rs:121\n\nstack backtrace:\n   1:     0x7f72dcabfae0 - rt::backtrace::imp::write::hdd602ae028f48d0dvVs\n   2:     0x7f72dcac2b70 - <unknown>\n   3:     0x7f72dd263310 - unwind::begin_unwind_inner::hbce8e4e8263dca1ePad\n   4:     0x7f72da970ac0 - <unknown>\n   5:     0x7f72da970a40 - diagnostic::SpanHandler::span_bug::hbe9748378cce230fGYF\n   6:     0x7f72dba52970 - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h3e05f8a78cf2b146RLP\n   7:     0x7f72dbaf3800 - <unknown>\n   8:     0x7f72dbaf33b0 - <unknown>\n   9:     0x7f72dbaf2af0 - <unknown>\n  10:     0x7f72dbb2c5b0 - <unknown>\n  11:     0x7f72dbb2c410 - <unknown>\n  12:     0x7f72dbb2bf50 - <unknown>\n  13:     0x7f72dbb19410 - middle::ty::Generics<'tcx>::to_bounds::h3795ba6b160f5212yd1\n  14:     0x7f72dbbe66b0 - middle::typeck::check::wf::BoundsChecker<'cx, 'tcx>::check_trait_ref::ha7aa8a645e91eafdZ9g\n  15:     0x7f72dbbe48c0 - <unknown>\n  16:     0x7f72dbbe1ae0 - <unknown>\n  17:     0x7f72dbbe6c70 - middle::typeck::check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>.Visitor<'v>::visit_item::ha3e9d13b541ef7c6k8g\n  18:     0x7f72dbc3bb50 - middle::typeck::check::check_item_types::h754a0f7a04b7367639h\n  19:     0x7f72dbfdf590 - <unknown>\n  20:     0x7f72dbfde7a0 - middle::typeck::check_crate::h03aa0a74283c33108PL\n  21:     0x7f72dd75bcc0 - driver::driver::phase_3_run_analysis_passes::h13d5815dc0529392D5R\n  22:     0x7f72dd750ae0 - driver::driver::compile_input::hce9f8a5af8c23ae8nMR\n  23:     0x7f72dd7d51d0 - <unknown>\n  24:     0x7f72dd7d50c0 - <unknown>\n  25:     0x7f72dd5e2d50 - <unknown>\n  26:     0x7f72dd5e2b40 - <unknown>\n  27:     0x7f72ddaf4ba0 - <unknown>\n  28:     0x7f72dd2b2670 - <unknown>\n  29:     0x7f72dd2b2660 - rust_try\n  30:     0x7f72dd260c70 - unwind::try::hc967dd74749deb3arZc\n  31:     0x7f72dd260b00 - task::Task::run::h236da885853fa0e4h5b\n  32:     0x7f72ddaf48e0 - <unknown>\n  33:     0x7f72dd262320 - <unknown>\n  34:     0x7f72d7d451d0 - start_thread\n  35:     0x7f72dcf391b9 - clone\n  36:                0x0 - <unknown>\n```\n### Version\n#19113 + #18868 on top of bfaa7bc\n\ncc @nikomatsakis \n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/19129/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/19129/timeline", "performed_via_github_app": null, "state_reason": "completed"}