{"url": "https://api.github.com/repos/rust-lang/rust/issues/32246", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32246/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32246/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32246/events", "html_url": "https://github.com/rust-lang/rust/issues/32246", "id": 140711476, "node_id": "MDU6SXNzdWUxNDA3MTE0NzY=", "number": 32246, "title": "`-C codegen-units` shouldn't interfere with LTO", "user": {"login": "MagaTailor", "id": 12054457, "node_id": "MDQ6VXNlcjEyMDU0NDU3", "avatar_url": "https://avatars.githubusercontent.com/u/12054457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MagaTailor", "html_url": "https://github.com/MagaTailor", "followers_url": "https://api.github.com/users/MagaTailor/followers", "following_url": "https://api.github.com/users/MagaTailor/following{/other_user}", "gists_url": "https://api.github.com/users/MagaTailor/gists{/gist_id}", "starred_url": "https://api.github.com/users/MagaTailor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MagaTailor/subscriptions", "organizations_url": "https://api.github.com/users/MagaTailor/orgs", "repos_url": "https://api.github.com/users/MagaTailor/repos", "events_url": "https://api.github.com/users/MagaTailor/events{/privacy}", "received_events_url": "https://api.github.com/users/MagaTailor/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2016-03-14T15:42:04Z", "updated_at": "2016-10-08T17:13:10Z", "closed_at": "2016-10-08T17:13:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "If someone enables `lto` in Cargo.toml, like [here,](https://github.com/Stebalien/exa/commit/88b86b61231f493f745efadad5b10183d2195149) and we're using `codegen-units` transparently for every compilation, that leads to failure.\n\nAs `LTO` is not turned on by any of the opt levels and only works for binaries at the moment, it should never derail the whole build at the last possible moment.\nThese two options are mutually exclusive and we are after **optimizations**, therefore `codegen-units` should just be reset to `1`\n\nConversely, if `lto` is enabled transparently for every compilation, it should be ignored for libraries, so it can kick-in for the final link as outlined above.\n", "closed_by": {"login": "MagaTailor", "id": 12054457, "node_id": "MDQ6VXNlcjEyMDU0NDU3", "avatar_url": "https://avatars.githubusercontent.com/u/12054457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MagaTailor", "html_url": "https://github.com/MagaTailor", "followers_url": "https://api.github.com/users/MagaTailor/followers", "following_url": "https://api.github.com/users/MagaTailor/following{/other_user}", "gists_url": "https://api.github.com/users/MagaTailor/gists{/gist_id}", "starred_url": "https://api.github.com/users/MagaTailor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MagaTailor/subscriptions", "organizations_url": "https://api.github.com/users/MagaTailor/orgs", "repos_url": "https://api.github.com/users/MagaTailor/repos", "events_url": "https://api.github.com/users/MagaTailor/events{/privacy}", "received_events_url": "https://api.github.com/users/MagaTailor/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32246/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32246/timeline", "performed_via_github_app": null, "state_reason": "completed"}