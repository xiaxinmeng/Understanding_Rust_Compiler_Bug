{"url": "https://api.github.com/repos/rust-lang/rust/issues/46773", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46773/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46773/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46773/events", "html_url": "https://github.com/rust-lang/rust/issues/46773", "id": 282638951, "node_id": "MDU6SXNzdWUyODI2Mzg5NTE=", "number": 46773, "title": "Compiler panic:  bpos.to_usize() >= mbc.pos.to_usize() + mbc.bytes", "user": {"login": "delehef", "id": 1153808, "node_id": "MDQ6VXNlcjExNTM4MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1153808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/delehef", "html_url": "https://github.com/delehef", "followers_url": "https://api.github.com/users/delehef/followers", "following_url": "https://api.github.com/users/delehef/following{/other_user}", "gists_url": "https://api.github.com/users/delehef/gists{/gist_id}", "starred_url": "https://api.github.com/users/delehef/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/delehef/subscriptions", "organizations_url": "https://api.github.com/users/delehef/orgs", "repos_url": "https://api.github.com/users/delehef/repos", "events_url": "https://api.github.com/users/delehef/events{/privacy}", "received_events_url": "https://api.github.com/users/delehef/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-12-16T17:52:59Z", "updated_at": "2018-02-28T00:16:47Z", "closed_at": "2018-02-28T00:16:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\nrustc --version --verbose\r\n=========================\r\n\r\nrustc 1.24.0-nightly (77efd6800 2017-12-15)\r\nbinary: rustc\r\ncommit-hash: 77efd6800c57ba83923dddbbabf03c7afa6a34a4\r\ncommit-date: 2017-12-15\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.24.0-nightly\r\nLLVM version: 4.0\r\n```\r\n\r\nrustc panics with the following backtrace:\r\n\r\n```\r\nthread 'rustc' panicked at 'assertion failed: bpos.to_usize() >= mbc.pos.to_usize() + mbc.bytes', /checkout/src/libsyntax/codemap.rs:586:16\r\nstack backtrace:\r\n   0:     0x7f288d0be2cb - std::sys::unix::backtrace::tracing::imp::unwind_backtrace::hf03debd250282e5d\r\n                               at /checkout/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1:     0x7f288d0b61fe - std::sys_common::backtrace::print::hc2b1571ec4035b57\r\n                               at /checkout/src/libstd/sys_common/backtrace.rs:68\r\n                               at /checkout/src/libstd/sys_common/backtrace.rs:57\r\n   2:     0x7f288d0c7590 - std::panicking::default_hook::{{closure}}::hbb73a80a69f92519\r\n                               at /checkout/src/libstd/panicking.rs:381\r\n   3:     0x7f288d0c728b - std::panicking::default_hook::hcff6bf77544d5956\r\n                               at /checkout/src/libstd/panicking.rs:391\r\n   4:     0x7f288d0c7a6b - std::panicking::rust_panic_with_hook::h414a68738005788f\r\n                               at /checkout/src/libstd/panicking.rs:577\r\n   5:     0x7f2887d99863 - std::panicking::begin_panic::hf89d9d83300ab923\r\n   6:     0x7f2888008e82 - syntax::codemap::CodeMap::bytepos_to_file_charpos::h05cb956309f8610a\r\n   7:     0x7f288800644f - syntax::codemap::CodeMap::lookup_char_pos::hfa0c0a7f87d3c8bf\r\n   8:     0x7f288800730a - syntax::codemap::CodeMap::span_to_filename::h7ba024b765fb18a4\r\n   9:     0x7f2888009188 - <syntax::codemap::CodeMap as rustc_errors::CodeMapper>::span_to_filename::h76575b8deb828350\r\n  10:     0x7f2887aaa686 - rustc_errors::emitter::EmitterWriter::fix_multispan_in_std_macros::h5c5d0294a14a3b1d\r\n  11:     0x7f2887aa6a56 - <rustc_errors::emitter::EmitterWriter as rustc_errors::emitter::Emitter>::emit::h827806157bd8e50d\r\n  12:     0x7f2887ab8c44 - rustc_errors::Handler::emit_db::hdf22b8fa97bffc91\r\n  13:     0x7f2887aa036d - rustc_errors::diagnostic_builder::DiagnosticBuilder::emit::h82d0bf9edc975904\r\n  14:     0x7f288b00815d - rustc_borrowck::borrowck::check_loans::CheckLoanCtxt::report_error_if_loans_conflict::he15fb3fbd96594b0\r\n  15:     0x7f288aff1a76 - <rustc::middle::dataflow::DataFlowContext<'a, 'tcx, O>>::each_bit_on_entry::h22cfa9abf7662a2b\r\n  16:     0x7f288b00766b - <rustc_borrowck::borrowck::check_loans::CheckLoanCtxt<'a, 'tcx> as rustc::middle::expr_use_visitor::Delegate<'tcx>>::borrow::h13af95cc19c1ed24\r\n  17:     0x7f288920274d - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  18:     0x7f288920383e - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  19:     0x7f2889202ad1 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  20:     0x7f28892030c9 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  21:     0x7f28892030bd - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  22:     0x7f28892028f1 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  23:     0x7f2889203021 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  24:     0x7f2889202eec - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  25:     0x7f2889203ae2 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_local::h7254fd9416a0b3f4\r\n  26:     0x7f2889202914 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  27:     0x7f28892030c9 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  28:     0x7f2889203021 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  29:     0x7f2889202eec - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  30:     0x7f2889203ae2 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_local::h7254fd9416a0b3f4\r\n  31:     0x7f2889202914 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  32:     0x7f28892028f1 - rustc::middle::expr_use_visitor::ExprUseVisitor::walk_expr::h2043d4449837b4ee\r\n  33:     0x7f288b007ead - rustc_borrowck::borrowck::check_loans::check_loans::hf65b6e2d7f341e6b\r\n  34:     0x7f288b011af2 - rustc_borrowck::borrowck::borrowck::h55097c950cdf8de8\r\n  35:     0x7f288908a1a2 - rustc::dep_graph::graph::DepGraph::with_task_impl::hc936e4888d26fd84\r\n  36:     0x7f2888d7928e - rustc_errors::Handler::track_diagnostics::hb7e3dbdf5a363cd7\r\n  37:     0x7f2888c822c0 - rustc::ty::maps::plumbing::<impl rustc::ty::context::TyCtxt<'a, 'gcx, 'tcx>>::cycle_check::hd0785b60d313bd66\r\n  38:     0x7f2889118aa2 - rustc::ty::maps::<impl rustc::ty::maps::queries::borrowck<'tcx>>::force::h21c9a049284db670\r\n  39:     0x7f2889119220 - rustc::ty::maps::<impl rustc::ty::maps::queries::borrowck<'tcx>>::try_get::h696a9faacabc8bae\r\n  40:     0x7f2888f3dc4a - rustc::ty::maps::TyCtxtAt::borrowck::h838bd68468de71a5\r\n  41:     0x7f2888ca6870 - rustc::ty::maps::<impl rustc::ty::context::TyCtxt<'a, 'tcx, 'lcx>>::borrowck::h708b97814046c0a4\r\n  42:     0x7f288b0113df - rustc_borrowck::borrowck::check_crate::h449a99ff1a4ce179\r\n  43:     0x7f288d5033e8 - <std::thread::local::LocalKey<T>>::with::h4fd1ef26c0a5991b\r\n  44:     0x7f288d5086a6 - <std::thread::local::LocalKey<T>>::with::hcf2ee49dc727d320\r\n  45:     0x7f288d55eaac - rustc::ty::context::TyCtxt::create_and_enter::h5b7a23885092ff7b\r\n  46:     0x7f288d4b3f70 - rustc_driver::driver::compile_input::h25bdc15f9a01b342\r\n  47:     0x7f288d539ea8 - rustc_driver::run_compiler::h1ec6f4bd93a58850\r\n  48:     0x7f288d511941 - std::sys_common::backtrace::__rust_begin_short_backtrace::hdcf43b2f9f3b4406\r\n  49:     0x7f288d0fca5e - __rust_maybe_catch_panic\r\n                               at /checkout/src/libpanic_unwind/lib.rs:101\r\n  50:     0x7f288d528bb2 - <F as alloc::boxed::FnBox<A>>::call_box::hd509f195fdeaea34\r\n  51:     0x7f288d0b8b77 - std::sys_common::thread::start_thread::h706ddf8f441bf6eb\r\n                               at /checkout/src/liballoc/boxed.rs:827\r\n  52:     0x7f288d0d3288 - std::sys::unix::thread::Thread::new::thread_start::h51e87d4de9fb4e14\r\n                               at /checkout/src/libstd/sys/unix/thread.rs:90\r\n  53:     0x7f2886dfa567 - start_thread\r\n                               at /builddir/glibc-2.26/nptl/pthread_create.c:465\r\n  54:     0x7f288cda752e - clone\r\n                               at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n  55:                0x0 - <unknown>\r\n\r\nerror: Could not compile `msa`.\r\n```\r\n\r\nUnfortunately, although it compiles nicely on stable, I can't publish the code yet; so I'm not sure this bug report is actually useful :/", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46773/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46773/timeline", "performed_via_github_app": null, "state_reason": "completed"}