{"url": "https://api.github.com/repos/rust-lang/rust/issues/73712", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/73712/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/73712/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/73712/events", "html_url": "https://github.com/rust-lang/rust/issues/73712", "id": 645075358, "node_id": "MDU6SXNzdWU2NDUwNzUzNTg=", "number": 73712, "title": "Feature request: use only specified number of CPUs", "user": {"login": "zarniwhoop73", "id": 8324892, "node_id": "MDQ6VXNlcjgzMjQ4OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/8324892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zarniwhoop73", "html_url": "https://github.com/zarniwhoop73", "followers_url": "https://api.github.com/users/zarniwhoop73/followers", "following_url": "https://api.github.com/users/zarniwhoop73/following{/other_user}", "gists_url": "https://api.github.com/users/zarniwhoop73/gists{/gist_id}", "starred_url": "https://api.github.com/users/zarniwhoop73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zarniwhoop73/subscriptions", "organizations_url": "https://api.github.com/users/zarniwhoop73/orgs", "repos_url": "https://api.github.com/users/zarniwhoop73/repos", "events_url": "https://api.github.com/users/zarniwhoop73/events{/privacy}", "received_events_url": "https://api.github.com/users/zarniwhoop73/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-25T01:19:14Z", "updated_at": "2020-06-30T18:12:06Z", "closed_at": "2020-06-25T09:59:16Z", "author_association": "NONE", "active_lock_reason": null, "body": "Apologies if this has been discussed before, but I can't find anything. I do a lot of compilation on desktop machines, and for some things (Beyond Linuxfromscratch) it is useful to give an idea of how long a build will take on a low-end machine - for that we use 4 cores (and our \"standard build unit\"). This particularly applies when building firefox and thunderbord, but I guess it is also applicable to smaller packages such as librsvg and even cbindgen..\r\n\r\nI currently have a 4-core machine which I can use for this, but I'm hoping to replace it with something faster which will also have more cores. I know I can limit how many cores are **actually** available to the term in which I'm running a job by using the taskset command in linux. But my experience from trying that on a machine with 8 cores was that rust scheduled compiles as if all 8 were available, so the poor system was overloaded by too many jobs.\r\n\r\nMeanwhile, when I upgrade firefox on my laptop I have 8 cores (SMT) but far too little real memory. In that case I have to take 4 cores offline to have a chance of compiling firefox without it swapping. So again, being able to tell rust that I don't want to use all the cores would be helpful.\r\n\r\nFinally, if I do replace the current 4-core machine it occurs to me that I could run compiles as a background task while I'm doing other things, e.g. if I had 12 cores I could reserve 8 for the compiles and still have 4 available for browsers / playing videos / general housekeeping. With conventional make I could use -j8 in that situation, and similarly with ninja the number of jobs can be limited. But with rust thre does not seem any obvious way to e.g. pass an environment variable to num_cpus to say \"pretend I only have this many cores\".", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/73712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/73712/timeline", "performed_via_github_app": null, "state_reason": "completed"}