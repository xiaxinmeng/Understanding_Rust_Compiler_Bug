{"url": "https://api.github.com/repos/rust-lang/rust/issues/23442", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23442/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23442/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23442/events", "html_url": "https://github.com/rust-lang/rust/issues/23442", "id": 62403183, "node_id": "MDU6SXNzdWU2MjQwMzE4Mw==", "number": 23442, "title": "associated type does not live long enough", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 149689562, "node_id": "MDU6TGFiZWwxNDk2ODk1NjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-associated-items", "name": "A-associated-items", "color": "f7e101", "default": false, "description": "Area: Associated items such as associated types and consts."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-03-17T13:52:27Z", "updated_at": "2017-09-06T01:12:18Z", "closed_at": "2015-09-09T20:38:58Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This program fails to compile:\n\n``` rust\n#![crate_type=\"rlib\"]\n\nuse std::marker::PhantomData;\n\npub struct UnionedKeys<'a,K>\n    where K: UnifyKey + 'a\n{\n    table: &'a mut UnificationTable<K>,\n    root_key: K,\n    stack: Vec<K>,\n}\n\npub trait UnifyKey {\n    type Value;\n}\n\npub struct UnificationTable<K:UnifyKey> {\n    values: Delegate<K>,\n}\n\npub struct Delegate<K>(PhantomData<K>);\n```\n\nThis was _supposed_ to be fixed by https://github.com/rust-lang/rust/pull/22436, but apparently that fix is not working. I've been wanting to revisit the strategy there anyway, because it leads to infinite recursion in some cases and I'm not happy about it.\n\nThe error I see is:\n\n```\n/home/nmatsakis/tmp/bar.rs:5:1: 11:2 error: the associated type `<K as UnifyKey>::Value` may not live long enough [E0309]\n/home/nmatsakis/tmp/bar.rs:5 pub struct UnionedKeys<'a,K>\n/home/nmatsakis/tmp/bar.rs:6     where K: UnifyKey + 'a\n/home/nmatsakis/tmp/bar.rs:7 {\n/home/nmatsakis/tmp/bar.rs:8     table: &'a mut UnificationTable<K>,\n/home/nmatsakis/tmp/bar.rs:9     root_key: K,\n/home/nmatsakis/tmp/bar.rs:10     stack: Vec<K>,\n                              ...\n/home/nmatsakis/tmp/bar.rs:11:2: 11:2 help: consider adding an explicit lifetime bound `<K as UnifyKey>::Value: 'a`...\n/home/nmatsakis/tmp/bar.rs:5:1: 11:2 note: ...so that the reference type `&'a mut UnificationTable<K>` does not outlive the data it points at\n/home/nmatsakis/tmp/bar.rs:5 pub struct UnionedKeys<'a,K>\n/home/nmatsakis/tmp/bar.rs:6     where K: UnifyKey + 'a\n/home/nmatsakis/tmp/bar.rs:7 {\n/home/nmatsakis/tmp/bar.rs:8     table: &'a mut UnificationTable<K>,\n/home/nmatsakis/tmp/bar.rs:9     root_key: K,\n/home/nmatsakis/tmp/bar.rs:10     stack: Vec<K>,\n                              ...\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23442/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23442/timeline", "performed_via_github_app": null, "state_reason": "completed"}