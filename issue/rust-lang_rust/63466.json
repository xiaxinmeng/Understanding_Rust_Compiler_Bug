{"url": "https://api.github.com/repos/rust-lang/rust/issues/63466", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63466/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63466/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63466/events", "html_url": "https://github.com/rust-lang/rust/issues/63466", "id": 479387167, "node_id": "MDU6SXNzdWU0NzkzODcxNjc=", "number": 63466, "title": "segfault with target-feature=+soft-float", "user": {"login": "roblabla", "id": 1069318, "node_id": "MDQ6VXNlcjEwNjkzMTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1069318?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roblabla", "html_url": "https://github.com/roblabla", "followers_url": "https://api.github.com/users/roblabla/followers", "following_url": "https://api.github.com/users/roblabla/following{/other_user}", "gists_url": "https://api.github.com/users/roblabla/gists{/gist_id}", "starred_url": "https://api.github.com/users/roblabla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roblabla/subscriptions", "organizations_url": "https://api.github.com/users/roblabla/orgs", "repos_url": "https://api.github.com/users/roblabla/repos", "events_url": "https://api.github.com/users/roblabla/events{/privacy}", "received_events_url": "https://api.github.com/users/roblabla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123110, "node_id": "MDU6TGFiZWwxMjMxMTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-linux", "name": "O-linux", "color": "6e6ec0", "default": false, "description": "Operating system: Linux"}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 267612997, "node_id": "MDU6TGFiZWwyNjc2MTI5OTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-unsound", "name": "I-unsound", "color": "e11d21", "default": false, "description": "Issue: A soundness hole (worst kind of bug), see: https://en.wikipedia.org/wiki/Soundness"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-08-11T16:33:12Z", "updated_at": "2022-10-12T15:20:37Z", "closed_at": "2019-08-15T14:41:29Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following program currently segfaults on x86_64-unknown-linux-gnu when compiling with stable rust 1.36.0 with soft-float, and running with TARGET unset.\r\n\r\n```rust\r\nuse std::env;\r\n\r\nfn main(){\r\n    let target = env::var(\"TARGET\").unwrap();\r\n    println!(\"{}\", target);\r\n}\r\n```\r\n\r\nHere's the output:\r\n\r\n```\r\nroblabla@roblab ~/Dropbox/dev/src/rust/hello_world $ env \"RUSTFLAGS=-C target-feature=+soft-float\" cargo run\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.01s\r\n     Running `target/debug/hello_world`\r\nSegmentation fault (core dumped)\r\n```\r\n\r\nA backtrace:\r\n\r\n```\r\n#0  <core::str::lossy::Utf8LossyChunksIter as core::iter::traits::iterator::Iterator>::next () at src/libcore/str/lossy.rs:62\r\n#1  0x00005555555619b8 in std::sys_common::bytestring::debug_fmt_bytestring () at src/libstd/sys_common/bytestring.rs:16\r\n#2  <std::sys_common::os_str_bytes::Slice as core::fmt::Debug>::fmt () at src/libstd/sys_common/os_str_bytes.rs:27\r\n#3  0x000055555557507e in core::fmt::builders::DebugTuple::field::{{closure}} () at src/libcore/fmt/builders.rs:288\r\n#4  core::result::Result<T,E>::and_then () at src/libcore/result.rs:639\r\n#5  core::fmt::builders::DebugTuple::field () at src/libcore/fmt/builders.rs:276\r\n#6  0x0000555555564264 in <std::env::VarError as core::fmt::Debug>::fmt () at src/libstd/env.rs:239\r\n#7  0x00005555555759bc in core::fmt::write () at src/libcore/fmt/mod.rs:1016\r\n#8  0x0000555555563725 in core::fmt::Write::write_fmt () at /rustc/a53f9df32fbb0b5f4382caaad8f1a46f36ea887c/src/libcore/fmt/mod.rs:195\r\n#9  std::panicking::continue_panic_fmt::PanicPayload::fill::{{closure}} () at src/libstd/panicking.rs:356\r\n#10 core::option::Option<T>::get_or_insert_with () at /rustc/a53f9df32fbb0b5f4382caaad8f1a46f36ea887c/src/libcore/option.rs:816\r\n#11 std::panicking::continue_panic_fmt::PanicPayload::fill () at src/libstd/panicking.rs:354\r\n#12 <std::panicking::continue_panic_fmt::PanicPayload as core::panic::BoxMeUp>::get () at src/libstd/panicking.rs:369\r\n#13 0x00005555555639dc in std::panicking::rust_panic_with_hook () at src/libstd/panicking.rs:473\r\n#14 0x0000555555563572 in std::panicking::continue_panic_fmt () at src/libstd/panicking.rs:381\r\n#15 0x0000555555563456 in rust_begin_unwind () at src/libstd/panicking.rs:308\r\n#16 0x00005555555734ed in core::panicking::panic_fmt () at src/libcore/panicking.rs:85\r\n#17 0x000055555555941f in core::result::unwrap_failed (msg=..., error=...) at /rustc/a53f9df32fbb0b5f4382caaad8f1a46f36ea887c/src/libcore/macros.rs:18\r\n#18 0x000055555555957b in core::result::Result<T,E>::unwrap (self=...) at /rustc/a53f9df32fbb0b5f4382caaad8f1a46f36ea887c/src/libcore/result.rs:800\r\n#19 0x0000555555558560 in hello_world::main () at src/main.rs:4\r\n```\r\n\r\nBinary attached.\r\n\r\n[hello_world.zip](https://github.com/rust-lang/rust/files/3490185/hello_world.zip)\r\n\r\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63466/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63466/timeline", "performed_via_github_app": null, "state_reason": "completed"}