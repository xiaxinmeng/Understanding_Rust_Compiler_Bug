{"url": "https://api.github.com/repos/rust-lang/rust/issues/109623", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/109623/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/109623/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/109623/events", "html_url": "https://github.com/rust-lang/rust/issues/109623", "id": 1640745155, "node_id": "I_kwDOAAsO6M5hy8jD", "number": 109623, "title": "Linking fails with rusqlite and gnu", "user": {"login": "AndreKR", "id": 1188538, "node_id": "MDQ6VXNlcjExODg1Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1188538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreKR", "html_url": "https://github.com/AndreKR", "followers_url": "https://api.github.com/users/AndreKR/followers", "following_url": "https://api.github.com/users/AndreKR/following{/other_user}", "gists_url": "https://api.github.com/users/AndreKR/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreKR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreKR/subscriptions", "organizations_url": "https://api.github.com/users/AndreKR/orgs", "repos_url": "https://api.github.com/users/AndreKR/repos", "events_url": "https://api.github.com/users/AndreKR/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreKR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-26T03:18:18Z", "updated_at": "2023-04-11T21:09:41Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I have a new computer and I freshly installed Rust and I'm trying to build a project that built alright on my old computer.\r\n\r\nFor this issue I have reduced it to simply:\r\n```\r\n[package]\r\nname = \"rust-issue\"\r\nversion = \"0.1.0\"\r\nedition = \"2021\"\r\n[dependencies]\r\nrusqlite = { version = \"0.28.0\", features = [\"bundled\"] }\r\n```\r\n```\r\nuse std::error::Error;\r\nuse rusqlite::Connection;\r\n\r\nfn main() -> Result<(), Box<dyn Error>> {\r\n\tConnection::open(\"foo\")?;\r\n\tOk(())\r\n}\r\n```\r\n\r\nI'm building with\r\n```\r\nnightly-x86_64-pc-windows-gnu (default)\r\nrustc 1.70.0-nightly (0c61c7a97 2023-03-25)\r\n```\r\n\r\nWithout any additional software installed, the build fails with\r\n```\r\nerror: failed to run custom build command for `libsqlite3-sys v0.25.2`\r\nerror occurred: Failed to find tool. Is `gcc.exe` installed? (see https://github.com/rust-lang/cc-rs#compile-time-requirements for help)\r\n```\r\n\r\nThis is expected. (Well, what I'd *really* expect is that rustup installed the darn toolchain, but that's a discussion for another time.)\r\n\r\nI don't remember which gcc I had on my old computer, probably from MSYS2 or TDM-GCC. By the way, that link isn't very helpful. On https://github.com/rust-lang/cc-rs#compile-time-requirements it says (emphasis mine):\r\n> We recommend the [MinGW-w64](https://www.mingw-w64.org/) distribution, which is using the [Win-builds](http://win-builds.org/) installation system. You **may also** acquire it via [MSYS2](https://www.msys2.org/), as explained [here](https://github.com/rust-lang/rust#building-on-windows).\r\n\r\nThis makes it appear as if you could just get MinGW-w64 \"normally\" **or** via MSYS2, but [as I understand](https://www.mingw-w64.org/downloads/) there is no \"normal\" way, MSYS2 is already the most common way to acquire MinGW-w64.\r\n\r\nSo anyway, I installed MSYS2 and then ran `pacman -S base-devel gcc cmake`. I also added `<msys installation dir>\\usr\\bin` to my PATH.\r\n\r\nI'm getting:\r\n```\r\n   Compiling rust-issue v0.1.0 (C:\\dev\\projects\\rust-issue)\r\nerror: linking with `x86_64-w64-mingw32-gcc` failed: exit code: 1\r\n  |\r\n  = note: \"x86_64-w64-mingw32-gcc\" \"-fno-use-linker-plugin\" \"-Wl,--dynamicbase\" \"-Wl,--disable-auto-image-base\" \"-m64\" \"-Wl,--high-entropy-va\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\self-contained\\\\crt2.o\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsbegin.o\" \"C:\\\\Users\\\\andre\\\\AppData\\\\Local\\\\Temp\\\\rustcn2rMge\\\\symbols.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.1dxt61eaz4l27wfx.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.1stlkemhfb7sfqu2.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.22tvrnjz3s1g3xz2.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.24t5fz1nu7b7mfzc.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.25m54u5trj0u2rcg.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2fseeujgpn26bvkw.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2gqzmhoqedn8tdgz.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2lspe89zdtdu5ge1.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2njrtzjk4n56x7ot.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2wvzcnvdkfbgvck1.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2xmvmmspas2jy10r.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.2zndxe9gtx5jzjaj.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.33b5jv8veawqz3mm.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.3eoj2vw0jiyja7l1.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.3jry15kf4a3fdryq.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.4itrliv9xntok2qu.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.4pwb71dr5n3sjte1.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.4vbji5wr33b2p4xg.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.53a2j7bnwjxe1sqo.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.55vnof4315av7yea.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.7m0of9u91b5bfwz.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.99vkwym12gkbh56.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.fyvdj9wwhcj0uai.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.gk5oyiv09gaf1wz.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.n6bwij5ye4niuk6.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.u4r5tiq7vigd7hp.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.wf6h6eq87x8xu9j.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.wiw7yj3xj7kqq7a.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.xzlnbprqgd4z8xk.rcgu.o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.47rr28xmaencr7h8.rcgu.o\" \"-L\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\" \"-L\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\libsqlite3-sys-c4c2c6d1f1266c04\\\\out\" \"-L\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-Wl,-Bstatic\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\librusqlite-99b46dde7d23ccf6.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libbitflags-6c4d2d0be17bba01.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libsmallvec-639962cd1eeb9ad0.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libfallible_streaming_iterator-476c977ea9be6ed4.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libfallible_iterator-8c2bf4becf96a207.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libhashlink-b0df5a6969b91815.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libhashbrown-a39faff6d51792aa.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libahash-79597c5c0d21a700.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libgetrandom-1c2c8bd7d1f26ba4.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libcfg_if-6d5ed73bca79f013.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libonce_cell-1028a6aa46242399.rlib\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\liblibsqlite3_sys-b59322e04617e62c.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd-f664fef7ac104778.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libpanic_unwind-8a5cadc8acbd190a.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libobject-fa2fb6dfd7200219.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libmemchr-8ecee2bca8ae69e4.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libaddr2line-ecb83fb0e3e0509e.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libgimli-692ab15d0a28a6f4.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_demangle-d86464621b913d43.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd_detect-6643d1d5273eb0ff.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libhashbrown-70303bc7d83795c3.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libminiz_oxide-de9865f00f7ce604.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libadler-fd3b505b70e9d5d9.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_alloc-a79f1b9668dabd72.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libunwind-582363e1e452755c.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcfg_if-ab4594ee502ad13c.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liblibc-be319144660c2a69.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liballoc-de7daba68b820654.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_core-043dcb5cef4e65e2.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcore-0e5c5feeef4bd6da.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcompiler_builtins-5b1160acc1f68c4c.rlib\" \"-Wl,-Bdynamic\" \"-lbcrypt\" \"-lkernel32\" \"-ladvapi32\" \"-luserenv\" \"-lkernel32\" \"-lws2_32\" \"-lbcrypt\" \"-lntdll\" \"-lgcc_eh\" \"-l:libpthread.a\" \"-lmsvcrt\" \"-lmingwex\" \"-lmingw32\" \"-lgcc\" \"-lmsvcrt\" \"-luser32\" \"-lkernel32\" \"-Wl,--nxcompat\" \"-nostartfiles\" \"-L\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-L\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\self-contained\" \"-o\" \"c:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\rust_issue-aea5771d49566a3a.exe\" \"-Wl,--gc-sections\" \"-no-pie\" \"-nodefaultlibs\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsend.o\"\r\n  = note: Warning: .drectve `-exclude-symbols:\"_ZN4core4cell16RefCell$LT$T$GT$3new17h4418ff2aac74c385E\" ' unrecognized\r\n          Warning: corrupt .drectve at end of def file\r\n          Warning: .drectve `-exclude-symbols:_ZN4core5error5Error11description17h25aded071e0a2ff3E ' unrecognized\r\n          Warning: .drectve `-exclude-symbols:_ZN4core5error5Error5cause17h01459c8d20c3630bE ' unrecognized\r\n          Warning: .drectve `-exclude-symbols:_ZN4core5error5Error7provide17had4fc66738f77b27E ' unrecognized\r\n          Warning: corrupt .drectve at end of def file\r\n          Warning: .drectve `-exclude-symbols:_ZN3std2rt10lang_start17h53bf1b6d3a9f10fbE ' unrecognized\r\n          Warning: corrupt .drectve at end of def file\r\n[a whole lot more of these]\r\n          Warning: corrupt .drectve at end of def file\r\n          Warning: corrupt .drectve at end of def file\r\n          ld: C:\\dev\\projects\\rust-issue\\target\\debug\\deps\\liblibsqlite3_sys-b59322e04617e62c.rlib(sqlite3.o): in function `winGetTempname':\r\n          /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:48380: undefined reference to `cygwin_conv_path'\r\n          ld: /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:48386: undefined reference to `__errno'\r\n          ld: C:\\dev\\projects\\rust-issue\\target\\debug\\deps\\liblibsqlite3_sys-b59322e04617e62c.rlib(sqlite3.o): in function `winFullPathname':\r\n          /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:49153: undefined reference to `cygwin_conv_path'\r\n          ld: /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:49157: undefined reference to `__errno'\r\n          ld: /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:49175: undefined reference to `cygwin_conv_path'\r\n          ld: /c/dev/tools/Rust/.cargo/registry/src/index.crates.io-6f17d22bba15001f/libsqlite3-sys-0.25.2/sqlite3/sqlite3.c:49179: undefined reference to `__errno'\r\n          \r\n  = note: some `extern` functions couldn't be found; some native libraries may need to be installed or have their path specified\r\n  = note: use the `-l` flag to specify native libraries to link\r\n  = note: use the `cargo:rustc-link-lib` directive to specify the native libraries to link with Cargo (see https://doc.rust-lang.org/cargo/reference/build-scripts.html#cargorustc-link-libkindname)\r\n```\r\nGoogling some of these errors suggests this might mean a mismatch between GNU and MSVC toolchains, but I'm using all GNU, I don't have Visual Studio nor the VS build tools installed.\r\n\r\nSo I'm a bit lost. I then installed [TDM-GCC](https://jmeubank.github.io/tdm-gcc/) instead of the MSYS2 one.\r\n\r\nWith this I'm getting:\r\n```\r\nerror: linking with `x86_64-w64-mingw32-gcc` failed: exit code: 1\r\n  |\r\n  = note: \"x86_64-w64-mingw32-gcc\" \"-fno-use-linker-plugin\" \"-Wl,--dynamicbase\" \"-Wl,--disable-auto-image-base\" \"-m64\" \"-Wl,--high-entropy-va\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsbegin.o\" \"C:\\\\Users\\\\andre\\\\AppData\\\\Local\\\\Temp\\\\rustccyH9Ry\\\\symbols.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.0.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.1.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.10.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.11.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.12.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.2.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.3.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.4.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.5.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.6.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.7.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.8.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.build_script_build.7609c34c-cgu.9.rcgu.o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.zycrj3dkispq3y1.rcgu.o\" \"-L\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-Wl,-Bstatic\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\deps\\\\libversion_check-038583716d3946ad.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd-f664fef7ac104778.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libpanic_unwind-8a5cadc8acbd190a.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libobject-fa2fb6dfd7200219.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libmemchr-8ecee2bca8ae69e4.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libaddr2line-ecb83fb0e3e0509e.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libgimli-692ab15d0a28a6f4.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_demangle-d86464621b913d43.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd_detect-6643d1d5273eb0ff.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libhashbrown-70303bc7d83795c3.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libminiz_oxide-de9865f00f7ce604.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libadler-fd3b505b70e9d5d9.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_alloc-a79f1b9668dabd72.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libunwind-582363e1e452755c.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcfg_if-ab4594ee502ad13c.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liblibc-be319144660c2a69.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liballoc-de7daba68b820654.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_core-043dcb5cef4e65e2.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcore-0e5c5feeef4bd6da.rlib\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcompiler_builtins-5b1160acc1f68c4c.rlib\" \"-Wl,-Bdynamic\" \"-lkernel32\" \"-ladvapi32\" \"-luserenv\" \"-lkernel32\" \"-lws2_32\" \"-lbcrypt\" \"-lntdll\" \"-lgcc_eh\" \"-l:libpthread.a\" \"-lmsvcrt\" \"-lmingwex\" \"-lmingw32\" \"-lgcc\" \"-lmsvcrt\" \"-luser32\" \"-lkernel32\" \"-Wl,--nxcompat\" \"-L\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-o\" \"C:\\\\dev\\\\projects\\\\rust-issue\\\\target\\\\debug\\\\build\\\\ahash-f395dd85a55a5a73\\\\build_script_build-f395dd85a55a5a73.exe\" \"-Wl,--gc-sections\" \"-no-pie\" \"-nodefaultlibs\" \"C:\\\\dev\\\\tools\\\\Rust\\\\.rustup\\\\toolchains\\\\nightly-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsend.o\"\r\n  = note: C:/dev/tools/TDM-GCC-64/bin/../lib/gcc/x86_64-w64-mingw32/10.3.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lgcc_eh\r\n          collect2.exe: error: ld returned 1 exit status\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/109623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/109623/timeline", "performed_via_github_app": null, "state_reason": null}