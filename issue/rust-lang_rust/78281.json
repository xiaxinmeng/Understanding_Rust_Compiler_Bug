{"url": "https://api.github.com/repos/rust-lang/rust/issues/78281", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/78281/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/78281/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/78281/events", "html_url": "https://github.com/rust-lang/rust/issues/78281", "id": 728193405, "node_id": "MDU6SXNzdWU3MjgxOTM0MDU=", "number": 78281, "title": "Unable to do anything with ./x.py <command> in Windows", "user": {"login": "hbina", "id": 6733660, "node_id": "MDQ6VXNlcjY3MzM2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/6733660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hbina", "html_url": "https://github.com/hbina", "followers_url": "https://api.github.com/users/hbina/followers", "following_url": "https://api.github.com/users/hbina/following{/other_user}", "gists_url": "https://api.github.com/users/hbina/gists{/gist_id}", "starred_url": "https://api.github.com/users/hbina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hbina/subscriptions", "organizations_url": "https://api.github.com/users/hbina/orgs", "repos_url": "https://api.github.com/users/hbina/repos", "events_url": "https://api.github.com/users/hbina/events{/privacy}", "received_events_url": "https://api.github.com/users/hbina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 266005765, "node_id": "MDU6TGFiZWwyNjYwMDU3NjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows-msvc", "name": "O-windows-msvc", "color": "6e6ec0", "default": false, "description": "Toolchain: MSVC, Operating system: Windows"}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-10-23T12:52:07Z", "updated_at": "2021-03-11T11:35:57Z", "closed_at": "2021-03-11T11:35:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\r\nPS C:\\Users\\Hanif\\git\\rust> python .\\x.py check\r\nUpdating only changed submodules\r\nSubmodules updated in 0.21 seconds\r\nargs:['C:\\\\Users\\\\Hanif\\\\git\\\\rust\\\\build\\\\x86_64-pc-windows-msvc\\\\stage0\\\\bin\\\\cargo.exe', 'build', '--manifest-path', 'C:\\\\Users\\\\Hanif\\\\git\\\\rust\\\\src/bootstrap/Cargo.toml']\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.40s\r\nargs:['C:\\\\Users\\\\Hanif\\\\git\\\\rust\\\\build\\\\bootstrap\\\\debug\\\\bootstrap', 'check']\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Hanif\\git\\rust\\x.py\", line 11, in <module>\r\n    bootstrap.main()\r\n  File \"C:\\Users\\Hanif\\git\\rust\\src\\bootstrap\\bootstrap.py\", line 1080, in main\r\n    bootstrap(help_triggered)\r\n  File \"C:\\Users\\Hanif\\git\\rust\\src\\bootstrap\\bootstrap.py\", line 1066, in bootstrap\r\n    run(args, env=env, verbose=build.verbose)\r\n  File \"C:\\Users\\Hanif\\git\\rust\\src\\bootstrap\\bootstrap.py\", line 149, in run\r\n    ret = subprocess.Popen(args, **kwargs)\r\n  File \"C:\\Users\\Hanif\\AppData\\Local\\Programs\\Python\\Python39\\lib\\subprocess.py\", line 947, in __init__\r\n    self._execute_child(args, executable, preexec_fn, close_fds,\r\n  File \"C:\\Users\\Hanif\\AppData\\Local\\Programs\\Python\\Python39\\lib\\subprocess.py\", line 1416, in _execute_child\r\n    hp, ht, pid, tid = _winapi.CreateProcess(executable, args,\r\nOSError: [WinError 193] %1 is not a valid Win32 application\r\nPS C:\\Users\\Hanif\\git\\rust> git diff\r\ndiff --git a/src/bootstrap/bootstrap.py b/src/bootstrap/bootstrap.py\r\nindex 7d3b4b13503..aa1e7a54753 100644\r\n--- a/src/bootstrap/bootstrap.py\r\n+++ b/src/bootstrap/bootstrap.py\r\n@@ -145,6 +145,7 @@ def run(args, verbose=False, exception=False, **kwargs):\r\n     sys.stdout.flush()\r\n     # Use Popen here instead of call() as it apparently allows powershell on\r\n     # Windows to not lock up waiting for input presumably.\r\n+    print('args:{}'.format(args))\r\n     ret = subprocess.Popen(args, **kwargs)\r\n     code = ret.wait()\r\n     if code != 0:\r\nPS C:\\Users\\Hanif\\git\\rust>\r\n```\r\n\r\nFor whatever reason it says that the executable is not a valid Win32 application. I added a print statement in the script to show what arguments are being passed.", "closed_by": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/78281/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/78281/timeline", "performed_via_github_app": null, "state_reason": "completed"}