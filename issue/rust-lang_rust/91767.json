{"url": "https://api.github.com/repos/rust-lang/rust/issues/91767", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91767/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91767/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91767/events", "html_url": "https://github.com/rust-lang/rust/issues/91767", "id": 1077354079, "node_id": "I_kwDOAAsO6M5ANx5f", "number": 91767, "title": "ICE: Featuring `core` in `std` makes compiler go sideways", "user": {"login": "workingjubilee", "id": 46493976, "node_id": "MDQ6VXNlcjQ2NDkzOTc2", "avatar_url": "https://avatars.githubusercontent.com/u/46493976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingjubilee", "html_url": "https://github.com/workingjubilee", "followers_url": "https://api.github.com/users/workingjubilee/followers", "following_url": "https://api.github.com/users/workingjubilee/following{/other_user}", "gists_url": "https://api.github.com/users/workingjubilee/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingjubilee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingjubilee/subscriptions", "organizations_url": "https://api.github.com/users/workingjubilee/orgs", "repos_url": "https://api.github.com/users/workingjubilee/repos", "events_url": "https://api.github.com/users/workingjubilee/events{/privacy}", "received_events_url": "https://api.github.com/users/workingjubilee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2021-12-11T01:50:45Z", "updated_at": "2021-12-13T23:36:40Z", "closed_at": "2021-12-13T23:36:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "On Zulip, I was told this should \"just work\" by @Mark-Simulacrum. It does not and in fact ICEs, so I am reporting it as a bug for others to investigate at their leisure. @camelid might also be interested. \ud83e\udd37 \r\n\r\n### Code\r\n\r\nThis is provoked by applying the following diff and invoking `x.py check`.\r\n```diff\r\ndiff --git a/library/core/Cargo.toml b/library/core/Cargo.toml\r\nindex 6f10b9e4342..f65757e8cb8 100644\r\n--- a/library/core/Cargo.toml\r\n+++ b/library/core/Cargo.toml\r\n@@ -30,3 +30,4 @@ panic_immediate_abort = []\r\n # Make `RefCell` store additional debugging information, which is printed out when\r\n # a borrow error occurs\r\n debug_refcell = []\r\n+as_std = []\r\ndiff --git a/library/std/Cargo.toml b/library/std/Cargo.toml\r\nindex f7111748321..538cf4e4e15 100644\r\n--- a/library/std/Cargo.toml\r\n+++ b/library/std/Cargo.toml\r\n@@ -14,7 +14,7 @@ alloc = { path = \"../alloc\" }\r\n cfg-if = { version = \"0.1.8\", features = ['rustc-dep-of-std'] }\r\n panic_unwind = { path = \"../panic_unwind\", optional = true }\r\n panic_abort = { path = \"../panic_abort\" }\r\n-core = { path = \"../core\" }\r\n+core = { path = \"../core\", features = ['as_std'] }\r\n libc = { version = \"0.2.108\", default-features = false, features = ['rustc-dep-of-std'] }\r\n compiler_builtins = { version = \"0.1.55\" }\r\n profiler_builtins = { path = \"../profiler_builtins\", optional = true }\r\n```\r\n\r\n### Meta\r\n\r\nThis is an issue during bootstrapping the compiler. The build was based on rust-lang/rust@e6b883c74f49f32cb5d1cbad3457f2b8805a4a38.\r\n\r\n### Error output\r\n\r\n```\r\nthread 'rustc' panicked at 'no entry found for key', compiler\\rustc_metadata\\src\\rmeta\\decoder\\cstore_impl.rs:492:9\r\nthread 'rustc' panicked at 'no entry found for key', compiler\\rustc_metadata\\src\\rmeta\\decoder\\cstore_impl.rs:492:9\r\nstack backtrace:\r\nstack backtrace:\r\n```\r\n\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```bash\r\nthread 'rustc' panicked at 'no entry found for key', compiler\\rustc_metadata\\src\\rmeta\\decoder\\cstore_impl.rs:492:9\r\nthread 'rustc' panicked at 'no entry found for key', compiler\\rustc_metadata\\src\\rmeta\\decoder\\cstore_impl.rs:492:9\r\nstack backtrace:\r\nstack backtrace:\r\n   0:     0x7ff9a444970f - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he7b0c252d602fcdc\r\n   1:     0x7ff9a4473fba - core::fmt::write::h6aa0db73705fd604\r\n   2:     0x7ff9a443b468 - <std::io::IoSliceMut as core::fmt::Debug>::fmt::h8e4c6764c89f6382\r\n   3:     0x7ff9a444cc56 - std::panicking::take_hook::h30eaa8b54ef03df3\r\n   4:     0x7ff9a444c73c - std::panicking::take_hook::h30eaa8b54ef03df3\r\n   5:     0x7ff998efaf5e - <rustc_middle[4db38f5bb30aa45a]::mir::Operand as rustc_mir_dataflow[1f04c5db66c6e383]::move_paths::abs_domain::Lift>::lift\r\n   6:     0x7ff9a444d569 - std::panicking::rust_panic_with_hook::hef9b22ae6e202465\r\n   7:     0x7ff9a444d00b - rust_begin_unwind\r\n   8:     0x7ff9a444a037 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he7b0c252d602fcdc\r\n   9:     0x7ff9a444cf69 - rust_begin_unwind\r\n  10:     0x7ff9a44a8440 - core::panicking::panic_fmt::h8a2153897acddc1e\r\n  11:     0x7ff9a4470bd0 - <core::panic::panic_info::PanicInfo as core::fmt::Display>::fmt::h1be40518aba961fa\r\n  12:     0x7ff9a44a833b - core::option::expect_failed::h310324ec3680c3dc\r\n  13:     0x7ff99cb1aee6 - <rustc_metadata[3f552bc9b26a2513]::creader::CStore as rustc_session[80b12927c96efe93]::cstore::CrateStore>::stable_crate_id_to_crate_num\r\n  14:     0x7ff99c6ec1c0 - <rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::OnDiskCache>::load_side_effects\r\n    Checking rls-data v0.19.1\r\n  15:     0x7ff99c608fdf - <rustc_span[fb335929b56265a7]::span_encoding::Span as rustc_serialize[9f7480aaaa4758fb]::serialize::Decodable<rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::CacheDecoder>>::decode\r\n  16:     0x7ff99c7de3ad - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  17:     0x7ff99c81fc20 - <&[rustc_ast[313453e987c93035]::ast::InlineAsmTemplatePiece] as rustc_serialize[9f7480aaaa4758fb]::serialize::Decodable<rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::CacheDecoder>>::decode\r\n  18:     0x7ff99c7f1766 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  19:     0x7ff99c6e7b4c - <rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::OnDiskCache>::load_side_effects\r\n  20:     0x7ff99c5cad24 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  21:     0x7ff99c5695c2 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  22:     0x7ff99c625012 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  23:     0x7ff99c4d7a3f - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  24:     0x7ff99c586a61 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  25:     0x7ff99c6646f9 - <rustc_query_impl[8639f0a94254e3b9]::Queries as rustc_middle[4db38f5bb30aa45a]::ty::query::QueryEngine>::try_mark_green\r\n  26:     0x7ff99babb0b6 - rustc_ty_utils[ac82e78d48daf646]::provide\r\n  27:     0x7ff99c68edbf - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  28:     0x7ff99c74a966 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  29:     0x7ff99c6378db - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  30:     0x7ff99c4d1b7f - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  31:     0x7ff99c5c642c - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  32:     0x7ff99b9fa767 - <rustc_typeck[44a0375dafd03453]::check::wfcheck::GATSubstCollector as rustc_middle[4db38f5bb30aa45a]::ty::fold::TypeVisitor>::visit_ty\r\n  33:     0x7ff99ba04240 - <rustc_typeck[44a0375dafd03453]::check::upvar::InferBorrowKind as rustc_typeck[44a0375dafd03453]::expr_use_visitor::Delegate>::mutate\r\n  34:     0x7ff99c68e446 - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  35:     0x7ff99c746c51 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  36:     0x7ff99c643b07 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  37:     0x7ff99c4a9b34 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  38:     0x7ff99c5a5342 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  39:     0x7ff99ba395e7 - <rustc_typeck[44a0375dafd03453]::variance::terms::InferredIndex as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  40:     0x7ff99b98a119 - <rustc_typeck[44a0375dafd03453]::constrained_generic_params::Parameter as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  41:     0x7ff99b8f4902 - <rustc_typeck[44a0375dafd03453]::outlives::explicit::ExplicitPredicatesMap as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  42:     0x7ff99b8f14bf - rustc_typeck[44a0375dafd03453]::check_crate\r\n  43:     0x7ff99905e62f - rustc_interface[3b7069506c759068]::passes::analysis\r\n  44:     0x7ff99c69023b - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  45:     0x7ff99c76257e - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  46:     0x7ff99c6342d1 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  47:     0x7ff99c529b99 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  48:     0x7ff99c5c3792 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  49:     0x7ff998f7ab70 - <rustc_driver[a96692e377e9fbc1]::args::Error as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  50:     0x7ff998f20a4f - <rustc_middle[4db38f5bb30aa45a]::ty::SymbolName as core[5e9b1f0661f006a4]::fmt::Display>::fmt  51:     0x7ff998f12435 - <rustc_ast_passes[8672db41ecf6779a]::node_count::NodeCounter as rustc_ast[313453e987c93035]::visit::Visitor>::visit_attribute\r\n  52:     0x7ff998f22001 - <rustc_middle[4db38f5bb30aa45a]::ty::SymbolName as core[5e9b1f0661f006a4]::fmt::Display>::fmt  53:     0x7ff998f1da93 - rustc_driver[a96692e377e9fbc1]::pretty::print_after_hir_lowering\r\n  54:     0x7ff998f978d8 - <rustc_driver[a96692e377e9fbc1]::args::Error as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  55:     0x7ff9a445ac6c - std::sys::windows::thread::Thread::new::hfa213d96886b5f6f\r\n  56:     0x7ffa296c7034 - BaseThreadInitThunk\r\n  57:     0x7ffa2a4c2651 - RtlUserThreadStart\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.58.0-beta.1 (426b94d7d 2021-11-29) running on x86_64-pc-windows-msvc\r\n\r\nnote: compiler flags: -Z symbol-mangling-version=v0 -Z macro-backtrace -Z tls-model=initial-exec -Z unstable-options -Z binary-dep-depinfo -Z force-unstable-if-unmarked -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 -C incremental -C target-feature=+crt-static -C prefer-dynamic -C llvm-args=-import-instr-limit=10 --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\n#0 [predicates_of] computing predicates of `json::FormatShim`\r\n#1 [param_env] computing normalized predicates of `json::FormatShim`\r\n#2 [check_item_well_formed] checking that `json::FormatShim` is well-formed\r\n#3 [analysis] running analysis passes on this crate\r\nend of query stack\r\n   0:     0x7ff9a444970f - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he7b0c252d602fcdc\r\n   1:     0x7ff9a4473fba - core::fmt::write::h6aa0db73705fd604\r\n   2:     0x7ff9a443b468 - <std::io::IoSliceMut as core::fmt::Debug>::fmt::h8e4c6764c89f6382\r\n   3:     0x7ff9a444cc56 - std::panicking::take_hook::h30eaa8b54ef03df3\r\n   4:     0x7ff9a444c73c - std::panicking::take_hook::h30eaa8b54ef03df3\r\n   5:     0x7ff998efaf5e - <rustc_middle[4db38f5bb30aa45a]::mir::Operand as rustc_mir_dataflow[1f04c5db66c6e383]::move_paths::abs_domain::Lift>::lift\r\n   6:     0x7ff9a444d569 - std::panicking::rust_panic_with_hook::hef9b22ae6e202465\r\n   7:     0x7ff9a444d00b - rust_begin_unwind\r\n   8:     0x7ff9a444a037 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he7b0c252d602fcdc\r\n   9:     0x7ff9a444cf69 - rust_begin_unwind\r\n  10:     0x7ff9a44a8440 - core::panicking::panic_fmt::h8a2153897acddc1e\r\n  11:     0x7ff9a4470bd0 - <core::panic::panic_info::PanicInfo as core::fmt::Display>::fmt::h1be40518aba961fa\r\n  12:     0x7ff9a44a833b - core::option::expect_failed::h310324ec3680c3dc\r\n  13:     0x7ff99cb1aee6 - <rustc_metadata[3f552bc9b26a2513]::creader::CStore as rustc_session[80b12927c96efe93]::cstore::CrateStore>::stable_crate_id_to_crate_num\r\n  14:     0x7ff99c6ec1c0 - <rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::OnDiskCache>::load_side_effects\r\n  15:     0x7ff99c608fdf - <rustc_span[fb335929b56265a7]::span_encoding::Span as rustc_serialize[9f7480aaaa4758fb]::serialize::Decodable<rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::CacheDecoder>>::decode\r\n  16:     0x7ff99c7de3ad - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  17:     0x7ff99c81fc20 - <&[rustc_ast[313453e987c93035]::ast::InlineAsmTemplatePiece] as rustc_serialize[9f7480aaaa4758fb]::serialize::Decodable<rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::CacheDecoder>>::decode\r\n  18:     0x7ff99c7f1766 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  19:     0x7ff99c6e7b4c - <rustc_query_impl[8639f0a94254e3b9]::on_disk_cache::OnDiskCache>::load_side_effects\r\n  20:     0x7ff99c5cad24 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  21:     0x7ff99c5695c2 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  22:     0x7ff99c625012 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  23:     0x7ff99c4d7a3f - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  24:     0x7ff99c586a61 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  25:     0x7ff99c6646f9 - <rustc_query_impl[8639f0a94254e3b9]::Queries as rustc_middle[4db38f5bb30aa45a]::ty::query::QueryEngine>::try_mark_green\r\n  26:     0x7ff99babb0b6 - rustc_ty_utils[ac82e78d48daf646]::provide\r\n  27:     0x7ff99c68edbf - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  28:     0x7ff99c74a966 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  29:     0x7ff99c6378db - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  30:     0x7ff99c4d1b7f - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  31:     0x7ff99c5c642c - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  32:     0x7ff99b9fa767 - <rustc_typeck[44a0375dafd03453]::check::wfcheck::GATSubstCollector as rustc_middle[4db38f5bb30aa45a]::ty::fold::TypeVisitor>::visit_ty\r\n  33:     0x7ff99ba04240 - <rustc_typeck[44a0375dafd03453]::check::upvar::InferBorrowKind as rustc_typeck[44a0375dafd03453]::expr_use_visitor::Delegate>::mutate\r\n  34:     0x7ff99c68e446 - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  35:     0x7ff99c746c51 - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  36:     0x7ff99c643b07 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  37:     0x7ff99c4a9b34 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  38:     0x7ff99c5a5342 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  39:     0x7ff99ba395e7 - <rustc_typeck[44a0375dafd03453]::variance::terms::InferredIndex as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  40:     0x7ff99b98a119 - <rustc_typeck[44a0375dafd03453]::constrained_generic_params::Parameter as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  41:     0x7ff99b8f4902 - <rustc_typeck[44a0375dafd03453]::outlives::explicit::ExplicitPredicatesMap as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  42:     0x7ff99b8f14bf - rustc_typeck[44a0375dafd03453]::check_crate\r\n  43:     0x7ff99905e62f - rustc_interface[3b7069506c759068]::passes::analysis\r\n  44:     0x7ff99c69023b - <rustc_span[fb335929b56265a7]::def_id::LocalDefId as rustc_query_impl[8639f0a94254e3b9]::profiling_support::SpecIntoSelfProfilingString>::spec_to_self_profile_string\r\n  45:     0x7ff99c76257e - rustc_query_impl[8639f0a94254e3b9]::query_callbacks::diagnostic_hir_wf_check\r\n  46:     0x7ff99c6342d1 - <rustc_query_impl[8639f0a94254e3b9]::queries::diagnostic_hir_wf_check as rustc_query_system[7f2d0936c5979e74]::query::config::QueryDescription<rustc_query_impl[8639f0a94254e3b9]::plumbing::QueryCtxt>>::describe\r\n  47:     0x7ff99c529b99 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  48:     0x7ff99c5c3792 - <rustc_mir_dataflow[1f04c5db66c6e383]::framework::engine::RustcMirAttrs>::output_path\r\n  49:     0x7ff998f7ab70 - <rustc_driver[a96692e377e9fbc1]::args::Error as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  50:     0x7ff998f20a4f - <rustc_middle[4db38f5bb30aa45a]::ty::SymbolName as core[5e9b1f0661f006a4]::fmt::Display>::fmt  51:     0x7ff998f12435 - <rustc_ast_passes[8672db41ecf6779a]::node_count::NodeCounter as rustc_ast[313453e987c93035]::visit::Visitor>::visit_attribute\r\n  52:     0x7ff998f22001 - <rustc_middle[4db38f5bb30aa45a]::ty::SymbolName as core[5e9b1f0661f006a4]::fmt::Display>::fmt  53:     0x7ff998f1da93 - rustc_driver[a96692e377e9fbc1]::pretty::print_after_hir_lowering\r\n  54:     0x7ff998f978d8 - <rustc_driver[a96692e377e9fbc1]::args::Error as core[5e9b1f0661f006a4]::fmt::Debug>::fmt\r\n  55:     0x7ff9a445ac6c - std::sys::windows::thread::Thread::new::hfa213d96886b5f6f\r\n  56:     0x7ffa296c7034 - BaseThreadInitThunk\r\n  57:     0x7ffa2a4c2651 - RtlUserThreadStart\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.58.0-beta.1 (426b94d7d 2021-11-29) running on x86_64-pc-windows-msvc\r\n\r\nnote: compiler flags: -Z symbol-mangling-version=v0 -Z macro-backtrace -Z tls-model=initial-exec -Z unstable-options -Z binary-dep-depinfo -Z force-unstable-if-unmarked -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 -C incremental -C target-feature=+crt-static -C prefer-dynamic -C llvm-args=-import-instr-limit=10\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\n#0 [predicates_of] computing predicates of `json::FormatShim`\r\n#1 [param_env] computing normalized predicates of `json::FormatShim`\r\n#2 [check_item_well_formed] checking that `json::FormatShim` is well-formed\r\n#3 [analysis] running analysis passes on this crate\r\nend of query stack\r\n    Checking measureme v10.0.0\r\n    Checking matchers v0.0.1\r\n    Checking tracing-subscriber v0.2.16\r\nerror: could not compile `rustc_serialize`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `C:\\Users\\${name}\\project\\rustc\\build\\bootstrap/debug/rustc --crate-name rustc_serialize --edition=2021 compiler\\rustc_serialize\\src\\lib.rs --error-format=json --json=diagnostic-rendered-ansi --crate-type lib --emit=dep-info,metadata -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 -C metadata=69e74595040b2647 -C extra-filename=-69e74595040b2647 --out-dir C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps --target x86_64-pc-windows-msvc -C incremental=C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\incremental -L dependency=C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps -L dependency=C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\release\\deps --extern indexmap=C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\libindexmap-960edd89f26b597a.rmeta --extern smallvec=C:\\Users\\${name}\\project\\rustc\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\libsmallvec-8c19e1eddb5b7608.rmeta --cfg=bootstrap -Zsymbol-mangling-version=v0 -Zmacro-backtrace -Ctarget-feature=+crt-static -Ztls-model=initial-exec -Zunstable-options -Wrustc::internal -Cprefer-dynamic -Cllvm-args=-import-instr-limit=10 -Z binary-dep-depinfo` (exit code: 0x80000003)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n```\r\n\r\n</p>\r\n</details>\r\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91767/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91767/timeline", "performed_via_github_app": null, "state_reason": "completed"}