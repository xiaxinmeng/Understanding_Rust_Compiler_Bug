{"url": "https://api.github.com/repos/rust-lang/rust/issues/90189", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/90189/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/90189/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/90189/events", "html_url": "https://github.com/rust-lang/rust/issues/90189", "id": 1034061111, "node_id": "I_kwDOAAsO6M49ooU3", "number": 90189, "title": "ICE with rustc debug assertions: Not enough bound vars: glacier fixed/88586.rs", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-10-23T04:05:40Z", "updated_at": "2021-10-27T11:20:12Z", "closed_at": "2021-10-27T11:20:12Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "<!--\r\nThank you for finding an Internal Compiler Error! \ud83e\uddca  If possible, try to provide\r\na minimal verifiable example. You can read \"Rust Bug Minimization Patterns\" for\r\nhow to create smaller examples.\r\n\r\nhttp://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/\r\n\r\n-->\r\n\r\n### Code\r\nNote that in order to reproduce this, you need a rustc build with debug assertions enabled!\r\n\r\ncode from `fixed/88586.rs`\r\n```Rust\r\ntrait A where\r\n    for<'a> Self: 'a,\r\n{\r\n}\r\n```\r\n\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.58.0-dev\r\nbinary: rustc\r\ncommit-hash: unknown\r\ncommit-date: unknown\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.58.0-dev\r\nLLVM version: 13.0.0\r\n```\r\nrustc @ 01198792a608b05e624b0127e76dd0753057016c\r\n### Error output\r\n\r\n```\r\nerror[E0601]: `main` function not found in crate `88586`\r\n --> ./88586.rs:1:1\r\n  |\r\n1 | / trait A where\r\n2 | |     for<'a> Self: 'a,\r\n3 | | {\r\n4 | | }\r\n  | |_^ consider adding a `main` function to `./88586.rs`\r\n\r\nerror: internal compiler error: compiler/rustc_middle/src/ty/fold.rs:884:21: Not enough bound vars: BoundRegion { var: 0, kind: BrNamed(DefId(0:4 ~ 88586[6450]::A::'a), 'a) } not found in []\r\n\r\nthread 'rustc' panicked at 'Box<dyn Any>', compiler/rustc_errors/src/lib.rs:1147:9\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.58.0-dev running on x86_64-unknown-linux-gnu\r\n\r\nquery stack during panic:\r\n#0 [super_predicates_that_define_assoc_type] computing the super traits of `A`\r\n#1 [super_predicates_of] computing the super predicates of `A`\r\nend of query stack\r\nerror: aborting due to 2 previous errors\r\n\r\nFor more information about this error, try `rustc --explain E0601`.\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\nerror[E0601]: `main` function not found in crate `88586`\r\n --> ./88586.rs:1:1\r\n  |\r\n1 | / trait A where\r\n2 | |     for<'a> Self: 'a,\r\n3 | | {\r\n4 | | }\r\n  | |_^ consider adding a `main` function to `./88586.rs`\r\n\r\nerror: internal compiler error: compiler/rustc_middle/src/ty/fold.rs:884:21: Not enough bound vars: BoundRegion { var: 0, kind: BrNamed(DefId(0:4 ~ 88586[6450]::A::'a), 'a) } not found in []\r\n\r\nthread 'rustc' panicked at 'Box<dyn Any>', compiler/rustc_errors/src/lib.rs:1147:9\r\nstack backtrace:\r\n   0:     0x7fd788e8e2ac - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hb9742b8546a91052\r\n   1:     0x7fd788f39d8c - core::fmt::write::h3fddcb644eebfde3\r\n   2:     0x7fd788ed2fd5 - std::io::Write::write_fmt::h1a1f2abcba70e3b1\r\n   3:     0x7fd788e8e0cb - std::sys_common::backtrace::print::hc4410d3dd534974f\r\n   4:     0x7fd788edb7e0 - std::panicking::default_hook::{{closure}}::heb097f17356ef40d\r\n   5:     0x7fd788edb3ce - std::panicking::default_hook::h3a96289c47c5d257\r\n   6:     0x7fd78a1e8215 - rustc_driver::DEFAULT_HOOK::{{closure}}::{{closure}}::h225178fa6d985d8b\r\n   7:     0x7fd788edbfe0 - std::panicking::rust_panic_with_hook::h47efdb331119e29d\r\n   8:     0x7fd78cec433d - std::panicking::begin_panic::{{closure}}::h0b6904671182664f\r\n   9:     0x7fd78cec2bf6 - std::sys_common::backtrace::__rust_end_short_backtrace::hc753ff6e2dd654a7\r\n  10:     0x7fd78cec42e6 - std::panicking::begin_panic::hf4e8e4cd817ff020\r\n  11:     0x7fd78cec4286 - std::panic::panic_any::hc91236531ea21313\r\n  12:     0x7fd78ceea51a - rustc_errors::HandlerInner::bug::h07de0bdacef7f162\r\n  13:     0x7fd78cee7570 - rustc_errors::Handler::bug::h282d50e084509b79\r\n  14:     0x7fd78cd2e3a0 - rustc_middle::util::bug::opt_span_bug_fmt::{{closure}}::h5d36691cdd5ee3a7\r\n  15:     0x7fd78cd2215b - rustc_middle::ty::context::tls::with_opt::{{closure}}::ha428d361a9d0af98\r\n  16:     0x7fd78cd2210e - rustc_middle::ty::context::tls::with_opt::h635d45a5d5cca663\r\n  17:     0x7fd78cd2e293 - rustc_middle::util::bug::opt_span_bug_fmt::hf83a75f36a2197ce\r\n  18:     0x7fd78cd2e205 - rustc_middle::util::bug::bug_fmt::h08c76cd93448a7c9\r\n  19:     0x7fd78cc05690 - <rustc_middle::ty::fold::ValidateBoundVars as rustc_middle::ty::fold::TypeVisitor>::visit_region::hb3135976605024aa\r\n  20:     0x7fd78ab8dd9a - rustc_middle::ty::sty::Binder<T>::bind_with_vars::h8792c95916b63a8f\r\n  21:     0x7fd78aa2b775 - <dyn rustc_typeck::astconv::AstConv>::add_bounds::hb6db9363dd76ceeb\r\n  22:     0x7fd78ac44ad9 - rustc_typeck::collect::predicates_from_bound::h8afc6661c16f5787\r\n  23:     0x7fd78aad00b6 - <core::iter::adapters::chain::Chain<A,B> as core::iter::traits::iterator::Iterator>::next::h66a15221e366febc\r\n  24:     0x7fd78ab23ec2 - <alloc::vec::Vec<T> as alloc::vec::spec_from_iter::SpecFromIter<T,I>>::from_iter::hc63691639ff03c14\r\n  25:     0x7fd78ac3bdb6 - rustc_typeck::collect::super_predicates_that_define_assoc_type::h1b9bb2afe7ee3720\r\n  26:     0x7fd78b9de47f - rustc_query_system::query::plumbing::get_query::h3eea89e126dbfce7\r\n  27:     0x7fd78be7960d - <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::super_predicates_that_define_assoc_type::hda91de24793658c2\r\n  28:     0x7fd78ac3b4c5 - rustc_typeck::collect::super_predicates_of::h1dceb15cd395b09a\r\n  29:     0x7fd78b8f743b - rustc_query_system::query::plumbing::try_execute_query::h9d37f06980ac4334\r\n  30:     0x7fd78ba01d63 - rustc_query_system::query::plumbing::get_query::h84c6ce347414cd25\r\n  31:     0x7fd78be795b8 - <rustc_query_impl::Queries as rustc_middle::ty::query::QueryEngine>::super_predicates_of::h48734c8f342c9abd\r\n  32:     0x7fd78ac36d2e - rustc_typeck::collect::convert_item::h62188739ad4c46e0\r\n  33:     0x7fd78ac2ae8a - <rustc_typeck::collect::CollectItemTypesVisitor as rustc_hir::intravisit::Visitor>::visit_item::h14b2f2ee11c9ba74\r\n  34:     0x7fd78ac2a2e6 - rustc_typeck::collect::collect_mod_item_types::h798c096f33ec4eaf\r\n  35:     0x7fd78b8e830a - rustc_query_system::query::plumbing::try_execute_query::h7cd5c6214028bfab\r\n  36:     0x7fd78ba3759b - rustc_query_system::query::plumbing::get_query::heea213feabc08c9c\r\n  37:     0x7fd78ac5fe80 - rustc_typeck::check_crate::h33c1680f197be66c\r\n  38:     0x7fd78a34780b - rustc_interface::passes::analysis::h7c1bb0ea479fc59a\r\n  39:     0x7fd78b900a1c - rustc_query_system::query::plumbing::try_execute_query::hb23b91ca9ff6e3f2\r\n  40:     0x7fd78b9f1fec - rustc_query_system::query::plumbing::get_query::h6ff0d53ffb4fc288\r\n  41:     0x7fd78a1ab849 - rustc_interface::passes::QueryContext::enter::h132761253d28b6a1\r\n  42:     0x7fd78a09295a - std::sys_common::backtrace::__rust_begin_short_backtrace::hc801dc55c4fb9438\r\n  43:     0x7fd78a1af450 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h334b669fc5472cf7\r\n  44:     0x7fd788edf943 - std::sys::unix::thread::Thread::new::thread_start::h5b3c5f92bbe007fe\r\n  45:     0x7fd7854c9259 - start_thread\r\n  46:     0x7fd788cb75e3 - __GI___clone\r\n  47:                0x0 - <unknown>\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.58.0-dev running on x86_64-unknown-linux-gnu\r\n\r\nquery stack during panic:\r\n#0 [super_predicates_that_define_assoc_type] computing the super traits of `A`\r\n#1 [super_predicates_of] computing the super predicates of `A`\r\n#2 [collect_mod_item_types] collecting item types in top-level module\r\n#3 [analysis] running analysis passes on this crate\r\nend of query stack\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"JakobDegen\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/90189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/90189/timeline", "performed_via_github_app": null, "state_reason": "completed"}