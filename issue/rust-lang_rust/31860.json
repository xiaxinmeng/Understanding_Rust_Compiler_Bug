{"url": "https://api.github.com/repos/rust-lang/rust/issues/31860", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31860/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31860/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31860/events", "html_url": "https://github.com/rust-lang/rust/issues/31860", "id": 136053318, "node_id": "MDU6SXNzdWUxMzYwNTMzMTg=", "number": 31860, "title": "Add warning for hexdec literals with mixed case-sensitivity", "user": {"login": "Robbepop", "id": 8193155, "node_id": "MDQ6VXNlcjgxOTMxNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/8193155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Robbepop", "html_url": "https://github.com/Robbepop", "followers_url": "https://api.github.com/users/Robbepop/followers", "following_url": "https://api.github.com/users/Robbepop/following{/other_user}", "gists_url": "https://api.github.com/users/Robbepop/gists{/gist_id}", "starred_url": "https://api.github.com/users/Robbepop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Robbepop/subscriptions", "organizations_url": "https://api.github.com/users/Robbepop/orgs", "repos_url": "https://api.github.com/users/Robbepop/repos", "events_url": "https://api.github.com/users/Robbepop/events{/privacy}", "received_events_url": "https://api.github.com/users/Robbepop/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-02-24T12:51:56Z", "updated_at": "2016-02-24T15:39:27Z", "closed_at": "2016-02-24T14:48:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In Rust it is possible to define hexadecimal number literals with\n\n``` rust\nlet v1 = 0xff;\nlet v2 = 0xAC;\n```\n\nAfter the `0x` preix the programmer may use numerals from `0..9`, `a..f` and `A..F`.\nSo this makes it also possible to mix the case-sensitivity even within the same numeric literal:\n\n``` rust\nlet v3 = 0xFfEeDdCc;\n```\n\nIt is also possible to suffix the literal for type explicity:\n\n``` rust\nlet v1 = 0xaai32; // may be confusing\nlet v2 = 0xAA_i32; // clear intent!\nassert_eq!(v1,v2);\n```\n\nThis is not only likely unreadable but also may lead to confusion:\n\n``` rust\nlet v4 = 0xFFAA_f32;\n```\n\nIn this case the programmer wanted to instantiate a float (note the `f32` suffix) and it compiled fine.\nHowever, it is not a float literal but still a valid hexdec literal which makes absolutely sense following the current rules.\n\n``` rust\nlet v5: f32 = 0xFFAA_f32; // error: mismatched types!\n```\n\n**Improvement:**\nA possible improvement (not only to readability) is to add a warning when the user mixes case-sensitivity within the same hexa decimal literal as this would at least prevent the above case.\nUsing lower-case literals would still allow this possible trap, however it looks less tricky:\n\n``` rust\nlet v6 = 0xffaa_f32;\nlet v7 = 0xffaaf32;\nassert_eq!(v6,v7);\n```\n\n**Better Solution:**\nIn my opinion an even better improvement would be to disallow lower-case characters in hexdec literals to make numeric suffixes more significant within the literal but I guess many people would disagree with this suggestion.\n\n``` rust\nlet e1 = 0xFF_AA00_11; // ok\nlet e2 = 0xFf_aAbB; // warning (or error!)\nlet e3 = 0xFA_CC_f32; // warning (or error!)\nlet e4 = 0xFACC_i64; // intent is clear!\nlet e5 = 0xFACCi32; // intent is still clearer than the following:\nlet e6 = 0xfacci32; // looks confusing\n```\n\nAnother minor improvement for readability would be to allow suffixes (for hexdec literals) only when the last character of the literal is an `_` (underscore).\n\n**Feasibility**\nThis may break code if errors are used instead of warnings, however it should be possible to create tools that fix such code automatically.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31860/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31860/timeline", "performed_via_github_app": null, "state_reason": "completed"}