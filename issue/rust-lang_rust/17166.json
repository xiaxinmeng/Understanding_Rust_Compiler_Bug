{"url": "https://api.github.com/repos/rust-lang/rust/issues/17166", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17166/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17166/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17166/events", "html_url": "https://github.com/rust-lang/rust/issues/17166", "id": 42497908, "node_id": "MDU6SXNzdWU0MjQ5NzkwOA==", "number": 17166, "title": "No-opt bots should be built against an unoptimised/debug-enabled standard lib and helper libraries", "user": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 60329014, "node_id": "MDU6TGFiZWw2MDMyOTAxNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-low", "name": "P-low", "color": "eb6420", "default": false, "description": "Low priority"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2014-09-11T07:52:35Z", "updated_at": "2016-04-13T18:37:56Z", "closed_at": "2016-04-13T18:37:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "AFAIK, the `nopt-t` builders do a complete bootstrap with optimisations enabled, and then build the tests without optimisations. This means the tests are built against an optimised standard library and so we don't test everything without optimisations. This will be particularly important with https://github.com/rust-lang/rust/issues/17081 since `debug_assert`s would then be off for the vast majority of testing<sup>1</sup>, this also means we aren't using jemalloc's consistency checks on the bots at all (https://github.com/rust-lang/rust/pull/17083).\n\nAnother solution would be optimised builder with these debugging settings turned up to full.\n\n(On the other hand, it is possible that this is already the case, in which case we should probably have bots with the debugging settings turned off.)\n\nNominating for something (P-low, I guess? but it would be quite nice to have these extra assurances).\n\n<sup>1</sup> Unlike general inlined code which is compiled with the optimisation level of the crate it is being included in, `debug_assert`s are currently 'removed' in macro expansion, so any internal consistency checks of generic types like `HashMap`, `Vec` are still lost.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17166/timeline", "performed_via_github_app": null, "state_reason": "completed"}