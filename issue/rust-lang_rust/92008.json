{"url": "https://api.github.com/repos/rust-lang/rust/issues/92008", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/92008/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/92008/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/92008/events", "html_url": "https://github.com/rust-lang/rust/issues/92008", "id": 1082668923, "node_id": "I_kwDOAAsO6M5AiDd7", "number": 92008, "title": "Consider removing --max-memory linker flag for WebAssembly.", "user": {"login": "kettle11", "id": 4565191, "node_id": "MDQ6VXNlcjQ1NjUxOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4565191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kettle11", "html_url": "https://github.com/kettle11", "followers_url": "https://api.github.com/users/kettle11/followers", "following_url": "https://api.github.com/users/kettle11/following{/other_user}", "gists_url": "https://api.github.com/users/kettle11/gists{/gist_id}", "starred_url": "https://api.github.com/users/kettle11/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kettle11/subscriptions", "organizations_url": "https://api.github.com/users/kettle11/orgs", "repos_url": "https://api.github.com/users/kettle11/repos", "events_url": "https://api.github.com/users/kettle11/events{/privacy}", "received_events_url": "https://api.github.com/users/kettle11/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-12-16T21:44:58Z", "updated_at": "2023-02-19T12:33:48Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "The relevant line: https://github.com/rust-lang/rust/blob/38030ffb4e735b26260848b744c0910a5641e1db/compiler/rustc_codegen_ssa/src/back/linker.rs#L1044\r\n\r\nPresently `--max-memory` defaults to limiting memory imports to 1GB in size. If that flag were not set the default behavior (as documented here: https://lld.llvm.org/WebAssembly.html) is an unlimited maximum.\r\n\r\nIt's not immediately obvious to me what problem setting that flag prevents, however it's easy to get confused by this limit when trying to use Rust with memory imports larger than 1GB.\r\n\r\nCould the flag just be removed?\r\n\r\n@alexcrichton as you were the one who added the relevant code.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/92008/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/92008/timeline", "performed_via_github_app": null, "state_reason": null}