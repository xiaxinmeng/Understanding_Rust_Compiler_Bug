{"url": "https://api.github.com/repos/rust-lang/rust/issues/51975", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51975/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51975/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51975/events", "html_url": "https://github.com/rust-lang/rust/issues/51975", "id": 337330897, "node_id": "MDU6SXNzdWUzMzczMzA4OTc=", "number": 51975, "title": "rustc crashes with exit code 101 and no error - 2018 edition + futures-await + automatic extern crate", "user": {"login": "Arnavion", "id": 1096010, "node_id": "MDQ6VXNlcjEwOTYwMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1096010?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arnavion", "html_url": "https://github.com/Arnavion", "followers_url": "https://api.github.com/users/Arnavion/followers", "following_url": "https://api.github.com/users/Arnavion/following{/other_user}", "gists_url": "https://api.github.com/users/Arnavion/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arnavion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arnavion/subscriptions", "organizations_url": "https://api.github.com/users/Arnavion/orgs", "repos_url": "https://api.github.com/users/Arnavion/repos", "events_url": "https://api.github.com/users/Arnavion/events{/privacy}", "received_events_url": "https://api.github.com/users/Arnavion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 930400927, "node_id": "MDU6TGFiZWw5MzA0MDA5Mjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rust-2018-preview", "name": "A-rust-2018-preview", "color": "f7e101", "default": false, "description": "Area: The 2018 edition preview"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/54", "html_url": "https://github.com/rust-lang/rust/milestone/54", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/54/labels", "id": 3463305, "node_id": "MDk6TWlsZXN0b25lMzQ2MzMwNQ==", "number": 54, "title": "Rust 2018 RC", "description": "See https://internals.rust-lang.org/t/rust-2018-the-home-stretch/7810", "creator": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 64, "state": "closed", "created_at": "2018-06-29T18:51:29Z", "updated_at": "2020-06-16T05:11:03Z", "due_on": "2018-09-13T07:00:00Z", "closed_at": "2018-11-16T11:06:58Z"}, "comments": 4, "created_at": "2018-07-01T23:11:22Z", "updated_at": "2018-09-06T16:35:04Z", "closed_at": "2018-09-06T16:35:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n$ rustc -vV\r\n\r\nrustc 1.28.0-nightly (84804c387 2018-06-26)\r\nbinary: rustc\r\ncommit-hash: 84804c3874a15f55a905c0b53d820372003b0c24\r\ncommit-date: 2018-06-26\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.28.0-nightly\r\nLLVM version: 6.0\r\n```\r\n\r\nCargo.toml\r\n\r\n```toml\r\ncargo-features = [\"edition\"]\r\n\r\n[package]\r\nname = \"rust-test\"\r\nversion = \"0.1.0\"\r\nauthors = [\"Arnavion <arnavion@gmail.com>\"]\r\nedition = \"2018\"\r\n\r\n[dependencies]\r\nfutures-await = \"0.1.x\"\r\n```\r\n\r\nCargo.lock\r\n\r\n<details>\r\n\r\n```toml\r\n[[package]]\r\nname = \"futures\"\r\nversion = \"0.1.21\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\n\r\n[[package]]\r\nname = \"futures-await\"\r\nversion = \"0.1.1\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\ndependencies = [\r\n \"futures 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"futures-await-async-macro 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"futures-await-await-macro 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"futures-await-async-macro\"\r\nversion = \"0.1.4\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\ndependencies = [\r\n \"proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"quote 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"syn 0.14.4 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"futures-await-await-macro\"\r\nversion = \"0.1.1\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\n\r\n[[package]]\r\nname = \"proc-macro2\"\r\nversion = \"0.4.6\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\ndependencies = [\r\n \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"quote\"\r\nversion = \"0.6.3\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\ndependencies = [\r\n \"proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"rust-test\"\r\nversion = \"0.1.0\"\r\ndependencies = [\r\n \"futures-await 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"syn\"\r\nversion = \"0.14.4\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\ndependencies = [\r\n \"proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"quote 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\r\n]\r\n\r\n[[package]]\r\nname = \"unicode-xid\"\r\nversion = \"0.1.0\"\r\nsource = \"registry+https://github.com/rust-lang/crates.io-index\"\r\n\r\n[metadata]\r\n\"checksum futures 0.1.21 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1a70b146671de62ec8c8ed572219ca5d594d9b06c0b364d5e67b722fc559b48c\"\r\n\"checksum futures-await 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d76972f0c250aadc9c3e521023e769b097f838a2d9a71e5139c4fdf0c7657463\"\r\n\"checksum futures-await-async-macro 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fdd257a06a5fd1f31adcbddb8068678b2ae534fb6eb282df010ae41db59ddf84\"\r\n\"checksum futures-await-await-macro 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f3b8bd34e4f4d1bf0e3fe3f22ad22475429f594221472216e34b942f912ec4a4\"\r\n\"checksum proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"effdb53b25cdad54f8f48843d67398f7ef2e14f12c1b4cb4effc549a6462a4d6\"\r\n\"checksum quote 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e44651a0dc4cdd99f71c83b561e221f714912d11af1a4dff0631f923d53af035\"\r\n\"checksum syn 0.14.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2beff8ebc3658f07512a413866875adddd20f4fd47b2a4e6c9da65cd281baaea\"\r\n\"checksum unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fc72304796d0818e357ead4e000d19c9c174ab23dc11093ac919054d20a6a7fc\"\r\n```\r\n\r\n</details>\r\n\r\nlib.rs\r\n\r\n```rs\r\n// extern crate futures_await;\r\n\r\nuse futures_await as futures;\r\nuse crate::futures::{ Future, IntoFuture };\r\n\r\nfn foo() -> impl Future<Item = (), Error = ()> {\r\n\tOk(()).into_future()\r\n}\r\n```\r\n\r\n```sh\r\n$ cargo build --verbose\r\n\r\n<snip>\r\n     Running `rustc --edition=2018 --crate-name rust_test src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=dab8a58d770a200f -C extra-filename=-dab8a58d770a200f --out-dir C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps -C linker=lld-link -C incremental=C:\\Stuff\\Sources\\rust-test\\target\\debug\\incremental -L dependency=C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps --extern futures_await=C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps\\libfutures_await-de83e6f62427976c.rlib -C target-feature=+crt-static`\r\nwarning: unused import: `IntoFuture`\r\n --> src\\lib.rs:4:31\r\n  |\r\n4 | use crate::futures::{ Future, IntoFuture };\r\n  |                               ^^^^^^^^^^\r\n  |\r\n  = note: #[warn(unused_imports)] on by default\r\n\r\nerror: Could not compile `rust-test`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name rust_test src\\lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=dab8a58d770a200f -C extra-filename=-dab8a58d770a200f --out-dir C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps -C linker=lld-link -C incremental=C:\\Stuff\\Sources\\rust-test\\target\\debug\\incremental -L dependency=C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps --extern futures_await=C:\\Stuff\\Sources\\rust-test\\target\\debug\\deps\\libfutures_await-de83e6f62427976c.rlib -C target-feature=+crt-static` (exit code: 101)\r\n```\r\n\r\n- Uncommenting the `extern crate futures_await;` line makes it compile successfully.\r\n\r\n- Using the `futures` 0.1.x crate directly instead of `futures_await` compiles successfully, without needing to add an `extern crate futures;` line.", "closed_by": {"login": "Arnavion", "id": 1096010, "node_id": "MDQ6VXNlcjEwOTYwMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1096010?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Arnavion", "html_url": "https://github.com/Arnavion", "followers_url": "https://api.github.com/users/Arnavion/followers", "following_url": "https://api.github.com/users/Arnavion/following{/other_user}", "gists_url": "https://api.github.com/users/Arnavion/gists{/gist_id}", "starred_url": "https://api.github.com/users/Arnavion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Arnavion/subscriptions", "organizations_url": "https://api.github.com/users/Arnavion/orgs", "repos_url": "https://api.github.com/users/Arnavion/repos", "events_url": "https://api.github.com/users/Arnavion/events{/privacy}", "received_events_url": "https://api.github.com/users/Arnavion/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51975/timeline", "performed_via_github_app": null, "state_reason": "completed"}