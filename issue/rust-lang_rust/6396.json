{"url": "https://api.github.com/repos/rust-lang/rust/issues/6396", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6396/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6396/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6396/events", "html_url": "https://github.com/rust-lang/rust/issues/6396", "id": 14201621, "node_id": "MDU6SXNzdWUxNDIwMTYyMQ==", "number": 6396, "title": "rp.is_none ICE when using 'self lifetime name inappropriately(?)", "user": {"login": "ssbr", "id": 356788, "node_id": "MDQ6VXNlcjM1Njc4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/356788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ssbr", "html_url": "https://github.com/ssbr", "followers_url": "https://api.github.com/users/ssbr/followers", "following_url": "https://api.github.com/users/ssbr/following{/other_user}", "gists_url": "https://api.github.com/users/ssbr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ssbr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ssbr/subscriptions", "organizations_url": "https://api.github.com/users/ssbr/orgs", "repos_url": "https://api.github.com/users/ssbr/repos", "events_url": "https://api.github.com/users/ssbr/events{/privacy}", "received_events_url": "https://api.github.com/users/ssbr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-05-10T17:48:14Z", "updated_at": "2013-11-11T21:00:18Z", "closed_at": "2013-11-11T21:00:18Z", "author_association": "NONE", "active_lock_reason": null, "body": "```\nuse core::str;\n\nfn foo<'self>(s: &'self str) -> str::StrCharIterator<'self> {s.char_iter()}\n```\n\nThis works fine (but doesn't do much) if we s/'self/'x/g. As-is, on my system, I get this result from compiling:\n\n```\n$ RUST_LOG=rustc=1,::rt::backtrace rustc --lib ice_debug/ice1.rs\nrust: task failed at 'assertion failed: rp.is_none()', /home/devin/local_programming/rust/src/librustc/middle/typeck/collect.rs:1070\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fc622995ccb]\n/usr/local/bin/../lib/librustrt.so(+0x2c869)[0x7fc6229a6869]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fc622997c80]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7fc6262fb963]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x1298f2)[0x7fc6262fb8f2]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys14__extensions__9meth_89249fail_with17_ac9eb45dc42bd6906_07preE+0x6b)[0x7fc62623a8eb]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck7collect10ty_of_item17_d137c315966677236_07preE+0x2841)[0x7fc624bcbe91]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck7collect7convert16_1a2bf85beff75cb6_07preE+0x545)[0x7fc624bc6cf5]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x6bc6db)[0x7fc624bc66db]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0xfdfd7)[0x7fc625565fd7]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0xf5b42)[0x7fc62555db42]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0x76629)[0x7fc6254de629]\n/usr/local/bin/../lib/libsyntax-84efebcb12c867a2-0.7-pre.so(+0xfd5cc)[0x7fc6255655cc]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x2e08e1)[0x7fc6247ea8e1]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck7collect18collect_item_types17_74ef7a78d270e44c6_07preE+0x4a5)[0x7fc624bc3dd5]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x7149a2)[0x7fc624c1e9a2]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0x7147f9)[0x7fc624c1e7f9]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6middle6typeck11check_crate17_c84fb58afee883786_07preE+0x1d0)[0x7fc624c1bdc0]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_rest17_819c62971b10988b6_07preE+0x1555)[0x7fc624f36705]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver12compile_upto15_bb4dc350e2dbf46_07preE+0x192)[0x7fc624f3c962]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN6driver6driver13compile_input17_fa1f24ad298485546_07preE+0x107)[0x7fc624f3cde7]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN12run_compiler17_91176f6b8a4d83ae6_07preE+0x2aec)[0x7fc624f69fbc]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa7242e)[0x7fc624f7c42e]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa6febc)[0x7fc624f79ebc]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa69e0c)[0x7fc624f73e0c]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa72708)[0x7fc624f7c708]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xf1f5d)[0x7fc6262c3f5d]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x16f338)[0x7fc626341338]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7fc622996674]\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\nrust: task failed at 'explicit failure', /home/devin/local_programming/rust/src/librustc/rustc.rc:355\n/usr/local/bin/../lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7fc622995ccb]\n/usr/local/bin/../lib/librustrt.so(+0x2c869)[0x7fc6229a6869]\n/usr/local/bin/../lib/librustrt.so(upcall_fail+0x1a0)[0x7fc622997c80]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(_ZN3sys13begin_unwind_16_615cb041c655a976_07preE+0x63)[0x7fc6262fb963]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0x129a12)[0x7fc6262fba12]\n/usr/local/bin/../lib/libcore-c3ca5d77d81b46c1-0.7-pre.so(+0xc8514)[0x7fc62629a514]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN7monitor17_7c89c43af55f627f6_07preE+0x2385)[0x7fc624f6d545]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(+0xa72708)[0x7fc624f7c708]\n/usr/local/bin/../lib/librustc-c84825241471686d-0.7-pre.so(_ZN4main15_c4de63b748e03d6_07preE+0x69)[0x7fc624f7c369]\nrustc(_rust_main+0x2e)[0x400c8e]\n/usr/local/bin/../lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7fc622996674]\nrust: domain main @0x125c410 root task failed\n```\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6396/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6396/timeline", "performed_via_github_app": null, "state_reason": "completed"}