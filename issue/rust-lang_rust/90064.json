{"url": "https://api.github.com/repos/rust-lang/rust/issues/90064", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/90064/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/90064/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/90064/events", "html_url": "https://github.com/rust-lang/rust/issues/90064", "id": 1030602068, "node_id": "I_kwDOAAsO6M49bb1U", "number": 90064, "title": "rustc 1.56.0 : double free on OpenBSD sparc64", "user": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 311417367, "node_id": "MDU6TGFiZWwzMTE0MTczNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-openbsd", "name": "O-openbsd", "color": "6e6ec0", "default": false, "description": "Operating system: OpenBSD"}, {"id": 632899563, "node_id": "MDU6TGFiZWw2MzI4OTk1NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-SPARC", "name": "O-SPARC", "color": "6e6ec0", "default": false, "description": "Target: SPARC processors"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-10-19T18:09:02Z", "updated_at": "2021-10-31T14:30:20Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am currently preparing packaging of rustc 1.56.0 for OpenBSD.\r\n\r\nOn sparc64, while compiling `alloc`, the build aborts due to `double free` (OpenBSD libc detects it and abort).\r\n\r\nIf I correctly understand the place, the double free occurs with stage1, which is 1.56.0 code built using 1.55.0.\r\n\r\nIt is a regression from previous stable, as building 1.55.0 was fine.\r\n\r\nAny pointer would be appreciate.\r\n\r\nThe build log for `alloc` is the following:\r\n```\r\n   Compiling alloc v0.0.0 (/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/library/alloc)\r\n     Running `/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/bootstrap/debug/rustc --crate-name alloc --edition=2018 library/alloc/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 --cfg 'feature=\"compiler-builtins-c\"' -C metadata=a2d2e271a66d2a4c -C extra-filename=-a2d2e271a66d2a4c --out-dir /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps --target sparc64-unknown-openbsd -L dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps -L dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/release/deps --extern compiler_builtins=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcompiler_builtins-7b676bd92d7e6db5.rmeta --extern core=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcore-b2a58fb9eb0abee9.rmeta -Zmacro-backtrace -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes '-Zcrate-attr=doc(html_root_url=\"https://doc.rust-lang.org/1.56.0/\")' -Z binary-dep-depinfo -L native=/usr/lib`\r\n[RUSTC-SHIM] rustc alloc env[0]: \"CARGO\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/bin/cargo.bin\"\r\n[RUSTC-SHIM] rustc alloc env[1]: \"CARGO_CRATE_NAME\"=\"alloc\"\r\n[RUSTC-SHIM] rustc alloc env[2]: \"CARGO_HOME\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/cargo-home\"\r\n[RUSTC-SHIM] rustc alloc env[3]: \"CARGO_INCREMENTAL\"=\"0\"\r\n[RUSTC-SHIM] rustc alloc env[4]: \"CARGO_MAKEFLAGS\"=\"-j --jobserver-fds=5,6 --jobserver-auth=5,6\"\r\n[RUSTC-SHIM] rustc alloc env[5]: \"CARGO_MANIFEST_DIR\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/library/alloc\"\r\n[RUSTC-SHIM] rustc alloc env[6]: \"CARGO_PKG_AUTHORS\"=\"\"\r\n[RUSTC-SHIM] rustc alloc env[7]: \"CARGO_PKG_DESCRIPTION\"=\"The Rust core allocation and collections library\"\r\n[RUSTC-SHIM] rustc alloc env[8]: \"CARGO_PKG_HOMEPAGE\"=\"\"\r\n[RUSTC-SHIM] rustc alloc env[9]: \"CARGO_PKG_LICENSE\"=\"MIT OR Apache-2.0\"\r\n[RUSTC-SHIM] rustc alloc env[10]: \"CARGO_PKG_LICENSE_FILE\"=\"\"\r\n[RUSTC-SHIM] rustc alloc env[11]: \"CARGO_PKG_NAME\"=\"alloc\"\r\n[RUSTC-SHIM] rustc alloc env[12]: \"CARGO_PKG_REPOSITORY\"=\"https://github.com/rust-lang/rust.git\"\r\n[RUSTC-SHIM] rustc alloc env[13]: \"CARGO_PKG_VERSION\"=\"0.0.0\"\r\n[RUSTC-SHIM] rustc alloc env[14]: \"CARGO_PKG_VERSION_MAJOR\"=\"0\"\r\n[RUSTC-SHIM] rustc alloc env[15]: \"CARGO_PKG_VERSION_MINOR\"=\"0\"\r\n[RUSTC-SHIM] rustc alloc env[16]: \"CARGO_PKG_VERSION_PATCH\"=\"0\"\r\n[RUSTC-SHIM] rustc alloc env[17]: \"CARGO_PKG_VERSION_PRE\"=\"\"\r\n[RUSTC-SHIM] rustc alloc env[18]: \"CARGO_PROFILE_RELEASE_DEBUG\"=\"0\"\r\n[RUSTC-SHIM] rustc alloc env[19]: \"CARGO_PROFILE_RELEASE_DEBUG_ASSERTIONS\"=\"false\"\r\n[RUSTC-SHIM] rustc alloc env[20]: \"CARGO_PROFILE_RELEASE_OVERFLOW_CHECKS\"=\"false\"\r\n[RUSTC-SHIM] rustc alloc env[21]: \"CARGO_TARGET_DIR\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std\"\r\n[RUSTC-SHIM] rustc alloc env[22]: \"RUSTBUILD_NATIVE_DIR\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/native\"\r\n[RUSTC-SHIM] rustc alloc env[23]: \"RUSTC\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/bootstrap/debug/rustc\"\r\n[RUSTC-SHIM] rustc alloc env[24]: \"RUSTC_BOOTSTRAP\"=\"1\"\r\n[RUSTC-SHIM] rustc alloc env[25]: \"RUSTC_BREAK_ON_ICE\"=\"1\"\r\n[RUSTC-SHIM] rustc alloc env[26]: \"RUSTC_ERROR_METADATA_DST\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/tmp/extended-error-metadata\"\r\n[RUSTC-SHIM] rustc alloc env[27]: \"RUSTC_FORCE_UNSTABLE\"=\"1\"\r\n[RUSTC-SHIM] rustc alloc env[28]: \"RUSTC_INSTALL_BINDIR\"=\"bin\"\r\n[RUSTC-SHIM] rustc alloc env[29]: \"RUSTC_LIBDIR\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib\"\r\n[RUSTC-SHIM] rustc alloc env[30]: \"RUSTC_LINT_FLAGS\"=\"-Wrust_2018_idioms -Wunused_lifetimes -Wsemicolon_in_expressions_from_macros -Dwarnings\"\r\n[RUSTC-SHIM] rustc alloc env[31]: \"RUSTC_REAL\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/bin/rustc\"\r\n[RUSTC-SHIM] rustc alloc env[32]: \"RUSTC_SNAPSHOT\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/bin/rustc\"\r\n[RUSTC-SHIM] rustc alloc env[33]: \"RUSTC_SNAPSHOT_LIBDIR\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/lib\"\r\n[RUSTC-SHIM] rustc alloc env[34]: \"RUSTC_STAGE\"=\"1\"\r\n[RUSTC-SHIM] rustc alloc env[35]: \"RUSTC_SYSROOT\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1\"\r\n[RUSTC-SHIM] rustc alloc env[36]: \"RUSTC_VERBOSE\"=\"2\"\r\n[RUSTC-SHIM] rustc alloc env[37]: \"RUSTDOC\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/bootstrap/debug/rustdoc\"\r\n[RUSTC-SHIM] rustc alloc env[38]: \"RUSTDOCFLAGS\"=\"-Dwarnings -Wrustdoc::invalid_codeblock_attributes --crate-version 1.56.0 -Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/1.56.0/\\\")\"\r\n[RUSTC-SHIM] rustc alloc env[39]: \"RUSTDOC_REAL\"=\"/path/to/nowhere/rustdoc/not/required\"\r\n[RUSTC-SHIM] rustc alloc env[40]: \"RUSTFLAGS\"=\"-Zmacro-backtrace -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes -Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/1.56.0/\\\")\"\r\n[RUSTC-SHIM] rustc alloc env[41]: \"RUST_COMPILER_RT_ROOT\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/src/llvm-project/compiler-rt\"\r\n[RUSTC-SHIM] rustc alloc env[42]: \"RUST_SAVE_ANALYSIS_CONFIG\"=\"{\\\"output_file\\\": null,\\\"full_docs\\\": false,\\\"pub_only\\\": true,\\\"reachable_only\\\": false,\\\"distro_crate\\\": true,\\\"signatures\\\": false,\\\"borrow_data\\\": false}\"\r\n[RUSTC-SHIM] rustc alloc env[43]: \"RUST_TEST_THREADS\"=\"1\"\r\n[RUSTC-SHIM] rustc alloc working directory: /home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src\r\n[RUSTC-SHIM] rustc alloc command: \"LD_LIBRARY_PATH\"=\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib:/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/release/deps:/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/lib:/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/bin/../lib\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/bin/rustc\" \"--crate-name\" \"alloc\" \"--edition=2018\" \"library/alloc/src/lib.rs\" \"--error-format=json\" \"--json=diagnostic-rendered-ansi,artifacts\" \"--crate-type\" \"lib\" \"--emit=dep-info,metadata,link\" \"-C\" \"opt-level=3\" \"-C\" \"embed-bitcode=no\" \"-C\" \"debuginfo=0\" \"--cfg\" \"feature=\\\"compiler-builtins-c\\\"\" \"-C\" \"metadata=a2d2e271a66d2a4c\" \"-C\" \"extra-filename=-a2d2e271a66d2a4c\" \"--out-dir\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps\" \"--target\" \"sparc64-unknown-openbsd\" \"-L\" \"dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps\" \"-L\" \"dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/release/deps\" \"--extern\" \"compiler_builtins=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcompiler_builtins-7b676bd92d7e6db5.rmeta\" \"--extern\" \"core=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcore-b2a58fb9eb0abee9.rmeta\" \"-Zmacro-backtrace\" \"-Zsave-analysis\" \"-Cprefer-dynamic\" \"-Cembed-bitcode=yes\" \"-Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/1.56.0/\\\")\" \"-Z\" \"binary-dep-depinfo\" \"-L\" \"native=/usr/lib\" \"-Wrust_2018_idioms\" \"-Wunused_lifetimes\" \"-Wsemicolon_in_expressions_from_macros\" \"-Dwarnings\" \"--sysroot\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1\" \"-Z\" \"force-unstable-if-unmarked\"\r\n[RUSTC-SHIM] rustc alloc sysroot: \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1\"\r\n[RUSTC-SHIM] rustc alloc libdir: \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib\"\r\nrustc(46711) in free(): double free 0xf71c807970\r\n\r\nDid not run successfully: signal: 6 (core dumped)\r\n\"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/bin/rustc\" \"--crate-name\" \"alloc\" \"--edition=2018\" \"library/alloc/src/lib.rs\" \"--error-format=json\" \"--json=diagnostic-rendered-ansi,artifacts\" \"--crate-type\" \"lib\" \"--emit=dep-info,metadata,link\" \"-C\" \"opt-level=3\" \"-C\" \"embed-bitcode=no\" \"-C\" \"debuginfo=0\" \"--cfg\" \"feature=\\\"compiler-builtins-c\\\"\" \"-C\" \"metadata=a2d2e271a66d2a4c\" \"-C\" \"extra-filename=-a2d2e271a66d2a4c\" \"--out-dir\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps\" \"--target\" \"sparc64-unknown-openbsd\" \"-L\" \"dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps\" \"-L\" \"dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/release/deps\" \"--extern\" \"compiler_builtins=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcompiler_builtins-7b676bd92d7e6db5.rmeta\" \"--extern\" \"core=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcore-b2a58fb9eb0abee9.rmeta\" \"-Zmacro-backtrace\" \"-Zsave-analysis\" \"-Cprefer-dynamic\" \"-Cembed-bitcode=yes\" \"-Zcrate-attr=doc(html_root_url=\\\"https://doc.rust-lang.org/1.56.0/\\\")\" \"-Z\" \"binary-dep-depinfo\" \"-L\" \"native=/usr/lib\" \"-Wrust_2018_idioms\" \"-Wunused_lifetimes\" \"-Wsemicolon_in_expressions_from_macros\" \"-Dwarnings\" \"--sysroot\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1\" \"-Z\" \"force-unstable-if-unmarked\"\r\nrustc exited with signal: 6 (core dumped)\r\n-------------\r\nerror: could not compile `alloc`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/bootstrap/debug/rustc --crate-name alloc --edition=2018 library/alloc/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no -C debuginfo=0 --cfg 'feature=\"compiler-builtins-c\"' -C metadata=a2d2e271a66d2a4c -C extra-filename=-a2d2e271a66d2a4c --out-dir /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps --target sparc64-unknown-openbsd -L dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps -L dependency=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/release/deps --extern compiler_builtins=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcompiler_builtins-7b676bd92d7e6db5.rmeta --extern core=/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1-std/sparc64-unknown-openbsd/release/deps/libcore-b2a58fb9eb0abee9.rmeta -Zmacro-backtrace -Zsave-analysis -Cprefer-dynamic -Cembed-bitcode=yes '-Zcrate-attr=doc(html_root_url=\"https://doc.rust-lang.org/1.56.0/\")' -Z binary-dep-depinfo -L native=/usr/lib` (exit status: 254)\r\ncommand did not execute successfully: \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-bootstrap-sparc64-1.55.0-20210907/bin/cargo\" \"build\" \"--target\" \"sparc64-unknown-openbsd\" \"-Zbinary-dep-depinfo\" \"-j\" \"1\" \"-v\" \"--release\" \"--frozen\" \"--features\" \"panic-unwind backtrace compiler-builtins-c\" \"--manifest-path\" \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/library/test/Cargo.toml\" \"--message-format\" \"json-render-diagnostics\"\r\nexpected success, got: exit status: 101\r\nTraceback (most recent call last):\r\n  File \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/x.py\", line 27, in <module>\r\n    bootstrap.main()\r\n  File \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/src/bootstrap/bootstrap.py\", line 1217, in main\r\n    bootstrap(help_triggered)\r\n  File \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/src/bootstrap/bootstrap.py\", line 1203, in bootstrap\r\n    run(args, env=env, verbose=build.verbose, is_bootstrap=True)\r\n  File \"/home/semarie/repos/ports/pobj/rust-1.56.0/rustc-1.56.0-src/src/bootstrap/bootstrap.py\", line 153, in run\r\n    raise RuntimeError(err)\r\nRuntimeError: failed to run: /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/bootstrap/debug/bootstrap dist --jobs=1 library/std src/librustc cargo clippy rustfmt\r\n*** Error 1 in . (Makefile:243 'do-build')\r\n*** Error 2 in . (/home/semarie/repos/ports/infrastructure/mk/bsd.port.mk:2952 '/home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/.build_done')\r\n*** Error 2 in /home/semarie/ports/mystuff/lang/rust (/home/semarie/repos/ports/infrastructure/mk/bsd.port.mk:2602 'all': @lock=rust-1.56.0;...)\r\n```\r\n\r\ngdb backtrace:\r\n```\r\n(gdb) bt\r\n#0  *_libc_abort () at /usr/src/lib/libc/stdlib/abort.c:57\r\n#1  0x000000f72077127c in wrterror (d=0xf6d0ec95c0, msg=0xf720929518 \"double free %p\") at /usr/src/lib/libc/stdlib/malloc.c:307\r\n#2  0x000000f7207748a4 in ofree (argpool=0xf7668ea6b0, p=0xf71c807970, clear=0, check=<optimized out>, argsz=0) at /usr/src/lib/libc/stdlib/malloc.c:1425\r\n#3  0x000000f720775318 in free (ptr=0xf71c807970) at /usr/src/lib/libc/stdlib/malloc.c:1470\r\n#4  0x000000f6e380530c in __rdl_dealloc () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/libstd-2f7fa7da8a3eb261.so\r\n#5  0x000000f6e384d7e0 in __rust_dealloc () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/libstd-2f7fa7da8a3eb261.so\r\n#6  0x000000f6e7c27168 in _$LT$rustc_mir..transform..abort_unwinding_calls..AbortUnwindingCalls$u20$as$u20$rustc_mir..transform..MirPass$GT$::run_pass::h053c381204964e57 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#7  0x000000f6e7b73934 in rustc_mir::transform::run_passes::hc5a79e705cf4b7ff () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#8  0x000000f6e7b7b008 in rustc_mir::transform::run_post_borrowck_cleanup_passes::h1f2ad3a24b17ef86 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#9  0x000000f6e7b7a1c8 in rustc_mir::transform::mir_drops_elaborated_and_const_checked::h2e7a148809863d0a ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#10 0x000000f6e85098a8 in rustc_query_system::query::plumbing::get_query_impl::h31223dfb84119524 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#11 0x000000f6e8b94204 in _$LT$rustc_query_impl..Queries$u20$as$u20$rustc_middle..ty..query..QueryEngine$GT$::mir_drops_elaborated_and_const_checked::hf319f0f0f0dd3967 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#12 0x000000f6e7b7bb34 in rustc_mir::transform::optimized_mir::h0a18ce025c9996e9 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#13 0x000000f6e85142f4 in rustc_query_system::query::plumbing::get_query_impl::h39907df79a9efdb6 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#14 0x000000f6e8b946bc in _$LT$rustc_query_impl..Queries$u20$as$u20$rustc_middle..ty..query..QueryEngine$GT$::optimized_mir::h5943a6dd3a5a7341 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#15 0x000000f6e9de6820 in rustc_middle::ty::_$LT$impl$u20$rustc_middle..ty..context..TyCtxt$GT$::instance_mir::h36a0164fbb838479 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#16 0x000000f6e7cc2f94 in rustc_mir::monomorphize::collector::collect_neighbours::hd7e072505b151b21 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#17 0x000000f6e7cba1c8 in rustc_mir::monomorphize::collector::collect_items_rec::h5285a9621b2e0057 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#18 0x000000f6e81484ac in rustc_session::utils::_$LT$impl$u20$rustc_session..session..Session$GT$::time::h6270d26c32cbf11a ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#19 0x000000f6e7cb8494 in rustc_mir::monomorphize::collector::collect_crate_mono_items::hfbe7d399465ca039 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#20 0x000000f6e7cc478c in rustc_mir::monomorphize::partitioning::collect_and_partition_mono_items::h4ea486c19adc9420 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#21 0x000000f6e85b711c in rustc_query_system::query::plumbing::get_query_impl::hef92cc8e0e612213 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#22 0x000000f6e8b9f490 in _$LT$rustc_query_impl..Queries$u20$as$u20$rustc_middle..ty..query..QueryEngine$GT$::collect_and_partition_mono_items::hac6f01e7aca93579 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#23 0x000000f6e41b3be0 in rustc_codegen_ssa::base::codegen_crate::h3db3a6d60fd1c7d4 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#24 0x000000f6e41f5bd0 in _$LT$rustc_codegen_llvm..LlvmCodegenBackend$u20$as$u20$rustc_codegen_ssa..traits..backend..CodegenBackend$GT$::codegen_crate::h40fcbb02620c0c17 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#25 0x000000f6e3f9cc00 in rustc_interface::queries::Queries::ongoing_codegen::h7dc2980385cffc42 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#26 0x000000f6e3e42560 in rustc_interface::queries::_$LT$impl$u20$rustc_interface..interface..Compiler$GT$::enter::h90128beff5c4cd10 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#27 0x000000f6e3deb8e4 in rustc_span::with_source_map::hfaabe5aefc06fe09 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#28 0x000000f6e3e40128 in scoped_tls::ScopedKey$LT$T$GT$::set::h8d5d162635713055 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#29 0x000000f6e3ded9b8 in std::sys_common::backtrace::__rust_begin_short_backtrace::h2218f90c4db4ab67 ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#30 0x000000f6e3ddb1c8 in core::ops::function::FnOnce::call_once$u7b$$u7b$vtable.shim$u7d$$u7d$::hdc74afcb832c219f ()\r\n   from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/librustc_driver-5418242a65cf926c.so\r\n#31 0x000000f6e37ed5bc in std::sys::unix::thread::Thread::new::thread_start::h0daf8654cb819454 () from /home/semarie/repos/ports/pobj/rust-1.56.0/build-sparc64/build/sparc64-unknown-openbsd/stage1/lib/libstd-2f7fa7da8a3eb261.so\r\n#32 0x000000f741a47490 in _rthread_start (v=0xf720080838) at /usr/src/lib/librthread/rthread.c:96\r\n#33 0x000000f7207c58ac in __tfork_thread () at /usr/src/lib/libc/arch/sparc64/sys/tfork_thread.S:58\r\nBacktrace stopped: previous frame identical to this frame (corrupt stack?)\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/90064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/90064/timeline", "performed_via_github_app": null, "state_reason": null}