{"url": "https://api.github.com/repos/rust-lang/rust/issues/27372", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27372/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27372/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27372/events", "html_url": "https://github.com/rust-lang/rust/issues/27372", "id": 97855435, "node_id": "MDU6SXNzdWU5Nzg1NTQzNQ==", "number": 27372, "title": "readelf complains that .note.rustc is malformed", "user": {"login": "saschmit", "id": 13304324, "node_id": "MDQ6VXNlcjEzMzA0MzI0", "avatar_url": "https://avatars.githubusercontent.com/u/13304324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saschmit", "html_url": "https://github.com/saschmit", "followers_url": "https://api.github.com/users/saschmit/followers", "following_url": "https://api.github.com/users/saschmit/following{/other_user}", "gists_url": "https://api.github.com/users/saschmit/gists{/gist_id}", "starred_url": "https://api.github.com/users/saschmit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saschmit/subscriptions", "organizations_url": "https://api.github.com/users/saschmit/orgs", "repos_url": "https://api.github.com/users/saschmit/repos", "events_url": "https://api.github.com/users/saschmit/events{/privacy}", "received_events_url": "https://api.github.com/users/saschmit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123110, "node_id": "MDU6TGFiZWwxMjMxMTA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-linux", "name": "O-linux", "color": "6e6ec0", "default": false, "description": "Operating system: Linux"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-07-29T04:12:04Z", "updated_at": "2016-08-14T22:27:20Z", "closed_at": "2016-08-14T22:27:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "After building rustc 1.1.0, if I run `readelf --section-headers --note` over the shared libraries produced, I see output like the following:\n\n```\n$ readelf --section-headers --note x86_64-unknown-linux-gnu/stage2/lib/libarena-e9599659.so\nThere are 30 section headers, starting at offset 0xef98:\n\nSection Headers:\n  [Nr] Name              Type             Address           Offset\n       Size              EntSize          Flags  Link  Info  Align\n  [ 0]                   NULL             0000000000000000  00000000\n       0000000000000000  0000000000000000           0     0     0\n  [ 1] .note.gnu.build-i NOTE             0000000000000200  00000200\n       0000000000000024  0000000000000000   A       0     0     4\n  [ 2] .gnu.hash         GNU_HASH         0000000000000228  00000228\n       0000000000000118  0000000000000000   A       3     0     8\n  [ 3] .dynsym           DYNSYM           0000000000000340  00000340\n       00000000000003d8  0000000000000018   A       4     2     8\n  [ 4] .dynstr           STRTAB           0000000000000718  00000718\n       0000000000000687  0000000000000000   A       0     0     1\n  [ 5] .gnu.version      VERSYM           0000000000000da0  00000da0\n       0000000000000052  0000000000000002   A       3     0     2\n  [ 6] .gnu.version_r    VERNEED          0000000000000df8  00000df8\n       0000000000000040  0000000000000000   A       4     2     8\n  [ 7] .rela.dyn         RELA             0000000000000e38  00000e38\n       0000000000000150  0000000000000018   A       3     0     8\n  [ 8] .rela.plt         RELA             0000000000000f88  00000f88\n       0000000000000150  0000000000000018  AI       3    10     8\n  [ 9] .init             PROGBITS         00000000000010d8  000010d8\n       000000000000001a  0000000000000000  AX       0     0     4\n  [10] .plt              PROGBITS         0000000000001100  00001100\n       00000000000000f0  0000000000000010  AX       0     0     16\n  [11] .text             PROGBITS         00000000000011f0  000011f0\n       00000000000010ac  0000000000000000  AX       0     0     16\n  [12] .fini             PROGBITS         000000000000229c  0000229c\n       0000000000000009  0000000000000000  AX       0     0     4\n  [13] .eh_frame_hdr     PROGBITS         00000000000022a8  000022a8\n       00000000000000b4  0000000000000000   A       0     0     4\n  [14] .eh_frame         PROGBITS         0000000000002360  00002360\n       000000000000033c  0000000000000000   A       0     0     8\n  [15] .gcc_except_table PROGBITS         000000000000269c  0000269c\n       000000000000028c  0000000000000000   A       0     0     4\n  [16] .init_array       INIT_ARRAY       0000000000202db0  00002db0\n       0000000000000008  0000000000000000  WA       0     0     8\n  [17] .fini_array       FINI_ARRAY       0000000000202db8  00002db8\n       0000000000000008  0000000000000000  WA       0     0     8\n  [18] .jcr              PROGBITS         0000000000202dc0  00002dc0\n       0000000000000008  0000000000000000  WA       0     0     8\n  [19] .data.rel.ro      PROGBITS         0000000000202dc8  00002dc8\n       0000000000000008  0000000000000000  WA       0     0     8\n  [20] .dynamic          DYNAMIC          0000000000202dd0  00002dd0\n       00000000000001e0  0000000000000010  WA       4     0     8\n  [21] .got              PROGBITS         0000000000202fb0  00002fb0\n       0000000000000050  0000000000000008  WA       0     0     8\n  [22] .got.plt          PROGBITS         0000000000203000  00003000\n       0000000000000088  0000000000000008  WA       0     0     8\n  [23] .data             PROGBITS         0000000000203088  00003088\n       0000000000000008  0000000000000000  WA       0     0     8\n  [24] .note.rustc       NOTE             0000000000203090  00003090\n       000000000000ab12  0000000000000000  WA       0     0     16\n  [25] .bss              NOBITS           000000000020dba4  0000dba2\n       0000000000000004  0000000000000000  WA       0     0     4\n  [26] .comment          PROGBITS         0000000000000000  0000dba2\n       000000000000002c  0000000000000001  MS       0     0     1\n  [27] .shstrtab         STRTAB           0000000000000000  0000dbce\n       0000000000000115  0000000000000000           0     0     1\n  [28] .symtab           SYMTAB           0000000000000000  0000dce8\n       0000000000000978  0000000000000018          29    62     8\n  [29] .strtab           STRTAB           0000000000000000  0000e660\n       0000000000000938  0000000000000000           0     0     1\nKey to Flags:\n  W (write), A (alloc), X (execute), M (merge), S (strings), l (large)\n  I (info), L (link order), G (group), T (TLS), E (exclude), x (unknown)\n  O (extra OS processing required) o (OS specific), p (processor specific)\n\nDisplaying notes found at file offset 0x00000200 with length 0x00000024:\n  Owner                 Data size   Description\n  GNU                  0x00000014   NT_GNU_BUILD_ID (unique build ID bitstring)\n    Build ID: 16a45cac5814e1be056835720bcbd14710fab8eb\n\nDisplaying notes found at file offset 0x00003090 with length 0x0000ab12:\n  Owner                 Data size   Description\nreadelf: Warning: note with invalid namesz and/or descsz found at offset 0x0\nreadelf: Warning:  type: 0x6007bded, namesize: 0x74737572, descsize: 0x02000000\n```\n\nBased on the section list, it appears that the malformed section is .note.rustc\n\nBuilt using the x86_64 bootstrap rustc:\n\n```\n$ ./x86_64-unknown-linux-gnu/stage0/bin/rustc --version --verbose\nrustc 1.1.0-dev (857ef6e27 2015-04-27) (built 2015-04-27)\nbinary: rustc\ncommit-hash: 857ef6e272e5634cb9f3e6ee50eb6bc2a2e71651\ncommit-date: 2015-04-27\nbuild-date: 2015-04-27\nhost: x86_64-unknown-linux-gnu\nrelease: 1.1.0-dev\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27372/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27372/timeline", "performed_via_github_app": null, "state_reason": "completed"}