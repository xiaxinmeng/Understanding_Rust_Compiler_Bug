{"url": "https://api.github.com/repos/rust-lang/rust/issues/3741", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3741/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3741/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3741/events", "html_url": "https://github.com/rust-lang/rust/issues/3741", "id": 7541906, "node_id": "MDU6SXNzdWU3NTQxOTA2", "number": 3741, "title": "ICE with per-type serializer", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/8", "html_url": "https://github.com/rust-lang/rust/milestone/8", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/8/labels", "id": 144598, "node_id": "MDk6TWlsZXN0b25lMTQ0NTk4", "number": 8, "title": "0.5", "description": "", "creator": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 206, "state": "closed", "created_at": "2012-07-12T19:45:03Z", "updated_at": "2013-06-13T02:57:55Z", "due_on": "2012-12-22T08:00:00Z", "closed_at": "2013-06-13T02:57:55Z"}, "comments": 4, "created_at": "2012-10-12T12:57:29Z", "updated_at": "2012-10-13T00:46:53Z", "closed_at": "2012-10-13T00:46:53Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "@erickt's implementation of #3740 leads to an ICE with this backtrace:\n\n```\n#0  upcall_fail (expr=0x1293624f0 \"option::get none\", file=0x1016671c0 \"/Users/nmatsakis/versioned/rust-green/src/rustc/rustc.rc\", line=1) at rust_upcall.cpp:94\n#1  0x00000001001120f7 in rt::rustrt::rust_upcall_fail::_74a64c4360d2dcec::_04 ()\n#2  0x000000010003c5c7 in rt::rt_fail_::_74a64c4360d2dcec::_04 ()\n#3  0x0000000100b8d5a8 in option::get_23338::_29fe71a392a4924::_04 ()\n#4  0x0000000100b8d43d in option::__extensions__::get_23335::_f0c217aeadcb2131::_04 ()\n#5  0x00000001015012b9 in metadata::decoder::get_impl_method::_783f8d1a39c49ab::_04 ()\n#6  0x0000000100d3b393 in metadata::csearch::get_impl_method::_6b7fc67f87eddc92::_04 ()\n#7  0x0000000100d38f74 in middle::trans::meth::method_with_name::_ba3c2a2e023f72d::_04 ()\n#8  0x0000000100bd2362 in middle::trans::meth::trans_static_method_callee::_f9ec6ca09ccac979::_04 ()\n#9  0x0000000100bcb78d in middle::trans::callee::trans::trans_def::_67363582be12cd36::_04 ()\n#10 0x0000000100bcb2ce in middle::trans::callee::trans::_f48ed4270a0c3c0::_04 ()\n#11 0x0000000100bd6cd8 in middle::trans::callee::trans_call::anon::expr_fn_24271 ()\n#12 0x0000000100bef739 in middle::trans::callee::trans_call_inner::anon::expr_fn_25077 ()\n#13 0x0000000100b8ca0f in middle::trans::base::with_scope::_996fb23bb7f2845::_04 ()\n#14 0x0000000100bd6bdb in middle::trans::callee::trans_call_inner::_ff61dbd7aaf3bd3::_04 ()\n#15 0x0000000100bd6983 in middle::trans::callee::trans_call::_64631445544261e3::_04 ()\n#16 0x0000000100c06c0c in middle::trans::expr::trans_rvalue_dps_unadjusted::_ead42a4b3d1be38a::_04 ()\n#17 0x0000000100bff841 in middle::trans::expr::trans_into_unadjusted::_ead42a4b3d1be38a::_04 ()\n#18 0x0000000100b73177 in middle::trans::expr::trans_into::_ead42a4b3d1be38a::_04 ()\n#19 0x0000000100c8de0b in middle::trans::base::init_local::_a0ad6e37ca3614::_04 ()\n#20 0x0000000100c8f93a in middle::trans::base::trans_stmt::anon::expr_fn_27842 ()\n#21 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#22 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#23 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#24 0x0000000100b72f0a in middle::trans::base::trans_stmt::_cb45203fc1c777f9::_04 ()\n#25 0x0000000100b7162b in middle::trans::controlflow::trans_block::anon::expr_fn_22743 ()\n#26 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#27 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#28 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#29 0x0000000100b6fafe in middle::trans::controlflow::trans_block::_2448b950a43ba10::_04 ()\n#30 0x0000000100c0e499 in middle::trans::expr::trans_rvalue_dps_unadjusted::anon::expr_fn_25395 ()\n#31 0x0000000100b8ca0f in middle::trans::base::with_scope::_996fb23bb7f2845::_04 ()\n#32 0x0000000100c0585b in middle::trans::expr::trans_rvalue_dps_unadjusted::_ead42a4b3d1be38a::_04 ()\n#33 0x0000000100bff841 in middle::trans::expr::trans_into_unadjusted::_ead42a4b3d1be38a::_04 ()\n#34 0x0000000100b73177 in middle::trans::expr::trans_into::_ead42a4b3d1be38a::_04 ()\n#35 0x0000000100b6fba2 in middle::trans::controlflow::trans_block::_2448b950a43ba10::_04 ()\n#36 0x00000001015b6a3a in __morestack ()\n#37 0x0000000100b6f8fc in middle::trans::controlflow::trans_block::_2448b950a43ba10::_04 ()\n#38 0x0000000100bdccdb in vec::__extensions__::each_24341::anon::expr_fn_24344 ()\n#39 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#40 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#41 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#42 0x0000000100bdcc64 in vec::__extensions__::each_24341::_f660f04d53d71191::_04 ()\n#43 0x0000000100d1ea90 in middle::trans::alt::trans_alt_inner::_a9d346c11893b647::_04 ()\n#44 0x0000000100d1ded1 in middle::trans::alt::trans_alt::anon::expr_fn_30846 ()\n#45 0x0000000100b8ca0f in middle::trans::base::with_scope::_996fb23bb7f2845::_04 ()\n#46 0x0000000100c0e33f in middle::trans::alt::trans_alt::_9296d11856c4ec4::_04 ()\n#47 0x0000000100c04fd2 in middle::trans::expr::trans_rvalue_dps_unadjusted::_ead42a4b3d1be38a::_04 ()\n#48 0x0000000100bff841 in middle::trans::expr::trans_into_unadjusted::_ead42a4b3d1be38a::_04 ()\n#49 0x0000000100b73177 in middle::trans::expr::trans_into::_ead42a4b3d1be38a::_04 ()\n#50 0x0000000100b6fba2 in middle::trans::controlflow::trans_block::_2448b950a43ba10::_04 ()\n#51 0x0000000100c9d86f in middle::trans::base::trans_closure::_de391e1ab6ebccc::_04 ()\n#52 0x0000000100ac4296 in middle::trans::base::trans_fn::_f5531fab3be1a3c1::_04 ()\n#53 0x0000000100abcdb9 in middle::trans::base::trans_item::_85f94bc13edd0::_04 ()\n#54 0x0000000100cad24d in middle::trans::base::trans_mod::anon::expr_fn_28568 ()\n#55 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#56 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#57 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#58 0x0000000100cac801 in middle::trans::base::trans_mod::_a57b1d56f5ce85ad::_04 ()\n#59 0x0000000100abc4d1 in middle::trans::base::trans_item::_85f94bc13edd0::_04 ()\n#60 0x0000000100cad24d in middle::trans::base::trans_mod::anon::expr_fn_28568 ()\n#61 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#62 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#63 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#64 0x0000000100cac801 in middle::trans::base::trans_mod::_a57b1d56f5ce85ad::_04 ()\n#65 0x0000000100abc4d1 in middle::trans::base::trans_item::_85f94bc13edd0::_04 ()\n#66 0x0000000100cad24d in middle::trans::base::trans_mod::anon::expr_fn_28568 ()\n#67 0x0000000100b71492 in vec::each_22729::anon::expr_fn_22735 ()\n#68 0x0000000100b713ba in vec::as_imm_buf_22732::_2bccd72f7286ea4a::_04 ()\n#69 0x0000000100b71298 in vec::each_22729::_74aecc843b4616d::_04 ()\n#70 0x0000000100cac801 in middle::trans::base::trans_mod::_a57b1d56f5ce85ad::_04 ()\n#71 0x0000000100cdf908 in middle::trans::base::trans_crate::_3c3db3d1abf0159a::_04 ()\n#72 0x00000001015b6a3a in __morestack ()\n```\n\nI haven't gotten very far in tracking this down.  It seems to have something to do with cross-crate static functions.\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3741/timeline", "performed_via_github_app": null, "state_reason": "completed"}