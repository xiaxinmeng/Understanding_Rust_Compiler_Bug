{"url": "https://api.github.com/repos/rust-lang/rust/issues/61513", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/61513/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/61513/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/61513/events", "html_url": "https://github.com/rust-lang/rust/issues/61513", "id": 451860275, "node_id": "MDU6SXNzdWU0NTE4NjAyNzU=", "number": 61513, "title": "`rustc` runs out of memory while trying to compile a large static (lazy_static!) HashMap", "user": {"login": "ctrlcctrlv", "id": 838783, "node_id": "MDQ6VXNlcjgzODc4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/838783?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctrlcctrlv", "html_url": "https://github.com/ctrlcctrlv", "followers_url": "https://api.github.com/users/ctrlcctrlv/followers", "following_url": "https://api.github.com/users/ctrlcctrlv/following{/other_user}", "gists_url": "https://api.github.com/users/ctrlcctrlv/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctrlcctrlv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctrlcctrlv/subscriptions", "organizations_url": "https://api.github.com/users/ctrlcctrlv/orgs", "repos_url": "https://api.github.com/users/ctrlcctrlv/repos", "events_url": "https://api.github.com/users/ctrlcctrlv/events{/privacy}", "received_events_url": "https://api.github.com/users/ctrlcctrlv/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 171502053, "node_id": "MDU6TGFiZWwxNzE1MDIwNTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-borrow-checker", "name": "A-borrow-checker", "color": "f7e101", "default": false, "description": "Area: The borrow checker"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 630799571, "node_id": "MDU6TGFiZWw2MzA3OTk1NzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compilemem", "name": "I-compilemem", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to memory usage during compilation."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-06-04T08:21:58Z", "updated_at": "2019-06-05T09:18:42Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "```\r\n    Blocking waiting for file lock on build directory\r\n   Compiling crash v0.1.0 (/home/fred/Workspace/rtuts/crash)\r\nerror: Could not compile `crash`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --edition=2018 --crate-name crash src/main.rs --color always --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=71bdac3a949cee3b -C extra-filename=-71bdac3a949cee3b --out-dir /home/fred/Workspace/rtuts/crash/target/debug/deps -C incremental=/home/fred/Workspace/rtuts/crash/target/debug/incremental -L dependency=/home/fred/Workspace/rtuts/crash/target/debug/deps --extern lazy_static=/home/fred/Workspace/rtuts/crash/target/debug/deps/liblazy_static-7468e7fc38fb612c.rlib` (signal: 9, SIGKILL: kill)\r\n\r\nshell returned 101\r\n\r\n```\r\n\r\nMy machine has 48GB of memory, yet still can't compile the example project, which creates a static hash map at compile time.\r\n\r\nI tried both nightly and stable, same thing.\r\n\r\nThe input source code is only 19M, only containing u32s and strings. This shouldn't happen, GCC could do this no problem.\r\n\r\n![2019-06-04-161946_2554x1540_scrot](https://user-images.githubusercontent.com/838783/58863042-957a5a80-86e4-11e9-85a1-d2d5125cac7f.png)\r\n\r\n# Project [crash.zip](https://github.com/rust-lang/rust/files/3251295/crash.zip)\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/61513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/61513/timeline", "performed_via_github_app": null, "state_reason": null}