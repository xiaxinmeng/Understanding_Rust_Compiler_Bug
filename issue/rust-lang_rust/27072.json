{"url": "https://api.github.com/repos/rust-lang/rust/issues/27072", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/27072/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/27072/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/27072/events", "html_url": "https://github.com/rust-lang/rust/issues/27072", "id": 95500794, "node_id": "MDU6SXNzdWU5NTUwMDc5NA==", "number": 27072, "title": "Compiler panicked", "user": {"login": "azerupi", "id": 7647338, "node_id": "MDQ6VXNlcjc2NDczMzg=", "avatar_url": "https://avatars.githubusercontent.com/u/7647338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azerupi", "html_url": "https://github.com/azerupi", "followers_url": "https://api.github.com/users/azerupi/followers", "following_url": "https://api.github.com/users/azerupi/following{/other_user}", "gists_url": "https://api.github.com/users/azerupi/gists{/gist_id}", "starred_url": "https://api.github.com/users/azerupi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azerupi/subscriptions", "organizations_url": "https://api.github.com/users/azerupi/orgs", "repos_url": "https://api.github.com/users/azerupi/repos", "events_url": "https://api.github.com/users/azerupi/events{/privacy}", "received_events_url": "https://api.github.com/users/azerupi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-07-16T18:51:09Z", "updated_at": "2015-07-16T19:41:03Z", "closed_at": "2015-07-16T19:39:12Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I got the compiler to panic. Here is the **backtrace**:\n\n```\n$ RUST_BACKTRACE=1 cargo build\n   Compiling mdbook v0.0.1 (file:///home/mathieu/Programming/Rust/mdbook)\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'fold_mac disabled by default', ../src/libsyntax/fold.rs:190\n\nstack backtrace:\n   1:     0x7f8f9d556c8e - sys::backtrace::write::hba0090c65dc9b973kqs\n   2:     0x7f8f9d55eb34 - panicking::on_panic::ha888d43548c7ef7dU7w\n   3:     0x7f8f9d52168e - rt::unwind::begin_unwind_inner::h6c07c3faf8145c2ayNw\n   4:     0x7f8f9a83aba1 - rt::unwind::begin_unwind::h61311074365208902\n   5:     0x7f8f9aa98c31 - ptr::P<T>::map::h4262623173329566783\n   6:     0x7f8f9aa8953e - ext::expand::expand_expr::closure.64692\n   7:     0x7f8f9aa87344 - ext::expand::expand_expr::h5d16b298ec3e6d44S3a\n   8:     0x7f8f9aad6e3b - fold::noop_fold_stmt::h2830177968221966586\n   9:     0x7f8f9aab2f01 - ext::expand::expand_stmt::ha540a83711e3b587zEb\n  10:     0x7f8f9aadf7d3 - ext::expand::expand_block_elts::closure.65399\n  11:     0x7f8f9aadf4cc - iter::FlatMap<I, U, F>.Iterator::next::h15931703869202550713\n  12:     0x7f8f9aade2b7 - vec::Vec<T>.FromIterator<T>::from_iter::h17304921018562427167\n  13:     0x7f8f9aadd873 - ext::expand::expand_block_elts::closure.65393\n  14:     0x7f8f9aa9a5d6 - ext::expand::expand_block_elts::hdc0f023594f31dbdvPb\n  15:     0x7f8f9aadd57d - ext::expand::expand_block::h154763b840e3f863QOb\n  16:     0x7f8f9aa9a004 - ext::expand::expand_and_rename_fn_decl_and_block::he58b2e30da928a59Uic\n  17:     0x7f8f9ab05525 - ext::expand::expand_and_rename_method::he352edb1d6a5af96ekc\n  18:     0x7f8f9ab0a1cf - ext::expand::expand_impl_item::closure.65811\n  19:     0x7f8f9ab06c7f - ext::expand::expand_impl_item::hc5ab3bcbf3bfabe2Dfc\n  20:     0x7f8f9aa9db5e - ext::expand::expand_annotatable::h347111f998e00452RZb\n  21:     0x7f8f9aaacca5 - ext::expand::MacroExpander<'a, 'b>.Folder::fold_impl_item::h4b925cb3f2b4ecddKnc\n  22:     0x7f8f9aaac77d - iter::FlatMap<I, U, F>.Iterator::next::h10775116680282487154\n  23:     0x7f8f9aaaca53 - vec::Vec<T>::extend_desugared::h16127363502739536117\n  24:     0x7f8f9aaab6bf - iter::Iterator::collect::h10569062580348617273\n  25:     0x7f8f9aaa2597 - ext::expand::expand_item_underscore::h1ae9e40d706a69f4Zsb\n  26:     0x7f8f9ab047bd - fold::Folder::fold_item_simple::h13015839913330126400\n  27:     0x7f8f9ab043f4 - ptr::P<T>::map::h5783195092218359557\n  28:     0x7f8f9aa9e6c6 - ext::expand::expand_annotatable::h347111f998e00452RZb\n  29:     0x7f8f9aa9a728 - ext::expand::expand_item::h3529ff04c83295ccosb\n  30:     0x7f8f9aaa721e - iter::FlatMap<I, U, F>.Iterator::next::h3067849998977955174\n  31:     0x7f8f9aaa6007 - vec::Vec<T>.FromIterator<T>::from_iter::h17852130624423508185\n  32:     0x7f8f9aaa573c - fold::noop_fold_mod::h8231944226184386280\n  33:     0x7f8f9aaa1955 - ext::expand::expand_item_underscore::h1ae9e40d706a69f4Zsb\n  34:     0x7f8f9ab047bd - fold::Folder::fold_item_simple::h13015839913330126400\n  35:     0x7f8f9ab043f4 - ptr::P<T>::map::h5783195092218359557\n  36:     0x7f8f9aa9f127 - ext::expand::expand_annotatable::h347111f998e00452RZb\n  37:     0x7f8f9aa9a728 - ext::expand::expand_item::h3529ff04c83295ccosb\n  38:     0x7f8f9aaa721e - iter::FlatMap<I, U, F>.Iterator::next::h3067849998977955174\n  39:     0x7f8f9aaa5cf4 - vec::Vec<T>.FromIterator<T>::from_iter::h17852130624423508185\n  40:     0x7f8f9aaa573c - fold::noop_fold_mod::h8231944226184386280\n  41:     0x7f8f9aaa1955 - ext::expand::expand_item_underscore::h1ae9e40d706a69f4Zsb\n  42:     0x7f8f9ab047bd - fold::Folder::fold_item_simple::h13015839913330126400\n  43:     0x7f8f9ab043f4 - ptr::P<T>::map::h5783195092218359557\n  44:     0x7f8f9aa9f127 - ext::expand::expand_annotatable::h347111f998e00452RZb\n  45:     0x7f8f9aa9a728 - ext::expand::expand_item::h3529ff04c83295ccosb\n  46:     0x7f8f9aaa721e - iter::FlatMap<I, U, F>.Iterator::next::h3067849998977955174\n  47:     0x7f8f9aaa6007 - vec::Vec<T>.FromIterator<T>::from_iter::h17852130624423508185\n  48:     0x7f8f9aaa573c - fold::noop_fold_mod::h8231944226184386280\n  49:     0x7f8f9aaa1955 - ext::expand::expand_item_underscore::h1ae9e40d706a69f4Zsb\n  50:     0x7f8f9ab047bd - fold::Folder::fold_item_simple::h13015839913330126400\n  51:     0x7f8f9ab043f4 - ptr::P<T>::map::h5783195092218359557\n  52:     0x7f8f9aa9f127 - ext::expand::expand_annotatable::h347111f998e00452RZb\n  53:     0x7f8f9aa9a728 - ext::expand::expand_item::h3529ff04c83295ccosb\n  54:     0x7f8f9ab0d5b9 - ext::expand::expand_crate::hffd65e9f8234e652prc\n  55:     0x7f8f9daf3a1d - driver::phase_2_configure_and_expand::closure.21446\n  56:     0x7f8f9daa56dc - driver::phase_2_configure_and_expand::h6227118d5a2dbd5dita\n  57:     0x7f8f9da94a3a - driver::compile_input::ha9b5fd65b77d50f6Tba\n  58:     0x7f8f9db72863 - run_compiler::h240fdc5369e0b898x7b\n  59:     0x7f8f9db7023e - boxed::F.FnBox<A>::call_box::h17338777036410156156\n  60:     0x7f8f9db6fa89 - rt::unwind::try::try_fn::h2295644814600911096\n  61:     0x7f8f9d5d6d38 - rust_try_inner\n  62:     0x7f8f9d5d6d25 - rust_try\n  63:     0x7f8f9d549ee7 - rt::unwind::try::inner_try::h3a5b73fc117bcddfrJw\n  64:     0x7f8f9db6fc9b - boxed::F.FnBox<A>::call_box::h803341546616928030\n  65:     0x7f8f9d55d791 - sys::thread::Thread::new::thread_start::h780a1f33992577dcoTv\n  66:     0x7f8f97bef353 - start_thread\n  67:     0x7f8f9d1b8bfc - __clone\n  68:                0x0 - <unknown>\n\n```\n\n**This is the part of my code that made the compiler panic:**\n\n``` rust\nfn parse_summary(&mut self) -> Result<()> {\n        let summary = BufReader::new(try!(File::open(self.config.src().join(\"SUMMARY.md\"))));\n\n        let mut level = -1;\n        for try!(line) in summary.lines() {\n            let indent = utilities::indent(&line, 4);\n\n            // If the difference between the current level and the indent level is greater than\n            // one then there is a syntax error in SUMMARY.md\n            /*if i32::abs(level - indent) > 1 {\n                return Error::new(ErrorKind::Other,\"Indentation error in SUMMARY.md at line:\\n\\n\")\n            }*/\n        }\n\n        Ok(())\n    }\n```\n\nIf I comment out the body of the function it works.\n\n**Info about my machine:**\n\n```\nArch Linux\ncargo 0.3.0-nightly (a2dd2ac 2015-06-24) (built 2015-06-23)\nrustc 1.2.0-beta.1 (2ad26e850 2015-06-23)\n```\n\n**I am not sure what info you need, so tell me if I forgot something or you want more code.**\n", "closed_by": {"login": "azerupi", "id": 7647338, "node_id": "MDQ6VXNlcjc2NDczMzg=", "avatar_url": "https://avatars.githubusercontent.com/u/7647338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azerupi", "html_url": "https://github.com/azerupi", "followers_url": "https://api.github.com/users/azerupi/followers", "following_url": "https://api.github.com/users/azerupi/following{/other_user}", "gists_url": "https://api.github.com/users/azerupi/gists{/gist_id}", "starred_url": "https://api.github.com/users/azerupi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azerupi/subscriptions", "organizations_url": "https://api.github.com/users/azerupi/orgs", "repos_url": "https://api.github.com/users/azerupi/repos", "events_url": "https://api.github.com/users/azerupi/events{/privacy}", "received_events_url": "https://api.github.com/users/azerupi/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/27072/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/27072/timeline", "performed_via_github_app": null, "state_reason": "completed"}