{"url": "https://api.github.com/repos/rust-lang/rust/issues/25259", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25259/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25259/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25259/events", "html_url": "https://github.com/rust-lang/rust/issues/25259", "id": 74828820, "node_id": "MDU6SXNzdWU3NDgyODgyMA==", "number": 25259, "title": "Compiler panic when messing with raw pointers", "user": {"login": "benekastah", "id": 740268, "node_id": "MDQ6VXNlcjc0MDI2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/740268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benekastah", "html_url": "https://github.com/benekastah", "followers_url": "https://api.github.com/users/benekastah/followers", "following_url": "https://api.github.com/users/benekastah/following{/other_user}", "gists_url": "https://api.github.com/users/benekastah/gists{/gist_id}", "starred_url": "https://api.github.com/users/benekastah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benekastah/subscriptions", "organizations_url": "https://api.github.com/users/benekastah/orgs", "repos_url": "https://api.github.com/users/benekastah/repos", "events_url": "https://api.github.com/users/benekastah/events{/privacy}", "received_events_url": "https://api.github.com/users/benekastah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-10T04:27:32Z", "updated_at": "2015-05-20T22:17:00Z", "closed_at": "2015-05-20T22:17:00Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was trying to figure out how to implement `PartialEq` by using referential equality (still not sure how that goes). The code I wrote looks like this:\n\n```\nimpl<'a> PartialEq for StatusBar<'a> {\n    fn eq(&self, other: &StatusBar<'a>) -> bool {\n        let p1: *const Self = self;\n        let p2: *const i32 = &other;\n        true\n    }\n}\n```\n\nThe code in the context of the project [can be found here](https://github.com/benekastah/ebitor/commit/4eb92cae123f06cc8533239abb9ff7e6cb79aa0e#diff-4826fa05d863f5ff4cc76e1e03ab4da2R107) (trying to do a cargo build at that commit should yield the same results as I got).\n\nI'm not sure what I expected to happen. I didn't necessarily expect it to work; I was just trying stuff out to see what the compiler said. I was attempting to follow the [example here](http://doc.rust-lang.org/1.0.0-beta.4/std/ptr/index.html#1.-coerce-a-reference-%28&t%29-or-mutable-reference-%28&mut-t%29.) to get a pointer from a value.\n## Meta\n\n`rustc --version --verbose`:\n\n```\nrustc 1.0.0-beta.4 (850151a75 2015-04-30) (built 2015-04-30)\nbinary: rustc\ncommit-hash: 850151a75709f146addd30bbbf1f23d384f0b381\ncommit-date: 2015-04-30\nbuild-date: 2015-04-30\nhost: x86_64-apple-darwin\nrelease: 1.0.0-beta.4\n```\n\nBacktrace:\n\n```\n       Fresh libc v0.1.6\n       Fresh rope v0.0.0 (https://github.com/SSheldon/rust-rope#112f9cae)\n       Fresh ncurses v5.73.0 (https://github.com/jeaye/ncurses-rs#6604cfc0)\n   Compiling ebitor v0.1.0 (file:///Users/benekastah/dev/ebitor)\n     Running `rustc src/main.rs --crate-name ebitor --crate-type bin -g --out-dir /Users/benekastah/dev/ebitor/target/debug --emit=dep-info,link -L dependency=/Users/benekastah/dev/ebitor/target/debug -L dependency=/Users/benekastah/dev/ebitor/target/debug/deps --extern ncurses=/Users/benekastah/dev/ebitor/target/debug/deps/libncurses-8e30185888061fc5.rlib --extern rope=/Users/benekastah/dev/ebitor/target/debug/deps/librope-94235f124fc5c080.rlib`\nsrc/editor.rs:109:31: 109:35 error: internal compiler error: cannot relate bound region: ReEarlyBound(562, TypeSpace, 0, 'a) <= ReFree(DestructionScopeData { node_id: 546 }, BrNamed(DefId { krate: 0, node: 562 }, 'a))\nsrc/editor.rs:109         let p1: *const Self = self;\n                                                ^~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:149\n\nstack backtrace:\n   1:        0x10705233f - sys::backtrace::write::h0f2fc53eb11eb814gWr\n   2:        0x10705a942 - panicking::on_panic::hd617a4042e8486fciUv\n   3:        0x107017375 - rt::unwind::begin_unwind_inner::hd84dfec22ac3667d1Bv\n   4:        0x1067f141e - rt::unwind::begin_unwind::h17402473262222227889\n   5:        0x1067f13aa - diagnostic::SpanHandler::span_bug::hcc4fbb6ab7b33620EqB\n   6:        0x1046b600b - middle::infer::region_inference::RegionVarBindings<'a, 'tcx>::make_subregion::h63ab9a4a128f69c5tiv\n   7:        0x10466d1eb - middle::infer::sub::Sub<'a, 'tcx>.TypeRelation<'a, 'tcx>::regions::h56c888da7b43944dAux\n   8:        0x10466cfd1 - middle::infer::sub::Sub<'a, 'tcx>.TypeRelation<'a, 'tcx>::relate_with_variance::h14341298437393653231\n   9:        0x10466c54b - middle::ty_relate::relate_substs::h10478772626253278636\n  10:        0x10466bb3a - middle::ty_relate::relate_item_substs::h1962531610498164770\n  11:        0x1046cc924 - middle::ty_relate::super_relate_tys::h10118851298262005972\n  12:        0x1046643f2 - middle::infer::sub::Sub<'a, 'tcx>.TypeRelation<'a, 'tcx>::tys::h6eaac9ae44640379dqx\n  13:        0x10466481d - middle::infer::sub::Sub<'a, 'tcx>.TypeRelation<'a, 'tcx>::relate_with_variance::h13282577528495974067\n  14:        0x1046cce1f - middle::ty_relate::super_relate_tys::h10118851298262005972\n  15:        0x1046643f2 - middle::infer::sub::Sub<'a, 'tcx>.TypeRelation<'a, 'tcx>::tys::h6eaac9ae44640379dqx\n  16:        0x1046d1427 - middle::infer::InferCtxt<'a, 'tcx>::sub_types::h0b7ff7685f1805acXjz\n  17:        0x103cea7c4 - check::coercion::mk_assignty::hc434da205a5f1e38Ztf\n  18:        0x103ceed3d - check::demand::coerce::h5a966068774373e0mDf\n  19:        0x103d89d5e - check::check_expr_with_unifier::h12150491147357226885\n  20:        0x103db0d4b - check::check_decl_local::h92d1785d18142c27wJr\n  21:        0x103d5976a - check::check_block_with_expected::h844cc24296d38cbfCPr\n  22:        0x103d3ae98 - check::check_fn::he488d72de82de5609Bn\n  23:        0x103d54f55 - check::check_bare_fn::h1cab56f07a2fa15bIrn\n  24:        0x103d5de17 - check::check_method_body::ha9665720af994cefd3n\n  25:        0x103d52e9b - check::CheckItemBodiesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::hbb0d2bb98771484fLon\n  26:        0x103d5320e - check::CheckItemBodiesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::hbb0d2bb98771484fLon\n  27:        0x103e1ca5a - check_crate::closure.37936\n  28:        0x103e17e67 - check_crate::h4d03e35b8fa9ef5dc8B\n  29:        0x103b7e144 - driver::phase_3_run_analysis_passes::hd5d4ea6bf0a2e998nGa\n  30:        0x103b5ff1c - driver::compile_input::hd958766b5aa38359Qba\n  31:        0x103c27923 - run_compiler::h9bcb9536763d6c28z4b\n  32:        0x103c2544a - boxed::F.FnBox<A>::call_box::h2309050189455115330\n  33:        0x103c248e7 - rt::unwind::try::try_fn::h4927022999322665723\n  34:        0x1070db7c8 - rust_try_inner\n  35:        0x1070db7b5 - rust_try\n  36:        0x103c24bc0 - boxed::F.FnBox<A>::call_box::h5709674458622256774\n  37:        0x10705948d - sys::thread::create::thread_start::h499b3be451a7bbb8AZu\n  38:     0x7fff89997267 - _pthread_body\n  39:     0x7fff899971e4 - _pthread_start\n\nCould not compile `ebitor`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name ebitor --crate-type bin -g --out-dir /Users/benekastah/dev/ebitor/target/debug --emit=dep-info,link -L dependency=/Users/benekastah/dev/ebitor/target/debug -L dependency=/Users/benekastah/dev/ebitor/target/debug/deps --extern ncurses=/Users/benekastah/dev/ebitor/target/debug/deps/libncurses-8e30185888061fc5.rlib --extern rope=/Users/benekastah/dev/ebitor/target/debug/deps/librope-94235f124fc5c080.rlib` (exit code: 101)\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25259/timeline", "performed_via_github_app": null, "state_reason": "completed"}