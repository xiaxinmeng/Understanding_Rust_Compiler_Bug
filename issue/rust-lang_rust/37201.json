{"url": "https://api.github.com/repos/rust-lang/rust/issues/37201", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37201/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37201/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37201/events", "html_url": "https://github.com/rust-lang/rust/issues/37201", "id": 183240444, "node_id": "MDU6SXNzdWUxODMyNDA0NDQ=", "number": 37201, "title": "Pretty-printer inserts an extra newline after multiline trailing comments", "user": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 108435, "node_id": "MDU6TGFiZWwxMDg0MzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-pretty", "name": "A-pretty", "color": "f7e101", "default": false, "description": "Area: Pretty printing."}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-16T00:04:46Z", "updated_at": "2021-07-14T15:18:26Z", "closed_at": "2021-07-14T15:18:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Example:\n\n```\nfn main() {\n    let a = 10; // Comment 1\n                // Comment 2\n}\n```\n\n=>\n\n```\nfn main() {\n    let a =\n        10; // Comment 1\n            // Comment 2\n\n}\n```\n\nAffected tests:\n[pretty] pretty\\issue-20427.rs\n[pretty] pretty\\issue-22992.rs\n[pretty] pretty\\issue-23338-ensure-param-drop-order.rs\n[pretty] pretty\\issue-27401-dropflag-reinit.rs\n\nThe issue disappears if comments are not packed into `ibox` (see `try!(self.ibox(0))` and `self.end()` in pprust.rs/fn print_comment/comments::Trailing), but formatting become worse and other tests fail.\nI spent whole day investigating how these boxes work and reading Derek C. Oppen's \"Pretty Printing\" but still have no idea why this extra newline appears.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37201/timeline", "performed_via_github_app": null, "state_reason": "completed"}