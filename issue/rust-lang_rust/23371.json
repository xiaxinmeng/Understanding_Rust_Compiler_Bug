{"url": "https://api.github.com/repos/rust-lang/rust/issues/23371", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23371/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23371/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23371/events", "html_url": "https://github.com/rust-lang/rust/issues/23371", "id": 61693563, "node_id": "MDU6SXNzdWU2MTY5MzU2Mw==", "number": 23371, "title": "Misleading error message when trying to use a Vec of an unsized enum as function argument", "user": {"login": "bitvoid", "id": 6316784, "node_id": "MDQ6VXNlcjYzMTY3ODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6316784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitvoid", "html_url": "https://github.com/bitvoid", "followers_url": "https://api.github.com/users/bitvoid/followers", "following_url": "https://api.github.com/users/bitvoid/following{/other_user}", "gists_url": "https://api.github.com/users/bitvoid/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitvoid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitvoid/subscriptions", "organizations_url": "https://api.github.com/users/bitvoid/orgs", "repos_url": "https://api.github.com/users/bitvoid/repos", "events_url": "https://api.github.com/users/bitvoid/events{/privacy}", "received_events_url": "https://api.github.com/users/bitvoid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-03-14T20:46:11Z", "updated_at": "2015-07-20T01:59:04Z", "closed_at": "2015-07-20T01:59:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "While fixing some project for latest rust nightly (porting to new IO) I got an misleading error because I used a `Path` in an enum that was used in a vector as function argument.\n\n``` rust\nuse std::path::Path;\n\nenum SomeEnum {\n    SomeBool(bool),\n    SomePath(Path)\n}\n\nfn some_function(arg: &mut Vec<SomeEnum>) {\n    /* some whitespace to demonstrate that the line number is also wrong\n\n\n\n\n\n\n    */\n}\n\nfn main() {\n    let mut v = Vec::new();\n    some_function(&mut v);\n}\n```\n\n```\n<anon>:8:1: 17:2 error: the trait `core::marker::Sized` is not implemented for the type `[u8]` [E0277]\n<anon>:8 fn some_function(arg: &mut Vec<SomeEnum>) {\n<anon>:9     /* some whitespace to demonstrate that the line number is also wrong\n<anon>:10     \n<anon>:11     \n<anon>:12     \n<anon>:13     \n          ...\n<anon>:8:1: 17:2 note: `[u8]` does not have a constant size known at compile-time\n<anon>:8 fn some_function(arg: &mut Vec<SomeEnum>) {\n<anon>:9     /* some whitespace to demonstrate that the line number is also wrong\n<anon>:10     \n<anon>:11     \n<anon>:12     \n<anon>:13     \n          ...\nerror: aborting due to previous error\n```\n\nThe error complains about a `[u8]` but there is no `[u8]` in the signature. Also the line number of the error message points to the closing bracket of the function but then goes on and prints the first lines of the function.\n\nError was easily solved by replacing Path with PathBuf once it became clear that `Path` is the culprit.\n\nhttp://is.gd/yD8S6w\n", "closed_by": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23371/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23371/timeline", "performed_via_github_app": null, "state_reason": "completed"}