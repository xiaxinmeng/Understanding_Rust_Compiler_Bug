{"url": "https://api.github.com/repos/rust-lang/rust/issues/48439", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48439/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48439/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48439/events", "html_url": "https://github.com/rust-lang/rust/issues/48439", "id": 299503006, "node_id": "MDU6SXNzdWUyOTk1MDMwMDY=", "number": 48439, "title": "Incremental compilation regression with num-bignum", "user": {"login": "Flakebi", "id": 6499211, "node_id": "MDQ6VXNlcjY0OTkyMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6499211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flakebi", "html_url": "https://github.com/Flakebi", "followers_url": "https://api.github.com/users/Flakebi/followers", "following_url": "https://api.github.com/users/Flakebi/following{/other_user}", "gists_url": "https://api.github.com/users/Flakebi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flakebi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flakebi/subscriptions", "organizations_url": "https://api.github.com/users/Flakebi/orgs", "repos_url": "https://api.github.com/users/Flakebi/repos", "events_url": "https://api.github.com/users/Flakebi/events{/privacy}", "received_events_url": "https://api.github.com/users/Flakebi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-02-22T20:49:25Z", "updated_at": "2020-01-28T23:30:22Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "The num-bignum crate is slower by a factor 3-4 when compiling incrementally.\r\n\r\nThis crate supports `cargo bench` which allows for an easy comparison of the performance.\r\nWithout incremental compilation (`CARGO_INCREMENTAL=0 cargo bench`):\r\n```\r\ntest divide_0          ... bench:         867 ns/iter (+/- 17)\r\ntest divide_1          ... bench:      15,398 ns/iter (+/- 361)\r\ntest divide_2          ... bench:     770,862 ns/iter (+/- 14,336)\r\ntest fac_to_string     ... bench:       2,210 ns/iter (+/- 7)\r\ntest factorial_100     ... bench:       6,624 ns/iter (+/- 382)\r\ntest fib2_100          ... bench:       1,777 ns/iter (+/- 54)\r\ntest fib2_1000         ... bench:      33,224 ns/iter (+/- 1,143)\r\ntest fib2_10000        ... bench:   2,109,744 ns/iter (+/- 21,395)\r\ntest fib_100           ... bench:         871 ns/iter (+/- 30)\r\ntest fib_1000          ... bench:      15,811 ns/iter (+/- 467)\r\ntest fib_10000         ... bench:   1,037,026 ns/iter (+/- 32,844)\r\ntest fib_to_string     ... bench:         232 ns/iter (+/- 4)\r\ntest from_str_radix_02 ... bench:       2,671 ns/iter (+/- 50)\r\ntest from_str_radix_08 ... bench:       1,157 ns/iter (+/- 18)\r\ntest from_str_radix_10 ... bench:       1,348 ns/iter (+/- 61)\r\ntest from_str_radix_16 ... bench:       1,029 ns/iter (+/- 25)\r\ntest from_str_radix_36 ... bench:       1,069 ns/iter (+/- 38)\r\ntest hash              ... bench:      78,637 ns/iter (+/- 2,226)\r\ntest modpow            ... bench:  24,375,306 ns/iter (+/- 541,434)\r\ntest modpow_even       ... bench:  62,169,859 ns/iter (+/- 1,558,466)\r\ntest multiply_0        ... bench:         100 ns/iter (+/- 2)\r\ntest multiply_1        ... bench:      15,523 ns/iter (+/- 445)\r\ntest multiply_2        ... bench:     848,662 ns/iter (+/- 18,692)\r\ntest multiply_3        ... bench:   1,972,284 ns/iter (+/- 41,682)\r\ntest pow_bench         ... bench:   5,377,001 ns/iter (+/- 173,286)\r\ntest shl               ... bench:       4,543 ns/iter (+/- 166)\r\ntest shr               ... bench:       1,984 ns/iter (+/- 103)\r\ntest to_str_radix_02   ... bench:       2,196 ns/iter (+/- 65)\r\ntest to_str_radix_08   ... bench:         772 ns/iter (+/- 16)\r\ntest to_str_radix_10   ... bench:       6,922 ns/iter (+/- 209)\r\ntest to_str_radix_16   ... bench:         637 ns/iter (+/- 12)\r\ntest to_str_radix_36   ... bench:       6,851 ns/iter (+/- 190)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 32 measured; 0 filtered out\r\n\r\n     Running target/release/deps/gcd-c7301f4be4104d87\r\n\r\nrunning 8 tests\r\ntest gcd_euclid_0064 ... bench:       9,621 ns/iter (+/- 380)\r\ntest gcd_euclid_0256 ... bench:      57,871 ns/iter (+/- 1,377)\r\ntest gcd_euclid_1024 ... bench:     268,900 ns/iter (+/- 6,397)\r\ntest gcd_euclid_4096 ... bench:   1,786,538 ns/iter (+/- 50,910)\r\ntest gcd_stein_0064  ... bench:       1,589 ns/iter (+/- 74)\r\ntest gcd_stein_0256  ... bench:       6,351 ns/iter (+/- 106)\r\ntest gcd_stein_1024  ... bench:      39,651 ns/iter (+/- 1,787)\r\ntest gcd_stein_4096  ... bench:     351,423 ns/iter (+/- 18,916)\r\n```\r\n\r\nWith incremental compilation:\r\n```\r\ntest divide_0          ... bench:       2,212 ns/iter (+/- 120)\r\ntest divide_1          ... bench:      46,185 ns/iter (+/- 1,319)\r\ntest divide_2          ... bench:   2,164,688 ns/iter (+/- 35,890)\r\ntest fac_to_string     ... bench:       3,051 ns/iter (+/- 41)\r\ntest factorial_100     ... bench:      18,034 ns/iter (+/- 427)\r\ntest fib2_100          ... bench:       6,455 ns/iter (+/- 224)\r\ntest fib2_1000         ... bench:     119,590 ns/iter (+/- 2,451)\r\ntest fib2_10000        ... bench:   6,462,893 ns/iter (+/- 129,404)\r\ntest fib_100           ... bench:       3,026 ns/iter (+/- 65)\r\ntest fib_1000          ... bench:      56,443 ns/iter (+/- 1,542)\r\ntest fib_10000         ... bench:   3,210,114 ns/iter (+/- 64,889)\r\ntest fib_to_string     ... bench:         433 ns/iter (+/- 40)\r\ntest from_str_radix_02 ... bench:       7,403 ns/iter (+/- 288)\r\ntest from_str_radix_08 ... bench:       2,741 ns/iter (+/- 99)\r\ntest from_str_radix_10 ... bench:       3,737 ns/iter (+/- 115)\r\ntest from_str_radix_16 ... bench:       2,830 ns/iter (+/- 78)\r\ntest from_str_radix_36 ... bench:       3,354 ns/iter (+/- 80)\r\ntest hash              ... bench:     140,451 ns/iter (+/- 2,757)\r\ntest modpow            ... bench:  78,250,953 ns/iter (+/- 1,400,794)\r\ntest modpow_even       ... bench: 191,208,389 ns/iter (+/- 10,505,051)\r\ntest multiply_0        ... bench:         396 ns/iter (+/- 12)\r\ntest multiply_1        ... bench:      45,034 ns/iter (+/- 1,049)\r\ntest multiply_2        ... bench:   3,110,243 ns/iter (+/- 114,081)\r\ntest multiply_3        ... bench:   7,193,430 ns/iter (+/- 498,651)\r\ntest pow_bench         ... bench:  13,125,197 ns/iter (+/- 1,299,791)\r\ntest shl               ... bench:       7,582 ns/iter (+/- 739)\r\ntest shr               ... bench:       3,056 ns/iter (+/- 58)\r\ntest to_str_radix_02   ... bench:       5,011 ns/iter (+/- 130)\r\ntest to_str_radix_08   ... bench:       1,877 ns/iter (+/- 29)\r\ntest to_str_radix_10   ... bench:       8,457 ns/iter (+/- 287)\r\ntest to_str_radix_16   ... bench:       1,401 ns/iter (+/- 45)\r\ntest to_str_radix_36   ... bench:       7,998 ns/iter (+/- 159)\r\n\r\ntest result: ok. 0 passed; 0 failed; 0 ignored; 32 measured; 0 filtered out\r\n\r\n     Running target/release/deps/gcd-c7301f4be4104d87\r\n\r\nrunning 8 tests\r\ntest gcd_euclid_0064 ... bench:      19,747 ns/iter (+/- 548)\r\ntest gcd_euclid_0256 ... bench:     119,759 ns/iter (+/- 1,850)\r\ntest gcd_euclid_1024 ... bench:     569,027 ns/iter (+/- 12,593)\r\ntest gcd_euclid_4096 ... bench:   4,087,824 ns/iter (+/- 538,444)\r\ntest gcd_stein_0064  ... bench:       6,511 ns/iter (+/- 2,291)\r\ntest gcd_stein_0256  ... bench:      25,980 ns/iter (+/- 1,552)\r\ntest gcd_stein_1024  ... bench:     138,574 ns/iter (+/- 5,185)\r\ntest gcd_stein_4096  ... bench:     989,603 ns/iter (+/- 42,293)\r\n```\r\n\r\nnum-bigint: f656829\r\ncargo: 0.26.0-nightly (1d6dfea44 2018-01-26)\r\nrustc: 1.25.0-nightly (27a046e93 2018-02-18)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48439/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48439/timeline", "performed_via_github_app": null, "state_reason": null}