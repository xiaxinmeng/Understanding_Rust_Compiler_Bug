{"url": "https://api.github.com/repos/rust-lang/rust/issues/44898", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/44898/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/44898/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/44898/events", "html_url": "https://github.com/rust-lang/rust/issues/44898", "id": 261205996, "node_id": "MDU6SXNzdWUyNjEyMDU5OTY=", "number": 44898, "title": "`x.py build --incremental` fails because of a command too long", "user": {"login": "zilbuz", "id": 434964, "node_id": "MDQ6VXNlcjQzNDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zilbuz", "html_url": "https://github.com/zilbuz", "followers_url": "https://api.github.com/users/zilbuz/followers", "following_url": "https://api.github.com/users/zilbuz/following{/other_user}", "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions", "organizations_url": "https://api.github.com/users/zilbuz/orgs", "repos_url": "https://api.github.com/users/zilbuz/repos", "events_url": "https://api.github.com/users/zilbuz/events{/privacy}", "received_events_url": "https://api.github.com/users/zilbuz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 593503757, "node_id": "MDU6TGFiZWw1OTM1MDM3NTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-infra", "name": "T-infra", "color": "bfd4f2", "default": false, "description": "Relevant to the infrastructure team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-09-28T06:25:57Z", "updated_at": "2017-09-29T13:29:09Z", "closed_at": "2017-09-29T13:29:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm on Windows, with a x86_64-pc-windows-msvc toolchain. When compiling Rust with `x.py build --incremental` after editing `librustc_mir/borrow_check.rs`, I have the following error: \r\n\r\n```\r\nCompiling rustc_mir v0.0.0 (file:///C:/Users/zilbuz/projets/rust/src/librustc_mir)\r\nerror: could not exec the linker `link.exe`: The filename or extension is too long. (os error 206)\r\n  |\r\n  = note: \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio\\\\2017\\\\Community\\\\VC\\\\Tools\\\\MSVC\\\\14.11.25503\\\\bin\\\\HostX64\\\\x64\\\\link.exe\" \"/NOLOGO\" \"/NXCOMPAT\" \"/LIBPATH:C:\\\\Use\r\nrs\\\\zilbuz\\\\projets\\\\rust\\\\build\\\\x86_64-pc-windows-msvc\\\\stage0-sysroot\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"C:\\\\Users\\\\zilbuz\\\\projets\\\\rust\\\\build\\\\x86_64-pc-windows\r\n\r\n[... snip 40936 characters]\r\n\r\ne0-sysroot\\\\lib\\\\rustlib\\\\x86_64-pc-windows-msvc\\\\lib\" \"std-488c7c40c2087fcf.dll.lib\" \"C:\\\\Users\\\\zilbuz\\\\AppData\\\\Local\\\\Temp\\\\rustc.DmRRue9GNCaI\\\\libcompiler_builtins-2f642fd\r\n8dbd70770.rlib\" \"psapi.lib\" \"kernel32.lib\" \"advapi32.lib\" \"advapi32.lib\" \"ws2_32.lib\" \"userenv.lib\" \"shell32.lib\" \"libcmt.lib\" \"/DLL\" \"/IMPLIB:C:\\\\Users\\\\zilbuz\\\\projets\\\\rust\\\r\n\\build\\\\x86_64-pc-windows-msvc\\\\stage0-rustc\\\\x86_64-pc-windows-msvc\\\\release\\\\deps\\\\rustc_mir-0f20c3c479aba5d8.dll.lib\"\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `rustc_mir`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `C:\\Users\\zilbuz\\projets\\rust\\build\\bootstrap/debug/rustc --crate-name rustc_mir src\\librustc_mir\\lib.rs --error-format json --crate-type dy\r\nlib --emit=dep-info,link -C prefer-dynamic -C opt-level=2 -C metadata=0f20c3c479aba5d8 -C extra-filename=-0f20c3c479aba5d8 --out-dir C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-p\r\nc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps --target x86_64-pc-windows-msvc -L dependency=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-r\r\nustc\\x86_64-pc-windows-msvc\\release\\deps -L dependency=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\release\\deps --extern graphviz=C:\\Users\\zilbuz\\pro\r\njets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\graphviz-5d7fe7040ed57f01.dll --extern rustc_data_structures=C:\\Users\\zilbuz\\projets\\rus\r\nt\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\rustc_data_structures-b9628b020bb214b5.dll --extern log=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_6\r\n4-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\liblog-27c77b885b9a02c9.rlib --extern syntax_pos=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\st\r\nage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\syntax_pos-6ea3df7d784b3eb9.dll --extern rustc_errors=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_\r\n64-pc-windows-msvc\\release\\deps\\rustc_errors-548d0fe0cca64918.dll --extern bitflags=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msv\r\nc\\release\\deps\\libbitflags-f4d0c753c8935159.rlib --extern rustc=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\rustc\r\n-5c43ee8e6dfcc144.dll --extern rustc_const_math=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\rustc_const_math-81d4\r\n91847226ec65.dll --extern syntax=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\syntax-a61322cf56404b56.dll --extern\r\n rustc_const_eval=C:\\Users\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\deps\\rustc_const_eval-03adaa682e06899f.dll -L native=C:\\\r\nUsers\\zilbuz\\projets\\rust\\build\\x86_64-pc-windows-msvc\\stage0-rustc\\x86_64-pc-windows-msvc\\release\\build\\miniz-sys-75134b743b58a2a9\\out` (exit code: 101)\r\nthread 'main' panicked at 'command did not execute successfully: \"C:\\\\Users\\\\zilbuz\\\\projets\\\\rust\\\\build\\\\x86_64-pc-windows-msvc\\\\stage0/bin\\\\cargo.exe\" \"build\" \"--target\" \"x8\r\n6_64-pc-windows-msvc\" \"-j\" \"4\" \"--release\" \"--features\" \" llvm\" \"--manifest-path\" \"C:\\\\Users\\\\zilbuz\\\\projets\\\\rust\\\\src/rustc/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101', src\\bootstrap\\compile.rs:883:8\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nfailed to run: C:\\Users\\zilbuz\\projets\\rust\\build\\bootstrap\\debug\\bootstrap build --stage 1 --incremental\r\nBuild completed unsuccessfully in 0:00:38\r\n```\r\n\r\nI think this may be because the command line is too long (41 760 characters). \r\n\r\nThe longest path in the command line is at 196 characters : \r\n`C:\\\\Users\\\\zilbuz\\\\projets\\\\rust\\\\build\\\\x86_64-pc-windows-msvc\\\\stage0-rustc\\\\x86_64-pc-windows-msvc\\\\release\\\\deps\\\\rustc_mir-0f20c3c479aba5d8.rustc_mir-dataflow-move_paths-abs_domain.volatile.o`\r\n\r\nAttached is the complete trace with `RUST_BACKTRACE=1` : [build-incremental-fail-full.txt](https://github.com/rust-lang/rust/files/1339687/build-incremental-fail-full.txt)", "closed_by": {"login": "zilbuz", "id": 434964, "node_id": "MDQ6VXNlcjQzNDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zilbuz", "html_url": "https://github.com/zilbuz", "followers_url": "https://api.github.com/users/zilbuz/followers", "following_url": "https://api.github.com/users/zilbuz/following{/other_user}", "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions", "organizations_url": "https://api.github.com/users/zilbuz/orgs", "repos_url": "https://api.github.com/users/zilbuz/repos", "events_url": "https://api.github.com/users/zilbuz/events{/privacy}", "received_events_url": "https://api.github.com/users/zilbuz/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/44898/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/44898/timeline", "performed_via_github_app": null, "state_reason": "completed"}