{"url": "https://api.github.com/repos/rust-lang/rust/issues/4705", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/4705/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/4705/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/4705/events", "html_url": "https://github.com/rust-lang/rust/issues/4705", "id": 10494181, "node_id": "MDU6SXNzdWUxMDQ5NDE4MQ==", "number": 4705, "title": "std::getopts::opts_present() is broken", "user": {"login": "illuloid", "id": 879707, "node_id": "MDQ6VXNlcjg3OTcwNw==", "avatar_url": "https://avatars.githubusercontent.com/u/879707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illuloid", "html_url": "https://github.com/illuloid", "followers_url": "https://api.github.com/users/illuloid/followers", "following_url": "https://api.github.com/users/illuloid/following{/other_user}", "gists_url": "https://api.github.com/users/illuloid/gists{/gist_id}", "starred_url": "https://api.github.com/users/illuloid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illuloid/subscriptions", "organizations_url": "https://api.github.com/users/illuloid/orgs", "repos_url": "https://api.github.com/users/illuloid/repos", "events_url": "https://api.github.com/users/illuloid/events{/privacy}", "received_events_url": "https://api.github.com/users/illuloid/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2013-01-31T09:52:25Z", "updated_at": "2013-11-03T01:27:51Z", "closed_at": "2013-11-03T01:27:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "It appears that opts_present() as it is now is broken. It calls find_opt() for each option string and returns true as soon as result is matched against Some(_), but find_opt() returns Some(i) (i being the index of the opt in the Matches.opts vector) when an option is legit (regardless of it being matched). This leads to opts_present() returning true always unless one of the options in the input vector is absent from Matches.opts. Test suite works because it is tested true against options that have been specified, and false against illegal options, but there is no test for optional arguments that have not been specified in the command line. Calling opt_present() instead of opts_present() for each string in vector works as expected.\n\nTL;DR: opts_present() behaves as if it were named opts_matchable().\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/4705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/4705/timeline", "performed_via_github_app": null, "state_reason": "completed"}