{"url": "https://api.github.com/repos/rust-lang/rust/issues/20369", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20369/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20369/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20369/events", "html_url": "https://github.com/rust-lang/rust/issues/20369", "id": 53184719, "node_id": "MDU6SXNzdWU1MzE4NDcxOQ==", "number": 20369, "title": "Running rustup installs then removes rustc installation", "user": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-12-31T13:50:44Z", "updated_at": "2014-12-31T16:38:28Z", "closed_at": "2014-12-31T16:38:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The switch to the new installers seems to result in `rustup.sh` deleting the rustc. It downloads and installs rustc fine, then downloads cargo, but the installer for that first deletes rustc as legacy, and then installs cargo, meaning cargo works fine... but there's no compiler.\n\nSnippet of output at the end of installing rustc/beginning of installing cargo.\n\n```\n...\ninstall: installing /usr/local/share/man/man1/rustc.1\ninstall: installing /usr/local/share/man/man1/rustdoc.1\ninstall: \ninstall: verifying installed binaries are executable\n\n    Rust is ready to roll.\n\nrustup: Extracting cargo-nightly-x86_64-unknown-linux-gnu.tar.gz\ninstall: looking for install programs\ninstall: \ninstall: found mkdir\ninstall: found printf\ninstall: found cut\ninstall: found grep\ninstall: found uname\ninstall: found tr\ninstall: found sed\ninstall: \ninstall: processing ./rustup-tmp-install/cargo-nightly-x86_64-unknown-linux-gnu/install.sh args\ninstall: \ninstall: CFG_DESTDIR          :=  \ninstall: CFG_PREFIX           := /usr/local \ninstall: CFG_LIBDIR           := /usr/local/lib \ninstall: CFG_MANDIR           := /usr/local/share/man \ninstall: \ninstall: validating ./rustup-tmp-install/cargo-nightly-x86_64-unknown-linux-gnu/install.sh args\ninstall: \ninstall: verifying platform can run binaries\ninstall: verifying destination is writable\ninstall: verifying destination is not the same as source\ninstall: removing legacy file /usr/local/bin/rust-lldb\ninstall: removing legacy file /usr/local/bin/rustc\ninstall: removing legacy file /usr/local/bin/rustdoc\ninstall: removing legacy file /usr/local/lib/libarena-4e7c5e5c.so\ninstall: removing legacy file /usr/local/lib/libflate-4e7c5e5c.so\ninstall: removing legacy file /usr/local/lib/libfmt_macros-4e7c5e5c.so\n...\n```\n\ncc @brson\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20369/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20369/timeline", "performed_via_github_app": null, "state_reason": "completed"}