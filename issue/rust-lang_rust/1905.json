{"url": "https://api.github.com/repos/rust-lang/rust/issues/1905", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1905/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1905/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1905/events", "html_url": "https://github.com/rust-lang/rust/issues/1905", "id": 3392348, "node_id": "MDU6SXNzdWUzMzkyMzQ4", "number": 1905, "title": "Reports \"not all control paths return a value\" when that's not true", "user": {"login": "jsternberg", "id": 1212129, "node_id": "MDQ6VXNlcjEyMTIxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1212129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsternberg", "html_url": "https://github.com/jsternberg", "followers_url": "https://api.github.com/users/jsternberg/followers", "following_url": "https://api.github.com/users/jsternberg/following{/other_user}", "gists_url": "https://api.github.com/users/jsternberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsternberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsternberg/subscriptions", "organizations_url": "https://api.github.com/users/jsternberg/orgs", "repos_url": "https://api.github.com/users/jsternberg/repos", "events_url": "https://api.github.com/users/jsternberg/events{/privacy}", "received_events_url": "https://api.github.com/users/jsternberg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2012-02-26T18:42:04Z", "updated_at": "2014-06-16T21:56:41Z", "closed_at": "2012-02-26T18:54:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following code fragment returns the following from the compiler:\n\n``` rust\nfn get_input<T: copy>(default: T, f: fn(str) -> T) -> T {\n    alt stdin().read_line() {\n      \"\" { default }\n      line { f(line) }\n    }\n}\n\nfn yes_no_prompt(prompt: str, default: bool) -> bool {\n    while true {\n        print(prompt);\n        let input = get_input(some(default)) {|x|\n            alt str::to_lower(x) {\n              \"y\" { some(true) }\n              \"n\" { some(false) }\n              _ { none }\n            }\n        };\n\n        alt input {\n          some(x) { ret x; }\n          none { println(\"Invalid input\"); }\n        }\n    };\n}\n```\n\n```\nhello.rs:52:53: 68:1 error: In function yes_no_prompt, not all control paths return a value\nhello.rs:52 fn yes_no_prompt(prompt: str, default: bool) -> bool {\nhello.rs:53     while true {\nhello.rs:54         print(prompt);\nhello.rs:55         let input = get_input(some(default)) {|x|\nhello.rs:56             alt str::to_lower(x) {\nhello.rs:57               \"y\" { some(true) }\n            ...\nhello.rs:52:48: 52:52 error: see declared return type of 'bool'\nhello.rs:52 fn yes_no_prompt(prompt: str, default: bool) -> bool {\n                                                            ^~~~\n```\n\nThe control paths for this function should be fine. Putting \"fail\" at the end causes the compiler to work fine, but I haven't been able to find an input that causes it to fail.\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1905/timeline", "performed_via_github_app": null, "state_reason": "completed"}