{"url": "https://api.github.com/repos/rust-lang/rust/issues/15064", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15064/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15064/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15064/events", "html_url": "https://github.com/rust-lang/rust/issues/15064", "id": 36209368, "node_id": "MDU6SXNzdWUzNjIwOTM2OA==", "number": 15064, "title": "Dispatch of reflection visitor methods should be implemented properly", "user": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-06-20T23:01:46Z", "updated_at": "2014-10-21T22:57:59Z", "closed_at": "2014-10-21T22:57:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Sorry, not the greatest summary.\n\nCurrently we dispatch the visitor methods from trans::reflect::visit() using `trans_call_inner` directly and without monomorphising the target method or substituting the type properly. These are methods not functions, so I guess we don't need to monomorphise, but this still seems pretty bad. One effect of this is that we can't use the method's type for anything because the method signature includes type parameters, but the methods are in a different crate (libdebug) from the caller, so the type_contents machinery chokes. In particular, this means we can't get the proper llvm attributes for the method call. I have had to hack things so we don't get attributes for any lang items (since I don't see any way to distinguish the reflection methods from other lang items once inside invoke). That is bad.\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15064/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15064/timeline", "performed_via_github_app": null, "state_reason": "completed"}