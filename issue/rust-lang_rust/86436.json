{"url": "https://api.github.com/repos/rust-lang/rust/issues/86436", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86436/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86436/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86436/events", "html_url": "https://github.com/rust-lang/rust/issues/86436", "id": 924980423, "node_id": "MDU6SXNzdWU5MjQ5ODA0MjM=", "number": 86436, "title": "Unable to build 1.53.0 from official tarball due to miri", "user": {"login": "liushuyu", "id": 6829345, "node_id": "MDQ6VXNlcjY4MjkzNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/6829345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liushuyu", "html_url": "https://github.com/liushuyu", "followers_url": "https://api.github.com/users/liushuyu/followers", "following_url": "https://api.github.com/users/liushuyu/following{/other_user}", "gists_url": "https://api.github.com/users/liushuyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/liushuyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liushuyu/subscriptions", "organizations_url": "https://api.github.com/users/liushuyu/orgs", "repos_url": "https://api.github.com/users/liushuyu/repos", "events_url": "https://api.github.com/users/liushuyu/events{/privacy}", "received_events_url": "https://api.github.com/users/liushuyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1244499056, "node_id": "MDU6TGFiZWwxMjQ0NDk5MDU2", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-miri", "name": "A-miri", "color": "f7e101", "default": false, "description": "Area: The miri tool"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2021-06-18T14:52:55Z", "updated_at": "2021-08-02T04:59:09Z", "closed_at": "2021-08-02T04:59:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Hi there, I tried to build Rust 1.53.0 from the source tarball downloaded from https://static.rust-lang.org/dist/rustc-1.53.0-src.tar.gz and it failed to compile due to `cargo-miri` could not locate the Git repository.\r\n\r\nAfter a quick search, the issue supposedly should have been fixed in https://github.com/rust-lang/miri/commit/e5b340017e39dc90e3f9cf9966244faa585321b5 but for some reason, the fix didn't land in the final distribution despite in #84182 it was stated that the fix would be included in the next stable release.\r\n\r\nHere is the backtrace:\r\n\r\n<details><summary>Backtrace</summary>\r\n<p>\r\n\r\n```\r\n  thread 'main' panicked at 'Unable to generate vergen keys!: could not find repository from '/build/i0szw9jw/rustc-1.53.0-src/src/tools/miri/cargo-miri'; class=Repository (6); code=NotFound (-3)\r\n\r\n  Stack backtrace:\r\n     0: anyhow::error::<impl core::convert::From<E> for anyhow::Error>::from\r\n               at /build/i0szw9jw/rustc-1.53.0-src/vendor/anyhow-1.0.34/src/error.rs:464:25\r\n     1: vergen::feature::git::configure_git\r\n               at /build/i0szw9jw/rustc-1.53.0-src/vendor/vergen/src/feature/git.rs:175:55\r\n     2: vergen::config::Instructions::config\r\n               at /build/i0szw9jw/rustc-1.53.0-src/vendor/vergen/src/config.rs:139:9\r\n     3: vergen::gen::config_from_instructions\r\n               at /build/i0szw9jw/rustc-1.53.0-src/vendor/vergen/src/gen.rs:81:32\r\n     4: vergen::gen::vergen\r\n               at /build/i0szw9jw/rustc-1.53.0-src/vendor/vergen/src/gen.rs:69:5\r\n     5: build_script_build::main\r\n               at ./build.rs:10:5\r\n     6: core::ops::function::FnOnce::call_once\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/ops/function.rs:227:5\r\n     7: std::sys_common::backtrace::__rust_begin_short_backtrace\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/sys_common/backtrace.rs:125:18\r\n     8: std::rt::lang_start::{{closure}}\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/rt.rs:49:18\r\n     9: core::ops::function::impls::<impl core::ops::function::FnOnce<A> for &F>::call_once\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/ops/function.rs:259:13\r\n        std::panicking::try::do_call\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/panicking.rs:379:40\r\n        std::panicking::try\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/panicking.rs:343:19\r\n        std::panic::catch_unwind\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/panic.rs:431:14\r\n        std::rt::lang_start_internal\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/rt.rs:34:21\r\n    10: std::rt::lang_start\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/rt.rs:48:5\r\n    11: main\r\n    12: __libc_start_main\r\n               at /build/okrh64bn/glibc/csu/../csu/libc-start.c:314:16\r\n    13: _start\r\n               at /build/okrh64bn/glibc/csu/../sysdeps/x86_64/start.S:120', src/tools/miri/cargo-miri/build.rs:10:24\r\n  stack backtrace:\r\n     0: rust_begin_unwind\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/std/src/panicking.rs:493:5\r\n     1: core::panicking::panic_fmt\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/panicking.rs:92:14\r\n     2: core::result::unwrap_failed\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/result.rs:1355:5\r\n     3: core::result::Result<T,E>::expect\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/result.rs:997:23\r\n     4: build_script_build::main\r\n               at ./build.rs:10:5\r\n     5: core::ops::function::FnOnce::call_once\r\n               at /build/i0szw9jw/rustc-1.53.0-src/library/core/src/ops/function.rs:227:5\r\n  note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\ncommand did not execute successfully: \"/build/i0szw9jw/rustc-1.53.0-src/build/x86_64-unknown-linux-gnu/stage0/bin/cargo\" \"build\" \"--target\" \"x86_64-unknown-linux-gnu\" \"-Zbinary-dep-depinfo\" \"-j\" \"32\" \"-v\" \"--release\" \"--frozen\" \"--manifest-path\" \"/build/i0szw9jw/rustc-1.53.0-src/src/tools/miri/cargo-miri/Cargo.toml\" \"--message-format\" \"json-render-diagnostics\"\r\nexpected success, got: exit code: 101\r\n```\r\n\r\n</p>\r\n</details>\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86436/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86436/timeline", "performed_via_github_app": null, "state_reason": "completed"}