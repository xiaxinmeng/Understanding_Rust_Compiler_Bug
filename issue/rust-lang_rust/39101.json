{"url": "https://api.github.com/repos/rust-lang/rust/issues/39101", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39101/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39101/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39101/events", "html_url": "https://github.com/rust-lang/rust/issues/39101", "id": 201084777, "node_id": "MDU6SXNzdWUyMDEwODQ3Nzc=", "number": 39101, "title": "Compiler bug on travis", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-16T17:57:34Z", "updated_at": "2017-01-16T17:59:55Z", "closed_at": "2017-01-16T17:59:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi my kernel build on my machine with rust 1.15-nightly, \r\nbut when building on travis i get this error \r\n`\r\n$ export DEBIAN_FRONTEND=noninteractive\r\n\r\nW: Size of file /var/lib/apt/lists/security.ubuntu.com_ubuntu_dists_precise-security_restricted_binary-amd64_Packages.gz is not what the server reported 13782 14904\r\n\r\nW: Size of file /var/lib/apt/lists/security.ubuntu.com_ubuntu_dists_precise-security_restricted_binary-i386_Packages.gz is not what the server reported 13751 14885\r\n\r\nW: Size of file /var/lib/apt/lists/us.archive.ubuntu.com_ubuntu_dists_precise-updates_restricted_binary-amd64_Packages.gz is not what the server reported 19576 20785\r\n\r\nW: Size of file /var/lib/apt/lists/us.archive.ubuntu.com_ubuntu_dists_precise-updates_restricted_binary-i386_Packages.gz is not what the server reported 19521 20707\r\n\r\nW: Size of file /var/lib/apt/lists/us.archive.ubuntu.com_ubuntu_dists_precise-backports_multiverse_source_Sources.gz is not what the server reported 5886 5888\r\n\r\nW: Size of file /var/lib/apt/lists/ppa.launchpad.net_travis-ci_zero-mq_ubuntu_dists_precise_main_binary-amd64_Packages.gz is not what the server reported 832 1195\r\n\r\nW: Size of file /var/lib/apt/lists/ppa.launchpad.net_ubuntugis_ppa_ubuntu_dists_precise_main_binary-amd64_Packages.gz is not what the server reported 33653 36677\r\n\r\nW: Size of file /var/lib/apt/lists/ppa.launchpad.net_ubuntugis_ppa_ubuntu_dists_precise_main_binary-i386_Packages.gz is not what the server reported 33699 36733\r\n\r\nReading package lists...\r\n\r\nBuilding dependency tree...\r\n\r\nReading state information...\r\n\r\nThe following extra packages will be installed:\r\n\r\n  libc-bin libc-dev-bin libc6-dev\r\n\r\nSuggested packages:\r\n\r\n  glibc-doc\r\n\r\nThe following packages will be upgraded:\r\n\r\n  libc-bin libc-dev-bin libc6 libc6-dev\r\n\r\n4 upgraded, 0 newly installed, 0 to remove and 266 not upgraded.\r\n\r\nNeed to get 8,840 kB of archives.\r\n\r\nAfter this operation, 14.3 kB disk space will be freed.\r\n\r\nGet:1 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc6-dev amd64 2.15-0ubuntu10.15 [2,943 kB]\r\n\r\nGet:2 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc-dev-bin amd64 2.15-0ubuntu10.15 [84.7 kB]\r\n\r\nGet:3 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc-bin amd64 2.15-0ubuntu10.15 [1,177 kB]\r\n\r\nGet:4 http://us.archive.ubuntu.com/ubuntu/ precise-updates/main libc6 amd64 2.15-0ubuntu10.15 [4,636 kB]\r\n\r\nFetched 8,840 kB in 0s (10.9 MB/s)\r\n\r\nPreconfiguring packages ...\r\n\r\n(Reading database ... 71420 files and directories currently installed.)\r\n\r\nPreparing to replace libc6-dev 2.15-0ubuntu10.10 (using .../libc6-dev_2.15-0ubuntu10.15_amd64.deb) ...\r\n\r\nUnpacking replacement libc6-dev ...\r\n\r\nPreparing to replace libc-dev-bin 2.15-0ubuntu10.10 (using .../libc-dev-bin_2.15-0ubuntu10.15_amd64.deb) ...\r\n\r\nUnpacking replacement libc-dev-bin ...\r\n\r\nPreparing to replace libc-bin 2.15-0ubuntu10.10 (using .../libc-bin_2.15-0ubuntu10.15_amd64.deb) ...\r\n\r\nUnpacking replacement libc-bin ...\r\n\r\nProcessing triggers for man-db ...\r\n\r\nSetting up libc-bin (2.15-0ubuntu10.15) ...\r\n\r\n(Reading database ... 71419 files and directories currently installed.)\r\n\r\nPreparing to replace libc6 2.15-0ubuntu10.10 (using .../libc6_2.15-0ubuntu10.15_amd64.deb) ...\r\n\r\nUnpacking replacement libc6 ...\r\n\r\nSetting up libc6 (2.15-0ubuntu10.15) ...\r\n\r\nSetting up libc-dev-bin (2.15-0ubuntu10.15) ...\r\n\r\nSetting up libc6-dev (2.15-0ubuntu10.15) ...\r\n\r\nProcessing triggers for libc-bin ...\r\n\r\nldconfig deferred processing now taking place\r\n\r\n$ git clone --depth=50 --branch=master https://github.com/hackereg35/rust-kernel.git hackereg35/rust-kernel\r\n\r\nCloning into 'hackereg35/rust-kernel'...\r\n\r\nremote: Counting objects: 37, done.\r\n\r\nremote: Compressing objects: 100% (26/26), done.\r\n\r\nremote: Total 37 (delta 3), reused 34 (delta 3), pack-reused 0\r\n\r\nUnpacking objects: 100% (37/37), done.\r\n\r\nChecking connectivity... done.\r\n\r\n$ cd hackereg35/rust-kernel\r\n\r\n$ git checkout -qf 972c7970098c7cda6615b8ec80349efe01e3cfb6\r\n\r\nThis job is running on container-based infrastructure, which does not allow use of 'sudo', setuid and setguid executables.\r\n\r\nIf you require sudo, add 'sudo: required' to your .travis.yml\r\n\r\nSee https://docs.travis-ci.com/user/workers/container-based-infrastructure/ for details.\r\n\r\n0.01s\r\n\r\nrust-download\r\n\r\nInstalling Rust\r\n\r\n0.12s$ curl -sL https://static.rust-lang.org/rustup.sh -o ~/rust-installer/rustup.sh\r\n\r\n9.42s$ sh ~/rust-installer/rustup.sh --prefix=~/rust --spec=nightly -y --disable-sudo 2> /dev/null\r\n\r\nrustup: gpg available. signatures will be verified\r\n\r\nrustup: downloading manifest for 'nightly'\r\n\r\nrustup: downloading toolchain for 'nightly'\r\n\r\ngpg: Signature made Mon 16 Jan 2017 12:20:14 PM UTC using RSA key ID 7B3B09DC\r\n\r\ngpg: Good signature from \"Rust Language (Tag and Release Signing Key) <rust-key@rust-lang.org>\"\r\n\r\ngpg: WARNING: This key is not certified with a trusted signature!\r\n\r\ngpg:          There is no indication that the signature belongs to the owner.\r\n\r\nPrimary key fingerprint: 108F 6620 5EAE B0AA A8DD  5E1C 85AB 96E6 FA1B E5FE\r\n\r\n     Subkey fingerprint: C134 66B7 E169 A085 1886  3216 5CB4 A934 7B3B 09DC\r\n\r\nrustup: installing toolchain for 'nightly'\r\n\r\nrustup: extracting installer\r\n\r\ninstall: creating uninstall script at /home/travis/rust/lib/rustlib/uninstall.sh\r\n\r\ninstall: installing component 'rustc'\r\n\r\ninstall: installing component 'rust-std-x86_64-unknown-linux-gnu'\r\n\r\ninstall: installing component 'rust-docs'\r\n\r\ninstall: installing component 'cargo'\r\n\r\n    Rust is ready to roll.\r\n\r\n0.01s\r\n\r\n0.01s\r\n\r\n0.01s\r\n\r\n$ rustc --version\r\n\r\nrustc 1.16.0-nightly (ff591b6dc 2017-01-15)\r\n\r\n$ cargo --version\r\n\r\ncargo 0.17.0-nightly (6c79cf9 2017-01-13)\r\n\r\n13.35s$ cargo build --verbose\r\n\r\n    Updating registry `https://github.com/rust-lang/crates.io-index`\r\n\r\n Downloading multiboot2 v0.1.0\r\n\r\n Downloading spin v0.4.5\r\n\r\n Downloading rlibc v0.1.5\r\n\r\n Downloading bitflags v0.4.0\r\n\r\n Downloading x86 v0.8.0\r\n\r\n Downloading volatile v0.1.0\r\n\r\n Downloading bitflags v0.7.0\r\n\r\n Downloading raw-cpuid v2.0.1\r\n\r\n   Compiling x86 v0.8.0\r\n\r\n   Compiling volatile v0.1.0\r\n\r\n   Compiling bitflags v0.4.0\r\n\r\n   Compiling raw-cpuid v2.0.1\r\n\r\n   Compiling bitflags v0.7.0\r\n\r\n   Compiling rlibc v0.1.5\r\n\r\n   Compiling spin v0.4.5\r\n\r\n     Running `rustc --crate-name build_script_build /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/x86-0.8.0/build.rs --crate-type bin --emit=dep-info,link -C debuginfo=2 -C metadata=75b9bc2ec16f1f6e -C extra-filename=-75b9bc2ec16f1f6e --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/build/x86-75b9bc2ec16f1f6e -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name bitflags /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/bitflags-0.4.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=\"no_std\"' -C metadata=2565e485d19febcf -C extra-filename=-2565e485d19febcf --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name volatile /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/volatile-0.1.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=3253c439383d95ab -C extra-filename=-3253c439383d95ab --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name raw_cpuid /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/raw-cpuid-2.0.1/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=723bbf57db918f42 -C extra-filename=-723bbf57db918f42 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name bitflags /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/bitflags-0.7.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=65ddff5d2b91509e -C extra-filename=-65ddff5d2b91509e --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name rlibc /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/rlibc-0.1.5/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=a32503b79af87730 -C extra-filename=-a32503b79af87730 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n     Running `rustc --crate-name spin /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/spin-0.4.5/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=\"const_fn\"' --cfg 'feature=\"once\"' --cfg 'feature=\"default\"' --cfg 'feature=\"asm\"' --cfg 'feature=\"core_intrinsics\"' --cfg 'feature=\"unstable\"' -C metadata=48d0aca32942f1c4 -C extra-filename=-48d0aca32942f1c4 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --cap-lints allow`\r\n\r\n   Compiling multiboot2 v0.1.0\r\n\r\n     Running `rustc --crate-name multiboot2 /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/multiboot2-0.1.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=3e509ba7f3ebff44 -C extra-filename=-3e509ba7f3ebff44 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --extern bitflags=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libbitflags-2565e485d19febcf.rlib --cap-lints allow`\r\n\r\n     Running `/home/travis/build/hackereg35/rust-kernel/target/debug/build/x86-75b9bc2ec16f1f6e/build-script-build`\r\n\r\n     Running `rustc --crate-name x86 /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/x86-0.8.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=992be198737ab929 -C extra-filename=-992be198737ab929 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --extern bitflags=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libbitflags-65ddff5d2b91509e.rlib --extern raw_cpuid=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libraw_cpuid-723bbf57db918f42.rlib --cap-lints allow`\r\n\r\nerror: internal compiler error: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_trans/mir/operand.rs:83: not immediate: OperandRef(Ref((%\"shared::segmentation::SegmentSelector\"*:  %_4 = alloca %\"shared::segmentation::SegmentSelector\")) @ shared::segmentation::SegmentSelector)\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_errors/lib.rs:423\r\n\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: Could not compile `x86`.\r\n\r\nCaused by:\r\n\r\n  process didn't exit successfully: `rustc --crate-name x86 /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/x86-0.8.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=992be198737ab929 -C extra-filename=-992be198737ab929 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --extern bitflags=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libbitflags-65ddff5d2b91509e.rlib --extern raw_cpuid=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libraw_cpuid-723bbf57db918f42.rlib --cap-lints allow` (exit code: 101)\r\n\r\n2.37s$ cargo test --verbose\r\n\r\n       Fresh spin v0.4.5\r\n\r\n       Fresh bitflags v0.4.0\r\n\r\n       Fresh rlibc v0.1.5\r\n\r\n       Fresh bitflags v0.7.0\r\n\r\n       Fresh volatile v0.1.0\r\n\r\n       Fresh raw-cpuid v2.0.1\r\n\r\n       Fresh multiboot2 v0.1.0\r\n\r\n   Compiling x86 v0.8.0\r\n\r\n     Running `rustc --crate-name x86 /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/x86-0.8.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=992be198737ab929 -C extra-filename=-992be198737ab929 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --extern raw_cpuid=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libraw_cpuid-723bbf57db918f42.rlib --extern bitflags=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libbitflags-65ddff5d2b91509e.rlib --cap-lints allow`\r\n\r\nerror: internal compiler error: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_trans/mir/operand.rs:83: not immediate: OperandRef(Ref((%\"shared::segmentation::SegmentSelector\"*:  %_4 = alloca %\"shared::segmentation::SegmentSelector\")) @ shared::segmentation::SegmentSelector)\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'Box<Any>', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/librustc_errors/lib.rs:423\r\n\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: Could not compile `x86`.\r\n\r\nCaused by:\r\n\r\n  process didn't exit successfully: `rustc --crate-name x86 /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/x86-0.8.0/src/lib.rs --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=992be198737ab929 -C extra-filename=-992be198737ab929 --out-dir /home/travis/build/hackereg35/rust-kernel/target/debug/deps -L dependency=/home/travis/build/hackereg35/rust-kernel/target/debug/deps --extern raw_cpuid=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libraw_cpuid-723bbf57db918f42.rlib --extern bitflags=/home/travis/build/hackereg35/rust-kernel/target/debug/deps/libbitflags-65ddff5d2b91509e.rlib --cap-lints allow` (exit code: 101)\r\n\r\nThe command \"cargo test --verbose\" exited with 101.\r\n\r\nDone. Your build exited with 1.\r\n`\r\n\r\n[Travis build](https://travis-ci.org/hackereg35/rust-kernel/builds/192436528)", "closed_by": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39101/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39101/timeline", "performed_via_github_app": null, "state_reason": "completed"}