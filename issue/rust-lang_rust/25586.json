{"url": "https://api.github.com/repos/rust-lang/rust/issues/25586", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25586/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25586/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25586/events", "html_url": "https://github.com/rust-lang/rust/issues/25586", "id": 77838763, "node_id": "MDU6SXNzdWU3NzgzODc2Mw==", "number": 25586, "title": "TRPL: FFI, \"Linking\" section: meaning of propagation is unclear", "user": {"login": "mkpankov", "id": 393741, "node_id": "MDQ6VXNlcjM5Mzc0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/393741?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkpankov", "html_url": "https://github.com/mkpankov", "followers_url": "https://api.github.com/users/mkpankov/followers", "following_url": "https://api.github.com/users/mkpankov/following{/other_user}", "gists_url": "https://api.github.com/users/mkpankov/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkpankov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkpankov/subscriptions", "organizations_url": "https://api.github.com/users/mkpankov/orgs", "repos_url": "https://api.github.com/users/mkpankov/repos", "events_url": "https://api.github.com/users/mkpankov/events{/privacy}", "received_events_url": "https://api.github.com/users/mkpankov/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-05-18T22:58:23Z", "updated_at": "2015-06-09T23:11:33Z", "closed_at": "2015-06-09T23:11:33Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is the link\nhttp://doc.rust-lang.org/stable/book/ffi.html\n\nTo quote:\n\n```\nThe different kind values are meant to differentiate how the native library participates in linkage. From a linkage perspective, the rust compiler creates two flavors of artifacts: partial (rlib/staticlib) and final (dylib/binary). Native dynamic libraries and frameworks are propagated to the final artifact boundary, while static libraries are not propagated at all.\n\nA few examples of how this model can be used are:\n\n    A native build dependency. Sometimes some C/C++ glue is needed when writing some rust code, but distribution of the C/C++ code in a library format is just a burden. In this case, the code will be archived into libfoo.a and then the rust crate would declare a dependency via #[link(name = \"foo\", kind = \"static\")].\n\n    Regardless of the flavor of output for the crate, the native static library will be included in the output, meaning that distribution of the native static library is not necessary.\n\n    A normal dynamic dependency. Common system libraries (like readline) are available on a large number of systems, and often a static copy of these libraries cannot be found. When this dependency is included in a rust crate, partial targets (like rlibs) will not link to the library, but when the rlib is included in a final target (like a binary), the native library will be linked in.\n```\n\nI understand \"propagation\" meaning \"required linking of this artifact will attach further and further towards the final artifacts\".\n\nThe top sentence says \"static libs are not propagated\", but the following explanation (A native build dependency) makes it look like static libs are always propagated, on the contrary.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25586/timeline", "performed_via_github_app": null, "state_reason": "completed"}