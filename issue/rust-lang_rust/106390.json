{"url": "https://api.github.com/repos/rust-lang/rust/issues/106390", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/106390/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/106390/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/106390/events", "html_url": "https://github.com/rust-lang/rust/issues/106390", "id": 1516837597, "node_id": "I_kwDOAAsO6M5aaRrd", "number": 106390, "title": "rustdoc: clicking a link inside the help popover does not work", "user": {"login": "ardislu", "id": 29699850, "node_id": "MDQ6VXNlcjI5Njk5ODUw", "avatar_url": "https://avatars.githubusercontent.com/u/29699850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ardislu", "html_url": "https://github.com/ardislu", "followers_url": "https://api.github.com/users/ardislu/followers", "following_url": "https://api.github.com/users/ardislu/following{/other_user}", "gists_url": "https://api.github.com/users/ardislu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ardislu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ardislu/subscriptions", "organizations_url": "https://api.github.com/users/ardislu/orgs", "repos_url": "https://api.github.com/users/ardislu/repos", "events_url": "https://api.github.com/users/ardislu/events{/privacy}", "received_events_url": "https://api.github.com/users/ardislu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 2406929537, "node_id": "MDU6TGFiZWwyNDA2OTI5NTM3", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rustdoc-ui", "name": "A-rustdoc-ui", "color": "f7e101", "default": false, "description": "Area: rustdoc UI (generated HTML)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-01-03T01:22:38Z", "updated_at": "2023-01-05T03:59:36Z", "closed_at": "2023-01-05T03:59:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Steps to reproduce the issue:\r\n1. In any Rust project, create a new documentation website and open it:\r\n```\r\ncargo doc --open\r\n```\r\n2. Make sure you're viewing the page on a device with a screen width greater than 700px. Click the \"help\" icon on the top right to open the help popover:\r\n![image](https://user-images.githubusercontent.com/29699850/210288316-a5b25823-ee38-47e7-bc69-863c41bf0715.png)\r\n3. Click the anchor link \"the rustdoc book\"\r\n\r\nExpected result: I am able to follow the anchor link, and the tab is redirected to the https://doc.rust-lang.org/rustdoc/ site\r\n\r\nActual result: nothing happens\r\n\r\n---\r\n\r\nIt looks like the issue is happening due to [L1043-L1045 in `src/librustdoc/html/static/js/main.js`](https://github.com/rust-lang/rust/blob/master/src/librustdoc/html/static/js/main.js#L1043-L1045):\r\n\r\n```javascript\r\ncontainer.onclick = event => {\r\n    event.preventDefault();\r\n};\r\n```\r\n\r\nWhere `container` is the popover `<div>` element, which the click event on the child `<a>` element bubbles up to. I tested deleting this event listener directly within the browser and it appears to fix the issue.\r\n\r\nI don't think deleting this event listener would cause any regressions because there is already no default behavior when you click on a plain `<div>`. However, I'm not sure what the full context was around adding this event listener in the first place.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/106390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/106390/timeline", "performed_via_github_app": null, "state_reason": "completed"}