{"url": "https://api.github.com/repos/rust-lang/rust/issues/17165", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17165/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17165/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17165/events", "html_url": "https://github.com/rust-lang/rust/issues/17165", "id": 42494526, "node_id": "MDU6SXNzdWU0MjQ5NDUyNg==", "number": 17165, "title": "ICE:cannot relate bound region", "user": {"login": "hebiyan", "id": 7089450, "node_id": "MDQ6VXNlcjcwODk0NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7089450?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hebiyan", "html_url": "https://github.com/hebiyan", "followers_url": "https://api.github.com/users/hebiyan/followers", "following_url": "https://api.github.com/users/hebiyan/following{/other_user}", "gists_url": "https://api.github.com/users/hebiyan/gists{/gist_id}", "starred_url": "https://api.github.com/users/hebiyan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hebiyan/subscriptions", "organizations_url": "https://api.github.com/users/hebiyan/orgs", "repos_url": "https://api.github.com/users/hebiyan/repos", "events_url": "https://api.github.com/users/hebiyan/events{/privacy}", "received_events_url": "https://api.github.com/users/hebiyan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-09-11T06:53:54Z", "updated_at": "2015-03-17T13:29:53Z", "closed_at": "2015-03-17T13:29:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "'rustc -v' output:\n`rustc 0.12.0-pre (641b1980a 2014-09-09 04:26:18 +0000)`\n\nos:\nMac OS X 10.9.4\n\n'uname -a' output:\n\n```\nDarwin server.gideon001.private 13.3.0 Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 x86_64\n```\n\ncode:\n\n``` Rust\nfn main () {\n    let addf: <'r>|int|:'r -> Box<|int|:'r -> int> = \n        |n:int|  {box |m:int| -> int {n + m }};\n\n    println!(\"{}\", (*addf(2))(3));\n}\n```\n\n`RUST_BACKTRACE=1 rustc` output:\n\n```\ncl.rs:4:9: 4:47 error: internal compiler error: cannot relate bound region: ReLateBound (10, BrNamed (syntax::ast::DefId{krate: 0u32, node: 26u32}, 'r)) <= ReInfer (0)\ncl.rs:4         |n:int|  {box |m:int| -> int {n + m }};\n                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /Users/gideon/tools/rust/rust/src/libsyntax/ast_util.rs:776\n\nstack backtrace:\n   1:        0x110d45925 - rt::backtrace::imp::write::hc34efde930f36017Lhr\n   2:        0x110d48c61 - failure::on_fail::h3bc40b5494fc9081Fyr\n   3:        0x110ffba35 - unwind::begin_unwind_inner::h82cdbb3cd9ec0b01b0d\n   4:        0x1103c2c6a - unwind::begin_unwind::h3453961218879215225\n   5:        0x1103c2be5 - diagnostic::SpanHandler::span_bug::h1b86fed0ce30aee8YaF\n   6:        0x10d8e49c7 - driver::session::Session::span_bug::h64074688fe14108d1IE\n   7:        0x10de03e21 - middle::typeck::infer::region_inference::RegionVarBindings<'a, 'tcx>::make_subregion::h60507627917bb1c6jUc\n   8:        0x10de1348f - middle::typeck::infer::sub::Sub<'f, 'tcx>.Combine<'tcx>::regions::h8af2cb6ad62249fefAf\n   9:        0x10de13115 - middle::typeck::infer::sub::Sub<'f, 'tcx>.Combine<'tcx>::contraregions::hd6337c74f4ce1730Fzf\n  10:        0x10ddb3cc5 - middle::typeck::infer::sub::Sub<'f, 'tcx>.Combine<'tcx>::tys::h4ff6780852b0589dNIf\n  11:        0x10ddb1750 - middle::typeck::infer::coercion::Coerce<'f, 'tcx>::subtype::h3ece1fef911cabeeMn6\n  12:        0x10ddb150c - middle::typeck::infer::coercion::Coerce<'f, 'tcx>::coerce_borrowed_fn::h969fec4a98356fe5h76\n  13:        0x10ddb12e1 - middle::typeck::infer::coercion::Coerce<'f, 'tcx>::tys::closure.134706\n  14:        0x10ddae4c4 - middle::typeck::infer::coercion::Coerce<'f, 'tcx>::unpack_actual_value::h948805772714329226\n  15:        0x10ddadf79 - middle::typeck::infer::coercion::Coerce<'f, 'tcx>::tys::hb38bc87449217190If6\n  16:        0x10de21648 - middle::typeck::infer::mk_coercety::closure.136784\n  17:        0x10de212d0 - middle::typeck::infer::InferCtxt<'a, 'tcx>::commit_if_ok::closure.136776\n  18:        0x10de21147 - middle::typeck::infer::InferCtxt<'a, 'tcx>::commit_unconditionally::h11340877979196374766\n  19:        0x10dd4c305 - middle::typeck::infer::mk_coercety::hc4de794711c1d371Bgi\n  20:        0x10dcf3565 - middle::typeck::check::FnCtxt<'a, 'tcx>::mk_assignty::h476edb1f6652be36yTY\n  21:        0x10dcf33bd - middle::typeck::check::demand::coerce::h7c31b43dc8bb8462mxT\n  22:        0x10dd5bc6a - middle::typeck::check::check_expr_coercable_to_type::closure.133678\n  23:        0x10dd543ef - middle::typeck::check::check_expr_with_unifier::h6d5b3dc20f73aee9F3Z\n  24:        0x10dda8474 - middle::typeck::check::check_decl_local::h5a935f957a31a756w61\n  25:        0x10dda86c8 - middle::typeck::check::check_stmt::h372cfadc360693a0E81\n  26:        0x10dd16662 - middle::typeck::check::check_block_with_expected::h22fe190983b7dfe2Rc2\n  27:        0x10dd11d58 - middle::typeck::check::check_fn::hb51a901c65978ab9OLW\n  28:        0x10dd112c9 - middle::typeck::check::check_bare_fn::h3d757c7ca707a846sAW\n  29:        0x10dd09f8d - middle::typeck::check::check_item::h13627fd0014f8964mgX\n  30:        0x10dd110ad - middle::typeck::check::check_item_types::h56a54a78d1f84672rzW\n  31:        0x10d740b86 - util::common::time::h6774358895183961009\n  32:        0x10df221f8 - middle::typeck::check_crate::h79d3f57e66bdaf51xgp\n  33:        0x10dfde766 - driver::driver::phase_3_run_analysis_passes::h821dbd7bfc00cf7e6YD\n  34:        0x10dfd94b2 - driver::driver::compile_input::h7817fa347452fba6JKD\n  35:        0x10e064a0a - driver::run_compiler::ha557cce5753da6b01CH\n  36:        0x10e062e16 - driver::main_args::closure.148073\n  37:        0x10d758d6b - task::TaskBuilder<S>::try_future::closure.100105\n  38:        0x10d758c73 - task::TaskBuilder<S>::spawn_internal::closure.100076\n  39:        0x110bcd6cd - task::spawn_opts::closure.8474\n  40:        0x11105e1cc - rust_try_inner\n  41:        0x11105e1b6 - rust_try\n  42:        0x110ff8ed7 - unwind::try::h083fe44507311ba0lOd\n  43:        0x110ff8d4c - task::Task::run::h91e4f0552d7b8b33L0c\n  44:        0x110bcd522 - task::spawn_opts::closure.8413\n  45:        0x110ffa97a - thread::thread_start::h4f6e4374d46c14dbSld\n  46:     0x7fff8bf53899 - _pthread_body\n  47:     0x7fff8bf5372a - _pthread_struct_init\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17165/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17165/timeline", "performed_via_github_app": null, "state_reason": "completed"}