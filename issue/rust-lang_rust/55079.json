{"url": "https://api.github.com/repos/rust-lang/rust/issues/55079", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55079/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55079/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55079/events", "html_url": "https://github.com/rust-lang/rust/issues/55079", "id": 369960282, "node_id": "MDU6SXNzdWUzNjk5NjAyODI=", "number": 55079, "title": "Can't expand/contract Rustdoc's [-] symbol if \"cookies\" disabled", "user": {"login": "thanatos", "id": 90853, "node_id": "MDQ6VXNlcjkwODUz", "avatar_url": "https://avatars.githubusercontent.com/u/90853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thanatos", "html_url": "https://github.com/thanatos", "followers_url": "https://api.github.com/users/thanatos/followers", "following_url": "https://api.github.com/users/thanatos/following{/other_user}", "gists_url": "https://api.github.com/users/thanatos/gists{/gist_id}", "starred_url": "https://api.github.com/users/thanatos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thanatos/subscriptions", "organizations_url": "https://api.github.com/users/thanatos/orgs", "repos_url": "https://api.github.com/users/thanatos/repos", "events_url": "https://api.github.com/users/thanatos/events{/privacy}", "received_events_url": "https://api.github.com/users/thanatos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-15T00:23:19Z", "updated_at": "2018-10-18T09:53:23Z", "closed_at": "2018-10-18T09:53:23Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The output from `rustdoc`, at the top of the page for a `struct` or a `const`, etc., includes a line like,\r\n\r\n> Struct crate::MyStruct    [-][src]\r\n\r\nClicking the `[-]` on a browser w/ restrictive cookie settings (which typically includes `localStorage`) results in an error similar to the following:\r\n\r\n> `storage.js:11` Uncaught DOMException: Failed to read the '`localStorage`' property from '`Window`': Access is denied for this document.\r\n>    at updateLocalStorage (file:///home/[...]/target/doc/storage.js:11:343)\r\n>    at HTMLAnchorElement.toggleAllDocs (file:///home/[...]/target/doc/main.js:13:997)\r\n\r\nAdditionally, **the section fails to expand or contract**, as the exception isn't handled.\r\n\r\n`rustdoc` is attempting to store the collapse/expand state, s.t. later visits to the page presumably maintain that state for the user's convenience.\r\n\r\nI browse the web with an admittedly somewhat atypical setup: I whitelist cookies. `localStorage`, in most browsers, counts, since it is a similar mechanism of persistence. I think Rust's use of `localStorage` here is fine, but I would request that, if `localStorage` is forbidden by the user agent, that the documentation gracefully \"degrade\" to just expanding or contracting the requested item, but not persist it. As it is, the JS crashes while storing the state, and appears to never make it to actually expanding/contracting the item.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55079/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55079/timeline", "performed_via_github_app": null, "state_reason": "completed"}