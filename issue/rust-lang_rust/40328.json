{"url": "https://api.github.com/repos/rust-lang/rust/issues/40328", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40328/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40328/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40328/events", "html_url": "https://github.com/rust-lang/rust/issues/40328", "id": 212522547, "node_id": "MDU6SXNzdWUyMTI1MjI1NDc=", "number": 40328, "title": "rustc --emit=dep-info does too much work", "user": {"login": "luser", "id": 286001, "node_id": "MDQ6VXNlcjI4NjAwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/286001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luser", "html_url": "https://github.com/luser", "followers_url": "https://api.github.com/users/luser/followers", "following_url": "https://api.github.com/users/luser/following{/other_user}", "gists_url": "https://api.github.com/users/luser/gists{/gist_id}", "starred_url": "https://api.github.com/users/luser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luser/subscriptions", "organizations_url": "https://api.github.com/users/luser/orgs", "repos_url": "https://api.github.com/users/luser/repos", "events_url": "https://api.github.com/users/luser/events{/privacy}", "received_events_url": "https://api.github.com/users/luser/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-07T18:43:18Z", "updated_at": "2020-05-01T06:01:32Z", "closed_at": "2017-03-11T08:25:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I'm working on [caching Rust compilation in sccache](https://github.com/mozilla/sccache/issues/42), and I got it working but it's not as fast as I had hoped. As part of [the design](https://github.com/rust-lang/cargo/issues/1997#issuecomment-265859868) that @alexcrichton, @glandium and I hashed out, I'm running `rustc --emit=dep-info` to get a list of source files as input to the hash used as the cache key. It turns out that running that takes almost as long as actually compiling the crate for some crates. For example, on my machine compiling the `rand` crate takes ~1.9s, and running just `rustc --emit=dep-info` for the same crate takes ~1.1s.\r\n\r\n@eddyb looked at the `-Z time-passes` output and determined that rustc is doing too much work in this case. The fix looks simple, thankfully, so I'm going to try to fix it.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40328/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40328/timeline", "performed_via_github_app": null, "state_reason": "completed"}