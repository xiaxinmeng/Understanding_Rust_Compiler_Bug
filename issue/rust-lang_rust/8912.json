{"url": "https://api.github.com/repos/rust-lang/rust/issues/8912", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8912/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8912/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8912/events", "html_url": "https://github.com/rust-lang/rust/issues/8912", "id": 18835642, "node_id": "MDU6SXNzdWUxODgzNTY0Mg==", "number": 8912, "title": "arm gnueabihf cross compile assert fails during linking, ubuntu 13.04", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 55301954, "node_id": "MDU6TGFiZWw1NTMwMTk1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-Arm", "name": "O-Arm", "color": "6e6ec0", "default": false, "description": "Target: 32-bit Arm processors (armv6, armv7, thumb...), including 64-bit Arm in AArch32 state"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2013-09-01T11:36:24Z", "updated_at": "2013-09-24T10:10:22Z", "closed_at": "2013-09-24T10:10:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I don't know if this is a problem with our code generation, or if its a problem with the particular version of GNU binutils I am using.  I just wanted to record it for future reference (and make it public so that if others are seeing the same problem, they can say so).\n\nThis is on ubuntu 13.04\n\n```\nconfigure  --enable-debug --enable-optimize --target-triples=arm-unknown-linux-gnueabihf,x86_64-unknown-linux-gnu --enable-ccache --enable-clang --prefix=~/opt/rust-dbg\n```\n\n```\nmake VERBOSE=1 > /tmp/xcl 2>&1\n```\n\n```\ncp rt/arm-unknown-linux-gnueabihf/stage2/librustrt.so x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/librustrt.so\narm-linux-gnueabihf-gcc -MMD -MP -MT rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/morestack.o -MF rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/morestack.d /home/pnkfelix/Dev/Mozilla/rust.git/src/rt/arch/arm/morestack.S -c -o rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/morestack.o\narm-linux-gnueabihf-ar rcs rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/libmorestack.a rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/morestack.o\ncp rt/arm-unknown-linux-gnueabihf/stage2/arch/arm/libmorestack.a x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/libmorestack.a\nMATCHES=\"\"; if [ -n \"$MATCHES\" ] ; then echo \"Warning: removing previous\" \\'libstd-*.so\\' \"libraries:\" $MATCHES; rm $MATCHES ; fi\nx86_64-unknown-linux-gnu/stage2/bin/rustc --cfg stage2  -O --cfg rtopt --cfg debug -Z no-debug-borrows --target=arm-unknown-linux-gnueabihf --linker=arm-linux-gnueabihf-gcc -D warnings --out-dir x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib /home/pnkfelix/Dev/Mozilla/rust.git/src/libstd/std.rs && touch x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/libstd.so\nerror: linking with `arm-linux-gnueabihf-gcc` failed with code 1\nnote: arm-linux-gnueabihf-gcc arguments: -L/home/pnkfelix/Dev/Mozilla/rust.git/objdir-xcarmhf-dbgopt/x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib -marm -o x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/libstd-6c65cf4b443341b1-0.8-pre.so x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/std.o -lrustrt -lrt -lpthread -L/home/pnkfelix/Dev/Mozilla/rust.git/objdir-xcarmhf-dbgopt/.rust -L/home/pnkfelix/Dev/Mozilla/rust.git/objdir-xcarmhf-dbgopt -shared -lrt -ldl -lm -lmorestack -lrustrt -Wl,-rpath,$ORIGIN/. -Wl,-rpath,/home/pnkfelix/Dev/Mozilla/rust.git/objdir-xcarmhf-dbgopt/x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib -Wl,-rpath,/home/pnkfelix/opt/rust-dbg/lib/rustc/arm-unknown-linux-gnueabihf/lib\nnote: /usr/lib/gcc-cross/arm-linux-gnueabihf/4.7/../../../../arm-linux-gnueabihf/bin/ld: BFD (GNU Binutils for Ubuntu) 2.23.2 assertion fail ../../bfd/elf32-arm.c:11763\ncollect2: error: ld returned 1 exit status\n\nerror: aborting due to previous error\nmake: *** [x86_64-unknown-linux-gnu/stage2/lib/rustc/arm-unknown-linux-gnueabihf/lib/libstd.so] Error 101\n```\n\nIt might just be that the command line we are emitting to the cross-compiling gcc is not actually compatible with the options it accepts.  I am not sure yet.\n", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8912/timeline", "performed_via_github_app": null, "state_reason": "completed"}