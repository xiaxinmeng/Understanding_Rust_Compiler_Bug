{"url": "https://api.github.com/repos/rust-lang/rust/issues/22091", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/22091/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/22091/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/22091/events", "html_url": "https://github.com/rust-lang/rust/issues/22091", "id": 56955586, "node_id": "MDU6SXNzdWU1Njk1NTU4Ng==", "number": 22091, "title": "Strange ICE in a linter when using syntax extensions", "user": {"login": "LeoTestard", "id": 907750, "node_id": "MDQ6VXNlcjkwNzc1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/907750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LeoTestard", "html_url": "https://github.com/LeoTestard", "followers_url": "https://api.github.com/users/LeoTestard/followers", "following_url": "https://api.github.com/users/LeoTestard/following{/other_user}", "gists_url": "https://api.github.com/users/LeoTestard/gists{/gist_id}", "starred_url": "https://api.github.com/users/LeoTestard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LeoTestard/subscriptions", "organizations_url": "https://api.github.com/users/LeoTestard/orgs", "repos_url": "https://api.github.com/users/LeoTestard/repos", "events_url": "https://api.github.com/users/LeoTestard/events{/privacy}", "received_events_url": "https://api.github.com/users/LeoTestard/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-02-08T15:40:01Z", "updated_at": "2015-02-10T22:08:30Z", "closed_at": "2015-02-10T22:08:30Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\n                        error: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Vec::reserve: `usize` overflow', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/option.rs:330\n\nstack backtrace:\n   1:     0x7fc03d90b280 - sys::backtrace::write::h25503045cef8c0c0pvy\n   2:     0x7fc03d92e980 - failure::on_fail::h2581836e6847e312n0F\n   3:     0x7fc03d88fa10 - rt::unwind::begin_unwind_inner::hfde7584b0f347ac4IEF\n   4:     0x7fc03d890520 - rt::unwind::begin_unwind_fmt::h63c856440ef5a7afeDF\n   5:     0x7fc03d92e7e0 - rust_begin_unwind\n   6:     0x7fc03d978870 - panicking::panic_fmt::h0f5128f8e91dc358Tqw\n   7:     0x7fc03abb8480 - vec::Vec<T>::reserve::h12271285414625644921\n   8:     0x7fc03ac5b810 - diagnostic::emit::h4768553017b57fffOtF\n   9:     0x7fc03ac591a0 - diagnostic::EmitterWriter.Emitter::emit::h4be90c42b1d73d43bqF\n  10:     0x7fc03ac57ad0 - diagnostic::Handler::emit::hb481977d8e04eabfO4E\n  11:     0x7fc03ac57e90 - diagnostic::SpanHandler::span_warn::h3147bfd49accb8236TE\n  12:     0x7fc03bc32350 - lint::context::raw_emit_lint::h8e6d28bb654c5be2S0u\n  13:     0x7fc03bc32b10 - lint::context::Context<'a, 'tcx>::lookup_and_emit::h18c43a40d6e0f81ba8u\n  14:     0x7fc03bc21010 - lint::builtin::NonCamelCaseTypes::check_case::h000ef025b6300fb0i8s\n  15:     0x7fc03bc21930 - lint::builtin::NonCamelCaseTypes.LintPass::check_item::h4e7ac4ecb3d987f2tct\n  16:     0x7fc03bc32ce0 - lint::context::Context<'a, 'tcx>::with_lint_attrs::h2049493418187456314\n  17:     0x7fc03bc3a640 - lint::context::Context<'a, 'tcx>.Visitor<'v>::visit_mod::h5ed586dc3e2dff13MAv\n  18:     0x7fc03bc32ce0 - lint::context::Context<'a, 'tcx>::with_lint_attrs::h2049493418187456314\n  19:     0x7fc03bc3a640 - lint::context::Context<'a, 'tcx>.Visitor<'v>::visit_mod::h5ed586dc3e2dff13MAv\n  20:     0x7fc03bc42d10 - lint::context::check_crate::h2f723dbff19a7c4doTv\n  21:     0x7fc03defbc20 - driver::phase_3_run_analysis_passes::h7a142ff0647d384dGGa\n  22:     0x7fc03dee1b60 - driver::compile_input::h48e128556d26f55bCba\n  23:     0x7fc03dfb3ce0 - run_compiler::h763e312f828f22a0Rbc\n  24:     0x7fc03dfb2370 - thunk::F.Invoke<A, R>::invoke::h4670445912642657619\n  25:     0x7fc03dfb12a0 - rt::unwind::try::try_fn::h16156493216513710930\n  26:     0x7fc03d99ae00 - rust_try_inner\n  27:     0x7fc03d99adf0 - rust_try\n  28:     0x7fc03dfb1550 - thunk::F.Invoke<A, R>::invoke::h11636038058777759556\n  29:     0x7fc03d91ae70 - sys::thread::thread_start::h4554e7282d94c6f4KFB\n  30:     0x7fc037959fe0 - start_thread\n  31:     0x7fc03d513c99 - __clone\n  32:                0x0 - <unknown>\n```\n\nThe warning that caused this was:\n\n```\nwarning: variant `op` should have a camel case name such as `Op`, #[warn(non_camel_case_types)] on by default\n```\n\nI'd like to provide a minimal reproducable test case but since it involves expansion of a quite complex syntax extension, I don't think it is possible.\nFurthermore, if I first produce code using `--pretty expanded` and then compile it, it compiles fine (the warnings are displayed properly and no ICE occurs).\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/22091/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/22091/timeline", "performed_via_github_app": null, "state_reason": "completed"}