{"url": "https://api.github.com/repos/rust-lang/rust/issues/87384", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/87384/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/87384/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/87384/events", "html_url": "https://github.com/rust-lang/rust/issues/87384", "id": 950975645, "node_id": "MDU6SXNzdWU5NTA5NzU2NDU=", "number": 87384, "title": "type_length_limit is inconsistently warned about with incremental", "user": {"login": "illicitonion", "id": 1131704, "node_id": "MDQ6VXNlcjExMzE3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1131704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illicitonion", "html_url": "https://github.com/illicitonion", "followers_url": "https://api.github.com/users/illicitonion/followers", "following_url": "https://api.github.com/users/illicitonion/following{/other_user}", "gists_url": "https://api.github.com/users/illicitonion/gists{/gist_id}", "starred_url": "https://api.github.com/users/illicitonion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illicitonion/subscriptions", "organizations_url": "https://api.github.com/users/illicitonion/orgs", "repos_url": "https://api.github.com/users/illicitonion/repos", "events_url": "https://api.github.com/users/illicitonion/events{/privacy}", "received_events_url": "https://api.github.com/users/illicitonion/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 307747675, "node_id": "MDU6TGFiZWwzMDc3NDc2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-incr-comp", "name": "A-incr-comp", "color": "f7e101", "default": false, "description": "Area: Incremental compilation"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-07-22T19:20:16Z", "updated_at": "2023-04-05T17:42:30Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I have this library crate:\r\n```rust\r\n#![type_length_limit = \"95595489\"]\r\n\r\npub fn main() {\r\n    println!(\"Hello, world!\");\r\n}\r\n```\r\n\r\nWhen I build it with `1.55.0-nightly (27277d966 2021-07-16)` I get no warnings.\r\n\r\nWhen I try to perform edition migrations with it by running `cargo +nightly fix --edition`, I get warnings:\r\n```\r\n   Migrating src/lib.rs from 2018 edition to 2021\r\nwarning: unused attribute\r\n --> src/lib.rs:1:1\r\n  |\r\n1 | #![type_length_limit = \"95595489\"]\r\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |\r\n  = note: `#[warn(unused_attributes)]` on by default\r\n\r\nwarning: crate-level attribute should be in the root module\r\n --> src/lib.rs:1:1\r\n  |\r\n1 | #![type_length_limit = \"95595489\"]\r\n  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\r\nwarning: 2 warnings emitted\r\n```\r\n\r\nAs far as I know, this attribute is valid and has effect where it currently is, and either the 2021 edition migration is slightly broken, the 2021 edition has changed the behaviour of this attribute in a way I haven't seen documented.\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.55.0-nightly (b41936b92 2021-07-20)\r\nbinary: rustc\r\ncommit-hash: b41936b92cd8463020207cb2f62a4247942ef2e4\r\ncommit-date: 2021-07-20\r\nhost: x86_64-apple-darwin\r\nrelease: 1.55.0-nightly\r\nLLVM version: 12.0.1\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/87384/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/87384/timeline", "performed_via_github_app": null, "state_reason": null}