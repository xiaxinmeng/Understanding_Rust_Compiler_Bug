{"url": "https://api.github.com/repos/rust-lang/rust/issues/69019", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/69019/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/69019/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/69019/events", "html_url": "https://github.com/rust-lang/rust/issues/69019", "id": 562564549, "node_id": "MDU6SXNzdWU1NjI1NjQ1NDk=", "number": 69019, "title": "Choose a naming scheme for codegen debuginfo emission.", "user": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37234, "node_id": "MDU6TGFiZWwzNzIzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-cleanup", "name": "C-cleanup", "color": "f5f1fd", "default": false, "description": "Category: PRs that clean code up or issues documenting cleanup."}, {"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}, {"id": 60329014, "node_id": "MDU6TGFiZWw2MDMyOTAxNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-low", "name": "P-low", "color": "eb6420", "default": false, "description": "Low priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 419557634, "node_id": "MDU6TGFiZWw0MTk1NTc2MzQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-medium", "name": "E-medium", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Medium / intermediate"}, {"id": 1904923801, "node_id": "MDU6TGFiZWwxOTA0OTIzODAx", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-cranelift", "name": "A-cranelift", "color": "f7e101", "default": false, "description": "Things relevant to the [future] cranelift backend"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-02-10T13:34:57Z", "updated_at": "2023-05-15T14:40:36Z", "closed_at": "2023-05-15T14:40:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Right now it's a mix of `debuginfo`, `dbg` and `DI`.\r\n(`DIFoo` is how LLVM refers to its debuginfo metadata)\r\n\r\nI would prefer if we had something consistent, e.g.:\r\n* go full on DWARF and use `dw` and `Dw` as prefixes, followed by DWARF names (e.g. `DwSubprogram` for a function)\r\n  * easier to refer back to the DWARF spec\r\n  * LLVM already uses mostly DWARF concepts, and other formats, like CodeView, have to convert from that\r\n* do our own thing, using `dbg` and `Dbg`, with names chosen by us (e.g. `DbgFn`)\r\n  * nicer/cleaner in the context of Rust/MIR\r\n  * potentially confusing/annoying to people who are familiar with DWARF or LLVM's approximation of it\r\n\r\nPart of the reason I think we should decide now is @bjorn3 has expressed interest in making most of `rustc_codegen_llvm::debuginfo` LLVM-independent, in order to be able to use it in the Cranelift backend to emit DWARF.\r\nA lot of that code is effectively lowering Rust types into DWARF ones, but using LLVM's API to create LLVM metadata nodes instead of directly emitting DWARF.\r\n\r\nIf we go with the DWARF-based naming I would go as far as to say that everything other than debug locations and variables inside functions, should go into a `rustc_codegen_dwarf` (or just `rustc_dwarf`) crate.\r\n\r\ncc @michaelwoerister @nagisa @rust-lang/wg-mir-opt ", "closed_by": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/69019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/69019/timeline", "performed_via_github_app": null, "state_reason": "completed"}