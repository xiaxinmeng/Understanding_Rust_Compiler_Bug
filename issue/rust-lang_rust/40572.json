{"url": "https://api.github.com/repos/rust-lang/rust/issues/40572", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40572/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40572/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40572/events", "html_url": "https://github.com/rust-lang/rust/issues/40572", "id": 214721571, "node_id": "MDU6SXNzdWUyMTQ3MjE1NzE=", "number": 40572, "title": "Rust allows function argument names to shadow unit structs imported in function body", "user": {"login": "sgrif", "id": 1529387, "node_id": "MDQ6VXNlcjE1MjkzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/1529387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgrif", "html_url": "https://github.com/sgrif", "followers_url": "https://api.github.com/users/sgrif/followers", "following_url": "https://api.github.com/users/sgrif/following{/other_user}", "gists_url": "https://api.github.com/users/sgrif/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgrif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgrif/subscriptions", "organizations_url": "https://api.github.com/users/sgrif/orgs", "repos_url": "https://api.github.com/users/sgrif/repos", "events_url": "https://api.github.com/users/sgrif/events{/privacy}", "received_events_url": "https://api.github.com/users/sgrif/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 239393, "node_id": "MDU6TGFiZWwyMzkzOTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-resolve", "name": "A-resolve", "color": "f7e101", "default": false, "description": "Area: Path resolution"}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-16T14:24:39Z", "updated_at": "2019-09-28T23:50:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Assume that `foo::bar` is a unit struct in all these examples. This fails to compile:\r\n\r\n```rust\r\nuse foo::bar;\r\n\r\nfn foo(bar: i32) {}\r\n```\r\n\r\nAs does this:\r\n\r\n```rust\r\nfn foo() {\r\n    use foo::bar;\r\n    let bar = 1;\r\n}\r\n```\r\n\r\nHowever, this compiles successfully:\r\n\r\n```rust\r\nfn foo(bar: i32) {\r\n    use foo::bar;\r\n}\r\n```\r\n\r\nIt probably shouldn't. The local variable `bar` can never be accessed for the same reason as the first two. This has led to some confusion by users of Diesel, when they tried to write code like the following:\r\n\r\n```rust\r\nfn find_by_email(conn: &PgConnection, email: &str) -> QueryResult<User> {\r\n    use schema::users::dsl::*;\r\n    use schema::users;\r\n\r\n    users.filter(users::email.eq(email)).first(conn)\r\n```\r\n\r\nHowever, `users::email` and `email` are both that unit struct, so this code would return the first user in the database not the user with the given email as you'd expect. It does at least complain about the unused argument, but this should be a hard error.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40572/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40572/timeline", "performed_via_github_app": null, "state_reason": null}