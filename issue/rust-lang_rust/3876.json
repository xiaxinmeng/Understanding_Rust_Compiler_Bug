{"url": "https://api.github.com/repos/rust-lang/rust/issues/3876", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/3876/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/3876/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/3876/events", "html_url": "https://github.com/rust-lang/rust/issues/3876", "id": 7909045, "node_id": "MDU6SXNzdWU3OTA5MDQ1", "number": 3876, "title": "Potential name typo in borrowed pointer tutorial.", "user": {"login": "nejucomo", "id": 480497, "node_id": "MDQ6VXNlcjQ4MDQ5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/480497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nejucomo", "html_url": "https://github.com/nejucomo", "followers_url": "https://api.github.com/users/nejucomo/followers", "following_url": "https://api.github.com/users/nejucomo/following{/other_user}", "gists_url": "https://api.github.com/users/nejucomo/gists{/gist_id}", "starred_url": "https://api.github.com/users/nejucomo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nejucomo/subscriptions", "organizations_url": "https://api.github.com/users/nejucomo/orgs", "repos_url": "https://api.github.com/users/nejucomo/repos", "events_url": "https://api.github.com/users/nejucomo/events{/privacy}", "received_events_url": "https://api.github.com/users/nejucomo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-10-27T07:14:14Z", "updated_at": "2012-10-29T20:52:14Z", "closed_at": "2012-10-29T20:52:14Z", "author_association": "NONE", "active_lock_reason": null, "body": "The following snippet confused me a bit.  I believe \"shape()\" should be replaced with \"select()\" in the explanatory paragraph for the code snippet.\n\nFrom commit 07edf9036 tutorial-borrowed-ptr.md, line 674:\n\n```\n```\n# struct Point {x: float, y: float}; // as before\n# struct Size {w: float, h: float}; // as before\n# enum Shape {\n# Circle(Point, float),   // origin, radius\n# Rectangle(Point, Size)  // upper-left, dimensions\n# }\n# fn compute_area(shape: &Shape) -> float { 0f }\n# fn select<T>(shape: &Shape, threshold: float,\n# a: &r/T, b: &r/T) -> &r/T {\n# if compute_area(shape) > threshold {a} else {b}\n# }\n\n```\n                                              // -+ r\n```\n\nfn select_based_on_unit_circle<T>(                //  |-+ B\n    threshold: float, a: &r/T, b: &r/T) -> &r/T { //  | |\n                                                  //  | |\n    let shape = Circle(Point {x: 0., y: 0.}, 1.); //  | |\n    select(&shape, threshold, a, b)               //  | |\n}                                                 //  |-+\n                                                  // -+\n\n```\n\nIn this call to `select()`, the lifetime of the first parameter shape\nis B, the function body. Both of the second two parameters `a` and `b`\nshare the same lifetime, `r`, which is a lifetime parameter of\n`select_based_on_unit_circle()`. The caller will infer the\nintersection of these two lifetimes as the lifetime of the returned\nvalue, and hence the return value of `shape()` will be assigned a\nlifetime of B. This will in turn lead to a compilation error, because\n`select_based_on_unit_circle()` is supposed to return a value with the\nlifetime `r`.\n```\n\nThere is no function called \"shape()\", but \"select()\" would be consistent.\n", "closed_by": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/3876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/3876/timeline", "performed_via_github_app": null, "state_reason": "completed"}