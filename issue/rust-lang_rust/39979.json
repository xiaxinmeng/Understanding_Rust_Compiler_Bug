{"url": "https://api.github.com/repos/rust-lang/rust/issues/39979", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39979/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39979/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39979/events", "html_url": "https://github.com/rust-lang/rust/issues/39979", "id": 208932269, "node_id": "MDU6SXNzdWUyMDg5MzIyNjk=", "number": 39979, "title": "Linking liblibc using musl target fails (\"unrecognized relocation\") with the new nightlies", "user": {"login": "golddranks", "id": 2675542, "node_id": "MDQ6VXNlcjI2NzU1NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2675542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/golddranks", "html_url": "https://github.com/golddranks", "followers_url": "https://api.github.com/users/golddranks/followers", "following_url": "https://api.github.com/users/golddranks/following{/other_user}", "gists_url": "https://api.github.com/users/golddranks/gists{/gist_id}", "starred_url": "https://api.github.com/users/golddranks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/golddranks/subscriptions", "organizations_url": "https://api.github.com/users/golddranks/orgs", "repos_url": "https://api.github.com/users/golddranks/repos", "events_url": "https://api.github.com/users/golddranks/events{/privacy}", "received_events_url": "https://api.github.com/users/golddranks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 147085028, "node_id": "MDU6TGFiZWwxNDcwODUwMjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-nightly", "name": "regression-from-stable-to-nightly", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to nightly."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2017-02-20T16:45:13Z", "updated_at": "2017-03-03T14:31:24Z", "closed_at": "2017-02-25T15:00:39Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Here's a dockerized test case: https://github.com/golddranks/libc_regression_test/ (run with `docker build .`)\r\n\r\nHere's the error:\r\n```\r\n  = note: /usr/bin/ld: /root/.rustup/toolchains/nightly-2017-02-19-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-musl/lib/liblibc-95af4192ed69a1c8.rlib(exit.lo): unrecognized relocation (0x2a) in section `.text.libc_exit_fini'\r\n          /usr/bin/ld: final link failed: Bad value\r\n          collect2: error: ld returned 1 exit status\r\n```\r\n\r\nThe linking error seems to happen only with the musl target. I originally posted this as https://github.com/rust-lang/libc/issues/529, but because the breaking is dependent on the nightly, it seems that this is an `rustc` issue rather than an issue of the `libc` crate.\r\n\r\nAfter testing with various nightlies, it seems that the nightly `nightly-2017-02-16 installed - rustc 1.17.0-nightly (62eb6056d 2017-02-15)` is the first one that breaks. The nightly before that, `nightly-2017-02-13 installed - rustc 1.17.0-nightly (956e2bcba 2017-02-12)` is the last one that works.\r\n\r\nSo that seems to imply that the commit that introduced this regression is in the range `956e2bcba..62eb6056d`. Any thoughts about which one it might be?", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39979/timeline", "performed_via_github_app": null, "state_reason": "completed"}