{"url": "https://api.github.com/repos/rust-lang/rust/issues/95489", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95489/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95489/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95489/events", "html_url": "https://github.com/rust-lang/rust/issues/95489", "id": 1186818747, "node_id": "I_kwDOAAsO6M5GvWq7", "number": 95489, "title": "[strict provenance] Rationalize \"Oxford Casts\"", "user": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}, {"id": 1884641928, "node_id": "MDU6TGFiZWwxODg0NjQxOTI4", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-AVR", "name": "O-AVR", "color": "6e6ec0", "default": false, "description": "Target: AVR processors (ATtiny, ATmega, etc.)"}, {"id": 3983786342, "node_id": "LA_kwDOAAsO6M7tc8Fm", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-strict-provenance", "name": "A-strict-provenance", "color": "f7e101", "default": false, "description": "Area: Strict provenance for raw pointers"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-03-30T18:16:14Z", "updated_at": "2022-05-26T01:29:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This issue is part of the Strict Provenance Experiment - #95228 \r\n\r\n[Oxford Casts](https://github.com/rust-lang/rust/issues/95488) are those that fly in the face of Harvard Architectures, and let you convert between data pointers and function pointers. In my current understanding, this affects both AVR and WASM.\r\n\r\nFor WASM, function pointers are actually indices into a ~vtable somewhere. This seems to mostly work fine and it's just a matter of \"ask bad questions, get bad answers\"\r\n\r\nFor AVR it causes Actual Compiler Problems that the stdlib seems to be actively routing around: \r\n\r\nhttps://github.com/rust-lang/rust/blob/92804455704cc59d6d8272faf72f442c6125d395/library/core/src/ptr/mod.rs#L1390-L1395\r\n\r\nI do not know what \"resolving\" this looks like. It could involve any of:\r\n\r\n* just documenting the current state of affairs\r\n* developing a \"coherent\" model for what these operations do\r\n* fixing the compiler issues with AVR\r\n* forbidding oxford casts on some or all targets\r\n* introducing new APIs to \"do it right\"\r\n\r\nI can't really help any more than this, because this is all outside my areas of expertese/motivation.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95489/timeline", "performed_via_github_app": null, "state_reason": null}