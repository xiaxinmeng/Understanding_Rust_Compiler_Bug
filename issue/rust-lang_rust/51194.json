{"url": "https://api.github.com/repos/rust-lang/rust/issues/51194", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51194/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51194/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51194/events", "html_url": "https://github.com/rust-lang/rust/issues/51194", "id": 327519226, "node_id": "MDU6SXNzdWUzMjc1MTkyMjY=", "number": 51194, "title": "diagnostic testing: need revison to overlapping_spans test that still surfaces under NLL", "user": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-05-29T23:15:15Z", "updated_at": "2018-11-05T13:56:31Z", "closed_at": "2018-11-05T13:56:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The test [overlapping_spans](https://github.com/rust-lang/rust/blob/2e104a77cfb6b83f725512210c88dc970426a354/src/test/ui/codemap_tests/overlapping_spans.rs) is deliberately trying to create a bug where two \"distinct\" spans that happen to overlap will be reported by the diagnostic tool, to test our ability to render them in different styles so that the end user can distinguish them.\r\n\r\nLook, its easier if you just see the output from AST-borrowck:\r\n\r\nhttps://github.com/rust-lang/rust/blob/2e104a77cfb6b83f725512210c88dc970426a354/src/test/ui/codemap_tests/overlapping_spans.stderr#L4-L8\r\n\r\nYou can see on line 5 the interesting pair of spans combined by using different characters: `^^^^^--^`\r\n\r\nThe problem is that NLL currently happens to not issue such a report with such overlapping spans. \r\n\r\nThe particular output from NLL right now is the following, but I do not want to categorize that choice of output as a bug in NLL at the moment.\r\n\r\nhttps://github.com/rust-lang/rust/blob/746d63a203174f6c91396230b86f6b4fbda507c4/src/test/ui/codemap_tests/overlapping_spans.nll.stderr#L1-L9\r\n\r\nThus it fails to exercise the behavior that we are interested in witnessing in this test.\r\n\r\nCan someone come up with a test for such overlapping spans that does not rely on vagaries of the borrow checker?", "closed_by": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51194/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51194/timeline", "performed_via_github_app": null, "state_reason": "completed"}