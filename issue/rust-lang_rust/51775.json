{"url": "https://api.github.com/repos/rust-lang/rust/issues/51775", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51775/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51775/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51775/events", "html_url": "https://github.com/rust-lang/rust/issues/51775", "id": 335330387, "node_id": "MDU6SXNzdWUzMzUzMzAzODc=", "number": 51775, "title": "fs::write does not flush/sync, and thus does not guarantee the data ends up on disk", "user": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-06-25T09:35:53Z", "updated_at": "2018-06-27T13:17:09Z", "closed_at": "2018-06-27T13:17:09Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`fs::write` is indeed just a shorthand for `File::create` and `Write::write_all`, as the documentation states. But these two calls alone does not guarantee the data has arrived to the destination when `fs::write` returns. At least on Windows if you use `fs::write` and then reboot, the data is never written to disk.\r\n\r\nIs this by design, or a bug? If you want to make sure the data you write ends up on disk, you can't use this convenient helper function. I'm not sure how others use this function, but this problem makes this helper not applicable in almost any situation for me.\r\n\r\nI propose changing the implementation to also flush before returning.", "closed_by": {"login": "faern", "id": 332294, "node_id": "MDQ6VXNlcjMzMjI5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/332294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faern", "html_url": "https://github.com/faern", "followers_url": "https://api.github.com/users/faern/followers", "following_url": "https://api.github.com/users/faern/following{/other_user}", "gists_url": "https://api.github.com/users/faern/gists{/gist_id}", "starred_url": "https://api.github.com/users/faern/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faern/subscriptions", "organizations_url": "https://api.github.com/users/faern/orgs", "repos_url": "https://api.github.com/users/faern/repos", "events_url": "https://api.github.com/users/faern/events{/privacy}", "received_events_url": "https://api.github.com/users/faern/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51775/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51775/timeline", "performed_via_github_app": null, "state_reason": "completed"}