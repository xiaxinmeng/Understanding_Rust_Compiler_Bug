{"url": "https://api.github.com/repos/rust-lang/rust/issues/72130", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/72130/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/72130/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/72130/events", "html_url": "https://github.com/rust-lang/rust/issues/72130", "id": 616460379, "node_id": "MDU6SXNzdWU2MTY0NjAzNzk=", "number": 72130, "title": "Compiler suggests giving types to typed variables", "user": {"login": "ISibboI", "id": 2361822, "node_id": "MDQ6VXNlcjIzNjE4MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2361822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ISibboI", "html_url": "https://github.com/ISibboI", "followers_url": "https://api.github.com/users/ISibboI/followers", "following_url": "https://api.github.com/users/ISibboI/following{/other_user}", "gists_url": "https://api.github.com/users/ISibboI/gists{/gist_id}", "starred_url": "https://api.github.com/users/ISibboI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ISibboI/subscriptions", "organizations_url": "https://api.github.com/users/ISibboI/orgs", "repos_url": "https://api.github.com/users/ISibboI/repos", "events_url": "https://api.github.com/users/ISibboI/events{/privacy}", "received_events_url": "https://api.github.com/users/ISibboI/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-05-12T08:23:05Z", "updated_at": "2020-05-13T07:00:53Z", "closed_at": "2020-05-13T07:00:52Z", "author_association": "NONE", "active_lock_reason": null, "body": "```rust\r\nfn main() {\r\n    let steps = 18;\r\n    \r\n    /*\r\n        Uncomment none of the following lines: Compiler wants angle to have a type\r\n        Uncomment any of the following lines: Compiler wants the first uncommented line to have a type\r\n    */\r\n    \r\n    //let radius: f64 = 60.0;\r\n    //let xoff: f64 = 5.0;\r\n    //let yoff: f64 = 4.0;\r\n\r\n    for i in 0..steps {\r\n        let angle: f64 = 3.14f64 / steps.into() * i.into();\r\n        println!(\"{}\", angle);\r\n    }\r\n}\r\n```\r\n\r\n([Playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=4ad048dca4d3e79391488adb66bd91d7))\r\n\r\nErrors:\r\n\r\n```\r\n   Compiling playground v0.0.1 (/playground)\r\nerror[E0284]: type annotations needed for `f64`\r\n  --> src/main.rs:14:34\r\n   |\r\n9  |     let radius: f64 = 60.0;\r\n   |         ------ consider giving `radius` a type\r\n...\r\n14 |         let angle: f64 = 3.14f64 / steps.into() * i.into();\r\n   |                                  ^ cannot infer type for type `f64`\r\n   |\r\n   = note: cannot resolve `<f64 as std::ops::Div<_>>::Output == _`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0284`.\r\nerror: could not compile `playground`.\r\n\r\nTo learn more, run the command again with --verbose.\r\n\r\n```\r\n\r\nThe compiler seems to fail to infer that I want to divide f64 by f64 here. I am no master of the type system so I just gotta accept that. The error message is confusing though, as it points me to give variables a type that are already typed. Rust version is 1.43.1 stable.\r\n\r\nAlso try uncommenting the commented lines, it will make the error message point to them, even though they are completely unrelated.", "closed_by": {"login": "ISibboI", "id": 2361822, "node_id": "MDQ6VXNlcjIzNjE4MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/2361822?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ISibboI", "html_url": "https://github.com/ISibboI", "followers_url": "https://api.github.com/users/ISibboI/followers", "following_url": "https://api.github.com/users/ISibboI/following{/other_user}", "gists_url": "https://api.github.com/users/ISibboI/gists{/gist_id}", "starred_url": "https://api.github.com/users/ISibboI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ISibboI/subscriptions", "organizations_url": "https://api.github.com/users/ISibboI/orgs", "repos_url": "https://api.github.com/users/ISibboI/repos", "events_url": "https://api.github.com/users/ISibboI/events{/privacy}", "received_events_url": "https://api.github.com/users/ISibboI/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/72130/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/72130/timeline", "performed_via_github_app": null, "state_reason": "completed"}