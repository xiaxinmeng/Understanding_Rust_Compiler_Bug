{"url": "https://api.github.com/repos/rust-lang/rust/issues/29283", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29283/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29283/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29283/events", "html_url": "https://github.com/rust-lang/rust/issues/29283", "id": 113183105, "node_id": "MDU6SXNzdWUxMTMxODMxMDU=", "number": 29283, "title": "rustc panics on deriving Debug for an Enum containing a Variant with a Trait member", "user": {"login": "lschmelzeisen", "id": 488697, "node_id": "MDQ6VXNlcjQ4ODY5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/488697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lschmelzeisen", "html_url": "https://github.com/lschmelzeisen", "followers_url": "https://api.github.com/users/lschmelzeisen/followers", "following_url": "https://api.github.com/users/lschmelzeisen/following{/other_user}", "gists_url": "https://api.github.com/users/lschmelzeisen/gists{/gist_id}", "starred_url": "https://api.github.com/users/lschmelzeisen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lschmelzeisen/subscriptions", "organizations_url": "https://api.github.com/users/lschmelzeisen/orgs", "repos_url": "https://api.github.com/users/lschmelzeisen/repos", "events_url": "https://api.github.com/users/lschmelzeisen/events{/privacy}", "received_events_url": "https://api.github.com/users/lschmelzeisen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-10-24T21:03:27Z", "updated_at": "2015-10-24T21:08:35Z", "closed_at": "2015-10-24T21:08:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "`rustc` panics if one tries to compile a file, where `Debug` is derived for an `enum` that contains a constructor with a `trait` member, when the `trait` extends `Debug`.\n\nCompile following file `bug.rs` fails:\n\n``` rust\n#[derive(Debug)]\nenum A{\n    B(C),\n}\n\ntrait C: std::fmt::Debug {}\n\nfn main() {}\n```\n## Meta\n\n`rustc --version --verbose`:\n\n```\nrustc 1.3.0\nbinary: rustc\ncommit-hash: unknown\ncommit-date: unknown\nhost: x86_64-unknown-linux-gnu\nrelease: 1.3.0\n```\n\n`RUST_BACKTRACE=1 rustc bug.rs`:\n\n```\nbug.rs:2:1: 4:2 warning: enum is never used: `A`, #[warn(dead_code)] on by default\nbug.rs:2 enum A{\nbug.rs:3     B(C),\nbug.rs:4 }\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Unexpected type returned from struct_tail: A for ty=A', src/librustc_trans/trans/type_of.rs:373\n\nstack backtrace:\n   1:     0x7f73575f466e - sys::backtrace::write::ha67a6a2049d22fadIvs\n   2:     0x7f73575fcd55 - panicking::on_panic::hfa4bf0215983f759lzx\n   3:     0x7f73575bd94e - rt::unwind::begin_unwind_inner::ha1b5da93bdf7e8ffC0w\n   4:     0x7f73575be6b6 - rt::unwind::begin_unwind_fmt::hac9e09b20e42a51cIZw\n   5:     0x7f73563d6409 - trans::type_of::in_memory_type_of::h23715c0ef212ea6fCmN\n   6:     0x7f73563d8031 - trans::type_of::type_of::h8550e66cb849440e0lN\n   7:     0x7f735649249e - trans::type_of::type_of_rust_fn::h6ec65cf6a94d2c69Y9M\n   8:     0x7f73563e0707 - trans::declare::declare_rust_fn::h23ae5856407a285cI0A\n   9:     0x7f7356408022 - trans::base::register_fn::h0e113c195f5606edUoj\n  10:     0x7f735640a0be - trans::base::register_method::hf4a5efbc19bfaa61rPj\n  11:     0x7f735640344a - trans::base::get_item_val::h3ba0fb4a6fd13470BBj\n  12:     0x7f7356400305 - trans::base::trans_item::hd3ac3af06c93993fPdj\n  13:     0x7f735640c40c - trans::base::trans_crate::h14e6ea6d455593f8i0j\n  14:     0x7f7357b632f4 - driver::phase_4_translate_to_llvm::h8ce7c7bfb0fd9b185Oa\n  15:     0x7f7357b5d885 - driver::phase_3_run_analysis_passes::closure.16542\n  16:     0x7f7357b57ab1 - middle::ty::ctxt<'tcx>::create_and_enter::h9578579149294230291\n  17:     0x7f7357b52991 - driver::phase_3_run_analysis_passes::h8415522514568150077\n  18:     0x7f7357b36a90 - driver::compile_input::h52c7dafd49963360Tba\n  19:     0x7f7357c1ca63 - run_compiler::h473c62e00f865fa9A7b\n  20:     0x7f7357c1a4de - boxed::F.FnBox<A>::call_box::h10713159552398332324\n  21:     0x7f7357c19e09 - rt::unwind::try::try_fn::h16887904248528792425\n  22:     0x7f73575fc84d - __rust_try\n  23:     0x7f73575e78f7 - rt::unwind::try::inner_try::hafffff77ddacfa5fvWw\n  24:     0x7f7357c1a028 - boxed::F.FnBox<A>::call_box::h5417278073590676257\n  25:     0x7f73575fb991 - sys::thread::Thread::new::thread_start::h29dca2a2cf2294b535v\n  26:     0x7f7351e9b4a3 - start_thread\n  27:     0x7f735725913c - clone\n  28:                0x0 - <unknown>\n```\n", "closed_by": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29283/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29283/timeline", "performed_via_github_app": null, "state_reason": "completed"}