{"url": "https://api.github.com/repos/rust-lang/rust/issues/63085", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63085/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63085/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63085/events", "html_url": "https://github.com/rust-lang/rust/issues/63085", "id": 473762925, "node_id": "MDU6SXNzdWU0NzM3NjI5MjU=", "number": 63085, "title": "Reevaluate Miri engine alignment checks", "user": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 900795185, "node_id": "MDU6TGFiZWw5MDA3OTUxODU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-eval", "name": "A-const-eval", "color": "f7e101", "default": false, "description": "Area: constant evaluation (mir interpretation)"}, {"id": 1244499056, "node_id": "MDU6TGFiZWwxMjQ0NDk5MDU2", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-miri", "name": "A-miri", "color": "f7e101", "default": false, "description": "Area: The miri tool"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-07-28T16:43:06Z", "updated_at": "2022-07-05T04:04:06Z", "closed_at": "2022-07-05T04:04:06Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Two PRs will likely land soon that change the way the Miri engine does alignment checks: https://github.com/rust-lang/rust/pull/63079 and https://github.com/rust-lang/rust/pull/63075.\r\n\r\nThe former entirely disables alignment checks for CTFE (when the Miri engine is used as part of compilation). The latter moves the checking of \"access validity\" of a pointer (non-dangling and aligned) to the moment the pointer is dereferenced (using the `*` operator), as opposed to doing the checks only when a load/store actually happens.\r\n\r\nAs a consequence, the `align` field of `MemPlace` is now effectively dead weight in both instances of the Miri engine. However, Miri might need it again in the future if we decide to relax the rules for dereferencing pointers, which is a discussion I want to have after https://github.com/rust-lang/rfcs/pull/2582. Then we should either remove the `align` field for good, or try to abstract it through the `Machine` trait so that CTFE does not have to carry it. Also see https://github.com/rust-lang/rust/pull/63079#issuecomment-515771406.\r\n\r\nCc @oli-obk ", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63085/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63085/timeline", "performed_via_github_app": null, "state_reason": "completed"}