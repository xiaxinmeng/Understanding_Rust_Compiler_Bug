{"url": "https://api.github.com/repos/rust-lang/rust/issues/2170", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/2170/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/2170/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/2170/events", "html_url": "https://github.com/rust-lang/rust/issues/2170", "id": 4032630, "node_id": "MDU6SXNzdWU0MDMyNjMw", "number": 2170, "title": "Metadata failure with rust-socket crate", "user": {"login": "jdm", "id": 27658, "node_id": "MDQ6VXNlcjI3NjU4", "avatar_url": "https://avatars.githubusercontent.com/u/27658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdm", "html_url": "https://github.com/jdm", "followers_url": "https://api.github.com/users/jdm/followers", "following_url": "https://api.github.com/users/jdm/following{/other_user}", "gists_url": "https://api.github.com/users/jdm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdm/subscriptions", "organizations_url": "https://api.github.com/users/jdm/orgs", "repos_url": "https://api.github.com/users/jdm/repos", "events_url": "https://api.github.com/users/jdm/events{/privacy}", "received_events_url": "https://api.github.com/users/jdm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2012-04-09T17:53:50Z", "updated_at": "2012-04-09T23:46:48Z", "closed_at": "2012-04-09T23:46:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "With the following program:\n\n<pre>\nuse std;\n\nuse socket;\n\nfn main(_argv: [str]) {\n    let r = socket::connect(\"localhost\", 8778u16);\n    assert result::is_success(r);\n}\n</pre>\n\n\nusing git head and the latest version of rust-socket (and a brand new build of rust-socket), the following build error occurs:\n\n<pre>\n#0  upcall_fail (expr=0x102b43d10 \"lookup_item: id not found: 219\", file=0x10121d270 \"../src/rustc/metadata/decoder.rs\", line=94) at ../src/rt/rust_upcall.cpp:130\n#1  0x0000000101193e2d in metadata::decoder::lookup_item::_ae4ebc19fd06e973 ()\n#2  0x0000000101197800 in metadata::decoder::get_type::_b821e92bbbab8deb ()\n#3  0x0000000100ddfc81 in metadata::csearch::get_type::_e145998f90b7383a ()\n#4  0x0000000100c9020e in middle::ty::lookup_item_type::_e145998f90b7383a ()\n#5  0x0000000100cb2a7b in middle::trans::base::lval_static_fn_inner::_253b11969fe12c89 ()\n#6  0x0000000100cb24f5 in middle::trans::base::lval_static_fn::_1641bdcdb9d64476 ()\n#7  0x0000000100cbfd62 in middle::trans::base::trans_var::_cd5da7a6142db0ef ()\n#8  0x0000000100cbfa5a in middle::trans::base::trans_path::_9e5b1d9238121030 ()\n#9  0x0000000100cc2d5a in middle::trans::base::trans_callee::_221dc9838b99ce5d ()\n#10 0x0000000100cd1bf1 in middle::trans::base::trans_call::anon ()\n#11 0x0000000100cdcfe7 in middle::trans::base::trans_call_inner::anon ()\n#12 0x0000000100cdcdbb in middle::trans::base::with_scope::_3582b4999884f977 ()\n#13 0x0000000100c7a9ac in middle::trans::base::trans_call_inner::_9a932468528871fd ()\n#14 0x0000000100cd1aef in middle::trans::base::trans_call::_e9779a3888fb3dde ()\n#15 0x0000000100c7e12c in middle::trans::base::trans_expr::_eb8511f1ac33c8b5 ()\n#16 0x0000000100cedc54 in middle::trans::base::trans_stmt::_31c9f02d66acaa69 ()\n#17 0x0000000100cf2f5d in middle::trans::base::trans_block::anon ()\n#18 0x0000000100c27ae1 in vec::each1700::_557883d14925caad ()\n#19 0x0000000100c8c398 in middle::trans::base::trans_block::_7d22bfc7fc1f12e7 ()\n#20 0x0000000100cf87f6 in middle::trans::base::trans_closure::_0b16740f3fa3e446 ()\n#21 0x0000000100ca4012 in middle::trans::base::trans_fn::_13164c6a77e4231b ()\n#22 0x0000000100caf90f in middle::trans::base::trans_item::_2a91795266df2e26 ()\n#23 0x0000000100c679b5 in middle::trans::base::maybe_instantiate_inline::_774c252178e9f490 ()\n#24 0x0000000100c66cd1 in middle::trans::base::get_res_dtor::_341981d9cb8605f8 ()\n#25 0x0000000100c6b2c1 in middle::trans::base::trans_res_drop::anon ()\n#26 0x0000000100c6af9b in middle::trans::base::with_cond::_cbec446bb311b527 ()\n#27 0x0000000100c66583 in middle::trans::base::trans_res_drop::_532197661512d2f3 ()\n#28 0x0000000100c659a7 in middle::trans::base::make_drop_glue::_3da40e2fced5280d ()\n#29 0x0000000100c5b208 in middle::trans::base::make_generic_glue_inner::_be26965818d8a8a8 ()\n#30 0x0000000100c5b8e1 in middle::trans::base::make_generic_glue::_b6bf5fdd26927559 ()\n#31 0x0000000100c70c83 in middle::trans::base::lazily_emit_tydesc_glue::_ed338a93359bcca7 ()\n#32 0x0000000100c6404a in middle::trans::base::call_tydesc_glue_full::_e168229e1f17080a ()\n#33 0x0000000100c71ec0 in middle::trans::base::call_tydesc_glue::_778bfc96eb69d594 ()\n#34 0x0000000100c0f024 in middle::trans::base::drop_ty::_3f60a5e12f909285 ()\n#35 0x0000000100c638b7 in middle::trans::base::make_free_glue::_3da40e2fced5280d ()\n#36 0x0000000100c5b208 in middle::trans::base::make_generic_glue_inner::_be26965818d8a8a8 ()\n#37 0x0000000100c5b8e1 in middle::trans::base::make_generic_glue::_b6bf5fdd26927559 ()\n#38 0x0000000100c7171f in middle::trans::base::lazily_emit_tydesc_glue::_ed338a93359bcca7 ()\n#39 0x0000000100c6404a in middle::trans::base::call_tydesc_glue_full::_e168229e1f17080a ()\n</pre>\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/2170/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/2170/timeline", "performed_via_github_app": null, "state_reason": "completed"}