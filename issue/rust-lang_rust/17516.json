{"url": "https://api.github.com/repos/rust-lang/rust/issues/17516", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17516/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17516/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17516/events", "html_url": "https://github.com/rust-lang/rust/issues/17516", "id": 43792888, "node_id": "MDU6SXNzdWU0Mzc5Mjg4OA==", "number": 17516, "title": "ICE: This shouldn't happen: failed to lookup structure. item_did = DefId { krate: 0, node: 737 }", "user": {"login": "wizeman", "id": 168610, "node_id": "MDQ6VXNlcjE2ODYxMA==", "avatar_url": "https://avatars.githubusercontent.com/u/168610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wizeman", "html_url": "https://github.com/wizeman", "followers_url": "https://api.github.com/users/wizeman/followers", "following_url": "https://api.github.com/users/wizeman/following{/other_user}", "gists_url": "https://api.github.com/users/wizeman/gists{/gist_id}", "starred_url": "https://api.github.com/users/wizeman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wizeman/subscriptions", "organizations_url": "https://api.github.com/users/wizeman/orgs", "repos_url": "https://api.github.com/users/wizeman/repos", "events_url": "https://api.github.com/users/wizeman/events{/privacy}", "received_events_url": "https://api.github.com/users/wizeman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-09-24T17:35:54Z", "updated_at": "2014-10-25T17:34:13Z", "closed_at": "2014-10-25T17:33:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I have been getting a bunch of similar ICEs, especially when I am doing some refactoring and trying to fix my code.\n\nI am using Linux, x86_64, and rustc from git commit 7fbbfe6bf29b984275c9bc59754e8ec053838781.\n\nHere's an example of one of them:\n\n```\n$ RUST_BACKTRACE=1 rustc -L ../target/deps main.rs\nobjcollection.rs:168:14: 168:25 error: mismatched types: expected `core::cell::RefCell<objcollection::LinkedObj>`, found `objcollection::LinkedObj` (expected struct core::cell::RefCell, found enum objcollection::LinkedObj)\nobjcollection.rs:168             &NextFree(_) => fail!(\"Unexpected NextFree\"),\n                                  ^~~~~~~~~~~\nobjcollection.rs:168:14: 168:25 error: this pattern has 1 field, but the corresponding structure has 4 fields [E0023]\nobjcollection.rs:168             &NextFree(_) => fail!(\"Unexpected NextFree\"),\n                                  ^~~~~~~~~~~\nobjcollection.rs:169:14: 169:21 error: internal compiler error: This shouldn't happen: failed to lookup structure. item_did = DefId { krate: 0, node: 737 }\nobjcollection.rs:169             &ObjLink { prev: _, next: next, obj: ref obj } => {\n                                  ^~~~~~~\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /tmp/nix-build-rustc-0.12.0-pre-8067f4425.drv-0/git-export/src/libsyntax/diagnostic.rs:113\n\nstack backtrace:\n   1:      0x3750b9ed8e0 - rt::backtrace::imp::write::hb43f49fce7beb1aatLq\n   2:      0x3750b9f0aa0 - failure::on_fail::h22407d9177e24a0dV6q\n   3:      0x3750fea16b0 - unwind::begin_unwind_inner::hccf87554b9be8cfdMTd\n   4:      0x3750c79a5b0 - unwind::begin_unwind::h16241318469866014754\n   5:      0x3750c79a530 - diagnostic::SpanHandler::span_bug::h3dd60be0d6974588UgF\n   6:      0x375106bb670 - driver::session::Session::span_bug::h00e036499806337bcYx\n   7:      0x37510a01f90 - middle::typeck::check::_match::check_pat::h50d81d53f1306eb6cxK\n   8:      0x37510a0fc80 - middle::typeck::check::_match::check_pointer_pat::closure.131622\n   9:      0x37510a0f6a0 - middle::typeck::check::_match::check_pointer_pat::hfc7b727c59446c8de2K\n  10:      0x37510a01f90 - middle::typeck::check::_match::check_pat::h50d81d53f1306eb6cxK\n  11:      0x37510a019d0 - middle::typeck::check::_match::check_match::h94a33200312d8c3aW5J\n  12:      0x37510aa1a90 - middle::typeck::check::check_expr_with_unifier::h5fe03141d354ec8254V\n  13:      0x37510a6a1f0 - middle::typeck::check::check_block_with_expected::h73762410016a35559iY\n  14:      0x37510a65380 - middle::typeck::check::check_fn::h21a61f538b867a6eNKS\n  15:      0x37510a65190 - middle::typeck::check::check_bare_fn::hdc35dd07d65b594eQzS\n  16:      0x37510a6e390 - middle::typeck::check::check_method_body::h02e7a7fb245ae3bdciT\n  17:      0x37510a5f0f0 - middle::typeck::check::check_item::hfeaa5abc7f0d4b04v7S\n  18:      0x37510a61670 - visit::walk_item::h14616472043917106165\n  19:      0x37510a64a30 - middle::typeck::check::check_item_types::h5370341132c88d3dOyS\n  20:      0x3751050adf0 - util::common::time::h17461572764150152463\n  21:      0x37510d0d5a0 - middle::typeck::check_crate::h4f22a919f1a465f27Kk\n  22:      0x37510d767c0 - driver::driver::phase_3_run_analysis_passes::h28f4e1217239b40asfx\n  23:      0x37510d71f10 - driver::driver::compile_input::ha3183e753ab6a7fbpWw\n  24:      0x37510df3c60 - driver::run_compiler::hbb1df30c30ec32735LA\n  25:      0x37510df3b40 - driver::main_args::closure.146717\n  26:      0x37510523f20 - task::TaskBuilder<S>::try_future::closure.101905\n  27:      0x37510523d10 - task::TaskBuilder<S>::spawn_internal::closure.101876\n  28:      0x375101f2640 - task::spawn_opts::closure.8490\n  29:      0x3750fef7d20 - rust_try_inner\n  30:      0x3750fef7d10 - rust_try\n  31:      0x3750fe9ecf0 - unwind::try::h7e0dfd10e3257c14uId\n  32:      0x3750fe9eb50 - task::Task::run::h4070d05cff8387c4cYc\n  33:      0x375101f23b0 - task::spawn_opts::closure.8430\n  34:      0x3750fea0740 - thread::thread_start::hd80f5d78936fe74erid\n  35:      0x3750ad97eb0 - start_thread\n  36:      0x3750fb71089 - clone\n  37:                0x0 - <unknown>\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17516/timeline", "performed_via_github_app": null, "state_reason": "completed"}