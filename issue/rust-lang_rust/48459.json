{"url": "https://api.github.com/repos/rust-lang/rust/issues/48459", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/48459/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/48459/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/48459/events", "html_url": "https://github.com/rust-lang/rust/issues/48459", "id": 299603410, "node_id": "MDU6SXNzdWUyOTk2MDM0MTA=", "number": 48459, "title": "Build failure on FreeBSD-CURRENT/aarch64", "user": {"login": "gczuczy", "id": 4352951, "node_id": "MDQ6VXNlcjQzNTI5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4352951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gczuczy", "html_url": "https://github.com/gczuczy", "followers_url": "https://api.github.com/users/gczuczy/followers", "following_url": "https://api.github.com/users/gczuczy/following{/other_user}", "gists_url": "https://api.github.com/users/gczuczy/gists{/gist_id}", "starred_url": "https://api.github.com/users/gczuczy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gczuczy/subscriptions", "organizations_url": "https://api.github.com/users/gczuczy/orgs", "repos_url": "https://api.github.com/users/gczuczy/repos", "events_url": "https://api.github.com/users/gczuczy/events{/privacy}", "received_events_url": "https://api.github.com/users/gczuczy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 55301954, "node_id": "MDU6TGFiZWw1NTMwMTk1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-Arm", "name": "O-Arm", "color": "6e6ec0", "default": false, "description": "Target: 32-bit Arm processors (armv6, armv7, thumb...), including 64-bit Arm in AArch32 state"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 311417404, "node_id": "MDU6TGFiZWwzMTE0MTc0MDQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-freebsd", "name": "O-freebsd", "color": "6e6ec0", "default": false, "description": "Operating system: FreeBSD"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-02-23T05:29:55Z", "updated_at": "2019-03-02T00:22:25Z", "closed_at": "2019-03-02T00:22:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hello,\r\n\r\nI'm trying to build Rust on FreeBSD -CURRENT / aarch64, but I'm getting a build failure (after manually fixing the -march=native stuff, that's not available with clang):\r\n\r\n```\r\n   Compiling syntax_ext v0.0.0 (file:///usr/ports/lang/rust/work/rustc-1.24.0-src/src/libsyntax_ext)\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.23.0 (766bd11c8 2018-01-01) running on aarch64-unknown-freebsd\r\n\r\nthread 'rustc' panicked at 'other was less than the current instant', src/libstd/sys/unix/time.rs:284:16\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n\r\nerror: Could not compile `rustc`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `/usr/ports/lang/rust/work/rustc-1.24.0-src/build/bootstrap/debug/rustc --crate-name rustc src/librustc/lib.rs --error-format json --crate-type dylib --emit=dep-info,link -C prefer-dynamic -C opt-level=2 -C metadata=0e4023cd73b81f18 -C extra-filename=-0e4023cd73b81f18 --out-dir /usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps --target aarch64-unknown-freebsd -L dependency=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps -L dependency=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/release/deps --extern serialize=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libserialize-5c4a770b35d7301c.so --extern serialize=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libserialize-5c4a770b35d7301c.rlib --extern rustc_back=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/librustc_back-e57d34b62838ce95.so --extern rustc_const_math=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/librustc_const_math-31abc7bbf08cf770.so --extern jobserver=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libjobserver-80deaee93ecabf45.rlib --extern bitflags=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libbitflags-59566638c9ff1415.rlib --extern arena=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libarena-000b1a891acd24bf.so --extern log=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/liblog-e8c8481f3bf3f955.rlib --extern rustc_data_structures=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/librustc_data_structures-892d539ff539f47b.so --extern rustc_apfloat=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/librustc_apfloat-ea6c3828ef99f19b.rlib --extern syntax=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libsyntax-49a9760049fea63e.so --extern fmt_macros=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libfmt_macros-4a76d5230d38a606.so --extern graphviz=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libgraphviz-2c9a85200bc4b126.so --extern backtrace=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libbacktrace-55e17f198c3c34f9.rlib --extern rustc_errors=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/librustc_errors-3246924e41422b8b.so --extern byteorder=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libbyteorder-55efc62f6738f0b2.rlib --extern syntax_pos=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libsyntax_pos-9f18feb0a98f6609.so --extern flate2=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/deps/libflate2-5dbea30b4a6382a0.rlib -L native=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/build/backtrace-sys-7dc3515dc554b97d/out/.libs -L native=/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0-rustc/aarch64-unknown-freebsd/release/build/miniz-sys-566067a6ed2393e6/out` (exit code: 101)\r\nthread 'main' panicked at 'command did not execute successfully: \"/usr/ports/lang/rust/work/rustc-1.24.0-src/build/aarch64-unknown-freebsd/stage0/bin/cargo\" \"build\" \"--target\" \"aarch64-unknown-freebsd\" \"--release\" \"--frozen\" \"--features\" \" jemalloc llvm\" \"--manifest-path\" \"/usr/ports/lang/rust/work/rustc-1.24.0-src/src/rustc/Cargo.toml\" \"--message-format\" \"json\"\r\nexpected success, got: exit code: 101', src/bootstrap/compile.rs:886:8\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\nTraceback (most recent call last):\r\n  File \"/usr/ports/lang/rust/work/rustc-1.24.0-src/x.py\", line 20, in <module>\r\n    bootstrap.main()\r\n  File \"/usr/ports/lang/rust/work/rustc-1.24.0-src/src/bootstrap/bootstrap.py\", line 758, in main\r\n    bootstrap()\r\n  File \"/usr/ports/lang/rust/work/rustc-1.24.0-src/src/bootstrap/bootstrap.py\", line 749, in bootstrap\r\n    run(args, env=env, verbose=build.verbose)\r\n  File \"/usr/ports/lang/rust/work/rustc-1.24.0-src/src/bootstrap/bootstrap.py\", line 148, in run\r\n    raise RuntimeError(err)\r\nRuntimeError: failed to run: /usr/ports/lang/rust/work/rustc-1.24.0-src/build/bootstrap/debug/bootstrap build --verbose --config ./config.toml --jobs 4\r\n*** Error code 1\r\n\r\nStop.\r\nmake[1]: stopped in /usr/ports/lang/rust\r\n*** Error code 1\r\n\r\nStop.\r\nmake: stopped in /usr/ports/lang/rust\r\n```\r\n\r\nmake.conf:\r\n```\r\nDEFAULT_VERSIONS+= python=3.6\r\nOPTIONS_UNSET= TEST NLS DOCS EXAMPLES\r\n```\r\noptions set for the port:\r\n```\r\n# This file is auto-generated by 'make config'.\r\n# Options for rust-1.24.0\r\n_OPTIONS_READ=rust-1.24.0\r\n_FILE_COMPLETE_OPTIONS_LIST=DOCS GDB LLNEXTGEN SOURCES\r\nOPTIONS_FILE_UNSET+=DOCS\r\nOPTIONS_FILE_UNSET+=GDB\r\nOPTIONS_FILE_UNSET+=LLNEXTGEN\r\nOPTIONS_FILE_UNSET+=SOURCES\r\n```\r\nAnd the exact OS version:\r\n```\r\nFreeBSD build-pine64.bealak.harmless.hu 12.0-CURRENT FreeBSD 12.0-CURRENT #0 r328533M: Mon Jan 29 15:43:25 CET 2018     toor@marvin.harmless.hu:/tank/rpi3/crochet/work.pine64vanilla/obj/tank/rpi3/src/arm64.aarch64/sys/GENERIC-NODEBUG  arm64\r\n```\r\n\r\nFYI it's after the clang 6 import:\r\n```\r\n# cc -v\r\nFreeBSD clang version 6.0.0 (branches/release_60 323338) (based on LLVM 6.0.0)\r\nTarget: aarch64-unknown-freebsd12.0\r\nThread model: posix\r\nInstalledDir: /usr/bin\r\n```\r\n\r\nAnd the FreeBSD PR: https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=225643\r\n\r\nCould you please take a look into it and try to fix it?\r\n\r\nThanks,\r\nGergely\r\n", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/48459/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/48459/timeline", "performed_via_github_app": null, "state_reason": "completed"}