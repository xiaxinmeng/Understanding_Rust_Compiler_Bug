{"url": "https://api.github.com/repos/rust-lang/rust/issues/84428", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/84428/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/84428/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/84428/events", "html_url": "https://github.com/rust-lang/rust/issues/84428", "id": 864755424, "node_id": "MDU6SXNzdWU4NjQ3NTU0MjQ=", "number": 84428, "title": "rental future compat warning", "user": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2079070889, "node_id": "MDU6TGFiZWwyMDc5MDcwODg5", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-proc-macros", "name": "A-proc-macros", "color": "f7e101", "default": false, "description": "Area: Procedural macros"}, {"id": 2472368617, "node_id": "MDU6TGFiZWwyNDcyMzY4NjE3", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-proc-macro-back-compat", "name": "A-proc-macro-back-compat", "color": "f7e101", "default": false, "description": "Area: Backwards compatibility hacks for proc macros -s"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2021-04-22T09:46:06Z", "updated_at": "2021-12-14T12:36:19Z", "closed_at": "2021-12-14T11:36:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "If I clone rental and run `cargo +beta test` on it, I get t he following warning:\r\n<pre class=\"terminal\">\r\n<span class=\"shell\">&gt; </span><span class=\"cmd\">cargo</span> <span class=\"arg\">+beta</span> <span class=\"arg\">check</span>\r\n<b><span style='color:#a50'>warning</span>: using `procedural-masquerade` crate</b>\r\n   <b><span style='color:#55f'>--&gt; </span></b>src/lib.rs:94:8\r\n    <b><span style='color:#55f'>|</span></b>\r\n<b><span style='color:#55f'>94</span></b>  <b><span style='color:#55f'>| </span></b>        enum ProceduralMasqueradeDummyType {\r\n    <b><span style='color:#55f'>| </span></b>             <b><span style='color:#a50'>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></b>\r\n<b><span style='color:#55f'>...</span></b>\r\n<b><span style='color:#55f'>117</span></b> <b><span style='color:#55f'>| </span></b>    define_rental_traits!(32);\r\n    <b><span style='color:#55f'>| </span></b>    <b><span style='color:#55f'>--------------------------</span></b> <b><span style='color:#55f'>in this macro invocation</span></b>\r\n    <b><span style='color:#55f'>|</span></b>\r\n    <b><span style='color:#55f'>= </span>note</b>: `#[warn(proc_macro_back_compat)]` on by default\r\n    <b><span style='color:#55f'>= </span>warning</b>: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\r\n    <b><span style='color:#55f'>= </span>note</b>: for more information, see issue #83125 &lt;https://github.com/rust-lang/rust/issues/83125&gt;\r\n    <b><span style='color:#55f'>= </span>note</b>: The `procedural-masquerade` crate has been unnecessary since Rust 1.30.0. Versions of this crate below 0.1.7 will eventually stop compiling.\r\n    <b><span style='color:#55f'>= </span>note</b>: this warning originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n</pre>\r\n\r\nThis also occurs in crates that use rental, e.g. [one of glium's examples](https://github.com/glium/glium/issues/1922).\r\n\r\ncc #83125 (tracking issue)\r\n\r\nThe warning itself has been added by PR #83168, whose justification was that the `procedural-masquerade` crate sees little use anyways. And indeed, on crates.io it \"only\" has `27,419` recent downloads. Rental on the other hand has `193,341` recent downloads, or almost 10 times as many. Furthermore, you can fix the warning on your side by just removing use of that crate as it's become redundant. Rental on the other hand is not redundant, so your only option is to switch to an alternative, which might be expensive.\r\n\r\nI would approach fixing of this issue with the following steps:\r\n\r\n- [x] Fixing the issue in rental, releasing a new version with the fix. This help from the maintainer. cc @jpernst\r\n- [ ] Improvement of the error message to include rental:  #85387\r\n\r\ncc @Aaron1011 @petrochenkov", "closed_by": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/84428/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/84428/timeline", "performed_via_github_app": null, "state_reason": "completed"}