{"url": "https://api.github.com/repos/rust-lang/rust/issues/101125", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101125/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101125/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101125/events", "html_url": "https://github.com/rust-lang/rust/issues/101125", "id": 1353345025, "node_id": "I_kwDOAAsO6M5QqmgB", "number": 101125, "title": "Trait not implemented for X where X is one of the \"other types implement trait\"", "user": {"login": "WalterSmuts", "id": 17950515, "node_id": "MDQ6VXNlcjE3OTUwNTE1", "avatar_url": "https://avatars.githubusercontent.com/u/17950515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WalterSmuts", "html_url": "https://github.com/WalterSmuts", "followers_url": "https://api.github.com/users/WalterSmuts/followers", "following_url": "https://api.github.com/users/WalterSmuts/following{/other_user}", "gists_url": "https://api.github.com/users/WalterSmuts/gists{/gist_id}", "starred_url": "https://api.github.com/users/WalterSmuts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WalterSmuts/subscriptions", "organizations_url": "https://api.github.com/users/WalterSmuts/orgs", "repos_url": "https://api.github.com/users/WalterSmuts/repos", "events_url": "https://api.github.com/users/WalterSmuts/events{/privacy}", "received_events_url": "https://api.github.com/users/WalterSmuts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-28T12:52:03Z", "updated_at": "2023-04-05T17:43:25Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "### Description\r\nCode that works in a `#[test]` does not seem to work when consuming the library. I've double checked for anything that wasn't exported in the library code that the test had access to and can't seem to find anything. For easy replication I pushed [this branch](https://github.com/WalterSmuts/constfft/tree/example-compilation) where the final commit shows adding both a `#[test]` and a `examples/same_as_test.rs` file that contains exactly the same code where one passes compilation and one fails.\r\n\r\n### Note\r\nThis requires the `nightly` compiler since the crate is making use of `generic_const_exprs`. \r\n\r\nI tried this code:\r\n```rust\r\nfn main() {\r\n    same_as_example()\r\n}\r\n\r\nfn same_as_example() {\r\n    use constfft::RealFft;\r\n    use constfft::RealIfft;\r\n    [1.0_f64; 3].real_fft().real_ifft();\r\n}\r\n```\r\n\r\nI expected the compiler to successfully compile.\r\n\r\nInstead, the compiler produced the following error:\r\n```\r\nerror[E0277]: the trait bound `RealDft<f64, 2, constfft::Odd>: RealIfft<f64, 2, _>` is not satisfied\r\n --> examples/same_as_test.rs:8:29\r\n  |\r\n8 |     [1.0_f64; 3].real_fft().real_ifft();\r\n  |                             ^^^^^^^^^ the trait `RealIfft<f64, 2, _>` is not implemented for `RealDft<f64, 2, constfft::Odd>`\r\n  |\r\n  = help: the following other types implement trait `RealIfft<T, SIZE, OUTPUT_SIZE>`:\r\n            RealDft<T, SIZE, constfft::Even>\r\n            RealDft<T, SIZE, constfft::Odd>\r\n```\r\n\r\n### Meta\r\n`rustc --version --verbose`:\r\n```\r\n$ rustc --version --verbose\r\nrustc 1.64.0-nightly (848090dcd 2022-07-22)\r\nbinary: rustc\r\ncommit-hash: 848090dcd18553b790461132ca9d2a020aeea9a2\r\ncommit-date: 2022-07-22\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.64.0-nightly\r\nLLVM version: 14.0.6\r\n```\r\nand also tried:\r\n```\r\n$ rustc --version --verbose\r\nrustc 1.65.0-nightly (eaadb8947 2022-08-27)\r\nbinary: rustc\r\ncommit-hash: eaadb8947b850a025404082f6297766c4680a42a\r\ncommit-date: 2022-08-27\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.65.0-nightly\r\nLLVM version: 15.0.0\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101125/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101125/timeline", "performed_via_github_app": null, "state_reason": null}