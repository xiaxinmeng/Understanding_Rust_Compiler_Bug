{"url": "https://api.github.com/repos/rust-lang/rust/issues/37113", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37113/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37113/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37113/events", "html_url": "https://github.com/rust-lang/rust/issues/37113", "id": 182559333, "node_id": "MDU6SXNzdWUxODI1NTkzMzM=", "number": 37113, "title": "rustc runs out of memory when compiling an invalid macro", "user": {"login": "jbendig", "id": 413530, "node_id": "MDQ6VXNlcjQxMzUzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/413530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbendig", "html_url": "https://github.com/jbendig", "followers_url": "https://api.github.com/users/jbendig/followers", "following_url": "https://api.github.com/users/jbendig/following{/other_user}", "gists_url": "https://api.github.com/users/jbendig/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbendig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbendig/subscriptions", "organizations_url": "https://api.github.com/users/jbendig/orgs", "repos_url": "https://api.github.com/users/jbendig/repos", "events_url": "https://api.github.com/users/jbendig/events{/privacy}", "received_events_url": "https://api.github.com/users/jbendig/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2016-10-12T15:37:57Z", "updated_at": "2016-10-27T17:37:13Z", "closed_at": "2016-10-27T17:37:13Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiling this invalid macro code with rustc causes all system memory to be used up until the process is killed.\n\n``` rust\nmacro_rules! test_macro {\n    ( $( $t:ty ),* $(),*) => {\n        enum SomeEnum {\n            $( $t, )*\n        };\n    };\n}\n\nfn main() {\n    test_macro!(String,);\n}\n```\n\nI expected rustc to display an error message and return immediately. Instead, an error message is reported and then rustc hangs and eats up all available system memory.\n\nI tried both stable and nightly:\n- stable-x86_64-unknown-linux-gnu - rustc 1.12.0 (3191fbae9 2016-09-23)\n- nightly-x86_64-unknown-linux-gnu - rustc 1.14.0-nightly (a3bc191b5 2016-10-10)\n\nI think this might be related to #33136.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37113/timeline", "performed_via_github_app": null, "state_reason": "completed"}