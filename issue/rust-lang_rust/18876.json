{"url": "https://api.github.com/repos/rust-lang/rust/issues/18876", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18876/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18876/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18876/events", "html_url": "https://github.com/rust-lang/rust/issues/18876", "id": 48408616, "node_id": "MDU6SXNzdWU0ODQwODYxNg==", "number": 18876, "title": "Possibly bad example in documentation for 'unreachable!()'", "user": {"login": "thecoshman", "id": 4427990, "node_id": "MDQ6VXNlcjQ0Mjc5OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/4427990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thecoshman", "html_url": "https://github.com/thecoshman", "followers_url": "https://api.github.com/users/thecoshman/followers", "following_url": "https://api.github.com/users/thecoshman/following{/other_user}", "gists_url": "https://api.github.com/users/thecoshman/gists{/gist_id}", "starred_url": "https://api.github.com/users/thecoshman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thecoshman/subscriptions", "organizations_url": "https://api.github.com/users/thecoshman/orgs", "repos_url": "https://api.github.com/users/thecoshman/repos", "events_url": "https://api.github.com/users/thecoshman/events{/privacy}", "received_events_url": "https://api.github.com/users/thecoshman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-11-11T17:13:46Z", "updated_at": "2014-11-27T06:36:03Z", "closed_at": "2014-11-27T06:36:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "At present, the documentation for `unreachable!()` has an example where you could not argue that the 'unreachable' code is indeed unreachable:\n\n```\nstruct Item { weight: uint }\n\nfn choose_weighted_item(v: &[Item]) -> Item {\n    assert!(!v.is_empty());\n    let mut so_far = 0u;\n    for item in v.iter() {\n        so_far += item.weight;\n        if so_far > 100 {\n            return *item;\n        }\n    }\n    // The above loop always returns, so we must hint to the\n    // type checker that it isn't possible to get down here\n    unreachable!();\n}\n```\n\nI would argue a better example would see a loop more like:\n\n```\nfn get_at_lest_100(){\n    loop {\n        sum += some_function_that_returns_unsigned_numbers();\n        if sum > 100 { return sum; } \n    }\n    unreachable!();\n}\n```\n\nPerhaps I am miss understanding the purpose of this macro, in the example I provided here, is the compiler able to determine that the loop will keep going until eventually the `return sum;` is executed, and thus there is no need for the `unreachable();`. In which case, I think the documentation should make it clear that in such situations the macro is not required.\n\nI'd argue it is as important to know where not to use this macro as it is when to use it.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18876/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18876/timeline", "performed_via_github_app": null, "state_reason": "completed"}