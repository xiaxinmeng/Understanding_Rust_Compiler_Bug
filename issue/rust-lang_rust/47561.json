{"url": "https://api.github.com/repos/rust-lang/rust/issues/47561", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47561/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47561/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47561/events", "html_url": "https://github.com/rust-lang/rust/issues/47561", "id": 289826964, "node_id": "MDU6SXNzdWUyODk4MjY5NjQ=", "number": 47561, "title": "Performance regressions of compiled code over the last year", "user": {"login": "Marwes", "id": 957312, "node_id": "MDQ6VXNlcjk1NzMxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/957312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Marwes", "html_url": "https://github.com/Marwes", "followers_url": "https://api.github.com/users/Marwes/followers", "following_url": "https://api.github.com/users/Marwes/following{/other_user}", "gists_url": "https://api.github.com/users/Marwes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Marwes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Marwes/subscriptions", "organizations_url": "https://api.github.com/users/Marwes/orgs", "repos_url": "https://api.github.com/users/Marwes/repos", "events_url": "https://api.github.com/users/Marwes/events{/privacy}", "received_events_url": "https://api.github.com/users/Marwes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 630810559, "node_id": "MDU6TGFiZWw2MzA4MTA1NTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-libtest", "name": "A-libtest", "color": "f7e101", "default": false, "description": "Area: #[test] related"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2018-01-19T00:48:25Z", "updated_at": "2022-10-17T16:05:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Started on an update to https://github.com/Marwes/combine after it being dormant for a while. When I ran the benchmarks to check that my changes hadn't regressed the performance I noticed that performance had regressed by ~28% (~116% with incremental compilation!) since the last time ran benchmarks (somewhere around September 2016).\r\n\r\nI ran the benchmarks again against an old version of the library to be able to compile it with older rustc's but the regression is the same in the master branch as well.\r\n\r\n## `cargo bench --bench http` against https://github.com/Marwes/combine/tree/v2.3.2\r\n\r\n### cargo-0.18.0-nightly (a73a665 2017-02-14)\r\n```\r\ntest http_requests_large ... bench:     439,961 ns/iter (+/- 30,684)\r\ntest http_requests_small ... bench:      87,508 ns/iter (+/- 5,173)\r\n```\r\n\r\n### rustc 1.19.0-nightly (554c685b0 2017-06-14)\r\n```\r\ntest http_requests_large ... bench:     475,989 ns/iter (+/- 10,477)\r\ntest http_requests_small ... bench:      95,175 ns/iter (+/- 23,751)\r\n```\r\n\r\n### rustc 1.22.0-nightly (368122087 2017-09-06)\r\n```\r\ntest http_requests_large ... bench:     494,088 ns/iter (+/- 27,462)\r\ntest http_requests_small ... bench:     102,798 ns/iter (+/- 67,446)\r\n```\r\n\r\n### rustc 1.25.0-nightly (6828cf901 2018-01-06) (CARGO_INCREMENTAL=0)\r\n```\r\ntest http_requests_large ... bench:     551,065 ns/iter (+/- 420,621)\r\ntest http_requests_small ... bench:     112,375 ns/iter (+/- 2,098)\r\n```\r\n\r\n### rustc 1.25.0-nightly (6828cf901 2018-01-06) (CARGO_INCREMENTAL=1)\r\n```\r\ntest http_requests_large ... bench:   1,001,847 ns/iter (+/- 40,639)\r\ntest http_requests_small ... bench:     188,091 ns/iter (+/- 1,958)\r\n```\r\n\r\nI'd like to bisect this further but the two tools I found for this do not appear to work in this case, is there any other tool that can be used for this?\r\n\r\nhttps://github.com/kamalmarhubi/rust-bisect (Outdated)\r\nhttps://github.com/Mark-Simulacrum/bisect-rust/tree/master/src (Only last 90 days)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47561/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47561/timeline", "performed_via_github_app": null, "state_reason": null}