{"url": "https://api.github.com/repos/rust-lang/rust/issues/8689", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8689/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8689/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8689/events", "html_url": "https://github.com/rust-lang/rust/issues/8689", "id": 18443026, "node_id": "MDU6SXNzdWUxODQ0MzAyNg==", "number": 8689, "title": "Separate the action of starting a TCP listener from the action of waiting to accept the first incoming connection.", "user": {"login": "anasazi", "id": 591682, "node_id": "MDQ6VXNlcjU5MTY4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/591682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anasazi", "html_url": "https://github.com/anasazi", "followers_url": "https://api.github.com/users/anasazi/followers", "following_url": "https://api.github.com/users/anasazi/following{/other_user}", "gists_url": "https://api.github.com/users/anasazi/gists{/gist_id}", "starred_url": "https://api.github.com/users/anasazi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anasazi/subscriptions", "organizations_url": "https://api.github.com/users/anasazi/orgs", "repos_url": "https://api.github.com/users/anasazi/repos", "events_url": "https://api.github.com/users/anasazi/events{/privacy}", "received_events_url": "https://api.github.com/users/anasazi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-08-22T22:02:31Z", "updated_at": "2018-11-03T02:34:26Z", "closed_at": "2013-09-03T23:01:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently we do not start listening on a TCP socket until we call .accept() for the first time (at which point we block until there is an incoming connection). This makes it difficult to test TCP code in a multithreaded environment since we cannot guarantee that the server is up and running before attempting to connect without having the client spin on connection attempts.\n\nI would like to move to this alternative interface:\n\nTcpListener.listen() consumes the TcpListener and returns a TcpAcceptor.\nTcpAcceptor.accept() replicates the current behavior of TcpListener.accept() (blocks and returns a Result).\nTcpAcceptor will implement Iterator and produce an infinite stream of incoming connections. \nThe socket will be closed when the TcpAcceptor goes out of scope.\n\nThe libuv listener takes the backlog size as a parameter. Currently, we hardcode this to 128, but we could make it a argument of TcpListener.listen() and provide a default.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8689/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8689/timeline", "performed_via_github_app": null, "state_reason": "completed"}