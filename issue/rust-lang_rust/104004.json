{"url": "https://api.github.com/repos/rust-lang/rust/issues/104004", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104004/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104004/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104004/events", "html_url": "https://github.com/rust-lang/rust/issues/104004", "id": 1437032903, "node_id": "I_kwDOAAsO6M5Vp2HH", "number": 104004, "title": "Compiling errors when trying to build-std ", "user": {"login": "Degra02", "id": 80328248, "node_id": "MDQ6VXNlcjgwMzI4MjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/80328248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Degra02", "html_url": "https://github.com/Degra02", "followers_url": "https://api.github.com/users/Degra02/followers", "following_url": "https://api.github.com/users/Degra02/following{/other_user}", "gists_url": "https://api.github.com/users/Degra02/gists{/gist_id}", "starred_url": "https://api.github.com/users/Degra02/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Degra02/subscriptions", "organizations_url": "https://api.github.com/users/Degra02/orgs", "repos_url": "https://api.github.com/users/Degra02/repos", "events_url": "https://api.github.com/users/Degra02/events{/privacy}", "received_events_url": "https://api.github.com/users/Degra02/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-11-05T13:30:12Z", "updated_at": "2022-11-06T13:34:35Z", "closed_at": "2022-11-06T13:34:35Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi, I'm trying to recompile the std for the \"x86_64-unknown-none\" target, but I'm getting some code-related errors at compile time:\r\nHere's the command I run with the associated output:\r\n\r\n```bash\r\nrustup run nightly cargo build -Zbuild-std --target x86_64-unknown-none  \r\n\r\nCompiling compiler_builtins v0.1.79\r\n   Compiling core v0.0.0 (/usr/lib/rustlib/src/rust/library/core)\r\n   Compiling libc v0.2.131\r\n   Compiling cc v1.0.73\r\n   Compiling memchr v2.5.0\r\n   Compiling std v0.0.0 (/usr/lib/rustlib/src/rust/library/std)\r\n   Compiling unwind v0.0.0 (/usr/lib/rustlib/src/rust/library/unwind)\r\n   Compiling rustc-std-workspace-core v1.99.0 (/usr/lib/rustlib/src/rust/library/rustc-std-workspace-core)\r\n   Compiling alloc v0.0.0 (/usr/lib/rustlib/src/rust/library/alloc)\r\n   Compiling cfg-if v0.1.10\r\n   Compiling adler v0.2.3\r\n   Compiling rustc-demangle v0.1.21\r\n   Compiling rustc-std-workspace-alloc v1.99.0 (/usr/lib/rustlib/src/rust/library/rustc-std-workspace-alloc)\r\n   Compiling panic_abort v0.0.0 (/usr/lib/rustlib/src/rust/library/panic_abort)\r\n   Compiling panic_unwind v0.0.0 (/usr/lib/rustlib/src/rust/library/panic_unwind)\r\n   Compiling gimli v0.25.0\r\n   Compiling miniz_oxide v0.4.0\r\n   Compiling hashbrown v0.12.3\r\n   Compiling std_detect v0.1.5 (/usr/lib/rustlib/src/rust/library/stdarch/crates/std_detect)\r\n   Compiling object v0.26.2\r\n   Compiling addr2line v0.16.0\r\nerror: `sys_common::condvar::Condvar::new` is not yet stable as a const fn\r\n   --> /usr/lib/rustlib/src/rust/library/std/src/sync/condvar.rs:129:26\r\n    |\r\n129 |         Condvar { inner: sys::Condvar::new() }\r\n    |                          ^^^^^^^^^^^^^^^^^^^\r\n    |\r\n    = help: const-stable functions can only call other const-stable functions\r\n\r\nerror: `sys_common::mutex::MovableMutex::new` is not yet stable as a const fn\r\n   --> /usr/lib/rustlib/src/rust/library/std/src/sync/mutex.rs:221:20\r\n    |\r\n221 |             inner: sys::MovableMutex::new(),\r\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^\r\n    |\r\n    = help: const-stable functions can only call other const-stable functions\r\n\r\nerror: `sys_common::rwlock::MovableRwLock::new` is not yet stable as a const fn\r\n   --> /usr/lib/rustlib/src/rust/library/std/src/sync/rwlock.rs:161:20\r\n    |\r\n161 |             inner: sys::MovableRwLock::new(),\r\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    |\r\n    = help: const-stable functions can only call other const-stable functions\r\n\r\nerror: could not compile `std` due to 3 previous errors\r\n```\r\n\r\nHere's the output of `rustup show`\r\n```bash\r\nDefault host: x86_64-unknown-linux-gnu\r\nrustup home:  /home/degra/.rustup\r\n\r\ninstalled toolchains\r\n--------------------\r\n\r\nstable-x86_64-unknown-linux-gnu (default)\r\nnightly-x86_64-unknown-linux-gnu\r\n\r\ninstalled targets for active toolchain\r\n--------------------------------------\r\n\r\nx86_64-unknown-linux-gnu\r\nx86_64-unknown-none\r\n\r\nactive toolchain\r\n----------------\r\n\r\nnightly-x86_64-unknown-linux-gnu (directory override for '/home/degra/Coding/Rust/degros')\r\nrustc 1.67.0-nightly (09508489e 2022-11-04)\r\n```\r\n", "closed_by": {"login": "Degra02", "id": 80328248, "node_id": "MDQ6VXNlcjgwMzI4MjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/80328248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Degra02", "html_url": "https://github.com/Degra02", "followers_url": "https://api.github.com/users/Degra02/followers", "following_url": "https://api.github.com/users/Degra02/following{/other_user}", "gists_url": "https://api.github.com/users/Degra02/gists{/gist_id}", "starred_url": "https://api.github.com/users/Degra02/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Degra02/subscriptions", "organizations_url": "https://api.github.com/users/Degra02/orgs", "repos_url": "https://api.github.com/users/Degra02/repos", "events_url": "https://api.github.com/users/Degra02/events{/privacy}", "received_events_url": "https://api.github.com/users/Degra02/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104004/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104004/timeline", "performed_via_github_app": null, "state_reason": "completed"}