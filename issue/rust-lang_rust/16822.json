{"url": "https://api.github.com/repos/rust-lang/rust/issues/16822", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16822/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16822/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16822/events", "html_url": "https://github.com/rust-lang/rust/issues/16822", "id": 41406143, "node_id": "MDU6SXNzdWU0MTQwNjE0Mw==", "number": 16822, "title": "compiler error", "user": {"login": "arturoc", "id": 48240, "node_id": "MDQ6VXNlcjQ4MjQw", "avatar_url": "https://avatars.githubusercontent.com/u/48240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arturoc", "html_url": "https://github.com/arturoc", "followers_url": "https://api.github.com/users/arturoc/followers", "following_url": "https://api.github.com/users/arturoc/following{/other_user}", "gists_url": "https://api.github.com/users/arturoc/gists{/gist_id}", "starred_url": "https://api.github.com/users/arturoc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arturoc/subscriptions", "organizations_url": "https://api.github.com/users/arturoc/orgs", "repos_url": "https://api.github.com/users/arturoc/repos", "events_url": "https://api.github.com/users/arturoc/events{/privacy}", "received_events_url": "https://api.github.com/users/arturoc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-08-28T15:53:13Z", "updated_at": "2014-12-18T14:32:15Z", "closed_at": "2014-12-18T14:32:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "just updated rust to latest master and while trying to compile a program that was working before i'm getting:\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'assertion failed: `(left == right) && (right == left)` (left: `12`, right: `0`)', /home/arturo/Code/rust/src/librustc/middle/ty.rs:2481\n```\n\nthe code is rather large, i have tried to reproduce the error in a smaller example but can't find exactly where's the problem, it seems to be related with doing a borrow_mut() on a RefCell but as i said it doesn't happen on a smaller test\n\nthis is the backtrace:\n\n```\nstack backtrace:\n   1:     0x2b92ca1e5630 - rt::backtrace::imp::write::h8e9eb4c0a425b5a5c0q\n   2:     0x2b92ca1e8820 - failure::on_fail::h4325ba604d2e06acTlr\n   3:     0x2b92c5d5c980 - unwind::begin_unwind_inner::h58dc61866064edc9Zie\n   4:     0x2b92c5d5c620 - unwind::begin_unwind_fmt::hd2c2fac189295ad0pge\n   5:     0x2b92c4ca3dd0 - middle::ty::type_contents::tc_ty::h25a65baa252c658f7yF\n   6:     0x2b92c4ca3dd0 - middle::ty::type_contents::tc_ty::h25a65baa252c658f7yF\n   7:     0x2b92c49f44d0 - middle::ty::type_contents::h9b457050afb365782xF\n   8:     0x2b92c4c331b0 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::delegate_consume::h8962338896925635098\n   9:     0x2b92c4c33810 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::consume_expr::h8571352652834906512\n  10:     0x2b92c4c2d4a0 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::walk_expr::h4231890686328975281\n  11:     0x2b92c4c33810 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::consume_expr::h8571352652834906512\n  12:     0x2b92c4c339e0 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::walk_block::h4782883345545531812\n  13:     0x2b92c4c2d4a0 - middle::expr_use_visitor::ExprUseVisitor<'d, 't, TYPER>::walk_expr::h4231890686328975281\n  14:     0x2b92c4c37f50 - middle::trans::_match::create_bindings_map::h7016d3b670778ad74Th\n  15:     0x2b92c4baf510 - middle::trans::_match::trans_match::hb6674054b0332fc8IPh\n  16:     0x2b92c4b9a810 - middle::trans::expr::trans_rvalue_dps_unadjusted::h4885403a65bbadd16Q3\n  17:     0x2b92c4b54980 - middle::trans::expr::trans_into::h5fa2aa27ba5f38abIs2\n  18:     0x2b92c4b54f20 - middle::trans::controlflow::trans_block::hcf633bc09a595155wmY\n  19:     0x2b92c4c0a8e0 - middle::trans::base::trans_closure::h6af85961afc5e10fvye\n  20:     0x2b92c4b45950 - middle::trans::base::trans_fn::ha71ddc353381e3f5iKe\n  21:     0x2b92c4b45fa0 - middle::trans::monomorphize::monomorphic_fn::hdc6c7b4578f922f8uJX\n  22:     0x2b92c4b80bf0 - middle::trans::callee::trans_fn_ref_with_vtables::h98854ce341dfbb4ald1\n  23:     0x2b92c4b7e2c0 - middle::trans::callee::trans_fn_ref::h1ee105fae6943b76tZ0\n  24:     0x2b92c4ba38a0 - middle::trans::expr::trans_def::hdd427d1cdf1a3c95vH3\n  25:     0x2b92c4b998b0 - middle::trans::expr::trans_unadjusted::h0e3e3a0f0810cd7eFh3\n  26:     0x2b92c4b56150 - middle::trans::expr::trans::hb5d2106e56480123Ew2\n  27:     0x2b92c4b91c60 - middle::trans::callee::trans_args::h64bca7f588848043aZ1\n  28:     0x2b92c4b5e170 - middle::trans::callee::trans_call_inner::hde6eb414bb58985daE1\n  29:     0x2b92c4b8c5f0 - middle::trans::callee::trans_method_call::h7e39c5fba92b93feoz1\n  30:     0x2b92c4b9a810 - middle::trans::expr::trans_rvalue_dps_unadjusted::h4885403a65bbadd16Q3\n  31:     0x2b92c4b54980 - middle::trans::expr::trans_into::h5fa2aa27ba5f38abIs2\n  32:     0x2b92c4b53e30 - middle::trans::controlflow::trans_stmt_semi::h1da7aaaee12528e9ClY\n  33:     0x2b92c4b53500 - middle::trans::controlflow::trans_stmt::he615239a63278692lhY\n  34:     0x2b92c4b54f20 - middle::trans::controlflow::trans_block::hcf633bc09a595155wmY\n  35:     0x2b92c4c0a8e0 - middle::trans::base::trans_closure::h6af85961afc5e10fvye\n  36:     0x2b92c4b45950 - middle::trans::base::trans_fn::ha71ddc353381e3f5iKe\n  37:     0x2b92c4b45fa0 - middle::trans::monomorphize::monomorphic_fn::hdc6c7b4578f922f8uJX\n  38:     0x2b92c4b80bf0 - middle::trans::callee::trans_fn_ref_with_vtables::h98854ce341dfbb4ald1\n  39:     0x2b92c4b7e2c0 - middle::trans::callee::trans_fn_ref::h1ee105fae6943b76tZ0\n  40:     0x2b92c4b8bc50 - middle::trans::callee::trans_call::closure.115680\n  41:     0x2b92c4b5e170 - middle::trans::callee::trans_call_inner::hde6eb414bb58985daE1\n  42:     0x2b92c4b8b9e0 - middle::trans::callee::trans_call::h0243a778d0717798fy1\n  43:     0x2b92c4b9a810 - middle::trans::expr::trans_rvalue_dps_unadjusted::h4885403a65bbadd16Q3\n  44:     0x2b92c4b998b0 - middle::trans::expr::trans_unadjusted::h0e3e3a0f0810cd7eFh3\n  45:     0x2b92c4b56150 - middle::trans::expr::trans::hb5d2106e56480123Ew2\n  46:     0x2b92c4b91c60 - middle::trans::callee::trans_args::h64bca7f588848043aZ1\n  47:     0x2b92c4b5e170 - middle::trans::callee::trans_call_inner::hde6eb414bb58985daE1\n  48:     0x2b92c4b8c5f0 - middle::trans::callee::trans_method_call::h7e39c5fba92b93feoz1\n  49:     0x2b92c4b9a810 - middle::trans::expr::trans_rvalue_dps_unadjusted::h4885403a65bbadd16Q3\n  50:     0x2b92c4b54980 - middle::trans::expr::trans_into::h5fa2aa27ba5f38abIs2\n  51:     0x2b92c4b53e30 - middle::trans::controlflow::trans_stmt_semi::h1da7aaaee12528e9ClY\n  52:     0x2b92c4b53500 - middle::trans::controlflow::trans_stmt::he615239a63278692lhY\n  53:     0x2b92c4b54f20 - middle::trans::controlflow::trans_block::hcf633bc09a595155wmY\n  54:     0x2b92c4b55250 - middle::trans::controlflow::trans_if::h456ce55c98d730614oY\n  55:     0x2b92c4b9a810 - middle::trans::expr::trans_rvalue_dps_unadjusted::h4885403a65bbadd16Q3\n  56:     0x2b92c4b54980 - middle::trans::expr::trans_into::h5fa2aa27ba5f38abIs2\n  57:     0x2b92c4b53e30 - middle::trans::controlflow::trans_stmt_semi::h1da7aaaee12528e9ClY\n  58:     0x2b92c4b53500 - middle::trans::controlflow::trans_stmt::he615239a63278692lhY\n  59:     0x2b92c4b54f20 - middle::trans::controlflow::trans_block::hcf633bc09a595155wmY\n  60:     0x2b92c4c0a8e0 - middle::trans::base::trans_closure::h6af85961afc5e10fvye\n  61:     0x2b92c4b45950 - middle::trans::base::trans_fn::ha71ddc353381e3f5iKe\n  62:     0x2b92c4b40c90 - middle::trans::base::trans_item::hd7d78d670c61d953i2e\n  63:     0x2b92c4c155b0 - middle::trans::base::trans_crate::hecf431b91ee08b4bJWf\n  64:     0x2b92c4fe6eb0 - driver::driver::phase_4_translate_to_llvm::hcdd287bb9dda01e3pzy\n  65:     0x2b92c4fde860 - driver::driver::compile_input::h48de06e93da98f07Qby\n  66:     0x2b92c5070680 - driver::run_compiler::h8615fa3184fda61cJIB\n  67:     0x2b92c5070590 - driver::main_args::closure.138206\n  68:     0x2b92c5082820 - task::TaskBuilder<S>::try_future::closure.139324\n  69:     0x2b92c5082620 - task::TaskBuilder<S>::spawn_internal::closure.139301\n  70:     0x2b92c5abc660 - task::spawn_opts::closure.8369\n  71:     0x2b92c5db57c0 - rust_try_inner\n  72:     0x2b92c5db57b0 - rust_try\n  73:     0x2b92c5d59fb0 - unwind::try::h188e044e161bf4e2f7d\n  74:     0x2b92c5d59d70 - task::Task::run::hcf0d8d6cf4337bfazdd\n  75:     0x2b92c5abc3c0 - task::spawn_opts::closure.8315\n  76:     0x2b92c5d5bb70 - thread::thread_start::h0fac7ed375094744lCd\n  77:     0x2b92caf8d0c0 - start_thread\n  78:     0x2b92c6177359 - __clone\n  79:                0x0 - <unknown>\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16822/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16822/timeline", "performed_via_github_app": null, "state_reason": "completed"}