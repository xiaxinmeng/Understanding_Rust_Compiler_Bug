{"url": "https://api.github.com/repos/rust-lang/rust/issues/24568", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24568/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24568/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24568/events", "html_url": "https://github.com/rust-lang/rust/issues/24568", "id": 69343094, "node_id": "MDU6SXNzdWU2OTM0MzA5NA==", "number": 24568, "title": "Bad error message on returning match with incompatible match arms", "user": {"login": "Binero", "id": 6867251, "node_id": "MDQ6VXNlcjY4NjcyNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/6867251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Binero", "html_url": "https://github.com/Binero", "followers_url": "https://api.github.com/users/Binero/followers", "following_url": "https://api.github.com/users/Binero/following{/other_user}", "gists_url": "https://api.github.com/users/Binero/gists{/gist_id}", "starred_url": "https://api.github.com/users/Binero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Binero/subscriptions", "organizations_url": "https://api.github.com/users/Binero/orgs", "repos_url": "https://api.github.com/users/Binero/repos", "events_url": "https://api.github.com/users/Binero/events{/privacy}", "received_events_url": "https://api.github.com/users/Binero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-04-18T20:09:24Z", "updated_at": "2015-04-19T00:22:44Z", "closed_at": "2015-04-19T00:22:44Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When returning the result of a match expression with incompatible arms, rust gives a rather obscure error message:\n\n``` rust\nfn main() {\n    is_one(1)\n}\n\nfn is_one(a: u8) {\n    match a {\n        1 => true,\n        _ => panic!(\"It's not one!\"),\n    }\n}\n```\n\n```\n<anon>:6:5: 9:6 error: match arms have incompatible types:\n expected `bool`,\n    found `()`\n(expected bool,\n    found ()) [E0308]\n<anon>:6     match a {\n<anon>:7         1 => true,\n<anon>:8         _ => panic!(\"It's not one!\"),\n<anon>:9     }\n<anon>:8:14: 8:38 note: match arm with an incompatible type\n<anon>:8         _ => panic!(\"It's not one!\"),\n                      ^~~~~~~~~~~~~~~~~~~~~~~~\nerror: aborting due to previous error\nplaypen: application terminated with error code 101\nProgram ended.\n```\n\nhttp://is.gd/J3qEpq\n\nThis is likely to be because panic! takes on the return type of the function, which is (), and than complains that it doesn't match the first arm's return type. This error message makes sense, but left me quite puzzled figuring out what was wrong. \n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24568/timeline", "performed_via_github_app": null, "state_reason": "completed"}