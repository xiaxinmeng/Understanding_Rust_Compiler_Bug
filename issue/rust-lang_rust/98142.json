{"url": "https://api.github.com/repos/rust-lang/rust/issues/98142", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98142/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98142/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98142/events", "html_url": "https://github.com/rust-lang/rust/issues/98142", "id": 1272546201, "node_id": "I_kwDOAAsO6M5L2YOZ", "number": 98142, "title": "rust-1.61-i686-unknown-linux-gnu rustc --version fails w/ kernel panic on Centos 7 32-bit", "user": {"login": "dbodden-pesa", "id": 99362676, "node_id": "U_kgDOBewndA", "avatar_url": "https://avatars.githubusercontent.com/u/99362676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbodden-pesa", "html_url": "https://github.com/dbodden-pesa", "followers_url": "https://api.github.com/users/dbodden-pesa/followers", "following_url": "https://api.github.com/users/dbodden-pesa/following{/other_user}", "gists_url": "https://api.github.com/users/dbodden-pesa/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbodden-pesa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbodden-pesa/subscriptions", "organizations_url": "https://api.github.com/users/dbodden-pesa/orgs", "repos_url": "https://api.github.com/users/dbodden-pesa/repos", "events_url": "https://api.github.com/users/dbodden-pesa/events{/privacy}", "received_events_url": "https://api.github.com/users/dbodden-pesa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-06-15T17:40:56Z", "updated_at": "2022-06-23T17:19:34Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "rust-1.61-i686-unknown-linux-gnu rustc --version fails w/ kernel panic on Centos 7 32-bit.\r\n\r\nI installed to a few different VMs and a physical host, had Centos 7 32-bit running. Downloaded the offline installer for rust-1.61-i686-unknown-linux-gnu and the install.sh works. rustc --version immediately fails with a kernel panic, hard-hang on all 4 systems I tried out.\r\n\r\nI tried this code:\r\n\r\nrustc --version\r\n\r\nI expected to see this happen: \r\n\r\nGet the version number and release date.\r\n\r\nInstead, this happened: *explanation*\r\n\r\n(dmesg after the panic caused by \"rustc --version\")\r\n[ 0.769351] ACPI: PCI Interrupt Link [GSIF] enabled at IRQ 21\r\n[ 0.769402] ------------[ cut here ]------------\r\n[ 0.769406] WARNING: CPU: 0 PID: 254 at arch/x86/mm/pat.c:354 reserve_memtype+0x89/0x510\r\n[ 0.769407] reserve_memtype failed: [mem 0x00000000-0xffffffffffffffff], req write-combining\r\n[ 0.769416] Modules linked in: virtio_blk virtio_net net_failover failover qxl(+) virtio_console ahci libahci drm_kms_helper syscopyarea sysfillrect sysimgblt fb_sys_fops libata crc32c_intel serio_raw ttm drm virtio_pci virtio_ring virtio drm_panel_orientation_quirks dm_mirror dm_region_hash dm_log dm_mod\r\n[ 0.769418] CPU: 0 PID: 254 Comm: systemd-udevd Tainted: G W ------------ 3.10.0-1160.2.2.el7.centos.plus.i686 https://github.com/rust-lang/www.rust-lang.org/pull/1\r\n[ 0.769418] Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.13.0-1ubuntu1.1 04/01/2014\r\n[ 0.769418] Call Trace:\r\n[ 0.769426] [] dump_stack+0x16/0x18\r\n[ 0.769427] [] __warn+0xea/0x110\r\n[ 0.769428] [] ? reserve_memtype+0x89/0x510\r\n[ 0.769429] [] warn_slowpath_fmt+0x46/0x60\r\n[ 0.769430] [] reserve_memtype+0x89/0x510\r\n[ 0.769432] [] ? __kmalloc_track_caller+0x46/0x1e0\r\n[ 0.769433] [] io_reserve_memtype+0x67/0x140\r\n[ 0.769439] [] iomap_create_wc+0x2b/0x70\r\n[ 0.769443] [] qxl_device_init+0x467/0x8f0 [qxl]\r\n[ 0.769450] [] ? pci_read_config_word+0x42/0x50\r\n[ 0.769452] [] ? do_pci_enable_device+0xc4/0xf0\r\n[ 0.769455] [] qxl_pci_probe+0x6e/0xf0 [qxl]\r\n[ 0.769457] [] ? __pm_runtime_resume+0x51/0x80\r\n[ 0.769459] [] ? qxl_pci_remove+0x50/0x50 [qxl]\r\n[ 0.769460] [] pci_device_probe+0x7c/0xe0\r\n[ 0.769462] [] ? sysfs_create_link+0x25/0x40\r\n[ 0.769464] [] driver_probe_device+0xb3/0x3d0\r\n[ 0.769465] [] ? __device_attach+0x40/0x40\r\n[ 0.769465] [] __driver_attach+0x79/0x80\r\n[ 0.769466] [] ? __device_attach+0x40/0x40\r\n[ 0.769467] [] bus_for_each_dev+0x5a/0xa0\r\n[ 0.769468] [] driver_attach+0x1e/0x20\r\n[ 0.769469] [] ? __device_attach+0x40/0x40\r\n[ 0.769470] [] bus_add_driver+0x1d7/0x2b0\r\n[ 0.769471] [] driver_register+0x59/0xe0\r\n[ 0.769472] [] __pci_register_driver+0x84/0xa0\r\n[ 0.769473] [] ? 0xf80d7fff\r\n[ 0.769475] [] qxl_init+0x3c/0x1000 [qxl]\r\n[ 0.769479] [] do_one_initcall+0xad/0x220\r\n[ 0.769480] [] ? 0xf80d7fff\r\n[ 0.769481] [] load_module+0x153e/0x1a70\r\n[ 0.769484] [] SyS_finit_module+0x8d/0xd0\r\n[ 0.769486] [] sysenter_do_call+0x1b/0x31\r\n[ 0.769487] ---[ end trace f68728a0d3053b54 ]---\r\n\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\nI found this behavior started with 1.51, although 1.50 gave the version info, it also failed to compile and gave a panic when compiling code.\r\n\r\n(cpuinfo, cat /etc/centos-release, uname -a)\r\nmodel name : AMD EPYC-Rome Processor\r\nmodel name : AMD EPYC-Rome Processor\r\nCentOS Linux release 7.9.2009 (AltArch)\r\nLinux localhost.localdomain 3.10.0-1160.2.2.el7.centos.plus.i686 https://github.com/rust-lang/www.rust-lang.org/pull/1 SMP Mon Oct 26 11:56:29 UTC 2020 i686 i686 i386 GNU/Linux\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98142/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98142/timeline", "performed_via_github_app": null, "state_reason": null}