{"url": "https://api.github.com/repos/rust-lang/rust/issues/85969", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/85969/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/85969/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/85969/events", "html_url": "https://github.com/rust-lang/rust/issues/85969", "id": 910690660, "node_id": "MDU6SXNzdWU5MTA2OTA2NjA=", "number": 85969, "title": "Using Zip & Take allows accessing the middle a Map iterator without \u201cgetting there first\u201d from either side.", "user": {"login": "steffahn", "id": 3986214, "node_id": "MDQ6VXNlcjM5ODYyMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3986214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steffahn", "html_url": "https://github.com/steffahn", "followers_url": "https://api.github.com/users/steffahn/followers", "following_url": "https://api.github.com/users/steffahn/following{/other_user}", "gists_url": "https://api.github.com/users/steffahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/steffahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steffahn/subscriptions", "organizations_url": "https://api.github.com/users/steffahn/orgs", "repos_url": "https://api.github.com/users/steffahn/repos", "events_url": "https://api.github.com/users/steffahn/events{/privacy}", "received_events_url": "https://api.github.com/users/steffahn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}, {"id": 347795552, "node_id": "MDU6TGFiZWwzNDc3OTU1NTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-specialization", "name": "A-specialization", "color": "f7e101", "default": false, "description": "Area: Trait impl specialization"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 889209675, "node_id": "MDU6TGFiZWw4ODkyMDk2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-iterators", "name": "A-iterators", "color": "f7e101", "default": false, "description": "Area: Iterators"}, {"id": 2011781731, "node_id": "MDU6TGFiZWwyMDExNzgxNzMx", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs", "name": "T-libs", "color": "bfd4f2", "default": false, "description": "Relevant to the library team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-06-03T17:03:38Z", "updated_at": "2021-06-17T04:05:39Z", "closed_at": "2021-06-09T14:06:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Look at this iterator.\r\n```rust\r\nlet iterator = (0..100).map(|x| println!(\"item {}\", x));\r\n```\r\nWe all know that when `map`\u2019s resulting `Iterator` implements `DoubleEndedIterator`, then the side-effects can be re-ordered. However, judging by the implementation of `map` one would probably at least expect that it\u2019s impossible to hit the `\"item 50\"` without first either going through at least `0, 1, 2, \u2026 49` or `100, 99, 98, \u2026 51` first. Right?\r\n\r\nWell, here we go!\r\n```rust\r\nlet mut y = iterator.take(51).zip(0..100);\r\ny.next_back();\r\n```\r\non beta\r\n```\r\nitem 50\r\n```\r\n\r\non stable 1.52.0\r\n```\r\nitem 99\r\nitem 98\r\nitem 97\r\nitem 96\r\nitem 95\r\nitem 94\r\nitem 93\r\nitem 92\r\nitem 91\r\nitem 90\r\nitem 89\r\nitem 88\r\nitem 87\r\nitem 86\r\nitem 85\r\nitem 84\r\nitem 83\r\nitem 82\r\nitem 81\r\nitem 80\r\nitem 79\r\nitem 78\r\nitem 77\r\nitem 76\r\nitem 75\r\nitem 74\r\nitem 73\r\nitem 72\r\nitem 71\r\nitem 70\r\nitem 69\r\nitem 68\r\nitem 67\r\nitem 66\r\nitem 65\r\nitem 64\r\nitem 63\r\nitem 62\r\nitem 61\r\nitem 60\r\nitem 59\r\nitem 58\r\nitem 57\r\nitem 56\r\nitem 55\r\nitem 54\r\nitem 53\r\nitem 52\r\nitem 51\r\nitem 50\r\n```\r\n([playground](https://play.rust-lang.org/?version=beta&mode=debug&edition=2018&gist=89aa7814d813add6502ba977085818c5))\r\n\r\n@rustbot label T-libs-impl, A-iterators, A-specialization, regression-from-stable-to-beta", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/85969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/85969/timeline", "performed_via_github_app": null, "state_reason": "completed"}