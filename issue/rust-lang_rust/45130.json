{"url": "https://api.github.com/repos/rust-lang/rust/issues/45130", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45130/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45130/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45130/events", "html_url": "https://github.com/rust-lang/rust/issues/45130", "id": 263871221, "node_id": "MDU6SXNzdWUyNjM4NzEyMjE=", "number": 45130, "title": "Mir passes are hardcoded in `phase_3_run_analysis_passes`", "user": {"login": "MaikKlein", "id": 1994306, "node_id": "MDQ6VXNlcjE5OTQzMDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1994306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaikKlein", "html_url": "https://github.com/MaikKlein", "followers_url": "https://api.github.com/users/MaikKlein/followers", "following_url": "https://api.github.com/users/MaikKlein/following{/other_user}", "gists_url": "https://api.github.com/users/MaikKlein/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaikKlein/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaikKlein/subscriptions", "organizations_url": "https://api.github.com/users/MaikKlein/orgs", "repos_url": "https://api.github.com/users/MaikKlein/repos", "events_url": "https://api.github.com/users/MaikKlein/events{/privacy}", "received_events_url": "https://api.github.com/users/MaikKlein/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-10-09T12:04:16Z", "updated_at": "2017-10-11T13:25:26Z", "closed_at": "2017-10-11T13:25:26Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, mir passes are hardcoded in `phase_3_run_analysis_passes` and it is being used in `compile_input`.\r\n\r\nI write a Rust -> Spirv compiler which means I need to transform the mir myself and mir passes seem to be the best place for that. Afaik I cannot easily add mir passes from the outside as they are hardcoded in `phase_3_run_analysis_passes`.\r\n\r\nNow I could easily write my own version of  `phase_3_run_analysis_passes` and `compile_input` but maybe it would be preferable if mir passes could be added from the outside?\r\n\r\nI am not sure what the best place for it would be, maybe the passes could be passed into the `compile_input` function, or maybe they could be added in one of the `build_controller` callbacks? \r\n\r\n", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45130/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45130/timeline", "performed_via_github_app": null, "state_reason": "completed"}