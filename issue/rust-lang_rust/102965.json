{"url": "https://api.github.com/repos/rust-lang/rust/issues/102965", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/102965/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/102965/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/102965/events", "html_url": "https://github.com/rust-lang/rust/issues/102965", "id": 1406278080, "node_id": "I_kwDOAAsO6M5T0hnA", "number": 102965, "title": "failed to get output type of async function", "user": {"login": "dwrensha", "id": 495768, "node_id": "MDQ6VXNlcjQ5NTc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/495768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwrensha", "html_url": "https://github.com/dwrensha", "followers_url": "https://api.github.com/users/dwrensha/followers", "following_url": "https://api.github.com/users/dwrensha/following{/other_user}", "gists_url": "https://api.github.com/users/dwrensha/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwrensha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwrensha/subscriptions", "organizations_url": "https://api.github.com/users/dwrensha/orgs", "repos_url": "https://api.github.com/users/dwrensha/repos", "events_url": "https://api.github.com/users/dwrensha/events{/privacy}", "received_events_url": "https://api.github.com/users/dwrensha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-10-12T14:02:54Z", "updated_at": "2022-10-14T02:52:18Z", "closed_at": "2022-10-14T02:52:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "rustc crashes on the following input, found by [fuzz_rustc](https://github.com/dwrensha/fuzz-rustc):\n```rust\ntrait a{async fn e(){Ok(())}}\n```\n\n```\n$ rustc bug.rs\nerror[E0670]: `async fn` is not permitted in Rust 2015\n --> bug.rs:1:9\n  |\n1 | trait a{async fn e(){Ok(())}}\n  |         ^^^^^ to use `async fn`, switch to Rust 2018 or later\n  |\n  = help: pass `--edition 2021` to `rustc`\n  = note: for more on editions, read https://doc.rust-lang.org/edition-guide\n\nwarning: trait `a` should have an upper camel case name\n --> bug.rs:1:7\n  |\n1 | trait a{async fn e(){Ok(())}}\n  |       ^ help: convert the identifier to upper camel case: `A`\n  |\n  = note: `#[warn(non_camel_case_types)]` on by default\n\nerror[E0706]: functions in traits cannot be declared `async`\n --> bug.rs:1:9\n  |\n1 | trait a{async fn e(){Ok(())}}\n  |         -----^^^^^^^\n  |         |\n  |         `async` because of this\n  |\n  = note: `async` trait functions are not currently supported\n  = note: consider using the `async-trait` crate: https://crates.io/crates/async-trait\n  = note: see issue #91611 <https://github.com/rust-lang/rust/issues/91611> for more information\n  = help: add `#![feature(async_fn_in_trait)]` to the crate attributes to enable\n\nerror[E0601]: `main` function not found in crate `bug`\n --> bug.rs:1:30\n  |\n1 | trait a{async fn e(){Ok(())}}\n  |                              ^ consider adding a `main` function to `bug.rs`\n\nerror: internal compiler error: compiler/rustc_hir_analysis/src/check/fn_ctxt/suggestions.rs:884:29: failed to get output type of async function\n --> bug.rs:1:21\n  |\n1 | trait a{async fn e(){Ok(())}}\n  |                     ^\n\nthread 'rustc' panicked at 'Box<dyn Any>', /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/compiler/rustc_errors/src/lib.rs:1441:9\nstack backtrace:\n   0:     0x7f2a7216c5b0 - std::backtrace_rs::backtrace::libunwind::trace::h0bf6f02637fe6971\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   1:     0x7f2a7216c5b0 - std::backtrace_rs::backtrace::trace_unsynchronized::hca573de4ebdee142\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   2:     0x7f2a7216c5b0 - std::sys_common::backtrace::_print_fmt::h78a3b0f3fa5431ce\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/sys_common/backtrace.rs:66:5\n   3:     0x7f2a7216c5b0 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h388012888db78658\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/sys_common/backtrace.rs:45:22\n   4:     0x7f2a721c859e - core::fmt::write::h8541eee12bfb22e1\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/core/src/fmt/mod.rs:1209:17\n   5:     0x7f2a7215c835 - std::io::Write::write_fmt::haf5892ef07750179\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/io/mod.rs:1680:15\n   6:     0x7f2a7216f353 - std::sys_common::backtrace::_print::hd2a58ab324867b58\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/sys_common/backtrace.rs:48:5\n   7:     0x7f2a7216f353 - std::sys_common::backtrace::print::h62650e0a0854a421\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/sys_common/backtrace.rs:35:9\n   8:     0x7f2a7216f353 - std::panicking::default_hook::{{closure}}::h0c0249b3670af819\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/panicking.rs:267:22\n   9:     0x7f2a7216f02a - std::panicking::default_hook::hdd3bdd204a1e5f34\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/panicking.rs:286:9\n  10:     0x7f2a74aab641 - rustc_driver[1f63e0707e3aafaf]::DEFAULT_HOOK::{closure#0}::{closure#0}\n  11:     0x7f2a7216fb8b - <alloc::boxed::Box<F,A> as core::ops::function::Fn<Args>>::call::h6f493fd9c4eb244a\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/alloc/src/boxed.rs:1952:9\n  12:     0x7f2a7216fb8b - std::panicking::rust_panic_with_hook::hcdeb5a66936a633b\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/panicking.rs:673:13\n  13:     0x7f2a74cecbf1 - std[7bd0f41fe60b70b6]::panicking::begin_panic::<rustc_errors[d5334a4a25fbb394]::ExplicitBug>::{closure#0}\n  14:     0x7f2a74ceb3f6 - std[7bd0f41fe60b70b6]::sys_common::backtrace::__rust_end_short_backtrace::<std[7bd0f41fe60b70b6]::panicking::begin_panic<rustc_errors[d5334a4a25fbb394]::ExplicitBug>::{closure#0}, !>\n  15:     0x7f2a74cea236 - std[7bd0f41fe60b70b6]::panicking::begin_panic::<rustc_errors[d5334a4a25fbb394]::ExplicitBug>\n  16:     0x7f2a74d53076 - std[7bd0f41fe60b70b6]::panic::panic_any::<rustc_errors[d5334a4a25fbb394]::ExplicitBug>\n  17:     0x7f2a74d52f3f - <rustc_errors[d5334a4a25fbb394]::HandlerInner>::span_bug::<rustc_span[ddec628aeed15f05]::span_encoding::Span, &alloc[9f2f41052ee9385c]::string::String>\n  18:     0x7f2a74d52be0 - <rustc_errors[d5334a4a25fbb394]::Handler>::span_bug::<rustc_span[ddec628aeed15f05]::span_encoding::Span, &alloc[9f2f41052ee9385c]::string::String>\n  19:     0x7f2a74d54108 - rustc_middle[a8ed4a0dc47aac3]::ty::context::tls::with_context_opt::<rustc_middle[a8ed4a0dc47aac3]::ty::context::tls::with_opt<rustc_middle[a8ed4a0dc47aac3]::util::bug::opt_span_bug_fmt<rustc_span[ddec628aeed15f05]::span_encoding::Span>::{closure#0}, ()>::{closure#0}, ()>\n  20:     0x7f2a74d53f86 - rustc_middle[a8ed4a0dc47aac3]::util::bug::opt_span_bug_fmt::<rustc_span[ddec628aeed15f05]::span_encoding::Span>\n  21:     0x7f2a736a6bb4 - rustc_middle[a8ed4a0dc47aac3]::util::bug::span_bug_fmt::<rustc_span[ddec628aeed15f05]::span_encoding::Span>\n  22:     0x7f2a74cac533 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::suggest_missing_break_or_return_expr::{closure#2}\n  23:     0x7f2a74cac456 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::suggest_missing_break_or_return_expr\n  24:     0x7f2a74da27ff - <rustc_hir_analysis[a6a5d63f9823a7da]::check::coercion::CoerceMany<&rustc_hir[b10a2ea55ce97d34]::hir::Expr>>::report_return_mismatched_types\n  25:     0x7f2a736b07b0 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_block_with_expected\n  26:     0x7f2a73687bfe - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args\n  27:     0x7f2a736895cf - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args\n  28:     0x7f2a736aec2f - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_block_with_expected\n  29:     0x7f2a73687bfe - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args\n  30:     0x7f2a73fe2ba6 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_return_expr\n  31:     0x7f2a73fd9850 - rustc_hir_analysis[a6a5d63f9823a7da]::check::check::check_fn\n  32:     0x7f2a7373957b - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_closure\n  33:     0x7f2a7368ab3d - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args\n  34:     0x7f2a73705d79 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_argument_types\n  35:     0x7f2a736c57a8 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_call\n  36:     0x7f2a736879ad - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_expr_with_expectation_and_args\n  37:     0x7f2a73fe2ba6 - <rustc_hir_analysis[a6a5d63f9823a7da]::check::fn_ctxt::FnCtxt>::check_return_expr\n  38:     0x7f2a73fd9850 - rustc_hir_analysis[a6a5d63f9823a7da]::check::check::check_fn\n  39:     0x7f2a73fcb13c - <rustc_hir_analysis[a6a5d63f9823a7da]::check::inherited::InheritedBuilder>::enter::<rustc_hir_analysis[a6a5d63f9823a7da]::check::typeck_with_fallback<rustc_hir_analysis[a6a5d63f9823a7da]::check::typeck::{closure#0}>::{closure#1}, &rustc_middle[a8ed4a0dc47aac3]::ty::context::TypeckResults>\n  40:     0x7f2a73fca00c - rustc_hir_analysis[a6a5d63f9823a7da]::check::typeck\n  41:     0x7f2a740ea595 - rustc_query_system[a76597d842537d9]::query::plumbing::try_execute_query::<rustc_query_impl[1e7ed5a7eb258aab]::plumbing::QueryCtxt, rustc_query_system[a76597d842537d9]::query::caches::DefaultCache<rustc_span[ddec628aeed15f05]::def_id::LocalDefId, &rustc_middle[a8ed4a0dc47aac3]::ty::context::TypeckResults>>\n  42:     0x7f2a749ac1ee - <rustc_query_impl[1e7ed5a7eb258aab]::Queries as rustc_middle[a8ed4a0dc47aac3]::ty::query::QueryEngine>::typeck\n  43:     0x7f2a747dcdf7 - rustc_data_structures[fec937313883fa6d]::sync::par_for_each_in::<&[rustc_span[ddec628aeed15f05]::def_id::LocalDefId], <rustc_middle[a8ed4a0dc47aac3]::hir::map::Map>::par_body_owners<rustc_hir_analysis[a6a5d63f9823a7da]::check::typeck_item_bodies::{closure#0}>::{closure#0}>\n  44:     0x7f2a747dcbb3 - rustc_hir_analysis[a6a5d63f9823a7da]::check::typeck_item_bodies\n  45:     0x7f2a746fe66a - rustc_query_system[a76597d842537d9]::query::plumbing::try_execute_query::<rustc_query_impl[1e7ed5a7eb258aab]::plumbing::QueryCtxt, rustc_query_system[a76597d842537d9]::query::caches::DefaultCache<(), ()>>\n  46:     0x7f2a746fe397 - rustc_query_system[a76597d842537d9]::query::plumbing::get_query::<rustc_query_impl[1e7ed5a7eb258aab]::queries::typeck_item_bodies, rustc_query_impl[1e7ed5a7eb258aab]::plumbing::QueryCtxt>\n  47:     0x7f2a744a37cf - <rustc_session[8b98ba4aacc9d309]::session::Session>::time::<(), rustc_hir_analysis[a6a5d63f9823a7da]::check_crate::{closure#7}>\n  48:     0x7f2a744a339f - rustc_hir_analysis[a6a5d63f9823a7da]::check_crate\n  49:     0x7f2a744a2ea7 - rustc_interface[cf2fa28a67e8bef]::passes::analysis\n  50:     0x7f2a748359e4 - rustc_query_system[a76597d842537d9]::query::plumbing::try_execute_query::<rustc_query_impl[1e7ed5a7eb258aab]::plumbing::QueryCtxt, rustc_query_system[a76597d842537d9]::query::caches::DefaultCache<(), core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>>\n  51:     0x7f2a74835717 - rustc_query_system[a76597d842537d9]::query::plumbing::get_query::<rustc_query_impl[1e7ed5a7eb258aab]::queries::analysis, rustc_query_impl[1e7ed5a7eb258aab]::plumbing::QueryCtxt>\n  52:     0x7f2a73764044 - <rustc_interface[cf2fa28a67e8bef]::passes::QueryContext>::enter::<rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}::{closure#2}::{closure#3}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>\n  53:     0x7f2a73760496 - <rustc_interface[cf2fa28a67e8bef]::interface::Compiler>::enter::<rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}::{closure#2}, core[fae631be8e3c81b5]::result::Result<core[fae631be8e3c81b5]::option::Option<rustc_interface[cf2fa28a67e8bef]::queries::Linker>, rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>\n  54:     0x7f2a7375b43c - rustc_span[ddec628aeed15f05]::with_source_map::<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_interface[cf2fa28a67e8bef]::interface::create_compiler_and_run<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}>::{closure#1}>\n  55:     0x7f2a7375ae3f - rustc_interface[cf2fa28a67e8bef]::interface::create_compiler_and_run::<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}>\n  56:     0x7f2a7375a032 - <scoped_tls[4da31d6f3f5146b7]::ScopedKey<rustc_span[ddec628aeed15f05]::SessionGlobals>>::set::<rustc_interface[cf2fa28a67e8bef]::interface::run_compiler<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}>::{closure#0}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>\n  57:     0x7f2a7375950f - std[7bd0f41fe60b70b6]::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface[cf2fa28a67e8bef]::util::run_in_thread_pool_with_globals<rustc_interface[cf2fa28a67e8bef]::interface::run_compiler<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}>::{closure#0}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>::{closure#0}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>\n  58:     0x7f2a7375937f - <<std[7bd0f41fe60b70b6]::thread::Builder>::spawn_unchecked_<rustc_interface[cf2fa28a67e8bef]::util::run_in_thread_pool_with_globals<rustc_interface[cf2fa28a67e8bef]::interface::run_compiler<core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>, rustc_driver[1f63e0707e3aafaf]::run_compiler::{closure#1}>::{closure#0}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>::{closure#0}, core[fae631be8e3c81b5]::result::Result<(), rustc_errors[d5334a4a25fbb394]::ErrorGuaranteed>>::{closure#1} as core[fae631be8e3c81b5]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}\n  59:     0x7f2a72179793 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hc67cb2c032770d7f\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/alloc/src/boxed.rs:1938:9\n  60:     0x7f2a72179793 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::he79e59a805a8533c\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/alloc/src/boxed.rs:1938:9\n  61:     0x7f2a72179793 - std::sys::unix::thread::Thread::new::thread_start::hae509166483801f9\n                               at /rustc/db0597f5619d5ed93feca28e61226d3581cc7867/library/std/src/sys/unix/thread.rs:108:17\n  62:     0x7f2a71e94b43 - start_thread\n                               at ./nptl/./nptl/pthread_create.c:442:8\n  63:     0x7f2a71f26a00 - clone3\n                               at ./misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81\n  64:                0x0 - <unknown>\n\nnote: the compiler unexpectedly panicked. this is a bug.\n\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\n\nnote: rustc 1.66.0-nightly (db0597f56 2022-10-11) running on x86_64-unknown-linux-gnu\n\nquery stack during panic:\n#0 [typeck] type-checking `a::e`\n#1 [typeck_item_bodies] type-checking all item bodies\n#2 [analysis] running analysis passes on this crate\nend of query stack\nerror: aborting due to 4 previous errors; 1 warning emitted\n\nSome errors have detailed explanations: E0601, E0670, E0706.\nFor more information about an error, try `rustc --explain E0601`.\n\n```\n\n<!-- TRIAGEBOT_START -->\n\n<!-- TRIAGEBOT_ASSIGN_START -->\n\n<!-- TRIAGEBOT_ASSIGN_DATA_START$${\"user\":\"compiler-errors\"}$$TRIAGEBOT_ASSIGN_DATA_END -->\n\n<!-- TRIAGEBOT_ASSIGN_END -->\n<!-- TRIAGEBOT_END -->", "closed_by": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/102965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/102965/timeline", "performed_via_github_app": null, "state_reason": "completed"}