{"url": "https://api.github.com/repos/rust-lang/rust/issues/40657", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40657/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40657/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40657/events", "html_url": "https://github.com/rust-lang/rust/issues/40657", "id": 215300851, "node_id": "MDU6SXNzdWUyMTUzMDA4NTE=", "number": 40657, "title": "Internal compiler error: pattern.rs:572: impossible case reached", "user": {"login": "nortiero", "id": 7891115, "node_id": "MDQ6VXNlcjc4OTExMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/7891115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nortiero", "html_url": "https://github.com/nortiero", "followers_url": "https://api.github.com/users/nortiero/followers", "following_url": "https://api.github.com/users/nortiero/following{/other_user}", "gists_url": "https://api.github.com/users/nortiero/gists{/gist_id}", "starred_url": "https://api.github.com/users/nortiero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nortiero/subscriptions", "organizations_url": "https://api.github.com/users/nortiero/orgs", "repos_url": "https://api.github.com/users/nortiero/repos", "events_url": "https://api.github.com/users/nortiero/events{/privacy}", "received_events_url": "https://api.github.com/users/nortiero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 268744493, "node_id": "MDU6TGFiZWwyNjg3NDQ0OTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-fn", "name": "A-const-fn", "color": "f7e101", "default": false, "description": "Area: const fn foo(..) {..}. Pure functions which can be applied at compile time."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-19T22:25:38Z", "updated_at": "2018-03-09T07:13:49Z", "closed_at": "2018-03-09T07:13:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi! I was mixing function pointers with match patterns (they don't mix at all, as far as I understand -- please correct me), obtained the following error:\r\n\r\n`\r\nerror: internal compiler error: /Users/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-mac/build/src/librustc_const_eval/pattern.rs:572: impossible case reached\r\n`\r\n\r\nHappens in [playground](https://play.rust-lang.org/?gist=6ba85903bcd2e633e549a06a28a28477&version=stable&backtrace=0) too.\r\n\r\n\r\nCode:\r\n\r\n```\r\nuse std::fmt;\r\n\r\nfn du() {    println!(\"booo\");  }\r\nfn du2() {    println!(\"booo2\");  }\r\n\r\n\r\nstruct Baonzo(fn());\r\nconst PUM: Baonzo = Baonzo(du);\r\n\r\nfn main() {\r\n    let fpx = Baonzo(du);\r\n   \r\n    match fpx  {\r\n        PUM => { println!(\"Here we are\"); },\r\n        _ => {},\r\n    } \r\n}\r\n```\r\n\r\n##Meta\r\nrustc 1.16.0 (30cf806ef 2017-03-10)\r\nbinary: rustc\r\ncommit-hash: 30cf806ef8881c41821fbd43e5cf3699c5290c16\r\ncommit-date: 2017-03-10\r\nhost: x86_64-apple-darwin\r\nrelease: 1.16.0\r\nLLVM version: 3.9\r\n\r\nBacktrace:\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/stable-dist-rustc-mac/build/src/librustc_errors/lib.rs:416\r\nstack backtrace:\r\n   1:        0x107788a1c - std::sys::imp::backtrace::tracing::imp::write::h21ca2762819c7ae8\r\n   2:        0x10779537e - std::panicking::default_hook::{{closure}}::h38f99a37d00bb19b\r\n   3:        0x107794f23 - std::panicking::default_hook::ha2186ee24b50729c\r\n   4:        0x107795837 - std::panicking::rust_panic_with_hook::h979db19ee91d2a53\r\n   5:        0x1052b667a - std::panicking::begin_panic::h8030d48880744908\r\n   6:        0x1052cb43c - rustc_errors::Handler::bug::h760c488cd55d4fdd\r\n   7:        0x10470c82c - rustc::session::opt_span_bug_fmt::{{closure}}::hcb2fbcb88915d137\r\n   8:        0x10470c2e9 - rustc::session::opt_span_bug_fmt::ha610cb4388904d76\r\n   9:        0x10470be6a - rustc::session::bug_fmt::ha5b9adbd8728566e\r\n  10:        0x1043c189d - rustc_const_eval::pattern::PatternContext::lower_variant_or_leaf::h2213017936435fa1\r\n  11:        0x1043c1aa1 - rustc_const_eval::pattern::PatternContext::lower_path::h6738fa3412313318\r\n  12:        0x1043c24b3 - rustc_const_eval::pattern::PatternContext::lower_const_expr::h6183b4b4e74d1517\r\n  13:        0x1043a0a10 - <collections::vec::Vec<T> as collections::vec::SpecExtend<T, I>>::from_iter::h4aa641585b72a90f\r\n  14:        0x1043c271d - rustc_const_eval::pattern::PatternContext::lower_const_expr::h6183b4b4e74d1517\r\n  15:        0x1043c1b4b - rustc_const_eval::pattern::PatternContext::lower_path::h6738fa3412313318\r\n  16:        0x1043bfab8 - rustc_const_eval::pattern::PatternContext::lower_pattern::h3af23c0975bb15dd\r\n  17:        0x1043b929f - rustc_const_eval::check_match::MatchVisitor::check_match::{{closure}}::hacf69a1f1c3994c1\r\n  18:        0x1043b8382 - <rustc_const_eval::check_match::MatchVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_expr::h5cc0afdd47df9e0c\r\n  19:        0x1043b6fd0 - <rustc_const_eval::check_match::MatchVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_expr::h5cc0afdd47df9e0c\r\n  20:        0x1043b8f90 - <rustc_const_eval::check_match::MatchVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_body::hacb2f5fa0cd27a97\r\n  21:        0x1043b5a37 - <rustc_const_eval::check_match::OuterVisitor<'a, 'tcx> as rustc::hir::intravisit::Visitor<'tcx>>::visit_fn::h0e4df7e312384e9b\r\n  22:        0x1043987dc - rustc::hir::intravisit::walk_item::h62266a77147d9707\r\n  23:        0x1043b5f73 - rustc_const_eval::check_match::check_crate::hbb131b3de2ff0e4c\r\n  24:        0x10366fe87 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::h9e118a56f5957bd6\r\n  25:        0x103651367 - rustc_driver::driver::phase_3_run_analysis_passes::h0569f99df4eb53d4\r\n  26:        0x103640a90 - rustc_driver::driver::compile_input::hb50de2aa3bf90e59\r\n  27:        0x10368848e - rustc_driver::run_compiler::h4b71cb0b28ba1b4a\r\n  28:        0x10359fff8 - std::panicking::try::do_call::h7cd9045c0206869e\r\n  29:        0x10779844a - __rust_maybe_catch_panic\r\n  30:        0x1035c8913 - <F as alloc::boxed::FnBox<A>>::call_box::hca1d0347a9530a7f\r\n  31:        0x1077944a4 - std::sys::imp::thread::Thread::new::thread_start::hca57ad22492f366f\r\n  32:     0x7fff854ef898 - _pthread_body\r\n  33:     0x7fff854ef729 - _pthread_start\r\n```\r\nEdit to avoid emojis in text.. silly as it is to enable emojis in technical text", "closed_by": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40657/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40657/timeline", "performed_via_github_app": null, "state_reason": "completed"}