{"url": "https://api.github.com/repos/rust-lang/rust/issues/68709", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/68709/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/68709/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/68709/events", "html_url": "https://github.com/rust-lang/rust/issues/68709", "id": 558307260, "node_id": "MDU6SXNzdWU1NTgzMDcyNjA=", "number": 68709, "title": "Breaking Change in Vec::truncate drop order between 1.40 -> 1.41", "user": {"login": "mgattozzi", "id": 3514399, "node_id": "MDQ6VXNlcjM1MTQzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/3514399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mgattozzi", "html_url": "https://github.com/mgattozzi", "followers_url": "https://api.github.com/users/mgattozzi/followers", "following_url": "https://api.github.com/users/mgattozzi/following{/other_user}", "gists_url": "https://api.github.com/users/mgattozzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/mgattozzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mgattozzi/subscriptions", "organizations_url": "https://api.github.com/users/mgattozzi/orgs", "repos_url": "https://api.github.com/users/mgattozzi/repos", "events_url": "https://api.github.com/users/mgattozzi/events{/privacy}", "received_events_url": "https://api.github.com/users/mgattozzi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 166999014, "node_id": "MDU6TGFiZWwxNjY5OTkwMTQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-collections", "name": "A-collections", "color": "f7e101", "default": false, "description": "Area: std::collections."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-01-31T18:46:12Z", "updated_at": "2020-05-29T01:48:28Z", "closed_at": "2020-05-28T22:31:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Context:\r\n[The commit that introduced the change.](https://github.com/rust-lang/rust/commit/9e8c4e6fb1c952048fb823e59f4c9c6487bf9a58)\r\n[The PR for the commit](https://github.com/rust-lang/rust/pull/64432)\r\n\r\nMinimal repro can be found in the commit and the PR. At work we have a private internal crate that depended on this drop ordering. As we had not run the beta train we did not catch it until attempting to upgrade our stable version of rust to 1.41.0. Now while the behavior of the drop order was unspecified it has been stabilized.\r\n\r\nI'm sure we can find a workaround for this at work, but I'm filing this issue as it brings up some interesting questions that I don't know if the libs team has ever taken an official stance on.\r\n\r\nIf the observable behavior changes but isn't specified is this a breaking change?\r\nThe API itself has not changed, but the drop order has changed. I'm of the opinion it is a breaking change even if it brings the API more in line with how slice drop order works, though talking to some friends they are of the opinion it is not a breaking change.\r\n\r\nAnyways I wanted to file this issue to bring attention to this and maybe get a more clear ruling from the libs team on what they consider is and is not breaking change behavior. If more info is needed on why we needed this @estebank and I can probably give more specifics on this, though I don't think this is so much trying to fix a bug as it is determining whether a change should be reverted.\r\n\r\nThanks! \ud83d\ude04 ", "closed_by": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/68709/reactions", "total_count": 5, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/68709/timeline", "performed_via_github_app": null, "state_reason": "completed"}