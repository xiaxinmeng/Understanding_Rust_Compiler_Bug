{"url": "https://api.github.com/repos/rust-lang/rust/issues/24810", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24810/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24810/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24810/events", "html_url": "https://github.com/rust-lang/rust/issues/24810", "id": 70903697, "node_id": "MDU6SXNzdWU3MDkwMzY5Nw==", "number": 24810, "title": "ICE with associated type on trait", "user": {"login": "mdup", "id": 1169915, "node_id": "MDQ6VXNlcjExNjk5MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1169915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdup", "html_url": "https://github.com/mdup", "followers_url": "https://api.github.com/users/mdup/followers", "following_url": "https://api.github.com/users/mdup/following{/other_user}", "gists_url": "https://api.github.com/users/mdup/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdup/subscriptions", "organizations_url": "https://api.github.com/users/mdup/orgs", "repos_url": "https://api.github.com/users/mdup/repos", "events_url": "https://api.github.com/users/mdup/events{/privacy}", "received_events_url": "https://api.github.com/users/mdup/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-04-25T12:33:23Z", "updated_at": "2017-05-04T01:08:51Z", "closed_at": "2017-05-04T01:08:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Given the following code,\n\n``` rust\nuse std::ops::Add;\n\ntrait T: Add<Output=Self> {\n}\n\nimpl T<Output=T> {\n}\n\nfn main() {\n}\n```\n\nthe compiler crashes:\n\n``` rust\n$ RUST_BACKTRACE=1 rustc main.rs\nmain.rs:6:15: 6:16 error: the value of the associated type `Output` (from the trait `core::ops::Add`) must be specified [E0191]\nmain.rs:6 impl T<Output=T> {\n                        ^\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'assertion failed: !ty::type_needs_infer(ty)', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustc_typeck/lib.rs:148\n\nstack backtrace:\n   1:        0x103d6cb3f - sys::backtrace::write::he7c1ee6a91037116KVr\n   2:        0x103d75242 - panicking::on_panic::h95811d48f94bff2aNVv\n   3:        0x103d31985 - rt::unwind::begin_unwind_inner::h83dd7700bec4d3dcwDv\n   4:        0x100b0b8af - rt::unwind::begin_unwind::h5521202385013033086\n   5:        0x100c3058e - collect::convert_item::he430b0ba35372b84KGx\n   6:        0x100c7ba06 - check_crate::closure.38384\n   7:        0x100c7997a - check_crate::h38598962c6951e9d2EC\n   8:        0x1004d4f72 - driver::phase_3_run_analysis_passes::h4345ea303ca2819ctGa\n   9:        0x1004b6b18 - driver::compile_input::h83758d277994a32eQba\n  10:        0x10057bb43 - run_compiler::h2639405527e4221cF4b\n  11:        0x1005792aa - boxed::F.FnBox<A>::call_box::h1823104088724806648\n  12:        0x1005787f7 - rt::unwind::try::try_fn::h7700810389900064321\n  13:        0x103df7618 - rust_try_inner\n  14:        0x103df7605 - rust_try\n  15:        0x100578ace - boxed::F.FnBox<A>::call_box::h1089084376626579945\n  16:        0x103d73c3d - sys::thread::Thread::new::thread_start::he43a1bd6638c19advYu\n  17:     0x7fff930b9898 - _pthread_body\n  18:     0x7fff930b9729 - _pthread_start\n\n$ rustc --version\nrustc 1.1.0-nightly (21f278a68 2015-04-23) (built 2015-04-24)\n```\n\nAs a sidenote, I've played with it and was not able to find the correct syntax. The goal is to have a trait requires all implementers be able to add to themselves.\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24810/timeline", "performed_via_github_app": null, "state_reason": "completed"}