{"url": "https://api.github.com/repos/rust-lang/rust/issues/68175", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/68175/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/68175/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/68175/events", "html_url": "https://github.com/rust-lang/rust/issues/68175", "id": 548766560, "node_id": "MDU6SXNzdWU1NDg3NjY1NjA=", "number": 68175, "title": "after borrowing the scope, it not be returned", "user": {"login": "comradeHsu", "id": 26919386, "node_id": "MDQ6VXNlcjI2OTE5Mzg2", "avatar_url": "https://avatars.githubusercontent.com/u/26919386?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comradeHsu", "html_url": "https://github.com/comradeHsu", "followers_url": "https://api.github.com/users/comradeHsu/followers", "following_url": "https://api.github.com/users/comradeHsu/following{/other_user}", "gists_url": "https://api.github.com/users/comradeHsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/comradeHsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comradeHsu/subscriptions", "organizations_url": "https://api.github.com/users/comradeHsu/orgs", "repos_url": "https://api.github.com/users/comradeHsu/repos", "events_url": "https://api.github.com/users/comradeHsu/events{/privacy}", "received_events_url": "https://api.github.com/users/comradeHsu/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2020-01-13T08:06:39Z", "updated_at": "2020-01-13T10:53:50Z", "closed_at": "2020-01-13T10:24:49Z", "author_association": "NONE", "active_lock_reason": null, "body": "struct Integer {\r\n        val:i32,\r\n        string:String\r\n    }\r\n\r\n    impl Integer {\r\n        pub fn to_string(&self) -> String {\r\n            return String::from_utf8(vec![self.val as u8]).unwrap();\r\n        }\r\n    }\r\n\r\n    struct Long {\r\n        val:i64\r\n    }\r\n\r\n    enum Number {\r\n        Int(Integer),\r\n        Lon(Long)\r\n    }\r\n\r\n    fn get_constant_info(this: &Vec<Number>, index:usize) -> &Number {\r\n        let info = this.get(index);\r\n        if info.is_none() {\r\n            panic!(\"Invalid constant pool index!\");\r\n        }\r\n        return info.unwrap();\r\n    }\r\n\r\n    pub fn get_utf8<'a>(this:Rc<Vec<Number>>,index:usize) -> &'a str {\r\n        let info = get_constant_info(this.as_ref(),index);  ///---- `this` is borrowed here\r\n        let utf8 = match info {\r\n            Int(utf) => utf,\r\n            _ => panic!(\"info is not NameAndType\")\r\n        };\r\n        return utf8.string.as_str();\r\n    }\r\n\r\n    #[test]\r\n    fn test() {\r\n        let mut vec = Vec::new();\r\n        vec.push(Int(Integer{ val: 0, string: \"0\".to_string() }));\r\n        vec.push(Lon(Long{ val: 1 }));\r\n        vec.push(Int(Integer{ val: 2, string: \"2\".to_string() }));\r\n        vec.push(Lon(Long{ val: 3 }));\r\n        vec.push(Int(Integer{ val: 4,string: \"4\".to_string() }));\r\n        vec.push(Lon(Long{ val: 5 }));\r\n        let rc = Rc::new(vec);\r\n        let ss = get_utf8(rc,4);\r\n        println!(\"{}\",ss);\r\n    }", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/68175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/68175/timeline", "performed_via_github_app": null, "state_reason": "completed"}