{"url": "https://api.github.com/repos/rust-lang/rust/issues/95625", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/95625/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/95625/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/95625/events", "html_url": "https://github.com/rust-lang/rust/issues/95625", "id": 1191051873, "node_id": "I_kwDOAAsO6M5G_gJh", "number": 95625, "title": "Audit string literals in inline assembly syntax for correct unescaping", "user": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 91598611, "node_id": "MDU6TGFiZWw5MTU5ODYxMQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-inline-assembly", "name": "A-inline-assembly", "color": "f7e101", "default": false, "description": "Area: inline asm!(..)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-03T21:32:01Z", "updated_at": "2022-04-03T21:54:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When trying to refresh the status of https://github.com/rust-lang/rust/issues/60495 I noticed that `ast::InlineAsm` (and its nested structures) is the only AST structure that uses plain strings `String` and `Symbol`s.\r\n\r\nOther literals in AST use either `ast::Lit` in contexts where arbitrary literals are supported, of `ast::StrLit` in contexts where only string literals (possibly raw) are supported.\r\n\r\nThis is suspicious and may mean that string literals used in inline assembly are not always unescaped as any other Rust string literals.\r\n\"Unescaped as any other Rust string literals\" means that e.g. `\"\\x72ax\"` is always treated as semantically equivalent to `\"rax\"`.\r\n\r\nImplementation of inline assembly needs to be audited to make sure that the unescaping happens in all contexts, and some parts of `ast::InlineAsm` may need to use `StrLit` instead of plain strings or symbols.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/95625/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/95625/timeline", "performed_via_github_app": null, "state_reason": null}