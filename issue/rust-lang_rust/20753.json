{"url": "https://api.github.com/repos/rust-lang/rust/issues/20753", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20753/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20753/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20753/events", "html_url": "https://github.com/rust-lang/rust/issues/20753", "id": 53757857, "node_id": "MDU6SXNzdWU1Mzc1Nzg1Nw==", "number": 20753, "title": "ICE: misplaced `$crate` in macro", "user": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 132910982, "node_id": "MDU6TGFiZWwxMzI5MTA5ODI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-macros", "name": "A-macros", "color": "f7e101", "default": false, "description": "Area: All kinds of macros (custom derive, macro_rules!, proc macros, ..)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-01-08T14:47:16Z", "updated_at": "2017-01-03T20:10:20Z", "closed_at": "2017-01-03T20:10:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` Rust\nmacro_rules! a { () => ($crate) }\na!();\n\nfn main() {}\n```\n\n```\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'index out of bounds: the len is 1 but the index is 1', /home/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libsyntax/lib.rs:1\n\nstack backtrace:\n   1:     0x7f8fc2882410 - sys::backtrace::write::hb159f9850e834894l1s\n   2:     0x7f8fc28a7150 - failure::on_fail::hd4fb51e7b66e269fxgz\n   3:     0x7f8fc280cf20 - rt::unwind::begin_unwind_inner::he95e3015bc1198c6tVy\n   4:     0x7f8fc280d8f0 - rt::unwind::begin_unwind_fmt::h300d0aa3e383be9d0Ty\n   5:     0x7f8fc28a6fa0 - rust_begin_unwind\n   6:     0x7f8fc28eeb10 - panicking::panic_fmt::h6cac417771adde6dn6k\n   7:     0x7f8fc28f4920 - panicking::panic_bounds_check::h53e228d6998f5fcao5k\n   8:     0x7f8fbd5132c0 - ast::TokenTree::get_tt::h96da5eb3848d084fM9m\n   9:     0x7f8fbd5e4f60 - ext::tt::transcribe::tt_next_token::h516df05456a3cb49Ewi\n  10:     0x7f8fbd5f16a0 - ext::tt::transcribe::new_tt_reader::h94749376f99cf73fToi\n  11:     0x7f8fbd7dc320 - ext::tt::macro_rules::MacroRulesMacroExpander.TTMacroExpander::expand::h4430c94e783ad09bFjj\n  12:     0x7f8fbd726a20 - ext::expand::expand_item_mac::hde1d20ded6017125YAe\n  13:     0x7f8fbd723970 - ext::expand::expand_item::h73beca611c915148lre\n  14:     0x7f8fbd7313a0 - ext::expand::MacroExpander<'a, 'b>.Folder::fold_item::h48955fe1515deaf2cbf\n  15:     0x7f8fbd731340 - fold::noop_fold_mod::unboxed_closure.56493\n  16:     0x7f8fbd7312d0 - option::Option<T>::map::h10326325581045625383\n  17:     0x7f8fbd730d00 - vec::Vec<T>.FromIterator<T>::from_iter::h3348474091482747485\n  18:     0x7f8fbd72ee70 - fold::noop_fold_mod::h7835387410379147079\n  19:     0x7f8fbd72a270 - ext::expand::expand_item_underscore::h51bed06fced9f01aMye\n  20:     0x7f8fbd728b40 - fold::noop_fold_item_simple::h11155469096104082651\n  21:     0x7f8fbd728610 - ptr::P<T>::map::h14531937285677412610\n  22:     0x7f8fbd723970 - ext::expand::expand_item::h73beca611c915148lre\n  23:     0x7f8fbd7313a0 - ext::expand::MacroExpander<'a, 'b>.Folder::fold_item::h48955fe1515deaf2cbf\n  24:     0x7f8fbd78edb0 - ext::expand::expand_crate::h22541f1a00aff27ftff\n  25:     0x7f8fc2dfe690 - driver::phase_2_configure_and_expand::unboxed_closure.17996\n  26:     0x7f8fc2dba950 - driver::phase_2_configure_and_expand::ha7022ac115dbbd06Sja\n  27:     0x7f8fc2db0b50 - driver::compile_input::h4f21f66f6761bb22vba\n  28:     0x7f8fc2e79640 - thunk::F.Invoke<A, R>::invoke::h1208443586143045988\n  29:     0x7f8fc2e783f0 - rt::unwind::try::try_fn::h4735177180287591181\n  30:     0x7f8fc290b810 - rust_try_inner\n  31:     0x7f8fc290b800 - rust_try\n  32:     0x7f8fc2e78740 - thunk::F.Invoke<A, R>::invoke::h6623100047367797814\n  33:     0x7f8fc28933d0 - sys::thread::thread_start::h89f54a8cba556c09RSv\n  34:     0x7f8fbcda1fe0 - start_thread\n  35:     0x7f8fc24bcc99 - __clone\n  36:                0x0 - <unknown>\n```\n\n(rustc ea6f65c / 2015-01-06 19:47:08 +0000)\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20753/timeline", "performed_via_github_app": null, "state_reason": "completed"}