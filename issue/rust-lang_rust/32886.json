{"url": "https://api.github.com/repos/rust-lang/rust/issues/32886", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32886/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32886/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32886/events", "html_url": "https://github.com/rust-lang/rust/issues/32886", "id": 147542824, "node_id": "MDU6SXNzdWUxNDc1NDI4MjQ=", "number": 32886, "title": "rustbuild: rustc's -Crpath does not work", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-04-11T20:16:53Z", "updated_at": "2016-04-20T08:17:00Z", "closed_at": "2016-04-20T08:17:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The way the compiler emits rpath directives is relative to the output directory structure, but with rustbuild we output in one structure and then copy over into another. This means that `-Crpath` basically doesn't work, and things like `LD_LIBRARY_PATH` need to be specified manually.\n\nThis is a pretty tricky bug to fix as it will involve something like:\n- Glorious hacks in the `src/bootstrap/rustc.rs` script to manually pass rpath directives\n- Modifying the `-C rpath` argument to take some sort of value indicating what should be passed to the linker, this is an API change to the compiler, however.\n- Use some sort of tool to modify this metadata in the executable after it's generated\n\nI'm somewhat leaning towards the \"glorious hacks\" method for now to get something working and avoid changing the compiler, but there are other reasons why we would want to modify the `-C rpath` argument to the compiler as well perhaps.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32886/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32886/timeline", "performed_via_github_app": null, "state_reason": "completed"}