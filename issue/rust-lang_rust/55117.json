{"url": "https://api.github.com/repos/rust-lang/rust/issues/55117", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55117/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55117/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55117/events", "html_url": "https://github.com/rust-lang/rust/issues/55117", "id": 370551549, "node_id": "MDU6SXNzdWUzNzA1NTE1NDk=", "number": 55117, "title": "Diagnosis error when using '?' operator inside closure.", "user": {"login": "Alvenix", "id": 5764299, "node_id": "MDQ6VXNlcjU3NjQyOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5764299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alvenix", "html_url": "https://github.com/Alvenix", "followers_url": "https://api.github.com/users/Alvenix/followers", "following_url": "https://api.github.com/users/Alvenix/following{/other_user}", "gists_url": "https://api.github.com/users/Alvenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alvenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alvenix/subscriptions", "organizations_url": "https://api.github.com/users/Alvenix/orgs", "repos_url": "https://api.github.com/users/Alvenix/repos", "events_url": "https://api.github.com/users/Alvenix/events{/privacy}", "received_events_url": "https://api.github.com/users/Alvenix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-10-16T10:48:48Z", "updated_at": "2018-10-16T15:24:41Z", "closed_at": "2018-10-16T15:23:48Z", "author_association": "NONE", "active_lock_reason": null, "body": "Update: Closed this issue because I just misunderstood the error message.\r\n\r\nWhen compiling the following code:\r\n```\r\nuse std::error::Error;\r\n\r\nfn main() -> Result<(), Box<Error>> {\r\n    let closure = || {\r\n        test_function()?;\r\n    };  \r\n\r\n    Ok(())\r\n}\r\n\r\nfn test_function() -> Result<(), Box<Error>> {\r\n    Ok(())\r\n}\r\n```\r\nThis happens:\r\n\r\n> error[E0277]: the `?` operator can only be used in a function that returns `Result` or `Option` (or another type that implements `std::ops::Try`)               \r\n>  --> src/main.rs:5:9                                                                                                                                            \r\n>   |                                                                                                                                                             \r\n> 5 |         test_function()?;                                                                                                                                   \r\n>   |         ^^^^^^^^^^^^^^^^ cannot use the `?` operator in a function that returns `()`                                                                        \r\n>   |                                                                                                                                                             \r\n>   = help: the trait `std::ops::Try` is not implemented for `()`                                                                                                 \r\n>   = note: required by `std::ops::Try::from_error`                                                                                                               \r\n>                                                                                                                                                                 \r\n> error: aborting due to previous error                                                                                                                           \r\n>                                                                                                                                                                 \r\n> For more information about this error, try `rustc --explain E0277`.                                                                                             \r\n> error: Could not compile `project`. \r\n                                                  \r\nAlthough the code is not expected to compile because you cannot return to a closure but the diagnostic is wrong and confused me. You can use unwrap() for example because test_function actually return result type.\r\n\r\n## Meta\r\n> rustc --version --verbose\r\n> rustc 1.31.0-nightly (46880f41b 2018-10-15)\r\n> binary: rustc\r\n> commit-hash: 46880f41b7aeb897b8245474196bba9dc11f0e88\r\n> commit-date: 2018-10-15\r\n> host: x86_64-unknown-linux-gnu\r\n> release: 1.31.0-nightly\r\n> LLVM version: 8.0\r\n\r\nEdit 1:\r\nAlso happen on stable\r\n> rustc --version --verbose\r\n\r\n> rustc 1.29.2 (17a9dc751 2018-10-05)\r\n> binary: rustc\r\n> commit-hash: 17a9dc7513b9fea883dc9505f09f97c63d1d601b\r\n> commit-date: 2018-10-05\r\n> host: x86_64-unknown-linux-gnu\r\n> release: 1.29.2\r\n> LLVM version: 7.0", "closed_by": {"login": "Alvenix", "id": 5764299, "node_id": "MDQ6VXNlcjU3NjQyOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5764299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alvenix", "html_url": "https://github.com/Alvenix", "followers_url": "https://api.github.com/users/Alvenix/followers", "following_url": "https://api.github.com/users/Alvenix/following{/other_user}", "gists_url": "https://api.github.com/users/Alvenix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alvenix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alvenix/subscriptions", "organizations_url": "https://api.github.com/users/Alvenix/orgs", "repos_url": "https://api.github.com/users/Alvenix/repos", "events_url": "https://api.github.com/users/Alvenix/events{/privacy}", "received_events_url": "https://api.github.com/users/Alvenix/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55117/timeline", "performed_via_github_app": null, "state_reason": "completed"}