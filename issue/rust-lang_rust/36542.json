{"url": "https://api.github.com/repos/rust-lang/rust/issues/36542", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/36542/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/36542/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/36542/events", "html_url": "https://github.com/rust-lang/rust/issues/36542", "id": 177518920, "node_id": "MDU6SXNzdWUxNzc1MTg5MjA=", "number": 36542, "title": "Confusing error message when attempting to &mut a mutable reference", "user": {"login": "Ixrec", "id": 5285357, "node_id": "MDQ6VXNlcjUyODUzNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5285357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ixrec", "html_url": "https://github.com/Ixrec", "followers_url": "https://api.github.com/users/Ixrec/followers", "following_url": "https://api.github.com/users/Ixrec/following{/other_user}", "gists_url": "https://api.github.com/users/Ixrec/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ixrec/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ixrec/subscriptions", "organizations_url": "https://api.github.com/users/Ixrec/orgs", "repos_url": "https://api.github.com/users/Ixrec/repos", "events_url": "https://api.github.com/users/Ixrec/events{/privacy}", "received_events_url": "https://api.github.com/users/Ixrec/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-09-16T20:56:34Z", "updated_at": "2021-02-22T09:32:24Z", "closed_at": "2021-02-22T09:32:24Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Playground: https://play.rust-lang.org/?gist=0bde8d89f0ef683de58561b7cae3a096&version=nightly&backtrace=0\nCode:\n\n```\nfn foo(b: &mut u64) {\n    let x = &mut b;\n}\n\nfn main() {\n    let mut x = 42;\n    foo(&mut x);\n}\n```\n\nCurrent Error:\n\n```\nerror: cannot borrow immutable argument `b` as mutable\n --> <anon>:2:18\n  |\n1 | fn foo(b: &mut u64) {\n  |        - use `mut b` here to make mutable\n2 |     let x = &mut b;\n  |                  ^ cannot borrow mutably\n\nerror: aborting due to previous error\n```\n\nThis error is confusing because:\n- It refers to an argument of type &mut T as \"immutable\".\n- It explicitly suggests \"adding more muts\", when the correct solution is to remove the redundant \"&mut\".\n\nSome of the immediate reactions in #rust include:\n\n```\n[21:48:05] <Ixrec> the message ought to be more like \"cannot mutably borrow self because it's already a mutable reference\"\n[21:49:29] <misdreavus> \"hint: self is already &mut Foo, do you mean to make a &mut &mut Foo?\"\n[21:52:00] <sebk> \"self is already &mut\" would have explained it for me\n```\n\nI think misdreavus' suggestion might be the best and/or simplest option.\n", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/36542/reactions", "total_count": 11, "+1": 11, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/36542/timeline", "performed_via_github_app": null, "state_reason": "completed"}