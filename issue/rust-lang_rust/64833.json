{"url": "https://api.github.com/repos/rust-lang/rust/issues/64833", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/64833/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/64833/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/64833/events", "html_url": "https://github.com/rust-lang/rust/issues/64833", "id": 499295566, "node_id": "MDU6SXNzdWU0OTkyOTU1NjY=", "number": 64833, "title": "Failed to run `cargo rustc --profile=check -- -Zunstable-options --pretty=expanded` on simple code with comments", "user": {"login": "olegnn", "id": 6822848, "node_id": "MDQ6VXNlcjY4MjI4NDg=", "avatar_url": "https://avatars.githubusercontent.com/u/6822848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olegnn", "html_url": "https://github.com/olegnn", "followers_url": "https://api.github.com/users/olegnn/followers", "following_url": "https://api.github.com/users/olegnn/following{/other_user}", "gists_url": "https://api.github.com/users/olegnn/gists{/gist_id}", "starred_url": "https://api.github.com/users/olegnn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olegnn/subscriptions", "organizations_url": "https://api.github.com/users/olegnn/orgs", "repos_url": "https://api.github.com/users/olegnn/repos", "events_url": "https://api.github.com/users/olegnn/events{/privacy}", "received_events_url": "https://api.github.com/users/olegnn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1472563007, "node_id": "MDU6TGFiZWwxNDcyNTYzMDA3", "url": "https://api.github.com/repos/rust-lang/rust/labels/requires-nightly", "name": "requires-nightly", "color": "76dcde", "default": false, "description": "This issue requires a nightly compiler in some way."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-27T07:55:41Z", "updated_at": "2020-05-13T10:49:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Code:\r\n```rust\r\nfn main() {}\r\n/*\r\n*/\r\n```\r\nCommand (used to expand macros): \r\n```shell\r\nRUST_BACKTRACE=full cargo rustc --profile=check -- -Zunstable-options --pretty=expanded\r\n``` \r\nResult:\r\n```\r\nthread 'rustc' panicked at 'assertion failed: `(left == right)`\r\n  left: `2`,\r\n right: `1`', src/libsyntax/print/pprust.rs:491:17\r\nstack backtrace:\r\n   0:        0x109cd6155 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hfa26be1652cd9787\r\n   1:        0x109d0ce10 - core::fmt::write::h9204dad1f05752a2\r\n   2:        0x109cc97ab - std::io::Write::write_fmt::h3236e023140ca9e5\r\n   3:        0x109cda49a - std::panicking::default_hook::{{closure}}::h6b39e7bec1c0e07f\r\n   4:        0x109cda1a5 - std::panicking::default_hook::hd940c417edf5953e\r\n   5:        0x107236962 - rustc_driver::report_ice::he8f462601d7e6546\r\n   6:        0x109cdacd2 - std::panicking::rust_panic_with_hook::hb5f0fb06584b7c80\r\n   7:        0x109cda73d - std::panicking::continue_panic_fmt::hfee7d7df13a8f380\r\n   8:        0x109cda69e - std::panicking::begin_panic_fmt::hf84ec34c30992fe3\r\n   9:        0x108c59f71 - syntax::print::pprust::PrintState::print_comment::h24e7691f3cd985b3\r\n  10:        0x108c5259d - syntax::print::pprust::print_crate::h8bcae347660e5c9a\r\n  11:        0x1071df51f - rustc_driver::pretty::print_after_hir_lowering::{{closure}}::h84dff5163ceef5e6\r\n  12:        0x1071dded7 - rustc_driver::pretty::print_after_hir_lowering::h5c41c09a7531a919\r\n  13:        0x107205c7f - rustc_interface::passes::BoxedGlobalCtxt::access::{{closure}}::hc486952ecd38d4e9\r\n  14:        0x10732d5bb - rustc_interface::passes::create_global_ctxt::{{closure}}::h8852eb73e68f14aa\r\n  15:        0x1072068e0 - rustc_interface::interface::run_compiler_in_existing_thread_pool::h33cd099bc358d208\r\n  16:        0x1072382d4 - std::thread::local::LocalKey<T>::with::h2792dce5fe6fe5af\r\n  17:        0x10723c6d2 - scoped_tls::ScopedKey<T>::set::h16d79aeca6a52ed8\r\n  18:        0x107255575 - syntax::with_globals::h92b424eebfdbfd3d\r\n  19:        0x1071ca8ad - std::sys_common::backtrace::__rust_begin_short_backtrace::haa6aa3f0127b885d\r\n  20:        0x109ce9f7f - __rust_maybe_catch_panic\r\n  21:        0x1071fb427 - core::ops::function::FnOnce::call_once{{vtable.shim}}::hd2853b0c0007f607\r\n  22:        0x109cbbffe - <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once::h26e311d1235d42ea\r\n  23:        0x109ce8d8e - std::sys::unix::thread::Thread::new::thread_start::h3569effff07e966a\r\n  24:     0x7fff769f02eb - _pthread_body\r\n  25:     0x7fff769f3249 - _pthread_start\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.40.0-nightly (ddf43867a 2019-09-26) running on x86_64-apple-darwin\r\n\r\nnote: compiler flags: -Z unstable-options -C debuginfo=2 -C incremental --crate-type bin\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\nend of query stack\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/64833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/64833/timeline", "performed_via_github_app": null, "state_reason": null}