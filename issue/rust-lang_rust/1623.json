{"url": "https://api.github.com/repos/rust-lang/rust/issues/1623", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1623/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1623/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1623/events", "html_url": "https://github.com/rust-lang/rust/issues/1623", "id": 2942768, "node_id": "MDU6SXNzdWUyOTQyNzY4", "number": 1623, "title": "--prefix is broken in 0.1 distribution (rpath related)", "user": {"login": "thoughtpolice", "id": 3416, "node_id": "MDQ6VXNlcjM0MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoughtpolice", "html_url": "https://github.com/thoughtpolice", "followers_url": "https://api.github.com/users/thoughtpolice/followers", "following_url": "https://api.github.com/users/thoughtpolice/following{/other_user}", "gists_url": "https://api.github.com/users/thoughtpolice/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoughtpolice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoughtpolice/subscriptions", "organizations_url": "https://api.github.com/users/thoughtpolice/orgs", "repos_url": "https://api.github.com/users/thoughtpolice/repos", "events_url": "https://api.github.com/users/thoughtpolice/events{/privacy}", "received_events_url": "https://api.github.com/users/thoughtpolice/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2012-01-23T22:26:04Z", "updated_at": "2012-01-23T22:27:22Z", "closed_at": "2012-01-23T22:27:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "In an attempt to make a Homebrew formula for the 0.1 release, I noticed that `--prefix` seems somewhat broken.\n\nHere's the output from `brew install rust` on my branch:\n\n```\n$ brew install rust\n==> Downloading http://dl.rust-lang.org/dist/rust-0.1.tar.gz\nFile already downloaded in /Users/a/Library/Caches/Homebrew\n==> ./configure --prefix=/usr/local/Cellar/rust/0.1\n==> make\n==> make install\n$ /usr/local/Cellar/rust/0.1: 18 files, 32M, built in 11.4 minutes\n```\n\nSo it just does `./configure --prefix=...; make; make install` like the recommended installation instructions. Homebrew works by just installing into a special prefix for every formula, and then symlinking all the resulting binaries into `/usr/local` or where-ever brew is installed (as you can see above):\n\n```\n$ which rustc\n/usr/local/bin/rustc\n$ readlink `which rustc`\n../Cellar/rust/0.1/bin/rustc\n```\n\nWhen run, `rustc` spits out:\n\n```\n$ rustc\ndyld: Library not loaded: @loader_path/@rpath/librustrt.dylib\n  Referenced from: /usr/local/Cellar/rust/0.1/bin/../lib/libcore-14bd852465126fe7-0.1.dylib\n  Reason: image not found\n[1]    92198 trace trap  rustc\n\n```\n\nSo it seems to be something rpath related.\n", "closed_by": {"login": "thoughtpolice", "id": 3416, "node_id": "MDQ6VXNlcjM0MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thoughtpolice", "html_url": "https://github.com/thoughtpolice", "followers_url": "https://api.github.com/users/thoughtpolice/followers", "following_url": "https://api.github.com/users/thoughtpolice/following{/other_user}", "gists_url": "https://api.github.com/users/thoughtpolice/gists{/gist_id}", "starred_url": "https://api.github.com/users/thoughtpolice/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thoughtpolice/subscriptions", "organizations_url": "https://api.github.com/users/thoughtpolice/orgs", "repos_url": "https://api.github.com/users/thoughtpolice/repos", "events_url": "https://api.github.com/users/thoughtpolice/events{/privacy}", "received_events_url": "https://api.github.com/users/thoughtpolice/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1623/timeline", "performed_via_github_app": null, "state_reason": "completed"}