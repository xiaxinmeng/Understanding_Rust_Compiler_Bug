{"url": "https://api.github.com/repos/rust-lang/rust/issues/62637", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/62637/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/62637/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/62637/events", "html_url": "https://github.com/rust-lang/rust/issues/62637", "id": 467598655, "node_id": "MDU6SXNzdWU0Njc1OTg2NTU=", "number": 62637, "title": "Running out of RAM during compilation", "user": {"login": "optimalstrategy", "id": 17456182, "node_id": "MDQ6VXNlcjE3NDU2MTgy", "avatar_url": "https://avatars.githubusercontent.com/u/17456182?v=4", "gravatar_id": "", "url": "https://api.github.com/users/optimalstrategy", "html_url": "https://github.com/optimalstrategy", "followers_url": "https://api.github.com/users/optimalstrategy/followers", "following_url": "https://api.github.com/users/optimalstrategy/following{/other_user}", "gists_url": "https://api.github.com/users/optimalstrategy/gists{/gist_id}", "starred_url": "https://api.github.com/users/optimalstrategy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/optimalstrategy/subscriptions", "organizations_url": "https://api.github.com/users/optimalstrategy/orgs", "repos_url": "https://api.github.com/users/optimalstrategy/repos", "events_url": "https://api.github.com/users/optimalstrategy/events{/privacy}", "received_events_url": "https://api.github.com/users/optimalstrategy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252840, "node_id": "MDU6TGFiZWwyNjIyNTI4NDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-stable", "name": "regression-from-stable-to-stable", "color": "e4008a", "default": false, "description": "Performance or correctness regression from one stable version to another."}, {"id": 630799571, "node_id": "MDU6TGFiZWw2MzA3OTk1NzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compilemem", "name": "I-compilemem", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to memory usage during compilation."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-12T20:59:53Z", "updated_at": "2019-07-13T02:08:38Z", "closed_at": "2019-07-13T01:51:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\r\n\r\nIncorrectly closing the parentheses around an if expression causes the compiler to be stuck in endless recursion (probably), causing the computer to run out of memory. \r\n\r\nI encountered this bug while trying to return `Some(if cond { ... } else { ... })` from a function by accidentally placing the left parenthesis right after the if condition: `Some(if ...) { } else { }`.\r\n\r\nThe code below is the minimal example I came up with that reproduces the bug. Please run it carefully since it rapidly consumes RAM (2 GB/s on my machine).\r\n ```rust\r\n// t.rs\r\nfn main() { \r\n    (if true)\r\n}\r\n```\r\n\r\nCompiler output:\r\n```bash\r\n$ rustc t.rs\r\nerror: expected `{`, found `)`\r\n --> t.rs:2:13\r\n  |\r\n2 |     (if true)\r\n  |      --     ^ expected `{`\r\n  |      |\r\n  |      this `if` statement has a condition, but no block\r\n\r\nerror: expected expression, found `<eof>`\r\n --> t.rs:3:1\r\n  |\r\n3 | }\r\n  | ^ expected expression   # at this point the compiler is stuck\r\n^C\r\n```\r\n\r\n## Meta\r\nThe bug is present in both available for me compilers:\r\n```rust\r\n$ rustc --version --verbose\r\nrustc 1.37.0-nightly (7840a0b75 2019-05-31)\r\nbinary: rustc\r\ncommit-hash: 7840a0b753a065a41999f1fb6028f67d33e3fdd5\r\ncommit-date: 2019-05-31\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.37.0-nightly\r\nLLVM version: 8.0\r\n```\r\n\r\nand\r\n\r\n```bash\r\n$ rustc --version --verbose\r\nrustc 1.35.0 (3c235d560 2019-05-20)\r\nbinary: rustc\r\ncommit-hash: 3c235d5600393dfe6c36eeed34042efad8d4f26e\r\ncommit-date: 2019-05-20\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.35.0\r\nLLVM version: 8.0\r\n```\r\nMy OS is Arch Linux `5.1.11-arch1-1-ARCH`.", "closed_by": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/62637/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/62637/timeline", "performed_via_github_app": null, "state_reason": "completed"}