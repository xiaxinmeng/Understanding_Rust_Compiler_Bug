{"url": "https://api.github.com/repos/rust-lang/rust/issues/103423", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/103423/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/103423/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/103423/events", "html_url": "https://github.com/rust-lang/rust/issues/103423", "id": 1419619726, "node_id": "I_kwDOAAsO6M5Una2O", "number": 103423, "title": "large number of obligation produced in async code causing compiler stuck", "user": {"login": "skyzh", "id": 4198311, "node_id": "MDQ6VXNlcjQxOTgzMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4198311?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skyzh", "html_url": "https://github.com/skyzh", "followers_url": "https://api.github.com/users/skyzh/followers", "following_url": "https://api.github.com/users/skyzh/following{/other_user}", "gists_url": "https://api.github.com/users/skyzh/gists{/gist_id}", "starred_url": "https://api.github.com/users/skyzh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skyzh/subscriptions", "organizations_url": "https://api.github.com/users/skyzh/orgs", "repos_url": "https://api.github.com/users/skyzh/repos", "events_url": "https://api.github.com/users/skyzh/events{/privacy}", "received_events_url": "https://api.github.com/users/skyzh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 64037154, "node_id": "MDU6TGFiZWw2NDAzNzE1NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-compiletime", "name": "I-compiletime", "color": "e11d21", "default": false, "description": "Problems and improvements with respect to compile times."}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 1359848690, "node_id": "MDU6TGFiZWwxMzU5ODQ4Njkw", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-mcve", "name": "E-needs-mcve", "color": "02e10c", "default": false, "description": "Call for participation: This issue needs a Minimal Complete and Verifiable Example"}, {"id": 2413861294, "node_id": "MDU6TGFiZWwyNDEzODYxMjk0", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-untriaged", "name": "regression-untriaged", "color": "e4008a", "default": false, "description": "Untriaged performance or correctness regression."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2022-10-23T03:37:16Z", "updated_at": "2022-11-19T12:44:55Z", "closed_at": "2022-11-19T12:44:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a regression report! \ud83d\udc1b A regression is something that changed between versions of Rust but was not supposed to.\r\n\r\nPlease provide a short summary of the regression, along with any information you feel is relevant to replicate it.\r\n-->\r\n\r\n### Code\r\n\r\nI tried this code:\r\n\r\nhttps://github.com/risingwavelabs/risingwave/pull/5119\r\n\r\nSorry for not having a very good small reproduce of this issue. Basically we found our code will stuck when compiling after upgrading compiler to nightly-2022-10-16. I suspect this is related to a not-so-recent change of trait normalization -> https://github.com/rust-lang/rust/pull/102651.\r\n\r\nI modified `normalize.rs` in the Rust compiler on the latest master and find that some part of code is producing a large number of obligations. The highest one hits 4052 obligations.\r\n\r\nDigging it into a little bit, we found that the root cause is the `OrderedMergeIteratorInner` + `UnorderedMergeIteratorInner`, which produces ~50 obligations. And after some static dispatching with generic parameters, it exploded to 4052. For example, when we define something like `IteratorUnion<IteratorType1, IteratorType2, IteratorType3, IteratorType4>`, we will find about 4x50 obligations at the call site. If the code is wrapped in yet another enum that specializes some generics to two concrete types, it doubles again.\r\n\r\nAnyway, one interesting observation that can workaround the bug is here:\r\n\r\nhttps://github.com/risingwavelabs/risingwave/blob/a0b2a119d6b5843bde33f9937b0f1bed3e80e0c8/src/storage/src/hummock/iterator/merge_inner.rs#L306-L308\r\nhttps://github.com/risingwavelabs/risingwave/blob/a0b2a119d6b5843bde33f9937b0f1bed3e80e0c8/src/storage/src/hummock/iterator/merge_inner.rs#L265-L267\r\n\r\nOnce we erase the concrete future type and replace it with BoxFuture, the compiler no longer stuck and there won't be a large number of obligations.\r\n\r\n```rust\r\nfn unsafe_boxed_static_future<F, O>(f: F) -> BoxFuture<'static, O>\r\nwhere\r\n    F: Future<Output = O> + Send,\r\n{\r\n    let b = f.boxed();\r\n    unsafe { std::mem::transmute::<BoxFuture<'_, O>, BoxFuture<'static, O>>(b) }\r\n}\r\n\r\n\r\n        let f = unsafe_boxed_static_future(node.iter.next());\r\n\r\n        match f.await {\r\n```\r\n\r\nInterestingly, any of the below changes will cause obligations to increase again:\r\n\r\nmoving the function call into the match will increase number of obligations\r\n\r\n```rust\r\n        match unsafe_boxed_static_future(node.iter.next()).await {\r\n```\r\n\r\nthe original code before bumping toolchain\r\n\r\n```rust\r\n        match node.iter.next().await {\r\n```\r\n\r\nWhen the compiler stuck, it is resolving obligations like follows, which might take ~1sec at each call site that awaits a future including a MergeIterator.\r\n\r\n```\r\nnormalize::<rustc_middle::ty::subst::GenericArg>: with 52 obligations\r\nresult=Ok([static generator@src/storage/src/hummock/iterator/mod.rs:381:55: 386:6])\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>, RePlaceholder(Placeholder { universe: U2, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::sstable::forward_sstable_iterator::SstableIterator>, RePlaceholder(Placeholder { universe: U3, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U4, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, usize>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, usize>, RePlaceholder(Placeholder { universe: U4, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>>, RePlaceholder(Placeholder { universe: U5, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, RePlaceholder(Placeholder { universe: U6, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U7, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U7, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U7, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U7, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, ()>, RePlaceholder(Placeholder { universe: U6, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Forward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, hummock::sstable::forward_sstable_iterator::SstableIterator>, RePlaceholder(Placeholder { universe: U8, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U9, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U9, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U9, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U9, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U6, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Forward>, RePlaceholder(Placeholder { universe: U6, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::forward_sstable_iterator::SstableIterator>, RePlaceholder(Placeholder { universe: U4, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U10, name: BrAnon(1) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U11, name: BrAnon(11) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U11, name: BrAnon(12) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::forward_sstable_iterator::SstableIterator, RePlaceholder(Placeholder { universe: U4, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>, RePlaceholder(Placeholder { universe: U12, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, usize>, hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, RePlaceholder(Placeholder { universe: U13, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U14, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, usize>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, usize>, RePlaceholder(Placeholder { universe: U14, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>>, RePlaceholder(Placeholder { universe: U15, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, RePlaceholder(Placeholder { universe: U16, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U17, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U17, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U17, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U17, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>, ReStatic), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::merge_inner::MergeIteratorInner<hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, ()>, RePlaceholder(Placeholder { universe: U16, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::HummockIteratorUnion<hummock::iterator::Backward, hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, RePlaceholder(Placeholder { universe: U18, name: BrAnon(3) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::shared_buffer::shared_buffer_batch::SharedBufferBatchIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U19, name: BrAnon(2) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U19, name: BrAnon(4) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U19, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U19, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U16, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::PhantomHummockIterator<hummock::iterator::Backward>, RePlaceholder(Placeholder { universe: U16, name: BrAnon(8) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::iterator::concat_inner::ConcatIteratorInner<hummock::sstable::backward_sstable_iterator::BackwardSstableIterator>, RePlaceholder(Placeholder { universe: U14, name: BrAnon(6) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U20, name: BrAnon(1) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U21, name: BrAnon(11) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U21, name: BrAnon(12) })), []), depth=0)\r\n- Obligation(predicate=Binder(OutlivesPredicate(hummock::sstable::backward_sstable_iterator::BackwardSstableIterator, RePlaceholder(Placeholder { universe: U14, name: BrAnon(8) })), []), depth=0)\r\n```\r\n\r\n### Version it worked on\r\n\r\nnightly-07-29\r\n\r\n### Version with regression\r\n\r\n```\r\n5a0f454c021d9617c6c37ed2f703bf4a8f41c410\r\n```\r\n\r\n```\r\nnightly-2022-10-16\r\n```\r\n\r\n\r\n### Backtrace\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary>Backtrace</summary>\r\n<p>\r\n\r\n```\r\n<backtrace>\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n<!--\r\nIf you know when this regression occurred, please add a line like below, replacing `{channel}` with one of stable, beta, or nightly.\r\n\r\n@rustbot modify labels: +regression-from-stable-to-{channel} -regression-untriaged\r\n-->\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/103423/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/103423/timeline", "performed_via_github_app": null, "state_reason": "completed"}