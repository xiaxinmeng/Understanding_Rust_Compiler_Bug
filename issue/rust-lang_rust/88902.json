{"url": "https://api.github.com/repos/rust-lang/rust/issues/88902", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/88902/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/88902/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/88902/events", "html_url": "https://github.com/rust-lang/rust/issues/88902", "id": 994566388, "node_id": "MDU6SXNzdWU5OTQ1NjYzODg=", "number": 88902, "title": "Compiling large projects with over-heating CPUs causes weird crashes", "user": {"login": "Gelox", "id": 51002642, "node_id": "MDQ6VXNlcjUxMDAyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/51002642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gelox", "html_url": "https://github.com/Gelox", "followers_url": "https://api.github.com/users/Gelox/followers", "following_url": "https://api.github.com/users/Gelox/following{/other_user}", "gists_url": "https://api.github.com/users/Gelox/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gelox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gelox/subscriptions", "organizations_url": "https://api.github.com/users/Gelox/orgs", "repos_url": "https://api.github.com/users/Gelox/repos", "events_url": "https://api.github.com/users/Gelox/events{/privacy}", "received_events_url": "https://api.github.com/users/Gelox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-09-13T07:48:37Z", "updated_at": "2021-10-06T08:42:20Z", "closed_at": "2021-10-06T08:42:20Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for finding an Internal Compiler Error! \ud83e\uddca  If possible, try to provide\r\na minimal verifiable example. You can read \"Rust Bug Minimization Patterns\" for\r\nhow to create smaller examples.\r\n\r\nhttp://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/\r\n\r\n-->\r\n\r\nWhen I'm compiling a large project (500+ dependencies) then I will experience strange crashes usually due to SIGSEGV 11, sometimes due to other things.\r\nThis will happen after running for a while when my CPU starts getting high in temperature. I have other issues that are caused by over-heating CPUs so I find this to be the likely cause.\r\n\r\nAfter compiling about 150-300 dependencies then the compiler will crash with some errors message and then I'll have to recompile. Recompiling works fine, the already compiled dependencies will be in the cache so I'll redo it a couple of times and it works fine. Another piece of evidence that this is due to over-heating CPUs is that the longer I wait between recompiles the longer it is able to run without crashing.\r\n\r\nHere is an error I got today caused by this issue.\r\n\r\n### Meta\r\n<!--\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions.\r\n-->\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.55.0 (c8dfcfe04 2021-09-06)\r\nbinary: rustc\r\ncommit-hash: c8dfcfe046a7680554bf4eb612bad840e7631c4b\r\ncommit-date: 2021-09-06\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.55.0\r\nLLVM version: 12.0.1\r\n```\r\n\r\n### Error output\r\n\r\n```\r\nthread 'rustc' panicked at 'index out of bounds: the len is 971 but the index is 2132081228', compiler/rustc_span/src/hygiene.rs:389:9\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md\r\n\r\nnote: rustc 1.55.0 (c8dfcfe04 2021-09-06) running on x86_64-unknown-linux-gnu\r\n\r\nnote: compiler flags: -C embed-bitcode=no -C debuginfo=2 --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nquery stack during panic:\r\nend of query stack\r\nerror: could not compile `object`\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n```\r\n\r\n<!--\r\nInclude a backtrace in the code block by setting `RUST_BACKTRACE=1` in your\r\nenvironment. E.g. `RUST_BACKTRACE=1 cargo build`.\r\n-->\r\n<details><summary><strong>Backtrace</strong></summary>\r\n<p>\r\n\r\n```\r\n/home/user/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/../lib/librustc_driver-2d8919e595cbef4e.so(+0x52fca3)[0x7f1588c30ca3]\r\n/usr/lib/libpthread.so.0(+0x13870)[0x7f1588353870]\r\nerror: could not compile `reqwest`\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name reqwest --edition=2018 /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/reqwest-0.10.10/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 --cfg 'feature=\"__tls\"' --cfg 'feature=\"blocking\"' --cfg 'feature=\"default\"' --cfg 'feature=\"default-tls\"' --cfg 'feature=\"hyper-tls\"' --cfg 'feature=\"json\"' --cfg 'feature=\"native-tls-crate\"' --cfg 'feature=\"serde_json\"' --cfg 'feature=\"tokio-tls\"' -C metadata=df5ad68783142d89 -C extra-filename=-df5ad68783142d89 --out-dir <--removed--> -L dependency=<--removed-personal-info-->-b47fd69f7fd43a4e.rmeta --cap-lints allow` (signal: 11, SIGSEGV: invalid memory reference)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\n", "closed_by": {"login": "Gelox", "id": 51002642, "node_id": "MDQ6VXNlcjUxMDAyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/51002642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gelox", "html_url": "https://github.com/Gelox", "followers_url": "https://api.github.com/users/Gelox/followers", "following_url": "https://api.github.com/users/Gelox/following{/other_user}", "gists_url": "https://api.github.com/users/Gelox/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gelox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gelox/subscriptions", "organizations_url": "https://api.github.com/users/Gelox/orgs", "repos_url": "https://api.github.com/users/Gelox/repos", "events_url": "https://api.github.com/users/Gelox/events{/privacy}", "received_events_url": "https://api.github.com/users/Gelox/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/88902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/88902/timeline", "performed_via_github_app": null, "state_reason": "completed"}