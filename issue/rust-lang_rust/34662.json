{"url": "https://api.github.com/repos/rust-lang/rust/issues/34662", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34662/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34662/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34662/events", "html_url": "https://github.com/rust-lang/rust/issues/34662", "id": 163873221, "node_id": "MDU6SXNzdWUxNjM4NzMyMjE=", "number": 34662, "title": "Failure of pretty-huge-vec.rs on nightly bots", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-07-05T15:04:29Z", "updated_at": "2016-07-05T20:02:47Z", "closed_at": "2016-07-05T20:02:47Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "On the Linux bots (where these tests passed) the GDB we're running is:\n\n```\nGNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1\n```\n\nwhereas on the nightly bots (slightly different due to build funkiness) the GDB is custom-built and is:\n\n```\nGNU gdb (GDB) 7.11\n```\n\nUnfortunately the test added [here](https://github.com/rust-lang/rust/pull/34639) is [failing](https://buildbot.rust-lang.org/builders/nightly-dist-rustc-linux/builds/576/steps/distcheck/logs/stdio) on the nightly bot ([full logs](https://buildbot.rust-lang.org/builders/nightly-dist-rustc-linux/builds/576/steps/distcheck/logs/stdio/text)):\n\n```\n\nfailures:\n\n---- [debuginfo-gdb] debuginfo-gdb/pretty-huge-vec.rs stdout ----\n    NOTE: compiletest thinks it is using GDB version 7.11\n\nerror: line not found in debugger output: $1 = Vec<u8>(len: 1000000000, cap: 1000000000) = {[...]...}\nstatus: exit code: 0\ncommand: gdb -quiet -batch -nx -command=x86_64-unknown-linux-gnu/test/debuginfo-gdb/pretty-huge-vec.debugger.script\nstdout:\n------------------------------------------\nGNU gdb (GDB) 7.11\nCopyright (C) 2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<http://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\nBreakpoint 1 at 0xcac: file /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/tmp/distcheck/rustc-nightly/src/test/debuginfo/pretty-huge-vec.rs, line 38.\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\n\nBreakpoint 1, pretty_huge_vec::main () at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/tmp/distcheck/rustc-nightly/src/test/debuginfo/pretty-huge-vec.rs:38\n38      zzz(); // #break\n$1 = Vec<u8>(len: 1000000000, cap: 1000000000)\n$2 = &[u8](len: 1000000000)\nA debugging session is active.\n\n    Inferior 1 [process 25786] will be killed.\n\nQuit anyway? (y or n) [answered Y; input not from terminal]\n\n------------------------------------------\nstderr:\n------------------------------------------\nPython Exception <type 'exceptions.MemoryError'> : \nPython Exception <type 'exceptions.MemoryError'> : \n\n------------------------------------------\n\nthread '[debuginfo-gdb] debuginfo-gdb/pretty-huge-vec.rs' panicked at 'explicit panic', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/obj/tmp/distcheck/rustc-nightly/src/tools/compiletest/src/runtest.rs:2243\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\n\n\nfailures:\n    [debuginfo-gdb] debuginfo-gdb/pretty-huge-vec.rs\n\ntest result: FAILED. 100 passed; 1 failed; 3 ignored; 0 measured\n```\n\nMaybe this fix only applies to older GDB versions? Maybe we need to recompile gdb somewhat differently than [what we do today](https://github.com/rust-lang/rust-buildbot/blob/master/slaves/dist/build_gdb.sh)?\n\n---\n\nNote that this is a placeholder issue for a PR I'm about to send, if we manage to resolve I'd love to close out quickly!\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34662/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34662/timeline", "performed_via_github_app": null, "state_reason": "completed"}