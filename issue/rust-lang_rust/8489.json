{"url": "https://api.github.com/repos/rust-lang/rust/issues/8489", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8489/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8489/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8489/events", "html_url": "https://github.com/rust-lang/rust/issues/8489", "id": 17980971, "node_id": "MDU6SXNzdWUxNzk4MDk3MQ==", "number": 8489, "title": "Figure out the default `ifmt` trait", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2013-08-13T06:16:08Z", "updated_at": "2013-08-19T16:56:24Z", "closed_at": "2013-08-19T16:56:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When using `ifmt`, a format argument can be simple as `{}` which means \"the next argument\" formatted as \"the default\". Currently the default is the `?` or `fmt::Poly` format trait, but this could be changed. There are a few options here that we could take:\n1. Stick with `Poly`. This means that every type can be logged via `{}` by default, although some output may not be as expected. This also means it's not overridable.\n2. Define default for `T: ToStr`. This would basically call `to_str()` on the argument, and it would fail if you don't ascribe to the `ToStr` trait. The downside of this is that if you implement `ToStr` you can't override your default formatting representation.\n3. Create an entirely new `fmt::Default` trait. All the basic types would implement this with their respective formats. This could possibly remove the need for the `s`, `d`, `u`, `i`, `c`, and `p` traits, but that may need to be a separate issue.\n\nI think the current default of `Poly` is probably a bad idea, and I'm starting to lean towards the `Default` trait. I think that for formatting specifiers (like `{:.10s}`) we would want to keep the other formats, but this means that any type could implement `Default` however it pleases. It also means that 99% of the formats done today could just be a dead-simple `{}` (although that's just a guess).\n\nOne note on performance, anything implementing the `Default` may not have to worry about format specifiers/flags/etc because the format specifier grammar wouldn't allow specifying these flags without specifying a format string (like `s` or `d`), and there's no reason that a format string for `Default` has to be defined... That's kinda a side note though.\n\nNominating for the backwards compatibility milestone as well (especially because the default is `?` today.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8489/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8489/timeline", "performed_via_github_app": null, "state_reason": "completed"}