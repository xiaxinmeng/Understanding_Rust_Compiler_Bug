{"url": "https://api.github.com/repos/rust-lang/rust/issues/8707", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/8707/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/8707/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/8707/events", "html_url": "https://github.com/rust-lang/rust/issues/8707", "id": 18466013, "node_id": "MDU6SXNzdWUxODQ2NjAxMw==", "number": 8707, "title": "Infinite recursion in librustc::metadata::decoder", "user": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2013-08-23T11:41:31Z", "updated_at": "2013-08-30T20:16:34Z", "closed_at": "2013-08-30T20:16:34Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I\u2019m working on [a patch for Servo](https://github.com/SimonSapin/servo/tree/newnewcss) (commit c12c7a6) that only adds a bunch of code in its \"script\" crate. Servo before my patch builds fine. The same code in its own crate builds fine. The script crate itself with my code added builds fine. It\u2019s only Servo\u2019s \"main\" crate, which links against \"script\", that sends rust in an infinite loop.\n\ngdb shows the stack trace below, except it goes to 3000 or so frames after a few minutes, and growing.\n\nRust version: rustc 0.8-pre (72b50e7 2013-08-16 01:56:16 -0700)\nColorized stack trace: http://pastebin.com/Tg7APRi2\n\n```\n#0  0x00007fc049d5095b in hashmap::__extensions__::bucket_for_key_with_hash_50288::anon::expr_fn_50301 ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#1  0x00007fc049d5055f in hashmap::__extensions__::bucket_sequence_50290::_f480b8be39c3ec7::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#2  0x00007fc049d5049b in hashmap::__extensions__::bucket_for_key_with_hash_50288::_1fab551126e8674a::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#3  0x00007fc049d503eb in hashmap::__extensions__::bucket_for_key_50286::_e8c863cbc639f::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#4  0x00007fc049d502f9 in hashmap::__extensions__::find_50283::_ebf445d0cf0c6b1::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#5  0x00007fc049d4e089 in middle::resolve::__extensions__::meth_50280::add_child::_9bc551b669fa7eeb::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#6  0x00007fc049d634af in middle::resolve::__extensions__::build_reduced_graph_for_external_crate::anon::expr_fn_50939 ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#7  0x00007fc04a527ae8 in metadata::decoder::__extensions__::meth_92212::process_item_and_pop_name::_ed3a72451bee9133::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#8  0x00007fc04a528da9 in metadata::decoder::__extensions__::each_child_of_module_or_crate::anon::expr_fn_92220 ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#9  0x00007fc04b07512a in ebml::reader::tagged_docs::_669199c64346a9a7::_0$x2e8$x2dpre ()\n   from lib/libextra-a7c050cfd46b2c9a-0.8-pre.so\n#10 0x00007fc04a52843f in metadata::decoder::__extensions__::meth_92217::each_child_of_module_or_crate::_10e45c12b3c2e244::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#11 0x00007fc04a5282e2 in metadata::decoder::__extensions__::meth_92215::each_item_of_module::_182d9722d1c9f691::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#12 0x00007fc04a527c4d in metadata::decoder::__extensions__::meth_92212::process_item_and_pop_name::_ed3a72451bee9133::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#13 0x00007fc04a528da9 in metadata::decoder::__extensions__::each_child_of_module_or_crate::anon::expr_fn_92220 ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#14 0x00007fc04b07512a in ebml::reader::tagged_docs::_669199c64346a9a7::_0$x2e8$x2dpre ()\n   from lib/libextra-a7c050cfd46b2c9a-0.8-pre.so\n#15 0x00007fc04a52843f in metadata::decoder::__extensions__::meth_92217::each_child_of_module_or_crate::_10e45c12b3c2e244::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#16 0x00007fc04a5282e2 in metadata::decoder::__extensions__::meth_92215::each_item_of_module::_182d9722d1c9f691::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#17 0x00007fc04a527c4d in metadata::decoder::__extensions__::meth_92212::process_item_and_pop_name::_ed3a72451bee9133::_0$x2e8$x2dpre ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n#18 0x00007fc04a5295f8 in metadata::decoder::__extensions__::each_child_of_module_or_crate::anon::expr_fn_92222 ()\n   from lib/librustc-d3cb8c2ccd84a7a7-0.8-pre.so\n```\n", "closed_by": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/8707/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/8707/timeline", "performed_via_github_app": null, "state_reason": "completed"}