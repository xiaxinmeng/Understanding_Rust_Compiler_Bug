{"url": "https://api.github.com/repos/rust-lang/rust/issues/70431", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/70431/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/70431/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/70431/events", "html_url": "https://github.com/rust-lang/rust/issues/70431", "id": 588448604, "node_id": "MDU6SXNzdWU1ODg0NDg2MDQ=", "number": 70431, "title": "rustdoc on a standalone markdown file fails with an unclear error message", "user": {"login": "TimotheeGerber", "id": 37541513, "node_id": "MDQ6VXNlcjM3NTQxNTEz", "avatar_url": "https://avatars.githubusercontent.com/u/37541513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimotheeGerber", "html_url": "https://github.com/TimotheeGerber", "followers_url": "https://api.github.com/users/TimotheeGerber/followers", "following_url": "https://api.github.com/users/TimotheeGerber/following{/other_user}", "gists_url": "https://api.github.com/users/TimotheeGerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimotheeGerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimotheeGerber/subscriptions", "organizations_url": "https://api.github.com/users/TimotheeGerber/orgs", "repos_url": "https://api.github.com/users/TimotheeGerber/repos", "events_url": "https://api.github.com/users/TimotheeGerber/events{/privacy}", "received_events_url": "https://api.github.com/users/TimotheeGerber/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-26T14:07:50Z", "updated_at": "2020-03-28T20:10:59Z", "closed_at": "2020-03-28T20:10:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried this command:\r\n\r\n```\r\nrustdoc README.md\r\n```\r\n\r\nI expected the command to finish without error and the creation of the file `README.html` or `doc/README.html`.\r\n\r\nInstead, I got the following error message:\r\n```\r\nerror: doc/README.html: No such file or directory (os error 2)\r\n```\r\nIndeed, this file does not exist and we expected the command to create it! The error message is not really helping in this case and does not explain that it cannot create the file because the directory `doc/` does not exists.\r\n\r\nWhen launched on a standalone markdown file, `rustdoc` expects the output directory to exist. It is not created if missing (as it is the case when launched on `*.rs` file or with cargo doc), even if we specify it with `--output` argument.\r\n\r\nI see two solutions to the problem:\r\n - change the error message and tell the user that the output directory (which default to `doc/`) does not exist;\r\n - recursively create the output directory.\r\n\r\nI can propose a PR to close this issue. I just need someone to tell me which solutions to code. I think that the second solution would be a better choice as it would be more consistent with the other `rustdoc` uses case (on `*.rs` files or with cargo doc) which create the output directory.\r\n\r\n### Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.44.0-nightly (a5fb9ae5b 2020-03-25)\r\nbinary: rustc\r\ncommit-hash: a5fb9ae5b2ed3cb011ada9dc1e8633aa0927f279\r\ncommit-date: 2020-03-25\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.44.0-nightly\r\nLLVM version: 9.0\r\n```\r\nThis bug is also present on the current stable release (v 1.42).", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/70431/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/70431/timeline", "performed_via_github_app": null, "state_reason": "completed"}