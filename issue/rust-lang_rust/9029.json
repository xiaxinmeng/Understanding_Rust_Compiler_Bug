{"url": "https://api.github.com/repos/rust-lang/rust/issues/9029", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9029/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9029/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9029/events", "html_url": "https://github.com/rust-lang/rust/issues/9029", "id": 19131975, "node_id": "MDU6SXNzdWUxOTEzMTk3NQ==", "number": 9029, "title": "buffered_file_writer always truncates", "user": {"login": "JeffMurray", "id": 4346807, "node_id": "MDQ6VXNlcjQzNDY4MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4346807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffMurray", "html_url": "https://github.com/JeffMurray", "followers_url": "https://api.github.com/users/JeffMurray/followers", "following_url": "https://api.github.com/users/JeffMurray/following{/other_user}", "gists_url": "https://api.github.com/users/JeffMurray/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffMurray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffMurray/subscriptions", "organizations_url": "https://api.github.com/users/JeffMurray/orgs", "repos_url": "https://api.github.com/users/JeffMurray/repos", "events_url": "https://api.github.com/users/JeffMurray/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffMurray/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2013-09-06T22:31:56Z", "updated_at": "2013-10-30T13:00:17Z", "closed_at": "2013-10-30T13:00:17Z", "author_association": "NONE", "active_lock_reason": null, "body": "I need to do do a lot of seeking and writing to pre-assigned file positions for files that can grow to 1.4 GB or so.\n\nI have noticed that the buffered_file_writer is the only writer in io.rs that will seek.  It also seems to truncate a file every time it opens one.\n\nI see the writer sends the \"w\" flag to the libc fopen function, and I have never understood that flag to indicate truncating on open.\n\nI am not sure if this is a bug, or if I am trying to use the buffered_file_writer for something it was not intended for.\n\nThanks.\n\nextern mod std;\n\nfn main() {\n\n```\n{\n    let writer = std::io::buffered_file_writer( &Path( \"want_to_live.txt\" ) ).get();\n    writer.write( \"I want to live.\".as_bytes() );\n    writer.flush();\n}\n{\n    // size is: 15\n    println( \"size is: \" + Path( \"want_to_live.txt\" ).get_size().get().to_str() ); \n    std::io::buffered_file_writer( &Path( \"want_to_live.txt\" ) ).get();\n}\n// size is: 0\nprintln( \"size is: \" + Path( \"want_to_live.txt\" ).get_size().get().to_str() ); \n```\n\n}\n", "closed_by": {"login": "JeffMurray", "id": 4346807, "node_id": "MDQ6VXNlcjQzNDY4MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4346807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffMurray", "html_url": "https://github.com/JeffMurray", "followers_url": "https://api.github.com/users/JeffMurray/followers", "following_url": "https://api.github.com/users/JeffMurray/following{/other_user}", "gists_url": "https://api.github.com/users/JeffMurray/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffMurray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffMurray/subscriptions", "organizations_url": "https://api.github.com/users/JeffMurray/orgs", "repos_url": "https://api.github.com/users/JeffMurray/repos", "events_url": "https://api.github.com/users/JeffMurray/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffMurray/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/9029/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9029/timeline", "performed_via_github_app": null, "state_reason": "completed"}