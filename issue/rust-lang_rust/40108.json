{"url": "https://api.github.com/repos/rust-lang/rust/issues/40108", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/40108/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/40108/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/40108/events", "html_url": "https://github.com/rust-lang/rust/issues/40108", "id": 210280898, "node_id": "MDU6SXNzdWUyMTAyODA4OTg=", "number": 40108, "title": "Rust source make install fails due to missing vendor folder", "user": {"login": "itarato", "id": 49009, "node_id": "MDQ6VXNlcjQ5MDA5", "avatar_url": "https://avatars.githubusercontent.com/u/49009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itarato", "html_url": "https://github.com/itarato", "followers_url": "https://api.github.com/users/itarato/followers", "following_url": "https://api.github.com/users/itarato/following{/other_user}", "gists_url": "https://api.github.com/users/itarato/gists{/gist_id}", "starred_url": "https://api.github.com/users/itarato/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itarato/subscriptions", "organizations_url": "https://api.github.com/users/itarato/orgs", "repos_url": "https://api.github.com/users/itarato/repos", "events_url": "https://api.github.com/users/itarato/events{/privacy}", "received_events_url": "https://api.github.com/users/itarato/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}, {"id": 419557634, "node_id": "MDU6TGFiZWw0MTk1NTc2MzQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-medium", "name": "E-medium", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Medium / intermediate"}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 33, "created_at": "2017-02-26T03:20:45Z", "updated_at": "2019-04-02T18:55:46Z", "closed_at": "2019-04-02T18:55:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was building Rust (branch master) from source. `./configure` and `make` completed without any problems, however `sudo make install` immediately fails with the following problem:\r\n\r\n```shell\r\nsudo make install\r\ninfo: looks like you are running this command under `sudo`\r\n      and so in order to preserve your $HOME this will now\r\n      use vendored sources by default. Note that if this\r\n      does not work you should run a normal build first\r\n      before running a command like `sudo make install`\r\nerror: failed to load source for a dependency on `toml`\r\n\r\nCaused by:\r\n  Unable to update registry https://github.com/rust-lang/crates.io-index\r\n\r\nCaused by:\r\n  failed to update replaced source `registry https://github.com/rust-lang/crates.io-index`\r\n\r\nCaused by:\r\n  failed to read root of directory source: /mnt/shared/Checkout/rust/src/vendor\r\n\r\nTo learn more, run the command again with --verbose.\r\nMakefile:71: recipe for target 'install' failed\r\nmake: *** [install] Error 101\r\n```\r\nThe `error: failed to load source for a dependency on 'toml'` line is complaining about seemingly rangom things, such as cmake, toml or getopts. However the last line (`failed to read root of directory source: /mnt/shared/Checkout/rust/src/vendor`) is odd as it doesn't have any `src/vendor` folder and this kind of error is more likely on Rust projects using cargo.toml.\r\n\r\nFor reference, my build env:\r\n- os: Ubuntu 16.04\r\n- clang 3.8\r\n- python 2.7\r\n- make 4.1\r\n- cmake 3.5.1\r\n- curl 7.47\r\n- git 2.7\r\n\r\nI also have already installed via the official rustup script.\r\n\r\nSo far no luck getting closer to what would cause this. Do you have any idea where to look for?", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/40108/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/40108/timeline", "performed_via_github_app": null, "state_reason": "completed"}