{"url": "https://api.github.com/repos/rust-lang/rust/issues/18617", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/18617/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/18617/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/18617/events", "html_url": "https://github.com/rust-lang/rust/issues/18617", "id": 47717505, "node_id": "MDU6SXNzdWU0NzcxNzUwNQ==", "number": 18617, "title": "Using Rust on windows install guide will lead you to a bad bad place.", "user": {"login": "blairn", "id": 491285, "node_id": "MDQ6VXNlcjQ5MTI4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/491285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blairn", "html_url": "https://github.com/blairn", "followers_url": "https://api.github.com/users/blairn/followers", "following_url": "https://api.github.com/users/blairn/following{/other_user}", "gists_url": "https://api.github.com/users/blairn/gists{/gist_id}", "starred_url": "https://api.github.com/users/blairn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blairn/subscriptions", "organizations_url": "https://api.github.com/users/blairn/orgs", "repos_url": "https://api.github.com/users/blairn/repos", "events_url": "https://api.github.com/users/blairn/events{/privacy}", "received_events_url": "https://api.github.com/users/blairn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2014-11-04T14:17:51Z", "updated_at": "2014-11-11T12:57:06Z", "closed_at": "2014-11-11T12:57:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "https://github.com/rust-lang/rust/wiki/Using-Rust-on-Windows is very incomplete... or rather, it will direct people into a minefield (eventually).\n\nThe problem is, you don't have all the libraries that would normally come with a mingw install. So the moment you want to link into... say... gdi32 then unless you are a c++ programmer, and know what is about to happen, things will go badly for you.\n\nThis is because you will need a copy of libgdi32.a, and there is MANY wrong ways of getting this file.\n\nYou COULD install mingw to get it... in which case, if you pick the wrong version (which - there are many to choose from) you will stop being able to compile anything, as it will use the new mingw install over the one inside the Rust installed directory.\n\nEven then, say you realize what has gone wrong.. which is not easy given errors like...\nC:\\projects\\myproj\\target\\myproj.o: file not recognized: File format not recognized collect2.exe: error: ld returned 1 exit status\n\nand remove the install of mingw (or at least move it). You still need to grab the libgdi32.a file from it and put it into the \\users\\%user%.rust directory so rust will find it. I'm not sure that is documented anywhere.\n\neven then, chances are... you will get a \nld: skipping incompatible C:\\Users\\myuser.rust\\libgdi32.a when searching for -lgdi32\n\nand still fail to build.\n\nMy guess is you need an exact version match of mingw to get the normally used windows libraries to link to. \n\nCan we either \n1) put them in our install?\n2) put in an installer so we can grab them\n3) Put in the documentation how to grab the mingw libraries you will be linking to if you are building on windows because you are needing to build an app there.\nor 4) find a way to remove ourselves from having to use mingw for everything on windows.\n\nAll of the document you can find around these problems on the net are all c++ things, and given we have a built in mingw, they are all wrong.\n", "closed_by": {"login": "blairn", "id": 491285, "node_id": "MDQ6VXNlcjQ5MTI4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/491285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blairn", "html_url": "https://github.com/blairn", "followers_url": "https://api.github.com/users/blairn/followers", "following_url": "https://api.github.com/users/blairn/following{/other_user}", "gists_url": "https://api.github.com/users/blairn/gists{/gist_id}", "starred_url": "https://api.github.com/users/blairn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blairn/subscriptions", "organizations_url": "https://api.github.com/users/blairn/orgs", "repos_url": "https://api.github.com/users/blairn/repos", "events_url": "https://api.github.com/users/blairn/events{/privacy}", "received_events_url": "https://api.github.com/users/blairn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/18617/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/18617/timeline", "performed_via_github_app": null, "state_reason": "completed"}