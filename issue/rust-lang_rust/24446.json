{"url": "https://api.github.com/repos/rust-lang/rust/issues/24446", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/24446/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/24446/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/24446/events", "html_url": "https://github.com/rust-lang/rust/issues/24446", "id": 68582992, "node_id": "MDU6SXNzdWU2ODU4Mjk5Mg==", "number": 24446, "title": "ICE (1.0.0-beta): \"no type for node ... in fcx\" with function-local static Fn", "user": {"login": "whipsch", "id": 95411, "node_id": "MDQ6VXNlcjk1NDEx", "avatar_url": "https://avatars.githubusercontent.com/u/95411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whipsch", "html_url": "https://github.com/whipsch", "followers_url": "https://api.github.com/users/whipsch/followers", "following_url": "https://api.github.com/users/whipsch/following{/other_user}", "gists_url": "https://api.github.com/users/whipsch/gists{/gist_id}", "starred_url": "https://api.github.com/users/whipsch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whipsch/subscriptions", "organizations_url": "https://api.github.com/users/whipsch/orgs", "repos_url": "https://api.github.com/users/whipsch/repos", "events_url": "https://api.github.com/users/whipsch/events{/privacy}", "received_events_url": "https://api.github.com/users/whipsch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-04-15T05:47:09Z", "updated_at": "2015-04-30T22:41:59Z", "closed_at": "2015-04-30T22:41:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Abbreviated backtrace:\n\n```\nerror: internal compiler error: no type for node 14: expr 0 (id=14) in fcx 0x43ed4e0\nthread 'rustc' panicked at 'Box<Any>', C:/bot/slave/beta-dist-rustc-win-64/build/src/libsyntax\\diagnostic.rs:190\n\nstack backtrace:\n   7:          0x1684ea2 - check::FnCtxt<'a, 'tcx>.ty..ClosureTyper<'tcx>::closure_upvars::hd9de0cb59cfad129xJn\n   8:          0x16bb064 - check::regionck::Rcx<'a, 'tcx>.Visitor<'v>::visit_local::hf1f7eef7520e38941Ed\n   9:          0x16bc301 - check::FnCtxt<'a, 'tcx>.mc..Typer<'tcx>::node_ty::h4717180cfe88525eQEn\n  10:          0x1714e16 - check::FnCtxt<'a, 'tcx>.mc..Typer<'tcx>::is_method_call::ha5a9873524740db0vHn\n  11:          0x171233f - check::FnCtxt<'a, 'tcx>.mc..Typer<'tcx>::is_method_call::ha5a9873524740db0vHn\n  12:          0x170c90e - check::upvar::AdjustBorrowKind<'a, 'tcx>.Visitor<'v>::visit_fn::h83a9049482b77a0e5Lk\n  13:          0x170b644 - check::upvar::SeedBorrowKind<'a, 'tcx>.Visitor<'v>::visit_fn::h96b2ebc2922ab678Yjk\n  14:          0x170ada6 - check::upvar::SeedBorrowKind<'a, 'tcx>.Visitor<'v>::visit_fn::h96b2ebc2922ab678Yjk\n  15:          0x17487b1 - check::CheckItemTypesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_ty::hf5a010d1c8a756d3RNn\n  16:          0x17426d2 - check::CheckItemTypesVisitor<'a, 'tcx>.Visitor<'tcx>::visit_item::hcf32b798d03f5730vNn\n```\n\nReproduce: ([playpen](http://is.gd/eMEEMo))\n\n``` rust\nfn main() {\n    static foo: Fn() -> u32 = || -> u32 {\n        0\n    };\n}\n```\n\nThe error message provided when doing the above with a let binding instead may be useful:\n\n```\nkaboom.rs:2:28: 4:6 error: mismatched types:\n(expected trait core::ops::Fn, found closure) [E0308]\n\nkaboom.rs:2:9: 2:12 error: the trait `core::marker::Sized` is not implemented for the type `core::ops::Fn() -> u32` [E0277]\nkaboom.rs:2:9: 2:12 note: `core::ops::Fn() -> u32` does not have a constant size known at compile-time\nkaboom.rs:2     let foo: Fn() -> u32 = || -> u32 {\n                    ^~~\n```\n\nLooks to be related to PR #20897, however the change there has a rather catch-all appearance to it, so there is likely more to this particular ICE.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/24446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/24446/timeline", "performed_via_github_app": null, "state_reason": "completed"}