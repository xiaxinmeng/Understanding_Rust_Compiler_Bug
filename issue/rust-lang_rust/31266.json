{"url": "https://api.github.com/repos/rust-lang/rust/issues/31266", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31266/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31266/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31266/events", "html_url": "https://github.com/rust-lang/rust/issues/31266", "id": 129551922, "node_id": "MDU6SXNzdWUxMjk1NTE5MjI=", "number": 31266, "title": "Problem in \"The Rust Programming Language\" 5.7 \"Error Handling\"", "user": {"login": "oxeb", "id": 6217455, "node_id": "MDQ6VXNlcjYyMTc0NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6217455?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oxeb", "html_url": "https://github.com/oxeb", "followers_url": "https://api.github.com/users/oxeb/followers", "following_url": "https://api.github.com/users/oxeb/following{/other_user}", "gists_url": "https://api.github.com/users/oxeb/gists{/gist_id}", "starred_url": "https://api.github.com/users/oxeb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oxeb/subscriptions", "organizations_url": "https://api.github.com/users/oxeb/orgs", "repos_url": "https://api.github.com/users/oxeb/repos", "events_url": "https://api.github.com/users/oxeb/events{/privacy}", "received_events_url": "https://api.github.com/users/oxeb/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-01-28T19:24:28Z", "updated_at": "2016-01-30T14:50:53Z", "closed_at": "2016-01-30T14:50:53Z", "author_association": "NONE", "active_lock_reason": null, "body": "Under the heading \"Composing Option<T> values\" in Section 5.7 of the Rust Programming Language at https://doc.rust-lang.org/book/error-handling.html, a function is defined:\n\n```\nfn map<F, T, A>(option: Option<T>, f: F) -> Option<A> where F: FnOnce(T) -> A {\n```\n\nA later example invokes appears to invoke this function:\n\n``` rust\nfn extension(file_name: &str) -> Option<&str> {\n    find(file_name, '.').map(|i| &file_name[i+1..])\n}\n```\n\nThis compiles but I believe it is not using this version of map presented in the book, but rather it is using the one from the standard library.  If you rename the function to z_map to distinguish them you get the following message:\n\n``` text\n<anon>:18:26: 18:54 error: no method named `z_map` found for type `core::option::Option<usize>` in the current scope\n<anon>:18     find(file_name, '.').z_map(|i| &file_name[i+1..])\n```\n\nI believe that this an error in the book because the function presented does not use self, &self, or &mut self as the first parameter and thus cannot use dot syntax for calling map.  However, it may be intended to call the real map function and not the one in the prior example.  If that is the case I find this area confusing and would suggest that this is changed or clarified.  I think changing the name of the example function would be sufficient personally.\n\nLater in the same area of the book there is another similar example function:\n\n``` rust\nfn unwrap_or<T>(option: Option<T>, default: T) -> T {\n```\n\nand then for the example following it, a note:\n\n(Note that unwrap_or is defined as a method on Option<T> in the standard library, so we use that here instead of the free-standing function we defined above.\n\nThat would be a great inclusion too.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31266/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31266/timeline", "performed_via_github_app": null, "state_reason": "completed"}