{"url": "https://api.github.com/repos/rust-lang/rust/issues/30927", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/30927/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/30927/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/30927/events", "html_url": "https://github.com/rust-lang/rust/issues/30927", "id": 126817981, "node_id": "MDU6SXNzdWUxMjY4MTc5ODE=", "number": 30927, "title": "Add flag to allow running both ignored and not ignored tests", "user": {"login": "numerodix", "id": 15165, "node_id": "MDQ6VXNlcjE1MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/15165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/numerodix", "html_url": "https://github.com/numerodix", "followers_url": "https://api.github.com/users/numerodix/followers", "following_url": "https://api.github.com/users/numerodix/following{/other_user}", "gists_url": "https://api.github.com/users/numerodix/gists{/gist_id}", "starred_url": "https://api.github.com/users/numerodix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/numerodix/subscriptions", "organizations_url": "https://api.github.com/users/numerodix/orgs", "repos_url": "https://api.github.com/users/numerodix/repos", "events_url": "https://api.github.com/users/numerodix/events{/privacy}", "received_events_url": "https://api.github.com/users/numerodix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 602425123, "node_id": "MDU6TGFiZWw2MDI0MjUxMjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-dev-tools", "name": "T-dev-tools", "color": "bfd4f2", "default": false, "description": "Relevant to the dev-tools subteam, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-01-15T06:54:09Z", "updated_at": "2018-09-24T16:10:06Z", "closed_at": "2018-09-24T16:10:06Z", "author_association": "NONE", "active_lock_reason": null, "body": "This is the set of command line options for debug builds:\n\n```\nOptions:\n    --ignored           Run ignored tests\n    --test              Run tests and not benchmarks\n    --bench             Run benchmarks instead of tests\n    -h --help           Display this message (longer with --help)\n    --logfile PATH      Write logs to the specified file instead of stdout\n    --nocapture         don't capture stdout/stderr of each task, allow\n                        printing directly\n    --color auto|always|never\n                        Configure coloring of output: auto = colorize if\n                        stdout is a tty and tests are run on serially\n                        (default); always = always colorize output; never =\n                        never colorize output;\n```\n\nI'm proposing to extend this with an `--all` flag that allows running all tests, both those selected by `--test` and those selected by `--ignored`.\n\nThere can be different reasons why a test is relegated to `ignored` status:\n1. It could be that the test is not currently passing, but there are plans to fix it later.\n2. It could be that the test is slow to run, and marking it `ignored` excludes it from the default test set and makes running the test suite faster.\n3. And other reasons beyond...\n\nIn case (2) it may still be desirable to select all tests to be executed in a context where test running time is less impactful to a human (eg. in CI).\n\nCurrently, in order to run all tests and return a global pass/fail for the test suite it requires sequencing invocations of the binary in a shell script. This is not a major issue, however when tests are run under coverage or via something like `cargo test` it becomes less convenient to execute both sets of tests.\n\nAdding an `--all` flag simply makes it slightly more ergonomic in my view.\n\nThe proposed `--all` flag would override any other test selection, such that:\n- `--all` would select all tests.\n- `--test --all` would select all tests.\n- `--ignored --all` would select all tests.\n- `--test` would select only non-ignored tests (as now).\n- `--ignored` would select only ignored tests (as now).\n\nI have implemented this on a [branch](https://github.com/numerodix/rust/commits/tests-all-switch). If you think this is a good idea please advise on next steps.\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/30927/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 1, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/30927/timeline", "performed_via_github_app": null, "state_reason": "completed"}