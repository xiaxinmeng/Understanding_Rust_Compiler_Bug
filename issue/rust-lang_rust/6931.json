{"url": "https://api.github.com/repos/rust-lang/rust/issues/6931", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6931/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6931/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6931/events", "html_url": "https://github.com/rust-lang/rust/issues/6931", "id": 15132469, "node_id": "MDU6SXNzdWUxNTEzMjQ2OQ==", "number": 6931, "title": "Integer -> Float -> Integer conversion can succeed while changing what the value is", "user": {"login": "toddaaro", "id": 366431, "node_id": "MDQ6VXNlcjM2NjQzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/366431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/toddaaro", "html_url": "https://github.com/toddaaro", "followers_url": "https://api.github.com/users/toddaaro/followers", "following_url": "https://api.github.com/users/toddaaro/following{/other_user}", "gists_url": "https://api.github.com/users/toddaaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/toddaaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/toddaaro/subscriptions", "organizations_url": "https://api.github.com/users/toddaaro/orgs", "repos_url": "https://api.github.com/users/toddaaro/repos", "events_url": "https://api.github.com/users/toddaaro/events{/privacy}", "received_events_url": "https://api.github.com/users/toddaaro/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2013-06-04T18:04:06Z", "updated_at": "2013-06-05T20:06:56Z", "closed_at": "2013-06-05T20:04:40Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This code works well, despite doing a conversion of an integer constant to a float and then back to an integer the fact that the integer is too large triggers an error.\n\n``` rust\n    let bar: int = (120120120120120120120120 as float) as int;\n```\n\n``` bash\n$ rustc prims.rs\nprims.rs:10:19: 10:20 error: int literal is too large\nprims.rs:10     let bar: int = (120120120120120120120120 as float) as int;\n```\n\nNow in this example the number is shorter, and it does not produce an error. But the printed value isn't the same as the original number.\n\n``` rust\nlet bar: int = (120120120120120120 as float) as int;\nprintln(fmt!(\"%?\", bar));\n```\n\n``` bash\n120120120120120128\n```\n\nIt looks like the first int -> float conversion resulted in some kind of information loss due to floating point precision/representation issues, and this loss was propogated when the value was converted back to an int.\n\nIt seems like there already is constant conversion verification, so it likely could be extended to deal with floating point issues like this. \n\n(tested using the rust trunk)\n", "closed_by": {"login": "Aatch", "id": 342416, "node_id": "MDQ6VXNlcjM0MjQxNg==", "avatar_url": "https://avatars.githubusercontent.com/u/342416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aatch", "html_url": "https://github.com/Aatch", "followers_url": "https://api.github.com/users/Aatch/followers", "following_url": "https://api.github.com/users/Aatch/following{/other_user}", "gists_url": "https://api.github.com/users/Aatch/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aatch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aatch/subscriptions", "organizations_url": "https://api.github.com/users/Aatch/orgs", "repos_url": "https://api.github.com/users/Aatch/repos", "events_url": "https://api.github.com/users/Aatch/events{/privacy}", "received_events_url": "https://api.github.com/users/Aatch/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6931/timeline", "performed_via_github_app": null, "state_reason": "completed"}