{"url": "https://api.github.com/repos/rust-lang/rust/issues/78154", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/78154/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/78154/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/78154/events", "html_url": "https://github.com/rust-lang/rust/issues/78154", "id": 725797852, "node_id": "MDU6SXNzdWU3MjU3OTc4NTI=", "number": 78154, "title": "Feature request: Custom destructuring", "user": {"login": "LoganDark", "id": 4723091, "node_id": "MDQ6VXNlcjQ3MjMwOTE=", "avatar_url": "https://avatars.githubusercontent.com/u/4723091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LoganDark", "html_url": "https://github.com/LoganDark", "followers_url": "https://api.github.com/users/LoganDark/followers", "following_url": "https://api.github.com/users/LoganDark/following{/other_user}", "gists_url": "https://api.github.com/users/LoganDark/gists{/gist_id}", "starred_url": "https://api.github.com/users/LoganDark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LoganDark/subscriptions", "organizations_url": "https://api.github.com/users/LoganDark/orgs", "repos_url": "https://api.github.com/users/LoganDark/repos", "events_url": "https://api.github.com/users/LoganDark/events{/privacy}", "received_events_url": "https://api.github.com/users/LoganDark/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-10-20T17:26:26Z", "updated_at": "2020-10-20T21:23:26Z", "closed_at": "2020-10-20T17:36:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "Let's say I have this struct, `Vec2`:\r\n\r\n```rust\r\n#[derive(Copy, Clone, PartialEq, Debug)]\r\npub struct Vec2 {\r\n\tx: f32,\r\n\ty: f32\r\n}\r\n```\r\n\r\nAnd I also a tuple containing two `Vec2`s:\r\n\r\n```rust\r\nlet t: (Vec2, Vec2) = ...;\r\n```\r\n\r\nRight now, I have to do this to destructure it, which is really long and cumbersome to type:\r\n\r\n```rust\r\nlet (Vec2 { x: mut x1, y: mut y1 }, Vec2 { x: mut x2, y: mut y2 }) = t;\r\n```\r\n\r\nI thought it would be a lot nicer if I could do this instead:\r\n\r\n```rust\r\nlet ((mut x1, mut y1), (mut x2, mut y2)) = t;\r\n```\r\n\r\nBut after asking for help in the Rust Discord, it looks like this is impossible!\r\n\r\nShould support for custom destructuring like this be added? Is it even possible?\r\n\r\nIt could work like this:\r\n\r\n```rust\r\nimpl Destructure<(f32, f32)> for Vec2 {\r\n\tfn destructure(self) -> (f32, f32) {\r\n\t\t(self.x, self.y)\r\n\t}\r\n}\r\n\r\nimpl DestructureRef<(&f32, &f32)> for Vec2 {\r\n\tfn destructure_ref(&self) -> (&f32, &f32) {\r\n\t\t(self.x, self.y)\r\n\t}\r\n}\r\n\r\nimpl DestructureMut<(&mut f32, &mut f32)> for Vec2 {\r\n\tfn destructure_mut(&mut self) -> (&mut f32, &mut f32) {\r\n\t\t(self.x, self.y)\r\n\t}\r\n}\r\n```\r\n\r\nOr it could use the existing `Into`/`AsRef`/`AsMut` traits instead, thoughts?", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/78154/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/78154/timeline", "performed_via_github_app": null, "state_reason": "completed"}