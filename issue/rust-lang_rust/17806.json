{"url": "https://api.github.com/repos/rust-lang/rust/issues/17806", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17806/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17806/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17806/events", "html_url": "https://github.com/rust-lang/rust/issues/17806", "id": 44929293, "node_id": "MDU6SXNzdWU0NDkyOTI5Mw==", "number": 17806, "title": "Unable to export unmangled dll entry points for stdcall", "user": {"login": "darklajid", "id": 77554, "node_id": "MDQ6VXNlcjc3NTU0", "avatar_url": "https://avatars.githubusercontent.com/u/77554?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darklajid", "html_url": "https://github.com/darklajid", "followers_url": "https://api.github.com/users/darklajid/followers", "following_url": "https://api.github.com/users/darklajid/following{/other_user}", "gists_url": "https://api.github.com/users/darklajid/gists{/gist_id}", "starred_url": "https://api.github.com/users/darklajid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darklajid/subscriptions", "organizations_url": "https://api.github.com/users/darklajid/orgs", "repos_url": "https://api.github.com/users/darklajid/repos", "events_url": "https://api.github.com/users/darklajid/events{/privacy}", "received_events_url": "https://api.github.com/users/darklajid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2014-10-05T21:15:12Z", "updated_at": "2020-07-15T20:26:18Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Hi.\n\nAfter some questions on IRC I think this might be a bug or at least a missing feature:\nI'd like to export functions with a name of my choosing. I knew about #[no_mangle] and learned about #[export_name] on IRC, but both fail to work in my case.\n\nCode/test.rs:\n\n```\npub extern \"stdcall\" fn stdcall() {\n}\n\n#[no_mangle]\npub extern \"stdcall\" fn stdcall_nomangle() {\n}\n\n#[export_name=\"stdcall_export\"]\npub extern \"stdcall\" fn stdcall_exportname() {\n}\n\npub extern \"C\" fn c() {\n}\n\n#[no_mangle]\npub extern \"C\" fn c_nomangle() {\n}\n\n#[export_name=\"c_export\"]\npub extern \"C\" fn c_exportname() {\n}\n```\n\nBuild with `rustc --cratetype dylib test.rs`\n\nResult:\n![rustdllexports](https://cloud.githubusercontent.com/assets/77554/4519974/26d32048-4cd4-11e4-9488-e81906ba6e0b.png)\n\nSo, every single stdcall entry point follows the name@sizeofarguments convention. I have a number of DLLs right in front of me (not based on rust) that export stdcall entries and DON'T use that convention. In fact, I'm reasonably sure that most of the windows API is both using stdcall and exporting 'unmangled' names.\n\nCan I create something similar with rust? Am I missing another attribute? Should no_mangle work in these cases? Should export_name?\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17806/timeline", "performed_via_github_app": null, "state_reason": null}