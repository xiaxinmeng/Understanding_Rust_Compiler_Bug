{"url": "https://api.github.com/repos/rust-lang/rust/issues/83243", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/83243/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/83243/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/83243/events", "html_url": "https://github.com/rust-lang/rust/issues/83243", "id": 834243623, "node_id": "MDU6SXNzdWU4MzQyNDM2MjM=", "number": 83243, "title": "irrelevant variable mentioned in E0759 \"needs to satisfy a `'static` lifetime requirement\"", "user": {"login": "comex", "id": 47517, "node_id": "MDQ6VXNlcjQ3NTE3", "avatar_url": "https://avatars.githubusercontent.com/u/47517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/comex", "html_url": "https://github.com/comex", "followers_url": "https://api.github.com/users/comex/followers", "following_url": "https://api.github.com/users/comex/following{/other_user}", "gists_url": "https://api.github.com/users/comex/gists{/gist_id}", "starred_url": "https://api.github.com/users/comex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/comex/subscriptions", "organizations_url": "https://api.github.com/users/comex/orgs", "repos_url": "https://api.github.com/users/comex/repos", "events_url": "https://api.github.com/users/comex/events{/privacy}", "received_events_url": "https://api.github.com/users/comex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 1775993, "node_id": "MDU6TGFiZWwxNzc1OTkz", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-lifetimes", "name": "A-lifetimes", "color": "f7e101", "default": false, "description": "Area: lifetime related"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1624891239, "node_id": "MDU6TGFiZWwxNjI0ODkxMjM5", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-incorrect", "name": "D-incorrect", "color": "c9f7a3", "default": false, "description": "A diagnostic that is giving misleading or incorrect information"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-03-17T23:04:59Z", "updated_at": "2021-04-30T13:35:16Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Given: [(playground link)](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=cb8c7ec42ae05b95b6f05857c6fcacbe)\r\n```rust\r\nfn test1<'a>(x: &'a ()) {\r\n    let z: Option<&'a ()> = None;\r\n    let _: &'static () = z.unwrap();\r\n}\r\n\r\nfn test2<'a>(x: &'a (), y: &'a ()) {\r\n    let _: Option<&'static ()> = Some(y);\r\n}\r\n```\r\n\r\nIn each function, there is a lifetime mismatch because we try to convert `&'a ()` to `&'static ()`.  However, in each, the diagnostic mentions `x`, even though `x` is completely unused:\r\n\r\n```\r\nerror[E0759]: `x` has lifetime `'a` but it needs to satisfy a `'static` lifetime requirement\r\n --> src/lib.rs:3:28\r\n  |\r\n1 | fn test1<'a>(x: &'a ()) {\r\n  |                 ------ this data with lifetime `'a`...\r\n2 |     let z: Option<&'a ()> = None;\r\n3 |     let _: &'static () = z.unwrap();\r\n  |                            ^^^^^^ ...is captured here, requiring it to live as long as `'static`\r\n\r\nerror[E0759]: `x` has lifetime `'a` but it needs to satisfy a `'static` lifetime requirement\r\n --> src/lib.rs:7:34\r\n  |\r\n6 | fn test2<'a>(x: &'a (), y: &'a ()) {\r\n  |                 ------ this data with lifetime `'a`...\r\n7 |     let _: Option<&'static ()> = Some(y);\r\n  |                                  ^^^^^^^ ...is captured and required to live as long as `'static` here\r\n```\r\n\r\n`x` seems to be chosen as an arbitrary variable whose type contains the lifetime at issue, `'a`.  But contrary to the diagnostic text, we're not actually \"captur[ing]\" \"data\" from it, except perhaps in the loosest metaphorical sense.  And if this were to arise in real code (as it did for me), whatever fix is needed, it's probably not to change `x`.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/83243/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/83243/timeline", "performed_via_github_app": null, "state_reason": null}