{"url": "https://api.github.com/repos/rust-lang/rust/issues/57853", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/57853/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/57853/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/57853/events", "html_url": "https://github.com/rust-lang/rust/issues/57853", "id": 402045286, "node_id": "MDU6SXNzdWU0MDIwNDUyODY=", "number": 57853, "title": "Inconsistent path resolution between 'use' and expressions in 2018", "user": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 239393, "node_id": "MDU6TGFiZWwyMzkzOTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-resolve", "name": "A-resolve", "color": "f7e101", "default": false, "description": "Area: Path resolution"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-01-23T02:42:39Z", "updated_at": "2019-02-10T09:41:38Z", "closed_at": "2019-02-10T09:41:38Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't know the details of \"path clarity\" and \"uniform paths\", but I would expect that path resolution in use statements and expressions would work the same. And they do in all situations I've tested except for these two involving external crates:\r\n\r\n```rust\r\n#![allow(warnings)]\r\nextern crate tokio;\r\n\r\nmod a {\r\n    mod tokio { pub mod prelude {\r\n        pub enum Async { NotReady, BlahBlahBlah }\r\n        pub struct NotInTokio;\r\n    } }\r\n    \r\n    // root takes precedence in 2015;\r\n    // ambiguous in 2018, and with uniform_paths\r\n    // use tokio::prelude::Async;\r\n    // failed root resolution in 2015;\r\n    // ambiguous in 2018, and with uniform_paths\r\n    // use tokio::prelude::NotInTokio;\r\n    \r\n    fn f() {\r\n        // _local scope_ takes precedence in 2015, 2018, uniform_paths;\r\n        // inconsistent with 'use' in 2018\r\n        let _ = tokio::prelude::Async::NotReady;\r\n        // local scope in all versions, inconsistent like above\r\n        let _ = tokio::prelude::NotInTokio;\r\n    }\r\n}\r\n```\r\n\r\nThe two use statements are ambiguous in 2018, but the two expressions resolve to the local module. I'd expect the expressions to be ambiguous.\r\n\r\nTested in 1.32 and whatever nightly is on playground today.\r\n\r\n[Playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=84678bce1c928330b8c5159cecb81d2d)", "closed_by": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/57853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/57853/timeline", "performed_via_github_app": null, "state_reason": "completed"}