{"url": "https://api.github.com/repos/rust-lang/rust/issues/13624", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/13624/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/13624/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/13624/events", "html_url": "https://github.com/rust-lang/rust/issues/13624", "id": 31847178, "node_id": "MDU6SXNzdWUzMTg0NzE3OA==", "number": 13624, "title": "rustc: \"error: internal compiler error: no type for node 41: local x (id=41) in fcx 0x7ff2ddbade98\"", "user": {"login": "a-p-", "id": 4145331, "node_id": "MDQ6VXNlcjQxNDUzMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/4145331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/a-p-", "html_url": "https://github.com/a-p-", "followers_url": "https://api.github.com/users/a-p-/followers", "following_url": "https://api.github.com/users/a-p-/following{/other_user}", "gists_url": "https://api.github.com/users/a-p-/gists{/gist_id}", "starred_url": "https://api.github.com/users/a-p-/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/a-p-/subscriptions", "organizations_url": "https://api.github.com/users/a-p-/orgs", "repos_url": "https://api.github.com/users/a-p-/repos", "events_url": "https://api.github.com/users/a-p-/events{/privacy}", "received_events_url": "https://api.github.com/users/a-p-/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2014-04-19T13:55:42Z", "updated_at": "2014-09-15T20:51:05Z", "closed_at": "2014-09-15T20:51:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Versions:\n\n```\n$ rustc -v\nrustc 0.11-pre (c7553ea 2014-04-19 02:11:30 -0700)\nhost: x86_64-unknown-linux-gnu\n$ uname -a\nLinux test 3.13-1-amd64 #1 SMP Debian 3.13.7-1 (2014-03-25) x86_64 GNU/Linux\n$ \n```\n\nCode to reproduce the ICE:\n\n```\n#![feature(struct_variant)]\n\nmod a {\n  pub enum Enum {  \n    EnumStructVariant { x: u8, y: u8, z: u8 }\n  }\n\n  pub fn get_enum_struct_variant() {\n    EnumStructVariant { x: 1, y: 2, z: 3 }\n  }\n}\n\nmod b {\n  #[cfg(test)]\n  mod test {\n    use a;\n\n    #[test]\n    fn test_enum_struct_variant() {\n      let enum_struct_variant = ::a::get_enum_struct_variant();\n      match enum_struct_variant {\n        a::EnumStructVariant { x, y, z } => {\n          assert_eq!(1, x);\n          assert_eq!(2, y);\n          assert_eq!(3, z);\n        },\n        _ => fail!(~\"no match\")  \n      }\n    }\n  }\n}\n```\n\nCompilation output:\n\n```\n$ RUST_BACKTRACE=1 rustc --test test.rs \ntest.rs:9:5: 9:43 error: mismatched types: expected `()` but found `a::Enum` (expected () but found enum a::Enum)\ntest.rs:9     EnumStructVariant { x: 1, y: 2, z: 3 }\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ntest.rs:22:9: 22:41 error: mismatched types: expected `()` but found a structure pattern\ntest.rs:22         a::EnumStructVariant { x, y, z } => {\n                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nerror: internal compiler error: no type for node 41: local x (id=41) in fcx 0x7fafd3fcbe98\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://static.rust-lang.org/doc/master/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at '~Any', /tmp/rust/src/libsyntax/diagnostic.rs:155\nstack backtrace:\n   1:     0x7fafd710fe80 - rt::backtrace::imp::write::h05ad43ec7787e135wta::v0.11.pre\n   2:     0x7fafd7071290 - rt::unwind::begin_unwind_inner::hac94da1cdf3e8a6dZ39::v0.11.pre\n   3:     0x7fafd5ae2fb0 - rt::unwind::begin_unwind::h17308229952267765168::v0.11.pre\n   4:     0x7fafd5ae4010 - diagnostic::Handler::bug::had96abefee4d50728Xb::v0.11.pre\n   5:     0x7fafd7ac6300 - driver::session::Session::bug::h8052d5399f7b4d89iDg::v0.11.pre\n   6:     0x7fafd7ce9690 - middle::typeck::check::FnCtxt$LT$$x27a$GT$::node_ty::h266c1c837d478b69KF8::v0.11.pre\n   7:     0x7fafd7d09780 - middle::typeck::check::writeback::resolve_type_vars_for_node::hbc48b7050f0443e3Eh2::v0.11.pre\n   8:     0x7fafd7d10420 - middle::typeck::check::writeback::visit_pat::haba75e8fd613010cQA2::v0.11.pre\n   9:     0x7fafd7d10420 - middle::typeck::check::writeback::visit_pat::haba75e8fd613010cQA2::v0.11.pre\n  10:     0x7fafd7d0fd50 - visit::walk_arm::h7056839743020299270::v0.11.pre\n  11:     0x7fafd7d0eaf0 - middle::typeck::check::writeback::visit_expr::h3075d0f7ca507c5fGy2::v0.11.pre\n  12:     0x7fafd7d100f0 - visit::walk_block::h2390430812655566266::v0.11.pre\n  13:     0x7fafd7d13030 - middle::typeck::check::writeback::resolve_type_vars_in_fn::hfeaf21e766baaf3fLQ2::v0.11.pre\n  14:     0x7fafd7d59930 - middle::typeck::check::check_bare_fn::he5890947b73331a2Ih7::v0.11.pre\n  15:     0x7fafd7d54d10 - middle::typeck::check::check_item::h85092b1644b4d4beQz7::v0.11.pre\n  16:     0x7fafd7d566e0 - visit::walk_item::h8774069490031190215::v0.11.pre\n  17:     0x7fafd7d566e0 - visit::walk_item::h8774069490031190215::v0.11.pre\n  18:     0x7fafd7d59810 - middle::typeck::check::check_item_types::h1b2aba05358d4238ih7::v0.11.pre\n  19:     0x7fafd7e987d0 - util::common::time::h1348476385218534042::v0.11.pre\n  20:     0x7fafd7e971a0 - middle::typeck::check_crate::h043615a3c22fd0dcfnu::v0.11.pre\n  21:     0x7fafd82a8e60 - driver::driver::phase_3_run_analysis_passes::h1b3684c72fd5ff792Pe::v0.11.pre\n  22:     0x7fafd82af500 - driver::driver::compile_input::h04718ee069976ad3Xef::v0.11.pre\n  23:     0x7fafd82d3b20 - run_compiler::h9b85866479b94c45cOm::v0.11.pre\n  24:     0x7fafd82eb3f0 - main_args::closure.91906\n  25:     0x7fafd82e9960 - monitor::closure.91784\n  26:     0x7fafd82e53a0 - task::TaskBuilder::try::closure.91550\n  27:     0x7fafda08ada0 - task::spawn_opts::closure.7776\n  28:     0x7fafd710af50 - rt::task::Task::run::closure.39968\n  29:     0x7fafd7116be0 - rust_try\n  30:     0x7fafd710ad90 - rt::task::Task::run::h484ea9de608dc658uU7::v0.11.pre\n  31:     0x7fafda08abb0 - task::spawn_opts::closure.7749\n  32:     0x7fafd710ea00 - rt::thread::thread_start::h5274526c2bf07fc4fz8::v0.11.pre\n  33:     0x7fafd6a49fa0 - start_thread\n  34:     0x7fafd6d44a09 - __clone\n  35:                0x0 - <unknown>\n\n$ \n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/13624/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/13624/timeline", "performed_via_github_app": null, "state_reason": "completed"}