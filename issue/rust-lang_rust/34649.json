{"url": "https://api.github.com/repos/rust-lang/rust/issues/34649", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34649/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34649/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34649/events", "html_url": "https://github.com/rust-lang/rust/issues/34649", "id": 163741229, "node_id": "MDU6SXNzdWUxNjM3NDEyMjk=", "number": 34649, "title": "rustc fails with \"Assertion `Ty == resolve(Ty->getRef()) && \"type was not uniqued, possible ODR violation.\"", "user": {"login": "apanda", "id": 3251, "node_id": "MDQ6VXNlcjMyNTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apanda", "html_url": "https://github.com/apanda", "followers_url": "https://api.github.com/users/apanda/followers", "following_url": "https://api.github.com/users/apanda/following{/other_user}", "gists_url": "https://api.github.com/users/apanda/gists{/gist_id}", "starred_url": "https://api.github.com/users/apanda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apanda/subscriptions", "organizations_url": "https://api.github.com/users/apanda/orgs", "repos_url": "https://api.github.com/users/apanda/repos", "events_url": "https://api.github.com/users/apanda/events{/privacy}", "received_events_url": "https://api.github.com/users/apanda/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2016-07-04T20:49:14Z", "updated_at": "2016-07-05T19:01:02Z", "closed_at": "2016-07-05T19:01:02Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi\nWhen trying to build a project with Rust nightly (rustc 1.11.0-nightly (696b703b5 2016-07-03)), I get the LLVM ODR violation exception. \n\nFor my project I set `lto=true` and `debug=true`, turning either of them off seems to resolve the issue (i.e., any case where only `lto=true` or only `debug=true` builds fine). Furthermore, building rust from scratch using flags `--enable-optimize --disable-valgrind --disable-docs` produces a rustc that does not suffer from this failure.\n\nI am happy to run any diagnostics that might help. I have also packaged a reproducible version at https://hub.docker.com/r/apanda/rustc-build-fail/, to hit the failure just use the following steps (assuming you are on Linux and have Docker installed, this can be adopted to both OS X and Windows as appropriate):\n\n```\nsudo docker pull apanda/rustc-build-fail\nsudo docker run -ti apanda/rustc-build-fail # At this time a bash shell should show up\ncd /opt/netbricks/test/framework-test\ncargo build --release\n```\n\nI tried debugging this but the fact that it doesn't show up when I build rust made that a bit hard.\n\nThank you!!\n\nPanda\n", "closed_by": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34649/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34649/timeline", "performed_via_github_app": null, "state_reason": "completed"}