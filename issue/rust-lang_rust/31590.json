{"url": "https://api.github.com/repos/rust-lang/rust/issues/31590", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/31590/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/31590/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/31590/events", "html_url": "https://github.com/rust-lang/rust/issues/31590", "id": 133162351, "node_id": "MDU6SXNzdWUxMzMxNjIzNTE=", "number": 31590, "title": "Tracking issue for rustbuild, the alternate build system for rustc", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37977651, "node_id": "MDU6TGFiZWwzNzk3NzY1MQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/metabug", "name": "metabug", "color": "5319e7", "default": false, "description": "Issues about issues themselves (\"bugs about bugs\")"}, {"id": 325438536, "node_id": "MDU6TGFiZWwzMjU0Mzg1MzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-bootstrap", "name": "T-bootstrap", "color": "bfd4f2", "default": false, "description": "Relevant to the bootstrap subteam: Rust's build system (x.py and src/bootstrap)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 20, "created_at": "2016-02-12T05:43:12Z", "updated_at": "2017-03-24T19:22:20Z", "closed_at": "2016-07-01T17:09:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I'm opening this up as a tracking issue for all work that needs to happen to get rustbuild, our new build system, turned on by default. The end goal here is to completely jettison our thousands of lines of makefiles and configure scripts for tons and tons of Rust code! Initial support has landed in #31123, but we've still got quite aways to go!\n\nHere's a list of items left that need to be implemented, and help is always appreciated when tackling these! If you want any clarifications or any help on any of these, feel free to reach out to me (acrichto) on IRC.\n### Documentation\n\n[work in progress](https://github.com/alexcrichton/rust/blob/build-via-cargo/src/bootstrap/build/doc.rs)\n- [x] nomicon - #31713\n- [x] rustbook - #31713\n- [x] error index - #32133\n- [x] crate docs - #32133\n- [x] compiler docs - #32133\n- [x] standalone docs - #31713\n- [x] style guide - #31713\n### Testing\n- [x] crate tests - #33282\n- [x] crate doctests - #33282\n- [x] rustbook/nomicon tests - #33092\n- [x] standalone documentation tests - #33092\n- [x] error-index tests - #33092 \n- [x] run-pass - #32755\n- [x] run-fail - #32755\n- [x] compile-fail - #32755\n- [x] parse-fail - #32755\n- [x] codegen - #32755\n- [x] debuginfo - #32755\n- [x] codegen-units - #32755\n- [x] pretty - #32755\n- [x] run-pass-fulldeps - #32755\n- [x] compile-fail-fulldeps - #32755\n- [x] run-pass-valgrind - #32755\n- [x] rustdoc - #32755\n- [x] run-make -- move maketest.py to rust as well - #33093\n- [x] Android testing - ship things to the emulator - #34567\n- [x] multi-platform testing, handle multiple hosts and multiple targets - #34567\n### Porting\n\nThese should all be verified to work and then ideally we'd add a builder verifying they continue to work!\n- [x] Android - #34567\n- [x] iOS\n- [x] various cross compiled linuxes\n- [x] musl-x86_64\n### `configure` script\n- [ ] Migrate compiler version detection to Rust (maybe optional?)\n- [ ] Ensure all tool detection is moved into Rust\n### Misc\n- [x] Add build automation to pass `--enable-rustbuild`, but not run tests - https://github.com/rust-lang/rust-buildbot/pull/61\n- [x] Verify that multi-host builds work - #31884 \n- [x] Verify sha256 of downloaded nightly rustc and nightly cargo - #32926\n- [x] Migrate tidy to rust - #32590\n  - [binary check WIP](https://github.com/alexcrichton/rust/blob/cargo-build/src/bootstrap/build/tidy/binaries.rs)\n- [x] Migrate licenseck to rust - #32590\n  - [work in progress](https://github.com/alexcrichton/rust/blob/cargo-build/src/bootstrap/build/tidy/style.rs)\n- [x] Migrate featureck to rust - #32590\n  - [work in progress](https://github.com/alexcrichton/rust/blob/cargo-build/src/bootstrap/build/tidy/features.rs)\n- [x] Migrate errock to rust - #32590\n  - [work in progress](https://github.com/alexcrichton/rust/blob/cargo-build/src/bootstrap/build/tidy/errors.rs)\n- [x] `make clean` - https://github.com/rust-lang/rust/pull/31591\n### `make install` + `make dist`\n\nThese are pretty huge portions of the make files, they may take _quite_ some time to migrate over, and it's probably fine to keep them around for now. @brson's plans with `multirust-rs` and reusable library components may become relevant here as well.\n\nThis may be subdivided into a bunch of smaller tasks over time!\n- [x] `make dist` - https://github.com/rust-lang/rust/pull/32237\n# Far future (not required)\n- [x] Support `src/bootstrap/bootstrap.py` being called directly (e.g. on MSVC where `make` isn't available)\n- [ ] verify gpg signatures of downloaded nightlies - #34598\n- [x] Support building `rustc` for architectures that can themselves not be run. For example a x86_64 host should be able to build an arm compiler (e.g. a full installation tarball) - #31884\n- [ ] Move building LLVM out of rustbuild (not actually sure if this is possible)\n- [ ] Move building compiler-rt out of rustbuild (eases cross-compiling libstd) - #34400\n- [ ] migrate htmldockck to Rust\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/31590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/31590/timeline", "performed_via_github_app": null, "state_reason": "completed"}