{"url": "https://api.github.com/repos/rust-lang/rust/issues/10200", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10200/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10200/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10200/events", "html_url": "https://github.com/rust-lang/rust/issues/10200", "id": 21916558, "node_id": "MDU6SXNzdWUyMTkxNjU1OA==", "number": 10200, "title": "Arbitrary functions shouldn't be isomorphic to tuple structs", "user": {"login": "pythonesque", "id": 923144, "node_id": "MDQ6VXNlcjkyMzE0NA==", "avatar_url": "https://avatars.githubusercontent.com/u/923144?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pythonesque", "html_url": "https://github.com/pythonesque", "followers_url": "https://api.github.com/users/pythonesque/followers", "following_url": "https://api.github.com/users/pythonesque/following{/other_user}", "gists_url": "https://api.github.com/users/pythonesque/gists{/gist_id}", "starred_url": "https://api.github.com/users/pythonesque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pythonesque/subscriptions", "organizations_url": "https://api.github.com/users/pythonesque/orgs", "repos_url": "https://api.github.com/users/pythonesque/repos", "events_url": "https://api.github.com/users/pythonesque/events{/privacy}", "received_events_url": "https://api.github.com/users/pythonesque/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2013-10-31T18:34:20Z", "updated_at": "2014-10-25T09:12:14Z", "closed_at": "2014-10-25T09:12:14Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently, if we define a tuple struct:\n\n``` rust\nstruct S(t1, ..., tn)\n```\n\nthen `S` has the same type as\n\n``` rust\nfn( x1 : t1, ..., xn : tn) -> S\n```\n\nThis allows us to write code that seems unintuitive / wrong:\n\n``` rust\nstruct Foo(bool);\nlet x = Foo(true);\nfn foo(_: uint) -> Foo { Foo(false) } // Note that we don't even check to make sure the argument types match in patterns\n\nmatch x {\n    foo(x) => println!(\"{}\", x)\n}\n// Produces `true`\n```\n\nIt seems to me that we should disallow this.  My preference would be to just make tuple structs unique, named type constructors that wrap tuple type constructors (not functions).  So the type of `S` above might be (internally) `Unique(Tuple(t1, ..., tn), S)`.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10200/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10200/timeline", "performed_via_github_app": null, "state_reason": "completed"}