{"url": "https://api.github.com/repos/rust-lang/rust/issues/41027", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/41027/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/41027/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/41027/events", "html_url": "https://github.com/rust-lang/rust/issues/41027", "id": 218804002, "node_id": "MDU6SXNzdWUyMTg4MDQwMDI=", "number": 41027, "title": "Strange leak on env::var", "user": {"login": "lu-zero", "id": 239012, "node_id": "MDQ6VXNlcjIzOTAxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/239012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lu-zero", "html_url": "https://github.com/lu-zero", "followers_url": "https://api.github.com/users/lu-zero/followers", "following_url": "https://api.github.com/users/lu-zero/following{/other_user}", "gists_url": "https://api.github.com/users/lu-zero/gists{/gist_id}", "starred_url": "https://api.github.com/users/lu-zero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lu-zero/subscriptions", "organizations_url": "https://api.github.com/users/lu-zero/orgs", "repos_url": "https://api.github.com/users/lu-zero/repos", "events_url": "https://api.github.com/users/lu-zero/events{/privacy}", "received_events_url": "https://api.github.com/users/lu-zero/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 630870359, "node_id": "MDU6TGFiZWw2MzA4NzAzNTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-sanitizers", "name": "A-sanitizers", "color": "f7e101", "default": false, "description": "Area: Sanitizers for correctness and code quality."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2017-04-02T23:54:24Z", "updated_at": "2018-10-03T20:49:52Z", "closed_at": "2018-10-03T20:49:52Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": " RUSTFLAGS=\"-Z sanitizer=memory\" cargo run \r\n```\r\nerror: failed to run custom build command for `kernel32-sys v0.2.2`\r\nprocess didn't exit successfully: `/usr/src/rust/x264-rs/target/debug/build/kernel32-sys-9b6c3463a8ee3470/build-script-build` (exit code: 77)\r\n--- stderr\r\n==474==WARNING: MemorySanitizer: use-of-uninitialized-value\r\n    #0 0x55e4231f0f80 in _$LT$core..result..Result$LT$T$C$$u20$E$GT$$GT$::unwrap::hbaca9e4c708f1a9a /checkout/src/libcore/result.rs:736\r\n    #1 0x55e42320a4cb in build::link::h780aaf497d81ebf3 /root/.cargo/registry/src/github.com-1ecc6299db9ec823/winapi-build-0.1.1/src/lib.rs:5\r\n    #2 0x55e4231e8dc7 in build_script_build::main::hfb4f27f7ca8814c9 /root/.cargo/registry/src/github.com-1ecc6299db9ec823/kernel32-sys-0.2.2/build.rs:5\r\n    #3 0x55e423216175 in core::ops::FnOnce::call_once<fn(),()> /checkout/src/libcore/ops.rs:2606\r\n    #4 0x55e423216175 in std::panicking::try::do_call::h689a21caeeef92aa /checkout/src/libstd/panicking.rs:454\r\n    #5 0x55e42329ac0a in __rust_maybe_catch_panic /checkout/src/libpanic_unwind/lib.rs:98\r\n    #6 0x55e42321695a in std::panicking::try<(),fn()> /checkout/src/libstd/panicking.rs:433\r\n    #7 0x55e42321695a in std::panic::catch_unwind<fn(),()> /checkout/src/libstd/panic.rs:361\r\n    #8 0x55e42321695a in std::rt::lang_start::hf63d494cb7dd034c /checkout/src/libstd/rt.rs:57\r\n    #9 0x55e4231e8e39 in main (/usr/src/rust/x264-rs/target/debug/build/kernel32-sys-9b6c3463a8ee3470/build-script-build+0x9e39)\r\n    #10 0x7f7f9fbd7720 in __libc_start_main (/lib64/libc.so.6+0x20720)\r\n    #11 0x55e4231e8c88 in _start (/usr/src/rust/x264-rs/target/debug/build/kernel32-sys-9b6c3463a8ee3470/build-script-build+0x9c88)\r\n\r\nSUMMARY: MemorySanitizer: use-of-uninitialized-value /checkout/src/libcore/result.rs:736 in _$LT$core..result..Result$LT$T$C$$u20$E$GT$$GT$::unwrap::hbaca9e4c708f1a9a\r\n```\r\n\r\nAll this on linux, using the latest nightly.\r\n\r\n", "closed_by": {"login": "lu-zero", "id": 239012, "node_id": "MDQ6VXNlcjIzOTAxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/239012?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lu-zero", "html_url": "https://github.com/lu-zero", "followers_url": "https://api.github.com/users/lu-zero/followers", "following_url": "https://api.github.com/users/lu-zero/following{/other_user}", "gists_url": "https://api.github.com/users/lu-zero/gists{/gist_id}", "starred_url": "https://api.github.com/users/lu-zero/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lu-zero/subscriptions", "organizations_url": "https://api.github.com/users/lu-zero/orgs", "repos_url": "https://api.github.com/users/lu-zero/repos", "events_url": "https://api.github.com/users/lu-zero/events{/privacy}", "received_events_url": "https://api.github.com/users/lu-zero/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/41027/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/41027/timeline", "performed_via_github_app": null, "state_reason": "completed"}