{"url": "https://api.github.com/repos/rust-lang/rust/issues/37320", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37320/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37320/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37320/events", "html_url": "https://github.com/rust-lang/rust/issues/37320", "id": 184404182, "node_id": "MDU6SXNzdWUxODQ0MDQxODI=", "number": 37320, "title": "segfault on ppc64le when compiling master using nightly-2016-10-19", "user": {"login": "amboar", "id": 526481, "node_id": "MDQ6VXNlcjUyNjQ4MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/526481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amboar", "html_url": "https://github.com/amboar", "followers_url": "https://api.github.com/users/amboar/followers", "following_url": "https://api.github.com/users/amboar/following{/other_user}", "gists_url": "https://api.github.com/users/amboar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amboar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amboar/subscriptions", "organizations_url": "https://api.github.com/users/amboar/orgs", "repos_url": "https://api.github.com/users/amboar/repos", "events_url": "https://api.github.com/users/amboar/events{/privacy}", "received_events_url": "https://api.github.com/users/amboar/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-10-21T05:45:54Z", "updated_at": "2016-12-29T16:58:15Z", "closed_at": "2016-10-30T13:51:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi,\n\nI see that nightlies and betas are now up for ppc{,64{,le}}! I've had a crack at building master on a ppc64le host using nightly-2016-10-19 as stage0, but no luck:\n\n```\nrustc: powerpc64le-unknown-linux-gnu/stage0/lib/rustlib/powerpc64le-unknown-linux-gnu/lib/libcore\ncompile: powerpc64le-unknown-linux-gnu/rustllvm/RustWrapper.o\ncompile: powerpc64le-unknown-linux-gnu/rustllvm/PassWrapper.o\ncompile: powerpc64le-unknown-linux-gnu/rustllvm/ArchiveWrapper.o\nSegmentation fault\n/home/arj/rust/mk/target.mk:191: recipe for target 'powerpc64le-unknown-linux-gnu/stage0/lib/rustlib/powerpc64le-unknown-linux-gnu/lib/stamp.core' failed\nmake: *** [powerpc64le-unknown-linux-gnu/stage0/lib/rustlib/powerpc64le-unknown-linux-gnu/lib/stamp.core] Error 139\nmake: *** Waiting for unfinished jobs....\n```\n\nMy naive gdb bt gave:\n\n```\n$ CFG_LLVM_LINKAGE_FILE=/home/arj/rust/powerpc64le-unknown-linux-gnu/rt/llvmdeps.rs LD_LIBRARY_PATH=/home/arj/rust/powerpc64le-unknown-linux-gnu/st[30/1939]\n/home/arj/rust/powerpc64le-unknown-linux-gnu/llvm/lib:$LD_LIBRARY_PATH  gdb powerpc64le-unknown-linux-gnu/stage0/bin/rustc\nReading symbols from powerpc64le-unknown-linux-gnu/stage0/bin/rustc...(no debugging symbols found)...done.\n(gdb) run --cfg stage0  -O --cfg rtopt -C rpath -C prefer-dynamic -C no-stack-check --target=powerpc64le-unknown-linux-gnu   -L \"powerpc64le-unknown-linux-gnu/rt\" -L native=\"/h\nome/arj/rust/powerpc64le-unknown-linux-gnu/llvm/lib\"     --out-dir powerpc64le-unknown-linux-gnu/stage0/lib/rustlib/powerpc64le-unknown-linux-gnu/lib -C extra-filename=-3d98e1d\nd -C metadata=3d98e1dd src/libcore/lib.rs\nStarting program: /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/rustc --cfg stage0  -O --cfg rtopt -C rpath -C prefer-dynamic -C no-stack-check --target=powerpc64le-u\nnknown-linux-gnu   -L \"powerpc64le-unknown-linux-gnu/rt\" -L native=\"/home/arj/rust/powerpc64le-unknown-linux-gnu/llvm/lib\"     --out-dir powerpc64le-unknown-linux-gnu/stage0/li\nb/rustlib/powerpc64le-unknown-linux-gnu/lib -C extra-filename=-3d98e1dd -C metadata=3d98e1dd src/libcore/lib.rs\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/powerpc64le-linux-gnu/libthread_db.so.1\".\n[New Thread 0x3fffb2dfee80 (LWP 17275)]\n\nThread 2 \"rustc\" received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0x3fffb2dfee80 (LWP 17275)]\n0x00003fffb7e25e48 in drop::hf6b6fd210b1b8022 () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n(gdb) bt\n#0  0x00003fffb7e25e48 in drop::hf6b6fd210b1b8022 () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#1  0x00003fffb7e23fe8 in drop::he6b5c1de4328d7c4 () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#2  0x00003fffb7e1b144 in drop::ha6e76cd3e2aaf918 () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#3  0x00003fffb7e25ea4 in drop::hf6b6fd210b1b8022 () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#4  0x00003fffb7e145a8 in drop::h6c5bef721832e06f () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#5  0x00003fffb7eb4f4c in rustc_driver::driver::compile_input::h67df2cb32ed2d9fe ()\n   from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#6  0x00003fffb7ed9574 in rustc_driver::run_compiler::hf62e42444e71fbda ()\n   from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#7  0x00003fffb7e005bc in std::panicking::try::do_call::h0565df63f4851a92 ()\n   from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#8  0x00003fffb7d088c8 in __rust_maybe_catch_panic () from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/libstd-17342542cc541012.so\n#9  0x00003fffb7e26724 in _$LT$F$u20$as$u20$alloc..boxed..FnBox$LT$A$GT$$GT$::call_box::hebe081d66cfa068a ()\n   from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/librustc_driver-1ed44d7390b9470e.so\n#10 0x00003fffb7cfb3f8 in std::sys::thread::Thread::new::thread_start::hbaf2dd6b96963058 ()\n   from /home/arj/rust/powerpc64le-unknown-linux-gnu/stage0/bin/../lib/libstd-17342542cc541012.so\n#11 0x00003fffb34a84a0 in start_thread (arg=0x3fffb2dfee80) at pthread_create.c:335\n#12 0x00003fffb7ba7e74 in clone () at ../sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S:96\n```\n\nHappy to dig in further if the debug symbols are available somewhere.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37320/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37320/timeline", "performed_via_github_app": null, "state_reason": "completed"}