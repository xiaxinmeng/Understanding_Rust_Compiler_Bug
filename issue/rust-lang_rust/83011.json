{"url": "https://api.github.com/repos/rust-lang/rust/issues/83011", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/83011/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/83011/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/83011/events", "html_url": "https://github.com/rust-lang/rust/issues/83011", "id": 829018020, "node_id": "MDU6SXNzdWU4MjkwMTgwMjA=", "number": 83011, "title": "Add non-generic constants' value to metadata and stop encoding their MIR", "user": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 13242248, "node_id": "MDU6TGFiZWwxMzI0MjI0OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-metadata", "name": "A-metadata", "color": "f7e101", "default": false, "description": "Area: crate metadata"}, {"id": 900795185, "node_id": "MDU6TGFiZWw5MDA3OTUxODU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-eval", "name": "A-const-eval", "color": "f7e101", "default": false, "description": "Area: constant evaluation (mir interpretation)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-03-11T10:32:05Z", "updated_at": "2021-03-11T12:33:56Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I think it is cheaper to store the evaluated constant in crate metadata than to store its entire MIR. The only reason we encode the MIR right now is so that downstream crates can evaluate the constant again.\r\n\r\ncc @rust-lang/wg-const-eval any problems with this that come to mind? We may be able to do this for promoteds in non-generic functions, too. Paired with polymorphization we can even do that for polymorphic constants at some point (as long as the value does not depend on the generic parameters).", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/83011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/83011/timeline", "performed_via_github_app": null, "state_reason": null}