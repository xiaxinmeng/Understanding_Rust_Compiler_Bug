{"url": "https://api.github.com/repos/rust-lang/rust/issues/17816", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17816/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17816/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17816/events", "html_url": "https://github.com/rust-lang/rust/issues/17816", "id": 44963169, "node_id": "MDU6SXNzdWU0NDk2MzE2OQ==", "number": 17816, "title": "Unboxed closure ICE: cannot relate bound region: ReInfer(16) <= ReLateBound", "user": {"login": "tomjakubowski", "id": 667901, "node_id": "MDQ6VXNlcjY2NzkwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/667901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomjakubowski", "html_url": "https://github.com/tomjakubowski", "followers_url": "https://api.github.com/users/tomjakubowski/followers", "following_url": "https://api.github.com/users/tomjakubowski/following{/other_user}", "gists_url": "https://api.github.com/users/tomjakubowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomjakubowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomjakubowski/subscriptions", "organizations_url": "https://api.github.com/users/tomjakubowski/orgs", "repos_url": "https://api.github.com/users/tomjakubowski/repos", "events_url": "https://api.github.com/users/tomjakubowski/events{/privacy}", "received_events_url": "https://api.github.com/users/tomjakubowski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 122406831, "node_id": "MDU6TGFiZWwxMjI0MDY4MzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-closures", "name": "A-closures", "color": "f7e101", "default": false, "description": "Area: closures (`|args| { .. }`)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2014-10-06T09:20:35Z", "updated_at": "2014-12-18T14:32:15Z", "closed_at": "2014-12-18T14:32:15Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "``` rust\n#![feature(overloaded_calls, unboxed_closure_sugar, unboxed_closures)]\n\nfn main() {\n    struct Symbol<'a, F: Fn(Vec<&'a str>) -> &'a str> { function: F }\n    let f = |&: x: Vec<&str>| -> &str \"foobar\";\n    let sym = Symbol { function: f };\n    (sym.function)(vec![]);\n}\n```\n\n```\n$ RUST_BACKTRACE=1 rustc  foo.rs \nfoo.rs:7:5: 7:27 error: internal compiler error: cannot relate bound region: ReInfer(16) <= ReLateBound(33, BrAnon(0))\nfoo.rs:7     (sym.function)(vec![]);\n             ^~~~~~~~~~~~~~~~~~~~~~\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'Box<Any>', /home/tom/src/rust/rust/src/libsyntax/diagnostic.rs:113\n\nstack backtrace:\n   1:     0x7f85d03d5800 - rt::backtrace::imp::write::hbbd9bf4ceb840fc0KAq\n   2:     0x7f85d03be190 - failure::on_fail::hc28b027ccb4467c1cWq\n   3:     0x7f85d0bc3c90 - unwind::begin_unwind_inner::h110735be165faa3fIxd\n   4:     0x7f85cedcddc0 - unwind::begin_unwind::h293010665865661344\n   5:     0x7f85cedcdd50 - diagnostic::SpanHandler::span_bug::h2ea40ca72e774bb3GMF\n   6:     0x7f85d16249b0 - driver::session::Session::span_bug::hdab774e2397de37fPtx\n   7:     0x7f85d1202bd0 - middle::typeck::infer::region_inference::RegionVarBindings<'a, 'tcx>::make_subregion::hdc4568b6616a2a24L47\n   8:     0x7f85d11df440 - middle::typeck::infer::region_inference::RegionVarBindings<'a, 'tcx>::make_eqregion::h4aa77277dfe179e5a47\n   9:     0x7f85d11df040 - middle::typeck::infer::equate::Equate<'f, 'tcx>.Combine<'tcx>::regions::h21a863ae7fa5ec80KX3\n  10:     0x7f85d11d9f30 - middle::typeck::infer::equate::Equate<'f, 'tcx>.Combine<'tcx>::tys::h35f4a7237a23cc5bX43\n  11:     0x7f85d11e22d0 - middle::typeck::infer::combine::Combine::substs::h324391049216757114\n  12:     0x7f85d11d9f30 - middle::typeck::infer::equate::Equate<'f, 'tcx>.Combine<'tcx>::tys::h35f4a7237a23cc5bX43\n  13:     0x7f85d11e4a00 - middle::typeck::infer::combine::super_tys::closure.158023\n  14:     0x7f85d11e4730 - iter::Iterator::collect::h9565269870161006725\n  15:     0x7f85d11d9f30 - middle::typeck::infer::equate::Equate<'f, 'tcx>.Combine<'tcx>::tys::h35f4a7237a23cc5bX43\n  16:     0x7f85d1760d40 - middle::typeck::infer::combine::Combine::substs::h15550467844381804152\n  17:     0x7f85d176b550 - middle::typeck::infer::InferCtxt<'a, 'tcx>::sub_trait_refs::hce3459e301875ec2Drd\n  18:     0x7f85d13a63c0 - middle::traits::select::SelectionContext<'cx, 'tcx>::confirm::h67d954f9925112deqZW\n  19:     0x7f85d1398700 - middle::traits::select::SelectionContext<'cx, 'tcx>::select::h1e9ce11f39286d16CtV\n  20:     0x7f85d1397120 - middle::traits::fulfill::FulfillmentContext::select_where_possible::h301e00b483f5538598U\n  21:     0x7f85d11b6ff0 - middle::typeck::check::vtable2::select_fcx_obligations_where_possible::h32e182d4cde2e439l9K\n  22:     0x7f85d1a1aaf0 - middle::typeck::check::check_argument_types::h5d391020df5cb75fEeV\n  23:     0x7f85d1a1cf30 - middle::typeck::check::check_expr_with_unifier::he6beb0ddba7fb81elNV\n  24:     0x7f85d1a6a430 - middle::typeck::check::check_decl_local::h3dbf38cc6fab7488QRX\n  25:     0x7f85d1a6a620 - middle::typeck::check::check_stmt::h56381332213a7caeYTX\n  26:     0x7f85d19e6c30 - middle::typeck::check::check_block_with_expected::h4c36c485fa96748dbYX\n  27:     0x7f85d1a1cf30 - middle::typeck::check::check_expr_with_unifier::he6beb0ddba7fb81elNV\n  28:     0x7f85d1a1aaf0 - middle::typeck::check::check_argument_types::h5d391020df5cb75fEeV\n  29:     0x7f85d1a1a060 - middle::typeck::check::check_method_argument_types::h58ec3324eba34260ScV\n  30:     0x7f85d1a1cf30 - middle::typeck::check::check_expr_with_unifier::he6beb0ddba7fb81elNV\n  31:     0x7f85d1a6a620 - middle::typeck::check::check_stmt::h56381332213a7caeYTX\n  32:     0x7f85d19e6c30 - middle::typeck::check::check_block_with_expected::h4c36c485fa96748dbYX\n  33:     0x7f85d19e2480 - middle::typeck::check::check_fn::hee24634b21a2885a2sS\n  34:     0x7f85d19e2280 - middle::typeck::check::check_bare_fn::h6e806ee1bf2c7308aiS\n  35:     0x7f85d19dd8b0 - middle::typeck::check::check_item::h51dfba04fcdcac33dKS\n  36:     0x7f85d19e0cd0 - middle::typeck::check::check_item_types::hd3964d97cc4fc778khS\n  37:     0x7f85d10a9190 - util::common::time::h11171893184677193938\n  38:     0x7f85d1a70480 - middle::typeck::check_crate::ha819c660b3fa1ce7Xdk\n  39:     0x7f85d1261d40 - driver::driver::phase_3_run_analysis_passes::ha3f2a6dccee8b431XKw\n  40:     0x7f85d125ab60 - driver::driver::compile_input::hffa1c362c29e45e9Jrw\n  41:     0x7f85d12bceb0 - driver::run_compiler::h72fc31697a8853f50hA\n  42:     0x7f85d12bcd80 - driver::run::closure.180762\n  43:     0x7f85d12ca670 - task::TaskBuilder<S>::try_future::closure.181584\n  44:     0x7f85d12ca4e0 - task::TaskBuilder<S>::spawn_internal::closure.181576\n  45:     0x7f85d23b0f20 - task::spawn_opts::closure.8955\n  46:     0x7f85d0c32820 - rust_try_inner\n  47:     0x7f85d0c32810 - rust_try\n  48:     0x7f85d0bc3440 - unwind::try::he0499702d1c7d9dfqmd\n  49:     0x7f85d0bbe150 - task::Task::run::h620c5fb327a4e3c14Bc\n  50:     0x7f85d23b0ce0 - task::spawn_opts::closure.8893\n  51:     0x7f85d0bc31e0 - thread::thread_start::haaa628b6babd0f08fWc\n  52:     0x7f85cfe9e250 - start_thread\n  53:     0x7f85d08813b9 - clone\n  54:                0x0 - <unknown>\n```\n\nSeems related to #17545 but not sure if a dupe since the `ReInfer` and `ReLateBound` are on opposite sides of the `<=`.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17816/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17816/timeline", "performed_via_github_app": null, "state_reason": "completed"}