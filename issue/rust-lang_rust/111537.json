{"url": "https://api.github.com/repos/rust-lang/rust/issues/111537", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/111537/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/111537/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/111537/events", "html_url": "https://github.com/rust-lang/rust/issues/111537", "id": 1708671468, "node_id": "I_kwDOAAsO6M5l2EHs", "number": 111537, "title": "errors silenced by presence of async function with errors", "user": {"login": "clubby789", "id": 13556931, "node_id": "MDQ6VXNlcjEzNTU2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clubby789", "html_url": "https://github.com/clubby789", "followers_url": "https://api.github.com/users/clubby789/followers", "following_url": "https://api.github.com/users/clubby789/following{/other_user}", "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}", "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions", "organizations_url": "https://api.github.com/users/clubby789/orgs", "repos_url": "https://api.github.com/users/clubby789/repos", "events_url": "https://api.github.com/users/clubby789/events{/privacy}", "received_events_url": "https://api.github.com/users/clubby789/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-13T16:15:30Z", "updated_at": "2023-05-13T16:25:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried this code:\r\n\r\n```rust\r\npub fn bar() {\r\n    match true {};\r\n}\r\n\r\npub async fn foo() {\r\n    match false {};\r\n}\r\n```\r\n\r\nI expected to see this happen: Two `error[E0004]: non-exhaustive patterns: type bool is non-empty`\r\n\r\nInstead, this happened: Only one is reported, in the async function. The error in the async function is still reported if the order is flipped. Making both functions sync or async correctly reports both errors. If there is any code following the faulty match, it is always reported as unreachable, despite no error being emitted for the preceding line in the sync function.\r\n\r\nFound in #111533 test\r\n\r\n### Meta\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.71.0-nightly (4a59ba4d5 2023-05-12)\r\nbinary: rustc\r\ncommit-hash: 4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04\r\ncommit-date: 2023-05-12\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.71.0-nightly\r\nLLVM version: 16.0.2\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/111537/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/111537/timeline", "performed_via_github_app": null, "state_reason": null}