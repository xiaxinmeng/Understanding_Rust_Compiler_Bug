{"url": "https://api.github.com/repos/rust-lang/rust/issues/25145", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25145/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25145/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25145/events", "html_url": "https://github.com/rust-lang/rust/issues/25145", "id": 73598574, "node_id": "MDU6SXNzdWU3MzU5ODU3NA==", "number": 25145, "title": "ICE with an associated constant as the length of a fixed-size array type of a static variable", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-05-06T12:17:00Z", "updated_at": "2015-10-26T09:00:35Z", "closed_at": "2015-10-26T00:19:56Z", "author_association": "NONE", "active_lock_reason": null, "body": "I tried this code:\n\n``` rust\n#![feature(associated_consts)]\n\nstruct S;\n\nimpl S {\n    const N: usize = 3;\n}\n\nstatic STUFF: [u8; S::N] = [0; S::N];\n\n// NOTE: This works OK:\n// static STUFF: [u8; 3] = [0; S::N];\n\nfn main() {\n    // NOTE: This works OK:\n    // let stuff: [u8; S::N] = [0; S::N];\n}\n```\n\nI get the error:\n\n```\nthread 'rustc' panicked at 'path not fully resolved: PathResolution { base_def: DefTy(DefId { krate: 0, node: 4 }, false), last_private: LastMod(AllPublic), depth: 1 }', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/librustc/middle/def.rs:81\n```\n## Meta\n\n`rustc --version --verbose`:\nrustc 1.1.0-nightly (7bd71637c 2015-05-06) (built 2015-05-05)\nbinary: rustc\ncommit-hash: 7bd71637ca40910dbd310813a19abf76db84f8f6\ncommit-date: 2015-05-06\nbuild-date: 2015-05-05\nhost: x86_64-apple-darwin\nrelease: 1.1.0-nightly\n\nStack backtrace:\n\n```\n   1:        0x10eb86f5f - sys::backtrace::write::hc8a4ac867687625dies\n   2:        0x10eb8fa50 - panicking::on_panic::h8a20ee230368976dxuw\n   3:        0x10eb49b45 - rt::unwind::begin_unwind_inner::hdec022e876757f01gcw\n   4:        0x10eb4a96c - rt::unwind::begin_unwind_fmt::h6ffe61c334a81630mbw\n   5:        0x10bd00e38 - middle::const_eval::eval_const_expr_partial::h814207524cef7390Tii\n   6:        0x10b9c0aed - astconv::ast_ty_to_ty::h9119a591013371dfrSv\n   7:        0x10ba41933 - collect::type_scheme_of_item::h3901b884cf3c707cdny\n   8:        0x10ba39a2c - collect::convert_typed_item::h12a84069945ba57eQry\n   9:        0x10ba211ad - collect::convert_item::hcb1eaa0733f02657eBx\n  10:        0x10ba67b56 - check_crate::closure.38613\n  11:        0x10ba65ada - check_crate::h71ec2befa9b49c1f5CC\n  12:        0x10b2cff27 - driver::phase_3_run_analysis_passes::hcfdd4de2213fe030tGa\n  13:        0x10b2b1c2c - driver::compile_input::h93cb3a50ed1b3f97Qba\n  14:        0x10b370c93 - run_compiler::h7ca7d41460963b3165b\n  15:        0x10b36e3fa - boxed::F.FnBox<A>::call_box::h5883147459539851824\n  16:        0x10b36d957 - rt::unwind::try::try_fn::h498179752253104642\n  17:        0x10ec12028 - rust_try_inner\n  18:        0x10ec12015 - rust_try\n  19:        0x10b36dc2d - boxed::F.FnBox<A>::call_box::h5554344682679983399\n  20:        0x10eb8e44d - sys::thread::Thread::new::thread_start::h71342e3350e45779fxv\n  21:     0x7fff921d0267 - _pthread_body\n  22:     0x7fff921d01e4 - _pthread_start\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25145/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25145/timeline", "performed_via_github_app": null, "state_reason": "completed"}