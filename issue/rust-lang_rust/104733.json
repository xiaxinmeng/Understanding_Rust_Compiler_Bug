{"url": "https://api.github.com/repos/rust-lang/rust/issues/104733", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/104733/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/104733/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/104733/events", "html_url": "https://github.com/rust-lang/rust/issues/104733", "id": 1460424121, "node_id": "I_kwDOAAsO6M5XDE25", "number": 104733, "title": "E0195: Bad error message on mismatched lifetimes when missing where clause", "user": {"login": "msrd0", "id": 7853372, "node_id": "MDQ6VXNlcjc4NTMzNzI=", "avatar_url": "https://avatars.githubusercontent.com/u/7853372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msrd0", "html_url": "https://github.com/msrd0", "followers_url": "https://api.github.com/users/msrd0/followers", "following_url": "https://api.github.com/users/msrd0/following{/other_user}", "gists_url": "https://api.github.com/users/msrd0/gists{/gist_id}", "starred_url": "https://api.github.com/users/msrd0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msrd0/subscriptions", "organizations_url": "https://api.github.com/users/msrd0/orgs", "repos_url": "https://api.github.com/users/msrd0/repos", "events_url": "https://api.github.com/users/msrd0/events{/privacy}", "received_events_url": "https://api.github.com/users/msrd0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-11-22T19:14:09Z", "updated_at": "2022-12-06T15:35:57Z", "closed_at": "2022-12-06T15:35:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n\r\nIf you cannot produce a minimal reproduction case (something that would work in\r\nisolation), please provide the steps or even link to a repository that causes\r\nthe problematic output to occur.\r\n-->\r\n\r\nGiven the following code: [<!-- Please provide a link to play.rust-lang.org -->](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=c4969364f5c55036fa48faddfc33c22e)\r\n\r\n```rust\r\nstruct State;\r\n\r\ntrait Foo<T> {\r\n    fn foo<'a>(&self, state: &'a State) -> &'a T\r\n    where\r\n        T: 'a;\r\n}\r\n\r\nimpl<F, T> Foo<T> for F\r\nwhere\r\n    F: Fn(&State) -> &T,\r\n{\r\n    fn foo<'a>(&self, state: &'a State) -> &'a T {\r\n        self(state)\r\n    }\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0195]: lifetime parameters or bounds on method `foo` do not match the trait declaration\r\n  --> src/lib.rs:13:11\r\n   |\r\n4  |     fn foo<'a>(&self, state: &'a State) -> &'a T\r\n   |           ---- lifetimes in impl do not match this method in trait\r\n...\r\n13 |     fn foo<'a>(&self, state: &'a State) -> &'a T {\r\n   |           ^^^^ lifetimes do not match method in trait\r\n\r\nFor more information about this error, try `rustc --explain E0195`.\r\n```\r\n\r\nThis error message, especially due to the highlighted code, makes me believe that there is some problem with the generic lifetime itself. However, the problem is the missing where bound that never appears in the error message.\r\n\r\nIdeally, the error message should highlight the where clause of the trait that is missing from the implementation, along the lines of this:\r\n\r\n```\r\nerror[E0195]: lifetime parameters or bounds on method `foo` do not match the trait declaration\r\n  --> src/lib.rs:13:11\r\n   |\r\n4  |     fn foo<'a>(&self, state: &'a State) -> &'a T\r\n   |           ---- lifetimes in impl do not match this method in trait\r\n...\r\n13 |     fn foo<'a>(&self, state: &'a State) -> &'a T {\r\n   |           ^^^^ lifetimes do not match method in trait\r\n\r\nhelp: Try adding the following bound:\r\n\r\n  --> src/lib.rs:6:\r\n   |\r\n 6 |        T: 'a;\r\n   |        ^^^^^\r\n\r\nFor more information about this error, try `rustc --explain E0195`.\r\n```\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/104733/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/104733/timeline", "performed_via_github_app": null, "state_reason": "completed"}