{"url": "https://api.github.com/repos/rust-lang/rust/issues/61846", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/61846/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/61846/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/61846/events", "html_url": "https://github.com/rust-lang/rust/issues/61846", "id": 456384563, "node_id": "MDU6SXNzdWU0NTYzODQ1NjM=", "number": 61846, "title": "rustc fails when including some C++ libs because of wasm32 linker fatal warnings", "user": {"login": "jrandall", "id": 458361, "node_id": "MDQ6VXNlcjQ1ODM2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/458361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrandall", "html_url": "https://github.com/jrandall", "followers_url": "https://api.github.com/users/jrandall/followers", "following_url": "https://api.github.com/users/jrandall/following{/other_user}", "gists_url": "https://api.github.com/users/jrandall/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrandall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrandall/subscriptions", "organizations_url": "https://api.github.com/users/jrandall/orgs", "repos_url": "https://api.github.com/users/jrandall/repos", "events_url": "https://api.github.com/users/jrandall/events{/privacy}", "received_events_url": "https://api.github.com/users/jrandall/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37547, "node_id": "MDU6TGFiZWwzNzU0Nw==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-linkage", "name": "A-linkage", "color": "f7e101", "default": false, "description": "Area: linking into static, shared libraries and binaries"}, {"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 474645165, "node_id": "MDU6TGFiZWw0NzQ2NDUxNjU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-wasm", "name": "O-wasm", "color": "6e6ec0", "default": false, "description": "Target: WASM (WebAssembly), http://webassembly.org/"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-06-14T18:43:48Z", "updated_at": "2019-11-14T13:48:04Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "rustc is now passing the argument `--fatal-warnings` to lld on wasm32 (wasm-ld). This appears to have been added in https://github.com/rust-lang/rust/pull/54258\r\n\r\nWhile I agree with the sentiment in the comment \"Rust code should never have warnings, and warnings are often indicative of bugs, let's prevent them\", unfortunately the same cannot apparently be said of C++ code. \r\n\r\nI am currently getting bitten by \"harmless\" warnings due to a bug in LLVM: https://bugs.llvm.org/show_bug.cgi?id=40412\r\n\r\nUnfortunately, because rustc is passing `--fatal-warnings` to wasm-ld, these warnings are not harmless to me but rather prevent me from linking the C++ library into my rust project. \r\n\r\nI looked for an override such as `--no-fatal-warnings` but there does not appear to be one. Could we perhaps add an option to rustc such that the `--fatal-warnings` option can be suppressed (maybe via RUSTFLAGS) in cases where for whatever reason we run into otherwise harmless LLVM warnings? ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/61846/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/61846/timeline", "performed_via_github_app": null, "state_reason": null}