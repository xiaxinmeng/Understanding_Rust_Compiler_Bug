{"url": "https://api.github.com/repos/rust-lang/rust/issues/58904", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/58904/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/58904/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/58904/events", "html_url": "https://github.com/rust-lang/rust/issues/58904", "id": 416560475, "node_id": "MDU6SXNzdWU0MTY1NjA0NzU=", "number": 58904, "title": "Blanket impl resolution vs. trait bounds", "user": {"login": "jcape", "id": 35878, "node_id": "MDQ6VXNlcjM1ODc4", "avatar_url": "https://avatars.githubusercontent.com/u/35878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcape", "html_url": "https://github.com/jcape", "followers_url": "https://api.github.com/users/jcape/followers", "following_url": "https://api.github.com/users/jcape/following{/other_user}", "gists_url": "https://api.github.com/users/jcape/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcape/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcape/subscriptions", "organizations_url": "https://api.github.com/users/jcape/orgs", "repos_url": "https://api.github.com/users/jcape/repos", "events_url": "https://api.github.com/users/jcape/events{/privacy}", "received_events_url": "https://api.github.com/users/jcape/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-03-03T20:32:44Z", "updated_at": "2019-03-03T21:40:57Z", "closed_at": "2019-03-03T21:40:57Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have run into similar errors to #50133, so that may share the same ultimate cause as mine.\r\n\r\nI'm having an issue with the `impl<T> From<T> for T` blanket implementation causing conflicts with my own blanket implementation of a `From` trait. For example, if I have a type which implements `AsRef<u8>`, and `From<T: AsRef<[u8]>>`, that blanket implementation conflicts, because my implementation of the trait and the trait-bound-from obviously provide a different path for `T::from(T)`. I think this is wrong, though in my specific case I have worked around it by doing `From<&'bytes [u8]>`, but wrong is wrong :-)\r\n\r\nSome sample code:\r\n\r\n```\r\nstruct MyType(Vec<u8>);\r\n\r\nimpl AsRef<[u8]> for MyType {\r\n    fn as_ref(&self) -> &[u8] {\r\n        self.0.as_ref()\r\n    }\r\n}\r\n\r\nimpl<B: AsRef<[u8]> From<B> for MyType {\r\n    fn from(src: B) -> Self {\r\n        Self(Vec::from(src))\r\n    }\r\n}\r\n```\r\n\r\nResulting error:\r\n\r\n```\r\nerror[E0119]: conflicting implementations of trait `std::convert::From<MyType>` for type `MyType`:\r\n  --> src/main.rs:10:1\r\n   |\r\n10 | impl<B: AsRef<[u8]>> From<B> for MyType {\r\n   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n   |\r\n   = note: conflicting implementation in crate `core`:\r\n           - impl<T> std::convert::From<T> for T;\r\n```", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/58904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/58904/timeline", "performed_via_github_app": null, "state_reason": "completed"}