{"url": "https://api.github.com/repos/rust-lang/rust/issues/66831", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/66831/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/66831/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/66831/events", "html_url": "https://github.com/rust-lang/rust/issues/66831", "id": 529687950, "node_id": "MDU6SXNzdWU1Mjk2ODc5NTA=", "number": 66831, "title": "How to ? different Error type in the same async block", "user": {"login": "CGQAQ", "id": 15936231, "node_id": "MDQ6VXNlcjE1OTM2MjMx", "avatar_url": "https://avatars.githubusercontent.com/u/15936231?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CGQAQ", "html_url": "https://github.com/CGQAQ", "followers_url": "https://api.github.com/users/CGQAQ/followers", "following_url": "https://api.github.com/users/CGQAQ/following{/other_user}", "gists_url": "https://api.github.com/users/CGQAQ/gists{/gist_id}", "starred_url": "https://api.github.com/users/CGQAQ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CGQAQ/subscriptions", "organizations_url": "https://api.github.com/users/CGQAQ/orgs", "repos_url": "https://api.github.com/users/CGQAQ/repos", "events_url": "https://api.github.com/users/CGQAQ/events{/privacy}", "received_events_url": "https://api.github.com/users/CGQAQ/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-11-28T04:36:12Z", "updated_at": "2019-11-28T08:46:39Z", "closed_at": "2019-11-28T08:46:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "according to [this article](https://rust-lang.github.io/async-book/07_workarounds/03_err_in_async_blocks.html)\r\nUsing ? with different Error type in the same async block seems unachievable\r\n\r\n```Rust\r\nasync fn a() -> Result<(), reqwest::Error> {Ok(())}\r\nasync fn b() -> Result<(), std::io::Error> {Ok(())}\r\n\r\nfn c() {\r\n    async {\r\n        a().await?;\r\n        b().await?;\r\n        Ok(())    // error msg 1\r\n        // Ok::<(), impl std::error::Error>(())  // error msg 2\r\n    };\r\n}\r\n\r\nasync fn d() -> Result<(), impl std::error::Error> {\r\n    a().await?;\r\n    b().await?;\r\n    Ok(())\r\n}\r\n```\r\n\r\n1\r\n```\r\n --> src/x.rs:6:9\r\n  |\r\n6 |         a().await?;\r\n  |         ^^^^^^^^^^ cannot infer type\r\n```\r\n\r\n2\r\n```\r\nerror[E0562]: `impl Trait` not allowed outside of function and inherent method return types\r\n --> src/x.rs:8:18\r\n  |\r\n8 |         Ok::<(), impl std::error::Error>(())\r\n  | \r\n```\r\n\r\nMaybe add something like this? *Unify closure and block*\r\n```rust\r\nasync || -> Result<(), impl std::error::Error> {\r\n        a().await?;\r\n        b().await?;\r\n        Ok(())\r\n};\r\n```", "closed_by": {"login": "csmoe", "id": 35686186, "node_id": "MDQ6VXNlcjM1Njg2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/35686186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csmoe", "html_url": "https://github.com/csmoe", "followers_url": "https://api.github.com/users/csmoe/followers", "following_url": "https://api.github.com/users/csmoe/following{/other_user}", "gists_url": "https://api.github.com/users/csmoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/csmoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csmoe/subscriptions", "organizations_url": "https://api.github.com/users/csmoe/orgs", "repos_url": "https://api.github.com/users/csmoe/repos", "events_url": "https://api.github.com/users/csmoe/events{/privacy}", "received_events_url": "https://api.github.com/users/csmoe/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/66831/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/66831/timeline", "performed_via_github_app": null, "state_reason": "completed"}