{"url": "https://api.github.com/repos/rust-lang/rust/issues/60917", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/60917/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/60917/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/60917/events", "html_url": "https://github.com/rust-lang/rust/issues/60917", "id": 445538171, "node_id": "MDU6SXNzdWU0NDU1MzgxNzE=", "number": 60917, "title": "Error message for question mark operator should message conversion", "user": {"login": "sunjay", "id": 530939, "node_id": "MDQ6VXNlcjUzMDkzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/530939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunjay", "html_url": "https://github.com/sunjay", "followers_url": "https://api.github.com/users/sunjay/followers", "following_url": "https://api.github.com/users/sunjay/following{/other_user}", "gists_url": "https://api.github.com/users/sunjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunjay/subscriptions", "organizations_url": "https://api.github.com/users/sunjay/orgs", "repos_url": "https://api.github.com/users/sunjay/repos", "events_url": "https://api.github.com/users/sunjay/events{/privacy}", "received_events_url": "https://api.github.com/users/sunjay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-05-17T17:12:41Z", "updated_at": "2019-05-19T04:50:04Z", "closed_at": "2019-05-19T04:50:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I've been working with a lot of people who are either new to Rust or new to its latest features (like the question mark operator) and I'm noticing a lot of confusion around a specific error message.\r\n\r\nSuppose you have the following code:\r\n\r\n```rust\r\n#[derive(Debug)]\r\nstruct Error1;\r\n#[derive(Debug)]\r\nstruct Error2;\r\n\r\nfn foo() -> Result<(), Error1> {\r\n    Err(Error1)\r\n}\r\n\r\nfn main() -> Result<(), Error2> {\r\n    foo()?;\r\n    \r\n    Ok(())\r\n}\r\n```\r\n\r\nThis gives you the error:\r\n\r\n```\r\nerror[E0277]: the trait bound `Error2: std::convert::From<Error1>` is not satisfied\r\n  --> src/main.rs:11:5\r\n   |\r\n11 |     foo()?;\r\n   |     ^^^^^^ the trait `std::convert::From<Error1>` is not implemented for `Error2`\r\n   |\r\n   = note: required by `std::convert::From::from`\r\n```\r\n\r\nHowever, if you look at the actual code, it isn't obvious where the `From` trait is even being used.\r\n\r\nThe [documentation for the `From` trait](https://doc.rust-lang.org/std/convert/trait.From.html) actually does mention this briefly, though most people I encounter don't go as far as looking that up. The error message is pretty daunting if you're new to the language.\r\n\r\nI propose that we add something to the error message when we see that they are using the question mark:\r\n\r\n```\r\nhelp: the question mark operation (`?`) implicitly performs a conversion\r\n      on the error value using the `From` trait. If no conversion is\r\n      defined, you will see this error message.\r\n```\r\n\r\nThis conveys exactly where the `From` trait is being used and why they may be running into this issue. You certainly don't have to use this exact wording. Feel free to use whatever fits. :)\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/60917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/60917/timeline", "performed_via_github_app": null, "state_reason": "completed"}