{"url": "https://api.github.com/repos/rust-lang/rust/issues/9243", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/9243/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/9243/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/9243/events", "html_url": "https://github.com/rust-lang/rust/issues/9243", "id": 19591111, "node_id": "MDU6SXNzdWUxOTU5MTExMQ==", "number": 9243, "title": "ICE when a static variable is declared of type for which the `Drop` trait is implemented", "user": {"login": "MarkJr94", "id": 1462602, "node_id": "MDQ6VXNlcjE0NjI2MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1462602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkJr94", "html_url": "https://github.com/MarkJr94", "followers_url": "https://api.github.com/users/MarkJr94/followers", "following_url": "https://api.github.com/users/MarkJr94/following{/other_user}", "gists_url": "https://api.github.com/users/MarkJr94/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkJr94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkJr94/subscriptions", "organizations_url": "https://api.github.com/users/MarkJr94/orgs", "repos_url": "https://api.github.com/users/MarkJr94/repos", "events_url": "https://api.github.com/users/MarkJr94/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkJr94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/rust-lang/rust/milestones/20", "html_url": "https://github.com/rust-lang/rust/milestone/20", "labels_url": "https://api.github.com/repos/rust-lang/rust/milestones/20/labels", "id": 452034, "node_id": "MDk6TWlsZXN0b25lNDUyMDM0", "number": 20, "title": "1.0", "description": "This will be the first major release of Rust, where we offer some guaranteed level of support and backwards compatibility.\r\n\r\nThe significant criteria for this release are:\r\n\r\n* Language backwards compatibility - All major features are in, and in their final form. Generally, the only new language features added after this milestone must be backwards compatible, or to fix soundness holes, though we do expect to have some leeway to make small incompatible fixes that have low impact on existing code bases.\r\n\r\n* Library stability - We have a system of measuring and ensuring the stability of API's, and a significant portion of the standard library is declared stable. Stable API's will not change. Large portions of the standard library need to be stable for 1.0, including primitive types, vectors, strings, option, numerics, collections, some I/O and concurrency.\r\n\r\n* User experience - The system is polished and the presentation is complete and professional. New users have a clear path to using and learning the system. This encompasses the web site, documentation, installation, and tooling.\r\n", "creator": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 376, "state": "closed", "created_at": "2013-10-10T18:48:33Z", "updated_at": "2016-08-28T23:13:24Z", "due_on": "2015-05-15T07:00:00Z", "closed_at": "2015-05-21T20:59:13Z"}, "comments": 15, "created_at": "2013-09-17T01:52:53Z", "updated_at": "2014-02-28T04:06:55Z", "closed_at": "2014-02-28T04:06:55Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Minimal test case:\n\n``` rust\nstruct Test {\n    mem: int,\n}\n\npub static g_test: Test = Test {\n    mem: 0,\n};\n\nimpl Drop for Test {\n    fn drop(&self) {\n    }\n}\n\nfn main() {\n\n}\n```\n\nResulting Error after run with `RUST_LOG=rustc=1 rustc test.rs`:\n\n```\ntask <unnamed> failed at 'assertion failed: `(left == right) && (right == left)` (left: `1u`, right: `2u`)', /build/buildd/rust-nightly-201309160805~3fbfab0~raring/src/librustc/middle/trans/adt.rs:545\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug\nnote: try running with RUST_LOG=rustc=1 to get further details and report the results to github.com/mozilla/rust/issues\ntask <unnamed> failed at 'explicit failure', /build/buildd/rust-nightly-201309160805~3fbfab0~raring/src/librustc/rustc.rs:377\n```\n\nAlso,  this:\n\n``` rust\nstruct Test;\n\npub static g_test: Test = Test;\n\nimpl Drop for Test {\n    fn drop(&self) {\n    }\n}\n\nfn main() {\n\n}\n```\n\ncompiles just fine, although I believe both cases should give a compilation error about having static variable implementing the `Drop` trait.\n\nMy rustc is acquired form the `rust-nightly` package in the Ubuntu repo.\n\nOutput of `rustc --version`:\n\n```\nrustc 0.8-pre\nhost: x86_64-unknown-linux-gnu\n```\n", "closed_by": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/9243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/9243/timeline", "performed_via_github_app": null, "state_reason": "completed"}