{"url": "https://api.github.com/repos/rust-lang/rust/issues/110090", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/110090/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/110090/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/110090/events", "html_url": "https://github.com/rust-lang/rust/issues/110090", "id": 1659602173, "node_id": "I_kwDOAAsO6M5i64T9", "number": 110090, "title": "stable: Give a better error message for `rustc +nightly -Zunstable-options`", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 201852178, "node_id": "MDU6TGFiZWwyMDE4NTIxNzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-stability", "name": "A-stability", "color": "f7e101", "default": false, "description": "Area: issues related to #[stable] and #[unstable] attributes themselves."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 419557634, "node_id": "MDU6TGFiZWw0MTk1NTc2MzQ=", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-medium", "name": "E-medium", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Medium / intermediate"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-08T18:13:52Z", "updated_at": "2023-05-10T03:41:31Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "### Code\n\n```Rust\n$(rustup which rustc --toolchain 1.68) +nightly -Zunstable-options\n```\n\n\n### Current output\n\n```Shell\nerror: the option `Z` is only accepted on the nightly compiler\n```\n\n\n### Desired output\n\n```Shell\nerror: the option `Z` is only accepted on the nightly compiler\r\nerror: couldn't read +nightly: No such file or directory (os error 2)\r\n|\r\n= note: selecting a toolchain with `+toolchain` arguments require a rustup proxy; see <https://rust-lang.github.io/rustup/concepts/index.html>\n```\n\n\n### Rationale and extra context\n\nDistros often install rustc directly, without a rustup wrapper. In that case, people using the distro rustc may see suggestions on stack overflow or elsewhere that won't work with their toolchain. We should improve the error message for them.\r\n\r\nOriginally reported in https://github.com/rust-lang/rust/issues/104785.\n\n### Other cases\n\n_No response_\n\n### Anything else?\n\nNote that to test your change for this issue, you'll have to set `channel = \"stable\"` in config.toml; nightly reports a different error:\r\n```\r\n; $(rustup which rustc --toolchain nightly) +nightly -Zunstable-options\r\nerror: couldn't read +nightly: No such file or directory (os error 2)\r\n\r\nerror: aborting due to previous error\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/110090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/110090/timeline", "performed_via_github_app": null, "state_reason": null}