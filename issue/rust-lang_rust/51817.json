{"url": "https://api.github.com/repos/rust-lang/rust/issues/51817", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/51817/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/51817/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/51817/events", "html_url": "https://github.com/rust-lang/rust/issues/51817", "id": 335917579, "node_id": "MDU6SXNzdWUzMzU5MTc1Nzk=", "number": 51817, "title": "Unexpected/undocumented `binary_search` behavior with duplicates", "user": {"login": "scottjmaddox", "id": 28676699, "node_id": "MDQ6VXNlcjI4Njc2Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/28676699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottjmaddox", "html_url": "https://github.com/scottjmaddox", "followers_url": "https://api.github.com/users/scottjmaddox/followers", "following_url": "https://api.github.com/users/scottjmaddox/following{/other_user}", "gists_url": "https://api.github.com/users/scottjmaddox/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottjmaddox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottjmaddox/subscriptions", "organizations_url": "https://api.github.com/users/scottjmaddox/orgs", "repos_url": "https://api.github.com/users/scottjmaddox/repos", "events_url": "https://api.github.com/users/scottjmaddox/events{/privacy}", "received_events_url": "https://api.github.com/users/scottjmaddox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-06-26T17:18:52Z", "updated_at": "2018-10-08T05:40:21Z", "closed_at": "2018-10-08T05:40:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "`slice::binary_search` (and perhaps its cousins?) behave in a fairly unexpected (and undocumented) way in the presence of duplicates:\r\n\r\n```rust\r\nlet s = &[0, 1, 1, 1, 1, 2];\r\n// What I would expect:\r\nassert_eq!(s.binary_search(&1), Ok(1));\r\n// Actual result:\r\nassert_eq!(s.binary_search(&1), Ok(4));\r\n```\r\n\r\nWhile not strictly a bug (since the documentation does not state a particular behavior in this case) it would be fairly simple to tweak the implementation to provide the more expected behavior of returning the first match. Either way, it would be preferable if the behavior were documented.\r\n\r\nMaking the change at this point might result in some unexpected code breakage, even though the behavior is not documented. In order to ease the transition, it may be best to rename the current implementation to `reverse_binary_search` or similar, and provide the expected implementation for `binary_search`.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/51817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/51817/timeline", "performed_via_github_app": null, "state_reason": "completed"}