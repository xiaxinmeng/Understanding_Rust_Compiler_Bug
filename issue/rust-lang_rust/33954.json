{"url": "https://api.github.com/repos/rust-lang/rust/issues/33954", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/33954/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/33954/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/33954/events", "html_url": "https://github.com/rust-lang/rust/issues/33954", "id": 157412873, "node_id": "MDU6SXNzdWUxNTc0MTI4NzM=", "number": 33954, "title": "Test suite ignores tests after an exit(0).", "user": {"login": "cristianoliveira", "id": 3959744, "node_id": "MDQ6VXNlcjM5NTk3NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3959744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cristianoliveira", "html_url": "https://github.com/cristianoliveira", "followers_url": "https://api.github.com/users/cristianoliveira/followers", "following_url": "https://api.github.com/users/cristianoliveira/following{/other_user}", "gists_url": "https://api.github.com/users/cristianoliveira/gists{/gist_id}", "starred_url": "https://api.github.com/users/cristianoliveira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cristianoliveira/subscriptions", "organizations_url": "https://api.github.com/users/cristianoliveira/orgs", "repos_url": "https://api.github.com/users/cristianoliveira/repos", "events_url": "https://api.github.com/users/cristianoliveira/events{/privacy}", "received_events_url": "https://api.github.com/users/cristianoliveira/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-05-29T23:57:09Z", "updated_at": "2016-05-31T11:51:36Z", "closed_at": "2016-05-30T18:46:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was dealing with this issue (the tests that do not run) for while then I figured out that it was because of an exit(0) that was added in the middle of a method.\n\nThe problem occurs when there is some method that calls exit(0). The test suite starts to ignore fails for the next tests even for tests in others modules depending on the order of execution.\n\nExample of erroneous code:\n\n``` rust\nuse std::process::exit;\n\nfn main() {\n    println!(\"Hello, world!\");\n}\n\nfn die() { // name is just an example\n    exit(0)\n}\n\n#[test]\nfn it_works() {\n    assert!(true);\n}\n\n#[test]\nfn it_does_not_run() {\n    assert!(false);\n}\n\n#[test]\n#[should_panic]\nfn it_dies() {\n    die();\n}\n\n// another file.\nmod other {\n    #[test]\n    fn it_may_run() {\n        assert!(false);\n    }\n}\n```\n\nI hoped that the `it_dies` test does not run and the others tests run without the influence of this problematic one.\n\nI got a strange behavior where the tests started to be ignored and the suite returning the total of all tests that supposed to be performed.\n\nI know that dealing with exit(0) on the tests may be difficult but I hope that the test suite: runs all the tests, shows some error/warning or an option to wait for it, like `#[should_exit]`.\n\nBtw, you are doing a great job guys!\n", "closed_by": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/33954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/33954/timeline", "performed_via_github_app": null, "state_reason": "completed"}