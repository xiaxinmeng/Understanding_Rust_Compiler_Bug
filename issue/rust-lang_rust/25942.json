{"url": "https://api.github.com/repos/rust-lang/rust/issues/25942", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/25942/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/25942/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/25942/events", "html_url": "https://github.com/rust-lang/rust/issues/25942", "id": 83561264, "node_id": "MDU6SXNzdWU4MzU2MTI2NA==", "number": 25942, "title": "Seems like the compiler/optimizer is doing something weird here", "user": {"login": "ericsink", "id": 3877005, "node_id": "MDQ6VXNlcjM4NzcwMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/3877005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericsink", "html_url": "https://github.com/ericsink", "followers_url": "https://api.github.com/users/ericsink/followers", "following_url": "https://api.github.com/users/ericsink/following{/other_user}", "gists_url": "https://api.github.com/users/ericsink/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericsink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericsink/subscriptions", "organizations_url": "https://api.github.com/users/ericsink/orgs", "repos_url": "https://api.github.com/users/ericsink/repos", "events_url": "https://api.github.com/users/ericsink/events{/privacy}", "received_events_url": "https://api.github.com/users/ericsink/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 113376, "node_id": "MDU6TGFiZWwxMTMzNzY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-slow", "name": "I-slow", "color": "e10c02", "default": false, "description": "Problems and improvements with respect to performance of generated code."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-06-01T15:27:52Z", "updated_at": "2017-01-03T20:54:50Z", "closed_at": "2017-01-03T20:24:20Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Nutshell summary:  I made some code changes that caused a performance degradation that was very surprising.  Possibly relevant is that along with the slowdown, valgrind --tool=callgrind started showing time spent in arena_avail_remove and arena_avail_insert.\n\nThe code to reproduce this is in the rs directory of this repo:\n\nhttps://github.com/ericsink/LSM\n\nThe faster version (let's call it C) is commit 630968f0536b079d2f614a7a596c61cc8105b290, and that commit message has some additional detail.\n\nThe slower version (let's call it B) is its immediate parent, 78f75009defc98fd8745604a29bd1e7e2cea443f.\n\nThe starting point (let's call it A) for this series of changes is a014746795b82b682460d1f5eed1f12cd9a8e479.\n\nSo, starting at A, I made a bunch of changes, all of which were designed to make the code faster by using more references and less memory allocation.  Arriving at B, I discovered that actually, everything was slower.  Commit C is an undo of most of those changes to get the perf back.\n\nThere may not be an actual \"bug\" here, but I found the result quite unintuitive.\n", "closed_by": {"login": "ericsink", "id": 3877005, "node_id": "MDQ6VXNlcjM4NzcwMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/3877005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericsink", "html_url": "https://github.com/ericsink", "followers_url": "https://api.github.com/users/ericsink/followers", "following_url": "https://api.github.com/users/ericsink/following{/other_user}", "gists_url": "https://api.github.com/users/ericsink/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericsink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericsink/subscriptions", "organizations_url": "https://api.github.com/users/ericsink/orgs", "repos_url": "https://api.github.com/users/ericsink/repos", "events_url": "https://api.github.com/users/ericsink/events{/privacy}", "received_events_url": "https://api.github.com/users/ericsink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/25942/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/25942/timeline", "performed_via_github_app": null, "state_reason": "completed"}