{"url": "https://api.github.com/repos/rust-lang/rust/issues/34349", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/34349/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/34349/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/34349/events", "html_url": "https://github.com/rust-lang/rust/issues/34349", "id": 161039568, "node_id": "MDU6SXNzdWUxNjEwMzk1Njg=", "number": 34349, "title": "Encountered error `Unimplemented` selecting `Binder(<[closure ...] as Fn()>)` during trans", "user": {"login": "KarboniteKream", "id": 1769968, "node_id": "MDQ6VXNlcjE3Njk5Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/1769968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KarboniteKream", "html_url": "https://github.com/KarboniteKream", "followers_url": "https://api.github.com/users/KarboniteKream/followers", "following_url": "https://api.github.com/users/KarboniteKream/following{/other_user}", "gists_url": "https://api.github.com/users/KarboniteKream/gists{/gist_id}", "starred_url": "https://api.github.com/users/KarboniteKream/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KarboniteKream/subscriptions", "organizations_url": "https://api.github.com/users/KarboniteKream/orgs", "repos_url": "https://api.github.com/users/KarboniteKream/repos", "events_url": "https://api.github.com/users/KarboniteKream/events{/privacy}", "received_events_url": "https://api.github.com/users/KarboniteKream/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}], "state": "closed", "locked": false, "assignee": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2016-06-18T19:24:06Z", "updated_at": "2016-07-31T21:42:01Z", "closed_at": "2016-07-31T21:42:01Z", "author_association": "NONE", "active_lock_reason": null, "body": "I was going over the examples on Rust by Example (section 8.2.2) when I encountered the following error:\n`Encountered error 'Unimplemented' selecting 'Binder(<[closure@bug.rs:11:17: 14:6 farewell:&mut std::string::String] as std::ops::Fn<()>>)' during trans`.\n\nIn the `apply()` function, if I replace `Fn()` with `FnMut()` or `FnOnce()`, the code works (with `FnMut()` it fails of course), but if I keep `Fn()`, the compiler panics.\n\nIf I remove the `inc()` call, the compiler also doesn't panic.\n##### Source code\n\n```\nfn main() {\n    let inc = || {};\n    inc();\n\n    fn apply<F>(f: F) where F: Fn() {\n        f()\n    }\n\n    let mut farewell = \"goodbye\".to_owned();\n    let diary = || {\n        farewell.push_str(\"!!!\");\n        println!(\"Then I screamed {}.\", farewell);\n    };\n\n    apply(diary);\n}\n```\n##### Stack trace\n\n```\nthread 'rustc' panicked at 'Box<Any>', src/libsyntax/errors/mod.rs:545\nstack backtrace:\n   1:     0x7f7a1327724f - <unknown>\n   2:     0x7f7a13284e3b - <unknown>\n   3:     0x7f7a132849d8 - <unknown>\n   4:     0x7f7a1324ad9e - std::panicking::rust_panic_with_hook::h5fd54c69674f2610\n   5:     0x7f7a10c81288 - <unknown>\n   6:     0x7f7a10c810f5 - <unknown>\n   7:     0x7f7a10c80ebf - <unknown>\n   8:     0x7f7a10d225ac - <unknown>\n   9:     0x7f7a10c94848 - <unknown>\n  10:     0x7f7a10d168ae - _<rustc_trans..collector..MirNeighborCollector<'a, 'tcx> as rustc..mir..visit..Visitor<'tcx>>::visit_operand::h2cab09bf7cc9d690\n  11:     0x7f7a10d14866 - _<rustc_trans..collector..MirNeighborCollector<'a, 'tcx> as rustc..mir..visit..Visitor<'tcx>>::visit_terminator_kind::h209a1accd24a8c16\n  12:     0x7f7a10d13010 - <unknown>\n  13:     0x7f7a10d0c95a - <unknown>\n  14:     0x7f7a10d0d696 - <unknown>\n  15:     0x7f7a10cd2a33 - <unknown>\n  16:     0x7f7a10cbf9f9 - rustc_trans::base::trans_crate::hca67d2711539a441\n  17:     0x7f7a137be6ff - rustc_driver::driver::phase_4_translate_to_llvm::h5f028163cc963293\n  18:     0x7f7a137bc58d - <unknown>\n  19:     0x7f7a137b8ced - <unknown>\n  20:     0x7f7a137b24b9 - <unknown>\n  21:     0x7f7a1377b8af - rustc_driver::driver::compile_input::h5e5e4501615d7d4b\n  22:     0x7f7a137678a4 - rustc_driver::run_compiler::h9bfe8b5b10d5224d\n  23:     0x7f7a1376497e - <unknown>\n  24:     0x7f7a1329493b - <unknown>\n  25:     0x7f7a132948de - __rust_maybe_catch_panic\n  26:     0x7f7a13765464 - <unknown>\n  27:     0x7f7a13282f64 - <unknown>\n  28:     0x7f7a0bd10473 - start_thread\n  29:     0x7f7a12ed169c - clone\n  30:                0x0 - <unknown>\n```\n##### Version\n\nrustc 1.11.0-nightly (5c2a5d449 2016-06-11)\nbinary: rustc\ncommit-hash: 5c2a5d4499376ade0dd6bb30e8c5909abb42e574\ncommit-date: 2016-06-11\nhost: x86_64-pc-windows-gnu\nrelease: 1.11.0-nightly\n\nThe same problem occurs on Linux, also Nightly.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/34349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/34349/timeline", "performed_via_github_app": null, "state_reason": "completed"}