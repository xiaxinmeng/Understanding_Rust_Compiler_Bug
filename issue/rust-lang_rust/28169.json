{"url": "https://api.github.com/repos/rust-lang/rust/issues/28169", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28169/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28169/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28169/events", "html_url": "https://github.com/rust-lang/rust/issues/28169", "id": 104538572, "node_id": "MDU6SXNzdWUxMDQ1Mzg1NzI=", "number": 28169, "title": "link.exe fail on Windows with MSVC involving logging and generic struct", "user": {"login": "alexbool", "id": 1283792, "node_id": "MDQ6VXNlcjEyODM3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1283792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexbool", "html_url": "https://github.com/alexbool", "followers_url": "https://api.github.com/users/alexbool/followers", "following_url": "https://api.github.com/users/alexbool/following{/other_user}", "gists_url": "https://api.github.com/users/alexbool/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexbool/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexbool/subscriptions", "organizations_url": "https://api.github.com/users/alexbool/orgs", "repos_url": "https://api.github.com/users/alexbool/repos", "events_url": "https://api.github.com/users/alexbool/events{/privacy}", "received_events_url": "https://api.github.com/users/alexbool/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2015-09-02T17:57:40Z", "updated_at": "2015-09-02T20:55:13Z", "closed_at": "2015-09-02T20:55:13Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n$ cargo build\n   Compiling libc v0.1.10\n   Compiling log v0.3.2\n   Compiling link-crash v0.1.0 (file:///C:/Users/%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B0%D0%BD%D0%B4%D1%80/Document\ns/link-crash)\nerror: linking with `link.exe` failed: exit code: 1120\nnote: \"C:\\\\Program Files (x86)\\\\Microsoft Visual Studio 14.0\\\\VC/bin\\\\link.exe\" \"/LIBPATH:C:\\\\Program Files (x86\n)\\\\Microsoft Visual Studio 14.0\\\\VC/lib\\\\\" \"/LIBPATH:C:\\\\Program Files (x86)\\\\Windows Kits\\\\10\\\\Lib\\\\10.0.10150.\n0\\\\ucrt\\\\x86\" \"/LIBPATH:C:\\\\Program Files (x86)\\\\Windows Kits\\\\8.1\\\\Lib\\\\winv6.3\\\\um\\\\x86\" \"/NOLOGO\" \"/NXCOMPAT\"\n \"/LIBPATH:C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\"\n \"C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\target\\\\deb\nug\\\\link_crash.0.o\" \"/OUT:C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\n\\link-crash\\\\target\\\\debug\\\\link_crash.exe\" \"/OPT:REF,ICF\" \"/DEBUG\" \"C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{4\n41}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\target\\\\debug\\\\liblink_crash.rlib\" \"C:\\\\Users\\\\\\u{410}\\u\n{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\target\\\\debug\\\\deps\\\\liblog-f18a3\ne885170bd3f.rlib\" \"C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-c\nrash\\\\target\\\\debug\\\\deps\\\\liblibc-144c435538abd757.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\n\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libstd-35017696.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-\nwindows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libcollections-35017696.rlib\" \"C:\\\\Program Files\\\\\nrust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\librustc_unicode-35017696.rli\nb\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libran\nd-35017696.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msv\nc\\\\lib\\\\liballoc-35017696.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686\n-pc-windows-msvc\\\\lib\\\\liballoc_system-35017696.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rus\ntc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\liblibc-35017696.rlib\" \"C:\\\\Program Files\\\\rust-nightly-i686-pc-win\ndows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\\\\libcore-35017696.rlib\" \"/LIBPATH:C:\\\\Users\\\\\\u{410}\\u\n{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\target\\\\debug\" \"/LIBPATH:C:\\\\User\ns\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\target\\\\debug\\\\deps\"\n\"/LIBPATH:C:\\\\Program Files\\\\rust-nightly-i686-pc-windows-msvc\\\\rustc\\\\bin\\\\rustlib\\\\i686-pc-windows-msvc\\\\lib\"\n\"/LIBPATH:C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{440}\\\\Documents\\\\link-crash\\\\.ru\nst\\\\bin\\\\i686-pc-windows-msvc\" \"/LIBPATH:C:\\\\Users\\\\\\u{410}\\u{43b}\\u{435}\\u{43a}\\u{441}\\u{430}\\u{43d}\\u{434}\\u{4\n40}\\\\Documents\\\\link-crash\\\\bin\\\\i686-pc-windows-msvc\" \"kernel32.lib\" \"shell32.lib\" \"msvcrt.lib\" \"ws2_32.lib\" \"u\nserenv.lib\" \"advapi32.lib\" \"kernel32.lib\" \"shell32.lib\" \"msvcrt.lib\" \"compiler-rt.lib\"\nCould not compile `link-crash`.\n\nTo learn more, run the command again with --verbose.\n```\n\n```\n$ rustc -vV\nrustc 1.4.0-nightly (f3f23bf9c 2015-08-30)\nbinary: rustc\ncommit-hash: f3f23bf9c5ee16dab8c25bb5d301d689fbbe0cf1\ncommit-date: 2015-08-30\nhost: i686-pc-windows-msvc\nrelease: 1.4.0-nightly\n```\n\nHere is the minimal test case:\n- `Cargo.toml`:\n\n``` rust\n[package]\nname = \"link-crash\"\nversion = \"0.1.0\"\nauthors = [\"Alexander Bulaev <alexbool@yandex-team.ru>\"]\n\n[dependencies]\nlog = \"*\"\n```\n- `src/lib.rs`:\n\n``` rust\n#[macro_use]\nextern crate log;\n\nuse std::fmt::Debug;\n\npub struct Logger<E: Debug> {\n    field: E,\n}\n\nimpl<E: Debug> Logger<E> {\n    pub fn new(field: E) -> Logger<E> {\n        Logger {\n            field: field\n        }\n    }\n\n    pub fn do_log(&self) {\n        info!(\"This is the message: {:?}\", self.field);\n    }\n}\n```\n- `src/main.rs`:\n\n``` rust\nextern crate link_crash;\n\nfn main() {\n    link_crash::Logger::new(\"123\").do_log();\n}\n```\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28169/timeline", "performed_via_github_app": null, "state_reason": "completed"}