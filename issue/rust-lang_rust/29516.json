{"url": "https://api.github.com/repos/rust-lang/rust/issues/29516", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29516/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29516/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29516/events", "html_url": "https://github.com/rust-lang/rust/issues/29516", "id": 114513400, "node_id": "MDU6SXNzdWUxMTQ1MTM0MDA=", "number": 29516, "title": "ICE: Conflicting trait impls with custom default-implemented trait bound", "user": {"login": "rphmeier", "id": 10121380, "node_id": "MDQ6VXNlcjEwMTIxMzgw", "avatar_url": "https://avatars.githubusercontent.com/u/10121380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rphmeier", "html_url": "https://github.com/rphmeier", "followers_url": "https://api.github.com/users/rphmeier/followers", "following_url": "https://api.github.com/users/rphmeier/following{/other_user}", "gists_url": "https://api.github.com/users/rphmeier/gists{/gist_id}", "starred_url": "https://api.github.com/users/rphmeier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rphmeier/subscriptions", "organizations_url": "https://api.github.com/users/rphmeier/orgs", "repos_url": "https://api.github.com/users/rphmeier/repos", "events_url": "https://api.github.com/users/rphmeier/events{/privacy}", "received_events_url": "https://api.github.com/users/rphmeier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2015-11-02T02:38:25Z", "updated_at": "2017-07-26T23:40:59Z", "closed_at": "2017-07-26T23:40:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This stems from my attempt to extend the `NotSame` trait for type inequality as described in #29499 to tuples of arbitrary size. The implementation for (A, B) conflicts with the implementation for A because the (A) tuple lacks a trailing comma.\n\n``` rust\n#![feature(optin_builtin_traits)]\n\ntrait NotSame {}\nimpl NotSame for .. {}\nimpl<A> !NotSame for (A, A) {}\n\ntrait OneOfEach {}\n\nimpl <A> OneOfEach for (A) { }\n\nimpl <A, B> OneOfEach for (A, B) where (B): OneOfEach, (A, B): NotSame { }\n\n// ...\n\nfn main() {}\n```\n\n```\nrobert@laptop:~/projects/one_of_each$ RUST_BACKTRACE=1 rustc one_of_each.rs\none_of_each.rs:11:1: 11:75 error: internal compiler error: coherence failed to report ambiguity: cannot locate the impl of the trait `OneOfEach` for the type `(A, B)`\none_of_each.rs:11 impl <A, B> OneOfEach for (A, B) where (B): OneOfEach, (A, B): NotSame { }\n                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nthread 'rustc' panicked at 'Box<Any>', ../src/libsyntax/diagnostic.rs:176\nstack backtrace:\n   1:     0x7f8e6d26fd20 - sys::backtrace::tracing::imp::write::h5839347184a363c1Tnt\n   2:     0x7f8e6d2765e5 - panicking::log_panic::_<closure>::closure.39955\n   3:     0x7f8e6d276055 - panicking::log_panic::hcde6d42710304abbWnx\n   4:     0x7f8e6d239683 - sys_common::unwind::begin_unwind_inner::h4039843fef6bffefYgs\n   5:     0x7f8e670c63c7 - sys_common::unwind::begin_unwind::begin_unwind::h17811388397816602357\n   6:     0x7f8e670c6386 - diagnostic::_<impl>::span_bug::h517cd016f9a1ed4fqGA\n   7:     0x7f8e6b04f4a0 - middle::traits::error_reporting::report_fulfillment_errors::h7b40fdbf7b69efa1DqR\n   8:     0x7f8e6bdf69b5 - check::_<impl>::select_all_obligations_or_error::h68d2b62f895fda24Nar\n   9:     0x7f8e6be4d9a4 - check::wf::_<impl>::check_item_well_formed::h294fa0c9be11cb26O4j\n  10:     0x7f8e6be8bfbe - check::check_wf_old::h2896130387effa64m9o\n  11:     0x7f8e6bf3b8ab - check_crate::hbd4bd8f4f3340ed1BrD\n  12:     0x7f8e6d7438b9 - driver::phase_3_run_analysis_passes::_<closure>::closure.21990\n  13:     0x7f8e6d729213 - middle::ty::context::_<impl>::create_and_enter::create_and_enter::h7648551165536465273\n  14:     0x7f8e6d72420e - driver::phase_3_run_analysis_passes::h13807885485637783892\n  15:     0x7f8e6d704c92 - driver::compile_input::he5c7814d86abe8678ba\n  16:     0x7f8e6d85badb - run_compiler::h3e946a4e9bc089bfvqc\n  17:     0x7f8e6d858b56 - sys_common::unwind::try::try_fn::try_fn::h18225326314371046170\n  18:     0x7f8e6d26da48 - __rust_try\n  19:     0x7f8e6d261abb - sys_common::unwind::try::inner_try::h81e998e565f2181dwds\n  20:     0x7f8e6d858ea4 - boxed::_<impl>::call_box::call_box::h16507595822000360715\n  21:     0x7f8e6d2750b3 - sys::thread::_<impl>::new::thread_start::h0be42f811434f5398Fw\n  22:     0x7f8e6691c181 - start_thread\n  23:     0x7f8e6ceef47c - __clone\n  24:                0x0 - <unknown>\n\n```\n\nOn rustc 1.6.0-nightly (1a2eaffb6 2015-10-31)\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29516/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29516/timeline", "performed_via_github_app": null, "state_reason": "completed"}