{"url": "https://api.github.com/repos/rust-lang/rust/issues/101582", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101582/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101582/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101582/events", "html_url": "https://github.com/rust-lang/rust/issues/101582", "id": 1366693920, "node_id": "I_kwDOAAsO6M5Rdhgg", "number": 101582, "title": "False positive `dead_code` lint", "user": {"login": "msrd0", "id": 7853372, "node_id": "MDQ6VXNlcjc4NTMzNzI=", "avatar_url": "https://avatars.githubusercontent.com/u/7853372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msrd0", "html_url": "https://github.com/msrd0", "followers_url": "https://api.github.com/users/msrd0/followers", "following_url": "https://api.github.com/users/msrd0/following{/other_user}", "gists_url": "https://api.github.com/users/msrd0/gists{/gist_id}", "starred_url": "https://api.github.com/users/msrd0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msrd0/subscriptions", "organizations_url": "https://api.github.com/users/msrd0/orgs", "repos_url": "https://api.github.com/users/msrd0/repos", "events_url": "https://api.github.com/users/msrd0/events{/privacy}", "received_events_url": "https://api.github.com/users/msrd0/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-08T17:00:23Z", "updated_at": "2022-09-08T22:12:40Z", "closed_at": "2022-09-08T21:48:05Z", "author_association": "NONE", "active_lock_reason": null, "body": "Source Code: https://github.com/msrd0/cargo-doc2readme/tree/a176ccc8f5d9b201b1f39599f797f33280f72c49\r\n\r\nThis shows a false-positive `dead_code` warning, both with Rust 1.63.0 from ArchLinux packages as well as with Rust 1.65.0-nightly (646e9a0b9 2022-09-02) from rustup:\r\n\r\n```\r\n    Checking cargo-doc2readme v0.2.0-dev (/home/msrd0/git/cargo-doc2readme)\r\nwarning: associated function `new` is never used\r\n  --> src/preproc.rs:36:9\r\n   |\r\n36 |     pub fn new(read: R) -> Self {\r\n   |            ^^^\r\n   |\r\n   = note: `#[warn(dead_code)]` on by default\r\n\r\nwarning: `cargo-doc2readme` (bin \"cargo-doc2readme\") generated 1 warning\r\n```\r\n\r\nWhen renaming the function however, the code no longer compiles, and the part that doesn't compile is also not unused. This makes me believe that the code is, in fact, not dead.\r\n\r\n```\r\n    Checking cargo-doc2readme v0.2.0-dev (/home/msrd0/git/cargo-doc2readme)\r\nerror[E0599]: no function or associated item named `new` found for struct `Preprocessor` in the current scope\r\n   --> src/input.rs:138:35\r\n    |\r\n138 |         let mut preproc = Preprocessor::new(read);\r\n    |                                         ^^^\r\n    |                                         |\r\n    |                                         function or associated item not found in `Preprocessor<_>`\r\n    |                                         help: there is an associated function with a similar name: `new0`\r\n    |\r\n   ::: src/preproc.rs:22:1\r\n    |\r\n22  | pub struct Preprocessor<L>\r\n    | -------------------------- function or associated item `new` not found for this struct\r\n\r\nwarning: unused import: `Read`\r\n  --> src/input.rs:10:32\r\n   |\r\n10 |     io::{self, BufReader, Cursor, Read, Write},\r\n   |                                   ^^^^\r\n   |\r\n   = note: `#[warn(unused_imports)]` on by default\r\n\r\nFor more information about this error, try `rustc --explain E0599`.\r\nwarning: `cargo-doc2readme` (lib) generated 1 warning\r\nerror: could not compile `cargo-doc2readme` due to previous error; 1 warning emitted\r\n```", "closed_by": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101582/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101582/timeline", "performed_via_github_app": null, "state_reason": "completed"}