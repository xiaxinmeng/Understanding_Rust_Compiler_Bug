{"url": "https://api.github.com/repos/rust-lang/rust/issues/58787", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/58787/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/58787/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/58787/events", "html_url": "https://github.com/rust-lang/rust/issues/58787", "id": 415315604, "node_id": "MDU6SXNzdWU0MTUzMTU2MDQ=", "number": 58787, "title": "Strange interaction between matching and lifetimes", "user": {"login": "justhsu", "id": 528168, "node_id": "MDQ6VXNlcjUyODE2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/528168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/justhsu", "html_url": "https://github.com/justhsu", "followers_url": "https://api.github.com/users/justhsu/followers", "following_url": "https://api.github.com/users/justhsu/following{/other_user}", "gists_url": "https://api.github.com/users/justhsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/justhsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/justhsu/subscriptions", "organizations_url": "https://api.github.com/users/justhsu/orgs", "repos_url": "https://api.github.com/users/justhsu/repos", "events_url": "https://api.github.com/users/justhsu/events{/privacy}", "received_events_url": "https://api.github.com/users/justhsu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}, {"id": 1146616045, "node_id": "MDU6TGFiZWwxMTQ2NjE2MDQ1", "url": "https://api.github.com/repos/rust-lang/rust/labels/NLL-polonius", "name": "NLL-polonius", "color": "f799ea", "default": false, "description": "Issues related for using Polonius in the borrow checker"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-02-27T20:37:29Z", "updated_at": "2020-06-11T18:06:02Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "I ran into some baffling issues when matching on a mutable reference and assigning to the mutable reference in the match arms. It seems that the inferred lifetime bound escapes the match. Playpen:\r\n\r\nhttps://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=4428e0752f518ba02ed12c77560d8afb\r\n\r\nI tried three ways of matching on a borrowed value `list.0`.  The first two work only without the \"if true\" block (1b, 1c). Should an if-block affect the inferred lifetime of the borrow of `list.0`?\r\n\r\nThe last method does not work with (3a) or without (3b) the if-block, but I am still confused: why is `list.0` still borrowed after the match? Is this expected behavior?\r\n\r\nI would expect all six variants to be accepted by the borrow checker, and I'm confused about why only two of them are.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/58787/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/58787/timeline", "performed_via_github_app": null, "state_reason": null}