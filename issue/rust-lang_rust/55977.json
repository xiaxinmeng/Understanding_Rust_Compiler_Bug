{"url": "https://api.github.com/repos/rust-lang/rust/issues/55977", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55977/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55977/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55977/events", "html_url": "https://github.com/rust-lang/rust/issues/55977", "id": 381162049, "node_id": "MDU6SXNzdWUzODExNjIwNDk=", "number": 55977, "title": "Tracking issue for std::iter::from_fn", "user": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 246778137, "node_id": "MDU6TGFiZWwyNDY3NzgxMzc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-unstable", "name": "B-unstable", "color": "d304cb", "default": false, "description": "Implemented in the nightly compiler and unstable."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 889209675, "node_id": "MDU6TGFiZWw4ODkyMDk2NzU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-iterators", "name": "A-iterators", "color": "f7e101", "default": false, "description": "Area: Iterators"}, {"id": 919710011, "node_id": "MDU6TGFiZWw5MTk3MTAwMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-merge", "name": "disposition-merge", "color": "008800", "default": false, "description": "This issue / PR is in PFCP or FCP with a disposition to merge it."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 28, "created_at": "2018-11-15T13:31:41Z", "updated_at": "2019-03-10T19:30:22Z", "closed_at": "2019-03-10T19:30:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "**Update:** API modified in https://github.com/rust-lang/rust/pull/58062:\r\n\r\n```rust\r\npub fn from_fn<T, F>(f: F) -> FromFn<F> where F: FnMut() -> Option<T> {\u2026}\r\n\r\n#[derive(Clone)] pub struct FromFn<F> {\u2026}\r\n\r\nimpl<T, F> Iterator for FromFn<F> where F: FnMut() -> Option<T> {\r\n    type Item = T;\r\n}\r\n\r\nimpl<St: fmt::Debug, F> fmt::Debug for FromFn<F> {\u2026}\r\n```\r\n\r\n----\r\n\r\nThis API is being proposed in https://github.com/rust-lang/rust/pull/55869:\r\n\r\n<del>\r\n\r\n```rust\r\npub fn unfold<St, T, F>(initial_state: St, f: F) -> Unfold<St, F>\r\n    where F: FnMut(&mut St) -> Option<T> {\u2026}\r\n\r\n#[derive(Clone)] pub struct Unfold<St, F> {\u2026}\r\n\r\nimpl<St, T, F> Iterator for Unfold<St, F> where F: FnMut(&mut St) -> Option<T> {\r\n    type Item = T;\r\n}\r\n\r\nimpl<St: fmt::Debug, F> fmt::Debug for Unfold<St, F> {\u2026}\r\n```\r\n\r\n</del>\r\n\r\n`unfold` was [previously in the standard library](https://doc.rust-lang.org/1.2.0/std/iter/struct.Unfold.html) but was deprecated and then removed in Rust 1.3 for not having \u201cgained enough traction to retain its position in the standard library\u201d. It is now available [in the `itertools` crate](https://docs.rs/itertools/0.7.8/itertools/fn.unfold.html).\r\n\r\nMy personal opinion is that we\u2019ve been very conservative with inclusion in std in the months before and after 1.0 but we\u2019ve slowing been relaxing the criteria, with in increasing number of small convenience functions and methods. Both `unfold` and `successors` feel general-purpose and fundamental enough to me to belong in the standard library.\r\n\r\nUnresolved questions:\r\n\r\n* [x] Should the state field of `Unfold` be public?\r\n\r\n* [x] Should `unfold` have explicit state for consistency with `fold`, or should it be a more trivial bridging of closures to iterators with state kept in the closure\u2019s environment or captures?\r\n\r\n    ```rust\r\n    impl<T, F> Iterator for Unfold<F> where F: FnMut() -> Option<T> {\r\n        type Item = T;\r\n        fn next(&mut self) -> Option<T> { (self.0)() }\r\n    }\r\n\r\n----\r\n\r\n**Update:** moved to Moved to https://github.com/rust-lang/rust/issues/58045:\r\n\r\n<del>\r\n\r\n```rust\r\npub fn successors<T, F>(first: Option<T>, succ: F) -> Successors<T, F>\r\n    where F: FnMut(&T) -> Option<T> {\u2026}\r\n\r\n#[derive(Clone)] pub struct Successors<T, F> {\u2026}\r\n\r\nimpl<T, F> Iterator for Successors<T, F> where F: FnMut(&T) -> Option<T> {\r\n    type Item = T;\r\n}\r\n\r\nimpl<T, F> FusedIterator for Successors<T, F> where F: FnMut(&T) -> Option<T> {}\r\n\r\nimpl<T: fmt::Debug, F> fmt::Debug for Successors<T, F> {\u2026}\r\n```\r\n\r\n</del>", "closed_by": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55977/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55977/timeline", "performed_via_github_app": null, "state_reason": "completed"}