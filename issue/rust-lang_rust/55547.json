{"url": "https://api.github.com/repos/rust-lang/rust/issues/55547", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/55547/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/55547/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/55547/events", "html_url": "https://github.com/rust-lang/rust/issues/55547", "id": 376059682, "node_id": "MDU6SXNzdWUzNzYwNTk2ODI=", "number": 55547, "title": "assert!(); without arguments breaks compilation with unclear error message (no file name, line info)", "user": {"login": "joIivier", "id": 6048710, "node_id": "MDQ6VXNlcjYwNDg3MTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6048710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joIivier", "html_url": "https://github.com/joIivier", "followers_url": "https://api.github.com/users/joIivier/followers", "following_url": "https://api.github.com/users/joIivier/following{/other_user}", "gists_url": "https://api.github.com/users/joIivier/gists{/gist_id}", "starred_url": "https://api.github.com/users/joIivier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joIivier/subscriptions", "organizations_url": "https://api.github.com/users/joIivier/orgs", "repos_url": "https://api.github.com/users/joIivier/repos", "events_url": "https://api.github.com/users/joIivier/events{/privacy}", "received_events_url": "https://api.github.com/users/joIivier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-10-31T16:47:12Z", "updated_at": "2018-12-11T00:05:55Z", "closed_at": "2018-12-11T00:05:55Z", "author_association": "NONE", "active_lock_reason": null, "body": "I forgot a lone `debug_assert!();` without any arguments given to the macro. This was in one of the modules of my code (not lib.rs). The consequences are quite painful:\r\nThe compilation fails with:\r\n```\r\nCompiling common v0.1.0 ([PROJECT_FOLDER]/server/common)\r\n       Fresh trust-dns-resolver v0.9.1\r\n     Running `rustc --crate-name common common/src/lib.rs --color always --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=ed2951e164923260 -C extra-filename=-ed2951e164923260 --out-dir [PROJECT_FOLDER]/server/target/debug/deps -C incremental=[PROJECT_FOLDER]/server/target/debug/incremental -L dependency=[PROJECT_FOLDER]/server/target/debug/deps --extern chrono=[PROJECT_FOLDER]/server/target/debug/deps/libchrono-2a34936974216bbe.rlib --extern postgres_derive=[PROJECT_FOLDER]/server/target/debug/deps/libpostgres_derive-105c95cb7f81b919.so --extern postgres=[PROJECT_FOLDER]/server/target/debug/deps/libpostgres-e0f1a258f5f96310.rlib --extern rand=[PROJECT_FOLDER]/server/target/debug/deps/librand-29a12d49764c391a.rlib --extern serde=[PROJECT_FOLDER]/server/target/debug/deps/libserde-47086ec69add4c66.rlib --extern serde_derive=[PROJECT_FOLDER]/server/target/debug/deps/libserde_derive-d6a05fd64d058694.so --extern serde_json=[PROJECT_FOLDER]/server/target/debug/deps/libserde_json-ceb058322f4f1956.rlib --extern toml=[PROJECT_FOLDER]/server/target/debug/deps/libtoml-817bfdd57b367d83.rlib`\r\n       Fresh actix v0.7.4\r\n       Fresh actix-web v0.7.8\r\nerror: expected expression, found `<eof>`\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: Could not compile `common`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name common common/src/lib.rs --color always --crate-type lib --emit=dep-info,link -C debuginfo=2 -C metadata=ed2951e164923260 -C extra-filename=-ed2951e164923260 --out-dir [PROJECT_FOLDER]/server/target/debug/deps -C incremental=[PROJECT_FOLDER]/server/target/debug/incremental -L dependency=[PROJECT_FOLDER]/server/target/debug/deps --extern chrono=[PROJECT_FOLDER]/server/target/debug/deps/libchrono-2a34936974216bbe.rlib --extern postgres_derive=[PROJECT_FOLDER]/server/target/debug/deps/libpostgres_derive-105c95cb7f81b919.so --extern postgres=[PROJECT_FOLDER]/server/target/debug/deps/libpostgres-e0f1a258f5f96310.rlib --extern rand=[PROJECT_FOLDER]/server/target/debug/deps/librand-29a12d49764c391a.rlib --extern serde=[PROJECT_FOLDER]/server/target/debug/deps/libserde-47086ec69add4c66.rlib --extern serde_derive=[PROJECT_FOLDER]/server/target/debug/deps/libserde_derive-d6a05fd64d058694.so --extern serde_json=[PROJECT_FOLDER]/server/target/debug/deps/libserde_json-ceb058322f4f1956.rlib --extern toml=[PROJECT_FOLDER]/server/target/debug/deps/libtoml-817bfdd57b367d83.rlib` (exit code: 1)\r\n\r\n```\r\nSo the issue is that I expected an error message indicating the file where my wrong macro call was made and the line number. Instead I got this error message with no location information nor any reference to a macro. I had to comment/uncomment all my new modules/functions/lines to find my incorrect macro call.\r\n\r\nI could reproduce the issue with `assert!();`, but not with `format!();` the later gives a useful error message `([rustc] requires at least a format string argument)`. So this must affect only some macros.\r\n\r\n## Meta\r\n`rustc --version --verbose\r\nrustc 1.30.0 (da5f414c2 2018-10-24)\r\nbinary: rustc\r\ncommit-hash: da5f414c2c0bfe5198934493f04c676e2b23ff2e\r\ncommit-date: 2018-10-24\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.30.0\r\nLLVM version: 8.0\r\n`\r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/55547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/55547/timeline", "performed_via_github_app": null, "state_reason": "completed"}