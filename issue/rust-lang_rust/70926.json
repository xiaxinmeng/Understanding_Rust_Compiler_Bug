{"url": "https://api.github.com/repos/rust-lang/rust/issues/70926", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/70926/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/70926/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/70926/events", "html_url": "https://github.com/rust-lang/rust/issues/70926", "id": 596529899, "node_id": "MDU6SXNzdWU1OTY1Mjk4OTk=", "number": 70926, "title": "Suboptimal error message when comma at the end of match arm is typo'd as a dot", "user": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 27424086, "node_id": "MDU6TGFiZWwyNzQyNDA4Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-parser", "name": "A-parser", "color": "f7e101", "default": false, "description": "Area: The parsing of Rust source code to an AST."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": {"login": "tsandstr", "id": 5913458, "node_id": "MDQ6VXNlcjU5MTM0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5913458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsandstr", "html_url": "https://github.com/tsandstr", "followers_url": "https://api.github.com/users/tsandstr/followers", "following_url": "https://api.github.com/users/tsandstr/following{/other_user}", "gists_url": "https://api.github.com/users/tsandstr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsandstr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsandstr/subscriptions", "organizations_url": "https://api.github.com/users/tsandstr/orgs", "repos_url": "https://api.github.com/users/tsandstr/repos", "events_url": "https://api.github.com/users/tsandstr/events{/privacy}", "received_events_url": "https://api.github.com/users/tsandstr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tsandstr", "id": 5913458, "node_id": "MDQ6VXNlcjU5MTM0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5913458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsandstr", "html_url": "https://github.com/tsandstr", "followers_url": "https://api.github.com/users/tsandstr/followers", "following_url": "https://api.github.com/users/tsandstr/following{/other_user}", "gists_url": "https://api.github.com/users/tsandstr/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsandstr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsandstr/subscriptions", "organizations_url": "https://api.github.com/users/tsandstr/orgs", "repos_url": "https://api.github.com/users/tsandstr/repos", "events_url": "https://api.github.com/users/tsandstr/events{/privacy}", "received_events_url": "https://api.github.com/users/tsandstr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-04-08T12:10:23Z", "updated_at": "2020-04-12T01:33:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Simplified version of what I wrote ([Playground](https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=b98831828ecba1894bf9032de13e48a2)):\r\n\r\n```rust\r\nenum MyError {\r\n    Variant { field: u32 },\r\n}\r\n\r\nfn main() {\r\n    match Ok(()) {\r\n        //              \u2193 typo here\r\n        Ok(x) => Some(x).\r\n        Err(MyError::Variant { .. }) => None,\r\n    }\r\n}\r\n```\r\n\r\nRelevant error message bits:\r\n\r\n```\r\nerror: expected expression, found `}`\r\n --> src/main.rs:9:35\r\n  |\r\n9 |         Err(MyError::Variant { .. }) => None,\r\n  |                                   ^ expected expression\r\n\r\nerror: expected one of `,`, `.`, `?`, `}`, or an operator, found `=>`\r\n --> src/main.rs:9:38\r\n  |\r\n8 |         Ok(x) => Some(x).\r\n  |               -- while parsing the `match` arm starting here\r\n9 |         Err(MyError::Variant { .. }) => None,\r\n  |                                      ^^ expected one of `,`, `.`, `?`, `}`, or an operator\r\nerror: aborting due to 3 previous errors\r\n```\r\n\r\nThe second error message is more helpful than the first, but still doesn't point at the actual problem. When changing the `MyError::Variant { .. }` to `_` or just a binding, it disappears, making it somewhat easier to find the actual problem.\r\n\r\nHowever, it would be great if the compiler had some heuristic that would allow it to pinpoint the actual typo here.\r\n\r\nThanks to everyone involved in the already great error messages! :hearts:", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/70926/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/70926/timeline", "performed_via_github_app": null, "state_reason": null}