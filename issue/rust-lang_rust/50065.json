{"url": "https://api.github.com/repos/rust-lang/rust/issues/50065", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/50065/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/50065/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/50065/events", "html_url": "https://github.com/rust-lang/rust/issues/50065", "id": 315643741, "node_id": "MDU6SXNzdWUzMTU2NDM3NDE=", "number": 50065, "title": "net::tcp::tests::connect_timeout_unroutable can fail with ConnectionRefused", "user": {"login": "ExpHP", "id": 1411280, "node_id": "MDQ6VXNlcjE0MTEyODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1411280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExpHP", "html_url": "https://github.com/ExpHP", "followers_url": "https://api.github.com/users/ExpHP/followers", "following_url": "https://api.github.com/users/ExpHP/following{/other_user}", "gists_url": "https://api.github.com/users/ExpHP/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExpHP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExpHP/subscriptions", "organizations_url": "https://api.github.com/users/ExpHP/orgs", "repos_url": "https://api.github.com/users/ExpHP/repos", "events_url": "https://api.github.com/users/ExpHP/events{/privacy}", "received_events_url": "https://api.github.com/users/ExpHP/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2018-04-18T21:10:30Z", "updated_at": "2019-01-14T15:46:17Z", "closed_at": "2019-01-14T15:46:17Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When I run the `libstd` test suite on campus, I get a failure in `net::tcp::tests::connect_timeout_unroutable`:\r\n\r\n```\r\nTesting std stage1 (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n    Finished release [optimized] target(s) in 0.0 secs\r\n     Running build/x86_64-unknown-linux-gnu/stage1-std/x86_64-unknown-linux-gnu/release/deps/std-ce5ffdd0e2e57188\r\n\r\nrunning 767 tests\r\ntest collections::hash::bench::get_remove_insert ... ok\r\ntest collections::hash::bench::grow_by_insertion ... ok\r\ntest collections::hash::bench::find_existing ... ok\r\ntest collections::hash::bench::find_nonexisting ... ok\r\ntest collections::hash::bench::new_drop ... ok\r\n...\r\n...\r\ntest net::tcp::tests::connect_loopback ... ok\r\ntest net::tcp::tests::connect_timeout_unbound ... ok\r\nthread '<unnamed>' panicked at 'bad error: Connection refused (os error 111) ConnectionRefused', libstd/net/tcp.rs:1687:9\r\ntest net::tcp::tests::connect_timeout_unroutable ... FAILED\r\ntest net::tcp::tests::connect_timeout_valid ... ok\r\ntest net::tcp::tests::debug ... ok\r\n...\r\n...\r\ntest sys::unix::ext::net::test::test_read_with_timeout ... ok\r\ntest thread::tests::test_park_timeout_unpark_called_other_thread ... ok\r\ntest sync::mpsc::tests::stress_recv_timeout_two_threads ... ok\r\n\r\nfailures:\r\n    net::tcp::tests::connect_timeout_unroutable\r\n\r\ntest result: FAILED. 766 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out\r\n\r\nerror: test failed, to rerun pass '--lib'\r\n```\r\n\r\nThe test says \"this IP is unroutable, so connections should always time out,\" but evidently there's something about the setup at this location that was not anticipated.\r\n\r\nThe results are the same whether I am connected to WiFi or through ethernet.  Both connections go through the same router (a Linksys WRT120N I have physical access to, which doesn't appear to save any sort of logs), and I don't know where it goes after that.\r\n\r\nI can work around it by disconnecting from the internet entirely, and do not have issues when running the tests at home (same laptop, different network).\r\n\r\n```\r\n$ uname -a\r\nLinux arch-t430s 4.15.14-1-ARCH #1 SMP PREEMPT Wed Mar 28 17:34:29 UTC 2018 x86_64 GNU/Linux\r\n```", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/50065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/50065/timeline", "performed_via_github_app": null, "state_reason": "completed"}