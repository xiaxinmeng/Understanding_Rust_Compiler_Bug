{"url": "https://api.github.com/repos/rust-lang/rust/issues/17046", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17046/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17046/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17046/events", "html_url": "https://github.com/rust-lang/rust/issues/17046", "id": 42122356, "node_id": "MDU6SXNzdWU0MjEyMjM1Ng==", "number": 17046, "title": "Sanitize memory and CPU registers for sensitive data", "user": {"login": "l0kod", "id": 1286585, "node_id": "MDQ6VXNlcjEyODY1ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1286585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/l0kod", "html_url": "https://github.com/l0kod", "followers_url": "https://api.github.com/users/l0kod/followers", "following_url": "https://api.github.com/users/l0kod/following{/other_user}", "gists_url": "https://api.github.com/users/l0kod/gists{/gist_id}", "starred_url": "https://api.github.com/users/l0kod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/l0kod/subscriptions", "organizations_url": "https://api.github.com/users/l0kod/orgs", "repos_url": "https://api.github.com/users/l0kod/repos", "events_url": "https://api.github.com/users/l0kod/events{/privacy}", "received_events_url": "https://api.github.com/users/l0kod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2014-09-06T18:00:54Z", "updated_at": "2016-05-04T17:15:02Z", "closed_at": "2014-09-06T18:14:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "As part as exploit mitigation (#15179), it's important for sensitive data like cryptographic keys (especially for perfect forward secrecy) to be able to securely wipe them as soon as they are not needed. This avoid data to leak because of unsafe code with memory leak (e.g. Heartbleed), arbitrary code execution, suspend to disk, cold boot attack\u2026\nThis imply memory (data copies) that should be cleaned with a function like the C11 `memset_s` or OpenBSD `explicit_bzero` (guaranteeing that the compiler will not optimize and do nothing) and declared variable like with the C `volatile` to avoid side effect. The memory should also be marked as not swappable. Processor registers who manipulates sensitive data should be explicitly cleaned as well.\n\nGood article on the subject: http://benpfaff.org/papers/shredding.html/index.html\nNice post explaining the problem with CPU registers: http://www.daemonology.net/blog/2014-09-06-zeroing-buffers-is-insufficient.html\n\nIt would be handy to be able to annotate types (e.g. `PrivateKey`) with an attribute like `#[sensitive]`. Rust's runtime could then take care of cleaning data footprints after variable end of life, explicit `drop` call and all CPU registers used. This could be tricky\u2026\n\ncc @DaGenix\n", "closed_by": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17046/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17046/timeline", "performed_via_github_app": null, "state_reason": "completed"}