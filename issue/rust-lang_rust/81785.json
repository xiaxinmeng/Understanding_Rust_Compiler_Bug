{"url": "https://api.github.com/repos/rust-lang/rust/issues/81785", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/81785/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/81785/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/81785/events", "html_url": "https://github.com/rust-lang/rust/issues/81785", "id": 802104105, "node_id": "MDU6SXNzdWU4MDIxMDQxMDU=", "number": 81785, "title": "error: `overflow evaluating the requirement` without precise link to origin of the error", "user": {"login": "thiolliere", "id": 10416848, "node_id": "MDQ6VXNlcjEwNDE2ODQ4", "avatar_url": "https://avatars.githubusercontent.com/u/10416848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thiolliere", "html_url": "https://github.com/thiolliere", "followers_url": "https://api.github.com/users/thiolliere/followers", "following_url": "https://api.github.com/users/thiolliere/following{/other_user}", "gists_url": "https://api.github.com/users/thiolliere/gists{/gist_id}", "starred_url": "https://api.github.com/users/thiolliere/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thiolliere/subscriptions", "organizations_url": "https://api.github.com/users/thiolliere/orgs", "repos_url": "https://api.github.com/users/thiolliere/repos", "events_url": "https://api.github.com/users/thiolliere/events{/privacy}", "received_events_url": "https://api.github.com/users/thiolliere/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-05T11:53:11Z", "updated_at": "2023-01-14T02:30:23Z", "closed_at": "2023-01-14T02:30:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "When some type doesn't implement some trait, rust error message overflow evaluating the requirement (which is ok), but it fails to give a proper error message, as it doesn't show where the error comes from. It would be very more helpful if the error message points to where the failing evaluation comes from.\r\n\r\nI tried this code:\r\n\r\n```rust\r\npub struct Compact<T>(pub T);\r\n\r\npub trait Decode {}\r\n\r\npub trait WrapperTypeDecode {\r\n\ttype Wrapped;\r\n}\r\n\r\npub trait CompactAs {\r\n\ttype As;\r\n}\r\n\r\npub trait HasCompact {}\r\n\r\n\r\nimpl<T, X> Decode for X\r\nwhere\r\n\tX: WrapperTypeDecode<Wrapped=T>,\r\n\tT: Decode,\r\n{}\r\n\r\nimpl<T> HasCompact for T\r\nwhere\r\n\tCompact<T>: Decode,\r\n{}\r\n\r\nimpl<T> Decode for Compact<T>\r\nwhere\r\n\tT: CompactAs,\r\n\tCompact<T::As>: Decode,\r\n{}\r\n\r\nfn _foo<T: HasCompact>() {}\r\n\r\nfn bar<T>() { _foo::<T>() }\r\n\r\n// The last line trigger the following error without span:\r\n/*\r\nerror[E0275]: overflow evaluating the requirement `Compact<_>: Decode`\r\n  |\r\n  = help: consider adding a `#![recursion_limit=\"256\"]` attribute to your crate (`playground`)\r\n  = note: required because of the requirements on the impl of `Decode` for `Compact<_>`\r\n  = note: 126 redundant requirements hidden\r\n  = note: required because of the requirements on the impl of `Decode` for `Compact<_>`\r\n*/\r\n\r\nfn main() {}\r\n\r\n```\r\n\r\nI expected to see this happen: have a reference to what trigger the error, i.e. this call `_foo::<T>()`\r\n\r\nInstead, this happened: a not very helpful error message:\r\n```\r\nerror[E0275]: overflow evaluating the requirement `Compact<_>: Decode`\r\n  |\r\n  = help: consider adding a `#![recursion_limit=\"256\"]` attribute to your crate (`playground`)\r\n  = note: required because of the requirements on the impl of `Decode` for `Compact<_>`\r\n  = note: 126 redundant requirements hidden\r\n  = note: required because of the requirements on the impl of `Decode` for `Compact<_>`\r\n```\r\n\r\n### Meta\r\nthe bug exist on stable, and nightly 2021-02-04\r\n\r\n`rustc --version --verbose`:\r\n```\r\nrustc 1.49.0 (e1884a8e3 2020-12-29)\r\nbinary: rustc\r\ncommit-hash: e1884a8e3c3e813aada8254edfa120e85bf5ffca\r\ncommit-date: 2020-12-29\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.49.0\r\n```", "closed_by": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/81785/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/81785/timeline", "performed_via_github_app": null, "state_reason": "completed"}