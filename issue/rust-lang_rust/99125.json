{"url": "https://api.github.com/repos/rust-lang/rust/issues/99125", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/99125/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/99125/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/99125/events", "html_url": "https://github.com/rust-lang/rust/issues/99125", "id": 1300002447, "node_id": "I_kwDOAAsO6M5NfHaP", "number": 99125, "title": "Indexing by a borrowed type could suggest dereferencing", "user": {"login": "itsliamegan", "id": 16628912, "node_id": "MDQ6VXNlcjE2NjI4OTEy", "avatar_url": "https://avatars.githubusercontent.com/u/16628912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itsliamegan", "html_url": "https://github.com/itsliamegan", "followers_url": "https://api.github.com/users/itsliamegan/followers", "following_url": "https://api.github.com/users/itsliamegan/following{/other_user}", "gists_url": "https://api.github.com/users/itsliamegan/gists{/gist_id}", "starred_url": "https://api.github.com/users/itsliamegan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itsliamegan/subscriptions", "organizations_url": "https://api.github.com/users/itsliamegan/orgs", "repos_url": "https://api.github.com/users/itsliamegan/repos", "events_url": "https://api.github.com/users/itsliamegan/events{/privacy}", "received_events_url": "https://api.github.com/users/itsliamegan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-07-10T19:52:35Z", "updated_at": "2022-07-10T20:05:11Z", "closed_at": "2022-07-10T20:05:11Z", "author_association": "NONE", "active_lock_reason": null, "body": "When indexing a `Vec` by an `&usize`, the error message was somewhat non-specific. I looked at the types and figured out that I just needed to dereference the borrowed value but it might've been helpful to have that more apparent. I'm sure the same error occurs in more general cases, but this is the specific one I encountered it in.\r\n\r\nHere's [an example](https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=fbf18c1d71917bcd0799f15da7996b64):\r\n\r\n```rust\r\nfn main() {\r\n    let values = Vec::<String>::new();\r\n    let index: usize = 0;\r\n    let index_ref = &index;\r\n    values[index_ref]; \r\n}\r\n```\r\n\r\nAnd the error message:\r\n\r\n```\r\nerror[E0277]]: the type `[String]` cannot be indexed by `&usize`\r\n --> src/main.rs:5:5\r\n  |\r\n5 |     values[index_ref]; \r\n  |     ^^^^^^^^^^^^^^^^^ slice indices are of type `usize` or ranges of `usize`\r\n  |\r\n  = help: the trait `SliceIndex<[String]>` is not implemented for `&usize`\r\n  = help: the trait `SliceIndex<[T]>` is implemented for `usize`\r\n  = note: required because of the requirements on the impl of `Index<&usize>` for `Vec<String>`\r\n```\r\n\r\nPerhaps some kind of hint at the bottom suggesting to add `*` to  `index_ref`, i.e. `*index_ref`? \r\n", "closed_by": {"login": "itsliamegan", "id": 16628912, "node_id": "MDQ6VXNlcjE2NjI4OTEy", "avatar_url": "https://avatars.githubusercontent.com/u/16628912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itsliamegan", "html_url": "https://github.com/itsliamegan", "followers_url": "https://api.github.com/users/itsliamegan/followers", "following_url": "https://api.github.com/users/itsliamegan/following{/other_user}", "gists_url": "https://api.github.com/users/itsliamegan/gists{/gist_id}", "starred_url": "https://api.github.com/users/itsliamegan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itsliamegan/subscriptions", "organizations_url": "https://api.github.com/users/itsliamegan/orgs", "repos_url": "https://api.github.com/users/itsliamegan/repos", "events_url": "https://api.github.com/users/itsliamegan/events{/privacy}", "received_events_url": "https://api.github.com/users/itsliamegan/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/99125/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/99125/timeline", "performed_via_github_app": null, "state_reason": "completed"}