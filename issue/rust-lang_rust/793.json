{"url": "https://api.github.com/repos/rust-lang/rust/issues/793", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/793/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/793/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/793/events", "html_url": "https://github.com/rust-lang/rust/issues/793", "id": 1326740, "node_id": "MDU6SXNzdWUxMzI2NzQw", "number": 793, "title": "Functions should be able to initialize their arguments", "user": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 37544, "node_id": "MDU6TGFiZWwzNzU0NA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-typesystem", "name": "A-typesystem", "color": "f7e101", "default": false, "description": "Area: The type system"}, {"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2011-08-01T23:26:04Z", "updated_at": "2014-06-16T21:56:25Z", "closed_at": "2013-04-22T22:12:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This came up in the course of writing comms as a library. I want to be able to write this:\n\n```\nfn recv_into(v : &T) {\n    rustrt::port_recv(unsafe::reinterpret_cast(ptr::addr_of(v)),\n                      **raw_port);\n}\n\nfn recv() -> T {\n    let x : T;\n    self.recv_into(x);\n    ret x;\n}\n```\n\n`recv_into` has the form it does because it calls into the runtime library, which needs a pointer to the place where the data should go. Ideally, we won't always want to initialize this, and in fact in some cases we may not be able to (for example, a tag type is exported from a module, but not its constructor).\n\nWhat would be nice is some time of typestate annotation that says a parameter may not be initialized (or perhaps even stronger, is not initialized), and then declare as a postcondition that its argument is initialized.\n\nI'm not sure what ramifications this might have as far as safety and typestate analysis, but this pattern is relatively common in a lot of systems code I've seen.\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/793/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/793/timeline", "performed_via_github_app": null, "state_reason": "completed"}