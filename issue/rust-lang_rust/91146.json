{"url": "https://api.github.com/repos/rust-lang/rust/issues/91146", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/91146/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/91146/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/91146/events", "html_url": "https://github.com/rust-lang/rust/issues/91146", "id": 1060656365, "node_id": "I_kwDOAAsO6M4_OFTt", "number": 91146, "title": "error: linking with x86_64-w64-mingw32-gcc failed: exit code: 1", "user": {"login": "insinfo", "id": 12227024, "node_id": "MDQ6VXNlcjEyMjI3MDI0", "avatar_url": "https://avatars.githubusercontent.com/u/12227024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/insinfo", "html_url": "https://github.com/insinfo", "followers_url": "https://api.github.com/users/insinfo/followers", "following_url": "https://api.github.com/users/insinfo/following{/other_user}", "gists_url": "https://api.github.com/users/insinfo/gists{/gist_id}", "starred_url": "https://api.github.com/users/insinfo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/insinfo/subscriptions", "organizations_url": "https://api.github.com/users/insinfo/orgs", "repos_url": "https://api.github.com/users/insinfo/repos", "events_url": "https://api.github.com/users/insinfo/events{/privacy}", "received_events_url": "https://api.github.com/users/insinfo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-11-22T22:33:58Z", "updated_at": "2023-05-21T04:40:23Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "i'm trying to compile on windows and i get this error , on Windows 11\r\n\r\n\r\n```\r\nPS C:\\MyRustProjects\\fsbackup_engine> cargo clean\r\nPS C:\\MyRustProjects\\fsbackup_engine> cargo build\r\n   Compiling whoami v1.2.0\r\n   Compiling fsbackup_engine v0.1.0 (C:\\MyRustProjects\\fsbackup_engine)\r\nerror: linking with `x86_64-w64-mingw32-gcc` failed: exit code: 1\r\n  |\r\n  = note: \"x86_64-w64-mingw32-gcc\" \"-fno-use-linker-plugin\" \"-Wl,--dynamicbase\" \"-Wl,--disable-auto-image-base\" \"-m64\" \"-Wl,--high-entropy-va\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-win\r\ndows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\self-contained\\\\crt2.o\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsbegin.o\" \"C:\\\r\n\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.1pt9prttv128uo2j.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engin\r\ne-d32542f439e80aee.1ruhj7kwh7vzv8d9.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.2kon509fe5wo3oop.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsba\r\nckup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.2pfaf41ga7eblwlz.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.34\r\njri740lrs3thiq.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.3kt0bao5o8x0lxlh.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\\r\ndebug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.42xpqzv6kez0il64.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.4xk7yxj5pa0x9lip.rcgu.o\r\n\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.568xwdd21d5x67h1.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup\r\n_engine-d32542f439e80aee.56iitxaeizf5c8nz.rcgu.o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.tobg70orvraksrv.rcgu.o\" \"C:\\\\MyRustProjects\\\r\n\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.2kunw55j7bwqfbnb.rcgu.o\" \"-L\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\" \"-L\" \"C:\\\\windows\\\\system\r\n32\" \"-L\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-Wl,--start-group\" \"-Wl,-Bstatic\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows\r\n-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd-c949a5d9f8ea17eb.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libpanic_unwi\r\nnd-4efbd26dc95f473b.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libobject-11df657f271ec0b5.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x8\r\n6_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libmemchr-ed6e817a89285a21.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\\r\nlib\\\\libaddr2line-a16c4de5bb48a9a6.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libgimli-b5d4a31ea91f9e86.rlib\" \"C:\\\\rust\\\\toolcha\r\nins\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libstd_detect-01e22831e506e0c6.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_6\r\n4-pc-windows-gnu\\\\lib\\\\librustc_demangle-85865d75ad690c5e.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libhashbrown-91e2696c8ccb44\r\n61.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\librustc_std_workspace_alloc-186512436a4043bc.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-\r\nx86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libunwind-d0f4aee65f54d86f.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\r\n\\\\lib\\\\libcfg_if-42335e6cb2553e87.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liblibc-662baf24e2595e01.rlib\" \"C:\\\\rust\\\\toolchain\r\ns\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\liballoc-131219d6deabaad8.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-wi\r\nndows-gnu\\\\lib\\\\librustc_std_workspace_core-6530d4af942dc9d4.rlib\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcore-d1ec034e2d5fe483\r\n.rlib\" \"-Wl,--end-group\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\libcompiler_builtins-885492184211f20a.rlib\" \"-Wl,-Bdynamic\" \"-lker\r\nnel32\" \"-lws2_32\" \"-ladvapi32\" \"-luserenv\" \"-lkernel32\" \"-lgcc_eh\" \"-l:libpthread.a\" \"-lmsvcrt\" \"-lmingwex\" \"-lmingw32\" \"-lgcc\" \"-lmsvcrt\" \"-luser32\" \"-lkernel32\" \"-Wl,--nxcompat\" \"-nost\r\nartfiles\" \"-L\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\" \"-L\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_\r\n64-pc-windows-gnu\\\\lib\\\\self-contained\" \"-o\" \"C:\\\\MyRustProjects\\\\fsbackup_engine\\\\target\\\\debug\\\\deps\\\\fsbackup_engine-d32542f439e80aee.exe\" \"-Wl,--gc-sections\" \"-no-pie\" \"-nodefaultlib\r\ns\" \"C:\\\\rust\\\\toolchains\\\\stable-x86_64-pc-windows-gnu\\\\lib\\\\rustlib\\\\x86_64-pc-windows-gnu\\\\lib\\\\rsend.o\"\r\n  = note: C:\\rust\\toolchains\\stable-x86_64-pc-windows-gnu\\lib\\rustlib\\x86_64-pc-windows-gnu\\lib\\self-contained\\crt2.o:crtexe.c:(.text+0x2a0): undefined reference to `_set_invalid_paramet\r\ner_handler'\r\n\r\n  = help: some `extern` functions couldn't be found; some native libraries may need to be installed or have their path specified\r\n  = note: use the `-l` flag to specify native libraries to link\r\n  = note: use the `cargo:rustc-link-lib` directive to specify the native libraries to link with Cargo (see https://doc.rust-lang.org/cargo/reference/build-scripts.html#cargorustc-link-li\r\nbkindname)\r\n\r\nerror: could not compile `fsbackup_engine` due to previous error\r\nPS C:\\MyRustProjects\\fsbackup_engine>\r\n\r\n```\r\n\r\n```rust\r\nfn main() {\r\n    println!(\"Hello, world! {}\",\"sdf\");\r\n}\r\n```\r\n\r\n###  Expected behavior\r\ncompile without errors\r\n\r\n\r\n`rustc --version --verbose`:\r\n```\r\nPS C:\\MyRustProjects\\fsbackup_engine> rustc --version --verbose\r\nrustc 1.56.1 (59eed8a2a 2021-11-01)\r\nbinary: rustc\r\ncommit-hash: 59eed8a2aac0230a8b53e89d4e99d55912ba6b35\r\ncommit-date: 2021-11-01\r\nhost: x86_64-pc-windows-gnu\r\nrelease: 1.56.1\r\nLLVM version: 13.0.0\r\n\r\n```\r\n\r\n```\r\nPS C:\\MyRustProjects\\fsbackup_engine> rustup show\r\nDefault host: x86_64-pc-windows-msvc\r\nrustup home:  C:\\rust\r\n\r\ninstalled toolchains\r\n--------------------\r\n\r\nstable-x86_64-pc-windows-gnu (default)\r\nstable-x86_64-pc-windows-msvc\r\n\r\nactive toolchain\r\n----------------\r\n\r\nstable-x86_64-pc-windows-gnu (default)\r\nrustc 1.56.1 (59eed8a2a 2021-11-01)\r\n\r\nPS C:\\MyRustProjects\\fsbackup_engine>\r\n\r\n\r\n```\r\n\r\n```toml\r\n[package]\r\nname = \"fsbackup_engine\"\r\nversion = \"0.1.0\"\r\nedition = \"2018\"\r\n\r\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\r\n\r\n[dependencies]\r\n#ssh2 = \"0.9.0\" # Bindings to libssh2 for interacting with SSH servers and executing remote commands\r\nwhoami = \"1.1.1\" # Retrieve the current user and environment.\r\n#toml = \"0.5.8\" # A native Rust encoder and decoder of TOML-formatted files and streams.\r\n#rand = \"0.8.4\" # Random number generators and other randomness functionality.\r\n#regex = \"1.5.4\"\r\n#lazy_static = \"1.4.0\"\r\n#log = \"0.4.14\"\r\n#bytesize = \"1.1.0\"\r\n#chrono = \"0.4.19\"\r\n#wildmatch = \"2.0.0\"\r\n#thiserror = \"^1.0.0\"\r\n\r\n#[target.\"cfg(target_family = \\\"unix\\\")\"]\r\n#[target.\"cfg(target_family = \\\"unix\\\")\".dependencies]\r\n#users = \"0.11.0\"\r\n\r\n#[target.\"cfg(target_os = \\\"windows\\\")\"]\r\n#[target.\"cfg(target_os = \\\"windows\\\")\".dependencies]\r\n#path-slash = \"0.1.4\"\r\n\r\n\r\n```\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/91146/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/91146/timeline", "performed_via_github_app": null, "state_reason": null}