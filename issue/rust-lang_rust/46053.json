{"url": "https://api.github.com/repos/rust-lang/rust/issues/46053", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/46053/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/46053/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/46053/events", "html_url": "https://github.com/rust-lang/rust/issues/46053", "id": 274803952, "node_id": "MDU6SXNzdWUyNzQ4MDM5NTI=", "number": 46053, "title": "State of emscripten thread support", "user": {"login": "kenOfYugen", "id": 5251559, "node_id": "MDQ6VXNlcjUyNTE1NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5251559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kenOfYugen", "html_url": "https://github.com/kenOfYugen", "followers_url": "https://api.github.com/users/kenOfYugen/followers", "following_url": "https://api.github.com/users/kenOfYugen/following{/other_user}", "gists_url": "https://api.github.com/users/kenOfYugen/gists{/gist_id}", "starred_url": "https://api.github.com/users/kenOfYugen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kenOfYugen/subscriptions", "organizations_url": "https://api.github.com/users/kenOfYugen/orgs", "repos_url": "https://api.github.com/users/kenOfYugen/repos", "events_url": "https://api.github.com/users/kenOfYugen/events{/privacy}", "received_events_url": "https://api.github.com/users/kenOfYugen/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-11-17T09:34:39Z", "updated_at": "2017-11-28T10:13:05Z", "closed_at": "2017-11-28T10:13:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Compiling code that utilizes threads using [asmjs | wasm32]-unknown-emscripten targets, doesn't run in the browser, as expected.\r\n\r\nBy taking a look at the `panic!()` point, the comments state that `pthread_attr_setstacksize symbol doesn't exist in the emscripten libc`.\r\n\r\nhttps://github.com/rust-lang/rust/blob/3bcb00dbc2edcdc498a9e60a68a14652162d1921/src/libstd/sys/unix/thread.rs#L37-L49\r\n\r\nPoking around emscripten's source, `pthread_attr_setstacksize` appears to exist in the `libc` [1], and in the `library_pthread.c` [2].\r\n\r\nSo, are the `thread.rs` comments still relevant?\r\nIs that all that is preventing parallel Rust to cross-compile to SharedArrayBuffer/Web Workers?\r\nI am guessing not, but couldn't find any references to clear things up.\r\n\r\n1. https://github.com/kripken/emscripten/blob/7f89560101843198787530731f40a65288f6f15f/system/lib/libc/musl/src/thread/pthread_attr_setstacksize.c#L3\r\n\r\n2. https://github.com/kripken/emscripten/blob/fec60ff38d67488bc560ddf24eb716a8801baf4a/system/lib/pthread/library_pthread.c#L782", "closed_by": {"login": "kenOfYugen", "id": 5251559, "node_id": "MDQ6VXNlcjUyNTE1NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5251559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kenOfYugen", "html_url": "https://github.com/kenOfYugen", "followers_url": "https://api.github.com/users/kenOfYugen/followers", "following_url": "https://api.github.com/users/kenOfYugen/following{/other_user}", "gists_url": "https://api.github.com/users/kenOfYugen/gists{/gist_id}", "starred_url": "https://api.github.com/users/kenOfYugen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kenOfYugen/subscriptions", "organizations_url": "https://api.github.com/users/kenOfYugen/orgs", "repos_url": "https://api.github.com/users/kenOfYugen/repos", "events_url": "https://api.github.com/users/kenOfYugen/events{/privacy}", "received_events_url": "https://api.github.com/users/kenOfYugen/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/46053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/46053/timeline", "performed_via_github_app": null, "state_reason": "completed"}