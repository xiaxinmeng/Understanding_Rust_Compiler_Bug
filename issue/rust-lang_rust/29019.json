{"url": "https://api.github.com/repos/rust-lang/rust/issues/29019", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29019/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29019/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29019/events", "html_url": "https://github.com/rust-lang/rust/issues/29019", "id": 111142041, "node_id": "MDU6SXNzdWUxMTExNDIwNDE=", "number": 29019, "title": "RawVec of ZST should be safe to transmute", "user": {"login": "srijs", "id": 2677165, "node_id": "MDQ6VXNlcjI2NzcxNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/2677165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srijs", "html_url": "https://github.com/srijs", "followers_url": "https://api.github.com/users/srijs/followers", "following_url": "https://api.github.com/users/srijs/following{/other_user}", "gists_url": "https://api.github.com/users/srijs/gists{/gist_id}", "starred_url": "https://api.github.com/users/srijs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srijs/subscriptions", "organizations_url": "https://api.github.com/users/srijs/orgs", "repos_url": "https://api.github.com/users/srijs/repos", "events_url": "https://api.github.com/users/srijs/events{/privacy}", "received_events_url": "https://api.github.com/users/srijs/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2015-10-13T09:28:21Z", "updated_at": "2015-10-29T21:40:59Z", "closed_at": "2015-10-29T21:40:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "`RawVec` currently stores its buffer capacity not in bytes but as the number of elements that fit in it. That makes transmute as unsafe to use on it as on any other data structure.\n\nIf `RawVec` would store the capacity as the size of the buffer in bytes, that would mean that `mem::transmute` would be safe to use on it, enabling a conversion from `RawVec<T>` into a `RawVec<U>` without any runtime cost.\n\nFurthermore, it would enable a safe transmutation from the vacuous `Vec<Void>` to `Vec<T>` for any T, similar to what's possible with slices today. It also makes this possible for other RawVec-backed structs, e.g. `VecDeque`.\n\nBeing able to universally quantify guaranteed-to-be-empty data structures this way without any runtime cost can be very useful.\n\nCompare: https://hackage.haskell.org/package/void-0.7.1/docs/Data-Void-Unsafe.html\n", "closed_by": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29019/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29019/timeline", "performed_via_github_app": null, "state_reason": "completed"}