{"url": "https://api.github.com/repos/rust-lang/rust/issues/17786", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/17786/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/17786/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/17786/events", "html_url": "https://github.com/rust-lang/rust/issues/17786", "id": 44902200, "node_id": "MDU6SXNzdWU0NDkwMjIwMA==", "number": 17786, "title": "ICE on use of unboxed closures", "user": {"login": "zwarich", "id": 440875, "node_id": "MDQ6VXNlcjQ0MDg3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/440875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zwarich", "html_url": "https://github.com/zwarich", "followers_url": "https://api.github.com/users/zwarich/followers", "following_url": "https://api.github.com/users/zwarich/following{/other_user}", "gists_url": "https://api.github.com/users/zwarich/gists{/gist_id}", "starred_url": "https://api.github.com/users/zwarich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zwarich/subscriptions", "organizations_url": "https://api.github.com/users/zwarich/orgs", "repos_url": "https://api.github.com/users/zwarich/repos", "events_url": "https://api.github.com/users/zwarich/events{/privacy}", "received_events_url": "https://api.github.com/users/zwarich/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-10-05T03:13:55Z", "updated_at": "2014-10-05T04:08:22Z", "closed_at": "2014-10-05T04:08:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "The program\n\n``` rust\n#![feature(unboxed_closures, overloaded_calls)]\n\nfn main() {\n    let mut v = 0u;\n    let p = &mut v;\n    let ref f = |&:| { &*p };\n    let q = (*f)();\n}\n```\n\ncauses an ICE:\n\n```\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'assertion failed: self.nodeid_to_index.contains_key(&id)', /Users/mozilla/rust/src/librustc/middle/dataflow.rs:240\n\nstack backtrace:\n   1:        0x10b409a79 - rt::backtrace::imp::write::h3c35a4a1c39e4b39xOq\n   2:        0x10b40ce1f - failure::on_fail::he90d0d8851524e51b5q\n   3:        0x10b6a5b55 - unwind::begin_unwind_inner::ha1a1845acf79fbcePQd\n   4:        0x107f8a09c - unwind::begin_unwind::h9834015532924519742\n   5:        0x10819d20d - middle::borrowck::build_borrowck_dataflow_data::h6db3d962db9ecd26kGj\n   6:        0x108198be4 - middle::borrowck::borrowck_fn::h2f43e23fd34dac9esDj\n   7:        0x10819ad24 - visit::walk_expr::h17332693979617847417\n   8:        0x10819b2d9 - visit::walk_local::h5546653139216620029\n   9:        0x10819b1cc - visit::walk_block::h1241523800298374362\n  10:        0x1081990fd - middle::borrowck::borrowck_fn::h2f43e23fd34dac9esDj\n  11:        0x10819954e - middle::borrowck::borrowck_item::h5ec3d836d534e004tCj\n  12:        0x108199b8c - middle::borrowck::check_crate::hab16c2e0850a9ed8Xvj\n  13:        0x107fa8a46 - util::common::time::h15264663546234374381\n  14:        0x108871c05 - driver::driver::phase_3_run_analysis_passes::h03a1de560ce9937bvmu\n  15:        0x10886bce4 - driver::driver::compile_input::h2d1f323bf62352d187t\n  16:        0x1088f903e - driver::run_compiler::h101e7281e7a3b6cdISx\n  17:        0x1088f7396 - driver::main_args::closure.148157\n  18:        0x107fc186b - task::TaskBuilder<S>::try_future::closure.100184\n  19:        0x107fc1763 - task::TaskBuilder<S>::spawn_internal::closure.100155\n  20:        0x109407bad - task::spawn_opts::closure.8497\n  21:        0x10b70a08c - rust_try_inner\n  22:        0x10b70a076 - rust_try\n  23:        0x10b6a2eb7 - unwind::try::h4b22e16f00b5af6axFd\n  24:        0x10b6a2d2c - task::Task::run::ha1100aac763f3199PVc\n  25:        0x109407a02 - task::spawn_opts::closure.8436\n  26:        0x10b6a4a0a - thread::thread_start::h45611b574eddc3ba1fd\n  27:     0x7fff8bf92899 - _pthread_body\n  28:     0x7fff8bf9272a - _pthread_struct_init\n```\n", "closed_by": {"login": "zwarich", "id": 440875, "node_id": "MDQ6VXNlcjQ0MDg3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/440875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zwarich", "html_url": "https://github.com/zwarich", "followers_url": "https://api.github.com/users/zwarich/followers", "following_url": "https://api.github.com/users/zwarich/following{/other_user}", "gists_url": "https://api.github.com/users/zwarich/gists{/gist_id}", "starred_url": "https://api.github.com/users/zwarich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zwarich/subscriptions", "organizations_url": "https://api.github.com/users/zwarich/orgs", "repos_url": "https://api.github.com/users/zwarich/repos", "events_url": "https://api.github.com/users/zwarich/events{/privacy}", "received_events_url": "https://api.github.com/users/zwarich/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/17786/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/17786/timeline", "performed_via_github_app": null, "state_reason": "completed"}