{"url": "https://api.github.com/repos/rust-lang/rust/issues/56618", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56618/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56618/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56618/events", "html_url": "https://github.com/rust-lang/rust/issues/56618", "id": 388867689, "node_id": "MDU6SXNzdWUzODg4Njc2ODk=", "number": 56618, "title": "Regression in rust-nightly 2018-12-02", "user": {"login": "steffengy", "id": 1194855, "node_id": "MDQ6VXNlcjExOTQ4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1194855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steffengy", "html_url": "https://github.com/steffengy", "followers_url": "https://api.github.com/users/steffengy/followers", "following_url": "https://api.github.com/users/steffengy/following{/other_user}", "gists_url": "https://api.github.com/users/steffengy/gists{/gist_id}", "starred_url": "https://api.github.com/users/steffengy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steffengy/subscriptions", "organizations_url": "https://api.github.com/users/steffengy/orgs", "repos_url": "https://api.github.com/users/steffengy/repos", "events_url": "https://api.github.com/users/steffengy/events{/privacy}", "received_events_url": "https://api.github.com/users/steffengy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 203429200, "node_id": "MDU6TGFiZWwyMDM0MjkyMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-high", "name": "P-high", "color": "eb6420", "default": false, "description": "High priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 262252628, "node_id": "MDU6TGFiZWwyNjIyNTI2Mjg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/regression-from-stable-to-beta", "name": "regression-from-stable-to-beta", "color": "e4008a", "default": false, "description": "Performance or correctness regression from stable to beta."}, {"id": 267612997, "node_id": "MDU6TGFiZWwyNjc2MTI5OTc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-unsound", "name": "I-unsound", "color": "e11d21", "default": false, "description": "Issue: A soundness hole (worst kind of bug), see: https://en.wikipedia.org/wiki/Soundness"}], "state": "closed", "locked": false, "assignee": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2018-12-08T01:09:37Z", "updated_at": "2018-12-16T23:23:27Z", "closed_at": "2018-12-16T23:23:27Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Summary of the issue reported in tiberius at https://github.com/steffengy/tiberius/issues/87.\r\n\r\n## Issue\r\n\r\nWhen building [tiberius](https://github.com/steffengy/tiberius) with the latest nightlies,\r\nan UDP send using tokio's UdpSockets mysteriously fails on windows:\r\n\r\nMIOW `CompletionPort::get_many` returns an Error (only for release builds)\r\n```\r\nIo(Os { code: 10047, kind: Other, message: \"An address incompatible with the requested protocol was used.\" })\r\n```\r\n\r\n## Reproduction\r\nCheckout tiberius (or built against the version on crates.io) with the following file.\r\nThis might only reproduce on windows (in release builds!).\r\nI have not yet confirmed on linux, the code and deps are different though so a linux build might not trigger it - the part returning the error is miow.\r\n\r\nmain.rs\r\n```rust\r\nuse tiberius::SqlConnection;\r\n\r\nfn main() -> Result<(), Box<std::error::Error>> {\r\n    let future = SqlConnection::connect(\"server=tcp:127.0.0.1\\\\MSSQLSERVER;database=tibtest;integratedsecurity=sspi;trustservercertificate=true\");\r\n    tokio::executor::current_thread::block_on_all(future).unwrap(); // <- panic here\r\n\r\n    println!(\"Done.\");\r\n    Ok(())\r\n}\r\n\r\n```\r\n\r\n## Bisect\r\nBisected to commit d3ed34824c31f303b98855fee6fc9213dff1f295\r\n@RalfJung since he might have an idea how this changeset could affect things.\r\n\r\nConfirmed it with\r\n\r\n- Command `cargo-bisect-rustc --start d09466ceb1374bd0ff1c490bfd50133b8ca67558 --end 4a45578bc58ff262864f72680cc02e83f5d2f5b3 --script=test.bat -v --prompt`\r\n\r\n```\r\nsearched toolchains d09466ceb1374bd0ff1c490bfd50133b8ca67558 through 4a45578bc58ff262864f72680cc02e83f5d2f5b3\r\nregression in d3ed34824c31f303b98855fee6fc9213dff1f295\r\n```\r\n\r\n- test.bat\r\n`cargo run --release main.rs`\r\n\r\n## Observations\r\n\r\nI could not produce a minimal testcase that reproduces this, since removing code or abstractions always led to removing the error no matter how unrelated it seemed. My first guess therefore was it's somehow optimization related - **since the error only seems to occur in release builds** - but for me that doesn't quite align with the bisected commit.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56618/timeline", "performed_via_github_app": null, "state_reason": "completed"}