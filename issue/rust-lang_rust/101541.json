{"url": "https://api.github.com/repos/rust-lang/rust/issues/101541", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/101541/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/101541/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/101541/events", "html_url": "https://github.com/rust-lang/rust/issues/101541", "id": 1364982408, "node_id": "I_kwDOAAsO6M5RW_qI", "number": 101541, "title": "Deprecate and rename native-endian functions", "user": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-07T17:30:06Z", "updated_at": "2022-09-07T17:33:00Z", "closed_at": "2022-09-07T17:31:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In Rust we use three abbreviations for endianness: We use LE for little-endian, BE for big-endian, and NE for native-endian (\"the endianness of the system we are running on\")\r\n\r\nSo for example, we have [`i8::from_be_bytes()`](https://doc.rust-lang.org/stable/std/primitive.i8.html#method.from_be_bytes), [`i8::from_le_bytes()`](https://doc.rust-lang.org/stable/std/primitive.i8.html#method.from_le_bytes), and [`i8::from_ne_bytes()`](https://doc.rust-lang.org/stable/std/primitive.i8.html#method.from_ne_bytes).\r\n\r\nThis is pretty nice and consistent, however the \"NE\" acronym is a little confusing. One major use case of functions that are endianness-sensitive is networking, and in that context the terms \"network endian\" and \"host endian\" are often used. \"network endian\" usually means \"big endian\", and \"host endian\" has the same connotation as \"native endian\".\r\n\r\nAs such it feels like a major footgun to have a function for \"native endianness\" that is very confusable with \"network endianness\", especially since there aren't that many use cases for this function _outside_ of networking[^1].\r\n\r\n@bluejekyll already hit this problem in trust-dns and I suspect that's not the only time this has confused networky people.\r\n\r\n\r\nI wonder if we should be expanding the acronym here, it feels fine to have people call `from_native_endian_bytes()` here. We can deprecate the existing function to push people in the right direction. I don't think we get much from the NE functions being consistent with BE/LE, if anything the cases where you need BE/LE are places you absolutely do not want to accidentally put NE instead.\r\n\r\n [^1]: The other main use case is serialization formats / zero-copy deserialization, which is in spirit very similar to the networking problem though less likely to use the same terminology.", "closed_by": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/101541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/101541/timeline", "performed_via_github_app": null, "state_reason": "completed"}