{"url": "https://api.github.com/repos/rust-lang/rust/issues/59905", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59905/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59905/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59905/events", "html_url": "https://github.com/rust-lang/rust/issues/59905", "id": 432386807, "node_id": "MDU6SXNzdWU0MzIzODY4MDc=", "number": 59905, "title": "Implement `CStr` as a pointer rather than a slice", "user": {"login": "czipperz", "id": 10054343, "node_id": "MDQ6VXNlcjEwMDU0MzQz", "avatar_url": "https://avatars.githubusercontent.com/u/10054343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/czipperz", "html_url": "https://github.com/czipperz", "followers_url": "https://api.github.com/users/czipperz/followers", "following_url": "https://api.github.com/users/czipperz/following{/other_user}", "gists_url": "https://api.github.com/users/czipperz/gists{/gist_id}", "starred_url": "https://api.github.com/users/czipperz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/czipperz/subscriptions", "organizations_url": "https://api.github.com/users/czipperz/orgs", "repos_url": "https://api.github.com/users/czipperz/repos", "events_url": "https://api.github.com/users/czipperz/events{/privacy}", "received_events_url": "https://api.github.com/users/czipperz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 45472092, "node_id": "MDU6TGFiZWw0NTQ3MjA5Mg==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-ffi", "name": "A-ffi", "color": "f7e101", "default": false, "description": "Area: Foreign Function Interface (FFI)"}, {"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-04-12T04:53:18Z", "updated_at": "2023-06-07T08:29:44Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Littered throughout the `CStr` documentation are notes and hints that it should be eventually converted to using a pointer underneath the hood instead of a slice.  This change will make `CStr::from_ptr` O(1) instead of O(n).  Other constructors may still be O(n) because they have to check to ensure there is only one null terminator.  If someone wants to try implementing this, it seems like a pretty simple change.\r\n\r\n[Current struct definition](https://github.com/rust-lang/rust/blob/master/src/libstd/ffi/c_str.rs#L116):\r\n\r\n```\r\npub struct CStr {\r\n    inner: [c_char]\r\n}\r\n```\r\n\r\nProposed:\r\n\r\n```\r\npub struct CStr {\r\n    inner: *const c_char\r\n}\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59905/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59905/timeline", "performed_via_github_app": null, "state_reason": null}