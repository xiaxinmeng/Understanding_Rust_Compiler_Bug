{"url": "https://api.github.com/repos/rust-lang/rust/issues/100248", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/100248/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100248/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/100248/events", "html_url": "https://github.com/rust-lang/rust/issues/100248", "id": 1331109728, "node_id": "I_kwDOAAsO6M5PVx9g", "number": 100248, "title": "Get length of packet from datagram sockets (`UdpSocket`, `UnixDatagram`)", "user": {"login": "nnishant776", "id": 35606136, "node_id": "MDQ6VXNlcjM1NjA2MTM2", "avatar_url": "https://avatars.githubusercontent.com/u/35606136?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnishant776", "html_url": "https://github.com/nnishant776", "followers_url": "https://api.github.com/users/nnishant776/followers", "following_url": "https://api.github.com/users/nnishant776/following{/other_user}", "gists_url": "https://api.github.com/users/nnishant776/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnishant776/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnishant776/subscriptions", "organizations_url": "https://api.github.com/users/nnishant776/orgs", "repos_url": "https://api.github.com/users/nnishant776/repos", "events_url": "https://api.github.com/users/nnishant776/events{/privacy}", "received_events_url": "https://api.github.com/users/nnishant776/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-08-07T20:03:14Z", "updated_at": "2022-08-07T22:56:49Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "## Summary\r\nProvide an API to peek/get the length of the datagram\r\n\r\nThe unstable feature `unix_socket_peek` adds methods `peek` and `peek_from` for `UnixDatagram` and `UnixStream`. While they allow to peek at the the data, however, the API returns the number of bytes read on success. To get the length of the datagram instead of the bytes read, in an API similar to `peek`,  `MSG_TRUNC` `or`ed with the `MSG_PEEK` flag can be passed to the `recv` call, which would only `peek` at the data but return the length the next datagram on success.\r\n\r\n## Motivation\r\nThis can be helpful in use cases for memory usage optimization where we can allocate buffers dynamically with just enough size for reading the data packet. This is helpful when the connections or message are infrequent, for example, an application configuration message.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/100248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/100248/timeline", "performed_via_github_app": null, "state_reason": null}