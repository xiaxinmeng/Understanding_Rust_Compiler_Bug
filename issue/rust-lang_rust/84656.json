{"url": "https://api.github.com/repos/rust-lang/rust/issues/84656", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/84656/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/84656/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/84656/events", "html_url": "https://github.com/rust-lang/rust/issues/84656", "id": 870030961, "node_id": "MDU6SXNzdWU4NzAwMzA5NjE=", "number": 84656, "title": "Warning about \"panic message is not a string literal\" on `assert!` could be improved", "user": {"login": "Geobert", "id": 72570, "node_id": "MDQ6VXNlcjcyNTcw", "avatar_url": "https://avatars.githubusercontent.com/u/72570?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Geobert", "html_url": "https://github.com/Geobert", "followers_url": "https://api.github.com/users/Geobert/followers", "following_url": "https://api.github.com/users/Geobert/following{/other_user}", "gists_url": "https://api.github.com/users/Geobert/gists{/gist_id}", "starred_url": "https://api.github.com/users/Geobert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Geobert/subscriptions", "organizations_url": "https://api.github.com/users/Geobert/orgs", "repos_url": "https://api.github.com/users/Geobert/repos", "events_url": "https://api.github.com/users/Geobert/events{/privacy}", "received_events_url": "https://api.github.com/users/Geobert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-04-28T14:46:37Z", "updated_at": "2021-05-11T14:48:05Z", "closed_at": "2021-05-11T14:48:04Z", "author_association": "NONE", "active_lock_reason": null, "body": "Given the following code: https://play.rust-lang.org/?version=stable&mode=debug&edition=2018&gist=f8bcc7c1d5be93360f283c8662411b59\r\n\r\n```rust\r\nfn main(){\r\nlet version = \"12.112a0-0\";\r\nassert!(version == \"1.0\", format!(\"test failure text: {}\", version));\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nwarning: panic message is not a string literal\r\n --> src/main.rs:3:27\r\n  |\r\n3 | assert!(version == \"1.0\", format!(\"test failure text: {}\", version));\r\n  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |\r\n  = note: `#[warn(non_fmt_panic)]` on by default\r\n  = note: this is no longer accepted in Rust 2021\r\n  = note: this warning originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\r\n\r\nwarning: 1 warning emitted\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally the output should look like:\r\n\r\n```\r\nwarning: dynamic panic message created using format!\r\n  --> my_project\\src\\api\\tests\\test_endpoint.rs:46:9\r\n   |\r\n46 |         format!(\"BODY: {:#?}\", body)\r\n   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n   |\r\n   = note: The macros `assert!` and [whichever else] can take format arguments,\r\n   = note: so you can instead write this more directly as:\r\n45 |        assert!(whatever,\r\n46 |         \"BODY: {:#?}\", body\r\n47 |         )\r\n   |\r\n```\r\n\r\nidea from https://old.reddit.com/r/rust/comments/mzpr3p/panic_message_is_not_a_string_literal/gw57qz8/\r\n", "closed_by": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/84656/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/84656/timeline", "performed_via_github_app": null, "state_reason": "completed"}