{"url": "https://api.github.com/repos/rust-lang/rust/issues/32520", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32520/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32520/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32520/events", "html_url": "https://github.com/rust-lang/rust/issues/32520", "id": 143760326, "node_id": "MDU6SXNzdWUxNDM3NjAzMjY=", "number": 32520, "title": "debuginfo-lldb test failures with lldb 350 on OS X", "user": {"login": "tedhorst", "id": 113629, "node_id": "MDQ6VXNlcjExMzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/113629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tedhorst", "html_url": "https://github.com/tedhorst", "followers_url": "https://api.github.com/users/tedhorst/followers", "following_url": "https://api.github.com/users/tedhorst/following{/other_user}", "gists_url": "https://api.github.com/users/tedhorst/gists{/gist_id}", "starred_url": "https://api.github.com/users/tedhorst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tedhorst/subscriptions", "organizations_url": "https://api.github.com/users/tedhorst/orgs", "repos_url": "https://api.github.com/users/tedhorst/repos", "events_url": "https://api.github.com/users/tedhorst/events{/privacy}", "received_events_url": "https://api.github.com/users/tedhorst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123111, "node_id": "MDU6TGFiZWwxMjMxMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-macos", "name": "O-macos", "color": "6e6ec0", "default": false, "description": "Operating system: macOS"}, {"id": 203130, "node_id": "MDU6TGFiZWwyMDMxMzA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-debuginfo", "name": "A-debuginfo", "color": "f7e101", "default": false, "description": "Area: Debugging information in compiled programs (DWARF, PDB, etc.)"}], "state": "closed", "locked": false, "assignee": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2016-03-26T23:53:20Z", "updated_at": "2016-06-30T04:42:22Z", "closed_at": "2016-06-30T04:42:22Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I upgraded to Xcode 7.3 which includes lldb version 350.0.21.3.  When running make check, all the debuginfo-lldb tests fail like this:\n\n```\nthread '[debuginfo-lldb] debuginfo-lldb/vec-slices.rs' panicked at 'explicit panic', /Users/ted/Developer/OpenSource/Rustlang/rust/src/compiletest/runtest.rs:1676\n\n---- [debuginfo-lldb] debuginfo-lldb/vec.rs stdout ----\n    NOTE: compiletest thinks it is using LLDB version 350\n\nerror: Error while running LLDB\nstatus: signal: 11\ncommand: \"/usr/bin/python2.7\" \"/Users/ted/Developer/OpenSource/Rustlang/rust/src/etc/lldb_batchmode.py\" \"x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin\" \"x86_64-apple-darwin/test/debuginfo-lldb/vec.debugger.script\"\nstdout:\n------------------------------------------\nLLDB batch-mode script\n----------------------\nDebugger commands script is 'x86_64-apple-darwin/test/debuginfo-lldb/vec.debugger.script'.\nTarget executable is 'x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin'.\nCurrent working directory is '/Users/ted/Developer/OpenSource/Rustlang/rust/build'\nCreating a target for 'x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin'\nsettings set auto-confirm true\n\nversion\nlldb-350.0.21.3 \ncommand script import /Users/ted/Developer/OpenSource/Rustlang/rust/./src/etc/lldb_rust_formatters.py\ntype summary add --no-value --python-function lldb_rust_formatters.print_val -x \".*\" --category Rust\ntype category enable Rust\n\nbreakpoint set --line 45\nerror: No selected frame to use to find the default file.\nerror: No file supplied and no default file available.\n\nrun\nProcess 97454 exited with status = 0 (0x00000000) Process 97454 launched: '/Users/ted/Developer/OpenSource/Rustlang/rust/build/x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin' (x86_64) \nprint a\nerror: use of undeclared identifier 'a'\nerror: 1 errors parsing expression\n\nquit\n\n\n------------------------------------------\nstderr:\n------------------------------------------\n\n------------------------------------------\n```\n\nI can fix this by specifying the source file name in the breakpoint command, but then I get a different failure:\n\n```\nthread '[debuginfo-lldb] debuginfo-lldb/vec-slices.rs' panicked at 'explicit panic', /Users/ted/Developer/OpenSource/Rustlang/rust/src/compiletest/runtest.rs:1676\n\n---- [debuginfo-lldb] debuginfo-lldb/vec.rs stdout ----\n    NOTE: compiletest thinks it is using LLDB version 350\n\nerror: Error while running LLDB\nstatus: signal: 11\ncommand: \"/usr/bin/python2.7\" \"/Users/ted/Developer/OpenSource/Rustlang/rust/src/etc/lldb_batchmode.py\" \"x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin\" \"x86_64-apple-darwin/test/debuginfo-lldb/vec.debugger.script\"\nstdout:\n------------------------------------------\nLLDB batch-mode script\n----------------------\nDebugger commands script is 'x86_64-apple-darwin/test/debuginfo-lldb/vec.debugger.script'.\nTarget executable is 'x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin'.\nCurrent working directory is '/Users/ted/Developer/OpenSource/Rustlang/rust/build'\nCreating a target for 'x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin'\nsettings set auto-confirm true\n\nversion\nlldb-350.0.21.3 \ncommand script import /Users/ted/Developer/OpenSource/Rustlang/rust/./src/etc/lldb_rust_formatters.py\ntype summary add --no-value --python-function lldb_rust_formatters.print_val -x \".*\" --category Rust\ntype category enable Rust\n\nbreakpoint set --file vec.rs --line 45\nBreakpoint 1: where = vec.stage2-x86_64-apple-darwin`vec::main::h28e3360ac59a9f54 + 138, address = 0x0000000100000e3a \nrun\nHit breakpoint 1.1: where = vec.stage2-x86_64-apple-darwin`vec::main::h28e3360ac59a9f54 + 138, address = 0x0000000100000e3a, resolved, hit count = 1 \nProcess 17835 stopped * thread #1: tid = 0x9f207, 0x0000000100000e3a vec.stage2-x86_64-apple-darwin`vec::main::h28e3360ac59a9f54 + 138 at vec.rs:45, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1 frame #0: 0x0000000100000e3a vec.stage2-x86_64-apple-darwin`vec::main::h28e3360ac59a9f54 + 138 at vec.rs:45 42 VECT[2] = 6; 43 } 44 -> 45 zzz(); // #break 46 } 47 48 fn zzz() {()} Process 17835 launched: '/Users/ted/Developer/OpenSource/Rustlang/rust/build/x86_64-apple-darwin/test/debuginfo-lldb/vec.stage2-x86_64-apple-darwin' (x86_64) \nprint a\nquit\n\n\n------------------------------------------\nstderr:\n------------------------------------------\n\n------------------------------------------\n```\n\nNothing is printed by the print command.  This happens with or without the formatters.\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32520/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32520/timeline", "performed_via_github_app": null, "state_reason": "completed"}