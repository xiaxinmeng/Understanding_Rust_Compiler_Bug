{"url": "https://api.github.com/repos/rust-lang/rust/issues/41576", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/41576/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/41576/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/41576/events", "html_url": "https://github.com/rust-lang/rust/issues/41576", "id": 224720580, "node_id": "MDU6SXNzdWUyMjQ3MjA1ODA=", "number": 41576, "title": "Enable using libraries from crates.io without polluting them with stability attributes", "user": {"login": "hanna-kruppe", "id": 2311707, "node_id": "MDQ6VXNlcjIzMTE3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2311707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanna-kruppe", "html_url": "https://github.com/hanna-kruppe", "followers_url": "https://api.github.com/users/hanna-kruppe/followers", "following_url": "https://api.github.com/users/hanna-kruppe/following{/other_user}", "gists_url": "https://api.github.com/users/hanna-kruppe/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanna-kruppe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanna-kruppe/subscriptions", "organizations_url": "https://api.github.com/users/hanna-kruppe/orgs", "repos_url": "https://api.github.com/users/hanna-kruppe/repos", "events_url": "https://api.github.com/users/hanna-kruppe/events{/privacy}", "received_events_url": "https://api.github.com/users/hanna-kruppe/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-04-27T09:11:28Z", "updated_at": "2017-04-27T11:07:58Z", "closed_at": "2017-04-27T11:07:47Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "All (transitive) dependencies of the compiler and standard library wind up in the sysroot, and could therefore be used by anyone. We don't want to guarantee the existence, much less version/API of any crates except (currently) `std`, `core`, and `proc_macro`. Therefore all other crates must be marked as unstable, often with the feature name `rustc_private`. This also applies to crates from crates.io, but this currently means a couple of lines need to be copied into every such library to make them unstable if and only if they're being used as part of rustc. This is very ugly, and becomes a greater hurdle as we start reusing more third party libraries in rustc (since all affected crates need to be updated and release a new version, and again, this affects *all transitive dependencies*). We should find a way to not require this from crates.io libraries.\r\n\r\n@eddyb mentioned the possibility of (IIUC) a `-Z` flag that applies a stability attribute to all crates that don't have one already. We could then pass this flag to all rustc invocations done while building rust, to implicitly make all our third-party dependencies `rustc_private` without modifying their source code.\r\n\r\ncc @alexcrichton", "closed_by": {"login": "hanna-kruppe", "id": 2311707, "node_id": "MDQ6VXNlcjIzMTE3MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2311707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanna-kruppe", "html_url": "https://github.com/hanna-kruppe", "followers_url": "https://api.github.com/users/hanna-kruppe/followers", "following_url": "https://api.github.com/users/hanna-kruppe/following{/other_user}", "gists_url": "https://api.github.com/users/hanna-kruppe/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanna-kruppe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanna-kruppe/subscriptions", "organizations_url": "https://api.github.com/users/hanna-kruppe/orgs", "repos_url": "https://api.github.com/users/hanna-kruppe/repos", "events_url": "https://api.github.com/users/hanna-kruppe/events{/privacy}", "received_events_url": "https://api.github.com/users/hanna-kruppe/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/41576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/41576/timeline", "performed_via_github_app": null, "state_reason": "completed"}