{"url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436", "repository_url": "https://api.github.com/repos/rust-lang/rustc-dev-guide", "labels_url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436/comments", "events_url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436/events", "html_url": "https://github.com/rust-lang/rustc-dev-guide/issues/436", "id": 487926339, "node_id": "MDU6SXNzdWU0ODc5MjYzMzk=", "number": 436, "title": "document environment variables used when building the compiler", "user": {"login": "vitiral", "id": 5587659, "node_id": "MDQ6VXNlcjU1ODc2NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5587659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vitiral", "html_url": "https://github.com/vitiral", "followers_url": "https://api.github.com/users/vitiral/followers", "following_url": "https://api.github.com/users/vitiral/following{/other_user}", "gists_url": "https://api.github.com/users/vitiral/gists{/gist_id}", "starred_url": "https://api.github.com/users/vitiral/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vitiral/subscriptions", "organizations_url": "https://api.github.com/users/vitiral/orgs", "repos_url": "https://api.github.com/users/vitiral/repos", "events_url": "https://api.github.com/users/vitiral/events{/privacy}", "received_events_url": "https://api.github.com/users/vitiral/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2017-10-24T16:13:55Z", "updated_at": "2023-03-26T12:40:10Z", "closed_at": "2023-03-26T12:40:09Z", "author_association": "NONE", "active_lock_reason": null, "body": "I am a newbie to compiler development and came across a pretty big documentation gap: environment variables.\r\n\r\nI ran the following script to try and pull out all the existing environment variables. I can run it on whatever directories that project contributors want me to. I would like to document these if possible!\r\n\r\nAction items for someone more knowledgeable than me:\r\n- I am running against `src/lib* src/bootstrap`. Are there other directories I should be searching?\r\n- I am searching for `env::var(_os)` (rust) and `os.environ.get` (python). Are there other regexes that should be searched?\r\n- Please provide feedback on which of these should be better documented, and if you have a one line \"off the top of my head\" documentation feel free to write it here.\r\n- Does stage0 complicate things, and we need to be mindful of what environment variables are set when *compiling the compiler*?\r\n- I think these should probably go in the [Configuration section](https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#configuration). Let me know if you have a better spot in mind.\r\n\r\n```\r\nrg '^.*?((env::var(_os)?)|(os\\.environ\\.get))\\(([\\w\"]+)\\).*?$' \\\r\n    -r '$5' -N --no-filename \\\r\n    src/lib* src/bootstrap \\\r\n    | sort -u\r\n```\r\n\r\n<details>\r\n<summary><b>Output</b></summary>\r\n\r\n```\r\n\"APPVEYOR\"                                                                                                                                                                                                 \r\n\"AR\"                    \r\n\"BOOTSTRAP_PARENT_ID\"\r\n\"BOOTSTRAP_PYTHON\"     \r\n\"BUILD\"                                \r\n\"CARGO_CFG_TARGET_ARCH\"\r\n\"CARGO_CFG_TARGET_ENV\"\r\n\"CARGO_CFG_TARGET_OS\"\r\n\"CARGO_CFG_TARGET_VENDOR\"\r\n\"CARGO_TARGET_DIR\"     \r\n\"CFG_COMPILER_HOST_TRIPLE\"\r\n\"CFLAGS\"            \r\n\"DESTDIR\"                       \r\n\"HOME\"                        \r\n\"HOST\"               \r\n\"JEMALLOC_OVERRIDE\"\r\nkey            \r\n\"L4RE_LIBDIR\"        \r\nlibdir         \r\n\"LLVM_CONFIG\"  \r\n\"LLVM_LINK_SHARED\"\r\n\"LLVM_RUSTLLVM\"        \r\n\"LLVM_STATIC_STDCPP\"   \r\n\"MACOSX_DEPLOYMENT_TARGET\"\r\n\"MACOSX_STD_DEPLOYMENT_TARGET\"\r\n\"MAKEFLAGS\"     \r\n\"MSYSCON\"          \r\n\"MUSL_ROOT\"             \r\n\"NUM_JOBS\"                 \r\n\"OUT_DIR\"              \r\n\"PAGER\"                                \r\n\"PATH\"                \r\n\"RUST_BACKTRACE\"   \r\nrustc              \r\n\"RUSTC_BOOTSTRAP\"\r\n\"RUSTC_CODEGEN_UNITS\"  \r\n\"RUSTC_COLOR\"            \r\n\"RUSTC_CRT_STATIC\"\r\n\"RUSTC_DEBUG_ASSERTIONS\"        \r\n\"RUSTC_DEBUGINFO\"\r\n\"RUSTC_DEBUGINFO_LINES\"\r\n\"RUSTC_FORCE_INCR_COMP_ARTIFACT_HEADER\"\r\n\"RUSTC_FORCE_UNSTABLE\"\r\n\"RUSTC_HOST_LINKER\"  \r\n\"RUSTC_INCREMENTAL\"\r\n\"RUSTC_LIBDIR\" \r\n\"RUSTC_METADATA_SUFFIX\"\r\n\"RUSTC_NO_PREFER_DYNAMIC\"\r\n\"RUSTC_ON_FAIL\"        \r\n\"RUSTC_RETRY_LINKER_ON_SEGFAULT\"\r\n\"RUSTC_RPATH\"\r\n\"RUSTC_SAVE_ANALYSIS\"\r\n\"RUSTC_STAGE\"\r\n\"RUSTC_SYSROOT\"\r\n\"RUSTC_TARGET_LINKER\"\r\n\"RUSTC_THINLTO\"\r\n\"RUSTC_VERBOSE\"\r\n\"RUST_DEP_GRAPH\"\r\n\"RUST_DEP_GRAPH_FILTER\"\r\n\"RUSTDOC_CRATE_VERSION\"\r\n\"RUSTDOC_REAL\"   \r\n\"RUST_FORBID_DEP_GRAPH_EDGE\"\r\n\"RUST_MIN_STACK\"\r\n\"RUST_REGION_GRAPH\"\r\n\"RUST_REGION_GRAPH_NODE\"\r\n\"RUST_SAVE_ANALYSIS_CONFIG\"\r\n\"RUST_TARGET_PATH\"     \r\n\"RUST_TEST_NOCAPTURE\"                  \r\n\"RUST_TEST_STRESS\"    \r\n\"RUST_TEST_THREADS\"\r\n\"SCCACHE_ERROR_LOG\"\r\n\"SCCACHE_PATH\"\r\n\"SCCACHE_TARGET\"       \r\n\"SRC\"                    \r\n\"SUDO_USER\"    \r\n\"TARGET\"                        \r\n\"TERM\"       \r\n\"TERMINFO\"           \r\n\"TERMINFO_DIRS\"\r\n\"TEST_DEVICE_ADDR\"\r\n\"TEST_MIRI\"          \r\n\"TMPDIR\"       \r\n\"TRAVIS\"       \r\n\"USER\"          \r\n\"USERPROFILE\"          \r\nvar                    \r\n\"WIX\"       \r\n```", "closed_by": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rustc-dev-guide/issues/436/timeline", "performed_via_github_app": null, "state_reason": "completed"}