{"url": "https://api.github.com/repos/rust-lang/rust/issues/63098", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/63098/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/63098/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/63098/events", "html_url": "https://github.com/rust-lang/rust/issues/63098", "id": 473868507, "node_id": "MDU6SXNzdWU0NzM4Njg1MDc=", "number": 63098, "title": "`f64::round` produces Illegal Instruction on `arm-unknown-linux-gnueabihf`", "user": {"login": "reitermarkus", "id": 1309829, "node_id": "MDQ6VXNlcjEzMDk4Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1309829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reitermarkus", "html_url": "https://github.com/reitermarkus", "followers_url": "https://api.github.com/users/reitermarkus/followers", "following_url": "https://api.github.com/users/reitermarkus/following{/other_user}", "gists_url": "https://api.github.com/users/reitermarkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/reitermarkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reitermarkus/subscriptions", "organizations_url": "https://api.github.com/users/reitermarkus/orgs", "repos_url": "https://api.github.com/users/reitermarkus/repos", "events_url": "https://api.github.com/users/reitermarkus/events{/privacy}", "received_events_url": "https://api.github.com/users/reitermarkus/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-29T06:14:38Z", "updated_at": "2019-07-29T06:40:51Z", "closed_at": "2019-07-29T06:40:51Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I am cross-compiling for a Raspberry Pi Zero W (`arm-unknown-linux-gnueabihf`), and I am experiencing a strange issue when using `f64::round`, which leads to an \u201cIllegal Instruction\u201d. Here are some minimal examples:\r\n\r\n1. Illegal Instruction at line 4\r\n\r\n```rust\r\nfn main() {\r\n  let v: f64 = 0.0;\r\n  println!(\"works: {:?}\", v);\r\n  println!(\"fails: {:?}\", (v * 10.0).round());\r\n}\r\n```\r\n\r\n2. No Illegal Instruction\r\n\r\n```rust\r\nfn main() {\r\n  let v: f64 = 0.0;\r\n  println!(\"works: {:?}\", v.round());\r\n  println!(\"works: {:?}\", (v * 10.0).round());\r\n}\r\n```\r\n\r\n3. No Illegal Instruction\r\n\r\n```rust\r\nfn main() {\r\n  let v: f64 = 0.0;\r\n  println!(\"works: {:?}\", v);\r\n  println!(\"works: {:?}\", (v * 1.0).round());\r\n}\r\n```\r\n\r\nApparently, the Raspberry Pi Zero W is actually a `arm-unknown-linux-gnueabi`. With `arm-unknown-linux-gnueabi`, I am experiencing the same behaviour, except instead of crashing with an \u201cIllegal Instruction\u201d it produces `NaN`.\r\n\r\n---\r\n\r\nReferences https://users.rust-lang.org/t/f64-round-produces-illegal-instruction-on-arm-unknown-linux-gnueabihf/30798.", "closed_by": {"login": "reitermarkus", "id": 1309829, "node_id": "MDQ6VXNlcjEzMDk4Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1309829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reitermarkus", "html_url": "https://github.com/reitermarkus", "followers_url": "https://api.github.com/users/reitermarkus/followers", "following_url": "https://api.github.com/users/reitermarkus/following{/other_user}", "gists_url": "https://api.github.com/users/reitermarkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/reitermarkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reitermarkus/subscriptions", "organizations_url": "https://api.github.com/users/reitermarkus/orgs", "repos_url": "https://api.github.com/users/reitermarkus/repos", "events_url": "https://api.github.com/users/reitermarkus/events{/privacy}", "received_events_url": "https://api.github.com/users/reitermarkus/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/63098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/63098/timeline", "performed_via_github_app": null, "state_reason": "completed"}