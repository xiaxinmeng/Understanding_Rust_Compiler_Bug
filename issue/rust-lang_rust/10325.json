{"url": "https://api.github.com/repos/rust-lang/rust/issues/10325", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/10325/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/10325/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/10325/events", "html_url": "https://github.com/rust-lang/rust/issues/10325", "id": 22242965, "node_id": "MDU6SXNzdWUyMjI0Mjk2NQ==", "number": 10325, "title": "segfault with small Rust program", "user": {"login": "chetmurthy", "id": 1755771, "node_id": "MDQ6VXNlcjE3NTU3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1755771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chetmurthy", "html_url": "https://github.com/chetmurthy", "followers_url": "https://api.github.com/users/chetmurthy/followers", "following_url": "https://api.github.com/users/chetmurthy/following{/other_user}", "gists_url": "https://api.github.com/users/chetmurthy/gists{/gist_id}", "starred_url": "https://api.github.com/users/chetmurthy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chetmurthy/subscriptions", "organizations_url": "https://api.github.com/users/chetmurthy/orgs", "repos_url": "https://api.github.com/users/chetmurthy/repos", "events_url": "https://api.github.com/users/chetmurthy/events{/privacy}", "received_events_url": "https://api.github.com/users/chetmurthy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 100522, "node_id": "MDU6TGFiZWwxMDA1MjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-crash", "name": "I-crash", "color": "e10c02", "default": false, "description": "Issue: The compiler crashes (SIGSEGV, SIGABRT, etc). Use I-ICE instead when the compiler panics."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2013-11-07T03:50:17Z", "updated_at": "2013-11-07T04:33:24Z", "closed_at": "2013-11-07T03:53:38Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've got a small Rust program, trying to implement a binary search tree.  With Rust 0.8, the compiler segfaults.  WIth GIT revision 8ea2123, I get a nicer error-message, THEN a segfault.  Looks like some sort of infinite stack-recursion.\n\nI'm including the program.\n\n``` rust\nextern mod extra ;\nuse std::rand;\nuse std::rand::Rng;\nuse std::vec ;\nuse std::str ;\nuse extra::sort ;\n\nstruct bstnode<K, V> {\n    k : K,\n    v : V,\n    l : Option< bstnode<K, V> >,\n    r : Option< bstnode<K, V> >\n}\n\nimpl<K : Clone + Eq + TotalOrd , V : Clone> bstnode<K, V> {\n    fn new(k: &K, v: &V) -> bstnode<K,V> {\n        bstnode { k: (*k).clone(), v: (*v).clone(), l: None, r: None }\n    }\n    fn dumbinsert(node: &mut bstnode<K, V>, k : &K, v : &V) {\n        if (node.k.cmp(k) == Equal) {\n            node.v = v.clone() ;\n        }\n        else if (k.cmp(&(node.k)) == Less) {\n            match node.l {\n                None => { node.l = Some(bstnode::new(k, v)) ; }\n                Some(ref mut l) => bstnode::dumbinsert(l, k, v)\n            }\n        }\n        else {\n            match node.r {\n                None => { node.r = Some(bstnode::new(k, v)) ; }\n                Some(ref mut r) => bstnode::dumbinsert(r, k, v)\n            }\n        }\n    }\n}\n\nfn main() {\n    let k = ~\"foo\";\n    let v = ~\"bar\";\n    let mut t = bstnode::new(&k, &v) ;\n    let k2 = ~\"foo2\" ; let v2 = ~\"bar2\" ;\n    bstnode::dumbinsert(&mut t, &k2, &v2) ;\n}\n```\n", "closed_by": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/10325/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/10325/timeline", "performed_via_github_app": null, "state_reason": "completed"}