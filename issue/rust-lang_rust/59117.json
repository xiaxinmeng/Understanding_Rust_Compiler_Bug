{"url": "https://api.github.com/repos/rust-lang/rust/issues/59117", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/59117/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/59117/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/59117/events", "html_url": "https://github.com/rust-lang/rust/issues/59117", "id": 419723409, "node_id": "MDU6SXNzdWU0MTk3MjM0MDk=", "number": 59117, "title": "Add function to make paths absolute, which is different from canonicalization", "user": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2019-03-11T22:58:25Z", "updated_at": "2023-02-26T16:33:24Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Many users want to turn relative paths into absolute paths, but the only tool that libstd currently offers is `canonicalize` which is bad because it has to hit the filesystem which has several downsides:\r\n\r\n1. It takes time to hit the filesystem.\r\n2. The path has to actually exist.\r\n3. It fails on certain types of drives such as RAM drives on Windows.\r\n4. The path it creates is a `\\\\?\\` path which not all software can handle correctly and imposes requirements on further path manipulation that few users are even aware of.\r\n\r\nNeeding symbolic links actually resolved is an extremely rare use case, and is often misused to compare paths for equality when in reality you should be comparing file IDs due to things like hard links existing.\r\n\r\nA new function (`normalize` or `make_absolute` or something, bikeshed away) should be added that will turn a relative path into an absolute path without touching the filesystem. On Windows this should either call `GetFullPathNameW` or do the pure Rust equivalent while on unixy platforms... *something* should happen, I have no idea.\r\n\r\nIf such a function did exist, rustc could start using that instead of canonicalize which would fix a whole host of issues including:\r\nhttps://github.com/rust-lang/rust/issues/74327\r\nhttps://github.com/rust-lang/rust/pull/74146\r\nhttps://github.com/rust-lang/rust/issues/59107\r\nhttps://github.com/rust-lang/rust/issues/58613\r\nhttps://github.com/rust-lang/rust/issues/55812\r\nhttps://github.com/rust-lang/rust/issues/52440\r\nhttps://github.com/rust-lang/rust/issues/48249\r\nhttps://github.com/rust-lang/rust/issues/45067\r\nhttps://github.com/rust-lang/rust/issues/42869", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/59117/reactions", "total_count": 58, "+1": 58, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/59117/timeline", "performed_via_github_app": null, "state_reason": null}