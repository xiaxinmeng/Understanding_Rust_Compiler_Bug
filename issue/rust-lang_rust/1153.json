{"url": "https://api.github.com/repos/rust-lang/rust/issues/1153", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1153/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1153/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1153/events", "html_url": "https://github.com/rust-lang/rust/issues/1153", "id": 2170541, "node_id": "MDU6SXNzdWUyMTcwNTQx", "number": 1153, "title": "crash: \"Ptr must be a pointer to Val type!\"", "user": {"login": "elly", "id": 218734, "node_id": "MDQ6VXNlcjIxODczNA==", "avatar_url": "https://avatars.githubusercontent.com/u/218734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elly", "html_url": "https://github.com/elly", "followers_url": "https://api.github.com/users/elly/followers", "following_url": "https://api.github.com/users/elly/following{/other_user}", "gists_url": "https://api.github.com/users/elly/gists{/gist_id}", "starred_url": "https://api.github.com/users/elly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elly/subscriptions", "organizations_url": "https://api.github.com/users/elly/orgs", "repos_url": "https://api.github.com/users/elly/repos", "events_url": "https://api.github.com/users/elly/events{/privacy}", "received_events_url": "https://api.github.com/users/elly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2011-11-08T02:58:55Z", "updated_at": "2011-11-22T12:34:37Z", "closed_at": "2011-11-22T12:34:35Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following program crashes rustc with an assert failure inside llvm: http://www.leptoquark.net/~elly/rustdoc-valtype.rs.\n#0  0xf7fdd430 in __kernel_vsyscall ()\n\nNo symbol table info available.\n#1  0xf6d17c4f in __GI_raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64\n\n```\n    resultvar = <optimized out>\n    resultvar = <optimized out>\n    pid = -152698892\n    selftid = 8676\n```\n#2  0xf6d1b175 in __GI_abort () at abort.c:92\n\n```\n    save_stage = 2\n    act = {__sigaction_handler = {sa_handler = 0xfd, sa_sigaction = 0xfd}, sa_mask = {__val = {\n          4141206064, 304, 264, 252, 253, 137759776, 264, 304, 4142268404, 252, 253, 252, \n          4141140652, 137759784, 253, 4133106040, 137759608, 0, 4142007555, 4222451712, 137759784, \n          137759885, 137759784, 137759784, 137760036, 137760084, 137759784, 137760084, 0, 0, 0, \n          0}}, sa_flags = 0, sa_restorer = 0x43}\n    sigs = {__val = {32, 0 <repeats 31 times>}}\n```\n#3  0xf6d10716 in __GI___assert_fail (\n\n```\nassertion=0xf7df3990 \"getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType() && \\\"Ptr must be a pointer to Val type!\\\"\", \nfile=0xf7df2d3c \"/home/elly/s/rust/src/llvm/lib/VMCore/Instructions.cpp\", line=1065, \nfunction=0xf7df7e60 \"void llvm::StoreInst::AssertOK()\") at assert.c:81\n    buf = 0x8360c28 \"rustc: /home/elly/s/rust/src/llvm/lib/VMCore/Instructions.cpp:1065: void llvm::StoreInst::AssertOK(): Assertion `getOperand(0)->getType() == cast<PointerType>(getOperand(1)->getType())->getElementType\"...\n```\n#4  0xf7adcd8a in llvm::StoreInst::AssertOK() () from /home/elly/a/rust/bin/../lib/librustllvm.so\n\nNo symbol table info available.\n#5  0xf7ae100e in llvm::StoreInst::StoreInst(llvm::Value_, llvm::Value_, bool, llvm::Instruction*) ()\n\n   from /home/elly/a/rust/bin/../lib/librustllvm.so\nNo symbol table info available.\n#6  0xf7a74a8f in LLVMBuildStore () from /home/elly/a/rust/bin/../lib/librustllvm.so\n\nNo symbol table info available.\n#7  0xf6ec7249 in upcall_call_c_stack_i64 () at ./src/rt/arch/i386/ccall.S:26\n\nNo locals.\n#8  0x080973d2 in middle::trans::do_spill::_7648ce608975ee90 ()\n\nNo symbol table info available.\n#9  0x08076c14 in middle::trans::call_cmp_glue::_ba598d1087e2229c ()\n\nNo symbol table info available.\n#10 0x0807caa6 in middle::trans::trans_compare::_5e77a429fae88bd5 ()\n\nNo symbol table info available.\n#11 0x080bc945 in middle::trans_alt::compile_submatch::_4a5f506139fee9e3 ()\n\nNo symbol table info available.\n#12 0x080bc41b in middle::trans_alt::compile_submatch::_4a5f506139fee9e3 ()\n\nNo symbol table info available.\n#13 0x080b9e9f in middle::trans_alt::compile_submatch::_4a5f506139fee9e3 ()\n\nNo symbol table info available.\n#14 0x080bf283 in middle::trans_alt::compile_submatch::_4a5f506139fee9e3 ()\n\nNo symbol table info available.\n#15 0x080c0f76 in middle::trans_alt::trans_alt::_7b5041dd434dd5f5 ()\n\nNo symbol table info available.\n#16 0x0809540a in middle::trans::trans_expr::_f9969b77af77ceb8 ()\n\nNo symbol table info available.\n#17 0x0809b9cc in middle::trans::trans_stmt::_78d6f7d99a7a21dc ()\n\nNo symbol table info available.\n#18 0x0809d748 in middle::trans::trans_block_dps::_6b45456deb3d2743 ()\n\nNo symbol table info available.\n#19 0x08080456 in middle::trans::trans_for::inner::_b024d7de3ce31cb6 ()\n\nNo symbol table info available.\n#20 0x08255fcb in middle::trans::trans_for::thunk1130 ()\n\nNo symbol table info available.\n#21 0x080d6b81 in middle::trans_vec::iter_vec_raw::_54b754b8ce805811 ()\n\nNo symbol table info available.\n#22 0x08080b73 in middle::trans::trans_for::_829df1651833c8be ()\n\nNo symbol table info available.\n#23 0x08095280 in middle::trans::trans_expr::_f9969b77af77ceb8 ()\n\nNo symbol table info available.\n#24 0x0809b9cc in middle::trans::trans_stmt::_78d6f7d99a7a21dc ()\n\nNo symbol table info available.\n#25 0x0809d748 in middle::trans::trans_block_dps::_6b45456deb3d2743 ()\n\nNo symbol table info available.\n#26 0x080a03a1 in middle::trans::trans_closure::_157a4b8b7e149afc ()\n\nNo symbol table info available.\n#27 0x080a06aa in middle::trans::trans_fn::_c13b574235a3f772 ()\n\nNo symbol table info available.\n#28 0x080a393d in middle::trans::trans_item::_17b2e5b3f8c5fc17 ()\n\nNo symbol table info available.\n#29 0x080b0648 in middle::trans::trans_crate::_e559e0d9dd4f0325 ()\n\nNo symbol table info available.\n#30 0x082926b4 in driver::rustc::compile_input::thunk8830 ()\n\nNo symbol table info available.\n#31 0x0822f2b9 in driver::rustc::time::_b49018b3a488d239 ()\n\nNo symbol table info available.\n#32 0x082315cd in driver::rustc::compile_input::_d938b147968b6d74 ()\n\nNo symbol table info available.\n#33 0x0823a81f in driver::rustc::main::_d03dcf38abeac4ba ()\n\nNo symbol table info available.\n#34 0x0823aeff in _rust_main ()\n\nNo symbol table info available.\n#35 0xf6eb2a04 in task_start_wrapper (a=0xf6ba7018) at ./src/rt/rust_task.cpp:175\n\n```\n    task = 0x832bc00\n    rval = 42\n    failed = false\n    env = <optimized out>\n```\n#36 0xdeadbeef in ?? ()\n\nNo symbol table info available.\n#37 0xf6ba7018 in ?? ()\n\nNo symbol table info available.\nBacktrace stopped: previous frame inner to this frame (corrupt stack?)\n", "closed_by": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1153/timeline", "performed_via_github_app": null, "state_reason": "completed"}