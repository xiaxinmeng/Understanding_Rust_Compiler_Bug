{"url": "https://api.github.com/repos/rust-lang/rust/issues/47366", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/47366/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/47366/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/47366/events", "html_url": "https://github.com/rust-lang/rust/issues/47366", "id": 287930460, "node_id": "MDU6SXNzdWUyODc5MzA0NjA=", "number": 47366, "title": "tracking issue for bugs fixed by the MIR borrow checker or NLL", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 67766349, "node_id": "MDU6TGFiZWw2Nzc2NjM0OQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-mentor", "name": "E-mentor", "color": "02E10C", "default": false, "description": "Call for participation: This issue has a mentor. Use RustcContributor::new on Zulip for discussion."}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 604489711, "node_id": "MDU6TGFiZWw2MDQ0ODk3MTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-NLL", "name": "A-NLL", "color": "f7e101", "default": false, "description": "Area: Non Lexical Lifetimes (NLL)"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 867483626, "node_id": "MDU6TGFiZWw4Njc0ODM2MjY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/NLL-fixed-by-NLL", "name": "NLL-fixed-by-NLL", "color": "f799ea", "default": false, "description": "Bugs fixed, but only when NLL is enabled."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-01-11T21:29:40Z", "updated_at": "2019-09-27T00:15:36Z", "closed_at": "2019-09-27T00:15:36Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Part of: https://github.com/rust-lang/rust/issues/43234\r\n\r\nThe MIR-based borrow checker used by NLL fixes a number of bugs in the existing AST-based borrow checker. Our plan for these bugs is to fix them by transitioning to the MIR-based borrow checker. In the meantime, we wish to add tests that show that the bugs are fixed with NLL, and then close the bugs (so they don't clutter up the issue tracker).  This issue tracks the set of such bugs and gives instructions for how to proceed.\r\n\r\n## Bugs fixed by MIR\r\n\r\nAll these bugs are **confirmed as fixed**; the checkmark indicates that a PR with a test is enqueued or landed.\r\n\r\n- [x] https://github.com/rust-lang/rust/issues/46557\r\n- [x] https://github.com/rust-lang/rust/issues/38899\r\n- [x] #45045 (using example from [this comment](https://github.com/rust-lang/rust/issues/45045#issuecomment-356953507))\r\n- [x] https://github.com/rust-lang/rust/issues/46314\r\n- [x] #47053  (PR https://github.com/rust-lang/rust/pull/47425)\r\n- [x] https://github.com/rust-lang/rust/issues/47366 (examples from [this comment])\r\n- [x] https://github.com/rust-lang/rust/issues/29149 (fix in https://github.com/rust-lang/rust/pull/47877)\r\n- [x] #16223 \r\n- [x] #48238 (and specifically [this reduction](https://github.com/rust-lang/rust/issues/48238#issuecomment-366048269))\r\n- [x] https://github.com/rust-lang/rust/issues/45157\r\n- [x] https://github.com/rust-lang/rust/issues/46314 (hygiene interaction)\r\n- [x] https://github.com/rust-lang/rust/issues/27868 -- evaluation order and operators\r\n- [x] https://github.com/rust-lang/rust/issues/16223 -- incorrect partially moved value error check\r\n\r\n## Procedure\r\n\r\n- First, if you wish, add yourself to the [list of participants for the WG-compiler-nll working group](https://docs.google.com/spreadsheets/d/1vymoSTIzepS6PVidHJWsMOVl12aSXixMev0LBLKLykY/edit?usp=sharing).\r\n    - This will help us to find people who might like to help later!\r\n- Create a regression test in `src/test/ui/nll/`\r\n    - The name can be `issue-XXX.rs`, though giving a more descriptive name is also good\r\n    - The file should include a comment saying `// Regression test for #XXX` however to ease searching later\r\n- This test should include the error from the bug along with the following header material:\r\n    - Rust license\r\n    - `#![feature(nll)]` at the top\r\n    - comments like `//~ ERROR` for the errors, or whatever is needed for test harness to pass\r\n- Run `./x.py test --stage 1 src/test/ui --test-args nll`, this will test all the nll tests (including yours)\r\n- Presuming that passes, open a PR! Otherwise, stop in at the [WG-compiler-nll gitter channel](https://gitter.im/rust-impl-period/WG-compiler-nll)\r\n    - Put `r? @nikomatsakis` in the PR summary \r\n\r\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/47366/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/47366/timeline", "performed_via_github_app": null, "state_reason": "completed"}