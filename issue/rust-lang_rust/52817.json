{"url": "https://api.github.com/repos/rust-lang/rust/issues/52817", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/52817/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/52817/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/52817/events", "html_url": "https://github.com/rust-lang/rust/issues/52817", "id": 345494289, "node_id": "MDU6SXNzdWUzNDU0OTQyODk=", "number": 52817, "title": "Attribute to set edition: #![edition = \"2018\"]", "user": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 930400927, "node_id": "MDU6TGFiZWw5MzA0MDA5Mjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-rust-2018-preview", "name": "A-rust-2018-preview", "color": "f7e101", "default": false, "description": "Area: The 2018 edition preview"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2018-07-29T02:07:38Z", "updated_at": "2018-07-29T02:26:53Z", "closed_at": "2018-07-29T02:26:52Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In https://github.com/bitflags/bitflags/pull/166 working on testing bitflags's support for 2018-style macro imports, I found that it would be very helpful to be able to control the choice of edition at the granularity of individual test files. My understanding is that top-level test files are compiled totally independently so I should be able to use different editions across different files. Cargo's `edition` setting does not provide the granularity needed.\r\n\r\nOne possible way to do this would be an `#![edition = \"...\"]` attribute, similar to the existing `#![crate_type = \"...\"]` attribute which also controls something that would ordinarily be passed in the compiler invocation.\r\n\r\n```rust\r\n#![edition = \"2018\"]\r\n#![feature(use_extern_macros)]\r\n\r\nuse bitflags::bitflags;\r\n\r\nbitflags! {\r\n    struct Flags: u32 {\r\n        const A = 0b00000001;\r\n        const B = 0b00000010;\r\n        const C = 0b00000100;\r\n        const ABC = Self::A.bits | Self::B.bits | Self::C.bits;\r\n    }\r\n}\r\n```\r\n\r\n@Manishearth as the implementor of #48014 and #48801 may know whether this is feasible. Are there parsing differences between the editions that would absolutely require passing edition in the compiler invocation rather than picking it up from an attribute?", "closed_by": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/52817/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/52817/timeline", "performed_via_github_app": null, "state_reason": "completed"}