{"url": "https://api.github.com/repos/rust-lang/rust/issues/85836", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/85836/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/85836/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/85836/events", "html_url": "https://github.com/rust-lang/rust/issues/85836", "id": 906828763, "node_id": "MDU6SXNzdWU5MDY4Mjg3NjM=", "number": 85836, "title": "dead-code optimize `if const { expr }` even in opt-level=0", "user": {"login": "scottmcm", "id": 18526288, "node_id": "MDQ6VXNlcjE4NTI2Mjg4", "avatar_url": "https://avatars.githubusercontent.com/u/18526288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scottmcm", "html_url": "https://github.com/scottmcm", "followers_url": "https://api.github.com/users/scottmcm/followers", "following_url": "https://api.github.com/users/scottmcm/following{/other_user}", "gists_url": "https://api.github.com/users/scottmcm/gists{/gist_id}", "starred_url": "https://api.github.com/users/scottmcm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scottmcm/subscriptions", "organizations_url": "https://api.github.com/users/scottmcm/orgs", "repos_url": "https://api.github.com/users/scottmcm/repos", "events_url": "https://api.github.com/users/scottmcm/events{/privacy}", "received_events_url": "https://api.github.com/users/scottmcm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 2306075829, "node_id": "MDU6TGFiZWwyMzA2MDc1ODI5", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-inline_const", "name": "F-inline_const", "color": "f9c0cc", "default": false, "description": "Inline constants (aka: const blocks, const expressions, anonymous constants)"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-05-30T17:40:42Z", "updated_at": "2022-08-22T12:09:59Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "`inline_const` tracking issue: https://github.com/rust-lang/rust/issues/76001\r\n\r\nInspired by @oli-obk's comment in https://github.com/rust-lang/rust/pull/85828#discussion_r642046617\r\n\r\nFor things like `if const { expr } { 0 } else { do something complex }` it'd be nice to not have to even give LLVM the code for the else branch to have to emit.  Ought to save time and binary size.\r\n\r\nTentatively marked mir-opt, since we presumably still need to make the MIR for it, in order to borrow-check and such the unreachable code.  But might need to be codegen-time instead to pick up on monomorphized inline constants.\r\n\r\nHopefully should be doable relatively easily when the const is an inline const, since that forces const folding already, and thus there should just be a `const true` in the MIR.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/85836/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 2}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/85836/timeline", "performed_via_github_app": null, "state_reason": null}