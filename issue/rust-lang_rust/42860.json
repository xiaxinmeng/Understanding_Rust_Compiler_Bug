{"url": "https://api.github.com/repos/rust-lang/rust/issues/42860", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/42860/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/42860/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/42860/events", "html_url": "https://github.com/rust-lang/rust/issues/42860", "id": 238167961, "node_id": "MDU6SXNzdWUyMzgxNjc5NjE=", "number": 42860, "title": "Implementations of formatting traits for signed integers can be ambiguous", "user": {"login": "Enet4", "id": 4738426, "node_id": "MDQ6VXNlcjQ3Mzg0MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4738426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Enet4", "html_url": "https://github.com/Enet4", "followers_url": "https://api.github.com/users/Enet4/followers", "following_url": "https://api.github.com/users/Enet4/following{/other_user}", "gists_url": "https://api.github.com/users/Enet4/gists{/gist_id}", "starred_url": "https://api.github.com/users/Enet4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Enet4/subscriptions", "organizations_url": "https://api.github.com/users/Enet4/orgs", "repos_url": "https://api.github.com/users/Enet4/repos", "events_url": "https://api.github.com/users/Enet4/events{/privacy}", "received_events_url": "https://api.github.com/users/Enet4/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2017-06-23T14:58:56Z", "updated_at": "2018-03-11T13:04:21Z", "closed_at": "2018-03-11T13:04:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I was recently formatting a signed integer primitive to hexadecimal using the standard formatter API, hoping that the result would be aware of the value's sign. It turns out that the implementations of `UpperHex` (and relatives such as `LowerHex` and `Binary`) for signed integers simply treat these numbers as unsigned (or just a sequence of bits).\r\n\r\n```\r\nprintln!(\"{:X}\", -15i32);   // prints \"FFFFFFF1\",   expected \"-F\"\r\n```\r\n\r\nI posted this concern first as an [SO question](https://stackoverflow.com/q/44711012/1233251). A way around this is to make a newtype with another formatting implementation.\r\n\r\nI can make arguments on both sides whether it should (or not) behave like this, but what actually concerns me most is that there seems to be no mention of this behaviour in the documentation. It appears that formatting trait implementations do not have to abide to a value's sign, but then the fact that a negative integer is treated as an unsigned number for formatting purposes can be unexpected for some people, especially when the docs do not clarify this situation. \r\n\r\nTo sum up: should we improve the documentation regarding what makes a valid formatting trait implementation? Should we also (or just) document further their implementations for integers in particular? I am willing to collaborate with the necessary changes one we're clear about what should be improved.", "closed_by": {"login": "Enet4", "id": 4738426, "node_id": "MDQ6VXNlcjQ3Mzg0MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4738426?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Enet4", "html_url": "https://github.com/Enet4", "followers_url": "https://api.github.com/users/Enet4/followers", "following_url": "https://api.github.com/users/Enet4/following{/other_user}", "gists_url": "https://api.github.com/users/Enet4/gists{/gist_id}", "starred_url": "https://api.github.com/users/Enet4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Enet4/subscriptions", "organizations_url": "https://api.github.com/users/Enet4/orgs", "repos_url": "https://api.github.com/users/Enet4/repos", "events_url": "https://api.github.com/users/Enet4/events{/privacy}", "received_events_url": "https://api.github.com/users/Enet4/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/42860/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/42860/timeline", "performed_via_github_app": null, "state_reason": "completed"}