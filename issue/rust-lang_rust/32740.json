{"url": "https://api.github.com/repos/rust-lang/rust/issues/32740", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/32740/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/32740/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/32740/events", "html_url": "https://github.com/rust-lang/rust/issues/32740", "id": 145926640, "node_id": "MDU6SXNzdWUxNDU5MjY2NDA=", "number": 32740, "title": "Can't compile the nix library since da66431", "user": {"login": "JohanLorenzo", "id": 5907366, "node_id": "MDQ6VXNlcjU5MDczNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5907366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohanLorenzo", "html_url": "https://github.com/JohanLorenzo", "followers_url": "https://api.github.com/users/JohanLorenzo/followers", "following_url": "https://api.github.com/users/JohanLorenzo/following{/other_user}", "gists_url": "https://api.github.com/users/JohanLorenzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohanLorenzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohanLorenzo/subscriptions", "organizations_url": "https://api.github.com/users/JohanLorenzo/orgs", "repos_url": "https://api.github.com/users/JohanLorenzo/repos", "events_url": "https://api.github.com/users/JohanLorenzo/events{/privacy}", "received_events_url": "https://api.github.com/users/JohanLorenzo/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2016-04-05T08:44:41Z", "updated_at": "2016-04-05T17:47:46Z", "closed_at": "2016-04-05T17:47:46Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I wish I could have a better title :neutral_face: \n\nA few days ago, I came across a compiler issue when I tried to compile [nix](https://github.com/nix-rust/nix).\n# Steps to reproduce\n1. `git clone https://github.com/nix-rust/nix.git`\n2. `cd nix`\n3. `cargo build`\n# Results\n\n```\nrustc: /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/llvm/include/llvm/Support/Casting.h:237: typename llvm::cast_retty<X, Y*>::ret_type llvm::cast(Y*) [with X = llvm::Function; Y = llvm::Value; typename llvm::cast_retty<X, Y*>::ret_type = llvm::Function*]: Assertion `isa<X>(Val) && \"cast<Ty>() argument of incompatible type!\"' failed.\nerror: Could not compile `nix`.\n```\n\nhttps://github.com/nix-rust/nix/issues/339 was filed to track it. With @pnkfelix 's help, I got [some debug traces](https://gist.github.com/JohanLorenzo/18826350c7a2a9fe7156c196e26dfae0#file-nix_compile_debug-log). However, it didn't really help knowing which function of nix was impacted. \n# Regression window\n\n[A bisection](https://gist.github.com/JohanLorenzo/18826350c7a2a9fe7156c196e26dfae0#file-bisect-log) narrowed down the issue to #32080, and more precisely [these commits](https://github.com/rust-lang/rust/compare/b918e37eb3e393c5a5b0408430e146c0b66ec7ed...da66431d06b961efd323f25978964df54d44d3c4). I have not been able to bisect down further, because none of these commits compile on my machine.\n# Investigation\n\nIn the meantime, @pnkfelix found the function likely impacted. You can see the results of [his investigation](https://github.com/nix-rust/nix/issues/339#issuecomment-205407123).\n\n@eddyb, what information would you think we need to isolate the problem?\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/32740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/32740/timeline", "performed_via_github_app": null, "state_reason": "completed"}