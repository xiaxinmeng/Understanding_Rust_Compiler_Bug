{"url": "https://api.github.com/repos/rust-lang/rust/issues/100159", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/100159/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/100159/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/100159/events", "html_url": "https://github.com/rust-lang/rust/issues/100159", "id": 1329392365, "node_id": "I_kwDOAAsO6M5PPOrt", "number": 100159, "title": "Rust is difficult to install on distros where /tmp is noexec.", "user": {"login": "EvanCarroll", "id": 19922, "node_id": "MDQ6VXNlcjE5OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/19922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EvanCarroll", "html_url": "https://github.com/EvanCarroll", "followers_url": "https://api.github.com/users/EvanCarroll/followers", "following_url": "https://api.github.com/users/EvanCarroll/following{/other_user}", "gists_url": "https://api.github.com/users/EvanCarroll/gists{/gist_id}", "starred_url": "https://api.github.com/users/EvanCarroll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EvanCarroll/subscriptions", "organizations_url": "https://api.github.com/users/EvanCarroll/orgs", "repos_url": "https://api.github.com/users/EvanCarroll/repos", "events_url": "https://api.github.com/users/EvanCarroll/events{/privacy}", "received_events_url": "https://api.github.com/users/EvanCarroll/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-05T03:16:17Z", "updated_at": "2022-08-05T03:53:33Z", "closed_at": "2022-08-05T03:53:33Z", "author_association": "NONE", "active_lock_reason": null, "body": "The prescribed method to install Rust (from the [Rust install doc here is](https://www.rust-lang.org/tools/install)) is,\r\n\r\n```sh\r\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\r\n```\r\n\r\nThis plain doesn't work for me, and that's understandable.\r\n\r\n```text\r\n$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\r\n\r\ninfo: downloading installer\r\nCannot execute /tmp/tmp.cIvsb8taML/rustup-init (likely because of mounting /tmp as noexec).\r\nPlease copy the file to a location where you can execute binaries and run ./rustup-init.\r\n```\r\n\r\nIt's right in the diagnosis too,\r\n\r\n```text\r\n$ mount | grep -i \"/tmp\"\r\n/usr/tmpDSK on /tmp type ext4 (rw,nosuid,noexec,relatime,discard) \r\n```\r\n\r\nHowever, if I download the same script using `-o rust-install.sh` to `curl`\r\n\r\n```sh\r\ncurl --proto '=https' --tlsv1.2 -sSf -o rust-install.sh https://sh.rustup.rs\r\n```\r\n\r\nAnd then I try to run it (`sh ./rust-install.sh`) I would expect it to give me an argument to set the download directory. It accepts no arguments. Internally it just uses `mktemp`. Two better solutions would be,\r\n\r\n1. allow the user to set the download directory as an argument\r\n2. allow the user to set the path the downloader saves too as an argument.\r\n\r\nWhat I'm trying to do create a `cloud-init` script that installs rust nightly for my sandbox config. If I try to set up a sandbox on a machine with `noexec` on `/tmp`, what I have to do currently is parse out the location the downloader saved to from STDERR (in the above it's `/tmp/tmp.cIvsb8taML/rustup-init`) so I can copy it to a location that I can `chmod +x` it and then execute it. This is not ideal: it requires a lot more work to automate then _run this file with this argument_.", "closed_by": {"login": "EvanCarroll", "id": 19922, "node_id": "MDQ6VXNlcjE5OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/19922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EvanCarroll", "html_url": "https://github.com/EvanCarroll", "followers_url": "https://api.github.com/users/EvanCarroll/followers", "following_url": "https://api.github.com/users/EvanCarroll/following{/other_user}", "gists_url": "https://api.github.com/users/EvanCarroll/gists{/gist_id}", "starred_url": "https://api.github.com/users/EvanCarroll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EvanCarroll/subscriptions", "organizations_url": "https://api.github.com/users/EvanCarroll/orgs", "repos_url": "https://api.github.com/users/EvanCarroll/repos", "events_url": "https://api.github.com/users/EvanCarroll/events{/privacy}", "received_events_url": "https://api.github.com/users/EvanCarroll/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/100159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/100159/timeline", "performed_via_github_app": null, "state_reason": "completed"}