{"url": "https://api.github.com/repos/rust-lang/rust/issues/56076", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/56076/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/56076/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/56076/events", "html_url": "https://github.com/rust-lang/rust/issues/56076", "id": 382376565, "node_id": "MDU6SXNzdWUzODIzNzY1NjU=", "number": 56076, "title": "riscv32imac-unknown-none-elf target produces no code", "user": {"login": "fintelia", "id": 4943209, "node_id": "MDQ6VXNlcjQ5NDMyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4943209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fintelia", "html_url": "https://github.com/fintelia", "followers_url": "https://api.github.com/users/fintelia/followers", "following_url": "https://api.github.com/users/fintelia/following{/other_user}", "gists_url": "https://api.github.com/users/fintelia/gists{/gist_id}", "starred_url": "https://api.github.com/users/fintelia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fintelia/subscriptions", "organizations_url": "https://api.github.com/users/fintelia/orgs", "repos_url": "https://api.github.com/users/fintelia/repos", "events_url": "https://api.github.com/users/fintelia/events{/privacy}", "received_events_url": "https://api.github.com/users/fintelia/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2018-11-19T20:16:48Z", "updated_at": "2018-11-20T21:49:57Z", "closed_at": "2018-11-20T21:49:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I tried this code:\r\n\r\n```rust\r\n#![no_std]\r\n#![feature(lang_items)]\r\n#![feature(start)]\r\n#[lang = \"eh_personality\"] extern fn eh_personality() {}\r\n#[panic_handler] fn panic(_info: &::core::panic::PanicInfo) -> ! {loop {}}\r\n\r\n#[start]\r\nfn start(argc: isize, _argv: *const *const u8) -> isize {\r\n    argc + 12\r\n}\r\n```\r\nI expected Cargo to produce a simple binary containing a small about of RISC-V code. Instead, when I ran Cargo it returned no errors but produces a binary without any code in it at all. This is evidenced by the fact that `objdump -h` does not display a `.text` section and `objdump -d` does not show any disassembly.\r\n\r\n```\r\njonathan:~/git/svpn$ cargo build --verbose --target=riscv32imac-unknown-none-elf\r\n   Compiling svpn v0.1.0 (/home/jonathan/git/svpn)\r\n     Running `rustc --crate-name svpn src/main.rs --color always --crate-type bin --emit=dep-info,link -C panic=abort -C debuginfo=2 -C metadata=99a3c44c34187acd -C extra-filename=-99a3c44c34187acd --out-dir /home/jonathan/git/svpn/target/riscv32imac-unknown-none-elf/debug/deps --target riscv32imac-unknown-none-elf -C incremental=/home/jonathan/git/svpn/target/riscv32imac-unknown-none-elf/debug/incremental -L dependency=/home/jonathan/git/svpn/target/riscv32imac-unknown-none-elf/debug/deps -L dependency=/home/jonathan/git/svpn/target/debug/deps`\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.12s\r\n```\r\n```\r\njonathan:~/git/svpn$ riscv32-unknown-elf-objdump -h target/riscv32imac-unknown-none-elf/debug/svpn\r\n\r\ntarget/riscv32imac-unknown-none-elf/debug/svpn:     file format elf32-littleriscv\r\n\r\nSections:\r\nIdx Name          Size      VMA       LMA       File off  Algn\r\n  0 .debug_str    00027ad1  00000000  00000000  00000094  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  1 .debug_abbrev 00000582  00000000  00000000  00027b65  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  2 .debug_info   0001f105  00000000  00000000  000280e7  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  3 .debug_ranges 0000bc30  00000000  00000000  000471ec  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  4 .debug_macinfo 00000003  00000000  00000000  00052e1c  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  5 .debug_pubnames 0000562b  00000000  00000000  00052e1f  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  6 .debug_pubtypes 00001960  00000000  00000000  0005844a  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  7 .debug_line   0001bd6e  00000000  00000000  00059daa  2**0\r\n                  CONTENTS, READONLY, DEBUGGING\r\n  8 .comment      00000012  00000000  00000000  00075b18  2**0\r\n                  CONTENTS, READONLY\r\n```\r\n```\r\njonathan:~/git/svpn$ riscv32-unknown-elf-objdump -d target/riscv32imac-unknown-none-elf/debug/svpn\r\n\r\ntarget/riscv32imac-unknown-none-elf/debug/svpn:     file format elf32-littleriscv\r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n\r\n```\r\nrustc 1.32.0-nightly (13c943992 2018-11-18)\r\nbinary: rustc\r\ncommit-hash: 13c9439925797cd7a65c917d047c07a500d9bfe6\r\ncommit-date: 2018-11-18\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.32.0-nightly\r\nLLVM version: 8.0\r\n```", "closed_by": {"login": "fintelia", "id": 4943209, "node_id": "MDQ6VXNlcjQ5NDMyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4943209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fintelia", "html_url": "https://github.com/fintelia", "followers_url": "https://api.github.com/users/fintelia/followers", "following_url": "https://api.github.com/users/fintelia/following{/other_user}", "gists_url": "https://api.github.com/users/fintelia/gists{/gist_id}", "starred_url": "https://api.github.com/users/fintelia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fintelia/subscriptions", "organizations_url": "https://api.github.com/users/fintelia/orgs", "repos_url": "https://api.github.com/users/fintelia/repos", "events_url": "https://api.github.com/users/fintelia/events{/privacy}", "received_events_url": "https://api.github.com/users/fintelia/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/56076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/56076/timeline", "performed_via_github_app": null, "state_reason": "completed"}