{"url": "https://api.github.com/repos/rust-lang/rust/issues/54496", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/54496/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/54496/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/54496/events", "html_url": "https://github.com/rust-lang/rust/issues/54496", "id": 362912364, "node_id": "MDU6SXNzdWUzNjI5MTIzNjQ=", "number": 54496, "title": "Why must the lifetime of A be longer than 'a for Box<Fn<A, Output = ()> + 'a>?", "user": {"login": "tuxzz", "id": 5357765, "node_id": "MDQ6VXNlcjUzNTc3NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5357765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuxzz", "html_url": "https://github.com/tuxzz", "followers_url": "https://api.github.com/users/tuxzz/followers", "following_url": "https://api.github.com/users/tuxzz/following{/other_user}", "gists_url": "https://api.github.com/users/tuxzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuxzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuxzz/subscriptions", "organizations_url": "https://api.github.com/users/tuxzz/orgs", "repos_url": "https://api.github.com/users/tuxzz/repos", "events_url": "https://api.github.com/users/tuxzz/events{/privacy}", "received_events_url": "https://api.github.com/users/tuxzz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-09-23T04:21:26Z", "updated_at": "2018-09-23T09:25:46Z", "closed_at": "2018-09-23T09:25:45Z", "author_association": "NONE", "active_lock_reason": null, "body": "In [this code][1], why must the lifetime of `A` be longer than `'a` for `Box<Fn<A, Output = ()> + 'a>`?  \r\n\r\n    #![feature(unboxed_closures)]\r\n    \r\n    trait Tt {}\r\n    \r\n    struct S<'a, A: Copy + 'a> {\r\n        x: Box<Fn<A, Output = ()> + 'a>,\r\n    }\r\n    \r\n    fn add<'a, A: Copy + 'a>(x: Box<Fn<A, Output = ()> + 'a>) -> Box<dyn Tt + 'a> {\r\n        Box::new(S::<'a, A> { x })\r\n    }\r\n    \r\n    impl<'a, A: Copy + 'a> Tt for S<'a, A> {}\r\n\r\n\r\n`A` is the argument list of `Fn<A, Output = ()>`. Why isn't the lifetime of `A` the *duration of calling `Fn<A, Output = ()>`* but instead *longer than `Fn<A, Output = ()>`*?\r\n\r\nI think the lifetime of `A` shouldn't be affected by the lifetime of `Fn<A, Output = ()>` but instead the call time of `Fn<A, Output = ()>` . But the compiler requires the lifetime of `A` must be longer than `Fn<A, Output = ()>`, aka `'a`. Why?\r\n\r\n[Mirror Issue on StackOverflow](https://stackoverflow.com/questions/52458068/why-must-the-lifetime-of-a-be-longer-than-a-for-boxfna-output-a)\r\n\r\n  [1]: https://play.rust-lang.org/?gist=324f93588d69f97985f7d301f24858ae&version=nightly&mode=debug&edition=2015", "closed_by": {"login": "tuxzz", "id": 5357765, "node_id": "MDQ6VXNlcjUzNTc3NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5357765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tuxzz", "html_url": "https://github.com/tuxzz", "followers_url": "https://api.github.com/users/tuxzz/followers", "following_url": "https://api.github.com/users/tuxzz/following{/other_user}", "gists_url": "https://api.github.com/users/tuxzz/gists{/gist_id}", "starred_url": "https://api.github.com/users/tuxzz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tuxzz/subscriptions", "organizations_url": "https://api.github.com/users/tuxzz/orgs", "repos_url": "https://api.github.com/users/tuxzz/repos", "events_url": "https://api.github.com/users/tuxzz/events{/privacy}", "received_events_url": "https://api.github.com/users/tuxzz/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/54496/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/54496/timeline", "performed_via_github_app": null, "state_reason": "completed"}