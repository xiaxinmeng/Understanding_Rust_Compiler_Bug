{"url": "https://api.github.com/repos/rust-lang/rust/issues/16763", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16763/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16763/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16763/events", "html_url": "https://github.com/rust-lang/rust/issues/16763", "id": 41177032, "node_id": "MDU6SXNzdWU0MTE3NzAzMg==", "number": 16763, "title": "[ICE] assertion failed: `(left == right) && (right == left)` (left: `11`, right: `0`)", "user": {"login": "Bastacyclop", "id": 4070553, "node_id": "MDQ6VXNlcjQwNzA1NTM=", "avatar_url": "https://avatars.githubusercontent.com/u/4070553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bastacyclop", "html_url": "https://github.com/Bastacyclop", "followers_url": "https://api.github.com/users/Bastacyclop/followers", "following_url": "https://api.github.com/users/Bastacyclop/following{/other_user}", "gists_url": "https://api.github.com/users/Bastacyclop/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bastacyclop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bastacyclop/subscriptions", "organizations_url": "https://api.github.com/users/Bastacyclop/orgs", "repos_url": "https://api.github.com/users/Bastacyclop/repos", "events_url": "https://api.github.com/users/Bastacyclop/events{/privacy}", "received_events_url": "https://api.github.com/users/Bastacyclop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2014-08-26T14:19:05Z", "updated_at": "2017-03-08T21:51:51Z", "closed_at": "2017-03-08T21:51:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have no idea where is the problem coming from, so I have no minimal example.\nIt happened with a Box2D binding I'm currently working on.\nThe binding is compiling fine but not the example:\n\n```\n[basta@manjaro rust_box2d]$ RUST_BACKTRACE=1 cargo test\nunused manifest key: package.license\n   Compiling rust_box2d v0.2.0 (file:///home/basta/Projects/rust_box2d)\n/home/basta/Projects/rust_box2d/examples/example.rs:5:10: 5:15 warning: unused import, #[warn(unused_imports)] on by default\n/home/basta/Projects/rust_box2d/examples/example.rs:5 use b2::{Owned, Ref, RefMut};\n                                                               ^~~~~\n/home/basta/Projects/rust_box2d/examples/example.rs:5:17: 5:20 warning: unused import, #[warn(unused_imports)] on by default\n/home/basta/Projects/rust_box2d/examples/example.rs:5 use b2::{Owned, Ref, RefMut};\n                                                                      ^~~\n/home/basta/Projects/rust_box2d/examples/example.rs:5:22: 5:28 warning: unused import, #[warn(unused_imports)] on by default\n/home/basta/Projects/rust_box2d/examples/example.rs:5 use b2::{Owned, Ref, RefMut};\n                                                                           ^~~~~~\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'assertion failed: `(left == right) && (right == left)` (left: `11`, right: `0`)', /home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/librustc/middle/trans/base.rs:517\n\nstack backtrace:\n   1:     0x7f2ce9982770 - rt::backtrace::imp::write::h8cd99dff1e402ef9UZq\n   2:     0x7f2ce9985920 - failure::on_fail::ha41409a33267b3c2Blr\n   3:     0x7f2cea150510 - unwind::begin_unwind_inner::h8c1fbf5424a0d801Zie\n   4:     0x7f2cea150210 - unwind::begin_unwind_fmt::h7d1a8b26e8f4f235pge\n   5:     0x7f2cea8f3bf0 - middle::trans::base::get_res_dtor::haffd43b5c98b1ff2fvb\n   6:     0x7f2cea8f38b0 - middle::trans::glue::trans_struct_drop::ha623b901491bd7beDVY\n   7:     0x7f2cea8f3840 - middle::trans::glue::trans_struct_drop_flag::closure.114447\n   8:     0x7f2cea8f3630 - middle::trans::base::with_cond::h5f39b86e2535fff7Bnc\n   9:     0x7f2cea8f1470 - middle::trans::glue::make_drop_glue::as_closure.114413\n  10:     0x7f2cea8f0450 - middle::trans::glue::make_generic_glue::h3252634c1ae5afcenoZ\n  11:     0x7f2cea8eeaf0 - middle::trans::glue::get_drop_glue::h8f3e6346e22e028dDLY\n  12:     0x7f2cea8ee9d0 - middle::trans::glue::drop_ty::haf109e2809857511hJY\n  13:     0x7f2cea9fe920 - middle::trans::cleanup::DropValue.Cleanup::trans::h59af69c9d899b958Fpw\n  14:     0x7f2cea9fc0f0 - middle::trans::cleanup::FunctionContext<'a>.CleanupHelperMethods<'a>::trans_cleanups_to_exit_scope::h0a28401680f9217b3Uv\n  15:     0x7f2cea9ffe80 - middle::trans::cleanup::FunctionContext<'a>.CleanupHelperMethods<'a>::get_or_create_landing_pad::h5f72f4eb3dad1f31Tbw\n  16:     0x7f2cea978720 - middle::trans::cleanup::FunctionContext<'a>.CleanupMethods<'a>::get_landing_pad::h915a0bc2fa152c11PHv\n  17:     0x7f2cea8f5430 - middle::trans::base::invoke::h835930d70a255d9bC2b\n  18:     0x7f2cea8e2410 - middle::trans::callee::trans_call_inner::hd5b053a59a029edbhZ0\n  19:     0x7f2cea924960 - middle::trans::expr::trans_overloaded_op::h2c12d4646782278f7O3\n  20:     0x7f2cea92ff20 - middle::trans::expr::deref_once::h89a80c5bee3ba998ih4\n  21:     0x7f2cea8da700 - middle::trans::expr::trans::h9fde924695247345yP1\n  22:     0x7f2cea90ffe0 - middle::trans::callee::trans_args::h94aa490682ec9488ek1\n  23:     0x7f2cea8e2410 - middle::trans::callee::trans_call_inner::hd5b053a59a029edbhZ0\n  24:     0x7f2cea90ab00 - middle::trans::callee::trans_method_call::h09857d1ff4ef116cvU0\n  25:     0x7f2cea9184f0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hf838e4d6ac48b5a0gG2\n  26:     0x7f2cea8d8ff0 - middle::trans::expr::trans_into::h649653a95c0f1ba5CL1\n  27:     0x7f2cea9184f0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hf838e4d6ac48b5a0gG2\n  28:     0x7f2cea917700 - middle::trans::expr::trans_unadjusted::hc3387fb48b9faca2781\n  29:     0x7f2cea8da700 - middle::trans::expr::trans::h9fde924695247345yP1\n  30:     0x7f2cea8d8eb0 - middle::trans::expr::trans_to_lvalue::h275612bee7c33b29971\n  31:     0x7f2cea922c80 - middle::trans::expr::trans_addr_of::hb328313e7153cbaa6w3\n  32:     0x7f2cea917700 - middle::trans::expr::trans_unadjusted::hc3387fb48b9faca2781\n  33:     0x7f2cea8d8ff0 - middle::trans::expr::trans_into::h649653a95c0f1ba5CL1\n  34:     0x7f2cea92b310 - middle::trans::expr::trans_adt::hda12d7a3d0f04bafBg3\n  35:     0x7f2cea9184f0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hf838e4d6ac48b5a0gG2\n  36:     0x7f2cea917700 - middle::trans::expr::trans_unadjusted::hc3387fb48b9faca2781\n  37:     0x7f2cea8da700 - middle::trans::expr::trans::h9fde924695247345yP1\n  38:     0x7f2cea8d8eb0 - middle::trans::expr::trans_to_lvalue::h275612bee7c33b29971\n  39:     0x7f2cea9299d0 - middle::trans::_match::trans_match::h288aefea821abbe87tg\n  40:     0x7f2cea9184f0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hf838e4d6ac48b5a0gG2\n  41:     0x7f2cea8d8ff0 - middle::trans::expr::trans_into::h649653a95c0f1ba5CL1\n  42:     0x7f2cea8d9580 - middle::trans::controlflow::trans_block::h64bf3c764c6ae1b0g4X\n  43:     0x7f2cea9184f0 - middle::trans::expr::trans_rvalue_dps_unadjusted::hf838e4d6ac48b5a0gG2\n  44:     0x7f2cea8d8ff0 - middle::trans::expr::trans_into::h649653a95c0f1ba5CL1\n  45:     0x7f2cea8d84f0 - middle::trans::controlflow::trans_stmt_semi::ha1fb99ce3edb0c48m3X\n  46:     0x7f2cea8d7c20 - middle::trans::controlflow::trans_stmt::h2f04ce0d083156615YX\n  47:     0x7f2cea8d9580 - middle::trans::controlflow::trans_block::h64bf3c764c6ae1b0g4X\n  48:     0x7f2cea981580 - middle::trans::base::trans_closure::h98df0502771bceb0Pcd\n  49:     0x7f2cea8cad10 - middle::trans::base::trans_fn::h9827ee2f1991a21dCod\n  50:     0x7f2cea8c6300 - middle::trans::base::trans_item::h6eac98275cebe034CGd\n  51:     0x7f2cea98bc10 - middle::trans::base::trans_crate::h5cb30c85f982b3b7cBe\n  52:     0x7f2cead51570 - driver::driver::phase_4_translate_to_llvm::h7a29ae2a079bac6cf6w\n  53:     0x7f2cead48850 - driver::driver::compile_input::h4c4e2d8a00ea2981GIw\n  54:     0x7f2ceaddc920 - driver::run_compiler::h5959ab20bfeb7861zfA\n  55:     0x7f2ceaddc830 - driver::main_args::closure.137251\n  56:     0x7f2ceadee700 - task::TaskBuilder<S>::try_future::closure.138371\n  57:     0x7f2ceadee500 - task::TaskBuilder<S>::spawn_internal::closure.138348\n  58:     0x7f2ceb8125f0 - task::spawn_opts::closure.8365\n  59:     0x7f2cea1a8a90 - rust_try_inner\n  60:     0x7f2cea1a8a80 - rust_try\n  61:     0x7f2cea14db80 - unwind::try::hcf2c1555445335c8f7d\n  62:     0x7f2cea14d920 - task::Task::run::h03e40729a1df1ac2zdd\n  63:     0x7f2ceb8123b0 - task::spawn_opts::closure.8311\n  64:     0x7f2cea14f760 - thread::thread_start::h194d23d584ee3229lCd\n  65:     0x7f2ce941a060 - start_thread\n  66:     0x7f2ce9e1d489 - __clone\n  67:                0x0 - <unknown>\n\nCould not compile `rust_box2d`.\n\nTo learn more, run the command again with --verbose.\n```\n\nThe source code is [here](https://gitlab.com/Bastacyclop/rust_box2d/blob/cbc7aa25707532de40e1c0f98107f2b6753346c3/examples/example.rs).\nThe library code is in the same repository.\n\nThe only hint I have is that my [previous version](https://gitlab.com/Bastacyclop/rust_box2d/blob/8c0e06ca9155c22c0ba267b26c20bddc26e26436/examples/example.rs) doesn't have this problem.\n\nThe main thing I changed between those versions is that instead of using `T`, `TPtr<'l>` and `TMutPtr<'l>` objects I introduced `Owned<T>`, `Ref<'l, T>` and `RefMut<'l, T>` objects. So probably the problem is related to these objects, which code is located at the library main file.\n\nEdit: the project is now hosted on https://github.com/Bastacyclop/rust_box2d\n", "closed_by": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16763/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16763/timeline", "performed_via_github_app": null, "state_reason": "completed"}