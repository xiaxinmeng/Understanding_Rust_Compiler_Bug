{"url": "https://api.github.com/repos/rust-lang/rust/issues/71668", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/71668/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/71668/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/71668/events", "html_url": "https://github.com/rust-lang/rust/issues/71668", "id": 609039409, "node_id": "MDU6SXNzdWU2MDkwMzk0MDk=", "number": 71668, "title": "Tracking Issue for \"unsafe blocks in unsafe fn\" (RFC #2585)", "user": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 89436934, "node_id": "MDU6TGFiZWw4OTQzNjkzNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/B-RFC-approved", "name": "B-RFC-approved", "color": "d304cb", "default": false, "description": "Approved by a merged RFC but not yet implemented."}, {"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 650846969, "node_id": "MDU6TGFiZWw2NTA4NDY5Njk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-tracking-issue", "name": "C-tracking-issue", "color": "f5f1fd", "default": false, "description": "Category: A tracking issue for an RFC or an unstable feature."}, {"id": 919710011, "node_id": "MDU6TGFiZWw5MTk3MTAwMTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/disposition-merge", "name": "disposition-merge", "color": "008800", "default": false, "description": "This issue / PR is in PFCP or FCP with a disposition to merge it."}, {"id": 923282386, "node_id": "MDU6TGFiZWw5MjMyODIzODY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/finished-final-comment-period", "name": "finished-final-comment-period", "color": "f9e189", "default": false, "description": "The final comment period is finished for this PR / Issue."}, {"id": 2024288103, "node_id": "MDU6TGFiZWwyMDI0Mjg4MTAz", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-unsafe-block-in-unsafe-fn", "name": "F-unsafe-block-in-unsafe-fn", "color": "f9c0cc", "default": false, "description": "RFC #2585"}, {"id": 3537211959, "node_id": "LA_kwDOAAsO6M7S1ZI3", "url": "https://api.github.com/repos/rust-lang/rust/labels/S-tracking-impl-incomplete", "name": "S-tracking-impl-incomplete", "color": "4682b4", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 89, "created_at": "2020-04-29T13:02:25Z", "updated_at": "2023-01-07T16:04:15Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "This is a tracking issue for the RFC \"unsafe blocks in unsafe fn\" (rust-lang/rfcs#2585).\r\nThe lint `unsafe_block_in_unsafe_fn` is stable, but the RFC proposes some further things we might want to do.\r\n\r\n### About tracking issues\r\n\r\nTracking issues are used to record the overall progress of implementation.\r\nThey are also uses as hubs connecting to other relevant issues, e.g., bugs or open design questions.\r\nA tracking issue is however *not* meant for large scale discussion, questions, or bug reports about a feature.\r\nInstead, open a dedicated issue for the specific matter and add the relevant feature gate label.\r\n\r\n### Steps\r\n\r\n- [x] Introduce an opt-in lint that, when enabled, causes unsafe blocks in unsafe functions to be considered required, and warns if they are absent when an unsafe operation is performed.\r\n- [x] Stabilization PR (#79208)\r\n- [ ] Include a suggestion with the lint that can insert required unsafe blocks. This could be as simple as adding a block across the entire function, though more granular insertion is probably better.\r\n- [ ] Adjust documentation to describe the (somewhat unusual) effect of the lint, and to describe the possibility that the lint will be enabled default ([see instructions on rustc-dev-guide][doc-guide])\r\n- [ ] Write a blog post describing the change, perhaps?\r\n\r\n[stabilization-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#stabilization-pr\r\n[doc-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#documentation-prs\r\n\r\n### Unresolved Questions\r\n\r\n* What is the timeline for adding the lint, and cranking up its default level?\r\n* Should the default level depend on the edition?\r\n* Should we ever make this deny-by-default or even a hard error, in a future edition?\r\n* Should we require `cargo fix` to be able to do *something* about this warning before making it even warn-by-default?  And how precise should it be?\r\n\r\n### Implementation history\r\n\r\n* Implemented in #71862\r\n* Stabilized in https://github.com/rust-lang/rust/pull/79208", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/71668/reactions", "total_count": 47, "+1": 20, "-1": 2, "laugh": 0, "hooray": 0, "confused": 0, "heart": 8, "rocket": 17, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/71668/timeline", "performed_via_github_app": null, "state_reason": null}