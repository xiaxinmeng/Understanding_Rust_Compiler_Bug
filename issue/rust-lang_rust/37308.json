{"url": "https://api.github.com/repos/rust-lang/rust/issues/37308", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37308/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37308/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37308/events", "html_url": "https://github.com/rust-lang/rust/issues/37308", "id": 184239843, "node_id": "MDU6SXNzdWUxODQyMzk4NDM=", "number": 37308, "title": "\"error: failed to load source for a dependency on ...\"", "user": {"login": "sjmackenzie", "id": 158321, "node_id": "MDQ6VXNlcjE1ODMyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/158321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjmackenzie", "html_url": "https://github.com/sjmackenzie", "followers_url": "https://api.github.com/users/sjmackenzie/followers", "following_url": "https://api.github.com/users/sjmackenzie/following{/other_user}", "gists_url": "https://api.github.com/users/sjmackenzie/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjmackenzie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjmackenzie/subscriptions", "organizations_url": "https://api.github.com/users/sjmackenzie/orgs", "repos_url": "https://api.github.com/users/sjmackenzie/repos", "events_url": "https://api.github.com/users/sjmackenzie/events{/privacy}", "received_events_url": "https://api.github.com/users/sjmackenzie/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-10-20T14:07:36Z", "updated_at": "2016-10-20T18:11:10Z", "closed_at": "2016-10-20T18:11:10Z", "author_association": "NONE", "active_lock_reason": null, "body": "## Issue description\n\nPlease note there is _no_ mention of git repositories in the `Cargo.toml`\nfile, which seems to be the common source of this error on nix.\n#### CARGO.TOML\n\n---\n\n```\n[package]\nname = \"component\"\nversion = \"0.1.0\"\nauthors = [\"test <test@test.com>\"]\n\n[lib]\nname = \"component\"\ncrate-type = [\"dylib\"]\n\n[dependencies]\ncapnp = \"*\"\nrustfbp = \"*\"\n```\n\n---\n#### CARGO.LOCK\n\n---\n\n```\n[root]\nname = \"nucleus_find_contract\"\nversion = \"0.1.0\"\ndependencies = [\n \"capnp 0.7.4 (registry+file:///dev/null)\",\n \"rustfbp 0.3.18 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"byteorder\"\nversion = \"0.4.2\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"capnp\"\nversion = \"0.7.4\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"byteorder 0.4.2 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"dtoa\"\nversion = \"0.2.2\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"itoa\"\nversion = \"0.1.1\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"kernel32-sys\"\nversion = \"0.2.2\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"winapi 0.2.8 (registry+file:///dev/null)\",\n \"winapi-build 0.1.1 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"lazy_static\"\nversion = \"0.2.1\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"libloading\"\nversion = \"0.2.4\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"kernel32-sys 0.2.2 (registry+file:///dev/null)\",\n \"lazy_static 0.2.1 (registry+file:///dev/null)\",\n \"target_build_utils 0.1.1 (registry+file:///dev/null)\",\n \"winapi 0.2.8 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"num-traits\"\nversion = \"0.1.36\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"rustfbp\"\nversion = \"0.3.18\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"capnp 0.7.4 (registry+file:///dev/null)\",\n \"libloading 0.2.4 (registry+file:///dev/null)\",\n \"threadpool 1.3.2 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"serde\"\nversion = \"0.8.11\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"serde_json\"\nversion = \"0.8.2\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"dtoa 0.2.2 (registry+file:///dev/null)\",\n \"itoa 0.1.1 (registry+file:///dev/null)\",\n \"num-traits 0.1.36 (registry+file:///dev/null)\",\n \"serde 0.8.11 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"target_build_utils\"\nversion = \"0.1.1\"\nsource = \"registry+file:///dev/null\"\ndependencies = [\n \"serde_json 0.8.2 (registry+file:///dev/null)\",\n]\n\n[[package]]\nname = \"threadpool\"\nversion = \"1.3.2\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"winapi\"\nversion = \"0.2.8\"\nsource = \"registry+file:///dev/null\"\n\n[[package]]\nname = \"winapi-build\"\nversion = \"0.1.1\"\nsource = \"registry+file:///dev/null\"\n\n[metadata]\n\"checksum byteorder 0.4.2 (registry+file:///dev/null)\" =\n\"96c8b41881888cc08af32d47ac4edd52bc7fa27fef774be47a92443756451304\"\n\"checksum capnp 0.7.4 (registry+file:///dev/null)\" =\n\"476c6a1bba39763a198092e54dec50113c48478dbe031385acfecbae70bac1bd\"\n\"checksum dtoa 0.2.2 (registry+file:///dev/null)\" =\n\"0dd841b58510c9618291ffa448da2e4e0f699d984d436122372f446dae62263d\"\n\"checksum itoa 0.1.1 (registry+file:///dev/null)\" =\n\"ae3088ea4baeceb0284ee9eea42f591226e6beaecf65373e41b38d95a1b8e7a1\"\n\"checksum kernel32-sys 0.2.2 (registry+file:///dev/null)\" =\n\"7507624b29483431c0ba2d82aece8ca6cdba9382bff4ddd0f7490560c056098d\"\n\"checksum lazy_static 0.2.1 (registry+file:///dev/null)\" =\n\"49247ec2a285bb3dcb23cbd9c35193c025e7251bfce77c1d5da97e6362dffe7f\"\n\"checksum libloading 0.2.4 (registry+file:///dev/null)\" =\n\"eceb2637ee9a27c7f19764048a9f377e40e3a70a322722f348e6bc7704d565f2\"\n\"checksum num-traits 0.1.36 (registry+file:///dev/null)\" =\n\"a16a42856a256b39c6d3484f097f6713e14feacd9bfb02290917904fae46c81c\"\n\"checksum rustfbp 0.3.18 (registry+file:///dev/null)\" =\n\"fbb4e3c922b153ace2c8094b9fb0d03cbbd9f751886e3669fb0e46350bac0c84\"\n\"checksum serde 0.8.11 (registry+file:///dev/null)\" =\n\"15db662ce4b837aac5731c52fe732d84a00f909763236289587cb7ca6985f6d8\"\n\"checksum serde_json 0.8.2 (registry+file:///dev/null)\" =\n\"e5b3bb42fa42265df8a1822b3db2090bc8f9e17e8142599c76a5b854bc4e7b5b\"\n\"checksum target_build_utils 0.1.1 (registry+file:///dev/null)\" =\n\"7a1be18d4d908e4e5697908de04fdd5099505463fc8eaf1ceb8133ae486936aa\"\n\"checksum threadpool 1.3.2 (registry+file:///dev/null)\" =\n\"59f6d3eff89920113dac9db44dde461d71d01e88a5b57b258a0466c32b5d7fe1\"\n\"checksum winapi 0.2.8 (registry+file:///dev/null)\" =\n\"167dc9d6949a9b857f3451275e911c3f44255842c1f7a76f33c55103a909087a\"\n\"checksum winapi-build 0.1.1 (registry+file:///dev/null)\" =\n\"2d315eee3b34aca4797b2da6b13ed88266e6d612562a0c46390af8299fc699bc\"\n```\n#### ERROR MESSAGE:\n\n---\n\n```\nwarning: custom registry support via the `registry.index`\nconfiguration is being removed, this functionality will not work in\nthe future\nerror: failed to load source for a dependency on `rustfbp`\n\nCaused by:\n  Unable to update registry file:///dev/null\n\nCaused by:\n  failed to open:\n/tmp/nix-build-nucleus_find_contract.drv-0/deps/registry/index/-ba82b75dd6681d6f/.cargo-index-lock\n\nTo learn more, run the command again with --verbose.\nbuilder for \u2018/nix/store/ai4r16qjr570ysgwapbzyjfp6jn7b3k4-nucleus_find_contract.drv\u2019\nfailed with exit code 101\nerror: build of\n\u2018/nix/store/ai4r16qjr570ysgwapbzyjfp6jn7b3k4-nucleus_find_contract.drv\u2019\nfailed\n```\n\nThe `-ba82b75dd6681d6f/.cargo-index-lock` bit is a symlink to the `rustRegistry` so I take it `cargo` is doing a write operation to `-ba82b75dd6681d6f/.cargo-index-lock` and failing due to the `/nix/store/` being write only.\n### Steps to reproduce\n\n```\n$ git clone git://github.com/fractalide/fractalide\n$ cd fractalide\n$ $ nix-build  --argstr debug true --argstr cache $(./support/buildCache.sh)   -A components.nucleus_find_contract\n```\n## Technical details\n- System: 17.03pre92039.adfcc2d (Gorilla)\n- Nix version: nix-env (Nix) 1.11.4\n- Nixpkgs version: \"17.03pre92039.adfcc2d\"\n", "closed_by": {"login": "sjmackenzie", "id": 158321, "node_id": "MDQ6VXNlcjE1ODMyMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/158321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjmackenzie", "html_url": "https://github.com/sjmackenzie", "followers_url": "https://api.github.com/users/sjmackenzie/followers", "following_url": "https://api.github.com/users/sjmackenzie/following{/other_user}", "gists_url": "https://api.github.com/users/sjmackenzie/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjmackenzie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjmackenzie/subscriptions", "organizations_url": "https://api.github.com/users/sjmackenzie/orgs", "repos_url": "https://api.github.com/users/sjmackenzie/repos", "events_url": "https://api.github.com/users/sjmackenzie/events{/privacy}", "received_events_url": "https://api.github.com/users/sjmackenzie/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37308/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37308/timeline", "performed_via_github_app": null, "state_reason": "completed"}