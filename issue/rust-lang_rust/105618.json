{"url": "https://api.github.com/repos/rust-lang/rust/issues/105618", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105618/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105618/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105618/events", "html_url": "https://github.com/rust-lang/rust/issues/105618", "id": 1492326888, "node_id": "I_kwDOAAsO6M5Y8xno", "number": 105618, "title": "Documentation targeting nothing emits unrelated errors", "user": {"login": "82marbag", "id": 69267416, "node_id": "MDQ6VXNlcjY5MjY3NDE2", "avatar_url": "https://avatars.githubusercontent.com/u/69267416?v=4", "gravatar_id": "", "url": "https://api.github.com/users/82marbag", "html_url": "https://github.com/82marbag", "followers_url": "https://api.github.com/users/82marbag/followers", "following_url": "https://api.github.com/users/82marbag/following{/other_user}", "gists_url": "https://api.github.com/users/82marbag/gists{/gist_id}", "starred_url": "https://api.github.com/users/82marbag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/82marbag/subscriptions", "organizations_url": "https://api.github.com/users/82marbag/orgs", "repos_url": "https://api.github.com/users/82marbag/repos", "events_url": "https://api.github.com/users/82marbag/events{/privacy}", "received_events_url": "https://api.github.com/users/82marbag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1659943986, "node_id": "MDU6TGFiZWwxNjU5OTQzOTg2", "url": "https://api.github.com/repos/rust-lang/rust/labels/D-verbose", "name": "D-verbose", "color": "c9f7a3", "default": false, "description": "Too much output caused by a single piece of incorrect code"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-12-12T16:57:08Z", "updated_at": "2022-12-13T17:18:59Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "Given the following code: <!-- Please provide a link to play.rust-lang.org -->\r\n\r\n[doc-issue.zip](https://github.com/rust-lang/rust/files/10210214/doc-issue.zip)\r\n\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0585]: found a documentation comment that doesn't document anything\r\n   --> src/output.rs:111:9\r\n    |\r\n111 |         /// Hello world\r\n    |         ^^^^^^^^^^^^^^^\r\n    |\r\n    = help: doc comments must come before what they document, maybe a comment was intended with `//`?\r\n\r\nerror[E0432]: unresolved import `aws_smithy_types::error::display`\r\n --> src/types.rs:5:34\r\n  |\r\n5 | pub use aws_smithy_types::error::display::DisplayErrorContext;\r\n  |                                  ^^^^^^^ could not find `display` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `IntoMakeServiceWithConnectInfo` in `routing`\r\n    --> src/service.rs:2298:42\r\n     |\r\n2298 |         aws_smithy_http_server::routing::IntoMakeServiceWithConnectInfo::new(self)\r\n     |                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ could not find `IntoMakeServiceWithConnectInfo` in `routing`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1154:49\r\n     |\r\n1154 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1164:49\r\n     |\r\n1164 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1174:49\r\n     |\r\n1174 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1184:49\r\n     |\r\n1184 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1197:49\r\n     |\r\n1197 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1210:49\r\n     |\r\n1210 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1220:60\r\n     |\r\n1220 | ) -> Result<std::vec::Vec<u8>, aws_smithy_http::operation::error::BuildError> {\r\n     |                                                            ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1230:49\r\n     |\r\n1230 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1240:49\r\n     |\r\n1240 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1250:49\r\n     |\r\n1250 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1260:49\r\n     |\r\n1260 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1270:49\r\n     |\r\n1270 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1280:49\r\n     |\r\n1280 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1290:49\r\n     |\r\n1290 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1300:49\r\n     |\r\n1300 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1310:49\r\n     |\r\n1310 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1320:49\r\n     |\r\n1320 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1330:49\r\n     |\r\n1330 | ) -> Result<String, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                 ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1340:83\r\n     |\r\n1340 | ) -> Result<aws_smithy_http::byte_stream::ByteStream, aws_smithy_http::operation::error::BuildError>\r\n     |                                                                                   ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n    --> src/operation_ser.rs:1347:73\r\n     |\r\n1347 | ) -> std::result::Result<std::vec::Vec<u8>, aws_smithy_http::operation::error::SerializationError> {\r\n     |                                                                         ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n   --> src/http_serde.rs:262:79\r\n    |\r\n262 | ) -> std::result::Result<http::response::Builder, aws_smithy_http::operation::error::BuildError> {\r\n    |                                                                               ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `error` in `operation`\r\n   --> src/http_serde.rs:500:79\r\n    |\r\n500 | ) -> std::result::Result<http::response::Builder, aws_smithy_http::operation::error::BuildError> {\r\n    |                                                                               ^^^^^ could not find `error` in `operation`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n  --> src/json_deser.rs:38:58\r\n   |\r\n38 |                     aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n   |                                                          ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n  --> src/json_deser.rs:48:50\r\n   |\r\n48 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n   |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n  --> src/json_deser.rs:85:58\r\n   |\r\n85 |                     aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n   |                                                          ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n  --> src/json_deser.rs:95:50\r\n   |\r\n95 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n   |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:150:66\r\n    |\r\n150 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:161:50\r\n    |\r\n161 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:210:50\r\n    |\r\n210 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:606:66\r\n    |\r\n606 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:617:50\r\n    |\r\n617 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:637:54\r\n    |\r\n637 |                 aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                      ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:643:50\r\n    |\r\n643 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:682:58\r\n    |\r\n682 |                     aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                          ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:692:50\r\n    |\r\n692 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:735:66\r\n    |\r\n735 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:746:50\r\n    |\r\n746 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:822:66\r\n    |\r\n822 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:833:50\r\n    |\r\n833 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:881:50\r\n    |\r\n881 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:926:50\r\n    |\r\n926 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:968:66\r\n    |\r\n968 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n    |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n   --> src/json_deser.rs:981:50\r\n    |\r\n981 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n    |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1009:66\r\n     |\r\n1009 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n     |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1020:50\r\n     |\r\n1020 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n     |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1050:66\r\n     |\r\n1050 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n     |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1063:89\r\n     |\r\n1063 | ...   .ok_or_else(|| aws_smithy_json::deserialize::error::DeserializeError::custom(\"value for 'enumString' cannot be null\"))?\r\n     |                                                           ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1079:89\r\n     |\r\n1079 | ...   .ok_or_else(|| aws_smithy_json::deserialize::error::DeserializeError::custom(\"value for 'constrainedStructure' cannot be null\"))?\r\n     |                                                           ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1085:89\r\n     |\r\n1085 | ...                   .ok_or_else(|| aws_smithy_json::deserialize::error::DeserializeError::custom(\"value for 'conBList' cannot be null\"))?\r\n     |                                                                           ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1091:89\r\n     |\r\n1091 | ...                   .ok_or_else(|| aws_smithy_json::deserialize::error::DeserializeError::custom(\"value for 'conBMap' cannot be null\"))?\r\n     |                                                                           ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1094:88\r\n     |\r\n1094 | ...   variant => return Err(aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\"unexpected union variant: {}\", variant)))\r\n     |                                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1099:62\r\n     |\r\n1099 |                         aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n     |                                                              ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1109:54\r\n     |\r\n1109 |                 aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n     |                                                      ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1160:50\r\n     |\r\n1160 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n     |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1204:66\r\n     |\r\n1204 | ...                   aws_smithy_json::deserialize::error::DeserializeError::custom(format!(\r\n     |                                                            ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n\r\nerror[E0433]: failed to resolve: could not find `DeserializeError` in `error`\r\n    --> src/json_deser.rs:1215:50\r\n     |\r\n1215 |             aws_smithy_json::deserialize::error::DeserializeError::custom(\r\n     |                                                  ^^^^^^^^^^^^^^^^ could not find `DeserializeError` in `error`\r\n... many more lines with other errors too\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally the output should look like:\r\n\r\n```\r\nerror[E0585]: found a documentation comment that doesn't document anything\r\n   --> src/output.rs:111:9\r\n    |\r\n111 |         /// Hello world\r\n    |         ^^^^^^^^^^^^^^^\r\n    |\r\n    = help: doc comments must come before what they document, maybe a comment was intended with `//`?\r\n```\r\n\r\nIf you delete the line 111 in `src/output.rs`, which is the one that contains the `/// Hello world` doc comment that targets nothing, the crate compiles.\r\n\r\n```\r\n$ rustc --version                                                                                                                                                                                                                                     \r\nrustc 1.63.0 (4b91a6ea7 2022-08-08)\r\n```\r\nReproduced also in nightly and beta.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105618/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105618/timeline", "performed_via_github_app": null, "state_reason": null}