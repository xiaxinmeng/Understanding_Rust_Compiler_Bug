{"url": "https://api.github.com/repos/rust-lang/rust/issues/43885", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/43885/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/43885/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/43885/events", "html_url": "https://github.com/rust-lang/rust/issues/43885", "id": 250342316, "node_id": "MDU6SXNzdWUyNTAzNDIzMTY=", "number": 43885, "title": "Add option to clear the CPU caches while benchmarking", "user": {"login": "eira-fransham", "id": 29733394, "node_id": "MDQ6VXNlcjI5NzMzMzk0", "avatar_url": "https://avatars.githubusercontent.com/u/29733394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eira-fransham", "html_url": "https://github.com/eira-fransham", "followers_url": "https://api.github.com/users/eira-fransham/followers", "following_url": "https://api.github.com/users/eira-fransham/following{/other_user}", "gists_url": "https://api.github.com/users/eira-fransham/gists{/gist_id}", "starred_url": "https://api.github.com/users/eira-fransham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eira-fransham/subscriptions", "organizations_url": "https://api.github.com/users/eira-fransham/orgs", "repos_url": "https://api.github.com/users/eira-fransham/repos", "events_url": "https://api.github.com/users/eira-fransham/events{/privacy}", "received_events_url": "https://api.github.com/users/eira-fransham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}, {"id": 630810559, "node_id": "MDU6TGFiZWw2MzA4MTA1NTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-libtest", "name": "A-libtest", "color": "f7e101", "default": false, "description": "Area: #[test] related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-08-15T15:04:06Z", "updated_at": "2017-11-18T19:50:47Z", "closed_at": "2017-11-18T19:50:47Z", "author_association": "NONE", "active_lock_reason": null, "body": "Often a more representative view of a piece of code's performance is on a cold cache, especially when it does a lot of reading of statics (which will be allocated in the same place each time and so will stay warm between benching rounds). It's pretty simple to clear the CPU cache in single-threaded code - just read a massive array using `test::black_box()` or suchlike, and possibly run some straight-line explicit `asm` to clear the instruction cache. The only unanswered question is how to reliably time it.\r\n\r\nThis should probably not be incorporated into the standard benching functions since it will significantly slow down pretty much every benchmark, but for some use-cases it's invaluable.", "closed_by": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/43885/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/43885/timeline", "performed_via_github_app": null, "state_reason": "completed"}