{"url": "https://api.github.com/repos/rust-lang/rust/issues/16739", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16739/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16739/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16739/events", "html_url": "https://github.com/rust-lang/rust/issues/16739", "id": 41021131, "node_id": "MDU6SXNzdWU0MTAyMTEzMQ==", "number": 16739, "title": "ICE: When creating Box<FnOnce<(), ()>> from unsugared unboxed closure", "user": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 122406831, "node_id": "MDU6TGFiZWwxMjI0MDY4MzE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-closures", "name": "A-closures", "color": "f7e101", "default": false, "description": "Area: closures (`|args| { .. }`)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-08-24T21:58:28Z", "updated_at": "2014-10-18T22:52:29Z", "closed_at": "2014-10-18T22:52:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "STR\n\n``` rust\n#![feature(unboxed_closures)]\n\nstruct Foo;\n\nimpl FnOnce<(), ()> for Foo {\n    extern \"rust-call\" fn call_once(self, _: ()) {}\n}\n\nfn main() {\n    // OK\n    let _ = (box |:| {}) as Box<FnOnce<(), ()>>;\n\n    // ICE\n    let _ = box Foo as Box<FnOnce<(), ()>>;\n}\n```\n\nBacktrace\n\n``` rust\ntask 'rustc' failed at 'assertion failed: index < LLVMCountParams(llfn)', /var/tmp/paludis/build/dev-lang-rust-scm/work/rust-scm/src/librustc_llvm/lib.rs:2041\n\nstack backtrace:\n   1:     0x7fb7eeb3f480 - rt::backtrace::imp::write::h1152902d41e3d933UYq\n   2:     0x7fb7eeb42630 - <unknown>\n   3:     0x7fb7f3090710 - unwind::begin_unwind_inner::h2d2ade2676f09803pie\n   4:     0x7fb7ef24a4d0 - <unknown>\n   5:     0x7fb7ef24a460 - get_param::hb758eec3c648c233Hxc\n   6:     0x7fb7f3ab0ce0 - middle::trans::callee::trans_unboxing_shim::h2a20a0dc6bd6bcaa4l0\n   7:     0x7fb7f3b697f0 - <unknown>\n   8:     0x7fb7f3b6bbf0 - <unknown>\n   9:     0x7fb7f3ac7830 - middle::trans::meth::trans_trait_cast::h072d1f530eebabfeFCj\n  10:     0x7fb7f3ac4060 - <unknown>\n  11:     0x7fb7f3ac3270 - <unknown>\n  12:     0x7fb7f3a86270 - middle::trans::expr::trans::h747aacd7f3710e8boL1\n  13:     0x7fb7f3a84a20 - middle::trans::expr::trans_to_lvalue::hb541e6a03a8e3d09Z31\n  14:     0x7fb7f3b24b60 - middle::trans::_match::store_local::he57e710125ac8569PCg\n  15:     0x7fb7f3a84180 - middle::trans::base::init_local::hfb093aefcbfd1663agc\n  16:     0x7fb7f3a83790 - middle::trans::controlflow::trans_stmt::hb90be18b35bbdabdVUX\n  17:     0x7fb7f3a850f0 - middle::trans::controlflow::trans_block::h29d3e959287f28066ZX\n  18:     0x7fb7f3b2d0f0 - middle::trans::base::trans_closure::h9d2ca2e9b802af5cF8c\n  19:     0x7fb7f3a76880 - middle::trans::base::trans_fn::h7d4da3ce8c357bcdskd\n  20:     0x7fb7f3a71e80 - middle::trans::base::trans_item::hc24a7b2fa4f20f13sCd\n  21:     0x7fb7f3b37790 - middle::trans::base::trans_crate::h3769d84143898d672we\n  22:     0x7fb7f3efcd50 - driver::driver::phase_4_translate_to_llvm::h4b21525153d39d62Z1w\n  23:     0x7fb7f3ef4030 - driver::driver::compile_input::hed1faeda6eed200dqEw\n  24:     0x7fb7f3f88100 - <unknown>\n  25:     0x7fb7f3f88010 - <unknown>\n  26:     0x7fb7f3f99ee0 - <unknown>\n  27:     0x7fb7f3f99ce0 - <unknown>\n  28:     0x7fb7f33e8e80 - <unknown>\n  29:     0x7fb7f30e09f0 - <unknown>\n  30:     0x7fb7f30e09e0 - rust_try\n  31:     0x7fb7f308dd80 - unwind::try::hb0f99c41baa56e2aF6d\n  32:     0x7fb7f308db20 - task::Task::run::hf1685016641f31daZcd\n  33:     0x7fb7f33e8c40 - <unknown>\n  34:     0x7fb7f308f960 - <unknown>\n  35:     0x7fb7edec1000 - start_thread\n  36:     0x7fb7f2d5d269 - clone\n  37:                0x0 - <unknown>\n```\n\nVersion\n\n``` rust\nrustc 0.12.0-pre (5ad7afc2d 2014-08-24 11:16:02 +0000)\n```\n\ncc @pcwalton \n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16739/timeline", "performed_via_github_app": null, "state_reason": "completed"}