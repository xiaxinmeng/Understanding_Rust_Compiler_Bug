{"url": "https://api.github.com/repos/rust-lang/rust/issues/82117", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/82117/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/82117/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/82117/events", "html_url": "https://github.com/rust-lang/rust/issues/82117", "id": 808045795, "node_id": "MDU6SXNzdWU4MDgwNDU3OTU=", "number": 82117, "title": "Documented syntax for `core::env` is wrong", "user": {"login": "lukaslueg", "id": 3148704, "node_id": "MDQ6VXNlcjMxNDg3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3148704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lukaslueg", "html_url": "https://github.com/lukaslueg", "followers_url": "https://api.github.com/users/lukaslueg/followers", "following_url": "https://api.github.com/users/lukaslueg/following{/other_user}", "gists_url": "https://api.github.com/users/lukaslueg/gists{/gist_id}", "starred_url": "https://api.github.com/users/lukaslueg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lukaslueg/subscriptions", "organizations_url": "https://api.github.com/users/lukaslueg/orgs", "repos_url": "https://api.github.com/users/lukaslueg/repos", "events_url": "https://api.github.com/users/lukaslueg/events{/privacy}", "received_events_url": "https://api.github.com/users/lukaslueg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}, {"id": 2011781731, "node_id": "MDU6TGFiZWwyMDExNzgxNzMx", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs", "name": "T-libs", "color": "bfd4f2", "default": false, "description": "Relevant to the library team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-14T20:57:30Z", "updated_at": "2021-02-16T05:45:10Z", "closed_at": "2021-02-16T05:45:10Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "[The documentation](https://doc.rust-lang.org/stable/std/macro.env.html) for the compiler-built-in macro `core::env` / `std::env` currently reads:\r\n\r\n```rust\r\nmacro_rules! env {\r\n    ($name:expr $(,)?) => { ... };\r\n}\r\n```\r\n\r\nThe text and example state that a second parameter can be given to customize the error message in case the environment variable is not defined. This second parameter is not reflected in the syntax above. The following is valid:\r\n\r\n```rust\r\nfn main() {\r\n    let x: &'static str = env!(\"CARGO_MANIFEST_DIR\", \"oh no!\");  // this should not match `$(name:expr $(,)?)`\r\n}\r\n```\r\n\r\nLooking at [the implementation](https://github.com/rust-lang/rust/blob/master/compiler/rustc_builtin_macros/src/env.rs), the syntax should most likely be documented as\r\n\r\n```rust\r\nmacro_rules! env {\r\n    ($name:expr) => { ... };\r\n    ($name:expr, $error:expr) => { ... };\r\n}\r\n```\r\n\r\nAm I missing something? I can commit a PR if so desired.", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/82117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/82117/timeline", "performed_via_github_app": null, "state_reason": "completed"}