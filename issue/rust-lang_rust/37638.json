{"url": "https://api.github.com/repos/rust-lang/rust/issues/37638", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37638/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37638/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37638/events", "html_url": "https://github.com/rust-lang/rust/issues/37638", "id": 187815909, "node_id": "MDU6SXNzdWUxODc4MTU5MDk=", "number": 37638, "title": "Need a way to detect Windows XP support in build.rs script", "user": {"login": "briansmith", "id": 16816, "node_id": "MDQ6VXNlcjE2ODE2", "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briansmith", "html_url": "https://github.com/briansmith", "followers_url": "https://api.github.com/users/briansmith/followers", "following_url": "https://api.github.com/users/briansmith/following{/other_user}", "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions", "organizations_url": "https://api.github.com/users/briansmith/orgs", "repos_url": "https://api.github.com/users/briansmith/repos", "events_url": "https://api.github.com/users/briansmith/events{/privacy}", "received_events_url": "https://api.github.com/users/briansmith/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 123109, "node_id": "MDU6TGFiZWwxMjMxMDk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-windows", "name": "O-windows", "color": "6e6ec0", "default": false, "description": "Operating system: Windows"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2016-11-07T20:16:48Z", "updated_at": "2020-11-30T18:39:54Z", "closed_at": "2020-11-30T18:39:54Z", "author_association": "NONE", "active_lock_reason": null, "body": "Let's add a way to detect whether Windows XP is being targetted in -msvc builds.\r\n\r\nAccording to https://doc.rust-lang.org/book/getting-started.html#tier-3, The target name for Windows-XP-compatible MSVC targets is the same as for non-Windows-XP-compatible targets.\r\n\r\nIn particular, when building C code it is necessary to use a different \"XP compatible\" toolchain with MSVC when XP support is required. However, that toolchain is optional and some developers do not have it installed. Currently we have to choose between breaking XP compatibility unnecessarily and having the build be broken when the XP-compatible toolchain isn't installed. If the build.rs script could detect whether or not XP compatibility was being requested, then it could default to the standard toolchain and then switch to the XP-compatible toolchain only when XP compatibility is specifically requested.\r\n\r\nGeneralizing this idea, it would be useful to know the minimum version of Windows being targetted in the build. There are various features that only work on Windows 8 or later or Windows 10 or later. If we know that the developer is targetting only later versions of Windows then we can sometimes enable additional functionality and/or we can drop shims to support older versions.\r\n\r\nGeneralizing this idea even further, this also applies to the Linux kernel. For example, if we know that Linux 3.17 or later is being targetted then we can always rely on the `getrandom` syscall being available and avoid needing dependencies on `std::fs` to read from `/dev/urandom`. Similar considerations apply to some Mac OS X APIs.", "closed_by": {"login": "briansmith", "id": 16816, "node_id": "MDQ6VXNlcjE2ODE2", "avatar_url": "https://avatars.githubusercontent.com/u/16816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briansmith", "html_url": "https://github.com/briansmith", "followers_url": "https://api.github.com/users/briansmith/followers", "following_url": "https://api.github.com/users/briansmith/following{/other_user}", "gists_url": "https://api.github.com/users/briansmith/gists{/gist_id}", "starred_url": "https://api.github.com/users/briansmith/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briansmith/subscriptions", "organizations_url": "https://api.github.com/users/briansmith/orgs", "repos_url": "https://api.github.com/users/briansmith/repos", "events_url": "https://api.github.com/users/briansmith/events{/privacy}", "received_events_url": "https://api.github.com/users/briansmith/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37638/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37638/timeline", "performed_via_github_app": null, "state_reason": "completed"}