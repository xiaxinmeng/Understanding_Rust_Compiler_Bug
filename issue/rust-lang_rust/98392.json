{"url": "https://api.github.com/repos/rust-lang/rust/issues/98392", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98392/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98392/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98392/events", "html_url": "https://github.com/rust-lang/rust/issues/98392", "id": 1280440162, "node_id": "I_kwDOAAsO6M5MUfdi", "number": 98392, "title": "Give a better error when an impl block implicitly requires `Sized`", "user": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 125141240, "node_id": "MDU6TGFiZWwxMjUxNDEyNDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-dst", "name": "A-dst", "color": "f7e101", "default": false, "description": "Area: Dynamically Sized Types"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-06-22T16:02:43Z", "updated_at": "2022-08-05T12:38:40Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Given the following code: https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=277b0605705776743255b4aa99055334\r\n\r\n```rust\r\nuse core::fmt::Display;\r\n\r\nstruct S<T: ?Sized> {\r\n    inner: Box<T>,\r\n}\r\n\r\nimpl<T> S<T> {\r\n    fn foo(&self) {}\r\n}\r\n\r\nfn main() {\r\n    let x: S<dyn Display> = S { inner: Box::new(0) as _ };\r\n    x.foo();\r\n}\r\n```\r\n\r\nThe current output is:\r\n\r\n```\r\nerror[E0599]: the method `foo` exists for struct `S<dyn std::fmt::Display>`, but its trait bounds were not satisfied\r\n   --> src/main.rs:12:7\r\n    |\r\n2   |   struct S<T: ?Sized> {\r\n    |   ------------------- method `foo` not found for this\r\n...\r\n12  |       x.foo();\r\n    |         ^^^ method cannot be called on `S<dyn std::fmt::Display>` due to unsatisfied trait bounds\r\n    |\r\n    = note: the following trait bounds were not satisfied:\r\n            `dyn std::fmt::Display: Sized`\r\n```\r\n\r\n<!-- The following is not always necessary. -->\r\nIdeally the output should look like:\r\n\r\n```\r\nerror[E0599]: the method `foo` exists for struct `S<dyn std::fmt::Display>`, but its trait bounds were not satisfied\r\n   --> src/main.rs:12:7\r\n    |\r\n2   |   struct S<T: ?Sized> {\r\n    |   ------------------- method `foo` not found for this\r\n...\r\n12  |       x.foo();\r\n    |         ^^^ method cannot be called on `S<dyn std::fmt::Display>` due to unsatisfied trait bounds\r\n    |\r\n    = note: the following trait bounds were not satisfied:\r\n            `dyn std::fmt::Display: Sized`\r\nnote: implicitly required by the following `impl` block:\r\n 7 | impl<T> S<T> {\r\n    = help: consider relaxing the implicit `Sized` restriction\r\n 7 | impl<T: ?Sized> S<T> {\r\n           ++++++++\r\n```\r\n\r\nThis already exists for free functions; not sure why it's broken above. https://play.rust-lang.org/?version=stable&mode=debug&edition=2021&gist=4c7a6a69f9678c4ea5b410431e201c8c\r\n<!--\r\nIf dramatically different output is caused by small changes, consider also\r\nadding them here.\r\n\r\nIf you're using the stable version of the compiler, you should also check if the\r\nbug also exists in the beta or nightly versions. The output might also be\r\ndifferent depending on the Edition.\r\n-->\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98392/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98392/timeline", "performed_via_github_app": null, "state_reason": null}