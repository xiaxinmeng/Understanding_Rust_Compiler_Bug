{"url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923", "repository_url": "https://api.github.com/repos/rust-lang/rust-clippy", "labels_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923/comments", "events_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923/events", "html_url": "https://github.com/rust-lang/rust-clippy/issues/4923", "id": 540940542, "node_id": "MDU6SXNzdWU1NDA5NDA1NDI=", "number": 4923, "title": "\"Index out of bounds\" panic on running clippy-driver", "user": {"login": "cole-miller", "id": 53574922, "node_id": "MDQ6VXNlcjUzNTc0OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/53574922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole-miller", "html_url": "https://github.com/cole-miller", "followers_url": "https://api.github.com/users/cole-miller/followers", "following_url": "https://api.github.com/users/cole-miller/following{/other_user}", "gists_url": "https://api.github.com/users/cole-miller/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole-miller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole-miller/subscriptions", "organizations_url": "https://api.github.com/users/cole-miller/orgs", "repos_url": "https://api.github.com/users/cole-miller/repos", "events_url": "https://api.github.com/users/cole-miller/events{/privacy}", "received_events_url": "https://api.github.com/users/cole-miller/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-12-20T05:32:30Z", "updated_at": "2019-12-20T23:50:22Z", "closed_at": "2019-12-20T23:50:22Z", "author_association": "NONE", "active_lock_reason": null, "body": "I've just upgraded (with rustup) to rustc 1.40.0, and I'm getting a compiler panic when running `clippy-driver`:\r\n\r\n```\r\n$ which clippy-driver\r\n/home/hexbienium/.cargo/bin/clippy-driver\r\n$ env RUST_BACKTRACE=full clippy-driver\r\nthread 'main' panicked at 'index out of bounds: the len is 1 but the index is 1', /rustc/73528e339aae0f17a15ffa49a8ac608f50c6cf14/src/libcore/slice/mod.rs:2796:10\r\nstack backtrace:\r\n   0:     0x7faec50f5b24 - backtrace::backtrace::libunwind::trace::h65597d255cb1398b\r\n                               at /cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.3.40/src/backtrace/libunwind.rs:88\r\n   1:     0x7faec50f5b24 - backtrace::backtrace::trace_unsynchronized::hd4f479d7150ec4a0\r\n                               at /cargo/registry/src/github.com-1ecc6299db9ec823/backtrace-0.3.40/src/backtrace/mod.rs:66\r\n   2:     0x7faec50f5b24 - std::sys_common::backtrace::_print_fmt::h015072984a2b172c\r\n                               at src/libstd/sys_common/backtrace.rs:77\r\n   3:     0x7faec50f5b24 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h6df05d3335f32194\r\n                               at src/libstd/sys_common/backtrace.rs:61\r\n   4:     0x7faec512e45c - core::fmt::write::h1f444f4312eb6c27\r\n                               at src/libcore/fmt/mod.rs:1028\r\n   5:     0x7faec50e9f07 - std::io::Write::write_fmt::h8d147888220078ef\r\n                               at src/libstd/io/mod.rs:1412\r\n   6:     0x7faec50fa38e - std::sys_common::backtrace::_print::h8a6df0fa81d6af62\r\n                               at src/libstd/sys_common/backtrace.rs:65\r\n   7:     0x7faec50fa38e - std::sys_common::backtrace::print::h6f05b4733407e509\r\n                               at src/libstd/sys_common/backtrace.rs:50\r\n   8:     0x7faec50fa38e - std::panicking::default_hook::{{closure}}::h0d0a23bd02315dd8\r\n                               at src/libstd/panicking.rs:188\r\n   9:     0x7faec50fa081 - std::panicking::default_hook::h8d15a9aecb4efac6\r\n                               at src/libstd/panicking.rs:205\r\n  10:     0x7faec55db853 - rustc_driver::report_ice::h604244c68c1c9a3a\r\n  11:     0x7faec50fab60 - std::panicking::rust_panic_with_hook::hbe174577402a475d\r\n                               at src/libstd/panicking.rs:468\r\n  12:     0x7faec50fa62e - std::panicking::continue_panic_fmt::h4d855dad868accf3\r\n                               at src/libstd/panicking.rs:373\r\n  13:     0x7faec50fa516 - rust_begin_unwind\r\n                               at src/libstd/panicking.rs:302\r\n  14:     0x7faec5127ebe - core::panicking::panic_fmt::hdeb7979ab6591473\r\n                               at src/libcore/panicking.rs:139\r\n  15:     0x7faec5127e85 - core::panicking::panic_bounds_check::h48b559825fef6c92\r\n                               at src/libcore/panicking.rs:96\r\n  16:     0x55719e032dc0 - <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once::h29e91fb942ca53fd\r\n  17:     0x55719e031529 - std::panicking::try::do_call::h71d14e48e25dd4d0\r\n  18:     0x7faec510b44a - __rust_maybe_catch_panic\r\n                               at src/libpanic_unwind/lib.rs:78\r\n  19:     0x55719e033147 - rustc_driver::catch_fatal_errors::hc41e1afd9582cd86\r\n  20:     0x55719e037cd2 - clippy_driver::main::h9a0bac04d2ff3357\r\n  21:     0x55719e031463 - std::rt::lang_start::{{closure}}::h7133c9057e9ac829\r\n  22:     0x7faec50fa4b3 - std::rt::lang_start_internal::{{closure}}::h6ea535ec5c50fc3e\r\n                               at src/libstd/rt.rs:48\r\n  23:     0x7faec50fa4b3 - std::panicking::try::do_call::h631c6408dfccc6f5\r\n                               at src/libstd/panicking.rs:287\r\n  24:     0x7faec510b44a - __rust_maybe_catch_panic\r\n                               at src/libpanic_unwind/lib.rs:78\r\n  25:     0x7faec50fb02d - std::panicking::try::hab539b2d1255d635\r\n                               at src/libstd/panicking.rs:265\r\n  26:     0x7faec50fb02d - std::panic::catch_unwind::hd5e0a26424bd7f34\r\n                               at src/libstd/panic.rs:396\r\n  27:     0x7faec50fb02d - std::rt::lang_start_internal::h3bdc4c7d98181bf9\r\n                               at src/libstd/rt.rs:47\r\n  28:     0x55719e037d12 - main\r\n  29:     0x7faec4e8b09b - __libc_start_main\r\n  30:     0x55719e02d629 - <unknown>\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.40.0 (73528e339 2019-12-16) running on x86_64-unknown-linux-gnu\r\n\r\nquery stack during panic:\r\nend of query stack\r\n```\r\n\r\nThis happens whether or not I run it from a directory containing a `Cargo.toml`. `cargo clippy` works as expected. Let me know if some additional information would be helpful.\r\n\r\nETA: added verbose backtrace.", "closed_by": {"login": "cole-miller", "id": 53574922, "node_id": "MDQ6VXNlcjUzNTc0OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/53574922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cole-miller", "html_url": "https://github.com/cole-miller", "followers_url": "https://api.github.com/users/cole-miller/followers", "following_url": "https://api.github.com/users/cole-miller/following{/other_user}", "gists_url": "https://api.github.com/users/cole-miller/gists{/gist_id}", "starred_url": "https://api.github.com/users/cole-miller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cole-miller/subscriptions", "organizations_url": "https://api.github.com/users/cole-miller/orgs", "repos_url": "https://api.github.com/users/cole-miller/repos", "events_url": "https://api.github.com/users/cole-miller/events{/privacy}", "received_events_url": "https://api.github.com/users/cole-miller/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust-clippy/issues/4923/timeline", "performed_via_github_app": null, "state_reason": "completed"}