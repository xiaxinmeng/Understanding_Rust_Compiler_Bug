{"url": "https://api.github.com/repos/rust-lang/rust/issues/20683", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/20683/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/20683/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/20683/events", "html_url": "https://github.com/rust-lang/rust/issues/20683", "id": 53599370, "node_id": "MDU6SXNzdWU1MzU5OTM3MA==", "number": 20683, "title": "ICE when compiling bad code", "user": {"login": "spacejam", "id": 1505488, "node_id": "MDQ6VXNlcjE1MDU0ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1505488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spacejam", "html_url": "https://github.com/spacejam", "followers_url": "https://api.github.com/users/spacejam/followers", "following_url": "https://api.github.com/users/spacejam/following{/other_user}", "gists_url": "https://api.github.com/users/spacejam/gists{/gist_id}", "starred_url": "https://api.github.com/users/spacejam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spacejam/subscriptions", "organizations_url": "https://api.github.com/users/spacejam/orgs", "repos_url": "https://api.github.com/users/spacejam/repos", "events_url": "https://api.github.com/users/spacejam/events{/privacy}", "received_events_url": "https://api.github.com/users/spacejam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-01-07T05:35:12Z", "updated_at": "2015-01-07T15:53:07Z", "closed_at": "2015-01-07T07:52:28Z", "author_association": "NONE", "active_lock_reason": null, "body": "My code is certainly broken, but it triggered an ICE.  Apologies if this is a duplicate!  If the triggering code is useful, I've pushed a branch with the triggering material: https://github.com/spacejam/rust-rocksdb/tree/tan_ICE\n\n```\nrustc 0.13.0-nightly (c7dd3c4d6 2015-01-05 23:51:00 +0000)\nbinary: rustc\ncommit-hash: c7dd3c4d69aee1c4ad8cc220c194b176bba2ab62\ncommit-date: 2015-01-05 23:51:00 +0000\nhost: x86_64-apple-darwin\nrelease: 0.13.0-nightly\n\n...\n\n   Compiling rocksdb v0.0.2 (file:///Users/tan/code/rust-rocksdb)\n     Running `rustc /Users/tan/code/rust-rocksdb/src/lib.rs --crate-name rocksdb --crate-type lib -g -C metadata=6653d8e8924e4f84 -C extra-filename=-6653d8e8924e4f84 --out-dir /Users/tan/code/rust-rocksdb/target --emit=dep-info,link -L /Users/tan/code/rust-rocksdb/target -L /Users/tan/code/rust-rocksdb/target/deps`\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:592:1: 621:2 error: internal compiler error: impl `VtableImpl(impl_def_id=DefId { krate: 0, node: 3108 }:rocksdb::&'a mut MergeOperands<'a>.Iterator, substs=Substs[types=[[];[];[]], regions=[['_#0r];[];[]]], nested=[[];[];[]])` did not contain projection for `Obligation(predicate=<&'a mut rocksdb::MergeOperands<'a> as TraitRef(&'a mut rocksdb::MergeOperands<'a>, core::iter::Iterator)>::Item,depth=0)`\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:592 impl<'a> Iterator for &'a mut MergeOperands<'a> {\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:593     fn next(&mut self) -> Option<&'a [u8]> {\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:594         use std::raw::Slice;\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:595         match self.cursor == self.num_operands {\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:596             true => None,\n/Users/tan/code/rust-rocksdb/src/rocksdb.rs:597             false => {\n                                                ...\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'Box<Any>', /Users/rustbuild/src/rust-buildbot/slave/nightly-dist-rustc-mac/build/src/libsyntax/diagnostic.rs:123\n\nstack backtrace:\n   1:        0x106f7d5e5 - sys::backtrace::write::h98e4664f4f31dc8eiTs\n   2:        0x106fa2f4f - failure::on_fail::h15cffea110d6009eKVy\n   3:        0x106f0840a - rt::unwind::begin_unwind_inner::h9de529c6f705175fKDy\n   4:        0x104c09dc7 - rt::unwind::begin_unwind::h8742058877264024887\n   5:        0x104c09d5c - diagnostic::SpanHandler::span_bug::h3bc28b7b3bcff0610kF\n   6:        0x1043a1603 - middle::traits::project::project_type::h5ce8ef2558d93d50zQP\n   7:        0x10439cb5e - middle::traits::project::opt_normalize_projection_type::hcee84b18f83e8d45CIP\n   8:        0x10438ae43 - middle::traits::project::normalize_projection_type::h7c69afde591a893ddHP\n   9:        0x10439df9f - middle::traits::project::AssociatedTypeNormalizer<'a, 'b, 'tcx>.TypeFolder<'tcx>::fold_ty::hc4b6ba01061942daOFP\n  10:        0x103cab937 - middle::ty_fold::TypeFolder::fold_trait_ref::h6518936090498913440\n  11:        0x103cac3a1 - middle::ty_fold::VecPerParamSpace<T>.TypeFoldable<'tcx>::fold_with::h10053445313753109854\n  12:        0x103cc73b4 - check::FnCtxt<'a, 'tcx>::instantiate_bounds::h31abbc782f1f47fd1kl\n  13:        0x103cdfdfd - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>::with_fcx::h1819609048976829711\n  14:        0x103ce2620 - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>.Visitor<'v>::visit_item::h2bf7c5e628314514tki\n  15:        0x103ce546f - visit::walk_mod::h14492313709251987009\n  16:        0x103ce2fac - check::wf::CheckTypeWellFormedVisitor<'ccx, 'tcx>.Visitor<'v>::visit_item::h2bf7c5e628314514tki\n  17:        0x103de546b - check_crate::unboxed_closure.39887\n  18:        0x103de0d53 - check_crate::hbc0ab8570a19149famx\n  19:        0x103711292 - driver::phase_3_run_analysis_passes::h61da41ec58961d9bSva\n  20:        0x1036fdcac - driver::compile_input::h6ba151de4af50ce2vba\n  21:        0x1037c0c13 - thunk::F.Invoke<A, R>::invoke::h15890902738341362910\n  22:        0x1037bdd70 - rt::unwind::try::try_fn::h15939753852117214544\n  23:        0x107008009 - rust_try_inner\n  24:        0x107007ff6 - rust_try\n  25:        0x1037be4b6 - thunk::F.Invoke<A, R>::invoke::h14011449182044061502\n  26:        0x106f8ea34 - sys::thread::thread_start::h4e93ea2350249d53kGv\n  27:     0x7fff8dcfa2fc - _pthread_body\n  28:     0x7fff8dcfa279 - _pthread_body\n\nCould not compile `rocksdb`.\n\nCaused by:\n  Process didn't exit successfully: `rustc /Users/tan/code/rust-rocksdb/src/lib.rs --crate-name rocksdb --crate-type lib -g -C metadata=6653d8e8924e4f84 -C extra-filename=-6653d8e8924e4f84 --out-dir /Users/tan/code/rust-rocksdb/target --emit=dep-info,link -L /Users/tan/code/rust-rocksdb/target -L /Users/tan/code/rust-rocksdb/target/deps` (status=101)\n```\n", "closed_by": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/20683/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/20683/timeline", "performed_via_github_app": null, "state_reason": "completed"}