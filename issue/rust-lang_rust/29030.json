{"url": "https://api.github.com/repos/rust-lang/rust/issues/29030", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/29030/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/29030/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/29030/events", "html_url": "https://github.com/rust-lang/rust/issues/29030", "id": 111255877, "node_id": "MDU6SXNzdWUxMTEyNTU4Nzc=", "number": 29030, "title": "Internal compiler error upon deriving Debug for a generic type T with a default type argument that depends on T's lifetime parameter", "user": {"login": "tenyoung795", "id": 775676, "node_id": "MDQ6VXNlcjc3NTY3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/775676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tenyoung795", "html_url": "https://github.com/tenyoung795", "followers_url": "https://api.github.com/users/tenyoung795/followers", "following_url": "https://api.github.com/users/tenyoung795/following{/other_user}", "gists_url": "https://api.github.com/users/tenyoung795/gists{/gist_id}", "starred_url": "https://api.github.com/users/tenyoung795/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tenyoung795/subscriptions", "organizations_url": "https://api.github.com/users/tenyoung795/orgs", "repos_url": "https://api.github.com/users/tenyoung795/repos", "events_url": "https://api.github.com/users/tenyoung795/events{/privacy}", "received_events_url": "https://api.github.com/users/tenyoung795/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2015-10-13T19:48:32Z", "updated_at": "2015-10-29T01:25:40Z", "closed_at": "2015-10-29T01:25:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "When you attempt to derive `Debug` for some `T<'a, U: 'a = V<'a>>`, the compiler throws `Type parameter out of range when substituting in region 'a`.\n\nSee [this playpen](http://is.gd/sxm1wS). Note that this works fine on beta and nightly; perhaps this would make a good regression test case.\n## Code\n\n``` rust\n#[derive(Debug)]\nstruct Message<'a, P: 'a = &'a [u8]> {\n    header: &'a [u8],\n    payload: P,\n}\n```\n## Error\n\n```\nbug.rs:1:10: 1:15 error: internal compiler error: Type parameter out of range when substituting in region 'a (root type=Some(&'a [u8])) (space=TypeSpace, index=0)\nbug.rs:1 #[derive(Debug)]\n                  ^~~~~\nbug.rs:1:10: 1:15 note: in expansion of #[derive_Debug]\nbug.rs:1:10: 1:15 note: expansion site\n```\n## Meta\n### `rustc --version --verbose`\n\n```\nrustc 1.3.0 (9a92aaf19 2015-09-15)\nbinary: rustc\ncommit-hash: 9a92aaf19a64603b02b4130fe52958cc12488900\ncommit-date: 2015-09-15\nhost: x86_64-unknown-linux-gnu\nrelease: 1.3.0\n```\n### Backtrace\n\n```\n   1:     0x7f159a1288ee - sys::backtrace::write::haf6e4e635ac76143Ivs\n   2:     0x7f159a130fd5 - panicking::on_panic::ha085a58a08f78856lzx\n   3:     0x7f159a0f1bce - rt::unwind::begin_unwind_inner::hc90ee27246f12475C0w\n   4:     0x7f15974f276c - rt::unwind::begin_unwind::h11988818671084554314\n   5:     0x7f15974f270b - diagnostic::SpanHandler::span_bug::h5e275fd43fb4dbf5X6A\n   6:     0x7f159824c67b - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_region::h6e68580d67532a3aLlQ\n   7:     0x7f159817b380 - middle::subst::SubstFolder<'a, 'tcx>.TypeFolder<'tcx>::fold_ty::h7f3a3205b864f389GnQ\n   8:     0x7f15981f544c - middle::infer::InferCtxt<'a, 'tcx>::type_vars_for_defs::h26a1898fc01cd534AoC\n   9:     0x7f1599877f4f - check::instantiate_path::h5cf0d5a86dc81128iIs\n  10:     0x7f159987a6a3 - check::_match::check_pat_struct::h8307d8311228d69cbyb\n  11:     0x7f159986c6a6 - check::_match::check_pat::h0d1b284bfff635dd43a\n  12:     0x7f159987b59a - check::_match::check_match::h397d7cfcf63ba1eeIsb\n  13:     0x7f1599921dce - check::check_expr_with_unifier::h2356985747389952917\n  14:     0x7f15998f740f - check::check_block_with_expected::he8940408a5503b54Hhs\n  15:     0x7f15998d7f3a - check::check_fn::h5e5df21b0fd773ea2In\n  16:     0x7f15998ee4a6 - check::check_bare_fn::h86a03fb1f3983995Hyn\n  17:     0x7f15998fd14c - check::check_method_body::h13d6362f0882c3dcSao\n  18:     0x7f15998ec5c3 - check::check_item_body::hf589d5189d5cb836HYn\n  19:     0x7f15998ee0d4 - check::check_item_types::h489a8e890fa40e75ewn\n  20:     0x7f15999adafb - check_crate::h64d9b180d61a15fblaD\n  21:     0x7f159a698479 - driver::phase_3_run_analysis_passes::closure.16545\n  22:     0x7f159a696d91 - middle::ty::ctxt<'tcx>::create_and_enter::h17619121053301903364\n  23:     0x7f159a691c71 - driver::phase_3_run_analysis_passes::h12169435128770927116\n  24:     0x7f159a675d70 - driver::compile_input::h50576600c327a48aTba\n  25:     0x7f159a75c083 - run_compiler::h08c4308e3023ae95A7b\n  26:     0x7f159a759afe - boxed::F.FnBox<A>::call_box::h5719507417069443679\n  27:     0x7f159a759429 - rt::unwind::try::try_fn::h17024725433081724618\n  28:     0x7f159a130acd - __rust_try\n  29:     0x7f159a11bb77 - rt::unwind::try::inner_try::h59523aa853a0e10avWw\n  30:     0x7f159a759648 - boxed::F.FnBox<A>::call_box::h16487981074879516847\n  31:     0x7f159a12fc11 - sys::thread::Thread::new::thread_start::h890d1188505773c835v\n  32:     0x7f159477a181 - start_thread\n  33:     0x7f1599d7e47c - __clone\n  34:                0x0 - <unknown>\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/29030/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/29030/timeline", "performed_via_github_app": null, "state_reason": "completed"}