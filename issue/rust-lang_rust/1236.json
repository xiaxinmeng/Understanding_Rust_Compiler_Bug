{"url": "https://api.github.com/repos/rust-lang/rust/issues/1236", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/1236/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/1236/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/1236/events", "html_url": "https://github.com/rust-lang/rust/issues/1236", "id": 2410418, "node_id": "MDU6SXNzdWUyNDEwNDE4", "number": 1236, "title": "rustc: 'option none' at src/lib/option.rs:34", "user": {"login": "elly", "id": 218734, "node_id": "MDQ6VXNlcjIxODczNA==", "avatar_url": "https://avatars.githubusercontent.com/u/218734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elly", "html_url": "https://github.com/elly", "followers_url": "https://api.github.com/users/elly/followers", "following_url": "https://api.github.com/users/elly/following{/other_user}", "gists_url": "https://api.github.com/users/elly/gists{/gist_id}", "starred_url": "https://api.github.com/users/elly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elly/subscriptions", "organizations_url": "https://api.github.com/users/elly/orgs", "repos_url": "https://api.github.com/users/elly/repos", "events_url": "https://api.github.com/users/elly/events{/privacy}", "received_events_url": "https://api.github.com/users/elly/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2011-12-01T02:58:38Z", "updated_at": "2011-12-01T04:08:05Z", "closed_at": "2011-12-01T04:08:04Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "The following code crashes rustc @ b4c53627b17024a51b60243f6d27cd1d3a9a9724 (2011-11-30):\n\n```\nuse rustc;\n\nimport rustc::syntax::codemap;\nimport rustc::syntax::parse::parser;\n\nfn load_pkg(filename: str) {\n    let sess = @{cm: codemap::new_codemap(), mutable next_id: 0};\n    let c = parser::parse_crate_from_crate_file(filename, [], sess);\n}\n\nfn main(argv: [str]) { }\n```\n\nStack trace:\n```#0  upcall_fail (expr=0x835d5a8 \"option none\", file=0xf7f93da0 \"src/lib/option.rs\", line=34)\n    at ./src/rt/rust_upcall.cpp:53\nNo locals.\n#1  0xf7f5d3e4 in option::get::_454749d0d11b4fbf () from /home/elly/a/rust/bin/../lib/libruststd.so\n\nNo symbol table info available.\n#2  0x0822be08 in metadata::decoder::get_tag_variants::_c368dee6e6811179 ()\n\nNo symbol table info available.\n#3  0x082362a1 in metadata::csearch::get_tag_variants::_e8e716f68cdf7a7a ()\n\nNo symbol table info available.\n#4  0x080fcdfb in middle::ty::tag_variants::_e8e716f68cdf7a7a ()\n\nNo symbol table info available.\n#5  0x080eed10 in middle::ty::type_structurally_contains::_d3ecdbc7bfa0c1be ()\n\nNo symbol table info available.\n#6  0x080eeefb in middle::ty::type_structurally_contains::_d3ecdbc7bfa0c1be ()\n\nNo symbol table info available.\n#7  0x0806c937 in middle::trans::type_of_tag::_c783f99a0a3b1294 ()\n\nNo symbol table info available.\n#8  0x0806b7b9 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#9  0x0806c200 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#10 0x0806b872 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#11 0x0806c0a4 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#12 0x0806c200 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#13 0x0806c200 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#14 0x0806b872 in middle::trans::type_of_inner::_30355889c5f72f51 ()\n\nNo symbol table info available.\n#15 0x0806b200 in middle::trans::type_of_fn::_75bd64deff4296b5 ()\n\nNo symbol table info available.\n#16 0x0806b612 in middle::trans::type_of_fn_from_ty::_865a599c181364bf ()\n\nNo symbol table info available.\n#17 0x0806cd85 in middle::trans::type_of_ty_param_kinds_and_ty::_d1f13efbd1979a8e ()\n\nNo symbol table info available.\n#18 0x08093fe6 in middle::trans::trans_external_path::_327d3072bf76cf95 ()\n\nNo symbol table info available.\n#19 0x080942c1 in middle::trans::lval_static_fn::_8f45f5f1e545d995 ()\n\nNo symbol table info available.\n#20 0x080952c2 in middle::trans::trans_var::_363ea6fa0d08f815 ()\n\nNo symbol table info available.\n#21 0x08095090 in middle::trans::trans_path::_298815bfd9f339b9 ()\n\nNo symbol table info available.\n#22 0x08098534 in middle::trans::trans_callee::_788f0e9e39d6f4cd ()\n\nNo symbol table info available.\n#23 0x0809fabc in middle::trans::trans_call::_dfdc8184c03e1476 ()\n\nNo symbol table info available.\n#24 0x080a5332 in middle::trans::trans_expr::_3781d1b6b7f35ec1 ()\n\nNo symbol table info available.\n#25 0x080a3cd4 in middle::trans::trans_temp_lval::_ff84ab9c97661aaf ()\n\nNo symbol table info available.\n#26 0x080ab16c in middle::trans::init_local::_7b5c6bb2b3cc6372 ()\n\nNo symbol table info available.\n#27 0x080ac144 in middle::trans::trans_stmt::_e593391235b1739c ()\n\nNo symbol table info available.\n#28 0x080adf42 in middle::trans::trans_block_dps::_132481f5218ad88c ()\n\nNo symbol table info available.\n#29 0x080b0f52 in middle::trans::trans_closure::_4e2dc8cfee2b2174 ()\n\nNo symbol table info available.\n#30 0x080b129a in middle::trans::trans_fn::_32f6ca2feaddcd3f ()\n\nNo symbol table info available.\n#31 0x080b7016 in middle::trans::trans_item::_faf7d233d857cd13 ()\n\nNo symbol table info available.\n#32 0x080c2438 in middle::trans::trans_crate::_bf32c5bee073659b ()\n\nNo symbol table info available.\n#33 0x0829a10b in driver::rustc::compile_input::thunk9027 ()\n\nNo symbol table info available.\n#34 0x082381d9 in driver::rustc::time::_3e691b2a4ba58aee ()\n\nNo symbol table info available.\n#35 0x0823a61e in driver::rustc::compile_input::_78d69b2f483afec7 ()\n\nNo symbol table info available.\n#36 0x08243403 in driver::rustc::main::_cd8b8c8185af3dee ()\n\nNo symbol table info available.\n#37 0x08243acf in _rust_main ()\n\nNo symbol table info available.\n#38 0xf6ecc894 in task_start_wrapper (a=0xf6bc180c) at ./src/rt/rust_task.cpp:208\n\n```\n    task = 0x8341dc0\n    rval = 42\n    failed = false\n    env = <optimized out>\n```\n#39 0xdeadbeef in ?? ()\n\nNo symbol table info available.\n#40 0xf6bc180c in ?? ()\n\nNo symbol table info available.\nBacktrace stopped: previous frame inner to this frame (corrupt stack?)```\n", "closed_by": {"login": "elly", "id": 218734, "node_id": "MDQ6VXNlcjIxODczNA==", "avatar_url": "https://avatars.githubusercontent.com/u/218734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elly", "html_url": "https://github.com/elly", "followers_url": "https://api.github.com/users/elly/followers", "following_url": "https://api.github.com/users/elly/following{/other_user}", "gists_url": "https://api.github.com/users/elly/gists{/gist_id}", "starred_url": "https://api.github.com/users/elly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elly/subscriptions", "organizations_url": "https://api.github.com/users/elly/orgs", "repos_url": "https://api.github.com/users/elly/repos", "events_url": "https://api.github.com/users/elly/events{/privacy}", "received_events_url": "https://api.github.com/users/elly/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/1236/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/1236/timeline", "performed_via_github_app": null, "state_reason": "completed"}