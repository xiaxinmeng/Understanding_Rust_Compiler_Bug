{"url": "https://api.github.com/repos/rust-lang/rust/issues/76279", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/76279/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/76279/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/76279/events", "html_url": "https://github.com/rust-lang/rust/issues/76279", "id": 691779132, "node_id": "MDU6SXNzdWU2OTE3NzkxMzI=", "number": 76279, "title": "Option to output compressed executables", "user": {"login": "Timmmm", "id": 376842, "node_id": "MDQ6VXNlcjM3Njg0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/376842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Timmmm", "html_url": "https://github.com/Timmmm", "followers_url": "https://api.github.com/users/Timmmm/followers", "following_url": "https://api.github.com/users/Timmmm/following{/other_user}", "gists_url": "https://api.github.com/users/Timmmm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Timmmm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Timmmm/subscriptions", "organizations_url": "https://api.github.com/users/Timmmm/orgs", "repos_url": "https://api.github.com/users/Timmmm/repos", "events_url": "https://api.github.com/users/Timmmm/events{/privacy}", "received_events_url": "https://api.github.com/users/Timmmm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234956, "node_id": "MDU6TGFiZWwyMzQ5NTY=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-codegen", "name": "A-codegen", "color": "f7e101", "default": false, "description": "Area: Code generation"}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-09-03T08:54:14Z", "updated_at": "2020-09-08T10:50:31Z", "closed_at": "2020-09-08T09:20:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Because Rust links everything statically it can generate rather large executables. One hacky workaround for this is to compress them using [UPX](https://upx.github.io/). For example I have a fairly small Rust program that ends up as an 11.4 MB executable, but is 2.9 MB when compressed with UPX. Startup time is veeery slightly affected (I haven't measure but it feels like around 0.1-0.2s) but the trade-off would easily be worth it for my use case.\r\n\r\n**It would be really cool if Rust had a native option to compress executables using a system similar to UPX.**\r\n\r\n\"Just use UPX!\" I hear you screaming. I could but there are a few downsides:\r\n\r\n1. It has slightly dubious [license terms](https://upx.github.io/upx-license.html).\r\n2. It's actually impossible to build it from source - they use a closed source compression library. Even using the substitute it is quite difficult to build from source.\r\n3. If you want to build it from source they really don't want to make it easy - they say \"If you can't manage to compile it then the sources are probably not for you. Don't email us for help.\". Not very welcoming.\r\n4. They don't provide binaries for Mac.\r\n5. It's an extra program to obtain, install & run. \"Turn on compression\" is a much more valid rebuttal to \"Rust executables are too large\" than \"Install UPX, oh build it from source if you're on a Mac, then add a custom post-build step somehow...\".\r\n\r\nI realise this is a ton of work but it would be a great feature.", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/76279/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/76279/timeline", "performed_via_github_app": null, "state_reason": "completed"}