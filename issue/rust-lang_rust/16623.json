{"url": "https://api.github.com/repos/rust-lang/rust/issues/16623", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/16623/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/16623/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/16623/events", "html_url": "https://github.com/rust-lang/rust/issues/16623", "id": 40663262, "node_id": "MDU6SXNzdWU0MDY2MzI2Mg==", "number": 16623, "title": "ICE when using an unconstrained typaram in a typaram constraint", "user": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}, {"id": 46741598, "node_id": "MDU6TGFiZWw0Njc0MTU5OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-needs-test", "name": "E-needs-test", "color": "02e10c", "default": false, "description": "Call for participation: writing correctness tests"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2014-08-20T04:54:30Z", "updated_at": "2014-10-16T20:03:57Z", "closed_at": "2014-10-16T20:03:57Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "(I accidentally submitted this incomplete)\n\nI just just ran across this bug that may actually be #16562, but I had a different stack trace so I wasn't completely positive.\n\n``` rust\ntrait Serialize<S> { }\n\nimpl<S> Serialize<S> for () { }\n\nstruct State<W> {\n    writer: W,\n}\n\npub fn to_format_vec<W, T: Serialize<State<W>>>(_value: T) { }\n\nfn main() {\n    let _ = to_format_vec(());\n}\n```\n\nproduces:\n\n```\nbaz2.rs:13:13: 13:26 error: cannot determine a type for this bounded type parameter: unconstrained type\nbaz2.rs:13     let _ = to_format_vec(());\n                       ^~~~~~~~~~~~~\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 't_f should be a trait', /Users/erickt/rust/rust-master/src/librustc/middle/typeck/check/vtable.rs:572\n\nstack backtrace:\n   1:        0x107abfdf5 - rt::backtrace::imp::write::he623acc81864f201rGr\n   2:        0x107ac2fc3 - failure::on_fail::h8f9f19a91c24052dkXr\n   3:        0x107d8d695 - unwind::begin_unwind_inner::h5d3cfad59626c9bcufe\n   4:        0x104578108 - unwind::begin_unwind::h12330958406929428788\n   5:        0x104adad74 - middle::typeck::check::vtable::search_for_vtable::haef69332461a5688NyM\n   6:        0x104ad75aa - middle::typeck::check::vtable::lookup_vtables_for_param::closure.122062\n   7:        0x104a9d27d - middle::ty::each_bound_trait_and_supertraits::h1394aaa7b3715888YlJ\n   8:        0x104ad65ec - middle::typeck::check::vtable::lookup_vtables_for_param::hda7e4f654a5b55a101L\n   9:        0x104ad445b - middle::typeck::check::vtable::lookup_vtables::h215a3cc54c6aa8822VL\n  10:        0x104ae3a24 - middle::typeck::check::vtable::early_resolve_expr::closure.122212\n  11:        0x104ae3442 - middle::typeck::check::FnCtxt<'a>::opt_node_ty_substs::h322d50051e130cb7twV\n  12:        0x104ae1474 - middle::typeck::check::vtable::early_resolve_expr::hc1a86dd775e028b5PUM\n  13:        0x104ae6bdb - visit::walk_expr::h2228446824831897429\n  14:        0x104ae7d3b - visit::walk_local::h15217184139303618153\n  15:        0x104ae848a - middle::typeck::check::vtable::resolve_in_block::h512c693e91bd056eZEN\n  16:        0x104b42774 - middle::typeck::check::check_bare_fn::hea96be15969fc08bWBT\n  17:        0x104b3badb - middle::typeck::check::check_item::h03dd381d5ee24cf84aU\n  18:        0x104b424fd - middle::typeck::check::check_item_types::h66154ed2b2471f75dBT\n  19:        0x10456afe6 - util::common::time::h8593819081890839475\n  20:        0x104d3faac - middle::typeck::check_crate::h01f2334d92065f26Fel\n  21:        0x104e0be60 - driver::driver::phase_3_run_analysis_passes::h875833fb36cd3ebdMPz\n  22:        0x104e06e53 - driver::driver::compile_input::h6f91988ab025da07SBz\n  23:        0x104eaeb82 - driver::run_compiler::h7fbb31eb141b1300M9C\n  24:        0x104ead266 - driver::main_args::closure.137573\n  25:        0x104ebf3bb - task::TaskBuilder<S>::try_future::closure.138734\n  26:        0x104ebf2c5 - task::TaskBuilder<S>::spawn_internal::closure.138711\n  27:        0x1059ae86c - task::spawn_opts::closure.8427\n  28:        0x107df45cc - rust_try_inner\n  29:        0x107df45b6 - rust_try\n  30:        0x107d8aa6b - unwind::try::hb02e6a03665b7aa7K3d\n  31:        0x107d8a80b - task::Task::run::hbb7219e7e81ccdc1Bad\n  32:        0x1059ae6ca - task::spawn_opts::closure.8372\n  33:        0x107d8c626 - thread::thread_start::h41227a904179836dnzd\n  34:     0x7fff82db2899 - _pthread_body\n  35:     0x7fff82db272a - _pthread_struct_init\n```\n\ncc @nikomatsakis\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/16623/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/16623/timeline", "performed_via_github_app": null, "state_reason": "completed"}