{"url": "https://api.github.com/repos/rust-lang/rust/issues/15382", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/15382/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/15382/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/15382/events", "html_url": "https://github.com/rust-lang/rust/issues/15382", "id": 37123870, "node_id": "MDU6SXNzdWUzNzEyMzg3MA==", "number": 15382, "title": "error: internal compiler error: unexpected failure", "user": {"login": "catharsis", "id": 90487, "node_id": "MDQ6VXNlcjkwNDg3", "avatar_url": "https://avatars.githubusercontent.com/u/90487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catharsis", "html_url": "https://github.com/catharsis", "followers_url": "https://api.github.com/users/catharsis/followers", "following_url": "https://api.github.com/users/catharsis/following{/other_user}", "gists_url": "https://api.github.com/users/catharsis/gists{/gist_id}", "starred_url": "https://api.github.com/users/catharsis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catharsis/subscriptions", "organizations_url": "https://api.github.com/users/catharsis/orgs", "repos_url": "https://api.github.com/users/catharsis/repos", "events_url": "https://api.github.com/users/catharsis/events{/privacy}", "received_events_url": "https://api.github.com/users/catharsis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2014-07-03T21:01:14Z", "updated_at": "2014-10-13T07:58:43Z", "closed_at": "2014-10-11T19:18:48Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Trying to run the test suite of cargo, I'm getting the following:\n\n```\n~/repos/cargo on master]\n% RUST_BACKTRACE=1 make test\nmkdir -p target/tests\nrustc --test  -L libs/hammer.rs/target -L libs/toml-rs/build -L libs/hamcrest-rust/target -o target/tests/test-unit src/cargo/lib.rs\nerror: internal compiler error: unexpected failure\nnote: the compiler hit an unexpected failure path. this is a bug.\nnote: we would appreciate a bug report: http://doc.rust-lang.org/complement-bugreport.html\nnote: run with `RUST_BACKTRACE=1` for a backtrace\ntask 'rustc' failed at 'no path elem for NodeLocal(box(GC) ast::Pat{id: 7866u32, node: PatIdent(BindByValue(MutImmutable), ast::Path{span: codemap::Span{lo: codemap::BytePos(29612u32), hi: codemap::BytePos(29621u32), expn_info: Some(box(GC) codemap::ExpnInfo{call_site: codemap::Span{lo: codemap::BytePos(29571u32), hi: codemap::BytePos(29627u32), expn_info: None}, callee: codemap::NameAndSpan{name: collections::string::String{vec: collections::vec::Vec<u8>{len: 8u, cap: 8u, ptr: (0x7fab4e596dc8 as *mut ())}}, format: MacroAttribute, span: None}})}, global: false, segments: collections::vec::Vec<ast::PathSegment>{len: 1u, cap: 1u, ptr: (0x7fab4e0e3400 as *mut ())}}, None), span: codemap::Span{lo: codemap::BytePos(29612u32), hi: codemap::BytePos(29621u32), expn_info: Some(box(GC) codemap::ExpnInfo{call_site: codemap::Span{lo: codemap::BytePos(29571u32), hi: codemap::BytePos(29627u32), expn_info: None}, callee: codemap::NameAndSpan{name: collections::string::String{vec: collections::vec::Vec<u8>{len: 8u, cap: 8u, ptr: (0x7fab4e596dc8 as *mut ())}}, format: MacroAttribute, span: None}})}})', /home/alofgren/aur/rust-git/src/rust/src/libsyntax/ast_map.rs:321\n\nstack backtrace:\n   1:     0x7fab51139370 - rt::backtrace::imp::write::h397515662ce72e2cAKp::v0.11.0.pre\n   2:     0x7fab5113fea0 - <unknown>\n   3:     0x7fab532a33d0 - unwind::begin_unwind_inner::h5e79106c5fa59f28cZd::v0.11.0.pre\n   4:     0x7fab532a2e80 - unwind::begin_unwind_fmt::h9b95b7b930f9c91aFWd::v0.11.0.pre\n   5:     0x7fab52732620 - ast_map::Map::get_path_elem::h73419d40ce3597e0zCv::v0.11.0.pre\n   6:     0x7fab53c27990 - <unknown>\n   7:     0x7fab53c796b0 - middle::trans::callee::trans_unboxing_shim::hb524715cd4f406c1Mve::v0.11.0.pre\n   8:     0x7fab53d64f80 - <unknown>\n   9:     0x7fab53d66b00 - <unknown>\n  10:     0x7fab53c91af0 - middle::trans::meth::trans_trait_cast::h14cd8e924ea283d5apx::v0.11.0.pre\n  11:     0x7fab53c8c710 - <unknown>\n  12:     0x7fab53c8b8d0 - <unknown>\n  13:     0x7fab53c49bc0 - middle::trans::expr::trans::h4f25d7a9b01d5ca9EHf::v0.11.0.pre\n  14:     0x7fab53c855b0 - <unknown>\n  15:     0x7fab53c7c360 - middle::trans::callee::trans_call_inner::hf390267c604319dbS1e::v0.11.0.pre\n  16:     0x7fab53c82150 - middle::trans::callee::trans_call::h93797cefd99903500Ve::v0.11.0.pre\n  17:     0x7fab53c8c710 - <unknown>\n  18:     0x7fab53c479a0 - middle::trans::expr::trans_into::hc84b7ce4a5c359b6JDf::v0.11.0.pre\n  19:     0x7fab53ca0fc0 - <unknown>\n  20:     0x7fab53ca4980 - <unknown>\n  21:     0x7fab53c8c710 - <unknown>\n  22:     0x7fab53c479a0 - middle::trans::expr::trans_into::hc84b7ce4a5c359b6JDf::v0.11.0.pre\n  23:     0x7fab53c47fd0 - middle::trans::controlflow::trans_block::h7cf010ec3c1ce3452ic::v0.11.0.pre\n  24:     0x7fab53d0cd10 - middle::trans::base::trans_closure::h181a5eff97a00197auq::v0.11.0.pre\n  25:     0x7fab53ca23c0 - middle::trans::closure::trans_expr_fn::h0f17ff103f37dd91qov::v0.11.0.pre\n  26:     0x7fab53c8c710 - <unknown>\n  27:     0x7fab53c8b8d0 - <unknown>\n  28:     0x7fab53c49bc0 - middle::trans::expr::trans::h4f25d7a9b01d5ca9EHf::v0.11.0.pre\n  29:     0x7fab53c855b0 - <unknown>\n  30:     0x7fab53c7c360 - middle::trans::callee::trans_call_inner::hf390267c604319dbS1e::v0.11.0.pre\n  31:     0x7fab53c828d0 - middle::trans::callee::trans_method_call::h8f2477eed51b5b808We::v0.11.0.pre\n  32:     0x7fab53c8c710 - <unknown>\n  33:     0x7fab53c8b8d0 - <unknown>\n  34:     0x7fab53c49bc0 - middle::trans::expr::trans::h4f25d7a9b01d5ca9EHf::v0.11.0.pre\n  35:     0x7fab53c855b0 - <unknown>\n  36:     0x7fab53c7c360 - middle::trans::callee::trans_call_inner::hf390267c604319dbS1e::v0.11.0.pre\n  37:     0x7fab53c828d0 - middle::trans::callee::trans_method_call::h8f2477eed51b5b808We::v0.11.0.pre\n  38:     0x7fab53c8c710 - <unknown>\n  39:     0x7fab53c479a0 - middle::trans::expr::trans_into::hc84b7ce4a5c359b6JDf::v0.11.0.pre\n  40:     0x7fab53c47fd0 - middle::trans::controlflow::trans_block::h7cf010ec3c1ce3452ic::v0.11.0.pre\n  41:     0x7fab53c48340 - middle::trans::controlflow::trans_if::hb51e2ec0f0080a33Fmc::v0.11.0.pre\n  42:     0x7fab53c8c710 - <unknown>\n  43:     0x7fab53c479a0 - middle::trans::expr::trans_into::hc84b7ce4a5c359b6JDf::v0.11.0.pre\n  44:     0x7fab53c47fd0 - middle::trans::controlflow::trans_block::h7cf010ec3c1ce3452ic::v0.11.0.pre\n  45:     0x7fab53d0cd10 - middle::trans::base::trans_closure::h181a5eff97a00197auq::v0.11.0.pre\n  46:     0x7fab53c17e20 - middle::trans::base::trans_fn::h373bcbf00aede306bCq::v0.11.0.pre\n  47:     0x7fab53d12ee0 - middle::trans::meth::trans_impl::h09592b4687d1e85c6xw::v0.11.0.pre\n  48:     0x7fab53c108c0 - middle::trans::base::trans_item::h7e22b775ed3e3b90CSq::v0.11.0.pre\n  49:     0x7fab53c108c0 - middle::trans::base::trans_item::h7e22b775ed3e3b90CSq::v0.11.0.pre\n  50:     0x7fab53c108c0 - middle::trans::base::trans_item::h7e22b775ed3e3b90CSq::v0.11.0.pre\n  51:     0x7fab53d1d670 - middle::trans::base::trans_crate::hc5267b3795cf2247JMr::v0.11.0.pre\n  52:     0x7fab545253d0 - driver::driver::phase_4_translate_to_llvm::h6fd3d6e06bbb192c12q::v0.11.0.pre\n  53:     0x7fab5451c110 - driver::driver::compile_input::h5f4c693f5aee1cc7vGq::v0.11.0.pre\n  54:     0x7fab545e8f00 - <unknown>\n  55:     0x7fab545e8e10 - <unknown>\n  56:     0x7fab545fdf30 - <unknown>\n  57:     0x7fab545fdb50 - <unknown>\n  58:     0x7fab535f2c50 - <unknown>\n  59:     0x7fab532f4cd0 - rust_try\n  60:     0x7fab5329f9e0 - unwind::try::h4dcee988f19cdb09BNd::v0.11.0.pre\n  61:     0x7fab5329f6c0 - task::Task::run::ha45a27c5aa7ebb01XYc::v0.11.0.pre\n  62:     0x7fab535f2a10 - <unknown>\n  63:     0x7fab532a2280 - <unknown>\n  64:     0x7fab50bad060 - start_thread\n  65:     0x7fab52f69489 - __clone\n  66:                0x0 - <unknown>\n\nMakefile:68: recipe for target 'target/tests/test-unit' failed\nmake: *** [target/tests/test-unit] Error 101\n```\n\nI was trying to get Cargo to build (d3e28cfe5dada4223), and finally succeeded after applying the following patch to the hammer.rs submodule which follows the wip branch of hammer.rs, that hasn't had master's corresponding such patch applied yet:\n\n``` diff\ndiff --git a/src/hammer.rs b/src/hammer.rs\nindex 83cbed2..f25205a 100644\n--- a/src/hammer.rs\n+++ b/src/hammer.rs\n@@ -172,7 +172,7 @@ impl FlagDecoder {\n\n         source.as_slice().position_elem(&self.canonical_field_name()).or_else(|| {\n             aliases.find(self.current_field.get_ref()).and_then(|&c| {\n-                source.iter().position(|s| s.as_slice()[0] == '-' as u8 && s.as_slice()[1] == c as u8)\n+                source.iter().position(|s| s.as_bytes()[0] == '-' as u8 && s.as_bytes()[1] == c as u8)\n             })\n         })\n     }\n```\n\nRust: rustc 0.11.0-pre (67776ba3dab24a3e281931da437d30ccfc3b04c1 2014-07-03 01:06:38 +0000), built from the rust-git package in the AUR (https://aur.archlinux.org/packages/rust-git/)\nOS: Arch Linux (Linux 3.15.1-1-ARCH #1 SMP PREEMPT, x86_64 GNU/Linux)\n\nLet me know if there's anything else I could do to help out.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/15382/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/15382/timeline", "performed_via_github_app": null, "state_reason": "completed"}