{"url": "https://api.github.com/repos/rust-lang/rust/issues/64514", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/64514/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/64514/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/64514/events", "html_url": "https://github.com/rust-lang/rust/issues/64514", "id": 494201189, "node_id": "MDU6SXNzdWU0OTQyMDExODk=", "number": 64514, "title": "Needed: `cfg(target_feature)` support for hardware floating point detection.", "user": {"login": "Lokathor", "id": 5456384, "node_id": "MDQ6VXNlcjU0NTYzODQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5456384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lokathor", "html_url": "https://github.com/Lokathor", "followers_url": "https://api.github.com/users/Lokathor/followers", "following_url": "https://api.github.com/users/Lokathor/following{/other_user}", "gists_url": "https://api.github.com/users/Lokathor/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lokathor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lokathor/subscriptions", "organizations_url": "https://api.github.com/users/Lokathor/orgs", "repos_url": "https://api.github.com/users/Lokathor/repos", "events_url": "https://api.github.com/users/Lokathor/events{/privacy}", "received_events_url": "https://api.github.com/users/Lokathor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668019, "node_id": "MDU6TGFiZWwyMTE2NjgwMTk=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-lang", "name": "T-lang", "color": "bfd4f2", "default": false, "description": "Relevant to the language team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-16T18:15:58Z", "updated_at": "2019-09-18T13:07:20Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Currently there seems to be no way to detect at compile time if the target will have hardware floating point support.\r\n\r\nDepending on the target arch, this is sometimes expressed in LLVM as a feature named \"hard-float\", or as a feature named \"soft-float\", or even as features named \"f\" and \"d\". It's entirely possible for there to be hardware `f32` support but not `f64` support on some platforms. LLVM has (or should have) all of this info already, based on the target profile. We just don't expose it in Rust.\r\n\r\nFor the record, this is initially needed for libm/compiler-builtins to advance the issue of moving `sqrt` and other float support into `core`, so if this is added as some sort of Nightly-only and perma-unstable ability then that's probably fine since those crates are always built with Nightly and then shipped with the compiler.\r\n\r\nIt feels like this could be a simple PR thing by someone who knows about that part of the cargo/LLVM/rustc interaction, but more likely this is some sort of RFC level change. However, it's also possible that I'm totally wrong and that there is already an arcane way to check for floating point support configuration already, so I'm starting with an issue to try and get some visibility for the problem.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/64514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/64514/timeline", "performed_via_github_app": null, "state_reason": null}