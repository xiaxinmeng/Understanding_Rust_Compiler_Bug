{"url": "https://api.github.com/repos/rust-lang/rust/issues/45840", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/45840/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/45840/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/45840/events", "html_url": "https://github.com/rust-lang/rust/issues/45840", "id": 271961271, "node_id": "MDU6SXNzdWUyNzE5NjEyNzE=", "number": 45840, "title": "Add `Iterator::collect_into<E: Extend>(e: E)`?", "user": {"login": "stuhood", "id": 46740, "node_id": "MDQ6VXNlcjQ2NzQw", "avatar_url": "https://avatars.githubusercontent.com/u/46740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stuhood", "html_url": "https://github.com/stuhood", "followers_url": "https://api.github.com/users/stuhood/followers", "following_url": "https://api.github.com/users/stuhood/following{/other_user}", "gists_url": "https://api.github.com/users/stuhood/gists{/gist_id}", "starred_url": "https://api.github.com/users/stuhood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stuhood/subscriptions", "organizations_url": "https://api.github.com/users/stuhood/orgs", "repos_url": "https://api.github.com/users/stuhood/repos", "events_url": "https://api.github.com/users/stuhood/events{/privacy}", "received_events_url": "https://api.github.com/users/stuhood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 211668062, "node_id": "MDU6TGFiZWwyMTE2NjgwNjI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs-api", "name": "T-libs-api", "color": "bfd4f2", "default": false, "description": "Relevant to the library API team, which will review and decide on the PR/issue."}, {"id": 630652267, "node_id": "MDU6TGFiZWw2MzA2NTIyNjc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-feature-request", "name": "C-feature-request", "color": "f5f1fd", "default": false, "description": "Category: A feature request, i.e: not implemented / a PR."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2017-11-07T19:51:52Z", "updated_at": "2023-03-30T17:23:28Z", "closed_at": "2023-03-30T17:23:27Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hey gang.\r\n\r\nAs originally determined in https://twitter.com/kot_2010/status/927119253324619776, building a *pre-size-hinted* mutable `Vec` as the output of a loop (even for very small `n`) can occasionally be more than twice as fast as `collect`ing into a `Vec`. As demonstrated here https://github.com/stuhood/rust-vec-bench, using `extend` into a pre-size-hinted `Vec` closes most of the gap. \r\n\r\nFocusing on improving `Iterator::size_hint` implementations so that they suggest better sizes for `collect` would likely help reduce this gap. But there are diminishing returns to heuristics, and in many cases users should be able to give better explicit hints.\r\n\r\nThis issue initially proposed adding an `Iterator::collect_with_size_hint` method, but @scottmcm 's suggestion to add `Iterator::collect_into<E: Extend>(e: E) -> E` seems more general, and suggests a useful analogue in `unzip_into<E1: Extend, E2: Extend>(e1: E1, e2: E2) -> (E1, E2)`.", "closed_by": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/45840/reactions", "total_count": 15, "+1": 14, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/45840/timeline", "performed_via_github_app": null, "state_reason": "completed"}