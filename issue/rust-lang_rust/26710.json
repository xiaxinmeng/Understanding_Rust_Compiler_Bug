{"url": "https://api.github.com/repos/rust-lang/rust/issues/26710", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26710/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26710/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26710/events", "html_url": "https://github.com/rust-lang/rust/issues/26710", "id": 92332502, "node_id": "MDU6SXNzdWU5MjMzMjUwMg==", "number": 26710, "title": "Unexpected behaviour with stdin and .lines() on Windows", "user": {"login": "DaniJVaz", "id": 1095533, "node_id": "MDQ6VXNlcjEwOTU1MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1095533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DaniJVaz", "html_url": "https://github.com/DaniJVaz", "followers_url": "https://api.github.com/users/DaniJVaz/followers", "following_url": "https://api.github.com/users/DaniJVaz/following{/other_user}", "gists_url": "https://api.github.com/users/DaniJVaz/gists{/gist_id}", "starred_url": "https://api.github.com/users/DaniJVaz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DaniJVaz/subscriptions", "organizations_url": "https://api.github.com/users/DaniJVaz/orgs", "repos_url": "https://api.github.com/users/DaniJVaz/repos", "events_url": "https://api.github.com/users/DaniJVaz/events{/privacy}", "received_events_url": "https://api.github.com/users/DaniJVaz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2015-07-01T09:48:47Z", "updated_at": "2015-08-13T20:30:58Z", "closed_at": "2015-08-13T20:30:58Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using .lines() for input on Windows always reads an '\\r' at the end of the string.\n\nFor example:\n\n```\nfn main() {\n    use std::io::prelude::*;\n    use std::io;\n\n    let stdin = io::stdin();\n    for line in stdin.lock().lines() {\n        let line = line.unwrap();\n        println!(\"You entered (String): {:?}\", line);\n\n        match line.parse::<i32>() {\n            Ok(num) => println!(\"You entered (i32): {}\", num),\n            Err(_) => println!(\"That was not a number...\"),\n        }\n    }\n}\n```\n\nprints:\n\n```\n2\nYou entered (String): \"2\\r\"\nThat was not a number...\n```\n\nThis complicates even simple tasks, like reading a number in the example, which now needs an extra .trim() to make sure that the '\\r' is removed. \n\nI understand that in some cases having the '\\r' may be useful, but when using .lines() the input should be split into lines according to the line separator, which is \"\\r\\n\" on Windows.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26710/timeline", "performed_via_github_app": null, "state_reason": "completed"}