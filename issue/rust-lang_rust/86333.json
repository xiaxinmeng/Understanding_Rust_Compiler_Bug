{"url": "https://api.github.com/repos/rust-lang/rust/issues/86333", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86333/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86333/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86333/events", "html_url": "https://github.com/rust-lang/rust/issues/86333", "id": 921627452, "node_id": "MDU6SXNzdWU5MjE2Mjc0NTI=", "number": 86333, "title": "Custom inner attribute #![rustfmt::skip] stopped working in Rust 1.52.0 (and 1.52.1)", "user": {"login": "mikebenfield", "id": 543755, "node_id": "MDQ6VXNlcjU0Mzc1NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/543755?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikebenfield", "html_url": "https://github.com/mikebenfield", "followers_url": "https://api.github.com/users/mikebenfield/followers", "following_url": "https://api.github.com/users/mikebenfield/following{/other_user}", "gists_url": "https://api.github.com/users/mikebenfield/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikebenfield/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikebenfield/subscriptions", "organizations_url": "https://api.github.com/users/mikebenfield/orgs", "repos_url": "https://api.github.com/users/mikebenfield/repos", "events_url": "https://api.github.com/users/mikebenfield/events{/privacy}", "received_events_url": "https://api.github.com/users/mikebenfield/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-06-15T17:21:08Z", "updated_at": "2021-07-01T18:18:45Z", "closed_at": "2021-07-01T18:18:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "<!--\r\nThank you for filing a bug report! \ud83d\udc1b Please provide a short summary of the bug,\r\nalong with any information you feel relevant to replicating the bug.\r\n-->\r\n\r\nAs I understand the comments on [this tracking issue](https://github.com/rust-lang/rust/issues/54726), the inner attribute `#![rustfmt::skip]` is supposed to work, and indeed it does on Rust 1.44 through 1.51. But on 1.52.0 and 1.52.1 it fails.\r\n\r\nIt's very possible I'm misunderstanding the comments on that issue, and this is a deliberate change; I certainly see that the error message says `warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!`, but I'm not sure whether that really is meant to apply to this version. It certainly seems from the issue comments that it was a deliberate choice to allow this to work. \r\n\r\nExample:\r\n\r\n```\r\nmbenfield@mbenfield:~/Code$ git clone https://github.com/steveklabnik/semver-parser\r\n<...snip...>\r\nmbenfield@mbenfield:~/Code$ cd semver-parser/\r\nmbenfield@mbenfield:~/Code/semver-parser$ git checkout 4ad3c7b10496d0007af2f327cb50a9897b5b969f\r\n<...snip...>\r\nmbenfield@mbenfield:~/Code/semver-parser$ rustup default 1.52.1\r\n<...snip...>\r\nmbenfield@mbenfield:~/Code/semver-parser$ cargo build\r\n    Updating crates.io index\r\n   Compiling ucd-trie v0.1.3\r\n   Compiling pest v2.1.3\r\n   Compiling semver-parser v0.10.1 (/usr/local/google/home/mbenfield/Code/semver-parser)\r\nerror: custom inner attributes are unstable\r\n --> src/generated.rs:4:4\r\n  |\r\n4 | #![rustfmt::skip]\r\n  |    ^^^^^^^^^^^^^\r\n  |\r\n  = note: `#[deny(soft_unstable)]` on by default\r\n  = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\r\n  = note: for more information, see issue #64266 <https://github.com/rust-lang/rust/issues/64266>\r\n\r\nerror: aborting due to previous error\r\n\r\nerror: could not compile `semver-parser`\r\n\r\nTo learn more, run the command again with --verbose.\r\nmbenfield@mbenfield:~/Code/semver-parser$ rustup default 1.51.0\r\n<...snip...>\r\nmbenfield@mbenfield:~/Code/semver-parser$ cargo build\r\n   Compiling ucd-trie v0.1.3\r\n   Compiling pest v2.1.3\r\n   Compiling semver-parser v0.10.1 (/usr/local/google/home/mbenfield/Code/semver-parser)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 3.56s\r\n\r\n```\r\n", "closed_by": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86333/timeline", "performed_via_github_app": null, "state_reason": "completed"}