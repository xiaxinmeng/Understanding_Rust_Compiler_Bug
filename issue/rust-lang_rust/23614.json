{"url": "https://api.github.com/repos/rust-lang/rust/issues/23614", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/23614/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/23614/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/23614/events", "html_url": "https://github.com/rust-lang/rust/issues/23614", "id": 63562352, "node_id": "MDU6SXNzdWU2MzU2MjM1Mg==", "number": 23614, "title": "Using a public module that uses a private module in main.rs causes linking errors", "user": {"login": "fables-tales", "id": 96662, "node_id": "MDQ6VXNlcjk2NjYy", "avatar_url": "https://avatars.githubusercontent.com/u/96662?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fables-tales", "html_url": "https://github.com/fables-tales", "followers_url": "https://api.github.com/users/fables-tales/followers", "following_url": "https://api.github.com/users/fables-tales/following{/other_user}", "gists_url": "https://api.github.com/users/fables-tales/gists{/gist_id}", "starred_url": "https://api.github.com/users/fables-tales/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fables-tales/subscriptions", "organizations_url": "https://api.github.com/users/fables-tales/orgs", "repos_url": "https://api.github.com/users/fables-tales/repos", "events_url": "https://api.github.com/users/fables-tales/events{/privacy}", "received_events_url": "https://api.github.com/users/fables-tales/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2015-03-22T18:44:38Z", "updated_at": "2015-03-22T18:57:00Z", "closed_at": "2015-03-22T18:57:00Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Copied from: https://stackoverflow.com/questions/29186299/compilation-linking-error-undefined-symbols-for-architecture-x86-64\n\nI have no idea what I'm doing, this is my first serious attempt to do anything with rust.\n\nI'm writing a project that this: line https://github.com/samphippen/rexchange/blob/master/src/lib.rs#L1 in it's lib.rs. When I typed `cargo build` I got the following output:\n\n```\n   $ cargo build --verbose\n       Fresh log v0.2.5\n       Fresh rustc-serialize v0.3.6\n       Fresh libc v0.1.3\n       Fresh rand v0.1.4\n       Fresh uuid v0.1.11\n   Compiling rexchange v0.0.1 (file:///Users/sam/dev/rexchange)\n     Running `rustc src/main.rs --crate-name rexchange --crate-type bin -g --out-dir /Users/sam/dev/rexchange/target/debug --emit=dep-info,link -L dependency=/Users/sam/dev/rexchange/target/debug -L dependency=/Users/sam/dev/rexchange/target/debug/deps --extern uuid=/Users/sam/dev/rexchange/target/debug/deps/libuuid-f80da2be6e37bdc9.rlib --extern rexchange=/Users/sam/dev/rexchange/target/debug/librexchange-436e10ddf2e26a6f.rlib`\nerror: linking with `cc` failed: exit code: 1\nnote: \"cc\" \"-m64\" \"-L\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib\" \"-o\" \"/Users/sam/dev/rexchange/target/debug/rexchange\" \"/Users/sam/dev/rexchange/target/debug/rexchange.o\" \"-Wl,-force_load,/usr/local/lib/rustlib/x86_64-apple-darwin/lib/libmorestack.a\" \"-Wl,-dead_strip\" \"-nodefaultlibs\" \"/Users/sam/dev/rexchange/target/debug/librexchange-436e10ddf2e26a6f.rlib\" \"/Users/sam/dev/rexchange/target/debug/deps/libuuid-f80da2be6e37bdc9.rlib\" \"/Users/sam/dev/rexchange/target/debug/deps/librustc-serialize-6bb45c0d7c639d54.rlib\" \"/Users/sam/dev/rexchange/target/debug/deps/librand-6dfe5258ada5ebf2.rlib\" \"/Users/sam/dev/rexchange/target/debug/deps/liblibc-2a692f33a70517c8.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/libstd-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/libcollections-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/libunicode-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/librand-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/liballoc-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/liblibc-4e7c5e5c.rlib\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib/libcore-4e7c5e5c.rlib\" \"-L\" \"/Users/sam/dev/rexchange/target/debug\" \"-L\" \"/Users/sam/dev/rexchange/target/debug/deps\" \"-L\" \"/usr/local/lib/rustlib/x86_64-apple-darwin/lib\" \"-L\" \"/Users/sam/dev/rexchange/.rust/lib/x86_64-apple-darwin\" \"-L\" \"/Users/sam/dev/rexchange/lib/x86_64-apple-darwin\" \"-lc\" \"-lm\" \"-lSystem\" \"-lpthread\" \"-lc\" \"-lm\" \"-lcompiler-rt\"\nnote: ld: warning: directory not found for option '-L/Users/sam/dev/rexchange/.rust/lib/x86_64-apple-darwin'\nld: warning: directory not found for option '-L/Users/sam/dev/rexchange/lib/x86_64-apple-darwin'\nUndefined symbols for architecture x86_64:\n  \"orders::BidOrder::get_account_id::hbe8193f627eb0daf4ba\", referenced from:\n      main::h6e33cd0005718795haa in rexchange.o\n  \"orders::BidOrder::get_currency_price::hac0a15cbc8d29001Gba\", referenced from:\n      main::h6e33cd0005718795haa in rexchange.o\n  \"orders::BidOrder::get_commodity_amount::hce97000d2a1749beSba\", referenced from:\n      main::h6e33cd0005718795haa in rexchange.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nerror: aborting due to previous error\nCould not compile `rexchange`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/main.rs --crate-name rexchange --crate-type bin -g --out-dir /Users/sam/dev/rexchange/target/debug --emit=dep-info,link -L dependency=/Users/sam/dev/rexchange/target/debug -L dependency=/Users/sam/dev/rexchange/target/debug/deps --extern uuid=/Users/sam/dev/rexchange/target/debug/deps/libuuid-f80da2be6e37bdc9.rlib --extern rexchange=/Users/sam/dev/rexchange/target/debug/librexchange-4\n```\n\nI wasn't expecting this at all, my main.rs doesn't reference those symbols exactly: https://github.com/samphippen/rexchange/blob/master/src/main.rs and also I'd expect a rust error and not a linker level error from clang (if this is an error). \n\nMy Rust compiler version is:\n\n```\n$ rustc --version\nrustc 1.0.0-nightly (3e4be02b8 2015-03-13) (built 2015-03-13)\n```\n\nMy Cargo version is:\n\n```\n$ cargo --version\ncargo 0.0.1-pre-nightly (66849de 2015-03-10) (built 2015-03-11)\n```\n\nmarking the orders module as public fixed the issue.\n", "closed_by": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/23614/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/23614/timeline", "performed_via_github_app": null, "state_reason": "completed"}