{"url": "https://api.github.com/repos/rust-lang/rust/issues/37998", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37998/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37998/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37998/events", "html_url": "https://github.com/rust-lang/rust/issues/37998", "id": 191690458, "node_id": "MDU6SXNzdWUxOTE2OTA0NTg=", "number": 37998, "title": "Printing constant division by zero causes compiler panic", "user": {"login": "xfix", "id": 1297598, "node_id": "MDQ6VXNlcjEyOTc1OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xfix", "html_url": "https://github.com/xfix", "followers_url": "https://api.github.com/users/xfix/followers", "following_url": "https://api.github.com/users/xfix/following{/other_user}", "gists_url": "https://api.github.com/users/xfix/gists{/gist_id}", "starred_url": "https://api.github.com/users/xfix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xfix/subscriptions", "organizations_url": "https://api.github.com/users/xfix/orgs", "repos_url": "https://api.github.com/users/xfix/repos", "events_url": "https://api.github.com/users/xfix/events{/privacy}", "received_events_url": "https://api.github.com/users/xfix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 256133398, "node_id": "MDU6TGFiZWwyNTYxMzMzOTg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-mir", "name": "A-mir", "color": "f7e101", "default": false, "description": "Area: Mid-level IR (MIR) - https://blog.rust-lang.org/2016/04/19/MIR.html"}, {"id": 268744493, "node_id": "MDU6TGFiZWwyNjg3NDQ0OTM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-const-fn", "name": "A-const-fn", "color": "f7e101", "default": false, "description": "Area: const fn foo(..) {..}. Pure functions which can be applied at compile time."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2016-11-25T12:18:40Z", "updated_at": "2018-03-06T17:12:59Z", "closed_at": "2018-03-06T17:12:59Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Trying to print constant that is division by zero causes Rust compiler panic\r\n\r\nI tried this code:\r\n\r\n```rust\r\nconst WHY: i32 = 1 / 0;\r\n\r\nfn main() {\r\n    println!(\"{}\", WHY);\r\n}\r\n```\r\n\r\nI expected to see this happen: Just an error\r\n\r\nInstead, this happened:\r\n\r\n```\r\nwarning: constant evaluation error: attempt to divide by zero. This will become a HARD ERROR in the future, #[warn(const_err)] on by default\r\n --> x.rs:1:18\r\n  |\r\n1 | const WHY: i32 = 1 / 0;\r\n  |                  ^^^^^\r\n\r\nerror[E0080]: constant evaluation error\r\n --> x.rs:1:18\r\n  |\r\n1 | const WHY: i32 = 1 / 0;\r\n  |                  ^^^^^ attempt to divide by zero\r\n\r\nerror: internal compiler error: src/librustc_trans/mir/constant.rs:392: tmp0 not initialized\r\n --> x.rs:4:20\r\n  |\r\n4 |     println!(\"{}\", WHY);\r\n  |                    ^^^\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:602\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\r\n\r\n## Meta\r\n\r\n`rustc --version --verbose`:\r\n\r\n```\r\nrustc 1.13.0\r\nbinary: rustc\r\ncommit-hash: unknown\r\ncommit-date: unknown\r\nhost: x86_64-unknown-freebsd\r\nrelease: 1.13.0\r\n```\r\n\r\nBacktrace:\r\n\r\n(Rust on FreeBSD installed from repository doesn't show a backtrace, and I'm not in home right now, this stacktrace comes from playpen)\r\n\r\n```\r\nthread 'rustc' panicked at 'Box<Any>', ../src/librustc_errors/lib.rs:602\r\nstack backtrace:\r\n   1:     0x7f4ec53b785f - std::sys::backtrace::tracing::imp::write::h6f1d53a70916b90d\r\n   2:     0x7f4ec53c6dbd - std::panicking::default_hook::{{closure}}::h137e876f7d3b5850\r\n   3:     0x7f4ec53c422e - std::panicking::default_hook::h0ac3811ec7cee78c\r\n   4:     0x7f4ec53c4918 - std::panicking::rust_panic_with_hook::hc303199e04562edf\r\n   5:     0x7f4ec3efb378 - std::panicking::begin_panic::hf3c77cb5fd5814c4\r\n   6:     0x7f4ec3ff0df5 - rustc::session::opt_span_bug_fmt::{{closure}}::hf0e25c590c479ec5\r\n   7:     0x7f4ec3f1985a - rustc::session::span_bug_fmt::h42d4c0a219d5e4ec\r\n   8:     0x7f4ec3fcfe36 - rustc_trans::mir::constant::MirConstContext::const_lvalue::h19c47a857fb60d91\r\n   9:     0x7f4ec3fd1620 - rustc_trans::mir::constant::MirConstContext::const_rvalue::h8c7c680bb5d720f3\r\n  10:     0x7f4ec3fce08b - rustc_trans::mir::constant::MirConstContext::trans::h96c052b8d8423eda\r\n  11:     0x7f4ec3fd512c - rustc_trans::mir::constant::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_constant::hdfac2835d2e37417\r\n  12:     0x7f4ec3fd6dca - rustc_trans::mir::operand::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_operand::h1937d4fb09193ffc\r\n  13:     0x7f4ec3fda22c - rustc_trans::mir::rvalue::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_rvalue_operand::ha8ed8ebcb69127d4\r\n  14:     0x7f4ec3fc6264 - rustc_trans::mir::block::<impl rustc_trans::mir::MirContext<'bcx, 'tcx>>::trans_block::hadeb870961b3c139\r\n  15:     0x7f4ec3fc4168 - rustc_trans::mir::trans_mir::h5581e064c4dd5b26\r\n  16:     0x7f4ec3f61d2c - rustc_trans::base::trans_closure::h62865eeceeb9846e\r\n  17:     0x7f4ec3fe3cc3 - rustc_trans::trans_item::TransItem::define::h2b8862ddc7ac3e96\r\n  18:     0x7f4ec3f65414 - rustc_trans::base::trans_crate::h7b6c2eb43ae0c1da\r\n  19:     0x7f4ec5748a0d - rustc_driver::driver::phase_4_translate_to_llvm::h0646ffc4a1716d29\r\n  20:     0x7f4ec5783e2a - rustc_driver::driver::compile_input::{{closure}}::h5a81b1e8a8f3f531\r\n  21:     0x7f4ec576f6a3 - rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::h4091eeab6f271a29\r\n  22:     0x7f4ec57463ad - rustc_driver::driver::phase_3_run_analysis_passes::hff1c31d493acfd09\r\n  23:     0x7f4ec5732a39 - rustc_driver::driver::compile_input::hef221f9f618e92f5\r\n  24:     0x7f4ec575d206 - rustc_driver::run_compiler::h7dddd4089f8330b4\r\n  25:     0x7f4ec56992c3 - std::panicking::try::do_call::h1e3ece12e3f812df\r\n  26:     0x7f4ec53cecb6 - __rust_maybe_catch_panic\r\n  27:     0x7f4ec56b74f9 - <F as alloc::boxed::FnBox<A>>::call_box::h05b222e46803eb30\r\n  28:     0x7f4ec53c2c80 - std::sys::thread::Thread::new::thread_start::h759e10bc4abc7e72\r\n  29:     0x7f4ebe30c709 - start_thread\r\n  30:     0x7f4ec508682c - clone\r\n  31:                0x0 - <unknown>\r\n```", "closed_by": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37998/timeline", "performed_via_github_app": null, "state_reason": "completed"}