{"url": "https://api.github.com/repos/rust-lang/rust/issues/6540", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/6540/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/6540/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/6540/events", "html_url": "https://github.com/rust-lang/rust/issues/6540", "id": 14423782, "node_id": "MDU6SXNzdWUxNDQyMzc4Mg==", "number": 6540, "title": "Rust fails when compiling with --lib", "user": {"login": "peacememories", "id": 1326334, "node_id": "MDQ6VXNlcjEzMjYzMzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1326334?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peacememories", "html_url": "https://github.com/peacememories", "followers_url": "https://api.github.com/users/peacememories/followers", "following_url": "https://api.github.com/users/peacememories/following{/other_user}", "gists_url": "https://api.github.com/users/peacememories/gists{/gist_id}", "starred_url": "https://api.github.com/users/peacememories/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peacememories/subscriptions", "organizations_url": "https://api.github.com/users/peacememories/orgs", "repos_url": "https://api.github.com/users/peacememories/repos", "events_url": "https://api.github.com/users/peacememories/events{/privacy}", "received_events_url": "https://api.github.com/users/peacememories/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 36996, "node_id": "MDU6TGFiZWwzNjk5Ng==", "url": "https://api.github.com/repos/rust-lang/rust/labels/E-easy", "name": "E-easy", "color": "02e10c", "default": false, "description": "Call for participation: Experience needed to fix: Easy / not much (good first issue)"}, {"id": 234948, "node_id": "MDU6TGFiZWwyMzQ5NDg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-attributes", "name": "A-attributes", "color": "f7e101", "default": false, "description": "Area: #[attributes(..)]"}, {"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2013-05-16T19:58:28Z", "updated_at": "2013-09-02T21:15:51Z", "closed_at": "2013-09-02T21:15:51Z", "author_association": "NONE", "active_lock_reason": null, "body": "Crate:\n\n``` rust\n#[link(name = \"glm\", vers = \"\", author = \"Gabriel Pickl\")];\n#[crate_type = \"lib\"]\n\nextern mod std;\n\nmod vec3;\n```\n\nModule:\n\n``` rust\n/******\n * This file is generated with RustyCage\n */\nstruct Vec3 {\n    x: float,\n    y: float,\n    z: float\n}\n\nimpl ToStr for Vec3 {\n    fn to_str(&self) -> ~str { fmt!(\"vec3(%f, %f, %f)\", self.x, self.y, self.z) }\n}\n```\n\nLog:\n\n> rust: task failed at 'assertion failed: !ecx.link_meta.vers.is_empty()', /build/src/rust-0.6/src/librustc/metadata/encoder.rs:1168\n> /usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f536904264b]\n> /usr/lib/librustrt.so(+0x2a189)[0x7f5369053189]\n> /usr/lib/librustrt.so(upcall_fail+0x198)[0x7f53690443a8]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1055db)[0x7f536c24b5db]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x105582)[0x7f536c24b582]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_61fe198059b9e3fc3_06E+0x71)[0x7f536c193651]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys11fail_assert17_10b61817f19c764b3_06E+0x228)[0x7f536c19ccc8]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x840969)[0x7f536b198969]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8d04)[0x7f536b210d04]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN8metadata7encoder15encode_metadata16_8385b7ed921fd0e3_06E+0x5d8)[0x7f536abe69f8]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base14write_metadata17_426355cd9989416d3_06E+0x113)[0x7f536abe5f03]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN6middle5trans4base11trans_crate15_aa5d2b86af98143_06E+0x148a)[0x7f536abec03a]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x87a5c0)[0x7f536b1d25c0]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_rest17_b2b258b84b35f3533_06E+0x331e)[0x7f536b1cf5ce]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8d04)[0x7f536b210d04]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver12compile_upto17_12335154b455986e3_06E+0x108)[0x7f536b1d27d8]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8d04)[0x7f536b210d04]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN6driver6driver13compile_input15_bb29edf7a232863_06E+0xca)[0x7f536b1d2c1a]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN12run_compiler17_64d52739a36d169c3_06E+0x20aa)[0x7f536b20219a]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b67d1)[0x7f536b20e7d1]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b2ffc)[0x7f536b20affc]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8d04)[0x7f536b210d04]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0xce08e)[0x7f536c21408e]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14dcb4)[0x7f536c293cb4]\n> /usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f5369042e64]\n> error: internal compiler error: unexpected failure\n> note: the compiler hit an unexpected failure path. this is a bug\n> note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues\n> rust: task failed at 'explicit failure', /build/src/rust-0.6/src/librustc/rustc.rc:357\n> /usr/lib/librustrt.so(_ZN9rust_task13begin_failureEPKcS1_m+0x4b)[0x7f536904264b]\n> /usr/lib/librustrt.so(+0x2a189)[0x7f5369053189]\n> /usr/lib/librustrt.so(upcall_fail+0x198)[0x7f53690443a8]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x1055db)[0x7f536c24b5db]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x105582)[0x7f536c24b582]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(_ZN3sys12begin_unwind17_61fe198059b9e3fc3_06E+0x71)[0x7f536c193651]\n> /usr/lib/libcore-c3ca5d77d81b46c1-0.6.so(+0x14dcb4)[0x7f536c293cb4]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN7monitor17_78935df9ff9e1afa3_06E+0x1577)[0x7f536b2047c7]\n> /usr/lib/librustc-c84825241471686d-0.6.so(+0x8b8d04)[0x7f536b210d04]\n> /usr/lib/librustc-c84825241471686d-0.6.so(_ZN4main15_c4de63b748e03d3_06E+0x7e)[0x7f536b21091e]\n> /usr/lib/librustrt.so(_Z18task_start_wrapperP10spawn_args+0x24)[0x7f5369042e64]\n> rust: domain main @0x1b3c3c0 root task failed\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/6540/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/6540/timeline", "performed_via_github_app": null, "state_reason": "completed"}