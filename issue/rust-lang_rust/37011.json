{"url": "https://api.github.com/repos/rust-lang/rust/issues/37011", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/37011/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/37011/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/37011/events", "html_url": "https://github.com/rust-lang/rust/issues/37011", "id": 181551760, "node_id": "MDU6SXNzdWUxODE1NTE3NjA=", "number": 37011, "title": "Intermingled JSON output from concurrent compilers", "user": {"login": "Boddlnagg", "id": 1024333, "node_id": "MDQ6VXNlcjEwMjQzMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1024333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Boddlnagg", "html_url": "https://github.com/Boddlnagg", "followers_url": "https://api.github.com/users/Boddlnagg/followers", "following_url": "https://api.github.com/users/Boddlnagg/following{/other_user}", "gists_url": "https://api.github.com/users/Boddlnagg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Boddlnagg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Boddlnagg/subscriptions", "organizations_url": "https://api.github.com/users/Boddlnagg/orgs", "repos_url": "https://api.github.com/users/Boddlnagg/repos", "events_url": "https://api.github.com/users/Boddlnagg/events{/privacy}", "received_events_url": "https://api.github.com/users/Boddlnagg/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2016-10-06T23:40:38Z", "updated_at": "2017-05-14T20:15:45Z", "closed_at": "2017-05-14T20:15:45Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "I don't know whether this is the right way to report this, since I found two related issues (https://github.com/rust-lang/rust/issues/32486 and https://github.com/rust-lang/rust/issues/30559), but my case is a bit different. It might also be a cargo issue.\n\nIn order to get JSON output from `cargo`, I passed `--error-format json` through `RUSTFLAGS`. When multiple crates are compiled in parallel, sometimes their build output is intermingled:\n\n```\n   Compiling library1 v0.1.0 (file:///D:/Code/Rust/dependency_test/library1)\n   Compiling library2 v0.1.0 (file:///D:/Code/Rust/dependency_test/library2)\n{\"message\":\"function is never used: `foobar2`, #[warn(dead_code)] on by default\",\"{\"message\":\"function is never used: `foobar`, #[warn(dead_code)] on by default\",\"code\":codenull,\"level\":\"warning\"\":,\"spans\":[null,\"level\":\"warning{\"file_name\":\"D:\\\\Code\",\"\\\\Rust\\\\dependency_test\\\\library1\\\\spans\":[{\"file_name\"src\\\\lib.rs\":\"D:,\"byte_start\":0,\"byte_end\"\\\\Code\\\\Rust\\\\dependency_test\\\\library2\\\\src\\\\lib.rs\",:30,\"line_start\":1,\"byte_start\":\"line_end\":4,0,\"byte_end\"column_start\":1,\"\":31,column_end\":2,\"is_primary\"\"line_start\":1,\"line_end:true,\"text\"\":4,\"column_start\":1,\"column_end\":2,\"is_primary\":true:[{\"text\":\"fn foobar()\",\"highlight_start\":1,\"highlight_end\":,\"text\":12},{\"text\":\"{\",\"highlight_start\":1,\"highlight_end\":2},[{\"text{\"text\":\"    let x = 2;\",\"highlight_start\":1,\"highlight_end\":15},{\"text\":\"}\",\"highlight_start\":\":\"fn foobar2()\",\"highlight_start\":1,\"highlight_end\":131,\"highlight_end\":2}],\"label\":null,\"suggested_replacement\":null,\"expansion\":},{\"text\":\"{\",\"highlight_start\":1,\"highlight_end\":2},{\"nulltext\":\"    let y = 2;\",\"highlight_start\"}],\"children\":[:1,\"highlight_end\":15],\"rendered\":null}\n},{\"text\":\"}\",{\"message\":\"unused variable: `x`, #[warn(unused_variables)] on by default\",\"code\":null,\"level\":\"warning\",\"spans\":[{\"file_name\":\"D:\\\\Code\\\\Rust\\\\dependency_test\\\\library1\\\\src\\\\lib.rs\",\"byte_start\":22,\"byte_end\":23,\"line_start\"\"highlight_start\"::1,\"highlight_end\":32}],\"label\":null,\"line_end\":3,\"column_start\",\"suggested_replacement\":null,\"expansion\":null}],\"children\":[:9,\"column_end\":10,\"is_primary\":true,\"text\":[{\"text\":\"    let x = 2;\",\"highlight_start],\"rendered\":null}\n\":9,\"highlight_end\":10{\"message\":\"unused variable: `y`, #[warn(unused_variables)] on by default\",\"code\":null,\"level\":\"warning\",\"spans\":[{\"file_name\":\"D:\\\\Code\\\\Rust\\\\dependency_test\\\\}],\"label\":null,\"suggested_replacement\":null,\"expansion\":null}library2],\"children\"\\\\src\\\\lib.rs\",\"byte_start\":23,\"byte_end\"::[],\"rendered\":null}\n24,\"line_start\":3,\"line_end\":3,\"column_start\":9,\"column_end\":10,\"is_primary\":true,\"text\":[{\"text\":\"    let y = 2;\",\"highlight_start\":9,\"highlight_end\":10}],\"label\":null,\"suggested_replacement\":null,\"expansion\":null}],\"children\":[],\"rendered\":null}\n   Compiling testbin v0.1.0 (file:///D:/Code/Rust/dependency_test/binary)\n{\"message\":\"incorrect close delimiter: `}`\",\"code\":null,\"level\":\"error\",\"spans\":[{\"file_name\":\"src\\\\main.rs\",\"byte_start\":41,\"byte_end\":42,\"line_start\":3,\"line_end\":3,\"column_start\":1,\"column_end\":2,\"is_primary\":true,\"text\":[{\"text\":\"}\",\"highlight_start\":1,\"highlight_end\":2}],\"label\":null,\"suggested_replacement\":null,\"expansion\":null}],\"children\":[{\"message\":\"unclosed delimiter\",\"code\":null,\"level\":\"note\",\"spans\":[{\"file_name\":\"src\\\\main.rs\",\"byte_start\":24,\"byte_end\":25,\"line_start\":2,\"line_end\":2,\"column_start\":13,\"column_end\":14,\"is_primary\":true,\"text\":[{\"text\":\"    println!(\\\"Hello, world!\\\"\",\"highlight_start\":13,\"highlight_end\":14}],\"label\":null,\"suggested_replacement\":null,\"expansion\":null}],\"children\":[],\"rendered\":null}],\"rendered\":null}\n{\"message\":\"aborting due to previous error\",\"code\":null,\"level\":\"error\",\"spans\":[],\"children\":[],\"rendered\":null}\nerror: Could not compile `testbin`.\n\nTo learn more, run the command again with --verbose.\n```\n\nThis also happens when redirecting stderr (where Cargo prints its output) to a file, so I won't be able to parse those messages correctly.\n\nI'm using the latest nightlies:\n\n```\nD:\\Code\\Rust\\dependency_test\\binary>cargo -V\ncargo 0.13.0-nightly (a713da1 2016-10-05)\n\nD:\\Code\\Rust\\dependency_test\\binary>rustc -V\nrustc 1.14.0-nightly (3210fd5c2 2016-10-05)\n```\n", "closed_by": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/37011/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/37011/timeline", "performed_via_github_app": null, "state_reason": "completed"}