{"url": "https://api.github.com/repos/rust-lang/rust/issues/28409", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/28409/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/28409/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/28409/events", "html_url": "https://github.com/rust-lang/rust/issues/28409", "id": 106455354, "node_id": "MDU6SXNzdWUxMDY0NTUzNTQ=", "number": 28409, "title": "internal compiler error: unexpected panic (ERROR:rbml::reader: failed to find block with tag 56)", "user": {"login": "dermetfan", "id": 4956158, "node_id": "MDQ6VXNlcjQ5NTYxNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/4956158?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dermetfan", "html_url": "https://github.com/dermetfan", "followers_url": "https://api.github.com/users/dermetfan/followers", "following_url": "https://api.github.com/users/dermetfan/following{/other_user}", "gists_url": "https://api.github.com/users/dermetfan/gists{/gist_id}", "starred_url": "https://api.github.com/users/dermetfan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dermetfan/subscriptions", "organizations_url": "https://api.github.com/users/dermetfan/orgs", "repos_url": "https://api.github.com/users/dermetfan/repos", "events_url": "https://api.github.com/users/dermetfan/events{/privacy}", "received_events_url": "https://api.github.com/users/dermetfan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2015-09-15T00:51:27Z", "updated_at": "2015-09-23T19:00:46Z", "closed_at": "2015-09-20T18:49:39Z", "author_association": "NONE", "active_lock_reason": null, "body": "I'm trying to run a clone of https://github.com/pistondevelopers/piston-examples (at revision 88ee3ff1f1dde20ef9c6d71c098d3abbaba38039).\n\nThe following commands work (which means that the program crashes on my system, but that already happened before so it shouldn't be related to this issue):\n- `cargo run --bin hello_world`\n- `cargo run --bin sprite`\n\nThe following fail with the exact same error messages:\n- `cargo run --bin draw_state`\n- `cargo run --bin image`\n- `cargo run --bin paint`\n- `cargo run --bin deform`\n- `cargo run --bin cube`\n- `cargo run --bin texure_swap`\n\nWhich are (using `--bin texture_swap` but like I said the error is always the same):\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ cargo run --bin texture_swap\n   Compiling piston-examples v0.0.0 (file:///home/dermetfan/documents/development/rust/piston-examples)\nERROR:rbml::reader: failed to find block with tag 56\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'explicit panic', src/librbml/lib.rs:395\n\n\nCould not compile `piston-examples`.\n\nTo learn more, run the command again with --verbose.\n```\n\nSo I ran it with `RUST_BACKTRACE=1`:\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ RUST_BACKTRACE=1 cargo run --bin texture_swap\n   Compiling piston-examples v0.0.0 (file:///home/dermetfan/documents/development/rust/piston-examples)\nERROR:rbml::reader: failed to find block with tag 56\nCould not compile `piston-examples`.\n\nTo learn more, run the command again with --verbose.\n```\n\nNothing new here... So I ran it again with `--verbose`:\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ cargo run --bin texture_swap --verbose\n       Fresh rustc-serialize v0.3.16\n       Fresh interpolation v0.1.0\n       Fresh lzw v0.8.0\n       Fresh pkg-config v0.3.5\n       Fresh shader_version v0.2.1\n       Fresh winapi-build v0.1.1\n       Fresh piston-shaders_graphics2d v0.1.0\n       Fresh color_quant v1.0.0\n       Fresh piston-texture v0.2.3\n       Fresh bitflags v0.3.2\n       Fresh glob v0.2.10\n       Fresh khronos_api v0.0.8\n       Fresh find_folder v0.2.0\n       Fresh libc v0.1.10\n       Fresh gcc v0.3.13\n       Fresh winapi v0.2.2\n       Fresh lazy_static v0.1.14\n       Fresh read_color v0.1.0\n       Fresh byteorder v0.3.13\n       Fresh bitflags v0.1.1\n       Fresh piston-float v0.1.0\n       Fresh khronos_api v0.0.5\n       Fresh khronos_api v0.0.7\n       Fresh gif v0.5.0\n       Fresh draw_state v0.2.0\n       Fresh xml-rs v0.1.26\n       Fresh gl_common v0.0.4\n       Fresh dylib v0.0.1\n       Fresh dlib v0.1.1\n       Fresh log v0.3.2\n       Fresh clock_ticks v0.0.6\n       Fresh shared_library v0.1.0\n       Fresh piston-viewport v0.1.0\n       Fresh vecmath v0.1.1\n       Fresh x11-dl v2.0.1\n       Fresh wayland-client v0.2.1\n       Fresh gl_generator v0.0.26\n       Fresh gl_generator v0.0.27\n       Fresh osmesa-sys v0.0.5\n       Fresh pistoncore-input v0.5.1\n       Fresh quaternion v0.1.0\n       Fresh piston2d-graphics v0.9.0\n       Fresh kernel32-sys v0.1.4\n       Fresh advapi32-sys v0.1.2\n       Fresh miniz-sys v0.1.5\n       Fresh libz-sys v0.1.8\n       Fresh pistoncore-window v0.9.1\n       Fresh piston-ai_behavior v0.8.0\n       Fresh piston2d-drag_controller v0.7.0\n       Fresh piston3d-cam v0.1.0\n       Fresh rand v0.3.11\n       Fresh flate2 v0.2.8\n       Fresh freetype-sys v0.1.2\n       Fresh pistoncore-event_loop v0.10.1\n       Fresh camera_controllers v0.7.0\n       Fresh tempfile v1.1.1\n       Fresh num v0.1.27\n       Fresh uuid v0.1.17\n       Fresh tempdir v0.3.4\n       Fresh gfx_gl v0.1.4\n       Fresh gl v0.0.12\n       Fresh freetype-rs v0.3.1\n       Fresh piston v0.10.1\n       Fresh wayland-window v0.1.0\n       Fresh gfx v0.7.0\n       Fresh sdl2-sys v0.6.2\n       Fresh enum_primitive v0.0.1\n       Fresh png v0.3.1\n       Fresh piston2d-sprite v0.14.0\n       Fresh mmap v0.1.1\n       Fresh gfx_device_gl v0.5.0\n       Fresh sdl2 v0.9.1\n       Fresh image v0.3.12\n       Fresh wayland-kbd v0.2.0\n       Fresh pistoncore-sdl2_window v0.13.0\n       Fresh piston-gfx_texture v0.3.0\n       Fresh glutin v0.3.5\n       Fresh piston2d-gfx_graphics v0.9.0\n       Fresh pistoncore-glutin_window v0.12.0\n       Fresh piston_window v0.20.0\n   Compiling piston-examples v0.0.0 (file:///home/dermetfan/documents/development/rust/piston-examples)\n     Running `rustc src/texture_swap.rs --crate-name texture_swap --crate-type bin -g --out-dir /home/dermetfan/documents/development/rust/piston-examples/target/debug --emit=dep-info,link -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps --extern ai_behavior=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libai_behavior-c187fd481eefb02c.rlib --extern image=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libimage-be786b22ce00fa31.rlib --extern camera_controllers=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libcamera_controllers-0769ad16934a93c5.rlib --extern sdl2_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsdl2_window-ce150be33225003a.rlib --extern piston_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libpiston_window-20bf2651ff3b42bc.rlib --extern sprite=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsprite-a7a1cfcf2134d3b5.rlib --extern gfx_device_gl=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx_device_gl-6636b2e928090e69.rlib --extern vecmath=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libvecmath-7b01827101f36537.rlib --extern rand=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/librand-bdfcc55d3466feb3.rlib --extern find_folder=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libfind_folder-ea46062a64606452.rlib --extern gfx=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx-d474876570dc49a0.rlib --extern drag_controller=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libdrag_controller-5f136524f1122807.rlib -L native=/home/dermetfan/documents/development/rust/piston-examples/target/debug/build/miniz-sys-9343607e1ddc701d/out`\nERROR:rbml::reader: failed to find block with tag 56\nerror: internal compiler error: unexpected panic\nnote: the compiler unexpectedly panicked. this is a bug.\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\nnote: run with `RUST_BACKTRACE=1` for a backtrace\nthread 'rustc' panicked at 'explicit panic', src/librbml/lib.rs:395\n\n\nCould not compile `piston-examples`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/texture_swap.rs --crate-name texture_swap --crate-type bin -g --out-dir /home/dermetfan/documents/development/rust/piston-examples/target/debug --emit=dep-info,link -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps --extern ai_behavior=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libai_behavior-c187fd481eefb02c.rlib --extern image=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libimage-be786b22ce00fa31.rlib --extern camera_controllers=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libcamera_controllers-0769ad16934a93c5.rlib --extern sdl2_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsdl2_window-ce150be33225003a.rlib --extern piston_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libpiston_window-20bf2651ff3b42bc.rlib --extern sprite=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsprite-a7a1cfcf2134d3b5.rlib --extern gfx_device_gl=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx_device_gl-6636b2e928090e69.rlib --extern vecmath=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libvecmath-7b01827101f36537.rlib --extern rand=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/librand-bdfcc55d3466feb3.rlib --extern find_folder=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libfind_folder-ea46062a64606452.rlib --extern gfx=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx-d474876570dc49a0.rlib --extern drag_controller=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libdrag_controller-5f136524f1122807.rlib -L native=/home/dermetfan/documents/development/rust/piston-examples/target/debug/build/miniz-sys-9343607e1ddc701d/out` (exit code: 101)\n```\n\nAnd finally with `RUST_BACKTRACE=1` and `--verbose`:\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ RUST_BACKTRACE=1 cargo run --bin texture_swap --verbose\n       Fresh pkg-config v0.3.5\n       Fresh piston-texture v0.2.3\n       Fresh khronos_api v0.0.5\n       Fresh rustc-serialize v0.3.16\n       Fresh khronos_api v0.0.8\n       Fresh piston-shaders_graphics2d v0.1.0\n       Fresh khronos_api v0.0.7\n       Fresh lzw v0.8.0\n       Fresh interpolation v0.1.0\n       Fresh winapi v0.2.2\n       Fresh libc v0.1.10\n       Fresh color_quant v1.0.0\n       Fresh winapi-build v0.1.1\n       Fresh shader_version v0.2.1\n       Fresh piston-float v0.1.0\n       Fresh gcc v0.3.13\n       Fresh find_folder v0.2.0\n       Fresh lazy_static v0.1.14\n       Fresh byteorder v0.3.13\n       Fresh glob v0.2.10\n       Fresh read_color v0.1.0\n       Fresh bitflags v0.3.2\n       Fresh bitflags v0.1.1\n       Fresh dylib v0.0.1\n       Fresh gl_common v0.0.4\n       Fresh log v0.3.2\n       Fresh clock_ticks v0.0.6\n       Fresh dlib v0.1.1\n       Fresh gif v0.5.0\n       Fresh vecmath v0.1.1\n       Fresh piston-viewport v0.1.0\n       Fresh shared_library v0.1.0\n       Fresh draw_state v0.2.0\n       Fresh xml-rs v0.1.26\n       Fresh x11-dl v2.0.1\n       Fresh wayland-client v0.2.1\n       Fresh quaternion v0.1.0\n       Fresh pistoncore-input v0.5.1\n       Fresh osmesa-sys v0.0.5\n       Fresh piston2d-graphics v0.9.0\n       Fresh gl_generator v0.0.26\n       Fresh gl_generator v0.0.27\n       Fresh advapi32-sys v0.1.2\n       Fresh kernel32-sys v0.1.4\n       Fresh piston3d-cam v0.1.0\n       Fresh piston-ai_behavior v0.8.0\n       Fresh pistoncore-window v0.9.1\n       Fresh piston2d-drag_controller v0.7.0\n       Fresh libz-sys v0.1.8\n       Fresh miniz-sys v0.1.5\n       Fresh rand v0.3.11\n       Fresh camera_controllers v0.7.0\n       Fresh pistoncore-event_loop v0.10.1\n       Fresh freetype-sys v0.1.2\n       Fresh flate2 v0.2.8\n       Fresh tempdir v0.3.4\n       Fresh uuid v0.1.17\n       Fresh num v0.1.27\n       Fresh tempfile v1.1.1\n       Fresh piston v0.10.1\n       Fresh freetype-rs v0.3.1\n       Fresh gfx_gl v0.1.4\n       Fresh gl v0.0.12\n       Fresh mmap v0.1.1\n       Fresh piston2d-sprite v0.14.0\n       Fresh enum_primitive v0.0.1\n       Fresh png v0.3.1\n       Fresh gfx v0.7.0\n       Fresh sdl2-sys v0.6.2\n       Fresh wayland-window v0.1.0\n       Fresh wayland-kbd v0.2.0\n       Fresh image v0.3.12\n       Fresh gfx_device_gl v0.5.0\n       Fresh sdl2 v0.9.1\n       Fresh glutin v0.3.5\n       Fresh piston-gfx_texture v0.3.0\n       Fresh pistoncore-sdl2_window v0.13.0\n       Fresh pistoncore-glutin_window v0.12.0\n       Fresh piston2d-gfx_graphics v0.9.0\n   Compiling piston-examples v0.0.0 (file:///home/dermetfan/documents/development/rust/piston-examples)\n     Running `rustc src/texture_swap.rs --crate-name texture_swap --crate-type bin -g --out-dir /home/dermetfan/documents/development/rust/piston-examples/target/debug --emit=dep-info,link -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps --extern gfx_device_gl=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx_device_gl-6636b2e928090e69.rlib --extern sprite=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsprite-a7a1cfcf2134d3b5.rlib --extern vecmath=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libvecmath-7b01827101f36537.rlib --extern find_folder=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libfind_folder-ea46062a64606452.rlib --extern ai_behavior=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libai_behavior-c187fd481eefb02c.rlib --extern image=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libimage-be786b22ce00fa31.rlib --extern gfx=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx-d474876570dc49a0.rlib --extern sdl2_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsdl2_window-ce150be33225003a.rlib --extern drag_controller=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libdrag_controller-5f136524f1122807.rlib --extern camera_controllers=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libcamera_controllers-0769ad16934a93c5.rlib --extern rand=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/librand-bdfcc55d3466feb3.rlib --extern piston_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libpiston_window-20bf2651ff3b42bc.rlib -L native=/home/dermetfan/documents/development/rust/piston-examples/target/debug/build/miniz-sys-9343607e1ddc701d/out`\n       Fresh piston_window v0.20.0\nERROR:rbml::reader: failed to find block with tag 56\nCould not compile `piston-examples`.\n\nCaused by:\n  Process didn't exit successfully: `rustc src/texture_swap.rs --crate-name texture_swap --crate-type bin -g --out-dir /home/dermetfan/documents/development/rust/piston-examples/target/debug --emit=dep-info,link -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug -L dependency=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps --extern gfx_device_gl=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx_device_gl-6636b2e928090e69.rlib --extern sprite=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsprite-a7a1cfcf2134d3b5.rlib --extern vecmath=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libvecmath-7b01827101f36537.rlib --extern find_folder=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libfind_folder-ea46062a64606452.rlib --extern ai_behavior=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libai_behavior-c187fd481eefb02c.rlib --extern image=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libimage-be786b22ce00fa31.rlib --extern gfx=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libgfx-d474876570dc49a0.rlib --extern sdl2_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libsdl2_window-ce150be33225003a.rlib --extern drag_controller=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libdrag_controller-5f136524f1122807.rlib --extern camera_controllers=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libcamera_controllers-0769ad16934a93c5.rlib --extern rand=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/librand-bdfcc55d3466feb3.rlib --extern piston_window=/home/dermetfan/documents/development/rust/piston-examples/target/debug/deps/libpiston_window-20bf2651ff3b42bc.rlib -L native=/home/dermetfan/documents/development/rust/piston-examples/target/debug/build/miniz-sys-9343607e1ddc701d/out` (signal: 11)\n```\n\nI figured I'd report a bug since that is what the error messages asked me to do.\n## Meta\n\nI'm running NixOS and here's the relevant part of my `~/nixpkgs/pkgs/top-level/rust-packages.nix` (which I used with `nix-shell -I nixpkgs=~/nixpkgs/` to enter the [nix-shell environment](http://nixos.org/nix/manual/#sec-nix-shell)):\n\n```\n# This file defines the source of Rust / cargo's crates registry\n#\n# buildRustPackage will automatically download dependencies from the registry\n# version that we define here. If you're having problems downloading / finding\n# a Rust library, try updating this to a newer commit.\n\n{ runCommand, fetchFromGitHub, git }:\n\nlet\n  version = \"2015-09-15\";\n  rev = \"120690580a8aa9b165520a4b290718b7b131d11e\";\n\n  src = fetchFromGitHub {\n      inherit rev;\n\n      owner = \"rust-lang\";\n      repo = \"crates.io-index\";\n      sha256 = \"0j4wzlfi9cg73jqgx8lga1zchrgvynfi8xc46ls5286hca5i96gl\";\n  };\n\nin\n```\n\nHere's my `default.nix` (used by `nix-shell`):\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ cat default.nix \nwith import <nixpkgs> { };\nwith rustUnstable;\n\nbuildRustPackage {\n  name = \"piston-examples\";\n  src = ./.;\n  buildInputs = [ SDL2 SDL2_gfx SDL2_image SDL2_mixer SDL2_net SDL2_ttf freetype x11 ];\n  depsSha256 = \"\";\n}\n```\n\nRust version:\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ rustc --version --verbose\nrustc 1.4.0-dev\nbinary: rustc\ncommit-hash: unknown\ncommit-date: unknown\nhost: x86_64-unknown-linux-gnu\nrelease: 1.4.0-dev\n```\n\nCargo version:\n\n```\n[nix-shell:~/documents/development/rust/piston-examples]$ cargo --version --verbose\ncargo 0.3.0 ( ) (built 2015-09-14)\n```\n", "closed_by": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/28409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/28409/timeline", "performed_via_github_app": null, "state_reason": "completed"}