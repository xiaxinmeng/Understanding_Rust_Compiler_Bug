{"url": "https://api.github.com/repos/rust-lang/rust/issues/70422", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/70422/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/70422/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/70422/events", "html_url": "https://github.com/rust-lang/rust/issues/70422", "id": 588251036, "node_id": "MDU6SXNzdWU1ODgyNTEwMzY=", "number": 70422, "title": "Unable to find variable \"NO_TYPE_FILTER\" during ./x.py test", "user": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 120005, "node_id": "MDU6TGFiZWwxMjAwMDU=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-testsuite", "name": "A-testsuite", "color": "f7e101", "default": false, "description": "Area: The testsuite used to check the correctness of rustc"}, {"id": 203738, "node_id": "MDU6TGFiZWwyMDM3Mzg=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-rustdoc", "name": "T-rustdoc", "color": "bfd4f2", "default": false, "description": "Relevant to the rustdoc team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-03-26T08:47:02Z", "updated_at": "2020-03-29T15:26:56Z", "closed_at": "2020-03-29T15:26:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "When running `./x.py test` on my workstation (linux, x86_64) against the current master branch, it fails in the following way:\r\n\r\n```console\r\n...\r\n\r\nTesting error-index stage2\r\ndoc tests for: /git/rust/build/x86_64-unknown-linux-gnu/test/error-index.md\r\n\tfinished in 5.282\r\nCheck compiletest suite=run-make-fulldeps mode=run-make (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\r\n\r\nrunning 210 tests\r\niiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii 100/210\r\niiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii 200/210\r\niiiiiiiiii\r\ntest result: ok. 0 passed; 0 failed; 210 ignored; 0 measured; 0 filtered out\r\n\r\n\tfinished in 0.078\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/advanced-features.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/command-line-arguments.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/documentation-tests.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/how-to-write-documentation.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/lints.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/passes.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/the-doc-attribute.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/unstable-features.md\r\ndoc tests for: /git/rust/src/doc/rustdoc/src/what-is-rustdoc.md\r\n\tfinished in 0.928\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/control-flow-guard.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/emit-stack-sizes.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/profile.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/report-time.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/sanitizer.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/self-profile-events.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/compiler-flags/self-profile.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/abi-msp430-interrupt.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/abi-ptx.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/arbitrary-enum-discriminant.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/box-patterns.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/box-syntax.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/c-variadic.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/cfg-sanitize.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/const-fn.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/crate-visibility-modifier.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/custom-test-frameworks.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/doc-alias.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/doc-cfg.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/external-doc.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/generators.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/impl-trait-in-bindings.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/infer-static-outlives-requirements.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/intrinsics.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/lang-items.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/link-args.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/marker-trait-attr.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/member-constraints.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/no-sanitize.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/non-ascii-idents.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/optin-builtin-traits.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/or-patterns.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/plugin.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/repr128.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/trait-alias.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/transparent-unions.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/try-blocks.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/unboxed-closures.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/unsized-locals.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/language-features/unsized-tuple-coercion.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/asm.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/c-variadic.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/concat-idents.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/fn-traits.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/global-asm.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/test.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/trace-macros.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/library-features/try-trait.md\r\ndoc tests for: /git/rust/src/doc/unstable-book/src/the-unstable-book.md\r\n\tfinished in 5.272\r\ndoc tests for: /git/rust/src/doc/rustc/src/json.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/linker-plugin-lto.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/groups.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/index.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/levels.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/listing/allowed-by-default.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/listing/deny-by-default.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/lints/listing/warn-by-default.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/profile-guided-optimization.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/targets/custom.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/targets/index.md\r\ndoc tests for: /git/rust/src/doc/rustc/src/what-is-rustc.md\r\n\tfinished in 1.133\r\nunable to find variable \"NO_TYPE_FILTER\"\r\n\r\n\r\ncommand did not execute successfully: \"/usr/bin/node\" \"/git/rust/src/tools/rustdoc-js-std/tester.js\" \"/git/rust/build/x86_64-unknown-linux-gnu/doc\" \"/git/rust/src/test/rustdoc-js-std\"\r\nexpected success, got: exit code: 1\r\n\r\n\r\nfailed to run: /git/rust/build/bootstrap/debug/bootstrap test\r\nBuild completed unsuccessfully in 0:01:47\r\n```\r\n\r\nMentioning @GuillaumeGomez and @kinnison because NO_TYPE_FILTER appears to be related to #69402. Any idea what may be going on?\r\n\r\nIndeed rerunning the command that it says failed does fail:\r\n\r\n```console\r\n$ \"/usr/bin/node\" \"/git/rust/src/tools/rustdoc-js-std/tester.js\" \"/git/rust/build/x86_64-unknown-linux-gnu/doc\" \"/git/rust/src/test/rustdoc-js-std\"\r\nunable to find variable \"NO_TYPE_FILTER\"\r\n```\r\n\r\nThe node version on my machine is:\r\n\r\n```console\r\n$ /usr/bin/node --version\r\nv10.15.2\r\n```", "closed_by": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/70422/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/70422/timeline", "performed_via_github_app": null, "state_reason": "completed"}