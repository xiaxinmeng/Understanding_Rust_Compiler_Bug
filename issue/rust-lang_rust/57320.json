{"url": "https://api.github.com/repos/rust-lang/rust/issues/57320", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/57320/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/57320/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/57320/events", "html_url": "https://github.com/rust-lang/rust/issues/57320", "id": 395752801, "node_id": "MDU6SXNzdWUzOTU3NTI4MDE=", "number": 57320, "title": "Error message shows type of private field", "user": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 60329014, "node_id": "MDU6TGFiZWw2MDMyOTAxNA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-low", "name": "P-low", "color": "eb6420", "default": false, "description": "Low priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-01-03T22:50:30Z", "updated_at": "2023-01-09T08:07:30Z", "closed_at": "2023-01-09T08:07:30Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "The code below yields two errors:\r\n\r\n1. The field is private\r\n2. Type error in if expression because type is `<type of private field>` instead of `bool`\r\n\r\nThis means a user can observe the type of a private field of a dependency in their error messages. It doesn't mean they can actually use that information, but it seems weird at least.\r\n\r\nIs this actually an issue? If you don't consider it one, feel free to close this.\r\n\r\n- - -\r\n\r\n```rust\r\nfn main() {\r\n    let x = foo::Foo::default();\r\n    if x.len {\r\n        println!(\"foo\");\r\n    }\r\n}\r\n\r\nmod foo {\r\n    #[derive(Default)]\r\n    pub struct Foo {\r\n        len: String,\r\n    }\r\n    \r\n    impl Foo {\r\n        pub fn len(&self) -> usize {\r\n            42\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n[playground](https://play.rust-lang.org/?version=nightly&mode=debug&edition=2018&gist=5bca9cfb20ef8a1a4d637932a742510b)\r\n\r\n(originally seen [on reddit](https://www.reddit.com/r/rust/comments/acapjb/rust_error_messages_are_so_quite_3/))", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/57320/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/57320/timeline", "performed_via_github_app": null, "state_reason": "completed"}