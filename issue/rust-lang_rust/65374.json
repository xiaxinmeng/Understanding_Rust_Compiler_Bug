{"url": "https://api.github.com/repos/rust-lang/rust/issues/65374", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/65374/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/65374/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/65374/events", "html_url": "https://github.com/rust-lang/rust/issues/65374", "id": 506325051, "node_id": "MDU6SXNzdWU1MDYzMjUwNTE=", "number": 65374, "title": "still os error 122 on the memory file system z:\\ when compiling with cargo", "user": {"login": "jeppeter", "id": 2869890, "node_id": "MDQ6VXNlcjI4Njk4OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/2869890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeppeter", "html_url": "https://github.com/jeppeter", "followers_url": "https://api.github.com/users/jeppeter/followers", "following_url": "https://api.github.com/users/jeppeter/following{/other_user}", "gists_url": "https://api.github.com/users/jeppeter/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeppeter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeppeter/subscriptions", "organizations_url": "https://api.github.com/users/jeppeter/orgs", "repos_url": "https://api.github.com/users/jeppeter/repos", "events_url": "https://api.github.com/users/jeppeter/events{/privacy}", "received_events_url": "https://api.github.com/users/jeppeter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 13242248, "node_id": "MDU6TGFiZWwxMzI0MjI0OA==", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-metadata", "name": "A-metadata", "color": "f7e101", "default": false, "description": "Area: crate metadata"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-10-13T13:23:22Z", "updated_at": "2019-10-13T13:40:21Z", "closed_at": "2019-10-13T13:40:21Z", "author_association": "NONE", "active_lock_reason": null, "body": "i found a bug on the cargo .the code in windows 7 x64 platform with rust-1.37.0-msvc\r\n\r\nmain.rs \r\n########main.rs fle start\r\nuse regex::Regex;\r\n\r\nfn main() {\r\n    let re = Regex::new(r\"(?x)\r\n(?P<year>\\d{4})\r\n-\r\n(?P<month>\\d{2})\r\n-\r\n(?P<day>\\d{2})\r\n\").unwrap();\r\n    let caps = re.captures(\"2010-03-14\").unwrap();\r\n\r\n    assert_eq!(\"2010\", &caps[\"year\"]);\r\n    assert_eq!(\"03\", &caps[\"month\"]);\r\n    assert_eq!(\"14\", &caps[\"day\"]);\r\n}\r\n########main.rs file end\r\n\r\nCargo.toml\r\n########Cargo.toml file start\r\n\r\n[package]\r\nname = \"regtest\"\r\nversion = \"0.1.0\"\r\nauthors = [\"jeppeter\"]\r\nedition = \"2018\"\r\n\r\n\r\n[dependencies]\r\nregex = \"1\"\r\n########Cargo.toml file end\r\n\r\nwhen i set environment CARGO_INCREMENTAL=0\r\nand i use command line\r\n\r\n**cargo build --release --verbose**\r\n\r\n\r\ni got the output \r\n\r\n########output file start\r\n       Fresh lazy_static v1.4.0\r\n       Fresh regex-syntax v0.6.12\r\n   Compiling memchr v2.2.1\r\n   Compiling thread_local v0.3.6\r\n     Running `Z:\\rustlib\\test\\regtest\\target\\release\\build\\memchr-633c9e703931685a\\build-script-build`\r\n     Running `rustc --crate-name thread_local C:\\Users\\wrc\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\thread_local-0.3.6\\src\\lib.rs --color never --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C metadata=e4025c17eeddf6c1 -C extra-filename=-e4025c17eeddf6c1 --out-dir Z:\\rustlib\\test\\regtest\\target\\release\\deps -L dependency=Z:\\rustlib\\test\\regtest\\target\\release\\deps --extern lazy_static=Z:\\rustlib\\test\\regtest\\target\\release\\deps\\liblazy_static-4ea98a74b899f1a8.rlib --cap-lints allow`\r\n     Running `rustc --crate-name memchr C:\\Users\\wrc\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\memchr-2.2.1\\src\\lib.rs --color never --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 --cfg \"feature=\\\"default\\\"\" --cfg \"feature=\\\"use_std\\\"\" -C metadata=79b0e42c9f2166f1 -C extra-filename=-79b0e42c9f2166f1 --out-dir Z:\\rustlib\\test\\regtest\\target\\release\\deps -L dependency=Z:\\rustlib\\test\\regtest\\target\\release\\deps --cap-lints allow --cfg memchr_runtime_simd --cfg memchr_runtime_sse2 --cfg memchr_runtime_sse42 --cfg memchr_runtime_avx`\r\nthread 'rustc' panicked at 'called `Result::unwrap()` on an `Err` value: Os { code: 122, kind: Other, message: \"ERROR_INSUFFICIENT_BUFFER\" }', src\\libcore\\result.rs:999:5\r\nstack backtrace:\r\n   0: std::sys_common::alloc::realloc_fallback\r\n   1: std::panicking::take_hook\r\n   2: std::panicking::take_hook\r\n   3: <(rustc::hir::def_id::DefId, rustc::hir::def_id::DefId) as rustc::ty::query::keys::Key>::default_span\r\n   4: std::panicking::rust_panic_with_hook\r\n   5: std::panicking::begin_panic_fmt\r\n   6: rust_begin_unwind\r\n   7: core::panicking::panic_fmt\r\n   8: <(rustc::hir::def_id::CrateNum, rustc::hir::def_id::DefId) as rustc_metadata::cstore_impl::IntoArgs>::into_args\r\n   9: rustc_metadata::locator::Context::report_errs\r\n  10: rustc_metadata::locator::Context::maybe_load_library_crate\r\n  11: rustc_metadata::creader::CrateLoader::new\r\n  12: rustc_metadata::creader::CrateLoader::new\r\n  13: rustc_metadata::creader::CrateLoader::process_extern_crate\r\n  14: ZN13rustc_resolve19build_reduced_graph197_$LT$impl$u20$rustc_resolve..ToNameBinding$u20$for$u20$$LP$$RF$rustc_resolve..ModuleData$C$$u20$rustc..ty..Visibility$C$$u20$syntax_pos..span_encoding..Span$C$$u20$syntax_pos..hygiene..Mark$RP$$GT$15to_name_binding\r\n  15: <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor as syntax::visit::Visitor>::visit_item\r\n  16: <rustc_resolve::macros::<impl rustc_resolve::Resolver>::early_resolve_ident_in_lexical_scope::Flags as core::fmt::UpperHex>::fmt\r\n  17: <rustc_resolve::build_reduced_graph::BuildReducedGraphVisitor as syntax::visit::Visitor>::visit_item\r\n  18: <rustc_resolve::CrateLint as core::fmt::Debug>::fmt\r\n  19: rustc_resolve::macros::<impl syntax::ext::base::Resolver for rustc_resolve::Resolver>::visit_ast_fragment_with_placeholders\r\n  20: syntax::ext::expand::MacroExpander::expand_crate\r\n  21: syntax::ext::expand::MacroExpander::expand_crate\r\n  22: syntax::ext::expand::MacroExpander::expand_crate\r\n  23: <rustc_interface::profile::trace::Query as core::fmt::Debug>::fmt\r\n  24: <rustc_interface::profile::trace::Query as core::fmt::Debug>::fmt\r\n  25: rustc_interface::passes::BoxedResolver::to_expansion_result\r\n  26: <rustc_interface::util::ReplaceBodyWithLoop as syntax::mut_visit::MutVisitor>::visit_mac\r\n  27: <rustc_interface::util::ReplaceBodyWithLoop as syntax::mut_visit::MutVisitor>::visit_mac\r\n  28: <rustc_interface::proc_macro_decls::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor>::visit_trait_item\r\n  29: <rustc_interface::proc_macro_decls::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor>::visit_trait_item\r\n  30: <rustc_interface::proc_macro_decls::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor>::visit_trait_item\r\n  31: <rustc_interface::proc_macro_decls::Finder as rustc::hir::itemlikevisit::ItemLikeVisitor>::visit_trait_item\r\n  32: rustc_interface::queries::<impl rustc_interface::interface::Compiler>::prepare_outputs\r\n  33: rustc_driver::set_sigpipe_handler\r\n  34: <env_logger::filter::inner::Filter as core::fmt::Display>::fmt\r\n  35: <env_logger::filter::inner::Filter as core::fmt::Display>::fmt\r\n  36: <rustc_driver::Compilation as core::fmt::Debug>::fmt\r\n  37: <rustc_driver::pretty::UserIdentifiedItem as core::fmt::Debug>::fmt\r\n  38: _rust_maybe_catch_panic\r\n  39: rustc_driver::set_sigpipe_handler\r\n  40: ZN244_$LT$std..error..$LT$impl$u20$core..convert..From$LT$alloc..string..String$GT$$u20$for$u20$alloc..boxed..Box$LT$dyn$u20$std..error..Error$u2b$core..marker..Send$u2b$core..marker..Sync$GT$$GT$..from..StringError$u20$as$u20$core..fmt..Display$GT$3fmt17\r\n  41: std::sys::windows::thread::Thread::new\r\n  42: BaseThreadInitThunk\r\n  43: RtlUserThreadStart\r\nquery stack during panic:\r\nend of query stack\r\n\r\nerror: internal compiler error: unexpected panic\r\n\r\nnote: the compiler unexpectedly panicked. this is a bug.\r\n\r\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\r\n\r\nnote: rustc 1.37.0 (eae3437df 2019-08-13) running on x86_64-pc-windows-msvc\r\n\r\nnote: compiler flags: -C opt-level=3 --crate-type lib\r\n\r\nnote: some of the compiler flags provided by cargo are hidden\r\n\r\nerror: Could not compile `thread_local`.\r\n\r\nCaused by:\r\n  process didn't exit successfully: `rustc --crate-name thread_local C:\\Users\\wrc\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\thread_local-0.3.6\\src\\lib.rs --color never --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C metadata=e4025c17eeddf6c1 -C extra-filename=-e4025c17eeddf6c1 --out-dir Z:\\rustlib\\test\\regtest\\target\\release\\deps -L dependency=Z:\\rustlib\\test\\regtest\\target\\release\\deps --extern lazy_static=Z:\\rustlib\\test\\regtest\\target\\release\\deps\\liblazy_static-4ea98a74b899f1a8.rlib --cap-lints allow` (exit code: 101)\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n########output file end\r\n\r\ni have mention the bug on #65325 \r\nand it will solved in the simple hello world program ,\r\nbut ,i found it not solved in the some complicated situation\r\n\r\ni make sure the memory file system disk is 8G size ,so it has enough disk size to contain the temporary file\r\ni make also sure that the code can be compile ok on the normal disk system, i compile it ok.", "closed_by": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/65374/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/65374/timeline", "performed_via_github_app": null, "state_reason": "completed"}