{"url": "https://api.github.com/repos/rust-lang/rust/issues/26717", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/26717/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/26717/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/26717/events", "html_url": "https://github.com/rust-lang/rust/issues/26717", "id": 92440092, "node_id": "MDU6SXNzdWU5MjQ0MDA5Mg==", "number": 26717, "title": "Crash/Deadlock when using RUST_LOG=rustc::middle::ty", "user": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 9618520, "node_id": "MDU6TGFiZWw5NjE4NTIw", "url": "https://api.github.com/repos/rust-lang/rust/labels/I-ICE", "name": "I-ICE", "color": "e10c02", "default": false, "description": "Issue: The compiler panicked, giving an Internal Compilation Error (ICE) \u2744\ufe0f"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2015-07-01T17:25:09Z", "updated_at": "2015-07-02T09:19:37Z", "closed_at": "2015-07-02T09:19:37Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "```\n$ cat triv.rs\nfn main() {}\n$ RUST_LOG=rustc::middle::ty rustc triv.rs \nDEBUG:rustc::middle::ty: Interned type: bool Pointer: 0x7fc79208e310\nDEBUG:rustc::middle::ty: Interned type: char Pointer: 0x7fc79208e338\nDEBUG:rustc::middle::ty: Interned type: [type error] Pointer: 0x7fc79208e360\nDEBUG:rustc::middle::ty: Interned type: isize Pointer: 0x7fc79208e388\nDEBUG:rustc::middle::ty: Interned type: i8 Pointer: 0x7fc79208e3b0\nDEBUG:rustc::middle::ty: Interned type: i16 Pointer: 0x7fc79208e3d8\nDEBUG:rustc::middle::ty: Interned type: i32 Pointer: 0x7fc79208e400\nDEBUG:rustc::middle::ty: Interned type: i64 Pointer: 0x7fc79208e428\nDEBUG:rustc::middle::ty: Interned type: usize Pointer: 0x7fc79208bf10\nDEBUG:rustc::middle::ty: Interned type: u8 Pointer: 0x7fc79208bf38\nDEBUG:rustc::middle::ty: Interned type: u16 Pointer: 0x7fc79208bf60\nDEBUG:rustc::middle::ty: Interned type: u32 Pointer: 0x7fc79208bf88\nDEBUG:rustc::middle::ty: Interned type: u64 Pointer: 0x7fc79208bfb0\nDEBUG:rustc::middle::ty: Interned type: f32 Pointer: 0x7fc79208bfd8\nDEBUG:rustc::middle::ty: Interned type: f64 Pointer: 0x7fc79208c000\nDEBUG:rustc::middle::ty: Interned type: () Pointer: 0x7fc79208c028\nDEBUG:rustc::middle::ty: Interned type: fn() {main} Pointer: 0x7fc79208c050\nDEBUG:rustc::middle::ty: Interned type: Self Pointer: 0x7fc79208c078\nDEBUG:rustc::middle::ty: populate_implementations_for_trait_if_necessary: searching for TraitDef(generics=Generics { types: [[];[TypeParameterDef(DefId { krate: 2, node: 34377 }, SelfSpace/0)];[]], regions: [[];[];[]] }, trait_ref=<Self as core::ops::Drop>)\nDEBUG:rustc::middle::ty: Interned type: T Pointer: 0x7fc79208c0a0\nDEBUG:rustc::middle::ty: Interned type: alloc::arc::Arc^\\Quit (core dumped)\n$ rust-gdb `which rustc` core\n...\n(gdb) thread apply all backtrace\nThread 1 (Thread 0x7f8cfad3ea80 (LWP 14670)):\n#0  __lll_lock_wait () at ../nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S:135\n#1  0x00007f8cf4d9b672 in _L_lock_953 () from /lib/x86_64-linux-gnu/libpthread.so.0\n#2  0x00007f8cf4d9b4da in __GI___pthread_mutex_lock (mutex=0x7f8cf1c25000) at ../nptl/pthread_mutex_lock.c:114\n#3  0x00007f8cfa4fbc3f in lock (self=0x7f8cf1c25000) at ../src/libstd/sys/unix/mutex.rs:91\n#4  lock (self=<optimised out>) at ../src/libstd/sys/common/remutex.rs:78\n#5  std::io::stdio::Stdout::lock (self=0x80) at ../src/libstd/io/stdio.rs:311\n#6  0x00007f8cfa4fd90c in std::io::stdio::Stderr.Write::write (self=0x80, buf=...) at ../src/libstd/io/stdio.rs:394\n#7  0x00007f8cf397c901 in write (self=<optimised out>, buf=...) at ../src/libstd/io/impls.rs:104\n#8  write (self=<optimised out>, buf=...) at ../src/libterm/lib.rs:90\n#9  term::io::Write::write_all<term::WriterWrapper> (self=<optimised out>, buf=...) at ../src/libstd/io/mod.rs:351\n#10 0x00007f8cf397c411 in term::terminfo::TerminfoTerminal<T>.Terminal<T>::fg (self=<optimised out>, color=<optimised out>) at ../src/libterm/terminfo/mod.rs:87\n#11 0x00007f8cf397cf55 in term::terminfo::TerminfoTerminal<T>.Terminal<T>::attr (self=0x7f8cf2c2d080, attr=...) at ../src/libterm/terminfo/mod.rs:113\n#12 0x00007f8cf79390bd in syntax::diagnostic::print_maybe_styled (w=<optimised out>, msg=..., color=...) at ../src/libsyntax/diagnostic.rs:316\n#13 0x00007f8cf7939a0c in syntax::diagnostic::print_diagnostic (dst=0x7fff313c66c0, topic=..., lvl=<optimised out>, msg=..., code=...)\n    at ../src/libsyntax/diagnostic.rs:350\n#14 0x00007f8cf793860d in syntax::diagnostic::EmitterWriter.Emitter::emit (self=0x100, cmsp=..., msg=..., code=..., lvl=<optimised out>)\n    at ../src/libsyntax/diagnostic.rs:449\n#15 0x00007f8cfa94ce51 in monitor<closure> (f=<optimised out>) at ../src/librustc_driver/lib.rs:815\n#16 rustc_driver::run (args=...) at ../src/librustc_driver/lib.rs:99\n#17 0x00007f8cfa95bf0a in rustc_driver::main () at ../src/librustc_driver/lib.rs:860\n#18 0x00007f8cfa5cc2b9 in rust_try_inner () from /tmp/tmp.76B1ICnPk3/rust/build/x86_64-unknown-linux-gnu/stage1/lib/libstd-7e44814b.so\n#19 0x00007f8cfa5cc2a6 in rust_try () from /tmp/tmp.76B1ICnPk3/rust/build/x86_64-unknown-linux-gnu/stage1/lib/libstd-7e44814b.so\n#20 0x00007f8cfa53017c in inner_try (f={void (enum c_void *)} 0x0, data=<optimised out>) at ../src/libstd/rt/unwind/mod.rs:147\n#21 try<closure> (f=<optimised out>) at ../src/libstd/rt/unwind/mod.rs:130\n#22 std::rt::lang_start (main=<optimised out>, argc=<optimised out>, argv=<optimised out>) at ../src/libstd/rt/mod.rs:130\n#23 0x00007f8cfa086ec5 in __libc_start_main (main=0x7f8cfadae920 <main>, argc=2, argv=0x7fff313c6e08, init=<optimised out>, fini=<optimised out>, \n    rtld_fini=<optimised out>, stack_end=0x7fff313c6df8) at libc-start.c:287\n#24 0x00007f8cfadae7e9 in _start ()\n\n```\n", "closed_by": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/26717/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/26717/timeline", "performed_via_github_app": null, "state_reason": "completed"}