{"url": "https://api.github.com/repos/rust-lang/rust/issues/39015", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/39015/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/39015/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/39015/events", "html_url": "https://github.com/rust-lang/rust/issues/39015", "id": 200404571, "node_id": "MDU6SXNzdWUyMDA0MDQ1NzE=", "number": 39015, "title": "1.14.0 powerpc64le test failures: smoke_dtor, test_typed_arena_drop_small_count", "user": {"login": "infinity0", "id": 78398, "node_id": "MDQ6VXNlcjc4Mzk4", "avatar_url": "https://avatars.githubusercontent.com/u/78398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/infinity0", "html_url": "https://github.com/infinity0", "followers_url": "https://api.github.com/users/infinity0/followers", "following_url": "https://api.github.com/users/infinity0/following{/other_user}", "gists_url": "https://api.github.com/users/infinity0/gists{/gist_id}", "starred_url": "https://api.github.com/users/infinity0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/infinity0/subscriptions", "organizations_url": "https://api.github.com/users/infinity0/orgs", "repos_url": "https://api.github.com/users/infinity0/repos", "events_url": "https://api.github.com/users/infinity0/events{/privacy}", "received_events_url": "https://api.github.com/users/infinity0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 108333, "node_id": "MDU6TGFiZWwxMDgzMzM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-LLVM", "name": "A-LLVM", "color": "f7e101", "default": false, "description": "Area: Code generation parts specific to LLVM. Both correctness bugs and optimization-related issues."}, {"id": 60344715, "node_id": "MDU6TGFiZWw2MDM0NDcxNQ==", "url": "https://api.github.com/repos/rust-lang/rust/labels/P-medium", "name": "P-medium", "color": "eb6420", "default": false, "description": "Medium priority"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 515028847, "node_id": "MDU6TGFiZWw1MTUwMjg4NDc=", "url": "https://api.github.com/repos/rust-lang/rust/labels/O-PowerPC", "name": "O-PowerPC", "color": "6e6ec0", "default": false, "description": "Target: PowerPC processors"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2017-01-12T15:55:50Z", "updated_at": "2017-06-19T08:45:21Z", "closed_at": "2017-06-19T08:45:21Z", "author_association": "CONTRIBUTOR", "active_lock_reason": null, "body": "Build machine: https://db.debian.org/machines.cgi?host=ppc64el-osuosl-01\r\nBuild log: https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=ppc64el&ver=1.14.0%2Bdfsg1-3&stamp=1484057235\r\nRaw build log: https://buildd.debian.org/status/fetch.php?pkg=rustc&arch=ppc64el&ver=1.14.0%2Bdfsg1-3&stamp=1484057235&raw=1\r\n\r\nThis is after applying #38650 and #38675. The LLVM diff between Debian vs Rust is [here](https://gist.github.com/infinity0/873566481db105fea47630da88e1b632).\r\n\r\nNote that, because of these failures, the whole-compiler tests (e.g. run-pass etc) have not been run, but they probably also have failures.\r\n\r\nRelevant links:\r\nhttps://github.com/rust-lang/rust/blob/1.14.0/src/librustc_back/target/powerpc64le_unknown_linux_gnu.rs\r\nhttps://github.com/rust-lang/rust/blob/1.14.0/mk/cfg/powerpc64le-unknown-linux-gnu.mk\r\n\r\n~~~~\r\ntest thread::local::tests::smoke_dtor ... ok\r\nthread '<unnamed>' panicked at 'assertion failed: `(left == right)` (left: `1`, right: `2`)', src/libstd/thread/local.rs:414\r\nstack backtrace:\r\n   1:         0x38b1f597 - std::sys::imp::backtrace::tracing::imp::write::h33de6ffd1ea231bf\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:         0x38b691a7 - std::panicking::default_hook::{{closure}}::hcabac60ea7b48baf\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:247\r\n   3:         0x38b4b07f - std::panicking::rust_panic_with_hook::h059b28291193443c\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:263\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:451\r\n   4:         0x38b4aaf7 - std::panicking::begin_panic::h929be95e04ca164b\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:413\r\n   5:         0x38b4a8cf - std::panicking::begin_panic_fmt::ha7d9cbddb8702778\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:397\r\n   6:         0x389d70d3 - std::thread::local::tests::smoke_no_dtor::h972e83c12b443a47\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/thread/local.rs:414\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/thread/local.rs:245\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/thread/local.rs:413\r\n   7:         0x38b7b587 - <F as test::FnBox<T>>::call_box::he8581d59e8028413\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1265\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:141\r\n   8:         0x38b6d523 - std::panicking::try::do_call::h83b58d81c874206d\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1211\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:295\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:356\r\n   9:         0x38bc2c8f - __rust_maybe_catch_panic\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libpanic_unwind/lib.rs:97\r\n  10:         0x38b6ca5b - std::panicking::try::do_call::h636b19c00d03e824\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:332\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:351\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1210\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:295\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:356\r\n  11:         0x38bc2c8f - __rust_maybe_catch_panic\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libpanic_unwind/lib.rs:97\r\n  12:         0x38b7499f - <F as alloc::boxed::FnBox<A>>::call_box::h15256864a2eaf226\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:332\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:351\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/thread/mod.rs:287\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/liballoc/boxed.rs:595\r\n  13:         0x38bb856f - std::sys::imp::thread::Thread::new::thread_start::ha102a6120fc52763\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/liballoc/boxed.rs:605\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys_common/thread.rs:21\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys/unix/thread.rs:84\r\n  14:     0x3fff92b3809b - <unknown>\r\ntest thread::local::tests::smoke_no_dtor ... FAILED\r\n[..]\r\ntest tests::test_typed_arena_zero_sized ... ok\r\ntest tests::test_typed_arena_drop_small_count ... FAILED\r\ntest tests::test_noncopy ... ok\r\n\r\nfailures:\r\n\r\n---- tests::test_typed_arena_drop_small_count stdout ----\r\n\tthread 'tests::test_typed_arena_drop_small_count' panicked at 'assertion failed: `(left == right)` (left: `0`, right: `100`)', src/libarena/lib.rs:465\r\nstack backtrace:\r\n   1:         0x50fdbe47 - std::sys::imp::backtrace::tracing::imp::write::h917062bce4ff48c3\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:         0x50fe2dc7 - std::panicking::default_hook::{{closure}}::h0bacac31b5ed1870\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:247\r\n   3:         0x50fe0003 - std::panicking::default_hook::h5897799da33ece67\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:257\r\n   4:         0x50fe0bbb - std::panicking::rust_panic_with_hook::h109e116a3a861224\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:451\r\n   5:         0x50fe09b7 - std::panicking::begin_panic::hbb38be1379e09df0\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:413\r\n   6:         0x50fe085f - std::panicking::begin_panic_fmt::h26713cea9bce3ab0\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:397\r\n   7:         0x50f8fc6b - arena::tests::test_typed_arena_drop_small_count::h4439ca27c88207e8\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libarena/lib.rs:465\r\n   8:         0x50fa2427 - <F as test::FnBox<T>>::call_box::he8581d59e8028413\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1265\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:141\r\n   9:         0x50f943c3 - std::panicking::try::do_call::h83b58d81c874206d\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1211\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:295\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:356\r\n  10:         0x50fe9b2f - __rust_maybe_catch_panic\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libpanic_unwind/lib.rs:97\r\n  11:         0x50f938fb - std::panicking::try::do_call::h636b19c00d03e824\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:332\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:351\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libtest/lib.rs:1210\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:295\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:356\r\n  12:         0x50fe9b2f - __rust_maybe_catch_panic\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libpanic_unwind/lib.rs:97\r\n  13:         0x50f9b83f - <F as alloc::boxed::FnBox<A>>::call_box::h15256864a2eaf226\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panicking.rs:332\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/panic.rs:351\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/thread/mod.rs:287\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/liballoc/boxed.rs:595\r\n  14:         0x50fdf40f - std::sys::imp::thread::Thread::new::thread_start::ha102a6120fc52763\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/liballoc/boxed.rs:605\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys_common/thread.rs:21\r\n                        at /\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/src/libstd/sys/unix/thread.rs:84\r\n  15:     0x3fff8474809b - <unknown>\r\n\r\n\r\nfailures:\r\n    tests::test_typed_arena_drop_small_count\r\n\r\ntest result: FAILED. 12 passed; 1 failed; 0 ignored; 0 measured\r\n\r\n/\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/mk/tests.mk:423: recipe for target 'tmp/check-stage2-T-powerpc64le-unknown-linux-gnu-H-powerpc64le-unknown-linux-gnu-arena.ok' failed\r\nmake[2]: *** [tmp/check-stage2-T-powerpc64le-unknown-linux-gnu-H-powerpc64le-unknown-linux-gnu-arena.ok] Error 101\r\nmake[2]: *** Waiting for unfinished jobs....\r\ntest sync::mpsc::tests::stress_recv_timeout_two_threads ... ok\r\n\r\nfailures:\r\n\r\nfailures:\r\n    thread::local::tests::smoke_no_dtor\r\n\r\ntest result: FAILED. 773 passed; 1 failed; 0 ignored; 0 measured\r\n\r\n/\u00abBUILDDIR\u00bb/rustc-1.14.0+dfsg1/mk/tests.mk:423: recipe for target 'tmp/check-stage2-T-powerpc64le-unknown-linux-gnu-H-powerpc64le-unknown-linux-gnu-std.ok' failed\r\nmake[2]: *** [tmp/check-stage2-T-powerpc64le-unknown-linux-gnu-H-powerpc64le-unknown-linux-gnu-std.ok] Error 101\r\n~~~~", "closed_by": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/39015/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/39015/timeline", "performed_via_github_app": null, "state_reason": "completed"}