{"url": "https://api.github.com/repos/rust-lang/rust/issues/105451", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/105451/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/105451/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/105451/events", "html_url": "https://github.com/rust-lang/rust/issues/105451", "id": 1484101744, "node_id": "I_kwDOAAsO6M5YdZhw", "number": 105451, "title": "Multiple nested `impl Trait` in trait method does not work", "user": {"login": "xmh0511", "id": 17973891, "node_id": "MDQ6VXNlcjE3OTczODkx", "avatar_url": "https://avatars.githubusercontent.com/u/17973891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xmh0511", "html_url": "https://github.com/xmh0511", "followers_url": "https://api.github.com/users/xmh0511/followers", "following_url": "https://api.github.com/users/xmh0511/following{/other_user}", "gists_url": "https://api.github.com/users/xmh0511/gists{/gist_id}", "starred_url": "https://api.github.com/users/xmh0511/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xmh0511/subscriptions", "organizations_url": "https://api.github.com/users/xmh0511/orgs", "repos_url": "https://api.github.com/users/xmh0511/repos", "events_url": "https://api.github.com/users/xmh0511/events{/privacy}", "received_events_url": "https://api.github.com/users/xmh0511/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 235791, "node_id": "MDU6TGFiZWwyMzU3OTE=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-diagnostics", "name": "A-diagnostics", "color": "f7e101", "default": false, "description": "Area: Messages for errors, warnings, and lints"}, {"id": 211668100, "node_id": "MDU6TGFiZWwyMTE2NjgxMDA=", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-compiler", "name": "T-compiler", "color": "bfd4f2", "default": false, "description": "Relevant to the compiler team, which will review and decide on the PR/issue."}, {"id": 1472563007, "node_id": "MDU6TGFiZWwxNDcyNTYzMDA3", "url": "https://api.github.com/repos/rust-lang/rust/labels/requires-nightly", "name": "requires-nightly", "color": "76dcde", "default": false, "description": "This issue requires a nightly compiler in some way."}, {"id": 4360021736, "node_id": "LA_kwDOAAsO6M8AAAABA-Cm6A", "url": "https://api.github.com/repos/rust-lang/rust/labels/F-impl_trait_in_fn_trait_return", "name": "F-impl_trait_in_fn_trait_return", "color": "f9c0cc", "default": false, "description": "`#![feature(impl_trait_in_fn_trait_return)]`"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-08T09:06:10Z", "updated_at": "2023-06-12T21:07:49Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "````rust\r\n#![feature(return_position_impl_trait_in_trait, impl_trait_in_fn_trait_return)]\r\ntrait Curry<T0,T1,R>{\r\n    fn to_curry(self)->impl FnOnce(T0)->impl FnOnce(T1)->R;\r\n}\r\nimpl<T0,T1, R, F> Curry<T0,T1,R> for F\r\nwhere F: FnOnce(T0,T1)-> R{\r\n    fn to_curry(self)->impl FnOnce(T0)->impl FnOnce(T1)->R{\r\n        move |v0:T0|{  // #1\r\n           move |v1:T1|{  // #2\r\n               self(v0,v1)\r\n           }\r\n        }\r\n    }\r\n}\r\nfn main(){\r\n    \r\n}\r\n````\r\nThis example is rejected by the latest nightly version, which reports a weird diagnosis \r\n> error: concrete type differs from previous defining opaque type use. cannot resolve opaque type\r\n\r\nThe closure at `#2` should implement `FnOnce(T1)->R`, which is the return value of the closure at `#1`. This example should be accepted. \r\n\r\nSee https://play.rust-lang.org/?version=nightly&mode=debug&edition=2021&gist=4ba0efa20db7cbd756e5cdf635543c4b\r\n\r\n ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/105451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/105451/timeline", "performed_via_github_app": null, "state_reason": null}