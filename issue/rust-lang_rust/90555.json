{"url": "https://api.github.com/repos/rust-lang/rust/issues/90555", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/90555/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/90555/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/90555/events", "html_url": "https://github.com/rust-lang/rust/issues/90555", "id": 1044407059, "node_id": "I_kwDOAAsO6M4-QGMT", "number": 90555, "title": "Building Rust from source with `x.py dist` uses binary components", "user": {"login": "paulmenzel", "id": 9318792, "node_id": "MDQ6VXNlcjkzMTg3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9318792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmenzel", "html_url": "https://github.com/paulmenzel", "followers_url": "https://api.github.com/users/paulmenzel/followers", "following_url": "https://api.github.com/users/paulmenzel/following{/other_user}", "gists_url": "https://api.github.com/users/paulmenzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmenzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmenzel/subscriptions", "organizations_url": "https://api.github.com/users/paulmenzel/orgs", "repos_url": "https://api.github.com/users/paulmenzel/repos", "events_url": "https://api.github.com/users/paulmenzel/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmenzel/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-11-04T06:37:09Z", "updated_at": "2021-11-04T15:47:07Z", "closed_at": "2021-11-04T08:41:46Z", "author_association": "NONE", "active_lock_reason": null, "body": "In issue https://github.com/rust-lang/rust/issues/86436, @Mark-Simulacrum commented:\r\n\r\n> FWIW we don't generally expect people to use x.py build in dist tarballs -- x.py dist/install are more likely to work.\r\n\r\nI tested `./x.py dist` with Rust 1.56.1, but unfortunately, it does not build every component from source, but downloads rust-std, rustc and cargo 1.55.0, containing the binaries.\r\n\r\n```\r\n[\u2026]\r\n+ python3 ./x.py dist\r\ninfo: looks like you are running this command under `sudo`\r\n      and so in order to preserve your $HOME this will now\r\n      use vendored sources by default.\r\ndownloading https://static.rust-lang.org/dist/2021-09-09/rust-std-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\n######################################################################## 100.0%\r\nextracting /pkg/rustc-1.56.1-0/build/rustc-1.56.1-src/build/cache/2021-09-09/rust-std-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\ndownloading https://static.rust-lang.org/dist/2021-09-09/rustc-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\n######################################################################## 100.0%\r\nextracting /pkg/rustc-1.56.1-0/build/rustc-1.56.1-src/build/cache/2021-09-09/rustc-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\ndownloading https://static.rust-lang.org/dist/2021-09-09/cargo-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\n######################################################################## 100.0%\r\nextracting /pkg/rustc-1.56.1-0/build/rustc-1.56.1-src/build/cache/2021-09-09/cargo-1.55.0-x86_64-unknown-linux-gnu.tar.xz\r\n   Compiling proc-macro2 v1.0.24\r\n[\u2026]\r\n```\r\n\r\nCan the already installed Rust in the system be used instead?\r\n\r\nOtherwise, `x.py build` should be the supported way for distributions to build Rust.", "closed_by": {"login": "paulmenzel", "id": 9318792, "node_id": "MDQ6VXNlcjkzMTg3OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/9318792?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulmenzel", "html_url": "https://github.com/paulmenzel", "followers_url": "https://api.github.com/users/paulmenzel/followers", "following_url": "https://api.github.com/users/paulmenzel/following{/other_user}", "gists_url": "https://api.github.com/users/paulmenzel/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulmenzel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulmenzel/subscriptions", "organizations_url": "https://api.github.com/users/paulmenzel/orgs", "repos_url": "https://api.github.com/users/paulmenzel/repos", "events_url": "https://api.github.com/users/paulmenzel/events{/privacy}", "received_events_url": "https://api.github.com/users/paulmenzel/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/90555/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/90555/timeline", "performed_via_github_app": null, "state_reason": "completed"}