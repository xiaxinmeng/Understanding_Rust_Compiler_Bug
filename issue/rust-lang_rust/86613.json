{"url": "https://api.github.com/repos/rust-lang/rust/issues/86613", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/86613/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/86613/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/86613/events", "html_url": "https://github.com/rust-lang/rust/issues/86613", "id": 929802514, "node_id": "MDU6SXNzdWU5Mjk4MDI1MTQ=", "number": 86613, "title": "docs: Clarify `std::io::Stdin::read_to_string` behavior", "user": {"login": "ayyEve", "id": 19354804, "node_id": "MDQ6VXNlcjE5MzU0ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/19354804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayyEve", "html_url": "https://github.com/ayyEve", "followers_url": "https://api.github.com/users/ayyEve/followers", "following_url": "https://api.github.com/users/ayyEve/following{/other_user}", "gists_url": "https://api.github.com/users/ayyEve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayyEve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayyEve/subscriptions", "organizations_url": "https://api.github.com/users/ayyEve/orgs", "repos_url": "https://api.github.com/users/ayyEve/repos", "events_url": "https://api.github.com/users/ayyEve/events{/privacy}", "received_events_url": "https://api.github.com/users/ayyEve/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 234902, "node_id": "MDU6TGFiZWwyMzQ5MDI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-enhancement", "name": "C-enhancement", "color": "f5f1fd", "default": false, "description": "Category: An issue proposing an enhancement or a PR with one."}, {"id": 431251592, "node_id": "MDU6TGFiZWw0MzEyNTE1OTI=", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-docs", "name": "A-docs", "color": "f7e101", "default": false, "description": "Area: documentation for any part of the project, including the compiler, standard library, and tools"}, {"id": 2011781731, "node_id": "MDU6TGFiZWwyMDExNzgxNzMx", "url": "https://api.github.com/repos/rust-lang/rust/labels/T-libs", "name": "T-libs", "color": "bfd4f2", "default": false, "description": "Relevant to the library team, which will review and decide on the PR/issue."}, {"id": 2238437210, "node_id": "MDU6TGFiZWwyMjM4NDM3MjEw", "url": "https://api.github.com/repos/rust-lang/rust/labels/A-io", "name": "A-io", "color": "f7e101", "default": false, "description": "Area: std::io, std::fs, std::net and std::path"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-06-25T03:52:45Z", "updated_at": "2021-10-27T15:18:25Z", "closed_at": "2021-10-27T15:18:25Z", "author_association": "NONE", "active_lock_reason": null, "body": "Hi all,\r\nI'm getting a weird stdin blocking issue. when reading from stdin, the console appears to freeze, nothing except what i type is written to the console. however, on windows, when the app is terminated the console buffer is \"flushed\", and all missing output is written, this doesnt seem to happen on linux (again, through ssh).\r\nI originally encountered this issue on windows, but i was able to replicate it on linux with an (slightly) older toolchain (through ssh)\r\nI will test beta, nightly, and a much older toolchain soon.\r\n\r\nI tried this code:\r\n```rust\r\nuse std::io::Read;\r\nfn main() -> std::io::Result<()> {\r\n    println!(\"type your input\");\r\n    \r\n    let mut buffer = String::new();\r\n    std::io::stdin().read_to_string(&mut buffer)?;\r\n\r\n    println!(\"got input {}\", buffer);\r\n    Ok(())\r\n}\r\n```\r\n\r\nI expected to see this happen: *\"type your input\" logged, the message i typed, and after hitting enter, \"got input {X}\" being logged, and the program closing*\r\n\r\nInstead, this happened: *\"type out input\" is logged, my message appears as im writing, but hitting enter does not input the message, almost like it inserts a newline instead. after this, the program must be terminated with ctrl+c *\r\nlinux:\r\n![image](https://user-images.githubusercontent.com/19354804/123365318-1151d480-d544-11eb-8db1-77d6767fa0dc.png)\r\nwindows:\r\n![image](https://user-images.githubusercontent.com/19354804/123365927-414da780-d545-11eb-9005-0aa0bba4c522.png)\r\n\r\n\r\n### Meta\r\n\r\n`rustc --version --verbose`:\r\n```\r\n(linux)\r\nrustc 1.52.1 (9bc8c42bb 2021-05-09)\r\nbinary: rustc\r\ncommit-hash: 9bc8c42bb2f19e745a63f3445f1ac248fb015e53\r\ncommit-date: 2021-05-09\r\nhost: x86_64-unknown-linux-gnu\r\nrelease: 1.52.1\r\nLLVM version: 12.0.0\r\n\r\n(windows)\r\nrustc 1.53.0 (53cb7b09b 2021-06-17)\r\nbinary: rustc\r\ncommit-hash: 53cb7b09b00cbea8754ffb78e7e3cb521cb8af4b\r\ncommit-date: 2021-06-17\r\nhost: x86_64-pc-windows-msvc\r\nrelease: 1.53.0\r\nLLVM version: 12.0.1\r\n```\r\n\r\n<details><summary>Backtrace</summary>\r\n<p>\r\n\r\n```\r\nN/A, the code does not crash\r\n```\r\n\r\n</p>\r\n</details>\r\n\r\nlmk if i forgot anything and i'll update it asap", "closed_by": {"login": "ayyEve", "id": 19354804, "node_id": "MDQ6VXNlcjE5MzU0ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/19354804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayyEve", "html_url": "https://github.com/ayyEve", "followers_url": "https://api.github.com/users/ayyEve/followers", "following_url": "https://api.github.com/users/ayyEve/following{/other_user}", "gists_url": "https://api.github.com/users/ayyEve/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayyEve/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayyEve/subscriptions", "organizations_url": "https://api.github.com/users/ayyEve/orgs", "repos_url": "https://api.github.com/users/ayyEve/repos", "events_url": "https://api.github.com/users/ayyEve/events{/privacy}", "received_events_url": "https://api.github.com/users/ayyEve/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/86613/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/86613/timeline", "performed_via_github_app": null, "state_reason": "completed"}