{"url": "https://api.github.com/repos/rust-lang/rust/issues/98512", "repository_url": "https://api.github.com/repos/rust-lang/rust", "labels_url": "https://api.github.com/repos/rust-lang/rust/issues/98512/labels{/name}", "comments_url": "https://api.github.com/repos/rust-lang/rust/issues/98512/comments", "events_url": "https://api.github.com/repos/rust-lang/rust/issues/98512/events", "html_url": "https://github.com/rust-lang/rust/issues/98512", "id": 1284743200, "node_id": "I_kwDOAAsO6M5Mk6Ag", "number": 98512, "title": "Edition 2021 build breaks for edition 2018 / rustc 1.47.0", "user": {"login": "crusty-dave", "id": 41089818, "node_id": "MDQ6VXNlcjQxMDg5ODE4", "avatar_url": "https://avatars.githubusercontent.com/u/41089818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crusty-dave", "html_url": "https://github.com/crusty-dave", "followers_url": "https://api.github.com/users/crusty-dave/followers", "following_url": "https://api.github.com/users/crusty-dave/following{/other_user}", "gists_url": "https://api.github.com/users/crusty-dave/gists{/gist_id}", "starred_url": "https://api.github.com/users/crusty-dave/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crusty-dave/subscriptions", "organizations_url": "https://api.github.com/users/crusty-dave/orgs", "repos_url": "https://api.github.com/users/crusty-dave/repos", "events_url": "https://api.github.com/users/crusty-dave/events{/privacy}", "received_events_url": "https://api.github.com/users/crusty-dave/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 650731663, "node_id": "MDU6TGFiZWw2NTA3MzE2NjM=", "url": "https://api.github.com/repos/rust-lang/rust/labels/C-bug", "name": "C-bug", "color": "f5f1fd", "default": false, "description": "Category: This is a bug."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-06-25T23:31:20Z", "updated_at": "2022-06-26T17:47:59Z", "closed_at": "2022-06-26T17:47:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "I have had to override the following crate versions to get our older project to build:\r\n\r\n```\r\n[dependencies]\r\n\r\n# Fix broken dependencies\r\nindexmap = {version = \"=1.8.2\", registry = \"crates-io-mirror\"}\r\ntime = {version = \"=0.2.27\", registry = \"crates-io-mirror\"}\r\ntime-macros = {version = \"=0.1.1\", registry = \"crates-io-mirror\"}\r\ncookie = {version = \"=0.15.1\", registry = \"crates-io-mirror\"}\r\ncookie_store = {version = \"=0.15.1\", registry = \"crates-io-mirror\"}\r\nslog-term = {version=\"=2.8.1\", registry = \"crates-io-mirror\"}\r\nparking_lot = {version=\"=0.11.2\", registry = \"crates-io-mirror\"}\r\nparking_lot_core = {version=\"=0.8.5\", registry = \"crates-io-mirror\"}\r\nr2d2 = {version=\"=0.8.9\", registry = \"crates-io-mirror\"}\r\nlibz-sys = {version=\"=1.1.3\", registry = \"crates-io-mirror\"}\r\nscheduled-thread-pool = {version=\"=0.2.5\", registry = \"crates-io-mirror\"}\r\nopenssl-probe = {version=\"=0.1.5\", registry = \"crates-io-mirror\"}\r\nopenssl-sys = {version=\"=0.9.72\", registry = \"crates-io-mirror\"}\r\nlinked-hash-map = {version=\"=0.5.4\", registry = \"crates-io-mirror\"}\r\nslog-json = {version=\"=2.3.0\", registry = \"crates-io-mirror\"}\r\nhttp = {version=\"=0.2.4\", registry = \"crates-io-mirror\"}\r\nlog4rs = {version=\"=1.1.0\", features = [\"all_components\", \"background_rotation\"], registry = \"crates-io-mirror\"}\r\nopenssl = {registry = \"crates-io-mirror\", version=\"=0.10.38\"}\r\n\r\n```\r\nNote that linked-hash-map was just broken in the last few hours.\r\n\r\nNote that we are forced to use 2018 / rustc 147.0 due to old dependencies from the actix-web (version=\"3.3.3\") and related crates due to actix-web's lack of keeping current.  We haven't had time to investigate updating to actix-web 4.x yet.\r\n\r\nAnyone who moved crates to edition 2021 should have followed semver semantics, but they apparently did not.\r\n\r\nFor anyone else facing the same issue, hopefully the above list will save you some time.  Note that our crates-io-mirror is using JFrog artifactory, I don't know if any of these issues may be related to that.\r\n\r\n\r\nThe following was the first build error that was seen, many of the other crate issues seem to have cascaded after this:\r\n\r\nDownloaded hashbrown v0.12.1 (registry `[https://{mirror}/artifactory/git/crates-io.git`](https://{mirror}/artifactory/git/crates-io.git%60))\r\nerror: failed to parse manifest at `{path}\\hashbrown-0.12.1\\Cargo.toml`\r\n\r\nCaused by:\r\n  failed to parse the `edition` key\r\n\r\nCaused by:\r\n  this version of Cargo is older than the `2021` edition, and only supports `2015` and `2018` editions.\r\nBuild Errors\r\n", "closed_by": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/rust-lang/rust/issues/98512/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/rust-lang/rust/issues/98512/timeline", "performed_via_github_app": null, "state_reason": "completed"}