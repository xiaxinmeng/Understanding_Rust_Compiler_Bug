
thread 'main' panicked at 'assertion failed: match borrow.kind {{
    BorrowKind::Shared => false,
    BorrowKind::Unique | BorrowKind::Mut {{ .. }} => true,
}}', librustc_mir\borrow_check\mod.rs:1252:13
stack backtrace:
   0: std::sys::windows::backtrace::unwind_backtrace
             at .\src\libstd\sys\windows\backtrace\mod.rs:65
   1: std::sys_common::backtrace::_print
             at .\src\libstd\sys_common\backtrace.rs:71
   2: std::sys_common::backtrace::print
             at .\src\libstd\sys_common\backtrace.rs:59
   3: std::panicking::default_hook::{{closure}}
             at .\src\libstd\panicking.rs:205
   4: std::panicking::default_hook
             at .\src\libstd\panicking.rs:221
   5: rustc::util::common::panic_hook
             at .\src\librustc\util\common.rs:55
   6: std::panicking::rust_panic_with_hook
             at .\src\libstd\panicking.rs:461
   7: std::panicking::begin_panic<str*>
             at .\src\libstd\panicking.rs:391
   8: rustc_mir::borrow_check::MirBorrowckCtxt::check_activations
             at .\src\librustc_mir\borrow_check\mod.rs:1252
   9: rustc_mir::borrow_check::{{impl}}::visit_statement_entry
             at .\src\librustc_mir\borrow_check\mod.rs:331
  10: rustc_mir::dataflow::DataflowResultsConsumer::process_basic_block
             at .\src\librustc_mir\dataflow\mod.rs:348
  11: rustc_mir::dataflow::DataflowResultsConsumer::analyze_results
             at .\src\librustc_mir\dataflow\mod.rs:338
  12: rustc_mir::borrow_check::do_mir_borrowck
             at .\src\librustc_mir\borrow_check\mod.rs:253
  13: rustc::ty::context::tls::with_context::{{closure}}
             at .\src\librustc\ty\context.rs:1881
  14: rustc::ty::context::tls::with_context_opt
             at .\src\librustc\ty\context.rs:1872
  15: rustc::ty::context::tls::with_context
             at .\src\librustc\ty\context.rs:1881
  16: rustc::ty::context::tls::with_related_context<closure,core::option::Option<rustc::mir::ClosureRegionRequirements>>
             at .\src\librustc\ty\context.rs:1892
  17: rustc::ty::context::GlobalCtxt::enter_local
             at .\src\librustc\ty\context.rs:1562
  18: rustc::infer::InferCtxtBuilder::enter<closure,core::option::Option<rustc::mir::ClosureRegionRequirements>>
             at .\src\librustc\infer\mod.rs:442
  19: rustc_mir::borrow_check::mir_borrowck
             at .\src\librustc_mir\borrow_check\mod.rs:80
  20: rustc::ty::maps::queries::mir_borrowck::compute_result
             at .\src\librustc\ty\maps\plumbing.rs:557
  21: rustc::dep_graph::graph::DepGraph::with_task_impl<rustc::ty::context::TyCtxt,rustc::hir::def_id::DefId,core::option::Option<rustc::mir::ClosureRegionRequirements>>
             at .\src\librustc\dep_graph\graph.rs:343
  22: rustc::dep_graph::graph::DepGraph::with_task
             at .\src\librustc\dep_graph\graph.rs:209
  23: rustc::ty::maps::{{impl}}::force_with_lock::{{closure}}
             at .\src\librustc\ty\maps\plumbing.rs:706
  24: rustc::ty::maps::{{impl}}::start_job::{{closure}}::{{closure}}
             at .\src\librustc\ty\maps\plumbing.rs:538
  25: rustc::ty::context::tls::enter_context::{{closure}}
             at .\src\librustc\ty\context.rs:1836
  26: rustc::ty::context::tls::set_tlv
             at .\src\librustc\ty\context.rs:1779
  27: rustc::ty::context::tls::enter_context
             at .\src\librustc\ty\context.rs:1835
  28: rustc::ty::maps::{{impl}}::start_job::{{closure}}
             at .\src\librustc\ty\maps\plumbing.rs:537
  29: rustc::ty::context::tls::with_related_context::{{closure}}
             at .\src\librustc\ty\context.rs:1897
  30: rustc::ty::context::tls::with_context::{{closure}}
             at .\src\librustc\ty\context.rs:1881
  31: rustc::ty::context::tls::with_context_opt
             at .\src\librustc\ty\context.rs:1872
  32: rustc::ty::context::tls::with_context
             at .\src\librustc\ty\context.rs:1881
  33: rustc::ty::context::tls::with_related_context<closure,((core::option::Option<rustc::mir::ClosureRegionRequirements>, rustc::dep_graph::graph::DepNodeIndex), alloc::rc::Rc<rustc::ty::maps::job::QueryJob>)>
             at .\src\librustc\ty\context.rs:1892
  34: rustc::ty::maps::queries::mir_borrowck::start_job
             at .\src\librustc\ty\maps\plumbing.rs:507
  35: rustc::ty::maps::queries::mir_borrowck::force_with_lock
             at .\src\librustc\ty\maps\plumbing.rs:695
  36: rustc::ty::maps::queries::mir_borrowck::try_get_with
             at .\src\librustc\ty\maps\plumbing.rs:403
  37: rustc::ty::maps::queries::mir_borrowck::try_get
             at .\src\librustc\ty\maps\plumbing.rs:742
  38: rustc::ty::maps::TyCtxtAt::mir_borrowck
             at .\src\librustc\ty\maps\plumbing.rs:781
  39: rustc::ty::context::TyCtxt::mir_borrowck
             at .\src\librustc\ty\maps\plumbing.rs:774
  40: rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}::{{closure}}<closure,core::result::Result<(), std::io::error::Error>>
             at .\src\librustc_driver\driver.rs:1154
  41: rustc_driver::driver::phase_3_run_analysis_passes::{{closure}}
             at .\src\librustc_driver\driver.rs:1152
  42: rustc::ty::context::tls::enter_global::{{closure}}::{{closure}}
             at .\src\librustc\ty\context.rs:1859
  43: rustc::ty::context::tls::enter_context::{{closure}}
             at .\src\librustc\ty\context.rs:1836
  44: rustc::ty::context::tls::set_tlv
             at .\src\librustc\ty\context.rs:1779
  45: rustc::ty::context::tls::enter_context<closure,core::result::Result<core::result::Result<(rustc::session::config::OutputFilenames, alloc::boxed::Box<Any>, rustc::dep_graph::graph::DepGraph), rustc::session::CompileIncomplete>, rustc::session::CompileIncomplete>>
             at .\src\librustc\ty\context.rs:1835
  46: rustc::ty::context::tls::enter_global::{{closure}}
             at .\src\librustc\ty\context.rs:1858
  47: rustc::ty::context::tls::with_thread_locals::{{closure}}::{{closure}}
             at .\src\librustc\ty\context.rs:1825
  48: std::thread::local::LocalKey<core::cell::Cell<fn(rustc_errors::diagnostic::Diagnostic*)>>::try_with
             at .\src\libstd\thread\local.rs:294
  49: std::thread::local::LocalKey<core::cell::Cell<fn(rustc_errors::diagnostic::Diagnostic*)>>::with
             at .\src\libstd\thread\local.rs:248
  50: rustc::ty::context::tls::with_thread_locals::{{closure}}
             at .\src\librustc\ty\context.rs:1817
  51: std::thread::local::LocalKey<core::cell::Cell<fn(syntax_pos::span_encoding::Span, mut core::fmt::Formatter*) -> core::result::Result<(), core::fmt::Error>>>::try_with
             at .\src\libstd\thread\local.rs:294
  52: std::thread::local::LocalKey<core::cell::Cell<fn(syntax_pos::span_encoding::Span, mut core::fmt::Formatter*) -> core::result::Result<(), core::fmt::Error>>>::with<core::cell::Cell<fn(syntax_pos::span_encoding::Span, mut core::fmt::Formatter*) -> core::result::Result<(), core::fmt::Error>>,closure,core::result::Result<core::result::Result<(rustc::session::config::OutputFilenames, alloc::boxed::Box<Any>, rustc::dep_graph::graph::DepGraph), rustc::session::CompileIncomplete>, rustc::session::CompileIncomplete>>
             at .\src\libstd\thread\local.rs:248
  53: rustc::ty::context::TyCtxt::create_and_enter<closure,core::result::Result<core::result::Result<(rustc::session::config::OutputFilenames, alloc::boxed::Box<Any>, rustc::dep_graph::graph::DepGraph), rustc::session::CompileIncomplete>, rustc::session::CompileIncomplete>>
             at .\src\librustc\ty\context.rs:1299
  54: rustc_driver::driver::compile_input
             at .\src\librustc_driver\driver.rs:231
  55: rustc_driver::run_compiler_impl
             at .\src\librustc_driver\lib.rs:540
  56: rustc_driver::run_compiler::{{closure}}
             at .\src\librustc_driver\lib.rs:457
  57: scoped_tls::ScopedKey<syntax_pos::Globals>::set
             at C:\Users\John\.cargo\registry\src\github.com-1ecc6299db9ec823\scoped-tls-0.1.1\src\lib.rs:155
  58: syntax::with_globals::{{closure}}
             at .\src\libsyntax\lib.rs:96
  59: scoped_tls::ScopedKey<syntax::Globals>::set<syntax::Globals,closure,(core::result::Result<(), rustc::session::CompileIncomplete>, core::option::Option<rustc::session::Session>)>
             at C:\Users\John\.cargo\registry\src\github.com-1ecc6299db9ec823\scoped-tls-0.1.1\src\lib.rs:155
  60: syntax::with_globals<closure,(core::result::Result<(), rustc::session::CompileIncomplete>, core::option::Option<rustc::session::Session>)>
             at .\src\libsyntax\lib.rs:95
  61: rustc_driver::run_compiler
             at .\src\librustc_driver\lib.rs:456
  62: rustc_driver::main::{{closure}}
             at .\src\librustc_driver\lib.rs:1683
  63: rustc_driver::run::{{closure}}
             at .\src\librustc_driver\lib.rs:174
  64: rustc_driver::monitor::{{closure}}
             at .\src\librustc_driver\lib.rs:1597
  65: rustc_driver::in_rustc_thread
             at .\src\librustc_driver\lib.rs:1529
  66: rustc_driver::monitor
             at .\src\librustc_driver\lib.rs:1596
  67: rustc_driver::run<closure>
             at .\src\librustc_driver\lib.rs:170
  68: rustc_driver::main
             at .\src\librustc_driver\lib.rs:1676
  69: std::rt::lang_start::{{closure}}<()>
             at .\src\libstd\rt.rs:74
  70: std::rt::lang_start_internal::{{closure}}
             at .\src\libstd\rt.rs:59
  71: std::panicking::try::do_call<closure,i32>
             at .\src\libstd\panicking.rs:304
  72: panic_unwind::__rust_maybe_catch_panic
             at .\src\libpanic_unwind\lib.rs:105
  73: std::panicking::try
             at .\src\libstd\panicking.rs:283
  74: std::panic::catch_unwind
             at .\src\libstd\panic.rs:361
  75: std::rt::lang_start_internal
             at .\src\libstd\rt.rs:58
  76: main
  77: invoke_main
             at f:\dd\vctools\crt\vcstartup\src\startup\exe_common.inl:78
  78: __scrt_common_main_seh
             at f:\dd\vctools\crt\vcstartup\src\startup\exe_common.inl:283
  79: BaseThreadInitThunk
  80: RtlUserThreadStart
