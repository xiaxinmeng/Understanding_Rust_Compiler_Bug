plain
[02:15:09] failures:
[02:15:09] 
[02:15:09] ---- [run-pass (nll)] run-pass/generics/generic-tag-local.rs stdout ----
[02:15:09] 
[02:15:09] error: test compilation failed although it shouldn't!
[02:15:09] status: exit code: 1
[02:15:09] command: "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc" "/checkout/src/test/run-pass/generics/generic-tag-local.rs" "--target=asmjs-unknown-emscripten" "--error-format" "json" "-Zui-testing" "-C" "prefer-dynamic" "-o" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.js" "-Zborrowck=mir" "-Ztwo-phase-borrows" "-Crpath" "-Zunstable-options" "-Lnative=/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers" "-L" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/auxiliary"
[02:15:09] ------------------------------------------
[02:15:09] 
[02:15:09] ------------------------------------------
[02:15:09] stderr:
[02:15:09] stderr:
[02:15:09] ------------------------------------------
[02:15:09] {"message":"linking with `emcc` failed: exit code: 1","code":null,"level":"error","spans":[],"children":[{"message":"\"emcc\" \"-s\" \"DISABLE_EXCEPTION_CATCHING=0\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.0.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.1.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.2.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.3.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.4.rcgu.o\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.js\" \"-s\" \"EXPORTED_FUNCTIONS=[\\\"_main\\\",\\\"_rust_eh_personality\\\"]\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.4riosz2xe2q4dk0b.rcgu.o\" \"-O0\" \"--memory-init-file\" \"0\" \"-g0\" \"-s\" \"DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]\" \"-L\" \"/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/auxiliary\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libstd-7071e59de94c3175.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libpanic_unwind-ea4ebb4db08f759f.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libunwind-a1212ca14ff4129b.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc_system-78c8f6017dc5ec95.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liblibc-9283279f9fce83e1.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc-65fd40e8c97df1ca.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcore-5d64ed038ad0cc2d.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcompiler_builtins-92e637e4b1a6ef5e.rlib\" \"-l\" \"c\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\" \"-s\" \"ABORTING_MALLOC=0\" \"-s\" \"WASM=0\"","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"error: unresolved symbol: _ZN5alloc7raw_vec17capacity_overflow17h3569b5257e87d2d8E\nerror: unresolved symbol: _ZN49_$LT$alloc__raw_vec__RawVec$LT$T$C$$u20$A$GT$$GT$16reserve_internal17h2e6aed6bd5f3dcd5E_llvm_6FBEDB8A\nerror: unresolved symbol: anon_2908f0d75c4e1a1d8258623fc05ccc63_13_llvm_6FBEDB8A\nAborting compilation due to previous errors | undefined\nTraceback (most recent call last):\n  File \"/emsdk-portable/emscripten/1.37.13//emcc\", line 13, in <module>\n    emcc.run()\n  File \"/emsdk-portable/emscripten/1.37.13/emcc.py\", line 1526, in run\n    final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)\n  File \"/emsdk-portable/emscripten/1.37.13/tools/shared.py\", line 1963, in emscripten\n    call_emscripten(cmdline)\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2190, in _main\n    temp_files.run_and_clean(lambda: main(\n  File \"/emsdk-portable/emscripten/1.37.13/tools/tempfiles.py\", line 78, in run_and_clean\n    return func()\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2195, in <lambda>\n    DEBUG=DEBUG,\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2095, in main\n    temp_files=temp_files, DEBUG=DEBUG)\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 98, in emscript\n    glue, forwarded_data = compiler_glue(metadata, settings, libraries, compiler_engine, temp_files, DEBUG)\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 219, in compiler_glue\n    glue, forwarded_data = compile_settings(compiler_engine, settings, libraries, temp_files)\n  File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 531, in compile_settings\n    cwd=path_from_root('src'), error_limit=300)\n  File \"/emsdk-portable/emscripten/1.37.13/tools/jsrun.py\", line 128, in run_js\n    raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])\nException: Expected the command ['/emsdk-portable/node/4.1.1_64bit/bin/node', '/emsdk-portable/emscripten/1.37.13/src/compiler.js', '/tmp/tmpzNlnyl.txt', '/emsdk-portable/emscripten/1.37.13/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import\n// and export values on it, and do the work to get that through\n// closure compiler if necessary. There are various ways Module can be used:\n// 1. Not defined. We create it here\n// 2. A function parameter, function(Module) { ..gener\n","code":null,"level":"note","spans":[],"children":[],"rendered":null}],"rendered":"error: linking with `emcc` failed: exit code: 1\n   |\n   = note: \"emcc\" \"-s\" \"DISABLE_EXCEPTION_CATCHING=0\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.0.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.1.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.2.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.3.rcgu.o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.generic_tag_local.7rcbfp3g-cgu.4.rcgu.o\" \"-o\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.js\" \"-s\" \"EXPORTED_FUNCTIONS=[\\\"_main\\\",\\\"_rust_eh_personality\\\"]\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/a.4riosz2xe2q4dk0b.rcgu.o\" \"-O0\" \"--memory-init-file\" \"0\" \"-g0\" \"-s\" \"DEFAULT_LIBRARY_FUNCS_TO_INCLUDE=[]\" \"-L\" \"/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass/generics/generic-tag-local.nll/auxiliary\" \"-L\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libstd-7071e59de94c3175.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libpanic_unwind-ea4ebb4db08f759f.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libunwind-a1212ca14ff4129b.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc_system-78c8f6017dc5ec95.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liblibc-9283279f9fce83e1.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/liballoc-65fd40e8c97df1ca.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcore-5d64ed038ad0cc2d.rlib\" \"/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib/libcompiler_builtins-92e637e4b1a6ef5e.rlib\" \"-l\" \"c\" \"-s\" \"ERROR_ON_UNDEFINED_SYMBOLS=1\" \"-s\" \"ABORTING_MALLOC=0\" \"-s\" \"WASM=0\"\n   = note: error: unresolved symbol: _ZN5alloc7raw_vec17capacity_overflow17h3569b5257e87d2d8E\n           error: unresolved symbol: _ZN49_$LT$alloc__raw_vec__RawVec$LT$T$C$$u20$A$GT$$GT$16reserve_internal17h2e6aed6bd5f3dcd5E_llvm_6FBEDB8A\n           error: unresolved symbol: anon_2908f0d75c4e1a1d8258623fc05ccc63_13_llvm_6FBEDB8A\n           Aborting compilation due to previous errors | undefined\n           Traceback (most recent call last):\n             File \"/emsdk-portable/emscripten/1.37.13//emcc\", line 13, in <module>\n               emcc.run()\n             File \"/emsdk-portable/emscripten/1.37.13/emcc.py\", line 1526, in run\n               final = shared.Building.emscripten(final, append_ext=False, extra_args=extra_args)\n             File \"/emsdk-portable/emscripten/1.37.13/tools/shared.py\", line 1963, in emscripten\n               call_emscripten(cmdline)\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2190, in _main\n               temp_files.run_and_clean(lambda: main(\n             File \"/emsdk-portable/emscripten/1.37.13/tools/tempfiles.py\", line 78, in run_and_clean\n               return func()\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2195, in <lambda>\n               DEBUG=DEBUG,\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 2095, in main\n               temp_files=temp_files, DEBUG=DEBUG)\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 98, in emscript\n               glue, forwarded_data = compiler_glue(metadata, settings, libraries, compiler_engine, temp_files, DEBUG)\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 219, in compiler_glue\n               glue, forwarded_data = compile_settings(compiler_engine, settings, libraries, temp_files)\n             File \"/emsdk-portable/emscripten/1.37.13/emscripten.py\", line 531, in compile_settings\n               cwd=path_from_root('src'), error_limit=300)\n             File \"/emsdk-portable/emscripten/1.37.13/tools/jsrun.py\", line 128, in run_js\n               raise Exception('Expected the command ' + str(command) + ' to finish with return code ' + str(assert_returncode) + ', but it returned with code ' + str(proc.returncode) + ' instead! Output: ' + str(ret)[:error_limit])\n           Exception: Expected the command ['/emsdk-portable/node/4.1.1_64bit/bin/node', '/emsdk-portable/emscripten/1.37.13/src/compiler.js', '/tmp/tmpzNlnyl.txt', '/emsdk-portable/emscripten/1.37.13/src/library_pthread_stub.js'] to finish with return code 0, but it returned with code 1 instead! Output: // The Module object: Our interface to the outside world. We import\n           // and export values on it, and do the work to get that through\n           // closure compiler if necessary. There are various ways Module can be used:\n           // 1. Not defined. We create it here\n           // 2. A function parameter, function(Module) { ..gener\n           \n\n"}
[02:15:09] {"message":"aborting due to previous error","code":null,"level":"error","spans":[],"children":[],"rendered":"error: aborting due to previous error\n\n"}
[02:15:09] ------------------------------------------
[02:15:09] 
[02:15:09] thread '[run-pass (nll)] run-pass/generics/generic-tag-local.rs' panicked at 'explicit panic', tools/compiletest/src/runtest.rs:3267:9
[02:15:09] note: Run with `RUST_BACKTRACE=1` for a backtrace.
---
[02:15:09] 
[02:15:09] thread 'main' panicked at 'Some tests failed', tools/compiletest/src/main.rs:499:22
[02:15:09] 
[02:15:09] 
[02:15:09] command did not execute successfully: "/checkout/obj/build/x86_64-unknown-linux-gnu/stage0-tools-bin/compiletest" "--compile-lib-path" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib" "--run-lib-path" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/asmjs-unknown-emscripten/lib" "--rustc-path" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc" "--src-base" "/checkout/src/test/run-pass" "--build-base" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/run-pass" "--stage-id" "stage2-asmjs-unknown-emscripten" "--mode" "run-pass" "--target" "asmjs-unknown-emscripten" "--host" "x86_64-unknown-linux-gnu" "--llvm-filecheck" "/checkout/obj/build/x86_64-unknown-linux-gnu/llvm/build/bin/FileCheck" "--nodejs" "/emsdk-portable/node/4.1.1_64bit/bin/node" "--host-rustcflags" "-Crpath -Zunstable-options " "--target-rustcflags" "-Crpath -Zunstable-options  -Lnative=/checkout/obj/build/asmjs-unknown-emscripten/native/rust-test-helpers" "--docck-python" "/usr/bin/python2.7" "--lldb-python" "/usr/bin/python2.7" "--gdb" "/usr/bin/gdb" "--llvm-version" "8.0.0svn\n" "--cc" "" "--cxx" "" "--cflags" "" "--llvm-components" "" "--llvm-cxxflags" "" "--adb-path" "adb" "--adb-test-dir" "/data/tmp/work" "--android-cross-path" "" "--color" "always" "--compare-mode" "nll"
[02:15:09] 
[02:15:09] 
[02:15:09] failed to run: /checkout/obj/build/bootstrap/debug/bootstrap test --target asmjs-unknown-emscripten src/test/run-pass src/test/run-fail src/libstd src/liballoc src/libcore
[02:15:09] Build completed unsuccessfully in 2:10:36
---
travis_time:end:00a501d1:start=1538585050755897154,finish=1538585050765448003,duration=9550849
travis_fold:end:after_failure.3
travis_fold:start:after_failure.4
travis_time:start:16da1660
$ ln -s . checkout && for CORE in obj/cores/core.*; do EXE=$(echo $CORE | sed 's|obj/cores/core\.[0-9]*\.!checkout!\(.*\)|\1|;y|!|/|'); if [ -f "$EXE" ]; then printf travis_fold":start:crashlog\n\033[31;1m%s\033[0m\n" "$CORE"; gdb --batch -q -c "$CORE" "$EXE" -iex 'set auto-load off' -iex 'dir src/' -iex 'set sysroot .' -ex bt -ex q; echo travis_fold":"end:crashlog; fi; done || true
travis_fold:end:after_failure.4
travis_fold:start:after_failure.5
travis_time:start:026fc397
travis_time:start:026fc397
$ cat ./obj/build/x86_64-unknown-linux-gnu/native/asan/build/lib/asan/clang_rt.asan-dynamic-i386.vers || true
cat: ./obj/build/x86_64-unknown-linux-gnu/native/asan/build/lib/asan/clang_rt.asan-dynamic-i386.vers: No such file or directory
travis_fold:end:after_failure.5
travis_fold:start:after_failure.6
travis_time:start:3b528723
$ dmesg | grep -i kill
