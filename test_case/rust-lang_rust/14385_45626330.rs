
$ export LLVM_VERSION=3.4
$ export CC=gcc
git.1
$ git clone --depth=50 --branch=travis git://github.com/larsbergstrom/rust.git larsbergstrom/rust
Cloning into 'larsbergstrom/rust'...
remote: Counting objects: 23542, done.
remote: Compressing objects: 100% (11970/11970), done.
remote: Total 23542 (delta 18674), reused 14852 (delta 11194)
Receiving objects: 100% (23542/23542), 10.50 MiB | 12.19 MiB/s, done.
Resolving deltas: 100% (18674/18674), done.
Checking connectivity... done.
$ cd larsbergstrom/rust
git.3
$ git checkout -qf 5effe33de4daae07115c485fd61dc22f0df48d3e
$ gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

install.1
$ sudo sh -c "echo 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.4 main' >> /etc/apt/sources.list"
install.2
$ sudo sh -c "echo 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise main' >> /etc/apt/sources.list"
install.3
$ sudo sh -c "echo 'deb http://ppa.launchpad.net/ubuntu-toolchain-r/test/ubuntu precise main' >> /etc/apt/sources.list"
install.4
$ wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
--2014-06-09 15:42:41--  http://llvm.org/apt/llvm-snapshot.gpg.key
Resolving llvm.org (llvm.org)... 128.174.246.134
Connecting to llvm.org (llvm.org)|128.174.246.134|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3145 (3.1K) [application/pgp-keys]
Saving to: `STDOUT'

100%[======================================>] 3,145       --.-K/s   in 0s      

2014-06-09 15:42:42 (308 MB/s) - written to stdout [3145/3145]

OK
install.5
$ sudo apt-get update -qq
W: GPG error: http://ppa.launchpad.net precise Release: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 1E9377A2BA9EF27F
install.6
$ sudo apt-get install -qq --force-yes -y llvm-$LLVM_VERSION llvm-${LLVM_VERSION}-dev clang-$LLVM_VERSION lldb-$LLVM_VERSION
WARNING: The following packages cannot be authenticated!
  gcc-4.8-base libgcc1 libstdc++6 libasan0 libatomic1 libgomp1 libitm1
  libtsan0 libquadmath0 libgcc-4.8-dev libstdc++-4.8-dev libobjc4
  libobjc-4.8-dev
Selecting previously unselected package gcc-4.8-base.
(Reading database ... 70182 files and directories currently installed.)
Unpacking gcc-4.8-base (from .../gcc-4.8-base_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Setting up gcc-4.8-base (4.8.1-2ubuntu1~12.04) ...
(Reading database ... 70189 files and directories currently installed.)
Preparing to replace libgcc1 1:4.6.3-1ubuntu5 (using .../libgcc1_1%3a4.8.1-2ubuntu1~12.04_amd64.deb) ...
Unpacking replacement libgcc1 ...
Setting up libgcc1 (1:4.8.1-2ubuntu1~12.04) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
(Reading database ... 70189 files and directories currently installed.)
Preparing to replace libstdc++6 4.6.3-1ubuntu5 (using .../libstdc++6_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Unpacking replacement libstdc++6 ...
Setting up libstdc++6 (4.8.1-2ubuntu1~12.04) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
Selecting previously unselected package libasan0.
(Reading database ... 70189 files and directories currently installed.)
Unpacking libasan0 (from .../libasan0_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libatomic1.
Unpacking libatomic1 (from .../libatomic1_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libllvm3.4.
Unpacking libllvm3.4 (from .../libllvm3.4_1%3a3.4+206783-1~exp1_amd64.deb) ...
Preparing to replace libgomp1 4.6.3-1ubuntu5 (using .../libgomp1_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Unpacking replacement libgomp1 ...
Selecting previously unselected package libitm1.
Unpacking libitm1 (from .../libitm1_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libtsan0.
Unpacking libtsan0 (from .../libtsan0_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Preparing to replace libquadmath0 4.6.3-1ubuntu5 (using .../libquadmath0_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Unpacking replacement libquadmath0 ...
Selecting previously unselected package libgcc-4.8-dev.
Unpacking libgcc-4.8-dev (from .../libgcc-4.8-dev_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libstdc++-4.8-dev.
Unpacking libstdc++-4.8-dev (from .../libstdc++-4.8-dev_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libobjc4.
Unpacking libobjc4 (from .../libobjc4_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libobjc-4.8-dev.
Unpacking libobjc-4.8-dev (from .../libobjc-4.8-dev_4.8.1-2ubuntu1~12.04_amd64.deb) ...
Selecting previously unselected package libclang1-3.4.
Unpacking libclang1-3.4 (from .../libclang1-3.4_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package binfmt-support.
Unpacking binfmt-support (from .../binfmt-support_2.0.8_amd64.deb) ...
Selecting previously unselected package llvm-3.4-runtime.
Unpacking llvm-3.4-runtime (from .../llvm-3.4-runtime_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package llvm-3.4.
Unpacking llvm-3.4 (from .../llvm-3.4_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package llvm-3.4-dev.
Unpacking llvm-3.4-dev (from .../llvm-3.4-dev_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package lldb-3.4.
Unpacking lldb-3.4 (from .../lldb-3.4_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package libclang-common-3.4-dev.
Unpacking libclang-common-3.4-dev (from .../libclang-common-3.4-dev_1%3a3.4+206783-1~exp1_amd64.deb) ...
Selecting previously unselected package clang-3.4.
Unpacking clang-3.4 (from .../clang-3.4_1%3a3.4+206783-1~exp1_amd64.deb) ...
Processing triggers for man-db ...
Processing triggers for ureadahead ...
Setting up libasan0 (4.8.1-2ubuntu1~12.04) ...
Setting up libatomic1 (4.8.1-2ubuntu1~12.04) ...
Setting up libllvm3.4 (1:3.4+206783-1~exp1) ...
Setting up libgomp1 (4.8.1-2ubuntu1~12.04) ...
Setting up libitm1 (4.8.1-2ubuntu1~12.04) ...
Setting up libtsan0 (4.8.1-2ubuntu1~12.04) ...
Setting up libquadmath0 (4.8.1-2ubuntu1~12.04) ...
Setting up libgcc-4.8-dev (4.8.1-2ubuntu1~12.04) ...
Setting up libstdc++-4.8-dev (4.8.1-2ubuntu1~12.04) ...
Setting up libobjc4 (4.8.1-2ubuntu1~12.04) ...
Setting up libobjc-4.8-dev (4.8.1-2ubuntu1~12.04) ...
Setting up libclang1-3.4 (1:3.4+206783-1~exp1) ...
Setting up binfmt-support (2.0.8) ...
binfmt-support stop/waiting
Setting up llvm-3.4-runtime (1:3.4+206783-1~exp1) ...
Setting up llvm-3.4 (1:3.4+206783-1~exp1) ...
Setting up llvm-3.4-dev (1:3.4+206783-1~exp1) ...
Setting up lldb-3.4 (1:3.4+206783-1~exp1) ...
Setting up libclang-common-3.4-dev (1:3.4+206783-1~exp1) ...
Setting up clang-3.4 (1:3.4+206783-1~exp1) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place
before_script.1
$ mkdir -p local-llvm/bin
before_script.2
$ ln -nsf /usr/bin/llvm-config-$LLVM_VERSION local-llvm/bin/llvm-config
before_script.3
$ ln -nsf /usr/bin/llvm-mc-$LLVM_VERSION local-llvm/bin/llvm-mc
before_script.4
$ ln -nsf /usr/bin/llvm-as-$LLVM_VERSION local-llvm/bin/llvm-as
before_script.5
$ ln -nsf /usr/bin/llvm-dis-$LLVM_VERSION local-llvm/bin/llvm-dis
before_script.6
$ ln -nsf /usr/bin/llc-$LLVM_VERSION local-llvm/bin/llc
before_script.7
$ ln -nsf /usr/include/llvm-$LLVM_VERSION local-llvm/include
before_script.8
$ ./configure --disable-docs --disable-optimize-tests --llvm-root=`pwd`/local-llvm --enable-fast-make --enable-clang
configure: looking for configure programs
