plain
   Compiling serde v1.0.125
   Compiling serde_json v1.0.59
   Compiling lint-docs v0.1.0 (/checkout/src/tools/lint-docs)
    Finished release [optimized] target(s) in 7.73s
warning: the code example in lint `must_not_suspend` in /checkout/compiler/rustc_lint_defs/src/builtin.rs failed to generate the expected output: did not find lint `must_not_suspend` in output of example, got:

warning: unused variable: `guard`
  --> lint_example.rs:10:9
   |
10 |     let guard = SyncThing {};
   |         ^^^^^ help: if this is intentional, prefix it with an underscore: `_guard`
   = note: `#[warn(unused_variables)]` on by default



warning: struct is never constructed: `SyncThing`
 --> lint_example.rs:5:8
  |
5 | struct SyncThing {}
  |
  = note: `#[warn(dead_code)]` on by default



warning: function is never used: `yield_now`
 --> lint_example.rs:7:10
  |
7 | async fn yield_now() {}



warning: function is never used: `uhoh`
 --> lint_example.rs:9:14
  |
9 | pub async fn uhoh() {


warning: 4 warnings emitted

---
doc tests for: /checkout/src/doc/rustc/src/what-is-rustc.md
Set({"src/tools/lint-docs"}) not skipped for "bootstrap::test::LintDocs" -- not in ["src/tools/tidy"]
 finished in 1.033 seconds
Generating lint docs (x86_64-unknown-linux-gnu)
error: failed to test example in lint docs for `must_not_suspend` in /checkout/compiler/rustc_lint_defs/src/builtin.rs:318: did not find lint `must_not_suspend` in output of example, got:

warning: unused variable: `guard`

  --> lint_example.rs:10:9
  --> lint_example.rs:10:9
command did not execute successfully: "/checkout/obj/build/x86_64-unknown-linux-gnu/stage0-tools-bin/lint-docs" "--src" "/checkout/compiler" "--out" "/checkout/obj/build/x86_64-unknown-linux-gnu/md-doc/rustc/src/lints" "--rustc" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc" "--rustc-target" "x86_64-unknown-linux-gnu" "--validate"
   |
10 |     let guard = SyncThing {};
   |         ^^^^^ help: if this is intentional, prefix it with an underscore: `_guard`
   = note: `#[warn(unused_variables)]` on by default



warning: struct is never constructed: `SyncThing`
 --> lint_example.rs:5:8
  |
5 | struct SyncThing {}
  |
  = note: `#[warn(dead_code)]` on by default



warning: function is never used: `yield_now`
 --> lint_example.rs:7:10
  |
7 | async fn yield_now() {}



warning: function is never used: `uhoh`
 --> lint_example.rs:9:14
  |
9 | pub async fn uhoh() {


warning: 4 warnings emitted




This error was generated by the lint-docs tool.
This tool extracts documentation for lints from the source code and places
them in the rustc book. See the declare_lint! documentation
https://doc.rust-lang.org/nightly/nightly-rustc/rustc_lint_defs/macro.declare_lint.html


To re-run these tests, run: ./x.py test --keep-stage=0 src/tools/lint-docs
The --keep-stage flag should be used if you have already built the compiler

expected success, got: exit status: 1


