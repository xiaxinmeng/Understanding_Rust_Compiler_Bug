plain
---- [codegen-units] tests/codegen-units/partitioning/local-inlining.rs stdout ----

error: compilation failed!
status: exit status: 101
command: "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc" "/checkout/tests/codegen-units/partitioning/local-inlining.rs" "-Zthreads=1" "--sysroot" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2" "--target=x86_64-unknown-linux-gnu" "-C" "incremental=/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-inlining/local-inlining.inc" "-Z" "incremental-verify-ich" "-Z" "human_readable_cgu_names" "-O" "-C" "prefer-dynamic" "--out-dir" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-inlining" "-Crpath" "-Cdebuginfo=0" "-Lnative=/checkout/obj/build/x86_64-unknown-linux-gnu/native/rust-test-helpers" "-L" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-inlining/auxiliary" "-Zprint-mono-items=lazy" "-Zinline-in-all-cgus"
stdout: none
--- stderr -------------------------------
thread 'rustc' panicked at 'attempted to read from stolen value: rustc_middle::mir::Body', compiler/rustc_mir_transform/src/inline/cycle.rs:156:27
   0:     0x7f4df0f03934 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h973b9b3cd8d96d64
   1:     0x7f4df0f6a598 - core::fmt::write::he4ec6bc2dc769897
   2:     0x7f4df0ef80e1 - std::io::Write::write_fmt::hd725e0dde2d985a3
Build completed unsuccessfully in 0:13:02
Build completed unsuccessfully in 0:13:02
   3:     0x7f4df0f03741 - std::sys_common::backtrace::print::h05be6a5964febd29
   4:     0x7f4df0f068aa - std::panicking::default_hook::{{closure}}::hb19c6d8855d59711
   5:     0x7f4df0f0658c - std::panicking::default_hook::h59324a7aaaad1f4a
   6:     0x7f4df19ab66b - rustc_driver_impl[2692cb0124243d90]::install_ice_hook::{closure#0}
   7:     0x7f4df0f06fb7 - std::panicking::rust_panic_with_hook::hd5882eddf1252148
   8:     0x7f4df0f06d37 - std::panicking::begin_panic_handler::{{closure}}::h01d691b26bc0b508
   9:     0x7f4df0f03df6 - std::sys_common::backtrace::__rust_end_short_backtrace::h7659db9f2c55392c
  10:     0x7f4df0f06a27 - rust_begin_unwind
  11:     0x7f4df0ebb0d3 - core::panicking::panic_fmt::h814a7070818f5176
  12:     0x7f4df23fb618 - <rustc_data_structures[fc558cb0ab8d83cf]::steal::Steal<rustc_middle[11e0a2afee64df25]::mir::Body>>::borrow
  13:     0x7f4df2585e75 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_inliner_callees
  14:     0x7f4df34e0b77 - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>
  15:     0x7f4df3494aa5 - <rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef)>>::call_once
  16:     0x7f4df36901c1 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>), rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef)>>::call_once
  17:     0x7f4df33b5ec2 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>), rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>
  18:     0x7f4df36455c1 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  19:     0x7f4df35be153 - rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::get_query_incr::__rust_end_short_backtrace
  20:     0x7f4df259a5e9 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_callgraph_reachable::process
  21:     0x7f4df2599994 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_callgraph_reachable
  22:     0x7f4df34e1d8c - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>
  23:     0x7f4df349ae87 - <rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId))>>::call_once
  24:     0x7f4df3690566 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>), (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId))>>::call_once
  25:     0x7f4df33b73f0 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>), (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>
  26:     0x7f4df366e5ac - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  27:     0x7f4df35bdf78 - rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::get_query_incr::__rust_end_short_backtrace
  28:     0x7f4df257de94 - rustc_middle[11e0a2afee64df25]::query::plumbing::query_get_at::<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>>
  29:     0x7f4df258971d - <rustc_mir_transform[11377a1763c1a40d]::inline::Inliner>::try_inlining
  30:     0x7f4df2587319 - <rustc_mir_transform[11377a1763c1a40d]::inline::Inliner>::process_blocks
  31:     0x7f4df2586647 - <rustc_mir_transform[11377a1763c1a40d]::inline::Inline as rustc_middle[11e0a2afee64df25]::mir::MirPass>::run_pass
  32:     0x7f4df24a72cf - <rustc_session[c008eec6176ae570]::session::Session>::time::<(), rustc_mir_transform[11377a1763c1a40d]::pass_manager::run_passes_inner::{closure#3}>
  33:     0x7f4df2583e02 - rustc_mir_transform[11377a1763c1a40d]::pass_manager::run_passes_inner
  34:     0x7f4df24d91fd - rustc_mir_transform[11377a1763c1a40d]::optimized_mir
  35:     0x7f4df34deaae - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>
  36:     0x7f4df3506850 - <rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, rustc_span[bf0fd1c959e4fc6a]::def_id::DefId)>>::call_once
  37:     0x7f4df33b5a30 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>, false, false, false>), rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>
  38:     0x7f4df363c387 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  39:     0x7f4df35b8982 - rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::get_query_incr::__rust_end_short_backtrace
  40:     0x7f4df44e153d - rustc_middle[11e0a2afee64df25]::query::plumbing::query_get_at::<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>>
  41:     0x7f4df44ea43b - <rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt>::instance_mir
  42:     0x7f4df237a2bb - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_neighbours
  43:     0x7f4df23771f9 - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_items_rec
  44:     0x7f4df2382f34 - <core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<rustc_data_structures[fc558cb0ab8d83cf]::sync::par_for_each_in<alloc[8d7bc98adf2dcc2a]::vec::Vec<rustc_middle[11e0a2afee64df25]::mir::mono::MonoItem>, rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}::{closure#0}>::{closure#0}::{closure#0}> as core[64123c86b3f0666]::ops::function::FnOnce<()>>::call_once
  45:     0x7f4df238a855 - std[9e2dbed3b17c9e31]::panicking::try::<(), core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<rustc_data_structures[fc558cb0ab8d83cf]::sync::par_for_each_in<alloc[8d7bc98adf2dcc2a]::vec::Vec<rustc_middle[11e0a2afee64df25]::mir::mono::MonoItem>, rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}::{closure#0}>::{closure#0}::{closure#0}>>
  46:     0x7f4df23b6f87 - <rustc_session[c008eec6176ae570]::session::Session>::time::<(), rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}>
  47:     0x7f4df23735c4 - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items
  48:     0x7f4df23946e2 - rustc_monomorphize[3cb0a73a8fe1ad6b]::partitioning::collect_and_partition_mono_items
  49:     0x7f4df34e2b76 - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>
  50:     0x7f4df34a087a - <rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, ())>>::call_once
  51:     0x7f4df368fb87 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>), ())>>::call_once
  52:     0x7f4df33b356e - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>), (), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>
  53:     0x7f4df35ea662 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  54:     0x7f4df339fc02 - rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::get_query_incr::__rust_end_short_backtrace
  55:     0x7f4df1c324f7 - rustc_codegen_ssa[2f7a07e2147b8620]::base::codegen_crate::<rustc_codegen_llvm[b51b29f2ec72caa2]::LlvmCodegenBackend>
  56:     0x7f4df1c2efe0 - <rustc_codegen_llvm[b51b29f2ec72caa2]::LlvmCodegenBackend as rustc_codegen_ssa[2f7a07e2147b8620]::traits::backend::CodegenBackend>::codegen_crate
  57:     0x7f4df1a7f72f - rustc_interface[585141719d924281]::passes::start_codegen
  58:     0x7f4df1ab9b46 - <rustc_middle[11e0a2afee64df25]::ty::context::GlobalCtxt>::enter::<<rustc_interface[585141719d924281]::queries::Queries>::ongoing_codegen::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<alloc[8d7bc98adf2dcc2a]::boxed::Box<dyn core[64123c86b3f0666]::any::Any>, rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  59:     0x7f4df1a83a64 - <rustc_interface[585141719d924281]::queries::Queries>::ongoing_codegen
  60:     0x7f4df19f6b06 - <rustc_interface[585141719d924281]::interface::Compiler>::enter::<rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}::{closure#2}, core[64123c86b3f0666]::result::Result<core[64123c86b3f0666]::option::Option<rustc_interface[585141719d924281]::queries::Linker>, rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  61:     0x7f4df19bdb10 - rustc_span[bf0fd1c959e4fc6a]::set_source_map::<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}::{closure#0}>
  62:     0x7f4df19b5449 - <scoped_tls[b10fe93aa7b60c97]::ScopedKey<rustc_span[bf0fd1c959e4fc6a]::SessionGlobals>>::set::<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  63:     0x7f4df19c84c6 - std[9e2dbed3b17c9e31]::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  64:     0x7f4df19f8966 - std[9e2dbed3b17c9e31]::panicking::try::<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<<std[9e2dbed3b17c9e31]::thread::Builder>::spawn_unchecked_<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#1}::{closure#0}>>
  65:     0x7f4df19b267d - <<std[9e2dbed3b17c9e31]::thread::Builder>::spawn_unchecked_<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#1} as core[64123c86b3f0666]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  66:     0x7f4df0f138ee - std::sys::unix::thread::Thread::new::thread_start::h75e285551ecfd975
  67:     0x7f4df0caeb43 - <unknown>
  68:     0x7f4df0d40a00 - <unknown>
  69:                0x0 - <unknown>
error: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md


note: rustc 1.71.0-nightly (20d78ef3e 2023-05-21) running on x86_64-unknown-linux-gnu

note: compiler flags: -Z threads=1 -C incremental=[REDACTED] -Z incremental-verify-ich -Z human_readable_cgu_names -C prefer-dynamic -C rpath -C debuginfo=0 -Z print-mono-items=lazy -Z inline-in-all-cgus
query stack during panic:
query stack during panic:
#0 [mir_inliner_callees] computing all local function calls in `inline::inlined_function`
#1 [mir_callgraph_reachable] computing if `inline::inlined_function` (transitively) calls `user2::bar`
#2 [optimized_mir] optimizing MIR for `user2::bar`
#3 [collect_and_partition_mono_items] collect_and_partition_mono_items
------------------------------------------


---- [codegen-units] tests/codegen-units/partitioning/local-transitive-inlining.rs stdout ----
---- [codegen-units] tests/codegen-units/partitioning/local-transitive-inlining.rs stdout ----

error: compilation failed!
status: exit status: 101
command: "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2/bin/rustc" "/checkout/tests/codegen-units/partitioning/local-transitive-inlining.rs" "-Zthreads=1" "--sysroot" "/checkout/obj/build/x86_64-unknown-linux-gnu/stage2" "--target=x86_64-unknown-linux-gnu" "-C" "incremental=/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-transitive-inlining/local-transitive-inlining.inc" "-Z" "incremental-verify-ich" "-Z" "human_readable_cgu_names" "-O" "-C" "prefer-dynamic" "--out-dir" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-transitive-inlining" "-Crpath" "-Cdebuginfo=0" "-Lnative=/checkout/obj/build/x86_64-unknown-linux-gnu/native/rust-test-helpers" "-L" "/checkout/obj/build/x86_64-unknown-linux-gnu/test/codegen-units/partitioning/local-transitive-inlining/auxiliary" "-Zprint-mono-items=lazy" "-Zinline-in-all-cgus"
stdout: none
--- stderr -------------------------------
thread 'rustc' panicked at 'attempted to read from stolen value: rustc_middle::mir::Body', compiler/rustc_mir_transform/src/inline/cycle.rs:156:27
stack backtrace:
   0:     0x7fe903016934 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h973b9b3cd8d96d64
   1:     0x7fe90307d598 - core::fmt::write::he4ec6bc2dc769897
   2:     0x7fe90300b0e1 - std::io::Write::write_fmt::hd725e0dde2d985a3
   3:     0x7fe903016741 - std::sys_common::backtrace::print::h05be6a5964febd29
   4:     0x7fe9030198aa - std::panicking::default_hook::{{closure}}::hb19c6d8855d59711
   5:     0x7fe90301958c - std::panicking::default_hook::h59324a7aaaad1f4a
   6:     0x7fe903abe66b - rustc_driver_impl[2692cb0124243d90]::install_ice_hook::{closure#0}
   7:     0x7fe903019fb7 - std::panicking::rust_panic_with_hook::hd5882eddf1252148
   8:     0x7fe903019d37 - std::panicking::begin_panic_handler::{{closure}}::h01d691b26bc0b508
   9:     0x7fe903016df6 - std::sys_common::backtrace::__rust_end_short_backtrace::h7659db9f2c55392c
  10:     0x7fe903019a27 - rust_begin_unwind
  11:     0x7fe902fce0d3 - core::panicking::panic_fmt::h814a7070818f5176
  12:     0x7fe90450e618 - <rustc_data_structures[fc558cb0ab8d83cf]::steal::Steal<rustc_middle[11e0a2afee64df25]::mir::Body>>::borrow
  13:     0x7fe904698e75 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_inliner_callees
  14:     0x7fe9055f3b77 - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>
  15:     0x7fe9055a7aa5 - <rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef)>>::call_once
  16:     0x7fe9057a31c1 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>), rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef)>>::call_once
  17:     0x7fe9054c8ec2 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>), rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>
  18:     0x7fe9057585c1 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_middle[11e0a2afee64df25]::ty::instance::InstanceDef, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 16usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  19:     0x7fe9056d1153 - rustc_query_impl[2467f47111662d4d]::query_impl::mir_inliner_callees::get_query_incr::__rust_end_short_backtrace
  20:     0x7fe9046ad5e9 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_callgraph_reachable::process
  21:     0x7fe9046ac994 - rustc_mir_transform[11377a1763c1a40d]::inline::cycle::mir_callgraph_reachable
  22:     0x7fe9055f4d8c - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>
  23:     0x7fe9055ade87 - <rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId))>>::call_once
  24:     0x7fe9057a3566 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>), (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId))>>::call_once
  25:     0x7fe9054ca3f0 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>), (rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>
  26:     0x7fe9057815ac - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  27:     0x7fe9056d0f78 - rustc_query_impl[2467f47111662d4d]::query_impl::mir_callgraph_reachable::get_query_incr::__rust_end_short_backtrace
  28:     0x7fe904690e94 - rustc_middle[11e0a2afee64df25]::query::plumbing::query_get_at::<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<(rustc_middle[11e0a2afee64df25]::ty::instance::Instance, rustc_span[bf0fd1c959e4fc6a]::def_id::LocalDefId), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 1usize]>>>
  29:     0x7fe90469c71d - <rustc_mir_transform[11377a1763c1a40d]::inline::Inliner>::try_inlining
  30:     0x7fe90469a319 - <rustc_mir_transform[11377a1763c1a40d]::inline::Inliner>::process_blocks
  31:     0x7fe904699647 - <rustc_mir_transform[11377a1763c1a40d]::inline::Inline as rustc_middle[11e0a2afee64df25]::mir::MirPass>::run_pass
  32:     0x7fe9045ba2cf - <rustc_session[c008eec6176ae570]::session::Session>::time::<(), rustc_mir_transform[11377a1763c1a40d]::pass_manager::run_passes_inner::{closure#3}>
  33:     0x7fe904696e02 - rustc_mir_transform[11377a1763c1a40d]::pass_manager::run_passes_inner
  34:     0x7fe9045ec1fd - rustc_mir_transform[11377a1763c1a40d]::optimized_mir
  35:     0x7fe9055f1aae - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>
  36:     0x7fe905619850 - <rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, rustc_span[bf0fd1c959e4fc6a]::def_id::DefId)>>::call_once
  37:     0x7fe9054c8a30 - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>, false, false, false>), rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>
  38:     0x7fe90574f387 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  39:     0x7fe9056cb982 - rustc_query_impl[2467f47111662d4d]::query_impl::optimized_mir::get_query_incr::__rust_end_short_backtrace
  40:     0x7fe9065f453d - rustc_middle[11e0a2afee64df25]::query::plumbing::query_get_at::<rustc_query_system[a2b94c712a171760]::query::caches::DefaultCache<rustc_span[bf0fd1c959e4fc6a]::def_id::DefId, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 8usize]>>>
  41:     0x7fe9065fd43b - <rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt>::instance_mir
  42:     0x7fe90448d2bb - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_neighbours
  43:     0x7fe90448a1f9 - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_items_rec
  44:     0x7fe904495f34 - <core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<rustc_data_structures[fc558cb0ab8d83cf]::sync::par_for_each_in<alloc[8d7bc98adf2dcc2a]::vec::Vec<rustc_middle[11e0a2afee64df25]::mir::mono::MonoItem>, rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}::{closure#0}>::{closure#0}::{closure#0}> as core[64123c86b3f0666]::ops::function::FnOnce<()>>::call_once
  45:     0x7fe90449d855 - std[9e2dbed3b17c9e31]::panicking::try::<(), core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<rustc_data_structures[fc558cb0ab8d83cf]::sync::par_for_each_in<alloc[8d7bc98adf2dcc2a]::vec::Vec<rustc_middle[11e0a2afee64df25]::mir::mono::MonoItem>, rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}::{closure#0}>::{closure#0}::{closure#0}>>
  46:     0x7fe9044c9f87 - <rustc_session[c008eec6176ae570]::session::Session>::time::<(), rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items::{closure#1}>
  47:     0x7fe9044865c4 - rustc_monomorphize[3cb0a73a8fe1ad6b]::collector::collect_crate_mono_items
  48:     0x7fe9044a76e2 - rustc_monomorphize[3cb0a73a8fe1ad6b]::partitioning::collect_and_partition_mono_items
  49:     0x7fe9055f5b76 - rustc_query_impl[2467f47111662d4d]::plumbing::__rust_begin_short_backtrace::<rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::dynamic_query::{closure#2}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>
  50:     0x7fe9055b387a - <rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::dynamic_query::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<(rustc_middle[11e0a2afee64df25]::ty::context::TyCtxt, ())>>::call_once
  51:     0x7fe9057a2b87 - <rustc_query_system[a2b94c712a171760]::query::plumbing::execute_job_incr<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt>::{closure#2}::{closure#2} as core[64123c86b3f0666]::ops::function::FnOnce<((rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>), ())>>::call_once
  52:     0x7fe9054c656e - <rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind as rustc_query_system[a2b94c712a171760]::dep_graph::DepKind>::with_deps::<<rustc_query_system[a2b94c712a171760]::dep_graph::graph::DepGraphData<rustc_middle[11e0a2afee64df25]::dep_graph::dep_node::DepKind>>::with_task<(rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>), (), rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>::{closure#0}::{closure#0}, rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>
  53:     0x7fe9056fd662 - rustc_query_system[a2b94c712a171760]::query::plumbing::try_execute_query::<rustc_query_impl[2467f47111662d4d]::DynamicConfig<rustc_query_system[a2b94c712a171760]::query::caches::SingleCache<rustc_middle[11e0a2afee64df25]::query::erase::Erased<[u8; 24usize]>>, false, false, false>, rustc_query_impl[2467f47111662d4d]::plumbing::QueryCtxt, true>
  54:     0x7fe9054b2c02 - rustc_query_impl[2467f47111662d4d]::query_impl::collect_and_partition_mono_items::get_query_incr::__rust_end_short_backtrace
  55:     0x7fe903d454f7 - rustc_codegen_ssa[2f7a07e2147b8620]::base::codegen_crate::<rustc_codegen_llvm[b51b29f2ec72caa2]::LlvmCodegenBackend>
  56:     0x7fe903d41fe0 - <rustc_codegen_llvm[b51b29f2ec72caa2]::LlvmCodegenBackend as rustc_codegen_ssa[2f7a07e2147b8620]::traits::backend::CodegenBackend>::codegen_crate
  57:     0x7fe903b9272f - rustc_interface[585141719d924281]::passes::start_codegen
  58:     0x7fe903bccb46 - <rustc_middle[11e0a2afee64df25]::ty::context::GlobalCtxt>::enter::<<rustc_interface[585141719d924281]::queries::Queries>::ongoing_codegen::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<alloc[8d7bc98adf2dcc2a]::boxed::Box<dyn core[64123c86b3f0666]::any::Any>, rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  59:     0x7fe903b96a64 - <rustc_interface[585141719d924281]::queries::Queries>::ongoing_codegen
  60:     0x7fe903b09b06 - <rustc_interface[585141719d924281]::interface::Compiler>::enter::<rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}::{closure#2}, core[64123c86b3f0666]::result::Result<core[64123c86b3f0666]::option::Option<rustc_interface[585141719d924281]::queries::Linker>, rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  61:     0x7fe903ad0b10 - rustc_span[bf0fd1c959e4fc6a]::set_source_map::<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}::{closure#0}>
  62:     0x7fe903ac8449 - <scoped_tls[b10fe93aa7b60c97]::ScopedKey<rustc_span[bf0fd1c959e4fc6a]::SessionGlobals>>::set::<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  63:     0x7fe903adb4c6 - std[9e2dbed3b17c9e31]::sys_common::backtrace::__rust_begin_short_backtrace::<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>
  64:     0x7fe903b0b966 - std[9e2dbed3b17c9e31]::panicking::try::<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, core[64123c86b3f0666]::panic::unwind_safe::AssertUnwindSafe<<std[9e2dbed3b17c9e31]::thread::Builder>::spawn_unchecked_<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#1}::{closure#0}>>
  65:     0x7fe903ac567d - <<std[9e2dbed3b17c9e31]::thread::Builder>::spawn_unchecked_<rustc_interface[585141719d924281]::util::run_in_thread_pool_with_globals<rustc_interface[585141719d924281]::interface::run_compiler<core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>, rustc_driver_impl[2692cb0124243d90]::run_compiler::{closure#1}>::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#0}::{closure#0}, core[64123c86b3f0666]::result::Result<(), rustc_span[bf0fd1c959e4fc6a]::ErrorGuaranteed>>::{closure#1} as core[64123c86b3f0666]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  66:     0x7fe9030268ee - std::sys::unix::thread::Thread::new::thread_start::h75e285551ecfd975
  67:     0x7fe902dc1b43 - <unknown>
  68:     0x7fe902e53a00 - <unknown>
  69:                0x0 - <unknown>
error: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md


note: rustc 1.71.0-nightly (20d78ef3e 2023-05-21) running on x86_64-unknown-linux-gnu

note: compiler flags: -Z threads=1 -C incremental=[REDACTED] -Z incremental-verify-ich -Z human_readable_cgu_names -C prefer-dynamic -C rpath -C debuginfo=0 -Z print-mono-items=lazy -Z inline-in-all-cgus
query stack during panic:
query stack during panic:
#0 [mir_inliner_callees] computing all local function calls in `direct_user::foo`
#1 [mir_callgraph_reachable] computing if `direct_user::foo` (transitively) calls `indirect_user::bar`
#2 [optimized_mir] optimizing MIR for `indirect_user::bar`
#3 [collect_and_partition_mono_items] collect_and_partition_mono_items
------------------------------------------



