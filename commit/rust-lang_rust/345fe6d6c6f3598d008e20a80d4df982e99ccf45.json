{"sha": "345fe6d6c6f3598d008e20a80d4df982e99ccf45", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0NWZlNmQ2YzZmMzU5OGQwMDhlMjBhODBkNGRmOTgyZTk5Y2NmNDU=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2018-12-25T16:03:36Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2018-12-25T16:03:36Z"}, "message": "rustc_tools_util: add readme", "tree": {"sha": "7931546054149a166ce1204796724483f43d963b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7931546054149a166ce1204796724483f43d963b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/345fe6d6c6f3598d008e20a80d4df982e99ccf45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/345fe6d6c6f3598d008e20a80d4df982e99ccf45", "html_url": "https://github.com/rust-lang/rust/commit/345fe6d6c6f3598d008e20a80d4df982e99ccf45", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/345fe6d6c6f3598d008e20a80d4df982e99ccf45/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f5c0d2e0aa7dd8904f4105727819f711282eca2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f5c0d2e0aa7dd8904f4105727819f711282eca2", "html_url": "https://github.com/rust-lang/rust/commit/6f5c0d2e0aa7dd8904f4105727819f711282eca2"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "b101f55e50955c9d3129fd6574f155fcb5cb25f4", "filename": "rustc_tools_util/README.md", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/345fe6d6c6f3598d008e20a80d4df982e99ccf45/rustc_tools_util%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/345fe6d6c6f3598d008e20a80d4df982e99ccf45/rustc_tools_util%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustc_tools_util%2FREADME.md?ref=345fe6d6c6f3598d008e20a80d4df982e99ccf45", "patch": "@@ -0,0 +1,58 @@\n+# rustc_tools_util\n+\n+A small tool to help you generate version information\n+for packages installed from a git repo\n+\n+## Usage\n+\n+Add a `build.rs` file to your repo and list it in `Cargo.toml`\n+````\n+build = \"build.rs\"\n+````\n+\n+List rustc_tools_util as regular AND build dependency.\n+````\n+[dependencies]\n+rustc_tools_util = \"0.1\"\n+\n+[build-dependencies]\n+rustc_tools_util = \"0.1\"\n+````\n+\n+In `build.rs`, generate the data in your `main()`\n+````rust\n+fn main() {\n+    println!(\n+        \"cargo:rustc-env=GIT_HASH={}\",\n+        rustc_tools_util::get_commit_hash().unwrap_or_default()\n+    );\n+    println!(\n+        \"cargo:rustc-env=COMMIT_DATE={}\",\n+        rustc_tools_util::get_commit_date().unwrap_or_default()\n+    );\n+}\n+\n+````\n+\n+Use the version information in your main.rs\n+````rust\n+use rustc_tools_util::*;\n+\n+fn show_version() {\n+    let version_info = rustc_tools_util::get_version_info!();\n+    println!(\"{}\", version_info);\n+}\n+````\n+This gives the following output in clippy:\n+`clippy 0.0.212 (a416c5e 2018-12-14)`\n+\n+\n+## License\n+\n+Copyright 2014-2018 The Rust Project Developers\n+\n+Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+<LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+option. All files in the project carrying such notice may not be\n+copied, modified, or distributed except according to those terms."}]}