{"sha": "ea206f2c5af8597771347ecc95e76c258b710181", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhMjA2ZjJjNWFmODU5Nzc3MTM0N2VjYzk1ZTc2YzI1OGI3MTAxODE=", "commit": {"author": {"name": "Andreas Molzer", "email": "andreas.molzer@gmx.de", "date": "2020-10-07T17:49:52Z"}, "committer": {"name": "Andreas Molzer", "email": "andreas.molzer@gmx.de", "date": "2020-10-08T06:18:59Z"}, "message": "Add compile fail test for issue 27675", "tree": {"sha": "de57d743bd78f590973f7a8655f1833aff04b4a8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de57d743bd78f590973f7a8655f1833aff04b4a8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea206f2c5af8597771347ecc95e76c258b710181", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea206f2c5af8597771347ecc95e76c258b710181", "html_url": "https://github.com/rust-lang/rust/commit/ea206f2c5af8597771347ecc95e76c258b710181", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea206f2c5af8597771347ecc95e76c258b710181/comments", "author": {"login": "HeroicKatora", "id": 5550310, "node_id": "MDQ6VXNlcjU1NTAzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5550310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HeroicKatora", "html_url": "https://github.com/HeroicKatora", "followers_url": "https://api.github.com/users/HeroicKatora/followers", "following_url": "https://api.github.com/users/HeroicKatora/following{/other_user}", "gists_url": "https://api.github.com/users/HeroicKatora/gists{/gist_id}", "starred_url": "https://api.github.com/users/HeroicKatora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HeroicKatora/subscriptions", "organizations_url": "https://api.github.com/users/HeroicKatora/orgs", "repos_url": "https://api.github.com/users/HeroicKatora/repos", "events_url": "https://api.github.com/users/HeroicKatora/events{/privacy}", "received_events_url": "https://api.github.com/users/HeroicKatora/received_events", "type": "User", "site_admin": false}, "committer": {"login": "HeroicKatora", "id": 5550310, "node_id": "MDQ6VXNlcjU1NTAzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5550310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HeroicKatora", "html_url": "https://github.com/HeroicKatora", "followers_url": "https://api.github.com/users/HeroicKatora/followers", "following_url": "https://api.github.com/users/HeroicKatora/following{/other_user}", "gists_url": "https://api.github.com/users/HeroicKatora/gists{/gist_id}", "starred_url": "https://api.github.com/users/HeroicKatora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HeroicKatora/subscriptions", "organizations_url": "https://api.github.com/users/HeroicKatora/orgs", "repos_url": "https://api.github.com/users/HeroicKatora/repos", "events_url": "https://api.github.com/users/HeroicKatora/events{/privacy}", "received_events_url": "https://api.github.com/users/HeroicKatora/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "deec53052312ac709f6a37110b59ada486bea0bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/deec53052312ac709f6a37110b59ada486bea0bd", "html_url": "https://github.com/rust-lang/rust/commit/deec53052312ac709f6a37110b59ada486bea0bd"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "1cfc230453120a7ea7e790e6612565c8e9dc5346", "filename": "src/test/compile-fail/issue-27675-unchecked-bounds.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ea206f2c5af8597771347ecc95e76c258b710181/src%2Ftest%2Fcompile-fail%2Fissue-27675-unchecked-bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea206f2c5af8597771347ecc95e76c258b710181/src%2Ftest%2Fcompile-fail%2Fissue-27675-unchecked-bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-27675-unchecked-bounds.rs?ref=ea206f2c5af8597771347ecc95e76c258b710181", "patch": "@@ -0,0 +1,19 @@\n+/// The compiler previously did not properly check the bound of `From` when it was used from type\n+/// of the dyn trait object (use in `copy_any` below). Since the associated type is under user\n+/// control in this usage, the compiler could be tricked to believe any type implemented any trait.\n+/// This would ICE, except for pure marker traits like `Copy`. It did not require providing an\n+/// instance of the dyn trait type, only name said type.\n+trait Setup {\n+    type From: Copy;\n+}\n+\n+fn copy<U: Setup + ?Sized>(from: &U::From) -> U::From {\n+    *from\n+}\n+\n+pub fn copy_any<T>(t: &T) -> T {\n+    copy::<dyn Setup<From=T>>(t)\n+    //~^ ERROR the trait bound `T: Copy` is not satisfied\n+}\n+\n+fn main() {}"}]}