{"sha": "70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "node_id": "C_kwDOAAsO6NoAKDcwZjFkMGQ4ZmQ3MDJkOGQ3NjFjZTVjMTVkZjViMjM4YWI1OWMyNTA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-29T15:09:37Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-29T15:09:37Z"}, "message": "Auto merge of #9043 - dswij:9037-test, r=Manishearth\n\n`extra_unused_lifetimes` add FP test case emitting from derived attributes.\n\nAdd test to cover for #9014 which is fixed in #9037.\n\nchangelog: [`extra_unused_lifetimes`] Add FP test case emitting from derived attributes.\n\n---\n\nSeeing the FP from the test:\n\n```sh\n$ git revert -m 1 1d1ae10876d3eaa5c982dd3daa083b7c2fc363b9\n$ TESTNAME=extra_unused_lifetime cargo uitest\n```", "tree": {"sha": "26013a650c076f509365fa6521b47ae5fdee0579", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/26013a650c076f509365fa6521b47ae5fdee0579"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "html_url": "https://github.com/rust-lang/rust/commit/70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90227c10f764d04372cb51fe4e3661702f4438a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/90227c10f764d04372cb51fe4e3661702f4438a0", "html_url": "https://github.com/rust-lang/rust/commit/90227c10f764d04372cb51fe4e3661702f4438a0"}, {"sha": "a8f68240d391dd885c13766e6152a79d758c1440", "url": "https://api.github.com/repos/rust-lang/rust/commits/a8f68240d391dd885c13766e6152a79d758c1440", "html_url": "https://github.com/rust-lang/rust/commit/a8f68240d391dd885c13766e6152a79d758c1440"}], "stats": {"total": 38, "additions": 32, "deletions": 6}, "files": [{"sha": "a89a06308d093a6e7cfef00df57ce43992ec9210", "filename": "tests/ui/auxiliary/proc_macro_derive.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fauxiliary%2Fproc_macro_derive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fauxiliary%2Fproc_macro_derive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauxiliary%2Fproc_macro_derive.rs?ref=70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "patch": "@@ -72,3 +72,17 @@ pub fn mini_macro(_: TokenStream) -> TokenStream {\n         }\n     )\n }\n+\n+#[proc_macro_derive(ExtraLifetimeDerive)]\n+#[allow(unused)]\n+pub fn extra_lifetime(_input: TokenStream) -> TokenStream {\n+    quote!(\n+        pub struct ExtraLifetime;\n+\n+        impl<'b> ExtraLifetime {\n+            pub fn something<'c>() -> Self {\n+                Self\n+            }\n+        }\n+    )\n+}"}, {"sha": "d6631e01290009feee27ded294e324031b763be7", "filename": "tests/ui/extra_unused_lifetimes.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fextra_unused_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fextra_unused_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fextra_unused_lifetimes.rs?ref=70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "patch": "@@ -1,3 +1,5 @@\n+// aux-build:proc_macro_derive.rs\n+\n #![allow(\n     unused,\n     dead_code,\n@@ -7,6 +9,9 @@\n )]\n #![warn(clippy::extra_unused_lifetimes)]\n \n+#[macro_use]\n+extern crate proc_macro_derive;\n+\n fn empty() {}\n \n fn used_lt<'a>(x: &'a u8) {}\n@@ -114,4 +119,11 @@ mod second_case {\n     }\n }\n \n+// Should not lint\n+#[derive(ExtraLifetimeDerive)]\n+struct Human<'a> {\n+    pub bones: i32,\n+    pub name: &'a str,\n+}\n+\n fn main() {}"}, {"sha": "26ebc3976dfca222642cc1557c89a2ad1c3e0da0", "filename": "tests/ui/extra_unused_lifetimes.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fextra_unused_lifetimes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/70f1d0d8fd702d8d761ce5c15df5b238ab59c250/tests%2Fui%2Fextra_unused_lifetimes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fextra_unused_lifetimes.stderr?ref=70f1d0d8fd702d8d761ce5c15df5b238ab59c250", "patch": "@@ -1,37 +1,37 @@\n error: this lifetime isn't used in the function definition\n-  --> $DIR/extra_unused_lifetimes.rs:14:14\n+  --> $DIR/extra_unused_lifetimes.rs:19:14\n    |\n LL | fn unused_lt<'a>(x: u8) {}\n    |              ^^\n    |\n    = note: `-D clippy::extra-unused-lifetimes` implied by `-D warnings`\n \n error: this lifetime isn't used in the function definition\n-  --> $DIR/extra_unused_lifetimes.rs:41:10\n+  --> $DIR/extra_unused_lifetimes.rs:46:10\n    |\n LL |     fn x<'a>(&self) {}\n    |          ^^\n \n error: this lifetime isn't used in the function definition\n-  --> $DIR/extra_unused_lifetimes.rs:67:22\n+  --> $DIR/extra_unused_lifetimes.rs:72:22\n    |\n LL |         fn unused_lt<'a>(x: u8) {}\n    |                      ^^\n \n error: this lifetime isn't used in the impl\n-  --> $DIR/extra_unused_lifetimes.rs:78:10\n+  --> $DIR/extra_unused_lifetimes.rs:83:10\n    |\n LL |     impl<'a> std::ops::AddAssign<&Scalar> for &mut Scalar {\n    |          ^^\n \n error: this lifetime isn't used in the impl\n-  --> $DIR/extra_unused_lifetimes.rs:84:10\n+  --> $DIR/extra_unused_lifetimes.rs:89:10\n    |\n LL |     impl<'b> Scalar {\n    |          ^^\n \n error: this lifetime isn't used in the function definition\n-  --> $DIR/extra_unused_lifetimes.rs:85:26\n+  --> $DIR/extra_unused_lifetimes.rs:90:26\n    |\n LL |         pub fn something<'c>() -> Self {\n    |                          ^^"}]}