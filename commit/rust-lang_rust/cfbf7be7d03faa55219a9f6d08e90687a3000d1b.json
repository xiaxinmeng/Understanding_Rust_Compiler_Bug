{"sha": "cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "node_id": "C_kwDOAAsO6NoAKGNmYmY3YmU3ZDAzZmFhNTUyMTlhOWY2ZDA4ZTkwNjg3YTMwMDBkMWI", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-07-29T22:39:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-29T22:39:56Z"}, "message": "Rollup merge of #99904 - GuillaumeGomez:cleanup-html-whitespace, r=notriddle\n\nCleanup html whitespace\n\nI realized while looking at the raw HTML that we generated some unwanted white space characters. This PR cleans up the one coming directly from rustdoc. I'll check from `pulldown-cmark` for the remaining ones.\n\nSome numbers now: the difference is small, it goes from `63009` to `62859`. But multiplied by the number of files, it becomes quite interesting overall.\n\nr? `@notriddle`", "tree": {"sha": "edab3bc17102f238d44a7b2e767f68f3f643070d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/edab3bc17102f238d44a7b2e767f68f3f643070d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi5GG8CRBK7hj4Ov3rIwAAG0cIADGeejVXxci1BPFsVQ/Q2aWX\nImeIe/T6FKhBXRColPlMsjGddjBHg5PkVkM2vLGR69JO75jKX58bGvwQH4f4tAAG\nDTwRpYAyjNE/zK3OZcIPkf3LoHFGoQSgM17g6cL7QrRMXQA+uCLcdvgBLI+K/KA/\nsq0kzVLHS1IXr8iohuO4YgEeBWyv6m/b2wc+ecvwQDqsyoRB2BTieIsJOWYOSSVG\nUreyFP+VBtrpN8m13nsECps/IdTwXV/1YOO75qLhHcZ/Q657a3Ojzl54ZMfjNVN8\ni6xm0Y4rxPy9YueL0BgnsUA4LBAxFFn5ipkWED6oai4Rv6qcqr0ukIRFePLBUlg=\n=SyNx\n-----END PGP SIGNATURE-----\n", "payload": "tree edab3bc17102f238d44a7b2e767f68f3f643070d\nparent 735969eacdc8eecc16eb9b646f994518188fb9fd\nparent 6149cf982c6c275d73345bc3d476ded733e7bc2f\nauthor Yuki Okushi <jtitor@2k36.org> 1659134396 +0900\ncommitter GitHub <noreply@github.com> 1659134396 +0900\n\nRollup merge of #99904 - GuillaumeGomez:cleanup-html-whitespace, r=notriddle\n\nCleanup html whitespace\n\nI realized while looking at the raw HTML that we generated some unwanted white space characters. This PR cleans up the one coming directly from rustdoc. I'll check from `pulldown-cmark` for the remaining ones.\n\nSome numbers now: the difference is small, it goes from `63009` to `62859`. But multiplied by the number of files, it becomes quite interesting overall.\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "html_url": "https://github.com/rust-lang/rust/commit/cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "735969eacdc8eecc16eb9b646f994518188fb9fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/735969eacdc8eecc16eb9b646f994518188fb9fd", "html_url": "https://github.com/rust-lang/rust/commit/735969eacdc8eecc16eb9b646f994518188fb9fd"}, {"sha": "6149cf982c6c275d73345bc3d476ded733e7bc2f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6149cf982c6c275d73345bc3d476ded733e7bc2f", "html_url": "https://github.com/rust-lang/rust/commit/6149cf982c6c275d73345bc3d476ded733e7bc2f"}], "stats": {"total": 40, "additions": 21, "deletions": 19}, "files": [{"sha": "547d6696a431d26a81a69aa0cdbde0a6c06ee79f", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "patch": "@@ -311,7 +311,7 @@ fn item_module(w: &mut Buffer, cx: &mut Context<'_>, item: &clean::Item, items:\n                 w,\n                 \"<h2 id=\\\"{id}\\\" class=\\\"small-section-header\\\">\\\n                     <a href=\\\"#{id}\\\">{name}</a>\\\n-                 </h2>\\n{}\",\n+                 </h2>{}\",\n                 ITEM_TABLE_OPEN,\n                 id = cx.derive_id(my_section.id().to_owned()),\n                 name = my_section.name(),\n@@ -415,10 +415,10 @@ fn item_module(w: &mut Buffer, cx: &mut Context<'_>, item: &clean::Item, items:\n                 write!(\n                     w,\n                     \"<div class=\\\"item-left {stab}{add}module-item\\\">\\\n-                            <a class=\\\"{class}\\\" href=\\\"{href}\\\" title=\\\"{title}\\\">{name}</a>\\\n-                            {visibility_emoji}\\\n-                            {unsafety_flag}\\\n-                            {stab_tags}\\\n+                        <a class=\\\"{class}\\\" href=\\\"{href}\\\" title=\\\"{title}\\\">{name}</a>\\\n+                        {visibility_emoji}\\\n+                        {unsafety_flag}\\\n+                        {stab_tags}\\\n                      </div>\\\n                      <div class=\\\"item-right docblock-short\\\">{docs}</div>\",\n                     name = myitem.name.unwrap(),\n@@ -1126,7 +1126,8 @@ fn item_union(w: &mut Buffer, cx: &mut Context<'_>, it: &clean::Item, s: &clean:\n         write!(\n             w,\n             \"<h2 id=\\\"fields\\\" class=\\\"fields small-section-header\\\">\\\n-                   Fields<a href=\\\"#fields\\\" class=\\\"anchor\\\"></a></h2>\"\n+                Fields<a href=\\\"#fields\\\" class=\\\"anchor\\\"></a>\\\n+            </h2>\"\n         );\n         for (field, ty) in fields {\n             let name = field.name.expect(\"union field name\");\n@@ -1238,7 +1239,8 @@ fn item_enum(w: &mut Buffer, cx: &mut Context<'_>, it: &clean::Item, e: &clean::\n         write!(\n             w,\n             \"<h2 id=\\\"variants\\\" class=\\\"variants small-section-header\\\">\\\n-                   Variants{}<a href=\\\"#variants\\\" class=\\\"anchor\\\"></a></h2>\",\n+                Variants{}<a href=\\\"#variants\\\" class=\\\"anchor\\\"></a>\\\n+            </h2>\",\n             document_non_exhaustive_header(it)\n         );\n         document_non_exhaustive(w, it);\n@@ -1294,9 +1296,9 @@ fn item_enum(w: &mut Buffer, cx: &mut Context<'_>, it: &clean::Item, e: &clean::\n                                 w,\n                                 \"<div class=\\\"sub-variant-field\\\">\\\n                                  <span id=\\\"{id}\\\" class=\\\"variant small-section-header\\\">\\\n-                                    <a href=\\\"#{id}\\\" class=\\\"anchor field\\\"></a>\\\n-                                    <code>{f}:&nbsp;{t}</code>\\\n-                                </span>\",\n+                                     <a href=\\\"#{id}\\\" class=\\\"anchor field\\\"></a>\\\n+                                     <code>{f}:&nbsp;{t}</code>\\\n+                                 </span>\",\n                                 id = id,\n                                 f = field.name.unwrap(),\n                                 t = ty.print(cx)"}, {"sha": "8e25f6764a9c51faf6e20d2b8c2a03623eb31015", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "patch": "@@ -82,10 +82,10 @@\n             {%- else -%}\n                 <img class=\"rust-logo\" src=\"{{static_root_path|safe}}rust-logo{{page.resource_suffix}}.svg\" alt=\"logo\"> {#- -#}\n             {%- endif -%}\n-            </div>\n+            </div> {#- -#}\n         </a> {#- -#}\n-        <h2 class=\"location\"></h2>\n-    </nav>\n+        <h2 class=\"location\"></h2> {#- -#}\n+    </nav> {#- -#}\n     <nav class=\"sidebar\"> {#- -#}\n         <a class=\"sidebar-logo\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {#- -#}\n             <div class=\"logo-container\"> {#- -#}\n@@ -94,7 +94,7 @@ <h2 class=\"location\"></h2>\n                 {%- else -%}\n                     <img class=\"rust-logo\" src=\"{{static_root_path|safe}}rust-logo{{page.resource_suffix}}.svg\" alt=\"logo\"> {#- -#}\n                 {%- endif -%}\n-            </div>\n+            </div> {#- -#}\n         </a> {#- -#}\n         {{- sidebar|safe -}}\n     </nav> {#- -#}\n@@ -122,12 +122,12 @@ <h2 class=\"location\"></h2>\n                             <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {#- -#}\n                                 <button type=\"button\">?</button> {#- -#}\n                             </div> {#- -#}\n-                            <div id=\"settings-menu\" tabindex=\"-1\">\n+                            <div id=\"settings-menu\" tabindex=\"-1\"> {#- -#}\n                                 <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {#- -#}\n                                     <img width=\"22\" height=\"22\" alt=\"Change settings\" {# -#}\n                                      src=\"{{static_root_path|safe}}wheel{{page.resource_suffix}}.svg\"> {#- -#}\n                                 </a> {#- -#}\n-                            </div>\n+                            </div> {#- -#}\n                         </div> {#- -#}\n                     </form> {#- -#}\n                 </nav> {#- -#}\n@@ -143,6 +143,6 @@ <h2 class=\"location\"></h2>\n          data-resource-suffix=\"{{page.resource_suffix}}\" {# -#}\n          data-rustdoc-version=\"{{rustdoc_version}}\" {# -#}\n     > {#- -#}\n-    </div>\n+    </div> {#- -#}\n </body> {#- -#}\n </html> {#- -#}"}, {"sha": "c755157d27687595327c52ce4e3811530887df17", "filename": "src/librustdoc/html/templates/print_item.html", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "raw_url": "https://github.com/rust-lang/rust/raw/cfbf7be7d03faa55219a9f6d08e90687a3000d1b/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html?ref=cfbf7be7d03faa55219a9f6d08e90687a3000d1b", "patch": "@@ -1,4 +1,4 @@\n-<div class=\"main-heading\">\n+<div class=\"main-heading\"> {#- -#}\n     <h1 class=\"fqn\"> {#- -#}\n         <span class=\"in-band\"> {#- -#}\n             {{-typ-}}\n@@ -27,4 +27,4 @@ <h1 class=\"fqn\"> {#- -#}\n             [<span class=\"inner\">&#x2212;</span>] {#- -#}\n         </a> {#- -#}\n     </span> {#- -#}\n-</div>\n+</div> {#- -#}"}]}