{"sha": "43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQzZWY1NTRiNmFiNzJjNGNjM2M1NmRhYjhlOWI2MTAyMWM2M2IzYjc=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-06-23T08:52:26Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-06-23T08:52:26Z"}, "message": "Add test for issue-51506", "tree": {"sha": "d1d31a8dc9371fb19fca4bc90bd3fbeff8e7d6ad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1d31a8dc9371fb19fca4bc90bd3fbeff8e7d6ad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXmatGLoofN5+9u4rsJhshcDi2qEFAl7xwsoACgkQsJhshcDi\n2qG7/Q/+M5CgvGAlG893jw6gpWcZCAXGolTrgc7qmlfRwqiH2HZRW3Hd+Ybkesen\nT/e6abN9ukjpIcB0TXyj6IrD5/eIkssh26Xqm+YlsceZc4qeYt/9ZwCGPa8mhE8C\nv8Zl9UbzKeGZ1YGOi7mOjU2H0fMrH6VD7bE11HUmJ8nQ3FcC0OGmZlwegLqo2m7l\nBsUkFW4vF7LyL9HUmhOLfpuRdeB9HueHHCruWkPDSElMAe3A7uwUBKBu+SxB2ied\nHypIDJySZwK3E+XRxZpiBYoi/q6SmLblz04xpyv1yXLpdfJt4l6IHnacfvS2NTmt\nmHddxX0Cg5C69WCDPQ51PLOcQ8Y9eBHczj/Jik7Ub3L3APuJETFYw9NnTptznFZV\n3S8QQS2NXiP4oPl6LEn3MX4u3T6DjedN5AGP+HeJbvqeSllnkEgnfbl9/NZuLEyg\n+4752dQA5/bB2GCyl/OMvxOVBzez9Lg8yiMCflfivzqFdseD9cmz9gLzUnkGc2md\nMjzsa/0omJFA8RzS6F2qnd+ofIezpwZ4NFtRzgnlrGI0/lZGha5UMKy2vuNFVAnB\nGaBNfwEClpDJhW2xTa1HAP4WNRWKdW2SynUA4aZxKuorITFIfIZc6OAEd/12Hkfz\nKwUJal7bttA86ypfg8Z7qazOnx+Yfqkjqh1iwbLIuHyjcMKG28o=\n=e+8N\n-----END PGP SIGNATURE-----", "payload": "tree d1d31a8dc9371fb19fca4bc90bd3fbeff8e7d6ad\nparent bb882d74bd00477395e8d302463148f0a5f8cfe6\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1592902346 +0900\ncommitter Yuki Okushi <huyuumi.dev@gmail.com> 1592902346 +0900\n\nAdd test for issue-51506\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "html_url": "https://github.com/rust-lang/rust/commit/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb882d74bd00477395e8d302463148f0a5f8cfe6", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb882d74bd00477395e8d302463148f0a5f8cfe6", "html_url": "https://github.com/rust-lang/rust/commit/bb882d74bd00477395e8d302463148f0a5f8cfe6"}], "stats": {"total": 55, "additions": 55, "deletions": 0}, "files": [{"sha": "d0fe6a0f59a879f4d899e91644fad76279e85db8", "filename": "src/test/ui/never_type/issue-51506.rs", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.rs", "raw_url": "https://github.com/rust-lang/rust/raw/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.rs?ref=43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "patch": "@@ -0,0 +1,41 @@\n+#![feature(never_type, specialization)]\n+#![allow(incomplete_features)]\n+\n+use std::iter::{self, Empty};\n+\n+trait Trait {\n+    type Out: Iterator<Item = u32>;\n+\n+    fn f(&self) -> Option<Self::Out>;\n+}\n+\n+impl<T> Trait for T {\n+    default type Out = !; //~ ERROR: `!` is not an iterator\n+\n+    default fn f(&self) -> Option<Self::Out> {\n+        None\n+    }\n+}\n+\n+struct X;\n+\n+impl Trait for X {\n+    type Out = Empty<u32>;\n+\n+    fn f(&self) -> Option<Self::Out> {\n+        Some(iter::empty())\n+    }\n+}\n+\n+fn f<T: Trait>(a: T) {\n+    if let Some(iter) = a.f() {\n+        println!(\"Some\");\n+        for x in iter {\n+            println!(\"x = {}\", x);\n+        }\n+    }\n+}\n+\n+pub fn main() {\n+    f(10);\n+}"}, {"sha": "73865a9b5a02c0c5b208b179a2799f4980c8af98", "filename": "src/test/ui/never_type/issue-51506.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnever_type%2Fissue-51506.stderr?ref=43ef554b6ab72c4cc3c56dab8e9b61021c63b3b7", "patch": "@@ -0,0 +1,14 @@\n+error[E0277]: `!` is not an iterator\n+  --> $DIR/issue-51506.rs:13:5\n+   |\n+LL |     type Out: Iterator<Item = u32>;\n+   |     ------------------------------- required by `Trait::Out`\n+...\n+LL |     default type Out = !;\n+   |     ^^^^^^^^^^^^^^^^^^^^^ `!` is not an iterator\n+   |\n+   = help: the trait `std::iter::Iterator` is not implemented for `!`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}