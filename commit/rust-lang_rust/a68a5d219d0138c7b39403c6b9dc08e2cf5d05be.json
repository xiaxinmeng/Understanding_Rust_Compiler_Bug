{"sha": "a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "node_id": "C_kwDOAAsO6NoAKGE2OGE1ZDIxOWQwMTM4YzdiMzk0MDNjNmI5ZGMwOGUyY2Y1ZDA1YmU", "commit": {"author": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2022-01-05T01:22:39Z"}, "committer": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2022-05-02T18:54:46Z"}, "message": "This aligns the inline attributes of existing `__iterator_get_unchecked` with those of `next()` on adapters that have both.\n\nIt improves the performance of iterators using unchecked access when building in incremental mode\n(due to the larger CGU count?). It might negatively affect incremental compile times for better runtime results,\nbut considering that the equivalent `next()` implementations also are `#[inline]` and usually are more complex this\nshould be ok.\n\n```\n./x.py bench library/core -i --stage 0 --test-args bench_trusted_random_access\n\nOLD: 119,172 ns/iter\nNEW:  17,714 ns/iter\n```", "tree": {"sha": "64a17122bab803d9d59d7eedf9e30c495c65d68a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64a17122bab803d9d59d7eedf9e30c495c65d68a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "html_url": "https://github.com/rust-lang/rust/commit/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/comments", "author": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "committer": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e3db41bf97f6a96e2d1236a1c4c3055b5c06b282", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3db41bf97f6a96e2d1236a1c4c3055b5c06b282", "html_url": "https://github.com/rust-lang/rust/commit/e3db41bf97f6a96e2d1236a1c4c3055b5c06b282"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "10b4db84b3904e1a115e50dcb261d86259e17504", "filename": "library/core/src/iter/adapters/enumerate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fenumerate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fenumerate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fenumerate.rs?ref=a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "patch": "@@ -129,6 +129,7 @@ where\n \n     #[rustc_inherit_overflow_checks]\n     #[doc(hidden)]\n+    #[inline]\n     unsafe fn __iterator_get_unchecked(&mut self, idx: usize) -> <Self as Iterator>::Item\n     where\n         Self: TrustedRandomAccessNoCoerce,"}, {"sha": "6cbb35dc7c6292ff586bbd36d3b73f64a13c202d", "filename": "library/core/src/iter/adapters/map.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmap.rs?ref=a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "patch": "@@ -125,6 +125,7 @@ where\n     }\n \n     #[doc(hidden)]\n+    #[inline]\n     unsafe fn __iterator_get_unchecked(&mut self, idx: usize) -> B\n     where\n         Self: TrustedRandomAccessNoCoerce,"}, {"sha": "de44bd66501e20bb3445fdffdb700062d65c00f4", "filename": "library/core/src/iter/adapters/zip.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fzip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fzip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fzip.rs?ref=a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "patch": "@@ -554,6 +554,7 @@ pub unsafe trait TrustedRandomAccessNoCoerce: Sized {\n ///\n /// Same requirements calling `get_unchecked` directly.\n #[doc(hidden)]\n+#[inline]\n pub(in crate::iter::adapters) unsafe fn try_get_unchecked<I>(it: &mut I, idx: usize) -> I::Item\n where\n     I: Iterator,\n@@ -576,6 +577,7 @@ unsafe impl<I: Iterator> SpecTrustedRandomAccess for I {\n }\n \n unsafe impl<I: Iterator + TrustedRandomAccessNoCoerce> SpecTrustedRandomAccess for I {\n+    #[inline]\n     unsafe fn try_get_unchecked(&mut self, index: usize) -> Self::Item {\n         // SAFETY: the caller must uphold the contract for\n         // `Iterator::__iterator_get_unchecked`."}, {"sha": "78bf3381b4d269f8e6be66741896f2a05046023f", "filename": "library/core/src/slice/iter/macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fslice%2Fiter%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68a5d219d0138c7b39403c6b9dc08e2cf5d05be/library%2Fcore%2Fsrc%2Fslice%2Fiter%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fslice%2Fiter%2Fmacros.rs?ref=a68a5d219d0138c7b39403c6b9dc08e2cf5d05be", "patch": "@@ -326,6 +326,7 @@ macro_rules! iterator {\n             }\n \n             #[doc(hidden)]\n+            #[inline]\n             unsafe fn __iterator_get_unchecked(&mut self, idx: usize) -> Self::Item {\n                 // SAFETY: the caller must guarantee that `i` is in bounds of\n                 // the underlying slice, so `i` cannot overflow an `isize`, and"}]}