{"sha": "12cf9b6788edc56597cad225a6bdd835b2928028", "node_id": "C_kwDOAAsO6NoAKDEyY2Y5YjY3ODhlZGM1NjU5N2NhZDIyNWE2YmRkODM1YjI5MjgwMjg", "commit": {"author": {"name": "Matthijs van der Vleuten", "email": "git@zr40.nl", "date": "2023-04-24T19:02:24Z"}, "committer": {"name": "Matthijs van der Vleuten", "email": "git@zr40.nl", "date": "2023-04-24T19:02:24Z"}, "message": "Specify `--pre-release` when publishing vsce nightly\n\nAccording to https://code.visualstudio.com/api/working-with-extensions/publishing-extension#prerelease-extensions, when publishing pre-release versions, `--pre-release` must also be passed in the publish step.\n\nCurrently the behavior with and without the flag seems to be the same, but since it's documented to be required, don't rely on this staying that way.\n\nThis flag was previously removed in #13020, so this partially reverts that change.", "tree": {"sha": "44b0c64435bf9b590b85aebe8268c25f58ba6023", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44b0c64435bf9b590b85aebe8268c25f58ba6023"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12cf9b6788edc56597cad225a6bdd835b2928028", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12cf9b6788edc56597cad225a6bdd835b2928028", "html_url": "https://github.com/rust-lang/rust/commit/12cf9b6788edc56597cad225a6bdd835b2928028", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12cf9b6788edc56597cad225a6bdd835b2928028/comments", "author": {"login": "zr40", "id": 616299, "node_id": "MDQ6VXNlcjYxNjI5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/616299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zr40", "html_url": "https://github.com/zr40", "followers_url": "https://api.github.com/users/zr40/followers", "following_url": "https://api.github.com/users/zr40/following{/other_user}", "gists_url": "https://api.github.com/users/zr40/gists{/gist_id}", "starred_url": "https://api.github.com/users/zr40/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zr40/subscriptions", "organizations_url": "https://api.github.com/users/zr40/orgs", "repos_url": "https://api.github.com/users/zr40/repos", "events_url": "https://api.github.com/users/zr40/events{/privacy}", "received_events_url": "https://api.github.com/users/zr40/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zr40", "id": 616299, "node_id": "MDQ6VXNlcjYxNjI5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/616299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zr40", "html_url": "https://github.com/zr40", "followers_url": "https://api.github.com/users/zr40/followers", "following_url": "https://api.github.com/users/zr40/following{/other_user}", "gists_url": "https://api.github.com/users/zr40/gists{/gist_id}", "starred_url": "https://api.github.com/users/zr40/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zr40/subscriptions", "organizations_url": "https://api.github.com/users/zr40/orgs", "repos_url": "https://api.github.com/users/zr40/repos", "events_url": "https://api.github.com/users/zr40/events{/privacy}", "received_events_url": "https://api.github.com/users/zr40/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f06f995c5d4ddd0fb5dc451e482a8b3024fa151", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f06f995c5d4ddd0fb5dc451e482a8b3024fa151", "html_url": "https://github.com/rust-lang/rust/commit/8f06f995c5d4ddd0fb5dc451e482a8b3024fa151"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "43681c785fdc0042bf2c4c3d9e6ede26f52f9055", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/12cf9b6788edc56597cad225a6bdd835b2928028/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/12cf9b6788edc56597cad225a6bdd835b2928028/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=12cf9b6788edc56597cad225a6bdd835b2928028", "patch": "@@ -270,7 +270,7 @@ jobs:\n       - name: Publish Extension (Code Marketplace, nightly)\n         if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n         working-directory: ./editors/code\n-        run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix\n+        run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix --pre-release\n \n       - name: Publish Extension (OpenVSX, nightly)\n         if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')"}]}