{"sha": "92189bc521ce3256a53c1b435dfb6ec6740f4734", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyMTg5YmM1MjFjZTMyNTZhNTNjMWI0MzVkZmI2ZWM2NzQwZjQ3MzQ=", "commit": {"author": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2018-01-05T13:27:20Z"}, "committer": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2018-01-07T03:39:58Z"}, "message": "Remove redundant -Zdebug-llvm option\n\nThe same effect can be achieved using -Cllvm-args=-debug\n\nRefs #46437 as it removes LLVMRustSetDebug()", "tree": {"sha": "db0e1a36be3c964c41a8f957dd10acd1afac69e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/db0e1a36be3c964c41a8f957dd10acd1afac69e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92189bc521ce3256a53c1b435dfb6ec6740f4734", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92189bc521ce3256a53c1b435dfb6ec6740f4734", "html_url": "https://github.com/rust-lang/rust/commit/92189bc521ce3256a53c1b435dfb6ec6740f4734", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92189bc521ce3256a53c1b435dfb6ec6740f4734/comments", "author": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6828cf90146c7fefc4ba4f16dffe75f763f2d910", "url": "https://api.github.com/repos/rust-lang/rust/commits/6828cf90146c7fefc4ba4f16dffe75f763f2d910", "html_url": "https://github.com/rust-lang/rust/commit/6828cf90146c7fefc4ba4f16dffe75f763f2d910"}], "stats": {"total": 24, "additions": 1, "deletions": 23}, "files": [{"sha": "5e470e8d86eac218ab3318ea90c6935bd0cb293c", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -1084,8 +1084,6 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         \"omit landing pads for unwinding\"),\n     fewer_names: bool = (false, parse_bool, [TRACKED],\n         \"reduce memory use by retaining fewer names within compilation artifacts (LLVM-IR)\"),\n-    debug_llvm: bool = (false, parse_bool, [UNTRACKED],\n-        \"enable debug output from LLVM\"),\n     meta_stats: bool = (false, parse_bool, [UNTRACKED],\n         \"gather metadata statistics\"),\n     print_link_args: bool = (false, parse_bool, [UNTRACKED],\n@@ -2747,8 +2745,6 @@ mod tests {\n         assert_eq!(reference.dep_tracking_hash(), opts.dep_tracking_hash());\n         opts.debugging_opts.borrowck_stats = true;\n         assert_eq!(reference.dep_tracking_hash(), opts.dep_tracking_hash());\n-        opts.debugging_opts.debug_llvm = true;\n-        assert_eq!(reference.dep_tracking_hash(), opts.dep_tracking_hash());\n         opts.debugging_opts.meta_stats = true;\n         assert_eq!(reference.dep_tracking_hash(), opts.dep_tracking_hash());\n         opts.debugging_opts.print_link_args = true;"}, {"sha": "237656eb43c69d3d0001e4f9e29ed6698c5e0d49", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -167,7 +167,6 @@ mod rustc_trans {\n     pub use rustc_trans_utils::trans_crate::TranslatedCrate as CrateTranslation;\n \n     pub fn init(_sess: &Session) {}\n-    pub fn enable_llvm_debug() {}\n     pub fn print_version() {}\n     pub fn print_passes() {}\n     pub fn print(_req: PrintRequest, _sess: &Session) {}\n@@ -205,10 +204,6 @@ pub fn run_compiler<'a>(args: &[String],\n \n     let (sopts, cfg) = config::build_session_options_and_crate_config(&matches);\n \n-    if sopts.debugging_opts.debug_llvm {\n-        rustc_trans::enable_llvm_debug();\n-    }\n-\n     let descriptions = diagnostics_registry();\n \n     do_or_return!(callbacks.early_callback(&matches,"}, {"sha": "79909c3c5aec75bfb1d0f6a84d5e248d7e1ee736", "filename": "src/librustc_llvm/ffi.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_llvm%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_llvm%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Fffi.rs?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -1315,9 +1315,6 @@ extern \"C\" {\n                              ElementCount: c_uint,\n                              Packed: Bool);\n \n-    /// Enables LLVM debug output.\n-    pub fn LLVMRustSetDebug(Enabled: c_int);\n-\n     /// Prepares inline assembly.\n     pub fn LLVMRustInlineAsm(Ty: TypeRef,\n                              AsmString: *const c_char,"}, {"sha": "fd6cd5c371d9781fc691e92cd0e9e734a31a38d3", "filename": "src/librustc_trans/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_trans%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_trans%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Flib.rs?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -69,7 +69,7 @@ pub use base::trans_crate;\n use back::bytecode::RLIB_BYTECODE_EXTENSION;\n \n pub use metadata::LlvmMetadataLoader;\n-pub use llvm_util::{init, target_features, print_version, print_passes, print, enable_llvm_debug};\n+pub use llvm_util::{init, target_features, print_version, print_passes, print};\n \n use std::any::Any;\n use std::path::PathBuf;"}, {"sha": "b3d0b574d1d432bd08f9e7f7101564b9baf78bd1", "filename": "src/librustc_trans/llvm_util.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_trans%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Flibrustc_trans%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fllvm_util.rs?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -140,7 +140,3 @@ pub fn print(req: PrintRequest, sess: &Session) {\n         }\n     }\n }\n-\n-pub fn enable_llvm_debug() {\n-    unsafe { llvm::LLVMRustSetDebug(1); }\n-}"}, {"sha": "e9eaad853d53dd4dc11ef90b56ba06e1c0a901ca", "filename": "src/rustllvm/RustWrapper.cpp", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Frustllvm%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/92189bc521ce3256a53c1b435dfb6ec6740f4734/src%2Frustllvm%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FRustWrapper.cpp?ref=92189bc521ce3256a53c1b435dfb6ec6740f4734", "patch": "@@ -384,12 +384,6 @@ LLVMRustBuildAtomicFence(LLVMBuilderRef B, LLVMAtomicOrdering Order,\n   return wrap(unwrap(B)->CreateFence(fromRust(Order), fromRust(Scope)));\n }\n \n-extern \"C\" void LLVMRustSetDebug(int Enabled) {\n-#ifndef NDEBUG\n-  DebugFlag = Enabled;\n-#endif\n-}\n-\n enum class LLVMRustAsmDialect {\n   Other,\n   Att,"}]}