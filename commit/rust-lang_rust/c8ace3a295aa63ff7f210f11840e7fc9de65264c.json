{"sha": "c8ace3a295aa63ff7f210f11840e7fc9de65264c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4YWNlM2EyOTVhYTYzZmY3ZjIxMGYxMTg0MGU3ZmM5ZGU2NTI2NGM=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-01-07T10:05:51Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-01-07T10:54:18Z"}, "message": "Remove some stale deprecations", "tree": {"sha": "cb6ca14556d79df1caa088011d5389ac8b80db28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cb6ca14556d79df1caa088011d5389ac8b80db28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8ace3a295aa63ff7f210f11840e7fc9de65264c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8ace3a295aa63ff7f210f11840e7fc9de65264c", "html_url": "https://github.com/rust-lang/rust/commit/c8ace3a295aa63ff7f210f11840e7fc9de65264c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8ace3a295aa63ff7f210f11840e7fc9de65264c/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1347b7fa4cdc2064ac1cb4a686f10890b9235893", "url": "https://api.github.com/repos/rust-lang/rust/commits/1347b7fa4cdc2064ac1cb4a686f10890b9235893", "html_url": "https://github.com/rust-lang/rust/commit/1347b7fa4cdc2064ac1cb4a686f10890b9235893"}], "stats": {"total": 17, "additions": 5, "deletions": 12}, "files": [{"sha": "c10b3b8f55eb93dae99433818891403c9a2ef1b6", "filename": "crates/assists/src/handlers/fix_visibility.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fassists%2Fsrc%2Fhandlers%2Ffix_visibility.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fassists%2Fsrc%2Fhandlers%2Ffix_visibility.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fassists%2Fsrc%2Fhandlers%2Ffix_visibility.rs?ref=c8ace3a295aa63ff7f210f11840e7fc9de65264c", "patch": "@@ -97,7 +97,6 @@ fn add_vis_to_referenced_record_field(acc: &mut Assists, ctx: &AssistContext) ->\n     let parent_name = parent.name(ctx.db());\n     let target_module = parent.module(ctx.db());\n \n-    #[allow(deprecated)]\n     let in_file_source = record_field_def.source(ctx.db())?;\n     let (offset, current_visibility, target) = match in_file_source.value {\n         hir::FieldSource::Named(it) => {"}, {"sha": "71ec4df92b27609fd64dc6741da603033b409885", "filename": "crates/ide/src/diagnostics/fixes.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs?ref=c8ace3a295aa63ff7f210f11840e7fc9de65264c", "patch": "@@ -156,22 +156,19 @@ fn missing_record_expr_field_fix(\n     let record_fields = match VariantDef::from(def_id) {\n         VariantDef::Struct(s) => {\n             module = s.module(sema.db);\n-            #[allow(deprecated)]\n             let source = s.source(sema.db)?;\n             def_file_id = source.file_id;\n             let fields = source.value.field_list()?;\n             record_field_list(fields)?\n         }\n         VariantDef::Union(u) => {\n             module = u.module(sema.db);\n-            #[allow(deprecated)]\n             let source = u.source(sema.db)?;\n             def_file_id = source.file_id;\n             source.value.record_field_list()?\n         }\n         VariantDef::Variant(e) => {\n             module = e.module(sema.db);\n-            #[allow(deprecated)]\n             let source = e.source(sema.db)?;\n             def_file_id = source.file_id;\n             let fields = source.value.field_list()?;"}, {"sha": "a12a2475e68c38e75a1643822dc8a6fd6bcc21cd", "filename": "crates/ide/src/hover.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fhover.rs?ref=c8ace3a295aa63ff7f210f11840e7fc9de65264c", "patch": "@@ -320,7 +320,6 @@ fn hover_for_definition(db: &RootDatabase, def: Definition) -> Option<Markup> {\n             from_def_source_labeled(db, it, Some(label), mod_path)\n         }\n         Definition::Field(def) => {\n-            #[allow(deprecated)]\n             let src = def.source(db)?.value;\n             if let FieldSource::Named(it) = src {\n                 from_def_source_labeled(db, def, it.short_label(), mod_path)\n@@ -368,7 +367,6 @@ fn hover_for_definition(db: &RootDatabase, def: Definition) -> Option<Markup> {\n         D: HasSource<Ast = A> + HasAttrs + Copy,\n         A: ShortLabel,\n     {\n-        #[allow(deprecated)]\n         let short_label = def.source(db)?.value.short_label();\n         from_def_source_labeled(db, def, short_label, mod_path)\n     }"}, {"sha": "37b06027c79210429a838c3e2140eedfd79f86b1", "filename": "crates/ide_db/src/search.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide_db%2Fsrc%2Fsearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Fide_db%2Fsrc%2Fsearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_db%2Fsrc%2Fsearch.rs?ref=c8ace3a295aa63ff7f210f11840e7fc9de65264c", "patch": "@@ -137,7 +137,6 @@ impl Definition {\n         }\n \n         if let Definition::LifetimeParam(param) = self {\n-            #[allow(deprecated)]\n             let range = match param.parent(db) {\n                 hir::GenericDef::Function(it) => {\n                     it.source(db).and_then(|src| Some(src.value.syntax().text_range()))"}, {"sha": "29cc9051ee7c5f1fe427f25ce46c84cf677bdae9", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8ace3a295aa63ff7f210f11840e7fc9de65264c/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=c8ace3a295aa63ff7f210f11840e7fc9de65264c", "patch": "@@ -18,8 +18,8 @@ use lsp_types::{\n     CallHierarchyIncomingCall, CallHierarchyIncomingCallsParams, CallHierarchyItem,\n     CallHierarchyOutgoingCall, CallHierarchyOutgoingCallsParams, CallHierarchyPrepareParams,\n     CodeActionKind, CodeLens, Command, CompletionItem, Diagnostic, DiagnosticTag,\n-    DocumentFormattingParams, DocumentHighlight, DocumentSymbol, FoldingRange, FoldingRangeParams,\n-    HoverContents, Location, NumberOrString, Position, PrepareRenameResponse, Range, RenameParams,\n+    DocumentFormattingParams, DocumentHighlight, FoldingRange, FoldingRangeParams, HoverContents,\n+    Location, NumberOrString, Position, PrepareRenameResponse, Range, RenameParams,\n     SemanticTokensDeltaParams, SemanticTokensFullDeltaResult, SemanticTokensParams,\n     SemanticTokensRangeParams, SemanticTokensRangeResult, SemanticTokensResult, SymbolInformation,\n     SymbolTag, TextDocumentIdentifier, TextDocumentPositionParams, Url, WorkspaceEdit,\n@@ -280,7 +280,7 @@ pub(crate) fn handle_document_symbol(\n     let file_id = from_proto::file_id(&snap, &params.text_document.uri)?;\n     let line_index = snap.analysis.file_line_index(file_id)?;\n \n-    let mut parents: Vec<(DocumentSymbol, Option<usize>)> = Vec::new();\n+    let mut parents: Vec<(lsp_types::DocumentSymbol, Option<usize>)> = Vec::new();\n \n     for symbol in snap.analysis.file_structure(file_id)? {\n         let mut tags = Vec::new();\n@@ -289,7 +289,7 @@ pub(crate) fn handle_document_symbol(\n         };\n \n         #[allow(deprecated)]\n-        let doc_symbol = DocumentSymbol {\n+        let doc_symbol = lsp_types::DocumentSymbol {\n             name: symbol.label,\n             detail: symbol.detail,\n             kind: to_proto::symbol_kind(symbol.kind),\n@@ -333,7 +333,7 @@ pub(crate) fn handle_document_symbol(\n     return Ok(Some(res));\n \n     fn flatten_document_symbol(\n-        symbol: &DocumentSymbol,\n+        symbol: &lsp_types::DocumentSymbol,\n         container_name: Option<String>,\n         url: &Url,\n         res: &mut Vec<SymbolInformation>,"}]}