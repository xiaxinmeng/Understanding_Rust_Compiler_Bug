{"sha": "7b9d50d14d0982b33a9288343792327e4e1d33cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiOWQ1MGQxNGQwOTgyYjMzYTkyODgzNDM3OTIzMjdlNGUxZDMzY2Q=", "commit": {"author": {"name": "Harald Hoyer", "email": "harald@redhat.com", "date": "2019-10-15T08:34:53Z"}, "committer": {"name": "Harald Hoyer", "email": "harald@redhat.com", "date": "2019-10-22T14:52:05Z"}, "message": "rename Error::iter_chain() and remove Error::iter_sources()\n\nRename\n* Error::iter_chain() -> Error::chain()\n* ErrorIter -> Chain\n\nRemoved\n* Error::iter_sources()\n\naccording to\nhttps://github.com/rust-lang/rust/issues/58520\n\nRationale:\n\n   1. Such iterators are helpful. They should better be stabilized sooner\n      than later.\n   2. self should be included. It is easy to .skip(1) it.\n      Not including self is harmful because it is harder to add self\n      to the iterator than to remove it.\n   3. The chosen name should be telling and reflect the fact that self is\n      included. `.chain()` was chosen because the iterator iterates over\n      the chain of errors that is somehow included in self.\n   4. The resulting iterator is named `Chain` because the `error::Chain`\n      is what we want to have.", "tree": {"sha": "c19adee8dbf4165eb4b532b483fac5264324ec8e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c19adee8dbf4165eb4b532b483fac5264324ec8e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b9d50d14d0982b33a9288343792327e4e1d33cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b9d50d14d0982b33a9288343792327e4e1d33cd", "html_url": "https://github.com/rust-lang/rust/commit/7b9d50d14d0982b33a9288343792327e4e1d33cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b9d50d14d0982b33a9288343792327e4e1d33cd/comments", "author": {"login": "haraldh", "id": 427825, "node_id": "MDQ6VXNlcjQyNzgyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/427825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haraldh", "html_url": "https://github.com/haraldh", "followers_url": "https://api.github.com/users/haraldh/followers", "following_url": "https://api.github.com/users/haraldh/following{/other_user}", "gists_url": "https://api.github.com/users/haraldh/gists{/gist_id}", "starred_url": "https://api.github.com/users/haraldh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haraldh/subscriptions", "organizations_url": "https://api.github.com/users/haraldh/orgs", "repos_url": "https://api.github.com/users/haraldh/repos", "events_url": "https://api.github.com/users/haraldh/events{/privacy}", "received_events_url": "https://api.github.com/users/haraldh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "haraldh", "id": 427825, "node_id": "MDQ6VXNlcjQyNzgyNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/427825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haraldh", "html_url": "https://github.com/haraldh", "followers_url": "https://api.github.com/users/haraldh/followers", "following_url": "https://api.github.com/users/haraldh/following{/other_user}", "gists_url": "https://api.github.com/users/haraldh/gists{/gist_id}", "starred_url": "https://api.github.com/users/haraldh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haraldh/subscriptions", "organizations_url": "https://api.github.com/users/haraldh/orgs", "repos_url": "https://api.github.com/users/haraldh/repos", "events_url": "https://api.github.com/users/haraldh/events{/privacy}", "received_events_url": "https://api.github.com/users/haraldh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da59656b3b2e2469d9bdae3c9c9e8cbacdd5e6f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/da59656b3b2e2469d9bdae3c9c9e8cbacdd5e6f6", "html_url": "https://github.com/rust-lang/rust/commit/da59656b3b2e2469d9bdae3c9c9e8cbacdd5e6f6"}], "stats": {"total": 92, "additions": 12, "deletions": 80}, "files": [{"sha": "df24b6635f41160c06690c7cde48fa0dcf15002e", "filename": "src/libstd/error.rs", "status": "modified", "additions": 12, "deletions": 80, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/7b9d50d14d0982b33a9288343792327e4e1d33cd/src%2Flibstd%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b9d50d14d0982b33a9288343792327e4e1d33cd/src%2Flibstd%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ferror.rs?ref=7b9d50d14d0982b33a9288343792327e4e1d33cd", "patch": "@@ -725,6 +725,9 @@ impl dyn Error {\n     /// Returns an iterator starting with the current error and continuing with\n     /// recursively calling [`source`].\n     ///\n+    /// If you want to omit the current error and only use its sources,\n+    /// use `skip(1)`.\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -763,7 +766,7 @@ impl dyn Error {\n     /// // let err : Box<Error> = b.into(); // or\n     /// let err = &b as &(dyn Error);\n     ///\n-    /// let mut iter = err.iter_chain();\n+    /// let mut iter = err.chain();\n     ///\n     /// assert_eq!(\"B\".to_string(), iter.next().unwrap().to_string());\n     /// assert_eq!(\"A\".to_string(), iter.next().unwrap().to_string());\n@@ -774,98 +777,27 @@ impl dyn Error {\n     /// [`source`]: trait.Error.html#method.source\n     #[unstable(feature = \"error_iter\", issue = \"58520\")]\n     #[inline]\n-    pub fn iter_chain(&self) -> ErrorIter<'_> {\n-        ErrorIter {\n+    pub fn chain(&self) -> Chain<'_> {\n+        Chain {\n             current: Some(self),\n         }\n     }\n-\n-    /// Returns an iterator starting with the [`source`] of this error\n-    /// and continuing with recursively calling [`source`].\n-    ///\n-    /// # Examples\n-    ///\n-    /// ```\n-    /// #![feature(error_iter)]\n-    /// use std::error::Error;\n-    /// use std::fmt;\n-    ///\n-    /// #[derive(Debug)]\n-    /// struct A;\n-    ///\n-    /// #[derive(Debug)]\n-    /// struct B(Option<Box<dyn Error + 'static>>);\n-    ///\n-    /// #[derive(Debug)]\n-    /// struct C(Option<Box<dyn Error + 'static>>);\n-    ///\n-    /// impl fmt::Display for A {\n-    ///     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n-    ///         write!(f, \"A\")\n-    ///     }\n-    /// }\n-    ///\n-    /// impl fmt::Display for B {\n-    ///     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n-    ///         write!(f, \"B\")\n-    ///     }\n-    /// }\n-    ///\n-    /// impl fmt::Display for C {\n-    ///     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n-    ///         write!(f, \"C\")\n-    ///     }\n-    /// }\n-    ///\n-    /// impl Error for A {}\n-    ///\n-    /// impl Error for B {\n-    ///     fn source(&self) -> Option<&(dyn Error + 'static)> {\n-    ///         self.0.as_ref().map(|e| e.as_ref())\n-    ///     }\n-    /// }\n-    ///\n-    /// impl Error for C {\n-    ///     fn source(&self) -> Option<&(dyn Error + 'static)> {\n-    ///         self.0.as_ref().map(|e| e.as_ref())\n-    ///     }\n-    /// }\n-    ///\n-    /// let b = B(Some(Box::new(A)));\n-    /// let c = C(Some(Box::new(b)));\n-    ///\n-    /// // let err : Box<Error> = c.into(); // or\n-    /// let err = &c as &(dyn Error);\n-    ///\n-    /// let mut iter = err.iter_sources();\n-    ///\n-    /// assert_eq!(\"B\".to_string(), iter.next().unwrap().to_string());\n-    /// assert_eq!(\"A\".to_string(), iter.next().unwrap().to_string());\n-    /// assert!(iter.next().is_none());\n-    /// assert!(iter.next().is_none());\n-    /// ```\n-    ///\n-    /// [`source`]: trait.Error.html#method.source\n-    #[inline]\n-    #[unstable(feature = \"error_iter\", issue = \"58520\")]\n-    pub fn iter_sources(&self) -> ErrorIter<'_> {\n-        ErrorIter {\n-            current: self.source(),\n-        }\n-    }\n }\n \n-/// An iterator over [`Error`]\n+/// An iterator over an [`Error`] and its sources.\n+///\n+/// If you want to omit the initial error and only process\n+/// its sources, use `skip(1)`.\n ///\n /// [`Error`]: trait.Error.html\n #[unstable(feature = \"error_iter\", issue = \"58520\")]\n #[derive(Copy, Clone, Debug)]\n-pub struct ErrorIter<'a> {\n+pub struct Chain<'a> {\n     current: Option<&'a (dyn Error + 'static)>,\n }\n \n #[unstable(feature = \"error_iter\", issue = \"58520\")]\n-impl<'a> Iterator for ErrorIter<'a> {\n+impl<'a> Iterator for Chain<'a> {\n     type Item = &'a (dyn Error + 'static);\n \n     fn next(&mut self) -> Option<Self::Item> {"}]}