{"sha": "8b2eb06df30edeec2046f919dd359b5b86077d6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiMmViMDZkZjMwZWRlZWMyMDQ2ZjkxOWRkMzU5YjViODYwNzdkNmE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-12-04T06:24:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-12-04T06:24:11Z"}, "message": "Merge pull request #3488 from phansch/fix_cargo_lint_bug\n\nFix wildcard_dependencies false positive", "tree": {"sha": "4b8d8252012979a16125f286909e5025eaaf2a8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b8d8252012979a16125f286909e5025eaaf2a8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b2eb06df30edeec2046f919dd359b5b86077d6a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcBh2LCRBK7hj4Ov3rIwAAdHIIAAcPnk6ZpoqJWq+7RcnXourx\niSghCQ3quRZCQ9prLjHdQRI3ziDZxdkLFfBitufk8d3E2qzs/vRhOoJL8SN1XX6Y\ns51F99qirn/PlN1cWEiCdfqZwdSjRGO5skbdjpBvCJiUwNTuoaflA3myF2VVTF10\n/CXzHGxL6B0UohBfy3w/tCr2DWWmpQiGDB+cPvFpUHjHjgU2Pf0YDAtFwIvocNkf\nikGdrSmhSR91JEMRXp4+/ejd53AMJmi7APIDVAkM6QTfvQ0wdXpepmI4qbdo/bYV\nCVkYPpNVcnECOMmCX4S4sDK0EDLDkyNl9NpEdPfJgOJF3u6vyNXPb/DNKh8j9uM=\n=6I/K\n-----END PGP SIGNATURE-----\n", "payload": "tree 4b8d8252012979a16125f286909e5025eaaf2a8b\nparent c00210d7ba3a5b08babe289de942b687d5ff6c8b\nparent 46ee676139006c74d7d7594a755d84290a5f1eee\nauthor Philipp Hansch <dev@phansch.net> 1543904651 +0100\ncommitter GitHub <noreply@github.com> 1543904651 +0100\n\nMerge pull request #3488 from phansch/fix_cargo_lint_bug\n\nFix wildcard_dependencies false positive"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b2eb06df30edeec2046f919dd359b5b86077d6a", "html_url": "https://github.com/rust-lang/rust/commit/8b2eb06df30edeec2046f919dd359b5b86077d6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b2eb06df30edeec2046f919dd359b5b86077d6a/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c00210d7ba3a5b08babe289de942b687d5ff6c8b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c00210d7ba3a5b08babe289de942b687d5ff6c8b", "html_url": "https://github.com/rust-lang/rust/commit/c00210d7ba3a5b08babe289de942b687d5ff6c8b"}, {"sha": "46ee676139006c74d7d7594a755d84290a5f1eee", "url": "https://api.github.com/repos/rust-lang/rust/commits/46ee676139006c74d7d7594a755d84290a5f1eee", "html_url": "https://github.com/rust-lang/rust/commit/46ee676139006c74d7d7594a755d84290a5f1eee"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "6de391d882ff5e9ae042f6eb2264a9b668d7f75b", "filename": "clippy_lints/src/wildcard_dependencies.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8b2eb06df30edeec2046f919dd359b5b86077d6a/clippy_lints%2Fsrc%2Fwildcard_dependencies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b2eb06df30edeec2046f919dd359b5b86077d6a/clippy_lints%2Fsrc%2Fwildcard_dependencies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fwildcard_dependencies.rs?ref=8b2eb06df30edeec2046f919dd359b5b86077d6a", "patch": "@@ -13,6 +13,7 @@ use crate::syntax::{ast::*, source_map::DUMMY_SP};\n use crate::utils::span_lint;\n \n use cargo_metadata;\n+use if_chain::if_chain;\n use semver;\n \n /// **What it does:** Checks for wildcard dependencies in the `Cargo.toml`.\n@@ -54,8 +55,12 @@ impl EarlyLintPass for Pass {\n \n         for dep in &metadata.packages[0].dependencies {\n             // VersionReq::any() does not work\n-            if let Ok(wildcard_ver) = semver::VersionReq::parse(\"*\") {\n-                if dep.req == wildcard_ver {\n+            if_chain! {\n+                if let Ok(wildcard_ver) = semver::VersionReq::parse(\"*\");\n+                if let Some(ref source) = dep.source;\n+                if !source.starts_with(\"git\");\n+                if dep.req == wildcard_ver;\n+                then {\n                     span_lint(\n                         cx,\n                         WILDCARD_DEPENDENCIES,"}]}