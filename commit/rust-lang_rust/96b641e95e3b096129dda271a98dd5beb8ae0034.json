{"sha": "96b641e95e3b096129dda271a98dd5beb8ae0034", "node_id": "C_kwDOAAsO6NoAKDk2YjY0MWU5NWUzYjA5NjEyOWRkYTI3MWE5OGRkNWJlYjhhZTAwMzQ", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-04-06T18:49:10Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-04-06T18:58:46Z"}, "message": "internal: Add more doc-link tests", "tree": {"sha": "592c6e379947a7f7dedce815f53b2d37fe2fe750", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/592c6e379947a7f7dedce815f53b2d37fe2fe750"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96b641e95e3b096129dda271a98dd5beb8ae0034", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96b641e95e3b096129dda271a98dd5beb8ae0034", "html_url": "https://github.com/rust-lang/rust/commit/96b641e95e3b096129dda271a98dd5beb8ae0034", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96b641e95e3b096129dda271a98dd5beb8ae0034/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a1423337ff311e81fd19c4166f08559b33f8b5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/4a1423337ff311e81fd19c4166f08559b33f8b5b", "html_url": "https://github.com/rust-lang/rust/commit/4a1423337ff311e81fd19c4166f08559b33f8b5b"}], "stats": {"total": 104, "additions": 94, "deletions": 10}, "files": [{"sha": "86fed390a8c83385cce9124894f7ff325c059d2c", "filename": "crates/ide/src/doc_links/tests.rs", "status": "modified", "additions": 94, "deletions": 10, "changes": 104, "blob_url": "https://github.com/rust-lang/rust/blob/96b641e95e3b096129dda271a98dd5beb8ae0034/crates%2Fide%2Fsrc%2Fdoc_links%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96b641e95e3b096129dda271a98dd5beb8ae0034/crates%2Fide%2Fsrc%2Fdoc_links%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdoc_links%2Ftests.rs?ref=96b641e95e3b096129dda271a98dd5beb8ae0034", "patch": "@@ -299,23 +299,107 @@ fn foo() {\n }\n \n #[test]\n-fn test_trait_items() {\n+fn doc_links_items_simple() {\n+    check_doc_links(\n+        r#\"\n+//- /main.rs crate:main deps:krate\n+/// [`krate`]\n+//! [`Trait`]\n+//! [`function`]\n+//! [`CONST`]\n+//! [`STATIC`]\n+//! [`Struct`]\n+//! [`Enum`]\n+//! [`Union`]\n+//! [`Type`]\n+//! [`module`]\n+use self$0;\n+\n+const CONST: () = ();\n+   // ^^^^^ CONST\n+static STATIC: () = ();\n+    // ^^^^^^ STATIC\n+trait Trait {\n+   // ^^^^^ Trait\n+}\n+fn function() {}\n+// ^^^^^^^^ function\n+struct Struct;\n+    // ^^^^^^ Struct\n+enum Enum {}\n+  // ^^^^ Enum\n+union Union {__: ()}\n+   // ^^^^^ Union\n+type Type = ();\n+  // ^^^^ Type\n+mod module {}\n+ // ^^^^^^ module\n+//- /krate.rs crate:krate\n+// empty\n+//^file krate\n+\"#,\n+    )\n+}\n+\n+#[test]\n+fn doc_links_inherent_impl_items() {\n+    check_doc_links(\n+        r#\"\n+// /// [`Struct::CONST`]\n+// /// [`Struct::function`]\n+/// FIXME #9694\n+struct Struct$0;\n+\n+impl Struct {\n+    const CONST: () = ();\n+    fn function() {}\n+}\n+\"#,\n+    )\n+}\n+\n+#[test]\n+fn doc_links_trait_impl_items() {\n+    check_doc_links(\n+        r#\"\n+trait Trait {\n+    type Type;\n+    const CONST: usize;\n+    fn function();\n+}\n+// /// [`Struct::Type`]\n+// /// [`Struct::CONST`]\n+// /// [`Struct::function`]\n+/// FIXME #9694\n+struct Struct$0;\n+\n+impl Trait for Struct {\n+    type Type = ();\n+    const CONST: () = ();\n+    fn function() {}\n+}\n+\"#,\n+    )\n+}\n+\n+#[test]\n+fn doc_links_trait_items() {\n     check_doc_links(\n         r#\"\n /// [`Trait`]\n /// [`Trait::Type`]\n /// [`Trait::CONST`]\n-/// [`Trait::func`]\n+/// [`Trait::function`]\n trait Trait$0 {\n    // ^^^^^ Trait\n-    type Type;\n-      // ^^^^ Trait::Type\n-    const CONST: usize;\n-       // ^^^^^ Trait::CONST\n-    fn func();\n-    // ^^^^ Trait::func\n-}\n-        \"#,\n+type Type;\n+  // ^^^^ Trait::Type\n+const CONST: usize;\n+   // ^^^^^ Trait::CONST\n+fn function();\n+// ^^^^^^^^ Trait::function\n+}\n+    \"#,\n     )\n }\n "}]}