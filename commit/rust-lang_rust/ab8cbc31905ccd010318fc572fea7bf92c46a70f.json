{"sha": "ab8cbc31905ccd010318fc572fea7bf92c46a70f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiOGNiYzMxOTA1Y2NkMDEwMzE4ZmM1NzJmZWE3YmY5MmM0NmE3MGY=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:39:50Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:39:50Z"}, "message": "Show correct macro name in non_fmt_panics message.", "tree": {"sha": "3c62a6c233aa27bdaa117df48b847ccb4cf94d07", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c62a6c233aa27bdaa117df48b847ccb4cf94d07"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab8cbc31905ccd010318fc572fea7bf92c46a70f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab8cbc31905ccd010318fc572fea7bf92c46a70f", "html_url": "https://github.com/rust-lang/rust/commit/ab8cbc31905ccd010318fc572fea7bf92c46a70f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab8cbc31905ccd010318fc572fea7bf92c46a70f/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "html_url": "https://github.com/rust-lang/rust/commit/86bc236a4cf2a786b8eef43439729cd2a8a61b1f"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "3848547f6c3da8bbf1d2b3083feb6ef5f49a52e7", "filename": "compiler/rustc_lint/src/non_fmt_panic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab8cbc31905ccd010318fc572fea7bf92c46a70f/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab8cbc31905ccd010318fc572fea7bf92c46a70f/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fnon_fmt_panic.rs?ref=ab8cbc31905ccd010318fc572fea7bf92c46a70f", "patch": "@@ -102,7 +102,7 @@ fn check_panic<'tcx>(cx: &LateContext<'tcx>, f: &'tcx hir::Expr<'tcx>, arg: &'tc\n \n     cx.struct_span_lint(NON_FMT_PANICS, arg_span, |lint| {\n         let mut l = lint.build(\"panic message is not a string literal\");\n-        l.note(\"this usage of panic!() is deprecated; it will be a hard error in Rust 2021\");\n+        l.note(&format!(\"this usage of {}!() is deprecated; it will be a hard error in Rust 2021\", symbol_str));\n         l.note(\"for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\");\n         if !span.contains(arg_span) {\n             // No clue where this argument is coming from."}, {"sha": "b62cc378aa5e4e7bd956a20bf597e4ba37d84e02", "filename": "src/test/ui/non-fmt-panic.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/ab8cbc31905ccd010318fc572fea7bf92c46a70f/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ab8cbc31905ccd010318fc572fea7bf92c46a70f/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr?ref=ab8cbc31905ccd010318fc572fea7bf92c46a70f", "patch": "@@ -61,7 +61,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, S);\n    |                    ^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |\n@@ -74,7 +74,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, 123);\n    |                    ^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |\n@@ -87,7 +87,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, Some(123));\n    |                    ^^^^^^^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{:?}\" format string to use the Debug implementation of `Option<i32>`\n    |\n@@ -138,7 +138,7 @@ warning: panic message is not a string literal\n LL |     std::panic!(123);\n    |                 ^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of std::panic!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |\n@@ -155,7 +155,7 @@ warning: panic message is not a string literal\n LL |     core::panic!(&*\"abc\");\n    |                  ^^^^^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of core::panic!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |\n@@ -253,7 +253,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, format!(\"{}\", 1));\n    |                    ^^^^^^^^^^^^^^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n    = note: the assert!() macro supports formatting, so there's no need for the format!() macro here\n help: remove the `format!(..)` macro call\n@@ -268,7 +268,7 @@ warning: panic message is not a string literal\n LL |     debug_assert!(false, format!(\"{}\", 1));\n    |                          ^^^^^^^^^^^^^^^^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of debug_assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n    = note: the debug_assert!() macro supports formatting, so there's no need for the format!() macro here\n help: remove the `format!(..)` macro call\n@@ -328,7 +328,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, v);\n    |                    ^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n \n warning: panic message is not a string literal\n@@ -354,7 +354,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, v);\n    |                    ^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{:?}\" format string to use the Debug implementation of `T`\n    |\n@@ -384,7 +384,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, v);\n    |                    ^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |\n@@ -414,7 +414,7 @@ warning: panic message is not a string literal\n LL |     assert!(false, v);\n    |                    ^\n    |\n-   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: this usage of assert!() is deprecated; it will be a hard error in Rust 2021\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n help: add a \"{}\" format string to Display the message\n    |"}]}