{"sha": "006f07f090894f09910fe6f15e5a670a955f8166", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwNmYwN2YwOTA4OTRmMDk5MTBmZTZmMTVlNWE2NzBhOTU1ZjgxNjY=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-01-29T14:47:22Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-01-31T09:57:51Z"}, "message": "Add test for `await` in `debug_assert!(..)`", "tree": {"sha": "6023fcfe2086805b2555901d62ecd9c2069c4d3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6023fcfe2086805b2555901d62ecd9c2069c4d3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/006f07f090894f09910fe6f15e5a670a955f8166", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAl4z+h8ACgkQaTCGhp1Q\nZjc4FhAAma9qYUD0djBse+twuXvyJ4p3R20w6qsqVAq/jGZbi8waUF/CTHAa/QSF\n8z2Qfwjx9XzHpW3tcsOA+QI1XdTGd2Mev30zxH7RMBFXwOHjljPy0eXHETALDbSX\nbTR52B0+OCFN44pTxTnbjVDCFcVnEslwEqjGwOILEIGDQt1I4sml25tXxRHhyktC\nIbybtiRtI6NORDEttKByCuJQK1dSrFKrxO+1+ISkaqW8QR7MYls5YT0I9VlvfSbo\nbGKAkTWjrSx+neRRZqO2i4BlEsFmMTK+qhpUzrPMopXJ6O0AUeUtp10lakXIiWPS\nxvKJnsOTbNG4DSnWQC7Gplb4utK3wm6DQNPkDT4nIAF0zWHIkf7NRiO+N4/vzUZu\ng44D6wDaJcSuPAVsXdK2qEPuDBponufcjtXj9j5SalyvGhJXgpM9WsXAbr6iqoGE\nEJwEwodn1bp/rVTlH2TmKq5W54VTxIItox7Vx67iqPILYRFjssvJKlQ9RGq6VSnd\n+hde5G5sxy1v0KOEx8PxXiQmhU7SFKDsH8fh+qi313pFxKqKCB4Y0oUnYLnTzDDe\nhdCuLrR43q7/WFRe0UwdwPEbIZrLV9hDNL4ze2y/ArfNGV4FhnNQrUD8HrZol5vq\nwi8ECf1U6aVz1YPlbBAqfdjh7g1ntDmJ27ZuGe4diHbLKnLNTec=\n=GwdM\n-----END PGP SIGNATURE-----", "payload": "tree 6023fcfe2086805b2555901d62ecd9c2069c4d3c\nparent 9fbd7f478e59cca00011b6ac0ed89bada8823e2a\nauthor flip1995 <hello@philkrones.com> 1580309242 +0100\ncommitter flip1995 <hello@philkrones.com> 1580464671 +0100\n\nAdd test for `await` in `debug_assert!(..)`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/006f07f090894f09910fe6f15e5a670a955f8166", "html_url": "https://github.com/rust-lang/rust/commit/006f07f090894f09910fe6f15e5a670a955f8166", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/006f07f090894f09910fe6f15e5a670a955f8166/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9fbd7f478e59cca00011b6ac0ed89bada8823e2a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9fbd7f478e59cca00011b6ac0ed89bada8823e2a", "html_url": "https://github.com/rust-lang/rust/commit/9fbd7f478e59cca00011b6ac0ed89bada8823e2a"}], "stats": {"total": 67, "additions": 38, "deletions": 29}, "files": [{"sha": "3db7e0164fa417cdbe01bd28ce4c090b839a7244", "filename": "tests/ui/debug_assert_with_mut_call.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/006f07f090894f09910fe6f15e5a670a955f8166/tests%2Fui%2Fdebug_assert_with_mut_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/006f07f090894f09910fe6f15e5a670a955f8166/tests%2Fui%2Fdebug_assert_with_mut_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdebug_assert_with_mut_call.rs?ref=006f07f090894f09910fe6f15e5a670a955f8166", "patch": "@@ -1,5 +1,7 @@\n+// compile-flags: --edition=2018\n #![feature(custom_inner_attributes)]\n #![rustfmt::skip]\n+#![warn(clippy::debug_assert_with_mut_call)]\n #![allow(clippy::trivially_copy_pass_by_ref, clippy::cognitive_complexity, clippy::redundant_closure_call)]\n \n struct S;\n@@ -114,11 +116,18 @@ fn misc() {\n     })());\n }\n \n+async fn debug_await() {\n+    debug_assert!(async {\n+        true\n+    }.await);\n+}\n+\n fn main() {\n     func_non_mutable();\n     func_mutable();\n     method_non_mutable();\n     method_mutable();\n \n     misc();\n+    debug_await();\n }"}, {"sha": "a2ca71b57a6fdf029db0662acdca29fcbcabb9bb", "filename": "tests/ui/debug_assert_with_mut_call.stderr", "status": "modified", "additions": 29, "deletions": 29, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/006f07f090894f09910fe6f15e5a670a955f8166/tests%2Fui%2Fdebug_assert_with_mut_call.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/006f07f090894f09910fe6f15e5a670a955f8166/tests%2Fui%2Fdebug_assert_with_mut_call.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdebug_assert_with_mut_call.stderr?ref=006f07f090894f09910fe6f15e5a670a955f8166", "patch": "@@ -1,169 +1,169 @@\n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:40:19\n+  --> $DIR/debug_assert_with_mut_call.rs:42:19\n    |\n LL |     debug_assert!(bool_mut(&mut 3));\n    |                   ^^^^^^^^^^^^^^^^\n    |\n-   = note: `#[deny(clippy::debug_assert_with_mut_call)]` on by default\n+   = note: `-D clippy::debug-assert-with-mut-call` implied by `-D warnings`\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:41:20\n+  --> $DIR/debug_assert_with_mut_call.rs:43:20\n    |\n LL |     debug_assert!(!bool_mut(&mut 3));\n    |                    ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:43:25\n+  --> $DIR/debug_assert_with_mut_call.rs:45:25\n    |\n LL |     debug_assert_eq!(0, u32_mut(&mut 3));\n    |                         ^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:44:22\n+  --> $DIR/debug_assert_with_mut_call.rs:46:22\n    |\n LL |     debug_assert_eq!(u32_mut(&mut 3), 0);\n    |                      ^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:46:25\n+  --> $DIR/debug_assert_with_mut_call.rs:48:25\n    |\n LL |     debug_assert_ne!(1, u32_mut(&mut 3));\n    |                         ^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:47:22\n+  --> $DIR/debug_assert_with_mut_call.rs:49:22\n    |\n LL |     debug_assert_ne!(u32_mut(&mut 3), 1);\n    |                      ^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:62:19\n+  --> $DIR/debug_assert_with_mut_call.rs:64:19\n    |\n LL |     debug_assert!(S.bool_self_mut());\n    |                   ^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:63:20\n+  --> $DIR/debug_assert_with_mut_call.rs:65:20\n    |\n LL |     debug_assert!(!S.bool_self_mut());\n    |                    ^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:64:19\n+  --> $DIR/debug_assert_with_mut_call.rs:66:19\n    |\n LL |     debug_assert!(S.bool_self_ref_arg_mut(&mut 3));\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:65:19\n+  --> $DIR/debug_assert_with_mut_call.rs:67:19\n    |\n LL |     debug_assert!(S.bool_self_mut_arg_ref(&3));\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:66:19\n+  --> $DIR/debug_assert_with_mut_call.rs:68:19\n    |\n LL |     debug_assert!(S.bool_self_mut_arg_mut(&mut 3));\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:68:22\n+  --> $DIR/debug_assert_with_mut_call.rs:70:22\n    |\n LL |     debug_assert_eq!(S.u32_self_mut(), 0);\n    |                      ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:69:22\n+  --> $DIR/debug_assert_with_mut_call.rs:71:22\n    |\n LL |     debug_assert_eq!(S.u32_self_mut_arg_ref(&3), 0);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:70:22\n+  --> $DIR/debug_assert_with_mut_call.rs:72:22\n    |\n LL |     debug_assert_eq!(S.u32_self_ref_arg_mut(&mut 3), 0);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:71:22\n+  --> $DIR/debug_assert_with_mut_call.rs:73:22\n    |\n LL |     debug_assert_eq!(S.u32_self_mut_arg_mut(&mut 3), 0);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:73:22\n+  --> $DIR/debug_assert_with_mut_call.rs:75:22\n    |\n LL |     debug_assert_ne!(S.u32_self_mut(), 1);\n    |                      ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:74:22\n+  --> $DIR/debug_assert_with_mut_call.rs:76:22\n    |\n LL |     debug_assert_ne!(S.u32_self_mut_arg_ref(&3), 1);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:75:22\n+  --> $DIR/debug_assert_with_mut_call.rs:77:22\n    |\n LL |     debug_assert_ne!(S.u32_self_ref_arg_mut(&mut 3), 1);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:76:22\n+  --> $DIR/debug_assert_with_mut_call.rs:78:22\n    |\n LL |     debug_assert_ne!(S.u32_self_mut_arg_mut(&mut 3), 1);\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:84:22\n+  --> $DIR/debug_assert_with_mut_call.rs:86:22\n    |\n LL |     debug_assert_eq!(v.pop(), Some(1));\n    |                      ^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_ne!`\n-  --> $DIR/debug_assert_with_mut_call.rs:85:31\n+  --> $DIR/debug_assert_with_mut_call.rs:87:31\n    |\n LL |     debug_assert_ne!(Some(3), v.pop());\n    |                               ^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:88:19\n+  --> $DIR/debug_assert_with_mut_call.rs:90:19\n    |\n LL |     debug_assert!(bool_mut(a));\n    |                   ^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:91:31\n+  --> $DIR/debug_assert_with_mut_call.rs:93:31\n    |\n LL |     debug_assert!(!(bool_ref(&u32_mut(&mut 3))));\n    |                               ^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert_eq!`\n-  --> $DIR/debug_assert_with_mut_call.rs:94:22\n+  --> $DIR/debug_assert_with_mut_call.rs:96:22\n    |\n LL |     debug_assert_eq!(v.pop().unwrap(), 3);\n    |                      ^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:98:19\n+  --> $DIR/debug_assert_with_mut_call.rs:100:19\n    |\n LL |     debug_assert!(bool_mut(&mut 3), \"w/o format\");\n    |                   ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:100:19\n+  --> $DIR/debug_assert_with_mut_call.rs:102:19\n    |\n LL |     debug_assert!(bool_mut(&mut 3), \"{} format\", \"w/\");\n    |                   ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:105:9\n+  --> $DIR/debug_assert_with_mut_call.rs:107:9\n    |\n LL |         bool_mut(&mut x);\n    |         ^^^^^^^^^^^^^^^^\n \n error: do not call a function with mutable arguments inside of `debug_assert!`\n-  --> $DIR/debug_assert_with_mut_call.rs:112:9\n+  --> $DIR/debug_assert_with_mut_call.rs:114:9\n    |\n LL |         bool_mut(&mut x);\n    |         ^^^^^^^^^^^^^^^^"}]}