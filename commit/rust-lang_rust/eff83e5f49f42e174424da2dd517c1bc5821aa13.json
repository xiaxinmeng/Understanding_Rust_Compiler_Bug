{"sha": "eff83e5f49f42e174424da2dd517c1bc5821aa13", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmZjgzZTVmNDlmNDJlMTc0NDI0ZGEyZGQ1MTdjMWJjNTgyMWFhMTM=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2019-11-07T18:02:01Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2019-11-13T18:44:14Z"}, "message": "Small fixes to comments", "tree": {"sha": "ddbf60bd5f8b1c57e01774043102d0354aa21c14", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ddbf60bd5f8b1c57e01774043102d0354aa21c14"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eff83e5f49f42e174424da2dd517c1bc5821aa13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eff83e5f49f42e174424da2dd517c1bc5821aa13", "html_url": "https://github.com/rust-lang/rust/commit/eff83e5f49f42e174424da2dd517c1bc5821aa13", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eff83e5f49f42e174424da2dd517c1bc5821aa13/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "281e898ecfb07ab1347a2c7d745542028d4376a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/281e898ecfb07ab1347a2c7d745542028d4376a8", "html_url": "https://github.com/rust-lang/rust/commit/281e898ecfb07ab1347a2c7d745542028d4376a8"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "ff0de4a73b7919c3e17b0d51f834b692f1fa178e", "filename": "src/librustc_passes/check_const.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/eff83e5f49f42e174424da2dd517c1bc5821aa13/src%2Flibrustc_passes%2Fcheck_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff83e5f49f42e174424da2dd517c1bc5821aa13/src%2Flibrustc_passes%2Fcheck_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fcheck_const.rs?ref=eff83e5f49f42e174424da2dd517c1bc5821aa13", "patch": "@@ -1,5 +1,6 @@\n-//! This pass checks the HIR bodies in a const context (e.g., `const`, `static`, `const fn`) for\n-//! structured control flow (e.g. `if`, `while`), which is forbidden in a const context.\n+//! This pass checks HIR bodies that may be evaluated at compile-time (e.g., `const`, `static`,\n+//! `const fn`) for structured control flow (e.g. `if`, `while`), which is forbidden in a const\n+//! context.\n //!\n //! By the time the MIR const-checker runs, these high-level constructs have been lowered to\n //! control-flow primitives (e.g., `Goto`, `SwitchInt`), making it tough to properly attribute\n@@ -98,7 +99,7 @@ impl<'tcx> CheckConstVisitor<'tcx> {\n         span_err!(self.sess, span, E0744, \"`{}` is not allowed in a `{}`\", bad_op, const_kind);\n     }\n \n-    /// Saves the parent `const_kind` before visiting a nested `Body` and restores it afterwards.\n+    /// Saves the parent `const_kind` before calling `f` and restores it afterwards.\n     fn recurse_into(&mut self, kind: Option<ConstKind>, f: impl FnOnce(&mut Self)) {\n         let parent_kind = self.const_kind;\n         self.const_kind = kind;\n@@ -124,7 +125,7 @@ impl<'tcx> Visitor<'tcx> for CheckConstVisitor<'tcx> {\n \n     fn visit_expr(&mut self, e: &'tcx hir::Expr) {\n         match &e.kind {\n-            // Skip these checks if the current item is not const.\n+            // Skip the following checks if we are not currently in a const context.\n             _ if self.const_kind.is_none() => {}\n \n             hir::ExprKind::Loop(_, _, source) => {"}]}