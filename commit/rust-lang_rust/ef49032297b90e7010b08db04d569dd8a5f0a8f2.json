{"sha": "ef49032297b90e7010b08db04d569dd8a5f0a8f2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmNDkwMzIyOTdiOTBlNzAxMGIwOGRiMDRkNTY5ZGQ4YTVmMGE4ZjI=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-08-09T12:42:41Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-08-09T12:43:11Z"}, "message": "Add comment about the lack of `ExpnData` serialization for proc-macro crates", "tree": {"sha": "ef28cf8816d1d7e055454f3d74bc851c8b1d218b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef28cf8816d1d7e055454f3d74bc851c8b1d218b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef49032297b90e7010b08db04d569dd8a5f0a8f2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl8v72cACgkQtAh+UQ6Y\nsWS+rw/+Mf6PaQBcCG9zwh6LPMVVHEqxNUSgzw3pK632P4eKwxbfaRQ41+k7JKtQ\n80TmlPmZK/eGnvcNeIeEsuJUw0gm+ZFUR11vCwZiO7ckIkKQ5Sd9jyl1qsQ3tXtz\ntby19fPSBlu2/OslOSJ7eJKWOnExDWH7HkX0XVhIjqQsV6eQ392jfgjscGmTG8iG\nyViclR+wd92zxJMORvCoWH5VWYzEaYriZWL7y/UEsoKbyYZDu/o4fDmwOemXmjMx\nF1iF2m2Suypa/Qi3+QBQqfrzDjVbN3TJUwjVelenchkUfyePEWOW8eL0Uov3H7CX\nGv3aFYYh0PP4NgP/CZGvWH20FlQiQJhiohA5MKwGnbMus1M9daNAustJOwDVOaa/\nK/7PyuAojitLPvq6cOZBx0EgjuRdnZtp0EwHILsHfiAV0M69nX6+sAFWkdRc9eYW\n/qOlOCvXqiOiA7cB+MJ1Bucz9hdh695C+MPyDuPTxQbanuYPlMLsk0YAbzeqb8nx\nDnPf/U92DSNBcJ0NiF+lOmSclJx8NpuPG07N//TS5uIHQhnuu4/g/xh/6YY8vsKf\nWor66vHpWziJeXlWnwvrZ/FSG+k2pLEa9XBs8RW6zeuY3+iLlLRMANGFp46Kryvo\nwk/XuhSBBBr+MtC70qTOloANq1SrrAeU59J2dWMIO0NzJnWIiDg=\n=ZlWt\n-----END PGP SIGNATURE-----", "payload": "tree ef28cf8816d1d7e055454f3d74bc851c8b1d218b\nparent 955aebf529787fd49b05f07346e3de97da31cb09\nauthor Aaron Hill <aa1ronham@gmail.com> 1596976961 -0400\ncommitter Aaron Hill <aa1ronham@gmail.com> 1596976991 -0400\n\nAdd comment about the lack of `ExpnData` serialization for proc-macro crates\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef49032297b90e7010b08db04d569dd8a5f0a8f2", "html_url": "https://github.com/rust-lang/rust/commit/ef49032297b90e7010b08db04d569dd8a5f0a8f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef49032297b90e7010b08db04d569dd8a5f0a8f2/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "955aebf529787fd49b05f07346e3de97da31cb09", "url": "https://api.github.com/repos/rust-lang/rust/commits/955aebf529787fd49b05f07346e3de97da31cb09", "html_url": "https://github.com/rust-lang/rust/commit/955aebf529787fd49b05f07346e3de97da31cb09"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "6872693a66cb84f2d5b696a623f12406839874ff", "filename": "src/librustc_metadata/rmeta/encoder.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ef49032297b90e7010b08db04d569dd8a5f0a8f2/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef49032297b90e7010b08db04d569dd8a5f0a8f2/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs?ref=ef49032297b90e7010b08db04d569dd8a5f0a8f2", "patch": "@@ -280,6 +280,10 @@ impl<'a, 'tcx> SpecializedEncoder<Span> for EncodeContext<'a, 'tcx> {\n         // cross-crate inconsistencies (getting one behavior in the same\n         // crate, and a different behavior in another crate) due to the\n         // limited surface that proc-macros can expose.\n+        //\n+        // IMPORTANT: If this is ever changed, be sure to update\n+        // `rustc_span::hygiene::raw_encode_expn_id` to handle\n+        // encoding `ExpnData` for proc-macro crates.\n         if self.is_proc_macro {\n             SyntaxContext::root().encode(self)?;\n         } else {"}, {"sha": "74dc904b6e614b3df65fec50fa932801917d4de8", "filename": "src/librustc_span/hygiene.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ef49032297b90e7010b08db04d569dd8a5f0a8f2/src%2Flibrustc_span%2Fhygiene.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef49032297b90e7010b08db04d569dd8a5f0a8f2/src%2Flibrustc_span%2Fhygiene.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_span%2Fhygiene.rs?ref=ef49032297b90e7010b08db04d569dd8a5f0a8f2", "patch": "@@ -1188,6 +1188,9 @@ pub fn raw_encode_expn_id<E: Encoder>(\n             let data = expn.expn_data();\n             // We only need to serialize the ExpnData\n             // if it comes from this crate.\n+            // We currently don't serialize any hygiene information data for\n+            // proc-macro crates: see the `SpecializedEncoder<Span>` impl\n+            // for crate metadata.\n             if data.krate == LOCAL_CRATE {\n                 needs_data();\n             }"}]}