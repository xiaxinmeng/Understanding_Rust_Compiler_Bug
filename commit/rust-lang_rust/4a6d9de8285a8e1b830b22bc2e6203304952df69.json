{"sha": "4a6d9de8285a8e1b830b22bc2e6203304952df69", "node_id": "C_kwDOAAsO6NoAKDRhNmQ5ZGU4Mjg1YThlMWI4MzBiMjJiYzJlNjIwMzMwNDk1MmRmNjk", "commit": {"author": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2023-01-14T14:15:40Z"}, "committer": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2023-01-17T07:48:20Z"}, "message": "Untouch back perf sensetive code :sweat_smile:", "tree": {"sha": "ba2f131f5972943efee815405f852fe258718088", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ba2f131f5972943efee815405f852fe258718088"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a6d9de8285a8e1b830b22bc2e6203304952df69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a6d9de8285a8e1b830b22bc2e6203304952df69", "html_url": "https://github.com/rust-lang/rust/commit/4a6d9de8285a8e1b830b22bc2e6203304952df69", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a6d9de8285a8e1b830b22bc2e6203304952df69/comments", "author": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c21b1f742ec403a24acc39f1c8623e1354da85c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c21b1f742ec403a24acc39f1c8623e1354da85c7", "html_url": "https://github.com/rust-lang/rust/commit/c21b1f742ec403a24acc39f1c8623e1354da85c7"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "76a755ed9e09d4a1da7070064fba845301c5d12a", "filename": "compiler/rustc_trait_selection/src/traits/fulfill.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4a6d9de8285a8e1b830b22bc2e6203304952df69/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a6d9de8285a8e1b830b22bc2e6203304952df69/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs?ref=4a6d9de8285a8e1b830b22bc2e6203304952df69", "patch": "@@ -208,12 +208,14 @@ impl<'a, 'tcx> ObligationProcessor for FulfillProcessor<'a, 'tcx> {\n             _ => {\n                 // This `for` loop was once a call to `all()`, but this lower-level\n                 // form was a perf win. See #64545 for details.\n-                for &infer_var in &pending_obligation.stalled_on {\n-                    if self.selcx.infcx.ty_or_const_infer_var_changed(infer_var) {\n-                        return true;\n+                (|| {\n+                    for &infer_var in &pending_obligation.stalled_on {\n+                        if self.selcx.infcx.ty_or_const_infer_var_changed(infer_var) {\n+                            return true;\n+                        }\n                     }\n-                }\n-                false\n+                    false\n+                })()\n             }\n         }\n     }"}]}