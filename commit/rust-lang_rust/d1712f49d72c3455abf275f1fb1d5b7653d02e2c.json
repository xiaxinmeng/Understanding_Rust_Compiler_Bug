{"sha": "d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "node_id": "C_kwDOAAsO6NoAKGQxNzEyZjQ5ZDcyYzM0NTVhYmYyNzVmMWZiMWQ1Yjc2NTNkMDJlMmM", "commit": {"author": {"name": "Gus Caplan", "email": "me@gus.host", "date": "2023-03-06T02:55:30Z"}, "committer": {"name": "Gus Caplan", "email": "me@gus.host", "date": "2023-03-18T03:59:28Z"}, "message": "move default backtrace setting to sys", "tree": {"sha": "0ac0279257e0af3d75c0e0ade3626e98c0b2225c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0ac0279257e0af3d75c0e0ade3626e98c0b2225c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "html_url": "https://github.com/rust-lang/rust/commit/d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/comments", "author": {"login": "devsnek", "id": 5952481, "node_id": "MDQ6VXNlcjU5NTI0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/5952481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devsnek", "html_url": "https://github.com/devsnek", "followers_url": "https://api.github.com/users/devsnek/followers", "following_url": "https://api.github.com/users/devsnek/following{/other_user}", "gists_url": "https://api.github.com/users/devsnek/gists{/gist_id}", "starred_url": "https://api.github.com/users/devsnek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devsnek/subscriptions", "organizations_url": "https://api.github.com/users/devsnek/orgs", "repos_url": "https://api.github.com/users/devsnek/repos", "events_url": "https://api.github.com/users/devsnek/events{/privacy}", "received_events_url": "https://api.github.com/users/devsnek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "devsnek", "id": 5952481, "node_id": "MDQ6VXNlcjU5NTI0ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/5952481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/devsnek", "html_url": "https://github.com/devsnek", "followers_url": "https://api.github.com/users/devsnek/followers", "following_url": "https://api.github.com/users/devsnek/following{/other_user}", "gists_url": "https://api.github.com/users/devsnek/gists{/gist_id}", "starred_url": "https://api.github.com/users/devsnek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/devsnek/subscriptions", "organizations_url": "https://api.github.com/users/devsnek/orgs", "repos_url": "https://api.github.com/users/devsnek/repos", "events_url": "https://api.github.com/users/devsnek/events{/privacy}", "received_events_url": "https://api.github.com/users/devsnek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "13afbdaa0655dda23d7129e59ac48f1ec88b2084", "url": "https://api.github.com/repos/rust-lang/rust/commits/13afbdaa0655dda23d7129e59ac48f1ec88b2084", "html_url": "https://github.com/rust-lang/rust/commit/13afbdaa0655dda23d7129e59ac48f1ec88b2084"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "c827205f80bd719bd907a76dd35f097a61983ec4", "filename": "library/std/src/panic.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/library%2Fstd%2Fsrc%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/library%2Fstd%2Fsrc%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpanic.rs?ref=d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "patch": "@@ -308,8 +308,7 @@ pub fn get_backtrace_style() -> Option<BacktraceStyle> {\n                 BacktraceStyle::Short\n             }\n         })\n-        .unwrap_or(if cfg!(target_os = \"fuchsia\") {\n-            // Fuchsia components default to full backtrace.\n+        .unwrap_or(if crate::sys::BACKTRACE_DEFAULT {\n             BacktraceStyle::Full\n         } else {\n             BacktraceStyle::Off"}, {"sha": "3864a5195f34be10841c5fb56bc47bc820431090", "filename": "library/std/src/sys/mod.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs?ref=d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "patch": "@@ -76,3 +76,12 @@ cfg_if::cfg_if! {\n         pub mod c;\n     }\n }\n+\n+cfg_if::cfg_if! {\n+    // Fuchsia components default to full backtrace.\n+    if #[cfg(target_os = \"fuchsia\")] {\n+        pub const BACKTRACE_DEFAULT: bool = true;\n+    } else {\n+        pub const BACKTRACE_DEFAULT: bool = false;\n+    }\n+}"}, {"sha": "6b7b27fd526c3caf88a2e0b3b5ce05b9a686eab9", "filename": "src/tools/tidy/src/pal.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/src%2Ftools%2Ftidy%2Fsrc%2Fpal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1712f49d72c3455abf275f1fb1d5b7653d02e2c/src%2Ftools%2Ftidy%2Fsrc%2Fpal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fpal.rs?ref=d1712f49d72c3455abf275f1fb1d5b7653d02e2c", "patch": "@@ -59,7 +59,6 @@ const EXCEPTION_PATHS: &[&str] = &[\n     \"library/std/src/path.rs\",\n     \"library/std/src/sys_common\", // Should only contain abstractions over platforms\n     \"library/std/src/net/test.rs\", // Utility helpers for tests\n-    \"library/std/src/panic.rs\",   // fuchsia-specific panic backtrace handling\n     \"library/std/src/personality.rs\",\n     \"library/std/src/personality/\",\n ];"}]}