{"sha": "3ff0a33a8343f8f9fe494d161b451d82889b6232", "node_id": "C_kwDOAAsO6NoAKDNmZjBhMzNhODM0M2Y4ZjlmZTQ5NGQxNjFiNDUxZDgyODg5YjYyMzI", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-10-21T10:18:33Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-10-21T10:18:33Z"}, "message": "WinConsole::new is not actually fallible", "tree": {"sha": "abcf0e47f166485bd8fdf64d1b08e4919227dda4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/abcf0e47f166485bd8fdf64d1b08e4919227dda4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ff0a33a8343f8f9fe494d161b451d82889b6232", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ff0a33a8343f8f9fe494d161b451d82889b6232", "html_url": "https://github.com/rust-lang/rust/commit/3ff0a33a8343f8f9fe494d161b451d82889b6232", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ff0a33a8343f8f9fe494d161b451d82889b6232/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1ab3b738ac718da74cd4aa0bb7f362d0adbdf84", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1ab3b738ac718da74cd4aa0bb7f362d0adbdf84", "html_url": "https://github.com/rust-lang/rust/commit/b1ab3b738ac718da74cd4aa0bb7f362d0adbdf84"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "a14b0d4f5a96233b18b1e1fe55700dcd41866a86", "filename": "library/test/src/term.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3ff0a33a8343f8f9fe494d161b451d82889b6232/library%2Ftest%2Fsrc%2Fterm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ff0a33a8343f8f9fe494d161b451d82889b6232/library%2Ftest%2Fsrc%2Fterm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fterm.rs?ref=3ff0a33a8343f8f9fe494d161b451d82889b6232", "patch": "@@ -39,7 +39,7 @@ pub(crate) fn stdout() -> Option<Box<StdoutTerminal>> {\n pub(crate) fn stdout() -> Option<Box<StdoutTerminal>> {\n     TerminfoTerminal::new(io::stdout())\n         .map(|t| Box::new(t) as Box<StdoutTerminal>)\n-        .or_else(|| WinConsole::new(io::stdout()).ok().map(|t| Box::new(t) as Box<StdoutTerminal>))\n+        .or_else(|| Some(Box::new(WinConsole::new(io::stdout())) as Box<StdoutTerminal>))\n }\n \n /// Terminal color definitions"}, {"sha": "55020141a827db9481a720c80df7e3a6ccd0c267", "filename": "library/test/src/term/win.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3ff0a33a8343f8f9fe494d161b451d82889b6232/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ff0a33a8343f8f9fe494d161b451d82889b6232/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fterm%2Fwin.rs?ref=3ff0a33a8343f8f9fe494d161b451d82889b6232", "patch": "@@ -113,8 +113,7 @@ impl<T: Write + Send + 'static> WinConsole<T> {\n         }\n     }\n \n-    /// Returns `None` whenever the terminal cannot be created for some reason.\n-    pub(crate) fn new(out: T) -> io::Result<WinConsole<T>> {\n+    pub(crate) fn new(out: T) -> WinConsole<T> {\n         use std::mem::MaybeUninit;\n \n         let fg;\n@@ -132,13 +131,13 @@ impl<T: Write + Send + 'static> WinConsole<T> {\n                 bg = color::BLACK;\n             }\n         }\n-        Ok(WinConsole {\n+        WinConsole {\n             buf: out,\n             def_foreground: fg,\n             def_background: bg,\n             foreground: fg,\n             background: bg,\n-        })\n+        }\n     }\n }\n "}]}