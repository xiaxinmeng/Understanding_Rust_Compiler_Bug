{"sha": "0a351abf83f1d146e2d259d404fb16a158721391", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhMzUxYWJmODNmMWQxNDZlMmQyNTlkNDA0ZmIxNmExNTg3MjEzOTE=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-04-05T12:38:09Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-04-05T12:38:09Z"}, "message": "Document compiler/ with -Aprivate-intra-doc-links\n\nSince compiler/ always passes --document-private-items, it's ok to link\nto items that are private.", "tree": {"sha": "e89437c19a0c10c0bf47c58485abcf1de6cdbdf7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e89437c19a0c10c0bf47c58485abcf1de6cdbdf7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a351abf83f1d146e2d259d404fb16a158721391", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a351abf83f1d146e2d259d404fb16a158721391", "html_url": "https://github.com/rust-lang/rust/commit/0a351abf83f1d146e2d259d404fb16a158721391", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a351abf83f1d146e2d259d404fb16a158721391/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58e71896506edb701f276158bd2f47e8788a1133", "url": "https://api.github.com/repos/rust-lang/rust/commits/58e71896506edb701f276158bd2f47e8788a1133", "html_url": "https://github.com/rust-lang/rust/commit/58e71896506edb701f276158bd2f47e8788a1133"}], "stats": {"total": 11, "additions": 2, "deletions": 9}, "files": [{"sha": "282877d5dd10962f9c7be3e66e0e96189d9529fc", "filename": "compiler/rustc_errors/src/diagnostic_builder.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/0a351abf83f1d146e2d259d404fb16a158721391/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a351abf83f1d146e2d259d404fb16a158721391/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic_builder.rs?ref=0a351abf83f1d146e2d259d404fb16a158721391", "patch": "@@ -45,9 +45,6 @@ macro_rules! forward {\n         pub fn $n:ident(&self, $($name:ident: $ty:ty),* $(,)?) -> &Self\n     ) => {\n         $(#[$attrs])*\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n         pub fn $n(&self, $($name: $ty),*) -> &Self {\n             self.diagnostic.$n($($name),*);\n@@ -62,9 +59,6 @@ macro_rules! forward {\n     ) => {\n         $(#[$attrs])*\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         pub fn $n(&mut self, $($name: $ty),*) -> &mut Self {\n             self.0.diagnostic.$n($($name),*);\n             self\n@@ -82,9 +76,6 @@ macro_rules! forward {\n     ) => {\n         $(#[$attrs])*\n         #[doc = concat!(\"See [`Diagnostic::\", stringify!($n), \"()`].\")]\n-        // we always document with --document-private-items\n-        #[cfg_attr(not(bootstrap), allow(rustdoc::private_intra_doc_links))]\n-        #[cfg_attr(bootstrap, allow(private_intra_doc_links))]\n         pub fn $n<$($generic: $bound),*>(&mut self, $($name: $ty),*) -> &mut Self {\n             self.0.diagnostic.$n($($name),*);\n             self"}, {"sha": "f499f1a684d1d56a7d5cd370265dbd7b1db6273d", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0a351abf83f1d146e2d259d404fb16a158721391/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a351abf83f1d146e2d259d404fb16a158721391/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=0a351abf83f1d146e2d259d404fb16a158721391", "patch": "@@ -549,6 +549,8 @@ impl Step for Rustc {\n         // Build cargo command.\n         let mut cargo = builder.cargo(compiler, Mode::Rustc, SourceType::InTree, target, \"doc\");\n         cargo.rustdocflag(\"--document-private-items\");\n+        // Since we always pass --document-private-items, there's no need to warn about linking to private items.\n+        cargo.rustdocflag(\"-Arustdoc::private-intra-doc-links\");\n         cargo.rustdocflag(\"--enable-index-page\");\n         cargo.rustdocflag(\"-Zunstable-options\");\n         cargo.rustdocflag(\"-Znormalize-docs\");"}]}