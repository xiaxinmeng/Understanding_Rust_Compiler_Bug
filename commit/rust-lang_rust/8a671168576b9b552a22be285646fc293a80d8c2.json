{"sha": "8a671168576b9b552a22be285646fc293a80d8c2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhhNjcxMTY4NTc2YjliNTUyYTIyYmUyODU2NDZmYzI5M2E4MGQ4YzI=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-03-21T11:38:21Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-03-21T11:38:21Z"}, "message": "use strip_prefix() instead of starts_with and slicing (clippy::manual_strip)", "tree": {"sha": "4c2a4f07acfc73de24e9ab1ce16ce7b556c6b6d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c2a4f07acfc73de24e9ab1ce16ce7b556c6b6d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8a671168576b9b552a22be285646fc293a80d8c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8a671168576b9b552a22be285646fc293a80d8c2", "html_url": "https://github.com/rust-lang/rust/commit/8a671168576b9b552a22be285646fc293a80d8c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8a671168576b9b552a22be285646fc293a80d8c2/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d9b3a8575ef3cb557fd847b941000df3b2db670", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d9b3a8575ef3cb557fd847b941000df3b2db670", "html_url": "https://github.com/rust-lang/rust/commit/3d9b3a8575ef3cb557fd847b941000df3b2db670"}], "stats": {"total": 22, "additions": 9, "deletions": 13}, "files": [{"sha": "0aeea48d5061b9c00bfcdf139a187be8bb10a015", "filename": "crates/hir_expand/src/name.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8a671168576b9b552a22be285646fc293a80d8c2/crates%2Fhir_expand%2Fsrc%2Fname.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a671168576b9b552a22be285646fc293a80d8c2/crates%2Fhir_expand%2Fsrc%2Fname.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_expand%2Fsrc%2Fname.rs?ref=8a671168576b9b552a22be285646fc293a80d8c2", "patch": "@@ -48,9 +48,8 @@ impl Name {\n \n     /// Resolve a name from the text of token.\n     fn resolve(raw_text: &str) -> Name {\n-        let raw_start = \"r#\";\n-        if raw_text.starts_with(raw_start) {\n-            Name::new_text(SmolStr::new(&raw_text[raw_start.len()..]))\n+        if let Some(text) = raw_text.strip_prefix(\"r#\") {\n+            Name::new_text(SmolStr::new(text))\n         } else {\n             Name::new_text(raw_text.into())\n         }"}, {"sha": "80be8b79c6e25b539689fcacefde1b797eac0f16", "filename": "crates/syntax/src/ast/edit.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8a671168576b9b552a22be285646fc293a80d8c2/crates%2Fsyntax%2Fsrc%2Fast%2Fedit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a671168576b9b552a22be285646fc293a80d8c2/crates%2Fsyntax%2Fsrc%2Fast%2Fedit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Fedit.rs?ref=8a671168576b9b552a22be285646fc293a80d8c2", "patch": "@@ -333,8 +333,7 @@ impl ast::Use {\n             .and_then(ast::Whitespace::cast);\n         if let Some(next_ws) = next_ws {\n             let ws_text = next_ws.syntax().text();\n-            if ws_text.starts_with('\\n') {\n-                let rest = &ws_text[1..];\n+            if let Some(rest) = ws_text.strip_prefix('\\n') {\n                 if rest.is_empty() {\n                     res.delete(next_ws.syntax())\n                 } else {"}, {"sha": "c91716409eb51825381a2e45c0baa0d6db9806e7", "filename": "xtask/src/codegen/gen_assists_docs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8a671168576b9b552a22be285646fc293a80d8c2/xtask%2Fsrc%2Fcodegen%2Fgen_assists_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a671168576b9b552a22be285646fc293a80d8c2/xtask%2Fsrc%2Fcodegen%2Fgen_assists_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fcodegen%2Fgen_assists_docs.rs?ref=8a671168576b9b552a22be285646fc293a80d8c2", "patch": "@@ -154,8 +154,8 @@ fn hide_hash_comments(text: &str) -> String {\n fn reveal_hash_comments(text: &str) -> String {\n     text.split('\\n') // want final newline\n         .map(|it| {\n-            if it.starts_with(\"# \") {\n-                &it[2..]\n+            if let Some(stripped) = it.strip_prefix(\"# \") {\n+                stripped\n             } else if it == \"#\" {\n                 \"\"\n             } else {"}, {"sha": "2fecb9b5bd8a8eaa275f05686e3fedd104717d10", "filename": "xtask/src/codegen/gen_parser_tests.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8a671168576b9b552a22be285646fc293a80d8c2/xtask%2Fsrc%2Fcodegen%2Fgen_parser_tests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a671168576b9b552a22be285646fc293a80d8c2/xtask%2Fsrc%2Fcodegen%2Fgen_parser_tests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fcodegen%2Fgen_parser_tests.rs?ref=8a671168576b9b552a22be285646fc293a80d8c2", "patch": "@@ -60,12 +60,10 @@ fn collect_tests(s: &str) -> Vec<Test> {\n     let mut res = Vec::new();\n     for comment_block in extract_comment_blocks(s) {\n         let first_line = &comment_block[0];\n-        let (name, ok) = if first_line.starts_with(\"test \") {\n-            let name = first_line[\"test \".len()..].to_string();\n-            (name, true)\n-        } else if first_line.starts_with(\"test_err \") {\n-            let name = first_line[\"test_err \".len()..].to_string();\n-            (name, false)\n+        let (name, ok) = if let Some(name) = first_line.strip_prefix(\"test \") {\n+            (name.to_string(), true)\n+        } else if let Some(name) = first_line.strip_prefix(\"test_err \") {\n+            (name.to_string(), false)\n         } else {\n             continue;\n         };"}]}