{"sha": "f0820662c9bdc3d3150b7b7317bb165556c2348b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwODIwNjYyYzliZGMzZDMxNTBiN2I3MzE3YmIxNjU1NTZjMjM0OGI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-26T20:58:19Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-26T20:58:19Z"}, "message": "Revert \"Add rustc::middle::cstrcache for getting c string bufs safely\"\n\nThis reverts commit 4e136d1fd9bd5536d441c062d41e7b71b375a942.", "tree": {"sha": "18eceb8e9ba0ee2b3101faa6685c62465182fa14", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18eceb8e9ba0ee2b3101faa6685c62465182fa14"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f0820662c9bdc3d3150b7b7317bb165556c2348b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f0820662c9bdc3d3150b7b7317bb165556c2348b", "html_url": "https://github.com/rust-lang/rust/commit/f0820662c9bdc3d3150b7b7317bb165556c2348b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f0820662c9bdc3d3150b7b7317bb165556c2348b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5173b1f2cc174d53272be0d14a8290c05b8670a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d5173b1f2cc174d53272be0d14a8290c05b8670a", "html_url": "https://github.com/rust-lang/rust/commit/d5173b1f2cc174d53272be0d14a8290c05b8670a"}], "stats": {"total": 30, "additions": 0, "deletions": 30}, "files": [{"sha": "0b0cd320578eaafa0b8b7a4c8fac5f360757e3c8", "filename": "src/comp/middle/cstrcache.rs", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/d5173b1f2cc174d53272be0d14a8290c05b8670a/src%2Fcomp%2Fmiddle%2Fcstrcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5173b1f2cc174d53272be0d14a8290c05b8670a/src%2Fcomp%2Fmiddle%2Fcstrcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fcstrcache.rs?ref=d5173b1f2cc174d53272be0d14a8290c05b8670a", "patch": "@@ -1,29 +0,0 @@\n-// Provides a safe way to get C pointers to strings, because in many\n-// places LLVM wants a string but doesn't take a copy.\n-\n-import std::str;\n-\n-export t;\n-export mk;\n-export get_cstr;\n-\n-type t_ = @{\n-    // This string is boxed so that I remember that it has to be boxed\n-    // after the ivec conversion.\n-    mutable cache: [@str]\n-};\n-\n-tag t {\n-    private(t_);\n-}\n-\n-fn mk() -> t {\n-    ret private(@{mutable cache: []});\n-}\n-\n-fn get_cstr(t: &t, s: &str) -> str::rustrt::sbuf {\n-    let boxed = @s;\n-    let buf = str::buf(*boxed);\n-    (*t).cache += [boxed];\n-    ret buf;\n-}\n\\ No newline at end of file"}, {"sha": "c9f0d2f067b9cb817ca6aaf37b14b9ced7986539", "filename": "src/comp/rustc.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f0820662c9bdc3d3150b7b7317bb165556c2348b/src%2Fcomp%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/f0820662c9bdc3d3150b7b7317bb165556c2348b/src%2Fcomp%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Frustc.rc?ref=f0820662c9bdc3d3150b7b7317bb165556c2348b", "patch": "@@ -30,7 +30,6 @@ mod middle {\n     mod freevars;\n     mod shape;\n     mod gc;\n-    mod cstrcache;\n \n     mod tstate {\n         mod ck;"}]}