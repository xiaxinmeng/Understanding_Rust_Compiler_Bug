{"sha": "2b70a3df7a73b283e7f19439a98c81bb66f6a852", "node_id": "C_kwDOAAsO6NoAKDJiNzBhM2RmN2E3M2IyODNlN2YxOTQzOWE5OGM4MWJiNjZmNmE4NTI", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2022-01-09T20:41:13Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2022-01-09T20:48:28Z"}, "message": "Display \"private fields\" instead of \"fields omitted\"\n\nAlso:\n\n  * Always use `/* */` block comments\n  * Use the same message everywhere, rather than sometimes prefixing\n    with \"some\"\n\nWhen I first read rustdoc docs, I was confused why the fields were being\nomitted. It was only later that I realized it was because they were\nprivate. It's also always bothered me that rustdoc sometimes uses `//`\nand sometimes uses `/*` comments for these messages, so this change\nmakes them all use `/*`.\n\nTechnically, I think fields can be omitted if they are public but\n`doc(hidden)` too, but `doc(hidden)` is analogous to privacy. It's\nreally just used to emulate \"doc privacy\" when -- because of technical\nlimitations -- an item has to be public. So I think it's fine to include\nthis under the category of \"private fields\".", "tree": {"sha": "89f65a2d149f930afd7ad72c48a65842e36846cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/89f65a2d149f930afd7ad72c48a65842e36846cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2b70a3df7a73b283e7f19439a98c81bb66f6a852", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2b70a3df7a73b283e7f19439a98c81bb66f6a852", "html_url": "https://github.com/rust-lang/rust/commit/2b70a3df7a73b283e7f19439a98c81bb66f6a852", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2b70a3df7a73b283e7f19439a98c81bb66f6a852/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "092e1c9d23158d81be27bb6f71bdd0c6282478fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/092e1c9d23158d81be27bb6f71bdd0c6282478fb", "html_url": "https://github.com/rust-lang/rust/commit/092e1c9d23158d81be27bb6f71bdd0c6282478fb"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "fb24f3286d71332bba4b208bd5327f06b7c0b1c3", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=2b70a3df7a73b283e7f19439a98c81bb66f6a852", "patch": "@@ -1557,7 +1557,7 @@ fn render_union(\n     }\n \n     if it.has_stripped_fields().unwrap() {\n-        write!(w, \"    // some fields omitted\\n{}\", tab);\n+        write!(w, \"    /* private fields */\\n{}\", tab);\n     }\n     if toggle {\n         toggle_close(w);\n@@ -1613,13 +1613,11 @@ fn render_struct(\n \n             if has_visible_fields {\n                 if it.has_stripped_fields().unwrap() {\n-                    write!(w, \"\\n{}    // some fields omitted\", tab);\n+                    write!(w, \"\\n{}    /* private fields */\", tab);\n                 }\n                 write!(w, \"\\n{}\", tab);\n             } else if it.has_stripped_fields().unwrap() {\n-                // If there are no visible fields we can just display\n-                // `{ /* fields omitted */ }` to save space.\n-                write!(w, \" /* fields omitted */ \");\n+                write!(w, \" /* private fields */ \");\n             }\n             if toggle {\n                 toggle_close(w);"}, {"sha": "7e1cada4b9828c939d892e9e56505e1a83b9fa67", "filename": "src/test/rustdoc/structfields.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Fstructfields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Fstructfields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fstructfields.rs?ref=2b70a3df7a73b283e7f19439a98c81bb66f6a852", "patch": "@@ -2,7 +2,7 @@\n pub struct Foo {\n     // @has - //pre \"pub a: ()\"\n     pub a: (),\n-    // @has - //pre \"// some fields omitted\"\n+    // @has - //pre \"/* private fields */\"\n     // @!has - //pre \"b: ()\"\n     b: (),\n     // @!has - //pre \"c: usize\"\n@@ -16,7 +16,7 @@ pub struct Foo {\n pub struct Bar {\n     // @has - //pre \"pub a: ()\"\n     pub a: (),\n-    // @!has - //pre \"// some fields omitted\"\n+    // @!has - //pre \"/* private fields */\"\n }\n \n // @has structfields/enum.Qux.html\n@@ -29,11 +29,11 @@ pub enum Qux {\n         b: (),\n         // @has - //pre \"c: usize\"\n         c: usize,\n-        // @has - //pre \"// some fields omitted\"\n+        // @has - //pre \"/* private fields */\"\n     },\n }\n \n-// @has structfields/struct.Baz.html //pre \"pub struct Baz { /* fields omitted */ }\"\n+// @has structfields/struct.Baz.html //pre \"pub struct Baz { /* private fields */ }\"\n pub struct Baz {\n     x: u8,\n     #[doc(hidden)]"}, {"sha": "c1df4613e3562ccd9dbc286bc2a098fcb8d36260", "filename": "src/test/rustdoc/toggle-item-contents.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs?ref=2b70a3df7a73b283e7f19439a98c81bb66f6a852", "patch": "@@ -55,7 +55,7 @@ pub union Union {\n \n // @has 'toggle_item_contents/struct.PrivStruct.html'\n // @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 0\n-// @has - '//div[@class=\"docblock item-decl\"]' 'fields omitted'\n+// @has - '//div[@class=\"docblock item-decl\"]' '/* private fields */'\n pub struct PrivStruct {\n     a: usize,\n     b: usize,"}, {"sha": "5a788eb1b1cae65bef324d681238905a357fa462", "filename": "src/test/rustdoc/union.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Funion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b70a3df7a73b283e7f19439a98c81bb66f6a852/src%2Ftest%2Frustdoc%2Funion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Funion.rs?ref=2b70a3df7a73b283e7f19439a98c81bb66f6a852", "patch": "@@ -2,7 +2,7 @@\n pub union U {\n     // @has - //pre \"pub a: u8\"\n     pub a: u8,\n-    // @has - //pre \"// some fields omitted\"\n+    // @has - //pre \"/* private fields */\"\n     // @!has - //pre \"b: u16\"\n     b: u16,\n }"}]}