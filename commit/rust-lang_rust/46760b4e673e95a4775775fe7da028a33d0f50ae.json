{"sha": "46760b4e673e95a4775775fe7da028a33d0f50ae", "node_id": "C_kwDOAAsO6NoAKDQ2NzYwYjRlNjczZTk1YTQ3NzU3NzVmZTdkYTAyOGEzM2QwZjUwYWU", "commit": {"author": {"name": "Eric Holk", "email": "ericholk@microsoft.com", "date": "2021-11-22T22:53:02Z"}, "committer": {"name": "Eric Holk", "email": "ericholk@microsoft.com", "date": "2022-01-18T22:25:27Z"}, "message": "Update async-fn-nonsend.stderr", "tree": {"sha": "0c2f06b1687430e01789d9c4473b076953e4e573", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c2f06b1687430e01789d9c4473b076953e4e573"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/46760b4e673e95a4775775fe7da028a33d0f50ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/46760b4e673e95a4775775fe7da028a33d0f50ae", "html_url": "https://github.com/rust-lang/rust/commit/46760b4e673e95a4775775fe7da028a33d0f50ae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/46760b4e673e95a4775775fe7da028a33d0f50ae/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5feb4d0106b1a7022f2fd4379a1a5abfc8926d99", "url": "https://api.github.com/repos/rust-lang/rust/commits/5feb4d0106b1a7022f2fd4379a1a5abfc8926d99", "html_url": "https://github.com/rust-lang/rust/commit/5feb4d0106b1a7022f2fd4379a1a5abfc8926d99"}], "stats": {"total": 35, "additions": 6, "deletions": 29}, "files": [{"sha": "abba5585c62ebc8e19ce8e55aeb4bba5e99af4f8", "filename": "src/test/ui/async-await/async-fn-nonsend.stderr", "status": "modified", "additions": 6, "deletions": 29, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/46760b4e673e95a4775775fe7da028a33d0f50ae/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-nonsend.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/46760b4e673e95a4775775fe7da028a33d0f50ae/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-nonsend.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-nonsend.stderr?ref=46760b4e673e95a4775775fe7da028a33d0f50ae", "patch": "@@ -1,28 +1,5 @@\n error: future cannot be sent between threads safely\n-  --> $DIR/async-fn-nonsend.rs:49:17\n-   |\n-LL |     assert_send(local_dropped_before_await());\n-   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `local_dropped_before_await` is not `Send`\n-   |\n-   = help: within `impl Future<Output = ()>`, the trait `Send` is not implemented for `Rc<()>`\n-note: future is not `Send` as this value is used across an await\n-  --> $DIR/async-fn-nonsend.rs:24:10\n-   |\n-LL |     let x = non_send();\n-   |         - has type `impl Debug` which is not `Send`\n-LL |     drop(x);\n-LL |     fut().await;\n-   |          ^^^^^^ await occurs here, with `x` maybe used later\n-LL | }\n-   | - `x` is later dropped here\n-note: required by a bound in `assert_send`\n-  --> $DIR/async-fn-nonsend.rs:46:24\n-   |\n-LL | fn assert_send(_: impl Send) {}\n-   |                        ^^^^ required by this bound in `assert_send`\n-\n-error: future cannot be sent between threads safely\n-  --> $DIR/async-fn-nonsend.rs:51:17\n+  --> $DIR/async-fn-nonsend.rs:50:17\n    |\n LL |     assert_send(non_send_temporary_in_match());\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `non_send_temporary_in_match` is not `Send`\n@@ -32,20 +9,20 @@ note: future is not `Send` as this value is used across an await\n   --> $DIR/async-fn-nonsend.rs:33:25\n    |\n LL |     match Some(non_send()) {\n-   |                ---------- has type `impl Debug` which is not `Send`\n+   |           ---------------- has type `Option<impl Debug>` which is not `Send`\n LL |         Some(_) => fut().await,\n-   |                         ^^^^^^ await occurs here, with `non_send()` maybe used later\n+   |                         ^^^^^^ await occurs here, with `Some(non_send())` maybe used later\n ...\n LL | }\n-   | - `non_send()` is later dropped here\n+   | - `Some(non_send())` is later dropped here\n note: required by a bound in `assert_send`\n   --> $DIR/async-fn-nonsend.rs:46:24\n    |\n LL | fn assert_send(_: impl Send) {}\n    |                        ^^^^ required by this bound in `assert_send`\n \n error: future cannot be sent between threads safely\n-  --> $DIR/async-fn-nonsend.rs:53:17\n+  --> $DIR/async-fn-nonsend.rs:52:17\n    |\n LL |     assert_send(non_sync_with_method_call());\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ future returned by `non_sync_with_method_call` is not `Send`\n@@ -68,5 +45,5 @@ note: required by a bound in `assert_send`\n LL | fn assert_send(_: impl Send) {}\n    |                        ^^^^ required by this bound in `assert_send`\n \n-error: aborting due to 3 previous errors\n+error: aborting due to 2 previous errors\n "}]}