{"sha": "913a623281ed4cd190ca04845c64e5054d176a2a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxM2E2MjMyODFlZDRjZDE5MGNhMDQ4NDVjNjRlNTA1NGQxNzZhMmE=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-06-05T07:56:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-05T07:56:11Z"}, "message": "Merge #4750\n\n4750: introduce_named_lifetime assist wasn't applicable when type parameter r=matklad a=jbalint\n\nfollowed anonymous lifetime token\r\n\r\n(fixes #4684)\n\nCo-authored-by: Jess Balint <jbalint@gmail.com>", "tree": {"sha": "846d8c77f0a9d1998b46c67d30a87923dc8a739e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/846d8c77f0a9d1998b46c67d30a87923dc8a739e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/913a623281ed4cd190ca04845c64e5054d176a2a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe2fqbCRBK7hj4Ov3rIwAAdHIIADezL1hVkzodKHiyX/mtnunn\nFIabFb1QlxE+j2O6hU7Tr+9Yo9PCLUHU8UVp0M/mqICigmj5OBQn8hsS0M6mxz2/\nDK/n4FrWewpKTPTumCS8BbA7a3JmjHisH0t3XPQ8fJTnR9Af1Oyil7LniVvWywA3\nCAXdm3KRIXd/PMLwhfFrIHUzCtJs/QYHgsR6UxF1UKWH41NwITOjfSjkDDqILGXR\nsbDsjzbtaTDzH0AQ49xpjBjS+KoIZnYAbyj4re+jTmsBPnt36UT/Tha/lngBWR+T\nMYrQZWDaQ+DFPOgcgsYYVX0jDLMjCsry/ftTohyRBK7mpVIsY3ynHjpXtr/Vx7k=\n=LLvz\n-----END PGP SIGNATURE-----\n", "payload": "tree 846d8c77f0a9d1998b46c67d30a87923dc8a739e\nparent e66c7b3a453e7b7385f103ae7f1f3f7438bdb31b\nparent 921306757baa636af7872b003d33dc1a8bd2b725\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1591343771 +0000\ncommitter GitHub <noreply@github.com> 1591343771 +0000\n\nMerge #4750\n\n4750: introduce_named_lifetime assist wasn't applicable when type parameter r=matklad a=jbalint\n\nfollowed anonymous lifetime token\r\n\r\n(fixes #4684)\n\nCo-authored-by: Jess Balint <jbalint@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/913a623281ed4cd190ca04845c64e5054d176a2a", "html_url": "https://github.com/rust-lang/rust/commit/913a623281ed4cd190ca04845c64e5054d176a2a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/913a623281ed4cd190ca04845c64e5054d176a2a/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e66c7b3a453e7b7385f103ae7f1f3f7438bdb31b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e66c7b3a453e7b7385f103ae7f1f3f7438bdb31b", "html_url": "https://github.com/rust-lang/rust/commit/e66c7b3a453e7b7385f103ae7f1f3f7438bdb31b"}, {"sha": "921306757baa636af7872b003d33dc1a8bd2b725", "url": "https://api.github.com/repos/rust-lang/rust/commits/921306757baa636af7872b003d33dc1a8bd2b725", "html_url": "https://github.com/rust-lang/rust/commit/921306757baa636af7872b003d33dc1a8bd2b725"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "28fcbc9ba62e55bd9c2b19a9b04d6fd534999040", "filename": "crates/ra_assists/src/handlers/introduce_named_lifetime.rs", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/913a623281ed4cd190ca04845c64e5054d176a2a/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fintroduce_named_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/913a623281ed4cd190ca04845c64e5054d176a2a/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fintroduce_named_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fintroduce_named_lifetime.rs?ref=913a623281ed4cd190ca04845c64e5054d176a2a", "patch": "@@ -41,8 +41,6 @@ pub(crate) fn introduce_named_lifetime(acc: &mut Assists, ctx: &AssistContext) -\n     if let Some(fn_def) = lifetime_token.ancestors().find_map(ast::FnDef::cast) {\n         generate_fn_def_assist(acc, &fn_def, lifetime_token.text_range())\n     } else if let Some(impl_def) = lifetime_token.ancestors().find_map(ast::ImplDef::cast) {\n-        // only allow naming the last anonymous lifetime\n-        lifetime_token.next_token().filter(|tok| tok.kind() == SyntaxKind::R_ANGLE)?;\n         generate_impl_def_assist(acc, &impl_def, lifetime_token.text_range())\n     } else {\n         None\n@@ -190,6 +188,23 @@ mod tests {\n         );\n     }\n \n+    #[test]\n+    fn test_impl_with_other_type_param() {\n+        check_assist(\n+            introduce_named_lifetime,\n+            \"impl<I> fmt::Display for SepByBuilder<'_<|>, I>\n+        where\n+            I: Iterator,\n+            I::Item: fmt::Display,\n+        {\",\n+            \"impl<I, 'a> fmt::Display for SepByBuilder<'a, I>\n+        where\n+            I: Iterator,\n+            I::Item: fmt::Display,\n+        {\",\n+        )\n+    }\n+\n     #[test]\n     fn test_example_case_cursor_before_tick() {\n         check_assist("}]}