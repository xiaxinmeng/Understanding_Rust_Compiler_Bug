{"sha": "35fd9a8e0ba7013cf95996bfc9221ebe91d3db75", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1ZmQ5YThlMGJhNzAxM2NmOTU5OTZiZmM5MjIxZWJlOTFkM2RiNzU=", "commit": {"author": {"name": "Pavan Kumar Sunkara", "email": "pavan.sss1991@gmail.com", "date": "2020-06-06T19:50:28Z"}, "committer": {"name": "Pavan Kumar Sunkara", "email": "pavan.sss1991@gmail.com", "date": "2020-08-24T11:07:17Z"}, "message": "Added weekly publish workflow", "tree": {"sha": "6fb3298c5447f6eb5ea4d97b39536f13e16e83b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fb3298c5447f6eb5ea4d97b39536f13e16e83b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75", "html_url": "https://github.com/rust-lang/rust/commit/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75/comments", "author": {"login": "pksunkara", "id": 174703, "node_id": "MDQ6VXNlcjE3NDcwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/174703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pksunkara", "html_url": "https://github.com/pksunkara", "followers_url": "https://api.github.com/users/pksunkara/followers", "following_url": "https://api.github.com/users/pksunkara/following{/other_user}", "gists_url": "https://api.github.com/users/pksunkara/gists{/gist_id}", "starred_url": "https://api.github.com/users/pksunkara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pksunkara/subscriptions", "organizations_url": "https://api.github.com/users/pksunkara/orgs", "repos_url": "https://api.github.com/users/pksunkara/repos", "events_url": "https://api.github.com/users/pksunkara/events{/privacy}", "received_events_url": "https://api.github.com/users/pksunkara/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pksunkara", "id": 174703, "node_id": "MDQ6VXNlcjE3NDcwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/174703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pksunkara", "html_url": "https://github.com/pksunkara", "followers_url": "https://api.github.com/users/pksunkara/followers", "following_url": "https://api.github.com/users/pksunkara/following{/other_user}", "gists_url": "https://api.github.com/users/pksunkara/gists{/gist_id}", "starred_url": "https://api.github.com/users/pksunkara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pksunkara/subscriptions", "organizations_url": "https://api.github.com/users/pksunkara/orgs", "repos_url": "https://api.github.com/users/pksunkara/repos", "events_url": "https://api.github.com/users/pksunkara/events{/privacy}", "received_events_url": "https://api.github.com/users/pksunkara/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8fa5cd42e3cfa131121a46b289ee919e495316e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a8fa5cd42e3cfa131121a46b289ee919e495316e", "html_url": "https://github.com/rust-lang/rust/commit/a8fa5cd42e3cfa131121a46b289ee919e495316e"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "be2c7a8ca0000fef9a0ec3420258b88db0402f53", "filename": ".github/workflows/publish.yml", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75/.github%2Fworkflows%2Fpublish.yml", "raw_url": "https://github.com/rust-lang/rust/raw/35fd9a8e0ba7013cf95996bfc9221ebe91d3db75/.github%2Fworkflows%2Fpublish.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fpublish.yml?ref=35fd9a8e0ba7013cf95996bfc9221ebe91d3db75", "patch": "@@ -0,0 +1,44 @@\n+name: publish\n+on:\n+  workflow_dispatch: # We can add version input when 1.0 is released and scheduled releases are removed\n+\n+  schedule:\n+    - cron: \"0 0 * * *\" # midnight UTC\n+\n+  push:\n+    branches:\n+      - release\n+\n+jobs:\n+  publish:\n+    name: publish\n+    runs-on: ubuntu-16.04\n+    steps:\n+      - name: Checkout repository\n+        uses: actions/checkout@v2\n+        with:\n+          fetch-depth: 0\n+\n+      - name: Install Rust toolchain\n+        uses: actions-rs/toolchain@v1\n+        with:\n+          toolchain: stable\n+          profile: minimal\n+          override: true\n+\n+      - name: Install cargo-workspaces\n+        uses: actions-rs/install@v0.1\n+        with:\n+          crate: cargo-workspaces\n+\n+      - name: Release\n+        env:\n+          CARGO_REGISTRY_TOKEN: ${{ secrets.CARGO_REGISTRY_TOKEN }}\n+          PATCH: ${{ github.run_number }}\n+        shell: bash\n+        run: |\n+          git config --global user.email \"runner@gha.local\"\n+          git config --global user.name \"Github Action\"\n+          rm Cargo.lock\n+          cargo workspaces rename ra_ap_%n\n+          cargo workspaces publish --yes --force '*' --exact --no-git-commit --allow-dirty --skip-published custom 0.0.$PATCH"}]}