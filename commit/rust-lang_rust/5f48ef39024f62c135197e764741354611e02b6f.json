{"sha": "5f48ef39024f62c135197e764741354611e02b6f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmNDhlZjM5MDI0ZjYyYzEzNTE5N2U3NjQ3NDEzNTQ2MTFlMDJiNmY=", "commit": {"author": {"name": "uHOOCCOOHu", "email": "hooccooh1896@gmail.com", "date": "2019-09-09T17:21:29Z"}, "committer": {"name": "uHOOCCOOHu", "email": "hooccooh1896@gmail.com", "date": "2019-09-09T17:21:29Z"}, "message": "Strip", "tree": {"sha": "8317f27e42132173d175770c818ba49a93a2cd7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8317f27e42132173d175770c818ba49a93a2cd7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f48ef39024f62c135197e764741354611e02b6f", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEXLDp5dXVcfV/VA/qztOS3gxIPQAFAl12ihkACgkQztOS3gxI\nPQBLNA/7Bvd6mOSCicENBToImsYsRUl7OJphYwbic198lgAsu8PU46LNLobQAzEr\nwjRW2d55LU/EtkGA6rcUhw+bPeK2ilz6AyB3kwiPPbF3SsIV4ozV4QA1LK74gEC5\nJfcJu9dh+ezE4J/14HwI9g+81uu3wPoxbcoKkD1x65r5OcIXjugBbyjDmhz3B5cH\nkQrQqAceaZUtOalRtRxIP9hQs0Up6kb4PKNXsRwfQS2vcvzyjLHwCHdGxlJ/rJ7d\ncwprilIFskP7t7tWQvxNaVLvfK0DAsxkshPBu/a8N/wJV3IyNpgg9PxfyW+z6e41\nJ/noDiRtYjSjRL1k0ke/6coktF887JVCFHXPCRLnqzdOgLFoGFEns2Lqa8xx7Gi4\nJr7oiTr2RIC5AODSPOzACRvlqpUj/brtVSx34ll13ziHaPBcaZC1XDd3z0UhTXZD\n+8uXubCOmxcF++HG0MjeK7EczpZJ/jJ2PItABJx4oIFhh70wdQVdoDZsaVg7tHCS\n+1F1+3496auupvduFyyLjZXNrSPgKh521axQGFZ3w1R+/zFjEN1OImE40T06AYrz\n4Lufh3BDfWOaO0NHnwT/br533cMvEp6q9W0RF7QYq13ck42/YFUi2laf0uydLwth\nCOrHkKc9I6+gjujE/8jXpK5kcyn4B+Wp30MdjmfVub+sr+/fUyY=\n=PeGV\n-----END PGP SIGNATURE-----", "payload": "tree 8317f27e42132173d175770c818ba49a93a2cd7f\nparent 40f91341595508833d39eb6d97e4ec2ac7f685cb\nauthor uHOOCCOOHu <hooccooh1896@gmail.com> 1568049689 +0800\ncommitter uHOOCCOOHu <hooccooh1896@gmail.com> 1568049689 +0800\n\nStrip\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f48ef39024f62c135197e764741354611e02b6f", "html_url": "https://github.com/rust-lang/rust/commit/5f48ef39024f62c135197e764741354611e02b6f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f48ef39024f62c135197e764741354611e02b6f/comments", "author": null, "committer": null, "parents": [{"sha": "40f91341595508833d39eb6d97e4ec2ac7f685cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/40f91341595508833d39eb6d97e4ec2ac7f685cb", "html_url": "https://github.com/rust-lang/rust/commit/40f91341595508833d39eb6d97e4ec2ac7f685cb"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "d07cc08f495c426675e0f7544f1aac6731792378", "filename": "crates/ra_hir/src/nameres/per_ns.rs", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5f48ef39024f62c135197e764741354611e02b6f/crates%2Fra_hir%2Fsrc%2Fnameres%2Fper_ns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f48ef39024f62c135197e764741354611e02b6f/crates%2Fra_hir%2Fsrc%2Fnameres%2Fper_ns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fnameres%2Fper_ns.rs?ref=5f48ef39024f62c135197e764741354611e02b6f", "patch": "@@ -4,7 +4,8 @@ use crate::MacroDef;\n pub enum Namespace {\n     Types,\n     Values,\n-    Macro,\n+    // Note that only type inference uses this enum, and it doesn't care about macros.\n+    // Macro,\n }\n \n #[derive(Debug, Copy, Clone, PartialEq, Eq, Hash)]\n@@ -79,14 +80,7 @@ impl<T> PerNs<T> {\n         }\n     }\n \n-    pub fn and_then<U>(self, f: impl Fn(T) -> Option<U>) -> PerNs<U> {\n-        PerNs {\n-            types: self.types.and_then(&f),\n-            values: self.values.and_then(&f),\n-            macros: self.macros,\n-        }\n-    }\n-\n+    /// Map types and values. Leave macros unchanged.\n     pub fn map<U>(self, f: impl Fn(T) -> U) -> PerNs<U> {\n         PerNs { types: self.types.map(&f), values: self.values.map(&f), macros: self.macros }\n     }"}, {"sha": "0612298423edfe5effa8117239f418b54a184e34", "filename": "crates/ra_hir/src/ty/lower.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5f48ef39024f62c135197e764741354611e02b6f/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5f48ef39024f62c135197e764741354611e02b6f/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Flower.rs?ref=5f48ef39024f62c135197e764741354611e02b6f", "patch": "@@ -429,9 +429,6 @@ pub(crate) fn type_for_def(db: &impl HirDatabase, def: TypableDef, ns: Namespace\n         (TypableDef::Const(_), Namespace::Types) => Ty::Unknown,\n         (TypableDef::Static(_), Namespace::Types) => Ty::Unknown,\n         (TypableDef::BuiltinType(_), Namespace::Values) => Ty::Unknown,\n-\n-        // Macro is not typeable\n-        (_, Namespace::Macro) => Ty::Unknown,\n     }\n }\n "}]}