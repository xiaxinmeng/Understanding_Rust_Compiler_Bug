{"sha": "1c6593c473f2cd67a1199dac89fb0e6a811d26ab", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjNjU5M2M0NzNmMmNkNjdhMTE5OWRhYzg5ZmIwZTZhODExZDI2YWI=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-01-05T00:52:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-05T00:52:40Z"}, "message": "Rollup merge of #80627 - bugadani:warn, r=Mark-Simulacrum\n\nBuilder: Warn if test file does not exist\n\nRunning `./x.py test` with a file that does not exists (but where the path belongs to a test suite) silently ignores the missing file and runs the whole test suite. This PR prints a warning to reduce the potential surprise factor.\n\nCloses #80621", "tree": {"sha": "82a957fdd9ad11275101a095344aa86da1321dc9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/82a957fdd9ad11275101a095344aa86da1321dc9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c6593c473f2cd67a1199dac89fb0e6a811d26ab", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf87hYCRBK7hj4Ov3rIwAAdHIIAAENJ1Q14q77t4qKH10dtyjR\nMsD4mvtqCJAkJpLC5Cs266gVxNzVvvvHUjIQm8v1EckvEoEZ/FnIbNbvG4fdMJ6M\n6VEe7akQsgvHvpmUKU/RjNW7Ox92WNFoC4yvcskBAs1thRODFZmXYvbVEKz+EZsC\nepVOJl3TMXjHyBwDjjBt4aHMxZQuptWntDUJLjVKd4dA0UrBUGrb5GrZgP4R3TQl\nPfc2VfVBthGArZ6WkcJH+IeDU1omCACwBY4PMVK02vuc5xXWQs5w8QNNBWjBc/jy\neaszc9HoeeJ8Hqsi/oZHQlqhTSklL6bJTBrxJZnvJkdmIAaQHPBD/8PZU4nJOtA=\n=b1CA\n-----END PGP SIGNATURE-----\n", "payload": "tree 82a957fdd9ad11275101a095344aa86da1321dc9\nparent d85c2fe1281fabc0cf437007e408c3231baa458b\nparent 6002e78392541b61055f1fd32cbf310ac4409a88\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1609807960 +0900\ncommitter GitHub <noreply@github.com> 1609807960 +0900\n\nRollup merge of #80627 - bugadani:warn, r=Mark-Simulacrum\n\nBuilder: Warn if test file does not exist\n\nRunning `./x.py test` with a file that does not exists (but where the path belongs to a test suite) silently ignores the missing file and runs the whole test suite. This PR prints a warning to reduce the potential surprise factor.\n\nCloses #80621\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c6593c473f2cd67a1199dac89fb0e6a811d26ab", "html_url": "https://github.com/rust-lang/rust/commit/1c6593c473f2cd67a1199dac89fb0e6a811d26ab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c6593c473f2cd67a1199dac89fb0e6a811d26ab/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d85c2fe1281fabc0cf437007e408c3231baa458b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d85c2fe1281fabc0cf437007e408c3231baa458b", "html_url": "https://github.com/rust-lang/rust/commit/d85c2fe1281fabc0cf437007e408c3231baa458b"}, {"sha": "6002e78392541b61055f1fd32cbf310ac4409a88", "url": "https://api.github.com/repos/rust-lang/rust/commits/6002e78392541b61055f1fd32cbf310ac4409a88", "html_url": "https://github.com/rust-lang/rust/commit/6002e78392541b61055f1fd32cbf310ac4409a88"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "2e8c574044ed9ebeb4250497df46568121812ba4", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/1c6593c473f2cd67a1199dac89fb0e6a811d26ab/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c6593c473f2cd67a1199dac89fb0e6a811d26ab/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=1c6593c473f2cd67a1199dac89fb0e6a811d26ab", "patch": "@@ -1126,7 +1126,19 @@ note: if you're sure you want to do this, please open an issue as to why. In the\n                 Ok(path) => path,\n                 Err(_) => p,\n             })\n-            .filter(|p| p.starts_with(suite_path) && (p.is_dir() || p.is_file()))\n+            .filter(|p| p.starts_with(suite_path))\n+            .filter(|p| {\n+                let exists = p.is_dir() || p.is_file();\n+                if !exists {\n+                    if let Some(p) = p.to_str() {\n+                        builder.info(&format!(\n+                            \"Warning: Skipping \\\"{}\\\": not a regular file or directory\",\n+                            p\n+                        ));\n+                    }\n+                }\n+                exists\n+            })\n             .filter_map(|p| {\n                 // Since test suite paths are themselves directories, if we don't\n                 // specify a directory or file, we'll get an empty string here"}]}