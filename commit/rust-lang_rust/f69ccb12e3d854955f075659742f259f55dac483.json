{"sha": "f69ccb12e3d854955f075659742f259f55dac483", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2OWNjYjEyZTNkODU0OTU1ZjA3NTY1OTc0MmYyNTlmNTVkYWM0ODM=", "commit": {"author": {"name": "Jack Huey", "email": "31162821+jackh726@users.noreply.github.com", "date": "2021-09-08T16:24:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-09-08T16:24:19Z"}, "message": "Rollup merge of #88691 - hyd-dev:88649, r=Mark-Simulacrum\n\nAdd a regression test for #88649\n\nI noticed that #88649 does not have a regression test, so I add one in this PR.\n\nThe test fails with this without #88678:\n```\nerror[E0080]: evaluation of constant value failed\n  --> /checkout/src/test/ui/consts/issue-88649.rs:13:52\n   |\nLL |             Foo::Variant1(x) | Foo::Variant2(x) if x => {}\n   |                                                    ^ StorageLive on a local that was already live\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0080`.\n```", "tree": {"sha": "6cb4635c43cf1482824f80011bded1a44c8c14e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6cb4635c43cf1482824f80011bded1a44c8c14e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f69ccb12e3d854955f075659742f259f55dac483", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhOOO0CRBK7hj4Ov3rIwAACykIADc6BKv82vHxl+/lBuNKS3Zw\n1B3A8ylcPAk+xldPYLc3bzO5e1s+KavvHuv6w08w2lDKvmDCVMti2nMx9FMu0iwt\nKrRfkwXUb8buqdYxJkL2KaKvIDFSyyjZAgHcK/xJKy95O/L6ho6zQJ0lynmZ89kc\nOV3MeOUhMy25ljDF8slzgAQ0tMTErunEyROCkRwgmwudNPdx7gecPWgvnj0pMqOy\nlZAh7P6r2KUKdPCb/o9hIwojgE1AV1vIswK//Crh5YThU4VSyBoAzpNY8k8rS83p\n4O5VIbtrDa3OslKEAGyIzZV/vG8Wt2fCcymj919mRt8eMKECaG4kgFVgx+CMFDE=\n=ix0X\n-----END PGP SIGNATURE-----\n", "payload": "tree 6cb4635c43cf1482824f80011bded1a44c8c14e9\nparent 2bbcf929c6cce88ae4b5be95dcf8d1e6aa25e7cf\nparent 214eef043501a896ec375fc831891cf1dc09219f\nauthor Jack Huey <31162821+jackh726@users.noreply.github.com> 1631118259 -0400\ncommitter GitHub <noreply@github.com> 1631118259 -0400\n\nRollup merge of #88691 - hyd-dev:88649, r=Mark-Simulacrum\n\nAdd a regression test for #88649\n\nI noticed that #88649 does not have a regression test, so I add one in this PR.\n\nThe test fails with this without #88678:\n```\nerror[E0080]: evaluation of constant value failed\n  --> /checkout/src/test/ui/consts/issue-88649.rs:13:52\n   |\nLL |             Foo::Variant1(x) | Foo::Variant2(x) if x => {}\n   |                                                    ^ StorageLive on a local that was already live\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0080`.\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f69ccb12e3d854955f075659742f259f55dac483", "html_url": "https://github.com/rust-lang/rust/commit/f69ccb12e3d854955f075659742f259f55dac483", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f69ccb12e3d854955f075659742f259f55dac483/comments", "author": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2bbcf929c6cce88ae4b5be95dcf8d1e6aa25e7cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/2bbcf929c6cce88ae4b5be95dcf8d1e6aa25e7cf", "html_url": "https://github.com/rust-lang/rust/commit/2bbcf929c6cce88ae4b5be95dcf8d1e6aa25e7cf"}, {"sha": "214eef043501a896ec375fc831891cf1dc09219f", "url": "https://api.github.com/repos/rust-lang/rust/commits/214eef043501a896ec375fc831891cf1dc09219f", "html_url": "https://github.com/rust-lang/rust/commit/214eef043501a896ec375fc831891cf1dc09219f"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "43e562b5a7da4b96c83b6793f1d2db9745fdf0d7", "filename": "src/test/ui/consts/issue-88649.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/f69ccb12e3d854955f075659742f259f55dac483/src%2Ftest%2Fui%2Fconsts%2Fissue-88649.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f69ccb12e3d854955f075659742f259f55dac483/src%2Ftest%2Fui%2Fconsts%2Fissue-88649.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-88649.rs?ref=f69ccb12e3d854955f075659742f259f55dac483", "patch": "@@ -0,0 +1,18 @@\n+// check-pass\n+#![crate_type = \"lib\"]\n+\n+enum Foo {\n+    Variant1(bool),\n+    Variant2(bool),\n+}\n+\n+const _: () = {\n+    let mut n = 0;\n+    while n < 2 {\n+        match Foo::Variant1(true) {\n+            Foo::Variant1(x) | Foo::Variant2(x) if x => {}\n+            _ => {}\n+        }\n+        n += 1;\n+    }\n+};"}]}