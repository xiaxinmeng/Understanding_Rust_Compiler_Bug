{"sha": "c8a5b671a0395706621430a57c258b85a30bad71", "node_id": "C_kwDOAAsO6NoAKGM4YTViNjcxYTAzOTU3MDY2MjE0MzBhNTdjMjU4Yjg1YTMwYmFkNzE", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-19T14:38:10Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-07-05T20:37:42Z"}, "message": "Add test for invalid whitespace display after where clause", "tree": {"sha": "efb98c20dd760cb1477897f48901f30055df178e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efb98c20dd760cb1477897f48901f30055df178e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8a5b671a0395706621430a57c258b85a30bad71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8a5b671a0395706621430a57c258b85a30bad71", "html_url": "https://github.com/rust-lang/rust/commit/c8a5b671a0395706621430a57c258b85a30bad71", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8a5b671a0395706621430a57c258b85a30bad71/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c748551f7f006638d323cde079aaba30a49b185b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c748551f7f006638d323cde079aaba30a49b185b", "html_url": "https://github.com/rust-lang/rust/commit/c748551f7f006638d323cde079aaba30a49b185b"}], "stats": {"total": 111, "additions": 111, "deletions": 0}, "files": [{"sha": "9e5bf45ae7d2fe234c2afaa5efeeabe8f10cc19c", "filename": "src/test/rustdoc/whitespace-after-where-clause.enum.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,4 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust enum\"><code>pub enum Cow&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a&gt; <span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt;,&#160;</span>{\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n+}</code></pre></div>"}, {"sha": "6bc47beaed1257efa5271563ac0e150cf79993fe", "filename": "src/test/rustdoc/whitespace-after-where-clause.enum2.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,4 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust enum\"><code>pub enum Cow2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n+}</code></pre></div>"}, {"sha": "c36386a2aa2b5f69b16b1efb11cf4da0c9a37076", "filename": "src/test/rustdoc/whitespace-after-where-clause.rs", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.rs?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,77 @@\n+// This test ensures there is no whitespace before the first brace of\n+// trait, enum, struct and union items when they have a where clause.\n+\n+#![crate_name = \"foo\"]\n+\n+// @has 'foo/trait.ToOwned.html'\n+// @snapshot trait - '//*[@class=\"docblock item-decl\"]'\n+pub trait ToOwned<T>\n+where T: Clone\n+{\n+    type Owned;\n+    fn to_owned(&self) -> Self::Owned;\n+    fn whatever(&self) -> T;\n+}\n+\n+// @has 'foo/trait.ToOwned2.html'\n+// @snapshot trait2 - '//*[@class=\"docblock item-decl\"]'\n+// There should be a whitespace before `{` in this case!\n+pub trait ToOwned2<T: Clone> {\n+    type Owned;\n+    fn to_owned(&self) -> Self::Owned;\n+    fn whatever(&self) -> T;\n+}\n+\n+// @has 'foo/enum.Cow.html'\n+// @snapshot enum - '//*[@class=\"docblock item-decl\"]'\n+pub enum Cow<'a, B: ?Sized + 'a>\n+where\n+    B: ToOwned<Clone>,\n+{\n+    Borrowed(&'a B),\n+    Whatever(u32),\n+}\n+\n+// @has 'foo/enum.Cow2.html'\n+// @snapshot enum2 - '//*[@class=\"docblock item-decl\"]'\n+// There should be a whitespace before `{` in this case!\n+pub enum Cow2<'a, B: ?Sized + ToOwned<Clone> + 'a> {\n+    Borrowed(&'a B),\n+    Whatever(u32),\n+}\n+\n+// @has 'foo/struct.Struct.html'\n+// @snapshot struct - '//*[@class=\"docblock item-decl\"]'\n+pub struct Struct<'a, B: ?Sized + 'a>\n+where\n+    B: ToOwned<Clone>,\n+{\n+    pub a: &'a B,\n+    pub b: u32,\n+}\n+\n+// @has 'foo/struct.Struct2.html'\n+// @snapshot struct2 - '//*[@class=\"docblock item-decl\"]'\n+// There should be a whitespace before `{` in this case!\n+pub struct Struct2<'a, B: ?Sized + ToOwned<Clone> + 'a> {\n+    pub a: &'a B,\n+    pub b: u32,\n+}\n+\n+// @has 'foo/union.Union.html'\n+// @snapshot union - '//*[@class=\"docblock item-decl\"]'\n+pub union Union<'a, B: ?Sized + 'a>\n+where\n+    B: ToOwned<Clone>,\n+{\n+    a: &'a B,\n+    b: u32,\n+}\n+\n+// @has 'foo/union.Union2.html'\n+// @snapshot union2 - '//*[@class=\"docblock item-decl\"]'\n+// There should be a whitespace before `{` in this case!\n+pub union Union2<'a, B: ?Sized + ToOwned<Clone> + 'a> {\n+    a: &'a B,\n+    b: u32,\n+}"}, {"sha": "236cc3b30d088d22073840da2d8105b7b11db073", "filename": "src/test/rustdoc/whitespace-after-where-clause.struct.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,4 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust struct\"><code>pub struct Struct&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a&gt; <span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt;,&#160;</span>{\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n+}</code></pre></div>"}, {"sha": "47f5c6ba9c8466b9b4bacf265d9123e6e21011cc", "filename": "src/test/rustdoc/whitespace-after-where-clause.struct2.html", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,4 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust struct\"><code>pub struct Struct2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n+}</code></pre></div>"}, {"sha": "98f03b837b5282ccd5ef88101de3db1cd85efaaa", "filename": "src/test/rustdoc/whitespace-after-where-clause.trait.html", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,6 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust trait\"><code>pub trait ToOwned&lt;T&gt; <span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;T: <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>,&#160;</span>{\n+    type <a href=\"#associatedtype.Owned\" class=\"associatedtype\">Owned</a>;\n+\n+    fn <a href=\"#tymethod.to_owned\" class=\"fnname\">to_owned</a>(&amp;self) -&gt; Self::<a class=\"associatedtype\" href=\"trait.ToOwned.html#associatedtype.Owned\" title=\"type foo::ToOwned::Owned\">Owned</a>;\n+<span class=\"item-spacer\" />    fn <a href=\"#tymethod.whatever\" class=\"fnname\">whatever</a>(&amp;self) -&gt; T;\n+}</code></pre></div>"}, {"sha": "35052869e762dcd32161bdd1480facd2a35eade8", "filename": "src/test/rustdoc/whitespace-after-where-clause.trait2.html", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait2.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.trait2.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,6 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust trait\"><code>pub trait ToOwned2&lt;T:&#160;<a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; {\n+    type <a href=\"#associatedtype.Owned\" class=\"associatedtype\">Owned</a>;\n+\n+    fn <a href=\"#tymethod.to_owned\" class=\"fnname\">to_owned</a>(&amp;self) -&gt; Self::<a class=\"associatedtype\" href=\"trait.ToOwned2.html#associatedtype.Owned\" title=\"type foo::ToOwned2::Owned\">Owned</a>;\n+<span class=\"item-spacer\" />    fn <a href=\"#tymethod.whatever\" class=\"fnname\">whatever</a>(&amp;self) -&gt; T;\n+}</code></pre></div>"}, {"sha": "97e1bbcf339f841829d03db90fd371bc08182cc5", "filename": "src/test/rustdoc/whitespace-after-where-clause.union.html", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,3 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust union\"><code>pub union Union&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a&gt; <span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt;,&#160;</span>{\n+    /* private fields */\n+}</code></pre></div>"}, {"sha": "6c752a8b4c5ea269db80898af7535bfad50d5fa7", "filename": "src/test/rustdoc/whitespace-after-where-clause.union2.html", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union2.html", "raw_url": "https://github.com/rust-lang/rust/raw/c8a5b671a0395706621430a57c258b85a30bad71/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhitespace-after-where-clause.union2.html?ref=c8a5b671a0395706621430a57c258b85a30bad71", "patch": "@@ -0,0 +1,3 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust union\"><code>pub union Union2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n+    /* private fields */\n+}</code></pre></div>"}]}