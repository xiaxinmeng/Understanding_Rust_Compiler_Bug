{"sha": "ee9de3b10290290ae1a56d6fbc80307869fc5d01", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlOWRlM2IxMDI5MDI5MGFlMWE1NmQ2ZmJjODAzMDc4NjlmYzVkMDE=", "commit": {"author": {"name": "Florian Gilcher", "email": "florian.gilcher@asquera.de", "date": "2014-12-10T11:17:14Z"}, "committer": {"name": "Florian Gilcher", "email": "florian.gilcher@asquera.de", "date": "2014-12-21T14:48:40Z"}, "message": "Fully remove `notrust` markers from rustdoc\n\nInternally refactor all mentions of `notrust` to the\npositive statement `rust`.", "tree": {"sha": "ab0d7382f750513661267d78e1190c1f97a4b2d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab0d7382f750513661267d78e1190c1f97a4b2d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee9de3b10290290ae1a56d6fbc80307869fc5d01", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee9de3b10290290ae1a56d6fbc80307869fc5d01", "html_url": "https://github.com/rust-lang/rust/commit/ee9de3b10290290ae1a56d6fbc80307869fc5d01", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee9de3b10290290ae1a56d6fbc80307869fc5d01/comments", "author": {"login": "skade", "id": 47542, "node_id": "MDQ6VXNlcjQ3NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/47542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skade", "html_url": "https://github.com/skade", "followers_url": "https://api.github.com/users/skade/followers", "following_url": "https://api.github.com/users/skade/following{/other_user}", "gists_url": "https://api.github.com/users/skade/gists{/gist_id}", "starred_url": "https://api.github.com/users/skade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skade/subscriptions", "organizations_url": "https://api.github.com/users/skade/orgs", "repos_url": "https://api.github.com/users/skade/repos", "events_url": "https://api.github.com/users/skade/events{/privacy}", "received_events_url": "https://api.github.com/users/skade/received_events", "type": "User", "site_admin": false}, "committer": {"login": "skade", "id": 47542, "node_id": "MDQ6VXNlcjQ3NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/47542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skade", "html_url": "https://github.com/skade", "followers_url": "https://api.github.com/users/skade/followers", "following_url": "https://api.github.com/users/skade/following{/other_user}", "gists_url": "https://api.github.com/users/skade/gists{/gist_id}", "starred_url": "https://api.github.com/users/skade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skade/subscriptions", "organizations_url": "https://api.github.com/users/skade/orgs", "repos_url": "https://api.github.com/users/skade/repos", "events_url": "https://api.github.com/users/skade/events{/privacy}", "received_events_url": "https://api.github.com/users/skade/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f51ad2420776925c12be67a7bf38ac28343fd1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f51ad2420776925c12be67a7bf38ac28343fd1f", "html_url": "https://github.com/rust-lang/rust/commit/8f51ad2420776925c12be67a7bf38ac28343fd1f"}], "stats": {"total": 40, "additions": 19, "deletions": 21}, "files": [{"sha": "5581874ea3aff2a1f7d24244bbc2e16c9950e99b", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 19, "deletions": 21, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/ee9de3b10290290ae1a56d6fbc80307869fc5d01/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee9de3b10290290ae1a56d6fbc80307869fc5d01/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=ee9de3b10290290ae1a56d6fbc80307869fc5d01", "patch": "@@ -174,7 +174,7 @@ pub fn render(w: &mut fmt::Formatter, s: &str, print_toc: bool) -> fmt::Result {\n                 let rlang = slice::from_raw_buf(&(*lang).data,\n                                                 (*lang).size as uint);\n                 let rlang = str::from_utf8(rlang).unwrap();\n-                if LangString::parse(rlang).notrust {\n+                if !LangString::parse(rlang).rust {\n                     (my_opaque.dfltblk)(ob, orig_text, lang,\n                                         opaque as *mut libc::c_void);\n                     true\n@@ -320,7 +320,7 @@ pub fn find_testable_code(doc: &str, tests: &mut ::test::Collector) {\n                 let s = str::from_utf8(lang).unwrap();\n                 LangString::parse(s)\n             };\n-            if block_info.notrust { return }\n+            if !block_info.rust { return }\n             let text = slice::from_raw_buf(&(*text).data, (*text).size as uint);\n             let opaque = opaque as *mut hoedown_html_renderer_state;\n             let tests = &mut *((*opaque).opaque as *mut ::test::Collector);\n@@ -373,7 +373,7 @@ struct LangString {\n     should_fail: bool,\n     no_run: bool,\n     ignore: bool,\n-    notrust: bool,\n+    rust: bool,\n     test_harness: bool,\n }\n \n@@ -383,7 +383,7 @@ impl LangString {\n             should_fail: false,\n             no_run: false,\n             ignore: false,\n-            notrust: false,\n+            rust: false,\n             test_harness: false,\n         }\n     }\n@@ -403,14 +403,13 @@ impl LangString {\n                 \"should_fail\" => { data.should_fail = true; seen_rust_tags = true; },\n                 \"no_run\" => { data.no_run = true; seen_rust_tags = true; },\n                 \"ignore\" => { data.ignore = true; seen_rust_tags = true; },\n-                \"notrust\" => { data.notrust = true; seen_rust_tags = true; },\n-                \"rust\" => { data.notrust = false; seen_rust_tags = true; },\n+                \"rust\" => { data.rust = true; seen_rust_tags = true; },\n                 \"test_harness\" => { data.test_harness = true; seen_rust_tags = true; }\n                 _ => { seen_other_tags = true }\n             }\n         }\n \n-        data.notrust |= seen_other_tags && !seen_rust_tags;\n+        data.rust |=  !seen_other_tags || seen_rust_tags;\n \n         data\n     }\n@@ -452,28 +451,27 @@ mod tests {\n     #[test]\n     fn test_lang_string_parse() {\n         fn t(s: &str,\n-             should_fail: bool, no_run: bool, ignore: bool, notrust: bool, test_harness: bool) {\n+            should_fail: bool, no_run: bool, ignore: bool, rust: bool, test_harness: bool) {\n             assert_eq!(LangString::parse(s), LangString {\n                 should_fail: should_fail,\n                 no_run: no_run,\n                 ignore: ignore,\n-                notrust: notrust,\n+                rust: rust,\n                 test_harness: test_harness,\n             })\n         }\n \n-        t(\"\", false,false,false,false,false);\n-        t(\"rust\", false,false,false,false,false);\n-        t(\"sh\", false,false,false,true,false);\n-        t(\"notrust\", false,false,false,true,false);\n-        t(\"ignore\", false,false,true,false,false);\n-        t(\"should_fail\", true,false,false,false,false);\n-        t(\"no_run\", false,true,false,false,false);\n-        t(\"test_harness\", false,false,false,false,true);\n-        t(\"{.no_run .example}\", false,true,false,false,false);\n-        t(\"{.sh .should_fail}\", true,false,false,false,false);\n-        t(\"{.example .rust}\", false,false,false,false,false);\n-        t(\"{.test_harness .rust}\", false,false,false,false,true);\n+        t(\"\", false,false,false,true,false);\n+        t(\"rust\", false,false,false,true,false);\n+        t(\"sh\", false,false,false,false,false);\n+        t(\"ignore\", false,false,true,true,false);\n+        t(\"should_fail\", true,false,false,true,false);\n+        t(\"no_run\", false,true,false,true,false);\n+        t(\"test_harness\", false,false,false,true,true);\n+        t(\"{.no_run .example}\", false,true,false,true,false);\n+        t(\"{.sh .should_fail}\", true,false,false,true,false);\n+        t(\"{.example .rust}\", false,false,false,true,false);\n+        t(\"{.test_harness .rust}\", false,false,false,true,true);\n     }\n \n     #[test]"}]}