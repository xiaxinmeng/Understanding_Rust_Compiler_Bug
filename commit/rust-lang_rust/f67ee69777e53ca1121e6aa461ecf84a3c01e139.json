{"sha": "f67ee69777e53ca1121e6aa461ecf84a3c01e139", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2N2VlNjk3NzdlNTNjYTExMjFlNmFhNDYxZWNmODRhM2MwMWUxMzk=", "commit": {"author": {"name": "TomasKralCZ", "email": "tomas@kral.hk", "date": "2020-01-19T17:55:56Z"}, "committer": {"name": "TomasKralCZ", "email": "tomas@kral.hk", "date": "2020-01-19T17:55:56Z"}, "message": "added eq_token() method to LetStmt", "tree": {"sha": "808b2ca3bff4a299a4997a5f1f4847d072f0e42c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/808b2ca3bff4a299a4997a5f1f4847d072f0e42c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f67ee69777e53ca1121e6aa461ecf84a3c01e139", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f67ee69777e53ca1121e6aa461ecf84a3c01e139", "html_url": "https://github.com/rust-lang/rust/commit/f67ee69777e53ca1121e6aa461ecf84a3c01e139", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f67ee69777e53ca1121e6aa461ecf84a3c01e139/comments", "author": {"login": "TomasKralCZ", "id": 23663355, "node_id": "MDQ6VXNlcjIzNjYzMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/23663355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomasKralCZ", "html_url": "https://github.com/TomasKralCZ", "followers_url": "https://api.github.com/users/TomasKralCZ/followers", "following_url": "https://api.github.com/users/TomasKralCZ/following{/other_user}", "gists_url": "https://api.github.com/users/TomasKralCZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomasKralCZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomasKralCZ/subscriptions", "organizations_url": "https://api.github.com/users/TomasKralCZ/orgs", "repos_url": "https://api.github.com/users/TomasKralCZ/repos", "events_url": "https://api.github.com/users/TomasKralCZ/events{/privacy}", "received_events_url": "https://api.github.com/users/TomasKralCZ/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TomasKralCZ", "id": 23663355, "node_id": "MDQ6VXNlcjIzNjYzMzU1", "avatar_url": "https://avatars.githubusercontent.com/u/23663355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TomasKralCZ", "html_url": "https://github.com/TomasKralCZ", "followers_url": "https://api.github.com/users/TomasKralCZ/followers", "following_url": "https://api.github.com/users/TomasKralCZ/following{/other_user}", "gists_url": "https://api.github.com/users/TomasKralCZ/gists{/gist_id}", "starred_url": "https://api.github.com/users/TomasKralCZ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TomasKralCZ/subscriptions", "organizations_url": "https://api.github.com/users/TomasKralCZ/orgs", "repos_url": "https://api.github.com/users/TomasKralCZ/repos", "events_url": "https://api.github.com/users/TomasKralCZ/events{/privacy}", "received_events_url": "https://api.github.com/users/TomasKralCZ/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "514df15d9e32e057ba23dda0d4f5c07e82e7ed23", "url": "https://api.github.com/repos/rust-lang/rust/commits/514df15d9e32e057ba23dda0d4f5c07e82e7ed23", "html_url": "https://github.com/rust-lang/rust/commit/514df15d9e32e057ba23dda0d4f5c07e82e7ed23"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "38a351a547ec8f60635259f156e2f4e7c0e1cd15", "filename": "crates/ra_assists/src/assists/add_explicit_type.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f67ee69777e53ca1121e6aa461ecf84a3c01e139/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_explicit_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f67ee69777e53ca1121e6aa461ecf84a3c01e139/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_explicit_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_explicit_type.rs?ref=f67ee69777e53ca1121e6aa461ecf84a3c01e139", "patch": "@@ -1,7 +1,6 @@\n use hir::{db::HirDatabase, HirDisplay};\n use ra_syntax::{\n     ast::{self, AstNode, LetStmt, NameOwner},\n-    SyntaxKind::EQ,\n     TextRange, T,\n };\n \n@@ -37,7 +36,7 @@ pub(crate) fn add_explicit_type(ctx: AssistCtx<impl HirDatabase>) -> Option<Assi\n     let name_range = name.syntax().text_range();\n     // Assist should only be applicable if cursor is between 'let' and '='\n     let stmt_range = stmt.syntax().text_range();\n-    let eq_range = stmt.syntax().descendants_with_tokens().find(|t| t.kind() == EQ)?.text_range();\n+    let eq_range = stmt.eq_token()?.text_range();\n     let let_range = TextRange::from_to(stmt_range.start(), eq_range.start());\n     let cursor_in_range = ctx.frange.range.is_subrange(&let_range);\n     if !cursor_in_range {"}, {"sha": "b8043b726bd2507a31b2b1d864b6ade5ce444661", "filename": "crates/ra_syntax/src/ast/extensions.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f67ee69777e53ca1121e6aa461ecf84a3c01e139/crates%2Fra_syntax%2Fsrc%2Fast%2Fextensions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f67ee69777e53ca1121e6aa461ecf84a3c01e139/crates%2Fra_syntax%2Fsrc%2Fast%2Fextensions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast%2Fextensions.rs?ref=f67ee69777e53ca1121e6aa461ecf84a3c01e139", "patch": "@@ -234,6 +234,13 @@ impl ast::LetStmt {\n             Some(node) => node.kind() == T![;],\n         }\n     }\n+\n+    pub fn eq_token(&self) -> Option<SyntaxToken> {\n+        self.syntax()\n+            .descendants_with_tokens()\n+            .find(|t| t.kind() == EQ)\n+            .and_then(|it| it.into_token())\n+    }\n }\n \n impl ast::ExprStmt {"}]}