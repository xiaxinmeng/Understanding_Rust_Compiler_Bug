{"sha": "a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3OTBmOWJiMmQyNzdiNWM3YzI2N2IxNWI4MTJkYjEyY2MyMGI3YTE=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-01-14T04:30:24Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-01-20T07:41:44Z"}, "message": "Add `constness` field to `hir::ItemKind::Impl`", "tree": {"sha": "cd8e73d6bdd528d9c6fcd58ef993ea27617fc588", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd8e73d6bdd528d9c6fcd58ef993ea27617fc588"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "html_url": "https://github.com/rust-lang/rust/commit/a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "01cbe506f99aa484f583a7affb65d15a839d2412", "url": "https://api.github.com/repos/rust-lang/rust/commits/01cbe506f99aa484f583a7affb65d15a839d2412", "html_url": "https://github.com/rust-lang/rust/commit/01cbe506f99aa484f583a7affb65d15a839d2412"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "c47a0f4eaca6c2b94a8f2aebd87ae665dc5dd2cc", "filename": "src/librustc_ast_lowering/item.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_ast_lowering%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_ast_lowering%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2Fitem.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -365,7 +365,7 @@ impl<'hir> LoweringContext<'_, 'hir> {\n                 unsafety,\n                 polarity,\n                 defaultness,\n-                constness: _, // TODO\n+                constness,\n                 generics: ref ast_generics,\n                 of_trait: ref trait_ref,\n                 self_ty: ref ty,\n@@ -422,6 +422,7 @@ impl<'hir> LoweringContext<'_, 'hir> {\n                     unsafety,\n                     polarity,\n                     defaultness: self.lower_defaultness(defaultness, true /* [1] */),\n+                    constness,\n                     generics,\n                     of_trait: trait_ref,\n                     self_ty: lowered_ty,"}, {"sha": "d850cfe69cebee376a0709b49e3cf8410cb40815", "filename": "src/librustc_hir/hir.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fhir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fhir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_hir%2Fhir.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -2440,6 +2440,7 @@ pub enum ItemKind<'hir> {\n         unsafety: Unsafety,\n         polarity: ImplPolarity,\n         defaultness: Defaultness,\n+        constness: Constness,\n         generics: Generics<'hir>,\n \n         /// The trait being implemented, if any."}, {"sha": "539a0eee0e31222087da244f2bd703e772fa0f98", "filename": "src/librustc_hir/intravisit.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fintravisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fintravisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_hir%2Fintravisit.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -570,6 +570,7 @@ pub fn walk_item<'v, V: Visitor<'v>>(visitor: &mut V, item: &'v Item<'v>) {\n             unsafety: _,\n             defaultness: _,\n             polarity: _,\n+            constness: _,\n             ref generics,\n             ref of_trait,\n             ref self_ty,"}, {"sha": "b9598c93761466723ec18975943157ecbdebb237", "filename": "src/librustc_hir/print.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fprint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustc_hir%2Fprint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_hir%2Fprint.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -631,6 +631,7 @@ impl<'a> State<'a> {\n                 unsafety,\n                 polarity,\n                 defaultness,\n+                constness,\n                 ref generics,\n                 ref of_trait,\n                 ref self_ty,\n@@ -647,6 +648,10 @@ impl<'a> State<'a> {\n                     self.s.space();\n                 }\n \n+                if constness == ast::Constness::Const {\n+                    self.word_nbsp(\"const\");\n+                }\n+\n                 if let hir::ImplPolarity::Negative = polarity {\n                     self.s.word(\"!\");\n                 }"}, {"sha": "218674b757f39686bb258a7ca660b1afce201e73", "filename": "src/librustdoc/doctree.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustdoc%2Fdoctree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustdoc%2Fdoctree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctree.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -203,6 +203,7 @@ pub struct Impl<'hir> {\n     pub unsafety: hir::Unsafety,\n     pub polarity: hir::ImplPolarity,\n     pub defaultness: hir::Defaultness,\n+    pub constness: ast::Constness,\n     pub generics: &'hir hir::Generics<'hir>,\n     pub trait_: &'hir Option<hir::TraitRef<'hir>>,\n     pub for_: &'hir hir::Ty<'hir>,"}, {"sha": "d3d45ccccad3654892448e865aca1225ecc8a9b2", "filename": "src/librustdoc/visit_ast.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustdoc%2Fvisit_ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a790f9bb2d277b5c7c267b15b812db12cc20b7a1/src%2Flibrustdoc%2Fvisit_ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fvisit_ast.rs?ref=a790f9bb2d277b5c7c267b15b812db12cc20b7a1", "patch": "@@ -562,6 +562,7 @@ impl<'a, 'tcx> RustdocVisitor<'a, 'tcx> {\n                 unsafety,\n                 polarity,\n                 defaultness,\n+                constness,\n                 ref generics,\n                 ref of_trait,\n                 self_ty,\n@@ -576,6 +577,7 @@ impl<'a, 'tcx> RustdocVisitor<'a, 'tcx> {\n                         unsafety,\n                         polarity,\n                         defaultness,\n+                        constness,\n                         generics,\n                         trait_: of_trait,\n                         for_: self_ty,"}]}