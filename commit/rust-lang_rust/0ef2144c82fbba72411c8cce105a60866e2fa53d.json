{"sha": "0ef2144c82fbba72411c8cce105a60866e2fa53d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlZjIxNDRjODJmYmJhNzI0MTFjOGNjZTEwNWE2MDg2NmUyZmE1M2Q=", "commit": {"author": {"name": "rChaser53", "email": "tayoshizawa29@gmail.com", "date": "2019-05-21T02:43:28Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2019-05-21T02:43:27Z"}, "message": "not to avoid self (#3570)", "tree": {"sha": "fcc6ac90a2fc67d995a856a1d9a2a266b09f11d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fcc6ac90a2fc67d995a856a1d9a2a266b09f11d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ef2144c82fbba72411c8cce105a60866e2fa53d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ef2144c82fbba72411c8cce105a60866e2fa53d", "html_url": "https://github.com/rust-lang/rust/commit/0ef2144c82fbba72411c8cce105a60866e2fa53d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ef2144c82fbba72411c8cce105a60866e2fa53d/comments", "author": {"login": "rchaser53", "id": 9676954, "node_id": "MDQ6VXNlcjk2NzY5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9676954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchaser53", "html_url": "https://github.com/rchaser53", "followers_url": "https://api.github.com/users/rchaser53/followers", "following_url": "https://api.github.com/users/rchaser53/following{/other_user}", "gists_url": "https://api.github.com/users/rchaser53/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchaser53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchaser53/subscriptions", "organizations_url": "https://api.github.com/users/rchaser53/orgs", "repos_url": "https://api.github.com/users/rchaser53/repos", "events_url": "https://api.github.com/users/rchaser53/events{/privacy}", "received_events_url": "https://api.github.com/users/rchaser53/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "530086046f41920b5bba01036d258121c81bfbb9", "url": "https://api.github.com/repos/rust-lang/rust/commits/530086046f41920b5bba01036d258121c81bfbb9", "html_url": "https://github.com/rust-lang/rust/commit/530086046f41920b5bba01036d258121c81bfbb9"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "eeda0b5cb7b18730e289ba3b74dd87d29070e6de", "filename": "src/imports.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ef2144c82fbba72411c8cce105a60866e2fa53d/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ef2144c82fbba72411c8cce105a60866e2fa53d/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=0ef2144c82fbba72411c8cce105a60866e2fa53d", "patch": "@@ -478,7 +478,7 @@ impl UseTree {\n \n         // Normalise foo::{bar} -> foo::bar\n         if let UseSegment::List(ref list) = last {\n-            if list.len() == 1 {\n+            if list.len() == 1 && list[0].to_string() != \"self\" {\n                 normalize_sole_list = true;\n             }\n         }\n@@ -1034,7 +1034,10 @@ mod test {\n             parse_use_tree(\"a::self as foo\").normalize(),\n             parse_use_tree(\"a as foo\")\n         );\n-        assert_eq!(parse_use_tree(\"a::{self}\").normalize(), parse_use_tree(\"a\"));\n+        assert_eq!(\n+            parse_use_tree(\"a::{self}\").normalize(),\n+            parse_use_tree(\"a::{self}\")\n+        );\n         assert_eq!(parse_use_tree(\"a::{b}\").normalize(), parse_use_tree(\"a::b\"));\n         assert_eq!(\n             parse_use_tree(\"a::{b, c::self}\").normalize(),\n@@ -1069,8 +1072,8 @@ mod test {\n         );\n \n         assert!(\n-            parse_use_tree(\"foo::{self as bar}\").normalize()\n-                < parse_use_tree(\"foo::{qux as bar}\").normalize()\n+            parse_use_tree(\"foo::{qux as bar}\").normalize()\n+                < parse_use_tree(\"foo::{self as bar}\").normalize()\n         );\n         assert!(\n             parse_use_tree(\"foo::{qux as bar}\").normalize()"}, {"sha": "c497a375b5976dc4fc9f142402f7e941a2bd0810", "filename": "tests/target/imports.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0ef2144c82fbba72411c8cce105a60866e2fa53d/tests%2Ftarget%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ef2144c82fbba72411c8cce105a60866e2fa53d/tests%2Ftarget%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fimports.rs?ref=0ef2144c82fbba72411c8cce105a60866e2fa53d", "patch": "@@ -22,13 +22,13 @@ use list::{\n \n use test::{/* A */ self /* B */, Other /* C */};\n \n-use syntax;\n pub use syntax::ast::{Expr, ExprAssign, ExprCall, ExprMethodCall, ExprPath, Expr_};\n+use syntax::{self};\n use Foo::{Bar, Baz};\n use {Bar /* comment */, /* Pre-comment! */ Foo};\n \n use std::io;\n-use std::io;\n+use std::io::{self};\n \n mod Foo {\n     pub use syntax::ast::{\n@@ -53,8 +53,8 @@ use foo;\n use foo::bar::baz;\n \n // With aliases.\n-use foo as bar;\n use foo::qux as bar;\n+use foo::{self as bar};\n use foo::{self as bar, baz};\n use foo::{baz, qux as bar};\n "}, {"sha": "a146f3df24ddc613214fdf76caca049eb45a2102", "filename": "tests/target/issue-3568.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0ef2144c82fbba72411c8cce105a60866e2fa53d/tests%2Ftarget%2Fissue-3568.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ef2144c82fbba72411c8cce105a60866e2fa53d/tests%2Ftarget%2Fissue-3568.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-3568.rs?ref=0ef2144c82fbba72411c8cce105a60866e2fa53d", "patch": "@@ -0,0 +1 @@\n+use a::b::{self};"}]}