{"sha": "8979fd42379628201896a5c0dd478c0a5dbd3405", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5NzlmZDQyMzc5NjI4MjAxODk2YTVjMGRkNDc4YzBhNWRiZDM0MDU=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-02-23T01:51:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-02-23T01:51:53Z"}, "message": "Rollup merge of #82166 - kaniini:s390x-musl-target, r=nagisa\n\nadd s390x-unknown-linux-musl target\n\nThis is the first step in bringup for Rust on s390x.\n\nThe libc and std crates need modifications as well, but getting this upstream makes that work easier.", "tree": {"sha": "ced90ea4819a3dd35c4d7b97e36c8c837edeb18b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ced90ea4819a3dd35c4d7b97e36c8c837edeb18b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8979fd42379628201896a5c0dd478c0a5dbd3405", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgNF+5CRBK7hj4Ov3rIwAAdHIIAAR40XrLo2ftIhA2ZS6VGVo2\nAajmE3Itp5bcXf9wPktM1Wq/f3yQv2qP28n5ya8NjYpRgthqFBZAGqdBNR8ck+93\nKW6ZcBZWCnbzMTaJbLLRS+aVoqcQj//8hRv2m9E26ujVH3N7RxElCCMZpGKLXpCC\nqYTGsB8Ra0IQxM+K7H0Zj8/LK998Fk7fF6MOXNTXtHfdrI7HBXx5sfhtVQ1egXsC\noj8HBo/Xt+MNhL8I8xkHfLUwoP0ws8EXuiwPBgdbnp3+eR56EAzZPy0kSC6P+T6f\nagihNsflWAovSC/L4/c6mGHqpVRdnu/unOVZDmlVEm4yP8VhZJsnFbdfT3ReEeg=\n=5r3c\n-----END PGP SIGNATURE-----\n", "payload": "tree ced90ea4819a3dd35c4d7b97e36c8c837edeb18b\nparent b8d4354099a070fa34bdf373e0f2ae2e40797ee9\nparent 62ee3ec7ba17fe705ba21f25c1a28ce751efc1b7\nauthor Dylan DPC <dylan.dpc@gmail.com> 1614045113 +0100\ncommitter GitHub <noreply@github.com> 1614045113 +0100\n\nRollup merge of #82166 - kaniini:s390x-musl-target, r=nagisa\n\nadd s390x-unknown-linux-musl target\n\nThis is the first step in bringup for Rust on s390x.\n\nThe libc and std crates need modifications as well, but getting this upstream makes that work easier.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8979fd42379628201896a5c0dd478c0a5dbd3405", "html_url": "https://github.com/rust-lang/rust/commit/8979fd42379628201896a5c0dd478c0a5dbd3405", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8979fd42379628201896a5c0dd478c0a5dbd3405/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8d4354099a070fa34bdf373e0f2ae2e40797ee9", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8d4354099a070fa34bdf373e0f2ae2e40797ee9", "html_url": "https://github.com/rust-lang/rust/commit/b8d4354099a070fa34bdf373e0f2ae2e40797ee9"}, {"sha": "62ee3ec7ba17fe705ba21f25c1a28ce751efc1b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/62ee3ec7ba17fe705ba21f25c1a28ce751efc1b7", "html_url": "https://github.com/rust-lang/rust/commit/62ee3ec7ba17fe705ba21f25c1a28ce751efc1b7"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "6cf1112820de1db7bf03c5fb07e3021d8ee68d05", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8979fd42379628201896a5c0dd478c0a5dbd3405/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8979fd42379628201896a5c0dd478c0a5dbd3405/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=8979fd42379628201896a5c0dd478c0a5dbd3405", "patch": "@@ -641,6 +641,7 @@ supported_targets! {\n     (\"powerpc64le-unknown-linux-gnu\", powerpc64le_unknown_linux_gnu),\n     (\"powerpc64le-unknown-linux-musl\", powerpc64le_unknown_linux_musl),\n     (\"s390x-unknown-linux-gnu\", s390x_unknown_linux_gnu),\n+    (\"s390x-unknown-linux-musl\", s390x_unknown_linux_musl),\n     (\"sparc-unknown-linux-gnu\", sparc_unknown_linux_gnu),\n     (\"sparc64-unknown-linux-gnu\", sparc64_unknown_linux_gnu),\n     (\"arm-unknown-linux-gnueabi\", arm_unknown_linux_gnueabi),"}, {"sha": "4f811ce98c181d4618a7436a4e23c680667b42f7", "filename": "compiler/rustc_target/src/spec/s390x_unknown_linux_musl.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/8979fd42379628201896a5c0dd478c0a5dbd3405/compiler%2Frustc_target%2Fsrc%2Fspec%2Fs390x_unknown_linux_musl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8979fd42379628201896a5c0dd478c0a5dbd3405/compiler%2Frustc_target%2Fsrc%2Fspec%2Fs390x_unknown_linux_musl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fs390x_unknown_linux_musl.rs?ref=8979fd42379628201896a5c0dd478c0a5dbd3405", "patch": "@@ -0,0 +1,24 @@\n+use crate::abi::Endian;\n+use crate::spec::Target;\n+\n+pub fn target() -> Target {\n+    let mut base = super::linux_musl_base::opts();\n+    base.endian = Endian::Big;\n+    // z10 is the oldest CPU supported by LLVM\n+    base.cpu = \"z10\".to_string();\n+    // FIXME: The data_layout string below and the ABI implementation in\n+    // cabi_s390x.rs are for now hard-coded to assume the no-vector ABI.\n+    // Pass the -vector feature string to LLVM to respect this assumption.\n+    base.features = \"-vector\".to_string();\n+    base.max_atomic_width = Some(64);\n+    base.min_global_align = Some(16);\n+    base.static_position_independent_executables = true;\n+\n+    Target {\n+        llvm_target: \"s390x-unknown-linux-musl\".to_string(),\n+        pointer_width: 64,\n+        data_layout: \"E-m:e-i1:8:16-i8:8:16-i64:64-f128:64-a:8:16-n32:64\".to_string(),\n+        arch: \"s390x\".to_string(),\n+        options: base,\n+    }\n+}"}, {"sha": "ff44028390c2713cc8b0f7b4a982eb8bfc6f39b1", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8979fd42379628201896a5c0dd478c0a5dbd3405/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/8979fd42379628201896a5c0dd478c0a5dbd3405/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=8979fd42379628201896a5c0dd478c0a5dbd3405", "patch": "@@ -208,6 +208,7 @@ target | std | host | notes\n `riscv64gc-unknown-linux-musl` |   |   | RISC-V Linux (kernel 4.20, musl 1.2.0)\n `riscv32gc-unknown-linux-gnu` |   |   | RISC-V Linux (kernel 5.4, glibc 2.33)\n `riscv32gc-unknown-linux-musl` |   |   | RISC-V Linux (kernel 5.4, musl + RISCV32 support patches)\n+`s390x-unknown-linux-musl` |  |  | S390x Linux (kernel 2.6.32, MUSL)\n `sparc-unknown-linux-gnu` | \u2713 |  | 32-bit SPARC Linux\n `sparc64-unknown-netbsd` | \u2713 | \u2713 | NetBSD/sparc64\n `sparc64-unknown-openbsd` | ? |  |"}]}