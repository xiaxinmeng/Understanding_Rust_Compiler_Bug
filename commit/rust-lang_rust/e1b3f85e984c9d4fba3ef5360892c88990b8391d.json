{"sha": "e1b3f85e984c9d4fba3ef5360892c88990b8391d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxYjNmODVlOTg0YzlkNGZiYTNlZjUzNjA4OTJjODg5OTBiODM5MWQ=", "commit": {"author": {"name": "Frank", "email": "lifrank@grinnell.edu", "date": "2020-09-24T21:00:46Z"}, "committer": {"name": "Frank", "email": "lifrank@grinnell.edu", "date": "2020-09-25T16:09:04Z"}, "message": "run cargo dev fmt", "tree": {"sha": "4db237799b3f05d42456e340a965d29989b9b8ae", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4db237799b3f05d42456e340a965d29989b9b8ae"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1b3f85e984c9d4fba3ef5360892c88990b8391d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1b3f85e984c9d4fba3ef5360892c88990b8391d", "html_url": "https://github.com/rust-lang/rust/commit/e1b3f85e984c9d4fba3ef5360892c88990b8391d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1b3f85e984c9d4fba3ef5360892c88990b8391d/comments", "author": {"login": "ilknarf", "id": 30297768, "node_id": "MDQ6VXNlcjMwMjk3NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/30297768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilknarf", "html_url": "https://github.com/ilknarf", "followers_url": "https://api.github.com/users/ilknarf/followers", "following_url": "https://api.github.com/users/ilknarf/following{/other_user}", "gists_url": "https://api.github.com/users/ilknarf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilknarf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilknarf/subscriptions", "organizations_url": "https://api.github.com/users/ilknarf/orgs", "repos_url": "https://api.github.com/users/ilknarf/repos", "events_url": "https://api.github.com/users/ilknarf/events{/privacy}", "received_events_url": "https://api.github.com/users/ilknarf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ilknarf", "id": 30297768, "node_id": "MDQ6VXNlcjMwMjk3NzY4", "avatar_url": "https://avatars.githubusercontent.com/u/30297768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilknarf", "html_url": "https://github.com/ilknarf", "followers_url": "https://api.github.com/users/ilknarf/followers", "following_url": "https://api.github.com/users/ilknarf/following{/other_user}", "gists_url": "https://api.github.com/users/ilknarf/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilknarf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilknarf/subscriptions", "organizations_url": "https://api.github.com/users/ilknarf/orgs", "repos_url": "https://api.github.com/users/ilknarf/repos", "events_url": "https://api.github.com/users/ilknarf/events{/privacy}", "received_events_url": "https://api.github.com/users/ilknarf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4d88cbb1f150e94c613fdd082c5bf8418443804", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4d88cbb1f150e94c613fdd082c5bf8418443804", "html_url": "https://github.com/rust-lang/rust/commit/f4d88cbb1f150e94c613fdd082c5bf8418443804"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "42fbff8ff879dd3b005bb8078258ee47bd6e3bdb", "filename": "clippy_lints/src/disallowed_method.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/e1b3f85e984c9d4fba3ef5360892c88990b8391d/clippy_lints%2Fsrc%2Fdisallowed_method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1b3f85e984c9d4fba3ef5360892c88990b8391d/clippy_lints%2Fsrc%2Fdisallowed_method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdisallowed_method.rs?ref=e1b3f85e984c9d4fba3ef5360892c88990b8391d", "patch": "@@ -1,9 +1,9 @@\n use crate::utils::span_lint;\n \n use rustc_data_structures::fx::FxHashSet;\n-use rustc_lint::{LateLintPass, LateContext};\n-use rustc_session::{impl_lint_pass, declare_tool_lint};\n use rustc_hir::*;\n+use rustc_lint::{LateContext, LateLintPass};\n+use rustc_session::{declare_tool_lint, impl_lint_pass};\n use rustc_span::Symbol;\n \n declare_clippy_lint! {\n@@ -38,18 +38,17 @@ pub struct DisallowedMethod {\n impl DisallowedMethod {\n     pub fn new(disallowed: FxHashSet<String>) -> Self {\n         Self {\n-            disallowed: disallowed.iter()\n-                .map(|s| {\n-                    s.split(\"::\").map(|seg| Symbol::intern(seg)).collect::<Vec<_>>()\n-                })\n+            disallowed: disallowed\n+                .iter()\n+                .map(|s| s.split(\"::\").map(|seg| Symbol::intern(seg)).collect::<Vec<_>>())\n                 .collect(),\n         }\n     }\n }\n \n impl_lint_pass!(DisallowedMethod => [DISALLOWED_METHOD]);\n \n-impl <'tcx> LateLintPass<'tcx> for DisallowedMethod {\n+impl<'tcx> LateLintPass<'tcx> for DisallowedMethod {\n     fn check_expr(&mut self, cx: &LateContext<'tcx>, expr: &'tcx Expr<'_>) {\n         if let ExprKind::MethodCall(_path, _, _args, _) = &expr.kind {\n             let def_id = cx.typeck_results().type_dependent_def_id(expr.hir_id).unwrap();\n@@ -67,7 +66,7 @@ impl <'tcx> LateLintPass<'tcx> for DisallowedMethod {\n                             .map(|s| s.to_ident_string())\n                             .collect::<Vec<_>>()\n                             .join(\"::\"),\n-                    )\n+                    ),\n                 );\n             }\n         }"}, {"sha": "46c9185268c6806d9fc9f8a91921abdc905c0442", "filename": "tests/ui/disallowed_method.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e1b3f85e984c9d4fba3ef5360892c88990b8391d/tests%2Fui%2Fdisallowed_method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1b3f85e984c9d4fba3ef5360892c88990b8391d/tests%2Fui%2Fdisallowed_method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdisallowed_method.rs?ref=e1b3f85e984c9d4fba3ef5360892c88990b8391d", "patch": "@@ -42,7 +42,7 @@ fn main() {\n     let f = Foo;\n     let c = ImplStruct;\n     let n = NormalStruct;\n-    let a = AttrStruct{ bad_method: 5 };\n+    let a = AttrStruct { bad_method: 5 };\n \n     // lint these\n     b.bad_method();"}]}