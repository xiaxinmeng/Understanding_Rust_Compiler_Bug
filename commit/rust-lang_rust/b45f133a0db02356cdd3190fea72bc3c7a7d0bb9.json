{"sha": "b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0NWYxMzNhMGRiMDIzNTZjZGQzMTkwZmVhNzJiYzNjN2E3ZDBiYjk=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-17T21:55:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-17T21:55:58Z"}, "message": "Rollup merge of #71070 - petrochenkov:nolldaround, r=Mark-Simulacrum\n\nrustbuild: Remove stage 0 LLD flavor workaround for MSVC", "tree": {"sha": "25d01231dc16fb3123920b71567000857fdf037c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/25d01231dc16fb3123920b71567000857fdf037c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJemiXuCRBK7hj4Ov3rIwAAdHIIAD37NK/JRF3waqie4aaTZsBF\nWN1icsOrUNONj9xeGK9jnt0x/NryTpF1Pn88O4joINzNc4He6x6aaegDEtWGBqHs\nPykay8kUq+3jY5JK+48Zk0IZstmaleBWQNY3Fc6MahHoXagvLBwiWuXehkQE1lOx\nvxchrGyTB6HmLkLqMhBmhkzJyaADuyiIUfo4jcF4UJDFyF4E5EcelzTCkbxpxdzW\nkf+R2xx8G6gmmhaLh8PPEt/0lYIgPOBKfrY9iUHnJqkYXWFAkw2Viu7IFVavwMuR\nTympU+CDMJcNM27VhB6hfidYGaij5Jb/l4zNraEX4VXRjLKHktxuLS3p7Yal1Mg=\n=tdQ4\n-----END PGP SIGNATURE-----\n", "payload": "tree 25d01231dc16fb3123920b71567000857fdf037c\nparent 43cf9d791baaac744487a37c4b14321ee1f3866b\nparent 8771319dfa545611452e23ae0f41b1b5f133514a\nauthor Dylan DPC <dylan.dpc@gmail.com> 1587160558 +0200\ncommitter GitHub <noreply@github.com> 1587160558 +0200\n\nRollup merge of #71070 - petrochenkov:nolldaround, r=Mark-Simulacrum\n\nrustbuild: Remove stage 0 LLD flavor workaround for MSVC\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "html_url": "https://github.com/rust-lang/rust/commit/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43cf9d791baaac744487a37c4b14321ee1f3866b", "url": "https://api.github.com/repos/rust-lang/rust/commits/43cf9d791baaac744487a37c4b14321ee1f3866b", "html_url": "https://github.com/rust-lang/rust/commit/43cf9d791baaac744487a37c4b14321ee1f3866b"}, {"sha": "8771319dfa545611452e23ae0f41b1b5f133514a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8771319dfa545611452e23ae0f41b1b5f133514a", "html_url": "https://github.com/rust-lang/rust/commit/8771319dfa545611452e23ae0f41b1b5f133514a"}], "stats": {"total": 21, "additions": 0, "deletions": 21}, "files": [{"sha": "a8c00c8c3ca88368764e4d5cb22068f9057671fc", "filename": "src/bootstrap/bin/rustc.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9/src%2Fbootstrap%2Fbin%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9/src%2Fbootstrap%2Fbin%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbin%2Frustc.rs?ref=b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "patch": "@@ -134,11 +134,6 @@ fn main() {\n             cmd.arg(format!(\"-Clinker={}\", host_linker));\n         }\n \n-        // Override linker flavor if necessary.\n-        if let Ok(host_linker_flavor) = env::var(\"RUSTC_HOST_LINKER_FLAVOR\") {\n-            cmd.arg(format!(\"-Clinker-flavor={}\", host_linker_flavor));\n-        }\n-\n         if let Ok(s) = env::var(\"RUSTC_HOST_CRT_STATIC\") {\n             if s == \"true\" {\n                 cmd.arg(\"-C\").arg(\"target-feature=+crt-static\");"}, {"sha": "8d6c2db792645ad0af93f7861768f0c576c4c116", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b45f133a0db02356cdd3190fea72bc3c7a7d0bb9/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=b45f133a0db02356cdd3190fea72bc3c7a7d0bb9", "patch": "@@ -969,27 +969,11 @@ impl<'a> Builder<'a> {\n         // See https://github.com/rust-lang/rust/issues/68647.\n         let can_use_lld = mode != Mode::Std;\n \n-        // FIXME: The beta compiler doesn't pick the `lld-link` flavor for `*-pc-windows-msvc`\n-        // Remove `RUSTC_HOST_LINKER_FLAVOR` when this is fixed\n-        let lld_linker_flavor = |linker: &Path, target: Interned<String>| {\n-            compiler.stage == 0\n-                && linker.file_name() == Some(OsStr::new(\"rust-lld\"))\n-                && target.contains(\"pc-windows-msvc\")\n-        };\n-\n         if let Some(host_linker) = self.linker(compiler.host, can_use_lld) {\n-            if lld_linker_flavor(host_linker, compiler.host) {\n-                cargo.env(\"RUSTC_HOST_LINKER_FLAVOR\", \"lld-link\");\n-            }\n-\n             cargo.env(\"RUSTC_HOST_LINKER\", host_linker);\n         }\n \n         if let Some(target_linker) = self.linker(target, can_use_lld) {\n-            if lld_linker_flavor(target_linker, target) {\n-                rustflags.arg(\"-Clinker-flavor=lld-link\");\n-            }\n-\n             let target = crate::envify(&target);\n             cargo.env(&format!(\"CARGO_TARGET_{}_LINKER\", target), target_linker);\n         }"}]}