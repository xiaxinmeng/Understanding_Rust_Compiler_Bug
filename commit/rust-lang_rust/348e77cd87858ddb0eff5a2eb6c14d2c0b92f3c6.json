{"sha": "348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "node_id": "C_kwDOAAsO6NoAKDM0OGU3N2NkODc4NThkZGIwZWZmNWEyZWI2YzE0ZDJjMGI5MmYzYzY", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-04-02T20:38:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-02T20:38:21Z"}, "message": "Rollup merge of #95593 - notriddle:notriddle/size-of-in-const-context, r=compiler-errors\n\ndiagnostics: add test case for bogus T:Sized suggestion\n\nCloses #69228", "tree": {"sha": "6de9025dc836e1e6aee9d55aca8903c267786cfc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6de9025dc836e1e6aee9d55aca8903c267786cfc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiSLQ9CRBK7hj4Ov3rIwAAILAIAAkFMbOhg292CE1bRy3BYNVI\nuukLpy/FLKfhfnl6ejdcLIG+Pl4u9Yz5ZF8lor2Vdm5XBj/YTgAaLqgJKPTUhc2k\nWRDMBL++pcuIu1wClmxaXhjeJIYrdqPw3Q/5j7CI8+0BqmfMCjFfTt7IsBJMuaaw\n74BYQLDuSRH6OzutdfFIohF0EA9O3aPh791wMezUowels9dqWD6/6cGv5I3GyWlu\nTyC79kKp6CZ5zTr4uxKYxREyqVqipzJeukOeeuaQKOrG9DVTVkSp3WViorv/6Trr\nmYUlTXA1wQUsI4tdevmW1aa7m7c8GZDj2kr/ZcRmSm/MXIkrDP33fEuFzY5KVAs=\n=Lf6b\n-----END PGP SIGNATURE-----\n", "payload": "tree 6de9025dc836e1e6aee9d55aca8903c267786cfc\nparent 30c0738d1f733120a52d9845b3cf592096e57e76\nparent 7620a5f52a238cbafdfcaa50edcc1acb6a0a3244\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1648931901 +0200\ncommitter GitHub <noreply@github.com> 1648931901 +0200\n\nRollup merge of #95593 - notriddle:notriddle/size-of-in-const-context, r=compiler-errors\n\ndiagnostics: add test case for bogus T:Sized suggestion\n\nCloses #69228\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "html_url": "https://github.com/rust-lang/rust/commit/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30c0738d1f733120a52d9845b3cf592096e57e76", "url": "https://api.github.com/repos/rust-lang/rust/commits/30c0738d1f733120a52d9845b3cf592096e57e76", "html_url": "https://github.com/rust-lang/rust/commit/30c0738d1f733120a52d9845b3cf592096e57e76"}, {"sha": "7620a5f52a238cbafdfcaa50edcc1acb6a0a3244", "url": "https://api.github.com/repos/rust-lang/rust/commits/7620a5f52a238cbafdfcaa50edcc1acb6a0a3244", "html_url": "https://github.com/rust-lang/rust/commit/7620a5f52a238cbafdfcaa50edcc1acb6a0a3244"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "efbdeec700811c5230a8144663cf2e1622702eea", "filename": "src/test/ui/consts/const-eval/size-of-t.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.rs", "raw_url": "https://github.com/rust-lang/rust/raw/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.rs?ref=348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "patch": "@@ -0,0 +1,13 @@\n+// https://github.com/rust-lang/rust/issues/69228\n+// Used to give bogus suggestion about T not being Sized.\n+\n+use std::mem::size_of;\n+\n+fn foo<T>() {\n+    let _arr: [u8; size_of::<T>()];\n+    //~^ ERROR generic parameters may not be used in const operations\n+    //~| NOTE cannot perform const operation\n+    //~| NOTE type parameters may not be used in const expressions\n+}\n+\n+fn main() {}"}, {"sha": "abe6410465e44f379deb41666b8ee60e4bf6032f", "filename": "src/test/ui/consts/const-eval/size-of-t.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsize-of-t.stderr?ref=348e77cd87858ddb0eff5a2eb6c14d2c0b92f3c6", "patch": "@@ -0,0 +1,11 @@\n+error: generic parameters may not be used in const operations\n+  --> $DIR/size-of-t.rs:7:30\n+   |\n+LL |     let _arr: [u8; size_of::<T>()];\n+   |                              ^ cannot perform const operation using `T`\n+   |\n+   = note: type parameters may not be used in const expressions\n+   = help: use `#![feature(generic_const_exprs)]` to allow generic const expressions\n+\n+error: aborting due to previous error\n+"}]}