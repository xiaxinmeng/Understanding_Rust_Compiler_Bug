{"sha": "99039689f0c097703c7258c339b05d1c88e54ff8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5MDM5Njg5ZjBjMDk3NzAzYzcyNThjMzM5YjA1ZDFjODhlNTRmZjg=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-04-24T10:50:05Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-05-10T17:41:10Z"}, "message": "Adjust mir-opt tests for new HIR without If", "tree": {"sha": "2664d0c06f169410006c19791c26ad8d21b019b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2664d0c06f169410006c19791c26ad8d21b019b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99039689f0c097703c7258c339b05d1c88e54ff8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99039689f0c097703c7258c339b05d1c88e54ff8", "html_url": "https://github.com/rust-lang/rust/commit/99039689f0c097703c7258c339b05d1c88e54ff8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99039689f0c097703c7258c339b05d1c88e54ff8/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5cccda1770f76b8184ea55e4735ce88f824f7fd8", "url": "https://api.github.com/repos/rust-lang/rust/commits/5cccda1770f76b8184ea55e4735ce88f824f7fd8", "html_url": "https://github.com/rust-lang/rust/commit/5cccda1770f76b8184ea55e4735ce88f824f7fd8"}], "stats": {"total": 47, "additions": 26, "deletions": 21}, "files": [{"sha": "e8ab690bb4648338259361aa40613c8d320a2d2b", "filename": "src/test/mir-opt/issue-38669.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fissue-38669.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fissue-38669.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue-38669.rs?ref=99039689f0c097703c7258c339b05d1c88e54ff8", "patch": "@@ -27,15 +27,17 @@ fn main() {\n //     bb3: {\n //         StorageLive(_4);\n //         _4 = _1;\n-//         switchInt(move _4) -> [false: bb5, otherwise: bb4];\n+//         FakeRead(ForMatchedPlace, _4);\n+//         switchInt(_4) -> [false: bb5, otherwise: bb4];\n //     }\n-//     bb4: {\n+//     ...\n+//     bb7: {\n //         _0 = ();\n //         StorageDead(_4);\n //         StorageDead(_1);\n //         return;\n //     }\n-//     bb5: {\n+//     bb8: {\n //         _3 = ();\n //         StorageDead(_4);\n //         _1 = const true;"}, {"sha": "e75955b9b2440765703822623452f968923d5b49", "filename": "src/test/mir-opt/loop_test.rs", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Floop_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Floop_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Floop_test.rs?ref=99039689f0c097703c7258c339b05d1c88e54ff8", "patch": "@@ -22,19 +22,20 @@ fn main() {\n //        resume;\n //    }\n //    ...\n-//    bb3: { // Entry into the loop\n+//    bb6: { // Entry into the loop\n //        _1 = ();\n-//        goto -> bb4;\n+//        StorageDead(_2);\n+//        goto -> bb7;\n //    }\n-//    bb4: { // The loop_block\n-//        falseUnwind -> [real: bb5, cleanup: bb1];\n+//    bb7: { // The loop_block\n+//        falseUnwind -> [real: bb8, cleanup: bb1];\n //    }\n-//    bb5: { // The loop body (body_block)\n-//        StorageLive(_5);\n-//        _5 = const 1i32;\n-//        FakeRead(ForLet, _5);\n-//        StorageDead(_5);\n-//        goto -> bb4;\n+//    bb8: { // The loop body (body_block)\n+//        StorageLive(_6);\n+//        _6 = const 1i32;\n+//        FakeRead(ForLet, _6);\n+//        StorageDead(_6);\n+//        goto -> bb7;\n //    }\n //    ...\n // END rustc.main.SimplifyCfg-qualify-consts.after.mir"}, {"sha": "622cc999830020cdf7b8dfbad8c5903d3aa570c6", "filename": "src/test/mir-opt/nll/region-subtyping-basic.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fnll%2Fregion-subtyping-basic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fnll%2Fregion-subtyping-basic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fnll%2Fregion-subtyping-basic.rs?ref=99039689f0c097703c7258c339b05d1c88e54ff8", "patch": "@@ -22,9 +22,9 @@ fn main() {\n \n // END RUST SOURCE\n // START rustc.main.nll.0.mir\n-// | '_#2r    | U0 | {bb2[0..=5], bb3[0..=1]}\n-// | '_#3r    | U0 | {bb2[1..=5], bb3[0..=1]}\n-// | '_#4r    | U0 | {bb2[4..=5], bb3[0..=1]}\n+// | '_#2r | U0 | {bb2[0..=8], bb3[0], bb6[0..=1]}\n+// | '_#3r | U0 | {bb2[1..=8], bb3[0], bb6[0..=1]}\n+// | '_#4r | U0 | {bb2[4..=8], bb3[0], bb6[0..=1]}\n // END rustc.main.nll.0.mir\n // START rustc.main.nll.0.mir\n // let _2: &'_#3r usize;"}, {"sha": "b2a99a6d446bbfe113c245ef2c0a33462371e38e", "filename": "src/test/mir-opt/simplify_if.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fsimplify_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99039689f0c097703c7258c339b05d1c88e54ff8/src%2Ftest%2Fmir-opt%2Fsimplify_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_if.rs?ref=99039689f0c097703c7258c339b05d1c88e54ff8", "patch": "@@ -5,13 +5,15 @@ fn main() {\n }\n \n // END RUST SOURCE\n-// START rustc.main.SimplifyBranches-initial.before.mir\n+// START rustc.main.SimplifyBranches-after-copy-prop.before.mir\n // bb0: {\n-//     switchInt(const false) -> [false: bb3, otherwise: bb2];\n+//     ...\n+//     switchInt(const false) -> [false: bb3, otherwise: bb1];\n // }\n-// END rustc.main.SimplifyBranches-initial.before.mir\n-// START rustc.main.SimplifyBranches-initial.after.mir\n+// END rustc.main.SimplifyBranches-after-copy-prop.before.mir\n+// START rustc.main.SimplifyBranches-after-copy-prop.after.mir\n // bb0: {\n+//     ...\n //     goto -> bb3;\n // }\n-// END rustc.main.SimplifyBranches-initial.after.mir\n+// END rustc.main.SimplifyBranches-after-copy-prop.after.mir"}]}