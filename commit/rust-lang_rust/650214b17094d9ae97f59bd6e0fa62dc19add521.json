{"sha": "650214b17094d9ae97f59bd6e0fa62dc19add521", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1MDIxNGIxNzA5NGQ5YWU5N2Y1OWJkNmUwZmE2MmRjMTlhZGQ1MjE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-27T16:07:44Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-27T22:12:30Z"}, "message": "rollup merge of #18326 : sfackler/cfg-final", "tree": {"sha": "e5afdf711aa726f3fadcf696b056cf9fe2552aa8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e5afdf711aa726f3fadcf696b056cf9fe2552aa8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/650214b17094d9ae97f59bd6e0fa62dc19add521", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/650214b17094d9ae97f59bd6e0fa62dc19add521", "html_url": "https://github.com/rust-lang/rust/commit/650214b17094d9ae97f59bd6e0fa62dc19add521", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/650214b17094d9ae97f59bd6e0fa62dc19add521/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f1118cc084fef5d3a07d9672c2c952a266195963", "url": "https://api.github.com/repos/rust-lang/rust/commits/f1118cc084fef5d3a07d9672c2c952a266195963", "html_url": "https://github.com/rust-lang/rust/commit/f1118cc084fef5d3a07d9672c2c952a266195963"}, {"sha": "9acce10fe7f3103dc1e65168e956fe0e53bca117", "url": "https://api.github.com/repos/rust-lang/rust/commits/9acce10fe7f3103dc1e65168e956fe0e53bca117", "html_url": "https://github.com/rust-lang/rust/commit/9acce10fe7f3103dc1e65168e956fe0e53bca117"}], "stats": {"total": 22, "additions": 5, "deletions": 17}, "files": [{"sha": "72c62a173fc30b88bf18992e5f86448cc7bd397d", "filename": "src/libsyntax/config.rs", "status": "modified", "additions": 5, "deletions": 17, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/650214b17094d9ae97f59bd6e0fa62dc19add521/src%2Flibsyntax%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650214b17094d9ae97f59bd6e0fa62dc19add521/src%2Flibsyntax%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fconfig.rs?ref=650214b17094d9ae97f59bd6e0fa62dc19add521", "patch": "@@ -250,30 +250,18 @@ fn impl_item_in_cfg(cx: &mut Context, impl_item: &ast::ImplItem) -> bool {\n // Determine if an item should be translated in the current crate\n // configuration based on the item's attributes\n fn in_cfg(diagnostic: &SpanHandler, cfg: &[P<ast::MetaItem>], attrs: &[ast::Attribute]) -> bool {\n-    let mut in_cfg = false;\n-    let mut seen_cfg = false;\n-    for attr in attrs.iter() {\n+    attrs.iter().all(|attr| {\n         let mis = match attr.node.value.node {\n             ast::MetaList(_, ref mis) if attr.check_name(\"cfg\") => mis,\n-            _ => continue\n+            _ => return true\n         };\n \n         if mis.len() != 1 {\n             diagnostic.span_err(attr.span, \"expected 1 cfg-pattern\");\n-            return false;\n+            return true;\n         }\n \n-        if seen_cfg {\n-            diagnostic.span_err(attr.span, \"The semantics of multiple `#[cfg(..)]` attributes on \\\n-                                            same item are changing from the union of the cfgs to \\\n-                                            the intersection of the cfgs. Change `#[cfg(a)] \\\n-                                            #[cfg(b)]` to `#[cfg(any(a, b))]`.\");\n-            return false;\n-        }\n-\n-        seen_cfg = true;\n-        in_cfg |= attr::cfg_matches(diagnostic, cfg, &*mis[0]);\n-    }\n-    in_cfg | !seen_cfg\n+        attr::cfg_matches(diagnostic, cfg, &*mis[0])\n+    })\n }\n "}]}