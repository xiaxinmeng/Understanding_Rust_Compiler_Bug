{"sha": "46af1890a51db4b7f6ca122123704fef65980a5c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ2YWYxODkwYTUxZGI0YjdmNmNhMTIyMTIzNzA0ZmVmNjU5ODBhNWM=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-28T08:10:35Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-28T08:10:35Z"}, "message": "Drop MIRIFLAGS from \"no rebuild\" test", "tree": {"sha": "f1ec15e1dcebe2585bc524d320eb38bcc40f357f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1ec15e1dcebe2585bc524d320eb38bcc40f357f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/46af1890a51db4b7f6ca122123704fef65980a5c", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYDtP+xUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLhV/AEA3d8j/wbn3o58+UWL0VASoIT2ThtR\nlu5sl3ThDADa2aUBAJQTHpQarGcfqfvf/yYe3qfZRL/MGkwkYbHkNTRGk3AE\n=xzBk\n-----END PGP SIGNATURE-----", "payload": "tree f1ec15e1dcebe2585bc524d320eb38bcc40f357f\nparent 9c1342b152a124c4f0e8869f626bb1a6b1ef072f\nauthor hyd-dev <yd-huang@outlook.com> 1614499835 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1614499835 +0800\n\nDrop MIRIFLAGS from \"no rebuild\" test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/46af1890a51db4b7f6ca122123704fef65980a5c", "html_url": "https://github.com/rust-lang/rust/commit/46af1890a51db4b7f6ca122123704fef65980a5c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/46af1890a51db4b7f6ca122123704fef65980a5c/comments", "author": null, "committer": null, "parents": [{"sha": "9c1342b152a124c4f0e8869f626bb1a6b1ef072f", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c1342b152a124c4f0e8869f626bb1a6b1ef072f", "html_url": "https://github.com/rust-lang/rust/commit/9c1342b152a124c4f0e8869f626bb1a6b1ef072f"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "36c6af87d89462d79f2a57329c7981b741d6ec6d", "filename": "test-cargo-miri/run-test.py", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/46af1890a51db4b7f6ca122123704fef65980a5c/test-cargo-miri%2Frun-test.py", "raw_url": "https://github.com/rust-lang/rust/raw/46af1890a51db4b7f6ca122123704fef65980a5c/test-cargo-miri%2Frun-test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Frun-test.py?ref=46af1890a51db4b7f6ca122123704fef65980a5c", "patch": "@@ -73,20 +73,19 @@ def test_no_rebuild(name, cmd, env={}):\n         fail(\"Something was being rebuilt when it should not be (or we got no output)\");\n \n def test_cargo_miri_run():\n-    default_env={\n-        'MIRIFLAGS': \"-Zmiri-disable-isolation\",\n-        'MIRITESTVAR': \"wrongval\", # make sure the build.rs value takes precedence\n-    }\n     test(\"`cargo miri run` (no isolation)\",\n         cargo_miri(\"run\"),\n         \"run.default.stdout.ref\", \"run.default.stderr.ref\",\n         stdin=b'12\\n21\\n',\n-        env=default_env,\n+        env={\n+            'MIRIFLAGS': \"-Zmiri-disable-isolation\",\n+            'MIRITESTVAR': \"wrongval\", # make sure the build.rs value takes precedence\n+        },\n     )\n     # Special test: run it again *without* `-q` to make sure nothing is being rebuilt (Miri issue #1722)\n     test_no_rebuild(\"`cargo miri run` (no rebuild, no isolation)\",\n         cargo_miri(\"run\", quiet=False) + [\"--\", \"\"],\n-        env=default_env,\n+        env={'MIRITESTVAR': \"wrongval\"},\n     )\n     test(\"`cargo miri run` (with arguments and target)\",\n         cargo_miri(\"run\") + [\"--bin\", \"cargo-miri-test\", \"--\", \"hello world\", '\"hello world\"'],"}]}