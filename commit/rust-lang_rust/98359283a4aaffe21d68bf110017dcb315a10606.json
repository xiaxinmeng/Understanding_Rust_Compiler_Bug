{"sha": "98359283a4aaffe21d68bf110017dcb315a10606", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4MzU5MjgzYTRhYWZmZTIxZDY4YmYxMTAwMTdkY2IzMTVhMTA2MDY=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-03-22T16:40:24Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-03-26T23:05:54Z"}, "message": "rustc_trans: move save to librustc_save_analysis.", "tree": {"sha": "3367b98b5a2a24be167b2cafa84b8fe2aa4ed4d6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3367b98b5a2a24be167b2cafa84b8fe2aa4ed4d6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98359283a4aaffe21d68bf110017dcb315a10606", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98359283a4aaffe21d68bf110017dcb315a10606", "html_url": "https://github.com/rust-lang/rust/commit/98359283a4aaffe21d68bf110017dcb315a10606", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98359283a4aaffe21d68bf110017dcb315a10606/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5efdde0de161a5b374e16e20d09322e5a0eba4f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/5efdde0de161a5b374e16e20d09322e5a0eba4f9", "html_url": "https://github.com/rust-lang/rust/commit/5efdde0de161a5b374e16e20d09322e5a0eba4f9"}], "stats": {"total": 70, "additions": 52, "deletions": 18}, "files": [{"sha": "ae40a8e7f70dcfcc1953a764e8612612b884ab0f", "filename": "mk/crates.mk", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/mk%2Fcrates.mk", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/mk%2Fcrates.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcrates.mk?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -57,7 +57,7 @@ TARGET_CRATES := libc std term \\\n RUSTC_CRATES := rustc rustc_typeck rustc_mir rustc_borrowck rustc_resolve rustc_driver \\\n                 rustc_trans rustc_back rustc_llvm rustc_privacy rustc_lint \\\n                 rustc_data_structures rustc_front rustc_platform_intrinsics \\\n-                rustc_plugin rustc_metadata rustc_passes\n+                rustc_plugin rustc_metadata rustc_passes rustc_save_analysis\n HOST_CRATES := syntax syntax_ext $(RUSTC_CRATES) rustdoc fmt_macros \\\n \t\tflate arena graphviz rbml log serialize\n TOOLS := compiletest rustdoc rustc rustbook error_index_generator\n@@ -102,7 +102,7 @@ DEPS_rustc_data_structures := std log serialize\n DEPS_rustc_driver := arena flate getopts graphviz libc rustc rustc_back rustc_borrowck \\\n                      rustc_typeck rustc_mir rustc_resolve log syntax serialize rustc_llvm \\\n \t             rustc_trans rustc_privacy rustc_lint rustc_front rustc_plugin \\\n-                     rustc_metadata syntax_ext rustc_passes\n+                     rustc_metadata syntax_ext rustc_passes rustc_save_analysis\n DEPS_rustc_front := std syntax log serialize\n DEPS_rustc_lint := rustc log syntax\n DEPS_rustc_llvm := native:rustllvm libc std rustc_bitflags\n@@ -116,6 +116,7 @@ DEPS_rustc_privacy := rustc rustc_front log syntax\n DEPS_rustc_trans := arena flate getopts graphviz libc rustc rustc_back rustc_mir \\\n                     log syntax serialize rustc_llvm rustc_front rustc_platform_intrinsics \\\n \t\t\t\t\trustc_const_eval\n+DEPS_rustc_save_analysis := rustc log syntax rustc_front\n DEPS_rustc_typeck := rustc syntax rustc_front rustc_platform_intrinsics rustc_const_eval\n \n DEPS_rustdoc := rustc rustc_driver native:hoedown serialize getopts \\"}, {"sha": "c8c517934443d41dd47a9fe0568d53ac46396631", "filename": "src/librustc_driver/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_driver%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_driver%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2FCargo.toml?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -25,6 +25,7 @@ rustc_plugin = { path = \"../librustc_plugin\" }\n rustc_passes = { path = \"../librustc_passes\" }\n rustc_privacy = { path = \"../librustc_privacy\" }\n rustc_resolve = { path = \"../librustc_resolve\" }\n+rustc_save_analysis = { path = \"../librustc_save_analysis\" }\n rustc_trans = { path = \"../librustc_trans\" }\n rustc_typeck = { path = \"../librustc_typeck\" }\n rustc_metadata = { path = \"../librustc_metadata\" }"}, {"sha": "d8d1cf5a026b61a32c5087a020083d03f28a43b0", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -48,6 +48,7 @@ extern crate rustc_privacy;\n extern crate rustc_metadata;\n extern crate rustc_mir;\n extern crate rustc_resolve;\n+extern crate rustc_save_analysis;\n extern crate rustc_trans;\n extern crate rustc_typeck;\n extern crate serialize;\n@@ -62,8 +63,8 @@ use driver::CompileController;\n use pretty::{PpMode, UserIdentifiedItem};\n \n use rustc_resolve as resolve;\n+use rustc_save_analysis as save;\n use rustc_trans::back::link;\n-use rustc_trans::save;\n use rustc::session::{config, Session, build_session, CompileResult};\n use rustc::session::config::{Input, PrintRequest, OutputType, ErrorOutputType};\n use rustc::session::config::{get_unstable_features_setting, OptionStability};"}, {"sha": "a0cf70b57a9d4a415d2d43dcba2452d5eb9cc494", "filename": "src/librustc_save_analysis/Cargo.toml", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2FCargo.toml?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -0,0 +1,15 @@\n+[package]\n+authors = [\"The Rust Project Developers\"]\n+name = \"rustc_save_analysis\"\n+version = \"0.0.0\"\n+\n+[lib]\n+name = \"rustc_save_analysis\"\n+path = \"lib.rs\"\n+crate-type = [\"dylib\"]\n+\n+[dependencies]\n+log = { path = \"../liblog\" }\n+rustc = { path = \"../librustc\" }\n+rustc_front = { path = \"../librustc_front\" }\n+syntax = { path = \"../libsyntax\" }"}, {"sha": "3021d4e9820b7fd53f1332838b7c5d33da677366", "filename": "src/librustc_save_analysis/csv_dumper.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fcsv_dumper.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fcsv_dumper.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fcsv_dumper.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -10,7 +10,7 @@\n \n use std::io::Write;\n \n-use middle::def_id::{DefId, DefIndex};\n+use rustc::middle::def_id::{DefId, DefIndex};\n use syntax::codemap::Span;\n \n use super::data::*;", "previous_filename": "src/librustc_trans/save/csv_dumper.rs"}, {"sha": "997a635f69e0d1a90068faceeef5b5f3c2abd926", "filename": "src/librustc_save_analysis/data.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdata.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -15,7 +15,7 @@\n \n use std::hash::Hasher;\n \n-use middle::def_id::DefId;\n+use rustc::middle::def_id::DefId;\n use rustc::ty;\n use syntax::ast::{CrateNum, NodeId};\n use syntax::codemap::Span;", "previous_filename": "src/librustc_trans/save/data.rs"}, {"sha": "b0cc7926f4e3491331053c2824ab9575c8f11f3a", "filename": "src/librustc_save_analysis/dump.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdump.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdump.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdump.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "previous_filename": "src/librustc_trans/save/dump.rs"}, {"sha": "88b72ccf3296c233d4ae95781fe6939f0635f35b", "filename": "src/librustc_save_analysis/dump_visitor.rs", "status": "renamed", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdump_visitor.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -27,10 +27,9 @@\n //! is used for recording the output in a format-agnostic way (see CsvDumper\n //! for an example).\n \n-use session::Session;\n-\n-use middle::def::Def;\n-use middle::def_id::DefId;\n+use rustc::middle::def::Def;\n+use rustc::middle::def_id::DefId;\n+use rustc::session::Session;\n use rustc::ty::{self, TyCtxt};\n \n use std::collections::HashSet;", "previous_filename": "src/librustc_trans/save/dump_visitor.rs"}, {"sha": "f3a7076f955c08da92e874e870d0c4f7736d6ef7", "filename": "src/librustc_save_analysis/lib.rs", "status": "renamed", "additions": 25, "deletions": 7, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Flib.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -8,19 +8,37 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![crate_name = \"rustc_save_analysis\"]\n+#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![crate_type = \"dylib\"]\n+#![crate_type = \"rlib\"]\n+#![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n+      html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n+      html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n+#![cfg_attr(not(stage0), deny(warnings))]\n+\n+#![feature(custom_attribute)]\n+#![allow(unused_attributes)]\n+#![feature(rustc_private)]\n+#![feature(staged_api)]\n+\n+extern crate rustc;\n+extern crate rustc_front;\n+\n+#[macro_use] extern crate log;\n+#[macro_use] extern crate syntax;\n+\n+use rustc_front::{hir, lowering};\n+use rustc::front::map::NodeItem;\n+use rustc::middle::def::Def;\n+use rustc::middle::def_id::DefId;\n+use rustc::session::config::CrateType::CrateTypeExecutable;\n use rustc::ty::{self, TyCtxt};\n-use middle::def::Def;\n-use middle::def_id::DefId;\n \n use std::env;\n use std::fs::{self, File};\n use std::path::{Path, PathBuf};\n \n-use rustc_front;\n-use rustc_front::{hir, lowering};\n-use rustc::front::map::NodeItem;\n-use rustc::session::config::CrateType::CrateTypeExecutable;\n-\n use syntax::ast::{self, NodeId, PatKind};\n use syntax::ast_util;\n use syntax::codemap::*;", "previous_filename": "src/librustc_trans/save/mod.rs"}, {"sha": "4080607eed51dba11744b73e1f909208129e1720", "filename": "src/librustc_save_analysis/span_utils.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fspan_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_save_analysis%2Fspan_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fspan_utils.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -10,7 +10,7 @@\n \n use rustc::session::Session;\n \n-use save::generated_code;\n+use generated_code;\n \n use std::cell::Cell;\n use std::env;", "previous_filename": "src/librustc_trans/save/span_utils.rs"}, {"sha": "80d805d843e37bc8ae826224013242b25e77d176", "filename": "src/librustc_trans/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_trans%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98359283a4aaffe21d68bf110017dcb315a10606/src%2Flibrustc_trans%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Flib.rs?ref=98359283a4aaffe21d68bf110017dcb315a10606", "patch": "@@ -77,7 +77,6 @@ pub mod back {\n pub mod diagnostics;\n \n pub mod trans;\n-pub mod save;\n \n pub mod lib {\n     pub use llvm;"}]}