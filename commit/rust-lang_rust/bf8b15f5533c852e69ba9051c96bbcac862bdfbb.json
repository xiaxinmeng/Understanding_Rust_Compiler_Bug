{"sha": "bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmOGIxNWY1NTMzYzg1MmU2OWJhOTA1MWM5NmJiY2FjODYyYmRmYmI=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2021-04-13T03:32:11Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2021-05-08T18:40:27Z"}, "message": "Bump stdarch submodule", "tree": {"sha": "fd8996741da6b256ddc578ce785b715c2447ab84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd8996741da6b256ddc578ce785b715c2447ab84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "html_url": "https://github.com/rust-lang/rust/commit/bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d44f647ffcff0e1ff2c0f45b6a0ce9796d80f1ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/d44f647ffcff0e1ff2c0f45b6a0ce9796d80f1ca", "html_url": "https://github.com/rust-lang/rust/commit/d44f647ffcff0e1ff2c0f45b6a0ce9796d80f1ca"}], "stats": {"total": 62, "additions": 28, "deletions": 34}, "files": [{"sha": "6c4f4e1990b76be8a07bde1956d2e3452fd55ee4", "filename": "library/stdarch", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstdarch?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1 +1 @@\n-Subproject commit 19f5459dd0f89e466b7bcaa0f69ecca90f21a4d1\n+Subproject commit 6c4f4e1990b76be8a07bde1956d2e3452fd55ee4"}, {"sha": "9add1f8d5a3592615956cefb6ccb69ab5fe1a4e5", "filename": "src/test/ui/consts/const_arg_local.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.rs?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,13 +1,11 @@\n-// only-x86_64\n+#![feature(rustc_attrs)]\n \n-#[cfg(target_arch = \"x86\")]\n-use std::arch::x86::*;\n-#[cfg(target_arch = \"x86_64\")]\n-use std::arch::x86_64::*;\n+#[rustc_args_required_const(0)]\n+fn foo(_imm8: i32) {}\n \n-unsafe fn pclmul(a: __m128i, b: __m128i) -> __m128i {\n+fn bar() {\n     let imm8 = 3;\n-    _mm_clmulepi64_si128(a, b, imm8) //~ ERROR argument 3 is required to be a constant\n+    foo(imm8) //~ ERROR argument 1 is required to be a constant\n }\n \n fn main() {}"}, {"sha": "bad85471a6b376df719c9574b98488ba457176b7", "filename": "src/test/ui/consts/const_arg_local.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_local.stderr?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,8 +1,8 @@\n-error: argument 3 is required to be a constant\n-  --> $DIR/const_arg_local.rs:10:5\n+error: argument 1 is required to be a constant\n+  --> $DIR/const_arg_local.rs:8:5\n    |\n-LL |     _mm_clmulepi64_si128(a, b, imm8)\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     foo(imm8)\n+   |     ^^^^^^^^^\n \n error: aborting due to previous error\n "}, {"sha": "cea3817550eb2b101215ac0f16289dd03d53e38d", "filename": "src/test/ui/consts/const_arg_promotable.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.rs?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,12 +1,10 @@\n-// only-x86_64\n+#![feature(rustc_attrs)]\n \n-#[cfg(target_arch = \"x86\")]\n-use std::arch::x86::*;\n-#[cfg(target_arch = \"x86_64\")]\n-use std::arch::x86_64::*;\n+#[rustc_args_required_const(0)]\n+fn foo(_imm8: i32) {}\n \n-unsafe fn pclmul(a: __m128i, b: __m128i) -> __m128i {\n-    _mm_clmulepi64_si128(a, b, *&mut 42) //~ ERROR argument 3 is required to be a constant\n+fn bar() {\n+    foo(*&mut 42) //~ ERROR argument 1 is required to be a constant\n }\n \n fn main() {}"}, {"sha": "b24b245b3ce0c867f5539e035711208e6b5400cc", "filename": "src/test/ui/consts/const_arg_promotable.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_promotable.stderr?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,8 +1,8 @@\n-error: argument 3 is required to be a constant\n-  --> $DIR/const_arg_promotable.rs:9:5\n+error: argument 1 is required to be a constant\n+  --> $DIR/const_arg_promotable.rs:7:5\n    |\n-LL |     _mm_clmulepi64_si128(a, b, *&mut 42)\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     foo(*&mut 42)\n+   |     ^^^^^^^^^^^^^\n \n error: aborting due to previous error\n "}, {"sha": "3dd3a2ffaf3cba83f332c2fca31e2b85592a8a5f", "filename": "src/test/ui/consts/const_arg_wrapper.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.rs?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,12 +1,10 @@\n-// only-x86_64\n+#![feature(rustc_attrs)]\n \n-#[cfg(target_arch = \"x86\")]\n-use std::arch::x86::*;\n-#[cfg(target_arch = \"x86_64\")]\n-use std::arch::x86_64::*;\n+#[rustc_args_required_const(0)]\n+fn foo(_imm8: i32) {}\n \n-unsafe fn pclmul(a: __m128i, b: __m128i, imm8: i32) -> __m128i {\n-    _mm_clmulepi64_si128(a, b, imm8) //~ ERROR argument 3 is required to be a constant\n+fn bar(imm8: i32) {\n+    foo(imm8) //~ ERROR argument 1 is required to be a constant\n }\n \n fn main() {}"}, {"sha": "9cd95a2020fcd1c2b2e0f2ddb0039568e7946e06", "filename": "src/test/ui/consts/const_arg_wrapper.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bf8b15f5533c852e69ba9051c96bbcac862bdfbb/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst_arg_wrapper.stderr?ref=bf8b15f5533c852e69ba9051c96bbcac862bdfbb", "patch": "@@ -1,8 +1,8 @@\n-error: argument 3 is required to be a constant\n-  --> $DIR/const_arg_wrapper.rs:9:5\n+error: argument 1 is required to be a constant\n+  --> $DIR/const_arg_wrapper.rs:7:5\n    |\n-LL |     _mm_clmulepi64_si128(a, b, imm8)\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     foo(imm8)\n+   |     ^^^^^^^^^\n \n error: aborting due to previous error\n "}]}