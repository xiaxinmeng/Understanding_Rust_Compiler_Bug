{"sha": "b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzYzkwZWZjYjQzYTE5ZDRjNjVlYjdjYmQ0ZjQwNmVkZTdiMmE3ZjM=", "commit": {"author": {"name": "Pascal Hertleif", "email": "killercup@gmail.com", "date": "2017-08-03T19:17:12Z"}, "committer": {"name": "Pascal Hertleif", "email": "killercup@gmail.com", "date": "2017-08-03T19:21:59Z"}, "message": "Generate version index for docs domain index\n\nUses basically the same code as the lint docs page as I didn't want to\nreinvent anything: A simple python script (inline in deploy script)\nwrites an array of versions to a JSON file, which gets turned into a\nlist of links using a bit of angular.js code.\n\nFixes #1917", "tree": {"sha": "48ff5c1c9a9b22c1df037d98b2fe4709ab87c1a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/48ff5c1c9a9b22c1df037d98b2fe4709ab87c1a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "html_url": "https://github.com/rust-lang/rust/commit/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3/comments", "author": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "committer": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0527dbaddf367b760cf1298c73bf489da5e87dec", "url": "https://api.github.com/repos/rust-lang/rust/commits/0527dbaddf367b760cf1298c73bf489da5e87dec", "html_url": "https://github.com/rust-lang/rust/commit/0527dbaddf367b760cf1298c73bf489da5e87dec"}], "stats": {"total": 83, "additions": 83, "deletions": 0}, "files": [{"sha": "8f6abc93ecfc165895ce2c5bcaac46a6988d43de", "filename": ".github/deploy.sh", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3/.github%2Fdeploy.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3/.github%2Fdeploy.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fdeploy.sh?ref=b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "patch": "@@ -33,6 +33,19 @@ if [ -n \"$TRAVIS_TAG\" ]; then\n     ln -s \"$TRAVIS_TAG\" out/current\n fi\n \n+# Generate version index that is shown as root index page\n+(\n+    cp util/gh-pages/versions.html out/index.html\n+\n+    cd out\n+    python -c '\\\n+        import os, json;\\\n+        print json.dumps([\\\n+            dir for dir in os.listdir(\".\")\\\n+            if not dir.startswith(\".\") and os.path.isdir(dir)\\\n+        ])' > versions.json\n+)\n+\n # Pull requests and commits to other branches shouldn't try to deploy, just build to verify\n if [ \"$TRAVIS_PULL_REQUEST\" != \"false\" ] || [ \"$TRAVIS_BRANCH\" != \"$SOURCE_BRANCH\" ]; then\n     # Tags should deploy"}, {"sha": "baa44bf4676ddeb68e1d5ac28fa97c9c2ad06f6c", "filename": "util/gh-pages/versions.html", "status": "added", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3/util%2Fgh-pages%2Fversions.html", "raw_url": "https://github.com/rust-lang/rust/raw/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3/util%2Fgh-pages%2Fversions.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fgh-pages%2Fversions.html?ref=b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "patch": "@@ -0,0 +1,70 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\"/>\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n+\n+    <title>Clippy</title>\n+\n+    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css\"/>\n+    <style>\n+        [ng\\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak { display: none !important; }\n+    </style>\n+</head>\n+<body>\n+    <div class=\"container\" ng-app=\"clippy\" ng-controller=\"docVersions\">\n+        <div class=\"page-header\">\n+            <h1>Clippy lints documention</h1>\n+        </div>\n+\n+        <div ng-cloak>\n+            <div class=\"alert alert-info\" role=\"alert\" ng-if=\"loading\">\n+                Loading&#x2026;\n+            </div>\n+            <div class=\"alert alert-danger\" role=\"alert\" ng-if=\"error\">\n+                Error loading versions!<br/>\n+                You can always try to get <a href=\"master/index.html\">the master branch docs</a>.\n+            </div>\n+\n+            <article class=\"panel panel-default\" ng-show=\"data\">\n+                <div class=\"panel-heading\">\n+                    <h3 class=\"panel-title\">\n+                        Available versions\n+                    </h3>\n+                </div>\n+\n+                <ul class=\"list-group\">\n+                    <a class=\"list-group-item\" ng-repeat=\"version in data | orderBy\"\n+                       href=\"./{{version}}/index.html\">\n+                        {{version}}\n+                    </a>\n+                </ul>\n+            </article>\n+        </div>\n+    </div>\n+\n+    <a href=\"https://github.com/rust-lang-nursery/rust-clippy\">\n+        <img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\"/>\n+    </a>\n+\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.12/angular.min.js\"></script>\n+    <script>\n+        angular.module('clippy', [])\n+        .controller('docVersions', function ($scope, $http) {\n+            $scope.loading = true;\n+\n+            $http.get('./versions.json')\n+            .success(function (data) {\n+                $scope.data = data;\n+                $scope.loading = false;\n+            })\n+            .error(function (data) {\n+                $scope.error = data;\n+                $scope.loading = false;\n+            });\n+        })\n+        ;\n+    </script>\n+</body>\n+</html>"}]}