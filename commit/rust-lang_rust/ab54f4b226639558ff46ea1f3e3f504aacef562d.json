{"sha": "ab54f4b226639558ff46ea1f3e3f504aacef562d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiNTRmNGIyMjY2Mzk1NThmZjQ2ZWExZjNlM2Y1MDRhYWNlZjU2MmQ=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-05-08T21:36:44Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-05-11T23:03:05Z"}, "message": "rustc: Remove #![unstable] annotation\n\nThese are now no longer necessary with `-Z force-unstable-if-unmarked`", "tree": {"sha": "1f3c2871920222119755d406e0ec9c5b66e46dc5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f3c2871920222119755d406e0ec9c5b66e46dc5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab54f4b226639558ff46ea1f3e3f504aacef562d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab54f4b226639558ff46ea1f3e3f504aacef562d", "html_url": "https://github.com/rust-lang/rust/commit/ab54f4b226639558ff46ea1f3e3f504aacef562d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab54f4b226639558ff46ea1f3e3f504aacef562d/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af0e16c852662d23097ce1821ff04c1676aed20f", "url": "https://api.github.com/repos/rust-lang/rust/commits/af0e16c852662d23097ce1821ff04c1676aed20f", "html_url": "https://github.com/rust-lang/rust/commit/af0e16c852662d23097ce1821ff04c1676aed20f"}], "stats": {"total": 218, "additions": 121, "deletions": 97}, "files": [{"sha": "c4c1635aa2a5a34cdfeae7b881536d008823f049", "filename": "src/libarena/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibarena%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibarena%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibarena%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -19,7 +19,7 @@\n //! objects of a single type.\n \n #![crate_name = \"arena\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -32,7 +32,7 @@\n #![feature(core_intrinsics)]\n #![feature(dropck_eyepatch)]\n #![feature(generic_param_attrs)]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![cfg_attr(test, feature(test))]\n \n #![allow(deprecated)]"}, {"sha": "e0bea884f31c5a667245b373ffcc8744261f0fbb", "filename": "src/libflate/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibflate%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibflate%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibflate%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,7 @@\n //! [mz]: https://code.google.com/p/miniz/\n \n #![crate_name = \"flate\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -25,7 +25,7 @@\n #![deny(warnings)]\n \n #![feature(libc)]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![feature(unique)]\n #![cfg_attr(test, feature(rand))]\n "}, {"sha": "641a42b08188f8f64b9abfc3e8ee71e2dd798765", "filename": "src/libfmt_macros/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibfmt_macros%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibfmt_macros%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibfmt_macros%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,7 @@\n //! generated instead.\n \n #![crate_name = \"fmt_macros\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -25,7 +25,7 @@\n        test(attr(deny(warnings))))]\n #![deny(warnings)]\n \n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![feature(unicode)]\n \n pub use self::Piece::*;"}, {"sha": "c69c68ba59c011a65e6b3aaa873f4fdb690d584e", "filename": "src/libgetopts/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibgetopts%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibgetopts%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgetopts%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -78,9 +78,9 @@\n //! ```\n \n #![crate_name = \"getopts\"]\n-#![unstable(feature = \"rustc_private\",\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\",\n             reason = \"use the crates.io `getopts` library instead\",\n-            issue = \"27812\")]\n+            issue = \"27812\"))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -91,7 +91,7 @@\n \n #![deny(missing_docs)]\n #![deny(warnings)]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n use self::Name::*;\n use self::HasArg::*;"}, {"sha": "2c6744e7c90533d7cf045c9fab97b9e294e3fb2c", "filename": "src/libgraphviz/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibgraphviz%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibgraphviz%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgraphviz%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -284,8 +284,8 @@\n //! * [DOT language](http://www.graphviz.org/doc/info/lang.html)\n \n #![crate_name = \"graphviz\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\","}, {"sha": "68c5d49591839216c8e4dec12b29b084ea7529d0", "filename": "src/libproc_macro_plugin/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibproc_macro_plugin%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibproc_macro_plugin%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro_plugin%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -72,7 +72,7 @@\n //! }\n //! ```\n #![crate_name = \"proc_macro_plugin\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n #![feature(plugin_registrar)]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n@@ -81,9 +81,9 @@\n        html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![deny(warnings)]\n \n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n+#![cfg_attr(stage0, feature(rustc_private))]\n \n extern crate rustc_plugin;\n extern crate syntax;"}, {"sha": "5cf26ea8bfca596db6575dc9ec4cc46066f1cc88", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -36,15 +35,17 @@\n #![feature(nonzero)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n #![feature(slice_patterns)]\n #![feature(specialization)]\n-#![feature(staged_api)]\n #![feature(unboxed_closures)]\n #![feature(discriminant_value)]\n #![feature(sort_unstable)]\n #![feature(trace_macros)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n #![recursion_limit=\"128\"]\n \n extern crate arena;"}, {"sha": "69eabfe2ac0bf70c176f02e5fb23b59e1817142b", "filename": "src/librustc_back/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_back%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_back%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -22,7 +22,6 @@\n //! build speedups.\n \n #![crate_name = \"rustc_back\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -34,10 +33,12 @@\n #![feature(const_fn)]\n #![feature(libc)]\n #![feature(rand)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![cfg_attr(test, feature(rand))]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate syntax;\n extern crate libc;\n extern crate serialize;"}, {"sha": "23558d82883423266f399ad98173c0f78f8cb21a", "filename": "src/librustc_bitflags/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_bitflags%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_bitflags%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_bitflags%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -11,11 +11,11 @@\n \n #![crate_name = \"rustc_bitflags\"]\n #![feature(associated_consts)]\n-#![feature(staged_api)]\n #![crate_type = \"rlib\"]\n #![no_std]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![deny(warnings)]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n //! A typesafe bitmask flag generator.\n "}, {"sha": "617326808970ba082a763ee66b15075dd0df4f94", "filename": "src/librustc_borrowck/lib.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_borrowck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_borrowck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_borrowck\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -21,10 +20,13 @@\n \n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(associated_consts)]\n #![feature(nonzero)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n #[macro_use] extern crate log;\n #[macro_use] extern crate syntax;\n extern crate syntax_pos;"}, {"sha": "8142829e81601ebba952ec5d57e7df90cc39a443", "filename": "src/librustc_const_eval/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_const_eval%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_const_eval%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_eval%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,23 +15,24 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_const_eval\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n       html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n       html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![deny(warnings)]\n \n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(rustc_diagnostic_macros)]\n #![feature(slice_patterns)]\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(const_fn)]\n #![feature(i128_type)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate arena;\n #[macro_use] extern crate syntax;\n #[macro_use] extern crate log;"}, {"sha": "528170781ea7519cb1a3cf75d205bf8e48373e80", "filename": "src/librustc_const_math/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_const_math%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_const_math%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_math%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,20 +15,21 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_const_math\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n       html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n       html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![deny(warnings)]\n \n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(const_fn)]\n #![feature(i128)]\n #![feature(i128_type)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate syntax;\n \n extern crate serialize as rustc_serialize; // used by deriving"}, {"sha": "c254dfc48d22549da834a03de2cbb999e479bb53", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -17,7 +17,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_data_structures\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -28,8 +27,6 @@\n #![feature(shared)]\n #![feature(collections_range)]\n #![feature(nonzero)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(unboxed_closures)]\n #![feature(fn_traits)]\n #![feature(untagged_unions)]\n@@ -42,6 +39,10 @@\n #![feature(manually_drop)]\n #![feature(struct_field_attributes)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n #![cfg_attr(unix, feature(libc))]\n #![cfg_attr(test, feature(test))]\n "}, {"sha": "9cee5bc0319b7f2d723aaeff9459826ac44791c9", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_driver\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -28,9 +27,11 @@\n #![feature(libc)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n #![feature(set_stdio)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n extern crate arena;\n extern crate getopts;"}, {"sha": "0f2e1669a47ad5502cb22d4ce7f2b422c432463a", "filename": "src/librustc_errors/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_errors%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_errors%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_errors\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -19,11 +18,13 @@\n \n #![feature(custom_attribute)]\n #![allow(unused_attributes)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(range_contains)]\n #![feature(libc)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate term;\n extern crate libc;\n extern crate serialize as rustc_serialize;"}, {"sha": "70f967d50b0e1db97688ea48d88c18da60a668e3", "filename": "src/librustc_incremental/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_incremental%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_incremental%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -11,20 +11,21 @@\n //! Support for serializing the dep-graph and reloading it.\n \n #![crate_name = \"rustc_incremental\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n       html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n       html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![deny(warnings)]\n \n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(rand)]\n #![feature(conservative_impl_trait)]\n #![feature(sort_unstable)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate graphviz;\n #[macro_use] extern crate rustc;\n extern crate rustc_data_structures;"}, {"sha": "2d0b5a6a51c6ba20baf5da358614c4930e847444", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -20,7 +20,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_lint\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -34,9 +33,11 @@\n #![feature(i128_type)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n #![feature(slice_patterns)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use]\n extern crate syntax;"}, {"sha": "790d493f1914c066fa105bb3f1ba774c3ad8524a", "filename": "src/librustc_llvm/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -14,7 +14,6 @@\n #![allow(dead_code)]\n \n #![crate_name = \"rustc_llvm\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -27,10 +26,12 @@\n #![feature(concat_idents)]\n #![feature(libc)]\n #![feature(link_args)]\n-#![feature(staged_api)]\n-#![feature(rustc_private)]\n #![feature(static_nobundle)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate libc;\n #[macro_use]\n #[no_link]"}, {"sha": "27555f49e57fc1afc0991cc53c81ae1cb1eca9a0", "filename": "src/librustc_metadata/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_metadata%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_metadata%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_metadata\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -24,10 +23,12 @@\n #![feature(proc_macro_internals)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n #![feature(specialization)]\n-#![feature(staged_api)]\n #![feature(discriminant_value)]\n+#![feature(rustc_private)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use]\n extern crate log;"}, {"sha": "014705bf32fa8b454391fc68b83ff2af95b44cf0", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -18,18 +18,19 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![deny(warnings)]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n \n #![feature(associated_consts)]\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(i128_type)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(placement_in_syntax)]\n #![feature(collection_placement)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n #[macro_use] extern crate log;\n extern crate graphviz as dot;\n #[macro_use]"}, {"sha": "97f0022b8db8ddfc5cd184561af959bd4af1b827", "filename": "src/librustc_passes/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_passes%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_passes%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_passes\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -24,8 +23,10 @@\n #![deny(warnings)]\n \n #![feature(rustc_diagnostic_macros)]\n-#![feature(staged_api)]\n-#![feature(rustc_private)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use]\n extern crate rustc;"}, {"sha": "21dd360c9bb7456770cfc86088c7952bb711aa2d", "filename": "src/librustc_platform_intrinsics/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_platform_intrinsics%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_platform_intrinsics%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_platform_intrinsics%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,10 +9,10 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_platform_intrinsics\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![deny(warnings)]\n #![allow(bad_style)]\n "}, {"sha": "16ab593e47a724b5372b5449b66ccfee1e8348c3", "filename": "src/librustc_plugin/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_plugin%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_plugin%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -51,17 +51,18 @@\n //! for more examples.\n \n #![crate_name = \"rustc_plugin\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n        html_favicon_url = \"https://doc.rust-lang.org/favicon.ico\",\n        html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n #![deny(warnings)]\n \n-#![feature(staged_api)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use] extern crate syntax;\n "}, {"sha": "2ced61f5753a90c4aaf9c6312ecfd29add334272", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_privacy\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -18,8 +17,10 @@\n #![deny(warnings)]\n \n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n extern crate rustc;\n #[macro_use] extern crate syntax;"}, {"sha": "ee72aee042e91b0c232fa2b0af1d052561b872af", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_resolve\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -19,8 +18,10 @@\n \n #![feature(associated_consts)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use]\n extern crate log;"}, {"sha": "cc98754f610429dbed69a5a434c16cc1b6bb9d38", "filename": "src/librustc_save_analysis/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_save_analysis%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_save_analysis%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustc_save_analysis\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -19,8 +18,10 @@\n \n #![feature(custom_attribute)]\n #![allow(unused_attributes)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use] extern crate rustc;\n "}, {"sha": "ff094d04c846289bdecf1b10cbfd5e24ba92b0d0", "filename": "src/librustc_trans/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_trans%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_trans%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"rustc_trans\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -33,12 +32,14 @@\n #![feature(libc)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n #![feature(slice_patterns)]\n-#![feature(staged_api)]\n #![feature(unicode)]\n #![feature(conservative_impl_trait)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n use rustc::dep_graph::WorkProduct;\n use syntax_pos::symbol::Symbol;\n "}, {"sha": "99ee1cff7fd22ab9c2883eb49ac6346931c71c89", "filename": "src/librustc_typeck/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_typeck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustc_typeck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -64,7 +64,6 @@ This API is completely unstable and subject to change.\n */\n \n #![crate_name = \"rustc_typeck\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -81,8 +80,10 @@ This API is completely unstable and subject to change.\n #![feature(never_type)]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n #[macro_use] extern crate log;\n #[macro_use] extern crate syntax;"}, {"sha": "d89fa547a89cdcd544993ecf2ae28d3a1a70de42", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_name = \"rustdoc\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -21,14 +20,16 @@\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(libc)]\n-#![feature(rustc_private)]\n #![feature(set_stdio)]\n #![feature(slice_patterns)]\n-#![feature(staged_api)]\n #![feature(test)]\n #![feature(unicode)]\n #![feature(vec_remove_item)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate arena;\n extern crate getopts;\n extern crate env_logger;"}, {"sha": "4eb2cad5c91b9178e0d817220aeb6dfce93fca7c", "filename": "src/libserialize/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibserialize%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibserialize%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,9 +15,9 @@ Core encoding and decoding interfaces.\n */\n \n #![crate_name = \"serialize\"]\n-#![unstable(feature = \"rustc_private\",\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\",\n             reason = \"deprecated in favor of rustc-serialize on crates.io\",\n-            issue = \"27812\")]\n+            issue = \"27812\"))]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -32,7 +32,7 @@ Core encoding and decoding interfaces.\n #![feature(core_intrinsics)]\n #![feature(i128_type)]\n #![feature(specialization)]\n-#![feature(staged_api)]\n+#![cfg_attr(stage0, feature(staged_api))]\n #![cfg_attr(test, feature(test))]\n \n extern crate collections;"}, {"sha": "32dafcdb582f0ca04a010c348aa11eedd29bdabf", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"syntax\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -24,12 +23,14 @@\n        test(attr(deny(warnings))))]\n #![deny(warnings)]\n \n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(unicode)]\n #![feature(rustc_diagnostic_macros)]\n #![feature(i128_type)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n extern crate serialize;\n #[macro_use] extern crate log;\n #[macro_use] extern crate bitflags;"}, {"sha": "60f5d24ac97552533141eff4b4ccffe2d44d5b05", "filename": "src/libsyntax_ext/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax_ext%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax_ext%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -11,7 +11,6 @@\n //! Syntax extensions in the Rust compiler.\n \n #![crate_name = \"syntax_ext\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -20,8 +19,10 @@\n #![deny(warnings)]\n \n #![feature(proc_macro_internals)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n+\n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n \n extern crate fmt_macros;\n extern crate log;"}, {"sha": "25f74aeecf4046eed1ce357fb435ed246a002203", "filename": "src/libsyntax_pos/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax_pos%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibsyntax_pos%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_pos%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -15,7 +15,6 @@\n //! This API is completely unstable and subject to change.\n \n #![crate_name = \"syntax_pos\"]\n-#![unstable(feature = \"rustc_private\", issue = \"27812\")]\n #![crate_type = \"dylib\"]\n #![crate_type = \"rlib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -27,10 +26,12 @@\n #![feature(custom_attribute)]\n #![feature(optin_builtin_traits)]\n #![allow(unused_attributes)]\n-#![feature(rustc_private)]\n-#![feature(staged_api)]\n #![feature(specialization)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(rustc_private))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n use std::cell::{Cell, RefCell};\n use std::ops::{Add, Sub};\n use std::rc::Rc;"}, {"sha": "eb0ee6ba154a187bb390b08fdf780231412a5d32", "filename": "src/libterm/lib.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibterm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab54f4b226639558ff46ea1f3e3f504aacef562d/src%2Flibterm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibterm%2Flib.rs?ref=ab54f4b226639558ff46ea1f3e3f504aacef562d", "patch": "@@ -41,9 +41,6 @@\n //! [ti]: https://en.wikipedia.org/wiki/Terminfo\n \n #![crate_name = \"term\"]\n-#![unstable(feature = \"rustc_private\",\n-            reason = \"use the crates.io `term` library instead\",\n-            issue = \"27812\")]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![doc(html_logo_url = \"https://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png\",\n@@ -54,13 +51,15 @@\n #![deny(missing_docs)]\n #![deny(warnings)]\n \n-#![feature(box_syntax)]\n #![feature(staged_api)]\n #![cfg_attr(windows, feature(libc))]\n // Handle rustfmt skips\n #![feature(custom_attribute)]\n #![allow(unused_attributes)]\n \n+#![cfg_attr(stage0, unstable(feature = \"rustc_private\", issue = \"27812\"))]\n+#![cfg_attr(stage0, feature(staged_api))]\n+\n use std::io::prelude::*;\n \n pub use terminfo::TerminfoTerminal;"}]}