{"sha": "9f489bc8de02fd3c0eacd939a94938a82823c6b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmNDg5YmM4ZGUwMmZkM2MwZWFjZDkzOWE5NDkzOGE4MjgyM2M2YjY=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-08T12:44:32Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-08T12:44:32Z"}, "message": "Don't require abi of defined function to be rust or rust-call", "tree": {"sha": "770ed568de6280cfc4d7dab23e5f200d649df960", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/770ed568de6280cfc4d7dab23e5f200d649df960"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f489bc8de02fd3c0eacd939a94938a82823c6b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f489bc8de02fd3c0eacd939a94938a82823c6b6", "html_url": "https://github.com/rust-lang/rust/commit/9f489bc8de02fd3c0eacd939a94938a82823c6b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f489bc8de02fd3c0eacd939a94938a82823c6b6/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ede386054bfa3918661d011b452ad67d4a32f90", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ede386054bfa3918661d011b452ad67d4a32f90", "html_url": "https://github.com/rust-lang/rust/commit/9ede386054bfa3918661d011b452ad67d4a32f90"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "984c0341efb42c7cced70a0f628874ab548506ba", "filename": "examples/mini_core_hello_world.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f489bc8de02fd3c0eacd939a94938a82823c6b6/examples%2Fmini_core_hello_world.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f489bc8de02fd3c0eacd939a94938a82823c6b6/examples%2Fmini_core_hello_world.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/examples%2Fmini_core_hello_world.rs?ref=9f489bc8de02fd3c0eacd939a94938a82823c6b6", "patch": "@@ -9,12 +9,14 @@ extern crate mini_core;\n use mini_core::*;\n \n #[link(name = \"c\")]\n-extern \"C\" {}\n-\n extern \"C\" {\n     fn puts(s: *const u8);\n }\n \n+unsafe extern \"C\" fn my_puts(s: *const u8) {\n+    puts(s);\n+}\n+\n #[lang = \"termination\"]\n trait Termination {\n     fn report(self) -> i32;\n@@ -44,7 +46,7 @@ static NUM_REF: &'static u8 = unsafe { &NUM };\n fn main() {\n     unsafe {\n         let slice: &[u8] = b\"Hello\\0\" as &[u8; 6];\n-        if intrinsics::size_of_val(slice) as u8 != 0 {\n+        if intrinsics::size_of_val(slice) as u8 != 6 {\n             panic(&(\"eji\", \"frjio\", 0, 0));\n         };\n         let ptr: *const u8 = slice as *const [u8] as *const u8;"}, {"sha": "3fd161ed6b0864f6d3e2c85d227480e88d2ccfde", "filename": "src/abi.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f489bc8de02fd3c0eacd939a94938a82823c6b6/src%2Fabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f489bc8de02fd3c0eacd939a94938a82823c6b6/src%2Fabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fabi.rs?ref=9f489bc8de02fd3c0eacd939a94938a82823c6b6", "patch": "@@ -249,11 +249,6 @@ pub fn codegen_fn_prelude<'a, 'tcx: 'a>(\n ) {\n     let ssa_analyzed = crate::analyze::analyze(fx);\n \n-    match fx.self_sig().abi {\n-        Abi::Rust | Abi::RustCall => {}\n-        _ => unimplemented!(\"declared function with non \\\"rust\\\" or \\\"rust-call\\\" abi\"),\n-    }\n-\n     let ret_layout = fx.layout_of(fx.return_type());\n     let output_pass_mode = get_pass_mode(fx.tcx, fx.self_sig().abi, fx.return_type(), true);\n     let ret_param = match output_pass_mode {"}]}