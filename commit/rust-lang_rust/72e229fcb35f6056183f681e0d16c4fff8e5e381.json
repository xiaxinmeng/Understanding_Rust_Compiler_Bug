{"sha": "72e229fcb35f6056183f681e0d16c4fff8e5e381", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyZTIyOWZjYjM1ZjYwNTYxODNmNjgxZTBkMTZjNGZmZjhlNWUzODE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-11T17:14:12Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-11T17:16:00Z"}, "message": "Use RA_LOG instead of RUST_LOG for logging\n\nRUST_LOG might be set up for debugging the user's problem, slowing\ndown rust-analyzer considerably. That's the same reason why rustc uses\nRUSTC_LOG.", "tree": {"sha": "77a45256d7eedac1ab8b53d35fd036ded3d35522", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/77a45256d7eedac1ab8b53d35fd036ded3d35522"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72e229fcb35f6056183f681e0d16c4fff8e5e381", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72e229fcb35f6056183f681e0d16c4fff8e5e381", "html_url": "https://github.com/rust-lang/rust/commit/72e229fcb35f6056183f681e0d16c4fff8e5e381", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72e229fcb35f6056183f681e0d16c4fff8e5e381/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05399250d47cdceffbf1ded08983b13a9dcc87c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/05399250d47cdceffbf1ded08983b13a9dcc87c1", "html_url": "https://github.com/rust-lang/rust/commit/05399250d47cdceffbf1ded08983b13a9dcc87c1"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "001f277e6fa0b5590a1faa09ba9c8df85dce37a7", "filename": "crates/rust-analyzer/src/bin/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72e229fcb35f6056183f681e0d16c4fff8e5e381/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72e229fcb35f6056183f681e0d16c4fff8e5e381/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fmain.rs?ref=72e229fcb35f6056183f681e0d16c4fff8e5e381", "patch": "@@ -60,7 +60,7 @@ fn main() -> Result<()> {\n \n fn setup_logging() -> Result<()> {\n     std::env::set_var(\"RUST_BACKTRACE\", \"short\");\n-    env_logger::try_init()?;\n+    env_logger::try_init_from_env(\"RA_LOG\")?;\n     ra_prof::init();\n     Ok(())\n }"}, {"sha": "a20ead0b6c5492d68737e55981c25d07a06e278f", "filename": "docs/dev/README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72e229fcb35f6056183f681e0d16c4fff8e5e381/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/72e229fcb35f6056183f681e0d16c4fff8e5e381/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=72e229fcb35f6056183f681e0d16c4fff8e5e381", "patch": "@@ -134,7 +134,7 @@ To log all communication between the server and the client, there are two choice\n \n * you can log on the server side, by running something like\n   ```\n-  env RUST_LOG=gen_lsp_server=trace code .\n+  env RA_LOG=gen_lsp_server=trace code .\n   ```\n \n * you can log on the client side, by enabling `\"rust-analyzer.trace.server\":"}, {"sha": "d750c7705b453872cfc15d4416f65e7095362ce1", "filename": "docs/user/readme.adoc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72e229fcb35f6056183f681e0d16c4fff8e5e381/docs%2Fuser%2Freadme.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/72e229fcb35f6056183f681e0d16c4fff8e5e381/docs%2Fuser%2Freadme.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Freadme.adoc?ref=72e229fcb35f6056183f681e0d16c4fff8e5e381", "patch": "@@ -108,7 +108,7 @@ Here are some useful self-diagnostic commands:\n \n * **Rust Analyzer: Show RA Version** shows the version of `rust-analyzer` binary\n * **Rust Analyzer: Status** prints some statistics about the server, like the few latest LSP requests\n-* To enable server-side logging, run with `env RUST_LOG=info` and see `Output > Rust Analyzer Language Server` in VS Code's panel.\n+* To enable server-side logging, run with `env RA_LOG=info` and see `Output > Rust Analyzer Language Server` in VS Code's panel.\n * To log all LSP requests, add `\"rust-analyzer.trace.server\": \"verbose\"` to the settings and look for `Server Trace` in the panel.\n * To enable client-side logging, add `\"rust-analyzer.trace.extension\": true` to the settings and open the `Console` tab of VS Code developer tools.\n "}]}