{"sha": "bbd7ce690452f28d459643d97fbae89109cf5808", "node_id": "C_kwDOAAsO6NoAKGJiZDdjZTY5MDQ1MmYyOGQ0NTk2NDNkOTdmYmFlODkxMDljZjU4MDg", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-04-13T20:18:28Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-04-13T20:18:28Z"}, "message": "couple of clippy::perf fixes", "tree": {"sha": "f5724f95a121a164d45952c104300ea96d2f3cd3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5724f95a121a164d45952c104300ea96d2f3cd3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bbd7ce690452f28d459643d97fbae89109cf5808", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bbd7ce690452f28d459643d97fbae89109cf5808", "html_url": "https://github.com/rust-lang/rust/commit/bbd7ce690452f28d459643d97fbae89109cf5808", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bbd7ce690452f28d459643d97fbae89109cf5808/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d13f6afeba4935499abe0c9a07426c94492c94e", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d13f6afeba4935499abe0c9a07426c94492c94e", "html_url": "https://github.com/rust-lang/rust/commit/0d13f6afeba4935499abe0c9a07426c94492c94e"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "d6e2c8ccdf44a2344cbf74004c0dec9f0f0b85db", "filename": "compiler/rustc_codegen_llvm/src/debuginfo/metadata/enums/cpp_like.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata%2Fenums%2Fcpp_like.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata%2Fenums%2Fcpp_like.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fmetadata%2Fenums%2Fcpp_like.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -372,7 +372,6 @@ fn build_union_fields_for_direct_tag_generator<'ll, 'tcx>(\n \n     // Build the type node for each field.\n     let variant_field_infos: SmallVec<VariantFieldInfo<'ll>> = variant_range\n-        .clone()\n         .map(|variant_index| {\n             let variant_struct_type_di_node = super::build_generator_variant_struct_type_di_node(\n                 cx,"}, {"sha": "4c1a39318649a6d376179510d24e3dce5b816339", "filename": "compiler/rustc_errors/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Flib.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -1208,7 +1208,7 @@ impl HandlerInner {\n             (0, 0) => return,\n             (0, _) => self.emitter.emit_diagnostic(&Diagnostic::new(\n                 Level::Warning,\n-                DiagnosticMessage::Str(warnings.to_owned()),\n+                DiagnosticMessage::Str(warnings),\n             )),\n             (_, 0) => {\n                 let _ = self.fatal(&errors);"}, {"sha": "cda3d0fd2bfb62ba728a69052f8ceb401c9df629", "filename": "compiler/rustc_expand/src/mbe/macro_parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fmacro_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fmacro_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fmacro_parser.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -589,7 +589,7 @@ impl TtParser {\n                 (_, 0) => {\n                     // Dump all possible `next_mps` into `cur_mps` for the next iteration. Then\n                     // process the next token.\n-                    self.cur_mps.extend(self.next_mps.drain(..));\n+                    self.cur_mps.append(&mut self.next_mps);\n                     parser.to_mut().bump();\n                 }\n "}, {"sha": "58e484e413dab4d5a1a4d4ca14f40479ec059328", "filename": "compiler/rustc_mir_build/src/thir/pattern/check_match.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fcheck_match.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -844,7 +844,7 @@ fn non_exhaustive_match<'p, 'tcx>(\n                     format!(\n                         \"{}{}{} => todo!()\",\n                         comma,\n-                        snippet.strip_prefix(\",\").unwrap_or(&snippet),\n+                        snippet.strip_prefix(',').unwrap_or(&snippet),\n                         pattern\n                     ),\n                 ));"}, {"sha": "7485c082f4eaf5af2b542719f7a204dccb038ebe", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -2724,9 +2724,9 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n                 &format!(\n                     \"consider annotating `{}` with `#[derive({})]`\",\n                     trait_pred.skip_binder().self_ty(),\n-                    diagnostic_name.to_string(),\n+                    diagnostic_name,\n                 ),\n-                format!(\"#[derive({})]\\n\", diagnostic_name.to_string()),\n+                format!(\"#[derive({})]\\n\", diagnostic_name),\n                 Applicability::MaybeIncorrect,\n             );\n         }"}, {"sha": "a620ffa98786021454abebda501b0509d7ce2845", "filename": "src/librustdoc/passes/html_tags.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bbd7ce690452f28d459643d97fbae89109cf5808/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbd7ce690452f28d459643d97fbae89109cf5808/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs?ref=bbd7ce690452f28d459643d97fbae89109cf5808", "patch": "@@ -215,7 +215,7 @@ impl<'a, 'tcx> DocVisitor for InvalidHtmlTagsLinter<'a, 'tcx> {\n                     // We don't try to detect stuff `<like, this>` because that's not valid HTML,\n                     // and we don't try to detect stuff `<like this>` because that's not valid Rust.\n                     if let Some(Some(generics_start)) = (is_open_tag\n-                        && dox[..range.end].ends_with(\">\"))\n+                        && dox[..range.end].ends_with('>'))\n                     .then(|| extract_path_backwards(&dox, range.start))\n                     {\n                         let generics_sp = match super::source_span_for_markdown_range("}]}