{"sha": "7477c1f4f7d6bef037d523099b240d22aa1b63a0", "node_id": "C_kwDOAAsO6NoAKDc0NzdjMWY0ZjdkNmJlZjAzN2Q1MjMwOTliMjQwZDIyYWExYjYzYTA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-20T01:16:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-20T01:16:52Z"}, "message": "Auto merge of #104522 - RalfJung:try_normalize_after_erasing_regions, r=oli-obk\n\ntry_normalize_after_erasing_regions: promote an assertion to always run\n\nIn https://github.com/rust-lang/miri/issues/2433 this assertion has been seen to trigger, so it might be worth actually checking this? Regressing debug assertions are very easy to miss until much later, and then they become quite hard to debug.", "tree": {"sha": "8e972867a85f5c1a7f9dc7ffa4d52b1a7ecc19c6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e972867a85f5c1a7f9dc7ffa4d52b1a7ecc19c6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7477c1f4f7d6bef037d523099b240d22aa1b63a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7477c1f4f7d6bef037d523099b240d22aa1b63a0", "html_url": "https://github.com/rust-lang/rust/commit/7477c1f4f7d6bef037d523099b240d22aa1b63a0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7477c1f4f7d6bef037d523099b240d22aa1b63a0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd1f782b742f2c83d91648efae35dfd0d79cec08", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd1f782b742f2c83d91648efae35dfd0d79cec08", "html_url": "https://github.com/rust-lang/rust/commit/cd1f782b742f2c83d91648efae35dfd0d79cec08"}, {"sha": "99f7e9494e137c56fdb34ad76280386ce3b60703", "url": "https://api.github.com/repos/rust-lang/rust/commits/99f7e9494e137c56fdb34ad76280386ce3b60703", "html_url": "https://github.com/rust-lang/rust/commit/99f7e9494e137c56fdb34ad76280386ce3b60703"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "f1835d317e841be4b8c5808ace9d9ca28465df06", "filename": "compiler/rustc_traits/src/normalize_erasing_regions.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7477c1f4f7d6bef037d523099b240d22aa1b63a0/compiler%2Frustc_traits%2Fsrc%2Fnormalize_erasing_regions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7477c1f4f7d6bef037d523099b240d22aa1b63a0/compiler%2Frustc_traits%2Fsrc%2Fnormalize_erasing_regions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2Fsrc%2Fnormalize_erasing_regions.rs?ref=7477c1f4f7d6bef037d523099b240d22aa1b63a0", "patch": "@@ -34,7 +34,9 @@ fn try_normalize_after_erasing_regions<'tcx, T: TypeFoldable<'tcx> + PartialEq +\n             // We don't care about the `obligations`; they are\n             // always only region relations, and we are about to\n             // erase those anyway:\n-            debug_assert_eq!(\n+            // This has been seen to fail in RL, so making it a non-debug assertion to better catch\n+            // those cases.\n+            assert_eq!(\n                 normalized_obligations.iter().find(|p| not_outlives_predicate(p.predicate)),\n                 None,\n             );"}]}