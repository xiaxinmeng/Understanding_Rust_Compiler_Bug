{"sha": "b989428f7dec7b52d68bed6a21e9b5b0a8086267", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5ODk0MjhmN2RlYzdiNTJkNjhiZWQ2YTIxZTliNWIwYTgwODYyNjc=", "commit": {"author": {"name": "Scott Abbey", "email": "scottabbey2@gmail.com", "date": "2017-12-22T03:43:16Z"}, "committer": {"name": "Scott Abbey", "email": "scottabbey2@gmail.com", "date": "2017-12-22T08:34:13Z"}, "message": "Don't try to statically link libstdc++ on FreeBSD\n\nThe code inside this conditional will not work on FreeBSD 10+ because\nthose versions use clang and libc++ rather than libstdc++.\n\nSince FreeBSD comes with libc++ in the base, presumably all 10+ systems\nwill have it present.\n\nSearching for libstdc++.a will not work if it is not present.  As a\nresult, this would previously have set `LLVM_STATIC_STDCPP=libstdc++.a`,\nwhich isn't a valid path and caused problems later on when building\n`librustc_llvm`.\n\nThis could possibly be updated in the future to look for `libc++.a` on\nFreeBSD, by expanding the code inside the conditional.  In one attempt\nto run this on x86_64-freebsd, I found that libc++ was not compiled with\nPIC, so it failed anyway.", "tree": {"sha": "620ea9b0272b41915d07045f5faaa9f1b46f7445", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/620ea9b0272b41915d07045f5faaa9f1b46f7445"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b989428f7dec7b52d68bed6a21e9b5b0a8086267", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b989428f7dec7b52d68bed6a21e9b5b0a8086267", "html_url": "https://github.com/rust-lang/rust/commit/b989428f7dec7b52d68bed6a21e9b5b0a8086267", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b989428f7dec7b52d68bed6a21e9b5b0a8086267/comments", "author": {"login": "ScottAbbey", "id": 14281035, "node_id": "MDQ6VXNlcjE0MjgxMDM1", "avatar_url": "https://avatars.githubusercontent.com/u/14281035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ScottAbbey", "html_url": "https://github.com/ScottAbbey", "followers_url": "https://api.github.com/users/ScottAbbey/followers", "following_url": "https://api.github.com/users/ScottAbbey/following{/other_user}", "gists_url": "https://api.github.com/users/ScottAbbey/gists{/gist_id}", "starred_url": "https://api.github.com/users/ScottAbbey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ScottAbbey/subscriptions", "organizations_url": "https://api.github.com/users/ScottAbbey/orgs", "repos_url": "https://api.github.com/users/ScottAbbey/repos", "events_url": "https://api.github.com/users/ScottAbbey/events{/privacy}", "received_events_url": "https://api.github.com/users/ScottAbbey/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ScottAbbey", "id": 14281035, "node_id": "MDQ6VXNlcjE0MjgxMDM1", "avatar_url": "https://avatars.githubusercontent.com/u/14281035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ScottAbbey", "html_url": "https://github.com/ScottAbbey", "followers_url": "https://api.github.com/users/ScottAbbey/followers", "following_url": "https://api.github.com/users/ScottAbbey/following{/other_user}", "gists_url": "https://api.github.com/users/ScottAbbey/gists{/gist_id}", "starred_url": "https://api.github.com/users/ScottAbbey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ScottAbbey/subscriptions", "organizations_url": "https://api.github.com/users/ScottAbbey/orgs", "repos_url": "https://api.github.com/users/ScottAbbey/repos", "events_url": "https://api.github.com/users/ScottAbbey/events{/privacy}", "received_events_url": "https://api.github.com/users/ScottAbbey/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7a0dffc7870224f87263b4cda81d98b2436d8f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7a0dffc7870224f87263b4cda81d98b2436d8f0", "html_url": "https://github.com/rust-lang/rust/commit/f7a0dffc7870224f87263b4cda81d98b2436d8f0"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "c8e500a4f68c0615bb07061c5a6c1b80dd7dd320", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b989428f7dec7b52d68bed6a21e9b5b0a8086267/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b989428f7dec7b52d68bed6a21e9b5b0a8086267/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=b989428f7dec7b52d68bed6a21e9b5b0a8086267", "patch": "@@ -550,6 +550,7 @@ pub fn rustc_cargo(build: &Build,\n     // Building with a static libstdc++ is only supported on linux right now,\n     // not for MSVC or macOS\n     if build.config.llvm_static_stdcpp &&\n+       !target.contains(\"freebsd\") &&\n        !target.contains(\"windows\") &&\n        !target.contains(\"apple\") {\n         cargo.env(\"LLVM_STATIC_STDCPP\","}]}