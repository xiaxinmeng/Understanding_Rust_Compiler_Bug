{"sha": "e8dc8bca2118ec1ed5970790614f0b81e9167f10", "node_id": "C_kwDOAAsO6NoAKGU4ZGM4YmNhMjExOGVjMWVkNTk3MDc5MDYxNGYwYjgxZTkxNjdmMTA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-13T02:41:27Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-13T02:41:27Z"}, "message": "Auto merge of #100341 - andrewpollack:fuchsia-llvm-libunwind, r=tmandry\n\nUse llvm-libunwind=\"in-tree\" for Fuchsia targets\n\nWith updates to Fuchsia CI's Zircon libraries #99833, we can introduce `llvm-libunwind=\"in-tree\"` for Fuchsia targets. This PR restores functionality removed from https://github.com/rust-lang/rust/pull/93604#issuecomment-1136515651.\n\ncc `@tmandry` `@djkoloski`", "tree": {"sha": "ea9e310ec5aea05240f9ef8d2da1416549260634", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea9e310ec5aea05240f9ef8d2da1416549260634"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8dc8bca2118ec1ed5970790614f0b81e9167f10", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8dc8bca2118ec1ed5970790614f0b81e9167f10", "html_url": "https://github.com/rust-lang/rust/commit/e8dc8bca2118ec1ed5970790614f0b81e9167f10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8dc8bca2118ec1ed5970790614f0b81e9167f10/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "46c59bbb79b3fa99950e2a7eaaeb161990561b8b", "url": "https://api.github.com/repos/rust-lang/rust/commits/46c59bbb79b3fa99950e2a7eaaeb161990561b8b", "html_url": "https://github.com/rust-lang/rust/commit/46c59bbb79b3fa99950e2a7eaaeb161990561b8b"}, {"sha": "29238f44a07440a907db7cbb4a4ab23ab401aa04", "url": "https://api.github.com/repos/rust-lang/rust/commits/29238f44a07440a907db7cbb4a4ab23ab401aa04", "html_url": "https://github.com/rust-lang/rust/commit/29238f44a07440a907db7cbb4a4ab23ab401aa04"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "c4983accc68db9f7f677cf262f7f5be0cfeaea97", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e8dc8bca2118ec1ed5970790614f0b81e9167f10/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8dc8bca2118ec1ed5970790614f0b81e9167f10/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=e8dc8bca2118ec1ed5970790614f0b81e9167f10", "patch": "@@ -1445,7 +1445,11 @@ impl Config {\n             .get(&target)\n             .and_then(|t| t.llvm_libunwind)\n             .or(self.llvm_libunwind_default)\n-            .unwrap_or(LlvmLibunwind::No)\n+            .unwrap_or(if target.contains(\"fuchsia\") {\n+                LlvmLibunwind::InTree\n+            } else {\n+                LlvmLibunwind::No\n+            })\n     }\n \n     pub fn submodules(&self, rust_info: &GitInfo) -> bool {"}, {"sha": "c526e4d1fa82258045939a6abbf778834ee50555", "filename": "src/doc/rustc/src/platform-support/fuchsia.md", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e8dc8bca2118ec1ed5970790614f0b81e9167f10/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Ffuchsia.md", "raw_url": "https://github.com/rust-lang/rust/raw/e8dc8bca2118ec1ed5970790614f0b81e9167f10/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Ffuchsia.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Ffuchsia.md?ref=e8dc8bca2118ec1ed5970790614f0b81e9167f10", "patch": "@@ -53,12 +53,6 @@ In `config.toml`, add:\n ```toml\n [build]\n target = [\"<host_platform>\", \"aarch64-fuchsia\", \"x86_64-fuchsia\"]\n-\n-[target.x86_64-fuchsia]\n-llvm-libunwind = \"in-tree\"\n-\n-[target.aarch64-fuchsia]\n-llvm-libunwind = \"in-tree\"\n ```\n \n Additionally, the following environment variables must be configured (for"}]}