{"sha": "d2b9b7ece2714170fae43ff9c5c5c3853d04ecef", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQyYjliN2VjZTI3MTQxNzBmYWU0M2ZmOWM1YzVjMzg1M2QwNGVjZWY=", "commit": {"author": {"name": "sinkuu", "email": "sinkuupump@gmail.com", "date": "2017-02-17T13:37:32Z"}, "committer": {"name": "sinkuu", "email": "sinkuupump@gmail.com", "date": "2017-02-18T01:14:25Z"}, "message": "Fix language & if_let_chain usage", "tree": {"sha": "22776b8dcd32c10b530767b6c72ca4b1014f9ba3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/22776b8dcd32c10b530767b6c72ca4b1014f9ba3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef", "html_url": "https://github.com/rust-lang/rust/commit/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef/comments", "author": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8cb2ec804dced5435aaea7f465eccddcdeddba19", "url": "https://api.github.com/repos/rust-lang/rust/commits/8cb2ec804dced5435aaea7f465eccddcdeddba19", "html_url": "https://github.com/rust-lang/rust/commit/8cb2ec804dced5435aaea7f465eccddcdeddba19"}], "stats": {"total": 19, "additions": 4, "deletions": 15}, "files": [{"sha": "e6296154126914fe9f96e2a9847d5fe458d5976e", "filename": "clippy_lints/src/should_assert_eq.rs", "status": "modified", "additions": 4, "deletions": 15, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef/clippy_lints%2Fsrc%2Fshould_assert_eq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d2b9b7ece2714170fae43ff9c5c5c3853d04ecef/clippy_lints%2Fsrc%2Fshould_assert_eq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fshould_assert_eq.rs?ref=d2b9b7ece2714170fae43ff9c5c5c3853d04ecef", "patch": "@@ -2,7 +2,7 @@ use rustc::lint::*;\n use rustc::hir::*;\n use utils::{is_direct_expn_of, implements_trait, span_lint};\n \n-/// **What it does:** Checks for `assert!(x == y)` which can be written better\n+/// **What it does:** Checks for `assert!(x == y)` which can be better written\n /// as `assert_eq!(x, y)` if `x` and `y` implement `Debug` trait.\n ///\n /// **Why is this bad?** `assert_eq` provides better assertion failure reporting.\n@@ -36,21 +36,10 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for ShouldAssertEq {\n             let ExprIf(ref cond, ..) = e.node,\n             let ExprUnary(UnOp::UnNot, ref cond) = cond.node,\n             let ExprBinary(ref binop, ref expr1, ref expr2) = cond.node,\n+            binop.node == BinOp_::BiEq,\n+            is_direct_expn_of(cx, e.span, \"assert\").is_some(),\n+            let Some(debug_trait) = cx.tcx.lang_items.debug_trait(),\n         ], {\n-            if is_direct_expn_of(cx, e.span, \"assert\").is_none() {\n-                return;\n-            }\n-\n-            if binop.node != BinOp_::BiEq {\n-                return;\n-            }\n-\n-            let debug_trait = if let Some(t) = cx.tcx.lang_items.debug_trait() {\n-                t\n-            } else {\n-                return;\n-            };\n-\n             let ty1 = cx.tables.expr_ty(expr1);\n             let ty2 = cx.tables.expr_ty(expr2);\n "}]}