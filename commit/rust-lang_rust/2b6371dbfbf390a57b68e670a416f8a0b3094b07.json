{"sha": "2b6371dbfbf390a57b68e670a416f8a0b3094b07", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJiNjM3MWRiZmJmMzkwYTU3YjY4ZTY3MGE0MTZmOGEwYjMwOTRiMDc=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-06-21T15:04:30Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-06-23T13:09:44Z"}, "message": "Make tidy quieter by default", "tree": {"sha": "75668877d9b9b3c86491ea5fcf95cf84a8b58713", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75668877d9b9b3c86491ea5fcf95cf84a8b58713"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2b6371dbfbf390a57b68e670a416f8a0b3094b07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2b6371dbfbf390a57b68e670a416f8a0b3094b07", "html_url": "https://github.com/rust-lang/rust/commit/2b6371dbfbf390a57b68e670a416f8a0b3094b07", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2b6371dbfbf390a57b68e670a416f8a0b3094b07/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a96ba969156d257e5d5b692946fa8fe40ed6543a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a96ba969156d257e5d5b692946fa8fe40ed6543a", "html_url": "https://github.com/rust-lang/rust/commit/a96ba969156d257e5d5b692946fa8fe40ed6543a"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "2f9bd067c3115dee4a11de378206611fe4879d83", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=2b6371dbfbf390a57b68e670a416f8a0b3094b07", "patch": "@@ -709,8 +709,8 @@ impl Step for Tidy {\n         if !builder.config.vendor {\n             cmd.arg(\"--no-vendor\");\n         }\n-        if !builder.config.verbose_tests {\n-            cmd.arg(\"--quiet\");\n+        if builder.is_verbose() {\n+            cmd.arg(\"--verbose\");\n         }\n \n         let _folder = builder.fold_output(|| \"tidy\");"}, {"sha": "6aa093c1ef0d1c5be951fb2bb6fea50cb543e1dc", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=2b6371dbfbf390a57b68e670a416f8a0b3094b07", "patch": "@@ -51,7 +51,7 @@ pub struct Feature {\n \n pub type Features = HashMap<String, Feature>;\n \n-pub fn check(path: &Path, bad: &mut bool, quiet: bool) {\n+pub fn check(path: &Path, bad: &mut bool, verbose: bool) {\n     let mut features = collect_lang_features(path, bad);\n     assert!(!features.is_empty());\n \n@@ -132,18 +132,18 @@ pub fn check(path: &Path, bad: &mut bool, quiet: bool) {\n     if *bad {\n         return;\n     }\n-    if quiet {\n-        println!(\"* {} features\", features.len());\n-        return;\n-    }\n \n-    let mut lines = Vec::new();\n-    lines.extend(format_features(&features, \"lang\"));\n-    lines.extend(format_features(&lib_features, \"lib\"));\n+    if verbose {\n+        let mut lines = Vec::new();\n+        lines.extend(format_features(&features, \"lang\"));\n+        lines.extend(format_features(&lib_features, \"lib\"));\n \n-    lines.sort();\n-    for line in lines {\n-        println!(\"* {}\", line);\n+        lines.sort();\n+        for line in lines {\n+            println!(\"* {}\", line);\n+        }\n+    } else {\n+        println!(\"* {} features\", features.len());\n     }\n }\n "}, {"sha": "fa88b078cd8d43b2eb189b90629a0a22ab59b6e2", "filename": "src/tools/tidy/src/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2b6371dbfbf390a57b68e670a416f8a0b3094b07/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs?ref=2b6371dbfbf390a57b68e670a416f8a0b3094b07", "patch": "@@ -19,12 +19,12 @@ fn main() {\n     let args: Vec<String> = env::args().skip(1).collect();\n \n     let mut bad = false;\n-    let quiet = args.iter().any(|s| *s == \"--quiet\");\n+    let verbose = args.iter().any(|s| *s == \"--verbose\");\n     bins::check(&path, &mut bad);\n     style::check(&path, &mut bad);\n     errors::check(&path, &mut bad);\n     cargo::check(&path, &mut bad);\n-    features::check(&path, &mut bad, quiet);\n+    features::check(&path, &mut bad, verbose);\n     pal::check(&path, &mut bad);\n     unstable_book::check(&path, &mut bad);\n     libcoretest::check(&path, &mut bad);"}]}