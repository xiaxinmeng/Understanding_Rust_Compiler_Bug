{"sha": "7e2425ab73b40f042975a0911a976220bf62d083", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlMjQyNWFiNzNiNDBmMDQyOTc1YTA5MTFhOTc2MjIwYmY2MmQwODM=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-01-17T12:24:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-17T12:24:59Z"}, "message": "Rollup merge of #81095 - LingMan:unwrap, r=oli-obk\n\nUse Option::unwrap_or instead of open-coding it\n\nr? ```@oli-obk``` Noticed this while we were talking about the other PR just now \ud83d\ude06\n```@rustbot``` modify labels +C-cleanup +T-compiler", "tree": {"sha": "d21700054bdc8b18f37bfa55c01e960a5370d5f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d21700054bdc8b18f37bfa55c01e960a5370d5f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e2425ab73b40f042975a0911a976220bf62d083", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgBCycCRBK7hj4Ov3rIwAAdHIIAGhoKQmUj4xyqk7E2X8/yAsE\nEEN/xDPtd9nNrore5HspcP7abDjufjy8YvYctSNbQxBGeUaqi6Q7Bkgs7//pryp2\nLIQTZKO6958P63gb8bHIBPH+7vopgwXfb0MRBu4oQD5HFlkvLJdvuBy5iG8BZFXD\nuYxD1v9mQaVXqdguo1zgPLccizh0YmxLQDwikIAPEclt5ke1aPto5aNQG4/gs8WD\nF/zjDVkdeXZ4aE4YDHdf3KixV+kl6shzq+m2PoffX4fw7eRXuP3BbLLIEugdF8MY\n/13j5kHBeKS7KyuMEdeFSVdnV2wDZmKXFFQQFomf+zUl+GguI1N0/OJ7rvAPiAw=\n=4umS\n-----END PGP SIGNATURE-----\n", "payload": "tree d21700054bdc8b18f37bfa55c01e960a5370d5f4\nparent 34e073f44b09c319cdbf139adda8e3d6348046be\nparent 5a706cfc49295f67c01fd3d422fa6fa69a018d92\nauthor Mara Bos <m-ou.se@m-ou.se> 1610886299 +0000\ncommitter GitHub <noreply@github.com> 1610886299 +0000\n\nRollup merge of #81095 - LingMan:unwrap, r=oli-obk\n\nUse Option::unwrap_or instead of open-coding it\n\nr? ```@oli-obk``` Noticed this while we were talking about the other PR just now \ud83d\ude06\n```@rustbot``` modify labels +C-cleanup +T-compiler\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e2425ab73b40f042975a0911a976220bf62d083", "html_url": "https://github.com/rust-lang/rust/commit/7e2425ab73b40f042975a0911a976220bf62d083", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e2425ab73b40f042975a0911a976220bf62d083/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34e073f44b09c319cdbf139adda8e3d6348046be", "url": "https://api.github.com/repos/rust-lang/rust/commits/34e073f44b09c319cdbf139adda8e3d6348046be", "html_url": "https://github.com/rust-lang/rust/commit/34e073f44b09c319cdbf139adda8e3d6348046be"}, {"sha": "5a706cfc49295f67c01fd3d422fa6fa69a018d92", "url": "https://api.github.com/repos/rust-lang/rust/commits/5a706cfc49295f67c01fd3d422fa6fa69a018d92", "html_url": "https://github.com/rust-lang/rust/commit/5a706cfc49295f67c01fd3d422fa6fa69a018d92"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "544ef38c12c6d8d4286de41c82207fbf7f52c2c5", "filename": "compiler/rustc_codegen_llvm/src/llvm_util.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7e2425ab73b40f042975a0911a976220bf62d083/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e2425ab73b40f042975a0911a976220bf62d083/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs?ref=7e2425ab73b40f042975a0911a976220bf62d083", "patch": "@@ -214,11 +214,7 @@ fn handle_native(name: &str) -> &str {\n }\n \n pub fn target_cpu(sess: &Session) -> &str {\n-    let name = match sess.opts.cg.target_cpu {\n-        Some(ref s) => &**s,\n-        None => &*sess.target.cpu,\n-    };\n-\n+    let name = sess.opts.cg.target_cpu.as_ref().unwrap_or(&sess.target.cpu);\n     handle_native(name)\n }\n "}]}