{"sha": "571734fdd77460881d5db31be8970bcecc380f18", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3MTczNGZkZDc3NDYwODgxZDVkYjMxYmU4OTcwYmNlY2MzODBmMTg=", "commit": {"author": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2018-03-26T13:14:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-03-26T13:14:54Z"}, "message": "Rollup merge of #48932 - Phlosioneer:43601-document-opaque-size, r=KodrAus\n\nDocument when types have OS-dependent sizes\n\nAs per issue #43601, types that can change size depending on the\ntarget operating system should say so in their documentation.\n\nI used this template when adding doc comments:\n\n```\nThe size of a(n) <name> struct may vary depending on the target\noperating system, and may change between Rust releases.\n```\n\nFor enums, I used \"instance\" instead of \"struct\".\n\nI added documentation to these types:\n```\n- std::time::Instant\t\t\t\t\t\t(contains sys::time::Instant)\n- std::time::SystemTime\t\t\t\t\t\t(contains sys::time::SystemTime)\n\n- std::io::StdinRaw\t\t\t\t\t\t\t(contains sys::stdio::Stdin)\n- std::io::StdoutRaw\t\t\t\t\t\t(contains sys::stdio::Stdout)\n- std::io::Stderr\t\t\t\t\t\t\t(contains sys::stdio::Stderr)\n\n- std::net::addr::SocketAddrV4\t\t\t\t(contains sys::net::netc::sockaddr_in)\n- std::net::addr::SocketAddrV6\t\t\t\t(contains sys::net::netc::sockaddr_in6)\n- std::net::addr::SocketAddr\t\t\t\t(contains std::net::addr::SocketAddrV4 and SocketAddrV6)\n- std::net::ip::Ipv4Addr\t\t\t\t\t(contains sys::net::netc::in_addr)\n- std::net::ip::Ipv6Addr\t\t\t\t\t(contains sys::net::netc::in6_addr)\n- std::net::ip::IpAddr\t\t\t\t\t\t(contains std::net::ip::Ipv4Addr and Ipv6Addr)\n```\n\nI also found that these types varied in size; however, I don't think they need documentation, as it's already fairly obvious that they change based on different OS's:\n\n```\n- std::fs::DirBuilder\t\t\t\t\t\t(contains sys::fs::DirBuilder)\n- std::fs::FileType\t\t\t\t\t\t\t(contains sys::fs::FileType)\n- std::fs::Permissions\t\t\t\t\t\t(contains sys::fs::FilePermissions)\n- std::fs::OpenOptions\t\t\t\t\t\t(contains sys::fs::OpenOptions)\n- std::fs::DirEntry\t\t\t\t\t\t\t(contains sys::fs::DirEntry)\n- std::fs::ReadDir\t\t\t\t\t\t\t(contains sys::fs::ReadDir)\n- std::fs::Metadata\t\t\t\t\t\t\t(contains sys::fs::FileAttr)\n- std::fs::File\t\t\t\t\t\t\t\t(contains sys::fs::File)\n\n- std::process::Child\t\t\t\t\t\t(contains sys::process::Process)\n- std::process::ChildStdin\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::ChildStdout\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::ChildStderr\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::Command\t\t\t\t\t\t(contains sys::process::Command)\n- std::process::Stdio\t\t\t\t\t\t(contains sys::process::Stdio)\n- std::process::ExitStatus\t\t\t\t\t(contains sys::process::ExitStatus)\n- std::process::Output\t\t\t\t\t\t(contains std::process::ExitStatus)\n\n- std::sys_common::condvar::Condvar\t\t\t(contains sys::condvar::Condvar)\n- std::sys_common::mutex::Mutex\t\t\t\t(contains sys::mutex::Mutex)\n- std::sys_common::net::LookupHost\t\t\t(contains sys::net::netc::addrinfo)\n- std::sys_common::net::TcpStream\t\t\t(contains sys::net::Socket)\n- std::sys_common::net::TcpListener\t\t\t(contains sys::net::Socket)\n- std::sys_common::net::UdpSocket\t\t\t(contains sys::net::Socket)\n- std::sys_common::remutex::ReentrantMutex\t(contains sys::mutex::ReentrantMutex)\n- std::sys_common::rwlock::RWLock\t\t\t(contains sys::rwlock::RWLock)\n- std::sys_common::thread_local::Key\t\t(contains sys::thread_local::Key)\n```\nMaybe we should just put a comment about the size of structs in the module-level docs for `fs`, `process`, and `sys_common`?\n\nIf anyone can think of other types that can change size, comment below. I'm also open to changing the wording.\n\ncloses #43601.", "tree": {"sha": "cd73eaa38d73b50d7ac1b796c53d2dc3b93bab5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd73eaa38d73b50d7ac1b796c53d2dc3b93bab5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/571734fdd77460881d5db31be8970bcecc380f18", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJauPJPCRBK7hj4Ov3rIwAAdHIIAK/Kei0xPTPBW0RhFkw0KIDN\n987IVD7Bq58Zu9CJdTn61GG1XTNGk1TqydTc70fMVt3VhaMmFOiK5pQgtteCAKcM\nY2Z6cLHt9YSdctewIznFbXJSHbWMgvKJKa5MDwmDxnWq0zy2Z0wBWvXZ9NwYrddA\nXpi3ZK8RkPWoNaGECJj/P64Nz8yGHmcwF/EoVeGV73oGLOrNzd63zf2Fmf4RqNYS\nqCKNWV1KxplNz0zyTYASK87Ordpmdc3pURlYRQxF6jdZvcaGUvJYnHzk2TuvSF4W\nqaGtU3L/nEtfMw5cUinQ0pDiof9IsyGS3MxFj+1bfxkX0GwA4c+WA80nEDEBmR8=\n=74xt\n-----END PGP SIGNATURE-----\n", "payload": "tree cd73eaa38d73b50d7ac1b796c53d2dc3b93bab5c\nparent 3d7a04610de0ac95e85eb13f814b45a26458dcae\nparent efd04423c3300d79d0430c78602545ddf5b7f415\nauthor Tim Neumann <mail@timnn.me> 1522070094 +0200\ncommitter GitHub <noreply@github.com> 1522070094 +0200\n\nRollup merge of #48932 - Phlosioneer:43601-document-opaque-size, r=KodrAus\n\nDocument when types have OS-dependent sizes\n\nAs per issue #43601, types that can change size depending on the\ntarget operating system should say so in their documentation.\n\nI used this template when adding doc comments:\n\n```\nThe size of a(n) <name> struct may vary depending on the target\noperating system, and may change between Rust releases.\n```\n\nFor enums, I used \"instance\" instead of \"struct\".\n\nI added documentation to these types:\n```\n- std::time::Instant\t\t\t\t\t\t(contains sys::time::Instant)\n- std::time::SystemTime\t\t\t\t\t\t(contains sys::time::SystemTime)\n\n- std::io::StdinRaw\t\t\t\t\t\t\t(contains sys::stdio::Stdin)\n- std::io::StdoutRaw\t\t\t\t\t\t(contains sys::stdio::Stdout)\n- std::io::Stderr\t\t\t\t\t\t\t(contains sys::stdio::Stderr)\n\n- std::net::addr::SocketAddrV4\t\t\t\t(contains sys::net::netc::sockaddr_in)\n- std::net::addr::SocketAddrV6\t\t\t\t(contains sys::net::netc::sockaddr_in6)\n- std::net::addr::SocketAddr\t\t\t\t(contains std::net::addr::SocketAddrV4 and SocketAddrV6)\n- std::net::ip::Ipv4Addr\t\t\t\t\t(contains sys::net::netc::in_addr)\n- std::net::ip::Ipv6Addr\t\t\t\t\t(contains sys::net::netc::in6_addr)\n- std::net::ip::IpAddr\t\t\t\t\t\t(contains std::net::ip::Ipv4Addr and Ipv6Addr)\n```\n\nI also found that these types varied in size; however, I don't think they need documentation, as it's already fairly obvious that they change based on different OS's:\n\n```\n- std::fs::DirBuilder\t\t\t\t\t\t(contains sys::fs::DirBuilder)\n- std::fs::FileType\t\t\t\t\t\t\t(contains sys::fs::FileType)\n- std::fs::Permissions\t\t\t\t\t\t(contains sys::fs::FilePermissions)\n- std::fs::OpenOptions\t\t\t\t\t\t(contains sys::fs::OpenOptions)\n- std::fs::DirEntry\t\t\t\t\t\t\t(contains sys::fs::DirEntry)\n- std::fs::ReadDir\t\t\t\t\t\t\t(contains sys::fs::ReadDir)\n- std::fs::Metadata\t\t\t\t\t\t\t(contains sys::fs::FileAttr)\n- std::fs::File\t\t\t\t\t\t\t\t(contains sys::fs::File)\n\n- std::process::Child\t\t\t\t\t\t(contains sys::process::Process)\n- std::process::ChildStdin\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::ChildStdout\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::ChildStderr\t\t\t\t\t(contains sys::process::AnonPipe)\n- std::process::Command\t\t\t\t\t\t(contains sys::process::Command)\n- std::process::Stdio\t\t\t\t\t\t(contains sys::process::Stdio)\n- std::process::ExitStatus\t\t\t\t\t(contains sys::process::ExitStatus)\n- std::process::Output\t\t\t\t\t\t(contains std::process::ExitStatus)\n\n- std::sys_common::condvar::Condvar\t\t\t(contains sys::condvar::Condvar)\n- std::sys_common::mutex::Mutex\t\t\t\t(contains sys::mutex::Mutex)\n- std::sys_common::net::LookupHost\t\t\t(contains sys::net::netc::addrinfo)\n- std::sys_common::net::TcpStream\t\t\t(contains sys::net::Socket)\n- std::sys_common::net::TcpListener\t\t\t(contains sys::net::Socket)\n- std::sys_common::net::UdpSocket\t\t\t(contains sys::net::Socket)\n- std::sys_common::remutex::ReentrantMutex\t(contains sys::mutex::ReentrantMutex)\n- std::sys_common::rwlock::RWLock\t\t\t(contains sys::rwlock::RWLock)\n- std::sys_common::thread_local::Key\t\t(contains sys::thread_local::Key)\n```\nMaybe we should just put a comment about the size of structs in the module-level docs for `fs`, `process`, and `sys_common`?\n\nIf anyone can think of other types that can change size, comment below. I'm also open to changing the wording.\n\ncloses #43601.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/571734fdd77460881d5db31be8970bcecc380f18", "html_url": "https://github.com/rust-lang/rust/commit/571734fdd77460881d5db31be8970bcecc380f18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/571734fdd77460881d5db31be8970bcecc380f18/comments", "author": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d7a04610de0ac95e85eb13f814b45a26458dcae", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d7a04610de0ac95e85eb13f814b45a26458dcae", "html_url": "https://github.com/rust-lang/rust/commit/3d7a04610de0ac95e85eb13f814b45a26458dcae"}, {"sha": "efd04423c3300d79d0430c78602545ddf5b7f415", "url": "https://api.github.com/repos/rust-lang/rust/commits/efd04423c3300d79d0430c78602545ddf5b7f415", "html_url": "https://github.com/rust-lang/rust/commit/efd04423c3300d79d0430c78602545ddf5b7f415"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "bc2c9f522d3b0c35c69b3d33028a9f24923efaf4", "filename": "src/libstd/net/addr.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Fnet%2Faddr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Fnet%2Faddr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Faddr.rs?ref=571734fdd77460881d5db31be8970bcecc380f18", "patch": "@@ -28,6 +28,9 @@ use slice;\n /// as possibly some version-dependent additional information. See [`SocketAddrV4`]'s and\n /// [`SocketAddrV6`]'s respective documentation for more details.\n ///\n+/// The size of a `SocketAddr` instance may vary depending on the target operating\n+/// system.\n+///\n /// [IP address]: ../../std/net/enum.IpAddr.html\n /// [`SocketAddrV4`]: ../../std/net/struct.SocketAddrV4.html\n /// [`SocketAddrV6`]: ../../std/net/struct.SocketAddrV6.html\n@@ -61,6 +64,9 @@ pub enum SocketAddr {\n ///\n /// See [`SocketAddr`] for a type encompassing both IPv4 and IPv6 socket addresses.\n ///\n+/// The size of a `SocketAddrV4` struct may vary depending on the target operating\n+/// system.\n+///\n /// [IETF RFC 793]: https://tools.ietf.org/html/rfc793\n /// [IPv4 address]: ../../std/net/struct.Ipv4Addr.html\n /// [`SocketAddr`]: ../../std/net/enum.SocketAddr.html\n@@ -88,6 +94,9 @@ pub struct SocketAddrV4 { inner: c::sockaddr_in }\n ///\n /// See [`SocketAddr`] for a type encompassing both IPv4 and IPv6 socket addresses.\n ///\n+/// The size of a `SocketAddrV6` struct may vary depending on the target operating\n+/// system.\n+///\n /// [IETF RFC 2553, Section 3.3]: https://tools.ietf.org/html/rfc2553#section-3.3\n /// [IPv6 address]: ../../std/net/struct.Ipv6Addr.html\n /// [`SocketAddr`]: ../../std/net/enum.SocketAddr.html"}, {"sha": "031fae6d59bf8be0407bf999e731fd1e48e20494", "filename": "src/libstd/net/ip.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Fip.rs?ref=571734fdd77460881d5db31be8970bcecc380f18", "patch": "@@ -26,6 +26,9 @@ use sys_common::{AsInner, FromInner};\n /// This enum can contain either an [`Ipv4Addr`] or an [`Ipv6Addr`], see their\n /// respective documentation for more details.\n ///\n+/// The size of an `IpAddr` instance may vary depending on the target operating\n+/// system.\n+///\n /// [`Ipv4Addr`]: ../../std/net/struct.Ipv4Addr.html\n /// [`Ipv6Addr`]: ../../std/net/struct.Ipv6Addr.html\n ///\n@@ -61,6 +64,9 @@ pub enum IpAddr {\n ///\n /// See [`IpAddr`] for a type encompassing both IPv4 and IPv6 addresses.\n ///\n+/// The size of an `Ipv4Addr` struct may vary depending on the target operating\n+/// system.\n+///\n /// [IETF RFC 791]: https://tools.ietf.org/html/rfc791\n /// [`IpAddr`]: ../../std/net/enum.IpAddr.html\n ///\n@@ -93,6 +99,9 @@ pub struct Ipv4Addr {\n ///\n /// See [`IpAddr`] for a type encompassing both IPv4 and IPv6 addresses.\n ///\n+/// The size of an `Ipv6Addr` struct may vary depending on the target operating\n+/// system.\n+///\n /// [IETF RFC 4291]: https://tools.ietf.org/html/rfc4291\n /// [`IpAddr`]: ../../std/net/enum.IpAddr.html\n ///"}, {"sha": "7256ac43e27e48272f97a59d9675176bfd58ecce", "filename": "src/libstd/time.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/571734fdd77460881d5db31be8970bcecc380f18/src%2Flibstd%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftime.rs?ref=571734fdd77460881d5db31be8970bcecc380f18", "patch": "@@ -49,6 +49,9 @@ pub use core::time::Duration;\n /// allows measuring the duration between two instants (or comparing two\n /// instants).\n ///\n+/// The size of an `Instant` struct may vary depending on the target operating\n+/// system.\n+///\n /// Example:\n ///\n /// ```no_run\n@@ -88,6 +91,9 @@ pub struct Instant(time::Instant);\n /// fixed point in time, a `SystemTime` can be converted to a human-readable time,\n /// or perhaps some other string representation.\n ///\n+/// The size of a `SystemTime` struct may vary depending on the target operating\n+/// system.\n+///\n /// [`Instant`]: ../../std/time/struct.Instant.html\n /// [`Result`]: ../../std/result/enum.Result.html\n /// [`Duration`]: ../../std/time/struct.Duration.html"}]}