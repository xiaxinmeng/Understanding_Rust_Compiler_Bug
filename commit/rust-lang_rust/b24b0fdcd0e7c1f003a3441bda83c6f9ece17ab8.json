{"sha": "b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "node_id": "C_kwDOAAsO6NoAKGIyNGIwZmRjZDBlN2MxZjAwM2EzNDQxYmRhODNjNmY5ZWNlMTdhYjg", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-12T06:12:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-12T06:12:09Z"}, "message": "Rollup merge of #92699 - camelid:private-fields, r=jsha\n\nrustdoc: Display \"private fields\" instead of \"fields omitted\"\n\nAlso:\n\n  * Always use `/* */` block comments\n  * Use the same message everywhere, rather than sometimes prefixing\n    with \"some\"\n\nWhen I first read rustdoc docs, I was confused why the fields were being\nomitted. It was only later that I realized it was because they were\nprivate. It's also always bothered me that rustdoc sometimes uses `//`\nand sometimes uses `/*` comments for these messages, so this change\nmakes them all use `/*`.\n\nTechnically, I think fields can be omitted if they are public but\n`doc(hidden)` too, but `doc(hidden)` is analogous to privacy. It's\nreally just used to emulate \"doc privacy\" when -- because of technical\nlimitations -- an item has to be public. So I think it's fine to include\nthis under the category of \"private fields\".\n\nr? ```@jsha```", "tree": {"sha": "0d34c5c61888609cca62caf40429b0f6521acb64", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0d34c5c61888609cca62caf40429b0f6521acb64"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh3nE5CRBK7hj4Ov3rIwAAmFUIACM+5rtqhZ91P34KeM2uKxP4\nGzvhqQgNnP7AFHnyK3U+xG5g5Y3wx5O3wvmRIEYZe4LLnRbxc0ickegG+rfIXeAa\nbiG0PB7CTdiiExFBO/uvccr69DaZDj7RWS3N2lspt2B7Dn/80XAm1NjVrcXAn9/8\nd6Ku288D3jrUf53FEA/ClYAZWMO+vZm099DC0IXLBoPP/8T2grWBxVzxJhyAhA0j\ntN67P7ZN5JaGJk3mLWtLzJozBHz7p/bo0znqa5SZn+C4vrkJRHhNbqf2tHaaOOH2\nJxmIFrfTVbo2LQXF7Y6Drf/v0Qmqblqpb0KRm1WFdlUu4Lv70VEHGgFuhsyM6Q0=\n=zGys\n-----END PGP SIGNATURE-----\n", "payload": "tree 0d34c5c61888609cca62caf40429b0f6521acb64\nparent 9ea9e1851d19f86a13659995244c617d6eb5d8bd\nparent 2b70a3df7a73b283e7f19439a98c81bb66f6a852\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1641967929 +0100\ncommitter GitHub <noreply@github.com> 1641967929 +0100\n\nRollup merge of #92699 - camelid:private-fields, r=jsha\n\nrustdoc: Display \"private fields\" instead of \"fields omitted\"\n\nAlso:\n\n  * Always use `/* */` block comments\n  * Use the same message everywhere, rather than sometimes prefixing\n    with \"some\"\n\nWhen I first read rustdoc docs, I was confused why the fields were being\nomitted. It was only later that I realized it was because they were\nprivate. It's also always bothered me that rustdoc sometimes uses `//`\nand sometimes uses `/*` comments for these messages, so this change\nmakes them all use `/*`.\n\nTechnically, I think fields can be omitted if they are public but\n`doc(hidden)` too, but `doc(hidden)` is analogous to privacy. It's\nreally just used to emulate \"doc privacy\" when -- because of technical\nlimitations -- an item has to be public. So I think it's fine to include\nthis under the category of \"private fields\".\n\nr? ```@jsha```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "html_url": "https://github.com/rust-lang/rust/commit/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ea9e1851d19f86a13659995244c617d6eb5d8bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ea9e1851d19f86a13659995244c617d6eb5d8bd", "html_url": "https://github.com/rust-lang/rust/commit/9ea9e1851d19f86a13659995244c617d6eb5d8bd"}, {"sha": "2b70a3df7a73b283e7f19439a98c81bb66f6a852", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b70a3df7a73b283e7f19439a98c81bb66f6a852", "html_url": "https://github.com/rust-lang/rust/commit/2b70a3df7a73b283e7f19439a98c81bb66f6a852"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "4f7bb39213bb3f3a629d4ace0daf22a78a41fda0", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "patch": "@@ -1557,7 +1557,7 @@ fn render_union(\n     }\n \n     if it.has_stripped_fields().unwrap() {\n-        write!(w, \"    // some fields omitted\\n{}\", tab);\n+        write!(w, \"    /* private fields */\\n{}\", tab);\n     }\n     if toggle {\n         toggle_close(w);\n@@ -1613,13 +1613,11 @@ fn render_struct(\n \n             if has_visible_fields {\n                 if it.has_stripped_fields().unwrap() {\n-                    write!(w, \"\\n{}    // some fields omitted\", tab);\n+                    write!(w, \"\\n{}    /* private fields */\", tab);\n                 }\n                 write!(w, \"\\n{}\", tab);\n             } else if it.has_stripped_fields().unwrap() {\n-                // If there are no visible fields we can just display\n-                // `{ /* fields omitted */ }` to save space.\n-                write!(w, \" /* fields omitted */ \");\n+                write!(w, \" /* private fields */ \");\n             }\n             if toggle {\n                 toggle_close(w);"}, {"sha": "7e1cada4b9828c939d892e9e56505e1a83b9fa67", "filename": "src/test/rustdoc/structfields.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Fstructfields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Fstructfields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fstructfields.rs?ref=b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "patch": "@@ -2,7 +2,7 @@\n pub struct Foo {\n     // @has - //pre \"pub a: ()\"\n     pub a: (),\n-    // @has - //pre \"// some fields omitted\"\n+    // @has - //pre \"/* private fields */\"\n     // @!has - //pre \"b: ()\"\n     b: (),\n     // @!has - //pre \"c: usize\"\n@@ -16,7 +16,7 @@ pub struct Foo {\n pub struct Bar {\n     // @has - //pre \"pub a: ()\"\n     pub a: (),\n-    // @!has - //pre \"// some fields omitted\"\n+    // @!has - //pre \"/* private fields */\"\n }\n \n // @has structfields/enum.Qux.html\n@@ -29,11 +29,11 @@ pub enum Qux {\n         b: (),\n         // @has - //pre \"c: usize\"\n         c: usize,\n-        // @has - //pre \"// some fields omitted\"\n+        // @has - //pre \"/* private fields */\"\n     },\n }\n \n-// @has structfields/struct.Baz.html //pre \"pub struct Baz { /* fields omitted */ }\"\n+// @has structfields/struct.Baz.html //pre \"pub struct Baz { /* private fields */ }\"\n pub struct Baz {\n     x: u8,\n     #[doc(hidden)]"}, {"sha": "c1df4613e3562ccd9dbc286bc2a098fcb8d36260", "filename": "src/test/rustdoc/toggle-item-contents.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs?ref=b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "patch": "@@ -55,7 +55,7 @@ pub union Union {\n \n // @has 'toggle_item_contents/struct.PrivStruct.html'\n // @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 0\n-// @has - '//div[@class=\"docblock item-decl\"]' 'fields omitted'\n+// @has - '//div[@class=\"docblock item-decl\"]' '/* private fields */'\n pub struct PrivStruct {\n     a: usize,\n     b: usize,"}, {"sha": "5a788eb1b1cae65bef324d681238905a357fa462", "filename": "src/test/rustdoc/union.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Funion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8/src%2Ftest%2Frustdoc%2Funion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Funion.rs?ref=b24b0fdcd0e7c1f003a3441bda83c6f9ece17ab8", "patch": "@@ -2,7 +2,7 @@\n pub union U {\n     // @has - //pre \"pub a: u8\"\n     pub a: u8,\n-    // @has - //pre \"// some fields omitted\"\n+    // @has - //pre \"/* private fields */\"\n     // @!has - //pre \"b: u16\"\n     b: u16,\n }"}]}