{"sha": "51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxZWY3YTM2NzZjMjY2NWNhNDFlNGVjOWY1YjQzYzdhMmViN2M2ZDg=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-28T01:16:50Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-28T02:04:56Z"}, "message": "Clean up output a bit when running verbose compile tests", "tree": {"sha": "ea7536ad91c6b8110f175aad390278c47266d48b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea7536ad91c6b8110f175aad390278c47266d48b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8", "html_url": "https://github.com/rust-lang/rust/commit/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90a79b99513fbfddfba9e39651db1d72bc171bc3", "url": "https://api.github.com/repos/rust-lang/rust/commits/90a79b99513fbfddfba9e39651db1d72bc171bc3", "html_url": "https://github.com/rust-lang/rust/commit/90a79b99513fbfddfba9e39651db1d72bc171bc3"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "ddae56e29b78d54ae0254cfff56b8d9ba2bd7b43", "filename": "src/test/compiletest/compiletest.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8/src%2Ftest%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8/src%2Ftest%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompiletest%2Fcompiletest.rs?ref=51ef7a3676c2665ca41e4ec9f5b43c7a2eb7c6d8", "patch": "@@ -388,6 +388,10 @@ mod runtest {\n     export run;\n \n     fn run(cx: &cx, testfile: &str) {\n+        if (cx.config.verbose) {\n+            // We're going to be dumping a lot of info. Start on a new line.\n+            io::stdout().write_str(\"\\n\\n\");\n+        }\n         log #fmt(\"running %s\", testfile);\n         task::unsupervise();\n         let props = load_props(testfile);\n@@ -523,7 +527,7 @@ mod runtest {\n         let cmdline =\n             {\n                 let cmdline = make_cmdline(lib_path, prog, args);\n-                logv(cx.config, #fmt(\"running %s\", cmdline));\n+                logv(cx.config, #fmt(\"executing %s\", cmdline));\n                 cmdline\n             };\n         let res = procsrv::run(cx.procsrv, lib_path, prog, args);\n@@ -562,9 +566,9 @@ mod runtest {\n     fn maybe_dump_to_stdout(config: &config,\n                             out: &str, err: &str) {\n         if config.verbose {\n-            let sep1 = #fmt(\"-%s-----------------------------------\",\n+            let sep1 = #fmt(\"------%s------------------------------\",\n                             \"stdout\");\n-            let sep2 = #fmt(\"-%s-----------------------------------\",\n+            let sep2 = #fmt(\"------%s------------------------------\",\n                             \"stderr\");\n             let sep3 = \"------------------------------------------\";\n             io::stdout().write_line(sep1);"}]}