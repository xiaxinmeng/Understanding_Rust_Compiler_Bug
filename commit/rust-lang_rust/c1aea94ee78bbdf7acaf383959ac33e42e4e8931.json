{"sha": "c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "node_id": "C_kwDOAAsO6NoAKGMxYWVhOTRlZTc4YmJkZjdhY2FmMzgzOTU5YWMzM2U0MmU0ZTg5MzE", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-10T01:04:47Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-10T01:05:33Z"}, "message": "rustdoc: test cases for glob shadowing", "tree": {"sha": "097d6a29067aad6062915006721930c521190a4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/097d6a29067aad6062915006721930c521190a4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "html_url": "https://github.com/rust-lang/rust/commit/c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "56e9ec547a8b4b39c0da7ea66d1575b9f78da1a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/56e9ec547a8b4b39c0da7ea66d1575b9f78da1a8", "html_url": "https://github.com/rust-lang/rust/commit/56e9ec547a8b4b39c0da7ea66d1575b9f78da1a8"}], "stats": {"total": 103, "additions": 103, "deletions": 0}, "files": [{"sha": "66a31c42bcfc7732b52c30387c2cc108eb8154c9", "filename": "src/test/rustdoc/glob-shadowing.rs", "status": "added", "additions": 86, "deletions": 0, "changes": 86, "blob_url": "https://github.com/rust-lang/rust/blob/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fglob-shadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fglob-shadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fglob-shadowing.rs?ref=c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "patch": "@@ -0,0 +1,86 @@\n+// @has 'glob_shadowing/index.html'\n+// @count - '//div[@class=\"item-left module-item\"]' 6\n+// @!has - '//div[@class=\"item-right docblock-short\"]' 'sub1::describe'\n+// @has - '//div[@class=\"item-right docblock-short\"]' 'sub2::describe'\n+\n+// @!has - '//div[@class=\"item-right docblock-short\"]' 'sub1::describe2'\n+\n+// @!has - '//div[@class=\"item-right docblock-short\"]' 'sub1::prelude'\n+// @has - '//div[@class=\"item-right docblock-short\"]' 'mod::prelude'\n+\n+// @has - '//div[@class=\"item-right docblock-short\"]' 'sub1::Foo (struct)'\n+// @has - '//div[@class=\"item-right docblock-short\"]' 'mod::Foo (function)'\n+\n+// @has - '//div[@class=\"item-right docblock-short\"]' 'sub4::inner::X'\n+\n+// @has 'glob_shadowing/fn.describe.html'\n+// @has - '//div[@class=\"docblock\"]' 'sub2::describe'\n+\n+mod sub1 {\n+    // this should be shadowed by sub2::describe\n+    /// sub1::describe\n+    pub fn describe() -> &'static str {\n+        \"sub1::describe\"\n+    }\n+\n+    // this should be shadowed by mod::prelude\n+    /// sub1::prelude\n+    pub mod prelude {\n+    }\n+\n+    // this should *not* be shadowed, because sub1::Foo and mod::Foo are in different namespaces\n+    /// sub1::Foo (struct)\n+    pub struct Foo;\n+\n+    // this should be shadowed,\n+    // because both sub1::describe2 and sub3::describe2 are from glob reexport\n+    /// sub1::describe2\n+    pub fn describe2() -> &'static str {\n+        \"sub1::describe2\"\n+    }\n+}\n+\n+mod sub2 {\n+    /// sub2::describe\n+    pub fn describe() -> &'static str {\n+        \"sub2::describe\"\n+    }\n+}\n+\n+mod sub3 {\n+    // this should be shadowed\n+    // because both sub1::describe2 and sub3::describe2 are from glob reexport\n+    /// sub3::describe2\n+    pub fn describe2() -> &'static str {\n+        \"sub3::describe2\"\n+    }\n+}\n+\n+mod sub4 {\n+    // this should be shadowed by sub4::inner::X\n+    /// sub4::X\n+    pub const X: usize = 0;\n+    pub mod inner {\n+        pub use super::*;\n+        /// sub4::inner::X\n+        pub const X: usize = 1;\n+    }\n+}\n+\n+/// mod::Foo (function)\n+pub fn Foo() {}\n+\n+#[doc(inline)]\n+pub use sub2::describe;\n+\n+#[doc(inline)]\n+pub use sub1::*;\n+\n+#[doc(inline)]\n+pub use sub3::*;\n+\n+#[doc(inline)]\n+pub use sub4::inner::*;\n+\n+/// mod::prelude\n+pub mod prelude {}"}, {"sha": "d3a7a870b580a29d47a4bd3f927962744fad3344", "filename": "src/test/rustdoc/issue-83375-multiple-mods-w-same-name-doc-inline-last-item.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline-last-item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline-last-item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline-last-item.rs?ref=c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "patch": "@@ -0,0 +1,16 @@\n+#![crate_name = \"foo\"]\n+\n+pub mod sub {\n+    pub struct Item;\n+\n+    pub mod prelude {\n+        pub use super::Item;\n+    }\n+}\n+\n+#[doc(inline)]\n+pub use sub::*;\n+\n+// @count foo/index.html '//a[@class=\"mod\"][@title=\"foo::prelude mod\"]' 1\n+// @count foo/prelude/index.html '//div[@class=\"item-row\"]' 0\n+pub mod prelude {}"}, {"sha": "b836925099364598de36ee0cc1b0ebeb93abc234", "filename": "src/test/rustdoc/issue-83375-multiple-mods-w-same-name-doc-inline.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1aea94ee78bbdf7acaf383959ac33e42e4e8931/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-83375-multiple-mods-w-same-name-doc-inline.rs?ref=c1aea94ee78bbdf7acaf383959ac33e42e4e8931", "patch": "@@ -9,6 +9,7 @@ pub mod sub {\n }\n \n // @count foo/index.html '//a[@class=\"mod\"][@title=\"foo::prelude mod\"]' 1\n+// @count foo/prelude/index.html '//div[@class=\"item-row\"]' 0\n pub mod prelude {}\n \n #[doc(inline)]"}]}