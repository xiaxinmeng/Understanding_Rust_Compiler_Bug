{"sha": "a03d0181c51f29ad52216cb64bf27a0da4515029", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwM2QwMTgxYzUxZjI5YWQ1MjIxNmNiNjRiZjI3YTBkYTQ1MTUwMjk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-10-28T07:56:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-10-28T07:56:22Z"}, "message": "Rollup merge of #45535 - topecongiro:bootstrap-exit-code, r=kennytm\n\nReturn 0 as an exit status when no subcommand is given to bootstrap\n\nRunning `./x.py` emits usage and error messages when no subcommand is given:\n```\nUsage: x.py <subcommand> [options] [<paths>...]\n\nSubcommands:\n    build       Compile either the compiler or libraries\n    test        Build and run some test suites\n    bench       Build and run some benchmarks\n    doc         Build documentation\n    clean       Clean out build directories\n    dist        Build distribution artifacts\n    install     Install distribution artifacts\n\nTo learn more about a subcommand, run `./x.py <subcommand> -h`\n\nfailed to run: /home/topecongiro/rust/build/bootstrap/debug/bootstrap\n```\nIMHO the last line is unnecessary. This PR removes it by changing the return code of `bootstrap` to 0 when no sub command is given.", "tree": {"sha": "c35d824bf1cc4a30051c7d0dfaa9399870b5d1e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c35d824bf1cc4a30051c7d0dfaa9399870b5d1e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a03d0181c51f29ad52216cb64bf27a0da4515029", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a03d0181c51f29ad52216cb64bf27a0da4515029", "html_url": "https://github.com/rust-lang/rust/commit/a03d0181c51f29ad52216cb64bf27a0da4515029", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a03d0181c51f29ad52216cb64bf27a0da4515029/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a916a43e9a0d2dd0143ce87d3f437148f7b0155", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a916a43e9a0d2dd0143ce87d3f437148f7b0155", "html_url": "https://github.com/rust-lang/rust/commit/0a916a43e9a0d2dd0143ce87d3f437148f7b0155"}, {"sha": "732d9b281cbcc88a627fddb660a3b4021e1d94cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/732d9b281cbcc88a627fddb660a3b4021e1d94cf", "html_url": "https://github.com/rust-lang/rust/commit/732d9b281cbcc88a627fddb660a3b4021e1d94cf"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "b5d51598fab882009004091425de1e8fe7c5472e", "filename": "src/bootstrap/flags.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a03d0181c51f29ad52216cb64bf27a0da4515029/src%2Fbootstrap%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a03d0181c51f29ad52216cb64bf27a0da4515029/src%2Fbootstrap%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fflags.rs?ref=a03d0181c51f29ad52216cb64bf27a0da4515029", "patch": "@@ -136,9 +136,12 @@ To learn more about a subcommand, run `./x.py <subcommand> -h`\");\n         let subcommand = match subcommand {\n             Some(s) => s,\n             None => {\n-                // No subcommand -- show the general usage and subcommand help\n+                // No or an invalid subcommand -- show the general usage and subcommand help\n+                // An exit code will be 0 when no subcommand is given, and 1 in case of an invalid\n+                // subcommand.\n                 println!(\"{}\\n\", subcommand_help);\n-                process::exit(1);\n+                let exit_code = if args.is_empty() { 0 } else { 1 };\n+                process::exit(exit_code);\n             }\n         };\n "}]}