{"sha": "95ae4c9295ccee95599de847fdaccb8cf123c219", "node_id": "C_kwDOAAsO6NoAKDk1YWU0YzkyOTVjY2VlOTU1OTlkZTg0N2ZkYWNjYjhjZjEyM2MyMTk", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-06-12T20:49:42Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-06-12T20:49:42Z"}, "message": "rustdoc: change error message for invalid `#[doc(tuple_variadic)]`\n\nAdd test case.", "tree": {"sha": "5592cceca25e0bf073e7eb8ee0311c60b8e0dbb5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5592cceca25e0bf073e7eb8ee0311c60b8e0dbb5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/95ae4c9295ccee95599de847fdaccb8cf123c219", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/95ae4c9295ccee95599de847fdaccb8cf123c219", "html_url": "https://github.com/rust-lang/rust/commit/95ae4c9295ccee95599de847fdaccb8cf123c219", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/95ae4c9295ccee95599de847fdaccb8cf123c219/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36fb094d253d3364482570613635a467fab851cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/36fb094d253d3364482570613635a467fab851cb", "html_url": "https://github.com/rust-lang/rust/commit/36fb094d253d3364482570613635a467fab851cb"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "93b2c14129ed756356de0182359a4031798e2c99", "filename": "compiler/rustc_passes/src/check_attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/95ae4c9295ccee95599de847fdaccb8cf123c219/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/95ae4c9295ccee95599de847fdaccb8cf123c219/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs?ref=95ae4c9295ccee95599de847fdaccb8cf123c219", "patch": "@@ -815,7 +815,7 @@ impl CheckAttrVisitor<'_> {\n                         .sess\n                         .struct_span_err(\n                             meta.span(),\n-                            \"`#[doc(tuple_variadic)]` can only be used on unary tuples\",\n+                            \"`#[doc(tuple_variadic)]` must used on the first of a set of tuple trait impls with varying arity\",\n                         )\n                         .emit();\n                     return false;"}, {"sha": "11ce2dbe280500f201178295801dda910d0f1668", "filename": "src/test/rustdoc-ui/tuple-variadic-check.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/95ae4c9295ccee95599de847fdaccb8cf123c219/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/95ae4c9295ccee95599de847fdaccb8cf123c219/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.rs?ref=95ae4c9295ccee95599de847fdaccb8cf123c219", "patch": "@@ -0,0 +1,15 @@\n+#![feature(rustdoc_internals)]\n+\n+trait Mine {}\n+\n+// This one is fine\n+#[doc(tuple_variadic)]\n+impl<T> Mine for (T,) {}\n+\n+trait Mine2 {}\n+\n+// This one is not\n+#[doc(tuple_variadic)] //~ ERROR\n+impl<T, U> Mine for (T,U) {}\n+\n+fn main() {}"}, {"sha": "030bc28a2873611a668ec27edb4617433aad223d", "filename": "src/test/rustdoc-ui/tuple-variadic-check.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/95ae4c9295ccee95599de847fdaccb8cf123c219/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/95ae4c9295ccee95599de847fdaccb8cf123c219/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Ftuple-variadic-check.stderr?ref=95ae4c9295ccee95599de847fdaccb8cf123c219", "patch": "@@ -0,0 +1,8 @@\n+error: `#[doc(tuple_variadic)]` must used on the first of a set of tuple trait impls with varying arity\n+  --> $DIR/tuple-variadic-check.rs:12:7\n+   |\n+LL | #[doc(tuple_variadic)]\n+   |       ^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}]}