{"sha": "72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "node_id": "C_kwDOAAsO6NoAKDcyZDJkNmE0YmE0MGZhZTIyNTRhMDNmNzc4MmE4MGI4YjMxNWRkYmM", "commit": {"author": {"name": "gimbles", "email": "yusharora@protonmail.com", "date": "2022-05-07T03:37:07Z"}, "committer": {"name": "gimbles", "email": "yusharora@protonmail.com", "date": "2022-05-07T03:37:07Z"}, "message": "Move check-bootstrap from a makefile rule to test::Bootstrap", "tree": {"sha": "d7bc4672101adb57e1c78716995ce7b6dd10662a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d7bc4672101adb57e1c78716995ce7b6dd10662a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "html_url": "https://github.com/rust-lang/rust/commit/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/comments", "author": null, "committer": null, "parents": [{"sha": "bb1a03c4fcbe547168fab128fa39b08d1122a1c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb1a03c4fcbe547168fab128fa39b08d1122a1c2", "html_url": "https://github.com/rust-lang/rust/commit/bb1a03c4fcbe547168fab128fa39b08d1122a1c2"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "5a1f2e70413781ddd529ffdb38ccb20cba236826", "filename": "src/bootstrap/mk/Makefile.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fbootstrap%2Fmk%2FMakefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fbootstrap%2Fmk%2FMakefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmk%2FMakefile.in?ref=72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "patch": "@@ -45,8 +45,6 @@ check-aux:\n \t\tsrc/tools/cargo \\\n \t\tsrc/tools/cargotest \\\n \t\t$(BOOTSTRAP_ARGS)\n-check-bootstrap:\n-\t$(Q)$(CFG_PYTHON) $(CFG_SRC_DIR)src/bootstrap/bootstrap_test.py\n dist:\n \t$(Q)$(BOOTSTRAP) dist $(BOOTSTRAP_ARGS)\n distcheck:"}, {"sha": "d7a29a6b6beaea86ba6227af2906bd50de193c14", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "patch": "@@ -2356,6 +2356,10 @@ impl Step for Bootstrap {\n \n     /// Tests the build system itself.\n     fn run(self, builder: &Builder<'_>) {\n+        let mut check_bootstrap = Command::new(&builder.python());\n+        check_bootstrap.arg(\"bootstrap_test.py\").current_dir(builder.src.join(\"src/bootstrap/\"));\n+        try_run(builder, &mut check_bootstrap);\n+\n         let mut cmd = Command::new(&builder.initial_cargo);\n         cmd.arg(\"test\")\n             .current_dir(builder.src.join(\"src/bootstrap\"))"}, {"sha": "5f843a13bcd9b574ddbed4e71bf61ed3a12ce5e1", "filename": "src/ci/run.sh", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "patch": "@@ -141,8 +141,6 @@ $SRC/configure $RUST_CONFIGURE_ARGS\n \n retry make prepare\n \n-make check-bootstrap\n-\n # Display the CPU and memory information. This helps us know why the CI timing\n # is fluctuating.\n if isMacOS; then"}]}