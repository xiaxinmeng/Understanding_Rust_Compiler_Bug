{"sha": "4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "node_id": "C_kwDOAAsO6NoAKDRhZGM4ZWEyYWM3MTYwYTgyMjgzY2FjMDUzYzVmMWZmNWQyN2M3YTk", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-10-08T20:30:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-08T20:30:42Z"}, "message": "Rollup merge of #89669 - Urgau:json-remove-type-never, r=GuillaumeGomez\n\nRemove special-casing of never primitive in rustdoc-json-types\n\nFixes https://github.com/rust-lang/rust/issues/89349\n\nr? `@GuillaumeGomez`", "tree": {"sha": "481809ca709e632aaddae6fa8572361e0979b8d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/481809ca709e632aaddae6fa8572361e0979b8d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhYKpyCRBK7hj4Ov3rIwAAjucIADhG2RgV6WeV03ncumaIA+gO\nd+W4uDdye7Hw3qp7L8bXyE82nhA/zNKGFtNTolkW8L3QPdmYU/kYVtZpDztxtj1E\ne9jsJypyssFR7r5jTLurc06CAuM/d4ONLKhSIcPXz3A5zxwoDS2KEPSq8cLmiB0N\npjg5ibSH6vETXQbKxK+O4u7d0Ggqq+Z2BboOSEk7WY9Ox+Ki6AtSG46QqIELpPDT\nG6J5ls98MTMOKy8BiXgUvVU0Y8eR2gz9fOfgcVxcSouDj86cHQT2DRSRCaKPiAuh\nfb4STy1sU5pfThfa5dlcuiKdWmPPkHxutGcwHl4xwSEKw00LQctrRD/Nkm4SQw0=\n=nK3t\n-----END PGP SIGNATURE-----\n", "payload": "tree 481809ca709e632aaddae6fa8572361e0979b8d1\nparent 1c359687735dedf67323cb4d95ede830b6892f0f\nparent 4891aaf2e92264724bfb48a43cffbca14b942c83\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1633725042 +0200\ncommitter GitHub <noreply@github.com> 1633725042 +0200\n\nRollup merge of #89669 - Urgau:json-remove-type-never, r=GuillaumeGomez\n\nRemove special-casing of never primitive in rustdoc-json-types\n\nFixes https://github.com/rust-lang/rust/issues/89349\n\nr? `@GuillaumeGomez`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "html_url": "https://github.com/rust-lang/rust/commit/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c359687735dedf67323cb4d95ede830b6892f0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c359687735dedf67323cb4d95ede830b6892f0f", "html_url": "https://github.com/rust-lang/rust/commit/1c359687735dedf67323cb4d95ede830b6892f0f"}, {"sha": "4891aaf2e92264724bfb48a43cffbca14b942c83", "url": "https://api.github.com/repos/rust-lang/rust/commits/4891aaf2e92264724bfb48a43cffbca14b942c83", "html_url": "https://github.com/rust-lang/rust/commit/4891aaf2e92264724bfb48a43cffbca14b942c83"}], "stats": {"total": 27, "additions": 23, "deletions": 4}, "files": [{"sha": "661453521d1cc2a2baa95aaf4d7c1bb5ca923fd1", "filename": "src/librustdoc/json/conversions.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fjson%2Fconversions.rs?ref=4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "patch": "@@ -418,7 +418,6 @@ impl FromWithTcx<clean::Type> for Type {\n                 }\n             }\n             Generic(s) => Type::Generic(s.to_string()),\n-            Primitive(clean::PrimitiveType::Never) => Type::Never,\n             Primitive(p) => Type::Primitive(p.as_sym().to_string()),\n             BareFunction(f) => Type::FunctionPointer(Box::new((*f).into_tcx(tcx))),\n             Tuple(t) => Type::Tuple(t.into_iter().map(|x| x.into_tcx(tcx)).collect()),"}, {"sha": "637e5f2288d624ebdf9eacc72ec8b981285b3329", "filename": "src/librustdoc/json/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Flibrustdoc%2Fjson%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Flibrustdoc%2Fjson%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fjson%2Fmod.rs?ref=4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "patch": "@@ -255,7 +255,7 @@ impl<'tcx> FormatRenderer<'tcx> for JsonRenderer<'tcx> {\n                     )\n                 })\n                 .collect(),\n-            format_version: 8,\n+            format_version: 9,\n         };\n         let mut p = self.out_path.clone();\n         p.push(output.index.get(&output.root).unwrap().name.clone().unwrap());"}, {"sha": "7c418697c1c1c8851c72adedfbfc02a60133048e", "filename": "src/rustdoc-json-types/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Frustdoc-json-types%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Frustdoc-json-types%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc-json-types%2Flib.rs?ref=4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "patch": "@@ -388,8 +388,6 @@ pub enum Type {\n     },\n     /// `impl TraitA + TraitB + ...`\n     ImplTrait(Vec<GenericBound>),\n-    /// `!`\n-    Never,\n     /// `_`\n     Infer,\n     /// `*mut u32`, `*u8`, etc."}, {"sha": "fd04f04da066a0a161e688f5c2a610bc17adaa82", "filename": "src/test/rustdoc-json/primitives.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Ftest%2Frustdoc-json%2Fprimitives.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9/src%2Ftest%2Frustdoc-json%2Fprimitives.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fprimitives.rs?ref=4adc8ea2ac7160a82283cac053c5f1ff5d27c7a9", "patch": "@@ -0,0 +1,22 @@\n+#![feature(never_type)]\n+\n+// @has primitives.json \"$.index[*][?(@.name=='PrimNever')].visibility\" \\\"public\\\"\n+// @has - \"$.index[*][?(@.name=='PrimNever')].inner.type.kind\" \\\"primitive\\\"\n+// @has - \"$.index[*][?(@.name=='PrimNever')].inner.type.inner\" \\\"never\\\"\n+pub type PrimNever = !;\n+\n+// @has - \"$.index[*][?(@.name=='PrimStr')].inner.type.kind\" \\\"primitive\\\"\n+// @has - \"$.index[*][?(@.name=='PrimStr')].inner.type.inner\" \\\"str\\\"\n+pub type PrimStr = str;\n+\n+// @has - \"$.index[*][?(@.name=='PrimBool')].inner.type.kind\" \\\"primitive\\\"\n+// @has - \"$.index[*][?(@.name=='PrimBool')].inner.type.inner\" \\\"bool\\\"\n+pub type PrimBool = bool;\n+\n+// @has - \"$.index[*][?(@.name=='PrimChar')].inner.type.kind\" \\\"primitive\\\"\n+// @has - \"$.index[*][?(@.name=='PrimChar')].inner.type.inner\" \\\"char\\\"\n+pub type PrimChar = char;\n+\n+// @has - \"$.index[*][?(@.name=='PrimU8')].inner.type.kind\" \\\"primitive\\\"\n+// @has - \"$.index[*][?(@.name=='PrimU8')].inner.type.inner\" \\\"u8\\\"\n+pub type PrimU8 = u8;"}]}