{"sha": "56f3524c693eed6a849f27139b6c8f32986ca4b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2ZjM1MjRjNjkzZWVkNmE4NDlmMjcxMzliNmM4ZjMyOTg2Y2E0Yjg=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-04-01T11:22:13Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-04-01T11:22:13Z"}, "message": "Merge #1082\n\n1082: Async block in argument position r=matklad a=andreytkachenko\n\nFixes case when async block appears in argument position\n\nCo-authored-by: Andrey Tkachenko <andreytkachenko64@gmail.com>", "tree": {"sha": "c7a248ab3befc2852ffa2807eb778e441c8fa903", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7a248ab3befc2852ffa2807eb778e441c8fa903"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56f3524c693eed6a849f27139b6c8f32986ca4b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56f3524c693eed6a849f27139b6c8f32986ca4b8", "html_url": "https://github.com/rust-lang/rust/commit/56f3524c693eed6a849f27139b6c8f32986ca4b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56f3524c693eed6a849f27139b6c8f32986ca4b8/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "b7e26c32a1acce673a53877ef474d8c5fa6aa475", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7e26c32a1acce673a53877ef474d8c5fa6aa475", "html_url": "https://github.com/rust-lang/rust/commit/b7e26c32a1acce673a53877ef474d8c5fa6aa475"}, {"sha": "e89b97524a3940d7e19649ca76874aebd1d09e29", "url": "https://api.github.com/repos/rust-lang/rust/commits/e89b97524a3940d7e19649ca76874aebd1d09e29", "html_url": "https://github.com/rust-lang/rust/commit/e89b97524a3940d7e19649ca76874aebd1d09e29"}], "stats": {"total": 96, "additions": 96, "deletions": 0}, "files": [{"sha": "8dc7e44a9b9b76a715290c7f9be881b2359421e7", "filename": "crates/ra_parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=56f3524c693eed6a849f27139b6c8f32986ca4b8", "patch": "@@ -51,6 +51,7 @@ pub(super) const ATOM_EXPR_FIRST: TokenSet =\n         BREAK_KW,\n         CONTINUE_KW,\n         LIFETIME,\n+        ASYNC_KW,\n     ]);\n \n const EXPR_RECOVERY_SET: TokenSet = token_set![LET_KW];"}, {"sha": "ec4612cff27829238e6be9cb34d8193bf64239ab", "filename": "crates/ra_syntax/tests/data/parser/ok/0050_async_block_as_argument.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.rs?ref=56f3524c693eed6a849f27139b6c8f32986ca4b8", "patch": "@@ -0,0 +1,5 @@\n+fn foo(x: impl std::future::Future<Output = i32>) {}\n+\n+fn main() {\n+    foo(async move { 12 })\n+}"}, {"sha": "82f0f8142e3f49b8195d91d0e11bc69a68b520f1", "filename": "crates/ra_syntax/tests/data/parser/ok/0050_async_block_as_argument.txt", "status": "added", "additions": 90, "deletions": 0, "changes": 90, "blob_url": "https://github.com/rust-lang/rust/blob/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.txt", "raw_url": "https://github.com/rust-lang/rust/raw/56f3524c693eed6a849f27139b6c8f32986ca4b8/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Fok%2F0050_async_block_as_argument.txt?ref=56f3524c693eed6a849f27139b6c8f32986ca4b8", "patch": "@@ -0,0 +1,90 @@\n+SOURCE_FILE@[0; 95)\n+  FN_DEF@[0; 52)\n+    FN_KW@[0; 2)\n+    WHITESPACE@[2; 3)\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 49)\n+      L_PAREN@[6; 7)\n+      PARAM@[7; 48)\n+        BIND_PAT@[7; 8)\n+          NAME@[7; 8)\n+            IDENT@[7; 8) \"x\"\n+        COLON@[8; 9)\n+        WHITESPACE@[9; 10)\n+        IMPL_TRAIT_TYPE@[10; 48)\n+          IMPL_KW@[10; 14)\n+          WHITESPACE@[14; 15)\n+          TYPE_BOUND_LIST@[15; 48)\n+            TYPE_BOUND@[15; 48)\n+              PATH_TYPE@[15; 48)\n+                PATH@[15; 48)\n+                  PATH@[15; 26)\n+                    PATH@[15; 18)\n+                      PATH_SEGMENT@[15; 18)\n+                        NAME_REF@[15; 18)\n+                          IDENT@[15; 18) \"std\"\n+                    COLONCOLON@[18; 20)\n+                    PATH_SEGMENT@[20; 26)\n+                      NAME_REF@[20; 26)\n+                        IDENT@[20; 26) \"future\"\n+                  COLONCOLON@[26; 28)\n+                  PATH_SEGMENT@[28; 48)\n+                    NAME_REF@[28; 34)\n+                      IDENT@[28; 34) \"Future\"\n+                    TYPE_ARG_LIST@[34; 48)\n+                      L_ANGLE@[34; 35)\n+                      ASSOC_TYPE_ARG@[35; 47)\n+                        NAME_REF@[35; 41)\n+                          IDENT@[35; 41) \"Output\"\n+                        WHITESPACE@[41; 42)\n+                        EQ@[42; 43)\n+                        WHITESPACE@[43; 44)\n+                        PATH_TYPE@[44; 47)\n+                          PATH@[44; 47)\n+                            PATH_SEGMENT@[44; 47)\n+                              NAME_REF@[44; 47)\n+                                IDENT@[44; 47) \"i32\"\n+                      R_ANGLE@[47; 48)\n+      R_PAREN@[48; 49)\n+    WHITESPACE@[49; 50)\n+    BLOCK@[50; 52)\n+      L_CURLY@[50; 51)\n+      R_CURLY@[51; 52)\n+  WHITESPACE@[52; 54)\n+  FN_DEF@[54; 94)\n+    FN_KW@[54; 56)\n+    WHITESPACE@[56; 57)\n+    NAME@[57; 61)\n+      IDENT@[57; 61) \"main\"\n+    PARAM_LIST@[61; 63)\n+      L_PAREN@[61; 62)\n+      R_PAREN@[62; 63)\n+    WHITESPACE@[63; 64)\n+    BLOCK@[64; 94)\n+      L_CURLY@[64; 65)\n+      WHITESPACE@[65; 70)\n+      CALL_EXPR@[70; 92)\n+        PATH_EXPR@[70; 73)\n+          PATH@[70; 73)\n+            PATH_SEGMENT@[70; 73)\n+              NAME_REF@[70; 73)\n+                IDENT@[70; 73) \"foo\"\n+        ARG_LIST@[73; 92)\n+          L_PAREN@[73; 74)\n+          BLOCK_EXPR@[74; 91)\n+            ASYNC_KW@[74; 79)\n+            WHITESPACE@[79; 80)\n+            MOVE_KW@[80; 84)\n+            WHITESPACE@[84; 85)\n+            BLOCK@[85; 91)\n+              L_CURLY@[85; 86)\n+              WHITESPACE@[86; 87)\n+              LITERAL@[87; 89)\n+                INT_NUMBER@[87; 89) \"12\"\n+              WHITESPACE@[89; 90)\n+              R_CURLY@[90; 91)\n+          R_PAREN@[91; 92)\n+      WHITESPACE@[92; 93)\n+      R_CURLY@[93; 94)\n+  WHITESPACE@[94; 95)"}]}