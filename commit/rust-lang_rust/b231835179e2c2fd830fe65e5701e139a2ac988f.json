{"sha": "b231835179e2c2fd830fe65e5701e139a2ac988f", "node_id": "C_kwDOAAsO6NoAKGIyMzE4MzUxNzllMmMyZmQ4MzBmZTY1ZTU3MDFlMTM5YTJhYzk4OGY", "commit": {"author": {"name": "joboet", "email": "jonasboettiger@icloud.com", "date": "2022-10-18T22:32:33Z"}, "committer": {"name": "joboet", "email": "jonasboettiger@icloud.com", "date": "2022-11-06T14:32:59Z"}, "message": "std: fix double-free of mutex", "tree": {"sha": "f7031cf50e6d0790d6f0af8b0cd7194bad7d0685", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7031cf50e6d0790d6f0af8b0cd7194bad7d0685"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b231835179e2c2fd830fe65e5701e139a2ac988f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEVuz3PwcqDyifNyYbcE4BSbAZSzwFAmNnxZsACgkQcE4BSbAZ\nSzwxFhAAlGO549oyIcF38PRBPwSVYXVNTMpszOPs/lRfCv7Rh0rfbotSEy230qGM\nPGXk7SsDbBXeOU+BjuRlEi1cqv9/eGqjQDz8y8wk/2IhhlMEPN1HTDESknsPNSOM\nVfEbZt127YqMQEMugwEPOU1oSG9VKk1sbB07bms75diRWDZNBrfkUOBcLo7BQP/8\n7DnkqWScv266EHAlBHpC1T9qyH9fNIBjY+hw/YhoNIhlrzd+B3wGwUbnZ29fRSjK\n5wbXmm5x7zeQxsj0J7m9Zsr/wlmMNcyDe4OJNveq2E6b1Lg9Aq+WapBdqJTlbhx2\nCeaZk+wUxe5ukWfeJmYu6hdH6LKriWlUrkf8vXixqUyxa9hnM2JwEWaKyCZHLitY\nTwnbrXYdYAo8YMwYkylqtON8yGwD5d6WFkhEmmh7BrSV6CeUkR0N9PAOvsunC+EX\nNJ/3/fStYwhVcuEYET59ZdIMPKJdwafCLV8KEOrwwaawVdrwwMuf/rWlkfAAwDUk\nRek/60t18Fr7XI99+dDHU6kTEJj9MubUaCpb20H6LIXQnuzI/S7PNHJk3ya6zOVn\nwY2yEZSeE4UqehcyjfNGF0CQj/SKpjiZa6+ifh4Jy/3uZtKgSQVU5TcZZjkSJAKP\n933ttWjdNk4aW2UNMYxqe8+rGHHLnfd7Uu34ISDW5v4qDLkOybM=\n=c/se\n-----END PGP SIGNATURE-----", "payload": "tree f7031cf50e6d0790d6f0af8b0cd7194bad7d0685\nparent 98815742cf2e914ee0d7142a02322cf939c47834\nauthor joboet <jonasboettiger@icloud.com> 1666132353 +0200\ncommitter joboet <jonasboettiger@icloud.com> 1667745179 +0100\n\nstd: fix double-free of mutex\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b231835179e2c2fd830fe65e5701e139a2ac988f", "html_url": "https://github.com/rust-lang/rust/commit/b231835179e2c2fd830fe65e5701e139a2ac988f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b231835179e2c2fd830fe65e5701e139a2ac988f/comments", "author": {"login": "joboet", "id": 25721079, "node_id": "MDQ6VXNlcjI1NzIxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/25721079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joboet", "html_url": "https://github.com/joboet", "followers_url": "https://api.github.com/users/joboet/followers", "following_url": "https://api.github.com/users/joboet/following{/other_user}", "gists_url": "https://api.github.com/users/joboet/gists{/gist_id}", "starred_url": "https://api.github.com/users/joboet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joboet/subscriptions", "organizations_url": "https://api.github.com/users/joboet/orgs", "repos_url": "https://api.github.com/users/joboet/repos", "events_url": "https://api.github.com/users/joboet/events{/privacy}", "received_events_url": "https://api.github.com/users/joboet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joboet", "id": 25721079, "node_id": "MDQ6VXNlcjI1NzIxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/25721079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joboet", "html_url": "https://github.com/joboet", "followers_url": "https://api.github.com/users/joboet/followers", "following_url": "https://api.github.com/users/joboet/following{/other_user}", "gists_url": "https://api.github.com/users/joboet/gists{/gist_id}", "starred_url": "https://api.github.com/users/joboet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joboet/subscriptions", "organizations_url": "https://api.github.com/users/joboet/orgs", "repos_url": "https://api.github.com/users/joboet/repos", "events_url": "https://api.github.com/users/joboet/events{/privacy}", "received_events_url": "https://api.github.com/users/joboet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98815742cf2e914ee0d7142a02322cf939c47834", "url": "https://api.github.com/repos/rust-lang/rust/commits/98815742cf2e914ee0d7142a02322cf939c47834", "html_url": "https://github.com/rust-lang/rust/commit/98815742cf2e914ee0d7142a02322cf939c47834"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "8a78bc1fd739904141deda9cafaba58b91a8f624", "filename": "library/std/src/sys/unix/locks/pthread_mutex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b231835179e2c2fd830fe65e5701e139a2ac988f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Flocks%2Fpthread_mutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b231835179e2c2fd830fe65e5701e139a2ac988f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Flocks%2Fpthread_mutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Flocks%2Fpthread_mutex.rs?ref=b231835179e2c2fd830fe65e5701e139a2ac988f", "patch": "@@ -64,7 +64,7 @@ impl LazyInit for AllocatedMutex {\n         // We're not allowed to pthread_mutex_destroy a locked mutex,\n         // so check first if it's unlocked.\n         if unsafe { libc::pthread_mutex_trylock(mutex.0.get()) == 0 } {\n-            unsafe { libc::pthread_mutex_destroy(mutex.0.get()) };\n+            unsafe { libc::pthread_mutex_unlock(mutex.0.get()) };\n             drop(mutex);\n         } else {\n             // The mutex is locked. This happens if a MutexGuard is leaked."}]}