{"sha": "ae58a875945eaf2d827a6acae0b9900a5426537c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlNThhODc1OTQ1ZWFmMmQ4MjdhNmFjYWUwYjk5MDBhNTQyNjUzN2M=", "commit": {"author": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2016-08-10T19:35:09Z"}, "committer": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2016-08-10T19:35:09Z"}, "message": "add -mrelax-relocations=no to i686-musl and i586-gnu\n\nI've been experiencing #34978 with these two targets. This applies the\nhack in #35178 to these targets as well.", "tree": {"sha": "66a1cbbebcc8a041bfa1950c35f78adaffdfa66b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66a1cbbebcc8a041bfa1950c35f78adaffdfa66b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae58a875945eaf2d827a6acae0b9900a5426537c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae58a875945eaf2d827a6acae0b9900a5426537c", "html_url": "https://github.com/rust-lang/rust/commit/ae58a875945eaf2d827a6acae0b9900a5426537c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae58a875945eaf2d827a6acae0b9900a5426537c/comments", "author": null, "committer": null, "parents": [{"sha": "ae774103501337ed63b42b673c6c4fdbf369e80e", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae774103501337ed63b42b673c6c4fdbf369e80e", "html_url": "https://github.com/rust-lang/rust/commit/ae774103501337ed63b42b673c6c4fdbf369e80e"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "fa2909196dcf184e5761ffb4e83dbb435c30c56e", "filename": "mk/cfg/i586-unknown-linux-gnu.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ae58a875945eaf2d827a6acae0b9900a5426537c/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ae58a875945eaf2d827a6acae0b9900a5426537c/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk?ref=ae58a875945eaf2d827a6acae0b9900a5426537c", "patch": "@@ -7,8 +7,8 @@ CFG_LIB_NAME_i586-unknown-linux-gnu=lib$(1).so\n CFG_STATIC_LIB_NAME_i586-unknown-linux-gnu=lib$(1).a\n CFG_LIB_GLOB_i586-unknown-linux-gnu=lib$(1)-*.so\n CFG_LIB_DSYM_GLOB_i586-unknown-linux-gnu=lib$(1)-*.dylib.dSYM\n-CFG_JEMALLOC_CFLAGS_i586-unknown-linux-gnu := -m32 $(CFLAGS) -march=pentium\n-CFG_GCCISH_CFLAGS_i586-unknown-linux-gnu :=  -g -fPIC -m32 $(CFLAGS) -march=pentium\n+CFG_JEMALLOC_CFLAGS_i586-unknown-linux-gnu := -m32 $(CFLAGS) -march=pentium -Wa,-mrelax-relocations=no\n+CFG_GCCISH_CFLAGS_i586-unknown-linux-gnu :=  -g -fPIC -m32 $(CFLAGS) -march=pentium -Wa,-mrelax-relocations=no\n CFG_GCCISH_CXXFLAGS_i586-unknown-linux-gnu := -fno-rtti $(CXXFLAGS) -march=pentium\n CFG_GCCISH_LINK_FLAGS_i586-unknown-linux-gnu := -shared -fPIC -ldl -pthread  -lrt -g -m32\n CFG_GCCISH_DEF_FLAG_i586-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list="}, {"sha": "d6c1ce8967a20f66fc5823346ee7d64a116dc5d3", "filename": "mk/cfg/i686-unknown-linux-musl.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ae58a875945eaf2d827a6acae0b9900a5426537c/mk%2Fcfg%2Fi686-unknown-linux-musl.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ae58a875945eaf2d827a6acae0b9900a5426537c/mk%2Fcfg%2Fi686-unknown-linux-musl.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi686-unknown-linux-musl.mk?ref=ae58a875945eaf2d827a6acae0b9900a5426537c", "patch": "@@ -7,8 +7,8 @@ CFG_INSTALL_ONLY_RLIB_i686-unknown-linux-musl = 1\n CFG_LIB_NAME_i686-unknown-linux-musl=lib$(1).so\n CFG_STATIC_LIB_NAME_i686-unknown-linux-musl=lib$(1).a\n CFG_LIB_GLOB_i686-unknown-linux-musl=lib$(1)-*.so\n-CFG_JEMALLOC_CFLAGS_i686-unknown-linux-musl := -m32 -Wl,-melf_i386\n-CFG_GCCISH_CFLAGS_i686-unknown-linux-musl :=  -g -fPIC -m32 -Wl,-melf_i386\n+CFG_JEMALLOC_CFLAGS_i686-unknown-linux-musl := -m32 -Wl,-melf_i386 -Wa,-mrelax-relocations=no\n+CFG_GCCISH_CFLAGS_i686-unknown-linux-musl :=  -g -fPIC -m32 -Wl,-melf_i386 -Wa,-mrelax-relocations=no\n CFG_GCCISH_CXXFLAGS_i686-unknown-linux-musl :=\n CFG_GCCISH_LINK_FLAGS_i686-unknown-linux-musl :=\n CFG_GCCISH_DEF_FLAG_i686-unknown-linux-musl :="}, {"sha": "239adedc0ff655e1f4b148529a129b3b71efcef6", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ae58a875945eaf2d827a6acae0b9900a5426537c/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae58a875945eaf2d827a6acae0b9900a5426537c/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=ae58a875945eaf2d827a6acae0b9900a5426537c", "patch": "@@ -858,8 +858,12 @@ impl Build {\n         // This is a hack, because newer binutils broke things on some vms/distros\n         // (i.e., linking against unknown relocs disabled by the following flag)\n         // See: https://github.com/rust-lang/rust/issues/34978\n-        if target == \"x86_64-unknown-linux-musl\" {\n-            base.push(\"-Wa,-mrelax-relocations=no\".into());\n+        match target {\n+            \"i586-unknown-linux-gnu\" |\n+            \"i686-unknown-linux-musl\" |\n+            \"x86_64-unknown-linux-musl\" => {\n+                base.push(\"-Wa,-mrelax-relocations=no\".into());\n+            }\n         }\n         return base\n     }"}]}