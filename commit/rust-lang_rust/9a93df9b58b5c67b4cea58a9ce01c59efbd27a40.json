{"sha": "9a93df9b58b5c67b4cea58a9ce01c59efbd27a40", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhOTNkZjliNThiNWM2N2I0Y2VhNThhOWNlMDFjNTllZmJkMjdhNDA=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-11-29T10:37:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-29T10:37:53Z"}, "message": "Rollup merge of #46354 - Mark-Simulacrum:alt-try, r=alexcrichton\n\nDeploy builds both with asserts enabled and asserts disabled to CI.\n\nThis also removes uploads to the 'try' bucket, and instead dumps\neverything into the two rustc-builds and rustc-builds-alt buckets. This\nmakes lives easier, as there is only one location for a given \"type\" of\nbuild, and since we have the git commit hash in the filenames, this is\nfine; we won't run into uploads of the same commit.\n\ncc @aidanhs -- this will break crater's logic for downloading `try#xxx` commits since the try bucket won't be uploaded into\n\nr? @alexcrichton", "tree": {"sha": "fdad8501321b37b888c97e8163a07f9de29ac2d5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fdad8501321b37b888c97e8163a07f9de29ac2d5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40", "html_url": "https://github.com/rust-lang/rust/commit/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e49d4a6cdcff01394e4ea1b50b5a73f28568770", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e49d4a6cdcff01394e4ea1b50b5a73f28568770", "html_url": "https://github.com/rust-lang/rust/commit/1e49d4a6cdcff01394e4ea1b50b5a73f28568770"}, {"sha": "2485afa12331d9cd5c42e5688b22c69daffaea39", "url": "https://api.github.com/repos/rust-lang/rust/commits/2485afa12331d9cd5c42e5688b22c69daffaea39", "html_url": "https://github.com/rust-lang/rust/commit/2485afa12331d9cd5c42e5688b22c69daffaea39"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "8ce3aadaccd38cd9099aca9c0a185b37d0594a37", "filename": ".travis.yml", "status": "modified", "additions": 23, "deletions": 6, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/9a93df9b58b5c67b4cea58a9ce01c59efbd27a40/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=9a93df9b58b5c67b4cea58a9ce01c59efbd27a40", "patch": "@@ -16,7 +16,7 @@ matrix:\n       if: type = pull_request OR branch = auto\n \n     - env: IMAGE=dist-x86_64-linux DEPLOY=1\n-      if: branch = auto\n+      if: branch = try OR branch = auto\n \n     # \"alternate\" deployments, these are \"nightlies\" but have LLVM assertions\n     # turned on, they're deployed to a different location primarily for\n@@ -309,22 +309,39 @@ deploy:\n       branch: auto\n       condition: $DEPLOY = 1\n \n+  # this is the same as the above deployment provider except that it uploads to\n+  # a slightly different directory and has a different trigger\n   - provider: s3\n     bucket: rust-lang-ci2\n     skip_cleanup: true\n     local_dir: deploy\n-    upload_dir: rustc-builds-try\n+    upload_dir: rustc-builds-alt\n     acl: public_read\n     region: us-west-1\n     access_key_id: AKIAJVBODR3IA4O72THQ\n     secret_access_key:\n       secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n     on:\n-      branch: try\n+      branch: auto\n       condition: $DEPLOY_ALT = 1\n \n-  # this is the same as the above deployment provider except that it uploads to\n-  # a slightly different directory and has a different trigger\n+  # These two providers are the same as the two above, except deploy on the\n+  # try branch. Travis does not appear to provide a way to use \"or\" in these\n+  # conditions.\n+  - provider: s3\n+    bucket: rust-lang-ci2\n+    skip_cleanup: true\n+    local_dir: deploy\n+    upload_dir: rustc-builds\n+    acl: public_read\n+    region: us-west-1\n+    access_key_id: AKIAJVBODR3IA4O72THQ\n+    secret_access_key:\n+      secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n+    on:\n+      branch: try\n+      condition: $DEPLOY = 1\n+\n   - provider: s3\n     bucket: rust-lang-ci2\n     skip_cleanup: true\n@@ -336,5 +353,5 @@ deploy:\n     secret_access_key:\n       secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n     on:\n-      branch: auto\n+      branch: try\n       condition: $DEPLOY_ALT = 1"}]}