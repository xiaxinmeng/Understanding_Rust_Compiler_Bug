{"sha": "5a1045699daf627d002bd106a924d344b4643ae9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhMTA0NTY5OWRhZjYyN2QwMDJiZDEwNmE5MjRkMzQ0YjQ2NDNhZTk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-13T11:44:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-13T11:44:39Z"}, "message": "Auto merge of #30332 - bluss:nomicon-variance, r=gankro\n\nUpdate nomicon for variance typo & contravariance\n\nFixes #28704\nFixes #28100", "tree": {"sha": "ad83189bb15b887baea984368c05da76bd501a98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad83189bb15b887baea984368c05da76bd501a98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5a1045699daf627d002bd106a924d344b4643ae9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5a1045699daf627d002bd106a924d344b4643ae9", "html_url": "https://github.com/rust-lang/rust/commit/5a1045699daf627d002bd106a924d344b4643ae9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5a1045699daf627d002bd106a924d344b4643ae9/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5de242f1b2bb1e83357c0aaf00210305017aa44a", "url": "https://api.github.com/repos/rust-lang/rust/commits/5de242f1b2bb1e83357c0aaf00210305017aa44a", "html_url": "https://github.com/rust-lang/rust/commit/5de242f1b2bb1e83357c0aaf00210305017aa44a"}, {"sha": "2a30f0ea41ce593b5da66d0973a5716401b2c9ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a30f0ea41ce593b5da66d0973a5716401b2c9ba", "html_url": "https://github.com/rust-lang/rust/commit/2a30f0ea41ce593b5da66d0973a5716401b2c9ba"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "5def5c3903353ef85575993ccaa6c0173db1b316", "filename": "src/doc/nomicon/subtyping.md", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5a1045699daf627d002bd106a924d344b4643ae9/src%2Fdoc%2Fnomicon%2Fsubtyping.md", "raw_url": "https://github.com/rust-lang/rust/raw/5a1045699daf627d002bd106a924d344b4643ae9/src%2Fdoc%2Fnomicon%2Fsubtyping.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fnomicon%2Fsubtyping.md?ref=5a1045699daf627d002bd106a924d344b4643ae9", "patch": "@@ -44,10 +44,11 @@ subtyping of its outputs. There are two kinds of variance in Rust:\n * F is *invariant* over `T` otherwise (no subtyping relation can be derived)\n \n (For those of you who are familiar with variance from other languages, what we\n-refer to as \"just\" variance is in fact *covariance*. Rust does not have\n-contravariance. Historically Rust did have some contravariance but it was\n-scrapped due to poor interactions with other features. If you experience\n-contravariance in Rust call your local compiler developer for medical advice.)\n+refer to as \"just\" variance is in fact *covariance*. Rust has *contravariance*\n+for functions. The future of contravariance is uncertain and it may be\n+scrapped. For now, `fn(T)` is contravariant in `T`, which is used in matching\n+methods in trait implementations to the trait definition. Traits don't have\n+inferred variance, so `Fn(T)` is invariant in `T`).\n \n Some important variances:\n \n@@ -200,7 +201,7 @@ use std::cell::Cell;\n \n struct Foo<'a, 'b, A: 'a, B: 'b, C, D, E, F, G, H> {\n     a: &'a A,     // variant over 'a and A\n-    b: &'b mut B, // invariant over 'b and B\n+    b: &'b mut B, // variant over 'b and invariant over B\n     c: *const C,  // variant over C\n     d: *mut D,    // invariant over D\n     e: Vec<E>,    // variant over E"}]}