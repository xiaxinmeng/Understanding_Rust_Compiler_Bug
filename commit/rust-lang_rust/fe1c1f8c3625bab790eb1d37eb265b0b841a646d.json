{"sha": "fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZlMWMxZjhjMzYyNWJhYjc5MGViMWQzN2ViMjY1YjBiODQxYTY0NmQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-05T01:59:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-05T01:59:42Z"}, "message": "Rollup merge of #64043 - matthewjasper:underscore-import-tests, r=alexcrichton\n\nAdd some more tests for underscore imports", "tree": {"sha": "4a10466223494196cd23e4fff4aa49844d9de859", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a10466223494196cd23e4fff4aa49844d9de859"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdcGwOCRBK7hj4Ov3rIwAAdHIIAKtHbnWimMK75PZ4bPuCCOqd\nBf9UYP+m6clIgog6OUq3SbFEgfsXR5/cI8NLN5SdGLHfGb9S4xkltuu9UWG2U+Fk\n3VP7lcFmAQgGhR0Nu3K+P3LUiCpVnL6HdTK5Z6Dzo3GETW8lEdEpdzlcKoeMGv95\nFC1Aax5Bwmpw558smLMLqCnLhMqgrbLMI4LHB7XQ7KNEv9BFzLndod8KHQmSJeXY\n5/lvKTBwJo42hw5kINblUxRmJPKOPSBlLEVT1dJhHVPTP98V83PE3p5Eub786lgt\niQRcWtlghaCmeSmtsQVlNFAO1es8roGPgtbRfhF0DNuadCR7ziYpSHEwBq2OF9g=\n=b0bx\n-----END PGP SIGNATURE-----\n", "payload": "tree 4a10466223494196cd23e4fff4aa49844d9de859\nparent 9024032591a23b3b7b38da7775f1416abd9a0dd6\nparent 754a875e15f778ed5bdd49b4208956b3003949c4\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1567648782 +0200\ncommitter GitHub <noreply@github.com> 1567648782 +0200\n\nRollup merge of #64043 - matthewjasper:underscore-import-tests, r=alexcrichton\n\nAdd some more tests for underscore imports\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "html_url": "https://github.com/rust-lang/rust/commit/fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9024032591a23b3b7b38da7775f1416abd9a0dd6", "url": "https://api.github.com/repos/rust-lang/rust/commits/9024032591a23b3b7b38da7775f1416abd9a0dd6", "html_url": "https://github.com/rust-lang/rust/commit/9024032591a23b3b7b38da7775f1416abd9a0dd6"}, {"sha": "754a875e15f778ed5bdd49b4208956b3003949c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/754a875e15f778ed5bdd49b4208956b3003949c4", "html_url": "https://github.com/rust-lang/rust/commit/754a875e15f778ed5bdd49b4208956b3003949c4"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "92d741b6a26631a89a809df0bd32fb7032515db5", "filename": "src/test/ui/underscore-imports/auxiliary/duplicate.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Fduplicate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Fduplicate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Fduplicate.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/auxiliary/duplicate.rs"}, {"sha": "c335336bee8e3ab800aee18e01836512c023569c", "filename": "src/test/ui/underscore-imports/auxiliary/underscore-imports.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Funderscore-imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Funderscore-imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fauxiliary%2Funderscore-imports.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/auxiliary/underscore-imports.rs"}, {"sha": "4766d75c8f412209fae536288290fcad0509c7b0", "filename": "src/test/ui/underscore-imports/basic.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/basic.rs"}, {"sha": "9ca60e8e0a95596f46e60d1ff0909137ce345c0e", "filename": "src/test/ui/underscore-imports/basic.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fbasic.stderr?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/basic.stderr"}, {"sha": "bacf9b2d5a96a326f61b4c780d005e3de27b7f7f", "filename": "src/test/ui/underscore-imports/cycle.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fcycle.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fcycle.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fcycle.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "patch": "@@ -0,0 +1,18 @@\n+// Check that cyclic glob imports are allowed with underscore imports\n+\n+// check-pass\n+\n+mod x {\n+    pub use crate::y::*;\n+    pub use std::ops::Deref as _;\n+}\n+\n+mod y {\n+    pub use crate::x::*;\n+    pub use std::ops::Deref as _;\n+}\n+\n+pub fn main() {\n+    use x::*;\n+    (&0).deref();\n+}"}, {"sha": "3662a466ded146a9910636fdebfc21cfd8dcbec3", "filename": "src/test/ui/underscore-imports/duplicate.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fduplicate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fduplicate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fduplicate.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/duplicate.rs"}, {"sha": "1cccc67e9ab63d8251b80ddccc5ad08e8a11c768", "filename": "src/test/ui/underscore-imports/intercrate.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fintercrate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fintercrate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fintercrate.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/intercrate.rs"}, {"sha": "325f2001b9ede58425a4da040d374e7dbfb86798", "filename": "src/test/ui/underscore-imports/shadow.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "patch": "@@ -0,0 +1,23 @@\n+// Check that underscore imports don't cause glob imports to be unshadowed\n+\n+mod a {\n+    pub use std::ops::Deref as Shadow;\n+}\n+\n+mod b {\n+    pub use crate::a::*;\n+    macro_rules! m {\n+        ($i:ident) => { pub struct $i; }\n+    }\n+    m!(Shadow);\n+}\n+\n+mod c {\n+    use crate::b::Shadow as _; // Only imports the struct\n+\n+    fn f(x: &()) {\n+        x.deref(); //~ ERROR no method named `deref` found\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "92adca2c70490e598eadf664670aa7ec91726c76", "filename": "src/test/ui/underscore-imports/shadow.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Fshadow.stderr?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "patch": "@@ -0,0 +1,13 @@\n+error[E0599]: no method named `deref` found for type `&()` in the current scope\n+  --> $DIR/shadow.rs:19:11\n+   |\n+LL |         x.deref();\n+   |           ^^^^^\n+   |\n+   = help: items from traits can only be used if the trait is in scope\n+   = note: the following trait is implemented but not in scope, perhaps add a `use` for it:\n+           `use std::ops::Deref;`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0599`."}, {"sha": "d06a26a5f116664b5ce0094e594d5e50b4a5c4c0", "filename": "src/test/ui/underscore-imports/unused-2018.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.rs?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/unused-2018.rs"}, {"sha": "861b3f1d4fd1e202f02aabf5cc3ce7e4034148e6", "filename": "src/test/ui/underscore-imports/unused-2018.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fe1c1f8c3625bab790eb1d37eb265b0b841a646d/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funderscore-imports%2Funused-2018.stderr?ref=fe1c1f8c3625bab790eb1d37eb265b0b841a646d", "previous_filename": "src/test/ui/rfc-2166-underscore-imports/unused-2018.stderr"}]}