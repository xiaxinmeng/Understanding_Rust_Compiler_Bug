{"sha": "253a18f93893ffa0e2804937c913fed84df5f8d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1M2ExOGY5Mzg5M2ZmYTBlMjgwNDkzN2M5MTNmZWQ4NGRmNWY4ZDM=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2019-09-14T22:59:24Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2019-09-14T23:31:09Z"}, "message": "Allow an underscore as the identifier in `const` items", "tree": {"sha": "9d039c8e9720fbc693f5a0a096014e1886226336", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9d039c8e9720fbc693f5a0a096014e1886226336"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/253a18f93893ffa0e2804937c913fed84df5f8d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/253a18f93893ffa0e2804937c913fed84df5f8d3", "html_url": "https://github.com/rust-lang/rust/commit/253a18f93893ffa0e2804937c913fed84df5f8d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/253a18f93893ffa0e2804937c913fed84df5f8d3/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "211171ffe6a4e8cbf31b9513972e59a8b9bdc811", "url": "https://api.github.com/repos/rust-lang/rust/commits/211171ffe6a4e8cbf31b9513972e59a8b9bdc811", "html_url": "https://github.com/rust-lang/rust/commit/211171ffe6a4e8cbf31b9513972e59a8b9bdc811"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "4dd80d44314efa7cc0f9e633a23efdfffcb97137", "filename": "crates/ra_parser/src/grammar/items.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs?ref=253a18f93893ffa0e2804937c913fed84df5f8d3", "patch": "@@ -258,7 +258,7 @@ fn items_without_modifiers(p: &mut Parser, m: Marker) -> Result<(), Marker> {\n         }\n         T![enum] => nominal::enum_def(p, m),\n         T![use] => use_item::use_item(p, m),\n-        T![const] if (la == IDENT || la == T![mut]) => consts::const_def(p, m),\n+        T![const] if (la == IDENT || la == T![_] || la == T![mut]) => consts::const_def(p, m),\n         T![static] => consts::static_def(p, m),\n         // test extern_block\n         // extern {}"}, {"sha": "63e0e6e0c04d0944beafc906d6708f60c4df8920", "filename": "crates/ra_parser/src/grammar/items/consts.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Fconsts.rs?ref=253a18f93893ffa0e2804937c913fed84df5f8d3", "patch": "@@ -12,7 +12,16 @@ fn const_or_static(p: &mut Parser, m: Marker, kw: SyntaxKind, def: SyntaxKind) {\n     assert!(p.at(kw));\n     p.bump_any();\n     p.eat(T![mut]); // FIXME: validator to forbid const mut\n-    name(p);\n+\n+    // Allow `_` in place of an identifier in a `const`.\n+    let is_const_underscore = kw == T![const] && p.eat(T![_]);\n+    if !is_const_underscore {\n+        name(p);\n+    }\n+\n+    // test_err static_underscore\n+    // static _: i32 = 5;\n+\n     types::ascription(p);\n     if p.eat(T![=]) {\n         expressions::expr(p);"}, {"sha": "df8cecb43262bb2f31c7847fffa8572582a2be7c", "filename": "crates/ra_syntax/test_data/parser/inline/err/0013_static_underscore.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_static_underscore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/253a18f93893ffa0e2804937c913fed84df5f8d3/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_static_underscore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Ferr%2F0013_static_underscore.rs?ref=253a18f93893ffa0e2804937c913fed84df5f8d3", "patch": "@@ -0,0 +1 @@\n+static _: i32 = 5;"}]}