{"sha": "080aa37629c123e0f9096de3726f66d80d635be7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA4MGFhMzc2MjljMTIzZTBmOTA5NmRlMzcyNmY2NmQ4MGQ2MzViZTc=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-04-02T12:28:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-02T12:28:21Z"}, "message": "Rollup merge of #83721 - GuillaumeGomez:copy-use, r=Nemo157\n\nAdd a button to copy the \"use statement\"\n\nFixes https://github.com/rust-lang/rust/issues/50239\n\nWhen clicking on the button, it'll add the elements prepended by \"use \" and will end with a \";\". So in the images below, I now have in my clipboard `use std::fs::OpenOptions;`.\n\nA screenshot of the newly added button:\n\n![Screenshot from 2021-03-31 22-12-12](https://user-images.githubusercontent.com/3050060/113205430-90e64500-926e-11eb-8538-529829f611ec.png)\n\nA screenshot after it was clicked:\n\n![Screenshot from 2021-03-31 22-15-31](https://user-images.githubusercontent.com/3050060/113205532-ad827d00-926e-11eb-893d-35f2f8f92696.png)\n\nr? `@Nemo157`", "tree": {"sha": "74ad35de870cf5abfa2065e877027ade7191c35e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74ad35de870cf5abfa2065e877027ade7191c35e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/080aa37629c123e0f9096de3726f66d80d635be7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgZw3mCRBK7hj4Ov3rIwAAdHIIAAGOfte26RX7Ivaint0xV/xL\nB4K53nWAL1hX4ahcT67Ka1uWknYchvO5ppuiX76RH7QQifCgOfkavoPhk4V2BGLe\nmVp2EMs4u/rwOMhKLAHoV2zYLs3QwZn29NV1t0DISn67n5zzThGzJQ7Rd+JWHMw+\n6YGqSZDXRCGl0CeY3htbVpOS8wQrwdALjFsdaRZf4Q/+u06EUbfItjm4HR/T5H6l\nTSxBrPZiOVJcCdCLoj0cvj8UCbNxvqnlBoIaJn++gscHinsuYcuNJ8isJPlDvwS/\npAyp8JMdy2Hc9qo/SJie7iRwXUEN3FQDyrv7BBMR1oJvp2fb7g3PRqnSSJypbh8=\n=Tp9G\n-----END PGP SIGNATURE-----\n", "payload": "tree 74ad35de870cf5abfa2065e877027ade7191c35e\nparent 03ba8ab6067fc642c63cb3645db6beb4d425ae6e\nparent 828179d687e0e6d75a1816c45bc866445d057e04\nauthor Yuki Okushi <jtitor@2k36.org> 1617366501 +0900\ncommitter GitHub <noreply@github.com> 1617366501 +0900\n\nRollup merge of #83721 - GuillaumeGomez:copy-use, r=Nemo157\n\nAdd a button to copy the \"use statement\"\n\nFixes https://github.com/rust-lang/rust/issues/50239\n\nWhen clicking on the button, it'll add the elements prepended by \"use \" and will end with a \";\". So in the images below, I now have in my clipboard `use std::fs::OpenOptions;`.\n\nA screenshot of the newly added button:\n\n![Screenshot from 2021-03-31 22-12-12](https://user-images.githubusercontent.com/3050060/113205430-90e64500-926e-11eb-8538-529829f611ec.png)\n\nA screenshot after it was clicked:\n\n![Screenshot from 2021-03-31 22-15-31](https://user-images.githubusercontent.com/3050060/113205532-ad827d00-926e-11eb-893d-35f2f8f92696.png)\n\nr? `@Nemo157`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/080aa37629c123e0f9096de3726f66d80d635be7", "html_url": "https://github.com/rust-lang/rust/commit/080aa37629c123e0f9096de3726f66d80d635be7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/080aa37629c123e0f9096de3726f66d80d635be7/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "03ba8ab6067fc642c63cb3645db6beb4d425ae6e", "url": "https://api.github.com/repos/rust-lang/rust/commits/03ba8ab6067fc642c63cb3645db6beb4d425ae6e", "html_url": "https://github.com/rust-lang/rust/commit/03ba8ab6067fc642c63cb3645db6beb4d425ae6e"}, {"sha": "828179d687e0e6d75a1816c45bc866445d057e04", "url": "https://api.github.com/repos/rust-lang/rust/commits/828179d687e0e6d75a1816c45bc866445d057e04", "html_url": "https://github.com/rust-lang/rust/commit/828179d687e0e6d75a1816c45bc866445d057e04"}], "stats": {"total": 70, "additions": 57, "deletions": 13}, "files": [{"sha": "cdccb1c8581294ada20abcc3f7d6f0a13807976f", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -1355,6 +1355,7 @@ fn init_id_map() -> FxHashMap<String, usize> {\n     map.insert(\"default-settings\".to_owned(), 1);\n     map.insert(\"rustdoc-vars\".to_owned(), 1);\n     map.insert(\"sidebar-vars\".to_owned(), 1);\n+    map.insert(\"copy-path\".to_owned(), 1);\n     // This is the list of IDs used by rustdoc sections.\n     map.insert(\"fields\".to_owned(), 1);\n     map.insert(\"variants\".to_owned(), 1);"}, {"sha": "25314f87eb5aef7e98b6f3878045ff3c1f17df45", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -73,6 +73,7 @@ pub(super) fn print_item(cx: &Context<'_>, item: &clean::Item, buf: &mut Buffer)\n         }\n     }\n     write!(buf, \"<a class=\\\"{}\\\" href=\\\"\\\">{}</a>\", item.type_(), item.name.as_ref().unwrap());\n+    write!(buf, \"<button id=\\\"copy-path\\\" onclick=\\\"copy_path(this)\\\">\u2398</button>\");\n \n     buf.write_str(\"</span>\"); // in-band\n     buf.write_str(\"<span class=\\\"out-of-band\\\">\");"}, {"sha": "f2e62ee7b6b5e1c221d4c5778a354e560692e8f9", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -3061,3 +3061,28 @@ function hideThemeButtonState() {\n     window.onhashchange = onHashChange;\n     setupSearchLoader();\n }());\n+\n+function copy_path(but) {\n+    var parent = but.parentElement;\n+    var path = [];\n+\n+    onEach(parent.childNodes, function(child) {\n+        if (child.tagName === 'A') {\n+            path.push(child.textContent);\n+        }\n+    });\n+\n+    var el = document.createElement('textarea');\n+    el.value = 'use ' + path.join('::') + ';';\n+    el.setAttribute('readonly', '');\n+    // To not make it appear on the screen.\n+    el.style.position = 'absolute';\n+    el.style.left = '-9999px';\n+\n+    document.body.appendChild(el);\n+    el.select();\n+    document.execCommand('copy');\n+    document.body.removeChild(el);\n+\n+    but.textContent = '\u2713';\n+}"}, {"sha": "4d3332877c0d5281c9b6021ec8ebce972f8d1334", "filename": "src/librustdoc/html/static/noscript.css", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fnoscript.css", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fnoscript.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fnoscript.css?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -33,3 +33,8 @@ rules.\n \t/* Since there is no toggle (the \"[-]\") when JS is disabled, no need for this margin either. */\n \tmargin-left: 0 !important;\n }\n+\n+#copy-path {\n+\t/* It requires JS to work so no need to display it in this case. */\n+\tdisplay: none;\n+}"}, {"sha": "07dfb7f5cf0182319cba9ec646483c1643b9b019", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -1318,20 +1318,29 @@ h4 > .notable-traits {\n \toutline: none;\n }\n \n+#theme-picker, #settings-menu, .help-button, #copy-path {\n+\tpadding: 4px;\n+\twidth: 27px;\n+\theight: 29px;\n+\tborder: 1px solid;\n+\tborder-radius: 3px;\n+\tcursor: pointer;\n+}\n+\n .help-button {\n \tright: 30px;\n \tfont-family: \"Fira Sans\", Arial, sans-serif;\n \ttext-align: center;\n \tfont-size: 17px;\n+\tpadding-top: 2px;\n }\n \n-#theme-picker, #settings-menu, .help-button {\n-\tpadding: 4px;\n-\twidth: 27px;\n-\theight: 29px;\n-\tborder: 1px solid;\n-\tborder-radius: 3px;\n-\tcursor: pointer;\n+#copy-path {\n+\theight: 30px;\n+\tfont-size: 18px;\n+\tmargin-left: 10px;\n+\tpadding: 0 6px;\n+\twidth: 28px;\n }\n \n #theme-choices {"}, {"sha": "b24f4035ca868d6056109970f5f65fca1e0b36b7", "filename": "src/librustdoc/html/static/themes/ayu.css", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fayu.css?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -498,7 +498,7 @@ kbd {\n \tbox-shadow-color: #c6cbd1;\n }\n \n-#theme-picker, #settings-menu, .help-button {\n+#theme-picker, #settings-menu, .help-button, #copy-path {\n \tborder-color: #5c6773;\n \tbackground-color: #0f1419;\n \tcolor: #fff;\n@@ -510,7 +510,8 @@ kbd {\n \n #theme-picker:hover, #theme-picker:focus,\n #settings-menu:hover, #settings-menu:focus,\n-.help-button:hover, .help-button:focus {\n+.help-button:hover, .help-button:focus,\n+#copy-path:hover, #copy-path:focus {\n \tborder-color: #e0e0e0;\n }\n "}, {"sha": "e863ed03f515696172151eccc67d1dd624713480", "filename": "src/librustdoc/html/static/themes/dark.css", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -388,15 +388,16 @@ kbd {\n \tbox-shadow-color: #c6cbd1;\n }\n \n-#theme-picker, #settings-menu, .help-button {\n+#theme-picker, #settings-menu, .help-button, #copy-path {\n \tborder-color: #e0e0e0;\n \tbackground: #f0f0f0;\n \tcolor: #000;\n }\n \n #theme-picker:hover, #theme-picker:focus,\n #settings-menu:hover, #settings-menu:focus,\n-.help-button:hover, .help-button:focus {\n+.help-button:hover, .help-button:focus,\n+#copy-path:hover, #copy-path:focus {\n \tborder-color: #ffb900;\n }\n "}, {"sha": "9335dd96d299af9e4d69858d6a1380f64c0a8f68", "filename": "src/librustdoc/html/static/themes/light.css", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/080aa37629c123e0f9096de3726f66d80d635be7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css?ref=080aa37629c123e0f9096de3726f66d80d635be7", "patch": "@@ -380,14 +380,15 @@ kbd {\n \tbox-shadow-color: #c6cbd1;\n }\n \n-#theme-picker, #settings-menu, .help-button {\n+#theme-picker, #settings-menu, .help-button, #copy-path {\n \tborder-color: #e0e0e0;\n \tbackground-color: #fff;\n }\n \n #theme-picker:hover, #theme-picker:focus,\n #settings-menu:hover, #settings-menu:focus,\n-.help-button:hover, .help-button:focus {\n+.help-button:hover, .help-button:focus,\n+#copy-path:hover, #copy-path:focus {\n \tborder-color: #717171;\n }\n "}]}