{"sha": "6f8e9f416a49993670056d9d9e0601e4e25ecf28", "node_id": "C_kwDOAAsO6NoAKDZmOGU5ZjQxNmE0OTk5MzY3MDA1NmQ5ZDllMDYwMWU0ZTI1ZWNmMjg", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-01-16T21:26:46Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-03-03T17:22:31Z"}, "message": "Move query providers.", "tree": {"sha": "49d21f8f80de12bd351594719b4993e079efed76", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/49d21f8f80de12bd351594719b4993e079efed76"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f8e9f416a49993670056d9d9e0601e4e25ecf28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f8e9f416a49993670056d9d9e0601e4e25ecf28", "html_url": "https://github.com/rust-lang/rust/commit/6f8e9f416a49993670056d9d9e0601e4e25ecf28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f8e9f416a49993670056d9d9e0601e4e25ecf28/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b4b5e066b2f11b993118cadf3994d07534eb294", "url": "https://api.github.com/repos/rust-lang/rust/commits/1b4b5e066b2f11b993118cadf3994d07534eb294", "html_url": "https://github.com/rust-lang/rust/commit/1b4b5e066b2f11b993118cadf3994d07534eb294"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "1661f4ef0ed5144aa3529640ca208ceace096e1a", "filename": "compiler/rustc_middle/src/ty/context.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6f8e9f416a49993670056d9d9e0601e4e25ecf28/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f8e9f416a49993670056d9d9e0601e4e25ecf28/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcontext.rs?ref=6f8e9f416a49993670056d9d9e0601e4e25ecf28", "patch": "@@ -2999,11 +2999,6 @@ pub fn provide(providers: &mut ty::query::Providers) {\n         tcx.arena.alloc(tcx.resolutions(()).glob_map.get(&id).cloned().unwrap_or_default())\n     };\n \n-    providers.lookup_stability = |tcx, id| tcx.stability().local_stability(id.expect_local());\n-    providers.lookup_const_stability =\n-        |tcx, id| tcx.stability().local_const_stability(id.expect_local());\n-    providers.lookup_deprecation_entry =\n-        |tcx, id| tcx.stability().local_deprecation_entry(id.expect_local());\n     providers.extern_mod_stmt_cnum =\n         |tcx, id| tcx.resolutions(()).extern_crate_map.get(&id).cloned();\n     providers.output_filenames = |tcx, ()| &tcx.output_filenames;"}, {"sha": "54c52720ef763ee9231057fa782e63257e982c66", "filename": "compiler/rustc_passes/src/stability.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6f8e9f416a49993670056d9d9e0601e4e25ecf28/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f8e9f416a49993670056d9d9e0601e4e25ecf28/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fstability.rs?ref=6f8e9f416a49993670056d9d9e0601e4e25ecf28", "patch": "@@ -712,7 +712,16 @@ fn check_mod_unstable_api_usage(tcx: TyCtxt<'_>, module_def_id: LocalDefId) {\n }\n \n pub(crate) fn provide(providers: &mut Providers) {\n-    *providers = Providers { check_mod_unstable_api_usage, stability_index, ..*providers };\n+    *providers = Providers {\n+        check_mod_unstable_api_usage,\n+        stability_index,\n+        lookup_stability: |tcx, id| tcx.stability().local_stability(id.expect_local()),\n+        lookup_const_stability: |tcx, id| tcx.stability().local_const_stability(id.expect_local()),\n+        lookup_deprecation_entry: |tcx, id| {\n+            tcx.stability().local_deprecation_entry(id.expect_local())\n+        },\n+        ..*providers\n+    };\n }\n \n struct Checker<'tcx> {"}]}