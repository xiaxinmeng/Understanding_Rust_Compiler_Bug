{"sha": "02000505c157350496283c86710d5d314999545a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyMDAwNTA1YzE1NzM1MDQ5NjI4M2M4NjcxMGQ1ZDMxNDk5OTU0NWE=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-10-10T15:32:50Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-10-29T09:08:01Z"}, "message": "ci: upload toolstates.json to rust-lang-ci2\n\nUploading the toolstate data for each commit will help our release\ntooling understand which components are failing, to possibly skip\nshipping broken tools to users.", "tree": {"sha": "f4e949a039bb80f476d5435fcd089f724c863b31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f4e949a039bb80f476d5435fcd089f724c863b31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02000505c157350496283c86710d5d314999545a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl24AXEACgkQPgar6Auq\n8Zyiiw/+InCrEze73c4jzyvmHZgtXX+jcwdDL705ojHbC5hH3KsklZgykAk/aRyQ\nbC5y7M8aQBBhNuuPTO7clKZGRR/q5DAMbQF7cEfzALwoEpBf3/3yTyQF73ocXfib\nqQ5YJc+J1EKcM0vG7eNoqtftAQIaJucCW0KFBUJzPM/mpM9B2atFpv5nnyxIambC\na7sMNxL+/O5qLs82PLhvtNfp5V/QSo3qlSmqk0JF6VX+7KxH7xpjpBiWjJvWhpFy\nmMo11OmanPPT5mxuTavydNcpNNNwmMEP2irh35nNKUUhHAA6yV532oWZ7XGykfMX\ndzZdnNuVhyGz6J09iCkCBt/HMaBk/mv+EJZm6HrNCenNT/wKrQipOgblakB4fKk9\nFbjt4RtbB/mrjK18xFcge+R9g5mVu1N77R6gRRjtWGIUeTElql1WS9QNWyDwWSpV\n6VdT57OqOwdqaBABfUP7qFT1JeHsNrE+8/ZBOaykxn+cgXIu+gkQJqPXXpDpaeSU\nXod6TH519cMX9iFEJAtz25ANk4mExNEvQvjMjvzNTGFoSG5gzHcmchN6mliyWpMv\nrfV+S8jwesBOS0ZrSUpWuZY3q/IgzJic3Ct3l8biBVgKMHGUc4GR5DjtHbZijQHg\nOCL1xKP8KGq8mSkGsjSAOtbBXdYoRYgug8Sof2Xf+3uMRnlNsFw=\n=AlLm\n-----END PGP SIGNATURE-----", "payload": "tree f4e949a039bb80f476d5435fcd089f724c863b31\nparent 4479de4b4a375e792127ddcbcb5f91e3b58ce237\nauthor Pietro Albini <pietro@pietroalbini.org> 1570721570 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1572340081 +0100\n\nci: upload toolstates.json to rust-lang-ci2\n\nUploading the toolstate data for each commit will help our release\ntooling understand which components are failing, to possibly skip\nshipping broken tools to users.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02000505c157350496283c86710d5d314999545a", "html_url": "https://github.com/rust-lang/rust/commit/02000505c157350496283c86710d5d314999545a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02000505c157350496283c86710d5d314999545a/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4479de4b4a375e792127ddcbcb5f91e3b58ce237", "url": "https://api.github.com/repos/rust-lang/rust/commits/4479de4b4a375e792127ddcbcb5f91e3b58ce237", "html_url": "https://github.com/rust-lang/rust/commit/4479de4b4a375e792127ddcbcb5f91e3b58ce237"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "651b40cdf297a51b700f77a14b6f89f645cffd6f", "filename": "src/ci/azure-pipelines/auto.yml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/02000505c157350496283c86710d5d314999545a/src%2Fci%2Fazure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/02000505c157350496283c86710d5d314999545a/src%2Fci%2Fazure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fauto.yml?ref=02000505c157350496283c86710d5d314999545a", "patch": "@@ -140,6 +140,7 @@ jobs:\n         IMAGE: x86_64-gnu-aux\n       x86_64-gnu-tools:\n         IMAGE: x86_64-gnu-tools\n+        DEPLOY_TOOLSTATES_JSON: toolstates-linux.json\n       x86_64-gnu-debug:\n         IMAGE: x86_64-gnu-debug\n       x86_64-gnu-nopt:\n@@ -264,6 +265,7 @@ jobs:\n         MSYS_BITS: 64\n         SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n         RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json\n+        DEPLOY_TOOLSTATES_JSON: toolstates-windows.json\n \n       # 32/64-bit MinGW builds.\n       #"}, {"sha": "f060dd28f718cbd4a3247352232e14e87383fcb5", "filename": "src/ci/scripts/upload-artifacts.sh", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/02000505c157350496283c86710d5d314999545a/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "raw_url": "https://github.com/rust-lang/rust/raw/02000505c157350496283c86710d5d314999545a/src%2Fci%2Fscripts%2Fupload-artifacts.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fupload-artifacts.sh?ref=02000505c157350496283c86710d5d314999545a", "patch": "@@ -23,6 +23,11 @@ fi\n # CPU usage statistics.\n cp cpu-usage.csv \"${upload_dir}/cpu-${CI_JOB_NAME}.csv\"\n \n+# Toolstate data.\n+if [[ ! -z \"${DEPLOY_TOOLSTATES_JSON+x}\" ]]; then\n+    cp /tmp/toolstates.json \"${upload_dir}/${DEPLOY_TOOLSTATES_JSON}\"\n+fi\n+\n echo \"Files that will be uploaded:\"\n ls -lah \"${upload_dir}\"\n echo"}]}