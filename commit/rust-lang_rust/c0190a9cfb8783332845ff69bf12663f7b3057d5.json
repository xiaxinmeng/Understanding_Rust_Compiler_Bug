{"sha": "c0190a9cfb8783332845ff69bf12663f7b3057d5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwMTkwYTljZmI4NzgzMzMyODQ1ZmY2OWJmMTI2NjNmN2IzMDU3ZDU=", "commit": {"author": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-10-29T16:07:30Z"}, "committer": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-10-29T16:09:20Z"}, "message": "Prevent unoptimized rustpkg tests from running out of stack.\n\nThe actual fix would be to make rustpkg use `rustc::monitor` so it picks\nup anything special that rustc needs, but for now let's keep the tests\nfrom breaking.", "tree": {"sha": "66f03e30c114d8b2ed4f2b6d98869ebf6a558800", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66f03e30c114d8b2ed4f2b6d98869ebf6a558800"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0190a9cfb8783332845ff69bf12663f7b3057d5", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0190a9cfb8783332845ff69bf12663f7b3057d5", "html_url": "https://github.com/rust-lang/rust/commit/c0190a9cfb8783332845ff69bf12663f7b3057d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0190a9cfb8783332845ff69bf12663f7b3057d5/comments", "author": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49f851c2c9e57465317938a0486495ef02ef5d81", "url": "https://api.github.com/repos/rust-lang/rust/commits/49f851c2c9e57465317938a0486495ef02ef5d81", "html_url": "https://github.com/rust-lang/rust/commit/49f851c2c9e57465317938a0486495ef02ef5d81"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "17084699ef322065ffc1d0ba5b46858894a83a43", "filename": "mk/tests.mk", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c0190a9cfb8783332845ff69bf12663f7b3057d5/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/c0190a9cfb8783332845ff69bf12663f7b3057d5/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=c0190a9cfb8783332845ff69bf12663f7b3057d5", "patch": "@@ -455,6 +455,17 @@ $(foreach host,$(CFG_HOST_TRIPLES), \\\n       $(eval $(call DEF_TEST_CRATE_RULES,$(stage),$(target),$(host),$(crate))) \\\n      ))))))\n \n+# FIXME (#10104): Raise the stack size to work around rustpkg bypassing\n+# the code in rustc that would take care of it.\n+define DEF_RUSTPKG_STACK_FIX\n+$$(call TEST_OK_FILE,$(1),$(2),$(3),rustpkg): export RUST_MIN_STACK=8000000\n+endef\n+\n+$(foreach host,$(CFG_HOST_TRIPLES), \\\n+ $(foreach target,$(CFG_TARGET_TRIPLES), \\\n+  $(foreach stage,$(STAGES), \\\n+   $(eval $(call DEF_RUSTPKG_STACK_FIX,$(stage),$(target),$(host))))))\n+\n \n ######################################################################\n # Rules for the compiletest tests (rpass, rfail, etc.)"}]}