{"sha": "48cad460bc664d110c013b02a21ede7612f1a8e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4Y2FkNDYwYmM2NjRkMTEwYzAxM2IwMmEyMWVkZTc2MTJmMWE4ZTY=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-11T01:15:54Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-11T01:15:54Z"}, "message": "Fix test not to depend on environment", "tree": {"sha": "a8f4e4e6311044708fe6a5efad4aec70e797a8ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8f4e4e6311044708fe6a5efad4aec70e797a8ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48cad460bc664d110c013b02a21ede7612f1a8e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48cad460bc664d110c013b02a21ede7612f1a8e6", "html_url": "https://github.com/rust-lang/rust/commit/48cad460bc664d110c013b02a21ede7612f1a8e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48cad460bc664d110c013b02a21ede7612f1a8e6/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54f860158bcb37e4382ca546437d769619ee67ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/54f860158bcb37e4382ca546437d769619ee67ba", "html_url": "https://github.com/rust-lang/rust/commit/54f860158bcb37e4382ca546437d769619ee67ba"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "24da2620c2eaf887525e7d547b3802224c699e85", "filename": "src/test/ui/macros/issue-68058.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/48cad460bc664d110c013b02a21ede7612f1a8e6/src%2Ftest%2Fui%2Fmacros%2Fissue-68058.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48cad460bc664d110c013b02a21ede7612f1a8e6/src%2Ftest%2Fui%2Fmacros%2Fissue-68058.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-68058.rs?ref=48cad460bc664d110c013b02a21ede7612f1a8e6", "patch": "@@ -1,15 +1,14 @@\n // check-pass\n \n-macro_rules! def_target {\n-    ($target: expr) => {\n-        #[target_feature(enable=$target)]\n-        unsafe fn f() {\n-            #[target_feature(enable=$target)]\n+macro_rules! foo {\n+    ($doc: expr) => {\n+        fn f() {\n+            #[doc = $doc]\n             ()\n         }\n     };\n }\n \n-def_target!(\"avx2\");\n+foo!(\"doc\");\n \n fn main() {}"}]}