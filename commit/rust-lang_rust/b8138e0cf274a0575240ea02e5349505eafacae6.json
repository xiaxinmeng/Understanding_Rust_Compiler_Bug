{"sha": "b8138e0cf274a0575240ea02e5349505eafacae6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI4MTM4ZTBjZjI3NGEwNTc1MjQwZWEwMmU1MzQ5NTA1ZWFmYWNhZTY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-03-21T22:21:45Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-03-24T21:29:17Z"}, "message": "mk: Wire up everything to dist and distcheck\n\nFix some misc bugs", "tree": {"sha": "70c1b1a058d86f141158b4f63334a310eeb724ee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70c1b1a058d86f141158b4f63334a310eeb724ee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b8138e0cf274a0575240ea02e5349505eafacae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b8138e0cf274a0575240ea02e5349505eafacae6", "html_url": "https://github.com/rust-lang/rust/commit/b8138e0cf274a0575240ea02e5349505eafacae6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b8138e0cf274a0575240ea02e5349505eafacae6/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd7a60e0c3090488041788256f211e2d02636b73", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd7a60e0c3090488041788256f211e2d02636b73", "html_url": "https://github.com/rust-lang/rust/commit/dd7a60e0c3090488041788256f211e2d02636b73"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "79c0f271b2e420ad83846f542c8a979e6b140342", "filename": "mk/dist.mk", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b8138e0cf274a0575240ea02e5349505eafacae6/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/b8138e0cf274a0575240ea02e5349505eafacae6/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=b8138e0cf274a0575240ea02e5349505eafacae6", "patch": "@@ -165,8 +165,15 @@ $(foreach host,$(CFG_HOST),$(eval $(call DEF_OSX_PKG,$(host))))\n \n dist-osx: $(foreach host,$(CFG_HOST),dist/$(PKG_NAME)-$(host).pkg)\n \n+else\n+\n+dist-osx:\n+\n endif\n \n+# FIXME should do something\n+distcheck-osx:\n+\n \n ######################################################################\n # Unix binary installer tarballs\n@@ -223,6 +230,7 @@ distcheck-tar-bins: dist-tar-bins\n # Just copy the docs to a folder under dist with the appropriate name\n # for uploading to S3\n dist-docs: docs compiler-docs\n+\t$(Q) rm -Rf dist/doc\n \t$(Q) mkdir -p dist/doc/\n \t$(Q) cp -r doc dist/doc/$(CFG_PACKAGE_VERS)\n \n@@ -239,18 +247,18 @@ distcheck: dist\n \t$(Q)rm -Rf tmp/distcheck\n \t@echo\n \t@echo -----------------------------------------------\n-\t@echo Rust ready for distribution (see ./dist)\n+\t@echo \"Rust ready for distribution (see ./dist)\"\n \t@echo -----------------------------------------------\n \n else\n \n-dist: dist-tar-src\n+dist: dist-tar-src dist-osx dist-tar-bins dist-docs\n \n-distcheck: dist distcheck-tar-src\n+distcheck: dist distcheck-tar-src distcheck-osx distcheck-tar-bins\n \t$(Q)rm -Rf tmp/distcheck\n \t@echo\n \t@echo -----------------------------------------------\n-\t@echo Rust ready for distribution (see ./dist)\n+\t@echo \"Rust ready for distribution (see ./dist)\"\n \t@echo -----------------------------------------------\n \n endif"}]}