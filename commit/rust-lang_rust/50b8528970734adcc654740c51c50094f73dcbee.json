{"sha": "50b8528970734adcc654740c51c50094f73dcbee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwYjg1Mjg5NzA3MzRhZGNjNjU0NzQwYzUxYzUwMDk0ZjczZGNiZWU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-05-29T17:01:37Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-05-29T17:01:37Z"}, "message": "auto merge of #14492 : alexcrichton/rust/totaleq, r=pnkfelix\n\nThis is a transitionary step towards completing #12517. This change modifies the\r\ncompiler to accept Partial{Ord,Eq} as deriving modes which will currently expand\r\nto implementations of PartialOrd and PartialEq (synonyms for Eq/Ord).\r\n\r\nAfter a snapshot, all of deriving(Eq, Ord) will be removed, and after a snapshot\r\nof that, TotalEq/TotalOrd will be renamed to Eq/Ord.", "tree": {"sha": "cab4d9e08cca04262e5502d29e1937a2ee2863be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cab4d9e08cca04262e5502d29e1937a2ee2863be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/50b8528970734adcc654740c51c50094f73dcbee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/50b8528970734adcc654740c51c50094f73dcbee", "html_url": "https://github.com/rust-lang/rust/commit/50b8528970734adcc654740c51c50094f73dcbee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/50b8528970734adcc654740c51c50094f73dcbee/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c631d3d8045fdc9948e751158e8816230ba153b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/c631d3d8045fdc9948e751158e8816230ba153b8", "html_url": "https://github.com/rust-lang/rust/commit/c631d3d8045fdc9948e751158e8816230ba153b8"}, {"sha": "f786f9bb15dd4436d04a89898f5dc51707b5d435", "url": "https://api.github.com/repos/rust-lang/rust/commits/f786f9bb15dd4436d04a89898f5dc51707b5d435", "html_url": "https://github.com/rust-lang/rust/commit/f786f9bb15dd4436d04a89898f5dc51707b5d435"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "32fc3331fa2f771c6329091710adce9d096c328e", "filename": "src/libcore/cmp.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibcore%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibcore%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcmp.rs?ref=50b8528970734adcc654740c51c50094f73dcbee", "patch": "@@ -37,6 +37,9 @@\n //! assert!(SketchyNum {num: 25} != SketchyNum {num: 57});\n //! ```\n \n+pub use PartialEq = cmp::Eq;\n+pub use PartialOrd = cmp::Ord;\n+\n /// Trait for values that can be compared for equality and inequality.\n ///\n /// This trait allows partial equality, where types can be unordered instead of"}, {"sha": "4a8c64f870b7b2ae3e54aebd2867513c6cca1c05", "filename": "src/libsyntax/ext/deriving/cmp/eq.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs?ref=50b8528970734adcc654740c51c50094f73dcbee", "patch": "@@ -53,7 +53,7 @@ pub fn expand_deriving_eq(cx: &mut ExtCtxt,\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n-        path: Path::new(vec!(\"std\", \"cmp\", \"Eq\")),\n+        path: Path::new(vec!(\"std\", \"cmp\", \"PartialEq\")),\n         additional_bounds: Vec::new(),\n         generics: LifetimeBounds::empty(),\n         methods: vec!("}, {"sha": "5d5619a740ff904ce1c6122e7f650ee78103efdf", "filename": "src/libsyntax/ext/deriving/cmp/ord.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs?ref=50b8528970734adcc654740c51c50094f73dcbee", "patch": "@@ -43,7 +43,7 @@ pub fn expand_deriving_ord(cx: &mut ExtCtxt,\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),\n-        path: Path::new(vec!(\"std\", \"cmp\", \"Ord\")),\n+        path: Path::new(vec!(\"std\", \"cmp\", \"PartialOrd\")),\n         additional_bounds: Vec::new(),\n         generics: LifetimeBounds::empty(),\n         methods: vec!("}, {"sha": "e5da7330a6cdab1f4ab03934567e23c95e47e4df", "filename": "src/libsyntax/ext/deriving/mod.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50b8528970734adcc654740c51c50094f73dcbee/src%2Flibsyntax%2Fext%2Fderiving%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fmod.rs?ref=50b8528970734adcc654740c51c50094f73dcbee", "patch": "@@ -77,9 +77,10 @@ pub fn expand_meta_deriving(cx: &mut ExtCtxt,\n                             \"Encodable\" => expand!(encodable::expand_deriving_encodable),\n                             \"Decodable\" => expand!(decodable::expand_deriving_decodable),\n \n-                            \"Eq\" => expand!(eq::expand_deriving_eq),\n+                            // NOTE this needs treatment after a stage0 snap\n+                            \"PartialEq\" | \"Eq\" => expand!(eq::expand_deriving_eq),\n                             \"TotalEq\" => expand!(totaleq::expand_deriving_totaleq),\n-                            \"Ord\" => expand!(ord::expand_deriving_ord),\n+                            \"PartialOrd\" | \"Ord\" => expand!(ord::expand_deriving_ord),\n                             \"TotalOrd\" => expand!(totalord::expand_deriving_totalord),\n \n                             \"Rand\" => expand!(rand::expand_deriving_rand),"}]}