{"sha": "1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFkYmM4NGQwMDY2YzQ2ODlhMWUzZGUyMWY1YTIyZDg3ZTc0YTJhYzE=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2018-03-07T01:43:50Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2018-03-17T22:01:53Z"}, "message": "Remove rustc_global!", "tree": {"sha": "7a9b75a6c1abdca99a24b46fb007f92baea05499", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a9b75a6c1abdca99a24b46fb007f92baea05499"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1", "html_url": "https://github.com/rust-lang/rust/commit/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fa69c935d2dc28207908987a3a3cb518ab7f62d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fa69c935d2dc28207908987a3a3cb518ab7f62d", "html_url": "https://github.com/rust-lang/rust/commit/3fa69c935d2dc28207908987a3a3cb518ab7f62d"}], "stats": {"total": 30, "additions": 0, "deletions": 30}, "files": [{"sha": "f066ea98f91f5af2a6d48eaab2f3430b2063e4e8", "filename": "src/librustc_data_structures/sync.rs", "status": "modified", "additions": 0, "deletions": 30, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1/src%2Flibrustc_data_structures%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1/src%2Flibrustc_data_structures%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fsync.rs?ref=1dbc84d0066c4689a1e3de21f5a22d87e74a2ac1", "patch": "@@ -26,11 +26,6 @@\n //!\n //! `MTLock` is a mutex which disappears if cfg!(parallel_queries) is false.\n //!\n-//! `rustc_global!` gives us a way to declare variables which are intended to be\n-//! global for the current rustc session. This currently maps to thread-locals,\n-//! since rustdoc uses the rustc libraries in multiple threads.\n-//! These globals should eventually be moved into the `Session` structure.\n-//!\n //! `rustc_erase_owner!` erases a OwningRef owner into Erased or Erased + Send + Sync\n //! depending on the value of cfg!(parallel_queries).\n \n@@ -228,31 +223,6 @@ pub fn assert_sync<T: ?Sized + Sync>() {}\n pub fn assert_send_val<T: ?Sized + Send>(_t: &T) {}\n pub fn assert_send_sync_val<T: ?Sized + Sync + Send>(_t: &T) {}\n \n-#[macro_export]\n-#[allow_internal_unstable]\n-macro_rules! rustc_global {\n-    // empty (base case for the recursion)\n-    () => {};\n-\n-    // process multiple declarations\n-    ($(#[$attr:meta])* $vis:vis static $name:ident: $t:ty = $init:expr; $($rest:tt)*) => (\n-        thread_local!($(#[$attr])* $vis static $name: $t = $init);\n-        rustc_global!($($rest)*);\n-    );\n-\n-    // handle a single declaration\n-    ($(#[$attr:meta])* $vis:vis static $name:ident: $t:ty = $init:expr) => (\n-        thread_local!($(#[$attr])* $vis static $name: $t = $init);\n-    );\n-}\n-\n-#[macro_export]\n-macro_rules! rustc_access_global {\n-    ($name:path, $callback:expr) => {\n-        $name.with($callback)\n-    }\n-}\n-\n impl<T: Copy + Debug> Debug for LockCell<T> {\n     fn fmt(&self, f: &mut Formatter) -> fmt::Result {\n         f.debug_struct(\"LockCell\")"}]}