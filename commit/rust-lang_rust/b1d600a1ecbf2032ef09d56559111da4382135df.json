{"sha": "b1d600a1ecbf2032ef09d56559111da4382135df", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxZDYwMGExZWNiZjIwMzJlZjA5ZDU2NTU5MTExZGE0MzgyMTM1ZGY=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2021-05-03T15:18:45Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2021-05-03T15:18:45Z"}, "message": "Less panics in the assist resolution", "tree": {"sha": "0206d3ecf3411a2e02d41fdb03ea77e671c88c26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0206d3ecf3411a2e02d41fdb03ea77e671c88c26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b1d600a1ecbf2032ef09d56559111da4382135df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b1d600a1ecbf2032ef09d56559111da4382135df", "html_url": "https://github.com/rust-lang/rust/commit/b1d600a1ecbf2032ef09d56559111da4382135df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b1d600a1ecbf2032ef09d56559111da4382135df/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28293d370ffc4270bb6244579166f0df18962951", "url": "https://api.github.com/repos/rust-lang/rust/commits/28293d370ffc4270bb6244579166f0df18962951", "html_url": "https://github.com/rust-lang/rust/commit/28293d370ffc4270bb6244579166f0df18962951"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "77faf7579350ead76965ff42ec27a1f7278748b3", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b1d600a1ecbf2032ef09d56559111da4382135df/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b1d600a1ecbf2032ef09d56559111da4382135df/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=b1d600a1ecbf2032ef09d56559111da4382135df", "patch": "@@ -1077,8 +1077,16 @@ pub(crate) fn handle_code_action_resolve(\n     )?;\n \n     let assist = &assists[params.index];\n-    assert!(assist.id.0 == params.id);\n-    assert!(assist.id.1 == assist_kind);\n+    if assist.id.0 != params.id || assist.id.1 != assist_kind {\n+        return Err(LspError::new(\n+            ErrorCode::InvalidParams as i32,\n+            format!(\n+                \"Failed to find exactly the same assist at index {} for the resolve parameters given. Expected id and kind: {}, {:?}, actual id: {:?}.\",\n+                params.index, params.id, assist_kind, assist.id\n+            ),\n+        )\n+        .into());\n+    }\n     let edit = to_proto::code_action(&snap, assist.clone(), None)?.edit;\n     code_action.edit = edit;\n     Ok(code_action)"}]}