{"sha": "3533f72c458d5772a47c9efda761edef396a9f0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1MzNmNzJjNDU4ZDU3NzJhNDdjOWVmZGE3NjFlZGVmMzk2YTlmMGY=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-20T05:14:26Z"}, "committer": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-20T05:14:26Z"}, "message": "Merge pull request #618 from zyphrus/master\n\nComments in structs use appropriate style", "tree": {"sha": "5620ca1be1808375336634370e1624747973a47e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5620ca1be1808375336634370e1624747973a47e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3533f72c458d5772a47c9efda761edef396a9f0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3533f72c458d5772a47c9efda761edef396a9f0f", "html_url": "https://github.com/rust-lang/rust/commit/3533f72c458d5772a47c9efda761edef396a9f0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3533f72c458d5772a47c9efda761edef396a9f0f/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a15dc3d373681f1e3e0c2286fdc264c81a296efb", "url": "https://api.github.com/repos/rust-lang/rust/commits/a15dc3d373681f1e3e0c2286fdc264c81a296efb", "html_url": "https://github.com/rust-lang/rust/commit/a15dc3d373681f1e3e0c2286fdc264c81a296efb"}, {"sha": "b3f41e82fcf9423beaf938308f2034f5dfa508cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/b3f41e82fcf9423beaf938308f2034f5dfa508cb", "html_url": "https://github.com/rust-lang/rust/commit/b3f41e82fcf9423beaf938308f2034f5dfa508cb"}], "stats": {"total": 55, "additions": 52, "deletions": 3}, "files": [{"sha": "8b5fa9fa7870f7c78a7322858986806ae7045802", "filename": "src/expr.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3533f72c458d5772a47c9efda761edef396a9f0f/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3533f72c458d5772a47c9efda761edef396a9f0f/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=3533f72c458d5772a47c9efda761edef396a9f0f", "patch": "@@ -1373,7 +1373,11 @@ fn rewrite_struct_lit<'a>(context: &RewriteContext,\n         },\n         indent: indent,\n         width: budget,\n-        ends_with_newline: false,\n+        ends_with_newline: match tactic {\n+            DefinitiveListTactic::Horizontal => false,\n+            DefinitiveListTactic::Vertical => true,\n+            DefinitiveListTactic::Mixed => unreachable!(),\n+        },\n         config: context.config,\n     };\n     let fields_str = try_opt!(write_list(&item_vec, &fmt));"}, {"sha": "0c30d721c4d634f1b53753b702304ca788a2c360", "filename": "tests/source/struct_lits.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Fsource%2Fstruct_lits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Fsource%2Fstruct_lits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fstruct_lits.rs?ref=3533f72c458d5772a47c9efda761edef396a9f0f", "patch": "@@ -100,3 +100,17 @@ fn issue123() {\n \n     Foo { a: ddddddddddddddddddddd, b: cccccccccccccccccccccccccccccccccccccc };\n }\n+\n+fn issue491() {\n+    Foo {\n+        guard: None,\n+        arm: 0, // Comment\n+    };\n+\n+    Foo {\n+        arm: 0, // Comment\n+    };\n+\n+    Foo { a: aaaaaaaaaa, b: bbbbbbbb, c: cccccccccc, d: dddddddddd, /* a comment */\n+      e: eeeeeeeee };\n+}"}, {"sha": "dc0470b1447c18bc2d3e5034be106aa681df5561", "filename": "tests/source/struct_lits_multiline.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Fsource%2Fstruct_lits_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Fsource%2Fstruct_lits_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fstruct_lits_multiline.rs?ref=3533f72c458d5772a47c9efda761edef396a9f0f", "patch": "@@ -71,3 +71,10 @@ fn issue201() {\n fn issue201_2() {\n     let s = S{a: S2{    .. c}, ..  b};\n }\n+\n+fn issue491() {\n+    Foo {\n+        guard: None,\n+        arm: 0, // Comment\n+    };\n+}"}, {"sha": "a08222f8f135fda5ec297e20d7235e6332a453d2", "filename": "tests/target/struct_lits.rs", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Ftarget%2Fstruct_lits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Ftarget%2Fstruct_lits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits.rs?ref=3533f72c458d5772a47c9efda761edef396a9f0f", "patch": "@@ -25,7 +25,7 @@ fn main() {\n         // Comment\n         a: foo(), // Comment\n         // Comment\n-        b: bar(), /* Comment */\n+        b: bar(), // Comment\n     };\n \n     Foo { a: Bar, b: f() };\n@@ -132,3 +132,20 @@ fn issue123() {\n         b: cccccccccccccccccccccccccccccccccccccc,\n     };\n }\n+\n+fn issue491() {\n+    Foo {\n+        guard: None,\n+        arm: 0, // Comment\n+    };\n+\n+    Foo { arm: 0 /* Comment */ };\n+\n+    Foo {\n+        a: aaaaaaaaaa,\n+        b: bbbbbbbb,\n+        c: cccccccccc,\n+        d: dddddddddd, // a comment\n+        e: eeeeeeeee,\n+    };\n+}"}, {"sha": "91ead9e764ad866527022b61c820298a098d4a1f", "filename": "tests/target/struct_lits_multiline.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Ftarget%2Fstruct_lits_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3533f72c458d5772a47c9efda761edef396a9f0f/tests%2Ftarget%2Fstruct_lits_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits_multiline.rs?ref=3533f72c458d5772a47c9efda761edef396a9f0f", "patch": "@@ -32,7 +32,7 @@ fn main() {\n         // Comment\n         a: foo(), // Comment\n         // Comment\n-        b: bar(), /* Comment */\n+        b: bar(), // Comment\n     };\n \n     Foo {\n@@ -107,3 +107,10 @@ fn issue201_2() {\n         ..b\n     };\n }\n+\n+fn issue491() {\n+    Foo {\n+        guard: None,\n+        arm: 0, // Comment\n+    };\n+}"}]}