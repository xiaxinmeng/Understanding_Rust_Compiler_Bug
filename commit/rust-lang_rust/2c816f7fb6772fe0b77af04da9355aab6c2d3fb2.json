{"sha": "2c816f7fb6772fe0b77af04da9355aab6c2d3fb2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjODE2ZjdmYjY3NzJmZTBiNzdhZjA0ZGE5MzU1YWFiNmMyZDNmYjI=", "commit": {"author": {"name": "Stjepan Glavina", "email": "stjepang@gmail.com", "date": "2017-03-24T23:27:47Z"}, "committer": {"name": "Stjepan Glavina", "email": "stjepang@gmail.com", "date": "2017-03-24T23:32:15Z"}, "message": "Optimize insertion sort\n\nThis change slightly changes the main iteration loop so that LLVM can\noptimize it more efficiently.\n\nBenchmark:\n\nname                                   before ns/iter   after ns/iter    diff ns/iter   diff %\nslice::sort_unstable_small_ascending   39 (2051 MB/s)   38 (2105 MB/s)             -1   -2.56%\nslice::sort_unstable_small_big_random  579 (2210 MB/s)  575 (2226 MB/s)            -4   -0.69%\nslice::sort_unstable_small_descending  80 (1000 MB/s)   70 (1142 MB/s)            -10  -12.50%\nslice::sort_unstable_small_random      396 (202 MB/s)   386                       -10   -2.53%", "tree": {"sha": "b546db6282b3a8184714b97dd92a0e9647b6e280", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b546db6282b3a8184714b97dd92a0e9647b6e280"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2", "html_url": "https://github.com/rust-lang/rust/commit/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2/comments", "author": null, "committer": null, "parents": [{"sha": "c6df67afca788453a3c494899fbf5295992bcfba", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6df67afca788453a3c494899fbf5295992bcfba", "html_url": "https://github.com/rust-lang/rust/commit/c6df67afca788453a3c494899fbf5295992bcfba"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "307e4974d9769f6a1762c6c32951b6e88866674d", "filename": "src/libcore/slice/sort.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2/src%2Flibcore%2Fslice%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c816f7fb6772fe0b77af04da9355aab6c2d3fb2/src%2Flibcore%2Fslice%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fsort.rs?ref=2c816f7fb6772fe0b77af04da9355aab6c2d3fb2", "patch": "@@ -152,8 +152,8 @@ fn partial_insertion_sort<T, F>(v: &mut [T], is_less: &mut F) -> bool\n fn insertion_sort<T, F>(v: &mut [T], is_less: &mut F)\n     where F: FnMut(&T, &T) -> bool\n {\n-    for i in 2..v.len()+1 {\n-        shift_tail(&mut v[..i], is_less);\n+    for i in 1..v.len() {\n+        shift_tail(&mut v[..i+1], is_less);\n     }\n }\n "}]}