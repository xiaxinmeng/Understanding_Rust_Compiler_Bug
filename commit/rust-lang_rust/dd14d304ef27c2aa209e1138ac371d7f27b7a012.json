{"sha": "dd14d304ef27c2aa209e1138ac371d7f27b7a012", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkMTRkMzA0ZWYyN2MyYWEyMDllMTEzOGFjMzcxZDdmMjdiN2EwMTI=", "commit": {"author": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2018-08-16T17:59:32Z"}, "committer": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2018-08-16T17:59:32Z"}, "message": "discard trailing blank comments", "tree": {"sha": "148288cdf57b429507388770de07db0386c34174", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/148288cdf57b429507388770de07db0386c34174"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dd14d304ef27c2aa209e1138ac371d7f27b7a012", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEEipi5pnt+pUplKNfibVYg2QghATMFAlt1u4QACgkQbVYg2Qgh\nATPQuAf/Wjg/I1ZJgR8hmSlKJ77bCWC6GYtWDimng1PNz6izEssQYyn+p7fteLlQ\nGw2xu5OKy90wQP03Ruta6hjdwthOz85sU2OFKmCGj6Q+tX2seiVpw7FnLFvaNNYl\nL2XyOtO85HmJNpLGIOI1pn5PL8RBP8VTioeyiCElGXoM/WKbFxBiZC6mx6hG5BIk\nX1ZWvm+QXbjiS1GmZ+8TDbxRaJtXmB5Kld0sqq7u6TCpClIRZlekJEQEbBpovEcj\nAMNEdAKsPuJ1ps4nx8Hg6LuVXUBT8dWzkXYPDr1hnvr+g40kx0/yWWHKZWoy3RwK\ndAjA9pKOsqBd+2yWjLFXgyO1JqsT+Q==\n=7al3\n-----END PGP SIGNATURE-----", "payload": "tree 148288cdf57b429507388770de07db0386c34174\nparent f23e6aaaf958ee434d677fdc8883543de83f4e0f\nauthor St\u00e9phane Campinas <stephane.campinas@gmail.com> 1534442372 +0200\ncommitter St\u00e9phane Campinas <stephane.campinas@gmail.com> 1534442372 +0200\n\ndiscard trailing blank comments\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dd14d304ef27c2aa209e1138ac371d7f27b7a012", "html_url": "https://github.com/rust-lang/rust/commit/dd14d304ef27c2aa209e1138ac371d7f27b7a012", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dd14d304ef27c2aa209e1138ac371d7f27b7a012/comments", "author": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f23e6aaaf958ee434d677fdc8883543de83f4e0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/f23e6aaaf958ee434d677fdc8883543de83f4e0f", "html_url": "https://github.com/rust-lang/rust/commit/f23e6aaaf958ee434d677fdc8883543de83f4e0f"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "4f2f813166b09d1080cd03fa0635d1804d100316", "filename": "src/comment.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/dd14d304ef27c2aa209e1138ac371d7f27b7a012/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd14d304ef27c2aa209e1138ac371d7f27b7a012/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=dd14d304ef27c2aa209e1138ac371d7f27b7a012", "patch": "@@ -449,8 +449,12 @@ fn rewrite_comment_inner(\n                 }\n             } else if is_prev_line_multi_line && !line.is_empty() {\n                 result.push(' ')\n-            } else if is_last && !closer.is_empty() && line.is_empty() {\n-                result.push_str(&indent_str);\n+            } else if is_last && line.is_empty() {\n+                // trailing blank lines are unwanted\n+                if !closer.is_empty() {\n+                    result.push_str(&indent_str);\n+                }\n+                break;\n             } else {\n                 result.push_str(&comment_line_separator);\n                 if !has_leading_whitespace && result.ends_with(' ') {"}, {"sha": "bdf2adf0c6437b721428386a2b48149526eb1f72", "filename": "tests/target/doc-comment-with-example.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd14d304ef27c2aa209e1138ac371d7f27b7a012/tests%2Ftarget%2Fdoc-comment-with-example.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd14d304ef27c2aa209e1138ac371d7f27b7a012/tests%2Ftarget%2Fdoc-comment-with-example.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fdoc-comment-with-example.rs?ref=dd14d304ef27c2aa209e1138ac371d7f27b7a012", "patch": "@@ -8,5 +8,4 @@\n /// # #![cfg_attr(not(dox), no_std)]\n /// fn foo() {}\n /// ```\n-///\n fn foo() {}"}]}