{"sha": "4fdb1eac08bc29029fe888967dcc11d38d25c205", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmZGIxZWFjMDhiYzI5MDI5ZmU4ODg5NjdkY2MxMWQzOGQyNWMyMDU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-20T22:46:08Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-21T08:37:11Z"}, "message": "Remove unused cursor positions", "tree": {"sha": "dbc6e10c6bc3f56cd374498a088dbcd9c48d13ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dbc6e10c6bc3f56cd374498a088dbcd9c48d13ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4fdb1eac08bc29029fe888967dcc11d38d25c205", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4fdb1eac08bc29029fe888967dcc11d38d25c205", "html_url": "https://github.com/rust-lang/rust/commit/4fdb1eac08bc29029fe888967dcc11d38d25c205", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4fdb1eac08bc29029fe888967dcc11d38d25c205/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42dd0ce51ffee1dbfc58be7ebb0861aa2331b9cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/42dd0ce51ffee1dbfc58be7ebb0861aa2331b9cc", "html_url": "https://github.com/rust-lang/rust/commit/42dd0ce51ffee1dbfc58be7ebb0861aa2331b9cc"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "f3af70a3ec9e7d21f46a099f287de236e1b6e6ea", "filename": "crates/ra_assists/src/assist_context.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_assists%2Fsrc%2Fassist_context.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_assists%2Fsrc%2Fassist_context.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fassist_context.rs?ref=4fdb1eac08bc29029fe888967dcc11d38d25c205", "patch": "@@ -248,8 +248,7 @@ impl AssistBuilder {\n \n     fn finish(self, change_label: String) -> SourceChange {\n         let edit = self.edit.finish();\n-        let mut res = SingleFileChange { label: change_label, edit, cursor_position: None }\n-            .into_source_change(self.file);\n+        let mut res = SingleFileChange { label: change_label, edit }.into_source_change(self.file);\n         if self.is_snippet {\n             res.is_snippet = true;\n         }"}, {"sha": "cd48cad93b969ec286a8e4fb32fef384ea92914d", "filename": "crates/ra_ide/src/typing.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_ide%2Fsrc%2Ftyping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_ide%2Fsrc%2Ftyping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Ftyping.rs?ref=4fdb1eac08bc29029fe888967dcc11d38d25c205", "patch": "@@ -82,7 +82,6 @@ fn on_eq_typed(file: &SourceFile, offset: TextSize) -> Option<SingleFileChange>\n     Some(SingleFileChange {\n         label: \"add semicolon\".to_string(),\n         edit: TextEdit::insert(offset, \";\".to_string()),\n-        cursor_position: None,\n     })\n }\n \n@@ -111,7 +110,6 @@ fn on_dot_typed(file: &SourceFile, offset: TextSize) -> Option<SingleFileChange>\n     Some(SingleFileChange {\n         label: \"reindent dot\".to_string(),\n         edit: TextEdit::replace(TextRange::new(offset - current_indent_len, offset), target_indent),\n-        cursor_position: None,\n     })\n }\n \n@@ -130,7 +128,6 @@ fn on_arrow_typed(file: &SourceFile, offset: TextSize) -> Option<SingleFileChang\n     Some(SingleFileChange {\n         label: \"add space after return type\".to_string(),\n         edit: TextEdit::insert(after_arrow, \" \".to_string()),\n-        cursor_position: None,\n     })\n }\n "}, {"sha": "94e118dd8cab14c7108313947d6bd119d304d8f9", "filename": "crates/ra_ide_db/src/source_change.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_ide_db%2Fsrc%2Fsource_change.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fdb1eac08bc29029fe888967dcc11d38d25c205/crates%2Fra_ide_db%2Fsrc%2Fsource_change.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_db%2Fsrc%2Fsource_change.rs?ref=4fdb1eac08bc29029fe888967dcc11d38d25c205", "patch": "@@ -4,7 +4,7 @@\n //! It can be viewed as a dual for `AnalysisChange`.\n \n use ra_db::{FileId, FilePosition, RelativePathBuf, SourceRootId};\n-use ra_text_edit::{TextEdit, TextSize};\n+use ra_text_edit::TextEdit;\n \n #[derive(Debug, Clone)]\n pub struct SourceChange {\n@@ -109,7 +109,6 @@ pub enum FileSystemEdit {\n pub struct SingleFileChange {\n     pub label: String,\n     pub edit: TextEdit,\n-    pub cursor_position: Option<TextSize>,\n }\n \n impl SingleFileChange {\n@@ -118,7 +117,7 @@ impl SingleFileChange {\n             label: self.label,\n             source_file_edits: vec![SourceFileEdit { file_id, edit: self.edit }],\n             file_system_edits: Vec::new(),\n-            cursor_position: self.cursor_position.map(|offset| FilePosition { file_id, offset }),\n+            cursor_position: None,\n             is_snippet: false,\n         }\n     }"}]}