{"sha": "c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5YjZkY2FhZjlkN2E0MmRjOGI5Mjk0NzM2ZTk3NDNkMTgwNmZhMjk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-25T07:54:49Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-25T13:30:45Z"}, "message": "Rollup merge of #48369 - newpavlov:rdrand, r=nagisa\n\nRename rdrnd target feature to rdrand\n\nPlus minor cleanup.\n\nRelated stdsimd [issue](https://github.com/rust-lang-nursery/stdsimd/issues/325).", "tree": {"sha": "262f744581a2c29dc291086f598e5622a6a521db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/262f744581a2c29dc291086f598e5622a6a521db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlqSuoUACgkQ/vbIBR0O\nATwKyBAAiLCGUSHz2E09JEAb3oe3YjrwFz+BxFPMrHVNNsAZdDZVUe2k6eWwMcle\nnxoVn9my04sp01eemzJQMXYqXCV36Mx7ljNbm9Sav5xXy63hnR6b+YCYi2YajxGm\nrrZeO7C43fbSZd3U+88RcjZhO98DDnhidSORWvu25Zmiw2LQhOq4d16w6yU6WnGQ\nNwM4HMPYnkV8KjA+GbJJrYaF01y2N41I8miJVTWvgnKB53TEQb/J+MoI/q3KX2Iw\nuFzGLzq4tAJB5iQFq/7JrxJeXCbzsxbLmCEcDDwY8sBdbey3b/8tUWS0VGZAou34\nK7wniFlGqw7tMENsBQRTg62Uq/5Ochl8ZHDCaV+Q14a6hV1HzT1T42mTMOoH4cq7\nqMQV8YwVsM+rZ0qriYIDyqSnEbfuK+by/ZTRwV3nUV9zEgToJCS0JTuXxKHi1aPJ\nCPohNEBAJJY3JLronYRe+vZdmInCn0RbTnhoux8ustmNjjoBgOK7bXqRabbBPLla\nRAWuhC2Qbbj2ccuSQV0nwmQSQ06ZEKFfkJLTQDgzx8PbsVgfHnjbErve2ayl9XLI\nFPAk8CgQPP17DprsgrJoIe6k81LUJqv1bTubkmq0HBCnVDzg7ghD+Nq8FkZ10cSi\n4XVCZIANRyztS6dR/g9s9qXnwAes7lPUuQgXUClBmOOC6FDLvt8=\n=hVMM\n-----END PGP SIGNATURE-----", "payload": "tree 262f744581a2c29dc291086f598e5622a6a521db\nparent f28931f767d4a3242dc15cda0fd75a7ede1e1064\nparent a33c1da861bed9dddd69f971131c4797eb6ebfeb\nauthor kennytm <kennytm@gmail.com> 1519545289 +0800\ncommitter kennytm <kennytm@gmail.com> 1519565445 +0800\n\nRollup merge of #48369 - newpavlov:rdrand, r=nagisa\n\nRename rdrnd target feature to rdrand\n\nPlus minor cleanup.\n\nRelated stdsimd [issue](https://github.com/rust-lang-nursery/stdsimd/issues/325).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29", "html_url": "https://github.com/rust-lang/rust/commit/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f28931f767d4a3242dc15cda0fd75a7ede1e1064", "url": "https://api.github.com/repos/rust-lang/rust/commits/f28931f767d4a3242dc15cda0fd75a7ede1e1064", "html_url": "https://github.com/rust-lang/rust/commit/f28931f767d4a3242dc15cda0fd75a7ede1e1064"}, {"sha": "a33c1da861bed9dddd69f971131c4797eb6ebfeb", "url": "https://api.github.com/repos/rust-lang/rust/commits/a33c1da861bed9dddd69f971131c4797eb6ebfeb", "html_url": "https://github.com/rust-lang/rust/commit/a33c1da861bed9dddd69f971131c4797eb6ebfeb"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "6271dcdfb2433c42aafb9580a274eca15c44bf77", "filename": "src/librustc_trans/llvm_util.rs", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29/src%2Flibrustc_trans%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29/src%2Flibrustc_trans%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fllvm_util.rs?ref=c9b6dcaaf9d7a42dc8b9294736e9743d1806fa29", "patch": "@@ -75,26 +75,25 @@ unsafe fn configure_llvm(sess: &Session) {\n                                  llvm_args.as_ptr());\n }\n \n-// WARNING: the features must be known to LLVM or the feature\n-// detection code will walk past the end of the feature array,\n-// leading to crashes.\n+// WARNING: the features after applying `to_llvm_feature` must be known\n+// to LLVM or the feature detection code will walk past the end of the feature\n+// array, leading to crashes.\n \n const ARM_WHITELIST: &'static [&'static str] = &[\"neon\", \"v7\", \"vfp2\", \"vfp3\", \"vfp4\"];\n \n const AARCH64_WHITELIST: &'static [&'static str] = &[\"neon\", \"v7\"];\n \n-const X86_WHITELIST: &'static [&'static str] = &[\"avx\", \"avx2\", \"bmi\", \"bmi2\", \"sse\",\n-                                                 \"sse2\", \"sse3\", \"sse4.1\", \"sse4.2\",\n-                                                 \"ssse3\", \"tbm\", \"lzcnt\", \"popcnt\",\n-                                                 \"sse4a\", \"rdrnd\", \"rdseed\", \"fma\",\n-                                                 \"xsave\", \"xsaveopt\", \"xsavec\",\n-                                                 \"xsaves\", \"aes\", \"pclmulqdq\",\n-                                                 \"avx512bw\", \"avx512cd\",\n-                                                 \"avx512dq\", \"avx512er\",\n-                                                 \"avx512f\", \"avx512ifma\",\n-                                                 \"avx512pf\", \"avx512vbmi\",\n-                                                 \"avx512vl\", \"avx512vpopcntdq\",\n-                                                 \"mmx\", \"fxsr\"];\n+const X86_WHITELIST: &'static [&'static str] = &[\"aes\", \"avx\", \"avx2\", \"avx512bw\",\n+                                                 \"avx512cd\", \"avx512dq\", \"avx512er\",\n+                                                 \"avx512f\", \"avx512ifma\", \"avx512pf\",\n+                                                 \"avx512vbmi\", \"avx512vl\", \"avx512vpopcntdq\",\n+                                                 \"bmi\", \"bmi2\", \"fma\", \"fxsr\",\n+                                                 \"lzcnt\", \"mmx\", \"pclmulqdq\",\n+                                                 \"popcnt\", \"rdrand\", \"rdseed\",\n+                                                 \"sse\", \"sse2\", \"sse3\", \"sse4.1\",\n+                                                 \"sse4.2\", \"sse4a\", \"ssse3\",\n+                                                 \"tbm\", \"xsave\", \"xsavec\",\n+                                                 \"xsaveopt\", \"xsaves\"];\n \n const HEXAGON_WHITELIST: &'static [&'static str] = &[\"hvx\", \"hvx-double\"];\n \n@@ -108,6 +107,7 @@ const MIPS_WHITELIST: &'static [&'static str] = &[\"msa\"];\n pub fn to_llvm_feature(s: &str) -> &str {\n     match s {\n         \"pclmulqdq\" => \"pclmul\",\n+        \"rdrand\" => \"rdrnd\",\n         s => s,\n     }\n }"}]}