{"sha": "5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1NjVjMWExY2E1ZTlhOGZjOTQxYTU1YmRlZTRhNzc0Nzc0ZTViZTk=", "commit": {"author": {"name": "Ryan1729", "email": "Ryan1729@gmail.com", "date": "2020-08-03T00:41:50Z"}, "committer": {"name": "Ryan1729", "email": "Ryan1729@gmail.com", "date": "2020-08-06T10:24:24Z"}, "message": "run cargo dev new_lint then move transmutes_expressible_as_ptr_casts into transmute module", "tree": {"sha": "b98e80d485cccbc97f7ceaa908bd924a57e45a10", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b98e80d485cccbc97f7ceaa908bd924a57e45a10"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "html_url": "https://github.com/rust-lang/rust/commit/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/comments", "author": {"login": "Ryan1729", "id": 2133026, "node_id": "MDQ6VXNlcjIxMzMwMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2133026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ryan1729", "html_url": "https://github.com/Ryan1729", "followers_url": "https://api.github.com/users/Ryan1729/followers", "following_url": "https://api.github.com/users/Ryan1729/following{/other_user}", "gists_url": "https://api.github.com/users/Ryan1729/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ryan1729/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ryan1729/subscriptions", "organizations_url": "https://api.github.com/users/Ryan1729/orgs", "repos_url": "https://api.github.com/users/Ryan1729/repos", "events_url": "https://api.github.com/users/Ryan1729/events{/privacy}", "received_events_url": "https://api.github.com/users/Ryan1729/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Ryan1729", "id": 2133026, "node_id": "MDQ6VXNlcjIxMzMwMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2133026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ryan1729", "html_url": "https://github.com/Ryan1729", "followers_url": "https://api.github.com/users/Ryan1729/followers", "following_url": "https://api.github.com/users/Ryan1729/following{/other_user}", "gists_url": "https://api.github.com/users/Ryan1729/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ryan1729/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ryan1729/subscriptions", "organizations_url": "https://api.github.com/users/Ryan1729/orgs", "repos_url": "https://api.github.com/users/Ryan1729/repos", "events_url": "https://api.github.com/users/Ryan1729/events{/privacy}", "received_events_url": "https://api.github.com/users/Ryan1729/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef2916170b62f99411a787e1a1985f45c221ebef", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef2916170b62f99411a787e1a1985f45c221ebef", "html_url": "https://github.com/rust-lang/rust/commit/ef2916170b62f99411a787e1a1985f45c221ebef"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "a6e6949101775cebc31d7fb7b807991d90a3f831", "filename": "src/tools/clippy/CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2FCHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2FCHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2FCHANGELOG.md?ref=5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "patch": "@@ -1730,6 +1730,7 @@ Released 2018-09-13\n [`transmute_int_to_float`]: https://rust-lang.github.io/rust-clippy/master/index.html#transmute_int_to_float\n [`transmute_ptr_to_ptr`]: https://rust-lang.github.io/rust-clippy/master/index.html#transmute_ptr_to_ptr\n [`transmute_ptr_to_ref`]: https://rust-lang.github.io/rust-clippy/master/index.html#transmute_ptr_to_ref\n+[`transmutes_expressible_as_ptr_casts`]: https://rust-lang.github.io/rust-clippy/master/index.html#transmutes_expressible_as_ptr_casts\n [`transmuting_null`]: https://rust-lang.github.io/rust-clippy/master/index.html#transmuting_null\n [`trivial_regex`]: https://rust-lang.github.io/rust-clippy/master/index.html#trivial_regex\n [`trivially_copy_pass_by_ref`]: https://rust-lang.github.io/rust-clippy/master/index.html#trivially_copy_pass_by_ref"}, {"sha": "87b5309ff1c712a425e04f0eba2a0729f5176dba", "filename": "src/tools/clippy/clippy_lints/src/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs?ref=5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "patch": "@@ -798,6 +798,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         &transmute::UNSOUND_COLLECTION_TRANSMUTE,\n         &transmute::USELESS_TRANSMUTE,\n         &transmute::WRONG_TRANSMUTE,\n+        &transmute::TRANSMUTES_EXPRESSIBLE_AS_PTR_CASTS,\n         &transmuting_null::TRANSMUTING_NULL,\n         &trivially_copy_pass_by_ref::TRIVIALLY_COPY_PASS_BY_REF,\n         &try_err::TRY_ERR,\n@@ -1426,6 +1427,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&transmute::TRANSMUTE_PTR_TO_REF),\n         LintId::of(&transmute::UNSOUND_COLLECTION_TRANSMUTE),\n         LintId::of(&transmute::WRONG_TRANSMUTE),\n+        LintId::of(&transmute::TRANSMUTES_EXPRESSIBLE_AS_PTR_CASTS),\n         LintId::of(&transmuting_null::TRANSMUTING_NULL),\n         LintId::of(&try_err::TRY_ERR),\n         LintId::of(&types::ABSURD_EXTREME_COMPARISONS),\n@@ -1624,6 +1626,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&transmute::TRANSMUTE_INT_TO_FLOAT),\n         LintId::of(&transmute::TRANSMUTE_PTR_TO_PTR),\n         LintId::of(&transmute::TRANSMUTE_PTR_TO_REF),\n+        LintId::of(&transmute::TRANSMUTES_EXPRESSIBLE_AS_PTR_CASTS),\n         LintId::of(&types::BORROWED_BOX),\n         LintId::of(&types::CHAR_LIT_AS_U8),\n         LintId::of(&types::TYPE_COMPLEXITY),"}, {"sha": "ce2ac24f5325fc716370a02bdd230eb95acd41d4", "filename": "src/tools/clippy/clippy_lints/src/transmute.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute.rs?ref=5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "patch": "@@ -269,6 +269,28 @@ declare_clippy_lint! {\n     correctness,\n     \"transmute between collections of layout-incompatible types\"\n }\n+\n+declare_clippy_lint! {\n+    /// **What it does:**\n+    ///\n+    /// **Why is this bad?**\n+    ///\n+    /// **Known problems:** None.\n+    ///\n+    /// **Example:**\n+    ///\n+    /// ```rust\n+    /// // example code where clippy issues a warning\n+    /// ```\n+    /// Use instead:\n+    /// ```rust\n+    /// // example code which does not raise clippy warning\n+    /// ```\n+    pub TRANSMUTES_EXPRESSIBLE_AS_PTR_CASTS,\n+    complexity,\n+    \"default lint description\"\n+}\n+\n declare_lint_pass!(Transmute => [\n     CROSSPOINTER_TRANSMUTE,\n     TRANSMUTE_PTR_TO_REF,\n@@ -281,6 +303,7 @@ declare_lint_pass!(Transmute => [\n     TRANSMUTE_INT_TO_FLOAT,\n     TRANSMUTE_FLOAT_TO_INT,\n     UNSOUND_COLLECTION_TRANSMUTE,\n+    TRANSMUTES_EXPRESSIBLE_AS_PTR_CASTS,\n ]);\n \n // used to check for UNSOUND_COLLECTION_TRANSMUTE"}, {"sha": "9363039041da43d69f85628a3410c9e062fdf474", "filename": "src/tools/clippy/src/lintlist/mod.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fsrc%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Fsrc%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fsrc%2Flintlist%2Fmod.rs?ref=5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "patch": "@@ -2215,6 +2215,13 @@ pub static ref ALL_LINTS: Vec<Lint> = vec![\n         deprecation: None,\n         module: \"transmute\",\n     },\n+    Lint {\n+        name: \"transmutes_expressible_as_ptr_casts\",\n+        group: \"complexity\",\n+        desc: \"default lint description\",\n+        deprecation: None,\n+        module: \"transmute\",\n+    },\n     Lint {\n         name: \"transmuting_null\",\n         group: \"correctness\","}, {"sha": "2b32ae213fbbbfedb7873c20bf2f950c3737cd36", "filename": "src/tools/clippy/tests/ui/transmutes_expressible_as_ptr_casts.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ftransmutes_expressible_as_ptr_casts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5565c1a1ca5e9a8fc941a55bdee4a774774e5be9/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ftransmutes_expressible_as_ptr_casts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ftransmutes_expressible_as_ptr_casts.rs?ref=5565c1a1ca5e9a8fc941a55bdee4a774774e5be9", "patch": "@@ -0,0 +1,5 @@\n+#![warn(clippy::transmutes_expressible_as_ptr_casts)]\n+\n+fn main() {\n+    // test code goes here\n+}"}]}