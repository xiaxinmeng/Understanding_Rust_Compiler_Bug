{"sha": "aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhNDBlYzdmMTE1NWRjNjNiYWMxOWQyMThhNTZhZWM4MTA5YWM4ZTI=", "commit": {"author": {"name": "srdja", "email": "sp@srdja.me", "date": "2016-08-09T19:23:11Z"}, "committer": {"name": "srdja", "email": "sp@srdja.me", "date": "2016-08-09T19:23:11Z"}, "message": "Update E0007 to new format", "tree": {"sha": "591b5b87c513801d8ce66f70504d0359bddfdfd8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/591b5b87c513801d8ce66f70504d0359bddfdfd8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "html_url": "https://github.com/rust-lang/rust/commit/aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa40ec7f1155dc63bac19d218a56aec8109ac8e2/comments", "author": null, "committer": null, "parents": [{"sha": "0cb8439aa3ce2b19b3965fdfa3b244004206bfe2", "url": "https://api.github.com/repos/rust-lang/rust/commits/0cb8439aa3ce2b19b3965fdfa3b244004206bfe2", "html_url": "https://github.com/rust-lang/rust/commit/0cb8439aa3ce2b19b3965fdfa3b244004206bfe2"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "3ca1b0cd6368fd8ed26d293a7a2fe35fa2b02d9a", "filename": "src/librustc_const_eval/check_match.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/aa40ec7f1155dc63bac19d218a56aec8109ac8e2/src%2Flibrustc_const_eval%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa40ec7f1155dc63bac19d218a56aec8109ac8e2/src%2Flibrustc_const_eval%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_eval%2Fcheck_match.rs?ref=aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "patch": "@@ -1112,7 +1112,10 @@ fn check_legality_of_move_bindings(cx: &MatchCheckCtxt,\n \n         // x @ Foo(..) is legal, but x @ Foo(y) isn't.\n         if sub.map_or(false, |p| pat_contains_bindings(&p)) {\n-            span_err!(cx.tcx.sess, p.span, E0007, \"cannot bind by-move with sub-bindings\");\n+            struct_span_err!(cx.tcx.sess, p.span, E0007,\n+                             \"cannot bind by-move with sub-bindings\")\n+                .span_label(p.span, &format!(\"binds an already bound by-move value by moving it\"))\n+                .emit();\n         } else if has_guard {\n             struct_span_err!(cx.tcx.sess, p.span, E0008,\n                       \"cannot bind by-move into a pattern guard\")"}, {"sha": "4be115b8afdace66329a8d4c5a97b31f32eb3346", "filename": "src/test/compile-fail/E0007.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/aa40ec7f1155dc63bac19d218a56aec8109ac8e2/src%2Ftest%2Fcompile-fail%2FE0007.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa40ec7f1155dc63bac19d218a56aec8109ac8e2/src%2Ftest%2Fcompile-fail%2FE0007.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0007.rs?ref=aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "patch": "@@ -11,8 +11,10 @@\n fn main() {\n     let x = Some(\"s\".to_string());\n     match x {\n-        op_string @ Some(s) => {}, //~ ERROR E0007\n-                                   //~| ERROR E0303\n+        op_string @ Some(s) => {},\n+        //~^ ERROR E0007\n+        //~| NOTE binds an already bound by-move value by moving it\n+        //~| ERROR E0303\n         None => {},\n     }\n }"}]}