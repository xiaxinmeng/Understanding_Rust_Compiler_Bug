{"sha": "47eda6b7dbca58eec691bc9faf95791d9379ccbe", "node_id": "C_kwDOAAsO6NoAKDQ3ZWRhNmI3ZGJjYTU4ZWVjNjkxYmM5ZmFmOTU3OTFkOTM3OWNjYmU", "commit": {"author": {"name": "clubby789", "email": "jamie@hill-daniel.co.uk", "date": "2022-11-14T17:43:21Z"}, "committer": {"name": "clubby789", "email": "jamie@hill-daniel.co.uk", "date": "2022-11-14T17:43:21Z"}, "message": "Fix using `include_bytes` in pattern position", "tree": {"sha": "7d9f959977d7b3d9835978a61f44b92ce917763a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d9f959977d7b3d9835978a61f44b92ce917763a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/47eda6b7dbca58eec691bc9faf95791d9379ccbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/47eda6b7dbca58eec691bc9faf95791d9379ccbe", "html_url": "https://github.com/rust-lang/rust/commit/47eda6b7dbca58eec691bc9faf95791d9379ccbe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/47eda6b7dbca58eec691bc9faf95791d9379ccbe/comments", "author": {"login": "clubby789", "id": 13556931, "node_id": "MDQ6VXNlcjEzNTU2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clubby789", "html_url": "https://github.com/clubby789", "followers_url": "https://api.github.com/users/clubby789/followers", "following_url": "https://api.github.com/users/clubby789/following{/other_user}", "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}", "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions", "organizations_url": "https://api.github.com/users/clubby789/orgs", "repos_url": "https://api.github.com/users/clubby789/repos", "events_url": "https://api.github.com/users/clubby789/events{/privacy}", "received_events_url": "https://api.github.com/users/clubby789/received_events", "type": "User", "site_admin": false}, "committer": {"login": "clubby789", "id": 13556931, "node_id": "MDQ6VXNlcjEzNTU2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clubby789", "html_url": "https://github.com/clubby789", "followers_url": "https://api.github.com/users/clubby789/followers", "following_url": "https://api.github.com/users/clubby789/following{/other_user}", "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}", "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions", "organizations_url": "https://api.github.com/users/clubby789/orgs", "repos_url": "https://api.github.com/users/clubby789/repos", "events_url": "https://api.github.com/users/clubby789/events{/privacy}", "received_events_url": "https://api.github.com/users/clubby789/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96ddd32c4bfb1d78f0cd03eb068b1710a8cebeef", "url": "https://api.github.com/repos/rust-lang/rust/commits/96ddd32c4bfb1d78f0cd03eb068b1710a8cebeef", "html_url": "https://github.com/rust-lang/rust/commit/96ddd32c4bfb1d78f0cd03eb068b1710a8cebeef"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "6cad8cb843f5e7b9411fa007e5e372225ef0e029", "filename": "compiler/rustc_expand/src/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/47eda6b7dbca58eec691bc9faf95791d9379ccbe/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47eda6b7dbca58eec691bc9faf95791d9379ccbe/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fbase.rs?ref=47eda6b7dbca58eec691bc9faf95791d9379ccbe", "patch": "@@ -507,7 +507,7 @@ impl MacResult for MacEager {\n             return Some(p);\n         }\n         if let Some(e) = self.expr {\n-            if let ast::ExprKind::Lit(_) = e.kind {\n+            if matches!(e.kind, ast::ExprKind::Lit(_) | ast::ExprKind::IncludedBytes(_)) {\n                 return Some(P(ast::Pat {\n                     id: ast::DUMMY_NODE_ID,\n                     span: e.span,"}, {"sha": "75a23976a648928d256bc51c01d1cf632c1eed2b", "filename": "src/test/ui/proc-macro/expand-expr.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/47eda6b7dbca58eec691bc9faf95791d9379ccbe/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/47eda6b7dbca58eec691bc9faf95791d9379ccbe/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fexpand-expr.rs?ref=47eda6b7dbca58eec691bc9faf95791d9379ccbe", "patch": "@@ -123,4 +123,10 @@ expand_expr_fail!(echo_pm!(arbitrary_expression() + \"etc\"));\n \n const _: u32 = recursive_expand!(); //~ ERROR: recursion limit reached while expanding `recursive_expand!`\n \n-fn main() {}\n+fn main() {\n+    // https://github.com/rust-lang/rust/issues/104414\n+    match b\"a\" {\n+        include_bytes!(\"auxiliary/included-file.txt\") => (),\n+        _ => ()\n+    }\n+}"}]}