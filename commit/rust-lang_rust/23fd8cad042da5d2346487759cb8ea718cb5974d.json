{"sha": "23fd8cad042da5d2346487759cb8ea718cb5974d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzZmQ4Y2FkMDQyZGE1ZDIzNDY0ODc3NTljYjhlYTcxOGNiNTk3NGQ=", "commit": {"author": {"name": "Victory", "email": "git@dfhu.org", "date": "2015-01-27T00:48:29Z"}, "committer": {"name": "Victory", "email": "git@dfhu.org", "date": "2015-01-27T00:48:29Z"}, "message": "cleanup depricated `uint` in rand mod and rand os", "tree": {"sha": "63852c9cac06808fbf98bf99e40158cf0702276e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/63852c9cac06808fbf98bf99e40158cf0702276e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/23fd8cad042da5d2346487759cb8ea718cb5974d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/23fd8cad042da5d2346487759cb8ea718cb5974d", "html_url": "https://github.com/rust-lang/rust/commit/23fd8cad042da5d2346487759cb8ea718cb5974d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/23fd8cad042da5d2346487759cb8ea718cb5974d/comments", "author": {"login": "Victory", "id": 116593, "node_id": "MDQ6VXNlcjExNjU5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/116593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Victory", "html_url": "https://github.com/Victory", "followers_url": "https://api.github.com/users/Victory/followers", "following_url": "https://api.github.com/users/Victory/following{/other_user}", "gists_url": "https://api.github.com/users/Victory/gists{/gist_id}", "starred_url": "https://api.github.com/users/Victory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Victory/subscriptions", "organizations_url": "https://api.github.com/users/Victory/orgs", "repos_url": "https://api.github.com/users/Victory/repos", "events_url": "https://api.github.com/users/Victory/events{/privacy}", "received_events_url": "https://api.github.com/users/Victory/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Victory", "id": 116593, "node_id": "MDQ6VXNlcjExNjU5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/116593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Victory", "html_url": "https://github.com/Victory", "followers_url": "https://api.github.com/users/Victory/followers", "following_url": "https://api.github.com/users/Victory/following{/other_user}", "gists_url": "https://api.github.com/users/Victory/gists{/gist_id}", "starred_url": "https://api.github.com/users/Victory/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Victory/subscriptions", "organizations_url": "https://api.github.com/users/Victory/orgs", "repos_url": "https://api.github.com/users/Victory/repos", "events_url": "https://api.github.com/users/Victory/events{/privacy}", "received_events_url": "https://api.github.com/users/Victory/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ec3a833d5082a77e74a30c2d3d353ba7f5df644", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ec3a833d5082a77e74a30c2d3d353ba7f5df644", "html_url": "https://github.com/rust-lang/rust/commit/8ec3a833d5082a77e74a30c2d3d353ba7f5df644"}], "stats": {"total": 62, "additions": 31, "deletions": 31}, "files": [{"sha": "ba5941bc0be67716f1ac236b1b012e96e1a30e71", "filename": "src/libstd/rand/mod.rs", "status": "modified", "additions": 27, "deletions": 27, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/23fd8cad042da5d2346487759cb8ea718cb5974d/src%2Flibstd%2Frand%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23fd8cad042da5d2346487759cb8ea718cb5974d/src%2Flibstd%2Frand%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fmod.rs?ref=23fd8cad042da5d2346487759cb8ea718cb5974d", "patch": "@@ -99,10 +99,10 @@\n //!    let between = Range::new(-1f64, 1.);\n //!    let mut rng = rand::thread_rng();\n //!\n-//!    let total = 1_000_000u;\n-//!    let mut in_circle = 0u;\n+//!    let total = 1_000_000us;\n+//!    let mut in_circle = 0us;\n //!\n-//!    for _ in range(0u, total) {\n+//!    for _ in range(0us, total) {\n //!        let a = between.ind_sample(&mut rng);\n //!        let b = between.ind_sample(&mut rng);\n //!        if a*a + b*b <= 1. {\n@@ -176,18 +176,18 @@\n //! }\n //!\n //! fn free_doors(blocked: &[uint]) -> Vec<uint> {\n-//!     range(0u, 3).filter(|x| !blocked.contains(x)).collect()\n+//!     range(0us, 3).filter(|x| !blocked.contains(x)).collect()\n //! }\n //!\n //! fn main() {\n //!     // The estimation will be more accurate with more simulations\n-//!     let num_simulations = 10000u;\n+//!     let num_simulations = 10000us;\n //!\n //!     let mut rng = rand::thread_rng();\n-//!     let random_door = Range::new(0u, 3);\n+//!     let random_door = Range::new(0us, 3);\n //!\n-//!     let (mut switch_wins, mut switch_losses) = (0u, 0u);\n-//!     let (mut keep_wins, mut keep_losses) = (0u, 0u);\n+//!     let (mut switch_wins, mut switch_losses) = (0us, 0us);\n+//!     let (mut keep_wins, mut keep_losses) = (0us, 0us);\n //!\n //!     println!(\"Running {} simulations...\", num_simulations);\n //!     for _ in range(0, num_simulations) {\n@@ -279,14 +279,14 @@ impl Rng for StdRng {\n     }\n }\n \n-impl<'a> SeedableRng<&'a [uint]> for StdRng {\n-    fn reseed(&mut self, seed: &'a [uint]) {\n+impl<'a> SeedableRng<&'a [usize]> for StdRng {\n+    fn reseed(&mut self, seed: &'a [usize]) {\n         // the internal RNG can just be seeded from the above\n         // randomness.\n         self.rng.reseed(unsafe {mem::transmute(seed)})\n     }\n \n-    fn from_seed(seed: &'a [uint]) -> StdRng {\n+    fn from_seed(seed: &'a [usize]) -> StdRng {\n         StdRng { rng: SeedableRng::from_seed(unsafe {mem::transmute(seed)}) }\n     }\n }\n@@ -318,7 +318,7 @@ impl reseeding::Reseeder<StdRng> for ThreadRngReseeder {\n         }\n     }\n }\n-static THREAD_RNG_RESEED_THRESHOLD: uint = 32_768;\n+static THREAD_RNG_RESEED_THRESHOLD: usize = 32_768;\n type ThreadRngInner = reseeding::ReseedingRng<StdRng, ThreadRngReseeder>;\n \n /// The thread-local RNG.\n@@ -384,7 +384,7 @@ impl Rng for ThreadRng {\n /// use std::rand;\n ///\n /// let x = rand::random();\n-/// println!(\"{}\", 2u * x);\n+/// println!(\"{}\", 2u8 * x);\n ///\n /// let y = rand::random::<f64>();\n /// println!(\"{}\", y);\n@@ -432,7 +432,7 @@ pub fn random<T: Rand>() -> T {\n /// ```\n pub fn sample<T, I: Iterator<Item=T>, R: Rng>(rng: &mut R,\n                                          mut iter: I,\n-                                         amount: uint) -> Vec<T> {\n+                                         amount: usize) -> Vec<T> {\n     let mut reservoir: Vec<T> = iter.by_ref().take(amount).collect();\n     for (i, elem) in iter.enumerate() {\n         let k = rng.gen_range(0, i + 1 + amount);\n@@ -480,18 +480,18 @@ mod test {\n     #[test]\n     fn test_gen_range() {\n         let mut r = thread_rng();\n-        for _ in range(0u, 1000) {\n+        for _ in range(0us, 1000) {\n             let a = r.gen_range(-3i, 42);\n             assert!(a >= -3 && a < 42);\n             assert_eq!(r.gen_range(0i, 1), 0);\n             assert_eq!(r.gen_range(-12i, -11), -12);\n         }\n \n-        for _ in range(0u, 1000) {\n+        for _ in range(0us, 1000) {\n             let a = r.gen_range(10i, 42);\n             assert!(a >= 10 && a < 42);\n             assert_eq!(r.gen_range(0i, 1), 0);\n-            assert_eq!(r.gen_range(3_000_000u, 3_000_001), 3_000_000);\n+            assert_eq!(r.gen_range(3_000_000us, 3_000_001), 3_000_000);\n         }\n \n     }\n@@ -507,7 +507,7 @@ mod test {\n     #[should_fail]\n     fn test_gen_range_panic_uint() {\n         let mut r = thread_rng();\n-        r.gen_range(5u, 2u);\n+        r.gen_range(5us, 2us);\n     }\n \n     #[test]\n@@ -521,24 +521,24 @@ mod test {\n     #[test]\n     fn test_gen_weighted_bool() {\n         let mut r = thread_rng();\n-        assert_eq!(r.gen_weighted_bool(0u), true);\n-        assert_eq!(r.gen_weighted_bool(1u), true);\n+        assert_eq!(r.gen_weighted_bool(0us), true);\n+        assert_eq!(r.gen_weighted_bool(1us), true);\n     }\n \n     #[test]\n     fn test_gen_ascii_str() {\n         let mut r = thread_rng();\n-        assert_eq!(r.gen_ascii_chars().take(0).count(), 0u);\n-        assert_eq!(r.gen_ascii_chars().take(10).count(), 10u);\n-        assert_eq!(r.gen_ascii_chars().take(16).count(), 16u);\n+        assert_eq!(r.gen_ascii_chars().take(0).count(), 0us);\n+        assert_eq!(r.gen_ascii_chars().take(10).count(), 10us);\n+        assert_eq!(r.gen_ascii_chars().take(16).count(), 16us);\n     }\n \n     #[test]\n     fn test_gen_vec() {\n         let mut r = thread_rng();\n-        assert_eq!(r.gen_iter::<u8>().take(0).count(), 0u);\n-        assert_eq!(r.gen_iter::<u8>().take(10).count(), 10u);\n-        assert_eq!(r.gen_iter::<f64>().take(16).count(), 16u);\n+        assert_eq!(r.gen_iter::<u8>().take(0).count(), 0us);\n+        assert_eq!(r.gen_iter::<u8>().take(10).count(), 10us);\n+        assert_eq!(r.gen_iter::<f64>().take(16).count(), 16us);\n     }\n \n     #[test]\n@@ -578,7 +578,7 @@ mod test {\n         r.shuffle(&mut v);\n         let b: &[_] = &[1, 1, 1];\n         assert_eq!(v, b);\n-        assert_eq!(r.gen_range(0u, 1u), 0u);\n+        assert_eq!(r.gen_range(0us, 1us), 0us);\n     }\n \n     #[test]"}, {"sha": "1c6a8b555277701716e74a29d03736b5ee45ba6c", "filename": "src/libstd/rand/os.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/23fd8cad042da5d2346487759cb8ea718cb5974d/src%2Flibstd%2Frand%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23fd8cad042da5d2346487759cb8ea718cb5974d/src%2Flibstd%2Frand%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fos.rs?ref=23fd8cad042da5d2346487759cb8ea718cb5974d", "patch": "@@ -49,7 +49,7 @@ mod imp {\n         const NR_GETRANDOM: libc::c_long = 384;\n \n         unsafe {\n-            syscall(NR_GETRANDOM, buf.as_mut_ptr(), buf.len(), 0u)\n+            syscall(NR_GETRANDOM, buf.as_mut_ptr(), buf.len(), 0us)\n         }\n     }\n \n@@ -74,7 +74,7 @@ mod imp {\n                     panic!(\"unexpected getrandom error: {}\", err);\n                 }\n             } else {\n-                read += result as uint;\n+                read += result as usize;\n             }\n         }\n     }\n@@ -378,7 +378,7 @@ mod test {\n     fn test_os_rng_tasks() {\n \n         let mut txs = vec!();\n-        for _ in range(0u, 20) {\n+        for _ in range(0us, 20) {\n             let (tx, rx) = channel();\n             txs.push(tx);\n \n@@ -392,7 +392,7 @@ mod test {\n                 Thread::yield_now();\n                 let mut v = [0u8; 1000];\n \n-                for _ in range(0u, 100) {\n+                for _ in range(0us, 100) {\n                     r.next_u32();\n                     Thread::yield_now();\n                     r.next_u64();"}]}