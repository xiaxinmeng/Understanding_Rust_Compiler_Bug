{"sha": "adba97e4b24aa5ec920330a549690f664a3e1ab6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkYmE5N2U0YjI0YWE1ZWM5MjAzMzBhNTQ5NjkwZjY2NGEzZTFhYjY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-12-19T10:16:19Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-12-19T10:16:19Z"}, "message": "document the cargo-miri feature", "tree": {"sha": "fc401058516a2b9b05c4c78885a402250b6b9515", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc401058516a2b9b05c4c78885a402250b6b9515"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/adba97e4b24aa5ec920330a549690f664a3e1ab6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/adba97e4b24aa5ec920330a549690f664a3e1ab6", "html_url": "https://github.com/rust-lang/rust/commit/adba97e4b24aa5ec920330a549690f664a3e1ab6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/adba97e4b24aa5ec920330a549690f664a3e1ab6/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d67da9f04bf2acf7ecec1438c28015cd75d01c83", "url": "https://api.github.com/repos/rust-lang/rust/commits/d67da9f04bf2acf7ecec1438c28015cd75d01c83", "html_url": "https://github.com/rust-lang/rust/commit/d67da9f04bf2acf7ecec1438c28015cd75d01c83"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "5a615e656d7428bfe97cb19c67638798175db5da", "filename": "README.md", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/adba97e4b24aa5ec920330a549690f664a3e1ab6/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/adba97e4b24aa5ec920330a549690f664a3e1ab6/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=adba97e4b24aa5ec920330a549690f664a3e1ab6", "patch": "@@ -39,7 +39,7 @@ example above), overriding it in your project directory as well, or use `rustup\n default nightly` (or `rustup default nightly-YYYY-MM-DD`) to globally make\n `nightly` the default toolchain.\n \n-Now you can run your project in miri:\n+Now you can run your project in Miri:\n \n 1. Run `cargo clean` to eliminate any cached dependencies.  Miri needs your\n    dependencies to be compiled the right way, that would not happen if they have\n@@ -48,6 +48,19 @@ Now you can run your project in miri:\n 3. If you have a binary project, you can run it through Miri using `cargo\n    +nightly miri run`.\n \n+When running code via `cargo miri`, the `cargo-miri` feature is set.  You can\n+use this to exclude test cases that will fail under Miri because they do things\n+Miri does not support:\n+\n+```rust\n+#[cfg(not(feature = \"cargo-miri\"))]\n+#[test]\n+fn does_not_work_on_miri() {\n+    let x = 0u8;\n+    assert!(&x as *const _ as usize % 4 < 4);\n+}\n+```\n+\n ### Common Problems\n \n When using the above instructions, you may encounter a number of confusing compiler"}]}