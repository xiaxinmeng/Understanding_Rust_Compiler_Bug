{"sha": "f058d05fc20a19c46a8253eec15faa2636ea1135", "node_id": "C_kwDOAAsO6NoAKGYwNThkMDVmYzIwYTE5YzQ2YTgyNTNlZWMxNWZhYTI2MzZlYTExMzU", "commit": {"author": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2023-04-09T19:52:46Z"}, "committer": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2023-04-09T19:59:28Z"}, "message": "Some simple `clippy::perf` fixes", "tree": {"sha": "11a4842e77e81b5fee5e1ac863cc2006032eb631", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/11a4842e77e81b5fee5e1ac863cc2006032eb631"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f058d05fc20a19c46a8253eec15faa2636ea1135", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f058d05fc20a19c46a8253eec15faa2636ea1135", "html_url": "https://github.com/rust-lang/rust/commit/f058d05fc20a19c46a8253eec15faa2636ea1135", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f058d05fc20a19c46a8253eec15faa2636ea1135/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c39afb37536e7e2ea974734aa65ff025b47f7b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c39afb37536e7e2ea974734aa65ff025b47f7b9", "html_url": "https://github.com/rust-lang/rust/commit/1c39afb37536e7e2ea974734aa65ff025b47f7b9"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "92924111a000f3dda7a52076c15b3cccf21370be", "filename": "compiler/rustc_data_structures/src/profiling.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs?ref=f058d05fc20a19c46a8253eec15faa2636ea1135", "patch": "@@ -778,7 +778,7 @@ pub fn print_time_passes_entry(\n                 \"rss_start\": start_rss,\n                 \"rss_end\": end_rss,\n             });\n-            eprintln!(\"time: {}\", json.to_string());\n+            eprintln!(\"time: {}\", json);\n             return;\n         }\n         TimePassesFormat::Text => (),"}, {"sha": "3e0c2bf2a55382635d472e56c8e207e118fc21dc", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/adjust_fulfillment_errors.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fadjust_fulfillment_errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fadjust_fulfillment_errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fadjust_fulfillment_errors.rs?ref=f058d05fc20a19c46a8253eec15faa2636ea1135", "patch": "@@ -242,8 +242,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         let Some(arg) = segment\n             .args()\n             .args\n-            .iter()\n-            .nth(index) else { return false; };\n+            .get(index) else { return false; };\n         error.obligation.cause.span = arg\n             .span()\n             .find_ancestor_in_same_ctxt(error.obligation.cause.span)"}, {"sha": "493ec5a99447ce04ea2a6db6aa74ff6e500ce056", "filename": "compiler/rustc_macros/src/diagnostics/fluent.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Ffluent.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Ffluent.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Ffluent.rs?ref=f058d05fc20a19c46a8253eec15faa2636ea1135", "patch": "@@ -100,7 +100,7 @@ pub(crate) fn fluent_messages(input: proc_macro::TokenStream) -> proc_macro::Tok\n             Diagnostic::spanned(\n                 resource_span,\n                 Level::Error,\n-                format!(\"could not open Fluent resource: {}\", e.to_string()),\n+                format!(\"could not open Fluent resource: {}\", e),\n             )\n             .emit();\n             return failed(&crate_name);"}, {"sha": "e1cae6caf2fb8e7f741ac7514656b57537527188", "filename": "compiler/rustc_resolve/src/late.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate.rs?ref=f058d05fc20a19c46a8253eec15faa2636ea1135", "patch": "@@ -1224,7 +1224,7 @@ impl<'a: 'ast, 'b, 'ast, 'tcx> LateResolutionVisitor<'a, 'b, 'ast, 'tcx> {\n             lifetime_ribs: Vec::new(),\n             lifetime_elision_candidates: None,\n             current_trait_ref: None,\n-            diagnostic_metadata: Box::new(DiagnosticMetadata::default()),\n+            diagnostic_metadata: Box::<DiagnosticMetadata<'_>>::default(),\n             // errors at module scope should always be reported\n             in_func_body: false,\n             lifetime_uses: Default::default(),"}, {"sha": "a93a42987ed5399404ad6ef561f19dbb156f770a", "filename": "compiler/rustc_transmute/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_transmute%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f058d05fc20a19c46a8253eec15faa2636ea1135/compiler%2Frustc_transmute%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_transmute%2Fsrc%2Flib.rs?ref=f058d05fc20a19c46a8253eec15faa2636ea1135", "patch": "@@ -149,7 +149,7 @@ mod rustc {\n                     .iter()\n                     .enumerate()\n                     .find(|(_, field_def)| name == field_def.name)\n-                    .expect(&format!(\"There were no fields named `{name}`.\"));\n+                    .unwrap_or_else(|| panic!(\"There were no fields named `{name}`.\"));\n                 fields[field_idx].unwrap_leaf() == ScalarInt::TRUE\n             };\n "}]}