{"sha": "8763965a2c7b68a33af5fc55999f9eff26749fd6", "node_id": "C_kwDOAAsO6NoAKDg3NjM5NjVhMmM3YjY4YTMzYWY1ZmM1NTk5OWY5ZWZmMjY3NDlmZDY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-26T12:03:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-26T12:03:13Z"}, "message": "Auto merge of #97368 - tmandry:coverage-underflow, r=jyn514\n\ncoverage: Don't underflow column number\n\nI noticed this when running coverage on a debug build of rustc. There\nmay be other places that do this but I'm just fixing the one I hit.\n\nr? `@wesleywiser` `@richkadel`", "tree": {"sha": "ec12eb1a7ed9845b9b6466151fd57621f60dc9be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec12eb1a7ed9845b9b6466151fd57621f60dc9be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8763965a2c7b68a33af5fc55999f9eff26749fd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8763965a2c7b68a33af5fc55999f9eff26749fd6", "html_url": "https://github.com/rust-lang/rust/commit/8763965a2c7b68a33af5fc55999f9eff26749fd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8763965a2c7b68a33af5fc55999f9eff26749fd6/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae3ab14faa47ba581396b6fb1458bec3c9bd0bed", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae3ab14faa47ba581396b6fb1458bec3c9bd0bed", "html_url": "https://github.com/rust-lang/rust/commit/ae3ab14faa47ba581396b6fb1458bec3c9bd0bed"}, {"sha": "2f02a4e4a02fed8275f71f800899fadc488b18d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f02a4e4a02fed8275f71f800899fadc488b18d9", "html_url": "https://github.com/rust-lang/rust/commit/2f02a4e4a02fed8275f71f800899fadc488b18d9"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "076e714d70370da2291827f24b7cfe1b82c03b72", "filename": "compiler/rustc_mir_transform/src/coverage/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8763965a2c7b68a33af5fc55999f9eff26749fd6/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8763965a2c7b68a33af5fc55999f9eff26749fd6/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Fcoverage%2Fmod.rs?ref=8763965a2c7b68a33af5fc55999f9eff26749fd6", "patch": "@@ -514,7 +514,7 @@ fn make_code_region(\n         // Extend an empty span by one character so the region will be counted.\n         let CharPos(char_pos) = start_col;\n         if span.hi() == body_span.hi() {\n-            start_col = CharPos(char_pos - 1);\n+            start_col = CharPos(char_pos.saturating_sub(1));\n         } else {\n             end_col = CharPos(char_pos + 1);\n         }"}]}