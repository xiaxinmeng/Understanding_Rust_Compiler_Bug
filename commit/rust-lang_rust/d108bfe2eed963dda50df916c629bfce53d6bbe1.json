{"sha": "d108bfe2eed963dda50df916c629bfce53d6bbe1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxMDhiZmUyZWVkOTYzZGRhNTBkZjkxNmM2MjliZmNlNTNkNmJiZTE=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-05-18T18:01:13Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-05-18T18:02:53Z"}, "message": "Remove a bit more dead code.", "tree": {"sha": "1267ea7c8d659b9f2ebf2535b8aad994039e638a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1267ea7c8d659b9f2ebf2535b8aad994039e638a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d108bfe2eed963dda50df916c629bfce53d6bbe1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d108bfe2eed963dda50df916c629bfce53d6bbe1", "html_url": "https://github.com/rust-lang/rust/commit/d108bfe2eed963dda50df916c629bfce53d6bbe1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d108bfe2eed963dda50df916c629bfce53d6bbe1/comments", "author": null, "committer": null, "parents": [{"sha": "cebc9b359db16ea0370fb9f9013507a559e33bcd", "url": "https://api.github.com/repos/rust-lang/rust/commits/cebc9b359db16ea0370fb9f9013507a559e33bcd", "html_url": "https://github.com/rust-lang/rust/commit/cebc9b359db16ea0370fb9f9013507a559e33bcd"}], "stats": {"total": 19, "additions": 1, "deletions": 18}, "files": [{"sha": "0c7ec8d3abef1cb7887b22c454ac37ce55de1a4b", "filename": "src/rt/rust.cpp", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust.cpp?ref=d108bfe2eed963dda50df916c629bfce53d6bbe1", "patch": "@@ -80,10 +80,7 @@ extern \"C\" CDECL int\n rust_start(uintptr_t main_fn, rust_crate const *crate, int argc,\n            char **argv, void* crate_map) {\n \n-    if (crate->abi_tag != ABI_X86_RUSTBOOT_CDECL)\n-        update_log_settings(crate_map, getenv(\"RUST_LOG\"));\n-    else\n-        update_log_settings(NULL, getenv(\"RUST_LOG\"));\n+    update_log_settings(crate_map, getenv(\"RUST_LOG\"));\n     rust_srv *srv = new rust_srv();\n     rust_kernel *kernel = new rust_kernel(srv);\n     kernel->start();"}, {"sha": "a4b7a79272bfc0160377190f8e69f368ac00ecdb", "filename": "src/rt/rust_crate_cache.cpp", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_crate_cache.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_crate_cache.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_crate_cache.cpp?ref=d108bfe2eed963dda50df916c629bfce53d6bbe1", "patch": "@@ -215,14 +215,6 @@ rust_crate_cache::get_type_desc(size_t size,\n         // FIXME (issue #136):  Below is a miscalculation.\n         td->is_stateful |= descs[i]->is_stateful;\n     }\n-    if (crate->abi_tag == ABI_X86_RUSTBOOT_CDECL) {\n-        adjust_disp(td->copy_glue_off, descs[0], td);\n-        adjust_disp(td->drop_glue_off, descs[0], td);\n-        adjust_disp(td->free_glue_off, descs[0], td);\n-        adjust_disp(td->mark_glue_off, descs[0], td);\n-        adjust_disp(td->sever_glue_off, descs[0], td);\n-        adjust_disp(td->obj_drop_glue_off, descs[0], td);\n-    }\n     HASH_ADD(hh, this->type_descs, descs, keysz, td);\n     return td;\n }"}, {"sha": "a1b9be9bf6f8d6e72308946734978755b790a6ac", "filename": "src/rt/rust_internal.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_internal.h", "raw_url": "https://github.com/rust-lang/rust/raw/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_internal.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_internal.h?ref=d108bfe2eed963dda50df916c629bfce53d6bbe1", "patch": "@@ -90,10 +90,6 @@ static size_t const TIME_SLICE_IN_MS = 10;\n \n static intptr_t const CONST_REFCOUNT = 0x7badface;\n \n-// ABI tags for rust_start, rust_task::start and friends.\n-static uintptr_t const ABI_X86_RUSTBOOT_CDECL = 1;\n-static uintptr_t const ABI_X86_RUSTC_FASTCALL = 2;\n-\n // This accounts for logging buffers.\n \n static size_t const BUF_BYTES = 2048;"}, {"sha": "084b025d70164e946374a15b5771a1222fa28bdd", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/d108bfe2eed963dda50df916c629bfce53d6bbe1/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=d108bfe2eed963dda50df916c629bfce53d6bbe1", "patch": "@@ -566,7 +566,6 @@ extern \"C\" CDECL rust_task *\n upcall_start_task(rust_task *spawner,\n                   rust_task *task,\n                   uintptr_t exit_task_glue,\n-                  uintptr_t spawnee_abi,\n                   uintptr_t spawnee_fn,\n                   size_t callsz) {\n     LOG_UPCALL_ENTRY(spawner);\n@@ -631,7 +630,6 @@ extern \"C\" CDECL maybe_proxy<rust_task> *\n upcall_start_thread(rust_task *task,\n                     rust_proxy<rust_task> *child_task_proxy,\n                     uintptr_t exit_task_glue,\n-                    uintptr_t spawnee_abi,\n                     uintptr_t spawnee_fn,\n                     size_t callsz) {\n     LOG_UPCALL_ENTRY(task);"}]}