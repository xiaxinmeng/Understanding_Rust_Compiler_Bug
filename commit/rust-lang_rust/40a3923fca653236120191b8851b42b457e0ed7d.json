{"sha": "40a3923fca653236120191b8851b42b457e0ed7d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwYTM5MjNmY2E2NTMyMzYxMjAxOTFiODg1MWI0MmI0NTdlMGVkN2Q=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-05-24T23:29:46Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-05-24T23:29:46Z"}, "message": "Dead code.", "tree": {"sha": "2fbd649ecd361fc71d196a0ce9ee890fa6c0a990", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2fbd649ecd361fc71d196a0ce9ee890fa6c0a990"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/40a3923fca653236120191b8851b42b457e0ed7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/40a3923fca653236120191b8851b42b457e0ed7d", "html_url": "https://github.com/rust-lang/rust/commit/40a3923fca653236120191b8851b42b457e0ed7d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/40a3923fca653236120191b8851b42b457e0ed7d/comments", "author": null, "committer": null, "parents": [{"sha": "395940f7e396fea4507563f34c6e381e9d0c1a77", "url": "https://api.github.com/repos/rust-lang/rust/commits/395940f7e396fea4507563f34c6e381e9d0c1a77", "html_url": "https://github.com/rust-lang/rust/commit/395940f7e396fea4507563f34c6e381e9d0c1a77"}], "stats": {"total": 43, "additions": 0, "deletions": 43}, "files": [{"sha": "f1766e50140dc82945023089aa1a5d95b11ff545", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 0, "deletions": 42, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/40a3923fca653236120191b8851b42b457e0ed7d/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/40a3923fca653236120191b8851b42b457e0ed7d/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=40a3923fca653236120191b8851b42b457e0ed7d", "patch": "@@ -448,48 +448,6 @@ fetch_c_sym(rust_task *task,\n     return cache->get_c_sym(c_sym_num, l, symbol);\n }\n \n-extern \"C\" CDECL uintptr_t\n-upcall_require_rust_sym(rust_task *task,\n-                        rust_crate const *curr_crate,\n-                        size_t lib_num, // # of lib\n-                        size_t c_sym_num, // # of C sym \"rust_crate\" in lib\n-                        size_t rust_sym_num, // # of rust sym\n-                        char const *library,\n-                        char const **path) {\n-    LOG_UPCALL_ENTRY(task);\n-    rust_dom *dom = task->dom;\n-\n-    LOG(task, cache, \"upcall require rust sym: lib #%\" PRIdPTR\n-        \" = %s, c_sym #%\" PRIdPTR\n-        \", rust_sym #%\" PRIdPTR\n-        \", curr_crate = 0x%\" PRIxPTR, lib_num, library, c_sym_num,\n-        rust_sym_num, curr_crate);\n-    for (char const **c = crate_rel(curr_crate, path); *c; ++c) {\n-        LOG(task, upcall, \" + %s\", crate_rel(curr_crate, *c));\n-    }\n-\n-    LOG(task, cache, \"require C symbol 'rust_crate' from lib #%\" PRIdPTR,\n-        lib_num);\n-    rust_crate_cache::c_sym *c =\n-            fetch_c_sym(task, curr_crate, lib_num, c_sym_num, library,\n-                        \"rust_crate\");\n-\n-    LOG(task, cache, \"require rust symbol inside crate\");\n-    rust_crate_cache::rust_sym *s = task->cache->get_rust_sym(rust_sym_num,\n-                                                              dom,\n-                                                              curr_crate, c,\n-                                                              path);\n-\n-    uintptr_t addr = s->get_val();\n-    if (addr) {\n-        LOG(task, cache, \"found-or-cached addr: 0x%\" PRIxPTR, addr);\n-    } else {\n-        LOG_ERR(task, cache, \"failed to resolve symbol\");\n-        task->fail(7);\n-    }\n-    return addr;\n-}\n-\n extern \"C\" CDECL uintptr_t\n upcall_require_c_sym(rust_task *task,\n                      rust_crate const *curr_crate,"}, {"sha": "5e0ad408c67b7b2d38dc7808afda4bcd8eb30897", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/40a3923fca653236120191b8851b42b457e0ed7d/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/40a3923fca653236120191b8851b42b457e0ed7d/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=40a3923fca653236120191b8851b42b457e0ed7d", "patch": "@@ -62,7 +62,6 @@ upcall_new_thread\n upcall_new_vec\n upcall_recv\n upcall_require_c_sym\n-upcall_require_rust_sym\n upcall_send\n upcall_sleep\n upcall_start_task"}]}