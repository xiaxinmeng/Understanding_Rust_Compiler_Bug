{"sha": "8557a2e18c755ef269aa54b067cfc323e97d9a11", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1NTdhMmUxOGM3NTVlZjI2OWFhNTRiMDY3Y2ZjMzIzZTk3ZDlhMTE=", "commit": {"author": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-06-19T02:00:11Z"}, "committer": {"name": "Jeffrey Seyfried", "email": "jeffrey.seyfried@gmail.com", "date": "2016-06-29T11:06:28Z"}, "message": "Give `ast::ExprKind::Paren` no-op expressions the same node ids as their children.", "tree": {"sha": "b2643fe9bf7cde2c1918642550dc9ebf69fb2c9b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2643fe9bf7cde2c1918642550dc9ebf69fb2c9b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8557a2e18c755ef269aa54b067cfc323e97d9a11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8557a2e18c755ef269aa54b067cfc323e97d9a11", "html_url": "https://github.com/rust-lang/rust/commit/8557a2e18c755ef269aa54b067cfc323e97d9a11", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8557a2e18c755ef269aa54b067cfc323e97d9a11/comments", "author": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jseyfried", "id": 8652869, "node_id": "MDQ6VXNlcjg2NTI4Njk=", "avatar_url": "https://avatars.githubusercontent.com/u/8652869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jseyfried", "html_url": "https://github.com/jseyfried", "followers_url": "https://api.github.com/users/jseyfried/followers", "following_url": "https://api.github.com/users/jseyfried/following{/other_user}", "gists_url": "https://api.github.com/users/jseyfried/gists{/gist_id}", "starred_url": "https://api.github.com/users/jseyfried/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jseyfried/subscriptions", "organizations_url": "https://api.github.com/users/jseyfried/orgs", "repos_url": "https://api.github.com/users/jseyfried/repos", "events_url": "https://api.github.com/users/jseyfried/events{/privacy}", "received_events_url": "https://api.github.com/users/jseyfried/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9d25f8b5936bc5477c8318fa4ddd315a2df55b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/a9d25f8b5936bc5477c8318fa4ddd315a2df55b5", "html_url": "https://github.com/rust-lang/rust/commit/a9d25f8b5936bc5477c8318fa4ddd315a2df55b5"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "ed6f09eed645f7741951542aaeea87665667266c", "filename": "src/libsyntax/fold.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8557a2e18c755ef269aa54b067cfc323e97d9a11/src%2Flibsyntax%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8557a2e18c755ef269aa54b067cfc323e97d9a11/src%2Flibsyntax%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffold.rs?ref=8557a2e18c755ef269aa54b067cfc323e97d9a11", "patch": "@@ -1102,7 +1102,6 @@ pub fn noop_fold_pat<T: Folder>(p: P<Pat>, folder: &mut T) -> P<Pat> {\n \n pub fn noop_fold_expr<T: Folder>(Expr {id, node, span, attrs}: Expr, folder: &mut T) -> Expr {\n     Expr {\n-        id: folder.new_id(id),\n         node: match node {\n             ExprKind::Box(e) => {\n                 ExprKind::Box(folder.fold_expr(e))\n@@ -1270,9 +1269,19 @@ pub fn noop_fold_expr<T: Folder>(Expr {id, node, span, attrs}: Expr, folder: &mu\n                         fields.move_map(|x| folder.fold_field(x)),\n                         maybe_expr.map(|x| folder.fold_expr(x)))\n             },\n-            ExprKind::Paren(ex) => ExprKind::Paren(folder.fold_expr(ex)),\n+            ExprKind::Paren(ex) => {\n+                let sub_expr = folder.fold_expr(ex);\n+                return Expr {\n+                    // Nodes that are equal modulo `Paren` sugar no-ops should have the same ids.\n+                    id: sub_expr.id,\n+                    node: ExprKind::Paren(sub_expr),\n+                    span: folder.new_span(span),\n+                    attrs: fold_attrs(attrs.into(), folder).into(),\n+                };\n+            }\n             ExprKind::Try(ex) => ExprKind::Try(folder.fold_expr(ex)),\n         },\n+        id: folder.new_id(id),\n         span: folder.new_span(span),\n         attrs: fold_attrs(attrs.into(), folder).into(),\n     }"}]}