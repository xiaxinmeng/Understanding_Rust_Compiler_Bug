{"sha": "bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "node_id": "C_kwDOAAsO6NoAKGJkN2U4YjVlZjk2MTdkM2FjN2ZiZDc5NTk2ZWUxNzU0YmVlZjMyMDY", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-25T20:57:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-05-25T20:57:59Z"}, "message": "Rollup merge of #111152 - lukas-code:markdown-parsers-are-hard, r=GuillaumeGomez\n\nupdate `pulldown-cmark` to `0.9.3`\n\nThis PR updates `pulldown-cmark` to version `0.9.3`, which does two main things:\n* Pulls in https://github.com/raphlinus/pulldown-cmark/pull/643 to fix https://github.com/rust-lang/rust/issues/111117\n* Allows parsing strikethrough with single tildes, e.g. `~foo~` -> ~foo~. This matches the [GFM spec](https://github.github.com/gfm/#strikethrough-extension-).\n\nFull changelog: https://github.com/raphlinus/pulldown-cmark/pull/646", "tree": {"sha": "db5387e2b13c64c62b832ccaf811aef8b6d1ff9d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/db5387e2b13c64c62b832ccaf811aef8b6d1ff9d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkb8vXCRBK7hj4Ov3rIwAAq9oIADTp/cHGQevNnc1GfdKWbs1A\npSWjHBbBo3n7p9gMWQc53MYD2JVyNd0Sf0jCywO/XE2qXCD+mo/ZQQypriA2a2c7\nhs923y6qo9qPdh5ITPRo/hCSd4VLT6hWbc4VUS9H9B26Xg8u0FCntBvnSSQ/VgMH\n6GWCTODNj5wPx9hAGD2adg/dUxbwQj/MKULR4gj88epZTTn7CdHuLj+51AoInnfx\n9ODIRuWinj5yIaJeoOFyMLxI+AElqxFhNxVLYzOHoVZItYorXMaAziJWxMCdU20M\nXwa6m0hLlBifBY+fs0RoTdh54Mkjy0tTHrMqu5MIpyTkErg8nc+w+C3Vd+yWMz4=\n=vKEw\n-----END PGP SIGNATURE-----\n", "payload": "tree db5387e2b13c64c62b832ccaf811aef8b6d1ff9d\nparent fb45513126298a32a43be5e19910a60e983a7d5c\nparent c2a446a95ec503436930dba2408a9c36953ba19f\nauthor Michael Goulet <michael@errs.io> 1685048279 -0700\ncommitter GitHub <noreply@github.com> 1685048279 -0700\n\nRollup merge of #111152 - lukas-code:markdown-parsers-are-hard, r=GuillaumeGomez\n\nupdate `pulldown-cmark` to `0.9.3`\n\nThis PR updates `pulldown-cmark` to version `0.9.3`, which does two main things:\n* Pulls in https://github.com/raphlinus/pulldown-cmark/pull/643 to fix https://github.com/rust-lang/rust/issues/111117\n* Allows parsing strikethrough with single tildes, e.g. `~foo~` -> ~foo~. This matches the [GFM spec](https://github.github.com/gfm/#strikethrough-extension-).\n\nFull changelog: https://github.com/raphlinus/pulldown-cmark/pull/646\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "html_url": "https://github.com/rust-lang/rust/commit/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb45513126298a32a43be5e19910a60e983a7d5c", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb45513126298a32a43be5e19910a60e983a7d5c", "html_url": "https://github.com/rust-lang/rust/commit/fb45513126298a32a43be5e19910a60e983a7d5c"}, {"sha": "c2a446a95ec503436930dba2408a9c36953ba19f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2a446a95ec503436930dba2408a9c36953ba19f", "html_url": "https://github.com/rust-lang/rust/commit/c2a446a95ec503436930dba2408a9c36953ba19f"}], "stats": {"total": 57, "additions": 41, "deletions": 16}, "files": [{"sha": "0369442f11cf6b2a9e270ee095dd44e529c7afe9", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -2779,9 +2779,9 @@ dependencies = [\n \n [[package]]\n name = \"pulldown-cmark\"\n-version = \"0.9.2\"\n+version = \"0.9.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2d9cc634bc78768157b5cbfe988ffcd1dcba95cd2b2f03a88316c08c6d00ed63\"\n+checksum = \"77a1a2f1f0a7ecff9c31abbe177637be0e97a0aef46cf8738ece09327985d998\"\n dependencies = [\n  \"bitflags\",\n  \"memchr\","}, {"sha": "46da0aa2853ef1fc10068fa9a57de016bf7d9791", "filename": "compiler/rustc_resolve/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/compiler%2Frustc_resolve%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/compiler%2Frustc_resolve%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2FCargo.toml?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -7,7 +7,7 @@ edition = \"2021\"\n \n [dependencies]\n bitflags = \"1.2.1\"\n-pulldown-cmark = { version = \"0.9.2\", default-features = false }\n+pulldown-cmark = { version = \"0.9.3\", default-features = false }\n rustc_arena = { path = \"../rustc_arena\" }\n rustc_ast = { path = \"../rustc_ast\" }\n rustc_ast_pretty = { path = \"../rustc_ast_pretty\" }"}, {"sha": "1fa9f81447607bd725acaaf71b3070810331a526", "filename": "src/doc/rustdoc/src/how-to-write-documentation.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/src%2Fdoc%2Frustdoc%2Fsrc%2Fhow-to-write-documentation.md", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/src%2Fdoc%2Frustdoc%2Fsrc%2Fhow-to-write-documentation.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustdoc%2Fsrc%2Fhow-to-write-documentation.md?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -165,15 +165,15 @@ extensions:\n ### Strikethrough\n \n Text may be rendered with a horizontal line through the center by wrapping the\n-text with two tilde characters on each side:\n+text with one or two tilde characters on each side:\n \n ```text\n-An example of ~~strikethrough text~~.\n+An example of ~~strikethrough text~~. You can also use ~single tildes~.\n ```\n \n This example will render as:\n \n-> An example of ~~strikethrough text~~.\n+> An example of ~~strikethrough text~~. You can also use ~single tildes~.\n \n This follows the [GitHub Strikethrough extension][strikethrough].\n "}, {"sha": "e99cd1f3d58ff0232f541d0b69b7c89ab45f2fb2", "filename": "tests/rustdoc-ui/unescaped_backticks.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc-ui%2Funescaped_backticks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc-ui%2Funescaped_backticks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-ui%2Funescaped_backticks.rs?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -340,3 +340,15 @@ id! {\n     /// level changes.\n     pub mod tracing_macro {}\n }\n+\n+/// Regression test for <https://github.com/rust-lang/rust/issues/111117>\n+pub mod trillium_server_common {\n+    /// One-indexed, because the first CloneCounter is included. If you don't\n+    /// want the original to count, construct a [``CloneCounterObserver`]\n+    /// instead and use [`CloneCounterObserver::counter`] to increment.\n+    //~^ ERROR unescaped backtick\n+    pub struct CloneCounter;\n+\n+    /// This is used by the above.\n+    pub struct CloneCounterObserver;\n+}"}, {"sha": "bf1f18889c40f7af9321bc53ca2cd01c0d492d1f", "filename": "tests/rustdoc-ui/unescaped_backticks.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc-ui%2Funescaped_backticks.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc-ui%2Funescaped_backticks.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-ui%2Funescaped_backticks.stderr?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -341,6 +341,18 @@ LL | |     /// level changes.\n             change: [`rebuild_interest_cache`][rebuild] is called after the value of the max\n            to this: [`rebuild_interest_cache\\`][rebuild] is called after the value of the max\n \n+error: unescaped backtick\n+  --> $DIR/unescaped_backticks.rs:348:56\n+   |\n+LL |     /// instead and use [`CloneCounterObserver::counter`] to increment.\n+   |                                                        ^\n+   |\n+   = help: the opening or closing backtick of an inline code may be missing\n+help: if you meant to use a literal backtick, escape it\n+   |\n+LL |     /// instead and use [`CloneCounterObserver::counter\\`] to increment.\n+   |                                                        +\n+\n error: unescaped backtick\n   --> $DIR/unescaped_backticks.rs:11:5\n    |\n@@ -955,5 +967,5 @@ help: if you meant to use a literal backtick, escape it\n LL | /// | table`( | )\\`body |\n    |                  +\n \n-error: aborting due to 63 previous errors\n+error: aborting due to 64 previous errors\n "}, {"sha": "cb6cd0e7ba64deed2a08c718925435c1c579c81d", "filename": "tests/rustdoc/strikethrough-in-summary.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fb45513126298a32a43be5e19910a60e983a7d5c/tests%2Frustdoc%2Fstrikethrough-in-summary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb45513126298a32a43be5e19910a60e983a7d5c/tests%2Frustdoc%2Fstrikethrough-in-summary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fstrikethrough-in-summary.rs?ref=fb45513126298a32a43be5e19910a60e983a7d5c", "patch": "@@ -1,6 +0,0 @@\n-#![crate_name = \"foo\"]\n-\n-// @has foo/index.html '//del' 'strike'\n-\n-/// ~~strike~~\n-pub fn strike() {}"}, {"sha": "58162153b9e49a63412fe5666bb62107ff4fb697", "filename": "tests/rustdoc/test-strikethrough.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc%2Ftest-strikethrough.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd7e8b5ef9617d3ac7fbd79596ee1754beef3206/tests%2Frustdoc%2Ftest-strikethrough.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Ftest-strikethrough.rs?ref=bd7e8b5ef9617d3ac7fbd79596ee1754beef3206", "patch": "@@ -1,6 +1,13 @@\n #![crate_name = \"foo\"]\n \n-// @has foo/fn.f.html\n-// @has - //del \"Y\"\n-/// ~~Y~~\n+// Test that strikethrough works with single and double tildes and that it shows up on\n+// the item's dedicated page as well as the parent module's summary of items.\n+\n+// @has foo/index.html //del 'strike'\n+// @has foo/index.html //del 'through'\n+\n+// @has foo/fn.f.html //del 'strike'\n+// @has foo/fn.f.html //del 'through'\n+\n+/// ~~strike~~ ~through~\n pub fn f() {}"}]}