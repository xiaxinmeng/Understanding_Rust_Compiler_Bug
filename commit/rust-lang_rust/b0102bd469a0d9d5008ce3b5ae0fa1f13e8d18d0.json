{"sha": "b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "node_id": "C_kwDOAAsO6NoAKGIwMTAyYmQ0NjlhMGQ5ZDUwMDhjZTNiNWFlMGZhMWYxM2U4ZDE4ZDA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-28T19:18:50Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-28T19:18:50Z"}, "message": "Auto merge of #12652 - lnicola:openvsx, r=lnicola\n\ninternal: Try to publish releases to OpenVSX", "tree": {"sha": "0321f6a2a71bed9c56c5ba2c0f6ee6fa076919b0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0321f6a2a71bed9c56c5ba2c0f6ee6fa076919b0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "html_url": "https://github.com/rust-lang/rust/commit/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6407727ea234a94b31d9a26e5b2771b4ecfcf9cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/6407727ea234a94b31d9a26e5b2771b4ecfcf9cd", "html_url": "https://github.com/rust-lang/rust/commit/6407727ea234a94b31d9a26e5b2771b4ecfcf9cd"}, {"sha": "21642a2d85d356d601ee543ff0c7b5d8fb682267", "url": "https://api.github.com/repos/rust-lang/rust/commits/21642a2d85d356d601ee543ff0c7b5d8fb682267", "html_url": "https://github.com/rust-lang/rust/commit/21642a2d85d356d601ee543ff0c7b5d8fb682267"}], "stats": {"total": 127, "additions": 125, "deletions": 2}, "files": [{"sha": "9205d86f93dcd886f2d6b3f4db81e80578362651", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "patch": "@@ -246,13 +246,24 @@ jobs:\n       - run: npm ci\n         working-directory: ./editors/code\n \n-      - name: Publish Extension (release)\n+      - name: Publish Extension (Code Marketplace, release)\n         if: github.ref == 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n         working-directory: ./editors/code\n         # token from https://dev.azure.com/rust-analyzer/\n         run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix\n \n-      - name: Publish Extension (nightly)\n+      - name: Publish Extension (OpenVSX, release)\n+        if: github.ref == 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n+        working-directory: ./editors/code\n+        # token from https://dev.azure.com/rust-analyzer/\n+        run: npx ovsx publish --pat ${{ secrets.OPENVSX_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix\n+\n+      - name: Publish Extension (Code Marketplace, nightly)\n         if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n         working-directory: ./editors/code\n         run: npx vsce publish --pat ${{ secrets.MARKETPLACE_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix --pre-release\n+\n+      - name: Publish Extension (OpenVSX, nightly)\n+        if: github.ref != 'refs/heads/release' && (github.repository == 'rust-analyzer/rust-analyzer' || github.repository == 'rust-lang/rust-analyzer')\n+        working-directory: ./editors/code\n+        run: npx ovsx publish --pat ${{ secrets.OPENVSX_TOKEN }} --packagePath ../../dist/rust-analyzer-*.vsix --pre-release"}, {"sha": "86dad6bb371ef4eed8f9a955a9a029c5ba34906c", "filename": "editors/code/package-lock.json", "status": "modified", "additions": 111, "deletions": 0, "changes": 111, "blob_url": "https://github.com/rust-lang/rust/blob/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/editors%2Fcode%2Fpackage-lock.json", "raw_url": "https://github.com/rust-lang/rust/raw/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/editors%2Fcode%2Fpackage-lock.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage-lock.json?ref=b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "patch": "@@ -23,6 +23,7 @@\n                 \"esbuild\": \"^0.14.27\",\n                 \"eslint\": \"^8.11.0\",\n                 \"eslint-config-prettier\": \"^8.5.0\",\n+                \"ovsx\": \"^0.5.1\",\n                 \"prettier\": \"^2.6.2\",\n                 \"tslib\": \"^2.3.0\",\n                 \"typescript\": \"^4.6.3\",\n@@ -705,6 +706,12 @@\n             \"integrity\": \"sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr/b0YL8/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==\",\n             \"dev\": true\n         },\n+        \"node_modules/ci-info\": {\n+            \"version\": \"2.0.0\",\n+            \"resolved\": \"https://registry.npmjs.org/ci-info/-/ci-info-2.0.0.tgz\",\n+            \"integrity\": \"sha512-5tK7EtrZ0N+OLFMthtqOj4fI2Jeb88C4CAZPu25LDVUgXJ0A3Js4PMGqrn0JU1W0Mh1/Z8wZzYPxqUrXeBboCQ==\",\n+            \"dev\": true\n+        },\n         \"node_modules/cliui\": {\n             \"version\": \"7.0.4\",\n             \"resolved\": \"https://registry.npmjs.org/cliui/-/cliui-7.0.4.tgz\",\n@@ -2210,6 +2217,26 @@\n             \"integrity\": \"sha512-WIWGi2L3DyTUvUrwRKgGi9TwxQMUEqPOPQBVi71R96jZXJdFskXEmf54BoZaS1kknGODoIGASGEzBUYdyMCBJg==\",\n             \"dev\": true\n         },\n+        \"node_modules/follow-redirects\": {\n+            \"version\": \"1.15.1\",\n+            \"resolved\": \"https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.1.tgz\",\n+            \"integrity\": \"sha512-yLAMQs+k0b2m7cVxpS1VKJVvoz7SS9Td1zss3XRwXj+ZDH00RJgnuLx7E44wx02kQLrdM3aOOy+FpzS7+8OizA==\",\n+            \"dev\": true,\n+            \"funding\": [\n+                {\n+                    \"type\": \"individual\",\n+                    \"url\": \"https://github.com/sponsors/RubenVerborgh\"\n+                }\n+            ],\n+            \"engines\": {\n+                \"node\": \">=4.0\"\n+            },\n+            \"peerDependenciesMeta\": {\n+                \"debug\": {\n+                    \"optional\": true\n+                }\n+            }\n+        },\n         \"node_modules/fs-constants\": {\n             \"version\": \"1.0.0\",\n             \"resolved\": \"https://registry.npmjs.org/fs-constants/-/fs-constants-1.0.0.tgz\",\n@@ -2591,6 +2618,18 @@\n                 \"node\": \">=12\"\n             }\n         },\n+        \"node_modules/is-ci\": {\n+            \"version\": \"2.0.0\",\n+            \"resolved\": \"https://registry.npmjs.org/is-ci/-/is-ci-2.0.0.tgz\",\n+            \"integrity\": \"sha512-YfJT7rkpQB0updsdHLGWrvhBJfcfzNNawYDNIyQXJz0IViGf75O8EBPKSdvw2rF+LGCsX4FZ8tcr3b19LcZq4w==\",\n+            \"dev\": true,\n+            \"dependencies\": {\n+                \"ci-info\": \"^2.0.0\"\n+            },\n+            \"bin\": {\n+                \"is-ci\": \"bin.js\"\n+            }\n+        },\n         \"node_modules/is-extglob\": {\n             \"version\": \"2.1.1\",\n             \"resolved\": \"https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz\",\n@@ -2965,6 +3004,35 @@\n                 \"node\": \">= 0.8.0\"\n             }\n         },\n+        \"node_modules/ovsx\": {\n+            \"version\": \"0.5.1\",\n+            \"resolved\": \"https://registry.npmjs.org/ovsx/-/ovsx-0.5.1.tgz\",\n+            \"integrity\": \"sha512-3OWq0l7DuVHi2bd2aQe5+QVQlFIqvrcw3/2vGXL404L6Tr+R4QHtzfnYYghv8CCa85xJHjU0RhcaC7pyXkAUbg==\",\n+            \"dev\": true,\n+            \"dependencies\": {\n+                \"commander\": \"^6.1.0\",\n+                \"follow-redirects\": \"^1.14.6\",\n+                \"is-ci\": \"^2.0.0\",\n+                \"leven\": \"^3.1.0\",\n+                \"tmp\": \"^0.2.1\",\n+                \"vsce\": \"^2.6.3\"\n+            },\n+            \"bin\": {\n+                \"ovsx\": \"lib/ovsx\"\n+            },\n+            \"engines\": {\n+                \"node\": \">= 14\"\n+            }\n+        },\n+        \"node_modules/ovsx/node_modules/commander\": {\n+            \"version\": \"6.2.1\",\n+            \"resolved\": \"https://registry.npmjs.org/commander/-/commander-6.2.1.tgz\",\n+            \"integrity\": \"sha512-U7VdrJFnJgo4xjrHpTzu0yrHPGImdsmD95ZlgYSEajAn2JKzDhDTPG9kBTefmObL2w/ngeZnilk+OV9CG3d7UA==\",\n+            \"dev\": true,\n+            \"engines\": {\n+                \"node\": \">= 6\"\n+            }\n+        },\n         \"node_modules/parent-module\": {\n             \"version\": \"1.0.1\",\n             \"resolved\": \"https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz\",\n@@ -4553,6 +4621,12 @@\n             \"integrity\": \"sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr/b0YL8/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==\",\n             \"dev\": true\n         },\n+        \"ci-info\": {\n+            \"version\": \"2.0.0\",\n+            \"resolved\": \"https://registry.npmjs.org/ci-info/-/ci-info-2.0.0.tgz\",\n+            \"integrity\": \"sha512-5tK7EtrZ0N+OLFMthtqOj4fI2Jeb88C4CAZPu25LDVUgXJ0A3Js4PMGqrn0JU1W0Mh1/Z8wZzYPxqUrXeBboCQ==\",\n+            \"dev\": true\n+        },\n         \"cliui\": {\n             \"version\": \"7.0.4\",\n             \"resolved\": \"https://registry.npmjs.org/cliui/-/cliui-7.0.4.tgz\",\n@@ -5603,6 +5677,12 @@\n             \"integrity\": \"sha512-WIWGi2L3DyTUvUrwRKgGi9TwxQMUEqPOPQBVi71R96jZXJdFskXEmf54BoZaS1kknGODoIGASGEzBUYdyMCBJg==\",\n             \"dev\": true\n         },\n+        \"follow-redirects\": {\n+            \"version\": \"1.15.1\",\n+            \"resolved\": \"https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.1.tgz\",\n+            \"integrity\": \"sha512-yLAMQs+k0b2m7cVxpS1VKJVvoz7SS9Td1zss3XRwXj+ZDH00RJgnuLx7E44wx02kQLrdM3aOOy+FpzS7+8OizA==\",\n+            \"dev\": true\n+        },\n         \"fs-constants\": {\n             \"version\": \"1.0.0\",\n             \"resolved\": \"https://registry.npmjs.org/fs-constants/-/fs-constants-1.0.0.tgz\",\n@@ -5889,6 +5969,15 @@\n             \"resolved\": \"https://registry.npmjs.org/internmap/-/internmap-2.0.3.tgz\",\n             \"integrity\": \"sha512-5Hh7Y1wQbvY5ooGgPbDaL5iYLAPzMTUrjMulskHLH6wnv/A+1q5rgEaiuqEjB+oxGXIVZs1FF+R/KPN3ZSQYYg==\"\n         },\n+        \"is-ci\": {\n+            \"version\": \"2.0.0\",\n+            \"resolved\": \"https://registry.npmjs.org/is-ci/-/is-ci-2.0.0.tgz\",\n+            \"integrity\": \"sha512-YfJT7rkpQB0updsdHLGWrvhBJfcfzNNawYDNIyQXJz0IViGf75O8EBPKSdvw2rF+LGCsX4FZ8tcr3b19LcZq4w==\",\n+            \"dev\": true,\n+            \"requires\": {\n+                \"ci-info\": \"^2.0.0\"\n+            }\n+        },\n         \"is-extglob\": {\n             \"version\": \"2.1.1\",\n             \"resolved\": \"https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz\",\n@@ -6192,6 +6281,28 @@\n                 \"word-wrap\": \"^1.2.3\"\n             }\n         },\n+        \"ovsx\": {\n+            \"version\": \"0.5.1\",\n+            \"resolved\": \"https://registry.npmjs.org/ovsx/-/ovsx-0.5.1.tgz\",\n+            \"integrity\": \"sha512-3OWq0l7DuVHi2bd2aQe5+QVQlFIqvrcw3/2vGXL404L6Tr+R4QHtzfnYYghv8CCa85xJHjU0RhcaC7pyXkAUbg==\",\n+            \"dev\": true,\n+            \"requires\": {\n+                \"commander\": \"^6.1.0\",\n+                \"follow-redirects\": \"^1.14.6\",\n+                \"is-ci\": \"^2.0.0\",\n+                \"leven\": \"^3.1.0\",\n+                \"tmp\": \"^0.2.1\",\n+                \"vsce\": \"^2.6.3\"\n+            },\n+            \"dependencies\": {\n+                \"commander\": {\n+                    \"version\": \"6.2.1\",\n+                    \"resolved\": \"https://registry.npmjs.org/commander/-/commander-6.2.1.tgz\",\n+                    \"integrity\": \"sha512-U7VdrJFnJgo4xjrHpTzu0yrHPGImdsmD95ZlgYSEajAn2JKzDhDTPG9kBTefmObL2w/ngeZnilk+OV9CG3d7UA==\",\n+                    \"dev\": true\n+                }\n+            }\n+        },\n         \"parent-module\": {\n             \"version\": \"1.0.1\",\n             \"resolved\": \"https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz\","}, {"sha": "ac7dcfac64f8121e65daa8a5adcd461bb91c2d33", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=b0102bd469a0d9d5008ce3b5ae0fa1f13e8d18d0", "patch": "@@ -49,6 +49,7 @@\n         \"esbuild\": \"^0.14.27\",\n         \"eslint\": \"^8.11.0\",\n         \"eslint-config-prettier\": \"^8.5.0\",\n+        \"ovsx\": \"^0.5.1\",\n         \"prettier\": \"^2.6.2\",\n         \"tslib\": \"^2.3.0\",\n         \"typescript\": \"^4.6.3\","}]}