{"sha": "d579665bd1e1649c9597cdaf3da3c2ca7f54e793", "node_id": "C_kwDOAAsO6NoAKGQ1Nzk2NjViZDFlMTY0OWM5NTk3Y2RhZjNkYTNjMmNhN2Y1NGU3OTM", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-04-28T17:46:33Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-04-28T17:53:12Z"}, "message": "Yield the thread when waiting to delete a file", "tree": {"sha": "33ecdb25c0dfcc0bc2ad2252afd8a0a3df2d86e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/33ecdb25c0dfcc0bc2ad2252afd8a0a3df2d86e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d579665bd1e1649c9597cdaf3da3c2ca7f54e793", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmJq1IkACgkQcTRy8vRW\nJ95w4hAAkcNth4dCEazUEaawvuYgOYKdigpPmpokeldmiq4CvnexRccg451a21pR\n3x1VZ5puVyYvKThjaR5WFcLxN9PGINr4uCbV1U7EWiMTcO+e2MqTMuJxEQ4TDzaI\ncxXMnS/FxPW0lR3Ayk7jhZLjVimYPYqwMCYwDojBgYoxVaKeWkzJT4uxhx4oJZpN\nw91T+xA/2xgYG2VY62uKENt63goYdlc2QqdM+KoaEmtfz/eLsLOlalHVhabG8vgp\nk9gjVJqy+XHKjcN04WMw2GOsvZzyNN5l/A5f68+ARIubKukhRnd+W+IBfrSWdiD3\nAuEqAqR02z21MD50WGvlicanJYf8zmwZDRfEhvQgOaOitkzuS7IgIBpUhuyQzrN+\nRL6SYLgS3iW8RUyilPXSyvzed01XwXAt+3LA/MGIMzlY6EyHNYasWZO4DwnudApW\ntZ65TqtbW5V4CKlth0pOOwNR+QHBRykiizd9f5rprmsDqTS0Mn2+HGojPhrgaWB2\nBPFf9EV3veCmGVGH9AYpdNFRjlmVFGblOz5h5mMmOIjxibE+I7JujLxjkjBuyL0I\nKEXBsukUVj75QpxaxqfmdG+aL5axhZSRqrvBLRlxdfxfIZKl1JsGXL6nOd5ydNGc\n0xzRs/aoO54SRMQ6yJJlITpfFVoPCiaDyB1PkolIEbrwUkixUhA=\n=mKvV\n-----END PGP SIGNATURE-----", "payload": "tree 33ecdb25c0dfcc0bc2ad2252afd8a0a3df2d86e0\nparent 8dc4696b3b8e048ddbc4a25953cccb567b27570c\nauthor Chris Denton <christophersdenton@gmail.com> 1651167993 +0100\ncommitter Chris Denton <christophersdenton@gmail.com> 1651168392 +0100\n\nYield the thread when waiting to delete a file\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d579665bd1e1649c9597cdaf3da3c2ca7f54e793", "html_url": "https://github.com/rust-lang/rust/commit/d579665bd1e1649c9597cdaf3da3c2ca7f54e793", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d579665bd1e1649c9597cdaf3da3c2ca7f54e793/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8dc4696b3b8e048ddbc4a25953cccb567b27570c", "url": "https://api.github.com/repos/rust-lang/rust/commits/8dc4696b3b8e048ddbc4a25953cccb567b27570c", "html_url": "https://github.com/rust-lang/rust/commit/8dc4696b3b8e048ddbc4a25953cccb567b27570c"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "5e055307c291eecb167da44064635eaf7d201f89", "filename": "library/std/src/sys/windows/fs.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d579665bd1e1649c9597cdaf3da3c2ca7f54e793/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d579665bd1e1649c9597cdaf3da3c2ca7f54e793/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs?ref=d579665bd1e1649c9597cdaf3da3c2ca7f54e793", "patch": "@@ -14,6 +14,7 @@ use crate::sys::handle::Handle;\n use crate::sys::time::SystemTime;\n use crate::sys::{c, cvt};\n use crate::sys_common::{AsInner, FromInner, IntoInner};\n+use crate::thread;\n \n use super::path::maybe_verbatim;\n use super::to_u16s;\n@@ -1059,6 +1060,7 @@ fn remove_dir_all_iterative(f: &File, delete: fn(&File) -> io::Result<()>) -> io\n                         // Otherwise return the error.\n                         Err(e) => return Err(e),\n                     }\n+                    thread::yield_now();\n                 }\n             }\n         }\n@@ -1072,6 +1074,7 @@ fn remove_dir_all_iterative(f: &File, delete: fn(&File) -> io::Result<()>) -> io\n                         if i == MAX_RETRIES || e.kind() != io::ErrorKind::DirectoryNotEmpty {\n                             return Err(e);\n                         }\n+                        thread::yield_now();\n                     } else {\n                         break;\n                     }"}]}