{"sha": "8e214cbc0640c0a57db0f277d600da248135111c", "node_id": "C_kwDOAAsO6NoAKDhlMjE0Y2JjMDY0MGMwYTU3ZGIwZjI3N2Q2MDBkYTI0ODEzNTExMWM", "commit": {"author": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2023-03-30T13:44:46Z"}, "committer": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2023-03-30T13:44:46Z"}, "message": "fix `sysroot-crates-are-unstable` for cross-compilation", "tree": {"sha": "fc7a90ca974461c646d753b57462f0fac0d40cc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc7a90ca974461c646d753b57462f0fac0d40cc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e214cbc0640c0a57db0f277d600da248135111c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e214cbc0640c0a57db0f277d600da248135111c", "html_url": "https://github.com/rust-lang/rust/commit/8e214cbc0640c0a57db0f277d600da248135111c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e214cbc0640c0a57db0f277d600da248135111c/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26e1ce739400df9e989fa64c0138aaf13ced8c60", "url": "https://api.github.com/repos/rust-lang/rust/commits/26e1ce739400df9e989fa64c0138aaf13ced8c60", "html_url": "https://github.com/rust-lang/rust/commit/26e1ce739400df9e989fa64c0138aaf13ced8c60"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "cab4faa4e645aa2a65e64b7003332ce5544a6f91", "filename": "tests/run-make/sysroot-crates-are-unstable/test.py", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8e214cbc0640c0a57db0f277d600da248135111c/tests%2Frun-make%2Fsysroot-crates-are-unstable%2Ftest.py", "raw_url": "https://github.com/rust-lang/rust/raw/8e214cbc0640c0a57db0f277d600da248135111c/tests%2Frun-make%2Fsysroot-crates-are-unstable%2Ftest.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fsysroot-crates-are-unstable%2Ftest.py?ref=8e214cbc0640c0a57db0f277d600da248135111c", "patch": "@@ -43,6 +43,7 @@ def check_lib(lib):\n         return True\n     print('verifying if {} is an unstable crate'.format(lib['name']))\n     stdout, stderr = exec_command([os.environ['RUSTC'], '-', '--crate-type', 'rlib',\n+                                   '--target', os.environ['TARGET'],\n                                    '--extern', '{}={}'.format(lib['name'], lib['path'])],\n                                   to_input=('extern crate {};'.format(lib['name'])).encode('utf-8'))\n     if not 'use of unstable library feature' in '{}{}'.format(stdout, stderr):"}]}