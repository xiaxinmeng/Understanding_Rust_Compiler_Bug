{"sha": "6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiZTI4NTdhNmNjNTUxZjYzY2Q3OWQ5ZDU5MzIyZmJiMmNlOTEwM2Q=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-08-10T20:19:25Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-08-11T14:36:46Z"}, "message": "Replace Arc with Rc around external_traits", "tree": {"sha": "1b51c9289b6c179ce1d29d0e86ce157b3cd55fcb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1b51c9289b6c179ce1d29d0e86ce157b3cd55fcb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "html_url": "https://github.com/rust-lang/rust/commit/6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6be2857a6cc551f63cd79d9d59322fbb2ce9103d/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c57481001ea81665b1ca23368b710a0435d28653", "url": "https://api.github.com/repos/rust-lang/rust/commits/c57481001ea81665b1ca23368b710a0435d28653", "html_url": "https://github.com/rust-lang/rust/commit/c57481001ea81665b1ca23368b710a0435d28653"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "af4fe62bcbc31ddc0afc2d4c5282286d7fe5189e", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6be2857a6cc551f63cd79d9d59322fbb2ce9103d/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6be2857a6cc551f63cd79d9d59322fbb2ce9103d/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "patch": "@@ -131,7 +131,7 @@ pub struct Crate {\n     pub primitives: Vec<(DefId, PrimitiveType, Attributes)>,\n     // These are later on moved into `CACHEKEY`, leaving the map empty.\n     // Only here so that they can be filtered through the rustdoc passes.\n-    pub external_traits: Arc<RefCell<FxHashMap<DefId, Trait>>>,\n+    pub external_traits: Rc<RefCell<FxHashMap<DefId, Trait>>>,\n     pub masked_crates: FxHashSet<CrateNum>,\n }\n "}, {"sha": "a14ddc706d5d1cd9b46c198c18063bc654b7aed0", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6be2857a6cc551f63cd79d9d59322fbb2ce9103d/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6be2857a6cc551f63cd79d9d59322fbb2ce9103d/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=6be2857a6cc551f63cd79d9d59322fbb2ce9103d", "patch": "@@ -26,7 +26,6 @@ use errors::emitter::{Emitter, EmitterWriter};\n use std::cell::RefCell;\n use std::mem;\n use rustc_data_structures::sync::{self, Lrc};\n-use std::sync::Arc;\n use std::rc::Rc;\n \n use crate::config::{Options as RustdocOptions, RenderOptions};\n@@ -49,7 +48,7 @@ pub struct DocContext<'tcx> {\n     /// Later on moved into `html::render::CACHE_KEY`\n     pub renderinfo: RefCell<RenderInfo>,\n     /// Later on moved through `clean::Crate` into `html::render::CACHE_KEY`\n-    pub external_traits: Arc<RefCell<FxHashMap<DefId, clean::Trait>>>,\n+    pub external_traits: Rc<RefCell<FxHashMap<DefId, clean::Trait>>>,\n     /// Used while populating `external_traits` to ensure we don't process the same trait twice at\n     /// the same time.\n     pub active_extern_traits: RefCell<Vec<DefId>>,"}]}