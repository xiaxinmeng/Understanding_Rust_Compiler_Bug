{"sha": "43bcc71d074a10d9186e27f9bf21b9dafa815bf5", "node_id": "C_kwDOAAsO6NoAKDQzYmNjNzFkMDc0YTEwZDkxODZlMjdmOWJmMjFiOWRhZmE4MTViZjU", "commit": {"author": {"name": "kxxt", "email": "rsworktech@outlook.com", "date": "2022-09-21T12:51:03Z"}, "committer": {"name": "kxxt", "email": "rsworktech@outlook.com", "date": "2022-09-22T00:47:41Z"}, "message": "refactor: use grep -E/-F instead of fgrep/egrep", "tree": {"sha": "a96f064a499986b73ead8ce9144c573f8ba3beaf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a96f064a499986b73ead8ce9144c573f8ba3beaf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/43bcc71d074a10d9186e27f9bf21b9dafa815bf5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEKJZw+Rw2NfChdCRFbzuY1C/GydgFAmMrsLIACgkQbzuY1C/G\nydhIzA/9G+Z0u+BHow0qnif5lG26nAv70JJNgOlVaNgtrRV0kjeo/MdNRPDZhdW0\nOlqA4jYjkIsIaNRpk/yrMi60hTnmvOlomP8LJnjz3iWbqtr1qGEqEzrP6lB1JXvh\n/oG0lKPZ+dtl07U9IV3t9/EHGXe2PJta5goPdJlJj0PrjzKIN4c4whHRuJsYuMad\nCTcQ+LSnT4kRV6lcTy384hvhqoMS0itacu82gNdkNTJ5Ixr00tHwG0+P1Gwbt3zN\ntuJi60ZuCb1b2TIlhm698xYDEN892225qu1qRzj02sD/zQ9Wmfain6aOVzQJxqfM\nXvR6+sgJeF1GUz8Z6ehyqNk1xh9VoJCY7lLjlY+x03lZis1cJ4ADdfhcFNCqjgVr\n9yCh8BZ8TZWJ7gME92uw2pcV1nJQOAmXPoyG9YEORPZymG0I8SBOqkC8B/rJo3wG\nLfbCx0dzV7a+XVkiir1WduWveJCYrbziWn6vq6zZnp1hqS4jl7vamM1C6qNa6MBz\nA/uEgLb+kRQBaEwy6nRevAwRitTRdZfDMCZPLCgd0bB8J/l+Uotlz4CtTMpOr0/o\ng5xxSDaINJlCtsSrRxT83hOjKOoNUPmJamATkw9/sY2TPtUV1U/yFPnB90oKXJfS\nXJRtirBVGMN+lcPmLv7NrcDryZHrPCZZR2VaYwYPf7vKf0MX2M0=\n=o2Rb\n-----END PGP SIGNATURE-----", "payload": "tree a96f064a499986b73ead8ce9144c573f8ba3beaf\nparent 1de00d1ac5247a02184ef7ad044f6521ade7e0cc\nauthor kxxt <rsworktech@outlook.com> 1663764663 +0800\ncommitter kxxt <rsworktech@outlook.com> 1663807661 +0800\n\nrefactor: use grep -E/-F instead of fgrep/egrep\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/43bcc71d074a10d9186e27f9bf21b9dafa815bf5", "html_url": "https://github.com/rust-lang/rust/commit/43bcc71d074a10d9186e27f9bf21b9dafa815bf5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/43bcc71d074a10d9186e27f9bf21b9dafa815bf5/comments", "author": {"login": "kxxt", "id": 18085551, "node_id": "MDQ6VXNlcjE4MDg1NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/18085551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kxxt", "html_url": "https://github.com/kxxt", "followers_url": "https://api.github.com/users/kxxt/followers", "following_url": "https://api.github.com/users/kxxt/following{/other_user}", "gists_url": "https://api.github.com/users/kxxt/gists{/gist_id}", "starred_url": "https://api.github.com/users/kxxt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kxxt/subscriptions", "organizations_url": "https://api.github.com/users/kxxt/orgs", "repos_url": "https://api.github.com/users/kxxt/repos", "events_url": "https://api.github.com/users/kxxt/events{/privacy}", "received_events_url": "https://api.github.com/users/kxxt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kxxt", "id": 18085551, "node_id": "MDQ6VXNlcjE4MDg1NTUx", "avatar_url": "https://avatars.githubusercontent.com/u/18085551?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kxxt", "html_url": "https://github.com/kxxt", "followers_url": "https://api.github.com/users/kxxt/followers", "following_url": "https://api.github.com/users/kxxt/following{/other_user}", "gists_url": "https://api.github.com/users/kxxt/gists{/gist_id}", "starred_url": "https://api.github.com/users/kxxt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kxxt/subscriptions", "organizations_url": "https://api.github.com/users/kxxt/orgs", "repos_url": "https://api.github.com/users/kxxt/repos", "events_url": "https://api.github.com/users/kxxt/events{/privacy}", "received_events_url": "https://api.github.com/users/kxxt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1de00d1ac5247a02184ef7ad044f6521ade7e0cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/1de00d1ac5247a02184ef7ad044f6521ade7e0cc", "html_url": "https://github.com/rust-lang/rust/commit/1de00d1ac5247a02184ef7ad044f6521ade7e0cc"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "08de25a77783a89efb8fe6084c09abd37a3b7db0", "filename": "src/etc/cat-and-grep.sh", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/43bcc71d074a10d9186e27f9bf21b9dafa815bf5/src%2Fetc%2Fcat-and-grep.sh", "raw_url": "https://github.com/rust-lang/rust/raw/43bcc71d074a10d9186e27f9bf21b9dafa815bf5/src%2Fetc%2Fcat-and-grep.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcat-and-grep.sh?ref=43bcc71d074a10d9186e27f9bf21b9dafa815bf5", "patch": "@@ -26,7 +26,7 @@ Options:\n     -i      Case insensitive search.\n '\n \n-GREPPER=fgrep\n+GREPPER=grep\n INVERT=0\n GREPFLAGS='q'\n while getopts ':vieh' OPTION; do\n@@ -39,7 +39,7 @@ while getopts ':vieh' OPTION; do\n             GREPFLAGS=\"i$GREPFLAGS\"\n             ;;\n         e)\n-            GREPPER=egrep\n+            GREPFLAGS=\"E$GREPFLAGS\"\n             ;;\n         h)\n             echo \"$USAGE\"\n@@ -51,6 +51,15 @@ while getopts ':vieh' OPTION; do\n     esac\n done\n \n+# an utility function to check if a string contains a substring\n+stringContain() { [ -z \"$1\" ] || { [ -z \"${2##*$1*}\" ] && [ -n \"$2\" ];};}\n+\n+if ! stringContain 'E' \"$GREPFLAGS\"\n+then\n+    # use F flag if there is not an E flag\n+    GREPFLAGS=\"F$GREPFLAGS\"\n+fi\n+\n shift $((OPTIND - 1))\n \n # use gnu version of tool if available (for bsd)"}]}