{"sha": "fa8a202858f3d5edacce4ecd09b0670e9670e817", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhOGEyMDI4NThmM2Q1ZWRhY2NlNGVjZDA5YjA2NzBlOTY3MGU4MTc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-01T09:26:23Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-01T09:26:23Z"}, "message": "auto merge of #10203 : kud1ing/rust/ios, r=alexcrichton\n\nThis is based on the work by @dobkeratops, updated and extended to work for Xcode 5.\r\n\r\nThis gets you going. I will add separate PRs for compilation/linking fixes.\r\nSee also https://github.com/mozilla/rust/wiki/Doc-building-for-ios", "tree": {"sha": "979e96c111f43548297449996512c6c002ed07e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/979e96c111f43548297449996512c6c002ed07e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa8a202858f3d5edacce4ecd09b0670e9670e817", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa8a202858f3d5edacce4ecd09b0670e9670e817", "html_url": "https://github.com/rust-lang/rust/commit/fa8a202858f3d5edacce4ecd09b0670e9670e817", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa8a202858f3d5edacce4ecd09b0670e9670e817/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "986d1f78be2f01496b625a2921adf46015a3a2df", "url": "https://api.github.com/repos/rust-lang/rust/commits/986d1f78be2f01496b625a2921adf46015a3a2df", "html_url": "https://github.com/rust-lang/rust/commit/986d1f78be2f01496b625a2921adf46015a3a2df"}, {"sha": "5864ad9ab1816c204301ffa4cffe39a4248d1d10", "url": "https://api.github.com/repos/rust-lang/rust/commits/5864ad9ab1816c204301ffa4cffe39a4248d1d10", "html_url": "https://github.com/rust-lang/rust/commit/5864ad9ab1816c204301ffa4cffe39a4248d1d10"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "ad4b77598b3093e181bb41245ba2b524adc62b44", "filename": "configure", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/fa8a202858f3d5edacce4ecd09b0670e9670e817/configure", "raw_url": "https://github.com/rust-lang/rust/raw/fa8a202858f3d5edacce4ecd09b0670e9670e817/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=fa8a202858f3d5edacce4ecd09b0670e9670e817", "patch": "@@ -670,6 +670,13 @@ do\n             fi\n             ;;\n \n+        arm-apple-darwin)\n+            if [ $CFG_OSTYPE != apple-darwin ]\n+            then\n+                err \"The iOS target is only supported on Mac OS X\"\n+            fi\n+            ;;\n+\n         *)\n             ;;\n     esac"}, {"sha": "e7c9a10bc63e2e4873a79afceb61bc0acdc97bb8", "filename": "mk/platform.mk", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/fa8a202858f3d5edacce4ecd09b0670e9670e817/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/fa8a202858f3d5edacce4ecd09b0670e9670e817/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=fa8a202858f3d5edacce4ecd09b0670e9670e817", "patch": "@@ -193,6 +193,35 @@ CFG_LDPATH_i686-unknown-linux-gnu :=\n CFG_RUN_i686-unknown-linux-gnu=$(2)\n CFG_RUN_TARG_i686-unknown-linux-gnu=$(call CFG_RUN_i686-unknown-linux-gnu,,$(2))\n \n+# arm-apple-darwin configuration\n+ifeq ($(CFG_OSTYPE),apple-darwin)\n+CFG_IOS_SDK = $(shell xcrun --show-sdk-path -sdk iphoneos)\n+CFG_IOS_FLAGS = -target arm-apple-darwin -isysroot $(CFG_IOS_SDK) -I $(CFG_IOS_SDK)/usr/include -I $(CFG_IOS_SDK)/usr/include/c++/4.2.1 -I /usr/include\n+CC_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang)\n+CXX_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang++)\n+CPP_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos clang++)\n+AR_arm-apple-darwin = $(shell xcrun -find -sdk iphoneos ar)\n+CFG_LIB_NAME_arm-apple-darwin = lib$(1).dylib\n+CFG_LIB_GLOB_arm-apple-darwin = lib$(1)-*.dylib\n+CFG_LIB_DSYM_GLOB_arm-apple-darwin = lib$(1)-*.dylib.dSYM\n+CFG_GCCISH_CFLAGS_arm-apple-darwin := -Wall -Werror -g -fPIC $(CFG_IOS_FLAGS)\n+CFG_GCCISH_CXXFLAGS_arm-apple-darwin := -fno-rtti $(CFG_IOS_FLAGS)\n+CFG_GCCISH_LINK_FLAGS_arm-apple-darwin := -dynamiclib -lpthread -framework CoreServices -Wl,-no_compact_unwind \n+CFG_GCCISH_DEF_FLAG_arm-apple-darwin := -Wl,-exported_symbols_list,\n+CFG_GCCISH_PRE_LIB_FLAGS_arm-apple-darwin :=\n+CFG_GCCISH_POST_LIB_FLAGS_arm-apple-darwin :=\n+CFG_DEF_SUFFIX_arm-apple-darwin := .darwin.def\n+CFG_INSTALL_NAME_arm-apple-darwin = -Wl,-install_name,@rpath/$(1)\n+CFG_LIBUV_LINK_FLAGS_arm-apple-darwin =\n+CFG_EXE_SUFFIX_arm-apple-darwin :=\n+CFG_WINDOWSY_arm-apple-darwin :=\n+CFG_UNIXY_arm-apple-darwin := 1\n+CFG_PATH_MUNGE_arm-apple-darwin := true\n+CFG_LDPATH_arm-apple-darwin :=\n+CFG_RUN_arm-apple-darwin = $(2)\n+CFG_RUN_TARG_arm-apple-darwin = $(call CFG_RUN_arm-apple-darwin,,$(2))\n+endif\n+\n # x86_64-apple-darwin configuration\n CC_x86_64-apple-darwin=$(CC)\n CXX_x86_64-apple-darwin=$(CXX)"}]}