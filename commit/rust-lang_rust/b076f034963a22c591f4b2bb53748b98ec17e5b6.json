{"sha": "b076f034963a22c591f4b2bb53748b98ec17e5b6", "node_id": "C_kwDOAAsO6NoAKGIwNzZmMDM0OTYzYTIyYzU5MWY0YjJiYjUzNzQ4Yjk4ZWMxN2U1YjY", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-10-20T15:51:48Z"}, "committer": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-10-20T15:53:14Z"}, "message": "rustc_hir_typeck: fix clippy", "tree": {"sha": "99b4674b18392ae3a2d28be5abe999af383a026f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/99b4674b18392ae3a2d28be5abe999af383a026f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b076f034963a22c591f4b2bb53748b98ec17e5b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b076f034963a22c591f4b2bb53748b98ec17e5b6", "html_url": "https://github.com/rust-lang/rust/commit/b076f034963a22c591f4b2bb53748b98ec17e5b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b076f034963a22c591f4b2bb53748b98ec17e5b6/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb3ab13a1c997d46ecf4b962a5eabf255e91404a", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb3ab13a1c997d46ecf4b962a5eabf255e91404a", "html_url": "https://github.com/rust-lang/rust/commit/fb3ab13a1c997d46ecf4b962a5eabf255e91404a"}], "stats": {"total": 35, "additions": 17, "deletions": 18}, "files": [{"sha": "c9a8307eba4f29af517fe9f5cdd0e10fd8e274ba", "filename": "src/tools/clippy/clippy_lints/src/escape.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fescape.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -1,7 +1,7 @@\n use clippy_utils::diagnostics::span_lint_hir;\n use rustc_hir::intravisit;\n use rustc_hir::{self, AssocItemKind, Body, FnDecl, HirId, HirIdSet, Impl, ItemKind, Node, Pat, PatKind};\n-use rustc_hir_analysis::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n+use rustc_hir_typeck::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::{LateContext, LateLintPass};\n use rustc_middle::mir::FakeReadCause;\n@@ -178,7 +178,7 @@ impl<'a, 'tcx> Delegate<'tcx> for EscapeDelegate<'a, 'tcx> {\n \n     fn fake_read(\n         &mut self,\n-        _: &rustc_hir_analysis::expr_use_visitor::PlaceWithHirId<'tcx>,\n+        _: &rustc_hir_typeck::expr_use_visitor::PlaceWithHirId<'tcx>,\n         _: FakeReadCause,\n         _: HirId,\n     ) {"}, {"sha": "89ffca8128a9e1bfb8d18706db5a8cbdceb9ed49", "filename": "src/tools/clippy/clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -32,6 +32,7 @@ extern crate rustc_driver;\n extern crate rustc_errors;\n extern crate rustc_hir;\n extern crate rustc_hir_analysis;\n+extern crate rustc_hir_typeck;\n extern crate rustc_hir_pretty;\n extern crate rustc_index;\n extern crate rustc_infer;"}, {"sha": "91b321c4474794711e4c03a91405a97b907fbe18", "filename": "src/tools/clippy/clippy_lints/src/loops/mut_range_bound.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Floops%2Fmut_range_bound.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Floops%2Fmut_range_bound.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Floops%2Fmut_range_bound.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -4,7 +4,7 @@ use clippy_utils::{get_enclosing_block, higher, path_to_local};\n use if_chain::if_chain;\n use rustc_hir::intravisit::{self, Visitor};\n use rustc_hir::{BindingAnnotation, Expr, ExprKind, HirId, Node, PatKind};\n-use rustc_hir_analysis::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n+use rustc_hir_typeck::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::LateContext;\n use rustc_middle::{mir::FakeReadCause, ty};\n@@ -115,7 +115,7 @@ impl<'tcx> Delegate<'tcx> for MutatePairDelegate<'_, 'tcx> {\n \n     fn fake_read(\n         &mut self,\n-        _: &rustc_hir_analysis::expr_use_visitor::PlaceWithHirId<'tcx>,\n+        _: &rustc_hir_typeck::expr_use_visitor::PlaceWithHirId<'tcx>,\n         _: FakeReadCause,\n         _: HirId,\n     ) {"}, {"sha": "5cf88bfc8880d7dbb8b20283c1ffedb5658702d9", "filename": "src/tools/clippy/clippy_lints/src/methods/unnecessary_to_owned.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Funnecessary_to_owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Funnecessary_to_owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fmethods%2Funnecessary_to_owned.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -8,7 +8,7 @@ use clippy_utils::{fn_def_id, get_parent_expr, is_diag_item_method, is_diag_trai\n use clippy_utils::{meets_msrv, msrvs};\n use rustc_errors::Applicability;\n use rustc_hir::{def_id::DefId, BorrowKind, Expr, ExprKind, ItemKind, LangItem, Node};\n-use rustc_hir_analysis::check::{FnCtxt, Inherited};\n+use rustc_hir_typeck::{FnCtxt, Inherited};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::LateContext;\n use rustc_middle::mir::Mutability;"}, {"sha": "9c949a28f44d5dd886b846cbfc18059bf26105c9", "filename": "src/tools/clippy/clippy_lints/src/needless_pass_by_value.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fneedless_pass_by_value.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -12,7 +12,7 @@ use rustc_hir::{\n     BindingAnnotation, Body, FnDecl, GenericArg, HirId, Impl, ItemKind, Mutability, Node, PatKind, QPath, TyKind,\n };\n use rustc_hir::{HirIdMap, HirIdSet};\n-use rustc_hir_analysis::expr_use_visitor as euv;\n+use rustc_hir_typeck::expr_use_visitor as euv;\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::{LateContext, LateLintPass};\n use rustc_middle::mir::FakeReadCause;\n@@ -342,7 +342,7 @@ impl<'tcx> euv::Delegate<'tcx> for MovedVariablesCtxt {\n \n     fn fake_read(\n         &mut self,\n-        _: &rustc_hir_analysis::expr_use_visitor::PlaceWithHirId<'tcx>,\n+        _: &rustc_hir_typeck::expr_use_visitor::PlaceWithHirId<'tcx>,\n         _: FakeReadCause,\n         _: HirId,\n     ) {"}, {"sha": "ee9fd94064c08a53d7d7c4f402ac3db43dd11389", "filename": "src/tools/clippy/clippy_lints/src/operators/assign_op_pattern.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Foperators%2Fassign_op_pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Foperators%2Fassign_op_pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Foperators%2Fassign_op_pattern.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -8,7 +8,7 @@ use core::ops::ControlFlow;\n use if_chain::if_chain;\n use rustc_errors::Applicability;\n use rustc_hir as hir;\n-use rustc_hir_analysis::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n+use rustc_hir_typeck::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n use rustc_lint::LateContext;\n use rustc_middle::mir::FakeReadCause;\n use rustc_middle::ty::BorrowKind;"}, {"sha": "70d166c4854c484bfe6502f75747c3e77c13c9b0", "filename": "src/tools/clippy/clippy_lints/src/transmute/utils.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Ftransmute%2Futils.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -1,5 +1,5 @@\n use rustc_hir::Expr;\n-use rustc_hir_analysis::check::{cast, FnCtxt, Inherited};\n+use rustc_hir_typeck::{cast, FnCtxt, Inherited};\n use rustc_lint::LateContext;\n use rustc_middle::ty::{cast::CastKind, Ty};\n use rustc_span::DUMMY_SP;"}, {"sha": "7e42fcc6569b692dd86c65f9d6f5a987241d4735", "filename": "src/tools/clippy/clippy_utils/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -24,7 +24,7 @@ extern crate rustc_attr;\n extern crate rustc_data_structures;\n extern crate rustc_errors;\n extern crate rustc_hir;\n-extern crate rustc_hir_analysis;\n+extern crate rustc_hir_typeck;\n extern crate rustc_infer;\n extern crate rustc_lexer;\n extern crate rustc_lint;"}, {"sha": "5089987ef720081fa4fc769edc448d462cf78730", "filename": "src/tools/clippy/clippy_utils/src/sugg.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fsugg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fsugg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fsugg.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -10,7 +10,7 @@ use rustc_ast_pretty::pprust::token_kind_to_string;\n use rustc_errors::Applicability;\n use rustc_hir as hir;\n use rustc_hir::{Closure, ExprKind, HirId, MutTy, TyKind};\n-use rustc_hir_analysis::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n+use rustc_hir_typeck::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::{EarlyContext, LateContext, LintContext};\n use rustc_middle::hir::place::ProjectionKind;\n@@ -1054,11 +1054,10 @@ impl<'tcx> Delegate<'tcx> for DerefDelegate<'_, 'tcx> {\n \n     fn fake_read(\n         &mut self,\n-        _: &rustc_hir_analysis::expr_use_visitor::PlaceWithHirId<'tcx>,\n+        _: &rustc_hir_typeck::expr_use_visitor::PlaceWithHirId<'tcx>,\n         _: FakeReadCause,\n         _: HirId,\n-    ) {\n-    }\n+    ) {}\n }\n \n #[cfg(test)]"}, {"sha": "000fb51c018579f44e8091f97df9c7ecdc541c7b", "filename": "src/tools/clippy/clippy_utils/src/usage.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fusage.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b076f034963a22c591f4b2bb53748b98ec17e5b6/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fusage.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Fusage.rs?ref=b076f034963a22c591f4b2bb53748b98ec17e5b6", "patch": "@@ -5,7 +5,7 @@ use rustc_hir as hir;\n use rustc_hir::intravisit::{self, Visitor};\n use rustc_hir::HirIdSet;\n use rustc_hir::{Expr, ExprKind, HirId, Node};\n-use rustc_hir_analysis::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n+use rustc_hir_typeck::expr_use_visitor::{Delegate, ExprUseVisitor, PlaceBase, PlaceWithHirId};\n use rustc_infer::infer::TyCtxtInferExt;\n use rustc_lint::LateContext;\n use rustc_middle::hir::nested_filter;\n@@ -75,11 +75,10 @@ impl<'tcx> Delegate<'tcx> for MutVarsDelegate {\n \n     fn fake_read(\n         &mut self,\n-        _: &rustc_hir_analysis::expr_use_visitor::PlaceWithHirId<'tcx>,\n+        _: &rustc_hir_typeck::expr_use_visitor::PlaceWithHirId<'tcx>,\n         _: FakeReadCause,\n         _: HirId,\n-    ) {\n-    }\n+    ) {}\n }\n \n pub struct ParamBindingIdCollector {"}]}