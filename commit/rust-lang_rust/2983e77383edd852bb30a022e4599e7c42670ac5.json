{"sha": "2983e77383edd852bb30a022e4599e7c42670ac5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5ODNlNzczODNlZGQ4NTJiYjMwYTAyMmU0NTk5ZTdjNDI2NzBhYzU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-02-08T23:12:28Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-02-10T03:00:15Z"}, "message": "rt: Remove unused context functions", "tree": {"sha": "559f984a0fb39d5899c99992ab5be5be4cf2e9ee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/559f984a0fb39d5899c99992ab5be5be4cf2e9ee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2983e77383edd852bb30a022e4599e7c42670ac5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2983e77383edd852bb30a022e4599e7c42670ac5", "html_url": "https://github.com/rust-lang/rust/commit/2983e77383edd852bb30a022e4599e7c42670ac5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2983e77383edd852bb30a022e4599e7c42670ac5/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b778dac1976c3d4f33bf8ee8c7c3208ca8af2563", "url": "https://api.github.com/repos/rust-lang/rust/commits/b778dac1976c3d4f33bf8ee8c7c3208ca8af2563", "html_url": "https://github.com/rust-lang/rust/commit/b778dac1976c3d4f33bf8ee8c7c3208ca8af2563"}], "stats": {"total": 28, "additions": 0, "deletions": 28}, "files": [{"sha": "9d5d0f6d4ee8ee3529c6bee11e90aba2a252a243", "filename": "src/rt/arch/i386/context.h", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/2983e77383edd852bb30a022e4599e7c42670ac5/src%2Frt%2Farch%2Fi386%2Fcontext.h", "raw_url": "https://github.com/rust-lang/rust/raw/2983e77383edd852bb30a022e4599e7c42670ac5/src%2Frt%2Farch%2Fi386%2Fcontext.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fi386%2Fcontext.h?ref=2983e77383edd852bb30a022e4599e7c42670ac5", "patch": "@@ -41,20 +41,6 @@ class context {\n \n   void swap(context &out);\n   void call(void *f, void *arg, void *sp);\n-  void call(void *f, void *sp);\n-\n-  // Note that this doesn't actually adjust esp. Instead, we adjust esp when\n-  // we actually do the call. This is needed for exception safety -- if the\n-  // function being called causes the task to fail, then we have to avoid\n-  // leaking space on the C stack.\n-  inline void *alloc_stack(size_t nbytes) {\n-    uint32_t bot = regs.esp;\n-    uint32_t top = align_down(bot - nbytes);\n-\n-    (void)VALGRIND_MAKE_MEM_UNDEFINED(top - 4, bot - top + 4);\n-\n-    return reinterpret_cast<void *>(top);\n-  }\n \n   void call_shim_on_c_stack(void *args, void *fn_ptr) {\n       __morestack(args, fn_ptr, regs.esp);"}, {"sha": "651c3e93d02ef6868d40373d155a23ddc052789f", "filename": "src/rt/arch/x86_64/context.h", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/2983e77383edd852bb30a022e4599e7c42670ac5/src%2Frt%2Farch%2Fx86_64%2Fcontext.h", "raw_url": "https://github.com/rust-lang/rust/raw/2983e77383edd852bb30a022e4599e7c42670ac5/src%2Frt%2Farch%2Fx86_64%2Fcontext.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fx86_64%2Fcontext.h?ref=2983e77383edd852bb30a022e4599e7c42670ac5", "patch": "@@ -40,20 +40,6 @@ class context {\n     \n     void swap(context &out);\n     void call(void *f, void *arg, void *sp);\n-    void call(void *f, void *sp);\n-    \n-    // Note that this doesn't actually adjust esp. Instead, we adjust esp when\n-    // we actually do the call. This is needed for exception safety -- if the\n-    // function being called causes the task to fail, then we have to avoid\n-    // leaking space on the C stack.\n-    inline void *alloc_stack(size_t nbytes) {\n-        uint64_t bot = regs.data[RUSTRT_RSP];\n-        uint64_t top = align_down(bot - nbytes);\n-\n-        (void)VALGRIND_MAKE_MEM_UNDEFINED(top - 4, bot - top + 4);\n-\n-        return reinterpret_cast<void *>(top);\n-    }\n \n     void call_shim_on_c_stack(void *args, void *fn_ptr) {\n         __morestack(args, fn_ptr, regs.data[RUSTRT_RSP]);"}]}