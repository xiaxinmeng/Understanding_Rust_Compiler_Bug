{"sha": "a19ed8ad1579fa8c0a2e5477534da76be5afd3c2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExOWVkOGFkMTU3OWZhOGMwYTJlNTQ3NzUzNGRhNzZiZTVhZmQzYzI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-06-18T04:52:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-06-18T04:52:28Z"}, "message": "Auto merge of #26340 - bluss:bench-sigfix, r=alexcrichton\n\ntest: Fix a bug in bench result formatting\r\n\r\nIt would skip the middle part if it was 0, displaying a number a 1000\r\ntimes too small. The MB/s number next to it gave it away.\r\n\r\nFixed it looks like this:\r\n\r\n```\r\ntest h ... bench:   1,000,129 ns/iter (+/- 4,730)\r\n```", "tree": {"sha": "8d17167d0770ac788a7ffbaf61be641cda7cc5ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d17167d0770ac788a7ffbaf61be641cda7cc5ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2", "html_url": "https://github.com/rust-lang/rust/commit/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d33318018466a97dec2d61195e38952ca30d597", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d33318018466a97dec2d61195e38952ca30d597", "html_url": "https://github.com/rust-lang/rust/commit/1d33318018466a97dec2d61195e38952ca30d597"}, {"sha": "04315949fb33fdce8353157a5d3dd10619bf5b37", "url": "https://api.github.com/repos/rust-lang/rust/commits/04315949fb33fdce8353157a5d3dd10619bf5b37", "html_url": "https://github.com/rust-lang/rust/commit/04315949fb33fdce8353157a5d3dd10619bf5b37"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "8f339a599b8a43afaadf574d92ab990e4a5dbf71", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a19ed8ad1579fa8c0a2e5477534da76be5afd3c2/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=a19ed8ad1579fa8c0a2e5477534da76be5afd3c2", "patch": "@@ -629,19 +629,19 @@ impl<T: Write> ConsoleTestState<T> {\n fn fmt_thousands_sep(mut n: usize, sep: char) -> String {\n     use std::fmt::Write;\n     let mut output = String::new();\n-    let mut first = true;\n+    let mut trailing = false;\n     for &pow in &[9, 6, 3, 0] {\n         let base = 10_usize.pow(pow);\n-        if pow == 0 || n / base != 0 {\n-            if first {\n+        if pow == 0 || trailing || n / base != 0 {\n+            if !trailing {\n                 output.write_fmt(format_args!(\"{}\", n / base)).unwrap();\n             } else {\n                 output.write_fmt(format_args!(\"{:03}\", n / base)).unwrap();\n             }\n             if pow != 0 {\n                 output.push(sep);\n             }\n-            first = false;\n+            trailing = true;\n         }\n         n %= base;\n     }"}]}