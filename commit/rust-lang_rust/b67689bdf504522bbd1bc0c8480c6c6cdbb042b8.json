{"sha": "b67689bdf504522bbd1bc0c8480c6c6cdbb042b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2NzY4OWJkZjUwNDUyMmJiZDFiYzBjODQ4MGM2YzZjZGJiMDQyYjg=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-01-16T17:30:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-16T17:30:12Z"}, "message": "Rollup merge of #81060 - nagisa:nagisa/regression-50041, r=Mark-Simulacrum\n\nAdd a regression test for #50041\n\nAFAICT the test case never landed alongside the fix for the issue.", "tree": {"sha": "a0fdb0207354702ddf4960c5248dd3f4866eb2b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0fdb0207354702ddf4960c5248dd3f4866eb2b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgAyKkCRBK7hj4Ov3rIwAAdHIIABkHcwwSHzCrBZ10wxV0upJi\nCjQplJYTSzXZekU6vAvI6Usk47AqVMUkumNcRP8wJ8lwHr/GY35G+72KGluj8jlj\npW4EYMwAkLNjRClomd7eIYtEsikFSbWc7SgWBU/vTNiIldcDwLVu6v4qCGhufpS9\nZ1lCmQHclNbUaeZnt1Fenmdtr2ldaQ4eD2S0B8FsH57QYKPGBMEi+h+DZQ3+KTED\nUiiK4Ekry1l7Y1/dfPLRiD/gwHx5DKSlloLFxuURFYXe7xyVo1JBkLTkELN/a1gf\nzyscxhm4K+1t12xE56zWjfglg3UV7I+UdjT5yPGKA1sO1dHujaPWflCtxGaxreI=\n=anXb\n-----END PGP SIGNATURE-----\n", "payload": "tree a0fdb0207354702ddf4960c5248dd3f4866eb2b5\nparent 9df8dcbcde0221a62816d28a7c3bb2e0444ccad3\nparent af0d099004e1b1ffe19109fba5813aebfd435437\nauthor Mara Bos <m-ou.se@m-ou.se> 1610818212 +0000\ncommitter GitHub <noreply@github.com> 1610818212 +0000\n\nRollup merge of #81060 - nagisa:nagisa/regression-50041, r=Mark-Simulacrum\n\nAdd a regression test for #50041\n\nAFAICT the test case never landed alongside the fix for the issue.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8", "html_url": "https://github.com/rust-lang/rust/commit/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9df8dcbcde0221a62816d28a7c3bb2e0444ccad3", "url": "https://api.github.com/repos/rust-lang/rust/commits/9df8dcbcde0221a62816d28a7c3bb2e0444ccad3", "html_url": "https://github.com/rust-lang/rust/commit/9df8dcbcde0221a62816d28a7c3bb2e0444ccad3"}, {"sha": "af0d099004e1b1ffe19109fba5813aebfd435437", "url": "https://api.github.com/repos/rust-lang/rust/commits/af0d099004e1b1ffe19109fba5813aebfd435437", "html_url": "https://github.com/rust-lang/rust/commit/af0d099004e1b1ffe19109fba5813aebfd435437"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "c818f2976e1cf21899ed685eba16037de9125da7", "filename": "src/test/ui/mir/ssa-analysis-regression-50041.rs", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8/src%2Ftest%2Fui%2Fmir%2Fssa-analysis-regression-50041.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b67689bdf504522bbd1bc0c8480c6c6cdbb042b8/src%2Ftest%2Fui%2Fmir%2Fssa-analysis-regression-50041.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fssa-analysis-regression-50041.rs?ref=b67689bdf504522bbd1bc0c8480c6c6cdbb042b8", "patch": "@@ -0,0 +1,34 @@\n+// build-pass\n+// compile-flags: -Z mir-opt-level=3\n+\n+#![crate_type=\"lib\"]\n+#![feature(lang_items)]\n+#![no_std]\n+\n+#[lang = \"owned_box\"]\n+pub struct Box<T: ?Sized>(*mut T);\n+\n+impl<T: ?Sized> Drop for Box<T> {\n+    fn drop(&mut self) {\n+    }\n+}\n+\n+#[lang = \"box_free\"]\n+#[inline(always)]\n+unsafe fn box_free<T: ?Sized>(ptr: *mut T) {\n+    dealloc(ptr)\n+}\n+\n+#[inline(never)]\n+fn dealloc<T: ?Sized>(_: *mut T) {\n+}\n+\n+pub struct Foo<T>(T);\n+\n+pub fn foo(a: Option<Box<Foo<usize>>>) -> usize {\n+    let f = match a {\n+        None => Foo(0),\n+        Some(vec) => *vec,\n+    };\n+    f.0\n+}"}]}