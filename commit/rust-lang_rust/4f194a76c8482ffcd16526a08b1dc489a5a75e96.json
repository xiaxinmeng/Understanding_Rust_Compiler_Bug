{"sha": "4f194a76c8482ffcd16526a08b1dc489a5a75e96", "node_id": "C_kwDOAAsO6NoAKDRmMTk0YTc2Yzg0ODJmZmNkMTY1MjZhMDhiMWRjNDg5YTVhNzVlOTY", "commit": {"author": {"name": "Matthew Kelly", "email": "matthew.kelly2@gmail.com", "date": "2022-08-25T09:43:59Z"}, "committer": {"name": "Matthew Kelly", "email": "matthew.kelly2@gmail.com", "date": "2022-08-25T09:46:47Z"}, "message": "Fix rust-doc error\n\nThere was a partial rust code block in the readme that was invalid\nbecause of a missing line. I inlined the code snippet into the text to\nfix the error. This also improves readability a bit.", "tree": {"sha": "8abe832811e64907ce89e1a054de9d8837dafe37", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8abe832811e64907ce89e1a054de9d8837dafe37"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f194a76c8482ffcd16526a08b1dc489a5a75e96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f194a76c8482ffcd16526a08b1dc489a5a75e96", "html_url": "https://github.com/rust-lang/rust/commit/4f194a76c8482ffcd16526a08b1dc489a5a75e96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f194a76c8482ffcd16526a08b1dc489a5a75e96/comments", "author": {"login": "MatthewPeterKelly", "id": 8137529, "node_id": "MDQ6VXNlcjgxMzc1Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/8137529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MatthewPeterKelly", "html_url": "https://github.com/MatthewPeterKelly", "followers_url": "https://api.github.com/users/MatthewPeterKelly/followers", "following_url": "https://api.github.com/users/MatthewPeterKelly/following{/other_user}", "gists_url": "https://api.github.com/users/MatthewPeterKelly/gists{/gist_id}", "starred_url": "https://api.github.com/users/MatthewPeterKelly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MatthewPeterKelly/subscriptions", "organizations_url": "https://api.github.com/users/MatthewPeterKelly/orgs", "repos_url": "https://api.github.com/users/MatthewPeterKelly/repos", "events_url": "https://api.github.com/users/MatthewPeterKelly/events{/privacy}", "received_events_url": "https://api.github.com/users/MatthewPeterKelly/received_events", "type": "User", "site_admin": false}, "committer": {"login": "MatthewPeterKelly", "id": 8137529, "node_id": "MDQ6VXNlcjgxMzc1Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/8137529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MatthewPeterKelly", "html_url": "https://github.com/MatthewPeterKelly", "followers_url": "https://api.github.com/users/MatthewPeterKelly/followers", "following_url": "https://api.github.com/users/MatthewPeterKelly/following{/other_user}", "gists_url": "https://api.github.com/users/MatthewPeterKelly/gists{/gist_id}", "starred_url": "https://api.github.com/users/MatthewPeterKelly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MatthewPeterKelly/subscriptions", "organizations_url": "https://api.github.com/users/MatthewPeterKelly/orgs", "repos_url": "https://api.github.com/users/MatthewPeterKelly/repos", "events_url": "https://api.github.com/users/MatthewPeterKelly/events{/privacy}", "received_events_url": "https://api.github.com/users/MatthewPeterKelly/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc02eee8f6b433c8485086d3e97ae499b53b240b", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc02eee8f6b433c8485086d3e97ae499b53b240b", "html_url": "https://github.com/rust-lang/rust/commit/fc02eee8f6b433c8485086d3e97ae499b53b240b"}], "stats": {"total": 27, "additions": 11, "deletions": 16}, "files": [{"sha": "f8c04d54db70a59500d6f103e9f4e446ff001c60", "filename": "compiler/rustc_error_codes/src/error_codes/E0311.md", "status": "modified", "additions": 11, "deletions": 16, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/4f194a76c8482ffcd16526a08b1dc489a5a75e96/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0311.md", "raw_url": "https://github.com/rust-lang/rust/raw/4f194a76c8482ffcd16526a08b1dc489a5a75e96/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0311.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0311.md?ref=4f194a76c8482ffcd16526a08b1dc489a5a75e96", "patch": "@@ -25,35 +25,30 @@ where\n \n Why doesn't this code compile? It helps to look at the lifetime bounds that\n the compiler is automatically adding (\"Lifetime Ellision\", Chapter 10.3 in the\n-Rust book) to the `nested_borrow_mut` and `borrow_mut` functions. In both cases\n-the input is a reference to `self`, so the compiler attempts to assign the\n+Rust book) to the `nested_borrow_mut()` and `borrow_mut()` functions. In both\n+cases the input is a reference to `self`, so the compiler attempts to assign\n the same lifetime to the input and output.\n \n-Looking specifically at `nested_borrow_mut`, we see that there are three object\n-references to keep track of, along with their associated lifetimes:\n+Looking specifically at `nested_borrow_mut()`, we see that there are three\n+object references to keep track of, along with their associated lifetimes:\n - `self` (which is a `&mut T`)\n - `u_ref` (which is a `&mut U`)\n - `v_ref` (which is a `&mut V`)\n \n The `borrow_mut()` method implicitly requires that that the input and output\n-have the same lifetime bounds. Thus the lines:\n-\n-```rust\n-        let u_ref = self.borrow_mut();\n-        let v_ref = u_ref.borrow_mut();\n-```\n-\n-imply that `u_ref` and `self` must share a lifetime bound, and also that\n-`v_ref` and `u_ref` share a lifetime bound. The problem is that the function\n-signature for `nested_borrow_mut` only gives the compiler information about the\n-lifetimes of `self` and `v_ref` -- nothing about `u_ref`.\n+have the same lifetime bounds. Thus the lines: `let u_ref = self.borrow_mut();`\n+and `let v_ref = u_ref.borrow_mut();` in `nested_borrow_mut()` above imply that\n+`u_ref` and `self` must share a lifetime bound, and also that `v_ref` and\n+`u_ref` share a lifetime bound. The problem is that the function signature for\n+`nested_borrow_mut()` only gives the compiler information about the lifetimes\n+of `self` and `v_ref` -- nothing about `u_ref`.\n \n The way to fix this error is then to explicitly tell the compiler that the\n lifetime of `u_ref` is the same as `self` and `v_ref`, which then allows it\n to satisfy the two lifetime bound requirements described above.\n \n Here is the working version of the code:\n-```rust\n+```\n use std::borrow::BorrowMut;\n \n trait NestedBorrowMut<'a, U, V> {"}]}