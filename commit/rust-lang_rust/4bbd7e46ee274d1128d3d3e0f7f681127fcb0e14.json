{"sha": "4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiYmQ3ZTQ2ZWUyNzRkMTEyOGQzZDNlMGY3ZjY4MTEyN2ZjYjBlMTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-08T06:02:29Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-02-08T06:02:29Z"}, "message": "Auto merge of #6696 - dtolnay-contrib:regex, r=Manishearth\n\nDowngrade trivial_regex to nursery\n\nSee #6690. I think there is still value in a trivial_regex lint, but only if clippy can tell that the regex is only ever constructed and applied to a single input.\n\n```rust\nlet regex = Regex::new(\"trivial_regex\")?;\nprintln!(\"{}\", regex.is_match(s));\n// `regex` never used again\n```\n\n---\n\nchangelog: remove `trivial_regex` from default set of enabled lints", "tree": {"sha": "17fb5a3cd3ffe879122df72b2b645273e6e72a98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17fb5a3cd3ffe879122df72b2b645273e6e72a98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "html_url": "https://github.com/rust-lang/rust/commit/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "de35c297bf7464e891ada4899470b60aa60db87f", "url": "https://api.github.com/repos/rust-lang/rust/commits/de35c297bf7464e891ada4899470b60aa60db87f", "html_url": "https://github.com/rust-lang/rust/commit/de35c297bf7464e891ada4899470b60aa60db87f"}, {"sha": "fd35517bd47372a4c9bbd436f3d6885cdc452e7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd35517bd47372a4c9bbd436f3d6885cdc452e7f", "html_url": "https://github.com/rust-lang/rust/commit/fd35517bd47372a4c9bbd436f3d6885cdc452e7f"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "6e693ccd75ceb93bbbd832fdbf5f070c6f709a64", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "patch": "@@ -1628,7 +1628,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&reference::DEREF_ADDROF),\n         LintId::of(&reference::REF_IN_DEREF),\n         LintId::of(&regex::INVALID_REGEX),\n-        LintId::of(&regex::TRIVIAL_REGEX),\n         LintId::of(&repeat_once::REPEAT_ONCE),\n         LintId::of(&returns::LET_AND_RETURN),\n         LintId::of(&returns::NEEDLESS_RETURN),\n@@ -1791,7 +1790,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&ranges::MANUAL_RANGE_CONTAINS),\n         LintId::of(&redundant_field_names::REDUNDANT_FIELD_NAMES),\n         LintId::of(&redundant_static_lifetimes::REDUNDANT_STATIC_LIFETIMES),\n-        LintId::of(&regex::TRIVIAL_REGEX),\n         LintId::of(&returns::LET_AND_RETURN),\n         LintId::of(&returns::NEEDLESS_RETURN),\n         LintId::of(&single_component_path_imports::SINGLE_COMPONENT_PATH_IMPORTS),\n@@ -2021,6 +2019,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&needless_borrow::NEEDLESS_BORROW),\n         LintId::of(&path_buf_push_overwrite::PATH_BUF_PUSH_OVERWRITE),\n         LintId::of(&redundant_pub_crate::REDUNDANT_PUB_CRATE),\n+        LintId::of(&regex::TRIVIAL_REGEX),\n         LintId::of(&strings::STRING_LIT_AS_BYTES),\n         LintId::of(&transmute::USELESS_TRANSMUTE),\n         LintId::of(&use_self::USE_SELF),"}, {"sha": "1edea6131489323f493f2e20d60f360a39ee311a", "filename": "clippy_lints/src/regex.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14/clippy_lints%2Fsrc%2Fregex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14/clippy_lints%2Fsrc%2Fregex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fregex.rs?ref=4bbd7e46ee274d1128d3d3e0f7f681127fcb0e14", "patch": "@@ -35,14 +35,16 @@ declare_clippy_lint! {\n     /// `str::starts_with`, `str::ends_with` or `std::contains` or other `str`\n     /// methods.\n     ///\n-    /// **Known problems:** None.\n+    /// **Known problems:** If the same regex is going to be applied to multiple\n+    /// inputs, the precomputations done by `Regex` construction can give\n+    /// significantly better performance than any of the `str`-based methods.\n     ///\n     /// **Example:**\n     /// ```ignore\n     /// Regex::new(\"^foobar\")\n     /// ```\n     pub TRIVIAL_REGEX,\n-    style,\n+    nursery,\n     \"trivial regular expressions\"\n }\n "}]}