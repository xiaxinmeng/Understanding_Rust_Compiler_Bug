{"sha": "ddc1d294429e39cbc0b2b9e883b46592f896f412", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkYzFkMjk0NDI5ZTM5Y2JjMGIyYjllODgzYjQ2NTkyZjg5NmY0MTI=", "commit": {"author": {"name": "Nikolai Merinov", "email": "nikolai.merinov@member.fsf.org", "date": "2018-07-01T20:45:35Z"}, "committer": {"name": "Nikolai Merinov", "email": "nikolai.merinov@member.fsf.org", "date": "2018-07-02T16:28:58Z"}, "message": "bootstrap: tests should use rustc from config.toml\n\nTests should always use \"rustc\" and \"cargo\" from config.toml instead\nof assuming that stage0 binaries was downloaded to build directory.", "tree": {"sha": "a18ef286e7159dd598dc6d3136fd0baa572249b2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a18ef286e7159dd598dc6d3136fd0baa572249b2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ddc1d294429e39cbc0b2b9e883b46592f896f412", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ddc1d294429e39cbc0b2b9e883b46592f896f412", "html_url": "https://github.com/rust-lang/rust/commit/ddc1d294429e39cbc0b2b9e883b46592f896f412", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ddc1d294429e39cbc0b2b9e883b46592f896f412/comments", "author": {"login": "mnd", "id": 1655695, "node_id": "MDQ6VXNlcjE2NTU2OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1655695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnd", "html_url": "https://github.com/mnd", "followers_url": "https://api.github.com/users/mnd/followers", "following_url": "https://api.github.com/users/mnd/following{/other_user}", "gists_url": "https://api.github.com/users/mnd/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnd/subscriptions", "organizations_url": "https://api.github.com/users/mnd/orgs", "repos_url": "https://api.github.com/users/mnd/repos", "events_url": "https://api.github.com/users/mnd/events{/privacy}", "received_events_url": "https://api.github.com/users/mnd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mnd", "id": 1655695, "node_id": "MDQ6VXNlcjE2NTU2OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1655695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mnd", "html_url": "https://github.com/mnd", "followers_url": "https://api.github.com/users/mnd/followers", "following_url": "https://api.github.com/users/mnd/following{/other_user}", "gists_url": "https://api.github.com/users/mnd/gists{/gist_id}", "starred_url": "https://api.github.com/users/mnd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mnd/subscriptions", "organizations_url": "https://api.github.com/users/mnd/orgs", "repos_url": "https://api.github.com/users/mnd/repos", "events_url": "https://api.github.com/users/mnd/events{/privacy}", "received_events_url": "https://api.github.com/users/mnd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4faaf7e3359fa78bad2e8c54011e94ce8ac078c6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4faaf7e3359fa78bad2e8c54011e94ce8ac078c6", "html_url": "https://github.com/rust-lang/rust/commit/4faaf7e3359fa78bad2e8c54011e94ce8ac078c6"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "512d4d8c5b792ce0e1958574ff59e0168996793c", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ddc1d294429e39cbc0b2b9e883b46592f896f412/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/ddc1d294429e39cbc0b2b9e883b46592f896f412/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=ddc1d294429e39cbc0b2b9e883b46592f896f412", "patch": "@@ -816,6 +816,8 @@ def bootstrap(help_triggered):\n     env[\"BOOTSTRAP_PYTHON\"] = sys.executable\n     env[\"BUILD_DIR\"] = build.build_dir\n     env[\"RUSTC_BOOTSTRAP\"] = '1'\n+    env[\"CARGO\"] = build.cargo()\n+    env[\"RUSTC\"] = build.rustc()\n     run(args, env=env, verbose=build.verbose)\n \n "}, {"sha": "b3ed10257bdacf2d3c11256b45f7959df593b646", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ddc1d294429e39cbc0b2b9e883b46592f896f412/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ddc1d294429e39cbc0b2b9e883b46592f896f412/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=ddc1d294429e39cbc0b2b9e883b46592f896f412", "patch": "@@ -23,7 +23,6 @@ use std::cmp;\n \n use num_cpus;\n use toml;\n-use util::exe;\n use cache::{INTERNER, Interned};\n use flags::Flags;\n pub use flags::Subcommand;\n@@ -367,9 +366,8 @@ impl Config {\n         config.src = Config::path_from_python(\"SRC\");\n         config.out = Config::path_from_python(\"BUILD_DIR\");\n \n-        let stage0_root = config.out.join(&config.build).join(\"stage0/bin\");\n-        config.initial_rustc = stage0_root.join(exe(\"rustc\", &config.build));\n-        config.initial_cargo = stage0_root.join(exe(\"cargo\", &config.build));\n+        config.initial_rustc = Config::path_from_python(\"RUSTC\");\n+        config.initial_cargo = Config::path_from_python(\"CARGO\");\n \n         config\n     }"}]}