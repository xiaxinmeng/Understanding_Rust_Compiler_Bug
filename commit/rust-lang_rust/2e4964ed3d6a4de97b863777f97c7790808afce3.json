{"sha": "2e4964ed3d6a4de97b863777f97c7790808afce3", "node_id": "C_kwDOAAsO6NoAKDJlNDk2NGVkM2Q2YTRkZTk3Yjg2Mzc3N2Y5N2M3NzkwODA4YWZjZTM", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-04-07T04:04:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-07T04:04:54Z"}, "message": "Rollup merge of #95714 - KSBilodeau:master, r=Dylan-DPC\n\nAdd test for issue #83474\n\nAdds test for https://github.com/rust-lang/rust/issues/83474 - second attempt at PR https://github.com/rust-lang/rust/pull/91821 which was abandoned.", "tree": {"sha": "d258716826a8f21c7f4667f7866b1e54158b6bc0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d258716826a8f21c7f4667f7866b1e54158b6bc0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e4964ed3d6a4de97b863777f97c7790808afce3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiTmLmCRBK7hj4Ov3rIwAAKAkIAE52V+LQkJE9I/Oo1Bjts6xQ\noBW1z1XJa/+I4vpYTgo3/K0SKhBorpmazhohsQWS9gSG3UNknMcbXiKvMeO2djkK\nrUDi5UK7cgCk3CtoAR5nnoVXdLQ4JvZcV9JW+TiEGfVdcHrMsSmeDIu/LNCtvHLE\nfOOK0lCyaHwRIjcGvNLUcX5CGPZP2TbcUbvJNlKgZH8a5EYznIZdTY+chB7Igf0A\nWQCnd9xTZE0OVTlAmuZVAncBqdnVplCy2onDlUbH0NLaP3dXt/vV5fXdm1SIgxdP\nL8OHV0S3PNx2sq34wA3/E42xio+WfzqzbXNeKX7GJRXvO6vcTS6CAJ7v1Q2zLbE=\n=bwxn\n-----END PGP SIGNATURE-----\n", "payload": "tree d258716826a8f21c7f4667f7866b1e54158b6bc0\nparent eeabdec14cbceb995e5364045ef1b96720acbd84\nparent c62d2106da564d221544119f3c268a6ee756803f\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1649304294 +0200\ncommitter GitHub <noreply@github.com> 1649304294 +0200\n\nRollup merge of #95714 - KSBilodeau:master, r=Dylan-DPC\n\nAdd test for issue #83474\n\nAdds test for https://github.com/rust-lang/rust/issues/83474 - second attempt at PR https://github.com/rust-lang/rust/pull/91821 which was abandoned.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e4964ed3d6a4de97b863777f97c7790808afce3", "html_url": "https://github.com/rust-lang/rust/commit/2e4964ed3d6a4de97b863777f97c7790808afce3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e4964ed3d6a4de97b863777f97c7790808afce3/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eeabdec14cbceb995e5364045ef1b96720acbd84", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeabdec14cbceb995e5364045ef1b96720acbd84", "html_url": "https://github.com/rust-lang/rust/commit/eeabdec14cbceb995e5364045ef1b96720acbd84"}, {"sha": "c62d2106da564d221544119f3c268a6ee756803f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c62d2106da564d221544119f3c268a6ee756803f", "html_url": "https://github.com/rust-lang/rust/commit/c62d2106da564d221544119f3c268a6ee756803f"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "fbb56e528c0a62a43d8a4cda532e336dd1458b42", "filename": "src/test/ui/lang-items/lang-item-generic-requirements.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2e4964ed3d6a4de97b863777f97c7790808afce3/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e4964ed3d6a4de97b863777f97c7790808afce3/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs?ref=2e4964ed3d6a4de97b863777f97c7790808afce3", "patch": "@@ -1,5 +1,5 @@\n-// Checks that declaring a lang item with the wrong number\n-// of generic arguments errors rather than crashing (issue #83893, #87573, part of #9307, #79559).\n+// Checks that declaring a lang item with the wrong number of generic arguments errors rather than\n+// crashing (issue #83474, #83893, #87573, part of #9307, #79559).\n \n #![feature(lang_items, no_core)]\n #![no_core]\n@@ -25,6 +25,10 @@ struct MyPhantomData<T, U>;\n //~^ ERROR parameter `T` is never used\n //~| ERROR parameter `U` is never used\n \n+#[lang = \"owned_box\"]\n+//~^ ERROR `owned_box` language item must be applied to a struct with at least 1 generic argument\n+struct Foo;\n+\n // When the `start` lang item is missing generics very odd things can happen, especially when\n // it comes to cross-crate monomorphization\n #[lang = \"start\"]\n@@ -48,6 +52,9 @@ fn ice() {\n \n     // Use phantomdata\n     let _ = MyPhantomData::<(), i32>;\n+\n+    // Use Foo\n+    let _: () = Foo;\n }\n \n // use `start`"}, {"sha": "326f5b0d59507317f8c06d3b7076a900c5492e57", "filename": "src/test/ui/lang-items/lang-item-generic-requirements.stderr", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/2e4964ed3d6a4de97b863777f97c7790808afce3/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2e4964ed3d6a4de97b863777f97c7790808afce3/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr?ref=2e4964ed3d6a4de97b863777f97c7790808afce3", "patch": "@@ -32,8 +32,17 @@ LL |\n LL | struct MyPhantomData<T, U>;\n    |                     ------ this struct has 2 generic arguments\n \n+error[E0718]: `owned_box` language item must be applied to a struct with at least 1 generic argument\n+  --> $DIR/lang-item-generic-requirements.rs:28:1\n+   |\n+LL | #[lang = \"owned_box\"]\n+   | ^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL | struct Foo;\n+   |           - this struct has 0 generic arguments\n+\n error[E0718]: `start` language item must be applied to a function with 1 generic argument\n-  --> $DIR/lang-item-generic-requirements.rs:30:1\n+  --> $DIR/lang-item-generic-requirements.rs:34:1\n    |\n LL | #[lang = \"start\"]\n    | ^^^^^^^^^^^^^^^^^\n@@ -59,7 +68,7 @@ LL | struct MyPhantomData<T, U>;\n    = help: consider removing `U` or referring to it in a field\n    = help: if you intended `U` to be a const parameter, use `const U: usize` instead\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 8 previous errors\n \n Some errors have detailed explanations: E0392, E0718.\n For more information about an error, try `rustc --explain E0392`."}]}