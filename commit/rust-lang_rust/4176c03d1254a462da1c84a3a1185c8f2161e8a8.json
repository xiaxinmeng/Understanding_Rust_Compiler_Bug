{"sha": "4176c03d1254a462da1c84a3a1185c8f2161e8a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxNzZjMDNkMTI1NGE0NjJkYTFjODRhM2ExMTg1YzhmMjE2MWU4YTg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-23T14:33:01Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-23T14:33:01Z"}, "message": "Remove SyntaxPtr::range from more places", "tree": {"sha": "2e10739d01c0eccf3c2b4eabc43470c0a815dc7e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2e10739d01c0eccf3c2b4eabc43470c0a815dc7e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4176c03d1254a462da1c84a3a1185c8f2161e8a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4176c03d1254a462da1c84a3a1185c8f2161e8a8", "html_url": "https://github.com/rust-lang/rust/commit/4176c03d1254a462da1c84a3a1185c8f2161e8a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4176c03d1254a462da1c84a3a1185c8f2161e8a8/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0502be3bf4539d24d34d24f3a4b9521d99a32aee", "url": "https://api.github.com/repos/rust-lang/rust/commits/0502be3bf4539d24d34d24f3a4b9521d99a32aee", "html_url": "https://github.com/rust-lang/rust/commit/0502be3bf4539d24d34d24f3a4b9521d99a32aee"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "5b36a7cc14df54f6b667601cb13ac7d34efd4342", "filename": "crates/ra_hir_def/src/body/scope.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs?ref=4176c03d1254a462da1c84a3a1185c8f2161e8a8", "patch": "@@ -325,8 +325,11 @@ mod tests {\n         let resolved = scopes.resolve_name_in_scope(expr_scope, &name_ref.as_name()).unwrap();\n         let pat_src = source_map.pat_syntax(resolved.pat()).unwrap();\n \n-        let local_name = pat_src.value.either(|it| it.syntax_node_ptr(), |it| it.syntax_node_ptr());\n-        assert_eq!(local_name.range(), expected_name.syntax().text_range());\n+        let local_name = pat_src.value.either(\n+            |it| it.syntax_node_ptr().to_node(file.syntax()),\n+            |it| it.syntax_node_ptr().to_node(file.syntax()),\n+        );\n+        assert_eq!(local_name.text_range(), expected_name.syntax().text_range());\n     }\n \n     #[test]"}, {"sha": "67bc9c31b5bfab03f2f91147442ab4aedfe9791b", "filename": "crates/ra_ide/src/display/navigation_target.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs?ref=4176c03d1254a462da1c84a3a1185c8f2161e8a8", "patch": "@@ -176,7 +176,7 @@ impl ToNav for FileSymbol {\n             file_id: self.file_id,\n             name: self.name.clone(),\n             kind: self.kind,\n-            full_range: self.ptr.range(),\n+            full_range: self.range,\n             focus_range: self.name_range,\n             container_name: self.container_name.clone(),\n             description: description_from_symbol(db, self),"}, {"sha": "95be11134554cca9e66fd35be7bbe7ed07cac356", "filename": "crates/ra_ide_db/src/symbol_index.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4176c03d1254a462da1c84a3a1185c8f2161e8a8/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs?ref=4176c03d1254a462da1c84a3a1185c8f2161e8a8", "patch": "@@ -313,6 +313,7 @@ pub struct FileSymbol {\n     pub file_id: FileId,\n     pub name: SmolStr,\n     pub kind: SyntaxKind,\n+    pub range: TextRange,\n     pub ptr: SyntaxNodePtr,\n     pub name_range: Option<TextRange>,\n     pub container_name: Option<SmolStr>,\n@@ -379,6 +380,7 @@ fn to_file_symbol(node: &SyntaxNode, file_id: FileId) -> Option<FileSymbol> {\n     to_symbol(node).map(move |(name, ptr, name_range)| FileSymbol {\n         name,\n         kind: node.kind(),\n+        range: node.text_range(),\n         ptr,\n         file_id,\n         name_range: Some(name_range),"}]}