{"sha": "39412ca9695dbf965c69f6f673c0e49313d3f1fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5NDEyY2E5Njk1ZGJmOTY1YzY5ZjZmNjczYzBlNDkzMTNkM2YxZmI=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-02-28T00:21:31Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2019-08-25T16:47:50Z"}, "message": "Permit unwinding through FFI by default\n\nSee #58794 for context.", "tree": {"sha": "23a0e40aa08a56e29b262290de6737f21a945264", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/23a0e40aa08a56e29b262290de6737f21a945264"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/39412ca9695dbf965c69f6f673c0e49313d3f1fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/39412ca9695dbf965c69f6f673c0e49313d3f1fb", "html_url": "https://github.com/rust-lang/rust/commit/39412ca9695dbf965c69f6f673c0e49313d3f1fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/39412ca9695dbf965c69f6f673c0e49313d3f1fb/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d760df5aea483aae041c9a241e7acacf48f75035", "url": "https://api.github.com/repos/rust-lang/rust/commits/d760df5aea483aae041c9a241e7acacf48f75035", "html_url": "https://github.com/rust-lang/rust/commit/d760df5aea483aae041c9a241e7acacf48f75035"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "6a3bb8b8b86a2632744c00b6dd4b89547996b8f4", "filename": "src/librustc_mir/build/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/39412ca9695dbf965c69f6f673c0e49313d3f1fb/src%2Flibrustc_mir%2Fbuild%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39412ca9695dbf965c69f6f673c0e49313d3f1fb/src%2Flibrustc_mir%2Fbuild%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fmod.rs?ref=39412ca9695dbf965c69f6f673c0e49313d3f1fb", "patch": "@@ -502,7 +502,7 @@ fn should_abort_on_panic(tcx: TyCtxt<'_>, fn_def_id: DefId, abi: Abi) -> bool {\n     // This is a special case: some functions have a C abi but are meant to\n     // unwind anyway. Don't stop them.\n     match unwind_attr {\n-        None => true,\n+        None => false, // FIXME(#58794)\n         Some(UnwindAttr::Allowed) => false,\n         Some(UnwindAttr::Aborts) => true,\n     }"}, {"sha": "2f08730ec6132e301c4f36c6448d398dc61daa77", "filename": "src/test/ui/abi/abort-on-c-abi.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/39412ca9695dbf965c69f6f673c0e49313d3f1fb/src%2Ftest%2Fui%2Fabi%2Fabort-on-c-abi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39412ca9695dbf965c69f6f673c0e49313d3f1fb/src%2Ftest%2Fui%2Fabi%2Fabort-on-c-abi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fabi%2Fabort-on-c-abi.rs?ref=39412ca9695dbf965c69f6f673c0e49313d3f1fb", "patch": "@@ -1,6 +1,7 @@\n // run-pass\n \n #![allow(unused_must_use)]\n+#![feature(unwind_attributes)]\n // Since we mark some ABIs as \"nounwind\" to LLVM, we must make sure that\n // we never unwind through them.\n \n@@ -13,6 +14,7 @@ use std::io::prelude::*;\n use std::io;\n use std::process::{Command, Stdio};\n \n+#[unwind(aborts)] // FIXME(#58794)\n extern \"C\" fn panic_in_ffi() {\n     panic!(\"Test\");\n }"}]}