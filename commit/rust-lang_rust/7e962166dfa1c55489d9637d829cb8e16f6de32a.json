{"sha": "7e962166dfa1c55489d9637d829cb8e16f6de32a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlOTYyMTY2ZGZhMWM1NTQ4OWQ5NjM3ZDgyOWNiOGUxNmY2ZGUzMmE=", "commit": {"author": {"name": "Josh Stone", "email": "cuviper@gmail.com", "date": "2016-02-21T09:04:14Z"}, "committer": {"name": "Josh Stone", "email": "cuviper@gmail.com", "date": "2016-02-21T09:04:14Z"}, "message": "std: Use Android LFS off64_t, ftruncate64, and lseek64\n\nAndroid should use 64-bit LFS symbols for `lseek` and `ftruncate`, lest\nthose offset parameters suffer a lossy cast down to a 32-bit `off_t`.\n\nUnlike GNU/Linux, Android's `stat`, `dirent`, and related functions are\nalways 64-bit LFS compatible, and `open` already implies `O_LARGEFILE`,\nso all those don't need to follow Linux.  It might be nice to unify them\nanyway, but those other LFS symbols aren't present in API 18 bionic.\n\nr? @alexcrichton", "tree": {"sha": "59e573ed0f978e7c4225adaaacb9b8b86d3e2585", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59e573ed0f978e7c4225adaaacb9b8b86d3e2585"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e962166dfa1c55489d9637d829cb8e16f6de32a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e962166dfa1c55489d9637d829cb8e16f6de32a", "html_url": "https://github.com/rust-lang/rust/commit/7e962166dfa1c55489d9637d829cb8e16f6de32a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e962166dfa1c55489d9637d829cb8e16f6de32a/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2fb48e9f76aabd543e4f6352ac32109e09fab22", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2fb48e9f76aabd543e4f6352ac32109e09fab22", "html_url": "https://github.com/rust-lang/rust/commit/a2fb48e9f76aabd543e4f6352ac32109e09fab22"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "1b1eea2cdd77c63d73ba0b09b905a91910d1c992", "filename": "src/liblibc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliblibc?ref=7e962166dfa1c55489d9637d829cb8e16f6de32a", "patch": "@@ -1 +1 @@\n-Subproject commit 403bdc88394919f297bdb365032044cc0481c319\n+Subproject commit 1b1eea2cdd77c63d73ba0b09b905a91910d1c992"}, {"sha": "e5bdfa3ac88cabc8402449318f9b2869ba64524f", "filename": "src/libstd/sys/unix/fs.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7e962166dfa1c55489d9637d829cb8e16f6de32a/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e962166dfa1c55489d9637d829cb8e16f6de32a/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ffs.rs?ref=7e962166dfa1c55489d9637d829cb8e16f6de32a", "patch": "@@ -27,7 +27,10 @@ use sys_common::{AsInner, FromInner};\n \n #[cfg(target_os = \"linux\")]\n use libc::{stat64, fstat64, lstat64, off64_t, ftruncate64, lseek64, dirent64, readdir64_r, open64};\n-#[cfg(not(target_os = \"linux\"))]\n+#[cfg(target_os = \"android\")]\n+use libc::{stat as stat64, fstat as fstat64, lstat as lstat64, off64_t, ftruncate64, lseek64,\n+           dirent as dirent64, open as open64};\n+#[cfg(not(any(target_os = \"linux\", target_os = \"android\")))]\n use libc::{stat as stat64, fstat as fstat64, lstat as lstat64, off_t as off64_t,\n            ftruncate as ftruncate64, lseek as lseek64, dirent as dirent64, open as open64};\n #[cfg(not(any(target_os = \"linux\", target_os = \"solaris\")))]"}]}