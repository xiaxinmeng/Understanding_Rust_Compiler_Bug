{"sha": "ca462d36ff46fd154da7226926148797ed76dc3d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhNDYyZDM2ZmY0NmZkMTU0ZGE3MjI2OTI2MTQ4Nzk3ZWQ3NmRjM2Q=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-08-11T07:23:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-11T07:23:57Z"}, "message": "Rollup merge of #75359 - lcnr:unused-delims-trim, r=oli-obk\n\nunused_delims: trim expr\n\nimproves rustfix output.", "tree": {"sha": "bcaf7fa07d64a997e307195d0b0c4ef7d5dd77f2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bcaf7fa07d64a997e307195d0b0c4ef7d5dd77f2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca462d36ff46fd154da7226926148797ed76dc3d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfMkeOCRBK7hj4Ov3rIwAAdHIIAE/UTqfiv1liMxcqzbAaRiDY\nIg5WqtKkWMbJMlgHOhzCnX3HGMkQxSfEmsNkhKsIcyfas0FzJXP5dKK+Wa2toa7y\natvOpWcw86/yLNAzVEApYYDYiFZfLl4sbHu69K4xPKceZ3usegZpT4AWrjso7pT9\nZxdDwkoCF7SaI6xNf5+cTtmB/5IcLs12GN9e9QHgyIPY9CKeR7xq+v5hn/uOeCT7\nzXEDhFhmNisIqrgkYXvvR1dKUFyIvR3GlcIw8dS24Mm5gDtPNh5j3V228BK9GAod\nHX1c1EuyLDMx+vKaeZarHkw9+5GezADEPdHQ9L/0Erx2+lngBTZAh6U1oAgl4w4=\n=hZ31\n-----END PGP SIGNATURE-----\n", "payload": "tree bcaf7fa07d64a997e307195d0b0c4ef7d5dd77f2\nparent 0a8d4db4d8ff70d50d92974f3b34fada51cc8dcf\nparent 66db8e52d7e75e20048af38d137db2fbe4aa9201\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1597130637 +0900\ncommitter GitHub <noreply@github.com> 1597130637 +0900\n\nRollup merge of #75359 - lcnr:unused-delims-trim, r=oli-obk\n\nunused_delims: trim expr\n\nimproves rustfix output.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca462d36ff46fd154da7226926148797ed76dc3d", "html_url": "https://github.com/rust-lang/rust/commit/ca462d36ff46fd154da7226926148797ed76dc3d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca462d36ff46fd154da7226926148797ed76dc3d/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a8d4db4d8ff70d50d92974f3b34fada51cc8dcf", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a8d4db4d8ff70d50d92974f3b34fada51cc8dcf", "html_url": "https://github.com/rust-lang/rust/commit/0a8d4db4d8ff70d50d92974f3b34fada51cc8dcf"}, {"sha": "66db8e52d7e75e20048af38d137db2fbe4aa9201", "url": "https://api.github.com/repos/rust-lang/rust/commits/66db8e52d7e75e20048af38d137db2fbe4aa9201", "html_url": "https://github.com/rust-lang/rust/commit/66db8e52d7e75e20048af38d137db2fbe4aa9201"}], "stats": {"total": 50, "additions": 26, "deletions": 24}, "files": [{"sha": "ecc8a192f18ea9566ba9c49b8aec4f02b01348ae", "filename": "src/librustc_lint/unused.rs", "status": "modified", "additions": 19, "deletions": 17, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Flibrustc_lint%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Flibrustc_lint%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Funused.rs?ref=ca462d36ff46fd154da7226926148797ed76dc3d", "patch": "@@ -481,25 +481,27 @@ trait UnusedDelimLint {\n             let mut err = lint.build(&span_msg);\n             let mut ate_left_paren = false;\n             let mut ate_right_paren = false;\n-            let parens_removed = pattern.trim_matches(|c| match c {\n-                '(' | '{' => {\n-                    if ate_left_paren {\n-                        false\n-                    } else {\n-                        ate_left_paren = true;\n-                        true\n+            let parens_removed = pattern\n+                .trim_matches(|c| match c {\n+                    '(' | '{' => {\n+                        if ate_left_paren {\n+                            false\n+                        } else {\n+                            ate_left_paren = true;\n+                            true\n+                        }\n                     }\n-                }\n-                ')' | '}' => {\n-                    if ate_right_paren {\n-                        false\n-                    } else {\n-                        ate_right_paren = true;\n-                        true\n+                    ')' | '}' => {\n+                        if ate_right_paren {\n+                            false\n+                        } else {\n+                            ate_right_paren = true;\n+                            true\n+                        }\n                     }\n-                }\n-                _ => false,\n-            });\n+                    _ => false,\n+                })\n+                .trim();\n \n             let replace = {\n                 let mut replace = if keep_space.0 {"}, {"sha": "836f26efc9601e7df2c5e00dc6e4c8c1e029c9e5", "filename": "src/test/ui/const-generics/unused_braces.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed?ref=ca462d36ff46fd154da7226926148797ed76dc3d", "patch": "@@ -10,6 +10,6 @@ struct A<const N: usize>;\n \n fn main() {\n     let _: A<7>; // ok\n-    let _: A< 7 >; //~ WARN unnecessary braces\n+    let _: A<7>; //~ WARN unnecessary braces\n     let _: A<{ 3 + 5 }>; // ok\n }"}, {"sha": "1a88d985dd86a6438bf0b6847895a8255c24d5fa", "filename": "src/test/ui/lint/unused_braces.fixed", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed?ref=ca462d36ff46fd154da7226926148797ed76dc3d", "patch": "@@ -23,18 +23,18 @@ fn main() {\n         }\n     }\n \n-    if  true  {\n+    if true {\n         //~^ WARN unnecessary braces\n     }\n \n-    while  false  {\n+    while false {\n         //~^ WARN unnecessary braces\n     }\n \n-    let _: [u8;  3 ];\n+    let _: [u8; 3];\n     //~^ WARN unnecessary braces\n \n-    consume( 7 );\n+    consume(7);\n     //~^ WARN unnecessary braces\n \n     // Do not emit lint for multiline blocks."}, {"sha": "583506f891d019af04aaa5cafe08a2eda050fee2", "filename": "src/test/ui/lint/unused_braces_borrow.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed?ref=ca462d36ff46fd154da7226926148797ed76dc3d", "patch": "@@ -21,6 +21,6 @@ fn main() {\n     };\n \n     consume(&{ a.b });\n-    consume( a.b );\n+    consume(a.b);\n     //~^ WARN unnecessary braces\n }"}, {"sha": "756081738c3d7403423d8bee9f97a493c0ea7fd1", "filename": "src/test/ui/try-block/try-block-unused-delims.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ca462d36ff46fd154da7226926148797ed76dc3d/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed?ref=ca462d36ff46fd154da7226926148797ed76dc3d", "patch": "@@ -11,7 +11,7 @@ fn main() {\n     consume(try {});\n     //~^ WARN unnecessary parentheses\n \n-    consume( try {} );\n+    consume(try {});\n     //~^ WARN unnecessary braces\n \n     match try {} {"}]}