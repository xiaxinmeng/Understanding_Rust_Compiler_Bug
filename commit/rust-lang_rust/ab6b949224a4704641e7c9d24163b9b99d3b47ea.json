{"sha": "ab6b949224a4704641e7c9d24163b9b99d3b47ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiNmI5NDkyMjRhNDcwNDY0MWU3YzlkMjQxNjNiOWI5OWQzYjQ3ZWE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-10T19:05:56Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-10T19:05:56Z"}, "message": "Refactor check_lit method", "tree": {"sha": "808632241c96f9c4d3943eb1b4d430ee7ea8b3b2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/808632241c96f9c4d3943eb1b4d430ee7ea8b3b2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab6b949224a4704641e7c9d24163b9b99d3b47ea", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAlyuPrEQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5hjNEACqXpTz7r5NrcUY5uB7ertbeUtvoB+FurjV\nro24r/PBVASUi3RpmP09TS6aeEtV7A1frs/ybUvOKiR4lkORVUg2mR2nrkW8ZCdY\nlykOt34ccGY34c52wMLVhV0PazBnLGnnRsjhDBrXRR7uUylnFWjnj6Ng9JAhyLlW\nSAHBNsr31Q/TAi4+SHN13NzEqLoM9JrQU+vFjO2g4xDzRq9hDr2ewqm4rZcqwksi\nAzeip8pSJeEufoZeAey4y9U6TM5eTKgSOPgeK+PCWQMQ3CnquB1ld6QJ/enH3HDs\nhj/m5PwzTsXtKyUJi89DqkhaH2vGY8jP6AEcfbA1N9EusKZFWXM1rgHOb5Buy4PJ\nJo0+RKuxv0ejVY9ZvVfVVr01fVI2z3jiR/dZyBi4seDeRkcaB3RjrCxtPVK9ICHQ\n5GZwamI5oPvYMvUZ56IvIeDBADYroMP80RUdZhp4I7Lvp93/dKCuVWRGtSwfnfir\nF7ED0W2e0ZDhpRaoIk9/vXqfd7C36zQk0IZ7ODFSgMJP5pEZjxRyF2YcWEETWlUv\ndwQlO/mOVEynrRRM6uaWlLN4GrMzUSLAjKluJ4ksvSMBj/hOQZDM38mQaR5prQJq\nK9M0CArI8p9IwRgqWtIKl8XQNeTsv17wlCbSMK7FvMhjJKbMPofn2iK+ijjES7Ib\nzTZwW4lTTg==\n=i2Nv\n-----END PGP SIGNATURE-----", "payload": "tree 808632241c96f9c4d3943eb1b4d430ee7ea8b3b2\nparent 1fd2451b901f26b3197b9c326ae8127f0788ef26\nauthor Philipp Hansch <dev@phansch.net> 1554923156 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1554923156 +0200\n\nRefactor check_lit method\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab6b949224a4704641e7c9d24163b9b99d3b47ea", "html_url": "https://github.com/rust-lang/rust/commit/ab6b949224a4704641e7c9d24163b9b99d3b47ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab6b949224a4704641e7c9d24163b9b99d3b47ea/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1fd2451b901f26b3197b9c326ae8127f0788ef26", "url": "https://api.github.com/repos/rust-lang/rust/commits/1fd2451b901f26b3197b9c326ae8127f0788ef26", "html_url": "https://github.com/rust-lang/rust/commit/1fd2451b901f26b3197b9c326ae8127f0788ef26"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "e97845314f9d4b075465c42c273b4af3c5196065", "filename": "clippy_lints/src/literal_representation.rs", "status": "modified", "additions": 13, "deletions": 17, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/ab6b949224a4704641e7c9d24163b9b99d3b47ea/clippy_lints%2Fsrc%2Fliteral_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6b949224a4704641e7c9d24163b9b99d3b47ea/clippy_lints%2Fsrc%2Fliteral_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fliteral_representation.rs?ref=ab6b949224a4704641e7c9d24163b9b99d3b47ea", "patch": "@@ -526,24 +526,20 @@ impl LiteralRepresentation {\n             if let Some(src) = snippet_opt(cx, lit.span);\n             if let Some(firstch) = src.chars().next();\n             if char::to_digit(firstch, 10).is_some();\n+            let digit_info = DigitInfo::new(&src, false);\n+            if digit_info.radix == Radix::Decimal;\n+            if let Ok(val) = digit_info.digits\n+                .chars()\n+                .filter(|&c| c != '_')\n+                .collect::<String>()\n+                .parse::<u128>();\n+            if val >= u128::from(self.threshold);\n             then {\n-                let digit_info = DigitInfo::new(&src, false);\n-                if digit_info.radix == Radix::Decimal {\n-                    if let Ok(val) = digit_info.digits\n-                        .chars()\n-                        .filter(|&c| c != '_')\n-                        .collect::<String>()\n-                        .parse::<u128>() {\n-                        if val < u128::from(self.threshold) {\n-                            return\n-                        }\n-                        let hex = format!(\"{:#X}\", val);\n-                        let digit_info = DigitInfo::new(&hex, false);\n-                        let _ = Self::do_lint(digit_info.digits).map_err(|warning_type| {\n-                            warning_type.display(&digit_info.grouping_hint(), cx, lit.span)\n-                        });\n-                    };\n-                }\n+                let hex = format!(\"{:#X}\", val);\n+                let digit_info = DigitInfo::new(&hex, false);\n+                let _ = Self::do_lint(digit_info.digits).map_err(|warning_type| {\n+                    warning_type.display(&digit_info.grouping_hint(), cx, lit.span)\n+                });\n             }\n         }\n     }"}]}