{"sha": "4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhMTg1MDlhOTgxNDlmYjNkNWM3M2RiZjBjNmRlNGNmYThkNDU5NmM=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-04-23T14:40:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-23T14:40:07Z"}, "message": "Merge #4099\n\n4099: Remove SyntaxPtr::range from more places r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "2e10739d01c0eccf3c2b4eabc43470c0a815dc7e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2e10739d01c0eccf3c2b4eabc43470c0a815dc7e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeoajICRBK7hj4Ov3rIwAAdHIIAIl4rUY9Yo1LDyKbw0UsJPmK\nuBMl9G7W4xFNm67N1cO4hh/uQnD9msUa/0L0uKmlrnkoT+bMvUBWUK76VluMRew7\njCHg+KWzrcaaVCkV93PzmD3mEflODtL0KohawBLjS6Sost0wnb8GyR6vut/zOtVN\nafHNa7yrg/N+OLpM1y0tjAOHlXNnh/8jZjgfTGFRRSFbWWMDrd8RVQGts2tmW4f1\nLqsVh3XJYHtIEdHYDBoeCZ/qkMat/ZVouUzmi+tBHfdzFRjDK5G3P+I0dak85JxP\nDFUpX6dD5TMmUQBjDWn0N4JjShaHDLm7ICBJoozAu/ckfyExKRL/qPVXzx2/I40=\n=MWcz\n-----END PGP SIGNATURE-----\n", "payload": "tree 2e10739d01c0eccf3c2b4eabc43470c0a815dc7e\nparent 0502be3bf4539d24d34d24f3a4b9521d99a32aee\nparent 4176c03d1254a462da1c84a3a1185c8f2161e8a8\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1587652807 +0000\ncommitter GitHub <noreply@github.com> 1587652807 +0000\n\nMerge #4099\n\n4099: Remove SyntaxPtr::range from more places r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "html_url": "https://github.com/rust-lang/rust/commit/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0502be3bf4539d24d34d24f3a4b9521d99a32aee", "url": "https://api.github.com/repos/rust-lang/rust/commits/0502be3bf4539d24d34d24f3a4b9521d99a32aee", "html_url": "https://github.com/rust-lang/rust/commit/0502be3bf4539d24d34d24f3a4b9521d99a32aee"}, {"sha": "4176c03d1254a462da1c84a3a1185c8f2161e8a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/4176c03d1254a462da1c84a3a1185c8f2161e8a8", "html_url": "https://github.com/rust-lang/rust/commit/4176c03d1254a462da1c84a3a1185c8f2161e8a8"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "5b36a7cc14df54f6b667601cb13ac7d34efd4342", "filename": "crates/ra_hir_def/src/body/scope.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs?ref=4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "patch": "@@ -325,8 +325,11 @@ mod tests {\n         let resolved = scopes.resolve_name_in_scope(expr_scope, &name_ref.as_name()).unwrap();\n         let pat_src = source_map.pat_syntax(resolved.pat()).unwrap();\n \n-        let local_name = pat_src.value.either(|it| it.syntax_node_ptr(), |it| it.syntax_node_ptr());\n-        assert_eq!(local_name.range(), expected_name.syntax().text_range());\n+        let local_name = pat_src.value.either(\n+            |it| it.syntax_node_ptr().to_node(file.syntax()),\n+            |it| it.syntax_node_ptr().to_node(file.syntax()),\n+        );\n+        assert_eq!(local_name.text_range(), expected_name.syntax().text_range());\n     }\n \n     #[test]"}, {"sha": "67bc9c31b5bfab03f2f91147442ab4aedfe9791b", "filename": "crates/ra_ide/src/display/navigation_target.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs?ref=4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "patch": "@@ -176,7 +176,7 @@ impl ToNav for FileSymbol {\n             file_id: self.file_id,\n             name: self.name.clone(),\n             kind: self.kind,\n-            full_range: self.ptr.range(),\n+            full_range: self.range,\n             focus_range: self.name_range,\n             container_name: self.container_name.clone(),\n             description: description_from_symbol(db, self),"}, {"sha": "95be11134554cca9e66fd35be7bbe7ed07cac356", "filename": "crates/ra_ide_db/src/symbol_index.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_db%2Fsrc%2Fsymbol_index.rs?ref=4a18509a98149fb3d5c73dbf0c6de4cfa8d4596c", "patch": "@@ -313,6 +313,7 @@ pub struct FileSymbol {\n     pub file_id: FileId,\n     pub name: SmolStr,\n     pub kind: SyntaxKind,\n+    pub range: TextRange,\n     pub ptr: SyntaxNodePtr,\n     pub name_range: Option<TextRange>,\n     pub container_name: Option<SmolStr>,\n@@ -379,6 +380,7 @@ fn to_file_symbol(node: &SyntaxNode, file_id: FileId) -> Option<FileSymbol> {\n     to_symbol(node).map(move |(name, ptr, name_range)| FileSymbol {\n         name,\n         kind: node.kind(),\n+        range: node.text_range(),\n         ptr,\n         file_id,\n         name_range: Some(name_range),"}]}