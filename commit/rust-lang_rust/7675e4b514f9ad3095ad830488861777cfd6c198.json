{"sha": "7675e4b514f9ad3095ad830488861777cfd6c198", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2NzVlNGI1MTRmOWFkMzA5NWFkODMwNDg4ODYxNzc3Y2ZkNmMxOTg=", "commit": {"author": {"name": "Jacob", "email": "jacob@yola.com", "date": "2016-08-17T05:21:31Z"}, "committer": {"name": "Jacob", "email": "jacob@yola.com", "date": "2016-08-17T05:21:31Z"}, "message": "Update E0009 to new format", "tree": {"sha": "800eac09e55b114b4ebd632cb9aef07e7a255f47", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/800eac09e55b114b4ebd632cb9aef07e7a255f47"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7675e4b514f9ad3095ad830488861777cfd6c198", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7675e4b514f9ad3095ad830488861777cfd6c198", "html_url": "https://github.com/rust-lang/rust/commit/7675e4b514f9ad3095ad830488861777cfd6c198", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7675e4b514f9ad3095ad830488861777cfd6c198/comments", "author": null, "committer": null, "parents": [{"sha": "197be89f367d1240d5f9cd9c4efd77812775354e", "url": "https://api.github.com/repos/rust-lang/rust/commits/197be89f367d1240d5f9cd9c4efd77812775354e", "html_url": "https://github.com/rust-lang/rust/commit/197be89f367d1240d5f9cd9c4efd77812775354e"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "a85fd896f0f954c8857fcdce656f22991fedbc51", "filename": "src/librustc_const_eval/check_match.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7675e4b514f9ad3095ad830488861777cfd6c198/src%2Flibrustc_const_eval%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7675e4b514f9ad3095ad830488861777cfd6c198/src%2Flibrustc_const_eval%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_eval%2Fcheck_match.rs?ref=7675e4b514f9ad3095ad830488861777cfd6c198", "patch": "@@ -1120,10 +1120,11 @@ fn check_legality_of_move_bindings(cx: &MatchCheckCtxt,\n                 .span_label(p.span, &format!(\"moves value into pattern guard\"))\n                 .emit();\n         } else if by_ref_span.is_some() {\n-            let mut err = struct_span_err!(cx.tcx.sess, p.span, E0009,\n-                                           \"cannot bind by-move and by-ref in the same pattern\");\n-            span_note!(&mut err, by_ref_span.unwrap(), \"by-ref binding occurs here\");\n-            err.emit();\n+            struct_span_err!(cx.tcx.sess, p.span, E0009,\n+                            \"cannot bind by-move and by-ref in the same pattern\")\n+                    .span_label(p.span, &format!(\"by-move pattern here\"))\n+                    .span_label(by_ref_span.unwrap(), &format!(\"both by-ref and by-move used\"))\n+                    .emit();\n         }\n     };\n "}, {"sha": "4ce3b72e449df5c1a613eeb461ae3ded1901746e", "filename": "src/test/compile-fail/E0009.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7675e4b514f9ad3095ad830488861777cfd6c198/src%2Ftest%2Fcompile-fail%2FE0009.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7675e4b514f9ad3095ad830488861777cfd6c198/src%2Ftest%2Fcompile-fail%2FE0009.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0009.rs?ref=7675e4b514f9ad3095ad830488861777cfd6c198", "patch": "@@ -12,7 +12,10 @@ fn main() {\n     struct X { x: (), }\n     let x = Some((X { x: () }, X { x: () }));\n     match x {\n-        Some((y, ref z)) => {}, //~ ERROR E0009\n+        Some((y, ref z)) => {}, \n+        //~^ ERROR E0009\n+        //~| NOTE by-move pattern here\n+        //~| NOTE both by-ref and by-move used\n         None => panic!()\n     }\n }"}]}