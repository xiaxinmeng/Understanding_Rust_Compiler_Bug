{"sha": "70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "node_id": "C_kwDOAAsO6NoAKDcwYmJjY2VhZWNjYzUyOTY3MGY5YzlkNjBjZDRmYjAzOGVlNDlmZTQ", "commit": {"author": {"name": "Obei Sideg", "email": "obei.sideg@gmail.com", "date": "2023-05-29T19:30:09Z"}, "committer": {"name": "Obei Sideg", "email": "obei.sideg@gmail.com", "date": "2023-05-29T19:33:46Z"}, "message": "Add test for `#![doc(test(...)]` with literal parameter", "tree": {"sha": "de8209cc915c3d08e245f1708f67e0d4dfb19a28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de8209cc915c3d08e245f1708f67e0d4dfb19a28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "html_url": "https://github.com/rust-lang/rust/commit/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/comments", "author": {"login": "obeis", "id": 54103142, "node_id": "MDQ6VXNlcjU0MTAzMTQy", "avatar_url": "https://avatars.githubusercontent.com/u/54103142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/obeis", "html_url": "https://github.com/obeis", "followers_url": "https://api.github.com/users/obeis/followers", "following_url": "https://api.github.com/users/obeis/following{/other_user}", "gists_url": "https://api.github.com/users/obeis/gists{/gist_id}", "starred_url": "https://api.github.com/users/obeis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/obeis/subscriptions", "organizations_url": "https://api.github.com/users/obeis/orgs", "repos_url": "https://api.github.com/users/obeis/repos", "events_url": "https://api.github.com/users/obeis/events{/privacy}", "received_events_url": "https://api.github.com/users/obeis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "obeis", "id": 54103142, "node_id": "MDQ6VXNlcjU0MTAzMTQy", "avatar_url": "https://avatars.githubusercontent.com/u/54103142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/obeis", "html_url": "https://github.com/obeis", "followers_url": "https://api.github.com/users/obeis/followers", "following_url": "https://api.github.com/users/obeis/following{/other_user}", "gists_url": "https://api.github.com/users/obeis/gists{/gist_id}", "starred_url": "https://api.github.com/users/obeis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/obeis/subscriptions", "organizations_url": "https://api.github.com/users/obeis/orgs", "repos_url": "https://api.github.com/users/obeis/repos", "events_url": "https://api.github.com/users/obeis/events{/privacy}", "received_events_url": "https://api.github.com/users/obeis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "33eef8221db63c6871f5c1957521b40e65eb3c5d", "url": "https://api.github.com/repos/rust-lang/rust/commits/33eef8221db63c6871f5c1957521b40e65eb3c5d", "html_url": "https://github.com/rust-lang/rust/commit/33eef8221db63c6871f5c1957521b40e65eb3c5d"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "e76f1614b93345dd3ed9ea2561d0b414be5fe99f", "filename": "compiler/rustc_passes/messages.ftl", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/compiler%2Frustc_passes%2Fmessages.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/compiler%2Frustc_passes%2Fmessages.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fmessages.ftl?ref=70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "patch": "@@ -211,11 +211,11 @@ passes_doc_keyword_not_mod =\n passes_doc_keyword_only_impl =\n     `#[doc(keyword = \"...\")]` should be used on impl blocks\n \n+passes_doc_test_literal = `#![doc(test(...)]` does not take a literal\n+\n passes_doc_test_takes_list =\n     `#[doc(test(...)]` takes a list of attributes\n \n-passes_doc_test_literal = `#![doc(test(...)]` does not take a literal\n-\n passes_doc_test_unknown =\n     unknown `doc(test)` attribute `{$path}`\n "}, {"sha": "a06a1afcb3f2ff468de46f3bc1ebe9bc5ae5d11a", "filename": "tests/ui/attributes/doc-test-literal.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/tests%2Fui%2Fattributes%2Fdoc-test-literal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/tests%2Fui%2Fattributes%2Fdoc-test-literal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattributes%2Fdoc-test-literal.rs?ref=70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "patch": "@@ -0,0 +1,7 @@\n+#![deny(warnings)]\n+\n+#![doc(test(\"\"))]\n+//~^ ERROR `#![doc(test(...)]` does not take a literal\n+//~^^ WARN this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+\n+fn main() {}"}, {"sha": "ebee09994ba9fa95fb3beb97bc00dcca5ab866f4", "filename": "tests/ui/attributes/doc-test-literal.stderr", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/tests%2Fui%2Fattributes%2Fdoc-test-literal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/70bbcceaeccc529670f9c9d60cd4fb038ee49fe4/tests%2Fui%2Fattributes%2Fdoc-test-literal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattributes%2Fdoc-test-literal.stderr?ref=70bbcceaeccc529670f9c9d60cd4fb038ee49fe4", "patch": "@@ -0,0 +1,17 @@\n+error: `#![doc(test(...)]` does not take a literal\n+  --> $DIR/doc-test-literal.rs:3:13\n+   |\n+LL | #![doc(test(\"\"))]\n+   |             ^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #82730 <https://github.com/rust-lang/rust/issues/82730>\n+note: the lint level is defined here\n+  --> $DIR/doc-test-literal.rs:1:9\n+   |\n+LL | #![deny(warnings)]\n+   |         ^^^^^^^^\n+   = note: `#[deny(invalid_doc_attributes)]` implied by `#[deny(warnings)]`\n+\n+error: aborting due to previous error\n+"}]}