{"sha": "faa3e233169523f6bb1537d9b6b2aabe66efd01b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhYTNlMjMzMTY5NTIzZjZiYjE1MzdkOWI2YjJhYWJlNjZlZmQwMWI=", "commit": {"author": {"name": "chansuke", "email": "chansuke@georepublic.de", "date": "2020-11-03T00:00:30Z"}, "committer": {"name": "chansuke", "email": "chansuke@georepublic.de", "date": "2020-11-10T09:54:47Z"}, "message": "Add exteranal macros for as_conversions", "tree": {"sha": "5184d9d209974257c881a96b7ca1033e7b138fbc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5184d9d209974257c881a96b7ca1033e7b138fbc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/faa3e233169523f6bb1537d9b6b2aabe66efd01b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/faa3e233169523f6bb1537d9b6b2aabe66efd01b", "html_url": "https://github.com/rust-lang/rust/commit/faa3e233169523f6bb1537d9b6b2aabe66efd01b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/faa3e233169523f6bb1537d9b6b2aabe66efd01b/comments", "author": null, "committer": null, "parents": [{"sha": "dd826b4626c00da53f76f00f02f03556803e9cdb", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd826b4626c00da53f76f00f02f03556803e9cdb", "html_url": "https://github.com/rust-lang/rust/commit/dd826b4626c00da53f76f00f02f03556803e9cdb"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "cd745feec6d8acc81063dae1d74b6f0a0a4e85e2", "filename": "tests/ui/as_conversions.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fas_conversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fas_conversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fas_conversions.rs?ref=faa3e233169523f6bb1537d9b6b2aabe66efd01b", "patch": "@@ -1,7 +1,19 @@\n-#[warn(clippy::as_conversions)]\n+// aux-build:macro_rules.rs\n+\n+#![warn(clippy::as_conversions)]\n+\n+#[macro_use]\n+extern crate macro_rules;\n+\n+fn with_external_macro() {\n+    as_conv_with_arg!(0u32 as u64);\n+    as_conv!();\n+}\n \n fn main() {\n     let i = 0u32 as u64;\n \n     let j = &i as *const u64 as *mut u64;\n+\n+    with_external_macro();\n }"}, {"sha": "f5f75d3aee04a40f2032684353aa310418343389", "filename": "tests/ui/as_conversions.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fas_conversions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fas_conversions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fas_conversions.stderr?ref=faa3e233169523f6bb1537d9b6b2aabe66efd01b", "patch": "@@ -1,5 +1,5 @@\n error: using a potentially dangerous silent `as` conversion\n-  --> $DIR/as_conversions.rs:4:13\n+  --> $DIR/as_conversions.rs:14:13\n    |\n LL |     let i = 0u32 as u64;\n    |             ^^^^^^^^^^^\n@@ -8,15 +8,15 @@ LL |     let i = 0u32 as u64;\n    = help: consider using a safe wrapper for this conversion\n \n error: using a potentially dangerous silent `as` conversion\n-  --> $DIR/as_conversions.rs:6:13\n+  --> $DIR/as_conversions.rs:16:13\n    |\n LL |     let j = &i as *const u64 as *mut u64;\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider using a safe wrapper for this conversion\n \n error: using a potentially dangerous silent `as` conversion\n-  --> $DIR/as_conversions.rs:6:13\n+  --> $DIR/as_conversions.rs:16:13\n    |\n LL |     let j = &i as *const u64 as *mut u64;\n    |             ^^^^^^^^^^^^^^^^"}, {"sha": "f985a15eda2bb5cbc48fecbbdd1e8c1b0205346e", "filename": "tests/ui/auxiliary/macro_rules.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fauxiliary%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/faa3e233169523f6bb1537d9b6b2aabe66efd01b/tests%2Fui%2Fauxiliary%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauxiliary%2Fmacro_rules.rs?ref=faa3e233169523f6bb1537d9b6b2aabe66efd01b", "patch": "@@ -70,3 +70,17 @@ macro_rules! ref_arg_function {\n         fn fun_example(ref _x: usize) {}\n     };\n }\n+\n+#[macro_export]\n+macro_rules! as_conv_with_arg {\n+    (0u32 as u64) => {\n+        ()\n+    };\n+}\n+\n+#[macro_export]\n+macro_rules! as_conv {\n+    () => {\n+        0u32 as u64\n+    };\n+}"}]}