{"sha": "b287b56f97288cc4605329f76e31cb7604474aef", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIyODdiNTZmOTcyODhjYzQ2MDUzMjlmNzZlMzFjYjc2MDQ0NzRhZWY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-18T16:18:07Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-18T16:18:07Z"}, "message": "Auto merge of #75635 - Aaron1011:fix/incr-fn-param-names, r=eddyb\n\nDon't use `dep_graph.with_ignore` when encoding fn param names\n\nThe call to `with_ignore` was added years ago, and should no longer be\nnecessary with the modern incremental query infrastructure.\n\nI also removed a related FIXME comment for issue #38501, which was\nclosed months ago.", "tree": {"sha": "e60db12c9e755c488ba7f5ba2e9d335be3aa64de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e60db12c9e755c488ba7f5ba2e9d335be3aa64de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b287b56f97288cc4605329f76e31cb7604474aef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b287b56f97288cc4605329f76e31cb7604474aef", "html_url": "https://github.com/rust-lang/rust/commit/b287b56f97288cc4605329f76e31cb7604474aef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b287b56f97288cc4605329f76e31cb7604474aef/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a45dedf3d07dd2c088d89b5e5b7f4c7912b0812f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a45dedf3d07dd2c088d89b5e5b7f4c7912b0812f", "html_url": "https://github.com/rust-lang/rust/commit/a45dedf3d07dd2c088d89b5e5b7f4c7912b0812f"}, {"sha": "5d40e4515f33343f919aaaa7c37e6ec4c779ea09", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d40e4515f33343f919aaaa7c37e6ec4c779ea09", "html_url": "https://github.com/rust-lang/rust/commit/5d40e4515f33343f919aaaa7c37e6ec4c779ea09"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "50c2ad8148a1421819a24314e586828a6b29de5e", "filename": "src/librustc_metadata/rmeta/decoder/cstore_impl.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b287b56f97288cc4605329f76e31cb7604474aef/src%2Flibrustc_metadata%2Frmeta%2Fdecoder%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b287b56f97288cc4605329f76e31cb7604474aef/src%2Flibrustc_metadata%2Frmeta%2Fdecoder%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Frmeta%2Fdecoder%2Fcstore_impl.rs?ref=b287b56f97288cc4605329f76e31cb7604474aef", "patch": "@@ -136,10 +136,6 @@ provide! { <'tcx> tcx, def_id, other, cdata,\n     item_attrs => { tcx.arena.alloc_from_iter(\n         cdata.get_item_attrs(def_id.index, tcx.sess).into_iter()\n     ) }\n-    // FIXME(#38501) We've skipped a `read` on the `hir_owner_nodes` of\n-    // a `fn` when encoding, so the dep-tracking wouldn't work.\n-    // This is only used by rustdoc anyway, which shouldn't have\n-    // incremental recompilation ever enabled.\n     fn_arg_names => { cdata.get_fn_param_names(tcx, def_id.index) }\n     rendered_const => { cdata.get_rendered_const(def_id.index) }\n     impl_parent => { cdata.get_parent_impl(def_id.index) }"}, {"sha": "78abf341e33a9e08b6bb68548dfcc7785ccd1c4b", "filename": "src/librustc_metadata/rmeta/encoder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b287b56f97288cc4605329f76e31cb7604474aef/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b287b56f97288cc4605329f76e31cb7604474aef/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Frmeta%2Fencoder.rs?ref=b287b56f97288cc4605329f76e31cb7604474aef", "patch": "@@ -1089,7 +1089,7 @@ impl EncodeContext<'a, 'tcx> {\n     }\n \n     fn encode_fn_param_names_for_body(&mut self, body_id: hir::BodyId) -> Lazy<[Ident]> {\n-        self.tcx.dep_graph.with_ignore(|| self.lazy(self.tcx.hir().body_param_names(body_id)))\n+        self.lazy(self.tcx.hir().body_param_names(body_id))\n     }\n \n     fn encode_fn_param_names(&mut self, param_names: &[Ident]) -> Lazy<[Ident]> {"}]}