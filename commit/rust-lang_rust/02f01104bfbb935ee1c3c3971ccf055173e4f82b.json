{"sha": "02f01104bfbb935ee1c3c3971ccf055173e4f82b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyZjAxMTA0YmZiYjkzNWVlMWMzYzM5NzFjY2YwNTUxNzNlNGY4MmI=", "commit": {"author": {"name": "Geoffrey Copin", "email": "copin.geoffrey@gmail.com", "date": "2020-10-22T22:04:27Z"}, "committer": {"name": "Geoffrey Copin", "email": "copin.geoffrey@gmail.com", "date": "2020-10-22T22:04:27Z"}, "message": "Add test case for negative literals", "tree": {"sha": "8d81ab678e6b8ecbce68cb6443441296543ea322", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d81ab678e6b8ecbce68cb6443441296543ea322"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02f01104bfbb935ee1c3c3971ccf055173e4f82b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02f01104bfbb935ee1c3c3971ccf055173e4f82b", "html_url": "https://github.com/rust-lang/rust/commit/02f01104bfbb935ee1c3c3971ccf055173e4f82b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02f01104bfbb935ee1c3c3971ccf055173e4f82b/comments", "author": {"login": "geoffreycopin", "id": 32264033, "node_id": "MDQ6VXNlcjMyMjY0MDMz", "avatar_url": "https://avatars.githubusercontent.com/u/32264033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffreycopin", "html_url": "https://github.com/geoffreycopin", "followers_url": "https://api.github.com/users/geoffreycopin/followers", "following_url": "https://api.github.com/users/geoffreycopin/following{/other_user}", "gists_url": "https://api.github.com/users/geoffreycopin/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffreycopin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffreycopin/subscriptions", "organizations_url": "https://api.github.com/users/geoffreycopin/orgs", "repos_url": "https://api.github.com/users/geoffreycopin/repos", "events_url": "https://api.github.com/users/geoffreycopin/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffreycopin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "geoffreycopin", "id": 32264033, "node_id": "MDQ6VXNlcjMyMjY0MDMz", "avatar_url": "https://avatars.githubusercontent.com/u/32264033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffreycopin", "html_url": "https://github.com/geoffreycopin", "followers_url": "https://api.github.com/users/geoffreycopin/followers", "following_url": "https://api.github.com/users/geoffreycopin/following{/other_user}", "gists_url": "https://api.github.com/users/geoffreycopin/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffreycopin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffreycopin/subscriptions", "organizations_url": "https://api.github.com/users/geoffreycopin/orgs", "repos_url": "https://api.github.com/users/geoffreycopin/repos", "events_url": "https://api.github.com/users/geoffreycopin/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffreycopin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8f12d2f02644834282dec0c27710886f1e85ae6", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8f12d2f02644834282dec0c27710886f1e85ae6", "html_url": "https://github.com/rust-lang/rust/commit/e8f12d2f02644834282dec0c27710886f1e85ae6"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "3a088709a7e4c0fd8b45464aadc9162bd91413f3", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/02f01104bfbb935ee1c3c3971ccf055173e4f82b/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02f01104bfbb935ee1c3c3971ccf055173e4f82b/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=02f01104bfbb935ee1c3c3971ccf055173e4f82b", "patch": "@@ -1601,7 +1601,7 @@ impl<'tcx> LateLintPass<'tcx> for Casts {\n             let (cast_from, cast_to) = (cx.typeck_results().expr_ty(ex), cx.typeck_results().expr_ty(expr));\n             lint_fn_to_numeric_cast(cx, expr, ex, cast_from, cast_to);\n             if let Some(lit) = get_numeric_literal(ex) {\n-                let literal_str = snippet_opt(cx, lit.span).unwrap_or_default();\n+                let literal_str = snippet_opt(cx, ex.span).unwrap_or_default();\n \n                 if_chain! {\n                     if let LitKind::Int(n, _) = lit.node;"}, {"sha": "2a13469b1465290c1e8b31bdb9b08339191ccb45", "filename": "tests/ui/unnecessary_cast_fixable.fixed", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_cast_fixable.fixed?ref=02f01104bfbb935ee1c3c3971ccf055173e4f82b", "patch": "@@ -29,4 +29,7 @@ fn main() {\n     0.5_f32;\n \n     1.0 as u16;\n+\n+    -1_i32;\n+    -1.0_f32;\n }"}, {"sha": "65ddd3c7fbfb2ac9e04eb204eb5632553e6ba400", "filename": "tests/ui/unnecessary_cast_fixable.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_cast_fixable.rs?ref=02f01104bfbb935ee1c3c3971ccf055173e4f82b", "patch": "@@ -29,4 +29,7 @@ fn main() {\n     0.5 as f32;\n \n     1.0 as u16;\n+\n+    -1 as i32;\n+    -1.0 as f32;\n }"}, {"sha": "26b23e315e3f18ed6436f98c0666e38e78d6b211", "filename": "tests/ui/unnecessary_cast_fixable.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/02f01104bfbb935ee1c3c3971ccf055173e4f82b/tests%2Fui%2Funnecessary_cast_fixable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_cast_fixable.stderr?ref=02f01104bfbb935ee1c3c3971ccf055173e4f82b", "patch": "@@ -60,5 +60,17 @@ error: casting float literal to `f32` is unnecessary\n LL |     0.5 as f32;\n    |     ^^^^^^^^^^ help: try: `0.5_f32`\n \n-error: aborting due to 10 previous errors\n+error: casting integer literal to `i32` is unnecessary\n+  --> $DIR/unnecessary_cast_fixable.rs:33:5\n+   |\n+LL |     -1 as i32;\n+   |     ^^^^^^^^^ help: try: `-1_i32`\n+\n+error: casting float literal to `f32` is unnecessary\n+  --> $DIR/unnecessary_cast_fixable.rs:34:5\n+   |\n+LL |     -1.0 as f32;\n+   |     ^^^^^^^^^^^ help: try: `-1.0_f32`\n+\n+error: aborting due to 12 previous errors\n "}]}