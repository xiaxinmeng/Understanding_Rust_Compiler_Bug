{"sha": "08ab38a7036da7a014afc899c5a741e967f45a49", "node_id": "C_kwDOAAsO6NoAKDA4YWIzOGE3MDM2ZGE3YTAxNGFmYzg5OWM1YTc0MWU5NjdmNDVhNDk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-04-06T16:42:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-04-06T16:42:58Z"}, "message": "Rollup merge of #109977 - notriddle:notriddle/data-nosnippet, r=jsha,the8472\n\nrustdoc: avoid including line numbers in Google SERP snippets\n\n![image](https://user-images.githubusercontent.com/1593513/230141184-9171c8e0-de92-48e6-85b6-8baee35e6d86.png)", "tree": {"sha": "013fc4ec1445daecb106c34e9012ae4fb8cb37b6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/013fc4ec1445daecb106c34e9012ae4fb8cb37b6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/08ab38a7036da7a014afc899c5a741e967f45a49", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkLvaSCRBK7hj4Ov3rIwAACQ8IAHGIF2zh8xHM8BRWGNM7tPSA\n6NtXLZBb51OPFHMVIG8QKx9b7FmE7zJ2fwOmyXi5Y1z+X3tpfvvUUftTgHDadi7T\n35M0f/nQYGknY1+VpCznWiIdNHUa1GrAus+ZaAu5i1VY41S8+cbYdU/tslOn0dMX\nGUX82H/WU0lc2IFIupjyKKD7KWw2SmLCppicP1eUlJkNmGolNWFdgxyTUnN/CHbp\n6JxqoJt8OtSHw9ayjrZD8w2Od55qdbfIZdIdmwqahdiYmDG+Ih7Bp94iL8g5GPhs\nqX6k57yAMGeE2IsGy8v8MJ8MQvdqBM6UaOtMRh7qJoI8VBQ5IbsKMeBSRfJ5ke0=\n=iqv4\n-----END PGP SIGNATURE-----\n", "payload": "tree 013fc4ec1445daecb106c34e9012ae4fb8cb37b6\nparent b153e2bd122ab5993fa9837a81b7647266ae6178\nparent e9daab25deb3bcfb98716ccd45d02674e0556275\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1680799378 +0200\ncommitter GitHub <noreply@github.com> 1680799378 +0200\n\nRollup merge of #109977 - notriddle:notriddle/data-nosnippet, r=jsha,the8472\n\nrustdoc: avoid including line numbers in Google SERP snippets\n\n![image](https://user-images.githubusercontent.com/1593513/230141184-9171c8e0-de92-48e6-85b6-8baee35e6d86.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/08ab38a7036da7a014afc899c5a741e967f45a49", "html_url": "https://github.com/rust-lang/rust/commit/08ab38a7036da7a014afc899c5a741e967f45a49", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/08ab38a7036da7a014afc899c5a741e967f45a49/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b153e2bd122ab5993fa9837a81b7647266ae6178", "url": "https://api.github.com/repos/rust-lang/rust/commits/b153e2bd122ab5993fa9837a81b7647266ae6178", "html_url": "https://github.com/rust-lang/rust/commit/b153e2bd122ab5993fa9837a81b7647266ae6178"}, {"sha": "e9daab25deb3bcfb98716ccd45d02674e0556275", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9daab25deb3bcfb98716ccd45d02674e0556275", "html_url": "https://github.com/rust-lang/rust/commit/e9daab25deb3bcfb98716ccd45d02674e0556275"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "9df1935256730c524696e8ddd293b1e6aaf0a339", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/08ab38a7036da7a014afc899c5a741e967f45a49/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/08ab38a7036da7a014afc899c5a741e967f45a49/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=08ab38a7036da7a014afc899c5a741e967f45a49", "patch": "@@ -352,7 +352,7 @@ pre.item-decl {\n .source .content pre {\n \tpadding: 20px;\n }\n-.rustdoc.source .example-wrap > pre.src-line-numbers  {\n+.rustdoc.source .example-wrap pre.src-line-numbers  {\n \tpadding: 20px 0 20px 4px;\n }\n \n@@ -537,17 +537,17 @@ ul.block, .block li {\n \tmargin-bottom: 0px;\n }\n \n-.rustdoc .example-wrap > pre {\n+.rustdoc .example-wrap pre {\n \tmargin: 0;\n \tflex-grow: 1;\n }\n \n-.rustdoc:not(.source) .example-wrap > pre {\n+.rustdoc:not(.source) .example-wrap pre {\n \toverflow: auto hidden;\n }\n \n-.rustdoc .example-wrap > pre.example-line-numbers,\n-.rustdoc .example-wrap > pre.src-line-numbers {\n+.rustdoc .example-wrap pre.example-line-numbers,\n+.rustdoc .example-wrap pre.src-line-numbers {\n \tflex-grow: 0;\n \tmin-width: fit-content; /* prevent collapsing into nothing in truncated scraped examples */\n \toverflow: initial;\n@@ -558,7 +558,7 @@ ul.block, .block li {\n \tcolor: var(--src-line-numbers-span-color);\n }\n \n-.rustdoc .example-wrap > pre.src-line-numbers {\n+.rustdoc .example-wrap pre.src-line-numbers {\n \tpadding: 14px 0;\n }\n .src-line-numbers a, .src-line-numbers span {\n@@ -706,7 +706,7 @@ h2.small-section-header > .anchor {\n }\n \n .main-heading a:hover,\n-.example-wrap > .rust a:hover,\n+.example-wrap .rust a:hover,\n .all-items a:hover,\n .docblock a:not(.test-arrow):not(.scrape-help):not(.tooltip):hover,\n .docblock-short a:not(.test-arrow):not(.scrape-help):not(.tooltip):hover,"}, {"sha": "42d01277db2c2f68a55c11fac0d66a1aa011f1d4", "filename": "src/librustdoc/html/templates/source.html", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/08ab38a7036da7a014afc899c5a741e967f45a49/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fsource.html", "raw_url": "https://github.com/rust-lang/rust/raw/08ab38a7036da7a014afc899c5a741e967f45a49/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fsource.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fsource.html?ref=08ab38a7036da7a014afc899c5a741e967f45a49", "patch": "@@ -1,13 +1,15 @@\n <div class=\"example-wrap\"> {# #}\n-    <pre class=\"src-line-numbers\">\n+    {# https://developers.google.com/search/docs/crawling-indexing/robots-meta-tag#data-nosnippet-attr\n+       Do not show \"1 2 3 4 5 ...\" in web search results. #}\n+    <div data-nosnippet><pre class=\"src-line-numbers\">\n         {% for line in lines.clone() %}\n             {% if embedded %}\n                 <span>{{line|safe}}</span>\n             {%~ else %}\n                 <a href=\"#{{line|safe}}\" id=\"{{line|safe}}\">{{line|safe}}</a>\n             {%~ endif %}\n         {% endfor %}\n-    </pre> {# #}\n+    </pre></div> {# #}\n     <pre class=\"rust\"> {# #}\n         <code>\n             {% if needs_expansion %}"}]}