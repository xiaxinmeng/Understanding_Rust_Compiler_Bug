{"sha": "ff112644defc6a982bfd6a793afbeb3155173742", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmMTEyNjQ0ZGVmYzZhOTgyYmZkNmE3OTNhZmJlYjMxNTUxNzM3NDI=", "commit": {"author": {"name": "Doug Goldstein", "email": "cardoe@cardoe.com", "date": "2016-04-07T21:36:35Z"}, "committer": {"name": "Doug Goldstein", "email": "cardoe@cardoe.com", "date": "2016-12-02T16:07:38Z"}, "message": "rustc: add --print target-spec option\n\nThis option provides the user the ability to dump the configuration that\nis in use by rustc for the target they are building for.\n\nSigned-off-by: Doug Goldstein <cardoe@cardoe.com>", "tree": {"sha": "1c07c59725c5aa282d86b5c5038045e8644b68f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c07c59725c5aa282d86b5c5038045e8644b68f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff112644defc6a982bfd6a793afbeb3155173742", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2.0\n\niQJ8BAABCgBmBQJYQZxKXxSAAAAAAC4AKGlzc3Vlci1mcHJAbm90YXRpb25zLm9w\nZW5wZ3AuZmlmdGhob3JzZW1hbi5uZXRBNTM5MEQ2RTNFMTkyNzlCNzVDMzIwOTVB\nMkJDMDNEQzg3RUQxQkQ0AAoJEKK8A9yH7RvUUA8QAITz2JKW/YLBTzAzdLlxdqYh\nYsSsB12T3DAvwky0MLkcFUXzT/4Mb0rF6RkayvlsKTVyPiXKyW/q83LQGKHNNkBc\nJDejG9aNEJ2DbdedNIlk6QZHfxZi4OIVRF/4YO6CdGRt0Wnlz0KSlsNOoadwdiFb\noT2taARUhK2rr6bS9MLFatrTZgnIIF09rYzgJHsRTH1X75NAfpnOihJ4png5zRGj\nNbOtl5EVdhs4Jw/umCL8VydgXoDCz9DjN0O7DXdplrUSUVa2fYKdebYR4/wHFEwS\nxv/QDZSCgEifiYBbfDs/8ViGMZwT0oiEKkbu8AqzKreCdjJmTHS6hahfXPwHLJe2\nCyuusRDUqvvGgk984uqxG7QAzUArgzqOoHn97KphS2bkI0UZ+BVII1YtarXZJaOs\nMg6rG4h4Xu5xZT5onHkvxmZr+sx0TS5b2uFwWdWdKu1Y1jdRETIMZ7wh5PzdJOOl\n3Gfybd4roZAKeY9vy5a02J9o1h4F8WIsNW71osr3XamnHTQ81UN2ksQpfk7a7P9t\n0XiCzI9vg44l0hv+R8dQbnC8/esfHRAmnu3dXeQAwDLj8wlu/Up63eUlHiKFdqaJ\nSSSSRBNaprLQ2t+7z+7EAVRrWI1RE8gEk2paHfHvBVcyogDtfJH1m3XNNMdLLj9Y\nS96BP60VjE06hUeI3s4W\n=51sj\n-----END PGP SIGNATURE-----", "payload": "tree 1c07c59725c5aa282d86b5c5038045e8644b68f7\nparent 8285ab5c99db166e2137fb4b92fedd03b56acaa0\nauthor Doug Goldstein <cardoe@cardoe.com> 1460064995 -0500\ncommitter Doug Goldstein <cardoe@cardoe.com> 1480694858 -0600\n\nrustc: add --print target-spec option\n\nThis option provides the user the ability to dump the configuration that\nis in use by rustc for the target they are building for.\n\nSigned-off-by: Doug Goldstein <cardoe@cardoe.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff112644defc6a982bfd6a793afbeb3155173742", "html_url": "https://github.com/rust-lang/rust/commit/ff112644defc6a982bfd6a793afbeb3155173742", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff112644defc6a982bfd6a793afbeb3155173742/comments", "author": {"login": "cardoe", "id": 8839, "node_id": "MDQ6VXNlcjg4Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cardoe", "html_url": "https://github.com/cardoe", "followers_url": "https://api.github.com/users/cardoe/followers", "following_url": "https://api.github.com/users/cardoe/following{/other_user}", "gists_url": "https://api.github.com/users/cardoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/cardoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cardoe/subscriptions", "organizations_url": "https://api.github.com/users/cardoe/orgs", "repos_url": "https://api.github.com/users/cardoe/repos", "events_url": "https://api.github.com/users/cardoe/events{/privacy}", "received_events_url": "https://api.github.com/users/cardoe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cardoe", "id": 8839, "node_id": "MDQ6VXNlcjg4Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cardoe", "html_url": "https://github.com/cardoe", "followers_url": "https://api.github.com/users/cardoe/followers", "following_url": "https://api.github.com/users/cardoe/following{/other_user}", "gists_url": "https://api.github.com/users/cardoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/cardoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cardoe/subscriptions", "organizations_url": "https://api.github.com/users/cardoe/orgs", "repos_url": "https://api.github.com/users/cardoe/repos", "events_url": "https://api.github.com/users/cardoe/events{/privacy}", "received_events_url": "https://api.github.com/users/cardoe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8285ab5c99db166e2137fb4b92fedd03b56acaa0", "url": "https://api.github.com/repos/rust-lang/rust/commits/8285ab5c99db166e2137fb4b92fedd03b56acaa0", "html_url": "https://github.com/rust-lang/rust/commit/8285ab5c99db166e2137fb4b92fedd03b56acaa0"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "478b6b80414a385f4b8831293ea147b1a93930fe", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff112644defc6a982bfd6a793afbeb3155173742/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff112644defc6a982bfd6a793afbeb3155173742/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=ff112644defc6a982bfd6a793afbeb3155173742", "patch": "@@ -308,6 +308,7 @@ pub enum PrintRequest {\n     TargetFeatures,\n     RelocationModels,\n     CodeModels,\n+    TargetSpec,\n }\n \n pub enum Input {\n@@ -1141,6 +1142,9 @@ pub fn rustc_short_optgroups() -> Vec<RustcOptGroup> {\n     let mut print_opts = vec![\"crate-name\", \"file-names\", \"sysroot\", \"cfg\",\n                               \"target-list\", \"target-cpus\", \"target-features\",\n                               \"relocation-models\", \"code-models\"];\n+    if nightly_options::is_nightly_build() {\n+        print_opts.push(\"target-spec-json\");\n+    }\n \n     vec![\n         opt::flag_s(\"h\", \"help\", \"Display this message\"),\n@@ -1471,6 +1475,8 @@ pub fn build_session_options_and_crate_config(matches: &getopts::Matches)\n             \"target-features\" => PrintRequest::TargetFeatures,\n             \"relocation-models\" => PrintRequest::RelocationModels,\n             \"code-models\" => PrintRequest::CodeModels,\n+            \"target-spec-json\" if nightly_options::is_unstable_enabled(matches)\n+                => PrintRequest::TargetSpec,\n             req => {\n                 early_error(error_format, &format!(\"unknown print request `{}`\", req))\n             }"}, {"sha": "f84622c2f028553a547113d7f0b2ef6a40c499b0", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ff112644defc6a982bfd6a793afbeb3155173742/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff112644defc6a982bfd6a793afbeb3155173742/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=ff112644defc6a982bfd6a793afbeb3155173742", "patch": "@@ -80,6 +80,8 @@ use rustc_metadata::locator;\n use rustc_metadata::cstore::CStore;\n use rustc::util::common::time;\n \n+use serialize::json::ToJson;\n+\n use std::cmp::max;\n use std::cmp::Ordering::Equal;\n use std::default::Default;\n@@ -584,6 +586,7 @@ impl RustcDefaultCalls {\n                     println!(\"{}\", targets.join(\"\\n\"));\n                 },\n                 PrintRequest::Sysroot => println!(\"{}\", sess.sysroot().display()),\n+                PrintRequest::TargetSpec => println!(\"{}\", sess.target.target.to_json().pretty()),\n                 PrintRequest::FileNames |\n                 PrintRequest::CrateName => {\n                     let input = match input {"}]}