{"sha": "cd481542df325ad8fd7db5f5c58a72969b1497b3", "node_id": "C_kwDOAAsO6NoAKGNkNDgxNTQyZGYzMjVhZDhmZDdkYjVmNWM1OGE3Mjk2OWIxNDk3YjM", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-22T18:51:48Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-23T16:18:07Z"}, "message": "rustdoc: fix GUI tests to deal with slightly changed width", "tree": {"sha": "fb010850fecc11a2276de033958f5e1f77a6ecc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb010850fecc11a2276de033958f5e1f77a6ecc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd481542df325ad8fd7db5f5c58a72969b1497b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd481542df325ad8fd7db5f5c58a72969b1497b3", "html_url": "https://github.com/rust-lang/rust/commit/cd481542df325ad8fd7db5f5c58a72969b1497b3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd481542df325ad8fd7db5f5c58a72969b1497b3/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e3cb0a84c2543b7745cf58f0ed757061a9d2c0e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3cb0a84c2543b7745cf58f0ed757061a9d2c0e5", "html_url": "https://github.com/rust-lang/rust/commit/e3cb0a84c2543b7745cf58f0ed757061a9d2c0e5"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "ee4dad444e93219861026e24eb4ed7cabd970b44", "filename": "src/test/rustdoc-gui/code-blocks-overflow.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fcode-blocks-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fcode-blocks-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-blocks-overflow.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -5,4 +5,4 @@ size: (1080, 600)\n assert-count: (\".docblock > .example-wrap\", 2)\n assert: \".docblock > .example-wrap > .language-txt\"\n assert: \".docblock > .example-wrap > .rust-example-rendered\"\n-assert-css: (\".docblock > .example-wrap > pre\", {\"width\": \"785.25px\", \"overflow-x\": \"auto\"}, ALL)\n+assert-css: (\".docblock > .example-wrap > pre\", {\"width\": \"796px\", \"overflow-x\": \"auto\"}, ALL)"}, {"sha": "ef0d37c902e090273fc9d324842b1e4e5ca1285f", "filename": "src/test/rustdoc-gui/docblock-table-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -4,7 +4,7 @@ goto: file://|DOC_PATH|/lib2/long_table/struct.Foo.html\n size: (1100, 800)\n // Logically, the \".docblock\" and the \"<p>\" should have the same scroll width.\n compare-elements-property: (\".top-doc .docblock\", \".top-doc .docblock > p\", [\"scrollWidth\"])\n-assert-property: (\".top-doc .docblock\", {\"scrollWidth\": \"801\"})\n+assert-property: (\".top-doc .docblock\", {\"scrollWidth\": \"816\"})\n // However, since there is overflow in the <table>, its scroll width is bigger.\n assert-property: (\".top-doc .docblock table\", {\"scrollWidth\": \"1572\"})\n \n@@ -16,6 +16,6 @@ compare-elements-property: (\n     \"#implementations-list > details .docblock > p\",\n     [\"scrollWidth\"],\n )\n-assert-property: (\"#implementations-list > details .docblock\", {\"scrollWidth\": \"801\"})\n+assert-property: (\"#implementations-list > details .docblock\", {\"scrollWidth\": \"816\"})\n // However, since there is overflow in the <table>, its scroll width is bigger.\n assert-property: (\"#implementations-list > details .docblock table\", {\"scrollWidth\": \"1572\"})"}, {"sha": "bc3addd33dd384e3e6b8981939b75e4e81de3a01", "filename": "src/test/rustdoc-gui/item-info-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -4,7 +4,7 @@ goto: file://|DOC_PATH|/lib2/struct.LongItemInfo.html\n size: (1200, 870)\n // Logically, the \"item-decl\" and the \"item-info\" should have the same scroll width.\n compare-elements-property: (\".item-decl\", \".item-info\", [\"scrollWidth\"])\n-assert-property: (\".item-info\", {\"scrollWidth\": \"890\"})\n+assert-property: (\".item-info\", {\"scrollWidth\": \"940\"})\n // Just to be sure we're comparing the correct \"item-info\":\n assert-text: (\n     \".item-info\",\n@@ -21,7 +21,7 @@ compare-elements-property: (\n )\n assert-property: (\n     \"#impl-SimpleTrait-for-LongItemInfo2 .item-info\",\n-    {\"scrollWidth\": \"866\"},\n+    {\"scrollWidth\": \"916\"},\n )\n // Just to be sure we're comparing the correct \"item-info\":\n assert-text: ("}, {"sha": "8750d5c53606f4229007d9feff5f4b237969e3f4", "filename": "src/test/rustdoc-gui/item-info.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -4,9 +4,9 @@ goto: file://|DOC_PATH|/lib2/struct.Foo.html\n // We set a fixed size so there is no chance of \"random\" resize.\n size: (1100, 800)\n // We check that \".item-info\" is bigger than its content.\n-assert-css: (\".item-info\", {\"width\": \"790px\"})\n+assert-css: (\".item-info\", {\"width\": \"840px\"})\n assert-css: (\".item-info .stab\", {\"width\": \"289px\"})\n-assert-position: (\".item-info .stab\", {\"x\": 295})\n+assert-position: (\".item-info .stab\", {\"x\": 245})\n \n // Now we ensure that they're not rendered on the same line.\n goto: file://|DOC_PATH|/lib2/trait.Trait.html"}, {"sha": "20a129f9d9da6e181f233d0790ba79fe8dacab25", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -18,11 +18,11 @@ compare-elements-position-false: (\n // The `i` should be *after* the type.\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n-    {\"x\": 692},\n+    {\"x\": 677},\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 966},\n+    {\"x\": 951},\n )\n \n "}, {"sha": "e33693e27eaf6b6e2243550155604216f0354e53", "filename": "src/test/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -7,7 +7,7 @@ press-key: 'Enter'\n wait-for: \"#crate-search\"\n // The width is returned by \"getComputedStyle\" which returns the exact number instead of the\n // CSS rule which is \"50%\"...\n-assert-css: (\".search-results div.desc\", {\"width\": \"293px\"})\n+assert-css: (\".search-results div.desc\", {\"width\": \"318px\"})\n size: (600, 100)\n // As counter-intuitive as it may seem, in this width, the width is \"100%\", which is why\n // when computed it's larger."}, {"sha": "7b3e9ad5a5717bd9f3d3dfbb8b41a43fbd4477bc", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/cd481542df325ad8fd7db5f5c58a72969b1497b3/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=cd481542df325ad8fd7db5f5c58a72969b1497b3", "patch": "@@ -15,7 +15,7 @@ assert-property: (\".item-table .struct\", {\"offsetWidth\": \"684\"})\n goto: file://|DOC_PATH|/lib2/too_long/type.ReallyLongTypeNameLongLongLong.html\n assert-property: (\"body\", {\"scrollWidth\": \"1100\"})\n // We now check that the section width hasn't grown because of it.\n-assert-property: (\"#main-content\", {\"scrollWidth\": \"825\"})\n+assert-property: (\"#main-content\", {\"scrollWidth\": \"840\"})\n // And now checking that it has scrollable content.\n assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1103\"})\n \n@@ -24,7 +24,7 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1103\"})\n goto: file://|DOC_PATH|/lib2/too_long/constant.ReallyLongTypeNameLongLongLongConstBecauseWhyNotAConstRightGigaGigaSupraLong.html\n assert-property: (\"body\", {\"scrollWidth\": \"1100\"})\n // We now check that the section width hasn't grown because of it.\n-assert-property: (\"#main-content\", {\"scrollWidth\": \"825\"})\n+assert-property: (\"#main-content\", {\"scrollWidth\": \"840\"})\n // And now checking that it has scrollable content.\n assert-property: (\".item-decl pre\", {\"scrollWidth\": \"950\"})\n "}]}