{"sha": "ee54be3c9a8099d45d64764f0e50c315d5256a4c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlNTRiZTNjOWE4MDk5ZDQ1ZDY0NzY0ZjBlNTBjMzE1ZDUyNTZhNGM=", "commit": {"author": {"name": "Shawn Walker-Salas", "email": "shawn.walker@oracle.com", "date": "2017-02-11T17:24:33Z"}, "committer": {"name": "Shawn Walker-Salas", "email": "shawn.walker@oracle.com", "date": "2017-02-12T04:28:44Z"}, "message": "Add Solaris as recognized ostype\nAdd cputype recognition for Solaris\n\nFixes #39729", "tree": {"sha": "c9b0519b87d54d4b7550dfa05efb83871bfeb041", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9b0519b87d54d4b7550dfa05efb83871bfeb041"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee54be3c9a8099d45d64764f0e50c315d5256a4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee54be3c9a8099d45d64764f0e50c315d5256a4c", "html_url": "https://github.com/rust-lang/rust/commit/ee54be3c9a8099d45d64764f0e50c315d5256a4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee54be3c9a8099d45d64764f0e50c315d5256a4c/comments", "author": {"login": "binarycrusader", "id": 541114, "node_id": "MDQ6VXNlcjU0MTExNA==", "avatar_url": "https://avatars.githubusercontent.com/u/541114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binarycrusader", "html_url": "https://github.com/binarycrusader", "followers_url": "https://api.github.com/users/binarycrusader/followers", "following_url": "https://api.github.com/users/binarycrusader/following{/other_user}", "gists_url": "https://api.github.com/users/binarycrusader/gists{/gist_id}", "starred_url": "https://api.github.com/users/binarycrusader/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binarycrusader/subscriptions", "organizations_url": "https://api.github.com/users/binarycrusader/orgs", "repos_url": "https://api.github.com/users/binarycrusader/repos", "events_url": "https://api.github.com/users/binarycrusader/events{/privacy}", "received_events_url": "https://api.github.com/users/binarycrusader/received_events", "type": "User", "site_admin": false}, "committer": {"login": "binarycrusader", "id": 541114, "node_id": "MDQ6VXNlcjU0MTExNA==", "avatar_url": "https://avatars.githubusercontent.com/u/541114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binarycrusader", "html_url": "https://github.com/binarycrusader", "followers_url": "https://api.github.com/users/binarycrusader/followers", "following_url": "https://api.github.com/users/binarycrusader/following{/other_user}", "gists_url": "https://api.github.com/users/binarycrusader/gists{/gist_id}", "starred_url": "https://api.github.com/users/binarycrusader/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binarycrusader/subscriptions", "organizations_url": "https://api.github.com/users/binarycrusader/orgs", "repos_url": "https://api.github.com/users/binarycrusader/repos", "events_url": "https://api.github.com/users/binarycrusader/events{/privacy}", "received_events_url": "https://api.github.com/users/binarycrusader/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "912bc14a6b25bac66822766b09dcfb3c6263757d", "url": "https://api.github.com/repos/rust-lang/rust/commits/912bc14a6b25bac66822766b09dcfb3c6263757d", "html_url": "https://github.com/rust-lang/rust/commit/912bc14a6b25bac66822766b09dcfb3c6263757d"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "9593e3f0793b316fdd40d95a2fb784b94ca71b89", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=ee54be3c9a8099d45d64764f0e50c315d5256a4c", "patch": "@@ -345,6 +345,21 @@ def build_triple(self):\n             ostype = 'unknown-openbsd'\n         elif ostype == 'NetBSD':\n             ostype = 'unknown-netbsd'\n+        elif ostype == 'SunOS':\n+            ostype = 'sun-solaris'\n+            # On Solaris, uname -m will return a machine classification instead\n+            # of a cpu type, so uname -p is recommended instead.  However, the\n+            # output from that option is too generic for our purposes (it will\n+            # always emit 'i386' on x86/amd64 systems).  As such, isainfo -k\n+            # must be used instead.\n+            try:\n+                cputype = subprocess.check_output(['isainfo',\n+                  '-k']).strip().decode(default_encoding)\n+            except (subprocess.CalledProcessError, WindowsError):\n+                err = \"isainfo not found\"\n+                if self.verbose:\n+                    raise Exception(err)\n+                sys.exit(err)\n         elif ostype == 'Darwin':\n             ostype = 'apple-darwin'\n         elif ostype.startswith('MINGW'):"}, {"sha": "790cd5b65ba30f2a3c2988877e2180e6f37e0f89", "filename": "src/libstd/build.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Flibstd%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Flibstd%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fbuild.rs?ref=ee54be3c9a8099d45d64764f0e50c315d5256a4c", "patch": "@@ -46,6 +46,8 @@ fn main() {\n     } else if target.contains(\"dragonfly\") || target.contains(\"bitrig\") ||\n               target.contains(\"netbsd\") || target.contains(\"openbsd\") {\n         println!(\"cargo:rustc-link-lib=pthread\");\n+    } else if target.contains(\"solaris\") {\n+        println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"apple-darwin\") {\n         println!(\"cargo:rustc-link-lib=System\");\n     } else if target.contains(\"apple-ios\") {"}, {"sha": "ea0d76978339df730973b7ca36387c5ab54ade96", "filename": "src/libunwind/build.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Flibunwind%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee54be3c9a8099d45d64764f0e50c315d5256a4c/src%2Flibunwind%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Fbuild.rs?ref=ee54be3c9a8099d45d64764f0e50c315d5256a4c", "patch": "@@ -27,6 +27,8 @@ fn main() {\n         println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"openbsd\") {\n         println!(\"cargo:rustc-link-lib=gcc\");\n+    } else if target.contains(\"solaris\") {\n+        println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"bitrig\") {\n         println!(\"cargo:rustc-link-lib=c++abi\");\n     } else if target.contains(\"dragonfly\") {"}]}