{"sha": "2e0610e64e7a573867eea29efcf59ae2fbad0251", "node_id": "C_kwDOAAsO6NoAKDJlMDYxMGU2NGU3YTU3Mzg2N2VlYTI5ZWZjZjU5YWUyZmJhZDAyNTE", "commit": {"author": {"name": "Anatol Ulrich", "email": "anatol.ulrich@ferrous-systems.com", "date": "2021-10-27T02:42:58Z"}, "committer": {"name": "Anatol Ulrich", "email": "anatol.ulrich@ferrous-systems.com", "date": "2021-10-27T02:42:58Z"}, "message": "one down", "tree": {"sha": "b0ea118a8d98f5d08ac1fcb70bbaffd6722594ad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b0ea118a8d98f5d08ac1fcb70bbaffd6722594ad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e0610e64e7a573867eea29efcf59ae2fbad0251", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e0610e64e7a573867eea29efcf59ae2fbad0251", "html_url": "https://github.com/rust-lang/rust/commit/2e0610e64e7a573867eea29efcf59ae2fbad0251", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e0610e64e7a573867eea29efcf59ae2fbad0251/comments", "author": null, "committer": null, "parents": [{"sha": "95199ac30bdc1a615ce3eb1b924183a18c7b1656", "url": "https://api.github.com/repos/rust-lang/rust/commits/95199ac30bdc1a615ce3eb1b924183a18c7b1656", "html_url": "https://github.com/rust-lang/rust/commit/95199ac30bdc1a615ce3eb1b924183a18c7b1656"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "51f6b5d133f1c2abf72b34a53dc506237c437ac9", "filename": "crates/ide/src/rename.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2e0610e64e7a573867eea29efcf59ae2fbad0251/crates%2Fide%2Fsrc%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e0610e64e7a573867eea29efcf59ae2fbad0251/crates%2Fide%2Fsrc%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Frename.rs?ref=2e0610e64e7a573867eea29efcf59ae2fbad0251", "patch": "@@ -36,9 +36,10 @@ pub(crate) fn prepare_rename(\n     let mut defs = find_definitions(&sema, syntax, position)?;\n \n     // TODO:\n-    // - empty case possible or already caught by `find_definitions`?\n-    // - is \"just take the first\" correct? If not, what do?\n-    let (name_like, _def) = defs.next().unwrap();\n+    // - is \"No references found at position\" the right error? (why does it not get caught by `find_definitions`... hmm)\n+    // - is \"just take the first `name_like`\" correct? If not, what do?\n+    let (name_like, _def) =\n+        defs.next().ok_or_else(|| format_err!(\"No references found at position\"))?;\n     let frange = sema.original_range(name_like.syntax());\n     always!(frange.range.contains_inclusive(position.offset) && frange.file_id == position.file_id);\n     Ok(RangeInfo::new(frange.range, ()))"}]}