{"sha": "783caf3702fa28aeeaebd413eb9072399506eab1", "node_id": "C_kwDOAAsO6NoAKDc4M2NhZjM3MDJmYTI4YWVlYWViZDQxM2ViOTA3MjM5OTUwNmVhYjE", "commit": {"author": {"name": "Kyle Huey", "email": "khuey@kylehuey.com", "date": "2023-01-13T14:29:46Z"}, "committer": {"name": "Kyle Huey", "email": "khuey@kylehuey.com", "date": "2023-01-17T01:49:16Z"}, "message": "Append .dwp to the binary filename instead of replacing the existing extension.\n\ngdb et al. expect to find the dwp file at <binary>.dwp, even if <binary> already\nhas an extension (e.g. libfoo.so's dwp is expected to be at libfoo.so.dwp).", "tree": {"sha": "089a4e7351a259c515c645e533a18dfc46a73c86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/089a4e7351a259c515c645e533a18dfc46a73c86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/783caf3702fa28aeeaebd413eb9072399506eab1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/783caf3702fa28aeeaebd413eb9072399506eab1", "html_url": "https://github.com/rust-lang/rust/commit/783caf3702fa28aeeaebd413eb9072399506eab1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/783caf3702fa28aeeaebd413eb9072399506eab1/comments", "author": {"login": "khuey", "id": 325892, "node_id": "MDQ6VXNlcjMyNTg5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/325892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khuey", "html_url": "https://github.com/khuey", "followers_url": "https://api.github.com/users/khuey/followers", "following_url": "https://api.github.com/users/khuey/following{/other_user}", "gists_url": "https://api.github.com/users/khuey/gists{/gist_id}", "starred_url": "https://api.github.com/users/khuey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khuey/subscriptions", "organizations_url": "https://api.github.com/users/khuey/orgs", "repos_url": "https://api.github.com/users/khuey/repos", "events_url": "https://api.github.com/users/khuey/events{/privacy}", "received_events_url": "https://api.github.com/users/khuey/received_events", "type": "User", "site_admin": false}, "committer": {"login": "khuey", "id": 325892, "node_id": "MDQ6VXNlcjMyNTg5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/325892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/khuey", "html_url": "https://github.com/khuey", "followers_url": "https://api.github.com/users/khuey/followers", "following_url": "https://api.github.com/users/khuey/following{/other_user}", "gists_url": "https://api.github.com/users/khuey/gists{/gist_id}", "starred_url": "https://api.github.com/users/khuey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/khuey/subscriptions", "organizations_url": "https://api.github.com/users/khuey/orgs", "repos_url": "https://api.github.com/users/khuey/repos", "events_url": "https://api.github.com/users/khuey/events{/privacy}", "received_events_url": "https://api.github.com/users/khuey/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61a415be590113b4935464ef0aaf3b4e7713a077", "url": "https://api.github.com/repos/rust-lang/rust/commits/61a415be590113b4935464ef0aaf3b4e7713a077", "html_url": "https://github.com/rust-lang/rust/commit/61a415be590113b4935464ef0aaf3b4e7713a077"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "06dbeac2850e7594550e2f1050939d1068651852", "filename": "compiler/rustc_codegen_ssa/src/back/link.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/783caf3702fa28aeeaebd413eb9072399506eab1/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/783caf3702fa28aeeaebd413eb9072399506eab1/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs?ref=783caf3702fa28aeeaebd413eb9072399506eab1", "patch": "@@ -599,7 +599,8 @@ fn link_dwarf_object<'a>(\n     cg_results: &CodegenResults,\n     executable_out_filename: &Path,\n ) {\n-    let dwp_out_filename = executable_out_filename.with_extension(\"dwp\");\n+    let mut dwp_out_filename = executable_out_filename.to_path_buf().into_os_string();\n+    dwp_out_filename.push(\".dwp\");\n     debug!(?dwp_out_filename, ?executable_out_filename);\n \n     #[derive(Default)]"}]}