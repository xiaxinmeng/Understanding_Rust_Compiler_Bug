{"sha": "4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxMjRkOGU0OGI5ZmZiZDlmMzM4MTllYmE3NGJhYWRmNmNmZGJlNmM=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2016-10-17T16:02:23Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2016-10-17T16:02:23Z"}, "message": "Moved new dropck-eyepatch compile-fail tests to the `ui/` subtree.", "tree": {"sha": "171dc8f219cf3ed4850ed33d8600bac40b80c564", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/171dc8f219cf3ed4850ed33d8600bac40b80c564"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "html_url": "https://github.com/rust-lang/rust/commit/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d8f7164bb2a5b949e8b34e8bf08b19eb32b1144", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d8f7164bb2a5b949e8b34e8bf08b19eb32b1144", "html_url": "https://github.com/rust-lang/rust/commit/0d8f7164bb2a5b949e8b34e8bf08b19eb32b1144"}], "stats": {"total": 168, "additions": 166, "deletions": 2}, "files": [{"sha": "1b00d88dcb3dfd78d9fba23aab85499ff10d220b", "filename": "src/test/ui/dropck/auxiliary/dropck_eyepatch_extern_crate.rs", "status": "renamed", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fauxiliary%2Fdropck_eyepatch_extern_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fauxiliary%2Fdropck_eyepatch_extern_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fauxiliary%2Fdropck_eyepatch_extern_crate.rs?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -11,14 +11,16 @@\n #![feature(generic_param_attrs)]\n #![feature(dropck_eyepatch)]\n \n+// This is a support file for ../dropck-eyepatch-extern-crate.rs\n+//\n // The point of this test is to illustrate that the `#[may_dangle]`\n // attribute specifically allows, in the context of a type\n // implementing `Drop`, a generic parameter to be instantiated with a\n // lifetime that does not strictly outlive the owning type itself,\n-// and that this attributes effects are preserved when importing\n+// and that this attribute's effects are preserved when importing\n // the type from another crate.\n //\n-// See also dropck-eyepatch.rs for more information about the general\n+// See also ../dropck-eyepatch.rs for more information about the general\n // structure of the test.\n \n use std::fmt;", "previous_filename": "src/test/compile-fail/auxiliary/dropck_eyepatch_extern_crate.rs"}, {"sha": "5e200dbdbfa0195a23874498eb97cdb017495b1a", "filename": "src/test/ui/dropck/dropck-eyepatch-extern-crate.rs", "status": "renamed", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.rs?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -10,6 +10,16 @@\n \n // aux-build:dropck_eyepatch_extern_crate.rs\n \n+// The point of this test is to illustrate that the `#[may_dangle]`\n+// attribute specifically allows, in the context of a type\n+// implementing `Drop`, a generic parameter to be instantiated with a\n+// lifetime that does not strictly outlive the owning type itself,\n+// and that this attribute's effects are preserved when importing\n+// the type from another crate.\n+//\n+// See also dropck-eyepatch.rs for more information about the general\n+// structure of the test.\n+\n extern crate dropck_eyepatch_extern_crate as other;\n \n use other::{Dt,Dr,Pt,Pr,St,Sr};", "previous_filename": "src/test/compile-fail/dropck-eyepatch-extern-crate.rs"}, {"sha": "5d2096e8b07a45126670f4a4c55793a0dbc32769", "filename": "src/test/ui/dropck/dropck-eyepatch-extern-crate.stderr", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-extern-crate.stderr?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -0,0 +1,46 @@\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-extern-crate.rs:39:20\n+   |\n+39 |     dt = Dt(\"dt\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+55 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-extern-crate.rs:40:20\n+   |\n+40 |     dr = Dr(\"dr\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+55 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-extern-crate.rs:47:29\n+   |\n+47 |     pt = Pt(\"pt\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+55 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-extern-crate.rs:48:29\n+   |\n+48 |     pr = Pr(\"pr\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+55 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: aborting due to 4 previous errors\n+"}, {"sha": "f92c8703dc9273b9ddb3055db23b98aab705ae43", "filename": "src/test/ui/dropck/dropck-eyepatch-implies-unsafe-impl.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.rs?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "previous_filename": "src/test/compile-fail/dropck-eyepatch-implies-unsafe-impl.rs"}, {"sha": "c53cf020a9bc52d75110c3753fb72b591938505e", "filename": "src/test/ui/dropck/dropck-eyepatch-implies-unsafe-impl.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-implies-unsafe-impl.stderr?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -0,0 +1,14 @@\n+error[E0569]: requires an `unsafe impl` declaration due to `#[may_dangle]` attribute\n+  --> $DIR/dropck-eyepatch-implies-unsafe-impl.rs:32:1\n+   |\n+32 | impl<#[may_dangle] A, B: fmt::Debug> Drop for Pt<A, B> {\n+   | ^\n+\n+error[E0569]: requires an `unsafe impl` declaration due to `#[may_dangle]` attribute\n+  --> $DIR/dropck-eyepatch-implies-unsafe-impl.rs:38:1\n+   |\n+38 | impl<#[may_dangle] 'a, 'b, B: fmt::Debug> Drop for Pr<'a, 'b, B> {\n+   | ^\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "68b0ff3b5f096f76672d3f57e439a56732f73cbc", "filename": "src/test/ui/dropck/dropck-eyepatch-reorder.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.rs?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "previous_filename": "src/test/compile-fail/dropck-eyepatch-reorder.rs"}, {"sha": "33b18f6f02e0f180b479b90364ace3f903088259", "filename": "src/test/ui/dropck/dropck-eyepatch-reorder.stderr", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch-reorder.stderr?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -0,0 +1,46 @@\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-reorder.rs:57:20\n+   |\n+57 |     dt = Dt(\"dt\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+73 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-reorder.rs:58:20\n+   |\n+58 |     dr = Dr(\"dr\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+73 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-reorder.rs:65:29\n+   |\n+65 |     pt = Pt(\"pt\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+73 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch-reorder.rs:66:29\n+   |\n+66 |     pr = Pr(\"pr\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+73 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: aborting due to 4 previous errors\n+"}, {"sha": "e442fade1973025d25f2d82ce9085e5b41dcf978", "filename": "src/test/ui/dropck/dropck-eyepatch.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.rs?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "previous_filename": "src/test/compile-fail/dropck-eyepatch.rs"}, {"sha": "75e612ca9c8f181ae860aac9e45d5e7d6065b644", "filename": "src/test/ui/dropck/dropck-eyepatch.stderr", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdropck%2Fdropck-eyepatch.stderr?ref=4124d8e48b9ffbd9f33819eba74baadf6cfdbe6c", "patch": "@@ -0,0 +1,46 @@\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch.rs:80:20\n+   |\n+80 |     dt = Dt(\"dt\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+96 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch.rs:81:20\n+   |\n+81 |     dr = Dr(\"dr\", &c); //~ ERROR `c` does not live long enough\n+   |                    ^ does not live long enough\n+...\n+96 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch.rs:88:29\n+   |\n+88 |     pt = Pt(\"pt\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+96 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: `c` does not live long enough\n+  --> $DIR/dropck-eyepatch.rs:89:29\n+   |\n+89 |     pr = Pr(\"pr\", &c_long, &c); //~ ERROR `c` does not live long enough\n+   |                             ^ does not live long enough\n+...\n+96 | }\n+   | - borrowed value dropped before borrower\n+   |\n+   = note: values in a scope are dropped in the opposite order they are created\n+\n+error: aborting due to 4 previous errors\n+"}]}