{"sha": "139346adb6632dd1507b263f1702f5f6df66e682", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzOTM0NmFkYjY2MzJkZDE1MDdiMjYzZjE3MDJmNWY2ZGY2NmU2ODI=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2014-12-26T21:36:21Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2015-01-21T18:05:16Z"}, "message": "tests: fix fallout of merging ast::ViewItem into ast::Item.", "tree": {"sha": "7afc362760fffce38688b51b3378c712f3077291", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7afc362760fffce38688b51b3378c712f3077291"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/139346adb6632dd1507b263f1702f5f6df66e682", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/139346adb6632dd1507b263f1702f5f6df66e682", "html_url": "https://github.com/rust-lang/rust/commit/139346adb6632dd1507b263f1702f5f6df66e682", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/139346adb6632dd1507b263f1702f5f6df66e682/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "838b2ea760282c716f4354b40fafe3cd55ae5ec7", "url": "https://api.github.com/repos/rust-lang/rust/commits/838b2ea760282c716f4354b40fafe3cd55ae5ec7", "html_url": "https://github.com/rust-lang/rust/commit/838b2ea760282c716f4354b40fafe3cd55ae5ec7"}], "stats": {"total": 61, "additions": 14, "deletions": 47}, "files": [{"sha": "cd28a27f9886bc80ccb3522f8d43ffc9d98af8e2", "filename": "src/librustc_driver/test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/139346adb6632dd1507b263f1702f5f6df66e682/src%2Flibrustc_driver%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/139346adb6632dd1507b263f1702f5f6df66e682/src%2Flibrustc_driver%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Ftest.rs?ref=139346adb6632dd1507b263f1702f5f6df66e682", "patch": "@@ -200,6 +200,7 @@ impl<'a, 'tcx> Env<'a, 'tcx> {\n             }\n \n             return match it.node {\n+                ast::ItemUse(..) | ast::ItemExternCrate(..) |\n                 ast::ItemConst(..) | ast::ItemStatic(..) | ast::ItemFn(..) |\n                 ast::ItemForeignMod(..) | ast::ItemTy(..) => {\n                     None"}, {"sha": "8ac94a38273b181a2b49753ef669d789de2abb65", "filename": "src/libsyntax/parse/mod.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/139346adb6632dd1507b263f1702f5f6df66e682/src%2Flibsyntax%2Fparse%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/139346adb6632dd1507b263f1702f5f6df66e682/src%2Flibsyntax%2Fparse%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fmod.rs?ref=139346adb6632dd1507b263f1702f5f6df66e682", "patch": "@@ -1109,25 +1109,25 @@ mod test {\n \n     #[test] fn parse_use() {\n         let use_s = \"use foo::bar::baz;\";\n-        let vitem = string_to_item(use_s.to_string());\n-        let vitem_s = item_to_string(&vitem);\n+        let vitem = string_to_item(use_s.to_string()).unwrap();\n+        let vitem_s = item_to_string(&*vitem);\n         assert_eq!(&vitem_s[], use_s);\n \n         let use_s = \"use foo::bar as baz;\";\n-        let vitem = string_to_item(use_s.to_string());\n-        let vitem_s = item_to_string(&vitem);\n+        let vitem = string_to_item(use_s.to_string()).unwrap();\n+        let vitem_s = item_to_string(&*vitem);\n         assert_eq!(&vitem_s[], use_s);\n     }\n \n     #[test] fn parse_extern_crate() {\n         let ex_s = \"extern crate foo;\";\n-        let vitem = string_to_item(ex_s.to_string());\n-        let vitem_s = item_to_string(&vitem);\n+        let vitem = string_to_item(ex_s.to_string()).unwrap();\n+        let vitem_s = item_to_string(&*vitem);\n         assert_eq!(&vitem_s[], ex_s);\n \n         let ex_s = \"extern crate \\\"foo\\\" as bar;\";\n-        let vitem = string_to_item(ex_s.to_string());\n-        let vitem_s = item_to_string(&vitem);\n+        let vitem = string_to_item(ex_s.to_string()).unwrap();\n+        let vitem_s = item_to_string(&*vitem);\n         assert_eq!(&vitem_s[], ex_s);\n     }\n "}, {"sha": "be9e57e2d195001a4c94b6ce66c9438b2024c4fc", "filename": "src/test/compile-fail-fulldeps/gated-plugin.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fcompile-fail-fulldeps%2Fgated-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fcompile-fail-fulldeps%2Fgated-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fgated-plugin.rs?ref=139346adb6632dd1507b263f1702f5f6df66e682", "patch": "@@ -11,8 +11,7 @@\n // aux-build:macro_crate_test.rs\n // ignore-stage1\n \n-#[plugin] #[no_link]\n+#[plugin] #[no_link] extern crate macro_crate_test;\n //~^ ERROR compiler plugins are experimental and possibly buggy\n-extern crate macro_crate_test;\n \n fn main() {}"}, {"sha": "b1204e828900c80b3288236f8e3bd686910a915f", "filename": "src/test/compile-fail/issue-9957.rs", "status": "removed", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/838b2ea760282c716f4354b40fafe3cd55ae5ec7/src%2Ftest%2Fcompile-fail%2Fissue-9957.rs", "raw_url": "https://github.com/rust-lang/rust/raw/838b2ea760282c716f4354b40fafe3cd55ae5ec7/src%2Ftest%2Fcompile-fail%2Fissue-9957.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-9957.rs?ref=838b2ea760282c716f4354b40fafe3cd55ae5ec7", "patch": "@@ -1,15 +0,0 @@\n-// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-pub extern crate core; //~ ERROR: `pub` visibility is not allowed\n-\n-fn main() {\n-    pub use std::usize; //~ ERROR: imports in functions are never reachable\n-}"}, {"sha": "e3707292f2495e979f7029539de36b622ac34e13", "filename": "src/test/compile-fail/unnecessary-private.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fcompile-fail%2Funnecessary-private.rs", "raw_url": "https://github.com/rust-lang/rust/raw/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fcompile-fail%2Funnecessary-private.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funnecessary-private.rs?ref=139346adb6632dd1507b263f1702f5f6df66e682", "patch": "@@ -1,4 +1,4 @@\n-// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// Copyright 2013-2014 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -9,6 +9,7 @@\n // except according to those terms.\n \n fn main() {\n+    pub use std::uint; //~ ERROR: visibility has no effect\n     pub struct A; //~ ERROR: visibility has no effect\n     pub enum B {} //~ ERROR: visibility has no effect\n     pub trait C { //~ ERROR: visibility has no effect"}, {"sha": "7b78a8d932b33c7dd3cd47d71bbe1a54327ef300", "filename": "src/test/compile-fail/view-items-at-top.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/838b2ea760282c716f4354b40fafe3cd55ae5ec7/src%2Ftest%2Fcompile-fail%2Fview-items-at-top.rs", "raw_url": "https://github.com/rust-lang/rust/raw/838b2ea760282c716f4354b40fafe3cd55ae5ec7/src%2Ftest%2Fcompile-fail%2Fview-items-at-top.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fview-items-at-top.rs?ref=838b2ea760282c716f4354b40fafe3cd55ae5ec7", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-extern crate test;\n-\n-fn f() {\n-}\n-\n-use test::net;    //~ ERROR `use` and `extern crate` declarations must precede items\n-\n-fn main() {\n-}"}, {"sha": "c18d076c0d3181b5a47966658075bd9f4ba1b12c", "filename": "src/test/pretty/issue-4264.pp", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fpretty%2Fissue-4264.pp", "raw_url": "https://github.com/rust-lang/rust/raw/139346adb6632dd1507b263f1702f5f6df66e682/src%2Ftest%2Fpretty%2Fissue-4264.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fissue-4264.pp?ref=139346adb6632dd1507b263f1702f5f6df66e682", "patch": "@@ -1,8 +1,8 @@\n #![no_std]\n-#[macro_use]\n-extern crate \"std\" as std;\n #[prelude_import]\n use std::prelude::v1::*;\n+#[macro_use]\n+extern crate \"std\" as std;\n // Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT."}]}