{"sha": "d22bb1a8b4402e19e35f038255883dcdb67376f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQyMmJiMWE4YjQ0MDJlMTllMzVmMDM4MjU1ODgzZGNkYjY3Mzc2ZjA=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-02-19T17:13:16Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-02-20T03:58:16Z"}, "message": "Rollup merge of #58336 - GuillaumeGomez:fix-search-results-interactions, r=oli-obk\n\nFix search results interactions\n\nThe bug is visible when you search for \"none\": the second tab is empty and therefore it messes with the classes. Then when you try to use arrows on the third tab, it just crashes (because only 2 \"search-results\" are present and you're on tab 3).\n\nr? @QuietMisdreavus", "tree": {"sha": "0411f58b3901ee30c048e4343cd0185fac467704", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0411f58b3901ee30c048e4343cd0185fac467704"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d22bb1a8b4402e19e35f038255883dcdb67376f0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlxs0FkACgkQ/vbIBR0O\nATz3tw//Xa7SQ2ylWkQ5zEmHndEtvxrJQsULUgNSibcCRXY9MOavMjXdBTpzPCGA\nnf4ntxJ6bB/qbGIseh7MvejiJPxECYMKTIOwIa86WHXxxn0QyYjGthdba7NBYGXj\nD+lGEywXte0ThtkYC9nOrJRsRG/Hxy9Jh9oXFnHBQOom8avjKTCgiG4hJrX0HzgF\nh8UOsGo5VKQLCoyP3CESgA3XgYr8WLj7RAyfdt8jcoCtaYBpnn93o53nJYJpwQx+\nhDsCrt4lQAf8kYIlqTcf6oAqwjRF/H8VDlJ2kLuhHIN701+13KA3hM+Hj39wnW+d\nrqZIrW8KQ712c8EgLepU8pxzM6EqMr+b/PeAz0ydS4Y/QHhO+cuRgBCSOp3ASjwB\nwYfo6JGYsMrmRsuRXJy0Cj/Jcl5AY/94gZVkLccFDAveLlRXjaCNNwKFDr+ze89F\napMx3H6+wC9rSv7ExFaYilAZrf+UHPNbDb6REpJ4ESq6SogA+xcn6O2UOQLtaA3S\nmDHR/ZX8KrQINC49HbhSpsrw6Ds0XE8jBWqbofQ8/JSz7BhaPxEyDQtFBrOeNEmo\nJZHh5SfHOFGgiV4n7siFrD9XhMivoLvQ9n0O5K7igLQEeELpDqtC5M397rFgtpYv\nxPAu8NGE4whTue3dMEPwv/Xwru2RFh0Y8NjWiEb/JdsEEpPJyk8=\n=33AW\n-----END PGP SIGNATURE-----", "payload": "tree 0411f58b3901ee30c048e4343cd0185fac467704\nparent 120e9cb70f6411e56dc9e0ac38b8854f49c5233e\nparent 69d948d3477c208e4954d603f20d87782c7ea401\nauthor kennytm <kennytm@gmail.com> 1550596396 +0800\ncommitter kennytm <kennytm@gmail.com> 1550635096 +0800\n\nRollup merge of #58336 - GuillaumeGomez:fix-search-results-interactions, r=oli-obk\n\nFix search results interactions\n\nThe bug is visible when you search for \"none\": the second tab is empty and therefore it messes with the classes. Then when you try to use arrows on the third tab, it just crashes (because only 2 \"search-results\" are present and you're on tab 3).\n\nr? @QuietMisdreavus\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d22bb1a8b4402e19e35f038255883dcdb67376f0", "html_url": "https://github.com/rust-lang/rust/commit/d22bb1a8b4402e19e35f038255883dcdb67376f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d22bb1a8b4402e19e35f038255883dcdb67376f0/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "120e9cb70f6411e56dc9e0ac38b8854f49c5233e", "url": "https://api.github.com/repos/rust-lang/rust/commits/120e9cb70f6411e56dc9e0ac38b8854f49c5233e", "html_url": "https://github.com/rust-lang/rust/commit/120e9cb70f6411e56dc9e0ac38b8854f49c5233e"}, {"sha": "69d948d3477c208e4954d603f20d87782c7ea401", "url": "https://api.github.com/repos/rust-lang/rust/commits/69d948d3477c208e4954d603f20d87782c7ea401", "html_url": "https://github.com/rust-lang/rust/commit/69d948d3477c208e4954d603f20d87782c7ea401"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "1849e53d937aded2c276208d53e1e0f6e2683d4c", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d22bb1a8b4402e19e35f038255883dcdb67376f0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/d22bb1a8b4402e19e35f038255883dcdb67376f0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=d22bb1a8b4402e19e35f038255883dcdb67376f0", "patch": "@@ -1196,7 +1196,7 @@ if (!DOMTokenList.prototype.remove) {\n                 var actives = [[], [], []];\n                 // \"current\" is used to know which tab we're looking into.\n                 var current = 0;\n-                onEachLazy(document.getElementsByClassName(\"search-results\"), function(e) {\n+                onEachLazy(document.getElementById(\"results\").childNodes, function(e) {\n                     onEachLazy(e.getElementsByClassName(\"highlighted\"), function(e) {\n                         actives[current].push(e);\n                     });\n@@ -1213,7 +1213,7 @@ if (!DOMTokenList.prototype.remove) {\n                     removeClass(actives[currentTab][0], \"highlighted\");\n                 } else if (e.which === 40) { // down\n                     if (!actives[currentTab].length) {\n-                        var results = document.getElementsByClassName(\"search-results\");\n+                        var results = document.getElementById(\"results\").childNodes;\n                         if (results.length > 0) {\n                             var res = results[currentTab].getElementsByClassName(\"result\");\n                             if (res.length > 0) {"}]}