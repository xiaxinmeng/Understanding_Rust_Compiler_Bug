{"sha": "f1eebb8f371cf2703ca1d4096f974d037938ece8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxZWViYjhmMzcxY2YyNzAzY2ExZDQwOTZmOTc0ZDAzNzkzOGVjZTg=", "commit": {"author": {"name": "Kevin Yap", "email": "me@kevinyap.ca", "date": "2015-02-06T23:03:45Z"}, "committer": {"name": "Kevin Yap", "email": "me@kevinyap.ca", "date": "2015-02-24T05:14:51Z"}, "message": "Order list of linted files by frequency\n\nSince it makes more sense for .rs files to appear at the top of the\nlist of linted files and \"other\" files to appear at the end, this\ncommit moves the \"other\" count outside of the `file_counts` dictionary\nand sorts the remaining \"interesting\" files by decreasing frequency.", "tree": {"sha": "f908fe2cab7e4a1f55adbcf60b7cecab436919e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f908fe2cab7e4a1f55adbcf60b7cecab436919e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1eebb8f371cf2703ca1d4096f974d037938ece8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1eebb8f371cf2703ca1d4096f974d037938ece8", "html_url": "https://github.com/rust-lang/rust/commit/f1eebb8f371cf2703ca1d4096f974d037938ece8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1eebb8f371cf2703ca1d4096f974d037938ece8/comments", "author": {"login": "iKevinY", "id": 2434728, "node_id": "MDQ6VXNlcjI0MzQ3Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2434728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iKevinY", "html_url": "https://github.com/iKevinY", "followers_url": "https://api.github.com/users/iKevinY/followers", "following_url": "https://api.github.com/users/iKevinY/following{/other_user}", "gists_url": "https://api.github.com/users/iKevinY/gists{/gist_id}", "starred_url": "https://api.github.com/users/iKevinY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iKevinY/subscriptions", "organizations_url": "https://api.github.com/users/iKevinY/orgs", "repos_url": "https://api.github.com/users/iKevinY/repos", "events_url": "https://api.github.com/users/iKevinY/events{/privacy}", "received_events_url": "https://api.github.com/users/iKevinY/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iKevinY", "id": 2434728, "node_id": "MDQ6VXNlcjI0MzQ3Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2434728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iKevinY", "html_url": "https://github.com/iKevinY", "followers_url": "https://api.github.com/users/iKevinY/followers", "following_url": "https://api.github.com/users/iKevinY/following{/other_user}", "gists_url": "https://api.github.com/users/iKevinY/gists{/gist_id}", "starred_url": "https://api.github.com/users/iKevinY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iKevinY/subscriptions", "organizations_url": "https://api.github.com/users/iKevinY/orgs", "repos_url": "https://api.github.com/users/iKevinY/repos", "events_url": "https://api.github.com/users/iKevinY/events{/privacy}", "received_events_url": "https://api.github.com/users/iKevinY/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7884eb8e2ff8f0796a95aa0216e69241934ce14f", "url": "https://api.github.com/repos/rust-lang/rust/commits/7884eb8e2ff8f0796a95aa0216e69241934ce14f", "html_url": "https://github.com/rust-lang/rust/commit/7884eb8e2ff8f0796a95aa0216e69241934ce14f"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "5caa0c90f1b56387f920b04554178765acae1891", "filename": "src/etc/tidy.py", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/f1eebb8f371cf2703ca1d4096f974d037938ece8/src%2Fetc%2Ftidy.py", "raw_url": "https://github.com/rust-lang/rust/raw/f1eebb8f371cf2703ca1d4096f974d037938ece8/src%2Fetc%2Ftidy.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftidy.py?ref=f1eebb8f371cf2703ca1d4096f974d037938ece8", "patch": "@@ -66,20 +66,22 @@ def do_license_check(name, contents):\n try:\n     count_lines = 0\n     count_non_blank_lines = 0\n+    count_other_linted_files = 0\n \n     interesting_files = ['.rs', '.py', '.js', '.sh', '.c', '.h']\n \n     file_counts = {ext: 0 for ext in interesting_files}\n-    file_counts['other'] = 0\n \n     def update_counts(current_name):\n         global file_counts\n+        global count_other_linted_files\n+\n         _, ext = os.path.splitext(current_name)\n \n-        if ext in file_counts:\n+        if ext in interesting_files:\n             file_counts[ext] += 1\n         else:\n-            file_counts['other'] += 1\n+            count_other_linted_files += 1\n \n     all_paths = set()\n \n@@ -196,10 +198,11 @@ def interesting_file(f):\n     report_err(\"UTF-8 decoding error \" + str(e))\n \n print\n-for ext in file_counts:\n-    print \"* linted \" + str(file_counts[ext]) + \" \" + ext + \" files\"\n-print \"* total lines of code: \" + str(count_lines)\n-print \"* total non-blank lines of code: \" + str(count_non_blank_lines)\n+for ext in sorted(file_counts, key=file_counts.get, reverse=True):\n+    print \"* linted {} {} files\".format(file_counts[ext], ext)\n+print \"* linted {} other files\".format(count_other_linted_files)\n+print \"* total lines of code: {}\".format(count_lines)\n+print \"* total non-blank lines of code: {}\".format(count_non_blank_lines)\n print\n \n sys.exit(err)"}]}