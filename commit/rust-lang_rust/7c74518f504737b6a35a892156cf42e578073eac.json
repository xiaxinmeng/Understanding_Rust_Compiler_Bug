{"sha": "7c74518f504737b6a35a892156cf42e578073eac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdjNzQ1MThmNTA0NzM3YjZhMzVhODkyMTU2Y2Y0MmU1NzgwNzNlYWM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2018-07-23T15:13:54Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2018-07-25T03:38:20Z"}, "message": "SparseBitMatrix: add `insert_all` and `add_all` methods", "tree": {"sha": "5fd8140fa0b2268d63cdd609312e8e23bfd24d60", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fd8140fa0b2268d63cdd609312e8e23bfd24d60"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7c74518f504737b6a35a892156cf42e578073eac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7c74518f504737b6a35a892156cf42e578073eac", "html_url": "https://github.com/rust-lang/rust/commit/7c74518f504737b6a35a892156cf42e578073eac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7c74518f504737b6a35a892156cf42e578073eac/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71fef95e765f812f2eada304f1a6be00a814c0e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/71fef95e765f812f2eada304f1a6be00a814c0e9", "html_url": "https://github.com/rust-lang/rust/commit/71fef95e765f812f2eada304f1a6be00a814c0e9"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "245f5d610994aecb03eb653b682722fc12b25b81", "filename": "src/librustc_data_structures/bitvec.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7c74518f504737b6a35a892156cf42e578073eac/src%2Flibrustc_data_structures%2Fbitvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7c74518f504737b6a35a892156cf42e578073eac/src%2Flibrustc_data_structures%2Fbitvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fbitvec.rs?ref=7c74518f504737b6a35a892156cf42e578073eac", "patch": "@@ -75,6 +75,13 @@ impl<C: Idx> BitVector<C> {\n         new_value != value\n     }\n \n+    /// Sets all bits to true.\n+    pub fn insert_all(&mut self) {\n+        for data in &mut self.data {\n+            *data = u128::max_value();\n+        }\n+    }\n+\n     /// Returns true if the bit has changed.\n     #[inline]\n     pub fn remove(&mut self, bit: C) -> bool {\n@@ -359,6 +366,12 @@ impl<R: Idx, C: Idx> SparseBitMatrix<R, C> {\n         self.vector[into].merge(from)\n     }\n \n+    /// Add all bits to the given row.\n+    pub fn add_all(&mut self, row: R) {\n+        self.ensure_row(row);\n+        self.vector[row].insert_all();\n+    }\n+\n     /// Number of elements in the matrix.\n     pub fn len(&self) -> usize {\n         self.vector.len()"}]}