{"sha": "b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5YTBmNTgwM2VjZDZkZmQ2NmRjZDkyMWUzMWQyNmE1N2ZhYThhYWQ=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-07-14T14:39:02Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-14T14:39:02Z"}, "message": "Rollup merge of #74173 - estebank:struct-pat-as-enum, r=petrochenkov\n\nDetect tuple struct incorrectly used as struct pat\n\nSubpart of #74005.\n\nr? @petrochenkov", "tree": {"sha": "40ace3824f6b6c659ab10b38a293b5b7011a2234", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40ace3824f6b6c659ab10b38a293b5b7011a2234"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfDcOHCRBK7hj4Ov3rIwAAdHIIAJjl+DfPQ5pyLWwt9CYN+1Ji\n5RlT8md1Zv5fJzIKkpsWf5VR+vUUOb70GPIGWUgcF7AYw3b4nOL4ga+Aq5NDYXVL\n1jKgxVrMx/BcKCBjEvfW4WxxU5DSuW3wRAy5QFQCGTNtilbfhDb5oa6mOzueMwYo\nicOER1GE4AfvyhIlJP05i/3w5N1mzH4q2WyV6L94zs+5S1dCzufafSJkJ84bdXSj\n8EmoU1rE8vcVvYxdu33KvKPCQ6lDR5vnbtHUONz6flelm5fp78BNUBIdv+BeDzXD\nzQgPEewL3m1FnuoFTPy+hIrZE2uVGv41QhbRbjXYLD/dU9Oj81c277j0s3mYXSY=\n=MI+m\n-----END PGP SIGNATURE-----\n", "payload": "tree 40ace3824f6b6c659ab10b38a293b5b7011a2234\nparent 79894dfbacf76ba7e670fc5bff2fa7f2f3c06597\nparent 5daedea3dbeb8fb2639d3d142b008135f4fd2b43\nauthor Manish Goregaokar <manishsmail@gmail.com> 1594737542 -0700\ncommitter GitHub <noreply@github.com> 1594737542 -0700\n\nRollup merge of #74173 - estebank:struct-pat-as-enum, r=petrochenkov\n\nDetect tuple struct incorrectly used as struct pat\n\nSubpart of #74005.\n\nr? @petrochenkov\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "html_url": "https://github.com/rust-lang/rust/commit/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79894dfbacf76ba7e670fc5bff2fa7f2f3c06597", "url": "https://api.github.com/repos/rust-lang/rust/commits/79894dfbacf76ba7e670fc5bff2fa7f2f3c06597", "html_url": "https://github.com/rust-lang/rust/commit/79894dfbacf76ba7e670fc5bff2fa7f2f3c06597"}, {"sha": "5daedea3dbeb8fb2639d3d142b008135f4fd2b43", "url": "https://api.github.com/repos/rust-lang/rust/commits/5daedea3dbeb8fb2639d3d142b008135f4fd2b43", "html_url": "https://github.com/rust-lang/rust/commit/5daedea3dbeb8fb2639d3d142b008135f4fd2b43"}], "stats": {"total": 186, "additions": 137, "deletions": 49}, "files": [{"sha": "d3f54fcb2c8cf1905f9dc5e24729c492fc652f46", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -3996,6 +3996,7 @@ dependencies = [\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n  \"rustc_hir\",\n+ \"rustc_hir_pretty\",\n  \"rustc_index\",\n  \"rustc_infer\",\n  \"rustc_middle\","}, {"sha": "60aa12b0511c73a5933fbe769a7aefe8bfc2dcf9", "filename": "src/librustc_error_codes/error_codes.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_error_codes%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_error_codes%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_error_codes%2Ferror_codes.rs?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -451,6 +451,7 @@ E0765: include_str!(\"./error_codes/E0765.md\"),\n E0766: include_str!(\"./error_codes/E0766.md\"),\n E0767: include_str!(\"./error_codes/E0767.md\"),\n E0768: include_str!(\"./error_codes/E0768.md\"),\n+E0769: include_str!(\"./error_codes/E0769.md\"),\n ;\n //  E0006, // merged with E0005\n //  E0008, // cannot bind by-move into a pattern guard"}, {"sha": "d1995be9899b140a01686d1c7c386c8ce998454a", "filename": "src/librustc_error_codes/error_codes/E0769.md", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_error_codes%2Ferror_codes%2FE0769.md", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_error_codes%2Ferror_codes%2FE0769.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_error_codes%2Ferror_codes%2FE0769.md?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -0,0 +1,39 @@\n+A tuple struct or tuple variant was used in a pattern as if it were a\n+struct or struct variant.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0769\n+enum E {\n+    A(i32),\n+}\n+let e = E::A(42);\n+match e {\n+    E::A { number } => println!(\"{}\", x),\n+}\n+```\n+\n+To fix this error, you can use the tuple pattern:\n+\n+```\n+# enum E {\n+#     A(i32),\n+# }\n+# let e = E::A(42);\n+match e {\n+    E::A(number) => println!(\"{}\", number),\n+}\n+```\n+\n+Alternatively, you can also use the struct pattern by using the correct\n+field names and binding them to new identifiers:\n+\n+```\n+# enum E {\n+#     A(i32),\n+# }\n+# let e = E::A(42);\n+match e {\n+    E::A { 0: number } => println!(\"{}\", number),\n+}\n+```"}, {"sha": "93b503c976be4c8706ecee600cf78d08cfefe1f1", "filename": "src/librustc_typeck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_typeck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_typeck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2FCargo.toml?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -18,6 +18,7 @@ rustc_attr = { path = \"../librustc_attr\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }\n rustc_hir = { path = \"../librustc_hir\" }\n+rustc_hir_pretty = { path = \"../librustc_hir_pretty\" }\n rustc_target = { path = \"../librustc_target\" }\n rustc_session = { path = \"../librustc_session\" }\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }"}, {"sha": "a654fc3dfc2dffa8d47c6adc9d81dfb36b3e4a4e", "filename": "src/librustc_typeck/check/pat.rs", "status": "modified", "additions": 78, "deletions": 13, "changes": 91, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -1082,20 +1082,23 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             .filter(|ident| !used_fields.contains_key(&ident))\n             .collect::<Vec<_>>();\n \n-        if !inexistent_fields.is_empty() && !variant.recovered {\n-            self.error_inexistent_fields(\n+        let inexistent_fields_err = if !inexistent_fields.is_empty() && !variant.recovered {\n+            Some(self.error_inexistent_fields(\n                 adt.variant_descr(),\n                 &inexistent_fields,\n                 &mut unmentioned_fields,\n                 variant,\n-            );\n-        }\n+            ))\n+        } else {\n+            None\n+        };\n \n         // Require `..` if struct has non_exhaustive attribute.\n         if variant.is_field_list_non_exhaustive() && !adt.did.is_local() && !etc {\n             self.error_foreign_non_exhaustive_spat(pat, adt.variant_descr(), fields.is_empty());\n         }\n \n+        let mut unmentioned_err = None;\n         // Report an error if incorrect number of the fields were specified.\n         if adt.is_union() {\n             if fields.len() != 1 {\n@@ -1107,7 +1110,25 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 tcx.sess.struct_span_err(pat.span, \"`..` cannot be used in union patterns\").emit();\n             }\n         } else if !etc && !unmentioned_fields.is_empty() {\n-            self.error_unmentioned_fields(pat.span, &unmentioned_fields, variant);\n+            unmentioned_err = Some(self.error_unmentioned_fields(pat.span, &unmentioned_fields));\n+        }\n+        match (inexistent_fields_err, unmentioned_err) {\n+            (Some(mut i), Some(mut u)) => {\n+                if let Some(mut e) = self.error_tuple_variant_as_struct_pat(pat, fields, variant) {\n+                    // We don't want to show the inexistent fields error when this was\n+                    // `Foo { a, b }` when it should have been `Foo(a, b)`.\n+                    i.delay_as_bug();\n+                    u.delay_as_bug();\n+                    e.emit();\n+                } else {\n+                    i.emit();\n+                    u.emit();\n+                }\n+            }\n+            (None, Some(mut err)) | (Some(mut err), None) => {\n+                err.emit();\n+            }\n+            (None, None) => {}\n         }\n         no_field_errors\n     }\n@@ -1154,7 +1175,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         inexistent_fields: &[Ident],\n         unmentioned_fields: &mut Vec<Ident>,\n         variant: &ty::VariantDef,\n-    ) {\n+    ) -> DiagnosticBuilder<'tcx> {\n         let tcx = self.tcx;\n         let (field_names, t, plural) = if inexistent_fields.len() == 1 {\n             (format!(\"a field named `{}`\", inexistent_fields[0]), \"this\", \"\")\n@@ -1221,15 +1242,62 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     it explicitly.\",\n             );\n         }\n-        err.emit();\n+        err\n+    }\n+\n+    fn error_tuple_variant_as_struct_pat(\n+        &self,\n+        pat: &Pat<'_>,\n+        fields: &'tcx [hir::FieldPat<'tcx>],\n+        variant: &ty::VariantDef,\n+    ) -> Option<DiagnosticBuilder<'tcx>> {\n+        if let (CtorKind::Fn, PatKind::Struct(qpath, ..)) = (variant.ctor_kind, &pat.kind) {\n+            let path = rustc_hir_pretty::to_string(rustc_hir_pretty::NO_ANN, |s| {\n+                s.print_qpath(qpath, false)\n+            });\n+            let mut err = struct_span_err!(\n+                self.tcx.sess,\n+                pat.span,\n+                E0769,\n+                \"tuple variant `{}` written as struct variant\",\n+                path\n+            );\n+            let (sugg, appl) = if fields.len() == variant.fields.len() {\n+                (\n+                    fields\n+                        .iter()\n+                        .map(|f| match self.tcx.sess.source_map().span_to_snippet(f.pat.span) {\n+                            Ok(f) => f,\n+                            Err(_) => rustc_hir_pretty::to_string(rustc_hir_pretty::NO_ANN, |s| {\n+                                s.print_pat(f.pat)\n+                            }),\n+                        })\n+                        .collect::<Vec<String>>()\n+                        .join(\", \"),\n+                    Applicability::MachineApplicable,\n+                )\n+            } else {\n+                (\n+                    variant.fields.iter().map(|_| \"_\").collect::<Vec<&str>>().join(\", \"),\n+                    Applicability::MaybeIncorrect,\n+                )\n+            };\n+            err.span_suggestion(\n+                pat.span,\n+                \"use the tuple variant pattern syntax instead\",\n+                format!(\"{}({})\", path, sugg),\n+                appl,\n+            );\n+            return Some(err);\n+        }\n+        None\n     }\n \n     fn error_unmentioned_fields(\n         &self,\n         span: Span,\n         unmentioned_fields: &[Ident],\n-        variant: &ty::VariantDef,\n-    ) {\n+    ) -> DiagnosticBuilder<'tcx> {\n         let field_names = if unmentioned_fields.len() == 1 {\n             format!(\"field `{}`\", unmentioned_fields[0])\n         } else {\n@@ -1248,9 +1316,6 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             field_names\n         );\n         diag.span_label(span, format!(\"missing {}\", field_names));\n-        if variant.ctor_kind == CtorKind::Fn {\n-            diag.note(\"trying to match a tuple variant with a struct variant pattern\");\n-        }\n         if self.tcx.sess.teach(&diag.get_code().unwrap()) {\n             diag.note(\n                 \"This error indicates that a pattern for a struct fails to specify a \\\n@@ -1259,7 +1324,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     ignore unwanted fields.\",\n             );\n         }\n-        diag.emit();\n+        diag\n     }\n \n     fn check_pat_box("}, {"sha": "40304a674a63365b6e6321fd16128427b0ce0326", "filename": "src/test/ui/missing/missing-fields-in-struct-pattern.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.rs?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -2,8 +2,7 @@ struct S(usize, usize, usize, usize);\n \n fn main() {\n     if let S { a, b, c, d } = S(1, 2, 3, 4) {\n-    //~^ ERROR struct `S` does not have fields named `a`, `b`, `c`, `d` [E0026]\n-    //~| ERROR pattern does not mention fields `0`, `1`, `2`, `3` [E0027]\n+    //~^ ERROR tuple variant `S` written as struct variant\n         println!(\"hi\");\n     }\n }"}, {"sha": "6583524aad18f9ba401e3a9e9310549adaf2a9ad", "filename": "src/test/ui/missing/missing-fields-in-struct-pattern.stderr", "status": "modified", "additions": 4, "deletions": 13, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -1,18 +1,9 @@\n-error[E0026]: struct `S` does not have fields named `a`, `b`, `c`, `d`\n-  --> $DIR/missing-fields-in-struct-pattern.rs:4:16\n-   |\n-LL |     if let S { a, b, c, d } = S(1, 2, 3, 4) {\n-   |                ^  ^  ^  ^ struct `S` does not have these fields\n-\n-error[E0027]: pattern does not mention fields `0`, `1`, `2`, `3`\n+error[E0769]: tuple variant `S` written as struct variant\n   --> $DIR/missing-fields-in-struct-pattern.rs:4:12\n    |\n LL |     if let S { a, b, c, d } = S(1, 2, 3, 4) {\n-   |            ^^^^^^^^^^^^^^^^ missing fields `0`, `1`, `2`, `3`\n-   |\n-   = note: trying to match a tuple variant with a struct variant pattern\n+   |            ^^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `S(a, b, c, d)`\n \n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n-Some errors have detailed explanations: E0026, E0027.\n-For more information about an error, try `rustc --explain E0026`.\n+For more information about this error, try `rustc --explain E0769`."}, {"sha": "cbd39f5f9e6ed5c842acc199414cfb3063475edd", "filename": "src/test/ui/type/type-check/issue-41314.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.rs?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -4,7 +4,7 @@ enum X {\n \n fn main() {\n     match X::Y(0) {\n-        X::Y { number } => {} //~ ERROR does not have a field named `number`\n-        //~^ ERROR pattern does not mention field `0`\n+        X::Y { number } => {}\n+        //~^ ERROR tuple variant `X::Y` written as struct variant\n     }\n }"}, {"sha": "bd4d2071c2059ac2c9208a87442863114340b098", "filename": "src/test/ui/type/type-check/issue-41314.stderr", "status": "modified", "additions": 4, "deletions": 13, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -1,18 +1,9 @@\n-error[E0026]: variant `X::Y` does not have a field named `number`\n-  --> $DIR/issue-41314.rs:7:16\n-   |\n-LL |         X::Y { number } => {}\n-   |                ^^^^^^ variant `X::Y` does not have this field\n-\n-error[E0027]: pattern does not mention field `0`\n+error[E0769]: tuple variant `X::Y` written as struct variant\n   --> $DIR/issue-41314.rs:7:9\n    |\n LL |         X::Y { number } => {}\n-   |         ^^^^^^^^^^^^^^^ missing field `0`\n-   |\n-   = note: trying to match a tuple variant with a struct variant pattern\n+   |         ^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `X::Y(number)`\n \n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n-Some errors have detailed explanations: E0026, E0027.\n-For more information about an error, try `rustc --explain E0026`.\n+For more information about this error, try `rustc --explain E0769`."}, {"sha": "48654347285d3be45c7a97d9f4641788e03ef972", "filename": "src/test/ui/union/union-fields-2.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Funion%2Funion-fields-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad/src%2Ftest%2Fui%2Funion%2Funion-fields-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funion%2Funion-fields-2.stderr?ref=b9a0f5803ecd6dfd66dcd921e31d26a57faa8aad", "patch": "@@ -48,18 +48,18 @@ error: union patterns should have exactly one field\n LL |     let U { a, b } = u;\n    |         ^^^^^^^^^^\n \n-error[E0026]: union `U` does not have a field named `c`\n-  --> $DIR/union-fields-2.rs:18:19\n-   |\n-LL |     let U { a, b, c } = u;\n-   |                   ^ union `U` does not have this field\n-\n error: union patterns should have exactly one field\n   --> $DIR/union-fields-2.rs:18:9\n    |\n LL |     let U { a, b, c } = u;\n    |         ^^^^^^^^^^^^^\n \n+error[E0026]: union `U` does not have a field named `c`\n+  --> $DIR/union-fields-2.rs:18:19\n+   |\n+LL |     let U { a, b, c } = u;\n+   |                   ^ union `U` does not have this field\n+\n error: union patterns should have exactly one field\n   --> $DIR/union-fields-2.rs:20:9\n    |"}]}