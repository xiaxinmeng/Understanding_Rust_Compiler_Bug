{"sha": "7f2df9ad65f49b916a979d819595cd1b6385bc71", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmMmRmOWFkNjVmNDliOTE2YTk3OWQ4MTk1OTVjZDFiNjM4NWJjNzE=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-08-30T22:54:48Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-08-31T18:29:04Z"}, "message": "some low hanging clippy::perf fixes", "tree": {"sha": "4e96b659f7179be5ef38787bd38eb631123e2131", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e96b659f7179be5ef38787bd38eb631123e2131"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f2df9ad65f49b916a979d819595cd1b6385bc71", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f2df9ad65f49b916a979d819595cd1b6385bc71", "html_url": "https://github.com/rust-lang/rust/commit/7f2df9ad65f49b916a979d819595cd1b6385bc71", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f2df9ad65f49b916a979d819595cd1b6385bc71/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76d18cfb8945f824c8777e04981e930d2037954e", "url": "https://api.github.com/repos/rust-lang/rust/commits/76d18cfb8945f824c8777e04981e930d2037954e", "html_url": "https://github.com/rust-lang/rust/commit/76d18cfb8945f824c8777e04981e930d2037954e"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "d7cd34c5922c7cfdfe18472091d7a9c47d3e69ca", "filename": "compiler/rustc_resolve/src/late/diagnostics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -2090,7 +2090,7 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n                                 self.is_unnamed(),\n                                 self.is_underscore(),\n                                 self.is_named(),\n-                                sugg.starts_with(\"&\"),\n+                                sugg.starts_with('&'),\n                             ) {\n                                 (true, _, _, false) => (self.span_unnamed_borrow(), sugg),\n                                 (true, _, _, true) => {"}, {"sha": "4c1d537d55fa37cd3231337c248630f6f5e48ec3", "filename": "compiler/rustc_resolve/src/late/lifetimes.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_resolve%2Fsrc%2Flate%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_resolve%2Fsrc%2Flate%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate%2Flifetimes.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -2605,8 +2605,10 @@ impl<'a, 'tcx> LifetimeContext<'a, 'tcx> {\n                     binding.ident,\n                 );\n                 self.with(scope, |_, this| {\n-                    let scope =\n-                        Scope::Supertrait { lifetimes: lifetimes.unwrap_or(vec![]), s: this.scope };\n+                    let scope = Scope::Supertrait {\n+                        lifetimes: lifetimes.unwrap_or_default(),\n+                        s: this.scope,\n+                    };\n                     this.with(scope, |_, this| this.visit_assoc_type_binding(binding));\n                 });\n             } else {"}, {"sha": "c65804e5721574d64448044694ea909a77945a16", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -664,7 +664,7 @@ impl ToJson for SanitizerSet {\n         self.into_iter()\n             .map(|v| Some(v.as_str()?.to_json()))\n             .collect::<Option<Vec<_>>>()\n-            .unwrap_or(Vec::new())\n+            .unwrap_or_default()\n             .to_json()\n     }\n }"}, {"sha": "e0838c29a6555724a24b71c09322a4232ce6bc20", "filename": "compiler/rustc_typeck/src/check/expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -165,7 +165,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         if self.tcx().sess.verbose() {\n             // make this code only run with -Zverbose because it is probably slow\n             if let Ok(lint_str) = self.tcx.sess.source_map().span_to_snippet(expr.span) {\n-                if !lint_str.contains(\"\\n\") {\n+                if !lint_str.contains('\\n') {\n                     debug!(\"expr text: {}\", lint_str);\n                 } else {\n                     let mut lines = lint_str.lines();"}, {"sha": "140a9d1126d32a29289207c7f7df4bc3884943c8", "filename": "compiler/rustc_typeck/src/check/pat.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -1008,7 +1008,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n \n         let mut err = struct_span_err!(\n             self.tcx.sess,\n-            MultiSpan::from_spans(subpat_spans.clone()),\n+            MultiSpan::from_spans(subpat_spans),\n             E0023,\n             \"this pattern has {} field{}, but the corresponding {} has {} field{}\",\n             subpats.len(),"}, {"sha": "bb90b195ddd4f5547dfc9c19d79a12cac53736ec", "filename": "src/librustdoc/html/sources.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f2df9ad65f49b916a979d819595cd1b6385bc71/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f2df9ad65f49b916a979d819595cd1b6385bc71/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fsources.rs?ref=7f2df9ad65f49b916a979d819595cd1b6385bc71", "patch": "@@ -72,10 +72,9 @@ impl LocalSourcesCollector<'_, '_> {\n             href.push('/');\n         });\n \n-        let src_fname = p.file_name().expect(\"source has no filename\").to_os_string();\n-        let mut fname = src_fname.clone();\n-        fname.push(\".html\");\n-        href.push_str(&fname.to_string_lossy());\n+        let mut src_fname = p.file_name().expect(\"source has no filename\").to_os_string();\n+        src_fname.push(\".html\");\n+        href.push_str(&src_fname.to_string_lossy());\n         self.local_sources.insert(p, href);\n     }\n }"}]}