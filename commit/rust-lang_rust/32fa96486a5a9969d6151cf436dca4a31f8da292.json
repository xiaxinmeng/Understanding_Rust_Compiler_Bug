{"sha": "32fa96486a5a9969d6151cf436dca4a31f8da292", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMyZmE5NjQ4NmE1YTk5NjlkNjE1MWNmNDM2ZGNhNGEzMWY4ZGEyOTI=", "commit": {"author": {"name": "Aman Arora", "email": "me@aman-arora.com", "date": "2021-06-29T07:33:24Z"}, "committer": {"name": "Aman Arora", "email": "me@aman-arora.com", "date": "2021-06-29T07:33:24Z"}, "message": "Edition 2021 for tests", "tree": {"sha": "0c1dfe8e470ef243a94765b515ea51db3d596f43", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c1dfe8e470ef243a94765b515ea51db3d596f43"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/32fa96486a5a9969d6151cf436dca4a31f8da292", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/32fa96486a5a9969d6151cf436dca4a31f8da292", "html_url": "https://github.com/rust-lang/rust/commit/32fa96486a5a9969d6151cf436dca4a31f8da292", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/32fa96486a5a9969d6151cf436dca4a31f8da292/comments", "author": {"login": "arora-aman", "id": 4193035, "node_id": "MDQ6VXNlcjQxOTMwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4193035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arora-aman", "html_url": "https://github.com/arora-aman", "followers_url": "https://api.github.com/users/arora-aman/followers", "following_url": "https://api.github.com/users/arora-aman/following{/other_user}", "gists_url": "https://api.github.com/users/arora-aman/gists{/gist_id}", "starred_url": "https://api.github.com/users/arora-aman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arora-aman/subscriptions", "organizations_url": "https://api.github.com/users/arora-aman/orgs", "repos_url": "https://api.github.com/users/arora-aman/repos", "events_url": "https://api.github.com/users/arora-aman/events{/privacy}", "received_events_url": "https://api.github.com/users/arora-aman/received_events", "type": "User", "site_admin": false}, "committer": {"login": "arora-aman", "id": 4193035, "node_id": "MDQ6VXNlcjQxOTMwMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4193035?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arora-aman", "html_url": "https://github.com/arora-aman", "followers_url": "https://api.github.com/users/arora-aman/followers", "following_url": "https://api.github.com/users/arora-aman/following{/other_user}", "gists_url": "https://api.github.com/users/arora-aman/gists{/gist_id}", "starred_url": "https://api.github.com/users/arora-aman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arora-aman/subscriptions", "organizations_url": "https://api.github.com/users/arora-aman/orgs", "repos_url": "https://api.github.com/users/arora-aman/repos", "events_url": "https://api.github.com/users/arora-aman/events{/privacy}", "received_events_url": "https://api.github.com/users/arora-aman/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23c0334fd3549c1e3a701c2669babbe272504251", "url": "https://api.github.com/repos/rust-lang/rust/commits/23c0334fd3549c1e3a701c2669babbe272504251", "html_url": "https://github.com/rust-lang/rust/commit/23c0334fd3549c1e3a701c2669babbe272504251"}], "stats": {"total": 43, "additions": 8, "deletions": 35}, "files": [{"sha": "37a2a97d44279d7746a36e7730172c4796953159", "filename": "src/test/ui/closures/2229_closure_analysis/optimization/edge_case.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.rs?ref=32fa96486a5a9969d6151cf436dca4a31f8da292", "patch": "@@ -1,7 +1,4 @@\n-#![feature(capture_disjoint_fields)]\n-//~^ WARNING: the feature `capture_disjoint_fields` is incomplete\n-//~| NOTE: `#[warn(incomplete_features)]` on by default\n-//~| NOTE: see issue #53488 <https://github.com/rust-lang/rust/issues/53488>\n+// edition:2021\n \n #![feature(rustc_attrs)]\n #![allow(unused)]"}, {"sha": "b727c06d9528f0ded2176718e413576b1a15e321", "filename": "src/test/ui/closures/2229_closure_analysis/optimization/edge_case.stderr", "status": "modified", "additions": 6, "deletions": 15, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case.stderr?ref=32fa96486a5a9969d6151cf436dca4a31f8da292", "patch": "@@ -1,45 +1,36 @@\n error[E0658]: attributes on expressions are experimental\n-  --> $DIR/edge_case.rs:23:13\n+  --> $DIR/edge_case.rs:20:13\n    |\n LL |     let c = #[rustc_capture_analysis] || drop(&m.a.0);\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: see issue #15701 <https://github.com/rust-lang/rust/issues/15701> for more information\n    = help: add `#![feature(stmt_expr_attributes)]` to the crate attributes to enable\n \n-warning: the feature `capture_disjoint_fields` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/edge_case.rs:1:12\n-   |\n-LL | #![feature(capture_disjoint_fields)]\n-   |            ^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #53488 <https://github.com/rust-lang/rust/issues/53488> for more information\n-\n error: First Pass analysis includes:\n-  --> $DIR/edge_case.rs:23:39\n+  --> $DIR/edge_case.rs:20:39\n    |\n LL |     let c = #[rustc_capture_analysis] || drop(&m.a.0);\n    |                                       ^^^^^^^^^^^^^^^\n    |\n note: Capturing m[Deref,(0, 0),Deref] -> ImmBorrow\n-  --> $DIR/edge_case.rs:23:48\n+  --> $DIR/edge_case.rs:20:48\n    |\n LL |     let c = #[rustc_capture_analysis] || drop(&m.a.0);\n    |                                                ^^^^^\n \n error: Min Capture analysis includes:\n-  --> $DIR/edge_case.rs:23:39\n+  --> $DIR/edge_case.rs:20:39\n    |\n LL |     let c = #[rustc_capture_analysis] || drop(&m.a.0);\n    |                                       ^^^^^^^^^^^^^^^\n    |\n note: Min Capture m[Deref,(0, 0),Deref] -> ImmBorrow\n-  --> $DIR/edge_case.rs:23:48\n+  --> $DIR/edge_case.rs:20:48\n    |\n LL |     let c = #[rustc_capture_analysis] || drop(&m.a.0);\n    |                                                ^^^^^\n \n-error: aborting due to 3 previous errors; 1 warning emitted\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0658`."}, {"sha": "033fd6f17753af47dd23d3cea03a9fe8cb740201", "filename": "src/test/ui/closures/2229_closure_analysis/optimization/edge_case_run_pass.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32fa96486a5a9969d6151cf436dca4a31f8da292/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.rs?ref=32fa96486a5a9969d6151cf436dca4a31f8da292", "patch": "@@ -1,8 +1,4 @@\n-#![feature(capture_disjoint_fields)]\n-//~^ WARNING: the feature `capture_disjoint_fields` is incomplete\n-//~| NOTE: `#[warn(incomplete_features)]` on by default\n-//~| NOTE: see issue #53488 <https://github.com/rust-lang/rust/issues/53488>\n-\n+// edition:2021\n // run-pass\n \n #![allow(unused)]"}, {"sha": "36906d1685ce375ed89655e8b7ea784a34a0be99", "filename": "src/test/ui/closures/2229_closure_analysis/optimization/edge_case_run_pass.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/23c0334fd3549c1e3a701c2669babbe272504251/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/23c0334fd3549c1e3a701c2669babbe272504251/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2F2229_closure_analysis%2Foptimization%2Fedge_case_run_pass.stderr?ref=23c0334fd3549c1e3a701c2669babbe272504251", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `capture_disjoint_fields` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/edge_case_run_pass.rs:1:12\n-   |\n-LL | #![feature(capture_disjoint_fields)]\n-   |            ^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #53488 <https://github.com/rust-lang/rust/issues/53488> for more information\n-\n-warning: 1 warning emitted\n-"}]}