{"sha": "e5590425e9624df0528e9f1a8972e6ff258deb9e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1NTkwNDI1ZTk2MjRkZjA1MjhlOWYxYTg5NzJlNmZmMjU4ZGViOWU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-24T23:05:02Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-24T23:05:02Z"}, "message": "Rollup merge of #62827 - nikic:llvm-components, r=alexcrichton\n\nDon't link mcjit/interpreter LLVM components\n\nWe don't use these. Drop related unused ExecutionEngine header uses.\n\nAs some drive-by cleanup drop the unused `EnableARMEHABI` global and remove an outdated version check for the hexagon component.\n\nr? @alexcrichton", "tree": {"sha": "c1639fe030a03e75ed4eb6332746cbeca6b966b0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c1639fe030a03e75ed4eb6332746cbeca6b966b0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e5590425e9624df0528e9f1a8972e6ff258deb9e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdOOQeCRBK7hj4Ov3rIwAAdHIIAFi11txka7Nh5eTrye2aY+vn\nm9iNhb5F65pkBLuoXC3bHmTSlc0GGYZe3dmq0FXO4rqj8d6FVL7K2um7aPfVDXyw\nbi9dNhxCcePEQ2IqBj+tO5HAtNZGSbp2Mr+We1kwscRfpKg7jY/nS509VoAhDNeK\nl/yUTAmYOniAf2hIiiDvNjUmo9hLtQLC+yoDR3USgFPmRoP4sfMw1jSiB3jfurXW\nRPJO9zObBwdRHzvdbqsNPvWlZ/IKzqCyA6hYE5L4ectiXrHR2P9TNOt+gxnyheGy\nNRY61m7hg2DV7tjT9TbJLcE36EWePzH6lVwlPiEjrbZgh+TxPAoEwIOfSnMk4Qg=\n=eatE\n-----END PGP SIGNATURE-----\n", "payload": "tree c1639fe030a03e75ed4eb6332746cbeca6b966b0\nparent b1a866012def324a47408d9130ea6c25cc5d0fc8\nparent b9784b18c2d18dee7100529fd0cbadc8fa331a62\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1564009502 +0200\ncommitter GitHub <noreply@github.com> 1564009502 +0200\n\nRollup merge of #62827 - nikic:llvm-components, r=alexcrichton\n\nDon't link mcjit/interpreter LLVM components\n\nWe don't use these. Drop related unused ExecutionEngine header uses.\n\nAs some drive-by cleanup drop the unused `EnableARMEHABI` global and remove an outdated version check for the hexagon component.\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e5590425e9624df0528e9f1a8972e6ff258deb9e", "html_url": "https://github.com/rust-lang/rust/commit/e5590425e9624df0528e9f1a8972e6ff258deb9e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e5590425e9624df0528e9f1a8972e6ff258deb9e/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1a866012def324a47408d9130ea6c25cc5d0fc8", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1a866012def324a47408d9130ea6c25cc5d0fc8", "html_url": "https://github.com/rust-lang/rust/commit/b1a866012def324a47408d9130ea6c25cc5d0fc8"}, {"sha": "b9784b18c2d18dee7100529fd0cbadc8fa331a62", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9784b18c2d18dee7100529fd0cbadc8fa331a62", "html_url": "https://github.com/rust-lang/rust/commit/b9784b18c2d18dee7100529fd0cbadc8fa331a62"}], "stats": {"total": 19, "additions": 3, "deletions": 16}, "files": [{"sha": "3def2d8232f63e2bbc1496bfc32b165380187462", "filename": "src/librustc_llvm/build.rs", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Flibrustc_llvm%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Flibrustc_llvm%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Fbuild.rs?ref=e5590425e9624df0528e9f1a8972e6ff258deb9e", "patch": "@@ -71,7 +71,8 @@ fn main() {\n \n     let mut optional_components =\n         vec![\"x86\", \"arm\", \"aarch64\", \"amdgpu\", \"mips\", \"powerpc\",\n-             \"systemz\", \"jsbackend\", \"webassembly\", \"msp430\", \"sparc\", \"nvptx\"];\n+             \"systemz\", \"jsbackend\", \"webassembly\", \"msp430\", \"sparc\", \"nvptx\",\n+             \"hexagon\"];\n \n     let mut version_cmd = Command::new(&llvm_config);\n     version_cmd.arg(\"--version\");\n@@ -82,27 +83,19 @@ fn main() {\n         if let (Some(major), Some(minor)) = (parts.next(), parts.next()) {\n             (major, minor)\n         } else {\n-            (3, 9)\n+            (6, 0)\n         };\n \n-    if major > 3 {\n-        optional_components.push(\"hexagon\");\n-    }\n-\n     if major > 6 {\n         optional_components.push(\"riscv\");\n     }\n \n-    // FIXME: surely we don't need all these components, right? Stuff like mcjit\n-    //        or interpreter the compiler itself never uses.\n     let required_components = &[\"ipo\",\n                                 \"bitreader\",\n                                 \"bitwriter\",\n                                 \"linker\",\n                                 \"asmparser\",\n-                                \"mcjit\",\n                                 \"lto\",\n-                                \"interpreter\",\n                                 \"instrumentation\"];\n \n     let components = output(Command::new(&llvm_config).arg(\"--components\"));"}, {"sha": "0cda3465dc0930dff71451bed2873465884ea93f", "filename": "src/rustllvm/PassWrapper.cpp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Frustllvm%2FPassWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Frustllvm%2FPassWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FPassWrapper.cpp?ref=e5590425e9624df0528e9f1a8972e6ff258deb9e", "patch": "@@ -26,8 +26,6 @@\n using namespace llvm;\n using namespace llvm::legacy;\n \n-extern cl::opt<bool> EnableARMEHABI;\n-\n typedef struct LLVMOpaquePass *LLVMPassRef;\n typedef struct LLVMOpaqueTargetMachine *LLVMTargetMachineRef;\n "}, {"sha": "c3f0d174d4b411cbed5c8323fd29611dc35e3e06", "filename": "src/rustllvm/rustllvm.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Frustllvm%2Frustllvm.h", "raw_url": "https://github.com/rust-lang/rust/raw/e5590425e9624df0528e9f1a8972e6ff258deb9e/src%2Frustllvm%2Frustllvm.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2Frustllvm.h?ref=e5590425e9624df0528e9f1a8972e6ff258deb9e", "patch": "@@ -1,15 +1,11 @@\n #include \"llvm-c/BitReader.h\"\n #include \"llvm-c/Core.h\"\n-#include \"llvm-c/ExecutionEngine.h\"\n #include \"llvm-c/Object.h\"\n #include \"llvm/ADT/ArrayRef.h\"\n #include \"llvm/ADT/DenseSet.h\"\n #include \"llvm/ADT/Triple.h\"\n #include \"llvm/Analysis/Lint.h\"\n #include \"llvm/Analysis/Passes.h\"\n-#include \"llvm/ExecutionEngine/ExecutionEngine.h\"\n-#include \"llvm/ExecutionEngine/Interpreter.h\"\n-#include \"llvm/ExecutionEngine/MCJIT.h\"\n #include \"llvm/IR/IRBuilder.h\"\n #include \"llvm/IR/InlineAsm.h\"\n #include \"llvm/IR/LLVMContext.h\""}]}