{"sha": "11ef494b3764811b8ea5178d6c9bd67b287f104a", "node_id": "C_kwDOAAsO6NoAKDExZWY0OTRiMzc2NDgxMWI4ZWE1MTc4ZDZjOWJkNjdiMjg3ZjEwNGE", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2022-07-28T18:45:47Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2022-07-28T18:45:47Z"}, "message": "Be more explicit when filtering built-in completions", "tree": {"sha": "6d69b74a9ee25ca567bcb0aa1f94555bdb47a6f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d69b74a9ee25ca567bcb0aa1f94555bdb47a6f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/11ef494b3764811b8ea5178d6c9bd67b287f104a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/11ef494b3764811b8ea5178d6c9bd67b287f104a", "html_url": "https://github.com/rust-lang/rust/commit/11ef494b3764811b8ea5178d6c9bd67b287f104a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/11ef494b3764811b8ea5178d6c9bd67b287f104a/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "948c9afc73786d5b4895fa4ea9041992601a59c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/948c9afc73786d5b4895fa4ea9041992601a59c3", "html_url": "https://github.com/rust-lang/rust/commit/948c9afc73786d5b4895fa4ea9041992601a59c3"}], "stats": {"total": 7, "additions": 1, "deletions": 6}, "files": [{"sha": "cf826648dcf7b92426d162055248a2f7248a91c3", "filename": "crates/ide-completion/src/tests.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/11ef494b3764811b8ea5178d6c9bd67b287f104a/crates%2Fide-completion%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11ef494b3764811b8ea5178d6c9bd67b287f104a/crates%2Fide-completion%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-completion%2Fsrc%2Ftests.rs?ref=11ef494b3764811b8ea5178d6c9bd67b287f104a", "patch": "@@ -23,8 +23,6 @@ mod type_pos;\n mod use_tree;\n mod visibility;\n \n-use std::mem;\n-\n use hir::{db::DefDatabase, PrefixKind, Semantics};\n use ide_db::{\n     base_db::{fixture::ChangeFixture, FileLoader, FilePosition},\n@@ -107,12 +105,9 @@ fn completion_list_with_config(\n ) -> String {\n     // filter out all but one builtintype completion for smaller test outputs\n     let items = get_all_items(config, ra_fixture, trigger_character);\n-    let mut bt_seen = false;\n     let items = items\n         .into_iter()\n-        .filter(|it| {\n-            it.kind() != CompletionItemKind::BuiltinType || !mem::replace(&mut bt_seen, true)\n-        })\n+        .filter(|it| it.kind() != CompletionItemKind::BuiltinType || it.label() == \"u32\")\n         .filter(|it| include_keywords || it.kind() != CompletionItemKind::Keyword)\n         .filter(|it| include_keywords || it.kind() != CompletionItemKind::Snippet)\n         .sorted_by_key(|it| (it.kind(), it.label().to_owned(), it.detail().map(ToOwned::to_owned)))"}]}