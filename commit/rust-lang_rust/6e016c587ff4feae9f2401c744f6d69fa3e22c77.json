{"sha": "6e016c587ff4feae9f2401c744f6d69fa3e22c77", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlMDE2YzU4N2ZmNGZlYWU5ZjI0MDFjNzQ0ZjZkNjlmYTNlMjJjNzc=", "commit": {"author": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2018-02-24T00:25:21Z"}, "committer": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2018-03-05T20:43:44Z"}, "message": "Trying to get paths right...", "tree": {"sha": "3ee084efb06bc70f000ef90fbafdd989b997c684", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ee084efb06bc70f000ef90fbafdd989b997c684"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e016c587ff4feae9f2401c744f6d69fa3e22c77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e016c587ff4feae9f2401c744f6d69fa3e22c77", "html_url": "https://github.com/rust-lang/rust/commit/6e016c587ff4feae9f2401c744f6d69fa3e22c77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e016c587ff4feae9f2401c744f6d69fa3e22c77/comments", "author": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3570b9df6ae615691bfe296b5af816332a25299b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3570b9df6ae615691bfe296b5af816332a25299b", "html_url": "https://github.com/rust-lang/rust/commit/3570b9df6ae615691bfe296b5af816332a25299b"}], "stats": {"total": 311, "additions": 310, "deletions": 1}, "files": [{"sha": "b7f697f39ae25356b59195f28c8a225d06995a06", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 310, "deletions": 1, "changes": 311, "blob_url": "https://github.com/rust-lang/rust/blob/6e016c587ff4feae9f2401c744f6d69fa3e22c77/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e016c587ff4feae9f2401c744f6d69fa3e22c77/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=6e016c587ff4feae9f2401c744f6d69fa3e22c77", "patch": "@@ -49,7 +49,315 @@ static EXCEPTIONS: &'static [&'static str] = &[\n ];\n \n // Whitelist of crates rustc is allowed to depend on. Avoid adding to the list if possible.\n-static WHITELIST: &'static [(&'static str, &'static str)] = &[];\n+static WHITELIST: &'static [(&'static str, &'static str)] = &[\n+//    (\"advapi32-sys\", \"0.2.0\"),\n+//    (\"aho-corasick\", \"0.5.3\"),\n+//    (\"aho-corasick\", \"0.6.4\"),\n+//    (\"alloc\", \"0.0.0\"),\n+//    (\"alloc_jemalloc\", \"0.0.0\"),\n+//    (\"alloc_system\", \"0.0.0\"),\n+//    (\"ansi_term\", \"0.10.2\"),\n+//    (\"ar\", \"0.3.1\"),\n+//    (\"arena\", \"0.0.0\"),\n+//    (\"atty\", \"0.2.6\"),\n+//    (\"backtrace\", \"0.3.5\"),\n+//    (\"backtrace-sys\", \"0.1.16\"),\n+//    (\"bin_lib\", \"0.1.0\"),\n+//    (\"bitflags\", \"0.7.0\"),\n+//    (\"bitflags\", \"0.9.1\"),\n+//    (\"bitflags\", \"1.0.1\"),\n+//    (\"bootstrap\", \"0.0.0\"),\n+//    (\"borrow_error\", \"0.1.0\"),\n+//    (\"bufstream\", \"0.1.3\"),\n+//    (\"build-manifest\", \"0.1.0\"),\n+//    (\"build_helper\", \"0.1.0\"),\n+//    (\"byteorder\", \"1.2.1\"),\n+//    (\"cargo\", \"0.26.0\"),\n+//    (\"cargo_metadata\", \"0.2.3\"),\n+//    (\"cargo_metadata\", \"0.4.0\"),\n+//    (\"cargotest\", \"0.1.0\"),\n+//    (\"cargotest2\", \"0.1.0\"),\n+//    (\"cc\", \"1.0.4\"),\n+//    (\"cfg-if\", \"0.1.2\"),\n+//    (\"chrono\", \"0.4.0\"),\n+//    (\"clap\", \"2.29.0\"),\n+//    (\"clippy\", \"0.0.186\"),\n+//    (\"clippy-mini-macro-test\", \"0.2.0\"),\n+//    (\"clippy_lints\", \"0.0.186\"),\n+//    (\"cmake\", \"0.1.29\"),\n+//    (\"coco\", \"0.1.1\"),\n+//    (\"commoncrypto\", \"0.2.0\"),\n+//    (\"commoncrypto-sys\", \"0.2.0\"),\n+//    (\"compiler_builtins\", \"0.0.0\"),\n+//    (\"compiletest\", \"0.0.0\"),\n+//    (\"compiletest_rs\", \"0.3.6\"),\n+//    (\"completion\", \"0.1.0\"),\n+//    (\"core\", \"0.0.0\"),\n+//    (\"core-foundation\", \"0.4.6\"),\n+//    (\"core-foundation-sys\", \"0.4.6\"),\n+//    (\"crates-io\", \"0.15.0\"),\n+//    (\"crossbeam\", \"0.2.12\"),\n+//    (\"crossbeam\", \"0.3.2\"),\n+//    (\"crypto-hash\", \"0.3.0\"),\n+//    (\"curl\", \"0.4.11\"),\n+//    (\"curl-sys\", \"0.4.1\"),\n+//    (\"deglob\", \"0.1.0\"),\n+//    (\"derive-new\", \"0.5.0\"),\n+//    (\"diff\", \"0.1.11\"),\n+//    (\"dlmalloc\", \"0.0.0\"),\n+//    (\"docopt\", \"0.8.3\"),\n+//    (\"dtoa\", \"0.4.2\"),\n+//    (\"duct\", \"0.8.2\"),\n+//    (\"either\", \"1.4.0\"),\n+//    (\"endian-type\", \"0.1.2\"),\n+//    (\"enum_primitive\", \"0.1.1\"),\n+//    (\"env_logger\", \"0.3.5\"),\n+//    (\"env_logger\", \"0.4.3\"),\n+//    (\"env_logger\", \"0.5.3\"),\n+//    (\"error-chain\", \"0.11.0\"),\n+//    (\"error-chain\", \"0.8.1\"),\n+//    (\"error_index_generator\", \"0.0.0\"),\n+//    (\"failure\", \"0.1.1\"),\n+//    (\"failure_derive\", \"0.1.1\"),\n+//    (\"features\", \"0.1.0\"),\n+//    (\"filetime\", \"0.1.15\"),\n+//    (\"find_all_refs_no_cfg_test\", \"0.1.0\"),\n+//    (\"find_impls\", \"0.1.0\"),\n+//    (\"flate2\", \"1.0.1\"),\n+//    (\"fmt_macros\", \"0.0.0\"),\n+//    (\"fnv\", \"1.0.6\"),\n+//    (\"foreign-types\", \"0.3.2\"),\n+//    (\"foreign-types-shared\", \"0.1.1\"),\n+//    (\"fs2\", \"0.4.3\"),\n+//    (\"fuchsia-zircon\", \"0.3.3\"),\n+//    (\"fuchsia-zircon-sys\", \"0.3.3\"),\n+//    (\"futures\", \"0.1.17\"),\n+//    (\"getopts\", \"0.2.15\"),\n+//    (\"git2\", \"0.6.11\"),\n+//    (\"git2-curl\", \"0.7.0\"),\n+//    (\"glob\", \"0.2.11\"),\n+//    (\"globset\", \"0.2.1\"),\n+//    (\"graphviz\", \"0.0.0\"),\n+//    (\"hamcrest\", \"0.1.1\"),\n+//    (\"handlebars\", \"0.29.1\"),\n+//    (\"hex\", \"0.2.0\"),\n+//    (\"hex\", \"0.3.1\"),\n+//    (\"home\", \"0.3.0\"),\n+//    (\"idna\", \"0.1.4\"),\n+//    (\"if_chain\", \"0.1.2\"),\n+//    (\"ignore\", \"0.3.1\"),\n+//    (\"infer_bin\", \"0.1.0\"),\n+//    (\"infer_custom_bin\", \"0.1.0\"),\n+//    (\"infer_lib\", \"0.1.0\"),\n+//    (\"installer\", \"0.0.0\"),\n+//    (\"is-match\", \"0.1.0\"),\n+//    (\"itertools\", \"0.6.5\"),\n+//    (\"itertools\", \"0.7.6\"),\n+//    (\"itoa\", \"0.3.4\"),\n+//    (\"jobserver\", \"0.1.9\"),\n+//    (\"json\", \"0.11.12\"),\n+//    (\"jsonrpc-core\", \"8.0.1\"),\n+//    (\"kernel32-sys\", \"0.2.2\"),\n+//    (\"languageserver-types\", \"0.30.0\"),\n+//    (\"lazy_static\", \"0.2.11\"),\n+//    (\"lazy_static\", \"1.0.0\"),\n+//    (\"lazycell\", \"0.5.1\"),\n+//    (\"libc\", \"0.0.0\"),\n+//    (\"libc\", \"0.2.36\"),\n+//    (\"libgit2-sys\", \"0.6.19\"),\n+//    (\"libssh2-sys\", \"0.2.6\"),\n+//    (\"libz-sys\", \"1.0.18\"),\n+//    (\"linkchecker\", \"0.1.0\"),\n+//    (\"log\", \"0.3.9\"),\n+//    (\"log\", \"0.4.1\"),\n+//    (\"log_settings\", \"0.1.1\"),\n+//    (\"lzma-sys\", \"0.1.9\"),\n+//    (\"matches\", \"0.1.6\"),\n+//    (\"mdbook\", \"0.1.2\"),\n+//    (\"memchr\", \"0.1.11\"),\n+//    (\"memchr\", \"2.0.1\"),\n+//    (\"miniz-sys\", \"0.1.10\"),\n+//    (\"miow\", \"0.2.1\"),\n+//    (\"miri\", \"0.1.0\"),\n+//    (\"multiple_bins\", \"0.1.0\"),\n+//    (\"net2\", \"0.2.31\"),\n+//    (\"nibble_vec\", \"0.0.3\"),\n+//    (\"nix\", \"0.8.1\"),\n+//    (\"num\", \"0.1.41\"),\n+//    (\"num-bigint\", \"0.1.41\"),\n+//    (\"num-complex\", \"0.1.41\"),\n+//    (\"num-integer\", \"0.1.35\"),\n+//    (\"num-iter\", \"0.1.34\"),\n+//    (\"num-rational\", \"0.1.40\"),\n+//    (\"num-traits\", \"0.1.41\"),\n+//    (\"num_cpus\", \"1.8.0\"),\n+//    (\"open\", \"1.2.1\"),\n+//    (\"openssl\", \"0.9.23\"),\n+//    (\"openssl-probe\", \"0.1.2\"),\n+//    (\"openssl-sys\", \"0.9.24\"),\n+//    (\"os_pipe\", \"0.5.1\"),\n+//    (\"owning_ref\", \"0.3.3\"),\n+//    (\"panic_abort\", \"0.0.0\"),\n+//    (\"panic_unwind\", \"0.0.0\"),\n+//    (\"parking_lot\", \"0.5.3\"),\n+//    (\"parking_lot_core\", \"0.2.9\"),\n+//    (\"percent-encoding\", \"1.0.1\"),\n+//    (\"pest\", \"0.3.3\"),\n+//    (\"pkg-config\", \"0.3.9\"),\n+//    (\"proc_macro\", \"0.0.0\"),\n+//    (\"profiler_builtins\", \"0.0.0\"),\n+//    (\"pulldown-cmark\", \"0.0.15\"),\n+//    (\"pulldown-cmark\", \"0.1.0\"),\n+//    (\"quick-error\", \"1.2.1\"),\n+//    (\"quine-mc_cluskey\", \"0.2.4\"),\n+//    (\"quote\", \"0.3.15\"),\n+//    (\"racer\", \"2.0.12\"),\n+//    (\"radix_trie\", \"0.1.2\"),\n+//    (\"rand\", \"0.3.20\"),\n+//    (\"rayon\", \"0.9.0\"),\n+//    (\"rayon-core\", \"1.3.0\"),\n+//    (\"redox_syscall\", \"0.1.37\"),\n+//    (\"redox_termios\", \"0.1.1\"),\n+//    (\"reformat\", \"0.1.0\"),\n+//    (\"reformat_with_range\", \"0.1.0\"),\n+//    (\"regex\", \"0.1.80\"),\n+//    (\"regex\", \"0.2.5\"),\n+//    (\"regex-syntax\", \"0.3.9\"),\n+//    (\"regex-syntax\", \"0.4.2\"),\n+//    (\"remote-test-client\", \"0.1.0\"),\n+//    (\"remote-test-server\", \"0.1.0\"),\n+//    (\"rls\", \"0.125.0\"),\n+//    (\"rls-analysis\", \"0.11.0\"),\n+//    (\"rls-blacklist\", \"0.1.0\"),\n+//    (\"rls-data\", \"0.15.0\"),\n+//    (\"rls-rustc\", \"0.2.1\"),\n+//    (\"rls-span\", \"0.4.0\"),\n+//    (\"rls-vfs\", \"0.4.4\"),\n+//    (\"rustbook\", \"0.1.0\"),\n+//    (\"rustc\", \"0.0.0\"),\n+//    (\"rustc-ap-rustc_cratesio_shim\", \"29.0.0\"),\n+//    (\"rustc-ap-rustc_data_structures\", \"29.0.0\"),\n+//    (\"rustc-ap-rustc_errors\", \"29.0.0\"),\n+//    (\"rustc-ap-serialize\", \"29.0.0\"),\n+//    (\"rustc-ap-syntax\", \"29.0.0\"),\n+//    (\"rustc-ap-syntax_pos\", \"29.0.0\"),\n+//    (\"rustc-demangle\", \"0.1.5\"),\n+//    (\"rustc-main\", \"0.0.0\"),\n+//    (\"rustc-serialize\", \"0.3.24\"),\n+//    (\"rustc_allocator\", \"0.0.0\"),\n+//    (\"rustc_apfloat\", \"0.0.0\"),\n+//    (\"rustc_asan\", \"0.0.0\"),\n+//    (\"rustc_back\", \"0.0.0\"),\n+//    (\"rustc_binaryen\", \"0.0.0\"),\n+//    (\"rustc_borrowck\", \"0.0.0\"),\n+//    (\"rustc_const_eval\", \"0.0.0\"),\n+//    (\"rustc_const_math\", \"0.0.0\"),\n+//    (\"rustc_cratesio_shim\", \"0.0.0\"),\n+//    (\"rustc_data_structures\", \"0.0.0\"),\n+//    (\"rustc_driver\", \"0.0.0\"),\n+//    (\"rustc_errors\", \"0.0.0\"),\n+//    (\"rustc_incremental\", \"0.0.0\"),\n+//    (\"rustc_lint\", \"0.0.0\"),\n+//    (\"rustc_llvm\", \"0.0.0\"),\n+//    (\"rustc_lsan\", \"0.0.0\"),\n+//    (\"rustc_metadata\", \"0.0.0\"),\n+//    (\"rustc_mir\", \"0.0.0\"),\n+//    (\"rustc_msan\", \"0.0.0\"),\n+//    (\"rustc_passes\", \"0.0.0\"),\n+//    (\"rustc_platform_intrinsics\", \"0.0.0\"),\n+//    (\"rustc_plugin\", \"0.0.0\"),\n+//    (\"rustc_privacy\", \"0.0.0\"),\n+//    (\"rustc_resolve\", \"0.0.0\"),\n+//    (\"rustc_save_analysis\", \"0.0.0\"),\n+//    (\"rustc_trans\", \"0.0.0\"),\n+//    (\"rustc_trans_utils\", \"0.0.0\"),\n+//    (\"rustc_tsan\", \"0.0.0\"),\n+//    (\"rustc_typeck\", \"0.0.0\"),\n+//    (\"rustdoc\", \"0.0.0\"),\n+//    (\"rustdoc-themes\", \"0.1.0\"),\n+//    (\"rustdoc-tool\", \"0.0.0\"),\n+//    (\"rustfmt-nightly\", \"0.3.8\"),\n+//    (\"same-file\", \"0.1.3\"),\n+//    (\"same-file\", \"1.0.2\"),\n+//    (\"schannel\", \"0.1.10\"),\n+//    (\"scoped-tls\", \"0.1.0\"),\n+//    (\"scopeguard\", \"0.1.2\"),\n+//    (\"scopeguard\", \"0.3.3\"),\n+//    (\"semver\", \"0.6.0\"),\n+//    (\"semver\", \"0.8.0\"),\n+//    (\"semver\", \"0.9.0\"),\n+//    (\"semver-parser\", \"0.7.0\"),\n+//    (\"serde\", \"1.0.27\"),\n+//    (\"serde_derive\", \"1.0.27\"),\n+//    (\"serde_derive_internals\", \"0.19.0\"),\n+//    (\"serde_ignored\", \"0.0.4\"),\n+//    (\"serde_json\", \"1.0.9\"),\n+//    (\"serialize\", \"0.0.0\"),\n+//    (\"shared_child\", \"0.2.1\"),\n+//    (\"shell-escape\", \"0.1.3\"),\n+//    (\"shlex\", \"0.1.1\"),\n+//    (\"smallvec\", \"0.6.0\"),\n+//    (\"socket2\", \"0.3.0\"),\n+//    (\"stable_deref_trait\", \"1.0.0\"),\n+//    (\"std\", \"0.0.0\"),\n+//    (\"std_unicode\", \"0.0.0\"),\n+//    (\"strsim\", \"0.6.0\"),\n+//    (\"syn\", \"0.11.11\"),\n+//    (\"synom\", \"0.11.3\"),\n+//    (\"synstructure\", \"0.6.1\"),\n+//    (\"syntax\", \"0.0.0\"),\n+//    (\"syntax_ext\", \"0.0.0\"),\n+//    (\"syntax_pos\", \"0.0.0\"),\n+//    (\"syntex_errors\", \"0.52.0\"),\n+//    (\"syntex_pos\", \"0.52.0\"),\n+//    (\"syntex_syntax\", \"0.52.0\"),\n+//    (\"tar\", \"0.4.14\"),\n+//    (\"tempdir\", \"0.3.5\"),\n+//    (\"term\", \"0.0.0\"),\n+//    (\"term\", \"0.4.6\"),\n+//    (\"termcolor\", \"0.3.3\"),\n+//    (\"termion\", \"1.5.1\"),\n+//    (\"test\", \"0.0.0\"),\n+//    (\"textwrap\", \"0.9.0\"),\n+//    (\"thread-id\", \"2.0.0\"),\n+//    (\"thread_local\", \"0.2.7\"),\n+//    (\"thread_local\", \"0.3.5\"),\n+//    (\"tidy\", \"0.1.0\"),\n+//    (\"time\", \"0.1.39\"),\n+//    (\"toml\", \"0.2.1\"),\n+//    (\"toml\", \"0.4.5\"),\n+//    (\"toml-query\", \"0.6.0\"),\n+//    (\"unicode-bidi\", \"0.3.4\"),\n+//    (\"unicode-normalization\", \"0.1.5\"),\n+//    (\"unicode-segmentation\", \"1.2.0\"),\n+//    (\"unicode-width\", \"0.1.4\"),\n+//    (\"unicode-xid\", \"0.0.3\"),\n+//    (\"unicode-xid\", \"0.0.4\"),\n+//    (\"unreachable\", \"1.0.0\"),\n+//    (\"unstable-book-gen\", \"0.1.0\"),\n+//    (\"unwind\", \"0.0.0\"),\n+//    (\"url\", \"1.6.0\"),\n+//    (\"url_serde\", \"0.2.0\"),\n+//    (\"userenv-sys\", \"0.2.0\"),\n+//    (\"utf8-ranges\", \"0.1.3\"),\n+//    (\"utf8-ranges\", \"1.0.0\"),\n+//    (\"vcpkg\", \"0.2.2\"),\n+//    (\"vec_map\", \"0.8.0\"),\n+//    (\"void\", \"1.0.2\"),\n+//    (\"walkdir\", \"1.0.7\"),\n+//    (\"walkdir\", \"2.0.1\"),\n+//    (\"winapi\", \"0.2.8\"),\n+//    (\"winapi\", \"0.3.4\"),\n+//    (\"winapi-build\", \"0.1.1\"),\n+//    (\"winapi-i686-pc-windows-gnu\", \"0.4.0\"),\n+//    (\"winapi-x86_64-pc-windows-gnu\", \"0.4.0\"),\n+//    (\"wincolor\", \"0.1.4\"),\n+//    (\"workspace_symbol\", \"0.1.0\"),\n+//    (\"ws2_32-sys\", \"0.2.1\"),\n+//    (\"xattr\", \"0.1.11\"),\n+//    (\"xz2\", \"0.1.4\"),\n+//    (\"yaml-rust\", \"0.3.5\"),\n+];\n \n // Some types for Serde to deserialize the output of `cargo metadata` to...\n \n@@ -186,6 +494,7 @@ fn extract_license(line: &str) -> String {\n /// Get the dependencies of the crate at the given path using `cargo metadata`.\n fn get_deps(path: &Path) -> Vec<Package> {\n     // Run `cargo metadata` to get the set of dependencies\n+    println!(\"Getting metadata from {:?}\", path.join(\"Cargo.toml\"));\n     let output = Command::new(\"cargo\")\n         .arg(\"metadata\")\n         .arg(\"--format-version\")"}]}