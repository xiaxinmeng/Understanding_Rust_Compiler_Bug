{"sha": "0f36b2cf2e406535b38908b6a081b5d7b06258d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBmMzZiMmNmMmU0MDY1MzViMzg5MDhiNmEwODFiNWQ3YjA2MjU4ZDk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-02T08:29:16Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-02T14:48:41Z"}, "message": "Rollup merge of #47829 - estebank:break-in-for, r=cramertj Suggest removing value from `break` when invalid When attempting to use `break` with a value in a type of loop where it'd be invalid (any non-`loop`), suggest using `break` on its own. Close #34359.", "tree": {"sha": "4f47116fe58dbc74c247fd063cf494ab6be8ff87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f47116fe58dbc74c247fd063cf494ab6be8ff87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0f36b2cf2e406535b38908b6a081b5d7b06258d9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlp0ekkACgkQ/vbIBR0O\nATzJGhAAqteN2ye1F6kX7e99sDbuAYdQsLfCIuLjpsgHtC2jN6KJSpJMmn4L1Fbl\nAc/3/DfR52fVxQKRKUFsPLmRMjV0L0Uu8W92mIpn5rqCVrOYThQd/1I6hucArt6c\nmRxfHWpf9llhnBzR5UBNumxI3urOd06wtsJbL1IUfjRlJCpj4e4wiPcevi0iAs4g\n5guIpCwoUCU492qZg+sPiHUL0/Mt0l33A5IjZtwDw+F+NzI5soaoeuGtZKQfR1Uv\nMsjQ62ua8Er/FAFnZpEbF+lj3C1WQcsHU9Ft1QchI/WkEwvc+BrxgEyrcoyaOqBy\nv3BwyPdiKoGSLYKH8zR1Pna7xoGhZCofuCmVcpJH0KsVI5KVTHVL/3qXaHTYm0z8\nwWoaTKTnfJEX5R2tmdwWLTkNTraxy+VvgNRWdUiXLcdJ7mXrSNcB2U7p8LG2jaqi\n2D0X7rWxkBCRXzun822uvRZqXMEGaTLty/oAxHfiODQplZJk2V+U61QQJka1tmth\nRxPISyATbJabp+saYCMytH0yR5ugn9ZNPZtZJCND2m64LODvKKkuqhjeicHDy4B8\nLZ9x7BXGM4OJU0b05q0VHYRMHjdpA1RtP34cQht8GO3vhdwRcuHU2Yw3Z01PzGOB\nDa0PISM0CGxymagTF14Imn1Ovihsm4UOg1jJOB6Eh6CxkUxu8fc=\n=WdFe\n-----END PGP SIGNATURE-----", "payload": "tree 4f47116fe58dbc74c247fd063cf494ab6be8ff87\nparent 3600bfb3f021f63fc1065ff4e706ff4b70e57e09\nparent b7437c56f82cfb643a372a7b10c85b4ed183d886\nauthor kennytm <kennytm@gmail.com> 1517560156 +0800\ncommitter kennytm <kennytm@gmail.com> 1517582921 +0800\n\nRollup merge of #47829 - estebank:break-in-for, r=cramertj Suggest removing value from `break` when invalid When attempting to use `break` with a value in a type of loop where it'd be invalid (any non-`loop`), suggest using `break` on its own. Close #34359.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0f36b2cf2e406535b38908b6a081b5d7b06258d9", "html_url": "https://github.com/rust-lang/rust/commit/0f36b2cf2e406535b38908b6a081b5d7b06258d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0f36b2cf2e406535b38908b6a081b5d7b06258d9/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3600bfb3f021f63fc1065ff4e706ff4b70e57e09", "url": "https://api.github.com/repos/rust-lang/rust/commits/3600bfb3f021f63fc1065ff4e706ff4b70e57e09", "html_url": "https://github.com/rust-lang/rust/commit/3600bfb3f021f63fc1065ff4e706ff4b70e57e09"}, {"sha": "b7437c56f82cfb643a372a7b10c85b4ed183d886", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7437c56f82cfb643a372a7b10c85b4ed183d886", "html_url": "https://github.com/rust-lang/rust/commit/b7437c56f82cfb643a372a7b10c85b4ed183d886"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "008c71cc9ce3d2129a892f08753ff1c4e2eb8faa", "filename": "src/librustc_passes/loops.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0f36b2cf2e406535b38908b6a081b5d7b06258d9/src%2Flibrustc_passes%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0f36b2cf2e406535b38908b6a081b5d7b06258d9/src%2Flibrustc_passes%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Floops.rs?ref=0f36b2cf2e406535b38908b6a081b5d7b06258d9", "patch": "@@ -119,6 +119,11 @@ impl<'a, 'hir> Visitor<'hir> for CheckLoopVisitor<'a, 'hir> {\n                                              kind.name())\n                                 .span_label(e.span,\n                                             \"can only break with a value inside `loop`\")\n+                                .span_suggestion(e.span,\n+                                                 &format!(\"instead, use `break` on its own \\\n+                                                           without a value inside this `{}` loop\",\n+                                                          kind.name()),\n+                                                 \"break\".to_string())\n                                 .emit();\n                         }\n                     }"}, {"sha": "982de00b4fa7c37ea89f6f4a500d3eb176423b98", "filename": "src/test/ui/loop-break-value-no-repeat.stderr", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0f36b2cf2e406535b38908b6a081b5d7b06258d9/src%2Ftest%2Fui%2Floop-break-value-no-repeat.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0f36b2cf2e406535b38908b6a081b5d7b06258d9/src%2Ftest%2Fui%2Floop-break-value-no-repeat.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floop-break-value-no-repeat.stderr?ref=0f36b2cf2e406535b38908b6a081b5d7b06258d9", "patch": "@@ -3,6 +3,10 @@ error[E0571]: `break` with value from a `for` loop\n    |\n 22 |         break 22 //~ ERROR `break` with value from a `for` loop\n    |         ^^^^^^^^ can only break with a value inside `loop`\n+help: instead, use `break` on its own without a value inside this `for` loop\n+   |\n+22 |         break //~ ERROR `break` with value from a `for` loop\n+   |         ^^^^^\n \n error: aborting due to previous error\n "}]}