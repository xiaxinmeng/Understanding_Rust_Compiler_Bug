{"sha": "91bb563e13a20f84b2f2027a33f4855f19720c67", "node_id": "C_kwDOAAsO6NoAKDkxYmI1NjNlMTNhMjBmODRiMmYyMDI3YTMzZjQ4NTVmMTk3MjBjNjc", "commit": {"author": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2023-02-08T07:49:51Z"}, "committer": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2023-03-04T15:37:40Z"}, "message": "Try to avoid the last rustc rebuild", "tree": {"sha": "1dd364005b51882dc70b66a3c8a0d2e5fb8863d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1dd364005b51882dc70b66a3c8a0d2e5fb8863d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91bb563e13a20f84b2f2027a33f4855f19720c67", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEzFQynJm4WzBnfhz8kJzQ0mSDUWsFAmQDZcQACgkQkJzQ0mSD\nUWtnMwv+NLMxEnBEmjoqwIWcL9K6B0wT3U+41AA8rfH9YGGI3F1EckZca5KLHiRy\n08Xo/XWYEurViyeExE00xbqE6R/CN9YeO9UjkFK322nz+XyHW2RpQ9EneXM3dOB3\nL5KPbpMS0UKp6TlO5YCx+84XUpODIPTzWo/7zs/0XNAlZzM6DALfkPcJf+DbobM2\n2aQ/jmRRWOjnNcMEFLKtmhSdBevd5DRmpZLFX2OUuwC1VL53eX7LPIceuzkBWx/i\n7oalFn0O2Df+Xp4n3MdRjDX2Z7SAeEOG04MjSEMm0KhslHNwZ0qJ37pByUPmy6F3\naQ6u7e/bfGZjWkvsypBcjS5rnqPu0kf7/Zzi7vqtErIn2781bqueQnH/ZQKQggbW\nF46jHX4AvQIJN1RoM6Svf/5F9xGtjyR53AsAUDEtBT3xBFkRFCutUgTr9dHw1TYi\noweI7YOOP4S3396M5MbAV8tHJNgflZpPoiRH3g7m8VXruTa7KKpQe4AhvUOYQ5dU\nj3dsF15X\n=LJFk\n-----END PGP SIGNATURE-----", "payload": "tree 1dd364005b51882dc70b66a3c8a0d2e5fb8863d7\nparent bfc220a96e7b4198c2ae18c7fc6e36fd67448086\nauthor Jakub Ber\u00e1nek <berykubik@gmail.com> 1675842591 +0100\ncommitter Jakub Ber\u00e1nek <berykubik@gmail.com> 1677944260 +0100\n\nTry to avoid the last rustc rebuild\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91bb563e13a20f84b2f2027a33f4855f19720c67", "html_url": "https://github.com/rust-lang/rust/commit/91bb563e13a20f84b2f2027a33f4855f19720c67", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91bb563e13a20f84b2f2027a33f4855f19720c67/comments", "author": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bfc220a96e7b4198c2ae18c7fc6e36fd67448086", "url": "https://api.github.com/repos/rust-lang/rust/commits/bfc220a96e7b4198c2ae18c7fc6e36fd67448086", "html_url": "https://github.com/rust-lang/rust/commit/bfc220a96e7b4198c2ae18c7fc6e36fd67448086"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "fe3083dc31e467f82198e6d4e827b7c3cb9a8ad9", "filename": "src/ci/stage-build.py", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/91bb563e13a20f84b2f2027a33f4855f19720c67/src%2Fci%2Fstage-build.py", "raw_url": "https://github.com/rust-lang/rust/raw/91bb563e13a20f84b2f2027a33f4855f19720c67/src%2Fci%2Fstage-build.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fstage-build.py?ref=91bb563e13a20f84b2f2027a33f4855f19720c67", "patch": "@@ -798,12 +798,15 @@ def execute_build_pipeline(timer: Timer, pipeline: Pipeline, final_build_args: L\n                     \"--llvm-profile-use\",\n                     pipeline.llvm_profile_merged_file(),\n                     \"--llvm-bolt-profile-generate\",\n+                    \"--rust-profile-use\",\n+                    pipeline.rustc_profile_merged_file()\n                 ])\n                 record_metrics(pipeline, rustc_build)\n \n             with stage3.section(\"Gather profiles\"):\n                 gather_llvm_bolt_profiles(pipeline)\n \n+        # LLVM is not being cleared here, we want to reuse the previous build\n         print_free_disk_space(pipeline)\n         final_build_args += [\n             \"--llvm-bolt-profile-use\","}]}