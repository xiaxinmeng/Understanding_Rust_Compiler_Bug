{"sha": "175a5eea420af5f23c356da7def52d82903bceed", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3NWE1ZWVhNDIwYWY1ZjIzYzM1NmRhN2RlZjUyZDgyOTAzYmNlZWQ=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-05-04T10:46:11Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-05-04T10:46:11Z"}, "message": "Fix another goof: consistently use parent directory of target for rule.\n\n(I wonder if there's a better way to write this in the rule itself;\ni.e. something like `$$(dirname $$@)`.  But for now this will do.)", "tree": {"sha": "b834b31115c7187d83eeff7d6d48a1293d993ff4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b834b31115c7187d83eeff7d6d48a1293d993ff4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/175a5eea420af5f23c356da7def52d82903bceed", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/175a5eea420af5f23c356da7def52d82903bceed", "html_url": "https://github.com/rust-lang/rust/commit/175a5eea420af5f23c356da7def52d82903bceed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/175a5eea420af5f23c356da7def52d82903bceed/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "495bceb9b0df3cc98cfd0fc041a9eb87edba5025", "url": "https://api.github.com/repos/rust-lang/rust/commits/495bceb9b0df3cc98cfd0fc041a9eb87edba5025", "html_url": "https://github.com/rust-lang/rust/commit/495bceb9b0df3cc98cfd0fc041a9eb87edba5025"}], "stats": {"total": 26, "additions": 16, "deletions": 10}, "files": [{"sha": "0c00a7e1d6469b5020d4a71697a9669ac8a0efe3", "filename": "mk/host.mk", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/175a5eea420af5f23c356da7def52d82903bceed/mk%2Fhost.mk", "raw_url": "https://github.com/rust-lang/rust/raw/175a5eea420af5f23c356da7def52d82903bceed/mk%2Fhost.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fhost.mk?ref=175a5eea420af5f23c356da7def52d82903bceed", "patch": "@@ -42,7 +42,7 @@ $$(HLIB$(2)_H_$(4))/$(CFG_LIBRUSTC_$(4)): \\\n \t$$(HLIB$(2)_H_$(4))/$(CFG_RUSTLLVM_$(4)) \\\n \t$$(HCORELIB_DEFAULT$(2)_H_$(4)) \\\n \t$$(HSTDLIB_DEFAULT$(2)_H_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n@@ -56,7 +56,7 @@ $$(HLIB$(2)_H_$(4))/$(CFG_LIBSYNTAX_$(4)): \\\n \t$$(HLIB$(2)_H_$(4))/$(CFG_RUSTLLVM_$(4)) \\\n \t$$(HCORELIB_DEFAULT$(2)_H_$(4)) \\\n \t$$(HSTDLIB_DEFAULT$(2)_H_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBSYNTAX_GLOB_$(4)) \\\n@@ -65,14 +65,14 @@ $$(HLIB$(2)_H_$(4))/$(CFG_LIBSYNTAX_$(4)): \\\n \n $$(HLIB$(2)_H_$(4))/$(CFG_RUNTIME_$(4)): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n $$(HLIB$(2)_H_$(4))/$(CFG_CORELIB_$(4)): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_CORELIB_$(4)) \\\n \t$$(HLIB$(2)_H_$(4))/$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n # Subtle: We do not let the shell expand $(CORELIB_DSYM_GLOB) directly rather\n@@ -90,7 +90,7 @@ $$(HLIB$(2)_H_$(4))/$(CFG_STDLIB_$(4)): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_STDLIB_$(4)) \\\n \t$$(HLIB$(2)_H_$(4))/$(CFG_CORELIB_$(4)) \\\n \t$$(HLIB$(2)_H_$(4))/$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(STDLIB_GLOB_$(4)) \\\n@@ -100,15 +100,15 @@ $$(HLIB$(2)_H_$(4))/$(CFG_STDLIB_$(4)): \\\n $$(HLIB$(2)_H_$(4))/libcore.rlib: \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/libcore.rlib \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n $$(HLIB$(2)_H_$(4))/libstd.rlib: \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/libstd.rlib \\\n \t$$(HLIB$(2)_H_$(4))/libcore.rlib \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n@@ -117,19 +117,22 @@ $$(HLIB$(2)_H_$(4))/librustc.rlib: \\\n \t$$(HLIB$(2)_H_$(4))/libcore.rlib \\\n \t$$(HLIB$(2)_H_$(4))/libstd.rlib \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n $$(HLIB$(2)_H_$(4))/$(CFG_RUSTLLVM_$(4)): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_RUSTLLVM_$(4)) \\\n-\t| $$(HBIN$(2)_H_$(4))/\n+\t| $$(HLIB$(2)_H_$(4))/\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n $$(HBIN$(2)_H_$(4))/:\n \tmkdir -p $$@\n \n+$$(HLIB$(2)_H_$(4))/:\n+\tmkdir -p $$@\n+\n endef\n \n $(foreach t,$(CFG_HOST_TRIPLES),\t\t\t\t\t\\"}, {"sha": "2223531c3ec5efb2d59d7b6a52723e37d0520866", "filename": "mk/target.mk", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/175a5eea420af5f23c356da7def52d82903bceed/mk%2Ftarget.mk", "raw_url": "https://github.com/rust-lang/rust/raw/175a5eea420af5f23c356da7def52d82903bceed/mk%2Ftarget.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftarget.mk?ref=175a5eea420af5f23c356da7def52d82903bceed", "patch": "@@ -73,7 +73,7 @@ $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTC_$(3)):\t\t\\\n $$(TBIN$(1)_T_$(2)_H_$(3))/rustc$$(X_$(3)):\t\t\t\\\n \t\t$$(DRIVER_CRATE)\t\t\t\t\\\n \t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTC_$(3)) \\\n-\t\t| $$(TLIB$(1)_T_$(2)_H_$(3))/\n+\t\t| $$(TBIN$(1)_T_$(2)_H_$(3))/\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) --cfg rustc -o $$@ $$<\n ifdef CFG_ENABLE_PAX_FLAGS\n@@ -83,6 +83,9 @@ endif\n \n endif\n \n+$$(TBIN$(1)_T_$(2)_H_$(3))/:\n+\tmkdir -p $$@\n+\n $$(TLIB$(1)_T_$(2)_H_$(3))/:\n \tmkdir -p $$@\n "}]}