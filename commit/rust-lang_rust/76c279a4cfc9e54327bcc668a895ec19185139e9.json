{"sha": "76c279a4cfc9e54327bcc668a895ec19185139e9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2YzI3OWE0Y2ZjOWU1NDMyN2JjYzY2OGE4OTVlYzE5MTg1MTM5ZTk=", "commit": {"author": {"name": "Kevin Yap", "email": "me@kevinyap.ca", "date": "2015-01-23T04:40:15Z"}, "committer": {"name": "Kevin Yap", "email": "me@kevinyap.ca", "date": "2015-01-23T07:04:14Z"}, "message": "Use a regex to perform license check", "tree": {"sha": "00572acb5f10ba60924fbe06630158b560d70a2e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00572acb5f10ba60924fbe06630158b560d70a2e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/76c279a4cfc9e54327bcc668a895ec19185139e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/76c279a4cfc9e54327bcc668a895ec19185139e9", "html_url": "https://github.com/rust-lang/rust/commit/76c279a4cfc9e54327bcc668a895ec19185139e9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/76c279a4cfc9e54327bcc668a895ec19185139e9/comments", "author": {"login": "iKevinY", "id": 2434728, "node_id": "MDQ6VXNlcjI0MzQ3Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2434728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iKevinY", "html_url": "https://github.com/iKevinY", "followers_url": "https://api.github.com/users/iKevinY/followers", "following_url": "https://api.github.com/users/iKevinY/following{/other_user}", "gists_url": "https://api.github.com/users/iKevinY/gists{/gist_id}", "starred_url": "https://api.github.com/users/iKevinY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iKevinY/subscriptions", "organizations_url": "https://api.github.com/users/iKevinY/orgs", "repos_url": "https://api.github.com/users/iKevinY/repos", "events_url": "https://api.github.com/users/iKevinY/events{/privacy}", "received_events_url": "https://api.github.com/users/iKevinY/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iKevinY", "id": 2434728, "node_id": "MDQ6VXNlcjI0MzQ3Mjg=", "avatar_url": "https://avatars.githubusercontent.com/u/2434728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iKevinY", "html_url": "https://github.com/iKevinY", "followers_url": "https://api.github.com/users/iKevinY/followers", "following_url": "https://api.github.com/users/iKevinY/following{/other_user}", "gists_url": "https://api.github.com/users/iKevinY/gists{/gist_id}", "starred_url": "https://api.github.com/users/iKevinY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iKevinY/subscriptions", "organizations_url": "https://api.github.com/users/iKevinY/orgs", "repos_url": "https://api.github.com/users/iKevinY/repos", "events_url": "https://api.github.com/users/iKevinY/events{/privacy}", "received_events_url": "https://api.github.com/users/iKevinY/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc5bbdf70f8a9b0bfd7e377cc7df732b119bdac7", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc5bbdf70f8a9b0bfd7e377cc7df732b119bdac7", "html_url": "https://github.com/rust-lang/rust/commit/fc5bbdf70f8a9b0bfd7e377cc7df732b119bdac7"}], "stats": {"total": 39, "additions": 12, "deletions": 27}, "files": [{"sha": "f38583ee1fb3774c8bf01c56304358b58992fe70", "filename": "src/etc/licenseck.py", "status": "modified", "additions": 12, "deletions": 27, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/76c279a4cfc9e54327bcc668a895ec19185139e9/src%2Fetc%2Flicenseck.py", "raw_url": "https://github.com/rust-lang/rust/raw/76c279a4cfc9e54327bcc668a895ec19185139e9/src%2Fetc%2Flicenseck.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Flicenseck.py?ref=76c279a4cfc9e54327bcc668a895ec19185139e9", "patch": "@@ -8,29 +8,18 @@\n # option. This file may not be copied, modified, or distributed\n # except according to those terms.\n \n-license1 = \"\"\"// Copyright \"\"\"\n-license2 = \"\"\" The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\"\"\"\n+import re\n \n-license3 = \"\"\"# Copyright \"\"\"\n-license4 = \"\"\" The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n-\"\"\"\n+license_re = re.compile(\n+u\"\"\"(#|//) Copyright .* The Rust Project Developers. See the COPYRIGHT\n+\\\\1 file at the top-level directory of this distribution and at\n+\\\\1 http://rust-lang.org/COPYRIGHT.\n+\\\\1\n+\\\\1 Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+\\\\1 http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+\\\\1 <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+\\\\1 option. This file may not be copied, modified, or distributed\n+\\\\1 except according to those terms.\"\"\")\n \n exceptions = [\n     \"rt/rust_android_dummy.cpp\", # BSD, chromium\n@@ -67,8 +56,4 @@ def check_license(name, contents):\n \n     # License check\n     boilerplate = contents[:500]\n-    if (license1 not in boilerplate or license2 not in boilerplate) and \\\n-       (license3 not in boilerplate or license4 not in boilerplate):\n-        return False\n-\n-    return True\n+    return bool(license_re.search(boilerplate))"}]}