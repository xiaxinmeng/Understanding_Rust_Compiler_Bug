{"sha": "dcf53c1590b741a16e92c7e5a306e923827ae301", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjZjUzYzE1OTBiNzQxYTE2ZTkyYzdlNWEzMDZlOTIzODI3YWUzMDE=", "commit": {"author": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2018-02-02T01:35:50Z"}, "committer": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2018-02-02T01:35:50Z"}, "message": "Rewrite remove_dir_all to be correct\nThe fact that this had to be rewritten does not bode well", "tree": {"sha": "ef9fb09d336f430238e58e406504493f313aa719", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef9fb09d336f430238e58e406504493f313aa719"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dcf53c1590b741a16e92c7e5a306e923827ae301", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQEcBAABCAAGBQJac8B2AAoJEN4E2eJ1WbyKst0IAL0UR/ESWCJTDSEOLh+ckitn\nFHW/a4RIgv5tfQmP0RLxlrYJvPKYnLEuSE6obJqOTSwpe26nX1JyB/+VcEnBwR7q\nQueVJQtNjjiafBNQ6hF9XyitXhjCmLsr9+geAm0W5KsYn05a9jiRQBpMoNHPdHrU\nsTKzcRPk+IRQaz9npJgXyWmMWskkUf7CsczBXrNlwCvT9Pl7G7PP1+ZzSAFTmSgu\nq0epIeVHwwITp1uYyPD67XQ4CTmQ4pLnfn8f3Zr2SqfrMclUSSpIyGQXPQQq5wsv\nnVu2vw9S3QLQ87mcbpqqmG4/0pBmk2W2KxgGYE44tIVbwtbt88KclVYkx8W9P50=\n=U3zR\n-----END PGP SIGNATURE-----", "payload": "tree ef9fb09d336f430238e58e406504493f313aa719\nparent b1b9edf5ae3c6a8a862e480174f9fefafeba7143\nauthor Peter Atashian <retep998@gmail.com> 1517535350 -0500\ncommitter Peter Atashian <retep998@gmail.com> 1517535350 -0500\n\nRewrite remove_dir_all to be correct\nThe fact that this had to be rewritten does not bode well\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dcf53c1590b741a16e92c7e5a306e923827ae301", "html_url": "https://github.com/rust-lang/rust/commit/dcf53c1590b741a16e92c7e5a306e923827ae301", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dcf53c1590b741a16e92c7e5a306e923827ae301/comments", "author": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "committer": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1b9edf5ae3c6a8a862e480174f9fefafeba7143", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1b9edf5ae3c6a8a862e480174f9fefafeba7143", "html_url": "https://github.com/rust-lang/rust/commit/b1b9edf5ae3c6a8a862e480174f9fefafeba7143"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "87a099253139f401e07b3033a88bbc045539c6af", "filename": "src/libstd/sys/windows/fs.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/dcf53c1590b741a16e92c7e5a306e923827ae301/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dcf53c1590b741a16e92c7e5a306e923827ae301/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs?ref=dcf53c1590b741a16e92c7e5a306e923827ae301", "patch": "@@ -611,9 +611,11 @@ fn remove_dir_all_recursive(path: &Path) -> io::Result<()> {\n         let child = child?;\n         let child_type = child.file_type()?;\n         if child_type.is_dir() {\n-            remove_dir_all_recursive(&child.path())?;\n-        } else if child_type.is_symlink_dir() {\n-            rmdir(&child.path())?;\n+            if child_type.is_reparse_point() {\n+                rmdir(&child.path())?;\n+            } else {\n+                remove_dir_all_recursive(&child.path())?;\n+            }\n         } else {\n             unlink(&child.path())?;\n         }"}]}