{"sha": "700084aa97e346acedc925dbd89b54cbb266b084", "node_id": "C_kwDOAAsO6NoAKDcwMDA4NGFhOTdlMzQ2YWNlZGM5MjVkYmQ4OWI1NGNiYjI2NmIwODQ", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2023-04-11T18:34:44Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2023-04-14T16:26:11Z"}, "message": "Update codegen test.", "tree": {"sha": "52ccafa84d754fae913bb6e1d58732c20b5b966c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/52ccafa84d754fae913bb6e1d58732c20b5b966c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/700084aa97e346acedc925dbd89b54cbb266b084", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/700084aa97e346acedc925dbd89b54cbb266b084", "html_url": "https://github.com/rust-lang/rust/commit/700084aa97e346acedc925dbd89b54cbb266b084", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/700084aa97e346acedc925dbd89b54cbb266b084/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df9342aa6f426bd786cf390110321338a6624e40", "url": "https://api.github.com/repos/rust-lang/rust/commits/df9342aa6f426bd786cf390110321338a6624e40", "html_url": "https://github.com/rust-lang/rust/commit/df9342aa6f426bd786cf390110321338a6624e40"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "36c6be19012f152ae733bfa82ce18748e6fa006d", "filename": "tests/codegen/enum-match.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/700084aa97e346acedc925dbd89b54cbb266b084/tests%2Fcodegen%2Fenum-match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700084aa97e346acedc925dbd89b54cbb266b084/tests%2Fcodegen%2Fenum-match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcodegen%2Fenum-match.rs?ref=700084aa97e346acedc925dbd89b54cbb266b084", "patch": "@@ -34,8 +34,11 @@ pub enum Enum1 {\n \n // CHECK: define noundef i8 @match1{{.*}}\n // CHECK-NEXT: start:\n-// CHECK-NEXT: [[DISCR:%.*]] = {{.*}}call i8 @llvm.usub.sat.i8(i8 %0, i8 1)\n-// CHECK-NEXT: switch i8 [[DISCR]], label {{.*}} [\n+// CHECK-NEXT: %1 = add i8 %0, -2\n+// CHECK-NEXT: %2 = zext i8 %1 to i64\n+// CHECK-NEXT: %3 = icmp ult i8 %1, 2\n+// CHECK-NEXT: %4 = add nuw nsw i64 %2, 1\n+// CHECK-NEXT: %_2 = select i1 %3, i64 %4, i64 0\n #[no_mangle]\n pub fn match1(e: Enum1) -> u8 {\n     use Enum1::*;"}]}