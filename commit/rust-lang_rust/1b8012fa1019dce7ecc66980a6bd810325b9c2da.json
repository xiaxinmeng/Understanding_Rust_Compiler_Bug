{"sha": "1b8012fa1019dce7ecc66980a6bd810325b9c2da", "node_id": "C_kwDOAAsO6NoAKDFiODAxMmZhMTAxOWRjZTdlY2M2Njk4MGE2YmQ4MTAzMjViOWMyZGE", "commit": {"author": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-10-14T20:00:44Z"}, "committer": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-10-14T20:00:44Z"}, "message": "Also run alphabetical check in src and library", "tree": {"sha": "42a39f3c2108759599607f13d808f412bf0f70fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42a39f3c2108759599607f13d808f412bf0f70fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b8012fa1019dce7ecc66980a6bd810325b9c2da", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgWnoWpkMvJlSFxMiZfPmQ9OBZ0B\nzicY1KArCIU18CM8IAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQN0fCXdd+bDatiwGhBeo4YEjI52f8PvQCP/KTJbRYG1Xh2axqsfMk4HnthnwJZqTl9\nK6soDTMm6vOmfxiB0bWw0=\n-----END SSH SIGNATURE-----", "payload": "tree 42a39f3c2108759599607f13d808f412bf0f70fb\nparent 3c0062641d02940a66bc74b182aa924d141060c1\nauthor nils <48135649+Nilstrieb@users.noreply.github.com> 1665777644 +0200\ncommitter nils <48135649+Nilstrieb@users.noreply.github.com> 1665777644 +0200\n\nAlso run alphabetical check in src and library\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b8012fa1019dce7ecc66980a6bd810325b9c2da", "html_url": "https://github.com/rust-lang/rust/commit/1b8012fa1019dce7ecc66980a6bd810325b9c2da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b8012fa1019dce7ecc66980a6bd810325b9c2da/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3c0062641d02940a66bc74b182aa924d141060c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c0062641d02940a66bc74b182aa924d141060c1", "html_url": "https://github.com/rust-lang/rust/commit/3c0062641d02940a66bc74b182aa924d141060c1"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "f913f6cde3889fd374dd91a6fb0f8251f7d283b2", "filename": "src/tools/tidy/src/alphabetical.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1b8012fa1019dce7ecc66980a6bd810325b9c2da/src%2Ftools%2Ftidy%2Fsrc%2Falphabetical.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b8012fa1019dce7ecc66980a6bd810325b9c2da/src%2Ftools%2Ftidy%2Fsrc%2Falphabetical.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Falphabetical.rs?ref=1b8012fa1019dce7ecc66980a6bd810325b9c2da", "patch": "@@ -29,7 +29,8 @@ fn is_close_bracket(c: char) -> bool {\n     matches!(c, ')' | ']' | '}')\n }\n \n-const START_COMMENT: &str = \"// tidy-alphabetical-start\";\n+// Don't let tidy check this here :D\n+const START_COMMENT: &str = concat!(\"// tidy-alphabetical\", \"-start\");\n const END_COMMENT: &str = \"// tidy-alphabetical-end\";\n \n fn check_section<'a>(\n@@ -47,7 +48,7 @@ fn check_section<'a>(\n         if line.contains(START_COMMENT) {\n             tidy_error!(\n                 bad,\n-                \"{file}:{} found `// tidy-alphabetical-start` expecting `// tidy-alphabetical-end`\",\n+                \"{file}:{} found `{START_COMMENT}` expecting `{END_COMMENT}`\",\n                 line_idx\n             )\n         }\n@@ -102,10 +103,7 @@ pub fn check(path: &Path, bad: &mut bool) {\n             if line.contains(START_COMMENT) {\n                 check_section(file, &mut lines, bad);\n                 if lines.peek().is_none() {\n-                    tidy_error!(\n-                        bad,\n-                        \"{file}: reached end of file expecting `// tidy-alphabetical-end`\"\n-                    )\n+                    tidy_error!(bad, \"{file}: reached end of file expecting `{END_COMMENT}`\")\n                 }\n             }\n         }"}, {"sha": "ca785042aaa6abfa867ef058f16e15f50ddbbea1", "filename": "src/tools/tidy/src/main.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b8012fa1019dce7ecc66980a6bd810325b9c2da/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b8012fa1019dce7ecc66980a6bd810325b9c2da/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fmain.rs?ref=1b8012fa1019dce7ecc66980a6bd810325b9c2da", "patch": "@@ -90,7 +90,9 @@ fn main() {\n         check!(edition, &compiler_path);\n         check!(edition, &library_path);\n \n+        check!(alphabetical, &src_path);\n         check!(alphabetical, &compiler_path);\n+        check!(alphabetical, &library_path);\n \n         let collected = {\n             while handles.len() >= concurrency.get() {"}]}