{"sha": "7b996542cc2677523570d0c64daf9c7f1601155f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiOTk2NTQyY2MyNjc3NTIzNTcwZDBjNjRkYWY5YzdmMTYwMTE1NWY=", "commit": {"author": {"name": "rchaser53", "email": "tayoshizawa29@gmail.com", "date": "2019-01-25T14:40:12Z"}, "committer": {"name": "rchaser53", "email": "tayoshizawa29@gmail.com", "date": "2019-01-25T15:16:51Z"}, "message": "change new line point in the case of no args", "tree": {"sha": "4a74951118ac36cbacafe008ea8672bdb22f7339", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a74951118ac36cbacafe008ea8672bdb22f7339"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b996542cc2677523570d0c64daf9c7f1601155f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b996542cc2677523570d0c64daf9c7f1601155f", "html_url": "https://github.com/rust-lang/rust/commit/7b996542cc2677523570d0c64daf9c7f1601155f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b996542cc2677523570d0c64daf9c7f1601155f/comments", "author": {"login": "rchaser53", "id": 9676954, "node_id": "MDQ6VXNlcjk2NzY5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9676954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchaser53", "html_url": "https://github.com/rchaser53", "followers_url": "https://api.github.com/users/rchaser53/followers", "following_url": "https://api.github.com/users/rchaser53/following{/other_user}", "gists_url": "https://api.github.com/users/rchaser53/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchaser53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchaser53/subscriptions", "organizations_url": "https://api.github.com/users/rchaser53/orgs", "repos_url": "https://api.github.com/users/rchaser53/repos", "events_url": "https://api.github.com/users/rchaser53/events{/privacy}", "received_events_url": "https://api.github.com/users/rchaser53/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rchaser53", "id": 9676954, "node_id": "MDQ6VXNlcjk2NzY5NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/9676954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchaser53", "html_url": "https://github.com/rchaser53", "followers_url": "https://api.github.com/users/rchaser53/followers", "following_url": "https://api.github.com/users/rchaser53/following{/other_user}", "gists_url": "https://api.github.com/users/rchaser53/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchaser53/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchaser53/subscriptions", "organizations_url": "https://api.github.com/users/rchaser53/orgs", "repos_url": "https://api.github.com/users/rchaser53/repos", "events_url": "https://api.github.com/users/rchaser53/events{/privacy}", "received_events_url": "https://api.github.com/users/rchaser53/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2e91b5b68f4b163ab1c041e72028f33a9e3e075", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2e91b5b68f4b163ab1c041e72028f33a9e3e075", "html_url": "https://github.com/rust-lang/rust/commit/d2e91b5b68f4b163ab1c041e72028f33a9e3e075"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "6216c79975e7ac1c7fc9b9eed909930398852ff3", "filename": "src/items.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7b996542cc2677523570d0c64daf9c7f1601155f/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b996542cc2677523570d0c64daf9c7f1601155f/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=7b996542cc2677523570d0c64daf9c7f1601155f", "patch": "@@ -2064,6 +2064,8 @@ fn rewrite_fn_base(\n     } && !fd.inputs.is_empty();\n \n     let mut args_last_line_contains_comment = false;\n+    let mut no_args_and_over_max_width = false;\n+\n     if put_args_in_block {\n         arg_indent = indent.block_indent(context.config);\n         result.push_str(&arg_indent.to_string_with_newline(context.config));\n@@ -2083,10 +2085,12 @@ fn rewrite_fn_base(\n             .lines()\n             .last()\n             .map_or(false, |last_line| last_line.contains(\"//\"));\n+        result.push(')');\n+\n         if closing_paren_overflow_max_width || args_last_line_contains_comment {\n             result.push_str(&indent.to_string_with_newline(context.config));\n+            no_args_and_over_max_width = true;\n         }\n-        result.push(')');\n     }\n \n     // Return type.\n@@ -2126,7 +2130,9 @@ fn rewrite_fn_base(\n             result.push_str(&indent.to_string_with_newline(context.config));\n             indent\n         } else {\n-            result.push(' ');\n+            if arg_str.len() != 0 || !no_args_and_over_max_width {\n+                result.push(' ');\n+            }\n             Indent::new(indent.block_indent, last_line_width(&result))\n         };\n "}, {"sha": "f86caafc54121ad36341790d835a073e31d0f210", "filename": "tests/source/issue-3278.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Fsource%2Fissue-3278.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Fsource%2Fissue-3278.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-3278.rs?ref=7b996542cc2677523570d0c64daf9c7f1601155f", "patch": "@@ -0,0 +1,3 @@\n+pub fn parse_conditional<'a, I: 'a>() -> impl Parser<Input = I, Output = Expr, PartialState = ()> + 'a\n+where I: Stream<Item = char>\n+{}\n\\ No newline at end of file"}, {"sha": "07219295a7a8f7033d737e62e5d8da601a819075", "filename": "tests/target/issue-3278.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Ftarget%2Fissue-3278.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Ftarget%2Fissue-3278.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-3278.rs?ref=7b996542cc2677523570d0c64daf9c7f1601155f", "patch": "@@ -0,0 +1,6 @@\n+pub fn parse_conditional<'a, I: 'a>()\n+-> impl Parser<Input = I, Output = Expr, PartialState = ()> + 'a\n+where\n+    I: Stream<Item = char>,\n+{\n+}"}, {"sha": "320617f2772eedb0f49d8a0c1e35ca4e2a1b458f", "filename": "tests/target/long-fn-1.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Ftarget%2Flong-fn-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7b996542cc2677523570d0c64daf9c7f1601155f/tests%2Ftarget%2Flong-fn-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Flong-fn-1.rs?ref=7b996542cc2677523570d0c64daf9c7f1601155f", "patch": "@@ -15,14 +15,14 @@ impl Foo {\n \n // #1843\n #[allow(non_snake_case)]\n-pub extern \"C\" fn Java_com_exonum_binding_storage_indices_ValueSetIndexProxy_nativeContainsByHash(\n-) -> bool {\n+pub extern \"C\" fn Java_com_exonum_binding_storage_indices_ValueSetIndexProxy_nativeContainsByHash()\n+-> bool {\n     false\n }\n \n // #3009\n impl Something {\n-    fn my_function_name_is_way_to_long_but_used_as_a_case_study_or_an_example_its_fine(\n-    ) -> Result<(), String> {\n+    fn my_function_name_is_way_to_long_but_used_as_a_case_study_or_an_example_its_fine()\n+    -> Result<(), String> {\n     }\n }"}]}