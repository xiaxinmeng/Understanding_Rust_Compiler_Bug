{"sha": "7bfe4dba807ae908a247a34a4f72d0b610e6376f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiZmU0ZGJhODA3YWU5MDhhMjQ3YTM0YTRmNzJkMGI2MTBlNjM3NmY=", "commit": {"author": {"name": "David Rajchenbach-Teller", "email": "dteller@mozilla.com", "date": "2011-11-06T16:27:24Z"}, "committer": {"name": "David Rajchenbach-Teller", "email": "dteller@mozilla.com", "date": "2011-11-06T17:10:23Z"}, "message": "[Test] rope.rs: testing concat", "tree": {"sha": "125246aeb3ecfb344e75a3ec8acb6e3e76dd9454", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/125246aeb3ecfb344e75a3ec8acb6e3e76dd9454"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7bfe4dba807ae908a247a34a4f72d0b610e6376f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7bfe4dba807ae908a247a34a4f72d0b610e6376f", "html_url": "https://github.com/rust-lang/rust/commit/7bfe4dba807ae908a247a34a4f72d0b610e6376f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7bfe4dba807ae908a247a34a4f72d0b610e6376f/comments", "author": {"login": "Yoric", "id": 10190, "node_id": "MDQ6VXNlcjEwMTkw", "avatar_url": "https://avatars.githubusercontent.com/u/10190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yoric", "html_url": "https://github.com/Yoric", "followers_url": "https://api.github.com/users/Yoric/followers", "following_url": "https://api.github.com/users/Yoric/following{/other_user}", "gists_url": "https://api.github.com/users/Yoric/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yoric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yoric/subscriptions", "organizations_url": "https://api.github.com/users/Yoric/orgs", "repos_url": "https://api.github.com/users/Yoric/repos", "events_url": "https://api.github.com/users/Yoric/events{/privacy}", "received_events_url": "https://api.github.com/users/Yoric/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Yoric", "id": 10190, "node_id": "MDQ6VXNlcjEwMTkw", "avatar_url": "https://avatars.githubusercontent.com/u/10190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yoric", "html_url": "https://github.com/Yoric", "followers_url": "https://api.github.com/users/Yoric/followers", "following_url": "https://api.github.com/users/Yoric/following{/other_user}", "gists_url": "https://api.github.com/users/Yoric/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yoric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yoric/subscriptions", "organizations_url": "https://api.github.com/users/Yoric/orgs", "repos_url": "https://api.github.com/users/Yoric/repos", "events_url": "https://api.github.com/users/Yoric/events{/privacy}", "received_events_url": "https://api.github.com/users/Yoric/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc1316aaf4f2609b6f8542242d9c3ca65d0853bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc1316aaf4f2609b6f8542242d9c3ca65d0853bd", "html_url": "https://github.com/rust-lang/rust/commit/bc1316aaf4f2609b6f8542242d9c3ca65d0853bd"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "1ed920f2fb9f7523d03c36c35dd94651f6f74cf6", "filename": "src/test/stdtest/rope.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/7bfe4dba807ae908a247a34a4f72d0b610e6376f/src%2Ftest%2Fstdtest%2Frope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7bfe4dba807ae908a247a34a4f72d0b610e6376f/src%2Ftest%2Fstdtest%2Frope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Frope.rs?ref=7bfe4dba807ae908a247a34a4f72d0b610e6376f", "patch": "@@ -2,6 +2,7 @@ import std::str;\n import std::rope::*;\n import std::option;\n import std::uint;\n+import std::vec;\n \n //Utility function, used for sanity check\n fn rope_to_string(r: rope) -> str {\n@@ -146,3 +147,18 @@ fn char_at1() {\n     assert eq(r2, r3);\n     assert eq(bal2, bal3);\n }\n+\n+#[test]\n+fn concat1() {\n+    //Generate a reasonable rope\n+    let chunk = of_str(@ \"123456789\");\n+    let r = empty();\n+    uint::range(0u, 10u){|_i|\n+        r = append_rope(r, chunk);\n+    }\n+\n+    //Same rope, obtained with rope::concat\n+    let r2 = concat(vec::init_elt(chunk, 10u));\n+\n+    assert eq(r, r2);\n+}\n\\ No newline at end of file"}]}