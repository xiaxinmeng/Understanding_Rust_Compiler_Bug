{"sha": "b396505425ab0b0efbc5f399767c6983fc3511e5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzOTY1MDU0MjVhYjBiMGVmYmM1ZjM5OTc2N2M2OTgzZmMzNTExZTU=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-14T22:14:57Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-14T22:14:57Z"}, "message": "put file and line into miri backtrace", "tree": {"sha": "633b405b87a710f5115cb8c34599acb5925cc15d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/633b405b87a710f5115cb8c34599acb5925cc15d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b396505425ab0b0efbc5f399767c6983fc3511e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b396505425ab0b0efbc5f399767c6983fc3511e5", "html_url": "https://github.com/rust-lang/rust/commit/b396505425ab0b0efbc5f399767c6983fc3511e5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b396505425ab0b0efbc5f399767c6983fc3511e5/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb5135a6fc7e1517c562ea182827533354ae327d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb5135a6fc7e1517c562ea182827533354ae327d", "html_url": "https://github.com/rust-lang/rust/commit/fb5135a6fc7e1517c562ea182827533354ae327d"}], "stats": {"total": 113, "additions": 59, "deletions": 54}, "files": [{"sha": "d375e62b27c5871ad666cd3220d40e3c5d5c3e59", "filename": "src/librustc/mir/interpret/error.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b396505425ab0b0efbc5f399767c6983fc3511e5/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b396505425ab0b0efbc5f399767c6983fc3511e5/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs?ref=b396505425ab0b0efbc5f399767c6983fc3511e5", "patch": "@@ -23,7 +23,7 @@ use backtrace::Backtrace;\n use ty::query::TyCtxtAt;\n use errors::DiagnosticBuilder;\n \n-use syntax_pos::Span;\n+use syntax_pos::{Pos, Span};\n use syntax::ast;\n use syntax::symbol::Symbol;\n \n@@ -68,10 +68,15 @@ impl<'tcx> fmt::Display for FrameInfo<'tcx> {\n             if tcx.def_key(self.instance.def_id()).disambiguated_data.data\n                 == DefPathData::ClosureExpr\n             {\n-                write!(f, \"inside call to closure\")\n+                write!(f, \"inside call to closure\")?;\n             } else {\n-                write!(f, \"inside call to `{}`\", self.instance)\n+                write!(f, \"inside call to `{}`\", self.instance)?;\n             }\n+            if !self.span.is_dummy() {\n+                let lo = tcx.sess.source_map().lookup_char_pos_adj(self.span.lo());\n+                write!(f, \" at {}:{}:{}\", lo.filename, lo.line, lo.col.to_usize() + 1)?;\n+            }\n+            Ok(())\n         })\n     }\n }"}, {"sha": "4246ec2dad332f34c8dd49c50ca41d8939dbacee", "filename": "src/test/ui/infinite/infinite-recursion-const-fn.stderr", "status": "modified", "additions": 51, "deletions": 51, "changes": 102, "blob_url": "https://github.com/rust-lang/rust/blob/b396505425ab0b0efbc5f399767c6983fc3511e5/src%2Ftest%2Fui%2Finfinite%2Finfinite-recursion-const-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b396505425ab0b0efbc5f399767c6983fc3511e5/src%2Ftest%2Fui%2Finfinite%2Finfinite-recursion-const-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finfinite%2Finfinite-recursion-const-fn.stderr?ref=b396505425ab0b0efbc5f399767c6983fc3511e5", "patch": "@@ -5,61 +5,61 @@ LL | const fn a() -> usize { b() } //~ ERROR evaluation of constant value failed\n    |                         ^^^\n    |                         |\n    |                         reached the configured maximum number of stack frames\n-   |                         inside call to `b`\n+   |                         inside call to `b` at $DIR/infinite-recursion-const-fn.rs:13:25\n LL | const fn b() -> usize { a() }\n    |                         ---\n    |                         |\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n-   |                         inside call to `a`\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n+   |                         inside call to `a` at $DIR/infinite-recursion-const-fn.rs:14:25\n LL | const ARR: [i32; a()] = [5; 6];\n-   |                  --- inside call to `a`\n+   |                  --- inside call to `a` at $DIR/infinite-recursion-const-fn.rs:15:18\n \n error: aborting due to previous error\n "}]}