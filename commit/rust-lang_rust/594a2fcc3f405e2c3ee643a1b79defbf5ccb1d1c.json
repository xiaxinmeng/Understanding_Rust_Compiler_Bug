{"sha": "594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "node_id": "C_kwDOAAsO6NoAKDU5NGEyZmNjM2Y0MDVlMmMzZWU2NDNhMWI3OWRlZmJmNWNjYjFkMWM", "commit": {"author": {"name": "kangarooCoder", "email": "ksbilodeau07@gmail.com", "date": "2022-04-06T02:45:07Z"}, "committer": {"name": "kangarooCoder", "email": "ksbilodeau07@gmail.com", "date": "2022-04-06T02:45:07Z"}, "message": "Add test for issue rust-lang/rust#83474", "tree": {"sha": "58e26946c06dcbf2e7677e94b01ebdc790a2c399", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58e26946c06dcbf2e7677e94b01ebdc790a2c399"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "html_url": "https://github.com/rust-lang/rust/commit/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c/comments", "author": {"login": "KSBilodeau", "id": 22333708, "node_id": "MDQ6VXNlcjIyMzMzNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22333708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KSBilodeau", "html_url": "https://github.com/KSBilodeau", "followers_url": "https://api.github.com/users/KSBilodeau/followers", "following_url": "https://api.github.com/users/KSBilodeau/following{/other_user}", "gists_url": "https://api.github.com/users/KSBilodeau/gists{/gist_id}", "starred_url": "https://api.github.com/users/KSBilodeau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KSBilodeau/subscriptions", "organizations_url": "https://api.github.com/users/KSBilodeau/orgs", "repos_url": "https://api.github.com/users/KSBilodeau/repos", "events_url": "https://api.github.com/users/KSBilodeau/events{/privacy}", "received_events_url": "https://api.github.com/users/KSBilodeau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "KSBilodeau", "id": 22333708, "node_id": "MDQ6VXNlcjIyMzMzNzA4", "avatar_url": "https://avatars.githubusercontent.com/u/22333708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KSBilodeau", "html_url": "https://github.com/KSBilodeau", "followers_url": "https://api.github.com/users/KSBilodeau/followers", "following_url": "https://api.github.com/users/KSBilodeau/following{/other_user}", "gists_url": "https://api.github.com/users/KSBilodeau/gists{/gist_id}", "starred_url": "https://api.github.com/users/KSBilodeau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KSBilodeau/subscriptions", "organizations_url": "https://api.github.com/users/KSBilodeau/orgs", "repos_url": "https://api.github.com/users/KSBilodeau/repos", "events_url": "https://api.github.com/users/KSBilodeau/events{/privacy}", "received_events_url": "https://api.github.com/users/KSBilodeau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "634770c0a7f8598164ab825cfe419cc8b03c36e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/634770c0a7f8598164ab825cfe419cc8b03c36e5", "html_url": "https://github.com/rust-lang/rust/commit/634770c0a7f8598164ab825cfe419cc8b03c36e5"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "fbb56e528c0a62a43d8a4cda532e336dd1458b42", "filename": "src/test/ui/lang-items/lang-item-generic-requirements.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.rs?ref=594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "patch": "@@ -1,5 +1,5 @@\n-// Checks that declaring a lang item with the wrong number\n-// of generic arguments errors rather than crashing (issue #83893, #87573, part of #9307, #79559).\n+// Checks that declaring a lang item with the wrong number of generic arguments errors rather than\n+// crashing (issue #83474, #83893, #87573, part of #9307, #79559).\n \n #![feature(lang_items, no_core)]\n #![no_core]\n@@ -25,6 +25,10 @@ struct MyPhantomData<T, U>;\n //~^ ERROR parameter `T` is never used\n //~| ERROR parameter `U` is never used\n \n+#[lang = \"owned_box\"]\n+//~^ ERROR `owned_box` language item must be applied to a struct with at least 1 generic argument\n+struct Foo;\n+\n // When the `start` lang item is missing generics very odd things can happen, especially when\n // it comes to cross-crate monomorphization\n #[lang = \"start\"]\n@@ -48,6 +52,9 @@ fn ice() {\n \n     // Use phantomdata\n     let _ = MyPhantomData::<(), i32>;\n+\n+    // Use Foo\n+    let _: () = Foo;\n }\n \n // use `start`"}, {"sha": "326f5b0d59507317f8c06d3b7076a900c5492e57", "filename": "src/test/ui/lang-items/lang-item-generic-requirements.stderr", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Flang-item-generic-requirements.stderr?ref=594a2fcc3f405e2c3ee643a1b79defbf5ccb1d1c", "patch": "@@ -32,8 +32,17 @@ LL |\n LL | struct MyPhantomData<T, U>;\n    |                     ------ this struct has 2 generic arguments\n \n+error[E0718]: `owned_box` language item must be applied to a struct with at least 1 generic argument\n+  --> $DIR/lang-item-generic-requirements.rs:28:1\n+   |\n+LL | #[lang = \"owned_box\"]\n+   | ^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL | struct Foo;\n+   |           - this struct has 0 generic arguments\n+\n error[E0718]: `start` language item must be applied to a function with 1 generic argument\n-  --> $DIR/lang-item-generic-requirements.rs:30:1\n+  --> $DIR/lang-item-generic-requirements.rs:34:1\n    |\n LL | #[lang = \"start\"]\n    | ^^^^^^^^^^^^^^^^^\n@@ -59,7 +68,7 @@ LL | struct MyPhantomData<T, U>;\n    = help: consider removing `U` or referring to it in a field\n    = help: if you intended `U` to be a const parameter, use `const U: usize` instead\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 8 previous errors\n \n Some errors have detailed explanations: E0392, E0718.\n For more information about an error, try `rustc --explain E0392`."}]}