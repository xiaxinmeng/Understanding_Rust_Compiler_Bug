{"sha": "a9c8d1bd906c30b1c491801e9063c400c378db0b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5YzhkMWJkOTA2YzMwYjFjNDkxODAxZTkwNjNjNDAwYzM3OGRiMGI=", "commit": {"author": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2018-04-15T02:48:14Z"}, "committer": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2018-04-15T03:01:43Z"}, "message": "Fix compilation for nightly 2018-04-15\n\nThis only fixes compilation and the build. It's possible that the `author`\nand `inspector` lints are broken but there are no failing tests.\n\nCloses #2667", "tree": {"sha": "ca1724260660d3c15992dd98936b36acf7f507d5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca1724260660d3c15992dd98936b36acf7f507d5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a9c8d1bd906c30b1c491801e9063c400c378db0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a9c8d1bd906c30b1c491801e9063c400c378db0b", "html_url": "https://github.com/rust-lang/rust/commit/a9c8d1bd906c30b1c491801e9063c400c378db0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a9c8d1bd906c30b1c491801e9063c400c378db0b/comments", "author": null, "committer": null, "parents": [{"sha": "fc8e35884b77197c03c14cac6cfad24a91e3fd33", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc8e35884b77197c03c14cac6cfad24a91e3fd33", "html_url": "https://github.com/rust-lang/rust/commit/fc8e35884b77197c03c14cac6cfad24a91e3fd33"}], "stats": {"total": 33, "additions": 3, "deletions": 30}, "files": [{"sha": "cfef1e85b94e1448dbaa5ecd9fa9b3ad00dfd35c", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -602,7 +602,6 @@ fn never_loop_expr(expr: &Expr, main_loop_id: &NodeId) -> NeverLoopResult {\n         ExprCast(ref e, _) |\n         ExprType(ref e, _) |\n         ExprField(ref e, _) |\n-        ExprTupField(ref e, _) |\n         ExprAddrOf(_, ref e) |\n         ExprStruct(_, _, Some(ref e)) |\n         ExprRepeat(ref e, _) => never_loop_expr(e, main_loop_id),"}, {"sha": "2765c1b2ee039d56ef1c3bea3481b74b45484c4b", "filename": "clippy_lints/src/no_effect.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Fno_effect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Fno_effect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fno_effect.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -56,7 +56,6 @@ fn has_no_effect(cx: &LateContext, expr: &Expr) -> bool {\n         Expr_::ExprType(ref inner, _) |\n         Expr_::ExprUnary(_, ref inner) |\n         Expr_::ExprField(ref inner, _) |\n-        Expr_::ExprTupField(ref inner, _) |\n         Expr_::ExprAddrOf(_, ref inner) |\n         Expr_::ExprBox(ref inner) => has_no_effect(cx, inner),\n         Expr_::ExprStruct(_, ref fields, ref base) => {\n@@ -143,7 +142,6 @@ fn reduce_expression<'a>(cx: &LateContext, expr: &'a Expr) -> Option<Vec<&'a Exp\n         Expr_::ExprType(ref inner, _) |\n         Expr_::ExprUnary(_, ref inner) |\n         Expr_::ExprField(ref inner, _) |\n-        Expr_::ExprTupField(ref inner, _) |\n         Expr_::ExprAddrOf(_, ref inner) |\n         Expr_::ExprBox(ref inner) => reduce_expression(cx, inner).or_else(|| Some(vec![inner])),\n         Expr_::ExprStruct(_, ref fields, ref base) => if has_drop(cx, expr) {"}, {"sha": "b7e79a06327ee4c30d39172010d0fd5a58adbf8f", "filename": "clippy_lints/src/shadow.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Fshadow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Fshadow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fshadow.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -306,7 +306,7 @@ fn check_expr<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr, bindings:\n         return;\n     }\n     match expr.node {\n-        ExprUnary(_, ref e) | ExprField(ref e, _) | ExprTupField(ref e, _) | ExprAddrOf(_, ref e) | ExprBox(ref e) => {\n+        ExprUnary(_, ref e) | ExprField(ref e, _) | ExprAddrOf(_, ref e) | ExprBox(ref e) => {\n             check_expr(cx, e, bindings)\n         },\n         ExprBlock(ref block) | ExprLoop(ref block, _, _) => check_block(cx, block, bindings),"}, {"sha": "49f079f8cd62950b9dc89357023ed0f0c3653ba6", "filename": "clippy_lints/src/temporary_assignment.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Ftemporary_assignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Ftemporary_assignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftemporary_assignment.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::hir::{Expr, ExprAssign, ExprField, ExprStruct, ExprTup, ExprTupField};\n+use rustc::hir::{Expr, ExprAssign, ExprField, ExprStruct, ExprTup};\n use utils::is_adjusted;\n use utils::span_lint;\n \n@@ -41,7 +41,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr) {\n         if let ExprAssign(ref target, _) = expr.node {\n             match target.node {\n-                ExprField(ref base, _) | ExprTupField(ref base, _) => if is_temporary(base) && !is_adjusted(cx, base) {\n+                ExprField(ref base, _) => if is_temporary(base) && !is_adjusted(cx, base) {\n                     span_lint(cx, TEMPORARY_ASSIGNMENT, expr.span, \"assignment to temporary\");\n                 },\n                 _ => (),"}, {"sha": "8e81d9440b0662f23e692d6aba57b3eb4e06e308", "filename": "clippy_lints/src/utils/author.rs", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fauthor.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -371,14 +371,6 @@ impl<'tcx> Visitor<'tcx> for PrintVisitor {\n                 self.current = obj_pat;\n                 self.visit_expr(object);\n             },\n-            Expr_::ExprTupField(ref object, ref field_id) => {\n-                let obj_pat = self.next(\"object\");\n-                let field_id_pat = self.next(\"field_id\");\n-                println!(\"TupField(ref {}, ref {}) = {};\", obj_pat, field_id_pat, current);\n-                println!(\"    if {}.node == {}\", field_id_pat, field_id.node);\n-                self.current = obj_pat;\n-                self.visit_expr(object);\n-            },\n             Expr_::ExprIndex(ref object, ref index) => {\n                 let object_pat = self.next(\"object\");\n                 let index_pat = self.next(\"index\");"}, {"sha": "780d8339c27a9adef603ba51796018389b2cd4e9", "filename": "clippy_lints/src/utils/hir_utils.rs", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -131,7 +131,6 @@ impl<'a, 'tcx: 'a> SpanlessEq<'a, 'tcx> {\n                     && over(lf, rf, |l, r| self.eq_field(l, r))\n             },\n             (&ExprTup(ref l_tup), &ExprTup(ref r_tup)) => self.eq_exprs(l_tup, r_tup),\n-            (&ExprTupField(ref le, li), &ExprTupField(ref re, ri)) => li.node == ri.node && self.eq_expr(le, re),\n             (&ExprUnary(l_op, ref le), &ExprUnary(r_op, ref re)) => l_op == r_op && self.eq_expr(le, re),\n             (&ExprArray(ref l), &ExprArray(ref r)) => self.eq_exprs(l, r),\n             (&ExprWhile(ref lc, ref lb, ref ll), &ExprWhile(ref rc, ref rb, ref rl)) => {\n@@ -496,13 +495,6 @@ impl<'a, 'tcx: 'a> SpanlessHash<'a, 'tcx> {\n                 c.hash(&mut self.s);\n                 self.hash_exprs(tup);\n             },\n-            ExprTupField(ref le, li) => {\n-                let c: fn(_, _) -> _ = ExprTupField;\n-                c.hash(&mut self.s);\n-\n-                self.hash_expr(le);\n-                li.node.hash(&mut self.s);\n-            },\n             ExprType(ref e, ref _ty) => {\n                 let c: fn(_, _) -> _ = ExprType;\n                 c.hash(&mut self.s);"}, {"sha": "ac38227c3024e2324265c586646e3c140c34b5da", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -274,12 +274,6 @@ fn print_expr(cx: &LateContext, expr: &hir::Expr, indent: usize) {\n             println!(\"{}struct expr:\", ind);\n             print_expr(cx, e, indent + 1);\n         },\n-        hir::ExprTupField(ref e, ref idx) => {\n-            println!(\"{}TupField\", ind);\n-            println!(\"{}field index: {}\", ind, idx.node);\n-            println!(\"{}tuple expr:\", ind);\n-            print_expr(cx, e, indent + 1);\n-        },\n         hir::ExprIndex(ref arr, ref idx) => {\n             println!(\"{}Index\", ind);\n             println!(\"{}array expr:\", ind);"}, {"sha": "a9e5a3222ac6fcb890b0563625ed0fa7d706ff80", "filename": "clippy_lints/src/utils/sugg.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9c8d1bd906c30b1c491801e9063c400c378db0b/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fsugg.rs?ref=a9c8d1bd906c30b1c491801e9063c400c378db0b", "patch": "@@ -69,7 +69,6 @@ impl<'a> Sugg<'a> {\n                 hir::ExprRet(..) |\n                 hir::ExprStruct(..) |\n                 hir::ExprTup(..) |\n-                hir::ExprTupField(..) |\n                 hir::ExprWhile(..) => Sugg::NonParen(snippet),\n                 hir::ExprAssign(..) => Sugg::BinOp(AssocOp::Assign, snippet),\n                 hir::ExprAssignOp(op, ..) => Sugg::BinOp(hirbinop2assignop(op), snippet),\n@@ -121,7 +120,6 @@ impl<'a> Sugg<'a> {\n             ast::ExprKind::Struct(..) |\n             ast::ExprKind::Try(..) |\n             ast::ExprKind::Tup(..) |\n-            ast::ExprKind::TupField(..) |\n             ast::ExprKind::Array(..) |\n             ast::ExprKind::While(..) |\n             ast::ExprKind::WhileLet(..) => Sugg::NonParen(snippet),"}]}