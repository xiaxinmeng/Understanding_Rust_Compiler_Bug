{"sha": "ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNjZmM2YjExYzFlNTVlMjhlNDJiYjc5NDE0ZDgzNDllOGViMzYwODY=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-02-16T19:29:36Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-02-16T22:06:41Z"}, "message": "Add a test for impl generics", "tree": {"sha": "ae5fb44e1c9de2aec7a1413e256399350c3d8923", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae5fb44e1c9de2aec7a1413e256399350c3d8923"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "html_url": "https://github.com/rust-lang/rust/commit/ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ccfc6b11c1e55e28e42bb79414d8349e8eb36086/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "edd4c1d8a6c270fe39ae881c23c722c658c87c32", "url": "https://api.github.com/repos/rust-lang/rust/commits/edd4c1d8a6c270fe39ae881c23c722c658c87c32", "html_url": "https://github.com/rust-lang/rust/commit/edd4c1d8a6c270fe39ae881c23c722c658c87c32"}], "stats": {"total": 71, "additions": 71, "deletions": 0}, "files": [{"sha": "99df39fc2f5b8bce34223ddcd093b70014860ac5", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_impl_generics.snap", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/ccfc6b11c1e55e28e42bb79414d8349e8eb36086/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_impl_generics.snap", "raw_url": "https://github.com/rust-lang/rust/raw/ccfc6b11c1e55e28e42bb79414d8349e8eb36086/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_impl_generics.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_impl_generics.snap?ref=ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "patch": "@@ -0,0 +1,39 @@\n+---\n+created: \"2019-02-16T19:27:11.573533475Z\"\n+creator: insta@0.6.2\n+source: crates/ra_hir/src/ty/tests.rs\n+expression: \"&result\"\n+---\n+[74; 78) 'self': A<[unknown], [unknown]>\n+[85; 107) '{     ...     }': [unknown]\n+[95; 99) 'self': A<[unknown], [unknown]>\n+[95; 101) 'self.x': [unknown]\n+[117; 121) 'self': A<[unknown], [unknown]>\n+[128; 150) '{     ...     }': [unknown]\n+[138; 142) 'self': A<[unknown], [unknown]>\n+[138; 144) 'self.y': [unknown]\n+[163; 167) 'self': A<[unknown], [unknown]>\n+[169; 170) 't': T\n+[188; 223) '{     ...     }': ([unknown], [unknown], T)\n+[198; 217) '(self.....y, t)': ([unknown], [unknown], T)\n+[199; 203) 'self': A<[unknown], [unknown]>\n+[199; 205) 'self.x': [unknown]\n+[207; 211) 'self': A<[unknown], [unknown]>\n+[207; 213) 'self.y': [unknown]\n+[215; 216) 't': T\n+[245; 342) '{     ...(1); }': ()\n+[255; 256) 'a': A<u64, i64>\n+[259; 281) 'A { x:...1i64 }': A<u64, i64>\n+[266; 270) '1u64': u64\n+[275; 279) '1i64': i64\n+[287; 288) 'a': A<u64, i64>\n+[287; 292) 'a.x()': [unknown]\n+[298; 299) 'a': A<u64, i64>\n+[298; 303) 'a.y()': [unknown]\n+[309; 310) 'a': A<u64, i64>\n+[309; 319) 'a.z(1i128)': ([unknown], [unknown], i128)\n+[313; 318) '1i128': i128\n+[325; 326) 'a': A<u64, i64>\n+[325; 339) 'a.z::<u128>(1)': ([unknown], [unknown], i32)\n+[337; 338) '1': i32\n+"}, {"sha": "1eca68dc5461776d315c0ad8067acd8662ed174d", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/ccfc6b11c1e55e28e42bb79414d8349e8eb36086/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ccfc6b11c1e55e28e42bb79414d8349e8eb36086/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=ccfc6b11c1e55e28e42bb79414d8349e8eb36086", "patch": "@@ -506,6 +506,38 @@ fn test() {\n     );\n }\n \n+#[test]\n+fn infer_impl_generics() {\n+    check_inference(\n+        \"infer_impl_generics\",\n+        r#\"\n+struct A<T1, T2> {\n+    x: T1,\n+    y: T2,\n+}\n+impl<Y, X> A<X, Y> {\n+    fn x(self) -> X {\n+        self.x\n+    }\n+    fn y(self) -> Y {\n+        self.y\n+    }\n+    fn z<T>(self, t: T) -> (X, Y, T) {\n+        (self.x, self.y, t)\n+    }\n+}\n+\n+fn test() -> i128 {\n+    let a = A { x: 1u64, y: 1i64 };\n+    a.x();\n+    a.y();\n+    a.z(1i128);\n+    a.z::<u128>(1);\n+}\n+\"#,\n+    );\n+}\n+\n #[test]\n fn infer_generic_chain() {\n     check_inference("}]}