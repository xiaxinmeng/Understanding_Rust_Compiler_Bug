{"sha": "4e85665e08059a3cd96600b7972f7dcd1f62b871", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlODU2NjVlMDgwNTlhM2NkOTY2MDBiNzk3MmY3ZGNkMWY2MmI4NzE=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-06-11T12:48:40Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-07-02T16:15:20Z"}, "message": "implement the graph traits for SCC", "tree": {"sha": "81179da03a28a52f227f1e1ecba2d3c4a7d3f726", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81179da03a28a52f227f1e1ecba2d3c4a7d3f726"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e85665e08059a3cd96600b7972f7dcd1f62b871", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e85665e08059a3cd96600b7972f7dcd1f62b871", "html_url": "https://github.com/rust-lang/rust/commit/4e85665e08059a3cd96600b7972f7dcd1f62b871", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e85665e08059a3cd96600b7972f7dcd1f62b871/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07ee532031b4c9306e5db565c88bec3a0bc7308e", "url": "https://api.github.com/repos/rust-lang/rust/commits/07ee532031b4c9306e5db565c88bec3a0bc7308e", "html_url": "https://github.com/rust-lang/rust/commit/07ee532031b4c9306e5db565c88bec3a0bc7308e"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "7d29bd63707ad60d8abf30c40789addcfec60413", "filename": "src/librustc_data_structures/graph/scc/mod.rs", "status": "modified", "additions": 26, "deletions": 1, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/4e85665e08059a3cd96600b7972f7dcd1f62b871/src%2Flibrustc_data_structures%2Fgraph%2Fscc%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e85665e08059a3cd96600b7972f7dcd1f62b871/src%2Flibrustc_data_structures%2Fgraph%2Fscc%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fgraph%2Fscc%2Fmod.rs?ref=4e85665e08059a3cd96600b7972f7dcd1f62b871", "patch": "@@ -4,7 +4,7 @@\n //! O(n) time.\n \n use crate::fx::FxHashSet;\n-use crate::graph::{DirectedGraph, WithNumNodes, WithSuccessors};\n+use crate::graph::{DirectedGraph, WithNumNodes, WithSuccessors, GraphSuccessors};\n use crate::indexed_vec::{Idx, IndexVec};\n use std::ops::Range;\n \n@@ -60,6 +60,31 @@ impl<N: Idx, S: Idx> Sccs<N, S> {\n     }\n }\n \n+impl<N: Idx, S: Idx> DirectedGraph for Sccs<N, S> {\n+    type Node = S;\n+}\n+\n+impl<N: Idx, S: Idx> WithNumNodes for Sccs<N, S> {\n+    fn num_nodes(&self) -> usize {\n+        self.num_sccs()\n+    }\n+}\n+\n+impl<N: Idx, S: Idx> GraphSuccessors<'graph> for Sccs<N, S> {\n+    type Item = S;\n+\n+    type Iter = std::iter::Cloned<std::slice::Iter<'graph, S>>;\n+}\n+\n+impl<N: Idx, S: Idx> WithSuccessors for Sccs<N, S> {\n+    fn successors<'graph>(\n+        &'graph self,\n+        node: S\n+    ) -> <Self as GraphSuccessors<'graph>>::Iter {\n+        self.successors(node).iter().cloned()\n+    }\n+}\n+\n impl<S: Idx> SccData<S> {\n     /// Number of SCCs,\n     fn len(&self) -> usize {"}]}