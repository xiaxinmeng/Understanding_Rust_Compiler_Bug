{"sha": "86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2ZjgwZDNiYThkODFiMjllNjZhZDQxNTIxOWU2MGMzZjFkNDhhNmI=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2020-08-02T14:27:03Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2020-08-02T14:33:03Z"}, "message": "pprust: adjust mixed comment printing\n\nThis commit adjusts the pretty printing of mixed comments so that the\ninitial zero-break isn't emitted at the beginning of the line. Through\nthis, the `block-comment-wchar` test can have the `pp-exact` file\nremoved, as it no longer converges from pretty printing of the source.\n\nSigned-off-by: David Wood <david@davidtw.co>", "tree": {"sha": "2c25bbec61703875ec4618bcfa63aa39de2b2283", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c25bbec61703875ec4618bcfa63aa39de2b2283"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEfgm2/wUjk9OnjxlyJZLnbIc4H9kFAl8mzp8ACgkQJZLnbIc4\nH9lpXw/9GJ1h68uPs0/Q9iielrLd63tvasJ39vSo/XndjQ/UbuD5Rpq+Vuvl34r/\nYr4wTjl5iNK8WHRzignQeYUB4Prm+7UhX3QT3BQTSdEQdnNSfZA1SOSl6RoGS5T9\nJD1mEwdu6dZs1jg6jrJgwLiS14DatzkFP9p5/0VTbXeMwRHskTvoVhcQyshbahjP\n90td1IwZ7WuZ1ZC5UvQFijRRf7GUB758fW4Q9YTjIRR3BLH6FnAU1huOjev1i3dR\nyr9WjUKQYWmcG+AHx2Dipwd1+25wFW+vR+ZpdOFjuZDmf45hYG9Ya6qnJTtj+iv0\nrYSdHK00jTGN4OUGyfDdsITcjZhNfsNSt2l7WvO7i5HP82NM2by6uafEFVJxE+pd\n6yKRZP9u07fP+xXgiIYiLPC9qB3VrFvNbI25ufqPj1DPZJQ5dy5CrSjGu0PgbSP/\nORIa0zi1vGpdoYF7n8N0RV8ZBACSO1TMI9ojMmaGvDnJqT5YclF9tX789raV0LvV\nbvOJJAMOJV7YISXKAVqXEufbHuR+DX78G/1bzq560Fa7NI1UpUE/otLSAS5NQCRF\ncbLMFmQG8PFX0YVEWkSAYizF6Ra4xk8bit4K0+sbPMi19XNFIkvBuKrFOuW23SQ/\ntF6K3b1XTPbTYuGVqu1HewJU7xvdMyTwTLhlxG+uo5nxTRhki0Q=\n=SxAC\n-----END PGP SIGNATURE-----", "payload": "tree 2c25bbec61703875ec4618bcfa63aa39de2b2283\nparent fd4d151aed1e9968ee4073ebac51648d44400180\nauthor David Wood <david@davidtw.co> 1596378423 +0100\ncommitter David Wood <david@davidtw.co> 1596378783 +0100\n\npprust: adjust mixed comment printing\n\nThis commit adjusts the pretty printing of mixed comments so that the\ninitial zero-break isn't emitted at the beginning of the line. Through\nthis, the `block-comment-wchar` test can have the `pp-exact` file\nremoved, as it no longer converges from pretty printing of the source.\n\nSigned-off-by: David Wood <david@davidtw.co>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "html_url": "https://github.com/rust-lang/rust/commit/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd4d151aed1e9968ee4073ebac51648d44400180", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd4d151aed1e9968ee4073ebac51648d44400180", "html_url": "https://github.com/rust-lang/rust/commit/fd4d151aed1e9968ee4073ebac51648d44400180"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "4b228629ad719e2e2bac4a58687b2a5a00398326", "filename": "src/librustc_ast_pretty/pprust.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b/src%2Flibrustc_ast_pretty%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b/src%2Flibrustc_ast_pretty%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_pretty%2Fpprust.rs?ref=86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "patch": "@@ -450,7 +450,9 @@ pub trait PrintState<'a>: std::ops::Deref<Target = pp::Printer> + std::ops::Dere\n     fn print_comment(&mut self, cmnt: &comments::Comment) {\n         match cmnt.style {\n             comments::Mixed => {\n-                self.zerobreak();\n+                if !self.is_beginning_of_line() {\n+                    self.zerobreak();\n+                }\n                 if let Some((last, lines)) = cmnt.lines.split_last() {\n                     self.ibox(0);\n "}, {"sha": "2bfcdd75e15cff94d54007075bcacc3d586c6238", "filename": "src/test/pretty/block-comment-wchar.pp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b/src%2Ftest%2Fpretty%2Fblock-comment-wchar.pp", "raw_url": "https://github.com/rust-lang/rust/raw/86f80d3ba8d81b29e66ad415219e60c3f1d48a6b/src%2Ftest%2Fpretty%2Fblock-comment-wchar.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-comment-wchar.pp?ref=86f80d3ba8d81b29e66ad415219e60c3f1d48a6b", "patch": "@@ -73,15 +73,13 @@\n     */\n \n \n-\n     /* */\n \n     /*\n       Hello from offset 6\n       Space 6+2:                     compare A\n       Ogham Space Mark 6+2: compare B\n     */\n-\n     /*\u1680*/\n \n     /*"}]}