{"sha": "b67f23c847040b6c5125f1a2e0f4c5d742c69040", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2N2YyM2M4NDcwNDBiNmM1MTI1ZjFhMmUwZjRjNWQ3NDJjNjkwNDA=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-07-06T18:35:33Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-07-07T16:34:46Z"}, "message": "Clarify rustbuild + msvc + vcvars in README\n\nThe invocation of vcvars is only needed for versions of Visual Studio that\nrustbuild or cmake doesn't understand, but if older versions are installed then\nthere's no need to call vcvars.\n\nCloses #34576", "tree": {"sha": "81be67daeb69ff338d5ce15e678f3c50eadb5f91", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81be67daeb69ff338d5ce15e678f3c50eadb5f91"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b67f23c847040b6c5125f1a2e0f4c5d742c69040", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b67f23c847040b6c5125f1a2e0f4c5d742c69040", "html_url": "https://github.com/rust-lang/rust/commit/b67f23c847040b6c5125f1a2e0f4c5d742c69040", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b67f23c847040b6c5125f1a2e0f4c5d742c69040/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec58d0c9976c18c405a59d26252a1fa7a3e2a742", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec58d0c9976c18c405a59d26252a1fa7a3e2a742", "html_url": "https://github.com/rust-lang/rust/commit/ec58d0c9976c18c405a59d26252a1fa7a3e2a742"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "283efdd2411564f962cdaf210c43eec37384a55a", "filename": "README.md", "status": "modified", "additions": 20, "deletions": 8, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/b67f23c847040b6c5125f1a2e0f4c5d742c69040/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/b67f23c847040b6c5125f1a2e0f4c5d742c69040/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=b67f23c847040b6c5125f1a2e0f4c5d742c69040", "patch": "@@ -66,7 +66,7 @@ build.\n \n [MSYS2][msys2] can be used to easily build Rust on Windows:\n \n-msys2: https://msys2.github.io/\n+[msys2]: https://msys2.github.io/\n \n 1. Grab the latest [MSYS2 installer][msys2] and go through the installer.\n \n@@ -105,7 +105,7 @@ msys2: https://msys2.github.io/\n \n MSVC builds of Rust additionally require an installation of Visual Studio 2013\n (or later) so `rustc` can use its linker. Make sure to check the \u201cC++ tools\u201d\n-option. In addition, `cmake` needs to be installed to build LLVM.\n+option.\n \n With these dependencies installed, the build takes two steps:\n \n@@ -116,13 +116,25 @@ $ make && make install\n \n #### MSVC with rustbuild\n \n-For those who don't want the hassle of MSYS or MinGW, you can invoke rustbuild\n-directly. All you need are Python 2, CMake, and Git in your PATH (make sure you\n-do __not__ use the ones from MSYS!). You'll also need Visual Studio 2013 or\n-newer with the C++ tools. Then all you need to do is invoke the appropriate\n-vcvars bat file and kick off rustbuild.\n+The old build system, based on makefiles, is currently being rewritten into a\n+Rust-based build system called rustbuild. This can be used to bootstrap the\n+compiler on MSVC without needing to install MSYS or MinGW. All you need are\n+[Python 2](https://www.python.org/downloads/),\n+[CMake](https://cmake.org/download/), and\n+[Git](https://git-scm.com/downloads) in your PATH (make sure you do not use the\n+ones from MSYS if you have it installed). You'll also need Visual Studio 2013 or\n+newer with the C++ tools. Then all you need to do is to kick off rustbuild.\n \n-```bat\n+```\n+python .\\src\\bootstrap\\bootstrap.py\n+```\n+\n+Currently rustbuild only works with some known versions of Visual Studio. If you\n+have a more recent version installed that a part of rustbuild doesn't understand\n+then you may need to force rustbuild to use an older version. This can be done\n+by manually calling the appropriate vcvars file before running the bootstrap.\n+\n+```\n CALL \"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\amd64\\vcvars64.bat\"\n python .\\src\\bootstrap\\bootstrap.py\n ```"}]}