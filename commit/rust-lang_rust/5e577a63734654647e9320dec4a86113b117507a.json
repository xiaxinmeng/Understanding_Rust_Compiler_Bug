{"sha": "5e577a63734654647e9320dec4a86113b117507a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlNTc3YTYzNzM0NjU0NjQ3ZTkzMjBkZWM0YTg2MTEzYjExNzUwN2E=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-05-31T14:27:27Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-05-31T14:27:27Z"}, "message": "minor: expand docs a tiny bit", "tree": {"sha": "947a869b26d3a85847517229fabbed39f3476f50", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/947a869b26d3a85847517229fabbed39f3476f50"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e577a63734654647e9320dec4a86113b117507a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e577a63734654647e9320dec4a86113b117507a", "html_url": "https://github.com/rust-lang/rust/commit/5e577a63734654647e9320dec4a86113b117507a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e577a63734654647e9320dec4a86113b117507a/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c460baeaf3af69ec4e9a504efa27fbb167e9fecc", "url": "https://api.github.com/repos/rust-lang/rust/commits/c460baeaf3af69ec4e9a504efa27fbb167e9fecc", "html_url": "https://github.com/rust-lang/rust/commit/c460baeaf3af69ec4e9a504efa27fbb167e9fecc"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "3de1b99a571b519fb1353fe688bafbf79e8422bf", "filename": "docs/dev/architecture.md", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5e577a63734654647e9320dec4a86113b117507a/docs%2Fdev%2Farchitecture.md", "raw_url": "https://github.com/rust-lang/rust/raw/5e577a63734654647e9320dec4a86113b117507a/docs%2Fdev%2Farchitecture.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Farchitecture.md?ref=5e577a63734654647e9320dec4a86113b117507a", "patch": "@@ -146,6 +146,8 @@ Reading the docs of the `base_db::input` module should be useful: everything els\n \n **Architecture Invariant:** particularities of the build system are *not* the part of the ground state.\n In particular, `base_db` knows nothing about cargo.\n+For example, `cfg` flags are a part of `base_db`, but `feature`s are not.\n+A `foo` feature is a Cargo-level concept, which is lowered by Cargo to `--cfg feature=foo` argument on the command line.\n The `CrateGraph` structure is used to represent the dependencies between the crates abstractly.\n \n **Architecture Invariant:** `base_db` doesn't know about file system and file paths.\n@@ -452,3 +454,4 @@ It is not cheap enough to enable in prod, and this is a bug which should be fixe\n \n rust-analyzer strives to be as configurable as possible while offering reasonable defaults where no configuration exists yet.\n There will always be features that some people find more annoying than helpful, so giving the users the ability to tweak or disable these is a big part of offering a good user experience.\n+Mind the code--architecture gap: at the moment, we are using fewer feature flags than we really should."}]}