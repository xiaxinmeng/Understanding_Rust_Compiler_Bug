{"sha": "0f10f2a960ac53d880758adb54275947277987a9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBmMTBmMmE5NjBhYzUzZDg4MDc1OGFkYjU0Mjc1OTQ3Mjc3OTg3YTk=", "commit": {"author": {"name": "Jakob Hellermann", "email": "jakob.hellermann@protonmail.com", "date": "2020-11-04T14:59:20Z"}, "committer": {"name": "Jakob Hellermann", "email": "jakob.hellermann@protonmail.com", "date": "2020-11-04T15:14:00Z"}, "message": "manually fix some shellcheck warnings", "tree": {"sha": "3318fece905674cb4d86091be70abd38c622930e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3318fece905674cb4d86091be70abd38c622930e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0f10f2a960ac53d880758adb54275947277987a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0f10f2a960ac53d880758adb54275947277987a9", "html_url": "https://github.com/rust-lang/rust/commit/0f10f2a960ac53d880758adb54275947277987a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0f10f2a960ac53d880758adb54275947277987a9/comments", "author": {"login": "jakobhellermann", "id": 22177966, "node_id": "MDQ6VXNlcjIyMTc3OTY2", "avatar_url": "https://avatars.githubusercontent.com/u/22177966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakobhellermann", "html_url": "https://github.com/jakobhellermann", "followers_url": "https://api.github.com/users/jakobhellermann/followers", "following_url": "https://api.github.com/users/jakobhellermann/following{/other_user}", "gists_url": "https://api.github.com/users/jakobhellermann/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakobhellermann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakobhellermann/subscriptions", "organizations_url": "https://api.github.com/users/jakobhellermann/orgs", "repos_url": "https://api.github.com/users/jakobhellermann/repos", "events_url": "https://api.github.com/users/jakobhellermann/events{/privacy}", "received_events_url": "https://api.github.com/users/jakobhellermann/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jakobhellermann", "id": 22177966, "node_id": "MDQ6VXNlcjIyMTc3OTY2", "avatar_url": "https://avatars.githubusercontent.com/u/22177966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakobhellermann", "html_url": "https://github.com/jakobhellermann", "followers_url": "https://api.github.com/users/jakobhellermann/followers", "following_url": "https://api.github.com/users/jakobhellermann/following{/other_user}", "gists_url": "https://api.github.com/users/jakobhellermann/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakobhellermann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakobhellermann/subscriptions", "organizations_url": "https://api.github.com/users/jakobhellermann/orgs", "repos_url": "https://api.github.com/users/jakobhellermann/repos", "events_url": "https://api.github.com/users/jakobhellermann/events{/privacy}", "received_events_url": "https://api.github.com/users/jakobhellermann/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6a9dfa3d414205acd8700802ddd30490db18c05", "url": "https://api.github.com/repos/rust-lang/rust/commits/d6a9dfa3d414205acd8700802ddd30490db18c05", "html_url": "https://github.com/rust-lang/rust/commit/d6a9dfa3d414205acd8700802ddd30490db18c05"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "dcd40acc02a53369b4332c3920dafa5d61908083", "filename": "scripts/cargo.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Fcargo.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Fcargo.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Fcargo.sh?ref=0f10f2a960ac53d880758adb54275947277987a9", "patch": "@@ -10,7 +10,7 @@ cmd=$1\n shift || true\n \n if [[ \"$cmd\" = \"jit\" ]]; then\n-cargo \"+${TOOLCHAIN}\" rustc $@ -- --jit\n+cargo \"+${TOOLCHAIN}\" rustc \"$@\" -- --jit\n else\n-cargo \"+${TOOLCHAIN}\" \"$cmd\" $@\n+cargo \"+${TOOLCHAIN}\" \"$cmd\" \"$@\"\n fi"}, {"sha": "8bb777ccfba26c9ded859503e8b5bfd0f15bb1e6", "filename": "scripts/config.sh", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Fconfig.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Fconfig.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Fconfig.sh?ref=0f10f2a960ac53d880758adb54275947277987a9", "patch": "@@ -1,3 +1,5 @@\n+#!/bin/bash\n+\n set -e\n \n unamestr=$(uname)\n@@ -39,7 +41,7 @@ echo\n export RUSTC_WRAPPER=\n fi\n \n-dir=$(cd $(dirname \"$BASH_SOURCE\"); pwd)\n+dir=$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\"; pwd)\n \n export RUSTC=$dir\"/cg_clif\"\n export RUSTFLAGS=$linker\n@@ -51,7 +53,8 @@ if [[ $(uname) == 'Darwin' ]]; then\n    export RUSTFLAGS=\"$RUSTFLAGS -Clink-arg=-undefined -Clink-arg=dynamic_lookup\"\n fi\n \n-export LD_LIBRARY_PATH=\"$dir:$(rustc --print sysroot)/lib:$dir/target/out:$dir/sysroot/lib/rustlib/$TARGET_TRIPLE/lib\"\n+LD_LIBRARY_PATH=\"$dir:$(rustc --print sysroot)/lib:$dir/target/out:$dir/sysroot/lib/rustlib/$TARGET_TRIPLE/lib\"\n+export LD_LIBRARY_PATH\n export DYLD_LIBRARY_PATH=$LD_LIBRARY_PATH\n \n export CG_CLIF_DISPLAY_CG_TIME=1"}, {"sha": "114b6f30a4a9119941af907bab0173333aaf8388", "filename": "scripts/tests.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Ftests.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0f10f2a960ac53d880758adb54275947277987a9/scripts%2Ftests.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Ftests.sh?ref=0f10f2a960ac53d880758adb54275947277987a9", "patch": "@@ -4,7 +4,7 @@ set -e\n \n source build/config.sh\n export CG_CLIF_INCR_CACHE_DISABLED=1\n-MY_RUSTC=$RUSTC\" \"$RUSTFLAGS\" -L crate=target/out --out-dir target/out -Cdebuginfo=2\"\n+MY_RUSTC=\"$RUSTC $RUSTFLAGS -L crate=target/out --out-dir target/out -Cdebuginfo=2\"\n \n function no_sysroot_tests() {\n     echo \"[BUILD] mini_core\""}, {"sha": "c6c4956e4817446aa580f20ab89d9dbce41ead0c", "filename": "test.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0f10f2a960ac53d880758adb54275947277987a9/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0f10f2a960ac53d880758adb54275947277987a9/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=0f10f2a960ac53d880758adb54275947277987a9", "patch": "@@ -3,13 +3,13 @@ set -e\n \n export RUSTFLAGS=\"-Zrun_dsymutil=no\"\n \n-./build.sh --without-sysroot $@\n+./build.sh --without-sysroot \"$@\"\n \n rm -r target/out || true\n \n scripts/tests.sh no_sysroot\n \n-./build.sh $@\n+./build.sh \"$@\"\n \n scripts/tests.sh base_sysroot\n scripts/tests.sh extended_sysroot"}]}