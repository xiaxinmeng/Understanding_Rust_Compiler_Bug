{"sha": "6f3f1c537b18f95bd4ea42700a1776334b165984", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmM2YxYzUzN2IxOGY5NWJkNGVhNDI3MDBhMTc3NjMzNGIxNjU5ODQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-10T01:47:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-10T01:47:36Z"}, "message": "Rollup merge of #68073 - Centril:fix-68062, r=estebank\n\nexpect `fn` after `const unsafe` / `const extern`\n\nFixes #68062\n\nr? @estebank @petrochenkov\ncc @Aaron1011", "tree": {"sha": "c714e372e75f080c46ed07608912aa7df4211f9b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c714e372e75f080c46ed07608912aa7df4211f9b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f3f1c537b18f95bd4ea42700a1776334b165984", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeF9e4CRBK7hj4Ov3rIwAAdHIIAFxdKLxPcTNhh2wY+aOfJpgo\niqogVBcX53vs4X7ceJ0nCm+x80eahVsZ9PMPci0BXl4dEUvpNclfHjTUAlGAJGsF\nHR7/sSApZzfg/QcOOIMiPFUFYPRsWNx5faXo7ozS2rqxPrOf2u/ytAWfSCqYxtob\nXYuAMZDJoJuJo46o5bwnkfhSa02SCqPncE0ps6C9nDy7+HBYdcWe1tKsf/LNjjAu\nZdLO9aSE4lmobEVznFJ+zPAAcYJQK0Ci+cc+LsIVh2PTlgnwWtzRGWISra38EPtS\nLch7mwzRoaqf7W/VoIWo7pYDm7goAJs8agy3W3Tdsmg9Ya5AyqSpeNG14XG0xw4=\n=qIHt\n-----END PGP SIGNATURE-----\n", "payload": "tree c714e372e75f080c46ed07608912aa7df4211f9b\nparent 2307f0c4ea74d96ab64d27a2ef5efc6b75a02df5\nparent 915db7ae6430baef99f186ba40f08e105b7694fe\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1578620856 +0100\ncommitter GitHub <noreply@github.com> 1578620856 +0100\n\nRollup merge of #68073 - Centril:fix-68062, r=estebank\n\nexpect `fn` after `const unsafe` / `const extern`\n\nFixes #68062\n\nr? @estebank @petrochenkov\ncc @Aaron1011\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f3f1c537b18f95bd4ea42700a1776334b165984", "html_url": "https://github.com/rust-lang/rust/commit/6f3f1c537b18f95bd4ea42700a1776334b165984", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f3f1c537b18f95bd4ea42700a1776334b165984/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2307f0c4ea74d96ab64d27a2ef5efc6b75a02df5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2307f0c4ea74d96ab64d27a2ef5efc6b75a02df5", "html_url": "https://github.com/rust-lang/rust/commit/2307f0c4ea74d96ab64d27a2ef5efc6b75a02df5"}, {"sha": "915db7ae6430baef99f186ba40f08e105b7694fe", "url": "https://api.github.com/repos/rust-lang/rust/commits/915db7ae6430baef99f186ba40f08e105b7694fe", "html_url": "https://github.com/rust-lang/rust/commit/915db7ae6430baef99f186ba40f08e105b7694fe"}], "stats": {"total": 43, "additions": 42, "deletions": 1}, "files": [{"sha": "f6199da3f1d83d8b9f803d1919cf39ef9a2a607b", "filename": "src/librustc_parse/parser/item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Flibrustc_parse%2Fparser%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Flibrustc_parse%2Fparser%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse%2Fparser%2Fitem.rs?ref=6f3f1c537b18f95bd4ea42700a1776334b165984", "patch": "@@ -140,7 +140,7 @@ impl<'a> Parser<'a> {\n                     self.sess.gated_spans.gate(sym::const_extern_fn, lo.to(self.token.span));\n                 }\n                 let ext = self.parse_extern()?;\n-                self.bump(); // `fn`\n+                self.expect_keyword(kw::Fn)?;\n \n                 let header = FnHeader {\n                     unsafety,"}, {"sha": "7ced24808bf6ed4618a93a6c5a72fac2e90c27b3", "filename": "src/test/ui/consts/const-extern-fn/issue-68062-const-extern-fns-dont-need-fn-specifier-2.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.rs?ref=6f3f1c537b18f95bd4ea42700a1776334b165984", "patch": "@@ -0,0 +1,7 @@\n+fn main() {}\n+\n+#[cfg(FALSE)]\n+fn container() {\n+    const unsafe WhereIsFerris Now() {}\n+    //~^ ERROR expected one of `extern` or `fn`\n+}"}, {"sha": "5ec9e2a91f1dc28f4b33916bb0449e9540af1049", "filename": "src/test/ui/consts/const-extern-fn/issue-68062-const-extern-fns-dont-need-fn-specifier-2.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier-2.stderr?ref=6f3f1c537b18f95bd4ea42700a1776334b165984", "patch": "@@ -0,0 +1,8 @@\n+error: expected one of `extern` or `fn`, found `WhereIsFerris`\n+  --> $DIR/issue-68062-const-extern-fns-dont-need-fn-specifier-2.rs:5:18\n+   |\n+LL |     const unsafe WhereIsFerris Now() {}\n+   |                  ^^^^^^^^^^^^^ expected one of `extern` or `fn`\n+\n+error: aborting due to previous error\n+"}, {"sha": "1886bfccb4e3eb55f6091884c7e9ea286e512804", "filename": "src/test/ui/consts/const-extern-fn/issue-68062-const-extern-fns-dont-need-fn-specifier.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.rs?ref=6f3f1c537b18f95bd4ea42700a1776334b165984", "patch": "@@ -0,0 +1,8 @@\n+fn main() {}\n+\n+#[cfg(FALSE)]\n+fn container() {\n+    const extern \"Rust\" PUT_ANYTHING_YOU_WANT_HERE bug() -> usize { 1 }\n+    //~^ ERROR expected `fn`\n+    //~| ERROR `const extern fn` definitions are unstable\n+}"}, {"sha": "cf71ed4d59765bbd3c6a780a3c0d69bd71e0cfab", "filename": "src/test/ui/consts/const-extern-fn/issue-68062-const-extern-fns-dont-need-fn-specifier.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6f3f1c537b18f95bd4ea42700a1776334b165984/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-extern-fn%2Fissue-68062-const-extern-fns-dont-need-fn-specifier.stderr?ref=6f3f1c537b18f95bd4ea42700a1776334b165984", "patch": "@@ -0,0 +1,18 @@\n+error: expected `fn`, found `PUT_ANYTHING_YOU_WANT_HERE`\n+  --> $DIR/issue-68062-const-extern-fns-dont-need-fn-specifier.rs:5:25\n+   |\n+LL |     const extern \"Rust\" PUT_ANYTHING_YOU_WANT_HERE bug() -> usize { 1 }\n+   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `fn`\n+\n+error[E0658]: `const extern fn` definitions are unstable\n+  --> $DIR/issue-68062-const-extern-fns-dont-need-fn-specifier.rs:5:5\n+   |\n+LL |     const extern \"Rust\" PUT_ANYTHING_YOU_WANT_HERE bug() -> usize { 1 }\n+   |     ^^^^^^^^^^^^\n+   |\n+   = note: for more information, see https://github.com/rust-lang/rust/issues/64926\n+   = help: add `#![feature(const_extern_fn)]` to the crate attributes to enable\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0658`."}]}