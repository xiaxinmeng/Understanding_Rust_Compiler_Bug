{"sha": "0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "node_id": "C_kwDOAAsO6NoAKDBlYTczMDFmYTM0NzE5ZjFkZDI2YjhlMGRmYWVlYWI3M2M2NzU5OWE", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-05-16T13:41:05Z"}, "committer": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-05-16T13:41:05Z"}, "message": "remove the `RelateResultCompare` trait", "tree": {"sha": "d2c78d73f74d307bcddb0d3a32e816168f5a38d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d2c78d73f74d307bcddb0d3a32e816168f5a38d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "html_url": "https://github.com/rust-lang/rust/commit/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ad4bde042cfaf56f7579160c60ebd8550a720ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ad4bde042cfaf56f7579160c60ebd8550a720ab", "html_url": "https://github.com/rust-lang/rust/commit/9ad4bde042cfaf56f7579160c60ebd8550a720ab"}], "stats": {"total": 17, "additions": 1, "deletions": 16}, "files": [{"sha": "534106ac446cf8b147f4d73a3e9d615ce874e27e", "filename": "compiler/rustc_infer/src/infer/combine.rs", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fcombine.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fcombine.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fcombine.rs?ref=0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "patch": "@@ -776,21 +776,6 @@ pub trait ConstEquateRelation<'tcx>: TypeRelation<'tcx> {\n     fn const_equate_obligation(&mut self, a: ty::Const<'tcx>, b: ty::Const<'tcx>);\n }\n \n-pub trait RelateResultCompare<'tcx, T> {\n-    fn compare<F>(&self, t: T, f: F) -> RelateResult<'tcx, T>\n-    where\n-        F: FnOnce() -> TypeError<'tcx>;\n-}\n-\n-impl<'tcx, T: Clone + PartialEq> RelateResultCompare<'tcx, T> for RelateResult<'tcx, T> {\n-    fn compare<F>(&self, t: T, f: F) -> RelateResult<'tcx, T>\n-    where\n-        F: FnOnce() -> TypeError<'tcx>,\n-    {\n-        self.clone().and_then(|s| if s == t { self.clone() } else { Err(f()) })\n-    }\n-}\n-\n pub fn const_unification_error<'tcx>(\n     a_is_expected: bool,\n     (a, b): (ty::Const<'tcx>, ty::Const<'tcx>),"}, {"sha": "6592e0ae8ec8f66c7e0fef7505d8786bce0cc93b", "filename": "compiler/rustc_infer/src/infer/nll_relate/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fnll_relate%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ea7301fa34719f1dd26b8e0dfaeeab73c67599a/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fnll_relate%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Fnll_relate%2Fmod.rs?ref=0ea7301fa34719f1dd26b8e0dfaeeab73c67599a", "patch": "@@ -859,7 +859,7 @@ where\n \n     delegate: &'me mut D,\n \n-    /// After we generalize this type, we are going to relative it to\n+    /// After we generalize this type, we are going to relate it to\n     /// some other type. What will be the variance at this point?\n     ambient_variance: ty::Variance,\n "}]}