{"sha": "0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjYTVmZDdlYmNiZTU3YTZmOWRjZDg0YTNhZWY1MDI3OGJjMzM2Mjg=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-02-13T07:36:52Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-02-13T07:36:52Z"}, "message": "Rollup merge of #82050 - hbina:fix/added-test-to-drain-empty-vec, r=dtolnay\n\nAdded tests to drain an empty vec\n\nDiscovered this kind of issue in an unrelated library.\nThe author copied the tests from here and AFAIK, there are no tests for this particular case.\n\nhttps://github.com/LeonineKing1199/minivec/pull/19\n\nSigned-off-by: Hanif Bin Ariffin <hanif.ariffin.4326@gmail.com>", "tree": {"sha": "be763236b7a1c2aa252500531250ed1a329a0939", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be763236b7a1c2aa252500531250ed1a329a0939"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgJ4GUCRBK7hj4Ov3rIwAAdHIIAGhDB7AQD9tBLOekCUtEL/aZ\nHO9hadHGE511YTIqi1U62feOdRsjT9m5Bu3zbeDJxuFUemOWrURcaESLGvNEp73j\ndgIb4umB+uEgS375TwP+9isug0vThACeBBuN1ZArq6TvhjXjr338vX7bobAY9rIN\nTIToswXWOevAybvxTdZicj2HABb5gXJSd/ZCM3Wj9MdIRiYLOLSa3gznV9sQjWf7\nRt1hlFoPS3GNyBnC0Opoq9Dh7TvSnplyKsCLWqkN4On8mTOj6gvjdLDcrhSO2Dsd\nxBv85MfuOLRXO2i8tYEyWYUe4cXBPhyUofNk9KAIUsWuq+Jl/+9tOq6AURP5T7U=\n=v/7n\n-----END PGP SIGNATURE-----\n", "payload": "tree be763236b7a1c2aa252500531250ed1a329a0939\nparent 2673026995ee902f934cc2fc83045bc87cb14e32\nparent fa9af6a9be72e80c7c86adf656bee5964cb2f6a2\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1613201812 +0900\ncommitter GitHub <noreply@github.com> 1613201812 +0900\n\nRollup merge of #82050 - hbina:fix/added-test-to-drain-empty-vec, r=dtolnay\n\nAdded tests to drain an empty vec\n\nDiscovered this kind of issue in an unrelated library.\nThe author copied the tests from here and AFAIK, there are no tests for this particular case.\n\nhttps://github.com/LeonineKing1199/minivec/pull/19\n\nSigned-off-by: Hanif Bin Ariffin <hanif.ariffin.4326@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628", "html_url": "https://github.com/rust-lang/rust/commit/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2673026995ee902f934cc2fc83045bc87cb14e32", "url": "https://api.github.com/repos/rust-lang/rust/commits/2673026995ee902f934cc2fc83045bc87cb14e32", "html_url": "https://github.com/rust-lang/rust/commit/2673026995ee902f934cc2fc83045bc87cb14e32"}, {"sha": "fa9af6a9be72e80c7c86adf656bee5964cb2f6a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/fa9af6a9be72e80c7c86adf656bee5964cb2f6a2", "html_url": "https://github.com/rust-lang/rust/commit/fa9af6a9be72e80c7c86adf656bee5964cb2f6a2"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "2969da58d4268ed2cc5924a516e11a45841075b5", "filename": "library/alloc/tests/vec.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628/library%2Falloc%2Ftests%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628/library%2Falloc%2Ftests%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Ftests%2Fvec.rs?ref=0ca5fd7ebcbe57a6f9dcd84a3aef50278bc33628", "patch": "@@ -609,6 +609,17 @@ fn test_move_items_zero_sized() {\n     assert_eq!(vec2, [(), (), ()]);\n }\n \n+#[test]\n+fn test_drain_empty_vec() {\n+    let mut vec: Vec<i32> = vec![];\n+    let mut vec2: Vec<i32> = vec![];\n+    for i in vec.drain(..) {\n+        vec2.push(i);\n+    }\n+    assert!(vec.is_empty());\n+    assert!(vec2.is_empty());\n+}\n+\n #[test]\n fn test_drain_items() {\n     let mut vec = vec![1, 2, 3];"}]}