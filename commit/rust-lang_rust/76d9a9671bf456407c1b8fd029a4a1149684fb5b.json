{"sha": "76d9a9671bf456407c1b8fd029a4a1149684fb5b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2ZDlhOTY3MWJmNDU2NDA3YzFiOGZkMDI5YTRhMTE0OTY4NGZiNWI=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2013-12-10T17:08:22Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2013-12-10T18:14:45Z"}, "message": "Fix test case harder (cc #9629)", "tree": {"sha": "8c886c5fe8d2846ee44ab1ca182cc02330dcf888", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c886c5fe8d2846ee44ab1ca182cc02330dcf888"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/76d9a9671bf456407c1b8fd029a4a1149684fb5b", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/76d9a9671bf456407c1b8fd029a4a1149684fb5b", "html_url": "https://github.com/rust-lang/rust/commit/76d9a9671bf456407c1b8fd029a4a1149684fb5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/76d9a9671bf456407c1b8fd029a4a1149684fb5b/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1252947fa976c30ef99961e197e25e86c69621c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/1252947fa976c30ef99961e197e25e86c69621c4", "html_url": "https://github.com/rust-lang/rust/commit/1252947fa976c30ef99961e197e25e86c69621c4"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "f95547ea933d61b83dc32c0c4df10330d0fc2244", "filename": "src/librustc/middle/borrowck/doc.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fdoc.rs?ref=76d9a9671bf456407c1b8fd029a4a1149684fb5b", "patch": "@@ -215,6 +215,24 @@ of this rule: there are comments in the borrowck source referencing\n these names, so that you can cross reference to find the actual code\n that corresponds to the formal rule.\n \n+### Invariants\n+\n+I want to collect, at a high-level, the invariants the borrow checker\n+maintains. I will give them names and refer to them throughout the\n+text. Together these invariants are crucial for the overall soundness\n+of the system.\n+\n+**Mutability requires uniqueness.** To mutate a path\n+\n+**Unique mutability.** There is only one *usable* mutable path to any\n+given memory at any given time. This implies that when claiming memory\n+with an expression like `p = &mut x`, the compiler must guarantee that\n+the borrowed value `x` can no longer be mutated so long as `p` is\n+live. (This is done via restrictions, read on.)\n+\n+**.**\n+\n+\n ### The `gather_loans` pass\n \n We start with the `gather_loans` pass, which walks the AST looking for"}, {"sha": "b7aa2989ac5820466348e361385130bfb5a8ae98", "filename": "src/test/run-pass/borrowck-borrow-of-mut-base-ptr-safe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Ftest%2Frun-pass%2Fborrowck-borrow-of-mut-base-ptr-safe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Ftest%2Frun-pass%2Fborrowck-borrow-of-mut-base-ptr-safe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fborrowck-borrow-of-mut-base-ptr-safe.rs?ref=76d9a9671bf456407c1b8fd029a4a1149684fb5b", "patch": "@@ -21,5 +21,5 @@ fn foo<'a>(mut t0: &'a mut int,\n     let r: &int = &*t0; // ...after all, could do same thing directly.\n }\n \n-fn main() {\n+pub fn main() {\n }"}, {"sha": "77e1a258dec846184854be73e810a7a74d0d3273", "filename": "src/test/run-pass/borrowck-freeze-frozen-mut.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Ftest%2Frun-pass%2Fborrowck-freeze-frozen-mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76d9a9671bf456407c1b8fd029a4a1149684fb5b/src%2Ftest%2Frun-pass%2Fborrowck-freeze-frozen-mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fborrowck-freeze-frozen-mut.rs?ref=76d9a9671bf456407c1b8fd029a4a1149684fb5b", "patch": "@@ -30,7 +30,7 @@ pub fn main() {\n         assert_eq!(*index1, 2);\n         assert_eq!(*index2, 3);\n     }\n-    assert_eq!(data[0], 1);\n+    assert_eq!(data[0], 5);\n     assert_eq!(data[1], 2);\n     assert_eq!(data[2], 3);\n }"}]}