{"sha": "8f6e43e273eac4b9fc1202d09369af3d98957ebd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmNmU0M2UyNzNlYWM0YjlmYzEyMDJkMDkzNjlhZjNkOTg5NTdlYmQ=", "commit": {"author": {"name": "Luis de Bethencourt", "email": "luis@debethencourt.com", "date": "2013-10-02T22:01:44Z"}, "committer": {"name": "Luis de Bethencourt", "email": "luis@debethencourt.com", "date": "2013-10-02T22:01:44Z"}, "message": "extra: %W and %+ support in time::strftime\n\nPlus testing added for %X and %x which were supported but not tested.\n\nWorking towards #2350", "tree": {"sha": "216c9475e84b227ffed727f104f81f9d9727dc86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/216c9475e84b227ffed727f104f81f9d9727dc86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f6e43e273eac4b9fc1202d09369af3d98957ebd", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f6e43e273eac4b9fc1202d09369af3d98957ebd", "html_url": "https://github.com/rust-lang/rust/commit/8f6e43e273eac4b9fc1202d09369af3d98957ebd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f6e43e273eac4b9fc1202d09369af3d98957ebd/comments", "author": {"login": "luisbg", "id": 303663, "node_id": "MDQ6VXNlcjMwMzY2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/303663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luisbg", "html_url": "https://github.com/luisbg", "followers_url": "https://api.github.com/users/luisbg/followers", "following_url": "https://api.github.com/users/luisbg/following{/other_user}", "gists_url": "https://api.github.com/users/luisbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/luisbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luisbg/subscriptions", "organizations_url": "https://api.github.com/users/luisbg/orgs", "repos_url": "https://api.github.com/users/luisbg/repos", "events_url": "https://api.github.com/users/luisbg/events{/privacy}", "received_events_url": "https://api.github.com/users/luisbg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luisbg", "id": 303663, "node_id": "MDQ6VXNlcjMwMzY2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/303663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luisbg", "html_url": "https://github.com/luisbg", "followers_url": "https://api.github.com/users/luisbg/followers", "following_url": "https://api.github.com/users/luisbg/following{/other_user}", "gists_url": "https://api.github.com/users/luisbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/luisbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luisbg/subscriptions", "organizations_url": "https://api.github.com/users/luisbg/orgs", "repos_url": "https://api.github.com/users/luisbg/repos", "events_url": "https://api.github.com/users/luisbg/events{/privacy}", "received_events_url": "https://api.github.com/users/luisbg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1005b7976bde4b8d42ec2e1d924015b754567401", "url": "https://api.github.com/repos/rust-lang/rust/commits/1005b7976bde4b8d42ec2e1d924015b754567401", "html_url": "https://github.com/rust-lang/rust/commit/1005b7976bde4b8d42ec2e1d924015b754567401"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "69187e3326c05e2c33de344686f38983a44ca5f7", "filename": "src/libextra/time.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/8f6e43e273eac4b9fc1202d09369af3d98957ebd/src%2Flibextra%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f6e43e273eac4b9fc1202d09369af3d98957ebd/src%2Flibextra%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Ftime.rs?ref=8f6e43e273eac4b9fc1202d09369af3d98957ebd", "patch": "@@ -788,7 +788,6 @@ fn do_strftime(format: &str, tm: &Tm) -> ~str {\n     }\n \n     fn parse_type(ch: char, tm: &Tm) -> ~str {\n-        //FIXME (#2350): Implement missing types.\n       let die = || format!(\"strftime: can't understand this format {} \", ch);\n         match ch {\n           'A' => match tm.tm_wday as int {\n@@ -920,10 +919,9 @@ fn do_strftime(format: &str, tm: &Tm) -> ~str {\n                 parse_type('b', tm),\n                 parse_type('Y', tm))\n           }\n-          //'W' {}\n+          'W' => format!(\"{:02d}\", (tm.tm_yday - (tm.tm_wday - 1 + 7) % 7 + 7)\n+                         / 7),\n           'w' => (tm.tm_wday as int).to_str(),\n-          //'X' {}\n-          //'x' {}\n           'Y' => (tm.tm_year as int + 1900).to_str(),\n           'y' => format!(\"{:02d}\", (tm.tm_year as int + 1900) % 100),\n           'Z' => tm.tm_zone.clone(),\n@@ -934,7 +932,7 @@ fn do_strftime(format: &str, tm: &Tm) -> ~str {\n             m -= h * 60_i32;\n             format!(\"{}{:02d}{:02d}\", sign, h, m)\n           }\n-          //'+' {}\n+          '+' => tm.rfc3339(),\n           '%' => ~\"%\",\n           _   => die()\n         }\n@@ -1297,12 +1295,13 @@ mod tests {\n         assert_eq!(local.strftime(\"%u\"), ~\"5\");\n         assert_eq!(local.strftime(\"%V\"), ~\"07\");\n         assert_eq!(local.strftime(\"%v\"), ~\"13-Feb-2009\");\n-        // assert!(local.strftime(\"%W\") == \"06\");\n+        assert_eq!(local.strftime(\"%W\"), ~\"06\");\n         assert_eq!(local.strftime(\"%w\"), ~\"5\");\n-        // handle \"%X\"\n-        // handle \"%x\"\n+        assert_eq!(local.strftime(\"%X\"), ~\"15:31:30\"); // FIXME (#2350): support locale\n+        assert_eq!(local.strftime(\"%x\"), ~\"02/13/09\"); // FIXME (#2350): support locale\n         assert_eq!(local.strftime(\"%Y\"), ~\"2009\");\n         assert_eq!(local.strftime(\"%y\"), ~\"09\");\n+        assert_eq!(local.strftime(\"%+\"), ~\"2009-02-13T15:31:30-08:00\");\n \n         // FIXME (#2350): We should probably standardize on the timezone\n         // abbreviation."}]}