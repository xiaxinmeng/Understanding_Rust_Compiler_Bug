{"sha": "7c20a29af8bffdd393e9e8a716de8266fcdae8bc", "node_id": "C_kwDOAAsO6NoAKDdjMjBhMjlhZjhiZmZkZDM5M2U5ZThhNzE2ZGU4MjY2ZmNkYWU4YmM", "commit": {"author": {"name": "Jon Gjengset", "email": "jongje@amazon.com", "date": "2022-03-10T20:39:29Z"}, "committer": {"name": "Jon Gjengset", "email": "jongje@amazon.com", "date": "2022-03-10T20:39:34Z"}, "message": "configure: don't serialize empty array elements\n\nBefore this change:\n\n    $ ./configure --codegen-backends=\n    [..]\n    $ grep -P '^codegen-backends' config.toml\n    codegen-backends = ['']\n\nAfter this change:\n\n    $ ./configure --codegen-backends=\n    [..]\n    $ grep -P '^codegen-backends' config.toml\n    codegen-backends = []", "tree": {"sha": "989d9280e491513b33c8e43e1a7ba40ab8503fb4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/989d9280e491513b33c8e43e1a7ba40ab8503fb4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7c20a29af8bffdd393e9e8a716de8266fcdae8bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7c20a29af8bffdd393e9e8a716de8266fcdae8bc", "html_url": "https://github.com/rust-lang/rust/commit/7c20a29af8bffdd393e9e8a716de8266fcdae8bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7c20a29af8bffdd393e9e8a716de8266fcdae8bc/comments", "author": {"login": "jonhoo", "id": 176295, "node_id": "MDQ6VXNlcjE3NjI5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/176295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonhoo", "html_url": "https://github.com/jonhoo", "followers_url": "https://api.github.com/users/jonhoo/followers", "following_url": "https://api.github.com/users/jonhoo/following{/other_user}", "gists_url": "https://api.github.com/users/jonhoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonhoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonhoo/subscriptions", "organizations_url": "https://api.github.com/users/jonhoo/orgs", "repos_url": "https://api.github.com/users/jonhoo/repos", "events_url": "https://api.github.com/users/jonhoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jonhoo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonhoo", "id": 176295, "node_id": "MDQ6VXNlcjE3NjI5NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/176295?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonhoo", "html_url": "https://github.com/jonhoo", "followers_url": "https://api.github.com/users/jonhoo/followers", "following_url": "https://api.github.com/users/jonhoo/following{/other_user}", "gists_url": "https://api.github.com/users/jonhoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonhoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonhoo/subscriptions", "organizations_url": "https://api.github.com/users/jonhoo/orgs", "repos_url": "https://api.github.com/users/jonhoo/repos", "events_url": "https://api.github.com/users/jonhoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jonhoo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba14a836c7038da21f5e102aacc7e6d5964f79a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba14a836c7038da21f5e102aacc7e6d5964f79a6", "html_url": "https://github.com/rust-lang/rust/commit/ba14a836c7038da21f5e102aacc7e6d5964f79a6"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "87a130a09827dfbf2c988b8aa53a41983337e369", "filename": "src/bootstrap/configure.py", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7c20a29af8bffdd393e9e8a716de8266fcdae8bc/src%2Fbootstrap%2Fconfigure.py", "raw_url": "https://github.com/rust-lang/rust/raw/7c20a29af8bffdd393e9e8a716de8266fcdae8bc/src%2Fbootstrap%2Fconfigure.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfigure.py?ref=7c20a29af8bffdd393e9e8a716de8266fcdae8bc", "patch": "@@ -279,6 +279,10 @@ def build():\n \n \n def set(key, value):\n+    if isinstance(value, list):\n+        # Remove empty values, which value.split(',') tends to generate.\n+        value = [v for v in value if v]\n+\n     s = \"{:20} := {}\".format(key, value)\n     if len(s) < 70:\n         p(s)"}]}