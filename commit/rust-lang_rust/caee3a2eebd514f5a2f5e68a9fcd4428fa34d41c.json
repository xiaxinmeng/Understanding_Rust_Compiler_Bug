{"sha": "caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhZWUzYTJlZWJkNTE0ZjVhMmY1ZTY4YTlmY2Q0NDI4ZmEzNGQ0MWM=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-04-29T00:16:22Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-04-29T00:27:55Z"}, "message": "Correctly parse negated literals as const args", "tree": {"sha": "a86dcceb9494cd243a2e1f6c10edd1c7be1f8fb5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a86dcceb9494cd243a2e1f6c10edd1c7be1f8fb5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "html_url": "https://github.com/rust-lang/rust/commit/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49b219b1035e20143818d409404b5e6f19a7ad1d", "url": "https://api.github.com/repos/rust-lang/rust/commits/49b219b1035e20143818d409404b5e6f19a7ad1d", "html_url": "https://github.com/rust-lang/rust/commit/49b219b1035e20143818d409404b5e6f19a7ad1d"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "56266b8d479821ce93668bb94f6c1de9597851fd", "filename": "crates/parser/src/grammar/type_args.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs?ref=caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "patch": "@@ -59,6 +59,15 @@ fn generic_arg(p: &mut Parser) {\n             expressions::literal(p);\n             m.complete(p, CONST_ARG);\n         }\n+        // test const_generic_negated_literal\n+        // fn f() { S::<-1> }\n+        T![-] => {\n+            let lm = p.start();\n+            p.bump(T![-]);\n+            expressions::literal(p);\n+            lm.complete(p, PREFIX_EXPR);\n+            m.complete(p, CONST_ARG);\n+        }\n         _ => {\n             types::type_(p);\n             m.complete(p, TYPE_ARG);"}, {"sha": "b20e523dc1b503a9e58702ee8c5bb5dde774a9ab", "filename": "crates/syntax/test_data/parser/inline/ok/0164_const_generic_negated_literal.rast", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rast", "raw_url": "https://github.com/rust-lang/rust/raw/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rast?ref=caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "patch": "@@ -0,0 +1,30 @@\n+SOURCE_FILE@0..19\n+  FN@0..18\n+    FN_KW@0..2 \"fn\"\n+    WHITESPACE@2..3 \" \"\n+    NAME@3..4\n+      IDENT@3..4 \"f\"\n+    PARAM_LIST@4..6\n+      L_PAREN@4..5 \"(\"\n+      R_PAREN@5..6 \")\"\n+    WHITESPACE@6..7 \" \"\n+    BLOCK_EXPR@7..18\n+      L_CURLY@7..8 \"{\"\n+      WHITESPACE@8..9 \" \"\n+      PATH_EXPR@9..16\n+        PATH@9..16\n+          PATH_SEGMENT@9..16\n+            NAME_REF@9..10\n+              IDENT@9..10 \"S\"\n+            GENERIC_ARG_LIST@10..16\n+              COLON2@10..12 \"::\"\n+              L_ANGLE@12..13 \"<\"\n+              CONST_ARG@13..15\n+                PREFIX_EXPR@13..15\n+                  MINUS@13..14 \"-\"\n+                  LITERAL@14..15\n+                    INT_NUMBER@14..15 \"1\"\n+              R_ANGLE@15..16 \">\"\n+      WHITESPACE@16..17 \" \"\n+      R_CURLY@17..18 \"}\"\n+  WHITESPACE@18..19 \"\\n\""}, {"sha": "8a81d05cd94d1c6eea9ea4e6af223370777d5c77", "filename": "crates/syntax/test_data/parser/inline/ok/0164_const_generic_negated_literal.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0164_const_generic_negated_literal.rs?ref=caee3a2eebd514f5a2f5e68a9fcd4428fa34d41c", "patch": "@@ -0,0 +1 @@\n+fn f() { S::<-1> }"}]}