{"sha": "764d5cfafb30acbe3fdb45b6c98b4e694a303558", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2NGQ1Y2ZhZmIzMGFjYmUzZmRiNDViNmM5OGI0ZTY5NGEzMDM1NTg=", "commit": {"author": {"name": "kc1212", "email": "kc1212@users.noreply.github.com", "date": "2016-08-05T10:52:57Z"}, "committer": {"name": "kc1212", "email": "kc1212@users.noreply.github.com", "date": "2016-08-05T10:52:57Z"}, "message": "Update E0379 to new format #35338", "tree": {"sha": "d1e817cb20fc1a780c20631b3833a65035a78979", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1e817cb20fc1a780c20631b3833a65035a78979"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/764d5cfafb30acbe3fdb45b6c98b4e694a303558", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/764d5cfafb30acbe3fdb45b6c98b4e694a303558", "html_url": "https://github.com/rust-lang/rust/commit/764d5cfafb30acbe3fdb45b6c98b4e694a303558", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/764d5cfafb30acbe3fdb45b6c98b4e694a303558/comments", "author": {"login": "kc1212", "id": 1093806, "node_id": "MDQ6VXNlcjEwOTM4MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1093806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kc1212", "html_url": "https://github.com/kc1212", "followers_url": "https://api.github.com/users/kc1212/followers", "following_url": "https://api.github.com/users/kc1212/following{/other_user}", "gists_url": "https://api.github.com/users/kc1212/gists{/gist_id}", "starred_url": "https://api.github.com/users/kc1212/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kc1212/subscriptions", "organizations_url": "https://api.github.com/users/kc1212/orgs", "repos_url": "https://api.github.com/users/kc1212/repos", "events_url": "https://api.github.com/users/kc1212/events{/privacy}", "received_events_url": "https://api.github.com/users/kc1212/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kc1212", "id": 1093806, "node_id": "MDQ6VXNlcjEwOTM4MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1093806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kc1212", "html_url": "https://github.com/kc1212", "followers_url": "https://api.github.com/users/kc1212/followers", "following_url": "https://api.github.com/users/kc1212/following{/other_user}", "gists_url": "https://api.github.com/users/kc1212/gists{/gist_id}", "starred_url": "https://api.github.com/users/kc1212/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kc1212/subscriptions", "organizations_url": "https://api.github.com/users/kc1212/orgs", "repos_url": "https://api.github.com/users/kc1212/repos", "events_url": "https://api.github.com/users/kc1212/events{/privacy}", "received_events_url": "https://api.github.com/users/kc1212/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "802d0811a5a9fc26388dda1d54ea41a5b64a2466", "url": "https://api.github.com/repos/rust-lang/rust/commits/802d0811a5a9fc26388dda1d54ea41a5b64a2466", "html_url": "https://github.com/rust-lang/rust/commit/802d0811a5a9fc26388dda1d54ea41a5b64a2466"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "8eafcbc83a248bb7c8d0c3bad5e5d34cef61e8db", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/764d5cfafb30acbe3fdb45b6c98b4e694a303558/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/764d5cfafb30acbe3fdb45b6c98b4e694a303558/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=764d5cfafb30acbe3fdb45b6c98b4e694a303558", "patch": "@@ -847,7 +847,9 @@ fn check_trait_fn_not_const<'a,'tcx>(ccx: &CrateCtxt<'a, 'tcx>,\n             // good\n         }\n         hir::Constness::Const => {\n-            span_err!(ccx.tcx.sess, span, E0379, \"trait fns cannot be declared const\");\n+            struct_span_err!(ccx.tcx.sess, span, E0379, \"trait fns cannot be declared const\")\n+                .span_label(span, &format!(\"trait fns cannot be const\"))\n+                .emit()\n         }\n     }\n }"}, {"sha": "92568b27f7c1da143e24a4fd2a982f3df13026d7", "filename": "src/test/compile-fail/const-fn-mismatch.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/764d5cfafb30acbe3fdb45b6c98b4e694a303558/src%2Ftest%2Fcompile-fail%2Fconst-fn-mismatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/764d5cfafb30acbe3fdb45b6c98b4e694a303558/src%2Ftest%2Fcompile-fail%2Fconst-fn-mismatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-mismatch.rs?ref=764d5cfafb30acbe3fdb45b6c98b4e694a303558", "patch": "@@ -20,7 +20,9 @@ trait Foo {\n }\n \n impl Foo for u32 {\n-    const fn f() -> u32 { 22 } //~ ERROR E0379\n+    const fn f() -> u32 { 22 }\n+    //~^ ERROR E0379\n+    //~| NOTE trait fns cannot be const\n }\n \n fn main() { }"}]}