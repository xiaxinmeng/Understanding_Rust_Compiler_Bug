{"sha": "6d207f53a4ea28151233a49f3f52fd051d0d6d21", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkMjA3ZjUzYTRlYTI4MTUxMjMzYTQ5ZjNmNTJmZDA1MWQwZDZkMjE=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2019-05-15T19:24:18Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2019-05-15T19:24:18Z"}, "message": "Get ty from local_decls instead of using Place", "tree": {"sha": "eb1e2c8f6d6ec30269dd937f1566f1ebb8303e9d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eb1e2c8f6d6ec30269dd937f1566f1ebb8303e9d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d207f53a4ea28151233a49f3f52fd051d0d6d21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d207f53a4ea28151233a49f3f52fd051d0d6d21", "html_url": "https://github.com/rust-lang/rust/commit/6d207f53a4ea28151233a49f3f52fd051d0d6d21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d207f53a4ea28151233a49f3f52fd051d0d6d21/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7158ed9cbea805adf8161d3deaadba2f85b7692e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7158ed9cbea805adf8161d3deaadba2f85b7692e", "html_url": "https://github.com/rust-lang/rust/commit/7158ed9cbea805adf8161d3deaadba2f85b7692e"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "06d7b6c78f14bffa866945f2a03f251030180e73", "filename": "src/librustc_codegen_ssa/mir/analyze.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6d207f53a4ea28151233a49f3f52fd051d0d6d21/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d207f53a4ea28151233a49f3f52fd051d0d6d21/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs?ref=6d207f53a4ea28151233a49f3f52fd051d0d6d21", "patch": "@@ -243,9 +243,8 @@ impl<'mir, 'a: 'mir, 'tcx: 'a, Bx: BuilderMethods<'a, 'tcx>> Visitor<'tcx>\n             }\n \n             PlaceContext::MutatingUse(MutatingUseContext::Drop) => {\n-                let ty = mir::Place::Base(mir::PlaceBase::Local(local)).ty(self.fx.mir,\n-                                                                           self.fx.cx.tcx());\n-                let ty = self.fx.monomorphize(&ty.ty);\n+                let ty = self.fx.mir.local_decls[local].ty;\n+                let ty = self.fx.monomorphize(&ty);\n \n                 // Only need the place if we're actually dropping it.\n                 if self.fx.cx.type_needs_drop(ty) {"}]}