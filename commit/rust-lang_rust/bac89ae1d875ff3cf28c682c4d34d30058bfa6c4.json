{"sha": "bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhYzg5YWUxZDg3NWZmM2NmMjhjNjgyYzRkMzRkMzAwNThiZmE2YzQ=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2017-09-13T10:41:38Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2017-09-13T13:46:53Z"}, "message": "enable validation for a bunch of more tests", "tree": {"sha": "c7d7cc5543d262a86e7a6b6df1cb1ef1d9b93f5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7d7cc5543d262a86e7a6b6df1cb1ef1d9b93f5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "html_url": "https://github.com/rust-lang/rust/commit/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa578de018ef29d6caac4bd4b71f5d3ffd61608b", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa578de018ef29d6caac4bd4b71f5d3ffd61608b", "html_url": "https://github.com/rust-lang/rust/commit/aa578de018ef29d6caac4bd4b71f5d3ffd61608b"}], "stats": {"total": 13, "additions": 2, "deletions": 11}, "files": [{"sha": "2e9865530d4e5e7b228836f012af835619e35022", "filename": "src/librustc_mir/interpret/validation.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/src%2Flibrustc_mir%2Finterpret%2Fvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/src%2Flibrustc_mir%2Finterpret%2Fvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fvalidation.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -126,8 +126,7 @@ impl<'a, 'tcx, M: Machine<'tcx>> EvalContext<'a, 'tcx, M> {\n             use regex::Regex;\n             lazy_static! {\n                 static ref RE: Regex = Regex::new(\"^(\\\n-                    (std|alloc::heap::__core)::mem::uninitialized::|\\\n-                    (std|alloc::heap::__core)::mem::forget::|\\\n+                    (std|alloc::heap::__core)::mem::(uninitialized|forget)::|\\\n                     <(std|alloc)::heap::Heap as (std::heap|alloc::allocator)::Alloc>::|\\\n                     <(std|alloc::heap::__core)::mem::ManuallyDrop<T>><.*>::new$|\\\n                     <(std|alloc::heap::__core)::mem::ManuallyDrop<T> as std::ops::DerefMut><.*>::deref_mut$|\\"}, {"sha": "0d594f9bd4c3b14df93523dbc039ffb5fa74e7aa", "filename": "tests/compile-fail/panic.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fpanic.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -1,5 +1,3 @@\n-// FIXME: Probably failing due to https://github.com/solson/miri/issues/296\n-// compile-flags: -Zmir-emit-validate=0\n //error-pattern: the evaluated program panicked\n \n fn main() {"}, {"sha": "dd826c2fd74eb7cf78dc7f3e3aa0458e20db7d36", "filename": "tests/compile-fail/zst2.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fzst2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fzst2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fzst2.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -1,5 +1,3 @@\n-// FIXME: Probably failing due to https://github.com/solson/miri/issues/296\n-// compile-flags: -Zmir-emit-validate=0\n // error-pattern: the evaluated program panicked\n \n #[derive(Debug)]"}, {"sha": "53c42995b8a12352c1b74f1a4343df7d60b5a3b1", "filename": "tests/compile-fail/zst3.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fzst3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Fcompile-fail%2Fzst3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fzst3.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -1,5 +1,3 @@\n-// FIXME: Probably failing due to https://github.com/solson/miri/issues/296\n-// compile-flags: -Zmir-emit-validate=0\n // error-pattern: the evaluated program panicked\n \n #[derive(Debug)]"}, {"sha": "f4a358174f555bce8e38d0a3f9427d52fe0e93b9", "filename": "tests/run-pass-fullmir/hashmap.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Frun-pass-fullmir%2Fhashmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Frun-pass-fullmir%2Fhashmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass-fullmir%2Fhashmap.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -1,5 +1,3 @@\n-// FIXME: disable validation until we figure out how to handle <https://github.com/solson/miri/issues/296>.\n-// compile-flags: -Zmir-emit-validate=0\n use std::collections::{self, HashMap};\n use std::hash::BuildHasherDefault;\n "}, {"sha": "0fd28d6f1e8df607974629d87c80e3173d356c39", "filename": "tests/run-pass/btreemap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Frun-pass%2Fbtreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bac89ae1d875ff3cf28c682c4d34d30058bfa6c4/tests%2Frun-pass%2Fbtreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fbtreemap.rs?ref=bac89ae1d875ff3cf28c682c4d34d30058bfa6c4", "patch": "@@ -1,4 +1,4 @@\n-// mir validation can't cope with `mem::uninitialized::<SomeEnum>()`\n+// mir validation can't cope with `mem::uninitialized()`, so this test fails with validation & full-MIR.\n // compile-flags: -Zmir-emit-validate=0\n \n #[derive(PartialEq, Eq, PartialOrd, Ord)]"}]}