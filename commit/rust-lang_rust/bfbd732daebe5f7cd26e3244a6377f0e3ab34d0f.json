{"sha": "bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmYmQ3MzJkYWViZTVmN2NkMjZlMzI0NGE2Mzc3ZjBlM2FiMzRkMGY=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-05-15T18:15:35Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-05-15T20:50:14Z"}, "message": "mk: Don't run benchmarks with `make check`\n\nThe current suite of benchmarks for the standard distribution take a significant\namount of time to run, but it's unclear whether we're gaining any benefit from\nrunning them. Some specific pain points:\n\n* No one is looking at the data generated by the benchmarks. We have no graphs\n  or analysis of what's happening, so all the data is largely being cast into\n  the void.\n\n* No benchmark has ever uncovered a bug, they have always run successfully.\n\n* Benchmarks not only take a significant amount of time to run, but also take a\n  significant amount of time to compile. I don't think we should mitigate this\n  for now because it's useful to ensure that they do indeed still compile.\n\nThis commit disables --bench test runs by default as part of `make check`,\nflipping the NO_BENCH environment variable to a PLEASE_BENCH variable which will\nmanually enable benchmarking. If and when a dedicated bot is set up for\nbenchmarking, this flag can be enabled on that bot.", "tree": {"sha": "a30ebfe842f1ae2bcab0cde78b4c435ed4c8da8c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a30ebfe842f1ae2bcab0cde78b4c435ed4c8da8c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "html_url": "https://github.com/rust-lang/rust/commit/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba5f53009aab826d8bb8fa97f3213b2fee803e29", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba5f53009aab826d8bb8fa97f3213b2fee803e29", "html_url": "https://github.com/rust-lang/rust/commit/ba5f53009aab826d8bb8fa97f3213b2fee803e29"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "5d37c1da8fb3cb51453324b5c76d9aca11b4f4da", "filename": "Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "patch": "@@ -68,7 +68,7 @@\n #\n #   * `TESTNAME=...` - Specify the name of tests to run\n #   * `CHECK_IGNORED=1` - Run normally-ignored tests\n-#   * `NO_BENCH=1` - Don't run crate benchmarks (disable `--bench` flag)\n+#   * `PLEASE_BENCH=1` - Run crate benchmarks (enable `--bench` flag)\n #\n #   * `CFG_ENABLE_VALGRIND=1` - Run tests under valgrind\n #   * `VALGRIND_COMPILE=1` - Run the compiler itself under valgrind"}, {"sha": "8f20d55e3859cf997ee36e7dd75cd8f6042cd0eb", "filename": "mk/tests.mk", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=bfbd732daebe5f7cd26e3244a6377f0e3ab34d0f", "patch": "@@ -32,16 +32,16 @@ ifdef CHECK_IGNORED\n   TESTARGS += --ignored\n endif\n \n-TEST_BENCH = --bench\n+TEST_BENCH =\n \n # Arguments to the cfail/rfail/rpass/bench tests\n ifdef CFG_VALGRIND\n   CTEST_RUNTOOL = --runtool \"$(CFG_VALGRIND)\"\n   TEST_BENCH =\n endif\n \n-ifdef NO_BENCH\n-  TEST_BENCH =\n+ifdef PLEASE_BENCH\n+  TEST_BENCH = --bench\n endif\n \n # Arguments to the perf tests"}]}