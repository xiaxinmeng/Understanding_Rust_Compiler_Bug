{"sha": "84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "node_id": "C_kwDOAAsO6NoAKDg0YzJhODUwNWRjZGZhMGUzOGUwNWY3MjA2NjQ4MGVhNTFiYTljYmQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-25T14:40:45Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-25T14:40:45Z"}, "message": "Auto merge of #90265 - GuillaumeGomez:rollup-gx3ficp, r=GuillaumeGomez\n\nRollup of 5 pull requests\n\nSuccessful merges:\n\n - #90017 (Add a couple tests for normalize under binder issues)\n - #90079 (enable `i8mm` target feature on aarch64 and arm)\n - #90233 (Tooltip overflow)\n - #90257 (Changed slice.swap documentation for better readability)\n - #90261 (Move back to linux builder on try builds)\n\nFailed merges:\n\nr? `@ghost`\n`@rustbot` modify labels: rollup", "tree": {"sha": "75ad7b93989f6bc6fdf172205e4360d0222d86b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75ad7b93989f6bc6fdf172205e4360d0222d86b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "html_url": "https://github.com/rust-lang/rust/commit/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "235d9853d80f93d31b9c4ae044d6f5c4de3e7255", "url": "https://api.github.com/repos/rust-lang/rust/commits/235d9853d80f93d31b9c4ae044d6f5c4de3e7255", "html_url": "https://github.com/rust-lang/rust/commit/235d9853d80f93d31b9c4ae044d6f5c4de3e7255"}, {"sha": "21af58173f71c16c1d8b111e7455982d2932ce69", "url": "https://api.github.com/repos/rust-lang/rust/commits/21af58173f71c16c1d8b111e7455982d2932ce69", "html_url": "https://github.com/rust-lang/rust/commit/21af58173f71c16c1d8b111e7455982d2932ce69"}], "stats": {"total": 74, "additions": 48, "deletions": 26}, "files": [{"sha": "407db519d51dc0631442037d06819c0df6937fac", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -532,16 +532,9 @@ jobs:\n     strategy:\n       matrix:\n         include:\n-          - name: dist-x86_64-apple\n-            env:\n-              SCRIPT: \"./x.py dist --exclude src/doc --exclude extended && ./x.py dist --target=x86_64-apple-darwin src/doc && ./x.py dist extended\"\n-              RUST_CONFIGURE_ARGS: \"--host=x86_64-apple-darwin --target=x86_64-apple-darwin,aarch64-apple-ios,x86_64-apple-ios,aarch64-apple-ios-sim --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\"\n-              RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-              MACOSX_DEPLOYMENT_TARGET: 10.7\n-              NO_LLVM_ASSERTIONS: 1\n-              NO_DEBUG_ASSERTIONS: 1\n-              DIST_REQUIRE_ALL_TOOLS: 1\n-            os: macos-latest\n+          - name: dist-x86_64-linux\n+            os: ubuntu-latest-xl\n+            env: {}\n     timeout-minutes: 600\n     runs-on: \"${{ matrix.os }}\"\n     steps:"}, {"sha": "dbffb266be88c3a320738c11eac3546fb2e2e465", "filename": "compiler/rustc_codegen_ssa/src/target_features.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftarget_features.rs?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -19,6 +19,7 @@ const ARM_ALLOWED_FEATURES: &[(&str, Option<Symbol>)] = &[\n     (\"crypto\", Some(sym::arm_target_feature)),\n     (\"aes\", Some(sym::arm_target_feature)),\n     (\"sha2\", Some(sym::arm_target_feature)),\n+    (\"i8mm\", Some(sym::arm_target_feature)),\n     (\"v5te\", Some(sym::arm_target_feature)),\n     (\"v6\", Some(sym::arm_target_feature)),\n     (\"v6k\", Some(sym::arm_target_feature)),\n@@ -90,7 +91,7 @@ const AARCH64_ALLOWED_FEATURES: &[(&str, Option<Symbol>)] = &[\n     // FEAT_FRINTTS\n     (\"frintts\", Some(sym::aarch64_target_feature)),\n     // FEAT_I8MM\n-    // (\"i8mm\", Some(sym::aarch64_target_feature)),\n+    (\"i8mm\", Some(sym::aarch64_target_feature)),\n     // FEAT_F32MM\n     // (\"f32mm\", Some(sym::aarch64_target_feature)),\n     // FEAT_F64MM"}, {"sha": "a6370a4513bb5a8138fc142751feb7f5e6fbf92c", "filename": "library/core/src/slice/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -553,9 +553,9 @@ impl<T> [T] {\n     /// # Examples\n     ///\n     /// ```\n-    /// let mut v = [\"a\", \"b\", \"c\", \"d\"];\n-    /// v.swap(1, 3);\n-    /// assert!(v == [\"a\", \"d\", \"c\", \"b\"]);\n+    /// let mut v = [\"a\", \"b\", \"c\", \"d\", \"e\"];\n+    /// v.swap(2, 4);\n+    /// assert!(v == [\"a\", \"b\", \"e\", \"d\", \"c\"]);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[inline]"}, {"sha": "fbb3042d0d6ad1683d5365af46ecdcb208e9a7d0", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -672,17 +672,9 @@ jobs:\n     strategy:\n       matrix:\n         include:\n-          - name: dist-x86_64-apple\n-            env:\n-              SCRIPT: ./x.py dist --exclude src/doc --exclude extended && ./x.py dist --target=x86_64-apple-darwin src/doc && ./x.py dist extended\n-              RUST_CONFIGURE_ARGS: --host=x86_64-apple-darwin --target=x86_64-apple-darwin,aarch64-apple-ios,x86_64-apple-ios,aarch64-apple-ios-sim --enable-full-tools --enable-sanitizers --enable-profiler --set rust.jemalloc --set llvm.ninja=false\n-              RUSTC_RETRY_LINKER_ON_SEGFAULT: 1\n-              MACOSX_DEPLOYMENT_TARGET: 10.7\n-              NO_LLVM_ASSERTIONS: 1\n-              NO_DEBUG_ASSERTIONS: 1\n-              DIST_REQUIRE_ALL_TOOLS: 1\n-            <<: *job-macos-xl\n-\n+          - &dist-x86_64-linux\n+            name: dist-x86_64-linux\n+            <<: *job-linux-xl\n \n   master:\n     name: master"}, {"sha": "4e4dd21120f73e22c6e8cfaaaefc098585ad44f3", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -532,7 +532,7 @@ nav.sub {\n \tposition: relative;\n }\n \n-.docblock > * {\n+.docblock > :not(.information) {\n \tmax-width: 100%;\n \toverflow-x: auto;\n }"}, {"sha": "7ef85a4c44565d8b6fa1adcf7934533368fbf630", "filename": "src/test/rustdoc-gui/overflow-tooltip-information.goml", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -0,0 +1,8 @@\n+// The goal of this test is to ensure that the tooltip `.information` class doesn't\n+// have overflow and max-width CSS rules set because they create a bug in firefox on\n+// mac. For more information: https://github.com/rust-lang/rust/issues/89185\n+goto: file://|DOC_PATH|/test_docs/fn.foo.html\n+assert-css: (\".docblock > .information\", {\n+    \"overflow-x\": \"visible\",\n+    \"max-width\": \"none\"\n+}, ALL)"}, {"sha": "768d1c36619da09d8809c8b685660224626fce36", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-56556.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -0,0 +1,13 @@\n+// check-pass\n+\n+fn foo<T>(t: T) -> usize\n+where\n+    for<'a> &'a T: IntoIterator,\n+    for<'a> <&'a T as IntoIterator>::IntoIter: ExactSizeIterator,\n+{\n+    t.into_iter().len()\n+}\n+\n+fn main() {\n+    foo::<Vec<u32>>(vec![]);\n+}"}, {"sha": "583470080a2fc8cd6cbe74cc8be806fda4ce637d", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-76956.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-76956.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c2a8505dcdfa0e38e05f72066480ea51ba9cbd/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-76956.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-76956.rs?ref=84c2a8505dcdfa0e38e05f72066480ea51ba9cbd", "patch": "@@ -0,0 +1,15 @@\n+// check-pass\n+\n+use std::ops::Deref;\n+\n+struct Data {\n+    boxed: Box<&'static i32>\n+}\n+\n+impl Data {\n+    fn use_data(&self, user: impl for <'a> FnOnce(<Box<&'a i32> as Deref>::Target)) {\n+        user(*self.boxed)\n+    }\n+}\n+\n+fn main() {}"}]}