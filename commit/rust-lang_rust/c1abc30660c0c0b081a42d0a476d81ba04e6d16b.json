{"sha": "c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxYWJjMzA2NjBjMGMwYjA4MWE0MmQwYTQ3NmQ4MWJhMDRlNmQxNmI=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-10-08T22:47:08Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-10-17T23:41:21Z"}, "message": "Make declare_lint take any amount of boolean fields", "tree": {"sha": "cfb63ae0535ae6487fc4b58f180b01fdd084be84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfb63ae0535ae6487fc4b58f180b01fdd084be84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "html_url": "https://github.com/rust-lang/rust/commit/c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa4ee2cc0f722467da4c4b0d19ad365a4be1e5d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa4ee2cc0f722467da4c4b0d19ad365a4be1e5d5", "html_url": "https://github.com/rust-lang/rust/commit/aa4ee2cc0f722467da4c4b0d19ad365a4be1e5d5"}], "stats": {"total": 37, "additions": 24, "deletions": 13}, "files": [{"sha": "29cc326fab64d524c8a2f430567c10313b6da706", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "patch": "@@ -22,7 +22,7 @@ declare_lint! {\n     pub CONST_ERR,\n     Deny,\n     \"constant evaluation detected erroneous expression\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n declare_lint! {\n@@ -71,7 +71,7 @@ declare_lint! {\n     pub UNREACHABLE_CODE,\n     Warn,\n     \"detects unreachable code paths\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n declare_lint! {\n@@ -211,7 +211,7 @@ declare_lint! {\n     pub DEPRECATED,\n     Warn,\n     \"detects use of deprecated items\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n declare_lint! {\n@@ -381,7 +381,7 @@ declare_lint! {\n     pub DEPRECATED_IN_FUTURE,\n     Allow,\n     \"detects use of items that will be deprecated in a future version\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n declare_lint! {"}, {"sha": "76e6a28008a37686d3d05e9cd31fec52aab8354f", "filename": "src/librustc/lint/mod.rs", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc%2Flint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc%2Flint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fmod.rs?ref=c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "patch": "@@ -81,6 +81,17 @@ pub struct Lint {\n }\n \n impl Lint {\n+    pub const fn default_fields_for_macro() -> Self {\n+        Lint {\n+            name: \"\",\n+            default_level: Level::Forbid,\n+            desc: \"\",\n+            edition_lint_opts: None,\n+            is_plugin: false,\n+            report_in_external_macro: false,\n+        }\n+    }\n+\n     /// Returns the `rust::lint::Lint` for a `syntax::early_buffered_lints::BufferedEarlyLintId`.\n     pub fn from_parser_lint_id(lint_id: BufferedEarlyLintId) -> &'static Self {\n         match lint_id {\n@@ -107,19 +118,19 @@ impl Lint {\n #[macro_export]\n macro_rules! declare_lint {\n     ($vis: vis $NAME: ident, $Level: ident, $desc: expr) => (\n-        declare_lint!{$vis $NAME, $Level, $desc, false}\n+        declare_lint!(\n+            $vis $NAME, $Level, $desc,\n+        );\n     );\n-    ($vis: vis $NAME: ident, $Level: ident, $desc: expr, report_in_external_macro: $rep: expr) => (\n-        declare_lint!{$vis $NAME, $Level, $desc, $rep}\n-    );\n-    ($vis: vis $NAME: ident, $Level: ident, $desc: expr, $external: expr) => (\n+    ($vis: vis $NAME: ident, $Level: ident, $desc: expr, $($v:ident),*) => (\n         $vis static $NAME: &$crate::lint::Lint = &$crate::lint::Lint {\n             name: stringify!($NAME),\n             default_level: $crate::lint::$Level,\n             desc: $desc,\n             edition_lint_opts: None,\n-            report_in_external_macro: $external,\n             is_plugin: false,\n+            $($v: true,)*\n+            ..$crate::lint::Lint::default_fields_for_macro()\n         };\n     );\n     ($vis: vis $NAME: ident, $Level: ident, $desc: expr,"}, {"sha": "2997e1d2ca942ae2fa58b584f668d45d5f1bd909", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "patch": "@@ -280,7 +280,7 @@ declare_lint! {\n     pub MISSING_DOCS,\n     Allow,\n     \"detects missing documentation for public members\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n pub struct MissingDoc {\n@@ -1374,7 +1374,7 @@ declare_lint! {\n     UNNAMEABLE_TEST_ITEMS,\n     Warn,\n     \"detects an item that cannot be named being marked as `#[test_case]`\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n pub struct UnnameableTestItems {"}, {"sha": "2ff8147149bb870b08121d5974ef31b5a15c3322", "filename": "src/librustc_lint/unused.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc_lint%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1abc30660c0c0b081a42d0a476d81ba04e6d16b/src%2Flibrustc_lint%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Funused.rs?ref=c1abc30660c0c0b081a42d0a476d81ba04e6d16b", "patch": "@@ -25,7 +25,7 @@ declare_lint! {\n     pub UNUSED_MUST_USE,\n     Warn,\n     \"unused result of a type flagged as `#[must_use]`\",\n-    report_in_external_macro: true\n+    report_in_external_macro\n }\n \n declare_lint! {"}]}