{"sha": "763470dc1312482f8f067f90925579fb0072ef92", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2MzQ3MGRjMTMxMjQ4MmY4ZjA2N2Y5MDkyNTU3OWZiMDA3MmVmOTI=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-05-23T23:11:33Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-05-24T10:01:05Z"}, "message": "rustbuild: Untie `debuginfo-level-tests` from `debuginfo-level`", "tree": {"sha": "3d8d3691d298588455c73f70b897f7656acd4bd0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3d8d3691d298588455c73f70b897f7656acd4bd0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/763470dc1312482f8f067f90925579fb0072ef92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/763470dc1312482f8f067f90925579fb0072ef92", "html_url": "https://github.com/rust-lang/rust/commit/763470dc1312482f8f067f90925579fb0072ef92", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/763470dc1312482f8f067f90925579fb0072ef92/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3da7bbc6da494f291f18a1ac3290e7d92d3ba958", "url": "https://api.github.com/repos/rust-lang/rust/commits/3da7bbc6da494f291f18a1ac3290e7d92d3ba958", "html_url": "https://github.com/rust-lang/rust/commit/3da7bbc6da494f291f18a1ac3290e7d92d3ba958"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "ae3107b51feaf306f323e7865bbcd27bba1ef04d", "filename": "config.toml.example", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/763470dc1312482f8f067f90925579fb0072ef92/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/763470dc1312482f8f067f90925579fb0072ef92/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=763470dc1312482f8f067f90925579fb0072ef92", "patch": "@@ -301,11 +301,13 @@\n # library.\n #debug-assertions = false\n \n-# Debuginfo level for Rust code, corresponds to the `-C debuginfo=N` option of `rustc`.\n+# Debuginfo level for most of Rust code, corresponds to the `-C debuginfo=N` option of `rustc`.\n # `0` - no debug info\n # `1` - line tables only\n # `2` - full debug info with variable and type information\n-# Can be overriden for specific subsets of Rust code (rustc, std, tools or tests).\n+# Can be overriden for specific subsets of Rust code (rustc, std or tools).\n+# Debuginfo for tests run with compiletest is not controlled by this option\n+# and needs to be enabled separately with `debuginfo-level-tests`.\n #debuginfo-level = if debug { 2 } else { 0 }\n \n # Debuginfo level for the compiler.\n@@ -318,7 +320,7 @@\n #debuginfo-level-tools = debuginfo-level\n \n # Debuginfo level for the test suites run with compiletest.\n-#debuginfo-level-tests = debuginfo-level\n+#debuginfo-level-tests = 0\n \n # Whether or not `panic!`s generate backtraces (RUST_BACKTRACE)\n #backtrace = true"}, {"sha": "d618654b129af844b3a3a1ca6097da7ae6e39d3d", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/763470dc1312482f8f067f90925579fb0072ef92/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/763470dc1312482f8f067f90925579fb0072ef92/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=763470dc1312482f8f067f90925579fb0072ef92", "patch": "@@ -650,7 +650,7 @@ impl Config {\n         config.rust_debuginfo_level_rustc = with_defaults(debuginfo_level_rustc);\n         config.rust_debuginfo_level_std = with_defaults(debuginfo_level_std);\n         config.rust_debuginfo_level_tools = with_defaults(debuginfo_level_tools);\n-        config.rust_debuginfo_level_tests = with_defaults(debuginfo_level_tests);\n+        config.rust_debuginfo_level_tests = debuginfo_level_tests.unwrap_or(0);\n \n         let default = config.channel == \"dev\";\n         config.ignore_git = ignore_git.unwrap_or(default);"}]}