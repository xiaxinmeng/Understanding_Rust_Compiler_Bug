{"sha": "633832ffc2ba1c63b5ef797ab62bd7388c26ac4f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzMzgzMmZmYzJiYTFjNjNiNWVmNzk3YWI2MmJkNzM4OGMyNmFjNGY=", "commit": {"author": {"name": "Hideki Sekine", "email": "sekineh@me.com", "date": "2018-08-07T19:02:02Z"}, "committer": {"name": "Hideki Sekine", "email": "sekineh@me.com", "date": "2018-08-07T19:02:02Z"}, "message": "[CI] run-make/thumb: 1st working version with hacky workaround.", "tree": {"sha": "0d064b295cf3f611ba817329cffa889e59d4ebfa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0d064b295cf3f611ba817329cffa889e59d4ebfa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f", "html_url": "https://github.com/rust-lang/rust/commit/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f/comments", "author": {"login": "sekineh", "id": 3956266, "node_id": "MDQ6VXNlcjM5NTYyNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3956266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sekineh", "html_url": "https://github.com/sekineh", "followers_url": "https://api.github.com/users/sekineh/followers", "following_url": "https://api.github.com/users/sekineh/following{/other_user}", "gists_url": "https://api.github.com/users/sekineh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sekineh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sekineh/subscriptions", "organizations_url": "https://api.github.com/users/sekineh/orgs", "repos_url": "https://api.github.com/users/sekineh/repos", "events_url": "https://api.github.com/users/sekineh/events{/privacy}", "received_events_url": "https://api.github.com/users/sekineh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sekineh", "id": 3956266, "node_id": "MDQ6VXNlcjM5NTYyNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3956266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sekineh", "html_url": "https://github.com/sekineh", "followers_url": "https://api.github.com/users/sekineh/followers", "following_url": "https://api.github.com/users/sekineh/following{/other_user}", "gists_url": "https://api.github.com/users/sekineh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sekineh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sekineh/subscriptions", "organizations_url": "https://api.github.com/users/sekineh/orgs", "repos_url": "https://api.github.com/users/sekineh/repos", "events_url": "https://api.github.com/users/sekineh/events{/privacy}", "received_events_url": "https://api.github.com/users/sekineh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5af644c77bddf446c555499fc4058a3657e00fbb", "url": "https://api.github.com/repos/rust-lang/rust/commits/5af644c77bddf446c555499fc4058a3657e00fbb", "html_url": "https://github.com/rust-lang/rust/commit/5af644c77bddf446c555499fc4058a3657e00fbb"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "a3540b3a3a9eb33205249e6f22d32e4fd284c2e3", "filename": "src/test/run-make/thumb-none-cortex-m/Makefile", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/633832ffc2ba1c63b5ef797ab62bd7388c26ac4f/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile?ref=633832ffc2ba1c63b5ef797ab62bd7388c26ac4f", "patch": "@@ -1,20 +1,28 @@\n-# Don't use the definitions\n-#-include ../../run-make-fulldeps/tools.mk\n+-include ../../run-make-fulldeps/tools.mk\n+\n+# How to run this\n+# $ ./x.py dist --target x86_64-unknown-linux-gnu,thumbv7m-none-eabi --exclude src/doc\n+# $ ./x.py test --target thumbv7m-none-eabi src/test/run-make\n \n ifeq ($(TARGET),thumbv7m-none-eabi)\n \n #TMP_DIR := $(shell mktemp -d)\n TMP_DIR := /tmp/safe_place\n CRATE := cortex-m\n-LD_LIBRARY_PATH=/home/sekineh/rustme9/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/thumbv7m-none-eabi/lib\n+RUSTC := $(RUSTC_ORIGINAL)\n+LD_LIBRARY_PATH := $(HOST_RPATH_DIR)\n+HOST := x86_64-unknown-linux-gnu\n \n all:\n+\t# Workaround for error[E0463]: can't find crate for `core`\n+\t-ln -sv $(SRC)/build/tmp/dist/rust-std-*-$(TARGET)/rust-std-$(TARGET)/lib/rustlib/$(TARGET)/lib/*.rlib $(SRC)/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/$(TARGET)/lib/\n+\t# Workaround for error[E0463]: can't find crate for `std`\n+\t-ln -sv $(SRC)/build/tmp/dist/rust-std-*-$(HOST)/rust-std-$(HOST)/lib/rustlib/$(HOST)/lib/*.rlib $(SRC)/build/x86_64-unknown-linux-gnu/stage2/lib/rustlib/$(HOST)/lib/\n \tenv > env.txt\n \tmkdir -p $(TMP_DIR)\n \t-cd $(TMP_DIR) && rm -rf $(CRATE)\n \tcd $(TMP_DIR) && $(CARGO) clone $(CRATE) --vers 0.5.0\n-\tpwd\n-\tcd $(TMP_DIR) && cd $(CRATE) && env RUST_LOG=debug $(CARGO) build -j 1 --target $(TARGET) -vv 2>&1 | tee cargo-fail-vv-9.2.log\n+\tcd $(TMP_DIR) && cd $(CRATE) && $(CARGO) build -j 1 --target $(TARGET) -v\n else\n \n all:"}]}