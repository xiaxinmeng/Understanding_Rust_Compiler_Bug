{"sha": "fff921672f8e679c42d0659c475ee57fddac13b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmZjkyMTY3MmY4ZTY3OWM0MmQwNjU5YzQ3NWVlNTdmZGRhYzEzYjY=", "commit": {"author": {"name": "QuietMisdreavus", "email": "bryan@icesoldier.me", "date": "2016-11-11T22:41:00Z"}, "committer": {"name": "QuietMisdreavus", "email": "bryan@icesoldier.me", "date": "2016-11-12T19:59:17Z"}, "message": "rustdoc: fold fields for enum struct variants into a docblock", "tree": {"sha": "e50c0e305d7413ca7fa6d7be5fccc285f0394b53", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e50c0e305d7413ca7fa6d7be5fccc285f0394b53"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fff921672f8e679c42d0659c475ee57fddac13b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fff921672f8e679c42d0659c475ee57fddac13b6", "html_url": "https://github.com/rust-lang/rust/commit/fff921672f8e679c42d0659c475ee57fddac13b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fff921672f8e679c42d0659c475ee57fddac13b6/comments", "author": null, "committer": null, "parents": [{"sha": "5293b913c457ada5e5790ec3bcecbb373c8006e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/5293b913c457ada5e5790ec3bcecbb373c8006e8", "html_url": "https://github.com/rust-lang/rust/commit/5293b913c457ada5e5790ec3bcecbb373c8006e8"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "ddbdb28c2adea046b8d9c8e7371e5cec8b915f2e", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=fff921672f8e679c42d0659c475ee57fddac13b6", "patch": "@@ -2467,8 +2467,13 @@ fn item_enum(w: &mut fmt::Formatter, cx: &Context, it: &clean::Item,\n             if let clean::VariantItem(Variant {\n                 kind: VariantKind::Struct(ref s)\n             }) = variant.inner {\n-                write!(w, \"<h3 class='fields'>Fields</h3>\\n\n-                           <table>\")?;\n+                let variant_id = derive_id(format!(\"{}.{}.fields\",\n+                                                   ItemType::Variant,\n+                                                   variant.name.as_ref().unwrap()));\n+                write!(w, \"<span class='docblock autohide sub-variant' id='{id}'>\",\n+                       id = variant_id)?;\n+                write!(w, \"<h3 class='fields'>Fields of <code>{name}</code></h3>\\n\n+                           <table>\", name = variant.name.as_ref().unwrap())?;\n                 for field in &s.fields {\n                     use clean::StructFieldItem;\n                     if let StructFieldItem(ref ty) = field.inner {\n@@ -2492,7 +2497,7 @@ fn item_enum(w: &mut fmt::Formatter, cx: &Context, it: &clean::Item,\n                         write!(w, \"</td></tr>\")?;\n                     }\n                 }\n-                write!(w, \"</table>\")?;\n+                write!(w, \"</table></span>\")?;\n             }\n             render_stability_since(w, variant, it)?;\n         }"}, {"sha": "5ffab949d019c38afde76552f7d07b9e5d2bd861", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=fff921672f8e679c42d0659c475ee57fddac13b6", "patch": "@@ -1013,6 +1013,22 @@\n                     .html('&nbsp;Expand&nbsp;description'));\n         var wrapper = $(\"<div class='toggle-wrapper'>\").append(mainToggle);\n         $(\"#main > .docblock\").before(wrapper);\n+\n+        $(\".docblock.autohide\").each(function() {\n+            var wrap = $(this).prev();\n+            if (wrap.is(\".toggle-wrapper\")) {\n+                var toggle = wrap.children().first();\n+                if ($(this).children().first().is(\"h3\")) {\n+                    toggle.children(\".toggle-label\")\n+                          .text(\" Show \" + $(this).children().first().text());\n+                }\n+                $(this).hide();\n+                wrap.addClass(\"collapsed\");\n+                toggle.children(\".inner\").text(labelForToggleButton(true));\n+                toggle.children(\".toggle-label\").show();\n+            }\n+        });\n+\n         var mainToggle =\n             $(toggle).append(\n                 $('<span/>', {'class': 'toggle-label'})"}, {"sha": "35d43314c702c0a8d57fd845de247376d609e1d7", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/fff921672f8e679c42d0659c475ee57fddac13b6/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=fff921672f8e679c42d0659c475ee57fddac13b6", "patch": "@@ -339,6 +339,10 @@ h4 > code, h3 > code, .invisible > code {\n \tborder-bottom: 1px solid;\n }\n \n+.fields + table {\n+\tmargin-bottom: 1em;\n+}\n+\n .content .item-list {\n \tlist-style-type: none;\n \tpadding: 0;\n@@ -663,6 +667,10 @@ span.since {\n \tmargin-top: 5px;\n }\n \n+.sub-variant, .sub-variant > h3 {\n+\tmargin-top: 0 !important;\n+}\n+\n .enum > .toggle-wrapper + .docblock, .struct > .toggle-wrapper + .docblock {\n \tmargin-left: 30px;\n \tmargin-bottom: 20px;"}]}