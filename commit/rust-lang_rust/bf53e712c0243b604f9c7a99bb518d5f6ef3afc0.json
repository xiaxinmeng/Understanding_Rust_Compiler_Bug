{"sha": "bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "node_id": "C_kwDOAAsO6NoAKGJmNTNlNzEyYzAyNDNiNjA0ZjljN2E5OWJiNTE4ZDVmNmVmM2FmYzA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-27T07:25:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-27T07:25:11Z"}, "message": "Rollup merge of #103586 - compiler-errors:issue-103573, r=jackh726\n\nProcess registered region obligation in `resolve_regions_with_wf_tys`\n\nFixes #103573", "tree": {"sha": "6a0a1b75baac8e350c6a575764725f1dfa38c02f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a0a1b75baac8e350c6a575764725f1dfa38c02f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjWjJXCRBK7hj4Ov3rIwAAhIoIAIGb4pYdzpng9yOFldBlIMk/\n34b5OUrX32sdH0zvpQ9U9sY0ZCffTFT6O657dq0WVHrX3nhmkB7gVOxhSgi3dog8\nNvP50WbNEN+N3Ni9MS6HmO/sfkoIFaU3K/LZB3X/nQH8qzvf/DhOpVVQdgj9OAZV\ni2b5/oEhPrJ/+uTGP7LGQZZc78mG9lEfOYblOcmPeScCJ310uhYy2ZEAoRFi/oFL\nUKTIf+qt9svYb7qy9+oIY2lrPbogRHcIirIM+WkvJi49sCED1XXI5C3m3+hjXZHi\nmnDVYgxNBA83bYI3yzdF8xZs7aLSy4+9u7taxvnCaKt+8luiNirn4ts+ai6rw3w=\n=OJIu\n-----END PGP SIGNATURE-----\n", "payload": "tree 6a0a1b75baac8e350c6a575764725f1dfa38c02f\nparent 8a297844005b7152a8b9a9f7c6bcf557c4157ab3\nparent db3b01d2bf67e647487320467bde6f7023a8f154\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1666855511 +0200\ncommitter GitHub <noreply@github.com> 1666855511 +0200\n\nRollup merge of #103586 - compiler-errors:issue-103573, r=jackh726\n\nProcess registered region obligation in `resolve_regions_with_wf_tys`\n\nFixes #103573\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "html_url": "https://github.com/rust-lang/rust/commit/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a297844005b7152a8b9a9f7c6bcf557c4157ab3", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a297844005b7152a8b9a9f7c6bcf557c4157ab3", "html_url": "https://github.com/rust-lang/rust/commit/8a297844005b7152a8b9a9f7c6bcf557c4157ab3"}, {"sha": "db3b01d2bf67e647487320467bde6f7023a8f154", "url": "https://api.github.com/repos/rust-lang/rust/commits/db3b01d2bf67e647487320467bde6f7023a8f154", "html_url": "https://github.com/rust-lang/rust/commit/db3b01d2bf67e647487320467bde6f7023a8f154"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "70a171c02b26b5140b1016244e160920be48a8f5", "filename": "compiler/rustc_hir_analysis/src/check/wfcheck.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs?ref=bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "patch": "@@ -713,6 +713,10 @@ fn resolve_regions_with_wf_tys<'tcx>(\n \n     add_constraints(&infcx, region_bound_pairs);\n \n+    infcx.process_registered_region_obligations(\n+        outlives_environment.region_bound_pairs(),\n+        param_env,\n+    );\n     let errors = infcx.resolve_regions(&outlives_environment);\n \n     debug!(?errors, \"errors\");"}, {"sha": "bcbf4f941ecd94922bbd2bc9400539761d3ddc78", "filename": "src/test/ui/wf/issue-103573.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs?ref=bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "patch": "@@ -0,0 +1,22 @@\n+trait TraitA {\n+    type TypeA;\n+}\n+\n+trait TraitD {\n+    type TypeD;\n+}\n+\n+pub trait TraitB {\n+    type TypeB: TraitD;\n+\n+    fn f(_: &<Self::TypeB as TraitD>::TypeD);\n+}\n+\n+pub trait TraitC<E> {\n+    type TypeC<'a>: TraitB;\n+\n+    fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA);\n+    //~^ ERROR the trait bound `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA` is not satisfied\n+}\n+\n+fn main() {}"}, {"sha": "fcf3f15e4d3f6f98ecdbadd689a8b3682480a470", "filename": "src/test/ui/wf/issue-103573.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bf53e712c0243b604f9c7a99bb518d5f6ef3afc0/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr?ref=bf53e712c0243b604f9c7a99bb518d5f6ef3afc0", "patch": "@@ -0,0 +1,14 @@\n+error[E0277]: the trait bound `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA` is not satisfied\n+  --> $DIR/issue-103573.rs:18:5\n+   |\n+LL |     fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA);\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `TraitA` is not implemented for `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB`\n+   |\n+help: consider further restricting the associated type\n+   |\n+LL |     fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA) where <<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA;\n+   |                                                                         +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}