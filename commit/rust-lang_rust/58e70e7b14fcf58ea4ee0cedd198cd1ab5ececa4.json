{"sha": "58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4ZTcwZTdiMTRmY2Y1OGVhNGVlMGNlZGQxOThjZDFhYjVlY2VjYTQ=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2016-11-30T08:07:31Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2016-12-06T01:20:08Z"}, "message": "Warn when an import list is empty\n\nFor a given file\n\n```rust\nuse std::*;\nuse std::{};\n```\n\noutput the following warnings\n\n```\nwarning: unused import: `use std::{};`, #[warn(unused_imports)] on by default\n --> file.rs:2:1\n  |\n2 | use std::{};\n  | ^^^^^^^^^^^^\n\nwarning: unused import: `std::*;`, #[warn(unused_imports)] on by default\n --> file.rs:1:5\n  |\n1 | use std::*;\n  |     ^^^^^^^\n```", "tree": {"sha": "de3084f5de367b5ba796587e37faec277c348211", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de3084f5de367b5ba796587e37faec277c348211"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "html_url": "https://github.com/rust-lang/rust/commit/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ebeee0e27e32e212979d9f38d285b1dc2816cd0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ebeee0e27e32e212979d9f38d285b1dc2816cd0a", "html_url": "https://github.com/rust-lang/rust/commit/ebeee0e27e32e212979d9f38d285b1dc2816cd0a"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "5db622a4e7da035199b1e549746312227b73550e", "filename": "src/librustc_resolve/check_unused.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Flibrustc_resolve%2Fcheck_unused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Flibrustc_resolve%2Fcheck_unused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fcheck_unused.rs?ref=58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "patch": "@@ -103,6 +103,12 @@ impl<'a, 'b> Visitor for UnusedImportCheckVisitor<'a, 'b> {\n                     }\n \n                     ViewPathList(_, ref list) => {\n+                        if list.len() == 0 {\n+                            self.unused_imports\n+                                .entry(item.id)\n+                                .or_insert_with(NodeMap)\n+                                .insert(item.id, item.span);\n+                        }\n                         for i in list {\n                             self.check_import(item.id, i.node.id, i.span);\n                         }"}, {"sha": "ed7851ec0f15700bb63b91f7b16ae2bc08e9a6c7", "filename": "src/test/compile-fail/issue-28388-1.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28388-1.rs?ref=58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "patch": "@@ -10,6 +10,8 @@\n \n // Prefix in imports with empty braces should be resolved and checked privacy, stability, etc.\n \n-use foo::{}; //~ ERROR failed to resolve. Maybe a missing `extern crate foo;`?\n+use foo::{};\n+//~^ ERROR failed to resolve. Maybe a missing `extern crate foo;`?\n+//~| NOTE foo\n \n fn main() {}"}, {"sha": "4ed5bfab06f02209f547072dafc22357d70f4bcd", "filename": "src/test/compile-fail/issue-28388-2.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28388-2.rs?ref=58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "patch": "@@ -14,6 +14,7 @@ mod m {\n     mod n {}\n }\n \n-use m::n::{}; //~ ERROR module `n` is private\n+use m::n::{};\n+//~^ ERROR module `n` is private\n \n fn main() {}"}, {"sha": "4baaa16e772da82726737bfb79697a117b22fa23", "filename": "src/test/compile-fail/issue-28388-3.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Fissue-28388-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28388-3.rs?ref=58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "patch": "@@ -14,7 +14,8 @@\n \n extern crate lint_stability;\n \n-use lint_stability::UnstableStruct::{}; //~ ERROR use of unstable library feature 'test_feature'\n+use lint_stability::UnstableStruct::{};\n+//~^ ERROR use of unstable library feature 'test_feature'\n use lint_stability::StableStruct::{}; // OK\n \n fn main() {}"}, {"sha": "f6f7c210f466a0712d6dca5d2269e4289ca8ec12", "filename": "src/test/compile-fail/lint-unused-imports.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Flint-unused-imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4/src%2Ftest%2Fcompile-fail%2Flint-unused-imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-unused-imports.rs?ref=58e70e7b14fcf58ea4ee0cedd198cd1ab5ececa4", "patch": "@@ -15,6 +15,8 @@ use bar::c::cc as cal;\n \n use std::mem::*;            // shouldn't get errors for not using\n                             // everything imported\n+use std::fmt::{};\n+//~^ ERROR unused import: `use std::fmt::{};`\n \n // Should get errors for both 'Some' and 'None'\n use std::option::Option::{Some, None};"}]}