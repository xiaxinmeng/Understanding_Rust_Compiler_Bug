{"sha": "5b64c91c262a6a148a35d24180b23ffafbbab1dc", "node_id": "C_kwDOAAsO6NoAKDViNjRjOTFjMjYyYTZhMTQ4YTM1ZDI0MTgwYjIzZmZhZmJiYWIxZGM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-21T16:59:31Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-21T16:59:31Z"}, "message": "Auto merge of #2736 - RalfJung:josh, r=oli-obk\n\nupdate josh instructions\n\nFixes https://github.com/rust-lang/miri/issues/2730\n\nr\\? `@oli-obk`", "tree": {"sha": "efaa6707ed90917144a0b2ffa9fbd96cf6418555", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efaa6707ed90917144a0b2ffa9fbd96cf6418555"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b64c91c262a6a148a35d24180b23ffafbbab1dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b64c91c262a6a148a35d24180b23ffafbbab1dc", "html_url": "https://github.com/rust-lang/rust/commit/5b64c91c262a6a148a35d24180b23ffafbbab1dc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b64c91c262a6a148a35d24180b23ffafbbab1dc/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e82a604a88fec3adc0645c5cc5328ea7eba5faa4", "url": "https://api.github.com/repos/rust-lang/rust/commits/e82a604a88fec3adc0645c5cc5328ea7eba5faa4", "html_url": "https://github.com/rust-lang/rust/commit/e82a604a88fec3adc0645c5cc5328ea7eba5faa4"}, {"sha": "90d8fc6240874ec1dd636ba2b18ef56a0657d454", "url": "https://api.github.com/repos/rust-lang/rust/commits/90d8fc6240874ec1dd636ba2b18ef56a0657d454", "html_url": "https://github.com/rust-lang/rust/commit/90d8fc6240874ec1dd636ba2b18ef56a0657d454"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "6efaefdefffb3ee1e6e67801631d22826196312b", "filename": "src/tools/miri/CONTRIBUTING.md", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5b64c91c262a6a148a35d24180b23ffafbbab1dc/src%2Ftools%2Fmiri%2FCONTRIBUTING.md", "raw_url": "https://github.com/rust-lang/rust/raw/5b64c91c262a6a148a35d24180b23ffafbbab1dc/src%2Ftools%2Fmiri%2FCONTRIBUTING.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2FCONTRIBUTING.md?ref=5b64c91c262a6a148a35d24180b23ffafbbab1dc", "patch": "@@ -232,16 +232,16 @@ You can also directly run Miri on a Rust source file:\n \n ## Advanced topic: Syncing with the rustc repo\n \n-We use the [`josh` proxy](https://github.com/josh-project/josh) to transmit\n-changes between the rustc and Miri repositories. For now, the latest git version\n-of josh needs to be built from source. This downloads and runs josh:\n+We use the [`josh` proxy](https://github.com/josh-project/josh) to transmit changes between the\n+rustc and Miri repositories. The eaisest way to run josh is via docker:\n \n ```sh\n-git clone https://github.com/josh-project/josh\n-cd josh\n-cargo run --release -p josh-proxy -- --local=local --remote=https://github.com --no-background\n+docker pull joshproject/josh-proxy:latest\n+docker run -it -p 8000:8000 -e JOSH_REMOTE=https://github.com -e JOSH_EXTRA_OPTS=--no-background -v josh-vol:/data/git joshproject/josh-proxy:latest\n ```\n \n+This sets up a local volume `josh-vol` for josh's cache.\n+\n ### Importing changes from the rustc repo\n \n Josh needs to be running, as described above."}]}