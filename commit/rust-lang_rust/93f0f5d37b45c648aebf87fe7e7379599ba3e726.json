{"sha": "93f0f5d37b45c648aebf87fe7e7379599ba3e726", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzZjBmNWQzN2I0NWM2NDhhZWJmODdmZTdlNzM3OTU5OWJhM2U3MjY=", "commit": {"author": {"name": "JarredAllen", "email": "jarredallen73@gmail.com", "date": "2020-06-12T15:32:38Z"}, "committer": {"name": "JarredAllen", "email": "jarredallen73@gmail.com", "date": "2020-07-03T23:50:45Z"}, "message": "Last few tweaks", "tree": {"sha": "5004ab14260e2ea7c8c09351ceda763b0cee8d96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5004ab14260e2ea7c8c09351ceda763b0cee8d96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93f0f5d37b45c648aebf87fe7e7379599ba3e726", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93f0f5d37b45c648aebf87fe7e7379599ba3e726", "html_url": "https://github.com/rust-lang/rust/commit/93f0f5d37b45c648aebf87fe7e7379599ba3e726", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93f0f5d37b45c648aebf87fe7e7379599ba3e726/comments", "author": {"login": "JarredAllen", "id": 19656507, "node_id": "MDQ6VXNlcjE5NjU2NTA3", "avatar_url": "https://avatars.githubusercontent.com/u/19656507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JarredAllen", "html_url": "https://github.com/JarredAllen", "followers_url": "https://api.github.com/users/JarredAllen/followers", "following_url": "https://api.github.com/users/JarredAllen/following{/other_user}", "gists_url": "https://api.github.com/users/JarredAllen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JarredAllen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JarredAllen/subscriptions", "organizations_url": "https://api.github.com/users/JarredAllen/orgs", "repos_url": "https://api.github.com/users/JarredAllen/repos", "events_url": "https://api.github.com/users/JarredAllen/events{/privacy}", "received_events_url": "https://api.github.com/users/JarredAllen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JarredAllen", "id": 19656507, "node_id": "MDQ6VXNlcjE5NjU2NTA3", "avatar_url": "https://avatars.githubusercontent.com/u/19656507?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JarredAllen", "html_url": "https://github.com/JarredAllen", "followers_url": "https://api.github.com/users/JarredAllen/followers", "following_url": "https://api.github.com/users/JarredAllen/following{/other_user}", "gists_url": "https://api.github.com/users/JarredAllen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JarredAllen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JarredAllen/subscriptions", "organizations_url": "https://api.github.com/users/JarredAllen/orgs", "repos_url": "https://api.github.com/users/JarredAllen/repos", "events_url": "https://api.github.com/users/JarredAllen/events{/privacy}", "received_events_url": "https://api.github.com/users/JarredAllen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5150277a4f765bb113e163adc7eb495dcbb57129", "url": "https://api.github.com/repos/rust-lang/rust/commits/5150277a4f765bb113e163adc7eb495dcbb57129", "html_url": "https://github.com/rust-lang/rust/commit/5150277a4f765bb113e163adc7eb495dcbb57129"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "01c0e4b0302a4b44d6de110e54418544d2cb5be0", "filename": "CHANGELOG.md", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -1491,7 +1491,6 @@ Released 2018-09-13\n [`large_stack_arrays`]: https://rust-lang.github.io/rust-clippy/master/index.html#large_stack_arrays\n [`len_without_is_empty`]: https://rust-lang.github.io/rust-clippy/master/index.html#len_without_is_empty\n [`len_zero`]: https://rust-lang.github.io/rust-clippy/master/index.html#len_zero\n-[`let_and_return`]: https://rust-lang.github.io/rust-clippy/master/index.html#let_and_return\n [`let_underscore_lock`]: https://rust-lang.github.io/rust-clippy/master/index.html#let_underscore_lock\n [`let_underscore_must_use`]: https://rust-lang.github.io/rust-clippy/master/index.html#let_underscore_must_use\n [`let_unit_value`]: https://rust-lang.github.io/rust-clippy/master/index.html#let_unit_value"}, {"sha": "fe34e4390d65966d181b974183646aab27f32cc6", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -1161,6 +1161,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&needless_continue::NEEDLESS_CONTINUE),\n         LintId::of(&needless_pass_by_value::NEEDLESS_PASS_BY_VALUE),\n         LintId::of(&non_expressive_names::SIMILAR_NAMES),\n+        LintId::of(&option_if_let_else::OPTION_IF_LET_ELSE),\n         LintId::of(&ranges::RANGE_PLUS_ONE),\n         LintId::of(&shadow::SHADOW_UNRELATED),\n         LintId::of(&strings::STRING_ADD_ASSIGN),\n@@ -1372,7 +1373,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&non_expressive_names::MANY_SINGLE_CHAR_NAMES),\n         LintId::of(&open_options::NONSENSICAL_OPEN_OPTIONS),\n         LintId::of(&option_env_unwrap::OPTION_ENV_UNWRAP),\n-        LintId::of(&option_if_let_else::OPTION_IF_LET_ELSE),\n         LintId::of(&overflow_check_conditional::OVERFLOW_CHECK_CONDITIONAL),\n         LintId::of(&panic_unimplemented::PANIC_PARAMS),\n         LintId::of(&partialeq_ne_impl::PARTIALEQ_NE_IMPL),\n@@ -1521,7 +1521,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&new_without_default::NEW_WITHOUT_DEFAULT),\n         LintId::of(&non_expressive_names::JUST_UNDERSCORES_AND_DIGITS),\n         LintId::of(&non_expressive_names::MANY_SINGLE_CHAR_NAMES),\n-        LintId::of(&option_if_let_else::OPTION_IF_LET_ELSE),\n         LintId::of(&panic_unimplemented::PANIC_PARAMS),\n         LintId::of(&ptr::CMP_NULL),\n         LintId::of(&ptr::PTR_ARG),"}, {"sha": "6ec7f8cae5d7573d96525fd4b7afa64b49fbf7a1", "filename": "clippy_lints/src/minmax.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Fminmax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Fminmax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fminmax.rs?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -99,6 +99,5 @@ fn fetch_const<'a>(cx: &LateContext<'_>, args: &'a [Expr<'a>], m: MinMax) -> Opt\n             } else {\n                 None\n             }\n-        }\n-    ).map(|(c, arg)| (m, c, arg))\n+    })\n }"}, {"sha": "c877cc6fa8b8a1e61acf52c4523ff4dfd11320e2", "filename": "clippy_lints/src/option_if_let_else.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Foption_if_let_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Foption_if_let_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foption_if_let_else.rs?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -63,7 +63,7 @@ declare_clippy_lint! {\n     /// }, |foo| foo);\n     /// ```\n     pub OPTION_IF_LET_ELSE,\n-    style,\n+    pedantic,\n     \"reimplementation of Option::map_or\"\n }\n "}, {"sha": "3c939744173562515d8419edffabca457ec08e11", "filename": "clippy_lints/src/returns.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Freturns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/clippy_lints%2Fsrc%2Freturns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freturns.rs?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -259,10 +259,15 @@ fn is_unit_expr(expr: &ast::Expr) -> bool {\n \n fn lint_unneeded_unit_return(cx: &EarlyContext<'_>, ty: &ast::Ty, span: Span) {\n     let (ret_span, appl) = if let Ok(fn_source) = cx.sess().source_map().span_to_snippet(span.with_hi(ty.span.hi())) {\n-        fn_source.rfind(\"->\").map_or((ty.span, Applicability::MaybeIncorrect), |rpos| (\n+        if let Some(rpos) = fn_source.rfind(\"->\") {\n+            #[allow(clippy::cast_possible_truncation)]\n+            (\n                 ty.span.with_lo(BytePos(span.lo().0 + rpos as u32)),\n                 Applicability::MachineApplicable,\n-            ))\n+            )\n+        } else {\n+            (ty.span, Applicability::MaybeIncorrect)\n+        }\n     } else {\n         (ty.span, Applicability::MaybeIncorrect)\n     };"}, {"sha": "e681f47f949dfee5e6eee6830550833f454afd2b", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93f0f5d37b45c648aebf87fe7e7379599ba3e726/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93f0f5d37b45c648aebf87fe7e7379599ba3e726/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=93f0f5d37b45c648aebf87fe7e7379599ba3e726", "patch": "@@ -1622,7 +1622,7 @@ pub static ref ALL_LINTS: Vec<Lint> = vec![\n     },\n     Lint {\n         name: \"option_if_let_else\",\n-        group: \"style\",\n+        group: \"pedantic\",\n         desc: \"reimplementation of Option::map_or\",\n         deprecation: None,\n         module: \"option_if_let_else\","}]}