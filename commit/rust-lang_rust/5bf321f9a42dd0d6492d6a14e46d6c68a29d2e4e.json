{"sha": "5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e", "node_id": "C_kwDOAAsO6NoAKDViZjMyMWY5YTQyZGQwZDY0OTJkNmExNGU0NmQ2YzY4YTI5ZDJlNGU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-05T10:26:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-05T10:26:06Z"}, "message": "Rollup merge of #92448 - jsha:font-size-access, r=GuillaumeGomez\n\nSet font size proportional to user's font size\n\nAccording to MDN (https://developer.mozilla.org/en-US/docs/Web/CSS/font-size),\n\n> To maximize accessibility, it is generally best to use values that are relative to the user's default font size.\n\n> Defining font sizes in px is not accessible, because the user cannot change the font size in some browsers.\n\nNote that changing font size (in browser or OS settings) is distinct from the zoom functionality triggered with Ctrl/Cmd-+. Zoom\nfunctionality increases the size of everything on the page, effectively applying a multiplier to all pixel sizes. Font size changes apply to just text.\n\nFor relative font sizes, we could use `em`, as we do in several places already. However that has a problem of \"compounding\" (see MDN article for details). The compounding problem is nicely solved by `rem`, which make font sizes relative to the root element, not the parent element.\n\nSince we were using a hodge-podge of pixel sizes, em, rem, and percentage sizes before, this change switches everything to rem, while keeping the same size relative to our old default of 16px.\n\n16px is still the default on most browsers, for users that haven't set a larger or smaller font size.\n\nPart of #59845. Note: this will conflict with #92404. We should merge that first (once it's done) and I'll resolve the merge conflicts.\n\nr? `@GuillaumeGomez`\n\nDemo: https://rustdoc.crud.net/jsha/font-size-access/std/string/struct.String.html", "tree": {"sha": "3b3909ed66b7763b6ae565bfd42d6f65ed4c4085", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b3909ed66b7763b6ae565bfd42d6f65ed4c4085"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh1XI+CRBK7hj4Ov3rIwAA3fQIADeXfvb5kBbhlkpdjME0GtAg\nNVY60vxWrhTc8ZBdTAPknVSZKyEhF71juqFl+GLZLm9FzLYB3OXWs59fO+Q4OLxi\nXfJ2eGMiU5L0ZSIi1ZPsLQqFDBQ1w8JYKzqWNP8D3ZuoTh2QZ1vVin5Q90jRY+YU\nJM/BybVBU06RokVyw6C18t8DFRzHSO4/5yF7W2Dv0nyl6Vk+KZpezh9hA21HqvpV\njg3xyVC/AMsuUBNEMeAHKh90JWhXzvvRNRmBZgJeCHNWTHA4AbksWMGuAvsXZci0\nhnak2h4QsibyOikaxdBUyOxbO7lKiB00eZidLK/9R84nu0xTtt4/u0B1SWTbaWw=\n=hXLT\n-----END PGP SIGNATURE-----\n", "payload": "tree 3b3909ed66b7763b6ae565bfd42d6f65ed4c4085\nparent a0262fdf1f03444bdc836e9605c687377b4a82f5\nparent cc18120425a5c571a968d850c75cc935a8321136\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1641378366 +0100\ncommitter GitHub <noreply@github.com> 1641378366 +0100\n\nRollup merge of #92448 - jsha:font-size-access, r=GuillaumeGomez\n\nSet font size proportional to user's font size\n\nAccording to MDN (https://developer.mozilla.org/en-US/docs/Web/CSS/font-size),\n\n> To maximize accessibility, it is generally best to use values that are relative to the user's default font size.\n\n> Defining font sizes in px is not accessible, because the user cannot change the font size in some browsers.\n\nNote that changing font size (in browser or OS settings) is distinct from the zoom functionality triggered with Ctrl/Cmd-+. Zoom\nfunctionality increases the size of everything on the page, effectively applying a multiplier to all pixel sizes. Font size changes apply to just text.\n\nFor relative font sizes, we could use `em`, as we do in several places already. However that has a problem of \"compounding\" (see MDN article for details). The compounding problem is nicely solved by `rem`, which make font sizes relative to the root element, not the parent element.\n\nSince we were using a hodge-podge of pixel sizes, em, rem, and percentage sizes before, this change switches everything to rem, while keeping the same size relative to our old default of 16px.\n\n16px is still the default on most browsers, for users that haven't set a larger or smaller font size.\n\nPart of #59845. Note: this will conflict with #92404. We should merge that first (once it's done) and I'll resolve the merge conflicts.\n\nr? `@GuillaumeGomez`\n\nDemo: https://rustdoc.crud.net/jsha/font-size-access/std/string/struct.String.html\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e", "html_url": "https://github.com/rust-lang/rust/commit/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0262fdf1f03444bdc836e9605c687377b4a82f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0262fdf1f03444bdc836e9605c687377b4a82f5", "html_url": "https://github.com/rust-lang/rust/commit/a0262fdf1f03444bdc836e9605c687377b4a82f5"}, {"sha": "cc18120425a5c571a968d850c75cc935a8321136", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc18120425a5c571a968d850c75cc935a8321136", "html_url": "https://github.com/rust-lang/rust/commit/cc18120425a5c571a968d850c75cc935a8321136"}], "stats": {"total": 111, "additions": 58, "deletions": 53}, "files": [{"sha": "d82c65398b83584f8340d37226f8782a535d9635", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 58, "deletions": 53, "changes": 111, "blob_url": "https://github.com/rust-lang/rust/blob/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=5bf321f9a42dd0d6492d6a14e46d6c68a29d2e4e", "patch": "@@ -108,7 +108,7 @@ html {\n /* General structure and fonts */\n \n body {\n-\tfont: 16px/1.4 \"Source Serif 4\", NanumBarunGothic, serif;\n+\tfont: 1rem/1.4 \"Source Serif 4\", NanumBarunGothic, serif;\n \tmargin: 0;\n \tposition: relative;\n \n@@ -118,13 +118,13 @@ body {\n }\n \n h1 {\n-\tfont-size: 1.5em;\n+\tfont-size: 1.5rem;\n }\n h2 {\n-\tfont-size: 1.4em;\n+\tfont-size: 1.4rem;\n }\n h3 {\n-\tfont-size: 1.3em;\n+\tfont-size: 1.3rem;\n }\n h1, h2, h3, h4, h5, h6 {\n \tfont-weight: 500;\n@@ -160,10 +160,10 @@ h2,\n \tborder-bottom: 1px solid;\n }\n h3.code-header {\n-\tfont-size: 1.1em;\n+\tfont-size: 1.1rem;\n }\n h4.code-header {\n-\tfont-size: 1em;\n+\tfont-size: 1rem;\n }\n h3.code-header, h4.code-header {\n \tfont-weight: 600;\n@@ -206,7 +206,7 @@ div.impl-items > div:not(.docblock):not(.item-info),\n }\n \n .content ul.crate a.crate {\n-\tfont-size: 16px/1.6;\n+\tfont-size: 1rem/1.6;\n }\n \n ol, ul {\n@@ -317,7 +317,7 @@ li {\n \n nav.sub {\n \tposition: relative;\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n \ttext-transform: uppercase;\n }\n \n@@ -423,7 +423,7 @@ nav.sub {\n \n .sidebar .location {\n \tborder: 1px solid;\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n \tmargin: 30px 10px 20px 10px;\n \ttext-align: center;\n \tword-wrap: break-word;\n@@ -432,7 +432,7 @@ nav.sub {\n }\n \n .sidebar .version {\n-\tfont-size: 15px;\n+\tfont-size: 0.9375rem;\n \ttext-align: center;\n \tborder-bottom: 1px solid;\n \toverflow-wrap: break-word;\n@@ -470,7 +470,7 @@ nav.sub {\n \toverflow: hidden;\n \tline-height: 15px;\n \tpadding: 7px 5px;\n-\tfont-size: 14px;\n+\tfont-size: 0.875rem;\n \tfont-weight: 300;\n \ttransition: border 500ms ease-out;\n }\n@@ -479,7 +479,7 @@ nav.sub {\n \tborder-top: 1px solid;\n \tborder-bottom: 1px solid;\n \ttext-align: center;\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n \tmargin-bottom: 5px;\n \tfont-weight: inherit;\n \tpadding: 0;\n@@ -579,18 +579,18 @@ nav.sub {\n \twhite-space: pre-wrap;\n }\n \n-.top-doc .docblock h2 { font-size: 1.3em; }\n-.top-doc .docblock h3 { font-size: 1.15em; }\n+.top-doc .docblock h2 { font-size: 1.3rem; }\n+.top-doc .docblock h3 { font-size: 1.15rem; }\n .top-doc .docblock h4,\n .top-doc .docblock h5 {\n-\tfont-size: 1.1em;\n+\tfont-size: 1.1rem;\n }\n .top-doc .docblock h6 {\n-\tfont-size: 1em;\n+\tfont-size: 1rem;\n }\n \n-.docblock h5 { font-size: 1em; }\n-.docblock h6 { font-size: 0.95em; }\n+.docblock h5 { font-size: 1rem; }\n+.docblock h6 { font-size: 0.95rem; }\n \n .docblock {\n \tmargin-left: 24px;\n@@ -605,7 +605,7 @@ nav.sub {\n .content .out-of-band {\n \tflex-grow: 0;\n \ttext-align: right;\n-\tfont-size: 23px;\n+\tfont-size: 1.4375rem;\n \tmargin: 0px;\n \tpadding: 0 0 0 12px;\n \tfont-weight: normal;\n@@ -646,7 +646,7 @@ nav.sub {\n .content td { vertical-align: top; }\n .content td:first-child { padding-right: 20px; }\n .content td p:first-child { margin-top: 0; }\n-.content td h1, .content td h2 { margin-left: 0; font-size: 1.1em; }\n+.content td h1, .content td h2 { margin-left: 0; font-size: 1.1rem; }\n .content tr:first-child td { border-top: 0; }\n \n .docblock table {\n@@ -687,15 +687,15 @@ nav.sub {\n .content .multi-column li { width: 100%; display: inline-block; }\n \n .content > .methods > .method {\n-\tfont-size: 1em;\n+\tfont-size: 1rem;\n \tposition: relative;\n }\n /* Shift \"where ...\" part of method or fn definition down a line */\n .content .method .where,\n .content .fn .where,\n .content .where.fmt-newline {\n \tdisplay: block;\n-\tfont-size: 0.8em;\n+\tfont-size: 0.8rem;\n }\n \n .content .methods > div:not(.notable-traits):not(.method) {\n@@ -718,7 +718,7 @@ nav.sub {\n }\n \n .content .item-info code {\n-\tfont-size: 90%;\n+\tfont-size: 0.81rem;\n }\n \n .content .item-info {\n@@ -732,7 +732,7 @@ nav.sub {\n \n .content .item-info::before {\n \tcontent: '\u2b11';\n-\tfont-size: 25px;\n+\tfont-size: 1.5625rem;\n \tposition: absolute;\n \ttop: -6px;\n \tleft: -19px;\n@@ -835,7 +835,7 @@ h2.small-section-header > .anchor {\n \tposition: absolute;\n \ttop: 0;\n \tright: 0;\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n \tfont-weight: normal;\n }\n \n@@ -905,7 +905,7 @@ h2.small-section-header > .anchor {\n \tborder-radius: 1px;\n \tmargin-top: 5px;\n \tpadding: 10px 16px;\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n \ttransition: border-color 300ms ease;\n \ttransition: border-radius 300ms ease-in-out;\n \ttransition: box-shadow 300ms ease-in-out;\n@@ -1000,7 +1000,7 @@ body.blur > :not(#help) {\n #help span.top, #help span.bottom {\n \ttext-align: center;\n \tdisplay: block;\n-\tfont-size: 18px;\n+\tfont-size: 1.125rem;\n \n }\n #help span.top {\n@@ -1030,15 +1030,15 @@ body.blur > :not(#help) {\n .stab {\n \tpadding: 3px;\n \tmargin-bottom: 5px;\n-\tfont-size: 90%;\n+\tfont-size: 0.9rem;\n \tfont-weight: normal;\n }\n .stab p {\n \tdisplay: inline;\n }\n \n .stab .emoji {\n-\tfont-size: 1.2em;\n+\tfont-size: 1.2rem;\n }\n \n /* Black one-pixel outline around emoji shapes */\n@@ -1054,7 +1054,7 @@ body.blur > :not(#help) {\n .import-item .stab {\n \tborder-radius: 3px;\n \tdisplay: inline-block;\n-\tfont-size: 80%;\n+\tfont-size: 0.8rem;\n \tline-height: 1.2;\n \tmargin-bottom: 0;\n \tmargin-left: .3em;\n@@ -1080,7 +1080,7 @@ body.blur > :not(#help) {\n \n .impl-items .srclink, .impl .srclink, .methods .srclink {\n \t/* Override header settings otherwise it's too bold */\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n \tfont-weight: normal;\n }\n \n@@ -1089,7 +1089,7 @@ body.blur > :not(#help) {\n }\n \n .has-srclink {\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n \tmargin-bottom: 12px;\n \t/* Push the src link out to the right edge consistently */\n \tjustify-content: space-between;\n@@ -1120,7 +1120,7 @@ a.test-arrow {\n \tposition: absolute;\n \tpadding: 5px 10px 5px 10px;\n \tborder-radius: 5px;\n-\tfont-size: 130%;\n+\tfont-size: 1.3rem;\n \ttop: 5px;\n \tright: 5px;\n \tz-index: 1;\n@@ -1155,19 +1155,19 @@ a.test-arrow:hover{\n \n .out-of-band > span.since {\n \tposition: initial;\n-\tfont-size: 20px;\n+\tfont-size: 1.25rem;\n \tmargin-right: 5px;\n }\n \n h3.variant {\n \tfont-weight: 600;\n-\tfont-size: 1.1em;\n+\tfont-size: 1.1rem;\n \tmargin-bottom: 10px;\n \tborder-bottom: none;\n }\n \n .sub-variant h4 {\n-\tfont-size: 1em;\n+\tfont-size: 1rem;\n \tfont-weight: 400;\n \tborder-bottom: none;\n \tmargin-top: 0;\n@@ -1227,7 +1227,7 @@ h3.variant {\n \tpadding: 5px 3px 3px 3px;\n \tborder-radius: 6px;\n \tmargin-left: 5px;\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n }\n \n .tooltip.ignore::after {\n@@ -1260,7 +1260,7 @@ h3.variant {\n \n .tooltip.compile_fail, .tooltip.should_panic, .tooltip.ignore {\n \tfont-weight: bold;\n-\tfont-size: 20px;\n+\tfont-size: 1.25rem;\n }\n \n .notable-traits-tooltip {\n@@ -1279,7 +1279,7 @@ h3.variant {\n \tborder-radius: 6px;\n \tmargin-left: 5px;\n \tz-index: 10;\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n \tcursor: default;\n \tposition: absolute;\n \tborder: 1px solid;\n@@ -1299,14 +1299,14 @@ h3.variant {\n .notable-traits .notable {\n \tmargin: 0;\n \tmargin-bottom: 13px;\n-\tfont-size: 19px;\n+\tfont-size: 1.1875rem;\n \tfont-weight: 600;\n }\n \n .notable-traits .docblock code.content{\n \tmargin: 0;\n \tpadding: 0;\n-\tfont-size: 20px;\n+\tfont-size: 1.25rem;\n }\n \n /* Example code has the \"Run\" button that needs to be positioned relative to the pre */\n@@ -1344,7 +1344,7 @@ pre.rust {\n \tfloat: left;\n \twidth: 33.3%;\n \ttext-align: center;\n-\tfont-size: 18px;\n+\tfont-size: 1.125rem;\n \tcursor: pointer;\n \tborder: 0;\n \tborder-top: 2px solid;\n@@ -1357,7 +1357,7 @@ pre.rust {\n \n #titles > button > div.count {\n \tdisplay: inline-block;\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n }\n \n .notable-traits {\n@@ -1384,7 +1384,7 @@ pre.rust {\n \tleft: 0;\n \tcursor: pointer;\n \tfont-weight: bold;\n-\tfont-size: 1.2em;\n+\tfont-size: 1.2rem;\n \tborder-bottom: 1px solid;\n \tdisplay: flex;\n \theight: 40px;\n@@ -1398,7 +1398,7 @@ pre.rust {\n \toverflow: auto;\n }\n #source-sidebar > .title {\n-\tfont-size: 1.5em;\n+\tfont-size: 1.5rem;\n \ttext-align: center;\n \tborder-bottom: 1px solid;\n \tmargin-bottom: 6px;\n@@ -1426,6 +1426,9 @@ pre.rust {\n \n #theme-picker, #settings-menu, #help-button, #copy-path {\n \tpadding: 4px;\n+\t/* Rare exception to specifying font sizes in rem. Since these are acting\n+\t   as icons, it's okay to specify their sizes in pixels. */\n+\tfont-size: 16px;\n \twidth: 27px;\n \theight: 29px;\n \tborder: 1px solid;\n@@ -1437,7 +1440,9 @@ pre.rust {\n \tright: 30px;\n \tfont-family: \"Fira Sans\", Arial, sans-serif;\n \ttext-align: center;\n-\tfont-size: 17px;\n+\t/* Rare exception to specifying font sizes in rem. Since this is acting\n+\t   as an icon, it's okay to specify their sizes in pixels. */\n+\tfont-size: 16px;\n \tpadding-top: 2px;\n }\n \n@@ -1499,7 +1504,7 @@ kbd {\n \tborder: 0;\n \tborder-collapse: collapse;\n \tborder-spacing: 0;\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n }\n \n .table-display tr td:first-child {\n@@ -1511,11 +1516,11 @@ kbd {\n }\n .table-display .out-of-band {\n \tposition: relative;\n-\tfont-size: 19px;\n+\tfont-size: 1.1875rem;\n \tdisplay: block;\n }\n #implementors-list > .impl-items .table-display .out-of-band {\n-\tfont-size: 17px;\n+\tfont-size: 1.0625rem;\n }\n \n .table-display td:hover .anchor {\n@@ -1557,7 +1562,7 @@ div.name.expand + .children {\n div.name::before {\n \tcontent: \"\\25B6\";\n \tpadding-left: 4px;\n-\tfont-size: 0.7em;\n+\tfont-size: 0.7rem;\n \tposition: absolute;\n \tleft: -16px;\n \ttop: 4px;\n@@ -1624,7 +1629,7 @@ details.rustdoc-toggle.top-doc > summary::before,\n details.rustdoc-toggle.non-exhaustive > summary,\n details.rustdoc-toggle.non-exhaustive > summary::before {\n \tfont-family: 'Fira Sans';\n-\tfont-size: 16px;\n+\tfont-size: 1rem;\n }\n \n details.non-exhaustive {\n@@ -1768,7 +1773,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tmin-height: 39px;\n \t\tbackground: inherit;\n \t\ttext-align: left;\n-\t\tfont-size: 24px;\n+\t\tfont-size: 1.5rem;\n \t}\n \n \t.sidebar .location:empty {\n@@ -1909,7 +1914,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t}\n \n \t.show-it > .block.items > ul > li > a {\n-\t\tfont-size: 21px;\n+\t\tfont-size: 1.3125rem;\n \t}\n \n \t/* Because of ios, we need to actually have a full height sidebar title so the"}]}