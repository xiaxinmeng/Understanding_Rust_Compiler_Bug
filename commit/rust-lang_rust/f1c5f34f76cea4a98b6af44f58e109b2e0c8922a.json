{"sha": "f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "node_id": "C_kwDOAAsO6NoAKGYxYzVmMzRmNzZjZWE0YTk4YjZhZjQ0ZjU4ZTEwOWIyZTBjODkyMmE", "commit": {"author": {"name": "ouz-a", "email": "oguz.agcayazi@gmail.com", "date": "2022-04-27T22:03:07Z"}, "committer": {"name": "ouz-a", "email": "oguz.agcayazi@gmail.com", "date": "2022-04-29T11:42:24Z"}, "message": "exp-stuff-dirty", "tree": {"sha": "b200e9c55f97d8f2bdefdaeb23dcf042c4831331", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b200e9c55f97d8f2bdefdaeb23dcf042c4831331"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "html_url": "https://github.com/rust-lang/rust/commit/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/comments", "author": {"login": "ouz-a", "id": 90461915, "node_id": "MDQ6VXNlcjkwNDYxOTE1", "avatar_url": "https://avatars.githubusercontent.com/u/90461915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ouz-a", "html_url": "https://github.com/ouz-a", "followers_url": "https://api.github.com/users/ouz-a/followers", "following_url": "https://api.github.com/users/ouz-a/following{/other_user}", "gists_url": "https://api.github.com/users/ouz-a/gists{/gist_id}", "starred_url": "https://api.github.com/users/ouz-a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ouz-a/subscriptions", "organizations_url": "https://api.github.com/users/ouz-a/orgs", "repos_url": "https://api.github.com/users/ouz-a/repos", "events_url": "https://api.github.com/users/ouz-a/events{/privacy}", "received_events_url": "https://api.github.com/users/ouz-a/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ouz-a", "id": 90461915, "node_id": "MDQ6VXNlcjkwNDYxOTE1", "avatar_url": "https://avatars.githubusercontent.com/u/90461915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ouz-a", "html_url": "https://github.com/ouz-a", "followers_url": "https://api.github.com/users/ouz-a/followers", "following_url": "https://api.github.com/users/ouz-a/following{/other_user}", "gists_url": "https://api.github.com/users/ouz-a/gists{/gist_id}", "starred_url": "https://api.github.com/users/ouz-a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ouz-a/subscriptions", "organizations_url": "https://api.github.com/users/ouz-a/orgs", "repos_url": "https://api.github.com/users/ouz-a/repos", "events_url": "https://api.github.com/users/ouz-a/events{/privacy}", "received_events_url": "https://api.github.com/users/ouz-a/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e7915d11f6888f005e78c2358fcdc48ff655753", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e7915d11f6888f005e78c2358fcdc48ff655753", "html_url": "https://github.com/rust-lang/rust/commit/0e7915d11f6888f005e78c2358fcdc48ff655753"}], "stats": {"total": 206, "additions": 65, "deletions": 141}, "files": [{"sha": "e042e57acf1f55ecff8ed32a0b00a8924cd44b5b", "filename": "compiler/rustc_middle/src/mir/mod.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fmod.rs?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -1079,6 +1079,8 @@ pub enum LocalInfo<'tcx> {\n     /// A temporary created during the creation of an aggregate\n     /// (e.g. a temporary for `foo` in `MyStruct { my_field: foo }`)\n     AggregateTemp,\n+    /// A temporary created during the pass `Derefer` to avoid it's retagging\n+    Temp,\n }\n \n impl<'tcx> LocalDecl<'tcx> {\n@@ -1178,6 +1180,10 @@ impl<'tcx> LocalDecl<'tcx> {\n         }\n     }\n \n+    pub fn temp(mut self) {\n+        self.local_info = Some(Box::new(LocalInfo::Temp));\n+    }\n+\n     /// Converts `self` into same `LocalDecl` except tagged as internal.\n     #[inline]\n     pub fn internal(mut self) -> Self {"}, {"sha": "708ea53eb1ac2cc35f43a8cfe9cc7d5918e5dbf1", "filename": "compiler/rustc_middle/src/mir/patch.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fpatch.rs?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -78,6 +78,15 @@ impl<'tcx> MirPatch<'tcx> {\n         Location { block: bb, statement_index: offset }\n     }\n \n+    pub fn new_local_temp(&mut self, ty: Ty<'tcx>, span: Span) -> Local {\n+        let index = self.next_local;\n+        self.next_local += 1;\n+        let mut new_decl = LocalDecl::new(ty, span);\n+        new_decl.local_info = Some(Box::new(LocalInfo::Temp));\n+        self.new_locals.push(new_decl);\n+        Local::new(index as usize)\n+    }\n+\n     pub fn new_temp(&mut self, ty: Ty<'tcx>, span: Span) -> Local {\n         let index = self.next_local;\n         self.next_local += 1;"}, {"sha": "ff4cd477326725f9a987b76cc5ca243f3046bded", "filename": "compiler/rustc_mir_transform/src/add_retag.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Fadd_retag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Fadd_retag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Fadd_retag.rs?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -57,6 +57,17 @@ fn may_be_reference(ty: Ty<'_>) -> bool {\n     }\n }\n \n+/// Determines whether or not this LocalDecl is temp, if not it needs retagging.\n+fn is_not_temp<'tcx>(local_decl: &LocalDecl<'tcx>) -> bool {\n+    if local_decl.local_info.is_some() {\n+        match local_decl.local_info.as_ref().unwrap().as_ref() {\n+            LocalInfo::Temp => return false,\n+            _ => (),\n+        };\n+    }\n+    return true;\n+}\n+\n impl<'tcx> MirPass<'tcx> for AddRetag {\n     fn is_enabled(&self, sess: &rustc_session::Session) -> bool {\n         sess.opts.debugging_opts.mir_emit_retag\n@@ -71,7 +82,9 @@ impl<'tcx> MirPass<'tcx> for AddRetag {\n         let needs_retag = |place: &Place<'tcx>| {\n             // FIXME: Instead of giving up for unstable places, we should introduce\n             // a temporary and retag on that.\n-            is_stable(place.as_ref()) && may_be_reference(place.ty(&*local_decls, tcx).ty)\n+            is_stable(place.as_ref())\n+                && may_be_reference(place.ty(&*local_decls, tcx).ty)\n+                && is_not_temp(&local_decls[place.local])\n         };\n         let place_base_raw = |place: &Place<'tcx>| {\n             // If this is a `Deref`, get the type of what we are deref'ing."}, {"sha": "afaab6e9a35d01777803259617355feeec8038a3", "filename": "compiler/rustc_mir_transform/src/deref_separator.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Fderef_separator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Fderef_separator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Fderef_separator.rs?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -34,20 +34,20 @@ impl<'tcx> MutVisitor<'tcx> for DerefChecker<'tcx> {\n             if p_elem == ProjectionElem::Deref && !p_ref.projection.is_empty() {\n                 let ty = p_ref.ty(&self.local_decls, self.tcx).ty;\n                 let temp =\n-                    self.patcher.new_temp(ty, self.local_decls[p_ref.local].source_info.span);\n+                    self.patcher.new_local_temp(ty, self.local_decls[p_ref.local].source_info.span);\n \n                 self.patcher.add_statement(loc, StatementKind::StorageLive(temp));\n \n                 // We are adding current p_ref's projections to our\n                 // temp value, excluding projections we already covered.\n                 let deref_place = Place::from(place_local)\n                     .project_deeper(&p_ref.projection[last_len..], self.tcx);\n+\n                 self.patcher.add_assign(\n                     loc,\n                     Place::from(temp),\n                     Rvalue::Use(Operand::Move(deref_place)),\n                 );\n-\n                 place_local = temp;\n                 last_len = p_ref.projection.len();\n \n@@ -58,7 +58,7 @@ impl<'tcx> MutVisitor<'tcx> for DerefChecker<'tcx> {\n                     *place = temp_place;\n                 }\n \n-                // We are destroying last temp since it's no longer used.\n+                // We are destroying the previous temp since it's no longer used.\n                 if let Some(prev_temp) = prev_temp {\n                     self.patcher.add_statement(loc, StatementKind::StorageDead(prev_temp));\n                 }"}, {"sha": "40cc6dafe6177c11aecc7e93df64baff07895c7d", "filename": "compiler/rustc_mir_transform/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -426,13 +426,13 @@ fn run_post_borrowck_cleanup_passes<'tcx>(tcx: TyCtxt<'tcx>, body: &mut Body<'tc\n         &add_moves_for_packed_drops::AddMovesForPackedDrops,\n         // `AddRetag` needs to run after `ElaborateDrops`. Otherwise it should run fairly late,\n         // but before optimizations begin.\n+        &deref_separator::Derefer,\n         &add_retag::AddRetag,\n         &lower_intrinsics::LowerIntrinsics,\n         &simplify::SimplifyCfg::new(\"elaborate-drops\"),\n         // `Deaggregator` is conceptually part of MIR building, some backends rely on it happening\n         // and it can help optimizations.\n         &deaggregator::Deaggregator,\n-        &deref_separator::Derefer,\n         &Lint(const_prop_lint::ConstProp),\n     ];\n "}, {"sha": "f5eabf8696796588e1132feb6427263bfadb336f", "filename": "src/test/mir-opt/derefer_complex_case.main.Derefer.diff", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_complex_case.main.Derefer.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -102,10 +102,10 @@\n           StorageDead(_6);                 // scope 1 at $DIR/derefer_complex_case.rs:4:39: 4:40\n           _5 = const ();                   // scope 1 at $DIR/derefer_complex_case.rs:4:5: 4:40\n           goto -> bb2;                     // scope 1 at $DIR/derefer_complex_case.rs:4:5: 4:40\n-+     }\n-+ \n-+     bb8 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_complex_case.rs:3:1: 5:2\n+      }\n+  \n+      bb8 (cleanup): {\n+          resume;                          // scope 0 at $DIR/derefer_complex_case.rs:3:1: 5:2\n       }\n   }\n   "}, {"sha": "8b91a65bf3d7dbf6838d5e29694b1f94e3ad80ad", "filename": "src/test/mir-opt/derefer_terminator_test.main.Derefer.diff", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_terminator_test.main.Derefer.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -94,10 +94,10 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_terminator_test.rs:10:1: 10:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_terminator_test.rs:10:1: 10:2\n           return;                          // scope 0 at $DIR/derefer_terminator_test.rs:10:2: 10:2\n-+     }\n-+ \n-+     bb6 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_terminator_test.rs:2:1: 10:2\n+      }\n+  \n+      bb6 (cleanup): {\n+          resume;                          // scope 0 at $DIR/derefer_terminator_test.rs:2:1: 10:2\n       }\n   }\n   "}, {"sha": "84476aeed7a6ca3eb2a8105e1c635ce231008db9", "filename": "src/test/mir-opt/derefer_test.main.Derefer.diff", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_test.main.Derefer.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -25,15 +25,11 @@\n   \n       bb0: {\n           StorageLive(_1);                 // scope 0 at $DIR/derefer_test.rs:3:9: 3:14\n-          Deinit(_1);                      // scope 0 at $DIR/derefer_test.rs:3:17: 3:24\n-          (_1.0: i32) = const 42_i32;      // scope 0 at $DIR/derefer_test.rs:3:17: 3:24\n-          (_1.1: i32) = const 43_i32;      // scope 0 at $DIR/derefer_test.rs:3:17: 3:24\n+          _1 = (const 42_i32, const 43_i32); // scope 0 at $DIR/derefer_test.rs:3:17: 3:24\n           StorageLive(_2);                 // scope 1 at $DIR/derefer_test.rs:4:9: 4:14\n           StorageLive(_3);                 // scope 1 at $DIR/derefer_test.rs:4:22: 4:28\n           _3 = &mut _1;                    // scope 1 at $DIR/derefer_test.rs:4:22: 4:28\n-          Deinit(_2);                      // scope 1 at $DIR/derefer_test.rs:4:17: 4:29\n-          (_2.0: i32) = const 99_i32;      // scope 1 at $DIR/derefer_test.rs:4:17: 4:29\n-          (_2.1: &mut (i32, i32)) = move _3; // scope 1 at $DIR/derefer_test.rs:4:17: 4:29\n+          _2 = (const 99_i32, move _3);    // scope 1 at $DIR/derefer_test.rs:4:17: 4:29\n           StorageDead(_3);                 // scope 1 at $DIR/derefer_test.rs:4:28: 4:29\n           StorageLive(_4);                 // scope 2 at $DIR/derefer_test.rs:5:9: 5:10\n -         _4 = &mut ((*(_2.1: &mut (i32, i32))).0: i32); // scope 2 at $DIR/derefer_test.rs:5:13: 5:26\n@@ -53,10 +49,10 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_test.rs:7:1: 7:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_test.rs:7:1: 7:2\n           return;                          // scope 0 at $DIR/derefer_test.rs:7:2: 7:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_test.rs:2:1: 7:2\n+      }\n+  \n+      bb1 (cleanup): {\n+          resume;                          // scope 0 at $DIR/derefer_test.rs:2:1: 7:2\n       }\n   }\n   "}, {"sha": "b8e5a0c328f4d490ad1d9beab2d43a01e5c74229", "filename": "src/test/mir-opt/derefer_test_multiple.main.Derefer.diff", "status": "modified", "additions": 8, "deletions": 16, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fderefer_test_multiple.main.Derefer.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -39,29 +39,21 @@\n   \n       bb0: {\n           StorageLive(_1);                 // scope 0 at $DIR/derefer_test_multiple.rs:3:9: 3:14\n-          Deinit(_1);                      // scope 0 at $DIR/derefer_test_multiple.rs:3:17: 3:25\n-          (_1.0: i32) = const 42_i32;      // scope 0 at $DIR/derefer_test_multiple.rs:3:17: 3:25\n-          (_1.1: i32) = const 43_i32;      // scope 0 at $DIR/derefer_test_multiple.rs:3:17: 3:25\n+          _1 = (const 42_i32, const 43_i32); // scope 0 at $DIR/derefer_test_multiple.rs:3:17: 3:25\n           StorageLive(_2);                 // scope 1 at $DIR/derefer_test_multiple.rs:4:9: 4:14\n           StorageLive(_3);                 // scope 1 at $DIR/derefer_test_multiple.rs:4:22: 4:28\n           _3 = &mut _1;                    // scope 1 at $DIR/derefer_test_multiple.rs:4:22: 4:28\n-          Deinit(_2);                      // scope 1 at $DIR/derefer_test_multiple.rs:4:17: 4:29\n-          (_2.0: i32) = const 99_i32;      // scope 1 at $DIR/derefer_test_multiple.rs:4:17: 4:29\n-          (_2.1: &mut (i32, i32)) = move _3; // scope 1 at $DIR/derefer_test_multiple.rs:4:17: 4:29\n+          _2 = (const 99_i32, move _3);    // scope 1 at $DIR/derefer_test_multiple.rs:4:17: 4:29\n           StorageDead(_3);                 // scope 1 at $DIR/derefer_test_multiple.rs:4:28: 4:29\n           StorageLive(_4);                 // scope 2 at $DIR/derefer_test_multiple.rs:5:9: 5:14\n           StorageLive(_5);                 // scope 2 at $DIR/derefer_test_multiple.rs:5:22: 5:28\n           _5 = &mut _2;                    // scope 2 at $DIR/derefer_test_multiple.rs:5:22: 5:28\n-          Deinit(_4);                      // scope 2 at $DIR/derefer_test_multiple.rs:5:17: 5:29\n-          (_4.0: i32) = const 11_i32;      // scope 2 at $DIR/derefer_test_multiple.rs:5:17: 5:29\n-          (_4.1: &mut (i32, &mut (i32, i32))) = move _5; // scope 2 at $DIR/derefer_test_multiple.rs:5:17: 5:29\n+          _4 = (const 11_i32, move _5);    // scope 2 at $DIR/derefer_test_multiple.rs:5:17: 5:29\n           StorageDead(_5);                 // scope 2 at $DIR/derefer_test_multiple.rs:5:28: 5:29\n           StorageLive(_6);                 // scope 3 at $DIR/derefer_test_multiple.rs:6:9: 6:14\n           StorageLive(_7);                 // scope 3 at $DIR/derefer_test_multiple.rs:6:22: 6:28\n           _7 = &mut _4;                    // scope 3 at $DIR/derefer_test_multiple.rs:6:22: 6:28\n-          Deinit(_6);                      // scope 3 at $DIR/derefer_test_multiple.rs:6:17: 6:29\n-          (_6.0: i32) = const 13_i32;      // scope 3 at $DIR/derefer_test_multiple.rs:6:17: 6:29\n-          (_6.1: &mut (i32, &mut (i32, &mut (i32, i32)))) = move _7; // scope 3 at $DIR/derefer_test_multiple.rs:6:17: 6:29\n+          _6 = (const 13_i32, move _7);    // scope 3 at $DIR/derefer_test_multiple.rs:6:17: 6:29\n           StorageDead(_7);                 // scope 3 at $DIR/derefer_test_multiple.rs:6:28: 6:29\n           StorageLive(_8);                 // scope 4 at $DIR/derefer_test_multiple.rs:7:9: 7:10\n -         _8 = &mut ((*((*((*(_6.1: &mut (i32, &mut (i32, &mut (i32, i32))))).1: &mut (i32, &mut (i32, i32)))).1: &mut (i32, i32))).1: i32); // scope 4 at $DIR/derefer_test_multiple.rs:7:13: 7:30\n@@ -95,10 +87,10 @@\n           StorageDead(_2);                 // scope 1 at $DIR/derefer_test_multiple.rs:9:1: 9:2\n           StorageDead(_1);                 // scope 0 at $DIR/derefer_test_multiple.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/derefer_test_multiple.rs:9:2: 9:2\n-+     }\n-+ \n-+     bb1 (cleanup): {\n-+         resume;                          // scope 0 at $DIR/derefer_test_multiple.rs:2:1: 9:2\n+      }\n+  \n+      bb1 (cleanup): {\n+          resume;                          // scope 0 at $DIR/derefer_test_multiple.rs:2:1: 9:2\n       }\n   }\n   "}, {"sha": "e40274dc393401734ba33a5a1a4b2e30c1f142b1", "filename": "src/test/mir-opt/early_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt1.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -68,10 +68,8 @@\n +     bb3: {\n           StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:8:1: 8:2\n           return;                          // scope 0 at $DIR/early_otherwise_branch.rs:8:2: 8:2\n-      }\n-  \n--     bb5 (cleanup): {\n--         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:3:1: 8:2\n++     }\n++ \n +     bb4: {\n +         StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:4:5: 4:17\n +         switchInt(_7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:4:5: 4:17"}, {"sha": "1cdd97ab283bc813d3bde8e3d8b276f1e1b1c0bf", "filename": "src/test/mir-opt/early_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt2.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -82,10 +82,8 @@\n +     bb4: {\n           StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:17:1: 17:2\n           return;                          // scope 0 at $DIR/early_otherwise_branch.rs:17:2: 17:2\n-      }\n-  \n--     bb7 (cleanup): {\n--         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:11:1: 17:2\n++     }\n++ \n +     bb5: {\n +         StorageDead(_12);                // scope 0 at $DIR/early_otherwise_branch.rs:12:5: 12:17\n +         switchInt(_8) -> [0_isize: bb3, 1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:12:5: 12:17"}, {"sha": "96c7e46853f145d994797691c16b078868156316", "filename": "src/test/mir-opt/early_otherwise_branch.opt3.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt3.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt3.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.opt3.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -68,10 +68,8 @@\n +     bb3: {\n           StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch.rs:26:1: 26:2\n           return;                          // scope 0 at $DIR/early_otherwise_branch.rs:26:2: 26:2\n-      }\n-  \n--     bb5 (cleanup): {\n--         resume;                          // scope 0 at $DIR/early_otherwise_branch.rs:21:1: 26:2\n++     }\n++ \n +     bb4: {\n +         StorageDead(_11);                // scope 0 at $DIR/early_otherwise_branch.rs:22:5: 22:17\n +         switchInt(_7) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch.rs:22:5: 22:17"}, {"sha": "379d0e9ea48b38ff83254fe909f836fa8a0c1e46", "filename": "src/test/mir-opt/early_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -90,10 +90,8 @@\n +     bb4: {\n           StorageDead(_4);                 // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:9:2: 9:2\n-      }\n-  \n--     bb6 (cleanup): {\n--         resume;                          // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:4:1: 9:2\n++     }\n++ \n +     bb5: {\n +         StorageDead(_15);                // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:5: 5:20\n +         switchInt(_10) -> [1_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/early_otherwise_branch_3_element_tuple.rs:5:5: 5:20"}, {"sha": "848f2feb32125aaa99da7ee1a30f33510b615068", "filename": "src/test/mir-opt/early_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_noopt.noopt1.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -91,9 +91,5 @@\n           StorageDead(_3);                 // scope 0 at $DIR/early_otherwise_branch_noopt.rs:14:1: 14:2\n           return;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:14:2: 14:2\n       }\n-  \n-      bb9 (cleanup): {\n-          resume;                          // scope 0 at $DIR/early_otherwise_branch_noopt.rs:7:1: 14:2\n-      }\n   }\n   "}, {"sha": "7d42c772f160ae04a72b2f18b427fc5204f2d8d9", "filename": "src/test/mir-opt/early_otherwise_branch_soundness.no_deref_ptr.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_deref_ptr.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_deref_ptr.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_deref_ptr.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -43,9 +43,5 @@\n       bb5: {\n           return;                          // scope 0 at $DIR/early_otherwise_branch_soundness.rs:27:2: 27:2\n       }\n-  \n-      bb6 (cleanup): {\n-          resume;                          // scope 0 at $DIR/early_otherwise_branch_soundness.rs:18:1: 27:2\n-      }\n   }\n   "}, {"sha": "1efaba044ecf1bca44392f70ed61fef63ae84a88", "filename": "src/test/mir-opt/early_otherwise_branch_soundness.no_downcast.EarlyOtherwiseBranch.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_downcast.EarlyOtherwiseBranch.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_downcast.EarlyOtherwiseBranch.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_soundness.no_downcast.EarlyOtherwiseBranch.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -34,9 +34,5 @@\n       bb4: {\n           return;                          // scope 0 at $DIR/early_otherwise_branch_soundness.rs:14:2: 14:2\n       }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/early_otherwise_branch_soundness.rs:12:1: 14:2\n-      }\n   }\n   "}, {"sha": "dddb7acae2b2c21c7bf8e4479051b1700b043f6f", "filename": "src/test/mir-opt/if_condition_int.dont_opt_bool.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_bool.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_bool.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_bool.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -26,9 +26,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:17:25: 17:26\n           return;                          // scope 0 at $DIR/if-condition-int.rs:18:2: 18:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:16:1: 18:2\n-      }\n   }\n   "}, {"sha": "2ff8386b205bd024894f9bfe903e0b4712ede733", "filename": "src/test/mir-opt/if_condition_int.dont_opt_floats.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_floats.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_floats.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_opt_floats.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -30,9 +30,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:53:34: 53:35\n           return;                          // scope 0 at $DIR/if-condition-int.rs:54:2: 54:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:52:1: 54:2\n-      }\n   }\n   "}, {"sha": "fd4dcb2265e61df2a0530bb17aca2151e9b61cf8", "filename": "src/test/mir-opt/if_condition_int.dont_remove_comparison.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_remove_comparison.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_remove_comparison.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.dont_remove_comparison.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -54,9 +54,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:49:1: 49:2\n           return;                          // scope 0 at $DIR/if-condition-int.rs:49:2: 49:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:43:1: 49:2\n-      }\n   }\n   "}, {"sha": "40de48385f02e3894129090d91eb2557ad08b780", "filename": "src/test/mir-opt/if_condition_int.opt_char.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_char.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_char.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_char.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -35,9 +35,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:21:32: 21:33\n           return;                          // scope 0 at $DIR/if-condition-int.rs:22:2: 22:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:20:1: 22:2\n-      }\n   }\n   "}, {"sha": "28c36aed84c38270a3b9a705a4e2965416db6a21", "filename": "src/test/mir-opt/if_condition_int.opt_i8.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_i8.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_i8.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_i8.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -35,9 +35,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:25:31: 25:32\n           return;                          // scope 0 at $DIR/if-condition-int.rs:26:2: 26:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:24:1: 26:2\n-      }\n   }\n   "}, {"sha": "55932fee9600cb28a3644461026d20246356ee7e", "filename": "src/test/mir-opt/if_condition_int.opt_multiple_ifs.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_multiple_ifs.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_multiple_ifs.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_multiple_ifs.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -61,9 +61,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:39:5: 39:6\n           return;                          // scope 0 at $DIR/if-condition-int.rs:40:2: 40:2\n       }\n-  \n-      bb7 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:32:1: 40:2\n-      }\n   }\n   "}, {"sha": "c4574b32a59991f086505352cc870fee9c1a7dac", "filename": "src/test/mir-opt/if_condition_int.opt_negative.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_negative.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_negative.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_negative.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -35,9 +35,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:29:32: 29:33\n           return;                          // scope 0 at $DIR/if-condition-int.rs:30:2: 30:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:28:1: 30:2\n-      }\n   }\n   "}, {"sha": "88d9d5622b8ec060a8d3ff45fcb66d7db8069218", "filename": "src/test/mir-opt/if_condition_int.opt_u32.SimplifyComparisonIntegral.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_u32.SimplifyComparisonIntegral.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_u32.SimplifyComparisonIntegral.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fif_condition_int.opt_u32.SimplifyComparisonIntegral.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -35,9 +35,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/if-condition-int.rs:12:31: 12:32\n           return;                          // scope 0 at $DIR/if-condition-int.rs:13:2: 13:2\n       }\n-  \n-      bb4 (cleanup): {\n-          resume;                          // scope 0 at $DIR/if-condition-int.rs:11:1: 13:2\n-      }\n   }\n   "}, {"sha": "d6c1c92cd9177a273a7b11cbefd73ffe7c1c41e9", "filename": "src/test/mir-opt/lower_array_len.array_bound.NormalizeArrayLen.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound.NormalizeArrayLen.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound.NormalizeArrayLen.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound.NormalizeArrayLen.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -64,9 +64,5 @@\n           StorageDead(_3);                 // scope 0 at $DIR/lower_array_len.rs:11:5: 11:6\n           return;                          // scope 0 at $DIR/lower_array_len.rs:12:2: 12:2\n       }\n-  \n-      bb6 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_array_len.rs:6:1: 12:2\n-      }\n   }\n   "}, {"sha": "11fc20aa693c71c18ffdefdf6fc62e68cac6d5d8", "filename": "src/test/mir-opt/lower_array_len.array_bound_mut.NormalizeArrayLen.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound_mut.NormalizeArrayLen.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound_mut.NormalizeArrayLen.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_array_len.array_bound_mut.NormalizeArrayLen.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -77,9 +77,5 @@\n           StorageDead(_3);                 // scope 0 at $DIR/lower_array_len.rs:24:5: 24:6\n           return;                          // scope 0 at $DIR/lower_array_len.rs:25:2: 25:2\n       }\n-  \n-      bb7 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_array_len.rs:17:1: 25:2\n-      }\n   }\n   "}, {"sha": "892fdda818ebd1694eeec93f89235b3f50c1bd4b", "filename": "src/test/mir-opt/lower_array_len.array_len.NormalizeArrayLen.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len.NormalizeArrayLen.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len.NormalizeArrayLen.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len.NormalizeArrayLen.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -26,9 +26,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/lower_array_len.rs:31:13: 31:14\n           return;                          // scope 0 at $DIR/lower_array_len.rs:32:2: 32:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_array_len.rs:30:1: 32:2\n-      }\n   }\n   "}, {"sha": "201fffbf0d45a5752960262c671d39009d88f8b5", "filename": "src/test/mir-opt/lower_array_len.array_len_by_value.NormalizeArrayLen.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len_by_value.NormalizeArrayLen.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len_by_value.NormalizeArrayLen.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_array_len.array_len_by_value.NormalizeArrayLen.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -26,9 +26,5 @@\n           StorageDead(_2);                 // scope 0 at $DIR/lower_array_len.rs:38:13: 38:14\n           return;                          // scope 0 at $DIR/lower_array_len.rs:39:2: 39:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_array_len.rs:37:1: 39:2\n-      }\n   }\n   "}, {"sha": "13241d882f21087cbf63a9d2ec1b8ea4e2935bfc", "filename": "src/test/mir-opt/lower_slice_len.bound.LowerSliceLenCalls.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_slice_len.bound.LowerSliceLenCalls.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Flower_slice_len.bound.LowerSliceLenCalls.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_slice_len.bound.LowerSliceLenCalls.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -59,9 +59,5 @@\n           StorageDead(_3);                 // scope 0 at $DIR/lower_slice_len.rs:9:5: 9:6\n           return;                          // scope 0 at $DIR/lower_slice_len.rs:10:2: 10:2\n       }\n-  \n-      bb6 (cleanup): {\n-          resume;                          // scope 0 at $DIR/lower_slice_len.rs:4:1: 10:2\n-      }\n   }\n   "}, {"sha": "f438eaa002780958f07d88a70f123bd229129de0", "filename": "src/test/mir-opt/nrvo_simple.nrvo.RenameReturnPlace.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fnrvo_simple.nrvo.RenameReturnPlace.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Fnrvo_simple.nrvo.RenameReturnPlace.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fnrvo_simple.nrvo.RenameReturnPlace.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -39,9 +39,5 @@\n -         StorageDead(_2);                 // scope 0 at $DIR/nrvo-simple.rs:8:1: 8:2\n           return;                          // scope 0 at $DIR/nrvo-simple.rs:8:2: 8:2\n       }\n-  \n-      bb2 (cleanup): {\n-          resume;                          // scope 0 at $DIR/nrvo-simple.rs:4:1: 8:2\n-      }\n   }\n   "}, {"sha": "7e843b65e88fc77375c808f25ad8ac05a84fb7db", "filename": "src/test/mir-opt/uninhabited_fallthrough_elimination.eliminate_fallthrough.UninhabitedEnumBranching.diff", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.eliminate_fallthrough.UninhabitedEnumBranching.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.eliminate_fallthrough.UninhabitedEnumBranching.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.eliminate_fallthrough.UninhabitedEnumBranching.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -9,7 +9,7 @@\n       bb0: {\n           _2 = discriminant(_1);           // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:22:11: 22:12\n -         switchInt(move _2) -> [1_isize: bb3, 2_isize: bb2, otherwise: bb1]; // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:22:5: 22:12\n-+         switchInt(move _2) -> [1_isize: bb3, 2_isize: bb2, otherwise: bb6]; // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:22:5: 22:12\n++         switchInt(move _2) -> [1_isize: bb3, 2_isize: bb2, otherwise: bb5]; // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:22:5: 22:12\n       }\n   \n       bb1: {\n@@ -29,13 +29,9 @@\n   \n       bb4: {\n           return;                          // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:27:2: 27:2\n-      }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:21:1: 27:2\n +     }\n + \n-+     bb6: {\n++     bb5: {\n +         unreachable;                     // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:25:14: 25:15\n       }\n   }"}, {"sha": "5da011d427a2caefb6ce0318854fc6327ed14f7e", "filename": "src/test/mir-opt/uninhabited_fallthrough_elimination.keep_fallthrough.UninhabitedEnumBranching.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.keep_fallthrough.UninhabitedEnumBranching.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.keep_fallthrough.UninhabitedEnumBranching.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funinhabited_fallthrough_elimination.keep_fallthrough.UninhabitedEnumBranching.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -30,9 +30,5 @@\n       bb4: {\n           return;                          // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:18:2: 18:2\n       }\n-  \n-      bb5 (cleanup): {\n-          resume;                          // scope 0 at $DIR/uninhabited_fallthrough_elimination.rs:12:1: 18:2\n-      }\n   }\n   "}, {"sha": "08312bde20f51e00eae57c4941705a906efec44e", "filename": "src/test/mir-opt/unreachable.main.UnreachablePropagation.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funreachable.main.UnreachablePropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funreachable.main.UnreachablePropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funreachable.main.UnreachablePropagation.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -64,10 +64,6 @@\n           _0 = const ();                   // scope 0 at $DIR/unreachable.rs:19:6: 19:6\n           StorageDead(_1);                 // scope 0 at $DIR/unreachable.rs:20:1: 20:2\n           return;                          // scope 0 at $DIR/unreachable.rs:20:2: 20:2\n--     }\n-- \n--     bb7 (cleanup): {\n--         resume;                          // scope 0 at $DIR/unreachable.rs:8:1: 20:2\n       }\n   }\n   "}, {"sha": "e5867ccfc5cb6c13d5771cf6f65a93126122cbae", "filename": "src/test/mir-opt/unreachable_diverging.main.UnreachablePropagation.diff", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funreachable_diverging.main.UnreachablePropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/f1c5f34f76cea4a98b6af44f58e109b2e0c8922a/src%2Ftest%2Fmir-opt%2Funreachable_diverging.main.UnreachablePropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funreachable_diverging.main.UnreachablePropagation.diff?ref=f1c5f34f76cea4a98b6af44f58e109b2e0c8922a", "patch": "@@ -69,10 +69,6 @@\n           StorageDead(_1);                 // scope 0 at $DIR/unreachable_diverging.rs:20:1: 20:2\n           StorageDead(_2);                 // scope 0 at $DIR/unreachable_diverging.rs:20:1: 20:2\n           return;                          // scope 0 at $DIR/unreachable_diverging.rs:20:2: 20:2\n--     }\n-- \n--     bb7 (cleanup): {\n--         resume;                          // scope 0 at $DIR/unreachable_diverging.rs:12:1: 20:2\n       }\n   }\n   "}]}