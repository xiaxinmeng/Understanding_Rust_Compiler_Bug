{"sha": "d4ed060a8fc02c915365235890a31be7b4a77930", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0ZWQwNjBhOGZjMDJjOTE1MzY1MjM1ODkwYTMxYmU3YjRhNzc5MzA=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-07T16:59:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-07T16:59:42Z"}, "message": "Rollup merge of #35417 - Limeth:master, r=jonathandturner\n\nE0131 updated to new format\n\nChanges\n```\nerror[E0131]: main function is not allowed to have type parameters\n  --> src/test/compile-fail/E0131.rs:11:1\n   |\n11 | fn main<T>() { //~ ERROR E0131\n   | ^\n```\nto\n```\nerror[E0131]: main function is not allowed to have type parameters\n  --> src/test/compile-fail/E0131.rs:11:1\n   |\n11 | fn main<T>() { //~ ERROR E0131\n   |        ^^^ main cannot have type parameters\n```\nFixes #35257. Part of #35233.\nr? @jonathandturner", "tree": {"sha": "1a778e532494d4dcb7f3653e14538ef583ede5b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a778e532494d4dcb7f3653e14538ef583ede5b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4ed060a8fc02c915365235890a31be7b4a77930", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4ed060a8fc02c915365235890a31be7b4a77930", "html_url": "https://github.com/rust-lang/rust/commit/d4ed060a8fc02c915365235890a31be7b4a77930", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4ed060a8fc02c915365235890a31be7b4a77930/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02971961c72c89d0a8dc2f5191e4903a3cc376b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/02971961c72c89d0a8dc2f5191e4903a3cc376b9", "html_url": "https://github.com/rust-lang/rust/commit/02971961c72c89d0a8dc2f5191e4903a3cc376b9"}, {"sha": "5e06da29a73bba354903ba7dc1eddf3434ac112e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e06da29a73bba354903ba7dc1eddf3434ac112e", "html_url": "https://github.com/rust-lang/rust/commit/5e06da29a73bba354903ba7dc1eddf3434ac112e"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "65e00705121a7e6dcc5745d3034f10d5c0550053", "filename": "src/librustc_typeck/lib.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/d4ed060a8fc02c915365235890a31be7b4a77930/src%2Flibrustc_typeck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4ed060a8fc02c915365235890a31be7b4a77930/src%2Flibrustc_typeck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Flib.rs?ref=d4ed060a8fc02c915365235890a31be7b4a77930", "patch": "@@ -211,11 +211,15 @@ fn check_main_fn_ty(ccx: &CrateCtxt,\n             match tcx.map.find(main_id) {\n                 Some(hir_map::NodeItem(it)) => {\n                     match it.node {\n-                        hir::ItemFn(_, _, _, _, ref ps, _)\n-                        if ps.is_parameterized() => {\n-                            span_err!(ccx.tcx.sess, main_span, E0131,\n-                                      \"main function is not allowed to have type parameters\");\n-                            return;\n+                        hir::ItemFn(_, _, _, _, ref generics, _) => {\n+                            if let Some(gen_span) = generics.span() {\n+                                struct_span_err!(ccx.tcx.sess, gen_span, E0131,\n+                                         \"main function is not allowed to have type parameters\")\n+                                    .span_label(gen_span,\n+                                                &format!(\"main cannot have type parameters\"))\n+                                    .emit();\n+                                return;\n+                            }\n                         }\n                         _ => ()\n                     }"}, {"sha": "e6e924e2d966fd9cc8a335060afe22098ed44b7a", "filename": "src/test/compile-fail/E0131.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d4ed060a8fc02c915365235890a31be7b4a77930/src%2Ftest%2Fcompile-fail%2FE0131.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4ed060a8fc02c915365235890a31be7b4a77930/src%2Ftest%2Fcompile-fail%2FE0131.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0131.rs?ref=d4ed060a8fc02c915365235890a31be7b4a77930", "patch": "@@ -8,5 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-fn main<T>() { //~ ERROR E0131\n+fn main<T>() {\n+    //~^ ERROR E0131\n+    //~| NOTE main cannot have type parameters\n }"}]}