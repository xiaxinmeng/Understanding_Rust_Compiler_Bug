{"sha": "ef28361293b39b63f313aa756fce1b9c74f9eb28", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmMjgzNjEyOTNiMzliNjNmMzEzYWE3NTZmY2UxYjljNzRmOWViMjg=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-04-03T00:36:49Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-04-23T23:30:06Z"}, "message": "Downgrade match_bool to pedantic", "tree": {"sha": "a6e61c7c34e61bd016e46c78ea07144d37211c34", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a6e61c7c34e61bd016e46c78ea07144d37211c34"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef28361293b39b63f313aa756fce1b9c74f9eb28", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAl6iJP4ACgkQ+boUO5X/\nbYI82RAAoOUQjL8Z8d07a7SS+9Cofu23CDcEQrVLZxM2tFenMllomHVzErhT7lZ7\n4uyA0xY7v3Hpp+j3iNj9D6EqqqEWOjXkMceuuIUWLs6ge52S8sL2yc3/frlOJfMx\nKgs8jFxJEdnQOUm7BjgCOw8Cyb6BVHi+OXVxcJGfIW1iZOA9WsICC0o32AFj6s6m\nrXzrMbTJbdIxUzZub+9+LN8XEIPwz0HhHGfH/qsE0HsdF3KZ4/Tux/e/Jb1YCFVF\nvY88Qh9eKevdMIl+AprQ3WFQNzxabs1UcoC1UBBTW4pPc/AYH53tWUI/uPTlBbzU\nIaDkZ3kACEVlU6qi4bgy2eL5yV/U/DWShHtbDVUx5wflJnqyPqP+4zlDvcBtoo86\nCp69FwcJ5utDi6pD2Ll7tls1mkMOsQe73F5htQGDEfl7VGup9QyNtZI58ApfGXVP\nM0dZ6VvmkAlR1fuRMQI3tiizJlI07TqZn5kqR6F7BHbl8+7WYdnsmmGwyh8MPIyV\nqlWy7e+m2MdOLGmfCoNhjstY2pJUTBdVKvbmEbRLr+Yb5LLMD2Np5dSrgplN0slQ\nfKIprv1E7vBXeeODy9CPi1aOYnnMYtKyfsIJrp4uSo38KCSZCbyjk/tQ1aZJkpCr\nf8rt/XaprVpFaF6vMYGa6KYlfHf/LsT8+V1bw4hI3w1+5g1hrE4=\n=9Q4Q\n-----END PGP SIGNATURE-----", "payload": "tree a6e61c7c34e61bd016e46c78ea07144d37211c34\nparent 02c94352d4bbb055dce656da21d86aa1bf672562\nauthor David Tolnay <dtolnay@gmail.com> 1585874209 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1587684606 -0700\n\nDowngrade match_bool to pedantic\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef28361293b39b63f313aa756fce1b9c74f9eb28", "html_url": "https://github.com/rust-lang/rust/commit/ef28361293b39b63f313aa756fce1b9c74f9eb28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef28361293b39b63f313aa756fce1b9c74f9eb28/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02c94352d4bbb055dce656da21d86aa1bf672562", "url": "https://api.github.com/repos/rust-lang/rust/commits/02c94352d4bbb055dce656da21d86aa1bf672562", "html_url": "https://github.com/rust-lang/rust/commit/02c94352d4bbb055dce656da21d86aa1bf672562"}], "stats": {"total": 57, "additions": 30, "deletions": 27}, "files": [{"sha": "f9d1ddf049cd8634f0e047894a1600caee05dde9", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1134,6 +1134,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&loops::EXPLICIT_INTO_ITER_LOOP),\n         LintId::of(&loops::EXPLICIT_ITER_LOOP),\n         LintId::of(&macro_use::MACRO_USE_IMPORTS),\n+        LintId::of(&matches::MATCH_BOOL),\n         LintId::of(&matches::SINGLE_MATCH_ELSE),\n         LintId::of(&methods::FILTER_MAP),\n         LintId::of(&methods::FILTER_MAP_NEXT),\n@@ -1279,7 +1280,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&map_unit_fn::RESULT_MAP_UNIT_FN),\n         LintId::of(&matches::INFALLIBLE_DESTRUCTURING_MATCH),\n         LintId::of(&matches::MATCH_AS_REF),\n-        LintId::of(&matches::MATCH_BOOL),\n         LintId::of(&matches::MATCH_OVERLAPPING_ARM),\n         LintId::of(&matches::MATCH_REF_PATS),\n         LintId::of(&matches::MATCH_SINGLE_BINDING),\n@@ -1470,7 +1470,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&main_recursion::MAIN_RECURSION),\n         LintId::of(&map_clone::MAP_CLONE),\n         LintId::of(&matches::INFALLIBLE_DESTRUCTURING_MATCH),\n-        LintId::of(&matches::MATCH_BOOL),\n         LintId::of(&matches::MATCH_OVERLAPPING_ARM),\n         LintId::of(&matches::MATCH_REF_PATS),\n         LintId::of(&matches::MATCH_WILD_ERR_ARM),"}, {"sha": "8f86535ef1e0f25aeea9de1792099c8541815bc0", "filename": "clippy_lints/src/matches.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/clippy_lints%2Fsrc%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/clippy_lints%2Fsrc%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmatches.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -138,7 +138,7 @@ declare_clippy_lint! {\n     /// }\n     /// ```\n     pub MATCH_BOOL,\n-    style,\n+    pedantic,\n     \"a `match` on a boolean expression instead of an `if..else` block\"\n }\n "}, {"sha": "9b67bacc35d72dd6aec24e1012c1b5a5bac2c082", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1139,7 +1139,7 @@ pub static ref ALL_LINTS: Vec<Lint> = vec![\n     },\n     Lint {\n         name: \"match_bool\",\n-        group: \"style\",\n+        group: \"pedantic\",\n         desc: \"a `match` on a boolean expression instead of an `if..else` block\",\n         deprecation: None,\n         module: \"matches\","}, {"sha": "9066dc3fedfd60fc5377adbfa78d2df368c2ed3a", "filename": "tests/ui/implicit_return.fixed", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplicit_return.fixed?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -21,7 +21,6 @@ fn test_if_block() -> bool {\n     }\n }\n \n-#[allow(clippy::match_bool)]\n #[rustfmt::skip]\n fn test_match(x: bool) -> bool {\n     match x {\n@@ -30,7 +29,7 @@ fn test_match(x: bool) -> bool {\n     }\n }\n \n-#[allow(clippy::match_bool, clippy::needless_return)]\n+#[allow(clippy::needless_return)]\n fn test_match_with_unreachable(x: bool) -> bool {\n     match x {\n         true => return false,"}, {"sha": "c0d70ecf502ed6167fe7205866045f24d66c6ceb", "filename": "tests/ui/implicit_return.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplicit_return.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -21,7 +21,6 @@ fn test_if_block() -> bool {\n     }\n }\n \n-#[allow(clippy::match_bool)]\n #[rustfmt::skip]\n fn test_match(x: bool) -> bool {\n     match x {\n@@ -30,7 +29,7 @@ fn test_match(x: bool) -> bool {\n     }\n }\n \n-#[allow(clippy::match_bool, clippy::needless_return)]\n+#[allow(clippy::needless_return)]\n fn test_match_with_unreachable(x: bool) -> bool {\n     match x {\n         true => return false,"}, {"sha": "fb2ec9027645459c8ae221a1962e61e49df03ce9", "filename": "tests/ui/implicit_return.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fimplicit_return.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplicit_return.stderr?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -19,49 +19,49 @@ LL |         false\n    |         ^^^^^ help: add `return` as shown: `return false`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:28:17\n+  --> $DIR/implicit_return.rs:27:17\n    |\n LL |         true => false,\n    |                 ^^^^^ help: add `return` as shown: `return false`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:29:20\n+  --> $DIR/implicit_return.rs:28:20\n    |\n LL |         false => { true },\n    |                    ^^^^ help: add `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:44:9\n+  --> $DIR/implicit_return.rs:43:9\n    |\n LL |         break true;\n    |         ^^^^^^^^^^ help: change `break` to `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:52:13\n+  --> $DIR/implicit_return.rs:51:13\n    |\n LL |             break true;\n    |             ^^^^^^^^^^ help: change `break` to `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:61:13\n+  --> $DIR/implicit_return.rs:60:13\n    |\n LL |             break true;\n    |             ^^^^^^^^^^ help: change `break` to `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:79:18\n+  --> $DIR/implicit_return.rs:78:18\n    |\n LL |     let _ = || { true };\n    |                  ^^^^ help: add `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:80:16\n+  --> $DIR/implicit_return.rs:79:16\n    |\n LL |     let _ = || true;\n    |                ^^^^ help: add `return` as shown: `return true`\n \n error: missing `return` statement\n-  --> $DIR/implicit_return.rs:88:5\n+  --> $DIR/implicit_return.rs:87:5\n    |\n LL |     format!(\"test {}\", \"test\")\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: add `return` as shown: `return format!(\"test {}\", \"test\")`"}, {"sha": "9ed55ca7ae7f9cef1bc2eb858a853d7a9a33d351", "filename": "tests/ui/match_bool.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fmatch_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fmatch_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatch_bool.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1,3 +1,5 @@\n+#![deny(clippy::match_bool)]\n+\n fn match_bool() {\n     let test: bool = true;\n "}, {"sha": "1ad78c740c68bf104e9b3fd8a6e9fc1b84cc6703", "filename": "tests/ui/match_bool.stderr", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fmatch_bool.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fmatch_bool.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatch_bool.stderr?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1,24 +1,28 @@\n error: this boolean expression can be simplified\n-  --> $DIR/match_bool.rs:29:11\n+  --> $DIR/match_bool.rs:31:11\n    |\n LL |     match test && test {\n    |           ^^^^^^^^^^^^ help: try: `test`\n    |\n    = note: `-D clippy::nonminimal-bool` implied by `-D warnings`\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:4:5\n+  --> $DIR/match_bool.rs:6:5\n    |\n LL | /     match test {\n LL | |         true => 0,\n LL | |         false => 42,\n LL | |     };\n    | |_____^ help: consider using an `if`/`else` expression: `if test { 0 } else { 42 }`\n    |\n-   = note: `-D clippy::match-bool` implied by `-D warnings`\n+note: the lint level is defined here\n+  --> $DIR/match_bool.rs:1:9\n+   |\n+LL | #![deny(clippy::match_bool)]\n+   |         ^^^^^^^^^^^^^^^^^^\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:10:5\n+  --> $DIR/match_bool.rs:12:5\n    |\n LL | /     match option == 1 {\n LL | |         true => 1,\n@@ -27,7 +31,7 @@ LL | |     };\n    | |_____^ help: consider using an `if`/`else` expression: `if option == 1 { 1 } else { 0 }`\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:15:5\n+  --> $DIR/match_bool.rs:17:5\n    |\n LL | /     match test {\n LL | |         true => (),\n@@ -45,7 +49,7 @@ LL |     };\n    |\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:22:5\n+  --> $DIR/match_bool.rs:24:5\n    |\n LL | /     match test {\n LL | |         false => {\n@@ -63,7 +67,7 @@ LL |     };\n    |\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:29:5\n+  --> $DIR/match_bool.rs:31:5\n    |\n LL | /     match test && test {\n LL | |         false => {\n@@ -81,15 +85,15 @@ LL |     };\n    |\n \n error: equal expressions as operands to `&&`\n-  --> $DIR/match_bool.rs:29:11\n+  --> $DIR/match_bool.rs:31:11\n    |\n LL |     match test && test {\n    |           ^^^^^^^^^^^^\n    |\n    = note: `#[deny(clippy::eq_op)]` on by default\n \n error: you seem to be trying to match on a boolean expression\n-  --> $DIR/match_bool.rs:36:5\n+  --> $DIR/match_bool.rs:38:5\n    |\n LL | /     match test {\n LL | |         false => {"}, {"sha": "ad20e2381073aae324d7f90474f89befe77aa24b", "filename": "tests/ui/needless_return.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fneedless_return.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fneedless_return.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.fixed?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1,6 +1,6 @@\n // run-rustfix\n \n-#![allow(unused, clippy::needless_bool, clippy::match_bool)]\n+#![allow(unused, clippy::needless_bool)]\n #![allow(clippy::if_same_then_else, clippy::single_match)]\n #![warn(clippy::needless_return)]\n "}, {"sha": "af0cdfb207ff568f9e0cbc29225437196be17868", "filename": "tests/ui/needless_return.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fneedless_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef28361293b39b63f313aa756fce1b9c74f9eb28/tests%2Fui%2Fneedless_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.rs?ref=ef28361293b39b63f313aa756fce1b9c74f9eb28", "patch": "@@ -1,6 +1,6 @@\n // run-rustfix\n \n-#![allow(unused, clippy::needless_bool, clippy::match_bool)]\n+#![allow(unused, clippy::needless_bool)]\n #![allow(clippy::if_same_then_else, clippy::single_match)]\n #![warn(clippy::needless_return)]\n "}]}