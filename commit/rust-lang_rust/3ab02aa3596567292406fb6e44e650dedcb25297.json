{"sha": "3ab02aa3596567292406fb6e44e650dedcb25297", "node_id": "C_kwDOAAsO6NoAKDNhYjAyYWEzNTk2NTY3MjkyNDA2ZmI2ZTQ0ZTY1MGRlZGNiMjUyOTc", "commit": {"author": {"name": "kraktus", "email": "kraktus@users.noreply.github.com", "date": "2022-10-02T13:25:50Z"}, "committer": {"name": "kraktus", "email": "kraktus@users.noreply.github.com", "date": "2022-10-02T13:25:50Z"}, "message": "fix tests", "tree": {"sha": "f968a68b005835482e562f3f4e1c131df88014c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f968a68b005835482e562f3f4e1c131df88014c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ab02aa3596567292406fb6e44e650dedcb25297", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ab02aa3596567292406fb6e44e650dedcb25297", "html_url": "https://github.com/rust-lang/rust/commit/3ab02aa3596567292406fb6e44e650dedcb25297", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ab02aa3596567292406fb6e44e650dedcb25297/comments", "author": {"login": "kraktus", "id": 56031107, "node_id": "MDQ6VXNlcjU2MDMxMTA3", "avatar_url": "https://avatars.githubusercontent.com/u/56031107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kraktus", "html_url": "https://github.com/kraktus", "followers_url": "https://api.github.com/users/kraktus/followers", "following_url": "https://api.github.com/users/kraktus/following{/other_user}", "gists_url": "https://api.github.com/users/kraktus/gists{/gist_id}", "starred_url": "https://api.github.com/users/kraktus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kraktus/subscriptions", "organizations_url": "https://api.github.com/users/kraktus/orgs", "repos_url": "https://api.github.com/users/kraktus/repos", "events_url": "https://api.github.com/users/kraktus/events{/privacy}", "received_events_url": "https://api.github.com/users/kraktus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kraktus", "id": 56031107, "node_id": "MDQ6VXNlcjU2MDMxMTA3", "avatar_url": "https://avatars.githubusercontent.com/u/56031107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kraktus", "html_url": "https://github.com/kraktus", "followers_url": "https://api.github.com/users/kraktus/followers", "following_url": "https://api.github.com/users/kraktus/following{/other_user}", "gists_url": "https://api.github.com/users/kraktus/gists{/gist_id}", "starred_url": "https://api.github.com/users/kraktus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kraktus/subscriptions", "organizations_url": "https://api.github.com/users/kraktus/orgs", "repos_url": "https://api.github.com/users/kraktus/repos", "events_url": "https://api.github.com/users/kraktus/events{/privacy}", "received_events_url": "https://api.github.com/users/kraktus/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "22be60b4f07bcfc8e72976b4d9f2cd1f9cae29d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/22be60b4f07bcfc8e72976b4d9f2cd1f9cae29d5", "html_url": "https://github.com/rust-lang/rust/commit/22be60b4f07bcfc8e72976b4d9f2cd1f9cae29d5"}], "stats": {"total": 65, "additions": 31, "deletions": 34}, "files": [{"sha": "84f6855f3387bc232c9cc8c10b1e6d6eff57e067", "filename": "tests/ui/manual_assert.edition2018.fixed", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2018.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2018.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2018.fixed?ref=3ab02aa3596567292406fb6e44e650dedcb25297", "patch": "@@ -4,8 +4,7 @@\n // run-rustfix\n \n #![warn(clippy::manual_assert)]\n-#![allow(clippy::nonminimal_bool)]\n-#![allow(dead_code)]\n+#![allow(dead_code, unused_doc_comments, clippy::nonminimal_bool)]\n \n macro_rules! one {\n     () => {\n@@ -52,13 +51,13 @@ fn main() {\n     assert!(!a.is_empty(), \"with expansion {}\", one!());\n }\n \n-fn issue7730() {\n+fn issue7730(a: u8) {\n     // Suggestion should preserve comment\n     // comment\n /* this is a\n         multiline\n         comment */\n /// Doc comment\n // comment after `panic!`\n-assert!(!true, \"panic with comment\");\n+assert!(!(a > 2), \"panic with comment\");\n }"}, {"sha": "dbd21be2da9e181b9f153927e312a27b8232c230", "filename": "tests/ui/manual_assert.edition2018.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2018.stderr?ref=3ab02aa3596567292406fb6e44e650dedcb25297", "patch": "@@ -1,5 +1,5 @@\n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:31:5\n+  --> $DIR/manual_assert.rs:30:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qaqaq{:?}\", a);\n@@ -13,7 +13,7 @@ LL |     assert!(a.is_empty(), \"qaqaq{:?}\", a);\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:34:5\n+  --> $DIR/manual_assert.rs:33:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qwqwq\");\n@@ -26,7 +26,7 @@ LL |     assert!(a.is_empty(), \"qwqwq\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:51:5\n+  --> $DIR/manual_assert.rs:50:5\n    |\n LL | /     if b.is_empty() {\n LL | |         panic!(\"panic1\");\n@@ -39,7 +39,7 @@ LL |     assert!(!b.is_empty(), \"panic1\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:54:5\n+  --> $DIR/manual_assert.rs:53:5\n    |\n LL | /     if b.is_empty() && a.is_empty() {\n LL | |         panic!(\"panic2\");\n@@ -52,7 +52,7 @@ LL |     assert!(!(b.is_empty() && a.is_empty()), \"panic2\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:57:5\n+  --> $DIR/manual_assert.rs:56:5\n    |\n LL | /     if a.is_empty() && !b.is_empty() {\n LL | |         panic!(\"panic3\");\n@@ -65,7 +65,7 @@ LL |     assert!(!(a.is_empty() && !b.is_empty()), \"panic3\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:60:5\n+  --> $DIR/manual_assert.rs:59:5\n    |\n LL | /     if b.is_empty() || a.is_empty() {\n LL | |         panic!(\"panic4\");\n@@ -78,7 +78,7 @@ LL |     assert!(!(b.is_empty() || a.is_empty()), \"panic4\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:63:5\n+  --> $DIR/manual_assert.rs:62:5\n    |\n LL | /     if a.is_empty() || !b.is_empty() {\n LL | |         panic!(\"panic5\");\n@@ -91,7 +91,7 @@ LL |     assert!(!(a.is_empty() || !b.is_empty()), \"panic5\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:66:5\n+  --> $DIR/manual_assert.rs:65:5\n    |\n LL | /     if a.is_empty() {\n LL | |         panic!(\"with expansion {}\", one!())\n@@ -104,9 +104,9 @@ LL |     assert!(!a.is_empty(), \"with expansion {}\", one!());\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:73:5\n+  --> $DIR/manual_assert.rs:72:5\n    |\n-LL | /     if true {\n+LL | /     if a > 2 {\n LL | |         // comment\n LL | |         /* this is a\n LL | |         multiline\n@@ -117,7 +117,7 @@ LL | |     }\n    |\n help: try instead\n    |\n-LL |     assert!(!true, \"panic with comment\");\n+LL |     assert!(!(a > 2), \"panic with comment\");\n    |\n \n error: aborting due to 9 previous errors"}, {"sha": "84f6855f3387bc232c9cc8c10b1e6d6eff57e067", "filename": "tests/ui/manual_assert.edition2021.fixed", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2021.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2021.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2021.fixed?ref=3ab02aa3596567292406fb6e44e650dedcb25297", "patch": "@@ -4,8 +4,7 @@\n // run-rustfix\n \n #![warn(clippy::manual_assert)]\n-#![allow(clippy::nonminimal_bool)]\n-#![allow(dead_code)]\n+#![allow(dead_code, unused_doc_comments, clippy::nonminimal_bool)]\n \n macro_rules! one {\n     () => {\n@@ -52,13 +51,13 @@ fn main() {\n     assert!(!a.is_empty(), \"with expansion {}\", one!());\n }\n \n-fn issue7730() {\n+fn issue7730(a: u8) {\n     // Suggestion should preserve comment\n     // comment\n /* this is a\n         multiline\n         comment */\n /// Doc comment\n // comment after `panic!`\n-assert!(!true, \"panic with comment\");\n+assert!(!(a > 2), \"panic with comment\");\n }"}, {"sha": "dbd21be2da9e181b9f153927e312a27b8232c230", "filename": "tests/ui/manual_assert.edition2021.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2021.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.edition2021.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2021.stderr?ref=3ab02aa3596567292406fb6e44e650dedcb25297", "patch": "@@ -1,5 +1,5 @@\n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:31:5\n+  --> $DIR/manual_assert.rs:30:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qaqaq{:?}\", a);\n@@ -13,7 +13,7 @@ LL |     assert!(a.is_empty(), \"qaqaq{:?}\", a);\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:34:5\n+  --> $DIR/manual_assert.rs:33:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qwqwq\");\n@@ -26,7 +26,7 @@ LL |     assert!(a.is_empty(), \"qwqwq\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:51:5\n+  --> $DIR/manual_assert.rs:50:5\n    |\n LL | /     if b.is_empty() {\n LL | |         panic!(\"panic1\");\n@@ -39,7 +39,7 @@ LL |     assert!(!b.is_empty(), \"panic1\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:54:5\n+  --> $DIR/manual_assert.rs:53:5\n    |\n LL | /     if b.is_empty() && a.is_empty() {\n LL | |         panic!(\"panic2\");\n@@ -52,7 +52,7 @@ LL |     assert!(!(b.is_empty() && a.is_empty()), \"panic2\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:57:5\n+  --> $DIR/manual_assert.rs:56:5\n    |\n LL | /     if a.is_empty() && !b.is_empty() {\n LL | |         panic!(\"panic3\");\n@@ -65,7 +65,7 @@ LL |     assert!(!(a.is_empty() && !b.is_empty()), \"panic3\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:60:5\n+  --> $DIR/manual_assert.rs:59:5\n    |\n LL | /     if b.is_empty() || a.is_empty() {\n LL | |         panic!(\"panic4\");\n@@ -78,7 +78,7 @@ LL |     assert!(!(b.is_empty() || a.is_empty()), \"panic4\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:63:5\n+  --> $DIR/manual_assert.rs:62:5\n    |\n LL | /     if a.is_empty() || !b.is_empty() {\n LL | |         panic!(\"panic5\");\n@@ -91,7 +91,7 @@ LL |     assert!(!(a.is_empty() || !b.is_empty()), \"panic5\");\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:66:5\n+  --> $DIR/manual_assert.rs:65:5\n    |\n LL | /     if a.is_empty() {\n LL | |         panic!(\"with expansion {}\", one!())\n@@ -104,9 +104,9 @@ LL |     assert!(!a.is_empty(), \"with expansion {}\", one!());\n    |\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/manual_assert.rs:73:5\n+  --> $DIR/manual_assert.rs:72:5\n    |\n-LL | /     if true {\n+LL | /     if a > 2 {\n LL | |         // comment\n LL | |         /* this is a\n LL | |         multiline\n@@ -117,7 +117,7 @@ LL | |     }\n    |\n help: try instead\n    |\n-LL |     assert!(!true, \"panic with comment\");\n+LL |     assert!(!(a > 2), \"panic with comment\");\n    |\n \n error: aborting due to 9 previous errors"}, {"sha": "14abf94965af03529a42eec35237d66c759af7fc", "filename": "tests/ui/manual_assert.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ab02aa3596567292406fb6e44e650dedcb25297/tests%2Fui%2Fmanual_assert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.rs?ref=3ab02aa3596567292406fb6e44e650dedcb25297", "patch": "@@ -4,8 +4,7 @@\n // run-rustfix\n \n #![warn(clippy::manual_assert)]\n-#![allow(clippy::nonminimal_bool)]\n-#![allow(dead_code)]\n+#![allow(dead_code, unused_doc_comments, clippy::nonminimal_bool)]\n \n macro_rules! one {\n     () => {\n@@ -68,9 +67,9 @@ fn main() {\n     }\n }\n \n-fn issue7730() {\n+fn issue7730(a: u8) {\n     // Suggestion should preserve comment\n-    if true {\n+    if a > 2 {\n         // comment\n         /* this is a\n         multiline"}]}