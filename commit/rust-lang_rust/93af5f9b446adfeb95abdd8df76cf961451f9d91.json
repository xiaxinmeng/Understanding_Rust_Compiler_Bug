{"sha": "93af5f9b446adfeb95abdd8df76cf961451f9d91", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzYWY1ZjliNDQ2YWRmZWI5NWFiZGQ4ZGY3NmNmOTYxNDUxZjlkOTE=", "commit": {"author": {"name": "Lee Jeffery", "email": "leejeffery@gmail.com", "date": "2015-05-14T17:19:51Z"}, "committer": {"name": "Lee Jeffery", "email": "leejeffery@gmail.com", "date": "2015-05-14T17:19:51Z"}, "message": "Make BytePos calculation same as original", "tree": {"sha": "755a8a45e7a0fdf34a44f2dbec41f63d8dd213c8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/755a8a45e7a0fdf34a44f2dbec41f63d8dd213c8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93af5f9b446adfeb95abdd8df76cf961451f9d91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93af5f9b446adfeb95abdd8df76cf961451f9d91", "html_url": "https://github.com/rust-lang/rust/commit/93af5f9b446adfeb95abdd8df76cf961451f9d91", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93af5f9b446adfeb95abdd8df76cf961451f9d91/comments", "author": null, "committer": null, "parents": [{"sha": "4f82c3151b063a4226f33df047d4e748ef5e3f13", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f82c3151b063a4226f33df047d4e748ef5e3f13", "html_url": "https://github.com/rust-lang/rust/commit/4f82c3151b063a4226f33df047d4e748ef5e3f13"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "1ca4451d28d09043e0ce4c951085c3fd5c15df95", "filename": "src/libsyntax/parse/lexer/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/93af5f9b446adfeb95abdd8df76cf961451f9d91/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93af5f9b446adfeb95abdd8df76cf961451f9d91/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs?ref=93af5f9b446adfeb95abdd8df76cf961451f9d91", "patch": "@@ -406,7 +406,6 @@ impl<'a> StringReader<'a> {\n \n                     // line comments starting with \"///\" or \"//!\" are doc-comments\n                     let doc_comment = self.curr_is('/') || self.curr_is('!');\n-                    let start_bpos = self.last_pos - BytePos(2);\n \n                     while !self.is_eof() {\n                         match self.curr.unwrap() {\n@@ -426,6 +425,7 @@ impl<'a> StringReader<'a> {\n                     }\n \n                     return if doc_comment {\n+                        let start_bpos = self.pos - BytePos(3);\n                         self.with_str_from(start_bpos, |string| {\n                             // comments with only more \"/\"s are not doc comments\n                             let tok = if is_doc_comment(string) {\n@@ -440,6 +440,7 @@ impl<'a> StringReader<'a> {\n                             })\n                         })\n                     } else {\n+                        let start_bpos = self.last_pos - BytePos(2);\n                         Some(TokenAndSpan {\n                             tok: token::Comment,\n                             sp: codemap::mk_sp(start_bpos, self.last_pos)"}]}