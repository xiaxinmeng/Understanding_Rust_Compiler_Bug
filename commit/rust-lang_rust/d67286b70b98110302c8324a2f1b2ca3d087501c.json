{"sha": "d67286b70b98110302c8324a2f1b2ca3d087501c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2NzI4NmI3MGI5ODExMDMwMmM4MzI0YTJmMWIyY2EzZDA4NzUwMWM=", "commit": {"author": {"name": "Oliver S\u0336c\u0336h\u0336n\u0336e\u0336i\u0336d\u0336e\u0336r Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2018-10-08T11:52:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-10-08T11:52:19Z"}, "message": "Merge pull request #3286 from vmalloc/lifetime_elision_msg\n\nImprove diagnostics in case of lifetime elision (closes #3284)", "tree": {"sha": "bbdebb23f2b46b73d3ef4c618400ed40b78625a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bbdebb23f2b46b73d3ef4c618400ed40b78625a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d67286b70b98110302c8324a2f1b2ca3d087501c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbu0TzCRBK7hj4Ov3rIwAAdHIIAB93vJUsI+iIXos/DPbkQAAX\nT8yYToh0MmIndfppsDVXtQRQ/JR2IzztquPxgJlGPP9Ir+0A/Uv1IDXE9fRdEpHz\nCBWgGM6ELRbXmIxKK7Np59tiPltf4GHRz1NOz9VMcjkwiDYQ3ceOoqpjJ4N/9XW+\nwME5Kgw9kfMtAOzceKmmFx82v6zlF/+UbyILsVk/FTKzGN5/okmnZgtike4tOFrz\nPLx7Aqphm3vugIcRNpfVuo/GxlwqU1F6gLN32qEDr38DcoZQkI5JGeRcEN8btUMT\nvUqh2Y9TWxbHWoF155cVXdRg6mg7ynjTarYiALccR8aIIe/7D+V2AeJ5oK5SWzk=\n=OvjR\n-----END PGP SIGNATURE-----\n", "payload": "tree bbdebb23f2b46b73d3ef4c618400ed40b78625a7\nparent 02705d4cf5334844545aff99418d10644447aabd\nparent 1ef32e4096bb813edee300a5fa89c355959ed878\nauthor Oliver S\u0336c\u0336h\u0336n\u0336e\u0336i\u0336d\u0336e\u0336r Scherer <github35764891676564198441@oli-obk.de> 1538999539 +0200\ncommitter GitHub <noreply@github.com> 1538999539 +0200\n\nMerge pull request #3286 from vmalloc/lifetime_elision_msg\n\nImprove diagnostics in case of lifetime elision (closes #3284)"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d67286b70b98110302c8324a2f1b2ca3d087501c", "html_url": "https://github.com/rust-lang/rust/commit/d67286b70b98110302c8324a2f1b2ca3d087501c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d67286b70b98110302c8324a2f1b2ca3d087501c/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02705d4cf5334844545aff99418d10644447aabd", "url": "https://api.github.com/repos/rust-lang/rust/commits/02705d4cf5334844545aff99418d10644447aabd", "html_url": "https://github.com/rust-lang/rust/commit/02705d4cf5334844545aff99418d10644447aabd"}, {"sha": "1ef32e4096bb813edee300a5fa89c355959ed878", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ef32e4096bb813edee300a5fa89c355959ed878", "html_url": "https://github.com/rust-lang/rust/commit/1ef32e4096bb813edee300a5fa89c355959ed878"}], "stats": {"total": 44, "additions": 28, "deletions": 16}, "files": [{"sha": "81d37404d775de84cb8e4fb032c5e269ac98bf4c", "filename": "clippy_lints/src/lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d67286b70b98110302c8324a2f1b2ca3d087501c/clippy_lints%2Fsrc%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d67286b70b98110302c8324a2f1b2ca3d087501c/clippy_lints%2Fsrc%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flifetimes.rs?ref=d67286b70b98110302c8324a2f1b2ca3d087501c", "patch": "@@ -152,7 +152,7 @@ fn check_fn_inner<'a, 'tcx>(\n             cx,\n             NEEDLESS_LIFETIMES,\n             span,\n-            \"explicit lifetimes given in parameter types where they could be elided\",\n+            \"explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\",\n         );\n     }\n     report_extra_lifetimes(cx, decl, generics);"}, {"sha": "c7ed303b43b8e47af90b41828451f6521541ca75", "filename": "tests/ui/lifetimes.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d67286b70b98110302c8324a2f1b2ca3d087501c/tests%2Fui%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d67286b70b98110302c8324a2f1b2ca3d087501c/tests%2Fui%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flifetimes.rs?ref=d67286b70b98110302c8324a2f1b2ca3d087501c", "patch": "@@ -170,5 +170,11 @@ fn test<'a>(x: &'a [u8]) -> u8 {\n     *y\n }\n \n+// #3284 - Give a hint regarding lifetime in return type\n+\n+struct Cow<'a> { x: &'a str, }\n+fn out_return_type_lts<'a>(e: &'a str) -> Cow<'a> { unimplemented!() }\n+\n+\n fn main() {\n }"}, {"sha": "46dbf6cce0943978e7a135191657be4cca00f48d", "filename": "tests/ui/lifetimes.stderr", "status": "modified", "additions": 21, "deletions": 15, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d67286b70b98110302c8324a2f1b2ca3d087501c/tests%2Fui%2Flifetimes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d67286b70b98110302c8324a2f1b2ca3d087501c/tests%2Fui%2Flifetimes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flifetimes.stderr?ref=d67286b70b98110302c8324a2f1b2ca3d087501c", "patch": "@@ -1,90 +1,96 @@\n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:17:1\n    |\n 17 | fn distinct_lifetimes<'a, 'b>(_x: &'a u8, _y: &'b u8, _z: u8) { }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::needless-lifetimes` implied by `-D warnings`\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:19:1\n    |\n 19 | fn distinct_and_static<'a, 'b>(_x: &'a u8, _y: &'b u8, _z: &'static u8) { }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:27:1\n    |\n 27 | fn in_and_out<'a>(x: &'a u8, _y: u8) -> &'a u8 { x }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:39:1\n    |\n 39 | fn deep_reference_3<'a>(x: &'a u8, _y: u8) -> Result<&'a u8, ()> { Ok(x) }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:42:1\n    |\n 42 | fn where_clause_without_lt<'a, T>(x: &'a u8, _y: u8) -> Result<&'a u8, ()> where T: Copy { Ok(x) }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:48:1\n    |\n 48 | fn lifetime_param_2<'a, 'b>(_x: Ref<'a>, _y: &'b u8) { }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:62:1\n    |\n 62 | / fn fn_bound_2<'a, F, I>(_m: Lt<'a, I>, _f: F) -> Lt<'a, I>\n 63 | |     where for<'x> F: Fn(Lt<'x, I>) -> Lt<'x, I>\n 64 | | { unreachable!() }\n    | |__________________^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:87:5\n    |\n 87 |     fn self_and_out<'s>(&'s self) -> &'s u8 { &self.x }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n   --> $DIR/lifetimes.rs:91:5\n    |\n 91 |     fn distinct_self_and_in<'s, 't>(&'s self, _x: &'t u8) { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n    --> $DIR/lifetimes.rs:107:1\n     |\n 107 | fn struct_with_lt<'a>(_foo: Foo<'a>) -> &'a str { unimplemented!() }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n    --> $DIR/lifetimes.rs:127:1\n     |\n 127 | fn trait_obj_elided2<'a>(_arg: &'a Drop) -> &'a str { unimplemented!() }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n    --> $DIR/lifetimes.rs:131:1\n     |\n 131 | fn alias_with_lt<'a>(_foo: FooAlias<'a>) -> &'a str { unimplemented!() }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n    --> $DIR/lifetimes.rs:142:1\n     |\n 142 | fn named_input_elided_output<'a>(_arg: &'a str) -> &str { unimplemented!() }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: explicit lifetimes given in parameter types where they could be elided\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n    --> $DIR/lifetimes.rs:146:1\n     |\n 146 | fn trait_bound_ok<'a, T: WithLifetime<'static>>(_: &'a u8, _: T) { unimplemented!() }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 14 previous errors\n+error: explicit lifetimes given in parameter types where they could be elided (or replaced with `'_` if needed by type declaration)\n+   --> $DIR/lifetimes.rs:176:1\n+    |\n+176 | fn out_return_type_lts<'a>(e: &'a str) -> Cow<'a> { unimplemented!() }\n+    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 15 previous errors\n "}]}