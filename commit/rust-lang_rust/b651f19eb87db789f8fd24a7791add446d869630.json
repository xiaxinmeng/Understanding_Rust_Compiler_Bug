{"sha": "b651f19eb87db789f8fd24a7791add446d869630", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2NTFmMTllYjg3ZGI3ODlmOGZkMjRhNzc5MWFkZDQ0NmQ4Njk2MzA=", "commit": {"author": {"name": "Jeremy Stucki", "email": "jeremy@myelin.ch", "date": "2019-08-11T18:34:25Z"}, "committer": {"name": "Jeremy Stucki", "email": "jeremy@myelin.ch", "date": "2019-08-11T18:34:25Z"}, "message": "Rename 'flat_map' \u2192 'flat_map_identity'", "tree": {"sha": "2230e088224f1cb765ef6f212c393e4acfca8ee2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2230e088224f1cb765ef6f212c393e4acfca8ee2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b651f19eb87db789f8fd24a7791add446d869630", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEENfZy0Nd1FLYaZCRY7vypMUgEJlUFAl1QX7EACgkQ7vypMUgE\nJlXQaxAAsob7HcTwtrkmbWUH3hUjMLki9+NZWvLItyzJjZx/mqjDRJOBfaV9mFKw\nPG6e6lalXOVe+oV2pMtS8tNmE9KErYFOdjcitIx5769awoJ69NsxPG4SwzqgcAs3\n5OTcEXXF5kHuhYFuUS2ZNHEP1LT8JGmTYP9rxkwsr07NRii1ipWgZuJwDLWrLecY\nHXN8jcqvFeeuEOsTM/qnqH2anq+PADBATlpSacbV6m5ahvI+CsSMd7J5OqrBrzbX\nDcYk2W1uV2spQ78XrRe+yFTDnEZNf/r82ofzcWUldZG9nArdv44zQWah4ZZLe8UE\nZm8K808AqqwO1X2NBmOfWTlfX+fT7H3ZaOovjtIUwSgpwA9B82qN6V+aFhNM550g\nak3OeZnbPaZsUsJtZpnJNnWww59oEDRf0XEVUCAonGv/CNxChJnbsGfIyzNkJqt5\n5XudzVlk1i5nd8VfpiB6pvIzIvwMcx+4Fom+X1ahRDaYM3JJu4rI3YJuK0PLUa8r\nwJuTVKxBn7FoENwzDTLu1sRBuIKiWIHR6WjiGpS2Y1iKFQCMuHLlL1QJCW61huNl\nSEVCAalu8bTCXCgn7iv3net1XIw2VUWJL3MAo7k+drq0Fnz/XerkcD2MLbyEQxFK\nXCj6dltJt7uPFef1+PzabhWgMfMvJVy163JUylO1Ljx12oI1fe4=\n=hO3E\n-----END PGP SIGNATURE-----", "payload": "tree 2230e088224f1cb765ef6f212c393e4acfca8ee2\nparent f0ce04f81432047bdd9b3a96a57ba06264f18471\nauthor Jeremy Stucki <jeremy@myelin.ch> 1565548465 +0200\ncommitter Jeremy Stucki <jeremy@myelin.ch> 1565548465 +0200\n\nRename 'flat_map' \u2192 'flat_map_identity'\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b651f19eb87db789f8fd24a7791add446d869630", "html_url": "https://github.com/rust-lang/rust/commit/b651f19eb87db789f8fd24a7791add446d869630", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b651f19eb87db789f8fd24a7791add446d869630/comments", "author": {"login": "jeremystucki", "id": 7629727, "node_id": "MDQ6VXNlcjc2Mjk3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7629727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremystucki", "html_url": "https://github.com/jeremystucki", "followers_url": "https://api.github.com/users/jeremystucki/followers", "following_url": "https://api.github.com/users/jeremystucki/following{/other_user}", "gists_url": "https://api.github.com/users/jeremystucki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremystucki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremystucki/subscriptions", "organizations_url": "https://api.github.com/users/jeremystucki/orgs", "repos_url": "https://api.github.com/users/jeremystucki/repos", "events_url": "https://api.github.com/users/jeremystucki/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremystucki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jeremystucki", "id": 7629727, "node_id": "MDQ6VXNlcjc2Mjk3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7629727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremystucki", "html_url": "https://github.com/jeremystucki", "followers_url": "https://api.github.com/users/jeremystucki/followers", "following_url": "https://api.github.com/users/jeremystucki/following{/other_user}", "gists_url": "https://api.github.com/users/jeremystucki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremystucki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremystucki/subscriptions", "organizations_url": "https://api.github.com/users/jeremystucki/orgs", "repos_url": "https://api.github.com/users/jeremystucki/repos", "events_url": "https://api.github.com/users/jeremystucki/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremystucki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0ce04f81432047bdd9b3a96a57ba06264f18471", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0ce04f81432047bdd9b3a96a57ba06264f18471", "html_url": "https://github.com/rust-lang/rust/commit/f0ce04f81432047bdd9b3a96a57ba06264f18471"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "87dbe891ff38a29005426a999c815d10899652e1", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -947,7 +947,7 @@ Released 2018-09-13\n [`filter_map_next`]: https://rust-lang.github.io/rust-clippy/master/index.html#filter_map_next\n [`filter_next`]: https://rust-lang.github.io/rust-clippy/master/index.html#filter_next\n [`find_map`]: https://rust-lang.github.io/rust-clippy/master/index.html#find_map\n-[`flat_map`]: https://rust-lang.github.io/rust-clippy/master/index.html#flat_map\n+[`flat_map_identity`]: https://rust-lang.github.io/rust-clippy/master/index.html#flat_map_identity\n [`float_arithmetic`]: https://rust-lang.github.io/rust-clippy/master/index.html#float_arithmetic\n [`float_cmp`]: https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp\n [`float_cmp_const`]: https://rust-lang.github.io/rust-clippy/master/index.html#float_cmp_const"}, {"sha": "4cc750ceb2f6011cf28f4b69a306c07a8c5021eb", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -643,7 +643,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         methods::FILTER_MAP,\n         methods::FILTER_MAP_NEXT,\n         methods::FIND_MAP,\n-        methods::FLAT_MAP,\n+        methods::FLAT_MAP_IDENTITY,\n         methods::MAP_FLATTEN,\n         methods::OPTION_MAP_UNWRAP_OR,\n         methods::OPTION_MAP_UNWRAP_OR_ELSE,"}, {"sha": "0ab7785501affa3357168e4e900ed70b967a7e7c", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -357,7 +357,7 @@ declare_clippy_lint! {\n     /// ```rust\n     /// iter.flatten()\n     /// ```\n-    pub FLAT_MAP,\n+    pub FLAT_MAP_IDENTITY,\n     pedantic,\n     \"call to `flat_map` where `flatten` is sufficient\"\n }\n@@ -912,7 +912,7 @@ declare_lint_pass!(Methods => [\n     FILTER_NEXT,\n     FILTER_MAP,\n     FILTER_MAP_NEXT,\n-    FLAT_MAP,\n+    FLAT_MAP_IDENTITY,\n     FIND_MAP,\n     MAP_FLATTEN,\n     ITER_NTH,\n@@ -953,7 +953,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Methods {\n             [\"map\", \"find\"] => lint_find_map(cx, expr, arg_lists[1], arg_lists[0]),\n             [\"flat_map\", \"filter\"] => lint_filter_flat_map(cx, expr, arg_lists[1], arg_lists[0]),\n             [\"flat_map\", \"filter_map\"] => lint_filter_map_flat_map(cx, expr, arg_lists[1], arg_lists[0]),\n-            [\"flat_map\", ..] => lint_flat_map(cx, expr, arg_lists[0]),\n+            [\"flat_map\", ..] => lint_flat_map_identity(cx, expr, arg_lists[0]),\n             [\"flatten\", \"map\"] => lint_map_flatten(cx, expr, arg_lists[1]),\n             [\"is_some\", \"find\"] => lint_search_is_some(cx, expr, \"find\", arg_lists[1], arg_lists[0]),\n             [\"is_some\", \"position\"] => lint_search_is_some(cx, expr, \"position\", arg_lists[1], arg_lists[0]),\n@@ -2165,7 +2165,11 @@ fn lint_filter_map_flat_map<'a, 'tcx>(\n }\n \n /// lint use of `flat_map` for `Iterators` where `flatten` would be sufficient\n-fn lint_flat_map<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx hir::Expr, flat_map_args: &'tcx [hir::Expr]) {\n+fn lint_flat_map_identity<'a, 'tcx>(\n+    cx: &LateContext<'a, 'tcx>,\n+    expr: &'tcx hir::Expr,\n+    flat_map_args: &'tcx [hir::Expr],\n+) {\n     if_chain! {\n         if match_trait_method(cx, expr, &paths::ITERATOR);\n \n@@ -2183,7 +2187,7 @@ fn lint_flat_map<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx hir::Expr, fl\n         then {\n             let msg = \"called `flat_map(|x| x)` on an `Iterator`. \\\n                        This can be simplified by calling `flatten().`\";\n-            span_lint(cx, FLAT_MAP, expr.span, msg);\n+            span_lint(cx, FLAT_MAP_IDENTITY, expr.span, msg);\n         }\n     }\n \n@@ -2201,7 +2205,7 @@ fn lint_flat_map<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx hir::Expr, fl\n         then {\n             let msg = \"called `flat_map(std::convert::identity)` on an `Iterator`. \\\n                        This can be simplified by calling `flatten().`\";\n-            span_lint(cx, FLAT_MAP, expr.span, msg);\n+            span_lint(cx, FLAT_MAP_IDENTITY, expr.span, msg);\n         }\n     }\n }"}, {"sha": "cfe8dea8837fc13c03df916d3d47ad915c123113", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -554,7 +554,7 @@ pub const ALL_LINTS: [Lint; 310] = [\n         module: \"methods\",\n     },\n     Lint {\n-        name: \"flat_map\",\n+        name: \"flat_map_identity\",\n         group: \"pedantic\",\n         desc: \"call to `flat_map` where `flatten` is sufficient\",\n         deprecation: None,"}, {"sha": "955e791dd2b989972a36dcea2da74e814182d5b5", "filename": "tests/ui/unnecessary_flat_map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/tests%2Fui%2Funnecessary_flat_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/tests%2Fui%2Funnecessary_flat_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_flat_map.rs?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -1,4 +1,4 @@\n-#![warn(clippy::flat_map)]\n+#![warn(clippy::flat_map_identity)]\n \n use std::convert;\n "}, {"sha": "4872e37f32425bf0fab5a261cec86884da19c06d", "filename": "tests/ui/unnecessary_flat_map.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b651f19eb87db789f8fd24a7791add446d869630/tests%2Fui%2Funnecessary_flat_map.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b651f19eb87db789f8fd24a7791add446d869630/tests%2Fui%2Funnecessary_flat_map.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_flat_map.stderr?ref=b651f19eb87db789f8fd24a7791add446d869630", "patch": "@@ -4,7 +4,7 @@ error: called `flat_map(|x| x)` on an `Iterator`. This can be simplified by call\n LL |     iterator.flat_map(|x| x);\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D clippy::flat-map` implied by `-D warnings`\n+   = note: `-D clippy::flat-map-identity` implied by `-D warnings`\n \n error: called `flat_map(std::convert::identity)` on an `Iterator`. This can be simplified by calling `flatten().`\n   --> $DIR/unnecessary_flat_map.rs:10:23"}]}