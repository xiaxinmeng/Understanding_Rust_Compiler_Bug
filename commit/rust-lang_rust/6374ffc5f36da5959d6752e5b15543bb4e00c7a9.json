{"sha": "6374ffc5f36da5959d6752e5b15543bb4e00c7a9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzNzRmZmM1ZjM2ZGE1OTU5ZDY3NTJlNWIxNTU0M2JiNGUwMGM3YTk=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2012-03-23T10:09:19Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2012-03-23T10:09:19Z"}, "message": "Kludge in resolve to be able to land builtins\n\nSomething strange is happening to hash maps. I'm still investigating but\nwant to get my snapshot built in the meantime. (Problem only happened on\nOS X.)", "tree": {"sha": "70f6a2e16bd4f25b0cfa536ef83934015dec1d68", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70f6a2e16bd4f25b0cfa536ef83934015dec1d68"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6374ffc5f36da5959d6752e5b15543bb4e00c7a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6374ffc5f36da5959d6752e5b15543bb4e00c7a9", "html_url": "https://github.com/rust-lang/rust/commit/6374ffc5f36da5959d6752e5b15543bb4e00c7a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6374ffc5f36da5959d6752e5b15543bb4e00c7a9/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cdb93d70a1dc7d966b21b683a24a9c9e9dc521f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/cdb93d70a1dc7d966b21b683a24a9c9e9dc521f0", "html_url": "https://github.com/rust-lang/rust/commit/cdb93d70a1dc7d966b21b683a24a9c9e9dc521f0"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "5106401b1758f7f186a8c1bb55ca51f82c1df9f0", "filename": "src/rustc/middle/resolve.rs", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/6374ffc5f36da5959d6752e5b15543bb4e00c7a9/src%2Frustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6374ffc5f36da5959d6752e5b15543bb4e00c7a9/src%2Frustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fresolve.rs?ref=6374ffc5f36da5959d6752e5b15543bb4e00c7a9", "patch": "@@ -353,14 +353,19 @@ fn map_crate(e: @env, c: @ast::crate) {\n \n fn resolve_imports(e: env) {\n     e.used_imports.track = true;\n-    e.imports.values {|v|\n-        alt v {\n-          todo(node_id, name, path, span, scopes) {\n-            resolve_import(e, local_def(node_id), name, *path, span, scopes);\n-          }\n-          resolved(_, _, _, _, _, _) | is_glob(_, _, _) { }\n-          _ { e.sess.bug(\"shouldn't see a resolving in resolve_imports\"); }\n+    loop {\n+        let mut done = true;\n+        e.imports.values {|v|\n+            alt check v {\n+              todo(node_id, name, path, span, scopes) {\n+                done = false;\n+                resolve_import(e, local_def(node_id), name, *path, span,\n+                               scopes);\n+              }\n+              resolved(_, _, _, _, _, _) | is_glob(_, _, _) { }\n+            }\n         }\n+        if done { break; }\n     };\n     e.used_imports.track = false;\n     e.sess.abort_if_errors();"}]}