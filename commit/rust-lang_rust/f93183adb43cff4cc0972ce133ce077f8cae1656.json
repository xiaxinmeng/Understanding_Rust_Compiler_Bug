{"sha": "f93183adb43cff4cc0972ce133ce077f8cae1656", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY5MzE4M2FkYjQzY2ZmNGNjMDk3MmNlMTMzY2UwNzdmOGNhZTE2NTY=", "commit": {"author": {"name": "leonardo.yvens", "email": "leoyvens@gmail.com", "date": "2017-12-01T12:01:23Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-01-13T15:48:00Z"}, "message": "Remove `impl Foo for ..` in favor of `auto trait Foo`\n\nNo longer parse it.\nRemove AutoTrait variant from AST and HIR.\nRemove backwards compatibility lint.\nRemove coherence checks, they make no sense for the new syntax.\nRemove from rustdoc.", "tree": {"sha": "44375edf74c187abbe1cdde0c8d5b844b2b3196e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44375edf74c187abbe1cdde0c8d5b844b2b3196e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f93183adb43cff4cc0972ce133ce077f8cae1656", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f93183adb43cff4cc0972ce133ce077f8cae1656", "html_url": "https://github.com/rust-lang/rust/commit/f93183adb43cff4cc0972ce133ce077f8cae1656", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f93183adb43cff4cc0972ce133ce077f8cae1656/comments", "author": {"login": "leoyvens", "id": 9885558, "node_id": "MDQ6VXNlcjk4ODU1NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/9885558?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leoyvens", "html_url": "https://github.com/leoyvens", "followers_url": "https://api.github.com/users/leoyvens/followers", "following_url": "https://api.github.com/users/leoyvens/following{/other_user}", "gists_url": "https://api.github.com/users/leoyvens/gists{/gist_id}", "starred_url": "https://api.github.com/users/leoyvens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leoyvens/subscriptions", "organizations_url": "https://api.github.com/users/leoyvens/orgs", "repos_url": "https://api.github.com/users/leoyvens/repos", "events_url": "https://api.github.com/users/leoyvens/events{/privacy}", "received_events_url": "https://api.github.com/users/leoyvens/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d", "html_url": "https://github.com/rust-lang/rust/commit/9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d"}], "stats": {"total": 541, "additions": 94, "deletions": 447}, "files": [{"sha": "3032fb2de33ada892163d31d5ebcb3ddc64998c3", "filename": "src/libcore/marker.rs", "status": "modified", "additions": 3, "deletions": 17, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibcore%2Fmarker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibcore%2Fmarker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmarker.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -40,15 +40,10 @@ use hash::Hasher;\n /// [ub]: ../../reference/behavior-considered-undefined.html\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_on_unimplemented = \"`{Self}` cannot be sent between threads safely\"]\n-pub unsafe trait Send {\n+pub unsafe auto trait Send {\n     // empty.\n }\n \n-#[stable(feature = \"rust1\", since = \"1.0.0\")]\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-unsafe impl Send for .. { }\n-\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> !Send for *const T { }\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -345,15 +340,10 @@ pub trait Copy : Clone {\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[lang = \"sync\"]\n #[rustc_on_unimplemented = \"`{Self}` cannot be shared between threads safely\"]\n-pub unsafe trait Sync {\n+pub unsafe auto trait Sync {\n     // Empty\n }\n \n-#[stable(feature = \"rust1\", since = \"1.0.0\")]\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-unsafe impl Sync for .. { }\n-\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> !Sync for *const T { }\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -563,11 +553,7 @@ mod impls {\n /// This affects, for example, whether a `static` of that type is\n /// placed in read-only static memory or writable static memory.\n #[lang = \"freeze\"]\n-unsafe trait Freeze {}\n-\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-unsafe impl Freeze for .. {}\n+unsafe auto trait Freeze {}\n \n impl<T: ?Sized> !Freeze for UnsafeCell<T> {}\n unsafe impl<T: ?Sized> Freeze for PhantomData<T> {}"}, {"sha": "aa8ad0a6bdc9623dce8cfc122cb2dca27ad10b57", "filename": "src/librustc/dep_graph/dep_node.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -496,7 +496,6 @@ define_dep_nodes!( <'tcx>\n     [] SuperPredicatesOfItem(DefId),\n     [] TraitDefOfItem(DefId),\n     [] AdtDefOfItem(DefId),\n-    [] IsAutoImpl(DefId),\n     [] ImplTraitRef(DefId),\n     [] ImplPolarity(DefId),\n     [] FnSignature(DefId),"}, {"sha": "ce35e6552ca83f8b3099600002cf8787a58099c8", "filename": "src/librustc/hir/intravisit.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fintravisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fintravisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fintravisit.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -498,10 +498,6 @@ pub fn walk_item<'v, V: Visitor<'v>>(visitor: &mut V, item: &'v Item) {\n             // visit_enum_def() takes care of visiting the Item's NodeId\n             visitor.visit_enum_def(enum_definition, type_parameters, item.id, item.span)\n         }\n-        ItemAutoImpl(_, ref trait_ref) => {\n-            visitor.visit_id(item.id);\n-            visitor.visit_trait_ref(trait_ref)\n-        }\n         ItemImpl(.., ref type_parameters, ref opt_trait_reference, ref typ, ref impl_item_refs) => {\n             visitor.visit_id(item.id);\n             visitor.visit_generics(type_parameters);"}, {"sha": "84d45906d2408d3ab21dd8fe8f98e2b1e4122828", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1952,16 +1952,6 @@ impl<'a> LoweringContext<'a> {\n                 let vdata = self.lower_variant_data(vdata);\n                 hir::ItemUnion(vdata, self.lower_generics(generics))\n             }\n-            ItemKind::AutoImpl(unsafety, ref trait_ref) => {\n-                let trait_ref = self.lower_trait_ref(trait_ref, ImplTraitContext::Disallowed);\n-\n-                if let Def::Trait(def_id) = trait_ref.path.def {\n-                    self.trait_auto_impl.insert(def_id, id);\n-                }\n-\n-                hir::ItemAutoImpl(self.lower_unsafety(unsafety),\n-                                     trait_ref)\n-            }\n             ItemKind::Impl(unsafety,\n                            polarity,\n                            defaultness,"}, {"sha": "d68b18dd2f17de4bc599457dd8cc31289b618b9f", "filename": "src/librustc/hir/map/def_collector.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmap%2Fdef_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmap%2Fdef_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmap%2Fdef_collector.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -104,8 +104,7 @@ impl<'a> visit::Visitor<'a> for DefCollector<'a> {\n         // Pick the def data. This need not be unique, but the more\n         // information we encapsulate into\n         let def_data = match i.node {\n-            ItemKind::AutoImpl(..) | ItemKind::Impl(..) =>\n-                DefPathData::Impl,\n+            ItemKind::Impl(..) => DefPathData::Impl,\n             ItemKind::Enum(..) | ItemKind::Struct(..) | ItemKind::Union(..) |\n             ItemKind::Trait(..) | ItemKind::TraitAlias(..) |\n             ItemKind::ExternCrate(..) | ItemKind::ForeignMod(..) | ItemKind::Ty(..) =>"}, {"sha": "5feea602d281434271462aa244e74912faf4c2aa", "filename": "src/librustc/hir/map/mod.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1192,7 +1192,6 @@ fn node_id_to_string(map: &Map, id: NodeId, include_id: bool) -> String {\n                 ItemTrait(..) => \"trait\",\n                 ItemTraitAlias(..) => \"trait alias\",\n                 ItemImpl(..) => \"impl\",\n-                ItemAutoImpl(..) => \"default impl\",\n             };\n             format!(\"{} {}{}\", item_str, path_str(), id_str)\n         }"}, {"sha": "8d43b9b4aa7396878c5d9161eef07fb61ba5f46d", "filename": "src/librustc/hir/mod.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1965,10 +1965,6 @@ pub enum Item_ {\n     /// Represents a Trait Alias Declaration\n     ItemTraitAlias(Generics, TyParamBounds),\n \n-    /// Auto trait implementations\n-    ///\n-    /// `impl Trait for .. {}`\n-    ItemAutoImpl(Unsafety, TraitRef),\n     /// An implementation, eg `impl<A> Trait for Foo { .. }`\n     ItemImpl(Unsafety,\n              ImplPolarity,\n@@ -1996,8 +1992,7 @@ impl Item_ {\n             ItemUnion(..) => \"union\",\n             ItemTrait(..) => \"trait\",\n             ItemTraitAlias(..) => \"trait alias\",\n-            ItemImpl(..) |\n-            ItemAutoImpl(..) => \"item\",\n+            ItemImpl(..) => \"item\",\n         }\n     }\n "}, {"sha": "a8e55674ae521ceb6420fe58e46520e5a868edee", "filename": "src/librustc/hir/print.rs", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fprint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fhir%2Fprint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fprint.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -652,18 +652,6 @@ impl<'a> State<'a> {\n                 self.head(&visibility_qualified(&item.vis, \"union\"))?;\n                 self.print_struct(struct_def, generics, item.name, item.span, true)?;\n             }\n-            hir::ItemAutoImpl(unsafety, ref trait_ref) => {\n-                self.head(\"\")?;\n-                self.print_visibility(&item.vis)?;\n-                self.print_unsafety(unsafety)?;\n-                self.word_nbsp(\"impl\")?;\n-                self.print_trait_ref(trait_ref)?;\n-                self.s.space()?;\n-                self.word_space(\"for\")?;\n-                self.word_space(\"..\")?;\n-                self.bopen()?;\n-                self.bclose(item.span)?;\n-            }\n             hir::ItemImpl(unsafety,\n                           polarity,\n                           defaultness,"}, {"sha": "cc1b028480e4d7a715e48f4477c88b37cd001aa2", "filename": "src/librustc/ich/impls_hir.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fich%2Fimpls_hir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fich%2Fimpls_hir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fich%2Fimpls_hir.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -854,7 +854,6 @@ impl_stable_hash_for!(enum hir::Item_ {\n     ItemUnion(variant_data, generics),\n     ItemTrait(is_auto, unsafety, generics, bounds, item_refs),\n     ItemTraitAlias(generics, bounds),\n-    ItemAutoImpl(unsafety, trait_ref),\n     ItemImpl(unsafety, impl_polarity, impl_defaultness, generics, trait_ref, ty, impl_item_refs)\n });\n "}, {"sha": "1ff9c7a86291eaea07585d515552c9f2449256fb", "filename": "src/librustc/middle/dead.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdead.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -564,7 +564,6 @@ impl<'a, 'tcx> Visitor<'tcx> for DeadVisitor<'a, 'tcx> {\n                 hir::ItemStruct(..) |\n                 hir::ItemUnion(..) |\n                 hir::ItemTrait(..) |\n-                hir::ItemAutoImpl(..) |\n                 hir::ItemImpl(..) => self.tcx.sess.codemap().def_span(item.span),\n                 _ => item.span,\n             };"}, {"sha": "e11609ea9b7982312fd1350ad251d9c85cf852d3", "filename": "src/librustc/middle/reachable.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Freachable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Freachable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Freachable.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -270,8 +270,7 @@ impl<'a, 'tcx> ReachableContext<'a, 'tcx> {\n                     hir::ItemMod(..) | hir::ItemForeignMod(..) |\n                     hir::ItemImpl(..) | hir::ItemTrait(..) | hir::ItemTraitAlias(..) |\n                     hir::ItemStruct(..) | hir::ItemEnum(..) |\n-                    hir::ItemUnion(..) | hir::ItemAutoImpl(..) |\n-                    hir::ItemGlobalAsm(..) => {}\n+                    hir::ItemUnion(..) |  hir::ItemGlobalAsm(..) => {}\n                 }\n             }\n             hir_map::NodeTraitItem(trait_method) => {"}, {"sha": "935dfd75dd8b7c3579ef8d78d63ca2d02c2e9d47", "filename": "src/librustc/middle/resolve_lifetime.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Fresolve_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fmiddle%2Fresolve_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fresolve_lifetime.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -461,10 +461,10 @@ impl<'a, 'tcx> Visitor<'tcx> for LifetimeContext<'a, 'tcx> {\n                                           intravisit::walk_item(this, item);\n                 });\n             }\n+\n             hir::ItemExternCrate(_)\n             | hir::ItemUse(..)\n             | hir::ItemMod(..)\n-            | hir::ItemAutoImpl(..)\n             | hir::ItemForeignMod(..)\n             | hir::ItemGlobalAsm(..) => {\n                 // These sorts of items have no lifetime parameters at all."}, {"sha": "51d2bc8701a4e18ac806b1396c6438c79a5b5d77", "filename": "src/librustc/traits/select.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Ftraits%2Fselect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Ftraits%2Fselect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fselect.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -2434,7 +2434,7 @@ impl<'cx, 'gcx, 'tcx> SelectionContext<'cx, 'gcx, 'tcx> {\n         VtableBuiltinData { nested: obligations }\n     }\n \n-    /// This handles the case where a `impl Foo for ..` impl is being used.\n+    /// This handles the case where a `auto trait Foo` impl is being used.\n     /// The idea is that the impl applies to `X : Foo` if the following conditions are met:\n     ///\n     /// 1. For each constituent type `Y` in `X`, `Y : Foo` holds\n@@ -3276,7 +3276,7 @@ impl<'tcx> TraitObligation<'tcx> {\n         /*!\n          * Creates a cause for obligations that are derived from\n          * `obligation` by a recursive search (e.g., for a builtin\n-         * bound, or eventually a `impl Foo for ..`). If `obligation`\n+         * bound, or eventually a `auto trait Foo`). If `obligation`\n          * is itself a derived obligation, this is just a clone, but\n          * otherwise we create a \"derived obligation\" cause so as to\n          * keep track of the original root obligation for error"}, {"sha": "0c920a6f13e59514d7f7734d1d8477807b82edbc", "filename": "src/librustc/ty/item_path.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fitem_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fitem_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fitem_path.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -232,11 +232,11 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n \n         // Always use types for non-local impls, where types are always\n         // available, and filename/line-number is mostly uninteresting.\n-        let use_types = !self.is_auto_impl(impl_def_id) && (!impl_def_id.is_local() || {\n+        let use_types = !impl_def_id.is_local() || {\n             // Otherwise, use filename/line-number if forced.\n             let force_no_types = FORCE_IMPL_FILENAME_LINE.with(|f| f.get());\n             !force_no_types\n-        });\n+        };\n \n         if !use_types {\n             return self.push_impl_path_fallback(buffer, impl_def_id);"}, {"sha": "ca35ad1e240cd70b993687c5a77d873917b47b22", "filename": "src/librustc/ty/maps/mod.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmaps%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -112,9 +112,6 @@ define_maps! { <'tcx>\n     /// True if this is a foreign item (i.e., linked via `extern { ... }`).\n     [] fn is_foreign_item: IsForeignItem(DefId) -> bool,\n \n-    /// True if this is an auto impl (aka impl Foo for ..)\n-    [] fn is_auto_impl: IsAutoImpl(DefId) -> bool,\n-\n     /// Get a map with the variance of every item; use `item_variance`\n     /// instead.\n     [] fn crate_variances: crate_variances(CrateNum) -> Rc<ty::CrateVariancesMap>,"}, {"sha": "21cb35a363fe952d1fa66dcbf0e41e052ecfc5c0", "filename": "src/librustc/ty/maps/plumbing.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -801,7 +801,6 @@ pub fn force_from_dep_node<'a, 'gcx, 'lcx>(tcx: TyCtxt<'a, 'gcx, 'lcx>,\n         DepKind::SuperPredicatesOfItem => { force!(super_predicates_of, def_id!()); }\n         DepKind::TraitDefOfItem => { force!(trait_def, def_id!()); }\n         DepKind::AdtDefOfItem => { force!(adt_def, def_id!()); }\n-        DepKind::IsAutoImpl => { force!(is_auto_impl, def_id!()); }\n         DepKind::ImplTraitRef => { force!(impl_trait_ref, def_id!()); }\n         DepKind::ImplPolarity => { force!(impl_polarity, def_id!()); }\n         DepKind::FnSignature => { force!(fn_sig, def_id!()); }"}, {"sha": "c3793f375d8e902ceeffb577daa16dabd131c816", "filename": "src/librustc/ty/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -2405,8 +2405,6 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n     }\n \n     /// Returns true if this is an `auto trait`.\n-    ///\n-    /// NB. For a limited time, also returns true if `impl Trait for .. { }` is in the code-base.\n     pub fn trait_is_auto(self, trait_def_id: DefId) -> bool {\n         self.trait_def(trait_def_id).has_auto_impl\n     }"}, {"sha": "371f0e79a3ad1dc9c8f82639821463a4d195f9da", "filename": "src/librustc_driver/test.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_driver%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_driver%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Ftest.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -246,8 +246,7 @@ impl<'a, 'gcx, 'tcx> Env<'a, 'gcx, 'tcx> {\n                 hir::ItemUnion(..) |\n                 hir::ItemTrait(..) |\n                 hir::ItemTraitAlias(..) |\n-                hir::ItemImpl(..) |\n-                hir::ItemAutoImpl(..) => None,\n+                hir::ItemImpl(..) => None,\n \n                 hir::ItemMod(ref m) => search_mod(this, m, idx, names),\n             };"}, {"sha": "c3e283535ec8280fd2ba6da371a02a7f2c4e3e23", "filename": "src/librustc_incremental/persist/dirty_clean.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_incremental%2Fpersist%2Fdirty_clean.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_incremental%2Fpersist%2Fdirty_clean.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2Fpersist%2Fdirty_clean.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -393,9 +393,6 @@ impl<'a, 'tcx> DirtyCleanVisitor<'a, 'tcx> {\n                     //\n                     //HirItem::ItemTrait(..) => (\"ItemTrait\", LABELS_TRAIT),\n \n-                    // `impl Trait for .. {}`\n-                    HirItem::ItemAutoImpl(..) => (\"ItemAutoImpl\", LABELS_IMPL),\n-\n                     // An implementation, eg `impl<A> Trait for Foo { .. }`\n                     HirItem::ItemImpl(..) => (\"ItemImpl\", LABELS_IMPL),\n "}, {"sha": "c5c27c92ab49af2899808a5281155e933f487150", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -55,31 +55,6 @@ use bad_style::{MethodLateContext, method_context};\n // hardwired lints from librustc\n pub use lint::builtin::*;\n \n-declare_lint! {\n-    pub AUTO_IMPL,\n-    Deny,\n-    \"The form `impl Foo for .. {}` will be removed, please use `auto trait Foo {}`\"\n-}\n-\n-#[derive(Copy, Clone)]\n-pub struct AutoImpl;\n-\n-impl LintPass for AutoImpl {\n-    fn get_lints(&self) -> LintArray {\n-        lint_array!(AUTO_IMPL)\n-    }\n-}\n-\n-impl EarlyLintPass for AutoImpl {\n-    fn check_item(&mut self, cx: &EarlyContext, item: &ast::Item) {\n-        let msg = \"The form `impl Foo for .. {}` will be removed, please use `auto trait Foo {}`\";\n-        match item.node {\n-            ast::ItemKind::AutoImpl(..) => cx.span_lint(AUTO_IMPL, item.span, msg),\n-            _ => ()\n-        }\n-     }\n-}\n-\n declare_lint! {\n     WHILE_TRUE,\n     Warn,"}, {"sha": "699765dde03ffa50070e8636501c14682dc8295c", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -109,7 +109,6 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n                        AnonymousParameters,\n                        IllegalFloatLiteralPattern,\n                        UnusedDocComment,\n-                       AutoImpl,\n                        );\n \n     add_early_builtin_with_new!(sess,\n@@ -183,10 +182,6 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n     // - Eventually, remove lint\n     store.register_future_incompatible(sess,\n                                        vec![\n-        FutureIncompatibleInfo {\n-            id: LintId::of(AUTO_IMPL),\n-            reference: \"issue #13231 <https://github.com/rust-lang/rust/issues/13231>\",\n-        },\n         FutureIncompatibleInfo {\n             id: LintId::of(PRIVATE_IN_PUBLIC),\n             reference: \"issue #34537 <https://github.com/rust-lang/rust/issues/34537>\","}, {"sha": "d73e968a827600cc92982d14be97793bf49f67ff", "filename": "src/librustc_metadata/cstore_impl.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcstore_impl.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -143,7 +143,6 @@ provide! { <'tcx> tcx, def_id, other, cdata,\n     inherent_impls => { Rc::new(cdata.get_inherent_implementations_for_type(def_id.index)) }\n     is_const_fn => { cdata.is_const_fn(def_id.index) }\n     is_foreign_item => { cdata.is_foreign_item(def_id.index) }\n-    is_auto_impl => { cdata.is_auto_impl(def_id.index) }\n     describe_def => { cdata.get_def(def_id.index) }\n     def_span => { cdata.get_span(def_id.index, &tcx.sess) }\n     lookup_stability => {"}, {"sha": "bd63396cd35abd6acaaab4223071abb1eee6333f", "filename": "src/librustc_metadata/decoder.rs", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fdecoder.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -404,7 +404,6 @@ impl<'tcx> EntryKind<'tcx> {\n \n             EntryKind::ForeignMod |\n             EntryKind::Impl(_) |\n-            EntryKind::AutoImpl(_) |\n             EntryKind::Field |\n             EntryKind::Generator(_) |\n             EntryKind::Closure(_) => return None,\n@@ -690,8 +689,7 @@ impl<'a, 'tcx> CrateMetadata {\n                         }\n                         continue;\n                     }\n-                    EntryKind::Impl(_) |\n-                    EntryKind::AutoImpl(_) => continue,\n+                    EntryKind::Impl(_) => continue,\n \n                     _ => {}\n                 }\n@@ -1045,13 +1043,6 @@ impl<'a, 'tcx> CrateMetadata {\n         self.dllimport_foreign_items.contains(&id)\n     }\n \n-    pub fn is_auto_impl(&self, impl_id: DefIndex) -> bool {\n-        match self.entry(impl_id).kind {\n-            EntryKind::AutoImpl(_) => true,\n-            _ => false,\n-        }\n-    }\n-\n     pub fn fn_sig(&self,\n                   id: DefIndex,\n                   tcx: TyCtxt<'a, 'tcx, 'tcx>)"}, {"sha": "78578ca179c8218505122361f99002f79b147965", "filename": "src/librustc_metadata/encoder.rs", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fencoder.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -974,17 +974,6 @@ impl<'a, 'b: 'a, 'tcx: 'b> IsolatedEncoder<'a, 'b, 'tcx> {\n                     ctor_sig: None,\n                 }), repr_options)\n             }\n-            hir::ItemAutoImpl(..) => {\n-                let data = ImplData {\n-                    polarity: hir::ImplPolarity::Positive,\n-                    defaultness: hir::Defaultness::Final,\n-                    parent_impl: None,\n-                    coerce_unsized_info: None,\n-                    trait_ref: tcx.impl_trait_ref(def_id).map(|trait_ref| self.lazy(&trait_ref)),\n-                };\n-\n-                EntryKind::AutoImpl(self.lazy(&data))\n-            }\n             hir::ItemImpl(_, polarity, defaultness, ..) => {\n                 let trait_ref = tcx.impl_trait_ref(def_id);\n                 let parent = if let Some(trait_ref) = trait_ref {\n@@ -1579,7 +1568,6 @@ impl<'a, 'b, 'tcx> IndexBuilder<'a, 'b, 'tcx> {\n             hir::ItemGlobalAsm(..) |\n             hir::ItemExternCrate(..) |\n             hir::ItemUse(..) |\n-            hir::ItemAutoImpl(..) |\n             hir::ItemTy(..) |\n             hir::ItemTraitAlias(..) => {\n                 // no sub-item recording needed in these cases"}, {"sha": "c542f65dcecf370609dab3821414dd6f2a43e23b", "filename": "src/librustc_metadata/schema.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fschema.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_metadata%2Fschema.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fschema.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -303,7 +303,6 @@ pub enum EntryKind<'tcx> {\n     Generator(Lazy<GeneratorData<'tcx>>),\n     Trait(Lazy<TraitData<'tcx>>),\n     Impl(Lazy<ImplData<'tcx>>),\n-    AutoImpl(Lazy<ImplData<'tcx>>),\n     Method(Lazy<MethodData<'tcx>>),\n     AssociatedType(AssociatedContainer),\n     AssociatedConst(AssociatedContainer, u8),\n@@ -359,7 +358,6 @@ impl<'gcx> HashStable<StableHashingContext<'gcx>> for EntryKind<'gcx> {\n             EntryKind::Trait(ref trait_data) => {\n                 trait_data.hash_stable(hcx, hasher);\n             }\n-            EntryKind::AutoImpl(ref impl_data) |\n             EntryKind::Impl(ref impl_data) => {\n                 impl_data.hash_stable(hcx, hasher);\n             }"}, {"sha": "f16187797d4e5127d2f6544683207a8cc244cb5c", "filename": "src/librustc_mir/monomorphize/collector.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -910,7 +910,6 @@ impl<'b, 'a, 'v> ItemLikeVisitor<'v> for RootCollector<'b, 'a, 'v> {\n             hir::ItemUse(..)         |\n             hir::ItemForeignMod(..)  |\n             hir::ItemTy(..)          |\n-            hir::ItemAutoImpl(..) |\n             hir::ItemTrait(..)       |\n             hir::ItemTraitAlias(..)  |\n             hir::ItemMod(..)         => {"}, {"sha": "d929bae7f68a1fbf9cb6f225bb58f035c5638008", "filename": "src/librustc_passes/ast_validation.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_passes%2Fast_validation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_passes%2Fast_validation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fast_validation.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -229,9 +229,6 @@ impl<'a> Visitor<'a> for AstValidator<'a> {\n                                         item.span,\n                                         Some(\"place qualifiers on individual impl items instead\"));\n             }\n-            ItemKind::AutoImpl(..) => {\n-                self.invalid_visibility(&item.vis, item.span, None);\n-            }\n             ItemKind::ForeignMod(..) => {\n                 self.invalid_visibility(&item.vis,\n                                         item.span,"}, {"sha": "b525ab852a7e551c70379a3e24ae0520731ddae4", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -147,10 +147,6 @@ impl<'a, 'tcx> Visitor<'tcx> for EmbargoVisitor<'a, 'tcx> {\n                 let def_id = self.tcx.hir.local_def_id(item.id);\n                 cmp::min(self.item_ty_level(def_id), self.impl_trait_level(def_id))\n             }\n-            hir::ItemAutoImpl(..) => {\n-                let def_id = self.tcx.hir.local_def_id(item.id);\n-                self.impl_trait_level(def_id)\n-            }\n             // Foreign mods inherit level from parents\n             hir::ItemForeignMod(..) => {\n                 self.prev_level\n@@ -214,7 +210,7 @@ impl<'a, 'tcx> Visitor<'tcx> for EmbargoVisitor<'a, 'tcx> {\n             }\n             hir::ItemUse(..) | hir::ItemStatic(..) | hir::ItemConst(..) |\n             hir::ItemGlobalAsm(..) | hir::ItemTy(..) | hir::ItemMod(..) | hir::ItemTraitAlias(..) |\n-            hir::ItemFn(..) | hir::ItemExternCrate(..) | hir::ItemAutoImpl(..) => {}\n+            hir::ItemFn(..) | hir::ItemExternCrate(..) => {}\n         }\n \n         // Mark all items in interfaces of reachable items as reachable\n@@ -226,8 +222,6 @@ impl<'a, 'tcx> Visitor<'tcx> for EmbargoVisitor<'a, 'tcx> {\n             // Reexports are handled in visit_mod\n             hir::ItemUse(..) => {}\n             // The interface is empty\n-            hir::ItemAutoImpl(..) => {}\n-            // The interface is empty\n             hir::ItemGlobalAsm(..) => {}\n             // Visit everything\n             hir::ItemConst(..) | hir::ItemStatic(..) |\n@@ -1571,8 +1565,6 @@ impl<'a, 'tcx> Visitor<'tcx> for PrivateItemsInPublicInterfacesVisitor<'a, 'tcx>\n                     self.check(field.id, min(item_visibility, field_visibility)).ty();\n                 }\n             }\n-            // The interface is empty\n-            hir::ItemAutoImpl(..) => {}\n             // An inherent impl is public when its type is public\n             // Subitems of inherent impls have their own publicity\n             hir::ItemImpl(.., None, _, ref impl_item_refs) => {"}, {"sha": "10bd72ac4a00afb10912d2ef087e07b92f78b93e", "filename": "src/librustc_resolve/build_reduced_graph.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fbuild_reduced_graph.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -400,7 +400,7 @@ impl<'a> Resolver<'a> {\n                 self.insert_field_names(item_def_id, field_names);\n             }\n \n-            ItemKind::AutoImpl(..) | ItemKind::Impl(..) => {}\n+            ItemKind::Impl(..) => {}\n \n             ItemKind::Trait(..) => {\n                 let def_id = self.definitions.local_def_id(item.id);"}, {"sha": "0a29441cef7efdfe7395d53fcc41a47242101c15", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1902,12 +1902,6 @@ impl<'a> Resolver<'a> {\n                                              |this| visit::walk_item(this, item));\n             }\n \n-            ItemKind::AutoImpl(_, ref trait_ref) => {\n-                self.with_optional_trait_ref(Some(trait_ref), |this, _| {\n-                    // Resolve type arguments in trait path\n-                    visit::walk_trait_ref(this, trait_ref);\n-                });\n-            }\n             ItemKind::Impl(.., ref generics, ref opt_trait_ref, ref self_type, ref impl_items) =>\n                 self.resolve_implementation(generics,\n                                             opt_trait_ref,"}, {"sha": "0c890ce19d0818c605c01e193c06be72d5cf82e6", "filename": "src/librustc_save_analysis/sig.rs", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_save_analysis%2Fsig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_save_analysis%2Fsig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fsig.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -511,17 +511,6 @@ impl Sig for ast::Item {\n \n                 Ok(sig)\n             }\n-            ast::ItemKind::AutoImpl(unsafety, ref trait_ref) => {\n-                let mut text = String::new();\n-                if unsafety == ast::Unsafety::Unsafe {\n-                    text.push_str(\"unsafe \");\n-                }\n-                text.push_str(\"impl \");\n-                let trait_sig = trait_ref.path.make(offset + text.len(), id, scx)?;\n-                text.push_str(&trait_sig.text);\n-                text.push_str(\" for .. {}\");\n-                Ok(replace_text(trait_sig, text))\n-            }\n             ast::ItemKind::Impl(\n                 unsafety,\n                 polarity,"}, {"sha": "952c0e18644c36b56437ad301151c9b872fd590a", "filename": "src/librustc_typeck/coherence/mod.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -131,7 +131,6 @@ pub fn check_coherence<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>) {\n \n     unsafety::check(tcx);\n     orphan::check(tcx);\n-    overlap::check_auto_impls(tcx);\n \n     // these queries are executed for side-effects (error reporting):\n     ty::maps::queries::crate_inherent_impls::ensure(tcx, LOCAL_CRATE);"}, {"sha": "ab19a862a66fdfc3944da5cdf5b51829910bb475", "filename": "src/librustc_typeck/coherence/orphan.rs", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -142,24 +142,6 @@ impl<'cx, 'tcx, 'v> ItemLikeVisitor<'v> for OrphanChecker<'cx, 'tcx> {\n                     }\n                 }\n             }\n-            hir::ItemAutoImpl(_, ref item_trait_ref) => {\n-                // \"Trait\" impl\n-                debug!(\"coherence2::orphan check: default trait impl {}\",\n-                       self.tcx.hir.node_to_string(item.id));\n-                let trait_ref = self.tcx.impl_trait_ref(def_id).unwrap();\n-                if !trait_ref.def_id.is_local() {\n-                    struct_span_err!(self.tcx.sess,\n-                                     item_trait_ref.path.span,\n-                                     E0318,\n-                                     \"cannot create default implementations for traits outside \\\n-                                      the crate they're defined in; define a new trait instead\")\n-                        .span_label(item_trait_ref.path.span,\n-                                    format!(\"`{}` trait not defined in this crate\",\n-                            self.tcx.hir.node_to_pretty_string(item_trait_ref.ref_id)))\n-                        .emit();\n-                    return;\n-                }\n-            }\n             _ => {\n                 // Not an impl\n             }"}, {"sha": "8c7db918f5ac281af7a1a771629a897789861eca", "filename": "src/librustc_typeck/coherence/overlap.rs", "status": "modified", "additions": 0, "deletions": 52, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -15,16 +15,6 @@\n use rustc::traits;\n use rustc::ty::{self, TyCtxt, TypeFoldable};\n use syntax::ast;\n-use rustc::hir;\n-use rustc::hir::itemlikevisit::ItemLikeVisitor;\n-\n-pub fn check_auto_impls<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>) {\n-    let mut overlap = OverlapChecker { tcx };\n-\n-    // this secondary walk specifically checks for some other cases,\n-    // like defaulted traits, for which additional overlap rules exist\n-    tcx.hir.krate().visit_all_item_likes(&mut overlap);\n-}\n \n pub fn check_impl<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>, node_id: ast::NodeId) {\n     let impl_def_id = tcx.hir.local_def_id(node_id);\n@@ -66,45 +56,3 @@ pub fn check_impl<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>, node_id: ast::NodeId) {\n         }\n     }\n }\n-\n-struct OverlapChecker<'cx, 'tcx: 'cx> {\n-    tcx: TyCtxt<'cx, 'tcx, 'tcx>,\n-}\n-\n-impl<'cx, 'tcx, 'v> ItemLikeVisitor<'v> for OverlapChecker<'cx, 'tcx> {\n-    fn visit_item(&mut self, item: &'v hir::Item) {\n-        match item.node {\n-            hir::ItemAutoImpl(..) => {\n-                // look for another auto impl; note that due to the\n-                // general orphan/coherence rules, it must always be\n-                // in this crate.\n-                let impl_def_id = self.tcx.hir.local_def_id(item.id);\n-                let trait_ref = self.tcx.impl_trait_ref(impl_def_id).unwrap();\n-\n-                let prev_id = self.tcx.hir.trait_auto_impl(trait_ref.def_id).unwrap();\n-                if prev_id != item.id {\n-                    let mut err = struct_span_err!(self.tcx.sess,\n-                                                   self.tcx.span_of_impl(impl_def_id).unwrap(),\n-                                                   E0521,\n-                                                   \"redundant auto implementations of trait \\\n-                                                    `{}`:\",\n-                                                   trait_ref);\n-                    err.span_note(self.tcx\n-                                      .span_of_impl(self.tcx.hir.local_def_id(prev_id))\n-                                      .unwrap(),\n-                                  \"redundant implementation is here:\");\n-                    err.emit();\n-                }\n-            }\n-            hir::ItemImpl(.., Some(_), _, _) => {\n-            }\n-            _ => {}\n-        }\n-    }\n-\n-    fn visit_trait_item(&mut self, _trait_item: &hir::TraitItem) {\n-    }\n-\n-    fn visit_impl_item(&mut self, _impl_item: &hir::ImplItem) {\n-    }\n-}"}, {"sha": "c924a3364ebf0003e888a886b99ba6b3eb11c910", "filename": "src/librustc_typeck/coherence/unsafety.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Funsafety.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcoherence%2Funsafety.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Funsafety.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -84,9 +84,6 @@ impl<'cx, 'tcx, 'v> UnsafetyChecker<'cx, 'tcx> {\n impl<'cx, 'tcx, 'v> ItemLikeVisitor<'v> for UnsafetyChecker<'cx, 'tcx> {\n     fn visit_item(&mut self, item: &'v hir::Item) {\n         match item.node {\n-            hir::ItemAutoImpl(unsafety, _) => {\n-                self.check_unsafety_coherence(item, None, unsafety, hir::ImplPolarity::Positive);\n-            }\n             hir::ItemImpl(unsafety, polarity, _, ref generics, ..) => {\n                 self.check_unsafety_coherence(item, Some(generics), unsafety, polarity);\n             }"}, {"sha": "fcce25d371d2dccac1a3587d6ee898026bf039b6", "filename": "src/librustc_typeck/collect.rs", "status": "modified", "additions": 48, "deletions": 18, "changes": 66, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcollect.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -73,7 +73,6 @@ pub fn provide(providers: &mut Providers) {\n         impl_trait_ref,\n         impl_polarity,\n         is_foreign_item,\n-        is_auto_impl,\n         ..*providers\n     };\n }\n@@ -424,9 +423,6 @@ fn convert_item<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>, item_id: ast::NodeId) {\n             tcx.predicates_of(def_id);\n             convert_enum_variant_types(tcx, def_id, &enum_definition.variants);\n         },\n-        hir::ItemAutoImpl(..) => {\n-            tcx.impl_trait_ref(def_id);\n-        }\n         hir::ItemImpl(..) => {\n             tcx.generics_of(def_id);\n             tcx.type_of(def_id);\n@@ -1109,7 +1105,6 @@ fn type_of<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n                     let substs = Substs::identity_for_item(tcx, def_id);\n                     tcx.mk_adt(def, substs)\n                 }\n-                ItemAutoImpl(..) |\n                 ItemTrait(..) | ItemTraitAlias(..) |\n                 ItemMod(..) |\n                 ItemForeignMod(..) |\n@@ -1278,11 +1273,6 @@ fn impl_trait_ref<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n \n     let node_id = tcx.hir.as_local_node_id(def_id).unwrap();\n     match tcx.hir.expect_item(node_id).node {\n-        hir::ItemAutoImpl(_, ref ast_trait_ref) => {\n-            Some(AstConv::instantiate_mono_trait_ref(&icx,\n-                                                     ast_trait_ref,\n-                                                     tcx.mk_self_type()))\n-        }\n         hir::ItemImpl(.., ref opt_trait_ref, _, _) => {\n             opt_trait_ref.as_ref().map(|ast_trait_ref| {\n                 let selfty = tcx.type_of(def_id);\n@@ -1729,13 +1719,53 @@ fn is_foreign_item<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n     }\n }\n \n-fn is_auto_impl<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-                             def_id: DefId)\n-                             -> bool {\n-    match tcx.hir.get_if_local(def_id) {\n-        Some(hir_map::NodeItem(&hir::Item { node: hir::ItemAutoImpl(..), .. }))\n-             => true,\n-        Some(_) => false,\n-        _ => bug!(\"is_auto_impl applied to non-local def-id {:?}\", def_id)\n+struct ImplTraitUniversalInfo<'hir> {\n+    id: ast::NodeId,\n+    def_id: DefId,\n+    span: Span,\n+    bounds: &'hir [hir::TyParamBound],\n+}\n+\n+/// Take some possible list of arguments and return the DefIds of the ImplTraitUniversal\n+/// arguments\n+fn extract_universal_impl_trait_info<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n+                                               opt_inputs: Option<&'tcx [P<hir::Ty>]>)\n+                                               -> Vec<ImplTraitUniversalInfo<'tcx>>\n+{\n+    // A visitor for simply collecting Universally quantified impl Trait arguments\n+    struct ImplTraitUniversalVisitor<'tcx> {\n+        items: Vec<&'tcx hir::Ty>\n     }\n+\n+    impl<'tcx> Visitor<'tcx> for ImplTraitUniversalVisitor<'tcx> {\n+        fn nested_visit_map<'this>(&'this mut self) -> NestedVisitorMap<'this, 'tcx> {\n+            NestedVisitorMap::None\n+        }\n+\n+        fn visit_ty(&mut self, ty: &'tcx hir::Ty) {\n+            if let hir::TyImplTraitUniversal(..) = ty.node {\n+                self.items.push(ty);\n+            }\n+            intravisit::walk_ty(self, ty);\n+        }\n+    }\n+\n+    let mut visitor = ImplTraitUniversalVisitor { items: Vec::new() };\n+\n+    if let Some(inputs) = opt_inputs {\n+        for t in inputs.iter() {\n+            visitor.visit_ty(t);\n+        }\n+    }\n+\n+    visitor.items.into_iter().map(|ty| if let hir::TyImplTraitUniversal(_, ref bounds) = ty.node {\n+        ImplTraitUniversalInfo {\n+            id: ty.id,\n+            def_id: tcx.hir.local_def_id(ty.id),\n+            span: ty.span,\n+            bounds: bounds\n+        }\n+    } else {\n+        span_bug!(ty.span, \"this type should be a universally quantified impl trait. this is a bug\")\n+    }).collect()\n }"}, {"sha": "0d0928e74e21d12ce90a02f758f0d3142bbcbe92", "filename": "src/librustc_typeck/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustc_typeck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fdiagnostics.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1854,14 +1854,12 @@ unsafe impl !Clone for Foo { }\n \n This will compile:\n \n-```ignore (ignore auto_trait future compatibility warning)\n+```\n #![feature(optin_builtin_traits)]\n \n struct Foo;\n \n-trait Enterprise {}\n-\n-impl Enterprise for .. { }\n+auto trait Enterprise {}\n \n impl !Enterprise for Foo { }\n ```"}, {"sha": "496389da7f2f165c8b8a04edc68aa99bdf90e7eb", "filename": "src/librustdoc/clean/inline.rs", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fclean%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fclean%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Finline.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -300,27 +300,6 @@ pub fn build_impl(cx: &DocContext, did: DefId, ret: &mut Vec<clean::Item>) {\n         }\n     }\n \n-    // If this is an auto impl, then bail out early here\n-    if tcx.is_auto_impl(did) {\n-        return ret.push(clean::Item {\n-            inner: clean::AutoImplItem(clean::AutoImpl {\n-                // FIXME: this should be decoded\n-                unsafety: hir::Unsafety::Normal,\n-                trait_: match associated_trait.as_ref().unwrap().clean(cx) {\n-                    clean::TraitBound(polyt, _) => polyt.trait_,\n-                    clean::RegionBound(..) => unreachable!(),\n-                },\n-            }),\n-            source: tcx.def_span(did).clean(cx),\n-            name: None,\n-            attrs,\n-            visibility: Some(clean::Inherited),\n-            stability: tcx.lookup_stability(did).clean(cx),\n-            deprecation: tcx.lookup_deprecation(did).clean(cx),\n-            def_id: did,\n-        });\n-    }\n-\n     let for_ = tcx.type_of(did).clean(cx);\n \n     // Only inline impl if the implementing type is"}, {"sha": "5f94bb4a56f46755583011bae1afd2ce468e668b", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -430,7 +430,6 @@ pub enum ItemEnum {\n     PrimitiveItem(PrimitiveType),\n     AssociatedConstItem(Type, Option<String>),\n     AssociatedTypeItem(Vec<TyParamBound>, Option<Type>),\n-    AutoImplItem(AutoImpl),\n     /// An item that has been stripped by a rustdoc pass\n     StrippedItem(Box<ItemEnum>),\n }\n@@ -2941,30 +2940,6 @@ fn build_deref_target_impls(cx: &DocContext,\n     }\n }\n \n-#[derive(Clone, RustcEncodable, RustcDecodable, Debug)]\n-pub struct AutoImpl {\n-    pub unsafety: hir::Unsafety,\n-    pub trait_: Type,\n-}\n-\n-impl Clean<Item> for doctree::AutoImpl {\n-    fn clean(&self, cx: &DocContext) -> Item {\n-        Item {\n-            name: None,\n-            attrs: self.attrs.clean(cx),\n-            source: self.whence.clean(cx),\n-            def_id: cx.tcx.hir.local_def_id(self.id),\n-            visibility: Some(Public),\n-            stability: None,\n-            deprecation: None,\n-            inner: AutoImplItem(AutoImpl {\n-                unsafety: self.unsafety,\n-                trait_: self.trait_.clean(cx),\n-            }),\n-        }\n-    }\n-}\n-\n impl Clean<Item> for doctree::ExternCrate {\n     fn clean(&self, cx: &DocContext) -> Item {\n         Item {"}, {"sha": "b5c173b15d6d8f5099e4400a806b7396a1cea722", "filename": "src/librustdoc/doctree.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fdoctree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fdoctree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctree.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -44,7 +44,6 @@ pub struct Module {\n     pub stab: Option<attr::Stability>,\n     pub depr: Option<attr::Deprecation>,\n     pub impls: Vec<Impl>,\n-    pub def_traits: Vec<AutoImpl>,\n     pub foreigns: Vec<hir::ForeignMod>,\n     pub macros: Vec<Macro>,\n     pub is_crate: bool,\n@@ -227,14 +226,6 @@ pub struct Impl {\n     pub id: ast::NodeId,\n }\n \n-pub struct AutoImpl {\n-    pub unsafety: hir::Unsafety,\n-    pub trait_: hir::TraitRef,\n-    pub id: ast::NodeId,\n-    pub attrs: hir::HirVec<ast::Attribute>,\n-    pub whence: Span,\n-}\n-\n // For Macro we store the DefId instead of the NodeId, since we also create\n // these imported macro_rules (which only have a DUMMY_NODE_ID).\n pub struct Macro {"}, {"sha": "81087cd412e2c281db1b10af598964147327257b", "filename": "src/librustdoc/html/item_type.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fhtml%2Fitem_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fhtml%2Fitem_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fitem_type.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -82,7 +82,6 @@ impl<'a> From<&'a clean::Item> for ItemType {\n             clean::PrimitiveItem(..)       => ItemType::Primitive,\n             clean::AssociatedConstItem(..) => ItemType::AssociatedConst,\n             clean::AssociatedTypeItem(..)  => ItemType::AssociatedType,\n-            clean::AutoImplItem(..)        => ItemType::Impl,\n             clean::ForeignTypeItem         => ItemType::ForeignType,\n             clean::StrippedItem(..)        => unreachable!(),\n         }"}, {"sha": "6e4980c9e919b5596f4917b27b0be4bd43fa9523", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1964,12 +1964,8 @@ fn item_module(w: &mut fmt::Formatter, cx: &Context,\n                item: &clean::Item, items: &[clean::Item]) -> fmt::Result {\n     document(w, cx, item)?;\n \n-    let mut indices = (0..items.len()).filter(|i| {\n-        if let clean::AutoImplItem(..) = items[*i].inner {\n-            return false;\n-        }\n-        !items[*i].is_stripped()\n-    }).collect::<Vec<usize>>();\n+    let mut indices = (0..items.len()).filter(|i| !items[*i].is_stripped())\n+                                      .collect::<Vec<usize>>();\n \n     // the order of item types in the listing\n     fn reorder(ty: ItemType) -> u8 {\n@@ -3973,13 +3969,7 @@ fn sidebar_module(fmt: &mut fmt::Formatter, _it: &clean::Item,\n                    ItemType::Function, ItemType::Typedef, ItemType::Union, ItemType::Impl,\n                    ItemType::TyMethod, ItemType::Method, ItemType::StructField, ItemType::Variant,\n                    ItemType::AssociatedType, ItemType::AssociatedConst, ItemType::ForeignType] {\n-        if items.iter().any(|it| {\n-            if let clean::AutoImplItem(..) = it.inner {\n-                false\n-            } else {\n-                !it.is_stripped() && it.type_() == myty\n-            }\n-        }) {\n+        if items.iter().any(|it| !it.is_stripped() && it.type_() == myty) {\n             let (short, name) = match myty {\n                 ItemType::ExternCrate |\n                 ItemType::Import          => (\"reexports\", \"Reexports\"),"}, {"sha": "32f0bcada1d20924414211dcdd462dc7c7bdbe0c", "filename": "src/librustdoc/passes/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fmod.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -116,7 +116,7 @@ impl<'a> fold::DocFolder for Stripper<'a> {\n             // handled in the `strip-priv-imports` pass\n             clean::ExternCrateItem(..) | clean::ImportItem(..) => {}\n \n-            clean::AutoImplItem(..) | clean::ImplItem(..) => {}\n+            clean::ImplItem(..) => {}\n \n             // tymethods/macros have no control over privacy\n             clean::MacroItem(..) | clean::TyMethodItem(..) => {}"}, {"sha": "95531b468f41e24735af46cd1029319f706dcd01", "filename": "src/librustdoc/visit_ast.rs", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fvisit_ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibrustdoc%2Fvisit_ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fvisit_ast.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -548,19 +548,6 @@ impl<'a, 'tcx> RustdocVisitor<'a, 'tcx> {\n                     om.impls.push(i);\n                 }\n             },\n-            hir::ItemAutoImpl(unsafety, ref trait_ref) => {\n-                // See comment above about ItemImpl.\n-                if !self.inlining {\n-                    let i = AutoImpl {\n-                        unsafety,\n-                        trait_: trait_ref.clone(),\n-                        id: item.id,\n-                        attrs: item.attrs.clone(),\n-                        whence: item.span,\n-                    };\n-                    om.def_traits.push(i);\n-                }\n-            }\n         }\n     }\n "}, {"sha": "1be3844e29a1c6ea6b357826275bf1aba451e5ce", "filename": "src/libstd/panic.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibstd%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibstd%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpanic.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -187,10 +187,7 @@ pub struct AssertUnwindSafe<T>(\n // * Unique, an owning pointer, lifts an implementation\n // * Types like Mutex/RwLock which are explicilty poisoned are unwind safe\n // * Our custom AssertUnwindSafe wrapper is indeed unwind safe\n-#[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-impl UnwindSafe for .. {}\n+\n #[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n impl<'a, T: ?Sized> !UnwindSafe for &'a mut T {}\n #[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n@@ -219,14 +216,10 @@ impl<T: RefUnwindSafe + ?Sized> UnwindSafe for Rc<T> {}\n impl<T: RefUnwindSafe + ?Sized> UnwindSafe for Arc<T> {}\n \n // Pretty simple implementations for the `RefUnwindSafe` marker trait,\n-// basically just saying that this is a marker trait and `UnsafeCell` is the\n+// basically just saying that `UnsafeCell` is the\n // only thing which doesn't implement it (which then transitively applies to\n // everything else).\n #[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-impl RefUnwindSafe for .. {}\n-#[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n impl<T: ?Sized> !RefUnwindSafe for UnsafeCell<T> {}\n #[stable(feature = \"catch_unwind\", since = \"1.9.0\")]\n impl<T> RefUnwindSafe for AssertUnwindSafe<T> {}"}, {"sha": "9c0622e7bef9740a16b7112debd5d5ef6be14753", "filename": "src/libsyntax/ast.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -2022,10 +2022,6 @@ pub enum ItemKind {\n     ///\n     /// E.g. `trait Foo = Bar + Quux;`\n     TraitAlias(Generics, TyParamBounds),\n-    /// Auto trait implementation.\n-    ///\n-    /// E.g. `impl Trait for .. {}` or `impl<T> Trait<T> for .. {}`\n-    AutoImpl(Unsafety, TraitRef),\n     /// An implementation.\n     ///\n     /// E.g. `impl<A> Foo<A> { .. }` or `impl<A> Trait for Foo<A> { .. }`\n@@ -2064,8 +2060,7 @@ impl ItemKind {\n             ItemKind::TraitAlias(..) => \"trait alias\",\n             ItemKind::Mac(..) |\n             ItemKind::MacroDef(..) |\n-            ItemKind::Impl(..) |\n-            ItemKind::AutoImpl(..) => \"item\"\n+            ItemKind::Impl(..) => \"item\"\n         }\n     }\n }"}, {"sha": "54bec257df0c461001eeee3c774313e034fe49f7", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1540,13 +1540,6 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n                                    \"trait aliases are not yet fully implemented\");\n             }\n \n-            ast::ItemKind::AutoImpl(..) => {\n-                gate_feature_post!(&self, optin_builtin_traits,\n-                                   i.span,\n-                                   \"auto trait implementations are experimental \\\n-                                    and possibly buggy\");\n-            }\n-\n             ast::ItemKind::Impl(_, polarity, defaultness, _, _, _, ref impl_items) => {\n                 if polarity == ast::ImplPolarity::Negative {\n                     gate_feature_post!(&self, optin_builtin_traits,"}, {"sha": "c304e3a9f50525c86e8bc4f40df8b5671e78503d", "filename": "src/libsyntax/fold.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffold.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -911,9 +911,6 @@ pub fn noop_fold_item_kind<T: Folder>(i: ItemKind, folder: &mut T) -> ItemKind {\n             let generics = folder.fold_generics(generics);\n             ItemKind::Union(folder.fold_variant_data(struct_def), generics)\n         }\n-        ItemKind::AutoImpl(unsafety, ref trait_ref) => {\n-            ItemKind::AutoImpl(unsafety, folder.fold_trait_ref((*trait_ref).clone()))\n-        }\n         ItemKind::Impl(unsafety,\n                        polarity,\n                        defaultness,"}, {"sha": "b2d663865827a795b1956ef6339343e2ecb5db48", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 19, "deletions": 38, "changes": 57, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -5374,11 +5374,9 @@ impl<'a> Parser<'a> {\n     /// Parses items implementations variants\n     ///    impl<T> Foo { ... }\n     ///    impl<T> ToString for &'static T { ... }\n-    ///    impl Send for .. {}\n     fn parse_item_impl(&mut self,\n                        unsafety: ast::Unsafety,\n                        defaultness: Defaultness) -> PResult<'a, ItemInfo> {\n-        let impl_span = self.span;\n \n         // First, parse type parameters if necessary.\n         let mut generics = self.parse_generics()?;\n@@ -5421,48 +5419,31 @@ impl<'a> Parser<'a> {\n             None\n         };\n \n-        if opt_trait.is_some() && self.eat(&token::DotDot) {\n-            if generics.is_parameterized() {\n-                self.span_err(impl_span, \"auto trait implementations are not \\\n-                                          allowed to have generics\");\n-            }\n-\n-            if let ast::Defaultness::Default = defaultness {\n-                self.span_err(impl_span, \"`default impl` is not allowed for \\\n-                                         auto trait implementations\");\n-            }\n-\n-            self.expect(&token::OpenDelim(token::Brace))?;\n-            self.expect(&token::CloseDelim(token::Brace))?;\n-            Ok((keywords::Invalid.ident(),\n-             ItemKind::AutoImpl(unsafety, opt_trait.unwrap()), None))\n-        } else {\n-            if opt_trait.is_some() {\n-                ty = self.parse_ty()?;\n-            }\n-            generics.where_clause = self.parse_where_clause()?;\n+        if opt_trait.is_some() {\n+            ty = self.parse_ty()?;\n+        }\n+        generics.where_clause = self.parse_where_clause()?;\n \n-            self.expect(&token::OpenDelim(token::Brace))?;\n-            let attrs = self.parse_inner_attributes()?;\n+        self.expect(&token::OpenDelim(token::Brace))?;\n+        let attrs = self.parse_inner_attributes()?;\n \n-            let mut impl_items = vec![];\n-            while !self.eat(&token::CloseDelim(token::Brace)) {\n-                let mut at_end = false;\n-                match self.parse_impl_item(&mut at_end) {\n-                    Ok(item) => impl_items.push(item),\n-                    Err(mut e) => {\n-                        e.emit();\n-                        if !at_end {\n-                            self.recover_stmt_(SemiColonMode::Break, BlockMode::Break);\n-                        }\n+        let mut impl_items = vec![];\n+        while !self.eat(&token::CloseDelim(token::Brace)) {\n+            let mut at_end = false;\n+            match self.parse_impl_item(&mut at_end) {\n+                Ok(item) => impl_items.push(item),\n+                Err(mut e) => {\n+                    e.emit();\n+                    if !at_end {\n+                        self.recover_stmt_(SemiColonMode::Break, BlockMode::Break);\n                     }\n                 }\n             }\n-\n-            Ok((keywords::Invalid.ident(),\n-             ItemKind::Impl(unsafety, polarity, defaultness, generics, opt_trait, ty, impl_items),\n-             Some(attrs)))\n         }\n+\n+        Ok((keywords::Invalid.ident(),\n+            ItemKind::Impl(unsafety, polarity, defaultness, generics, opt_trait, ty, impl_items),\n+            Some(attrs)))\n     }\n \n     fn parse_late_bound_lifetime_defs(&mut self) -> PResult<'a, Vec<GenericParam>> {"}, {"sha": "5374bf180f49a1172228dc1ac3d52b883638b438", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -1294,18 +1294,6 @@ impl<'a> State<'a> {\n                 self.head(&visibility_qualified(&item.vis, \"union\"))?;\n                 self.print_struct(struct_def, generics, item.ident, item.span, true)?;\n             }\n-            ast::ItemKind::AutoImpl(unsafety, ref trait_ref) => {\n-                self.head(\"\")?;\n-                self.print_visibility(&item.vis)?;\n-                self.print_unsafety(unsafety)?;\n-                self.word_nbsp(\"impl\")?;\n-                self.print_trait_ref(trait_ref)?;\n-                self.s.space()?;\n-                self.word_space(\"for\")?;\n-                self.word_space(\"..\")?;\n-                self.bopen()?;\n-                self.bclose(item.span)?;\n-            }\n             ast::ItemKind::Impl(unsafety,\n                           polarity,\n                           defaultness,"}, {"sha": "b5fc9236ad39a895b97f9d4215546e943f1eca3f", "filename": "src/libsyntax/visit.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Flibsyntax%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fvisit.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -259,9 +259,6 @@ pub fn walk_item<'a, V: Visitor<'a>>(visitor: &mut V, item: &'a Item) {\n             visitor.visit_generics(type_parameters);\n             visitor.visit_enum_def(enum_definition, type_parameters, item.id, item.span)\n         }\n-        ItemKind::AutoImpl(_, ref trait_ref) => {\n-            visitor.visit_trait_ref(trait_ref)\n-        }\n         ItemKind::Impl(_, _, _,\n                  ref type_parameters,\n                  ref opt_trait_reference,"}, {"sha": "7d5581bb774b03132b384146479f6004ac46b417", "filename": "src/rtstartup/rsbegin.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Frtstartup%2Frsbegin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Frtstartup%2Frsbegin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frtstartup%2Frsbegin.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -30,17 +30,11 @@\n #[lang = \"sized\"]\n trait Sized {}\n #[lang = \"sync\"]\n-trait Sync {}\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-impl Sync for .. {}\n+auto trait Sync {}\n #[lang = \"copy\"]\n trait Copy {}\n #[lang = \"freeze\"]\n-trait Freeze {}\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-impl Freeze for .. {}\n+auto trait Freeze {}\n \n #[lang = \"drop_in_place\"]\n #[inline]"}, {"sha": "f487f1d410e03874ea65cadac68c1824f28f2bbb", "filename": "src/rtstartup/rsend.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Frtstartup%2Frsend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f93183adb43cff4cc0972ce133ce077f8cae1656/src%2Frtstartup%2Frsend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frtstartup%2Frsend.rs?ref=f93183adb43cff4cc0972ce133ce077f8cae1656", "patch": "@@ -22,10 +22,7 @@ impl<T> Sync for T {}\n #[lang = \"copy\"]\n trait Copy {}\n #[lang = \"freeze\"]\n-trait Freeze {}\n-#[allow(unknown_lints)]\n-#[allow(auto_impl)]\n-impl Freeze for .. {}\n+auto trait Freeze {}\n \n #[lang = \"drop_in_place\"]\n #[inline]"}, {"sha": "45303cbf70025c2e283dbd422631888da47479ff", "filename": "src/test/compile-fail/syntaxt-default-trait-impls.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d/src%2Ftest%2Fcompile-fail%2Fsyntaxt-default-trait-impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d/src%2Ftest%2Fcompile-fail%2Fsyntaxt-default-trait-impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fsyntaxt-default-trait-impls.rs?ref=9b2f8ac29eca4a42c35ce32b13231fcc1f9a3c9d", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-#![feature(optin_builtin_traits)]\n-\n-trait MyAutoImpl {}\n-\n-#[allow(auto_impl)]\n-impl<T> MyAutoImpl for .. {}\n-//~^ ERROR auto trait implementations are not allowed to have generics\n-\n-fn main() {}"}]}