{"sha": "5bd4e27db235bb857066e43384d483aa9dbdf56e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViZDRlMjdkYjIzNWJiODU3MDY2ZTQzMzg0ZDQ4M2FhOWRiZGY1NmU=", "commit": {"author": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2017-04-14T09:27:35Z"}, "committer": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2017-04-23T20:00:02Z"}, "message": "FIN: update appveyor mingw description", "tree": {"sha": "e4e045bcd7d85d9fb2236d0c92c1dbff2bfa39b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4e045bcd7d85d9fb2236d0c92c1dbff2bfa39b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bd4e27db235bb857066e43384d483aa9dbdf56e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bd4e27db235bb857066e43384d483aa9dbdf56e", "html_url": "https://github.com/rust-lang/rust/commit/5bd4e27db235bb857066e43384d483aa9dbdf56e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bd4e27db235bb857066e43384d483aa9dbdf56e/comments", "author": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5ae4a58c339a935fd098ba6ea8315af444113276", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ae4a58c339a935fd098ba6ea8315af444113276", "html_url": "https://github.com/rust-lang/rust/commit/5ae4a58c339a935fd098ba6ea8315af444113276"}], "stats": {"total": 21, "additions": 5, "deletions": 16}, "files": [{"sha": "450a489f0b1e203a29f83f8c1873d8c8318cab35", "filename": "appveyor.yml", "status": "modified", "additions": 5, "deletions": 16, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/5bd4e27db235bb857066e43384d483aa9dbdf56e/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5bd4e27db235bb857066e43384d483aa9dbdf56e/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=5bd4e27db235bb857066e43384d483aa9dbdf56e", "patch": "@@ -20,28 +20,17 @@ environment:\n \n   # 32/64-bit MinGW builds.\n   #\n-  # The MinGW builds unfortunately have to both download a custom toolchain and\n-  # avoid the one installed by AppVeyor by default. Interestingly, though, for\n-  # different reasons!\n+  # We are using MinGW with posix threads since LLVM does not compile with\n+  # the win32 threads version due to missing support for C++'s std::thread.\n   #\n-  # For 32-bit the installed gcc toolchain on AppVeyor uses the pthread\n-  # threading model. This is unfortunately not what we want, and if we compile\n-  # with it then there's lots of link errors in the standard library (undefined\n-  # references to pthread symbols).\n-  #\n-  # For 64-bit the installed gcc toolchain is currently 5.3.0 which\n-  # unfortunately segfaults on Windows with --enable-llvm-assertions (segfaults\n-  # in LLVM). See rust-lang/rust#28445 for more information, but to work around\n-  # this we go back in time to 4.9.2 specifically.\n+  # Instead of relying on the MinGW version installed on appveryor we download\n+  # and install one ourselves so we won't be surprised by changes to appveyor's\n+  # build image.\n   #\n   # Finally, note that the downloads below are all in the `rust-lang-ci` S3\n   # bucket, but they cleraly didn't originate there! The downloads originally\n   # came from the mingw-w64 SourceForge download site. Unfortunately\n   # SourceForge is notoriously flaky, so we mirror it on our own infrastructure.\n-  #\n-  # And as a final point of note, the 32-bit MinGW build using the makefiles do\n-  # *not* use debug assertions and llvm assertions. This is because they take\n-  # too long on appveyor and this is tested by rustbuild below.\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-ninja\n     SCRIPT: python x.py test"}]}