{"sha": "67b8f8b13ac0e54380b95885641bd2f6df4d0b2c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3YjhmOGIxM2FjMGU1NDM4MGI5NTg4NTY0MWJkMmY2ZGY0ZDBiMmM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-01T18:26:29Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-02T17:39:13Z"}, "message": "Display the name of the test being waited for before the result is in\n\nSo the test runner displays the name of the test, then waits for it to finish,\nthen displays the result. It worked this way before things were parallelized\nand it's just much friendlier this way.", "tree": {"sha": "66755e72e6aad8bc8127d39e4d956db48cbe38aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66755e72e6aad8bc8127d39e4d956db48cbe38aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c", "html_url": "https://github.com/rust-lang/rust/commit/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1702b8507df67ef664fc1c8b13a88e0e6b34bbdc", "url": "https://api.github.com/repos/rust-lang/rust/commits/1702b8507df67ef664fc1c8b13a88e0e6b34bbdc", "html_url": "https://github.com/rust-lang/rust/commit/1702b8507df67ef664fc1c8b13a88e0e6b34bbdc"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "753323c826446689fae95b4ce294d7d469892084", "filename": "src/lib/test.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c/src%2Flib%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67b8f8b13ac0e54380b95885641bd2f6df4d0b2c/src%2Flib%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftest.rs?ref=67b8f8b13ac0e54380b95885641bd2f6df4d0b2c", "patch": "@@ -121,8 +121,10 @@ fn run_tests_console_(opts: &test_opts, tests: &test_desc[],\n             st.total = ivec::len(filtered_tests);\n             st.out.write_line(#fmt(\"\\nrunning %u tests\", st.total));\n           }\n-          te_result(test, result) {\n+          te_wait(test) {\n             st.out.write_str(#fmt(\"test %s ... \", test.name));\n+          }\n+          te_result(test, result) {\n             alt result {\n               tr_ok. {\n                 st.passed += 1u;\n@@ -209,6 +211,7 @@ fn use_color() -> bool {\n \n tag testevent {\n     te_filtered(test_desc[]);\n+    te_wait(test_desc);\n     te_result(test_desc, test_result);\n }\n \n@@ -236,6 +239,7 @@ fn run_tests(opts: &test_opts, tests: &test_desc[],\n         }\n \n         let future = futures.(0);\n+        callback(te_wait(future.test));\n         let result = future.wait();\n         callback(te_result(future.test, result));\n         futures = ivec::slice(futures, 1u, ivec::len(futures));"}]}