{"sha": "5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "node_id": "C_kwDOAAsO6NoAKDVlOGM1ODZmM2I4YzFmYzQzZTI5M2E1MzMxN2JhZmU5ZGYwYjc3ZmU", "commit": {"author": {"name": "iDawer", "email": "ilnur.iskhakov.oss@outlook.com", "date": "2023-03-10T13:21:54Z"}, "committer": {"name": "iDawer", "email": "ilnur.iskhakov.oss@outlook.com", "date": "2023-03-10T13:22:32Z"}, "message": "Refactor hir::diagnostics::MissingMatchArms fields, better naming", "tree": {"sha": "6c45300373e0e3f3d7588fc1569efafa368ef5ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c45300373e0e3f3d7588fc1569efafa368ef5ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "html_url": "https://github.com/rust-lang/rust/commit/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/comments", "author": {"login": "iDawer", "id": 7803845, "node_id": "MDQ6VXNlcjc4MDM4NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7803845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iDawer", "html_url": "https://github.com/iDawer", "followers_url": "https://api.github.com/users/iDawer/followers", "following_url": "https://api.github.com/users/iDawer/following{/other_user}", "gists_url": "https://api.github.com/users/iDawer/gists{/gist_id}", "starred_url": "https://api.github.com/users/iDawer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iDawer/subscriptions", "organizations_url": "https://api.github.com/users/iDawer/orgs", "repos_url": "https://api.github.com/users/iDawer/repos", "events_url": "https://api.github.com/users/iDawer/events{/privacy}", "received_events_url": "https://api.github.com/users/iDawer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iDawer", "id": 7803845, "node_id": "MDQ6VXNlcjc4MDM4NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7803845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iDawer", "html_url": "https://github.com/iDawer", "followers_url": "https://api.github.com/users/iDawer/followers", "following_url": "https://api.github.com/users/iDawer/following{/other_user}", "gists_url": "https://api.github.com/users/iDawer/gists{/gist_id}", "starred_url": "https://api.github.com/users/iDawer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iDawer/subscriptions", "organizations_url": "https://api.github.com/users/iDawer/orgs", "repos_url": "https://api.github.com/users/iDawer/repos", "events_url": "https://api.github.com/users/iDawer/events{/privacy}", "received_events_url": "https://api.github.com/users/iDawer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f189f62c671aab20f16f1ed5586351556ffe8bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f189f62c671aab20f16f1ed5586351556ffe8bd", "html_url": "https://github.com/rust-lang/rust/commit/8f189f62c671aab20f16f1ed5586351556ffe8bd"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "8f019a81b2db4f73d64a23cbf89c9689f1a50810", "filename": "crates/hir/src/diagnostics.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fhir%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fhir%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Fdiagnostics.rs?ref=5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "patch": "@@ -199,8 +199,7 @@ pub struct MismatchedArgCount {\n \n #[derive(Debug)]\n pub struct MissingMatchArms {\n-    pub file: HirFileId,\n-    pub match_expr: AstPtr<ast::Expr>,\n+    pub scrutinee_expr: InFile<AstPtr<ast::Expr>>,\n     pub uncovered_patterns: String,\n }\n "}, {"sha": "72a4829445d5ddc45c4e59aee1a46d55d2d39306", "filename": "crates/hir/src/lib.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fhir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fhir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Flib.rs?ref=5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "patch": "@@ -1628,11 +1628,13 @@ impl DefWithBody {\n                             if let ast::Expr::MatchExpr(match_expr) =\n                                 &source_ptr.value.to_node(&root)\n                             {\n-                                if let Some(match_expr) = match_expr.expr() {\n+                                if let Some(scrut_expr) = match_expr.expr() {\n                                     acc.push(\n                                         MissingMatchArms {\n-                                            file: source_ptr.file_id,\n-                                            match_expr: AstPtr::new(&match_expr),\n+                                            scrutinee_expr: InFile::new(\n+                                                source_ptr.file_id,\n+                                                AstPtr::new(&scrut_expr),\n+                                            ),\n                                             uncovered_patterns,\n                                         }\n                                         .into(),"}, {"sha": "ac4463331f2d27998cd21d29ff98d2f2cb3c0a6e", "filename": "crates/ide-diagnostics/src/handlers/missing_match_arms.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fide-diagnostics%2Fsrc%2Fhandlers%2Fmissing_match_arms.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e8c586f3b8c1fc43e293a53317bafe9df0b77fe/crates%2Fide-diagnostics%2Fsrc%2Fhandlers%2Fmissing_match_arms.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-diagnostics%2Fsrc%2Fhandlers%2Fmissing_match_arms.rs?ref=5e8c586f3b8c1fc43e293a53317bafe9df0b77fe", "patch": "@@ -1,5 +1,3 @@\n-use hir::InFile;\n-\n use crate::{Diagnostic, DiagnosticsContext};\n \n // Diagnostic: missing-match-arm\n@@ -12,7 +10,7 @@ pub(crate) fn missing_match_arms(\n     Diagnostic::new(\n         \"missing-match-arm\",\n         format!(\"missing match arm: {}\", d.uncovered_patterns),\n-        ctx.sema.diagnostics_display_range(InFile::new(d.file, d.match_expr.clone().into())).range,\n+        ctx.sema.diagnostics_display_range(d.scrutinee_expr.clone().map(Into::into)).range,\n     )\n }\n "}]}