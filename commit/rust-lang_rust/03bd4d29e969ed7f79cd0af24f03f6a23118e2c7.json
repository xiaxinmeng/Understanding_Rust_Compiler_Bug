{"sha": "03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzYmQ0ZDI5ZTk2OWVkN2Y3OWNkMGFmMjRmMDNmNmEyMzExOGUyYzc=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-04-04T22:24:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-04T22:24:29Z"}, "message": "Rollup merge of #83717 - notriddle:main-js-slice-loop, r=GuillaumeGomez\n\nrustdoc: Separate filter-empty-string out into its own function", "tree": {"sha": "2ef96da388db4725d4c1b9b232f74f89e60fa85f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ef96da388db4725d4c1b9b232f74f89e60fa85f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgajyeCRBK7hj4Ov3rIwAAdHIIAHcxiRY0TW6mcXiKsjc2qbK7\n2IBY2bkIFAi+/BGym3M5tT8HMaUikywV5/TGszmMZpEOLN0/LL92x/x/nrbJsXSz\nUKaDMoP2kPORBExiAHCv5lePl02/4jRdoOY963gsQD0FcapsLKmGOazijVSeFMk/\nlmnCvJ6srXWqsGxwsBJ35pJkSkugRoqSiOvZNBC6KqpO/2Ty9WiGB99VWQoZdGf3\n99IZQ9qHUhunhT5apgXMvRhbdvxn94zWmHQPGnjqJpNxqUZK5+WSUp/+DpAMXlz7\nMM6Xt3QCM2eB0I7jOyeoRb2WTwIn4CQY2L/3dO1p0FNiEZvlh7EPZJjjHHRyHfs=\n=p/ah\n-----END PGP SIGNATURE-----\n", "payload": "tree 2ef96da388db4725d4c1b9b232f74f89e60fa85f\nparent 4e3f471499058bd5eaa54004173aace7c6fa15f4\nparent 227f5ed679ed0ad997b6530df842d55980c8c90e\nauthor Dylan DPC <dylan.dpc@gmail.com> 1617575069 +0200\ncommitter GitHub <noreply@github.com> 1617575069 +0200\n\nRollup merge of #83717 - notriddle:main-js-slice-loop, r=GuillaumeGomez\n\nrustdoc: Separate filter-empty-string out into its own function\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "html_url": "https://github.com/rust-lang/rust/commit/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e3f471499058bd5eaa54004173aace7c6fa15f4", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e3f471499058bd5eaa54004173aace7c6fa15f4", "html_url": "https://github.com/rust-lang/rust/commit/4e3f471499058bd5eaa54004173aace7c6fa15f4"}, {"sha": "227f5ed679ed0ad997b6530df842d55980c8c90e", "url": "https://api.github.com/repos/rust-lang/rust/commits/227f5ed679ed0ad997b6530df842d55980c8c90e", "html_url": "https://github.com/rust-lang/rust/commit/227f5ed679ed0ad997b6530df842d55980c8c90e"}], "stats": {"total": 24, "additions": 14, "deletions": 10}, "files": [{"sha": "80dc6b923f68d8ee0df5d32e99b4dc64ce21e386", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 12, "deletions": 9, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "patch": "@@ -219,6 +219,15 @@ function hideThemeButtonState() {\n     var titleBeforeSearch = document.title;\n     var searchTitle = null;\n \n+    function removeEmptyStringsFromArray(x) {\n+        for (var i = 0, len = x.length; i < len; ++i) {\n+            if (x[i] === \"\") {\n+                x.splice(i, 1);\n+                i -= 1;\n+            }\n+        }\n+    }\n+\n     function clearInputTimeout() {\n         if (searchTimeout !== null) {\n             clearTimeout(searchTimeout);\n@@ -756,7 +765,7 @@ function hideThemeButtonState() {\n                 results = {}, results_in_args = {}, results_returned = {},\n                 split = valLower.split(\"::\");\n \n-            split = split.filter(function(segment) { return segment !== \"\"; });\n+            removeEmptyStringsFromArray(split);\n \n             function transformResults(results, isType) {\n                 var out = [];\n@@ -1338,17 +1347,11 @@ function hideThemeButtonState() {\n                 var valGenerics = extractGenerics(val);\n \n                 var paths = valLower.split(\"::\");\n-                var j;\n-                for (j = 0, len = paths.length; j < len; ++j) {\n-                    if (paths[j] === \"\") {\n-                        paths.splice(j, 1);\n-                        j -= 1;\n-                    }\n-                }\n+                removeEmptyStringsFromArray(paths);\n                 val = paths[paths.length - 1];\n                 var contains = paths.slice(0, paths.length > 1 ? paths.length - 1 : 1);\n \n-                var lev;\n+                var lev, j;\n                 for (j = 0; j < nSearchWords; ++j) {\n                     ty = searchIndex[j];\n                     if (!ty || (filterCrates !== undefined && ty.crate !== filterCrates)) {"}, {"sha": "a551a97bda55d64ba4dd9f22dd0c8024207c6eec", "filename": "src/tools/rustdoc-js/tester.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7/src%2Ftools%2Frustdoc-js%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/03bd4d29e969ed7f79cd0af24f03f6a23118e2c7/src%2Ftools%2Frustdoc-js%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-js%2Ftester.js?ref=03bd4d29e969ed7f79cd0af24f03f6a23118e2c7", "patch": "@@ -264,7 +264,8 @@ function loadMainJsAndIndex(mainJs, searchIndex, storageJs, crate) {\n     // execQuery last parameter is built in buildIndex.\n     // buildIndex requires the hashmap from search-index.\n     var functionsToLoad = [\"buildHrefAndPath\", \"pathSplitter\", \"levenshtein\", \"validateResult\",\n-                           \"handleAliases\", \"getQuery\", \"buildIndex\", \"execQuery\", \"execSearch\"];\n+                           \"handleAliases\", \"getQuery\", \"buildIndex\", \"execQuery\", \"execSearch\",\n+                           \"removeEmptyStringsFromArray\"];\n \n     ALIASES = {};\n     finalJS += 'window = { \"currentCrate\": \"' + crate + '\", rootPath: \"../\" };\\n';"}]}