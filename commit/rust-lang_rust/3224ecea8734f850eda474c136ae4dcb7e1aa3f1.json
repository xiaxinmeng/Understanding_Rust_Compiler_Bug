{"sha": "3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMyMjRlY2VhODczNGY4NTBlZGE0NzRjMTM2YWU0ZGNiN2UxYWEzZjE=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-01-17T07:20:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-17T07:20:36Z"}, "message": "Merge #7276\n\n7276: Remove map module from la-arena public API r=lnicola a=arzg\n\nIt\u2019s unlikely that more items will be added to the module, so it\u2019s simpler for users if `ArenaMap` is re-exported and the module made private.\r\n\r\nThis doesn\u2019t compile for the same reason that #7275 doesn\u2019t:\r\n\r\n> This pull request doesn\u2019t compile because dependencies on la-arena go through crates.io, so existing dependencies on the crate are referencing an old version. As such, this PR will only compile once a new la-arena version has been published.\n\nCo-authored-by: Aramis Razzaghipour <aramisnoah@gmail.com>", "tree": {"sha": "0405cf7c9b9787a5be19d226fc7875d389bda15b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0405cf7c9b9787a5be19d226fc7875d389bda15b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgA+VECRBK7hj4Ov3rIwAAdHIIAKrqGQ590xWNcHe+tyQ8s8yB\nU91ckVRL6Zafsu6nH2bx+hcpn5UuqYkqsv1XFc1XZPFJ9jSpl3IUymI0S3rFifXr\nRlkTsnaqeLkp8lusRMUGfUhlf6kP5zc8l4oY3uYWsi28hzTPrMk0MxbNyyALK4Xu\nv/EBCgSW0eoWx/32fmW234KiJuWdA08uFoWyxmRuchcqj3aWUzfRRU9dHSx4XG6x\nYS9pazcb/tEZqy/Mr5P6CVW66kPz0uGc1FdPaX9KJLgkX3aANiTf0CLyN51stGGZ\n7xwvFpIdU+yyDh6kStqJcEeUFn0Cmmgbfcc2fLUydLoTNe4VWvjzqp5xQyCE21w=\n=PD9A\n-----END PGP SIGNATURE-----\n", "payload": "tree 0405cf7c9b9787a5be19d226fc7875d389bda15b\nparent f5f011ba714589d65b7dae398938242abcbc3fee\nparent 9b5ba090db2c1f913d3f127573ac60c5eb2601bb\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1610868036 +0000\ncommitter GitHub <noreply@github.com> 1610868036 +0000\n\nMerge #7276\n\n7276: Remove map module from la-arena public API r=lnicola a=arzg\n\nIt\u2019s unlikely that more items will be added to the module, so it\u2019s simpler for users if `ArenaMap` is re-exported and the module made private.\r\n\r\nThis doesn\u2019t compile for the same reason that #7275 doesn\u2019t:\r\n\r\n> This pull request doesn\u2019t compile because dependencies on la-arena go through crates.io, so existing dependencies on the crate are referencing an old version. As such, this PR will only compile once a new la-arena version has been published.\n\nCo-authored-by: Aramis Razzaghipour <aramisnoah@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "html_url": "https://github.com/rust-lang/rust/commit/3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5f011ba714589d65b7dae398938242abcbc3fee", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5f011ba714589d65b7dae398938242abcbc3fee", "html_url": "https://github.com/rust-lang/rust/commit/f5f011ba714589d65b7dae398938242abcbc3fee"}, {"sha": "9b5ba090db2c1f913d3f127573ac60c5eb2601bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b5ba090db2c1f913d3f127573ac60c5eb2601bb", "html_url": "https://github.com/rust-lang/rust/commit/9b5ba090db2c1f913d3f127573ac60c5eb2601bb"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "06f0b9b180e10a61a2889809386fa77268f0ede0", "filename": "crates/hir_def/src/adt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fadt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fadt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fadt.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -8,7 +8,7 @@ use hir_expand::{\n     name::{AsName, Name},\n     InFile,\n };\n-use la_arena::{map::ArenaMap, Arena};\n+use la_arena::{Arena, ArenaMap};\n use syntax::ast::{self, NameOwner, VisibilityOwner};\n use tt::{Delimiter, DelimiterKind, Leaf, Subtree, TokenTree};\n "}, {"sha": "1b09ff816e0af8c8a0ddbfccfdf807c6a05d6b3e", "filename": "crates/hir_def/src/attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fattr.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -7,7 +7,7 @@ use cfg::{CfgExpr, CfgOptions};\n use either::Either;\n use hir_expand::{hygiene::Hygiene, name::AsName, AstId, InFile};\n use itertools::Itertools;\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n use mbe::ast_to_token_tree;\n use syntax::{\n     ast::{self, AstNode, AttrsOwner},"}, {"sha": "344f0b6c090f7031f8462abae0754c7ff458e3f3", "filename": "crates/hir_def/src/body.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fbody.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fbody.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fbody.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -16,7 +16,7 @@ use hir_expand::{\n     ast_id_map::AstIdMap, diagnostics::DiagnosticSink, hygiene::Hygiene, AstId, ExpandResult,\n     HirFileId, InFile, MacroDefId,\n };\n-use la_arena::{map::ArenaMap, Arena};\n+use la_arena::{Arena, ArenaMap};\n use rustc_hash::FxHashMap;\n use syntax::{ast, AstNode, AstPtr};\n use test_utils::mark;"}, {"sha": "6ef9fe790f59185d89e8276a465e29e7d7297777", "filename": "crates/hir_def/src/db.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fdb.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -3,7 +3,7 @@ use std::sync::Arc;\n \n use base_db::{salsa, CrateId, SourceDatabase, Upcast};\n use hir_expand::{db::AstDatabase, HirFileId};\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n use syntax::SmolStr;\n \n use crate::{"}, {"sha": "3ace3be1fa7be95cf44d41d390babc41e91303b7", "filename": "crates/hir_def/src/generics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fgenerics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fgenerics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fgenerics.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -10,7 +10,7 @@ use hir_expand::{\n     name::{name, AsName, Name},\n     InFile,\n };\n-use la_arena::{map::ArenaMap, Arena};\n+use la_arena::{Arena, ArenaMap};\n use syntax::ast::{self, GenericParamsOwner, NameOwner, TypeBoundsOwner};\n \n use crate::{"}, {"sha": "751d4c0522812d9a61bc22f7304de502d6d5b650", "filename": "crates/hir_def/src/src.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fsrc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Fsrc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fsrc.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -1,7 +1,7 @@\n //! Utilities for mapping between hir IDs and the surface syntax.\n \n use hir_expand::InFile;\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n \n use crate::{db::DefDatabase, item_tree::ItemTreeNode, AssocItemLoc, ItemLoc};\n "}, {"sha": "18d16986ba24b934ee67d0588465e40e8221c6df", "filename": "crates/hir_def/src/trace.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Ftrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_def%2Fsrc%2Ftrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Ftrace.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -9,7 +9,7 @@\n //! absolute offsets. The `Trace` structure (inspired, at least in name, by\n //! Kotlin's `BindingTrace`) allows use the same code to compute both\n //! projections.\n-use la_arena::{map::ArenaMap, Arena, Idx, RawId};\n+use la_arena::{Arena, ArenaMap, Idx, RawId};\n \n pub(crate) struct Trace<T, V> {\n     arena: Option<Arena<T>>,"}, {"sha": "b3af8244442a36da46a97728e683ce7979a3b515", "filename": "crates/hir_ty/src/db.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Fdb.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -7,7 +7,7 @@ use hir_def::{\n     db::DefDatabase, expr::ExprId, ConstParamId, DefWithBodyId, FunctionId, GenericDefId, ImplId,\n     LocalFieldId, TypeParamId, VariantId,\n };\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n \n use crate::{\n     method_resolution::{InherentImpls, TraitImpls},"}, {"sha": "d08867c70cee9f4ed8f01a643b0024b44417781e", "filename": "crates/hir_ty/src/infer.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Finfer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Finfer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Finfer.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -30,7 +30,7 @@ use hir_def::{\n     TypeAliasId, VariantId,\n };\n use hir_expand::{diagnostics::DiagnosticSink, name::name};\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n use rustc_hash::FxHashMap;\n use stdx::impl_from;\n use syntax::SmolStr;"}, {"sha": "7a734c8b9d9c1fc29f80c05b33b8868371905009", "filename": "crates/hir_ty/src/lower.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/crates%2Fhir_ty%2Fsrc%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Flower.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -20,7 +20,7 @@ use hir_def::{\n     TypeAliasId, TypeParamId, UnionId, VariantId,\n };\n use hir_expand::name::Name;\n-use la_arena::map::ArenaMap;\n+use la_arena::ArenaMap;\n use smallvec::SmallVec;\n use stdx::impl_from;\n use test_utils::mark;"}, {"sha": "1de3a1d2f2f63bc48b2d10162449a4832bf3097b", "filename": "lib/arena/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/lib%2Farena%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/lib%2Farena%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/lib%2Farena%2Fsrc%2Flib.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -10,7 +10,8 @@ use std::{\n     ops::{Index, IndexMut},\n };\n \n-pub mod map;\n+mod map;\n+pub use map::ArenaMap;\n \n /// The raw ID of a value in an arena.\n #[derive(Clone, Copy, PartialEq, Eq, PartialOrd, Ord, Hash)]"}, {"sha": "5ebaa9b82df86d2c2dc089127679924b3c450a27", "filename": "lib/arena/src/map.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/lib%2Farena%2Fsrc%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3224ecea8734f850eda474c136ae4dcb7e1aa3f1/lib%2Farena%2Fsrc%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/lib%2Farena%2Fsrc%2Fmap.rs?ref=3224ecea8734f850eda474c136ae4dcb7e1aa3f1", "patch": "@@ -1,5 +1,3 @@\n-//! A map from arena IDs to some other type. Space requirement is O(highest ID).\n-\n use std::marker::PhantomData;\n \n use crate::Idx;"}]}