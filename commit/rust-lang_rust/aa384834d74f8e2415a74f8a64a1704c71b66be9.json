{"sha": "aa384834d74f8e2415a74f8a64a1704c71b66be9", "node_id": "C_kwDOAAsO6NoAKGFhMzg0ODM0ZDc0ZjhlMjQxNWE3NGY4YTY0YTE3MDRjNzFiNjZiZTk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-09-22T19:34:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-22T19:34:54Z"}, "message": "Rollup merge of #102133 - b-naber:use-valtrees-in-fast-reject, r=lcnr\n\nUse valtrees for comparison\n\nr? `@lcnr`", "tree": {"sha": "9ba2ae635cc2e820a0698cd4646ce098c2bc64db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9ba2ae635cc2e820a0698cd4646ce098c2bc64db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa384834d74f8e2415a74f8a64a1704c71b66be9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjLLjeCRBK7hj4Ov3rIwAA398IAKAEY0ASLickUzu/3BHrEvks\nbRwV0WvlFoxcSAJ/Bj9crYo+5brz3VEMDSCQ+v8wVBICWAKEsOwntkPwNV2F2zL3\n5C3Bv5BQK7uPbkEneX8ngjfnYW5+cVlvMaSq5nXcyDPy5Ldfl1lLcD10EXxkXGxs\n0k7MAQAqwN/82zVRpqkL88xivzW1TR4tttihlwlL+B4IZkJng3IJhyV95Y3JYkSz\nBjib2/pfL1EW/Z6rtdnriKJlERY6aSuz35bmfyUv0Yt/YzXYArY7HyLofT8J2Q0L\n12W5yNww0e7D/nVKIPancVuTicvsdnQNxE6Tv6mplCACc111S3Odgt7ZV45XfHU=\n=yUK6\n-----END PGP SIGNATURE-----\n", "payload": "tree 9ba2ae635cc2e820a0698cd4646ce098c2bc64db\nparent b93c9a7d37c00dbe87cf770e1dc52b02ca136579\nparent e8594257f691a1e4e960f1dbb5dd92146fe9d978\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1663875294 +0200\ncommitter GitHub <noreply@github.com> 1663875294 +0200\n\nRollup merge of #102133 - b-naber:use-valtrees-in-fast-reject, r=lcnr\n\nUse valtrees for comparison\n\nr? `@lcnr`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa384834d74f8e2415a74f8a64a1704c71b66be9", "html_url": "https://github.com/rust-lang/rust/commit/aa384834d74f8e2415a74f8a64a1704c71b66be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa384834d74f8e2415a74f8a64a1704c71b66be9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b93c9a7d37c00dbe87cf770e1dc52b02ca136579", "url": "https://api.github.com/repos/rust-lang/rust/commits/b93c9a7d37c00dbe87cf770e1dc52b02ca136579", "html_url": "https://github.com/rust-lang/rust/commit/b93c9a7d37c00dbe87cf770e1dc52b02ca136579"}, {"sha": "e8594257f691a1e4e960f1dbb5dd92146fe9d978", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8594257f691a1e4e960f1dbb5dd92146fe9d978", "html_url": "https://github.com/rust-lang/rust/commit/e8594257f691a1e4e960f1dbb5dd92146fe9d978"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "41bb3c7140172fbd0ed58c0f1a5da5b33bc541e8", "filename": "compiler/rustc_middle/src/ty/fast_reject.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/aa384834d74f8e2415a74f8a64a1704c71b66be9/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa384834d74f8e2415a74f8a64a1704c71b66be9/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Ffast_reject.rs?ref=aa384834d74f8e2415a74f8a64a1704c71b66be9", "patch": "@@ -384,14 +384,7 @@ impl DeepRejectCtxt {\n             // they might unify with any value.\n             ty::ConstKind::Unevaluated(_) | ty::ConstKind::Error(_) => true,\n             ty::ConstKind::Value(obl) => match k {\n-                ty::ConstKind::Value(imp) => {\n-                    // FIXME(valtrees): Once we have valtrees, we can just\n-                    // compare them directly here.\n-                    match (obl.try_to_scalar_int(), imp.try_to_scalar_int()) {\n-                        (Some(obl), Some(imp)) => obl == imp,\n-                        _ => true,\n-                    }\n-                }\n+                ty::ConstKind::Value(imp) => obl == imp,\n                 _ => true,\n             },\n "}]}