{"sha": "aab854596fbd5aaea94c827257988a238c60e38e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhYjg1NDU5NmZiZDVhYWVhOTRjODI3MjU3OTg4YTIzOGM2MGUzOGU=", "commit": {"author": {"name": "Jeff Muizelaar", "email": "jrmuizel@gmail.com", "date": "2021-06-02T17:48:42Z"}, "committer": {"name": "Jeff Muizelaar", "email": "jrmuizel@gmail.com", "date": "2021-06-02T17:49:29Z"}, "message": "Turn off frame pointer elimination on all Apple platforms.\n\nThis ends up disabling frame pointer elimination on aarch64_apple_darwin\nwhich matches what clang does by default along with the\naarch64_apple_ios and x86_64_apple_darwin targets.\n\nFurther, the Apple docs \"Writing ARM64 Code for Apple Platforms\" has a section\ncalled \"Respect the Purpose of Specific CPU Registers\" which\nspecifically calls out the frame pointer register (x29):\n\n   The frame pointer register (x29) must always address a valid frame\n   record. Some functions \u2014 such as leaf functions or tail calls \u2014 may\n   opt not to create an entry in this list As a result, stack traces\n   are always meaningful, even without debug information.\n\nOther platforms are updated to not override the default.", "tree": {"sha": "8d9c110803256cf9d7a33e6def1afa8765669dee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d9c110803256cf9d7a33e6def1afa8765669dee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aab854596fbd5aaea94c827257988a238c60e38e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aab854596fbd5aaea94c827257988a238c60e38e", "html_url": "https://github.com/rust-lang/rust/commit/aab854596fbd5aaea94c827257988a238c60e38e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aab854596fbd5aaea94c827257988a238c60e38e/comments", "author": {"login": "jrmuizel", "id": 332653, "node_id": "MDQ6VXNlcjMzMjY1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/332653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrmuizel", "html_url": "https://github.com/jrmuizel", "followers_url": "https://api.github.com/users/jrmuizel/followers", "following_url": "https://api.github.com/users/jrmuizel/following{/other_user}", "gists_url": "https://api.github.com/users/jrmuizel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrmuizel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrmuizel/subscriptions", "organizations_url": "https://api.github.com/users/jrmuizel/orgs", "repos_url": "https://api.github.com/users/jrmuizel/repos", "events_url": "https://api.github.com/users/jrmuizel/events{/privacy}", "received_events_url": "https://api.github.com/users/jrmuizel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jrmuizel", "id": 332653, "node_id": "MDQ6VXNlcjMzMjY1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/332653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrmuizel", "html_url": "https://github.com/jrmuizel", "followers_url": "https://api.github.com/users/jrmuizel/followers", "following_url": "https://api.github.com/users/jrmuizel/following{/other_user}", "gists_url": "https://api.github.com/users/jrmuizel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrmuizel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrmuizel/subscriptions", "organizations_url": "https://api.github.com/users/jrmuizel/orgs", "repos_url": "https://api.github.com/users/jrmuizel/repos", "events_url": "https://api.github.com/users/jrmuizel/events{/privacy}", "received_events_url": "https://api.github.com/users/jrmuizel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff2c947c00f867b9f012e28ba88cecfbe556f904", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff2c947c00f867b9f012e28ba88cecfbe556f904", "html_url": "https://github.com/rust-lang/rust/commit/ff2c947c00f867b9f012e28ba88cecfbe556f904"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "5682039b86512aa6b0f3feb98846aa78c6319bcf", "filename": "compiler/rustc_target/src/spec/aarch64_apple_ios.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -10,7 +10,6 @@ pub fn target() -> Target {\n         arch: \"aarch64\".to_string(),\n         options: TargetOptions {\n             features: \"+neon,+fp-armv8,+apple-a7\".to_string(),\n-            eliminate_frame_pointer: false,\n             max_atomic_width: Some(128),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             forces_embed_bitcode: true,"}, {"sha": "8a832546d09526334877090c86a9e31cb87a1edc", "filename": "compiler/rustc_target/src/spec/aarch64_apple_ios_macabi.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_macabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_macabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_macabi.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -10,7 +10,6 @@ pub fn target() -> Target {\n         arch: \"aarch64\".to_string(),\n         options: TargetOptions {\n             features: \"+neon,+fp-armv8,+apple-a12\".to_string(),\n-            eliminate_frame_pointer: false,\n             max_atomic_width: Some(128),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             forces_embed_bitcode: true,"}, {"sha": "2187015b627d3a19e12dde51d0f00af62bbe8381", "filename": "compiler/rustc_target/src/spec/aarch64_apple_ios_sim.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_sim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_sim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_ios_sim.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -18,7 +18,6 @@ pub fn target() -> Target {\n         arch: \"aarch64\".to_string(),\n         options: TargetOptions {\n             features: \"+neon,+fp-armv8,+apple-a7\".to_string(),\n-            eliminate_frame_pointer: false,\n             max_atomic_width: Some(128),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             forces_embed_bitcode: true,"}, {"sha": "cb6c06b371183f61bcf0e5d8b3b5bda2f2c01c2e", "filename": "compiler/rustc_target/src/spec/aarch64_apple_tvos.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_tvos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_tvos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_apple_tvos.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -10,7 +10,6 @@ pub fn target() -> Target {\n         arch: \"aarch64\".to_string(),\n         options: TargetOptions {\n             features: \"+neon,+fp-armv8,+apple-a7\".to_string(),\n-            eliminate_frame_pointer: false,\n             max_atomic_width: Some(128),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             forces_embed_bitcode: true,"}, {"sha": "8530db179d9919060cfc17886d3ab2726c318ffd", "filename": "compiler/rustc_target/src/spec/apple_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -27,6 +27,7 @@ pub fn opts(os: &str) -> TargetOptions {\n         families: vec![\"unix\".to_string()],\n         is_like_osx: true,\n         dwarf_version: Some(2),\n+        eliminate_frame_pointer: false,\n         has_rpath: true,\n         dll_suffix: \".dylib\".to_string(),\n         archive_format: \"darwin\".to_string(),"}, {"sha": "e7f7bb343d0c534541dd31261b886b7a0870efe7", "filename": "compiler/rustc_target/src/spec/apple_sdk_base.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aab854596fbd5aaea94c827257988a238c60e38e/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs?ref=aab854596fbd5aaea94c827257988a238c60e38e", "patch": "@@ -44,7 +44,6 @@ pub fn opts(os: &str, arch: Arch) -> TargetOptions {\n         executables: true,\n         link_env_remove: link_env_remove(arch),\n         has_elf_tls: false,\n-        eliminate_frame_pointer: false,\n         ..super::apple_base::opts(os)\n     }\n }"}]}