{"sha": "3b18e215a3517bf32cc598b6e14743b14e4a928e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNiMThlMjE1YTM1MTdiZjMyY2M1OThiNmUxNDc0M2IxNGU0YTkyOGU=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-06-14T12:57:26Z"}, "committer": {"name": "lrh2000", "email": "lrh2000@pku.edu.cn", "date": "2021-06-26T15:11:13Z"}, "message": "Add test for the reserved_prefix migration lint.", "tree": {"sha": "b7d12ce4ec1940a5f402a120fb546236f756d6bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b7d12ce4ec1940a5f402a120fb546236f756d6bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3b18e215a3517bf32cc598b6e14743b14e4a928e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3b18e215a3517bf32cc598b6e14743b14e4a928e", "html_url": "https://github.com/rust-lang/rust/commit/3b18e215a3517bf32cc598b6e14743b14e4a928e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3b18e215a3517bf32cc598b6e14743b14e4a928e/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lrh2000", "id": 41988959, "node_id": "MDQ6VXNlcjQxOTg4OTU5", "avatar_url": "https://avatars.githubusercontent.com/u/41988959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lrh2000", "html_url": "https://github.com/lrh2000", "followers_url": "https://api.github.com/users/lrh2000/followers", "following_url": "https://api.github.com/users/lrh2000/following{/other_user}", "gists_url": "https://api.github.com/users/lrh2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/lrh2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lrh2000/subscriptions", "organizations_url": "https://api.github.com/users/lrh2000/orgs", "repos_url": "https://api.github.com/users/lrh2000/repos", "events_url": "https://api.github.com/users/lrh2000/events{/privacy}", "received_events_url": "https://api.github.com/users/lrh2000/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d837c00d1008c2ab13bf80117b81f5e482fc9edb", "url": "https://api.github.com/repos/rust-lang/rust/commits/d837c00d1008c2ab13bf80117b81f5e482fc9edb", "html_url": "https://github.com/rust-lang/rust/commit/d837c00d1008c2ab13bf80117b81f5e482fc9edb"}], "stats": {"total": 115, "additions": 115, "deletions": 0}, "files": [{"sha": "88e7584c197f0f323b3f9d1d498147b621a3de7c", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.fixed", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed?ref=3b18e215a3517bf32cc598b6e14743b14e4a928e", "patch": "@@ -0,0 +1,28 @@\n+// check-pass\n+// run-rustfix\n+// compile-flags: -Z unstable-options --edition 2018\n+\n+#![warn(reserved_prefix)]\n+\n+macro_rules! m2 {\n+    ($a:tt $b:tt) => {};\n+}\n+\n+macro_rules! m3 {\n+    ($a:tt $b:tt $c:tt) => {};\n+}\n+\n+fn main() {\n+    m2!(z \"hey\");\n+    //~^ WARNING prefix `z` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m2!(prefix \"hey\");\n+    //~^ WARNING prefix `prefix` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m3!(hey #123);\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m3!(hey #hey);\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+}"}, {"sha": "ee835eb97a2950ab8bceb9ce0004e4445cbd0f86", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs?ref=3b18e215a3517bf32cc598b6e14743b14e4a928e", "patch": "@@ -0,0 +1,28 @@\n+// check-pass\n+// run-rustfix\n+// compile-flags: -Z unstable-options --edition 2018\n+\n+#![warn(reserved_prefix)]\n+\n+macro_rules! m2 {\n+    ($a:tt $b:tt) => {};\n+}\n+\n+macro_rules! m3 {\n+    ($a:tt $b:tt $c:tt) => {};\n+}\n+\n+fn main() {\n+    m2!(z\"hey\");\n+    //~^ WARNING prefix `z` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m2!(prefix\"hey\");\n+    //~^ WARNING prefix `prefix` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m3!(hey#123);\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+    m3!(hey#hey);\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~| WARNING become a hard error\n+}"}, {"sha": "2c9d94803bec298b902a561ad56240c8684e93f4", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.stderr", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b18e215a3517bf32cc598b6e14743b14e4a928e/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr?ref=3b18e215a3517bf32cc598b6e14743b14e4a928e", "patch": "@@ -0,0 +1,59 @@\n+warning: prefix `z` is unknown\n+  --> $DIR/reserved-prefixes-migration.rs:16:9\n+   |\n+LL |     m2!(z\"hey\");\n+   |         ^ unknown prefix\n+   |\n+note: the lint level is defined here\n+  --> $DIR/reserved-prefixes-migration.rs:5:9\n+   |\n+LL | #![warn(reserved_prefix)]\n+   |         ^^^^^^^^^^^^^^^\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2021 edition!\n+   = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n+help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021\n+   |\n+LL |     m2!(z \"hey\");\n+   |          --\n+\n+warning: prefix `prefix` is unknown\n+  --> $DIR/reserved-prefixes-migration.rs:19:9\n+   |\n+LL |     m2!(prefix\"hey\");\n+   |         ^^^^^^ unknown prefix\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2021 edition!\n+   = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n+help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021\n+   |\n+LL |     m2!(prefix \"hey\");\n+   |               --\n+\n+warning: prefix `hey` is unknown\n+  --> $DIR/reserved-prefixes-migration.rs:22:9\n+   |\n+LL |     m3!(hey#123);\n+   |         ^^^ unknown prefix\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2021 edition!\n+   = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n+help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021\n+   |\n+LL |     m3!(hey #123);\n+   |            --\n+\n+warning: prefix `hey` is unknown\n+  --> $DIR/reserved-prefixes-migration.rs:25:9\n+   |\n+LL |     m3!(hey#hey);\n+   |         ^^^ unknown prefix\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2021 edition!\n+   = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n+help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021\n+   |\n+LL |     m3!(hey #hey);\n+   |            --\n+\n+warning: 4 warnings emitted\n+"}]}