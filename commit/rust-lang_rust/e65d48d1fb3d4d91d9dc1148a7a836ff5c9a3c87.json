{"sha": "e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2NWQ0OGQxZmIzZDRkOTFkOWRjMTE0OGE3YTgzNmZmNWM5YTNjODc=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-08-22T14:41:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-22T14:41:17Z"}, "message": "Merge #5823\n\n5823: Don't underline function definition if self is &mut r=Nashenas88 a=matklad\n\nThe self is right there, and is already underlined, so it makes little\r\nsense to emit even more underlines.\r\n\r\nbefore:\r\n![before](https://user-images.githubusercontent.com/1711539/90672843-0d379500-e257-11ea-840f-b0caed4410f1.png)\r\nafter:\r\n![after](https://user-images.githubusercontent.com/1711539/90672840-0c9efe80-e257-11ea-9739-23af433841c6.png)\r\n\r\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "b843cb143848319cbaed5256afa3b591b7b53d85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b843cb143848319cbaed5256afa3b591b7b53d85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfQS6OCRBK7hj4Ov3rIwAAdHIIADGET2V6i1thoCWTRB9xFcuI\nPbyMKfA5SojShcCaYG5nHfl0nc0twntKqKKsjwW0HoO+FMulhShx7GV0ItSBF3iM\n5z/FcMqPOtUXvnjNnRlGid+GEqjyhkVYKxd3XWF0KWizo0RDgPXrJtJ5AK7tXqN2\nN8p68bwGum+24XEbzeDm5Ml4hrUXXH7fk9qnEI9cQSlntan36rfTp1RQ6PIsPdHD\nJHcNRwO0PqYKOLSmWkieeg0Np3a2Ut5vu3LONMrnCMYES+iuIRBy7xN+Jo1QQvEY\nRJ5hoWSdkZwKhKgWCCAP8SXcnh4y4gKVdn4N8hAP9epYYbGkD3fKzFgf0xDL0OQ=\n=NZn1\n-----END PGP SIGNATURE-----\n", "payload": "tree b843cb143848319cbaed5256afa3b591b7b53d85\nparent d7466c9f9e7b0565afcaff11e508a84d813d1b46\nparent 8000d1d30d0c6205585b12331124745aaf21c340\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1598107277 +0000\ncommitter GitHub <noreply@github.com> 1598107277 +0000\n\nMerge #5823\n\n5823: Don't underline function definition if self is &mut r=Nashenas88 a=matklad\n\nThe self is right there, and is already underlined, so it makes little\r\nsense to emit even more underlines.\r\n\r\nbefore:\r\n![before](https://user-images.githubusercontent.com/1711539/90672843-0d379500-e257-11ea-840f-b0caed4410f1.png)\r\nafter:\r\n![after](https://user-images.githubusercontent.com/1711539/90672840-0c9efe80-e257-11ea-9739-23af433841c6.png)\r\n\r\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "html_url": "https://github.com/rust-lang/rust/commit/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d7466c9f9e7b0565afcaff11e508a84d813d1b46", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7466c9f9e7b0565afcaff11e508a84d813d1b46", "html_url": "https://github.com/rust-lang/rust/commit/d7466c9f9e7b0565afcaff11e508a84d813d1b46"}, {"sha": "8000d1d30d0c6205585b12331124745aaf21c340", "url": "https://api.github.com/repos/rust-lang/rust/commits/8000d1d30d0c6205585b12331124745aaf21c340", "html_url": "https://github.com/rust-lang/rust/commit/8000d1d30d0c6205585b12331124745aaf21c340"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "25d6f7abd829057d2f61e3679e09d61325b01d08", "filename": "crates/ide/src/syntax_highlighting.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87/crates%2Fide%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87/crates%2Fide%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting.rs?ref=e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "patch": "@@ -748,12 +748,6 @@ fn highlight_def(db: &RootDatabase, def: Definition) -> Highlight {\n                 if func.is_unsafe(db) {\n                     h |= HighlightModifier::Unsafe;\n                 }\n-                if let Some(self_param) = func.self_param(db) {\n-                    match self_param.access(db) {\n-                        hir::Access::Exclusive => h |= HighlightModifier::Mutable,\n-                        hir::Access::Shared | hir::Access::Owned => (),\n-                    }\n-                }\n                 return h;\n             }\n             hir::ModuleDef::Adt(hir::Adt::Struct(_)) => HighlightTag::Struct,"}, {"sha": "d0df2e0ec04b8ed21c5870147b16f59d4f2189c2", "filename": "crates/ide/test_data/highlighting.html", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87/crates%2Fide%2Ftest_data%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87/crates%2Fide%2Ftest_data%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Ftest_data%2Fhighlighting.html?ref=e65d48d1fb3d4d91d9dc1148a7a836ff5c9a3c87", "patch": "@@ -65,7 +65,7 @@\n         <span class=\"self_keyword\">self</span><span class=\"punctuation\">.</span><span class=\"field\">x</span>\n     <span class=\"punctuation\">}</span>\n \n-    <span class=\"keyword\">fn</span> <span class=\"function declaration mutable\">qux</span><span class=\"punctuation\">(</span><span class=\"operator\">&</span><span class=\"keyword\">mut</span> <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">)</span> <span class=\"punctuation\">{</span>\n+    <span class=\"keyword\">fn</span> <span class=\"function declaration\">qux</span><span class=\"punctuation\">(</span><span class=\"operator\">&</span><span class=\"keyword\">mut</span> <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">)</span> <span class=\"punctuation\">{</span>\n         <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">.</span><span class=\"field\">x</span> <span class=\"operator\">=</span> <span class=\"numeric_literal\">0</span><span class=\"punctuation\">;</span>\n     <span class=\"punctuation\">}</span>\n \n@@ -84,7 +84,7 @@\n         <span class=\"self_keyword\">self</span><span class=\"punctuation\">.</span><span class=\"field\">x</span>\n     <span class=\"punctuation\">}</span>\n \n-    <span class=\"keyword\">fn</span> <span class=\"function declaration mutable\">qux</span><span class=\"punctuation\">(</span><span class=\"operator\">&</span><span class=\"keyword\">mut</span> <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">)</span> <span class=\"punctuation\">{</span>\n+    <span class=\"keyword\">fn</span> <span class=\"function declaration\">qux</span><span class=\"punctuation\">(</span><span class=\"operator\">&</span><span class=\"keyword\">mut</span> <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">)</span> <span class=\"punctuation\">{</span>\n         <span class=\"self_keyword mutable\">self</span><span class=\"punctuation\">.</span><span class=\"field\">x</span> <span class=\"operator\">=</span> <span class=\"numeric_literal\">0</span><span class=\"punctuation\">;</span>\n     <span class=\"punctuation\">}</span>\n "}]}