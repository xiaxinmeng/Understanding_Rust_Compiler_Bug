{"sha": "81801f2171d4a7dddbb9cbffe95e4afe93251cb7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxODAxZjIxNzFkNGE3ZGRkYmI5Y2JmZmU5NWU0YWZlOTMyNTFjYjc=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-03-22T19:36:24Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-03-22T19:40:46Z"}, "message": "Re-word explanation on closures in intro\n\nFixes #23571", "tree": {"sha": "18ec583c449784dd82ef6bdd7faed5eb1e797f92", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18ec583c449784dd82ef6bdd7faed5eb1e797f92"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81801f2171d4a7dddbb9cbffe95e4afe93251cb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81801f2171d4a7dddbb9cbffe95e4afe93251cb7", "html_url": "https://github.com/rust-lang/rust/commit/81801f2171d4a7dddbb9cbffe95e4afe93251cb7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81801f2171d4a7dddbb9cbffe95e4afe93251cb7/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ecf8c64e1b1b60f228f0c472c0b0dab4a5b5aa61", "url": "https://api.github.com/repos/rust-lang/rust/commits/ecf8c64e1b1b60f228f0c472c0b0dab4a5b5aa61", "html_url": "https://github.com/rust-lang/rust/commit/ecf8c64e1b1b60f228f0c472c0b0dab4a5b5aa61"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "b711085ddbd9c298cd5b641d4d4711617d02224a", "filename": "src/doc/intro.md", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/81801f2171d4a7dddbb9cbffe95e4afe93251cb7/src%2Fdoc%2Fintro.md", "raw_url": "https://github.com/rust-lang/rust/raw/81801f2171d4a7dddbb9cbffe95e4afe93251cb7/src%2Fdoc%2Fintro.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fintro.md?ref=81801f2171d4a7dddbb9cbffe95e4afe93251cb7", "patch": "@@ -446,16 +446,16 @@ It gives us this error:\n error: aborting due to previous error\n ```\n \n-It mentions that \"captured outer variable in an `FnMut` closure\".\n-Because we declared the closure as a moving closure, and it referred\n-to `numbers`, the closure will try to take ownership of the\n-vector. But the closure itself is created in a loop, and hence we will\n-actually create three closures, one for every iteration of the\n-loop. This means that all three of those closures would try to own\n-`numbers`, which is impossible -- `numbers` must have just one\n-owner. Rust detects this and gives us the error: we claim that\n-`numbers` has ownership, but our code tries to make three owners. This\n-may cause a safety problem, so Rust disallows it.\n+This is a little confusing because there are two closures here: the one passed\n+to `map`, and the one passed to `thread::scoped`. In this case, the closure for\n+`thread::scoped` is attempting to reference `numbers`, a `Vec<i32>`. This\n+closure is a `FnOnce` closure, as that\u2019s what `thread::scoped` takes as an\n+argument. `FnOnce` closures take ownership of their environment. That\u2019s fine,\n+but there\u2019s one detail: because of `map`, we\u2019re going to make three of these\n+closures. And since all three try to take ownership of `numbers`, that would be\n+a problem. That\u2019s what it means by \u2018cannot move out of captured outer\n+variable\u2019: our `thread::scoped` closure wants to take ownership, and it can\u2019t,\n+because the closure for `map` won\u2019t let it.\n \n What to do here? Rust has two types that helps us: `Arc<T>` and `Mutex<T>`.\n *Arc* stands for \"atomically reference counted\". In other words, an Arc will"}]}