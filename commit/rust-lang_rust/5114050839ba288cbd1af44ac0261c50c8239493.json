{"sha": "5114050839ba288cbd1af44ac0261c50c8239493", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxMTQwNTA4MzliYTI4OGNiZDFhZjQ0YWMwMjYxYzUwYzgyMzk0OTM=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-09T05:50:25Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-12T17:20:36Z"}, "message": "Update lint deprecation for tool lints\n\nOur lint deprecation previously didn't work for tool lints, because\n`register_removed` was registering lints to be removed _without_ the\n`clippy` prefix.", "tree": {"sha": "145f9b2900d7f3ac4e57daf2a258b3f8e8e934bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/145f9b2900d7f3ac4e57daf2a258b3f8e8e934bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5114050839ba288cbd1af44ac0261c50c8239493", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1Rn+QQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5j9XEACM6pvvpXw0XeZv43kt/7s4gNXFurTq6qvC\nhn7X4D3JdmEmySRGsqYb7nQPvlhhmvqnzbWPuVYuL0sU4EvYXB7+5asMVgs2xhe5\nhlkz7O53yfJy4vVgL9I3ht0UfAWCHPCkGub9XOTQkd8jUruDD5UzIVwQnZ0bsvC7\nJRyHbva1htMxudS5ZCzgCZBne/KD73NYDYUlbgCqag78oFj6Wfo4aKt41Fd/UKeR\nVa4mi+xIl26wRNOcWadd5tQYOe7YC1rGTqBufRIA7jHeXrK4uG+yaR2Hsq3gPSWo\nzX9vx99wZeg12mCYvnnobstRZbUqjgPl6TjelcrYc6An6pHoNGg8Hc7Ygvb66WhJ\n40SW7cJaFSDqORstwI3k8gY1QxXGY9jo4E+x+V8JFdw45PuPPXiU2YDRCMIEGH8m\nZ/Rzo8ifMV5Z2WR08A9ujUpp1hklP96uUehaOD9Iw4Y9BaCDqI75DFVWe6IE1L/b\nP76Hx5XKNRhcefECSlBHpp8mFthMC57UC6cSz5ZsM1NMPTCpNjtjt9OmQNRQsGFM\nmp+r8qIEVqiKfnjN/IdVzvTTr67vPQepzXxtceF7yZQd87Q7CAuGBGagKGzhJp1v\nWtHT9J6gPp99kM/FjfjRgbRaKZCQP8HtDNhDIyxHDDjQGbWtbhGYNZlJpGs77xxG\nPmhm9hbC4Q==\n=ZCg7\n-----END PGP SIGNATURE-----", "payload": "tree 145f9b2900d7f3ac4e57daf2a258b3f8e8e934bb\nparent c154754b74577906c5d55d57f7daeff02d6a33e7\nauthor Philipp Hansch <dev@phansch.net> 1565329825 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1565630436 +0200\n\nUpdate lint deprecation for tool lints\n\nOur lint deprecation previously didn't work for tool lints, because\n`register_removed` was registering lints to be removed _without_ the\n`clippy` prefix.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5114050839ba288cbd1af44ac0261c50c8239493", "html_url": "https://github.com/rust-lang/rust/commit/5114050839ba288cbd1af44ac0261c50c8239493", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5114050839ba288cbd1af44ac0261c50c8239493/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c154754b74577906c5d55d57f7daeff02d6a33e7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c154754b74577906c5d55d57f7daeff02d6a33e7", "html_url": "https://github.com/rust-lang/rust/commit/c154754b74577906c5d55d57f7daeff02d6a33e7"}], "stats": {"total": 75, "additions": 38, "deletions": 37}, "files": [{"sha": "db407565b19bbf9597cda3a8959c3c672a8e7ca8", "filename": "clippy_dev/src/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5114050839ba288cbd1af44ac0261c50c8239493/clippy_dev%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5114050839ba288cbd1af44ac0261c50c8239493/clippy_dev%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Flib.rs?ref=5114050839ba288cbd1af44ac0261c50c8239493", "patch": "@@ -126,7 +126,7 @@ pub fn gen_deprecated(lints: &[Lint]) -> Vec<String> {\n             l.clone().deprecation.and_then(|depr_text| {\n                 Some(vec![\n                     \"    store.register_removed(\".to_string(),\n-                    format!(\"        \\\"{}\\\",\", l.name),\n+                    format!(\"        \\\"clippy::{}\\\",\", l.name),\n                     format!(\"        \\\"{}\\\",\", depr_text),\n                     \"    );\".to_string(),\n                 ])\n@@ -442,11 +442,11 @@ fn test_gen_deprecated() {\n     ];\n     let expected: Vec<String> = vec![\n         \"    store.register_removed(\",\n-        \"        \\\"should_assert_eq\\\",\",\n+        \"        \\\"clippy::should_assert_eq\\\",\",\n         \"        \\\"has been superseded by should_assert_eq2\\\",\",\n         \"    );\",\n         \"    store.register_removed(\",\n-        \"        \\\"another_deprecated\\\",\",\n+        \"        \\\"clippy::another_deprecated\\\",\",\n         \"        \\\"will be removed\\\",\",\n         \"    );\",\n     ]"}, {"sha": "784a10882aa5a4fba29360e4f8aaf252d6854ead", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/5114050839ba288cbd1af44ac0261c50c8239493/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5114050839ba288cbd1af44ac0261c50c8239493/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=5114050839ba288cbd1af44ac0261c50c8239493", "patch": "@@ -386,47 +386,47 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n     let mut store = reg.sess.lint_store.borrow_mut();\n     // begin deprecated lints, do not remove this comment, it\u2019s used in `update_lints`\n     store.register_removed(\n-        \"should_assert_eq\",\n+        \"clippy::should_assert_eq\",\n         \"`assert!()` will be more flexible with RFC 2011\",\n     );\n     store.register_removed(\n-        \"extend_from_slice\",\n+        \"clippy::extend_from_slice\",\n         \"`.extend_from_slice(_)` is a faster way to extend a Vec by a slice\",\n     );\n     store.register_removed(\n-        \"range_step_by_zero\",\n+        \"clippy::range_step_by_zero\",\n         \"`iterator.step_by(0)` panics nowadays\",\n     );\n     store.register_removed(\n-        \"unstable_as_slice\",\n+        \"clippy::unstable_as_slice\",\n         \"`Vec::as_slice` has been stabilized in 1.7\",\n     );\n     store.register_removed(\n-        \"unstable_as_mut_slice\",\n+        \"clippy::unstable_as_mut_slice\",\n         \"`Vec::as_mut_slice` has been stabilized in 1.7\",\n     );\n     store.register_removed(\n-        \"str_to_string\",\n+        \"clippy::str_to_string\",\n         \"using `str::to_string` is common even today and specialization will likely happen soon\",\n     );\n     store.register_removed(\n-        \"string_to_string\",\n+        \"clippy::string_to_string\",\n         \"using `string::to_string` is common even today and specialization will likely happen soon\",\n     );\n     store.register_removed(\n-        \"misaligned_transmute\",\n+        \"clippy::misaligned_transmute\",\n         \"this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr\",\n     );\n     store.register_removed(\n-        \"assign_ops\",\n+        \"clippy::assign_ops\",\n         \"using compound assignment operators (e.g., `+=`) is harmless\",\n     );\n     store.register_removed(\n-        \"if_let_redundant_pattern_matching\",\n+        \"clippy::if_let_redundant_pattern_matching\",\n         \"this lint has been changed to redundant_pattern_matching\",\n     );\n     store.register_removed(\n-        \"unsafe_vector_initialization\",\n+        \"clippy::unsafe_vector_initialization\",\n         \"the replacement suggested by this lint had substantially different behavior\",\n     );\n     // end deprecated lints, do not remove this comment, it\u2019s used in `update_lints`"}, {"sha": "7ad330cb305ac5c4cbfe7803e6f564f9945895bb", "filename": "tests/ui/deprecated.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5114050839ba288cbd1af44ac0261c50c8239493/tests%2Fui%2Fdeprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5114050839ba288cbd1af44ac0261c50c8239493/tests%2Fui%2Fdeprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdeprecated.rs?ref=5114050839ba288cbd1af44ac0261c50c8239493", "patch": "@@ -1,7 +1,8 @@\n-#[warn(str_to_string)]\n-#[warn(string_to_string)]\n-#[warn(unstable_as_slice)]\n-#[warn(unstable_as_mut_slice)]\n-#[warn(misaligned_transmute)]\n+#[warn(clippy::str_to_string)]\n+#[warn(clippy::string_to_string)]\n+#[warn(clippy::unstable_as_slice)]\n+#[warn(clippy::unstable_as_mut_slice)]\n+#[warn(clippy::misaligned_transmute)]\n+#[warn(clippy::unused_collect)]\n \n fn main() {}"}, {"sha": "df9793a091d1ce5c42e62399879bfcb9737b1e69", "filename": "tests/ui/deprecated.stderr", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/5114050839ba288cbd1af44ac0261c50c8239493/tests%2Fui%2Fdeprecated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5114050839ba288cbd1af44ac0261c50c8239493/tests%2Fui%2Fdeprecated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdeprecated.stderr?ref=5114050839ba288cbd1af44ac0261c50c8239493", "patch": "@@ -1,40 +1,40 @@\n-error: lint `str_to_string` has been removed: `using `str::to_string` is common even today and specialization will likely happen soon`\n+error: lint `clippy::str_to_string` has been removed: `using `str::to_string` is common even today and specialization will likely happen soon`\n   --> $DIR/deprecated.rs:1:8\n    |\n-LL | #[warn(str_to_string)]\n-   |        ^^^^^^^^^^^^^\n+LL | #[warn(clippy::str_to_string)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D renamed-and-removed-lints` implied by `-D warnings`\n \n-error: lint `string_to_string` has been removed: `using `string::to_string` is common even today and specialization will likely happen soon`\n+error: lint `clippy::string_to_string` has been removed: `using `string::to_string` is common even today and specialization will likely happen soon`\n   --> $DIR/deprecated.rs:2:8\n    |\n-LL | #[warn(string_to_string)]\n-   |        ^^^^^^^^^^^^^^^^\n+LL | #[warn(clippy::string_to_string)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `unstable_as_slice` has been removed: ``Vec::as_slice` has been stabilized in 1.7`\n+error: lint `clippy::unstable_as_slice` has been removed: ``Vec::as_slice` has been stabilized in 1.7`\n   --> $DIR/deprecated.rs:3:8\n    |\n-LL | #[warn(unstable_as_slice)]\n-   |        ^^^^^^^^^^^^^^^^^\n+LL | #[warn(clippy::unstable_as_slice)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `unstable_as_mut_slice` has been removed: ``Vec::as_mut_slice` has been stabilized in 1.7`\n+error: lint `clippy::unstable_as_mut_slice` has been removed: ``Vec::as_mut_slice` has been stabilized in 1.7`\n   --> $DIR/deprecated.rs:4:8\n    |\n-LL | #[warn(unstable_as_mut_slice)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^\n+LL | #[warn(clippy::unstable_as_mut_slice)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `misaligned_transmute` has been removed: `this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr`\n+error: lint `clippy::misaligned_transmute` has been removed: `this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr`\n   --> $DIR/deprecated.rs:5:8\n    |\n-LL | #[warn(misaligned_transmute)]\n-   |        ^^^^^^^^^^^^^^^^^^^^\n+LL | #[warn(clippy::misaligned_transmute)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `str_to_string` has been removed: `using `str::to_string` is common even today and specialization will likely happen soon`\n+error: lint `clippy::str_to_string` has been removed: `using `str::to_string` is common even today and specialization will likely happen soon`\n   --> $DIR/deprecated.rs:1:8\n    |\n-LL | #[warn(str_to_string)]\n-   |        ^^^^^^^^^^^^^\n+LL | #[warn(clippy::str_to_string)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 6 previous errors\n "}]}