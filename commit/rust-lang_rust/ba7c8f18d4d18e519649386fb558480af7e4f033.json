{"sha": "ba7c8f18d4d18e519649386fb558480af7e4f033", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhN2M4ZjE4ZDRkMThlNTE5NjQ5Mzg2ZmI1NTg0ODBhZjdlNGYwMzM=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-08-11T01:09:52Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-08-11T01:09:52Z"}, "message": "rustc: Remove unused \"trace\" upcalls", "tree": {"sha": "f1a43cd890a86057d0631a2cefb60abe072333a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1a43cd890a86057d0631a2cefb60abe072333a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba7c8f18d4d18e519649386fb558480af7e4f033", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba7c8f18d4d18e519649386fb558480af7e4f033", "html_url": "https://github.com/rust-lang/rust/commit/ba7c8f18d4d18e519649386fb558480af7e4f033", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba7c8f18d4d18e519649386fb558480af7e4f033/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1494901d087e6c0a891def76b1f96048d70fe71", "url": "https://api.github.com/repos/rust-lang/rust/commits/d1494901d087e6c0a891def76b1f96048d70fe71", "html_url": "https://github.com/rust-lang/rust/commit/d1494901d087e6c0a891def76b1f96048d70fe71"}], "stats": {"total": 31, "additions": 0, "deletions": 31}, "files": [{"sha": "622d8d5c0d70046eddda60e1072779b4ef63dda3", "filename": "src/comp/back/upcall.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Fcomp%2Fback%2Fupcall.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Fcomp%2Fback%2Fupcall.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fback%2Fupcall.rs?ref=ba7c8f18d4d18e519649386fb558480af7e4f033", "patch": "@@ -26,8 +26,6 @@ import lib::llvm::llvm::TypeRef;\n \n type upcalls =\n     {grow_task: ValueRef,\n-     trace_word: ValueRef,\n-     trace_str: ValueRef,\n      new_port: ValueRef,\n      del_port: ValueRef,\n      new_chan: ValueRef,\n@@ -85,8 +83,6 @@ fn declare_upcalls(tn: type_names, tydesc_type: TypeRef,\n \n     let empty_vec: [TypeRef] = ~[];\n     ret @{grow_task: dv(\"grow_task\", ~[T_size_t()]),\n-          trace_word: dv(\"trace_word\", ~[T_int()]),\n-          trace_str: dv(\"trace_str\", ~[T_ptr(T_i8())]),\n           new_port: d(\"new_port\", ~[T_size_t()], T_opaque_port_ptr()),\n           del_port: dv(\"del_port\", ~[T_opaque_port_ptr()]),\n           new_chan:"}, {"sha": "e84e98101c434e9ffadb282fb2afa43b5c4edeb2", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=ba7c8f18d4d18e519649386fb558480af7e4f033", "patch": "@@ -6761,19 +6761,6 @@ fn declare_intrinsics(llmod: ModuleRef) -> hashmap[str, ValueRef] {\n     ret intrinsics;\n }\n \n-fn trace_str(cx: &@block_ctxt, s: str) {\n-    cx.build.Call(bcx_ccx(cx).upcalls.trace_str,\n-                  ~[cx.fcx.lltaskptr, C_cstr(bcx_ccx(cx), s)]);\n-}\n-\n-fn trace_word(cx: &@block_ctxt, v: ValueRef) {\n-    cx.build.Call(bcx_ccx(cx).upcalls.trace_word, ~[cx.fcx.lltaskptr, v]);\n-}\n-\n-fn trace_ptr(cx: &@block_ctxt, v: ValueRef) {\n-    trace_word(cx, cx.build.PtrToInt(v, T_int()));\n-}\n-\n fn trap(bcx: &@block_ctxt) {\n     let v: [ValueRef] = ~[];\n     alt bcx_ccx(bcx).intrinsics.find(\"llvm.trap\") {"}, {"sha": "99d888cc3b1f6ec968d151edf5b92817d28d0414", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=ba7c8f18d4d18e519649386fb558480af7e4f033", "patch": "@@ -70,18 +70,6 @@ upcall_log_istr(rust_task *task, uint32_t level, rust_ivec *str) {\n     task->sched->log(task, level, \"rust: %s\", buf);\n }\n \n-extern \"C\" CDECL void\n-upcall_trace_word(rust_task *task, uintptr_t i) {\n-    LOG_UPCALL_ENTRY(task);\n-    task->sched->log(task, 2, \"trace: 0x%\" PRIxPTR \"\", i, i, (char) i);\n-}\n-\n-extern \"C\" CDECL void\n-upcall_trace_str(rust_task *task, char const *c) {\n-    LOG_UPCALL_ENTRY(task);\n-    task->sched->log(task, 2, \"trace: %s\", c);\n-}\n-\n extern \"C\" CDECL rust_port*\n new_port(rust_task *task, size_t unit_sz);\n extern \"C\" CDECL rust_port*"}, {"sha": "cbd6b86348ed738158cce6711ba9fa749100d2cb", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/ba7c8f18d4d18e519649386fb558480af7e4f033/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=ba7c8f18d4d18e519649386fb558480af7e4f033", "patch": "@@ -113,8 +113,6 @@ upcall_sleep\n upcall_start_task\n upcall_take_task\n upcall_take_chan\n-upcall_trace_str\n-upcall_trace_word\n upcall_vec_append\n upcall_yield\n vec_alloc"}]}