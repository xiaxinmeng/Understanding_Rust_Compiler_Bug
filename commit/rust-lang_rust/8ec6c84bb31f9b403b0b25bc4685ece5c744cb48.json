{"sha": "8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "node_id": "C_kwDOAAsO6NoAKDhlYzZjODRiYjMxZjliNDAzYjBiMjViYzQ2ODVlY2U1Yzc0NGNiNDg", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2021-04-27T12:24:19Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-11-10T21:18:06Z"}, "message": "add some more tests", "tree": {"sha": "0f01db000e441ae232e98c0713ca07a8ef752b44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f01db000e441ae232e98c0713ca07a8ef752b44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "html_url": "https://github.com/rust-lang/rust/commit/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f2e45b18f47c9cb93267a82ed685f5d37f79367", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f2e45b18f47c9cb93267a82ed685f5d37f79367", "html_url": "https://github.com/rust-lang/rust/commit/0f2e45b18f47c9cb93267a82ed685f5d37f79367"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "cd6805967e524e2d860104818365d90157332431", "filename": "src/test/ui/sized/recursive-type-1.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsized%2Frecursive-type-1.rs?ref=8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "patch": "@@ -0,0 +1,10 @@\n+// check-pass\n+trait A { type Assoc; }\n+\n+impl A for () {\n+    // FIXME: it would be nice for this to at least cause a warning.\n+    type Assoc = Foo<()>;\n+}\n+struct Foo<T: A>(T::Assoc);\n+\n+fn main() {}"}, {"sha": "7d95417a6ffd97ed0deffc8d0788783684e487b6", "filename": "src/test/ui/sized/recursive-type-2.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.rs?ref=8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "patch": "@@ -0,0 +1,13 @@\n+// build-fail\n+//~^ ERROR cycle detected when computing layout of `Foo<()>`\n+\n+trait A { type Assoc: ?Sized; }\n+\n+impl A for () {\n+    type Assoc = Foo<()>;\n+}\n+struct Foo<T: A>(T::Assoc);\n+\n+fn main() {\n+    let x: Foo<()>;\n+}"}, {"sha": "2102c934da36f643feedeea13d7a877ffe18f9ca", "filename": "src/test/ui/sized/recursive-type-2.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8ec6c84bb31f9b403b0b25bc4685ece5c744cb48/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsized%2Frecursive-type-2.stderr?ref=8ec6c84bb31f9b403b0b25bc4685ece5c744cb48", "patch": "@@ -0,0 +1,12 @@\n+error[E0391]: cycle detected when computing layout of `Foo<()>`\n+   |\n+   = note: ...which again requires computing layout of `Foo<()>`, completing the cycle\n+note: cycle used when optimizing MIR for `main`\n+  --> $DIR/recursive-type-2.rs:11:1\n+   |\n+LL | fn main() {\n+   | ^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0391`."}]}