{"sha": "446a43da0ee23b3a69e214f030d6d7dada345296", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0NmE0M2RhMGVlMjNiM2E2OWUyMTRmMDMwZDZkN2RhZGEzNDUyOTY=", "commit": {"author": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2019-11-06T01:56:37Z"}, "committer": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2019-11-07T01:31:15Z"}, "message": "Stabilize @file command line arguments\n\nIssue https://github.com/rust-lang/rust/issues/63576", "tree": {"sha": "d9be9ad22975c5677ae195a4947b9b081bc580e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9be9ad22975c5677ae195a4947b9b081bc580e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/446a43da0ee23b3a69e214f030d6d7dada345296", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/446a43da0ee23b3a69e214f030d6d7dada345296", "html_url": "https://github.com/rust-lang/rust/commit/446a43da0ee23b3a69e214f030d6d7dada345296", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/446a43da0ee23b3a69e214f030d6d7dada345296/comments", "author": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a1b3b30c6cdd674049b144a3ced7b711de962b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a1b3b30c6cdd674049b144a3ced7b711de962b2", "html_url": "https://github.com/rust-lang/rust/commit/3a1b3b30c6cdd674049b144a3ced7b711de962b2"}], "stats": {"total": 18, "additions": 1, "deletions": 17}, "files": [{"sha": "339a10f9140446f9b5ab7db9aa91c236c2a68831", "filename": "src/librustc_driver/args.rs", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/446a43da0ee23b3a69e214f030d6d7dada345296/src%2Flibrustc_driver%2Fargs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/446a43da0ee23b3a69e214f030d6d7dada345296/src%2Flibrustc_driver%2Fargs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fargs.rs?ref=446a43da0ee23b3a69e214f030d6d7dada345296", "patch": "@@ -3,22 +3,12 @@ use std::fmt;\n use std::fs;\n use std::io;\n use std::str;\n-use std::sync::atomic::{AtomicBool, Ordering};\n-\n-static USED_ARGSFILE_FEATURE: AtomicBool = AtomicBool::new(false);\n-\n-pub fn used_unstable_argsfile() -> bool {\n-    USED_ARGSFILE_FEATURE.load(Ordering::Relaxed)\n-}\n \n pub fn arg_expand(arg: String) -> Result<Vec<String>, Error> {\n     if arg.starts_with(\"@\") {\n         let path = &arg[1..];\n         let file = match fs::read_to_string(path) {\n-            Ok(file) => {\n-                USED_ARGSFILE_FEATURE.store(true, Ordering::Relaxed);\n-                file\n-            }\n+            Ok(file) => file,\n             Err(ref err) if err.kind() == io::ErrorKind::InvalidData => {\n                 return Err(Error::Utf8Error(Some(path.to_string())));\n             }"}, {"sha": "8b531c5d88f80240f27cf89d5acd6e248fd36b72", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/446a43da0ee23b3a69e214f030d6d7dada345296/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/446a43da0ee23b3a69e214f030d6d7dada345296/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=446a43da0ee23b3a69e214f030d6d7dada345296", "patch": "@@ -1043,12 +1043,6 @@ pub fn handle_options(args: &[String]) -> Option<getopts::Matches> {\n     //   (unstable option being used on stable)\n     nightly_options::check_nightly_options(&matches, &config::rustc_optgroups());\n \n-    // Late check to see if @file was used without unstable options enabled\n-    if crate::args::used_unstable_argsfile() && !nightly_options::is_unstable_enabled(&matches) {\n-        early_error(ErrorOutputType::default(),\n-            \"@path is unstable - use -Z unstable-options to enable its use\");\n-    }\n-\n     if matches.opt_present(\"h\") || matches.opt_present(\"help\") {\n         // Only show unstable options in --help if we accept unstable options.\n         usage(matches.opt_present(\"verbose\"), nightly_options::is_unstable_enabled(&matches));"}]}