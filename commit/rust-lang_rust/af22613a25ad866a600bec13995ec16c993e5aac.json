{"sha": "af22613a25ad866a600bec13995ec16c993e5aac", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmMjI2MTNhMjVhZDg2NmE2MDBiZWMxMzk5NWVjMTZjOTkzZTVhYWM=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-12-22T02:11:35Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-12-22T02:12:12Z"}, "message": "remove clone in manual_async_fn lint", "tree": {"sha": "fbfc6e8ffd24aeb926817c3d4b62fb6149eaebb1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fbfc6e8ffd24aeb926817c3d4b62fb6149eaebb1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af22613a25ad866a600bec13995ec16c993e5aac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af22613a25ad866a600bec13995ec16c993e5aac", "html_url": "https://github.com/rust-lang/rust/commit/af22613a25ad866a600bec13995ec16c993e5aac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af22613a25ad866a600bec13995ec16c993e5aac/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "51947df56f8e730f9090c1e0f480620c2ba9165a", "url": "https://api.github.com/repos/rust-lang/rust/commits/51947df56f8e730f9090c1e0f480620c2ba9165a", "html_url": "https://github.com/rust-lang/rust/commit/51947df56f8e730f9090c1e0f480620c2ba9165a"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "29439e52c48e1252fda7a8e275741ff127a413e6", "filename": "clippy_lints/src/manual_async_fn.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Fmanual_async_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Fmanual_async_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmanual_async_fn.rs?ref=af22613a25ad866a600bec13995ec16c993e5aac", "patch": "@@ -69,7 +69,7 @@ impl<'tcx> LateLintPass<'tcx> for ManualAsyncFn {\n                     |diag| {\n                         if_chain! {\n                             if let Some(header_snip) = snippet_opt(cx, header_span);\n-                            if let Some(ret_pos) = position_before_rarrow(header_snip.clone());\n+                            if let Some(ret_pos) = position_before_rarrow(&header_snip);\n                             if let Some((ret_sugg, ret_snip)) = suggested_ret(cx, output);\n                             then {\n                                 let help = format!(\"make the function `async` and {}\", ret_sugg);"}, {"sha": "a31cd5fda849ed918211bf6d6822cf8555b3954c", "filename": "clippy_lints/src/unused_unit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Funused_unit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Funused_unit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funused_unit.rs?ref=af22613a25ad866a600bec13995ec16c993e5aac", "patch": "@@ -120,7 +120,7 @@ fn is_unit_expr(expr: &ast::Expr) -> bool {\n \n fn lint_unneeded_unit_return(cx: &EarlyContext<'_>, ty: &ast::Ty, span: Span) {\n     let (ret_span, appl) = if let Ok(fn_source) = cx.sess().source_map().span_to_snippet(span.with_hi(ty.span.hi())) {\n-        position_before_rarrow(fn_source).map_or((ty.span, Applicability::MaybeIncorrect), |rpos| {\n+        position_before_rarrow(&fn_source).map_or((ty.span, Applicability::MaybeIncorrect), |rpos| {\n             (\n                 #[allow(clippy::cast_possible_truncation)]\n                 ty.span.with_lo(BytePos(span.lo().0 + rpos as u32)),"}, {"sha": "1c68e837c4ab97286410fc51e7f3347bb8356b3e", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af22613a25ad866a600bec13995ec16c993e5aac/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=af22613a25ad866a600bec13995ec16c993e5aac", "patch": "@@ -788,8 +788,7 @@ pub fn indent_of<T: LintContext>(cx: &T, span: Span) -> Option<usize> {\n /// fn into3(self)   -> () {}\n ///               ^\n /// ```\n-#[allow(clippy::needless_pass_by_value)]\n-pub fn position_before_rarrow(s: String) -> Option<usize> {\n+pub fn position_before_rarrow(s: &str) -> Option<usize> {\n     s.rfind(\"->\").map(|rpos| {\n         let mut rpos = rpos;\n         let chars: Vec<char> = s.chars().collect();"}]}