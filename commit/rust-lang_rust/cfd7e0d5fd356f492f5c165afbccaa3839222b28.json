{"sha": "cfd7e0d5fd356f492f5c165afbccaa3839222b28", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmZDdlMGQ1ZmQzNTZmNDkyZjVjMTY1YWZiY2NhYTM4MzkyMjJiMjg=", "commit": {"author": {"name": "Jane Lusby", "email": "jlusby42@gmail.com", "date": "2019-06-09T00:08:16Z"}, "committer": {"name": "Jane Lusby", "email": "jlusby42@gmail.com", "date": "2019-06-12T19:29:37Z"}, "message": "show default lint levels", "tree": {"sha": "9d8251c283847ee61dc3ee9a3767c1474a057ab3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9d8251c283847ee61dc3ee9a3767c1474a057ab3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cfd7e0d5fd356f492f5c165afbccaa3839222b28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cfd7e0d5fd356f492f5c165afbccaa3839222b28", "html_url": "https://github.com/rust-lang/rust/commit/cfd7e0d5fd356f492f5c165afbccaa3839222b28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cfd7e0d5fd356f492f5c165afbccaa3839222b28/comments", "author": {"login": "yaahc", "id": 1993852, "node_id": "MDQ6VXNlcjE5OTM4NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1993852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaahc", "html_url": "https://github.com/yaahc", "followers_url": "https://api.github.com/users/yaahc/followers", "following_url": "https://api.github.com/users/yaahc/following{/other_user}", "gists_url": "https://api.github.com/users/yaahc/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaahc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaahc/subscriptions", "organizations_url": "https://api.github.com/users/yaahc/orgs", "repos_url": "https://api.github.com/users/yaahc/repos", "events_url": "https://api.github.com/users/yaahc/events{/privacy}", "received_events_url": "https://api.github.com/users/yaahc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yaahc", "id": 1993852, "node_id": "MDQ6VXNlcjE5OTM4NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1993852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaahc", "html_url": "https://github.com/yaahc", "followers_url": "https://api.github.com/users/yaahc/followers", "following_url": "https://api.github.com/users/yaahc/following{/other_user}", "gists_url": "https://api.github.com/users/yaahc/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaahc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaahc/subscriptions", "organizations_url": "https://api.github.com/users/yaahc/orgs", "repos_url": "https://api.github.com/users/yaahc/repos", "events_url": "https://api.github.com/users/yaahc/events{/privacy}", "received_events_url": "https://api.github.com/users/yaahc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07ccec86a5e497f47c4f91f8bcba45d356ded292", "url": "https://api.github.com/repos/rust-lang/rust/commits/07ccec86a5e497f47c4f91f8bcba45d356ded292", "html_url": "https://github.com/rust-lang/rust/commit/07ccec86a5e497f47c4f91f8bcba45d356ded292"}], "stats": {"total": 69, "additions": 44, "deletions": 25}, "files": [{"sha": "d4f798a3cae8dcab78380b3a76de39c58cd50c2a", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cfd7e0d5fd356f492f5c165afbccaa3839222b28/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfd7e0d5fd356f492f5c165afbccaa3839222b28/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=cfd7e0d5fd356f492f5c165afbccaa3839222b28", "patch": "@@ -102,6 +102,7 @@ fn update_lints(update_mode: &UpdateMode) {\n \n pub mod lint;\n pub use lint::Lint;\n+pub use lint::LINT_LEVELS;\n \n pub const ALL_LINTS: [Lint; {}] = {:#?};\\n\",\n             sorted_usable_lints.len(),"}, {"sha": "9f9aba2c06052ba2f67192d4c262e7934e9005d6", "filename": "src/driver.rs", "status": "modified", "additions": 12, "deletions": 25, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=cfd7e0d5fd356f492f5c165afbccaa3839222b28", "patch": "@@ -125,9 +125,17 @@ Available lint options:\n \"\n     );\n \n+    let lint_level = |lint: &Lint| {\n+        LINT_LEVELS\n+            .iter()\n+            .find(|level_mapping| level_mapping.0 == lint.group)\n+            .map(|(_, level)| level)\n+            .unwrap()\n+    };\n+\n     let mut lints: Vec<_> = ALL_LINTS.iter().collect();\n     // The sort doesn't case-fold but it's doubtful we care.\n-    lints.sort_by_cached_key(|x: &&Lint| (\"unknown\", x.name));\n+    lints.sort_by_cached_key(|x: &&Lint| (lint_level(x), x.name));\n \n     let max_name_len = lints\n         .iter()\n@@ -153,7 +161,7 @@ Available lint options:\n     let print_lints = |lints: &[&Lint]| {\n         for lint in lints {\n             let name = lint.name.replace(\"_\", \"-\");\n-            println!(\"    {}  {:7.7}  {}\", padded(&scoped(&name)), \"unknown\", lint.desc);\n+            println!(\"    {}  {:7.7}  {}\", padded(&scoped(&name)), lint_level(lint), lint.desc);\n         }\n         println!(\"\\n\");\n     };\n@@ -179,12 +187,12 @@ Available lint options:\n     println!(\"Lint groups provided by rustc:\\n\");\n     println!(\"    {}  sub-lints\", padded(\"name\"));\n     println!(\"    {}  ---------\", padded(\"----\"));\n-    // println!(\"    {}  all lints that are set to issue warnings\", padded(\"warnings\"));\n \n     let print_lint_groups = || {\n         for group in lint_groups {\n             let name = group.to_lowercase().replace(\"_\", \"-\");\n-            let desc = lints.iter()\n+            let desc = lints\n+                .iter()\n                 .filter(|&lint| lint.group == group)\n                 .map(|lint| lint.name)\n                 .map(|name| name.replace(\"_\", \"-\"))\n@@ -196,27 +204,6 @@ Available lint options:\n     };\n \n     print_lint_groups();\n-\n-    // print_lint_groups(builtin_groups);\n-\n-    // match (loaded_plugins, plugin.len(), plugin_groups.len()) {\n-    //     (false, 0, _) | (false, _, 0) => {\n-    //         println!(\"Compiler plugins can provide additional lints and lint groups. To see a \\\n-    //                   listing of these, re-run `rustc -W help` with a crate filename.\");\n-    //     }\n-    //     (false, ..) => panic!(\"didn't load lint plugins but got them anyway!\"),\n-    //     (true, 0, 0) => println!(\"This crate does not load any lint plugins or lint groups.\"),\n-    //     (true, l, g) => {\n-    //         if l > 0 {\n-    //             println!(\"Lint checks provided by plugins loaded by this crate:\\n\");\n-    //             print_lints(plugin);\n-    //         }\n-    //         if g > 0 {\n-    //             println!(\"Lint groups provided by plugins loaded by this crate:\\n\");\n-    //             print_lint_groups(plugin_groups);\n-    //         }\n-    //     }\n-    // }\n }\n \n fn display_help() {"}, {"sha": "44c4a5289076edc746921a941151d3da0cbb5956", "filename": "src/lintlist/lint.rs", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Flintlist%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Flintlist%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Flint.rs?ref=cfd7e0d5fd356f492f5c165afbccaa3839222b28", "patch": "@@ -7,3 +7,33 @@ pub struct Lint {\n     pub deprecation: Option<&'static str>,\n     pub module: &'static str,\n }\n+\n+#[derive(PartialOrd, PartialEq, Ord, Eq)]\n+pub enum LintLevel {\n+    Allow,\n+    Warn,\n+    Deny,\n+}\n+\n+impl std::fmt::Display for LintLevel {\n+    fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {\n+        let s = match self {\n+            LintLevel::Allow => \"allow\",\n+            LintLevel::Warn => \"warn\",\n+            LintLevel::Deny => \"deny\",\n+        };\n+\n+        write!(f, \"{}\", s)\n+    }\n+}\n+\n+pub const LINT_LEVELS: [(&str, LintLevel); 8] = [\n+    (\"correctness\", LintLevel::Deny),\n+    (\"style\", LintLevel::Warn),\n+    (\"complexity\", LintLevel::Warn),\n+    (\"perf\", LintLevel::Warn),\n+    (\"restriction\", LintLevel::Allow),\n+    (\"pedantic\", LintLevel::Allow),\n+    (\"nursery\", LintLevel::Allow),\n+    (\"cargo\", LintLevel::Allow),\n+];"}, {"sha": "3c93c41b4dcd32b5519496deb5e51870cecc6450", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfd7e0d5fd356f492f5c165afbccaa3839222b28/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=cfd7e0d5fd356f492f5c165afbccaa3839222b28", "patch": "@@ -2,6 +2,7 @@\n \n pub mod lint;\n pub use lint::Lint;\n+pub use lint::LINT_LEVELS;\n \n pub const ALL_LINTS: [Lint; 304] = [\n     Lint {"}]}