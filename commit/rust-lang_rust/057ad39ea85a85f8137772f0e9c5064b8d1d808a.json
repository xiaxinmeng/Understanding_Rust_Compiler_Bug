{"sha": "057ad39ea85a85f8137772f0e9c5064b8d1d808a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1N2FkMzllYTg1YTg1ZjgxMzc3NzJmMGU5YzUwNjRiOGQxZDgwOGE=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-01-01T16:11:45Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-01-01T16:20:16Z"}, "message": "Update the barrier cache during ARM EHABI unwinding", "tree": {"sha": "b3538fe80cb9bdcbbdbec775f420e717e365735b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3538fe80cb9bdcbbdbec775f420e717e365735b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/057ad39ea85a85f8137772f0e9c5064b8d1d808a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/057ad39ea85a85f8137772f0e9c5064b8d1d808a", "html_url": "https://github.com/rust-lang/rust/commit/057ad39ea85a85f8137772f0e9c5064b8d1d808a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/057ad39ea85a85f8137772f0e9c5064b8d1d808a/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bbf13723bc22f1a850438bf0b103d09e474a1ef5", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbf13723bc22f1a850438bf0b103d09e474a1ef5", "html_url": "https://github.com/rust-lang/rust/commit/bbf13723bc22f1a850438bf0b103d09e474a1ef5"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "e612a63994ba4608b9943e694212c341aed85b35", "filename": "src/libpanic_unwind/gcc.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/057ad39ea85a85f8137772f0e9c5064b8d1d808a/src%2Flibpanic_unwind%2Fgcc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/057ad39ea85a85f8137772f0e9c5064b8d1d808a/src%2Flibpanic_unwind%2Fgcc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fgcc.rs?ref=057ad39ea85a85f8137772f0e9c5064b8d1d808a", "patch": "@@ -188,7 +188,13 @@ cfg_if::cfg_if! {\n                 match eh_action {\n                     EHAction::None |\n                     EHAction::Cleanup(_) => return continue_unwind(exception_object, context),\n-                    EHAction::Catch(_) => return uw::_URC_HANDLER_FOUND,\n+                    EHAction::Catch(_) => {\n+                        // EHABI requires the personality routine to update the\n+                        // SP value in the barrier cache of the exception object.\n+                        (*exception_object).private[5] =\n+                            uw::_Unwind_GetGR(context, uw::UNWIND_SP_REG);\n+                        return uw::_URC_HANDLER_FOUND;\n+                    }\n                     EHAction::Terminate => return uw::_URC_FAILURE,\n                 }\n             } else {"}, {"sha": "087bbb4beb59c8b586c02b4906877bc413ba9607", "filename": "src/libunwind/libunwind.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/057ad39ea85a85f8137772f0e9c5064b8d1d808a/src%2Flibunwind%2Flibunwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/057ad39ea85a85f8137772f0e9c5064b8d1d808a/src%2Flibunwind%2Flibunwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Flibunwind.rs?ref=057ad39ea85a85f8137772f0e9c5064b8d1d808a", "patch": "@@ -23,6 +23,7 @@ pub type _Unwind_Word = uintptr_t;\n pub type _Unwind_Ptr = uintptr_t;\n pub type _Unwind_Trace_Fn =\n     extern \"C\" fn(ctx: *mut _Unwind_Context, arg: *mut c_void) -> _Unwind_Reason_Code;\n+\n #[cfg(target_arch = \"x86\")]\n pub const unwinder_private_data_size: usize = 5;\n \n@@ -152,6 +153,7 @@ if #[cfg(all(any(target_os = \"ios\", target_os = \"netbsd\", not(target_arch = \"arm\n     use _Unwind_VRS_DataRepresentation::*;\n \n     pub const UNWIND_POINTER_REG: c_int = 12;\n+    pub const UNWIND_SP_REG: c_int = 13;\n     pub const UNWIND_IP_REG: c_int = 15;\n \n     #[cfg_attr(all(feature = \"llvm-libunwind\","}]}