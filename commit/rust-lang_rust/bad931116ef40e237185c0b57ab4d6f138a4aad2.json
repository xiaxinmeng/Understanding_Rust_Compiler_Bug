{"sha": "bad931116ef40e237185c0b57ab4d6f138a4aad2", "node_id": "C_kwDOAAsO6NoAKGJhZDkzMTExNmVmNDBlMjM3MTg1YzBiNTdhYjRkNmYxMzhhNGFhZDI", "commit": {"author": {"name": "Maan2003", "email": "manmeetmann2003@gmail.com", "date": "2022-06-01T13:08:53Z"}, "committer": {"name": "Maan2003", "email": "manmeetmann2003@gmail.com", "date": "2022-06-01T13:08:53Z"}, "message": "fix(diagnostic): Don't remove diagnostic with empty message\n\nUse \" \" as message if it is empty", "tree": {"sha": "82f2ff982985427a3f08b17152ef925f12aeed39", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/82f2ff982985427a3f08b17152ef925f12aeed39"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bad931116ef40e237185c0b57ab4d6f138a4aad2", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEVt0Hfgx04mDvJfYh6a8CS6Y8cO0FAmKXZW4ACgkQ6a8CS6Y8\ncO1FNw//R4BOnLBdApECeTbFETeyNPEExSz39Ayj6WtsWwgnSSuakMwc7Jfo+P+q\nWK3VgjQYv43PKtq/OH22h+neBbVrN08Ws7gX4bMXA5moJC7HaalgTTCio3BJJ9fX\nG/wL18VaVd/P0WqJKZZgnMsvHeULyRTTaojAISGRFhHcuSd7yUqQvYIg4pZU/OYL\npoZijuJ59JXBGflw2J8a9K8Y43xSWhKTzSojASqg+BWDPRYW61P37dYwBA6A/ntf\nW09QK9A9hknVlem/C+TashDHUrlljLMdBvcjLyFFnLk0iYLou/TgswPFPExQSPSv\nFP5hqNo8wQW2J0QWoUOMwVfSC4D1QlaRSk7wKDai88dyTJMj+3KDY4loydlxbJ3h\nWMxbj4+IALooj5MrBUNvxZrNmsjqPMutsfcFCjTSICRryeV6Oa0Wb7kfKBs1I9u5\nfbZl2MJPdWLityKqADvBxJs5LgEx00LnGteZAVcSSl9ENpFU/V6B/vcKxRcfRTOn\nyN0fx/pscPVU6djXH/KGnFPIE1WDgUZqlJG/Bqa6VmqbTXzLdmx+RJxcmz3X2+sY\nty67yQwWhvUcvqD+7Qdp5AD1VaR7ROtEYmGDFkoyfFYK9QCngOJFwJbfk59GgVca\nKGei/CrZ0VrdTuserJxQ3D8XRaAP6gZtyWoEGjPj+yv9YJLwYS4=\n=W4c7\n-----END PGP SIGNATURE-----", "payload": "tree 82f2ff982985427a3f08b17152ef925f12aeed39\nparent 4f5c7aafffa5a424302275677da39f666f498d3e\nauthor Maan2003 <manmeetmann2003@gmail.com> 1654088933 +0530\ncommitter Maan2003 <manmeetmann2003@gmail.com> 1654088933 +0530\n\nfix(diagnostic): Don't remove diagnostic with empty message\n\nUse \" \" as message if it is empty\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bad931116ef40e237185c0b57ab4d6f138a4aad2", "html_url": "https://github.com/rust-lang/rust/commit/bad931116ef40e237185c0b57ab4d6f138a4aad2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bad931116ef40e237185c0b57ab4d6f138a4aad2/comments", "author": {"login": "Maan2003", "id": 49202620, "node_id": "MDQ6VXNlcjQ5MjAyNjIw", "avatar_url": "https://avatars.githubusercontent.com/u/49202620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Maan2003", "html_url": "https://github.com/Maan2003", "followers_url": "https://api.github.com/users/Maan2003/followers", "following_url": "https://api.github.com/users/Maan2003/following{/other_user}", "gists_url": "https://api.github.com/users/Maan2003/gists{/gist_id}", "starred_url": "https://api.github.com/users/Maan2003/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Maan2003/subscriptions", "organizations_url": "https://api.github.com/users/Maan2003/orgs", "repos_url": "https://api.github.com/users/Maan2003/repos", "events_url": "https://api.github.com/users/Maan2003/events{/privacy}", "received_events_url": "https://api.github.com/users/Maan2003/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Maan2003", "id": 49202620, "node_id": "MDQ6VXNlcjQ5MjAyNjIw", "avatar_url": "https://avatars.githubusercontent.com/u/49202620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Maan2003", "html_url": "https://github.com/Maan2003", "followers_url": "https://api.github.com/users/Maan2003/followers", "following_url": "https://api.github.com/users/Maan2003/following{/other_user}", "gists_url": "https://api.github.com/users/Maan2003/gists{/gist_id}", "starred_url": "https://api.github.com/users/Maan2003/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Maan2003/subscriptions", "organizations_url": "https://api.github.com/users/Maan2003/orgs", "repos_url": "https://api.github.com/users/Maan2003/repos", "events_url": "https://api.github.com/users/Maan2003/events{/privacy}", "received_events_url": "https://api.github.com/users/Maan2003/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f5c7aafffa5a424302275677da39f666f498d3e", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f5c7aafffa5a424302275677da39f666f498d3e", "html_url": "https://github.com/rust-lang/rust/commit/4f5c7aafffa5a424302275677da39f666f498d3e"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "8f779df18d3553ff21b3562f866727200be5dcd1", "filename": "crates/rust-analyzer/src/diagnostics/to_proto.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bad931116ef40e237185c0b57ab4d6f138a4aad2/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bad931116ef40e237185c0b57ab4d6f138a4aad2/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Fto_proto.rs?ref=bad931116ef40e237185c0b57ab4d6f138a4aad2", "patch": "@@ -462,9 +462,10 @@ pub(crate) fn map_rust_diagnostic_to_lsp(\n                 message: \"original diagnostic\".to_string(),\n             };\n             for sub in &subdiagnostics {\n-                // Filter out empty/non-existent messages, as they greatly confuse VS Code.\n-                if sub.related.message.is_empty() {\n-                    continue;\n+                let mut message = sub.related.message.clone();\n+                // Change empty message to \" \", as they greatly confuse VS Code.\n+                if message.is_empty() {\n+                    message = String::from(\" \");\n                 }\n                 diagnostics.push(MappedRustDiagnostic {\n                     url: sub.related.location.uri.clone(),\n@@ -475,7 +476,7 @@ pub(crate) fn map_rust_diagnostic_to_lsp(\n                         code: code.clone().map(lsp_types::NumberOrString::String),\n                         code_description: code_description.clone(),\n                         source: Some(source.clone()),\n-                        message: sub.related.message.clone(),\n+                        message,\n                         related_information: Some(vec![back_ref.clone()]),\n                         tags: None, // don't apply modifiers again\n                         data: None,"}]}