{"sha": "6b3811a3587cc9d9d0734c44e24b969319a7fab5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiMzgxMWEzNTg3Y2M5ZDlkMDczNGM0NGUyNGI5NjkzMTlhN2ZhYjU=", "commit": {"author": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-04-01T09:43:52Z"}, "committer": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-04-01T13:29:26Z"}, "message": "Use Iterator methods", "tree": {"sha": "d9ccb3342568b6a60fbd7bbca1c8a6601657a899", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9ccb3342568b6a60fbd7bbca1c8a6601657a899"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b3811a3587cc9d9d0734c44e24b969319a7fab5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b3811a3587cc9d9d0734c44e24b969319a7fab5", "html_url": "https://github.com/rust-lang/rust/commit/6b3811a3587cc9d9d0734c44e24b969319a7fab5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b3811a3587cc9d9d0734c44e24b969319a7fab5/comments", "author": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed46a777c8f2fdd54811f8af1660fd55f7869d05", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed46a777c8f2fdd54811f8af1660fd55f7869d05", "html_url": "https://github.com/rust-lang/rust/commit/ed46a777c8f2fdd54811f8af1660fd55f7869d05"}], "stats": {"total": 28, "additions": 3, "deletions": 25}, "files": [{"sha": "eca206a75fe6c9efe1d1fa613a43589f5f0ab3a2", "filename": "src/config/options.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6b3811a3587cc9d9d0734c44e24b969319a7fab5/src%2Fconfig%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b3811a3587cc9d9d0734c44e24b969319a7fab5/src%2Fconfig%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Foptions.rs?ref=6b3811a3587cc9d9d0734c44e24b969319a7fab5", "patch": "@@ -271,13 +271,7 @@ impl IgnoreList {\n     }\n \n     fn skip_file_inner(&self, file: &Path) -> bool {\n-        for path in &self.0 {\n-            if file.starts_with(path) {\n-                return true;\n-            }\n-        }\n-\n-        false\n+        self.0.iter().any(|path| file.starts_with(path))\n     }\n \n     pub fn skip_file(&self, file: &FileName) -> bool {"}, {"sha": "3ff9455d5f79e47553091350eaccdabe97f1a429", "filename": "src/git-rustfmt/main.rs", "status": "modified", "additions": 2, "deletions": 18, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/6b3811a3587cc9d9d0734c44e24b969319a7fab5/src%2Fgit-rustfmt%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b3811a3587cc9d9d0734c44e24b969319a7fab5/src%2Fgit-rustfmt%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fgit-rustfmt%2Fmain.rs?ref=6b3811a3587cc9d9d0734c44e24b969319a7fab5", "patch": "@@ -32,16 +32,7 @@ fn prune_files(files: Vec<&str>) -> Vec<&str> {\n \n     let mut pruned_prefixes = vec![];\n     for p1 in prefixes {\n-        let mut include = true;\n-        if !p1.starts_with(\"src/bin/\") {\n-            for p2 in &pruned_prefixes {\n-                if p1.starts_with(p2) {\n-                    include = false;\n-                    break;\n-                }\n-            }\n-        }\n-        if include {\n+        if p1.starts_with(\"src/bin/\") || pruned_prefixes.iter().all(|p2| !p1.starts_with(p2)) {\n             pruned_prefixes.push(p1);\n         }\n     }\n@@ -50,17 +41,10 @@ fn prune_files(files: Vec<&str>) -> Vec<&str> {\n     files\n         .into_iter()\n         .filter(|f| {\n-            let mut include = true;\n             if f.ends_with(\"mod.rs\") || f.ends_with(\"lib.rs\") || f.starts_with(\"src/bin/\") {\n                 return true;\n             }\n-            for pp in &pruned_prefixes {\n-                if f.starts_with(pp) {\n-                    include = false;\n-                    break;\n-                }\n-            }\n-            include\n+            pruned_prefixes.iter().all(|pp| !f.starts_with(pp))\n         })\n         .collect()\n }"}]}