{"sha": "a899ebd10241518dcd08245cd736de3666d6b2ea", "node_id": "C_kwDOAAsO6NoAKGE4OTllYmQxMDI0MTUxOGRjZDA4MjQ1Y2Q3MzZkZTM2NjZkNmIyZWE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-04-12T06:46:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-12T06:46:56Z"}, "message": "Rollup merge of #95722 - xu-cheng:pre-push, r=Mark-Simulacrum\n\npre-push.sh: Use python3 if python is not found\n\nSince Python 2 has reached EOL, `python` may not be available in certain systems (e.g., recent macOS). We should use `python3` in this case to avoid error like `python: No such file or directory`.", "tree": {"sha": "fb9c05278c1c1568f378b543f458f6b5b4017111", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb9c05278c1c1568f378b543f458f6b5b4017111"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a899ebd10241518dcd08245cd736de3666d6b2ea", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiVSBhCRBK7hj4Ov3rIwAAPSAIAEhDhE8tIRUc0oQqM00d7cDx\nOUJ61X9R20ZWR5aVCcr0sZWlFlzQEPaN39lk+P6z0a+yCyixpY2sd/hwGBZdEijp\nXw8zX8Asjzc7rvTehx1Wb/RJgtTHvB8lRaL06w+4xLVo4sl8n4RYk20rnBnCT3xm\nVzlnfsb+roeHTTQRu8jyvuGa7oPc+TGOZ/c1nh9rXJzkGU3nGc7cekMt4v2ezfui\neK+X/bw7nRvXT9q27XxKMEu+1J24mTH20TroPtTr9pZ6IhYxmyaR5VHQ9KYPLqlb\nfEAlMalRfkiilBYln5N9GlwG9qwP0E+0a5v3c1KbXaWzAh1qARC5ozs4X153Ycs=\n=NF4t\n-----END PGP SIGNATURE-----\n", "payload": "tree fb9c05278c1c1568f378b543f458f6b5b4017111\nparent 1d3517907727ecd6fea3fc7132c4ae55b2d06958\nparent 365d4f4fd0caa3e4e1dd95eb42f7244e1424d37e\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1649746016 +0200\ncommitter GitHub <noreply@github.com> 1649746016 +0200\n\nRollup merge of #95722 - xu-cheng:pre-push, r=Mark-Simulacrum\n\npre-push.sh: Use python3 if python is not found\n\nSince Python 2 has reached EOL, `python` may not be available in certain systems (e.g., recent macOS). We should use `python3` in this case to avoid error like `python: No such file or directory`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a899ebd10241518dcd08245cd736de3666d6b2ea", "html_url": "https://github.com/rust-lang/rust/commit/a899ebd10241518dcd08245cd736de3666d6b2ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a899ebd10241518dcd08245cd736de3666d6b2ea/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d3517907727ecd6fea3fc7132c4ae55b2d06958", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d3517907727ecd6fea3fc7132c4ae55b2d06958", "html_url": "https://github.com/rust-lang/rust/commit/1d3517907727ecd6fea3fc7132c4ae55b2d06958"}, {"sha": "365d4f4fd0caa3e4e1dd95eb42f7244e1424d37e", "url": "https://api.github.com/repos/rust-lang/rust/commits/365d4f4fd0caa3e4e1dd95eb42f7244e1424d37e", "html_url": "https://github.com/rust-lang/rust/commit/365d4f4fd0caa3e4e1dd95eb42f7244e1424d37e"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "5f5b48bc1c0b43ff235a91779e173ac3d05e2090", "filename": "src/etc/pre-push.sh", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a899ebd10241518dcd08245cd736de3666d6b2ea/src%2Fetc%2Fpre-push.sh", "raw_url": "https://github.com/rust-lang/rust/raw/a899ebd10241518dcd08245cd736de3666d6b2ea/src%2Fetc%2Fpre-push.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpre-push.sh?ref=a899ebd10241518dcd08245cd736de3666d6b2ea", "patch": "@@ -1,6 +1,6 @@\n #!/usr/bin/env bash\n #\n-# Call `tidy --bless` before each commit\n+# Call `tidy --bless` before git push\n # Copy this script to .git/hooks to activate,\n # and remove it from .git/hooks to deactivate.\n #\n@@ -14,6 +14,8 @@ COMMAND=\"$ROOT_DIR/x.py test tidy --bless\"\n \n if [[ \"$OSTYPE\" == \"msys\" || \"$OSTYPE\" == \"win32\" ]]; then\n   COMMAND=\"python $COMMAND\"\n+elif ! command -v python &> /dev/null; then\n+  COMMAND=\"python3 $COMMAND\"\n fi\n \n echo \"Running pre-push script '$COMMAND'\""}]}