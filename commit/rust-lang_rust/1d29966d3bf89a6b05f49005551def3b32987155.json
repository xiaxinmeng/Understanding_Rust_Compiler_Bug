{"sha": "1d29966d3bf89a6b05f49005551def3b32987155", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFkMjk5NjZkM2JmODlhNmIwNWY0OTAwNTU1MWRlZjNiMzI5ODcxNTU=", "commit": {"author": {"name": "Michael Hewson", "email": "michael@michaelhewson.ca", "date": "2017-11-07T19:32:59Z"}, "committer": {"name": "Michael Hewson", "email": "michael@michaelhewson.ca", "date": "2017-11-07T19:32:59Z"}, "message": "wrap error code in DiagnosticId::Error so it compiles", "tree": {"sha": "2894e2d99ab1e4ec6cef663aa05c91a29a1ad53f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2894e2d99ab1e4ec6cef663aa05c91a29a1ad53f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1d29966d3bf89a6b05f49005551def3b32987155", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1d29966d3bf89a6b05f49005551def3b32987155", "html_url": "https://github.com/rust-lang/rust/commit/1d29966d3bf89a6b05f49005551def3b32987155", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1d29966d3bf89a6b05f49005551def3b32987155/comments", "author": {"login": "mikeyhew", "id": 6751033, "node_id": "MDQ6VXNlcjY3NTEwMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeyhew", "html_url": "https://github.com/mikeyhew", "followers_url": "https://api.github.com/users/mikeyhew/followers", "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}", "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions", "organizations_url": "https://api.github.com/users/mikeyhew/orgs", "repos_url": "https://api.github.com/users/mikeyhew/repos", "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeyhew/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mikeyhew", "id": 6751033, "node_id": "MDQ6VXNlcjY3NTEwMzM=", "avatar_url": "https://avatars.githubusercontent.com/u/6751033?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mikeyhew", "html_url": "https://github.com/mikeyhew", "followers_url": "https://api.github.com/users/mikeyhew/followers", "following_url": "https://api.github.com/users/mikeyhew/following{/other_user}", "gists_url": "https://api.github.com/users/mikeyhew/gists{/gist_id}", "starred_url": "https://api.github.com/users/mikeyhew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mikeyhew/subscriptions", "organizations_url": "https://api.github.com/users/mikeyhew/orgs", "repos_url": "https://api.github.com/users/mikeyhew/repos", "events_url": "https://api.github.com/users/mikeyhew/events{/privacy}", "received_events_url": "https://api.github.com/users/mikeyhew/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d739b5b97f537e6cb6913e33bbce5385aeb0ae4", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d739b5b97f537e6cb6913e33bbce5385aeb0ae4", "html_url": "https://github.com/rust-lang/rust/commit/0d739b5b97f537e6cb6913e33bbce5385aeb0ae4"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "89dbd20b699d97b9574c91b59ee260892ad5d8e9", "filename": "src/librustc_typeck/check/wfcheck.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1d29966d3bf89a6b05f49005551def3b32987155/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d29966d3bf89a6b05f49005551def3b32987155/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs?ref=1d29966d3bf89a6b05f49005551def3b32987155", "patch": "@@ -22,7 +22,7 @@ use rustc::middle::lang_items;\n use syntax::ast;\n use syntax::feature_gate::{self, GateIssue};\n use syntax_pos::Span;\n-use errors::DiagnosticBuilder;\n+use errors::{DiagnosticBuilder, DiagnosticId};\n \n use rustc::hir::intravisit::{self, Visitor, NestedVisitorMap};\n use rustc::hir;\n@@ -489,7 +489,7 @@ impl<'a, 'gcx> CheckTypeWellFormedVisitor<'a, 'gcx> {\n                 fcx.tcx.sess.diagnostic().mut_span_err(span, &format!(\"invalid `self` type: {:?}\", self_arg_ty))\n                 .note(&format!(\"type must be `{:?}` or a type that dereferences to it`\", self_ty))\n                 .help(\"consider changing to `self`, `&self`, `&mut self`, or `self: Box<Self>`\")\n-                .code(\"E0307\".into())\n+                .code(DiagnosticId::Error(\"E0307\".into()))\n                 .emit();\n                 break\n             }"}]}