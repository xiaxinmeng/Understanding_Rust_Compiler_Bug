{"sha": "98250af4a3835dd3e24595ab40b37ee79d72203a", "node_id": "C_kwDOAAsO6NoAKDk4MjUwYWY0YTM4MzVkZDNlMjQ1OTVhYjQwYjM3ZWU3OWQ3MjIwM2E", "commit": {"author": {"name": "Elliot Bobrow", "email": "elliotgreybobrow@gmail.com", "date": "2022-10-26T04:16:28Z"}, "committer": {"name": "Elliot Bobrow", "email": "elliotgreybobrow@gmail.com", "date": "2022-10-26T04:16:28Z"}, "message": "`question_mark` don't lint on `if let Err` with else", "tree": {"sha": "056d03e2d174f085475762a0a7beef69cc774857", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/056d03e2d174f085475762a0a7beef69cc774857"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98250af4a3835dd3e24595ab40b37ee79d72203a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98250af4a3835dd3e24595ab40b37ee79d72203a", "html_url": "https://github.com/rust-lang/rust/commit/98250af4a3835dd3e24595ab40b37ee79d72203a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98250af4a3835dd3e24595ab40b37ee79d72203a/comments", "author": {"login": "ebobrow", "id": 77182873, "node_id": "MDQ6VXNlcjc3MTgyODcz", "avatar_url": "https://avatars.githubusercontent.com/u/77182873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebobrow", "html_url": "https://github.com/ebobrow", "followers_url": "https://api.github.com/users/ebobrow/followers", "following_url": "https://api.github.com/users/ebobrow/following{/other_user}", "gists_url": "https://api.github.com/users/ebobrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebobrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebobrow/subscriptions", "organizations_url": "https://api.github.com/users/ebobrow/orgs", "repos_url": "https://api.github.com/users/ebobrow/repos", "events_url": "https://api.github.com/users/ebobrow/events{/privacy}", "received_events_url": "https://api.github.com/users/ebobrow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ebobrow", "id": 77182873, "node_id": "MDQ6VXNlcjc3MTgyODcz", "avatar_url": "https://avatars.githubusercontent.com/u/77182873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebobrow", "html_url": "https://github.com/ebobrow", "followers_url": "https://api.github.com/users/ebobrow/followers", "following_url": "https://api.github.com/users/ebobrow/following{/other_user}", "gists_url": "https://api.github.com/users/ebobrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebobrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebobrow/subscriptions", "organizations_url": "https://api.github.com/users/ebobrow/orgs", "repos_url": "https://api.github.com/users/ebobrow/repos", "events_url": "https://api.github.com/users/ebobrow/events{/privacy}", "received_events_url": "https://api.github.com/users/ebobrow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f16596b6a8fa00395c0fef529225a2093a5a6ac", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f16596b6a8fa00395c0fef529225a2093a5a6ac", "html_url": "https://github.com/rust-lang/rust/commit/6f16596b6a8fa00395c0fef529225a2093a5a6ac"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "5644c2f72db0d808255bc2ce07a8821ba895f941", "filename": "clippy_lints/src/question_mark.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/98250af4a3835dd3e24595ab40b37ee79d72203a/clippy_lints%2Fsrc%2Fquestion_mark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98250af4a3835dd3e24595ab40b37ee79d72203a/clippy_lints%2Fsrc%2Fquestion_mark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fquestion_mark.rs?ref=98250af4a3835dd3e24595ab40b37ee79d72203a", "patch": "@@ -189,6 +189,7 @@ fn is_early_return(smbl: Symbol, cx: &LateContext<'_>, if_block: &IfBlockType<'_\n                             && expr_return_none_or_err(smbl, cx, if_else.unwrap(), let_expr, Some(let_pat_sym)))\n                             || is_res_lang_ctor(cx, res, ResultErr)\n                                 && expr_return_none_or_err(smbl, cx, if_then, let_expr, Some(let_pat_sym))\n+                                && if_else.is_none()\n                     },\n                     _ => false,\n                 }"}, {"sha": "5c49d46da7260853a690c4becc093ae6e4998a37", "filename": "tests/ui/question_mark.fixed", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fquestion_mark.fixed?ref=98250af4a3835dd3e24595ab40b37ee79d72203a", "patch": "@@ -134,6 +134,9 @@ fn result_func(x: Result<i32, i32>) -> Result<i32, i32> {\n         return func_returning_result();\n     }\n \n+    // no warning\n+    let _ = if let Err(e) = x { Err(e) } else { Ok(0) };\n+\n     Ok(y)\n }\n "}, {"sha": "d057df6a9b35de793d2954b89dfedd0be6878c45", "filename": "tests/ui/question_mark.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fquestion_mark.rs?ref=98250af4a3835dd3e24595ab40b37ee79d72203a", "patch": "@@ -166,6 +166,9 @@ fn result_func(x: Result<i32, i32>) -> Result<i32, i32> {\n         return func_returning_result();\n     }\n \n+    // no warning\n+    let _ = if let Err(e) = x { Err(e) } else { Ok(0) };\n+\n     Ok(y)\n }\n "}, {"sha": "23172d7e535dd484e165d8ab896c271f70116127", "filename": "tests/ui/question_mark.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/98250af4a3835dd3e24595ab40b37ee79d72203a/tests%2Fui%2Fquestion_mark.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fquestion_mark.stderr?ref=98250af4a3835dd3e24595ab40b37ee79d72203a", "patch": "@@ -115,15 +115,15 @@ LL | |     }\n    | |_____^ help: replace it with: `x?;`\n \n error: this block may be rewritten with the `?` operator\n-  --> $DIR/question_mark.rs:193:5\n+  --> $DIR/question_mark.rs:196:5\n    |\n LL | /     if let Err(err) = func_returning_result() {\n LL | |         return Err(err);\n LL | |     }\n    | |_____^ help: replace it with: `func_returning_result()?;`\n \n error: this block may be rewritten with the `?` operator\n-  --> $DIR/question_mark.rs:200:5\n+  --> $DIR/question_mark.rs:203:5\n    |\n LL | /     if let Err(err) = func_returning_result() {\n LL | |         return Err(err);"}]}