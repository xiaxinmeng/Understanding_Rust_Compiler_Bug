{"sha": "d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwNTlmMjYxOWZhNWQwOTg0NGMxYjY2ZTM1MWNmMmNkYmY3ODFmYTU=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-09-03T00:22:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-03T00:22:07Z"}, "message": "Rollup merge of #76204 - NoraCodes:nora/control_flow_enum, r=scottmcm\n\nRename and expose LoopState as ControlFlow\n\nBasic PR for #75744. Addresses everything there except for documentation; lots of examples are probably a good idea.", "tree": {"sha": "938d82356db78131fb03d054ef89f8c036b7bb33", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/938d82356db78131fb03d054ef89f8c036b7bb33"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfUDcwCRBK7hj4Ov3rIwAAdHIIAE6sGKsuN3sZZcE8p4uKHnUi\n3tb/fQ0xUhg0sBulTCBW+rOSGzcJAaknUhB2W6bbPp3xV3J69rZ0GMeCrbwsnfDw\nmw2ZFEIHp3mbtbLyQjO2op+mYp15P2EdApAjLJhLWWazucucCwZnjTqhTEodsL/q\n3miAfZ5L+4vXLngCd68dvtPT4rNhcHw9F3SF4sP8moeTxpYN5Hsj+ew4aM31RP2k\nPapeQKkF1ABzioCUO+9mkahLEG+QNjXE1yq9Xd6czWwKFqD3tP20N0xphzlME5ra\n0QM3sNDqpZP7qLcKa0wMx+RRXAO7lnVnVVB7aSR6paX3Y1uNGD6LSHb0BL5BCVU=\n=AvrZ\n-----END PGP SIGNATURE-----\n", "payload": "tree 938d82356db78131fb03d054ef89f8c036b7bb33\nparent a4e30a6ae7ea8a91af757e726c535dda203e393e\nparent 96eb5e175190c7d0020b36c2856bbcf160dad793\nauthor Dylan DPC <dylan.dpc@gmail.com> 1599092527 +0200\ncommitter GitHub <noreply@github.com> 1599092527 +0200\n\nRollup merge of #76204 - NoraCodes:nora/control_flow_enum, r=scottmcm\n\nRename and expose LoopState as ControlFlow\n\nBasic PR for #75744. Addresses everything there except for documentation; lots of examples are probably a good idea.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "html_url": "https://github.com/rust-lang/rust/commit/d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4e30a6ae7ea8a91af757e726c535dda203e393e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4e30a6ae7ea8a91af757e726c535dda203e393e", "html_url": "https://github.com/rust-lang/rust/commit/a4e30a6ae7ea8a91af757e726c535dda203e393e"}, {"sha": "96eb5e175190c7d0020b36c2856bbcf160dad793", "url": "https://api.github.com/repos/rust-lang/rust/commits/96eb5e175190c7d0020b36c2856bbcf160dad793", "html_url": "https://github.com/rust-lang/rust/commit/96eb5e175190c7d0020b36c2856bbcf160dad793"}], "stats": {"total": 219, "additions": 119, "deletions": 100}, "files": [{"sha": "f32c3963abea2e369da8dfae3230a93e7baafb73", "filename": "library/core/src/iter/adapters/mod.rs", "status": "modified", "additions": 19, "deletions": 19, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Fmod.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -1,9 +1,9 @@\n use crate::cmp;\n use crate::fmt;\n use crate::intrinsics;\n-use crate::ops::{Add, AddAssign, Try};\n+use crate::ops::{Add, AddAssign, ControlFlow, Try};\n \n-use super::{from_fn, LoopState};\n+use super::from_fn;\n use super::{DoubleEndedIterator, ExactSizeIterator, FusedIterator, Iterator, TrustedLen};\n \n mod chain;\n@@ -1164,10 +1164,10 @@ where\n         #[inline]\n         fn find<T, B>(\n             f: &mut impl FnMut(T) -> Option<B>,\n-        ) -> impl FnMut((), T) -> LoopState<(), B> + '_ {\n+        ) -> impl FnMut((), T) -> ControlFlow<(), B> + '_ {\n             move |(), x| match f(x) {\n-                Some(x) => LoopState::Break(x),\n-                None => LoopState::Continue(()),\n+                Some(x) => ControlFlow::Break(x),\n+                None => ControlFlow::Continue(()),\n             }\n         }\n \n@@ -1864,13 +1864,13 @@ where\n             flag: &'a mut bool,\n             p: &'a mut impl FnMut(&T) -> bool,\n             mut fold: impl FnMut(Acc, T) -> R + 'a,\n-        ) -> impl FnMut(Acc, T) -> LoopState<Acc, R> + 'a {\n+        ) -> impl FnMut(Acc, T) -> ControlFlow<Acc, R> + 'a {\n             move |acc, x| {\n                 if p(&x) {\n-                    LoopState::from_try(fold(acc, x))\n+                    ControlFlow::from_try(fold(acc, x))\n                 } else {\n                     *flag = true;\n-                    LoopState::Break(Try::from_ok(acc))\n+                    ControlFlow::Break(Try::from_ok(acc))\n                 }\n             }\n         }\n@@ -1963,8 +1963,8 @@ where\n     {\n         let Self { iter, predicate } = self;\n         iter.try_fold(init, |acc, x| match predicate(x) {\n-            Some(item) => LoopState::from_try(fold(acc, item)),\n-            None => LoopState::Break(Try::from_ok(acc)),\n+            Some(item) => ControlFlow::from_try(fold(acc, item)),\n+            None => ControlFlow::Break(Try::from_ok(acc)),\n         })\n         .into_try()\n     }\n@@ -2135,11 +2135,11 @@ where\n         fn check<T, Acc, R: Try<Ok = Acc>>(\n             mut n: usize,\n             mut fold: impl FnMut(Acc, T) -> R,\n-        ) -> impl FnMut(Acc, T) -> LoopState<Acc, R> {\n+        ) -> impl FnMut(Acc, T) -> ControlFlow<Acc, R> {\n             move |acc, x| {\n                 n -= 1;\n                 let r = fold(acc, x);\n-                if n == 0 { LoopState::Break(r) } else { LoopState::from_try(r) }\n+                if n == 0 { ControlFlow::Break(r) } else { ControlFlow::from_try(r) }\n             }\n         }\n \n@@ -2246,11 +2246,11 @@ where\n         fn check<'a, T, Acc, R: Try<Ok = Acc>>(\n             n: &'a mut usize,\n             mut fold: impl FnMut(Acc, T) -> R + 'a,\n-        ) -> impl FnMut(Acc, T) -> LoopState<Acc, R> + 'a {\n+        ) -> impl FnMut(Acc, T) -> ControlFlow<Acc, R> + 'a {\n             move |acc, x| {\n                 *n -= 1;\n                 let r = fold(acc, x);\n-                if *n == 0 { LoopState::Break(r) } else { LoopState::from_try(r) }\n+                if *n == 0 { ControlFlow::Break(r) } else { ControlFlow::from_try(r) }\n             }\n         }\n \n@@ -2414,10 +2414,10 @@ where\n             state: &'a mut St,\n             f: &'a mut impl FnMut(&mut St, T) -> Option<B>,\n             mut fold: impl FnMut(Acc, B) -> R + 'a,\n-        ) -> impl FnMut(Acc, T) -> LoopState<Acc, R> + 'a {\n+        ) -> impl FnMut(Acc, T) -> ControlFlow<Acc, R> + 'a {\n             move |acc, x| match f(state, x) {\n-                None => LoopState::Break(Try::from_ok(acc)),\n-                Some(x) => LoopState::from_try(fold(acc, x)),\n+                None => ControlFlow::Break(Try::from_ok(acc)),\n+                Some(x) => ControlFlow::from_try(fold(acc, x)),\n             }\n         }\n \n@@ -2638,10 +2638,10 @@ where\n         let error = &mut *self.error;\n         self.iter\n             .try_fold(init, |acc, x| match x {\n-                Ok(x) => LoopState::from_try(f(acc, x)),\n+                Ok(x) => ControlFlow::from_try(f(acc, x)),\n                 Err(e) => {\n                     *error = Err(e);\n-                    LoopState::Break(Try::from_ok(acc))\n+                    ControlFlow::Break(Try::from_ok(acc))\n                 }\n             })\n             .into_try()"}, {"sha": "bab8dda2915d974cb4d36b49630d6129ca3cfd0c", "filename": "library/core/src/iter/mod.rs", "status": "modified", "additions": 0, "deletions": 56, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fmod.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -308,8 +308,6 @@\n \n #![stable(feature = \"rust1\", since = \"1.0.0\")]\n \n-use crate::ops::Try;\n-\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub use self::traits::Iterator;\n \n@@ -367,57 +365,3 @@ mod adapters;\n mod range;\n mod sources;\n mod traits;\n-\n-/// Used to make try_fold closures more like normal loops\n-#[derive(PartialEq)]\n-enum LoopState<C, B> {\n-    Continue(C),\n-    Break(B),\n-}\n-\n-impl<C, B> Try for LoopState<C, B> {\n-    type Ok = C;\n-    type Error = B;\n-    #[inline]\n-    fn into_result(self) -> Result<Self::Ok, Self::Error> {\n-        match self {\n-            LoopState::Continue(y) => Ok(y),\n-            LoopState::Break(x) => Err(x),\n-        }\n-    }\n-    #[inline]\n-    fn from_error(v: Self::Error) -> Self {\n-        LoopState::Break(v)\n-    }\n-    #[inline]\n-    fn from_ok(v: Self::Ok) -> Self {\n-        LoopState::Continue(v)\n-    }\n-}\n-\n-impl<C, B> LoopState<C, B> {\n-    #[inline]\n-    fn break_value(self) -> Option<B> {\n-        match self {\n-            LoopState::Continue(..) => None,\n-            LoopState::Break(x) => Some(x),\n-        }\n-    }\n-}\n-\n-impl<R: Try> LoopState<R::Ok, R> {\n-    #[inline]\n-    fn from_try(r: R) -> Self {\n-        match Try::into_result(r) {\n-            Ok(v) => LoopState::Continue(v),\n-            Err(v) => LoopState::Break(Try::from_error(v)),\n-        }\n-    }\n-    #[inline]\n-    fn into_try(self) -> R {\n-        match self {\n-            LoopState::Continue(v) => Try::from_ok(v),\n-            LoopState::Break(v) => v,\n-        }\n-    }\n-}"}, {"sha": "25230519f3744f1b18d5cf7978417faeee8d6733", "filename": "library/core/src/iter/traits/double_ended.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fdouble_ended.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fdouble_ended.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fdouble_ended.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -1,5 +1,4 @@\n-use crate::iter::LoopState;\n-use crate::ops::Try;\n+use crate::ops::{ControlFlow, Try};\n \n /// An iterator able to yield elements from both ends.\n ///\n@@ -309,9 +308,9 @@ pub trait DoubleEndedIterator: Iterator {\n         #[inline]\n         fn check<T>(\n             mut predicate: impl FnMut(&T) -> bool,\n-        ) -> impl FnMut((), T) -> LoopState<(), T> {\n+        ) -> impl FnMut((), T) -> ControlFlow<(), T> {\n             move |(), x| {\n-                if predicate(&x) { LoopState::Break(x) } else { LoopState::Continue(()) }\n+                if predicate(&x) { ControlFlow::Break(x) } else { ControlFlow::Continue(()) }\n             }\n         }\n "}, {"sha": "d37ffbd62e579e9ba47702ed0d67680805e85e27", "filename": "library/core/src/iter/traits/iterator.rs", "status": "modified", "additions": 26, "deletions": 21, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fiterator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fiterator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Ftraits%2Fiterator.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -3,9 +3,8 @@\n // can't split that into multiple files.\n \n use crate::cmp::{self, Ordering};\n-use crate::ops::{Add, Try};\n+use crate::ops::{Add, ControlFlow, Try};\n \n-use super::super::LoopState;\n use super::super::TrustedRandomAccess;\n use super::super::{Chain, Cloned, Copied, Cycle, Enumerate, Filter, FilterMap, Fuse};\n use super::super::{FlatMap, Flatten};\n@@ -2088,12 +2087,12 @@ pub trait Iterator {\n         F: FnMut(Self::Item) -> bool,\n     {\n         #[inline]\n-        fn check<T>(mut f: impl FnMut(T) -> bool) -> impl FnMut((), T) -> LoopState<(), ()> {\n+        fn check<T>(mut f: impl FnMut(T) -> bool) -> impl FnMut((), T) -> ControlFlow<(), ()> {\n             move |(), x| {\n-                if f(x) { LoopState::Continue(()) } else { LoopState::Break(()) }\n+                if f(x) { ControlFlow::Continue(()) } else { ControlFlow::Break(()) }\n             }\n         }\n-        self.try_fold((), check(f)) == LoopState::Continue(())\n+        self.try_fold((), check(f)) == ControlFlow::Continue(())\n     }\n \n     /// Tests if any element of the iterator matches a predicate.\n@@ -2141,13 +2140,13 @@ pub trait Iterator {\n         F: FnMut(Self::Item) -> bool,\n     {\n         #[inline]\n-        fn check<T>(mut f: impl FnMut(T) -> bool) -> impl FnMut((), T) -> LoopState<(), ()> {\n+        fn check<T>(mut f: impl FnMut(T) -> bool) -> impl FnMut((), T) -> ControlFlow<(), ()> {\n             move |(), x| {\n-                if f(x) { LoopState::Break(()) } else { LoopState::Continue(()) }\n+                if f(x) { ControlFlow::Break(()) } else { ControlFlow::Continue(()) }\n             }\n         }\n \n-        self.try_fold((), check(f)) == LoopState::Break(())\n+        self.try_fold((), check(f)) == ControlFlow::Break(())\n     }\n \n     /// Searches for an element of an iterator that satisfies a predicate.\n@@ -2203,9 +2202,9 @@ pub trait Iterator {\n         #[inline]\n         fn check<T>(\n             mut predicate: impl FnMut(&T) -> bool,\n-        ) -> impl FnMut((), T) -> LoopState<(), T> {\n+        ) -> impl FnMut((), T) -> ControlFlow<(), T> {\n             move |(), x| {\n-                if predicate(&x) { LoopState::Break(x) } else { LoopState::Continue(()) }\n+                if predicate(&x) { ControlFlow::Break(x) } else { ControlFlow::Continue(()) }\n             }\n         }\n \n@@ -2235,10 +2234,12 @@ pub trait Iterator {\n         F: FnMut(Self::Item) -> Option<B>,\n     {\n         #[inline]\n-        fn check<T, B>(mut f: impl FnMut(T) -> Option<B>) -> impl FnMut((), T) -> LoopState<(), B> {\n+        fn check<T, B>(\n+            mut f: impl FnMut(T) -> Option<B>,\n+        ) -> impl FnMut((), T) -> ControlFlow<(), B> {\n             move |(), x| match f(x) {\n-                Some(x) => LoopState::Break(x),\n-                None => LoopState::Continue(()),\n+                Some(x) => ControlFlow::Break(x),\n+                None => ControlFlow::Continue(()),\n             }\n         }\n \n@@ -2274,15 +2275,15 @@ pub trait Iterator {\n         R: Try<Ok = bool>,\n     {\n         #[inline]\n-        fn check<F, T, R>(mut f: F) -> impl FnMut((), T) -> LoopState<(), Result<T, R::Error>>\n+        fn check<F, T, R>(mut f: F) -> impl FnMut((), T) -> ControlFlow<(), Result<T, R::Error>>\n         where\n             F: FnMut(&T) -> R,\n             R: Try<Ok = bool>,\n         {\n             move |(), x| match f(&x).into_result() {\n-                Ok(false) => LoopState::Continue(()),\n-                Ok(true) => LoopState::Break(Ok(x)),\n-                Err(x) => LoopState::Break(Err(x)),\n+                Ok(false) => ControlFlow::Continue(()),\n+                Ok(true) => ControlFlow::Break(Ok(x)),\n+                Err(x) => ControlFlow::Break(Err(x)),\n             }\n         }\n \n@@ -2352,10 +2353,14 @@ pub trait Iterator {\n         #[inline]\n         fn check<T>(\n             mut predicate: impl FnMut(T) -> bool,\n-        ) -> impl FnMut(usize, T) -> LoopState<usize, usize> {\n+        ) -> impl FnMut(usize, T) -> ControlFlow<usize, usize> {\n             // The addition might panic on overflow\n             move |i, x| {\n-                if predicate(x) { LoopState::Break(i) } else { LoopState::Continue(Add::add(i, 1)) }\n+                if predicate(x) {\n+                    ControlFlow::Break(i)\n+                } else {\n+                    ControlFlow::Continue(Add::add(i, 1))\n+                }\n             }\n         }\n \n@@ -2411,10 +2416,10 @@ pub trait Iterator {\n         #[inline]\n         fn check<T>(\n             mut predicate: impl FnMut(T) -> bool,\n-        ) -> impl FnMut(usize, T) -> LoopState<usize, usize> {\n+        ) -> impl FnMut(usize, T) -> ControlFlow<usize, usize> {\n             move |i, x| {\n                 let i = i - 1;\n-                if predicate(x) { LoopState::Break(i) } else { LoopState::Continue(i) }\n+                if predicate(x) { ControlFlow::Break(i) } else { ControlFlow::Continue(i) }\n             }\n         }\n "}, {"sha": "687d423dcb6350f2fda54c4baba4f2e6389c2ae9", "filename": "library/core/src/ops/control_flow.rs", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fops%2Fcontrol_flow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fops%2Fcontrol_flow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fops%2Fcontrol_flow.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -0,0 +1,67 @@\n+use crate::ops::Try;\n+\n+/// Used to make try_fold closures more like normal loops\n+#[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+#[derive(Debug, Clone, Copy, PartialEq)]\n+pub enum ControlFlow<C, B> {\n+    /// Continue in the loop, using the given value for the next iteration\n+    Continue(C),\n+    /// Exit the loop, yielding the given value\n+    Break(B),\n+}\n+\n+#[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+impl<C, B> Try for ControlFlow<C, B> {\n+    type Ok = C;\n+    type Error = B;\n+    #[inline]\n+    fn into_result(self) -> Result<Self::Ok, Self::Error> {\n+        match self {\n+            ControlFlow::Continue(y) => Ok(y),\n+            ControlFlow::Break(x) => Err(x),\n+        }\n+    }\n+    #[inline]\n+    fn from_error(v: Self::Error) -> Self {\n+        ControlFlow::Break(v)\n+    }\n+    #[inline]\n+    fn from_ok(v: Self::Ok) -> Self {\n+        ControlFlow::Continue(v)\n+    }\n+}\n+\n+impl<C, B> ControlFlow<C, B> {\n+    /// Converts the `ControlFlow` into an `Option` which is `Some` if the\n+    /// `ControlFlow` was `Break` and `None` otherwise.\n+    #[inline]\n+    #[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+    pub fn break_value(self) -> Option<B> {\n+        match self {\n+            ControlFlow::Continue(..) => None,\n+            ControlFlow::Break(x) => Some(x),\n+        }\n+    }\n+}\n+\n+impl<R: Try> ControlFlow<R::Ok, R> {\n+    /// Create a `ControlFlow` from any type implementing `Try`.\n+    #[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+    #[inline]\n+    pub fn from_try(r: R) -> Self {\n+        match Try::into_result(r) {\n+            Ok(v) => ControlFlow::Continue(v),\n+            Err(v) => ControlFlow::Break(Try::from_error(v)),\n+        }\n+    }\n+\n+    /// Convert a `ControlFlow` into any type implementing `Try`;\n+    #[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+    #[inline]\n+    pub fn into_try(self) -> R {\n+        match self {\n+            ControlFlow::Continue(v) => Try::from_ok(v),\n+            ControlFlow::Break(v) => v,\n+        }\n+    }\n+}"}, {"sha": "2a4186f9d5db9cdb63f6c84e42f4206fddcaa6b7", "filename": "library/core/src/ops/mod.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fops%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d059f2619fa5d09844c1b66e351cf2cdbf781fa5/library%2Fcore%2Fsrc%2Fops%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fops%2Fmod.rs?ref=d059f2619fa5d09844c1b66e351cf2cdbf781fa5", "patch": "@@ -140,6 +140,7 @@\n \n mod arith;\n mod bit;\n+mod control_flow;\n mod deref;\n mod drop;\n mod function;\n@@ -191,3 +192,6 @@ pub use self::unsize::CoerceUnsized;\n \n #[unstable(feature = \"dispatch_from_dyn\", issue = \"none\")]\n pub use self::unsize::DispatchFromDyn;\n+\n+#[unstable(feature = \"control_flow_enum\", reason = \"new API\", issue = \"75744\")]\n+pub use self::control_flow::ControlFlow;"}]}