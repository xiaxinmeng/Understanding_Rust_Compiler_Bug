{"sha": "5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "node_id": "C_kwDOAAsO6NoAKDVmYjJkNjNkMDc5M2E0YzNjNjEyZDFlNGE0Y2E2YTE4NGU2ZmU2MTQ", "commit": {"author": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-12-19T07:48:30Z"}, "committer": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-12-19T07:58:40Z"}, "message": "Fix `uninlined_format_args` in libtest", "tree": {"sha": "db18507b08639299650830aa63169ec86e9e6798", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/db18507b08639299650830aa63169ec86e9e6798"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgWnoWpkMvJlSFxMiZfPmQ9OBZ0B\nzicY1KArCIU18CM8IAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQG6DbVJ0vKe+YyRXKhgZVYz0IvVwla0pYoYshbRBk6mVdJgwAt1pRAfXflaLBZEM+Y\naGKI7Ao0ZQBI/XqjbIFQ8=\n-----END SSH SIGNATURE-----", "payload": "tree db18507b08639299650830aa63169ec86e9e6798\nparent 224fa3907e319405fdabdb06c33f99b896754773\nauthor nils <48135649+Nilstrieb@users.noreply.github.com> 1671436110 +0100\ncommitter nils <48135649+Nilstrieb@users.noreply.github.com> 1671436720 +0100\n\nFix `uninlined_format_args` in libtest\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "html_url": "https://github.com/rust-lang/rust/commit/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "224fa3907e319405fdabdb06c33f99b896754773", "url": "https://api.github.com/repos/rust-lang/rust/commits/224fa3907e319405fdabdb06c33f99b896754773", "html_url": "https://github.com/rust-lang/rust/commit/224fa3907e319405fdabdb06c33f99b896754773"}], "stats": {"total": 39, "additions": 15, "deletions": 24}, "files": [{"sha": "796796e07a9c18fe5673961f463753cf980e2763", "filename": "library/test/src/cli.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fcli.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fcli.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fcli.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -354,8 +354,7 @@ fn get_shuffle_seed(matches: &getopts::Matches, allow_unstable: bool) -> OptPart\n             Err(e) => {\n                 return Err(format!(\n                     \"argument for --shuffle-seed must be a number \\\n-                     (error: {})\",\n-                    e\n+                     (error: {e})\"\n                 ));\n             }\n         },\n@@ -383,8 +382,7 @@ fn get_test_threads(matches: &getopts::Matches) -> OptPartRes<Option<usize>> {\n             Err(e) => {\n                 return Err(format!(\n                     \"argument for --test-threads must be a number > 0 \\\n-                     (error: {})\",\n-                    e\n+                     (error: {e})\"\n                 ));\n             }\n         },\n@@ -418,8 +416,7 @@ fn get_format(\n         Some(v) => {\n             return Err(format!(\n                 \"argument for --format must be pretty, terse, json or junit (was \\\n-                 {})\",\n-                v\n+                 {v})\"\n             ));\n         }\n     };\n@@ -436,8 +433,7 @@ fn get_color_config(matches: &getopts::Matches) -> OptPartRes<ColorConfig> {\n         Some(v) => {\n             return Err(format!(\n                 \"argument for --color must be auto, always, or never (was \\\n-                 {})\",\n-                v\n+                 {v})\"\n             ));\n         }\n     };"}, {"sha": "5526aadb67ffb84a4aafab0bd79d8ab4c12a85bf", "filename": "library/test/src/formatters/json.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fformatters%2Fjson.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -53,7 +53,7 @@ impl<T: Write> JsonFormatter<T> {\n             self.write_message(&*format!(r#\", \"stdout\": \"{}\"\"#, EscapedString(stdout)))?;\n         }\n         if let Some(extra) = extra {\n-            self.write_message(&*format!(r#\", {}\"#, extra))?;\n+            self.write_message(&*format!(r#\", {extra}\"#))?;\n         }\n         self.writeln_message(\" }\")\n     }\n@@ -62,13 +62,12 @@ impl<T: Write> JsonFormatter<T> {\n impl<T: Write> OutputFormatter for JsonFormatter<T> {\n     fn write_run_start(&mut self, test_count: usize, shuffle_seed: Option<u64>) -> io::Result<()> {\n         let shuffle_seed_json = if let Some(shuffle_seed) = shuffle_seed {\n-            format!(r#\", \"shuffle_seed\": {}\"#, shuffle_seed)\n+            format!(r#\", \"shuffle_seed\": {shuffle_seed}\"#)\n         } else {\n             String::new()\n         };\n         self.writeln_message(&*format!(\n-            r#\"{{ \"type\": \"suite\", \"event\": \"started\", \"test_count\": {}{} }}\"#,\n-            test_count, shuffle_seed_json\n+            r#\"{{ \"type\": \"suite\", \"event\": \"started\", \"test_count\": {test_count}{shuffle_seed_json} }}\"#\n         ))\n     }\n "}, {"sha": "cb67b6491a392286c3821cd3ec1d9089d58a018d", "filename": "library/test/src/formatters/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fformatters%2Fmod.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -38,5 +38,5 @@ pub(crate) fn write_stderr_delimiter(test_output: &mut Vec<u8>, test_name: &Test\n         Some(_) => test_output.push(b'\\n'),\n         None => (),\n     }\n-    writeln!(test_output, \"---- {} stderr ----\", test_name).unwrap();\n+    writeln!(test_output, \"---- {test_name} stderr ----\").unwrap();\n }"}, {"sha": "0299c8b543359adb3de118bb7f91436e0cf32879", "filename": "library/test/src/formatters/pretty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fformatters%2Fpretty.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -47,7 +47,7 @@ impl<T: Write> PrettyFormatter<T> {\n \n     pub fn write_ignored(&mut self, message: Option<&'static str>) -> io::Result<()> {\n         if let Some(message) = message {\n-            self.write_short_result(&format!(\"ignored, {}\", message), term::color::YELLOW)\n+            self.write_short_result(&format!(\"ignored, {message}\"), term::color::YELLOW)\n         } else {\n             self.write_short_result(\"ignored\", term::color::YELLOW)\n         }"}, {"sha": "f6a41bbb88c852c8090e95b003e64379cc9759bb", "filename": "library/test/src/lib.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Flib.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -213,8 +213,7 @@ pub fn assert_test_result<T: Termination>(result: T) -> Result<(), String> {\n     } else {\n         Err(format!(\n             \"the test returned a termination value with a non-zero status code \\\n-             ({}) which indicates a failure\",\n-            code\n+             ({code}) which indicates a failure\"\n         ))\n     }\n }\n@@ -750,7 +749,7 @@ fn spawn_test_subprocess(\n         })() {\n             Ok(r) => r,\n             Err(e) => {\n-                write!(&mut test_output, \"Unexpected error: {}\", e).unwrap();\n+                write!(&mut test_output, \"Unexpected error: {e}\").unwrap();\n                 TrFailed\n             }\n         };"}, {"sha": "7c5b0d6c0f721072d0d13c40b3be84d529dee0e0", "filename": "library/test/src/test_result.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Ftest_result.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Ftest_result.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Ftest_result.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -44,9 +44,8 @@ pub fn calc_result<'a>(\n             } else if let Some(panic_str) = maybe_panic_str {\n                 TestResult::TrFailedMsg(format!(\n                     r#\"panic did not contain expected string\n-      panic message: `{:?}`,\n- expected substring: `{:?}`\"#,\n-                    panic_str, msg\n+      panic message: `{panic_str:?}`,\n+ expected substring: `{msg:?}`\"#\n                 ))\n             } else {\n                 TestResult::TrFailedMsg(format!("}, {"sha": "7fd69d7f7e73c66ea340f995e9f30be4be890920", "filename": "library/test/src/time.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614/library%2Ftest%2Fsrc%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Ftime.rs?ref=5fb2d63d0793a4c3c612d1e4a4ca6a184e6fe614", "patch": "@@ -107,16 +107,14 @@ impl TimeThreshold {\n         let durations_str = env::var(env_var_name).ok()?;\n         let (warn_str, critical_str) = durations_str.split_once(',').unwrap_or_else(|| {\n             panic!(\n-                \"Duration variable {} expected to have 2 numbers separated by comma, but got {}\",\n-                env_var_name, durations_str\n+                \"Duration variable {env_var_name} expected to have 2 numbers separated by comma, but got {durations_str}\"\n             )\n         });\n \n         let parse_u64 = |v| {\n             u64::from_str(v).unwrap_or_else(|_| {\n                 panic!(\n-                    \"Duration value in variable {} is expected to be a number, but got {}\",\n-                    env_var_name, v\n+                    \"Duration value in variable {env_var_name} is expected to be a number, but got {v}\"\n                 )\n             })\n         };"}]}