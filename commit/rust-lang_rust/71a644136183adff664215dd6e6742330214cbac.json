{"sha": "71a644136183adff664215dd6e6742330214cbac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxYTY0NDEzNjE4M2FkZmY2NjQyMTVkZDZlNjc0MjMzMDIxNGNiYWM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-02T12:28:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-02T12:28:11Z"}, "message": "Auto merge of #26715 - steveklabnik:gh26497, r=huonw\n\nAdd an example, plus some text that covers the buffering nature of\r\nchannels.\r\n\r\nFixes #26497", "tree": {"sha": "dc8180d6ddf9d441368d6eb4fb22214d84d54d7b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dc8180d6ddf9d441368d6eb4fb22214d84d54d7b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/71a644136183adff664215dd6e6742330214cbac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/71a644136183adff664215dd6e6742330214cbac", "html_url": "https://github.com/rust-lang/rust/commit/71a644136183adff664215dd6e6742330214cbac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/71a644136183adff664215dd6e6742330214cbac/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "99ca63fbd88a34ce8e2b93215d9155f551a8aaad", "url": "https://api.github.com/repos/rust-lang/rust/commits/99ca63fbd88a34ce8e2b93215d9155f551a8aaad", "html_url": "https://github.com/rust-lang/rust/commit/99ca63fbd88a34ce8e2b93215d9155f551a8aaad"}, {"sha": "55641720aa29aab8a82ff907f6ac513180337f93", "url": "https://api.github.com/repos/rust-lang/rust/commits/55641720aa29aab8a82ff907f6ac513180337f93", "html_url": "https://github.com/rust-lang/rust/commit/55641720aa29aab8a82ff907f6ac513180337f93"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "1453c91fd4d1d019a92890faaaa5552b6a1f41a6", "filename": "src/libstd/sync/mpsc/mod.rs", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/71a644136183adff664215dd6e6742330214cbac/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71a644136183adff664215dd6e6742330214cbac/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs?ref=71a644136183adff664215dd6e6742330214cbac", "patch": "@@ -768,6 +768,48 @@ impl<T> Receiver<T> {\n     /// If the corresponding `Sender` has disconnected, or it disconnects while\n     /// this call is blocking, this call will wake up and return `Err` to\n     /// indicate that no more messages can ever be received on this channel.\n+    /// However, since channels are buffered, messages sent before the disconnect\n+    /// will still be properly received.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::sync::mpsc;\n+    /// use std::thread;\n+    ///\n+    /// let (send, recv) = mpsc::channel();\n+    /// let handle = thread::spawn(move || {\n+    ///     send.send(1u8).unwrap();\n+    /// });\n+    ///\n+    /// handle.join().unwrap();\n+    ///\n+    /// assert_eq!(Ok(1), recv.recv());\n+    /// ```\n+    ///\n+    /// Buffering behavior:\n+    ///\n+    /// ```\n+    /// use std::sync::mpsc;\n+    /// use std::thread;\n+    /// use std::sync::mpsc::RecvError;\n+    ///\n+    /// let (send, recv) = mpsc::channel();\n+    /// let handle = thread::spawn(move || {\n+    ///     send.send(1u8).unwrap();\n+    ///     send.send(2).unwrap();\n+    ///     send.send(3).unwrap();\n+    ///     drop(send);\n+    /// });\n+    ///\n+    /// // wait for the thread to join so we ensure the sender is dropped\n+    /// handle.join().unwrap();\n+    ///\n+    /// assert_eq!(Ok(1), recv.recv());\n+    /// assert_eq!(Ok(2), recv.recv());\n+    /// assert_eq!(Ok(3), recv.recv());\n+    /// assert_eq!(Err(RecvError), recv.recv());\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn recv(&self) -> Result<T, RecvError> {\n         loop {"}]}