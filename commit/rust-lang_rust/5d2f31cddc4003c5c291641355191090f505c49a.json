{"sha": "5d2f31cddc4003c5c291641355191090f505c49a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkMmYzMWNkZGM0MDAzYzVjMjkxNjQxMzU1MTkxMDkwZjUwNWM0OWE=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T04:05:31Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T04:58:51Z"}, "message": "Continue evaluating after missing `for` in `impl Trait for Foo`", "tree": {"sha": "e0ea6b4e1aaad6d98255bc18d72233342e1716e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e0ea6b4e1aaad6d98255bc18d72233342e1716e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d2f31cddc4003c5c291641355191090f505c49a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d2f31cddc4003c5c291641355191090f505c49a", "html_url": "https://github.com/rust-lang/rust/commit/5d2f31cddc4003c5c291641355191090f505c49a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d2f31cddc4003c5c291641355191090f505c49a/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8610b31ecfba9bd9430d0acd97baa2bbc481100", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8610b31ecfba9bd9430d0acd97baa2bbc481100", "html_url": "https://github.com/rust-lang/rust/commit/d8610b31ecfba9bd9430d0acd97baa2bbc481100"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "da910aefdc096e467c2f1aff89ab629baa36f29e", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5d2f31cddc4003c5c291641355191090f505c49a/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d2f31cddc4003c5c291641355191090f505c49a/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=5d2f31cddc4003c5c291641355191090f505c49a", "patch": "@@ -6055,7 +6055,13 @@ impl<'a> Parser<'a> {\n             Some(ty_second) => {\n                 // impl Trait for Type\n                 if !has_for {\n-                    self.span_err(missing_for_span, \"missing `for` in a trait impl\");\n+                    self.struct_span_err(missing_for_span, \"missing `for` in a trait impl\")\n+                        .span_suggestion_short_with_applicability(\n+                            missing_for_span,\n+                            \"add `for` here\",\n+                            \" for \".to_string(),\n+                            Applicability::MachineApplicable,\n+                        ).emit();\n                 }\n \n                 let ty_first = ty_first.into_inner();"}, {"sha": "353f5e21ee64192992aa66cb8935e36a435db7a8", "filename": "src/test/ui/parser/impl-parsing.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fimpl-parsing.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fimpl-parsing.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fimpl-parsing.stderr?ref=5d2f31cddc4003c5c291641355191090f505c49a", "patch": "@@ -2,13 +2,13 @@ error: missing `for` in a trait impl\n   --> $DIR/impl-parsing.rs:6:11\n    |\n LL | impl Trait Type {} //~ ERROR missing `for` in a trait impl\n-   |           ^\n+   |           ^ help: add `for` here\n \n error: missing `for` in a trait impl\n   --> $DIR/impl-parsing.rs:7:11\n    |\n LL | impl Trait .. {} //~ ERROR missing `for` in a trait impl\n-   |           ^\n+   |           ^ help: add `for` here\n \n error: expected a trait, found type\n   --> $DIR/impl-parsing.rs:8:6"}, {"sha": "d619688e10183d03ca870456e1f1cb783d3b18c9", "filename": "src/test/ui/parser/issue-27255.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fissue-27255.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fissue-27255.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-27255.rs?ref=5d2f31cddc4003c5c291641355191090f505c49a", "patch": "@@ -1,3 +1,10 @@\n-impl A .. {} //~ ERROR\n+trait A {}\n+\n+impl A .. {}\n+//~^ ERROR missing `for` in a trait impl\n+//~| ERROR `impl Trait for .. {}` is an obsolete syntax\n+\n+impl A      usize {}\n+//~^ ERROR missing `for` in a trait impl\n \n fn main() {}"}, {"sha": "391a23556c4e07fcd600814950b9b328f9719cc8", "filename": "src/test/ui/parser/issue-27255.stderr", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fissue-27255.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5d2f31cddc4003c5c291641355191090f505c49a/src%2Ftest%2Fui%2Fparser%2Fissue-27255.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-27255.stderr?ref=5d2f31cddc4003c5c291641355191090f505c49a", "patch": "@@ -1,8 +1,22 @@\n error: missing `for` in a trait impl\n-  --> $DIR/issue-27255.rs:1:7\n+  --> $DIR/issue-27255.rs:3:7\n    |\n-LL | impl A .. {} //~ ERROR\n-   |       ^\n+LL | impl A .. {}\n+   |       ^ help: add `for` here\n \n-error: aborting due to previous error\n+error: missing `for` in a trait impl\n+  --> $DIR/issue-27255.rs:7:7\n+   |\n+LL | impl A      usize {}\n+   |       ^^^^^^ help: add `for` here\n+\n+error: `impl Trait for .. {}` is an obsolete syntax\n+  --> $DIR/issue-27255.rs:3:1\n+   |\n+LL | impl A .. {}\n+   | ^^^^^^^^^^^^\n+   |\n+   = help: use `auto trait Trait {}` instead\n+\n+error: aborting due to 3 previous errors\n "}]}