{"sha": "2e63bc5d8293d38cb3be7cb07d6267c9db385062", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlNjNiYzVkODI5M2QzOGNiM2JlN2NiMDdkNjI2N2M5ZGIzODUwNjI=", "commit": {"author": {"name": "Tycho Sci", "email": "tychosci@gmail.com", "date": "2012-02-20T05:49:22Z"}, "committer": {"name": "Tycho Sci", "email": "tychosci@gmail.com", "date": "2012-02-20T08:55:35Z"}, "message": "cargo: Use $sysroot/$libdir/cargo as work dir\n\nOn win32  environment, it's \"$sysroot/bin/cargo\".\nOn unix-y environment, it's \"$sysroot/lib/cargo\".", "tree": {"sha": "f88bbc256de17879036df7cf0e72fa637f58ec93", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f88bbc256de17879036df7cf0e72fa637f58ec93"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e63bc5d8293d38cb3be7cb07d6267c9db385062", "comment_count": 3, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e63bc5d8293d38cb3be7cb07d6267c9db385062", "html_url": "https://github.com/rust-lang/rust/commit/2e63bc5d8293d38cb3be7cb07d6267c9db385062", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e63bc5d8293d38cb3be7cb07d6267c9db385062/comments", "author": {"login": "tychosci", "id": 1026254, "node_id": "MDQ6VXNlcjEwMjYyNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1026254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tychosci", "html_url": "https://github.com/tychosci", "followers_url": "https://api.github.com/users/tychosci/followers", "following_url": "https://api.github.com/users/tychosci/following{/other_user}", "gists_url": "https://api.github.com/users/tychosci/gists{/gist_id}", "starred_url": "https://api.github.com/users/tychosci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tychosci/subscriptions", "organizations_url": "https://api.github.com/users/tychosci/orgs", "repos_url": "https://api.github.com/users/tychosci/repos", "events_url": "https://api.github.com/users/tychosci/events{/privacy}", "received_events_url": "https://api.github.com/users/tychosci/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tychosci", "id": 1026254, "node_id": "MDQ6VXNlcjEwMjYyNTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1026254?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tychosci", "html_url": "https://github.com/tychosci", "followers_url": "https://api.github.com/users/tychosci/followers", "following_url": "https://api.github.com/users/tychosci/following{/other_user}", "gists_url": "https://api.github.com/users/tychosci/gists{/gist_id}", "starred_url": "https://api.github.com/users/tychosci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tychosci/subscriptions", "organizations_url": "https://api.github.com/users/tychosci/orgs", "repos_url": "https://api.github.com/users/tychosci/repos", "events_url": "https://api.github.com/users/tychosci/events{/privacy}", "received_events_url": "https://api.github.com/users/tychosci/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "657ef8ef6057b09be9b89b1f542ce64d2ec534d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/657ef8ef6057b09be9b89b1f542ce64d2ec534d6", "html_url": "https://github.com/rust-lang/rust/commit/657ef8ef6057b09be9b89b1f542ce64d2ec534d6"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "d5919ea3e5a4f5b2183ef52f05fbc8e3f3f2d1ce", "filename": "src/comp/util/filesearch.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2e63bc5d8293d38cb3be7cb07d6267c9db385062/src%2Fcomp%2Futil%2Ffilesearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e63bc5d8293d38cb3be7cb07d6267c9db385062/src%2Fcomp%2Futil%2Ffilesearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Futil%2Ffilesearch.rs?ref=2e63bc5d8293d38cb3be7cb07d6267c9db385062", "patch": "@@ -48,8 +48,6 @@ fn mk_filesearch(maybe_sysroot: option<fs::path>,\n                   result::ok(p) { [p] }\n                   result::err(p) { [] }\n                 }\n-                + [fs::connect(fs::connect(self.sysroot, \".cargo\"),\n-                               libdir())]\n         }\n         fn get_target_lib_path() -> fs::path {\n             make_target_lib_path(self.sysroot, self.target_triple)\n@@ -113,7 +111,9 @@ fn get_sysroot(maybe_sysroot: option<fs::path>) -> fs::path {\n }\n \n fn get_cargo_sysroot() -> result::t<fs::path, str> {\n-    result::ok(fs::connect(get_default_sysroot(),  \".cargo\"))\n+    let path = [get_default_sysroot(), libdir(), \"cargo\"];\n+    check vec::is_not_empty(path);\n+    result::ok(fs::connect_many(path))\n }\n \n fn get_cargo_root() -> result::t<fs::path, str> {"}]}