{"sha": "0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhM2FjN2E5NmNmZTg2NDk0ZWQzOThlYWZkODRiMzdjZGM4ZmE1NDU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-07-30T14:11:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-30T14:11:37Z"}, "message": "Merge #9728\n\n9728: fix: Attach comma token to MATCH_ARM instead of MATCH_ARM_LIST r=Veykril a=Veykril\n\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>", "tree": {"sha": "947916eea43aa1a62c1e36a47f4cfe973cfe449c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/947916eea43aa1a62c1e36a47f4cfe973cfe449c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhBAiZCRBK7hj4Ov3rIwAACF0IAEgjtLvZhi64P2Y5NG12cHBE\nBKaFOqd3VbQ8/6o5/755ghncNRXj8bUgiamF2kDTwcffF/ayFyVnnGDHx4avk56V\nEjeDpDO59DH6zfv/RuxMYeE+ElqRqyk9xWh0PKHm2ymU1fh+kOPrShTn7Du2gTZx\n1uwk52mSn374pdec238PIp26+FcXnUYnEus+lAwTojTLOOwQCJm4/OkjBT+DFM5/\nDMwpsUVyNVPw6ti62F4F69AJhpvXy8kaPLDIby2KdTFk72Q4d60m1LsTAHEA8VgJ\nH9rz9xf6eSfzxuFEQ5N3bO/5gWEDT5ebeZrb7dXT5iqnwq38rqCPNtXJYq7o3ig=\n=nn8U\n-----END PGP SIGNATURE-----\n", "payload": "tree 947916eea43aa1a62c1e36a47f4cfe973cfe449c\nparent 956e205417eb800b990a44d15cd924b7b3fbc83c\nparent 82c1e61887e45bf138888181173cc669352173a7\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1627654297 +0000\ncommitter GitHub <noreply@github.com> 1627654297 +0000\n\nMerge #9728\n\n9728: fix: Attach comma token to MATCH_ARM instead of MATCH_ARM_LIST r=Veykril a=Veykril\n\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "html_url": "https://github.com/rust-lang/rust/commit/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "956e205417eb800b990a44d15cd924b7b3fbc83c", "url": "https://api.github.com/repos/rust-lang/rust/commits/956e205417eb800b990a44d15cd924b7b3fbc83c", "html_url": "https://github.com/rust-lang/rust/commit/956e205417eb800b990a44d15cd924b7b3fbc83c"}, {"sha": "82c1e61887e45bf138888181173cc669352173a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/82c1e61887e45bf138888181173cc669352173a7", "html_url": "https://github.com/rust-lang/rust/commit/82c1e61887e45bf138888181173cc669352173a7"}], "stats": {"total": 612, "additions": 299, "deletions": 313}, "files": [{"sha": "30334ffcc87e85f6ab417f10e7526aadce3eaf77", "filename": "crates/ide/src/join_lines.rs", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide%2Fsrc%2Fjoin_lines.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide%2Fsrc%2Fjoin_lines.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fjoin_lines.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -3,11 +3,10 @@ use std::convert::TryFrom;\n use ide_assists::utils::extract_trivial_expression;\n use itertools::Itertools;\n use syntax::{\n-    algo::non_trivia_sibling,\n     ast::{self, AstNode, AstToken, IsString},\n-    Direction, NodeOrToken, SourceFile, SyntaxElement,\n+    NodeOrToken, SourceFile, SyntaxElement,\n     SyntaxKind::{self, USE_TREE, WHITESPACE},\n-    SyntaxNode, SyntaxToken, TextRange, TextSize, T,\n+    SyntaxToken, TextRange, TextSize, T,\n };\n \n use text_edit::{TextEdit, TextEditBuilder};\n@@ -204,13 +203,6 @@ fn remove_newline(\n     edit.replace(token.text_range(), compute_ws(prev.kind(), next.kind()).to_string());\n }\n \n-fn has_comma_after(node: &SyntaxNode) -> bool {\n-    match non_trivia_sibling(node.clone().into(), Direction::Next) {\n-        Some(n) => n.kind() == T![,],\n-        _ => false,\n-    }\n-}\n-\n fn join_single_expr_block(edit: &mut TextEditBuilder, token: &SyntaxToken) -> Option<()> {\n     let block_expr = ast::BlockExpr::cast(token.parent()?)?;\n     if !block_expr.is_standalone() {\n@@ -223,7 +215,7 @@ fn join_single_expr_block(edit: &mut TextEditBuilder, token: &SyntaxToken) -> Op\n \n     // Match block needs to have a comma after the block\n     if let Some(match_arm) = block_expr.syntax().parent().and_then(ast::MatchArm::cast) {\n-        if !has_comma_after(match_arm.syntax()) {\n+        if match_arm.comma_token().is_none() {\n             buf.push(',');\n         }\n     }"}, {"sha": "f053580a56bb5d5c0bbb684c9d59443196f77d9c", "filename": "crates/ide/src/move_item.rs", "status": "modified", "additions": 197, "deletions": 197, "changes": 394, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide%2Fsrc%2Fmove_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide%2Fsrc%2Fmove_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fmove_item.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -203,18 +203,18 @@ fn main() {\n         }\n     };\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    match true {\n-        false =>$0 {\n-            println!(\"Test\");\n-        },\n-        true => {\n-            println!(\"Hello, world\");\n-        }\n-    };\n-}\n+                fn main() {\n+                    match true {\n+                        false =>$0 {\n+                            println!(\"Test\");\n+                        }\n+                        true => {\n+                            println!(\"Hello, world\");\n+                        },\n+                    };\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -234,18 +234,18 @@ fn main() {\n         }\n     };\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    match true {\n-        false => {\n-            println!(\"Test\");\n-        },\n-        true =>$0 {\n-            println!(\"Hello, world\");\n-        }\n-    };\n-}\n+                fn main() {\n+                    match true {\n+                        false => {\n+                            println!(\"Test\");\n+                        }\n+                        true =>$0 {\n+                            println!(\"Hello, world\");\n+                        },\n+                    };\n+                }\n             \"#]],\n             Direction::Down,\n         );\n@@ -265,18 +265,18 @@ fn main() {\n         }\n     };\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    match true {\n-        true => {\n-            println!(\"Hello, world\");\n-        },\n-        false => {\n-            println!(\"Test\");\n-        }\n-    };\n-}\n+                fn main() {\n+                    match true {\n+                        true => {\n+                            println!(\"Hello, world\");\n+                        },\n+                        false => {\n+                            println!(\"Test\");\n+                        }\n+                    };\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -290,12 +290,12 @@ fn main() {\n     let test = 123;\n     let test2$0$0 = 456;\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    let test2$0 = 456;\n-    let test = 123;\n-}\n+                fn main() {\n+                    let test2$0 = 456;\n+                    let test = 123;\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -309,12 +309,12 @@ fn main() {\n     println!(\"Hello, world\");\n     println!(\"All I want to say is...\");$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    println!(\"All I want to say is...\");$0\n-    println!(\"Hello, world\");\n-}\n+                fn main() {\n+                    println!(\"All I want to say is...\");$0\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -327,15 +327,15 @@ fn main() {\n         println!(\"Test\");\n     }$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    if true {\n-        println!(\"Test\");\n-    }$0\n+                fn main() {\n+                    if true {\n+                        println!(\"Test\");\n+                    }$0\n \n-    println!(\"Hello, world\");\n-}\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -348,15 +348,15 @@ fn main() {\n         println!(\"Test\");\n     }$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    for i in 0..10 {\n-        println!(\"Test\");\n-    }$0\n+                fn main() {\n+                    for i in 0..10 {\n+                        println!(\"Test\");\n+                    }$0\n \n-    println!(\"Hello, world\");\n-}\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -369,15 +369,15 @@ fn main() {\n         println!(\"Test\");\n     }$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    loop {\n-        println!(\"Test\");\n-    }$0\n+                fn main() {\n+                    loop {\n+                        println!(\"Test\");\n+                    }$0\n \n-    println!(\"Hello, world\");\n-}\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -390,15 +390,15 @@ fn main() {\n         println!(\"Test\");\n     }$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    while true {\n-        println!(\"Test\");\n-    }$0\n+                fn main() {\n+                    while true {\n+                        println!(\"Test\");\n+                    }$0\n \n-    println!(\"Hello, world\");\n-}\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -409,13 +409,13 @@ fn main() {\n \n     return 123;$0$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    return 123;$0\n+                fn main() {\n+                    return 123;$0\n \n-    println!(\"Hello, world\");\n-}\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -429,12 +429,12 @@ fn main() {\n     println!(\"All I want to say is...\");$0$0\n     println!(\"Hello, world\");\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    println!(\"All I want to say is...\");\n-    println!(\"Hello, world\");\n-}\n+                fn main() {\n+                    println!(\"All I want to say is...\");\n+                    println!(\"Hello, world\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -447,11 +447,11 @@ fn main() {\n fn main() {}\n \n fn foo() {}$0$0\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn foo() {}$0\n+                fn foo() {}$0\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -466,13 +466,13 @@ struct Yay;\n trait Wow {}\n \n impl Wow for Yay $0$0{}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Yay;\n+                struct Yay;\n \n-impl Wow for Yay $0{}\n+                impl Wow for Yay $0{}\n \n-trait Wow {}\n+                trait Wow {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -484,10 +484,10 @@ trait Wow {}\n             r#\"\n use std::vec::Vec;\n use std::collections::HashMap$0$0;\n-            \"#,\n+\"#,\n             expect![[r#\"\n-use std::collections::HashMap$0;\n-use std::vec::Vec;\n+                use std::collections::HashMap$0;\n+                use std::vec::Vec;\n             \"#]],\n             Direction::Up,\n         );\n@@ -505,16 +505,16 @@ fn main() {\n         _ => {}\n     };$0\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {\n-    match test {\n-        456 => {},\n-        _ => {}\n-    };\n-\n-    let test = 123;\n-}\n+                fn main() {\n+                    match test {\n+                        456 => {},\n+                        _ => {}\n+                    };\n+\n+                    let test = 123;\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -529,22 +529,22 @@ fn test(one: i32, two$0$0: u32) {}\n fn main() {\n     test(123, 456);\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn test(two$0: u32, one: i32) {}\n+                fn test(two$0: u32, one: i32) {}\n \n-fn main() {\n-    test(123, 456);\n-}\n+                fn main() {\n+                    test(123, 456);\n+                }\n             \"#]],\n             Direction::Up,\n         );\n         check(\n             r#\"\n fn f($0$0arg: u8, arg2: u16) {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn f(arg2: u16, $0arg: u8) {}\n+                fn f(arg2: u16, $0arg: u8) {}\n             \"#]],\n             Direction::Down,\n         );\n@@ -559,13 +559,13 @@ fn test(one: i32, two: u32) {}\n fn main() {\n     test(123, 456$0$0);\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn test(one: i32, two: u32) {}\n+                fn test(one: i32, two: u32) {}\n \n-fn main() {\n-    test(456$0, 123);\n-}\n+                fn main() {\n+                    test(456$0, 123);\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -580,13 +580,13 @@ fn test(one: i32, two: u32) {}\n fn main() {\n     test(123$0$0, 456);\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn test(one: i32, two: u32) {}\n+                fn test(one: i32, two: u32) {}\n \n-fn main() {\n-    test(456, 123$0);\n-}\n+                fn main() {\n+                    test(456, 123$0);\n+                }\n             \"#]],\n             Direction::Down,\n         );\n@@ -601,13 +601,13 @@ fn test(one: i32, two: u32) {}\n fn main() {\n     test(123$0$0, 456);\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn test(one: i32, two: u32) {}\n+                fn test(one: i32, two: u32) {}\n \n-fn main() {\n-    test(123, 456);\n-}\n+                fn main() {\n+                    test(123, 456);\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -620,11 +620,11 @@ fn main() {\n struct Test<A, B$0$0>(A, B);\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Test<B$0, A>(A, B);\n+                struct Test<B$0, A>(A, B);\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -639,13 +639,13 @@ struct Test<A, B>(A, B);\n fn main() {\n     let t = Test::<i32, &str$0$0>(123, \"yay\");\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Test<A, B>(A, B);\n+                struct Test<A, B>(A, B);\n \n-fn main() {\n-    let t = Test::<&str$0, i32>(123, \"yay\");\n-}\n+                fn main() {\n+                    let t = Test::<&str$0, i32>(123, \"yay\");\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -661,14 +661,14 @@ enum Hello {\n }\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-enum Hello {\n-    Two$0,\n-    One\n-}\n+                enum Hello {\n+                    Two$0,\n+                    One\n+                }\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -685,15 +685,15 @@ trait Two {}\n fn test<T: One + Two$0$0>(t: T) {}\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-trait One {}\n+                trait One {}\n \n-trait Two {}\n+                trait Two {}\n \n-fn test<T: Two$0 + One>(t: T) {}\n+                fn test<T: Two$0 + One>(t: T) {}\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -722,27 +722,27 @@ impl Yay for Test {\n         println!(\"Mmmm\");\n     }\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Test;\n+                struct Test;\n \n-trait Yay {\n-    type One;\n+                trait Yay {\n+                    type One;\n \n-    type Two;\n+                    type Two;\n \n-    fn inner();\n-}\n+                    fn inner();\n+                }\n \n-impl Yay for Test {\n-    type One = i32;\n+                impl Yay for Test {\n+                    type One = i32;\n \n-    fn inner() {$0\n-        println!(\"Mmmm\");\n-    }\n+                    fn inner() {$0\n+                        println!(\"Mmmm\");\n+                    }\n \n-    type Two = u32;\n-}\n+                    type Two = u32;\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -761,17 +761,17 @@ fn test() {\n         fn inner() {}\n     }\n }\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn test() {\n-    mod hi {$0\n-        fn inner() {}\n-    }\n-\n-    mod hello {\n-        fn inner() {}\n-    }\n-}\n+                fn test() {\n+                    mod hi {$0\n+                        fn inner() {}\n+                    }\n+\n+                    mod hello {\n+                        fn inner() {}\n+                    }\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -788,16 +788,16 @@ enum FooBar {\n }\n \n fn main() {}\n-            \"#,\n-            expect![[r#\"\n-fn main() {}\n-\n-$0#[derive(Debug)]\n-enum FooBar {\n-    Foo,\n-    Bar,\n-}\n-            \"#]],\n+\"#,\n+            expect![[r##\"\n+                fn main() {}\n+\n+                $0#[derive(Debug)]\n+                enum FooBar {\n+                    Foo,\n+                    Bar,\n+                }\n+            \"##]],\n             Direction::Down,\n         );\n         check(\n@@ -808,14 +808,14 @@ $0$0enum FooBar {\n }\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {}\n+                fn main() {}\n \n-$0enum FooBar {\n-    Foo,\n-    Bar,\n-}\n+                $0enum FooBar {\n+                    Foo,\n+                    Bar,\n+                }\n             \"#]],\n             Direction::Down,\n         );\n@@ -828,15 +828,15 @@ trait SomeTrait {}\n $0$0impl SomeTrait for Test {}\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Test;\n+                struct Test;\n \n-$0impl SomeTrait for Test {}\n+                $0impl SomeTrait for Test {}\n \n-trait SomeTrait {}\n+                trait SomeTrait {}\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );\n@@ -852,14 +852,14 @@ enum FooBar {\n }$0$0\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-fn main() {}\n+                fn main() {}\n \n-enum FooBar {\n-    Foo,\n-    Bar,\n-}$0\n+                enum FooBar {\n+                    Foo,\n+                    Bar,\n+                }$0\n             \"#]],\n             Direction::Down,\n         );\n@@ -872,15 +872,15 @@ trait SomeTrait {}\n impl SomeTrait for Test {}$0$0\n \n fn main() {}\n-            \"#,\n+\"#,\n             expect![[r#\"\n-struct Test;\n+                struct Test;\n \n-impl SomeTrait for Test {}$0\n+                impl SomeTrait for Test {}$0\n \n-trait SomeTrait {}\n+                trait SomeTrait {}\n \n-fn main() {}\n+                fn main() {}\n             \"#]],\n             Direction::Up,\n         );"}, {"sha": "0ebc5d267c66ad19173afe270552836af2985041", "filename": "crates/ide_assists/src/handlers/merge_match_arms.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fmerge_match_arms.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fmerge_match_arms.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fmerge_match_arms.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -72,7 +72,7 @@ pub(crate) fn merge_match_arms(acc: &mut Assists, ctx: &AssistContext) -> Option\n                     .join(\" | \")\n             };\n \n-            let arm = format!(\"{} => {}\", pats, current_expr.syntax().text());\n+            let arm = format!(\"{} => {},\", pats, current_expr.syntax().text());\n \n             if let [first, .., last] = &*arms_to_merge {\n                 let start = first.syntax().text_range().start();\n@@ -118,7 +118,7 @@ enum X { A, B, C }\n fn main() {\n     let x = X::A;\n     let y = match x {\n-        X::A | X::B => { 1i32 }\n+        X::A | X::B => { 1i32 },\n         X::C => { 2i32 }\n     }\n }\n@@ -183,7 +183,7 @@ fn main() {\n     let x = X::A;\n     let y = match x {\n         X::A => { 1i32 },\n-        _ => { 2i32 }\n+        _ => { 2i32 },\n     }\n }\n \"#,"}, {"sha": "b6a7aee59e4f872d0e834d59becaa24e6908a78f", "filename": "crates/ide_diagnostics/src/handlers/inactive_code.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide_diagnostics%2Fsrc%2Fhandlers%2Finactive_code.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fide_diagnostics%2Fsrc%2Fhandlers%2Finactive_code.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_diagnostics%2Fsrc%2Fhandlers%2Finactive_code.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -64,7 +64,7 @@ fn f() {\n     match () {\n         () => (),\n         #[cfg(a)] () => (),\n-      //^^^^^^^^^^^^^^^^^^ weak: code is inactive due to #[cfg] directives: a is disabled\n+      //^^^^^^^^^^^^^^^^^^^ weak: code is inactive due to #[cfg] directives: a is disabled\n     }\n \n     #[cfg(a)] 0          // Trailing expression of block"}, {"sha": "70037c02d46cf21cc81ae82bf67d3444601873f7", "filename": "crates/parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 14, "deletions": 16, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -400,20 +400,7 @@ pub(crate) fn match_arm_list(p: &mut Parser) {\n             error_block(p, \"expected match arm\");\n             continue;\n         }\n-\n-        // test match_arms_commas\n-        // fn foo() {\n-        //     match () {\n-        //         _ => (),\n-        //         _ => {}\n-        //         _ => ()\n-        //     }\n-        // }\n-        if match_arm(p).is_block() {\n-            p.eat(T![,]);\n-        } else if !p.at(T!['}']) {\n-            p.expect(T![,]);\n-        }\n+        match_arm(p);\n     }\n     p.expect(T!['}']);\n     m.complete(p, MATCH_ARM_LIST);\n@@ -429,7 +416,7 @@ pub(crate) fn match_arm_list(p: &mut Parser) {\n //         | X => (),\n //     };\n // }\n-fn match_arm(p: &mut Parser) -> BlockLike {\n+fn match_arm(p: &mut Parser) {\n     let m = p.start();\n     // test match_arms_outer_attributes\n     // fn foo() {\n@@ -452,8 +439,19 @@ fn match_arm(p: &mut Parser) -> BlockLike {\n     }\n     p.expect(T![=>]);\n     let blocklike = expr_stmt(p).1;\n+\n+    // test match_arms_commas\n+    // fn foo() {\n+    //     match () {\n+    //         _ => (),\n+    //         _ => {}\n+    //         _ => ()\n+    //     }\n+    // }\n+    if !p.eat(T![,]) && !blocklike.is_block() && !p.at(T!['}']) {\n+        p.error(\"expected `,`\");\n+    }\n     m.complete(p, MATCH_ARM);\n-    blocklike\n }\n \n // test match_guard"}, {"sha": "e9280ab45cc1ca0864792c77b3ea92a484cfb3c7", "filename": "crates/syntax/src/ast/edit_in_place.rs", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Fsrc%2Fast%2Fedit_in_place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Fsrc%2Fast%2Fedit_in_place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Fedit_in_place.rs?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -359,14 +359,10 @@ impl ast::MatchArmList {\n         let mut elements = Vec::new();\n         let position = match self.arms().last() {\n             Some(last_arm) => {\n-                let comma = last_arm\n-                    .syntax()\n-                    .siblings_with_tokens(Direction::Next)\n-                    .find(|it| it.kind() == T![,]);\n-                if needs_comma(&last_arm) && comma.is_none() {\n-                    elements.push(make::token(SyntaxKind::COMMA).into());\n+                if needs_comma(&last_arm) {\n+                    ted::append_child(last_arm.syntax(), make::token(SyntaxKind::COMMA));\n                 }\n-                Position::after(comma.unwrap_or_else(|| last_arm.syntax().clone().into()))\n+                Position::after(last_arm.syntax().clone())\n             }\n             None => match self.l_curly_token() {\n                 Some(it) => Position::after(it),\n@@ -377,12 +373,12 @@ impl ast::MatchArmList {\n         elements.push(make::tokens::whitespace(&format!(\"\\n{}\", indent)).into());\n         elements.push(arm.syntax().clone().into());\n         if needs_comma(&arm) {\n-            elements.push(make::token(SyntaxKind::COMMA).into());\n+            ted::append_child(arm.syntax(), make::token(SyntaxKind::COMMA));\n         }\n         ted::insert_all(position, elements);\n \n         fn needs_comma(arm: &ast::MatchArm) -> bool {\n-            arm.expr().map_or(false, |e| !e.is_block_like())\n+            arm.expr().map_or(false, |e| !e.is_block_like()) && arm.comma_token().is_none()\n         }\n     }\n }"}, {"sha": "9524f5ccc7837a414e64b56eaa24976eb98d25e1", "filename": "crates/syntax/test_data/parser/err/0032_match_arms_inner_attrs.rast", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -22,7 +22,7 @@ SOURCE_FILE@0..293\n           MATCH_ARM_LIST@24..101\n             L_CURLY@24..25 \"{\"\n             WHITESPACE@25..34 \"\\n        \"\n-            MATCH_ARM@34..41\n+            MATCH_ARM@34..42\n               WILDCARD_PAT@34..35\n                 UNDERSCORE@34..35 \"_\"\n               WHITESPACE@35..36 \" \"\n@@ -31,7 +31,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@39..41\n                 L_PAREN@39..40 \"(\"\n                 R_PAREN@40..41 \")\"\n-            COMMA@41..42 \",\"\n+              COMMA@41..42 \",\"\n             WHITESPACE@42..51 \"\\n        \"\n             MATCH_ARM@51..78\n               ATTR@51..52\n@@ -53,7 +53,7 @@ SOURCE_FILE@0..293\n                     R_PAREN@76..77 \")\"\n                 R_BRACK@77..78 \"]\"\n             WHITESPACE@78..87 \"\\n        \"\n-            MATCH_ARM@87..94\n+            MATCH_ARM@87..95\n               WILDCARD_PAT@87..88\n                 UNDERSCORE@87..88 \"_\"\n               WHITESPACE@88..89 \" \"\n@@ -62,7 +62,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@92..94\n                 L_PAREN@92..93 \"(\"\n                 R_PAREN@93..94 \")\"\n-            COMMA@94..95 \",\"\n+              COMMA@94..95 \",\"\n             WHITESPACE@95..100 \"\\n    \"\n             R_CURLY@100..101 \"}\"\n       WHITESPACE@101..107 \"\\n\\n    \"\n@@ -77,7 +77,7 @@ SOURCE_FILE@0..293\n           MATCH_ARM_LIST@116..185\n             L_CURLY@116..117 \"{\"\n             WHITESPACE@117..126 \"\\n        \"\n-            MATCH_ARM@126..133\n+            MATCH_ARM@126..134\n               WILDCARD_PAT@126..127\n                 UNDERSCORE@126..127 \"_\"\n               WHITESPACE@127..128 \" \"\n@@ -86,9 +86,9 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@131..133\n                 L_PAREN@131..132 \"(\"\n                 R_PAREN@132..133 \")\"\n-            COMMA@133..134 \",\"\n+              COMMA@133..134 \",\"\n             WHITESPACE@134..143 \"\\n        \"\n-            MATCH_ARM@143..150\n+            MATCH_ARM@143..151\n               WILDCARD_PAT@143..144\n                 UNDERSCORE@143..144 \"_\"\n               WHITESPACE@144..145 \" \"\n@@ -97,7 +97,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@148..150\n                 L_PAREN@148..149 \"(\"\n                 R_PAREN@149..150 \")\"\n-            COMMA@150..151 \",\"\n+              COMMA@150..151 \",\"\n             WHITESPACE@151..160 \"\\n        \"\n             MATCH_ARM@160..179\n               ATTR@160..161\n@@ -165,7 +165,7 @@ SOURCE_FILE@0..293\n                   R_PAREN@248..249 \")\"\n               R_BRACK@249..250 \"]\"\n           WHITESPACE@250..259 \"\\n        \"\n-          MATCH_ARM@259..266\n+          MATCH_ARM@259..267\n             WILDCARD_PAT@259..260\n               UNDERSCORE@259..260 \"_\"\n             WHITESPACE@260..261 \" \"\n@@ -174,9 +174,9 @@ SOURCE_FILE@0..293\n             TUPLE_EXPR@264..266\n               L_PAREN@264..265 \"(\"\n               R_PAREN@265..266 \")\"\n-          COMMA@266..267 \",\"\n+            COMMA@266..267 \",\"\n           WHITESPACE@267..276 \"\\n        \"\n-          MATCH_ARM@276..283\n+          MATCH_ARM@276..284\n             WILDCARD_PAT@276..277\n               UNDERSCORE@276..277 \"_\"\n             WHITESPACE@277..278 \" \"\n@@ -185,7 +185,7 @@ SOURCE_FILE@0..293\n             TUPLE_EXPR@281..283\n               L_PAREN@281..282 \"(\"\n               R_PAREN@282..283 \")\"\n-          COMMA@283..284 \",\"\n+            COMMA@283..284 \",\"\n           WHITESPACE@284..289 \"\\n    \"\n           R_CURLY@289..290 \"}\"\n       WHITESPACE@290..291 \"\\n\"\n@@ -194,11 +194,11 @@ SOURCE_FILE@0..293\n error 52..52: expected `[`\n error 52..52: expected pattern\n error 53..53: expected FAT_ARROW\n-error 78..78: expected COMMA\n+error 78..78: expected `,`\n error 161..161: expected `[`\n error 161..161: expected pattern\n error 162..162: expected FAT_ARROW\n error 232..232: expected `[`\n error 232..232: expected pattern\n error 233..233: expected FAT_ARROW\n-error 250..250: expected COMMA\n+error 250..250: expected `,`"}, {"sha": "b6095d5030f24555705278dec99f043559a7185f", "filename": "crates/syntax/test_data/parser/err/0033_match_arms_outer_attrs.rast", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..89\n         MATCH_ARM_LIST@24..86\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..41\n+          MATCH_ARM@34..42\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -30,9 +30,9 @@ SOURCE_FILE@0..89\n             TUPLE_EXPR@39..41\n               L_PAREN@39..40 \"(\"\n               R_PAREN@40..41 \")\"\n-          COMMA@41..42 \",\"\n+            COMMA@41..42 \",\"\n           WHITESPACE@42..51 \"\\n        \"\n-          MATCH_ARM@51..58\n+          MATCH_ARM@51..59\n             WILDCARD_PAT@51..52\n               UNDERSCORE@51..52 \"_\"\n             WHITESPACE@52..53 \" \"\n@@ -41,7 +41,7 @@ SOURCE_FILE@0..89\n             TUPLE_EXPR@56..58\n               L_PAREN@56..57 \"(\"\n               R_PAREN@57..58 \")\"\n-          COMMA@58..59 \",\"\n+            COMMA@58..59 \",\"\n           WHITESPACE@59..68 \"\\n        \"\n           MATCH_ARM@68..80\n             ATTR@68..80"}, {"sha": "32187facfd71ce8991a64b60bbf5b2511f79d0b9", "filename": "crates/syntax/test_data/parser/inline/ok/0055_literal_pattern.rast", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..113\n         MATCH_ARM_LIST@25..110\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..43\n+          MATCH_ARM@35..44\n             LITERAL_PAT@35..37\n               MINUS@35..36 \"-\"\n               LITERAL@36..37\n@@ -32,9 +32,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@41..43\n               L_PAREN@41..42 \"(\"\n               R_PAREN@42..43 \")\"\n-          COMMA@43..44 \",\"\n+            COMMA@43..44 \",\"\n           WHITESPACE@44..53 \"\\n        \"\n-          MATCH_ARM@53..61\n+          MATCH_ARM@53..62\n             LITERAL_PAT@53..55\n               LITERAL@53..55\n                 INT_NUMBER@53..55 \"92\"\n@@ -44,9 +44,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@59..61\n               L_PAREN@59..60 \"(\"\n               R_PAREN@60..61 \")\"\n-          COMMA@61..62 \",\"\n+            COMMA@61..62 \",\"\n           WHITESPACE@62..71 \"\\n        \"\n-          MATCH_ARM@71..80\n+          MATCH_ARM@71..81\n             LITERAL_PAT@71..74\n               LITERAL@71..74\n                 CHAR@71..74 \"'c'\"\n@@ -56,9 +56,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@78..80\n               L_PAREN@78..79 \"(\"\n               R_PAREN@79..80 \")\"\n-          COMMA@80..81 \",\"\n+            COMMA@80..81 \",\"\n           WHITESPACE@81..90 \"\\n        \"\n-          MATCH_ARM@90..103\n+          MATCH_ARM@90..104\n             LITERAL_PAT@90..97\n               LITERAL@90..97\n                 STRING@90..97 \"\\\"hello\\\"\"\n@@ -68,7 +68,7 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@101..103\n               L_PAREN@101..102 \"(\"\n               R_PAREN@102..103 \")\"\n-          COMMA@103..104 \",\"\n+            COMMA@103..104 \",\"\n           WHITESPACE@104..109 \"\\n    \"\n           R_CURLY@109..110 \"}\"\n       WHITESPACE@110..111 \"\\n\""}, {"sha": "3598f3bc26f07c3eefbdbf30650d5809f5112ab4", "filename": "crates/syntax/test_data/parser/inline/ok/0058_range_pat.rast", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -20,7 +20,7 @@ SOURCE_FILE@0..112\n         MATCH_ARM_LIST@25..109\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..50\n+          MATCH_ARM@35..51\n             RANGE_PAT@35..44\n               LITERAL_PAT@35..36\n                 LITERAL@35..36\n@@ -37,9 +37,9 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@48..50\n               L_PAREN@48..49 \"(\"\n               R_PAREN@49..50 \")\"\n-          COMMA@50..51 \",\"\n+            COMMA@50..51 \",\"\n           WHITESPACE@51..60 \"\\n        \"\n-          MATCH_ARM@60..77\n+          MATCH_ARM@60..78\n             RANGE_PAT@60..71\n               LITERAL_PAT@60..63\n                 LITERAL@60..63\n@@ -56,9 +56,9 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@75..77\n               L_PAREN@75..76 \"(\"\n               R_PAREN@76..77 \")\"\n-          COMMA@77..78 \",\"\n+            COMMA@77..78 \",\"\n           WHITESPACE@78..87 \"\\n        \"\n-          MATCH_ARM@87..102\n+          MATCH_ARM@87..103\n             RANGE_PAT@87..97\n               LITERAL_PAT@87..90\n                 LITERAL@87..90\n@@ -74,7 +74,7 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@100..102\n               L_PAREN@100..101 \"(\"\n               R_PAREN@101..102 \")\"\n-          COMMA@102..103 \",\"\n+            COMMA@102..103 \",\"\n           WHITESPACE@103..108 \"\\n    \"\n           R_CURLY@108..109 \"}\"\n       WHITESPACE@109..110 \"\\n\""}, {"sha": "6155726e91a19880514a9319222608441bae309f", "filename": "crates/syntax/test_data/parser/inline/ok/0059_match_arms_commas.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..83\n         MATCH_ARM_LIST@24..80\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..41\n+          MATCH_ARM@34..42\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -30,7 +30,7 @@ SOURCE_FILE@0..83\n             TUPLE_EXPR@39..41\n               L_PAREN@39..40 \"(\"\n               R_PAREN@40..41 \")\"\n-          COMMA@41..42 \",\"\n+            COMMA@41..42 \",\"\n           WHITESPACE@42..51 \"\\n        \"\n           MATCH_ARM@51..58\n             WILDCARD_PAT@51..52"}, {"sha": "566b478ea8f9dab7797bca32a942bc75dcc86478", "filename": "crates/syntax/test_data/parser/inline/ok/0066_match_arm.rast", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -22,7 +22,7 @@ SOURCE_FILE@0..167\n           MATCH_ARM_LIST@24..163\n             L_CURLY@24..25 \"{\"\n             WHITESPACE@25..34 \"\\n        \"\n-            MATCH_ARM@34..41\n+            MATCH_ARM@34..42\n               WILDCARD_PAT@34..35\n                 UNDERSCORE@34..35 \"_\"\n               WHITESPACE@35..36 \" \"\n@@ -31,9 +31,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@39..41\n                 L_PAREN@39..40 \"(\"\n                 R_PAREN@40..41 \")\"\n-            COMMA@41..42 \",\"\n+              COMMA@41..42 \",\"\n             WHITESPACE@42..51 \"\\n        \"\n-            MATCH_ARM@51..83\n+            MATCH_ARM@51..84\n               WILDCARD_PAT@51..52\n                 UNDERSCORE@51..52 \"_\"\n               WHITESPACE@52..53 \" \"\n@@ -70,9 +70,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@81..83\n                 L_PAREN@81..82 \"(\"\n                 R_PAREN@82..83 \")\"\n-            COMMA@83..84 \",\"\n+              COMMA@83..84 \",\"\n             WHITESPACE@84..93 \"\\n        \"\n-            MATCH_ARM@93..109\n+            MATCH_ARM@93..110\n               OR_PAT@93..98\n                 IDENT_PAT@93..94\n                   NAME@93..94\n@@ -98,9 +98,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@107..109\n                 L_PAREN@107..108 \"(\"\n                 R_PAREN@108..109 \")\"\n-            COMMA@109..110 \",\"\n+              COMMA@109..110 \",\"\n             WHITESPACE@110..119 \"\\n        \"\n-            MATCH_ARM@119..137\n+            MATCH_ARM@119..138\n               PIPE@119..120 \"|\"\n               WHITESPACE@120..121 \" \"\n               OR_PAT@121..126\n@@ -128,9 +128,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@135..137\n                 L_PAREN@135..136 \"(\"\n                 R_PAREN@136..137 \")\"\n-            COMMA@137..138 \",\"\n+              COMMA@137..138 \",\"\n             WHITESPACE@138..147 \"\\n        \"\n-            MATCH_ARM@147..156\n+            MATCH_ARM@147..157\n               PIPE@147..148 \"|\"\n               WHITESPACE@148..149 \" \"\n               IDENT_PAT@149..150\n@@ -142,7 +142,7 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@154..156\n                 L_PAREN@154..155 \"(\"\n                 R_PAREN@155..156 \")\"\n-            COMMA@156..157 \",\"\n+              COMMA@156..157 \",\"\n             WHITESPACE@157..162 \"\\n    \"\n             R_CURLY@162..163 \"}\"\n         SEMICOLON@163..164 \";\""}, {"sha": "12d498af62c85bdb25d161a41b91456a823c8d17", "filename": "crates/syntax/test_data/parser/inline/ok/0118_match_guard.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..58\n         MATCH_ARM_LIST@24..55\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..48\n+          MATCH_ARM@34..49\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -39,7 +39,7 @@ SOURCE_FILE@0..58\n             TUPLE_EXPR@46..48\n               L_PAREN@46..47 \"(\"\n               R_PAREN@47..48 \")\"\n-          COMMA@48..49 \",\"\n+            COMMA@48..49 \",\"\n           WHITESPACE@49..54 \"\\n    \"\n           R_CURLY@54..55 \"}\"\n       WHITESPACE@55..56 \"\\n\""}, {"sha": "443f368532634f02b88081b656be7222e2b2789b", "filename": "crates/syntax/test_data/parser/inline/ok/0120_match_arms_inner_attribute.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -66,7 +66,7 @@ SOURCE_FILE@0..139\n                 R_PAREN@111..112 \")\"\n             R_BRACK@112..113 \"]\"\n           WHITESPACE@113..122 \"\\n        \"\n-          MATCH_ARM@122..129\n+          MATCH_ARM@122..130\n             WILDCARD_PAT@122..123\n               UNDERSCORE@122..123 \"_\"\n             WHITESPACE@123..124 \" \"\n@@ -75,7 +75,7 @@ SOURCE_FILE@0..139\n             TUPLE_EXPR@127..129\n               L_PAREN@127..128 \"(\"\n               R_PAREN@128..129 \")\"\n-          COMMA@129..130 \",\"\n+            COMMA@129..130 \",\"\n           WHITESPACE@130..135 \"\\n    \"\n           R_CURLY@135..136 \"}\"\n       WHITESPACE@136..137 \"\\n\""}, {"sha": "1b2db27e4f7bbe64231ed0b43681880da9cbcc2c", "filename": "crates/syntax/test_data/parser/inline/ok/0121_match_arms_outer_attributes.rast", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..259\n         MATCH_ARM_LIST@24..256\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..74\n+          MATCH_ARM@34..75\n             ATTR@34..58\n               POUND@34..35 \"#\"\n               L_BRACK@35..36 \"[\"\n@@ -48,9 +48,9 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@72..74\n               L_PAREN@72..73 \"(\"\n               R_PAREN@73..74 \")\"\n-          COMMA@74..75 \",\"\n+            COMMA@74..75 \",\"\n           WHITESPACE@75..84 \"\\n        \"\n-          MATCH_ARM@84..125\n+          MATCH_ARM@84..126\n             ATTR@84..109\n               POUND@84..85 \"#\"\n               L_BRACK@85..86 \"[\"\n@@ -77,9 +77,9 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@123..125\n               L_PAREN@123..124 \"(\"\n               R_PAREN@124..125 \")\"\n-          COMMA@125..126 \",\"\n+            COMMA@125..126 \",\"\n           WHITESPACE@126..135 \"\\n        \"\n-          MATCH_ARM@135..249\n+          MATCH_ARM@135..250\n             ATTR@135..159\n               POUND@135..136 \"#\"\n               L_BRACK@136..137 \"[\"\n@@ -142,7 +142,7 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@247..249\n               L_PAREN@247..248 \"(\"\n               R_PAREN@248..249 \")\"\n-          COMMA@249..250 \",\"\n+            COMMA@249..250 \",\"\n           WHITESPACE@250..255 \"\\n    \"\n           R_CURLY@255..256 \"}\"\n       WHITESPACE@256..257 \"\\n\""}, {"sha": "41119dbc16da2a4931f2bca5d901118e9853c308", "filename": "crates/syntax/test_data/parser/inline/ok/0156_or_pattern.rast", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..130\n         MATCH_ARM_LIST@25..127\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..48\n+          MATCH_ARM@35..49\n             PAREN_PAT@35..42\n               L_PAREN@35..36 \"(\"\n               OR_PAT@36..41\n@@ -39,9 +39,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@46..48\n               L_PAREN@46..47 \"(\"\n               R_PAREN@47..48 \")\"\n-          COMMA@48..49 \",\"\n+            COMMA@48..49 \",\"\n           WHITESPACE@49..58 \"\\n        \"\n-          MATCH_ARM@58..72\n+          MATCH_ARM@58..73\n             REF_PAT@58..66\n               AMP@58..59 \"&\"\n               PAREN_PAT@59..66\n@@ -61,9 +61,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@70..72\n               L_PAREN@70..71 \"(\"\n               R_PAREN@71..72 \")\"\n-          COMMA@72..73 \",\"\n+            COMMA@72..73 \",\"\n           WHITESPACE@73..82 \"\\n        \"\n-          MATCH_ARM@82..96\n+          MATCH_ARM@82..97\n             TUPLE_PAT@82..90\n               L_PAREN@82..83 \"(\"\n               OR_PAT@83..88\n@@ -82,9 +82,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@94..96\n               L_PAREN@94..95 \"(\"\n               R_PAREN@95..96 \")\"\n-          COMMA@96..97 \",\"\n+            COMMA@96..97 \",\"\n           WHITESPACE@97..106 \"\\n        \"\n-          MATCH_ARM@106..120\n+          MATCH_ARM@106..121\n             SLICE_PAT@106..114\n               L_BRACK@106..107 \"[\"\n               OR_PAT@107..112\n@@ -103,7 +103,7 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@118..120\n               L_PAREN@118..119 \"(\"\n               R_PAREN@119..120 \")\"\n-          COMMA@120..121 \",\"\n+            COMMA@120..121 \",\"\n           WHITESPACE@121..126 \"\\n    \"\n           R_CURLY@126..127 \"}\"\n       WHITESPACE@127..128 \"\\n\""}, {"sha": "5b114df801486cfc62f3d3432b48611a39ccd0cd", "filename": "crates/syntax/test_data/parser/ok/0035_weird_exprs.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -1093,7 +1093,7 @@ SOURCE_FILE@0..3813\n                   MATCH_ARM_LIST@1853..1885\n                     L_CURLY@1853..1854 \"{\"\n                     WHITESPACE@1854..1855 \" \"\n-                    MATCH_ARM@1855..1863\n+                    MATCH_ARM@1855..1864\n                       LITERAL_PAT@1855..1856\n                         LITERAL@1855..1856\n                           INT_NUMBER@1855..1856 \"1\"\n@@ -1104,7 +1104,7 @@ SOURCE_FILE@0..3813\n                         L_CURLY@1860..1861 \"{\"\n                         WHITESPACE@1861..1862 \" \"\n                         R_CURLY@1862..1863 \"}\"\n-                    COMMA@1863..1864 \",\"\n+                      COMMA@1863..1864 \",\"\n                     WHITESPACE@1864..1865 \" \"\n                     MATCH_ARM@1865..1883\n                       WILDCARD_PAT@1865..1866"}, {"sha": "731a2315aa49105fc30a1e8b9a05232dc580af24", "filename": "crates/syntax/test_data/parser/ok/0047_minus_in_inner_pattern.rast", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/0a3ac7a96cfe86494ed398eafd84b37cdc8fa545/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast?ref=0a3ac7a96cfe86494ed398eafd84b37cdc8fa545", "patch": "@@ -34,7 +34,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@93..141\n             L_CURLY@93..94 \"{\"\n             WHITESPACE@94..103 \"\\n        \"\n-            MATCH_ARM@103..117\n+            MATCH_ARM@103..118\n               TUPLE_STRUCT_PAT@103..111\n                 PATH@103..107\n                   PATH_SEGMENT@103..107\n@@ -52,9 +52,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@115..117\n                 L_PAREN@115..116 \"(\"\n                 R_PAREN@116..117 \")\"\n-            COMMA@117..118 \",\"\n+              COMMA@117..118 \",\"\n             WHITESPACE@118..127 \"\\n        \"\n-            MATCH_ARM@127..134\n+            MATCH_ARM@127..135\n               WILDCARD_PAT@127..128\n                 UNDERSCORE@127..128 \"_\"\n               WHITESPACE@128..129 \" \"\n@@ -63,7 +63,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@132..134\n                 L_PAREN@132..133 \"(\"\n                 R_PAREN@133..134 \")\"\n-            COMMA@134..135 \",\"\n+              COMMA@134..135 \",\"\n             WHITESPACE@135..140 \"\\n    \"\n             R_CURLY@140..141 \"}\"\n       WHITESPACE@141..147 \"\\n\\n    \"\n@@ -97,7 +97,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@168..222\n             L_CURLY@168..169 \"{\"\n             WHITESPACE@169..178 \"\\n        \"\n-            MATCH_ARM@178..198\n+            MATCH_ARM@178..199\n               TUPLE_STRUCT_PAT@178..192\n                 PATH@178..182\n                   PATH_SEGMENT@178..182\n@@ -124,9 +124,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@196..198\n                 L_PAREN@196..197 \"(\"\n                 R_PAREN@197..198 \")\"\n-            COMMA@198..199 \",\"\n+              COMMA@198..199 \",\"\n             WHITESPACE@199..208 \"\\n        \"\n-            MATCH_ARM@208..215\n+            MATCH_ARM@208..216\n               WILDCARD_PAT@208..209\n                 UNDERSCORE@208..209 \"_\"\n               WHITESPACE@209..210 \" \"\n@@ -135,7 +135,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@213..215\n                 L_PAREN@213..214 \"(\"\n                 R_PAREN@214..215 \")\"\n-            COMMA@215..216 \",\"\n+              COMMA@215..216 \",\"\n             WHITESPACE@216..221 \"\\n    \"\n             R_CURLY@221..222 \"}\"\n       WHITESPACE@222..228 \"\\n\\n    \"\n@@ -171,7 +171,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@247..299\n             L_CURLY@247..248 \"{\"\n             WHITESPACE@248..257 \"\\n        \"\n-            MATCH_ARM@257..275\n+            MATCH_ARM@257..276\n               TUPLE_STRUCT_PAT@257..269\n                 PATH@257..261\n                   PATH@257..258\n@@ -200,9 +200,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@273..275\n                 L_PAREN@273..274 \"(\"\n                 R_PAREN@274..275 \")\"\n-            COMMA@275..276 \",\"\n+              COMMA@275..276 \",\"\n             WHITESPACE@276..285 \"\\n        \"\n-            MATCH_ARM@285..292\n+            MATCH_ARM@285..293\n               WILDCARD_PAT@285..286\n                 UNDERSCORE@285..286 \"_\"\n               WHITESPACE@286..287 \" \"\n@@ -211,7 +211,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@290..292\n                 L_PAREN@290..291 \"(\"\n                 R_PAREN@291..292 \")\"\n-            COMMA@292..293 \",\"\n+              COMMA@292..293 \",\"\n             WHITESPACE@293..298 \"\\n    \"\n             R_CURLY@298..299 \"}\"\n       WHITESPACE@299..305 \"\\n\\n    \""}]}