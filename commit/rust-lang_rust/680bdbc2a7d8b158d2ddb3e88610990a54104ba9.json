{"sha": "680bdbc2a7d8b158d2ddb3e88610990a54104ba9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4MGJkYmMyYTdkOGIxNThkMmRkYjNlODg2MTA5OTBhNTQxMDRiYTk=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-02-13T00:40:06Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-02-13T00:40:06Z"}, "message": "rustbuild: Don't make any directories when enabled\n\nAs part of the ./configure step don't create any directories if rustbuild is\nenable as rustbuild will take care of everything.", "tree": {"sha": "33ad3aec29e3630436c15fe896f6bf27a38c524e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/33ad3aec29e3630436c15fe896f6bf27a38c524e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/680bdbc2a7d8b158d2ddb3e88610990a54104ba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/680bdbc2a7d8b158d2ddb3e88610990a54104ba9", "html_url": "https://github.com/rust-lang/rust/commit/680bdbc2a7d8b158d2ddb3e88610990a54104ba9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/680bdbc2a7d8b158d2ddb3e88610990a54104ba9/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c4d81f9bc9bb39963ded050b821347ae214d734", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c4d81f9bc9bb39963ded050b821347ae214d734", "html_url": "https://github.com/rust-lang/rust/commit/0c4d81f9bc9bb39963ded050b821347ae214d734"}], "stats": {"total": 166, "additions": 85, "deletions": 81}, "files": [{"sha": "aa888c30f542172cbf3eabf2fca7fb648a0fc8a1", "filename": "configure", "status": "modified", "additions": 85, "deletions": 81, "changes": 166, "blob_url": "https://github.com/rust-lang/rust/blob/680bdbc2a7d8b158d2ddb3e88610990a54104ba9/configure", "raw_url": "https://github.com/rust-lang/rust/raw/680bdbc2a7d8b158d2ddb3e88610990a54104ba9/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=680bdbc2a7d8b158d2ddb3e88610990a54104ba9", "patch": "@@ -1327,97 +1327,101 @@ then\n     fi\n fi\n \n-step_msg \"making directories\"\n+if [ -z \"$CFG_ENABLE_RUSTBUILD\" ]; then\n \n-for i in \\\n-    doc doc/std doc/extra \\\n-    dl tmp dist\n-do\n-    make_dir $i\n-done\n+  step_msg \"making directories\"\n \n-for t in $CFG_HOST\n-do\n-    make_dir $t/llvm\n-done\n+  for i in \\\n+      doc doc/std doc/extra \\\n+      dl tmp dist\n+  do\n+      make_dir $i\n+  done\n \n-for t in $CFG_HOST\n-do\n-    make_dir $t/rustllvm\n-done\n+  for t in $CFG_HOST\n+  do\n+      make_dir $t/llvm\n+  done\n \n-for t in $CFG_TARGET\n-do\n-  make_dir $t/rt\n-  for s in 0 1 2 3\n+  for t in $CFG_HOST\n   do\n-    make_dir $t/rt/stage$s\n-    make_dir $t/rt/jemalloc\n-    make_dir $t/rt/compiler-rt\n-    for i in                                          \\\n-      isaac sync test \\\n-      arch/i386 arch/x86_64 arch/arm arch/aarch64 arch/mips arch/powerpc\n-    do\n-      make_dir $t/rt/stage$s/$i\n-    done\n+      make_dir $t/rustllvm\n   done\n-done\n \n-for h in $CFG_HOST\n-do\n-    for t in $CFG_TARGET\n+  for t in $CFG_TARGET\n+  do\n+    make_dir $t/rt\n+    for s in 0 1 2 3\n     do\n-        # host bin dir stage0\n-        make_dir $h/stage0/bin\n-\n-        # host lib dir stage0\n-        make_dir $h/stage0/lib\n-\n-        # host test dir stage0\n-        make_dir $h/stage0/test\n-\n-        # target bin dir stage0\n-        make_dir $h/stage0/lib/rustlib/$t/bin\n-\n-        # target lib dir stage0\n-        make_dir $h/stage0/lib/rustlib/$t/lib\n-\n-        for i in 1 2 3\n-        do\n-            # host bin dir\n-            make_dir $h/stage$i/bin\n-\n-            # host lib dir\n-            make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE\n-\n-            # host test dir\n-            make_dir $h/stage$i/test\n-\n-            # target bin dir\n-            make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE/rustlib/$t/bin\n-\n-            # target lib dir\n-            make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE/rustlib/$t/lib\n-        done\n+      make_dir $t/rt/stage$s\n+      make_dir $t/rt/jemalloc\n+      make_dir $t/rt/compiler-rt\n+      for i in                                          \\\n+        isaac sync test \\\n+        arch/i386 arch/x86_64 arch/arm arch/aarch64 arch/mips arch/powerpc\n+      do\n+        make_dir $t/rt/stage$s/$i\n+      done\n     done\n+  done\n \n-    make_dir $h/test/run-pass\n-    make_dir $h/test/run-pass-valgrind\n-    make_dir $h/test/run-pass-fulldeps\n-    make_dir $h/test/run-fail\n-    make_dir $h/test/run-fail-fulldeps\n-    make_dir $h/test/compile-fail\n-    make_dir $h/test/parse-fail\n-    make_dir $h/test/compile-fail-fulldeps\n-    make_dir $h/test/bench\n-    make_dir $h/test/perf\n-    make_dir $h/test/pretty\n-    make_dir $h/test/debuginfo-gdb\n-    make_dir $h/test/debuginfo-lldb\n-    make_dir $h/test/codegen\n-    make_dir $h/test/codegen-units\n-    make_dir $h/test/rustdoc\n-done\n+  for h in $CFG_HOST\n+  do\n+      for t in $CFG_TARGET\n+      do\n+          # host bin dir stage0\n+          make_dir $h/stage0/bin\n+\n+          # host lib dir stage0\n+          make_dir $h/stage0/lib\n+\n+          # host test dir stage0\n+          make_dir $h/stage0/test\n+\n+          # target bin dir stage0\n+          make_dir $h/stage0/lib/rustlib/$t/bin\n+\n+          # target lib dir stage0\n+          make_dir $h/stage0/lib/rustlib/$t/lib\n+\n+          for i in 1 2 3\n+          do\n+              # host bin dir\n+              make_dir $h/stage$i/bin\n+\n+              # host lib dir\n+              make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE\n+\n+              # host test dir\n+              make_dir $h/stage$i/test\n+\n+              # target bin dir\n+              make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE/rustlib/$t/bin\n+\n+              # target lib dir\n+              make_dir $h/stage$i/$CFG_LIBDIR_RELATIVE/rustlib/$t/lib\n+          done\n+      done\n+\n+      make_dir $h/test/run-pass\n+      make_dir $h/test/run-pass-valgrind\n+      make_dir $h/test/run-pass-fulldeps\n+      make_dir $h/test/run-fail\n+      make_dir $h/test/run-fail-fulldeps\n+      make_dir $h/test/compile-fail\n+      make_dir $h/test/parse-fail\n+      make_dir $h/test/compile-fail-fulldeps\n+      make_dir $h/test/bench\n+      make_dir $h/test/perf\n+      make_dir $h/test/pretty\n+      make_dir $h/test/debuginfo-gdb\n+      make_dir $h/test/debuginfo-lldb\n+      make_dir $h/test/codegen\n+      make_dir $h/test/codegen-units\n+      make_dir $h/test/rustdoc\n+  done\n+\n+fi\n \n # Configure submodules\n step_msg \"configuring submodules\""}]}