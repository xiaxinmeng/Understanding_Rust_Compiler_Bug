{"sha": "d1c01734f3a34958333fefb2fe91cea5e753ddd7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxYzAxNzM0ZjNhMzQ5NTgzMzNmZWZiMmZlOTFjZWE1ZTc1M2RkZDc=", "commit": {"author": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-06-07T17:41:18Z"}, "committer": {"name": "John Clements", "email": "clements@racket-lang.org", "date": "2013-09-06T20:35:08Z"}, "message": "drop back to a simple gensym approach for fresh-name.\n\nthis is necessary so that the new idents are connected to the original strings.\nthis is important both for error messages, and so that top-level refs get connected\nto the right things.", "tree": {"sha": "94bd464d5a1f35be8d89406de648ecacd367dda4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/94bd464d5a1f35be8d89406de648ecacd367dda4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1c01734f3a34958333fefb2fe91cea5e753ddd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1c01734f3a34958333fefb2fe91cea5e753ddd7", "html_url": "https://github.com/rust-lang/rust/commit/d1c01734f3a34958333fefb2fe91cea5e753ddd7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1c01734f3a34958333fefb2fe91cea5e753ddd7/comments", "author": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jbclements", "id": 226617, "node_id": "MDQ6VXNlcjIyNjYxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/226617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbclements", "html_url": "https://github.com/jbclements", "followers_url": "https://api.github.com/users/jbclements/followers", "following_url": "https://api.github.com/users/jbclements/following{/other_user}", "gists_url": "https://api.github.com/users/jbclements/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbclements/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbclements/subscriptions", "organizations_url": "https://api.github.com/users/jbclements/orgs", "repos_url": "https://api.github.com/users/jbclements/repos", "events_url": "https://api.github.com/users/jbclements/events{/privacy}", "received_events_url": "https://api.github.com/users/jbclements/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7bf75adfd904642022a048c34440ec4b5dfd567d", "url": "https://api.github.com/repos/rust-lang/rust/commits/7bf75adfd904642022a048c34440ec4b5dfd567d", "html_url": "https://github.com/rust-lang/rust/commit/7bf75adfd904642022a048c34440ec4b5dfd567d"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "6cdde3708a69cf8883dba4575231a619745acc2f", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/d1c01734f3a34958333fefb2fe91cea5e753ddd7/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1c01734f3a34958333fefb2fe91cea5e753ddd7/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=d1c01734f3a34958333fefb2fe91cea5e753ddd7", "patch": "@@ -543,18 +543,9 @@ pub fn gensym_ident(str : &str) -> ast::Ident {\n     ast::Ident::new(gensym(str))\n }\n \n-\n-// create a fresh name. In principle, this is just a\n-// gensym, but for debugging purposes, you'd like the\n-// resulting name to have a suggestive stringify, without\n-// paying the cost of guaranteeing that the name is\n-// truly unique.  I'm going to try to strike a balance\n-// by using a gensym with a name that has a random number\n-// at the end. So, the gensym guarantees the uniqueness,\n-// and the int helps to avoid confusion.\n-pub fn fresh_name(src_name : &ast::Ident) -> Name {\n-    let num = rand::rng().gen_uint_range(0,0xffff);\n-    gensym(fmt!(\"%s_%u\",ident_to_str(src_name),num))\n+// create a fresh name that maps to the same string as the old one.\n+pub fn fresh_name(src : &ast::Ident) -> Name {\n+    gensym(ident_to_str(src))\n }\n \n // create a fresh mark."}]}