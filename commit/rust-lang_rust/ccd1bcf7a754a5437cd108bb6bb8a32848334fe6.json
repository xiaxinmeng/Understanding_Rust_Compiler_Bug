{"sha": "ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNjZDFiY2Y3YTc1NGE1NDM3Y2QxMDhiYjZiYjhhMzI4NDgzMzRmZTY=", "commit": {"author": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2011-06-14T22:54:58Z"}, "committer": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2011-06-14T23:09:21Z"}, "message": "Make tydesc glue functions use cdecl.", "tree": {"sha": "84248a4197f80efa1f1a123602e99e730e0f8c5b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84248a4197f80efa1f1a123602e99e730e0f8c5b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "html_url": "https://github.com/rust-lang/rust/commit/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6/comments", "author": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5378f48a03296372cc29cc9e74bdad9491432600", "url": "https://api.github.com/repos/rust-lang/rust/commits/5378f48a03296372cc29cc9e74bdad9491432600", "html_url": "https://github.com/rust-lang/rust/commit/5378f48a03296372cc29cc9e74bdad9491432600"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "4d5be62b048c1861066489035a1a2d84b6097798", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "patch": "@@ -1971,7 +1971,7 @@ fn declare_generic_glue(&@local_ctxt cx,\n         fn_nm = mangle_internal_name_by_seq(cx.ccx,\n                                             \"glue_\" + name);\n     }\n-    auto llfn = decl_fastcall_fn(cx.ccx.llmod, fn_nm, llfnty);\n+    auto llfn = decl_cdecl_fn(cx.ccx.llmod, fn_nm, llfnty);\n     set_glue_inlining(cx, llfn, t);\n     ret llfn;\n }\n@@ -3232,11 +3232,11 @@ fn call_tydesc_glue_full(&@block_ctxt cx, ValueRef v,\n     auto llfnptr = cx.build.GEP(tydesc, [C_int(0), C_int(field)]);\n     auto llfn = cx.build.Load(llfnptr);\n \n-    cx.build.FastCall(llfn, [C_null(T_ptr(T_nil())),\n-                                cx.fcx.lltaskptr,\n-                                C_null(T_ptr(T_nil())),\n-                                lltydescs,\n-                                llrawptr]);\n+    cx.build.Call(llfn, [C_null(T_ptr(T_nil())),\n+                         cx.fcx.lltaskptr,\n+                         C_null(T_ptr(T_nil())),\n+                         lltydescs,\n+                         llrawptr]);\n }\n \n fn call_tydesc_glue(&@block_ctxt cx, ValueRef v,\n@@ -3311,7 +3311,7 @@ fn call_cmp_glue(&@block_ctxt cx,\n                                    llrawrhsptr,\n                                    llop];\n \n-    r.bcx.build.FastCall(llfn, llargs);\n+    r.bcx.build.Call(llfn, llargs);\n \n     ret res(r.bcx, r.bcx.build.Load(llcmpresultptr));\n }"}, {"sha": "5db1216c1021e499440674dc37b700152bda93b0", "filename": "src/rt/rust_internal.h", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6/src%2Frt%2Frust_internal.h", "raw_url": "https://github.com/rust-lang/rust/raw/ccd1bcf7a754a5437cd108bb6bb8a32848334fe6/src%2Frt%2Frust_internal.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_internal.h?ref=ccd1bcf7a754a5437cd108bb6bb8a32848334fe6", "patch": "@@ -206,11 +206,11 @@ struct rust_timer {\n \n #include \"rust_util.h\"\n \n-typedef void FASTCALL (glue_fn)(void *, rust_task *, void *,\n-                                const type_desc **, void *);\n-typedef void FASTCALL (cmp_glue_fn)(void *, rust_task *, void *,\n-                                    const type_desc **,\n-                                    void *, void *, int8_t);\n+typedef void CDECL (glue_fn)(void *, rust_task *, void *,\n+                             const type_desc **, void *);\n+typedef void CDECL (cmp_glue_fn)(void *, rust_task *, void *,\n+                                 const type_desc **,\n+                                 void *, void *, int8_t);\n \n \n struct type_desc {"}]}