{"sha": "b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzYWE1ZTM4MTA3ZGY5ZTliMTZhMGEwMDNhZmFhM2QxMmQ4MGJiODY=", "commit": {"author": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-05-28T11:02:02Z"}, "committer": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-05-28T11:02:02Z"}, "message": "add str to common types", "tree": {"sha": "f3cd5cab9e133e58651554dbd41d4ca7518e1cc1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3cd5cab9e133e58651554dbd41d4ca7518e1cc1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "html_url": "https://github.com/rust-lang/rust/commit/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45127211566c53bac386b66909a830649182ab7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/45127211566c53bac386b66909a830649182ab7a", "html_url": "https://github.com/rust-lang/rust/commit/45127211566c53bac386b66909a830649182ab7a"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "f288d1b84e6d93f0e297e049879463652a95018e", "filename": "src/librustc_codegen_llvm/common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fcommon.rs?ref=b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "patch": "@@ -206,7 +206,7 @@ impl ConstMethods<'tcx> for CodegenCx<'ll, 'tcx> {\n         let len = s.as_str().len();\n         let cs = consts::ptrcast(\n             self.const_cstr(s, false),\n-            self.type_ptr_to(self.layout_of(self.tcx.mk_str()).llvm_type(self)),\n+            self.type_ptr_to(self.layout_of(self.tcx.types.str_).llvm_type(self)),\n         );\n         (cs, self.const_usize(len as u64))\n     }"}, {"sha": "1d2a98f45db8c3c73ed77b955c02a9ea5938f1cb", "filename": "src/librustc_middle/ty/context.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_middle%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_middle%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fcontext.rs?ref=b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "patch": "@@ -156,6 +156,7 @@ pub struct CommonTypes<'tcx> {\n     pub u128: Ty<'tcx>,\n     pub f32: Ty<'tcx>,\n     pub f64: Ty<'tcx>,\n+    pub str_: Ty<'tcx>,\n     pub never: Ty<'tcx>,\n     pub self_param: Ty<'tcx>,\n     pub err: Ty<'tcx>,\n@@ -832,6 +833,7 @@ impl<'tcx> CommonTypes<'tcx> {\n             u128: mk(Uint(ast::UintTy::U128)),\n             f32: mk(Float(ast::FloatTy::F32)),\n             f64: mk(Float(ast::FloatTy::F64)),\n+            str_: mk(Str),\n             self_param: mk(ty::Param(ty::ParamTy { index: 0, name: kw::SelfUpper })),\n \n             trait_object_dummy_self: mk(Infer(ty::FreshTy(0))),\n@@ -2121,14 +2123,9 @@ impl<'tcx> TyCtxt<'tcx> {\n         }\n     }\n \n-    #[inline]\n-    pub fn mk_str(self) -> Ty<'tcx> {\n-        self.mk_ty(Str)\n-    }\n-\n     #[inline]\n     pub fn mk_static_str(self) -> Ty<'tcx> {\n-        self.mk_imm_ref(self.lifetimes.re_static, self.mk_str())\n+        self.mk_imm_ref(self.lifetimes.re_static, self.types.str_)\n     }\n \n     #[inline]"}, {"sha": "c1fecfb239379e0e87f95f57879abff4a97d560d", "filename": "src/librustc_typeck/astconv.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_typeck%2Fastconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3aa5e38107df9e9b16a0a003afaa3d12d80bb86/src%2Flibrustc_typeck%2Fastconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fastconv.rs?ref=b3aa5e38107df9e9b16a0a003afaa3d12d80bb86", "patch": "@@ -2698,7 +2698,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                     hir::PrimTy::Int(it) => tcx.mk_mach_int(it),\n                     hir::PrimTy::Uint(uit) => tcx.mk_mach_uint(uit),\n                     hir::PrimTy::Float(ft) => tcx.mk_mach_float(ft),\n-                    hir::PrimTy::Str => tcx.mk_str(),\n+                    hir::PrimTy::Str => tcx.types.str_,\n                 }\n             }\n             Res::Err => {"}]}