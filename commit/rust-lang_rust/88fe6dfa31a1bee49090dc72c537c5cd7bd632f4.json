{"sha": "88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4ZmU2ZGZhMzFhMWJlZTQ5MDkwZGM3MmM1MzdjNWNkN2JkNjMyZjQ=", "commit": {"author": {"name": "Alexis Beingessner", "email": "a.beingessner@gmail.com", "date": "2014-07-31T01:31:34Z"}, "committer": {"name": "Alexis Beingessner", "email": "a.beingessner@gmail.com", "date": "2014-08-02T17:12:12Z"}, "message": "Add hide/show detail toggles to rustdoc\n\nAll doccomments are now collapsable via a nearby [-] button\nAdds [collapse all] and [expand all] buttons to the top of all api pages\nTweaks some layout to accomadate this", "tree": {"sha": "68192be7ef7f05468f20ffb2d300063fa63b25be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/68192be7ef7f05468f20ffb2d300063fa63b25be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "html_url": "https://github.com/rust-lang/rust/commit/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/comments", "author": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd1216a05403dd91b9c60c66418ab12555e923f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd1216a05403dd91b9c60c66418ab12555e923f5", "html_url": "https://github.com/rust-lang/rust/commit/cd1216a05403dd91b9c60c66418ab12555e923f5"}], "stats": {"total": 99, "additions": 96, "deletions": 3}, "files": [{"sha": "9a2031dc447bdabd77fae80ac2da1522a8b94913", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "patch": "@@ -1316,6 +1316,12 @@ impl<'a> fmt::Show for Item<'a> {\n             _ => {}\n         };\n \n+        try!(write!(fmt,\n+        r##\"<span id='render-detail'>\n+            <a id=\"collapse-all\" href=\"#\">[collapse all]</a>\n+            <a id=\"expand-all\" href=\"#\">[expand all]</a>\n+        </span>\"##));\n+\n         // Write `src` tag\n         //\n         // When this item is part of a `pub use` in a downstream crate, the"}, {"sha": "5349b4b33a6156469b884819dd6bff39f0c0766d", "filename": "src/librustdoc/html/static/main.css", "status": "modified", "additions": 39, "deletions": 3, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "raw_url": "https://github.com/rust-lang/rust/raw/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css?ref=88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "patch": "@@ -101,7 +101,7 @@ h3.impl, h3.method, h4.method {\n h3.impl, h3.method {\n     margin-top: 15px;\n }\n-h1, h2, h3, h4, section.sidebar, a.source, .search-input, .content table a {\n+h1, h2, h3, h4, section.sidebar, a.source, .search-input, .content table a, .collapse-toggle {\n     font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n }\n \n@@ -277,7 +277,10 @@ nav.sub {\n }\n .content .multi-column li { width: 100%; display: inline-block; }\n \n-.content .method { font-size: 1em; }\n+.content .method { \n+    font-size: 1em; \n+    position: relative;\n+}\n .content .methods .docblock { margin-left: 40px; }\n \n .content .impl-methods .docblock { margin-left: 40px; }\n@@ -405,7 +408,7 @@ h1 .stability {\n     padding: 4px 10px;\n }\n \n-.impl-methods .stability {\n+.impl-methods .stability, .methods .stability {\n     margin-right: 20px;\n }\n \n@@ -476,3 +479,36 @@ pre.rust a { transform: scaleX(-1); }\n         margin: 0 auto;\n     }\n }\n+\n+.collapse-toggle {\n+    font-weight: 100;\n+    position: absolute;\n+    left: 13px;\n+    color: #999;\n+    margin-top: 2px;\n+}\n+\n+.toggle-wrapper > .collapse-toggle {\n+    left: -24px;\n+    margin-top: 0px;\n+}\n+\n+.toggle-wrapper {\n+    position: relative;\n+}\n+\n+.toggle-wrapper.collapsed {\n+    height: 1em;\n+    transition: height .2s;\n+}\n+\n+.collapse-toggle > .inner {\n+    display: inline-block;\n+    width: 1ch;\n+    text-align: center;\n+}\n+\n+.toggle-label {\n+    color: #999;\n+    font-style: italic;\n+}"}, {"sha": "9b44dc63f383b889f1a6b095ca1d661276f90432", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/88fe6dfa31a1bee49090dc72c537c5cd7bd632f4/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=88fe6dfa31a1bee49090dc72c537c5cd7bd632f4", "patch": "@@ -730,4 +730,55 @@\n     if (query['gotosrc']) {\n         window.location = $('#src-' + query['gotosrc']).attr('href');\n     }\n+\n+    $(\"#expand-all\").on(\"click\", function() {\n+        $(\".docblock\").show();\n+        $(\".toggle-label\").hide();\n+        $(\".toggle-wrapper\").removeClass(\"collapsed\");\n+        $(\".collapse-toggle\").children(\".inner\").html(\"-\");\n+    });\n+\n+    $(\"#collapse-all\").on(\"click\", function() {\n+        $(\".docblock\").hide();\n+        $(\".toggle-label\").show();\n+        $(\".toggle-wrapper\").addClass(\"collapsed\");\n+        $(\".collapse-toggle\").children(\".inner\").html(\"+\");\n+    });\n+\n+    $(document).on(\"click\", \".collapse-toggle\", function() {\n+        var toggle = $(this);\n+        var relatedDoc = toggle.parent().next();\n+        if (relatedDoc.is(\".docblock\")) {\n+            if (relatedDoc.is(\":visible\")) {\n+                relatedDoc.slideUp({duration:'fast', easing:'linear'});\n+                toggle.parent(\".toggle-wrapper\").addClass(\"collapsed\");\n+                toggle.children(\".inner\").html(\"+\");\n+                toggle.children(\".toggle-label\").fadeIn();\n+            } else {\n+                relatedDoc.slideDown({duration:'fast', easing:'linear'});\n+                toggle.parent(\".toggle-wrapper\").removeClass(\"collapsed\");\n+                toggle.children(\".inner\").html(\"-\");\n+                toggle.children(\".toggle-label\").hide();\n+            }\n+        }\n+    });\n+\n+    $(function() {\n+        var toggle = \"<a href='javascript:void(0)'\"\n+            + \"class='collapse-toggle'>[<span class='inner'>-</span>]</a>\";\n+\n+        $(\".method\").each(function() {\n+           if ($(this).next().is(\".docblock\")) {\n+               $(this).children().first().after(toggle);\n+           }\n+        });\n+\n+        var mainToggle = $(toggle);\n+        mainToggle.append(\"<span class='toggle-label' style='display:none'>\"\n+            + \"&nbsp;Expand&nbsp;description</span></a>\")\n+        var wrapper =  $(\"<div class='toggle-wrapper'>\");\n+        wrapper.append(mainToggle);\n+        $(\"#main > .docblock\").before(wrapper);\n+    });\n+\n }());"}]}