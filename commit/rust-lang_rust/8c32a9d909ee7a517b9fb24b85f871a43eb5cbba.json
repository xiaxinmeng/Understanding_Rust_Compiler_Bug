{"sha": "8c32a9d909ee7a517b9fb24b85f871a43eb5cbba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMzJhOWQ5MDllZTdhNTE3YjlmYjI0Yjg1Zjg3MWE0M2ViNWNiYmE=", "commit": {"author": {"name": "Tibo Delor", "email": "delor.thibault@gmail.com", "date": "2018-06-09T14:25:06Z"}, "committer": {"name": "Tibo Delor", "email": "delor.thibault@gmail.com", "date": "2018-06-09T14:25:06Z"}, "message": "Parse Error return an Error instead of a successful empty response", "tree": {"sha": "59c596502e1e76dbe937271f715ca43646740f2f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59c596502e1e76dbe937271f715ca43646740f2f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEElri4er6EfFqe1VRMLfdMrGi+j80FAlsb40UACgkQLfdMrGi+\nj83IjwgAlThUqRwWxufk4gh7qGgrvb5wVT2ccAKQPIMBfRjbqcB38Ir5DpvaAtzv\npSRYoH57hrMRD7AjrXfkNBFbPK3VRJ963U+8GvChZjw9bjfBVtlwGAqaksUM0kkm\n1fsELGWcZPimMgnUq87HDscw418Ip8ctKk+YZDrrzp4oxn680S6xhmw39Wo396C6\n+7g19rU7eFxhKFleR10XAqfm8rAYYzO1ETNbxuQKs5Kb3gKE74uoscIN3SIX2oHN\ntISujocmk5k4ixxKNZdz7BVHFmResmXF1kxsKSdepMRTJzMqNg5MXth/LJWNsjsN\nfHHxm5Hp2L8R8O22HV3Ti4k3rgjTaw==\n=P9j7\n-----END PGP SIGNATURE-----", "payload": "tree 59c596502e1e76dbe937271f715ca43646740f2f\nparent 34067a1c4c7dd2751270bba13712bdef36295643\nauthor Tibo Delor <delor.thibault@gmail.com> 1528554306 +1000\ncommitter Tibo Delor <delor.thibault@gmail.com> 1528554306 +1000\n\nParse Error return an Error instead of a successful empty response\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba", "html_url": "https://github.com/rust-lang/rust/commit/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba/comments", "author": {"login": "t-botz", "id": 693797, "node_id": "MDQ6VXNlcjY5Mzc5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/693797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-botz", "html_url": "https://github.com/t-botz", "followers_url": "https://api.github.com/users/t-botz/followers", "following_url": "https://api.github.com/users/t-botz/following{/other_user}", "gists_url": "https://api.github.com/users/t-botz/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-botz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-botz/subscriptions", "organizations_url": "https://api.github.com/users/t-botz/orgs", "repos_url": "https://api.github.com/users/t-botz/repos", "events_url": "https://api.github.com/users/t-botz/events{/privacy}", "received_events_url": "https://api.github.com/users/t-botz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "t-botz", "id": 693797, "node_id": "MDQ6VXNlcjY5Mzc5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/693797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-botz", "html_url": "https://github.com/t-botz", "followers_url": "https://api.github.com/users/t-botz/followers", "following_url": "https://api.github.com/users/t-botz/following{/other_user}", "gists_url": "https://api.github.com/users/t-botz/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-botz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-botz/subscriptions", "organizations_url": "https://api.github.com/users/t-botz/orgs", "repos_url": "https://api.github.com/users/t-botz/repos", "events_url": "https://api.github.com/users/t-botz/events{/privacy}", "received_events_url": "https://api.github.com/users/t-botz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34067a1c4c7dd2751270bba13712bdef36295643", "url": "https://api.github.com/repos/rust-lang/rust/commits/34067a1c4c7dd2751270bba13712bdef36295643", "html_url": "https://github.com/rust-lang/rust/commit/34067a1c4c7dd2751270bba13712bdef36295643"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "40ecd71fdf3900df1fc07dfafce0467719c8f76b", "filename": "src/lib.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c32a9d909ee7a517b9fb24b85f871a43eb5cbba/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=8c32a9d909ee7a517b9fb24b85f871a43eb5cbba", "patch": "@@ -132,6 +132,9 @@ pub enum ErrorKind {\n     /// An io error during reading or writing.\n     #[fail(display = \"io error: {}\", _0)]\n     IoError(io::Error),\n+    /// Parse error occured when parsing the Input.\n+    #[fail(display = \"parse error\")]\n+    ParseError,\n     /// The user mandated a version and the current version of Rustfmt does not\n     /// satisfy that requirement.\n     #[fail(display = \"Version mismatch\")]\n@@ -172,9 +175,10 @@ impl FormattingError {\n     }\n     fn msg_prefix(&self) -> &str {\n         match self.kind {\n-            ErrorKind::LineOverflow(..) | ErrorKind::TrailingWhitespace | ErrorKind::IoError(_) => {\n-                \"internal error:\"\n-            }\n+            ErrorKind::LineOverflow(..)\n+            | ErrorKind::TrailingWhitespace\n+            | ErrorKind::IoError(_)\n+            | ErrorKind::ParseError => \"internal error:\",\n             ErrorKind::LicenseCheck | ErrorKind::BadAttr | ErrorKind::VersionMismatch => \"error:\",\n             ErrorKind::BadIssue(_) | ErrorKind::DeprecatedAttr => \"warning:\",\n         }\n@@ -844,7 +848,7 @@ fn format_input_inner<T: Write>(\n                 ParseError::Recovered => {}\n             }\n             summary.add_parsing_error();\n-            return Ok((summary, FileMap::new(), FormatReport::new()));\n+            return Err((ErrorKind::ParseError, summary));\n         }\n     };\n "}]}