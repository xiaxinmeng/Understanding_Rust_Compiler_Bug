{"sha": "e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8", "node_id": "C_kwDOAAsO6NoAKGU3ODFhNmZmM2IzOWIwYmFmZjZkMWJhZTZhMjQyMmNjMzljYjYyZDg", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-02-21T08:49:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-21T08:49:59Z"}, "message": "Rollup merge of #108105 - majaha:patch-1, r=cuviper\n\nExplain the default panic hook better\n\nThis changes the documentation of `std::panic::set_hook` and `take_hook` to explain how the default panic hook works. In particular the fact that `take_hook` registers the default hook, rather than no hook at all, was missing from the docs.\n\nI also reworded a few things for clarity.", "tree": {"sha": "6b87cd40a009165b309d71c737a9a4368cf50ea7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b87cd40a009165b309d71c737a9a4368cf50ea7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj9IW3CRBK7hj4Ov3rIwAAWOAIAEvrGKb8OovcP7Z1VYIZP7uC\n9NRnTCNIIncMecCWj505SaQoWNpv20G1OVMlPBBR6AcFYVmKKmzIXmetTs9AC3Lg\nj5Ra7Ma0J9GAtk27NmHZE/iDpGjjt7m+RJll1ifNbfdyByunSLTrVMFVDH6zrqKQ\nZVFEx3fkOWRQSyUY0rARY8QiNy91G+v8TG/biPMFwmVACrjc8cg+eMF4NlgFfu1p\nUI8LSHhhlGl8+uO+eynFRmabB6bNhjta8oELgFLp7iqyaXhXe/kv3HNRiSlpIs6Q\nn1ccAFt3uefjxwb3MU4epAZxYAjXQmJG41ts8XpzYntqRX0JnZVrbs3/MTH2C/Y=\n=2k6F\n-----END PGP SIGNATURE-----\n", "payload": "tree 6b87cd40a009165b309d71c737a9a4368cf50ea7\nparent 4dea3a295f99f166472ddec78ed9d590900436ff\nparent ec9a4ce19e6f1a6c760633bcc8826d47cba27f22\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1676969399 +0530\ncommitter GitHub <noreply@github.com> 1676969399 +0530\n\nRollup merge of #108105 - majaha:patch-1, r=cuviper\n\nExplain the default panic hook better\n\nThis changes the documentation of `std::panic::set_hook` and `take_hook` to explain how the default panic hook works. In particular the fact that `take_hook` registers the default hook, rather than no hook at all, was missing from the docs.\n\nI also reworded a few things for clarity.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8", "html_url": "https://github.com/rust-lang/rust/commit/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4dea3a295f99f166472ddec78ed9d590900436ff", "url": "https://api.github.com/repos/rust-lang/rust/commits/4dea3a295f99f166472ddec78ed9d590900436ff", "html_url": "https://github.com/rust-lang/rust/commit/4dea3a295f99f166472ddec78ed9d590900436ff"}, {"sha": "ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "html_url": "https://github.com/rust-lang/rust/commit/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "e59f32af77df8bdf2428e2d348707154f0220431", "filename": "library/std/src/panicking.rs", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8/library%2Fstd%2Fsrc%2Fpanicking.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8/library%2Fstd%2Fsrc%2Fpanicking.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpanicking.rs?ref=e781a6ff3b39b0baff6d1bae6a2422cc39cb62d8", "patch": "@@ -95,13 +95,16 @@ impl Default for Hook {\n \n static HOOK: RwLock<Hook> = RwLock::new(Hook::Default);\n \n-/// Registers a custom panic hook, replacing any that was previously registered.\n+/// Registers a custom panic hook, replacing the previously registered hook.\n ///\n /// The panic hook is invoked when a thread panics, but before the panic runtime\n /// is invoked. As such, the hook will run with both the aborting and unwinding\n-/// runtimes. The default hook prints a message to standard error and generates\n-/// a backtrace if requested, but this behavior can be customized with the\n-/// `set_hook` and [`take_hook`] functions.\n+/// runtimes.\n+///\n+/// The default hook, which is registered at startup, prints a message to standard error and\n+/// generates a backtrace if requested. This behavior can be customized using the `set_hook` function.\n+/// The current hook can be retrieved while reinstating the default hook with the [`take_hook`]\n+/// function.\n ///\n /// [`take_hook`]: ./fn.take_hook.html\n ///\n@@ -143,13 +146,14 @@ pub fn set_hook(hook: Box<dyn Fn(&PanicInfo<'_>) + 'static + Sync + Send>) {\n     drop(old);\n }\n \n-/// Unregisters the current panic hook, returning it.\n+/// Unregisters the current panic hook and returns it, registering the default hook\n+/// in its place.\n ///\n /// *See also the function [`set_hook`].*\n ///\n /// [`set_hook`]: ./fn.set_hook.html\n ///\n-/// If no custom hook is registered, the default hook will be returned.\n+/// If the default hook is registered it will be returned, but remain registered.\n ///\n /// # Panics\n ///"}]}