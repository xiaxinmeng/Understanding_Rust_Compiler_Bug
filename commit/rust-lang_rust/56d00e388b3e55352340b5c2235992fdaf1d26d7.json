{"sha": "56d00e388b3e55352340b5c2235992fdaf1d26d7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2ZDAwZTM4OGIzZTU1MzUyMzQwYjVjMjIzNTk5MmZkYWYxZDI2ZDc=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-03T12:27:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-03T12:27:00Z"}, "message": "Rollup merge of #64056 - estebank:arbitrary-self-types, r=Centril\n\nAccount for arbitrary self types in E0599\n\nFix https://github.com/rust-lang/rust/issues/62373", "tree": {"sha": "ec0d7e234c2a9b9868014585c528d901a6065b1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec0d7e234c2a9b9868014585c528d901a6065b1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56d00e388b3e55352340b5c2235992fdaf1d26d7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdblwUCRBK7hj4Ov3rIwAAdHIIAEQ5fdN2daUWGPrIg5/o8ebA\ntPg/w7/9b7wNAI9eg80hWyuRxh0aocKOmJT9U/nTIzCezjXdyVEX/rZMDI/GO7+N\ni+T8fjDb0c1IVgWaGTqBYobenjagmeBpTTW77ueP+srICkENW65K96iHaWTkbFNi\nUSruZlH5qN2mwkPjr2l9S7EbLTDcyW1fz5LedDhWsRWdS2Zg0dMrBeGyGexukIwE\nNYCV2w9GSk3udDZSqLkFyZByK1Aq9IdD7m7TzX7E1dDd8IHIffT+ShebgaMmxmvi\n7rrMvpSedHnwb9vEJKkoLAgBwqhd/lHUEQdH7E+MXzSa9jSKEeR8B5FIg4dKsTc=\n=LlY+\n-----END PGP SIGNATURE-----\n", "payload": "tree ec0d7e234c2a9b9868014585c528d901a6065b1c\nparent 4245be7fb3d7a045fc1798df5cc64878a2b38aa6\nparent 141f5a7558289acb6c7aaf9c6500eb9f6dbeec1a\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1567513620 +0200\ncommitter GitHub <noreply@github.com> 1567513620 +0200\n\nRollup merge of #64056 - estebank:arbitrary-self-types, r=Centril\n\nAccount for arbitrary self types in E0599\n\nFix https://github.com/rust-lang/rust/issues/62373\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56d00e388b3e55352340b5c2235992fdaf1d26d7", "html_url": "https://github.com/rust-lang/rust/commit/56d00e388b3e55352340b5c2235992fdaf1d26d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56d00e388b3e55352340b5c2235992fdaf1d26d7/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4245be7fb3d7a045fc1798df5cc64878a2b38aa6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4245be7fb3d7a045fc1798df5cc64878a2b38aa6", "html_url": "https://github.com/rust-lang/rust/commit/4245be7fb3d7a045fc1798df5cc64878a2b38aa6"}, {"sha": "141f5a7558289acb6c7aaf9c6500eb9f6dbeec1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/141f5a7558289acb6c7aaf9c6500eb9f6dbeec1a", "html_url": "https://github.com/rust-lang/rust/commit/141f5a7558289acb6c7aaf9c6500eb9f6dbeec1a"}], "stats": {"total": 174, "additions": 148, "deletions": 26}, "files": [{"sha": "17c9e520bcea284c2d385eb71649003555f70f60", "filename": "src/librustc/ty/context.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fcontext.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -2402,6 +2402,12 @@ impl<'tcx> TyCtxt<'tcx> {\n         self.mk_generic_adt(def_id, ty)\n     }\n \n+    #[inline]\n+    pub fn mk_lang_item(self, ty: Ty<'tcx>, item: lang_items::LangItem)  -> Ty<'tcx> {\n+        let def_id = self.require_lang_item(item, None);\n+        self.mk_generic_adt(def_id, ty)\n+    }\n+\n     #[inline]\n     pub fn mk_maybe_uninit(self, ty: Ty<'tcx>) -> Ty<'tcx> {\n         let def_id = self.require_lang_item(lang_items::MaybeUninitLangItem, None);"}, {"sha": "fbaa9904d8303c0386954e2de62a0e31ab5bebc6", "filename": "src/librustc_typeck/check/expr.rs", "status": "modified", "additions": 68, "deletions": 20, "changes": 88, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fexpr.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -12,7 +12,7 @@ use crate::check::fatally_break_rust;\n use crate::check::report_unexpected_variant_res;\n use crate::check::Needs;\n use crate::check::TupleArgumentsFlag::DontTupleArguments;\n-use crate::check::method::SelfSource;\n+use crate::check::method::{probe, SelfSource, MethodError};\n use crate::util::common::ErrorReported;\n use crate::util::nodemap::FxHashMap;\n use crate::astconv::AstConv as _;\n@@ -29,6 +29,7 @@ use rustc::hir::def::{CtorKind, Res, DefKind};\n use rustc::hir::ptr::P;\n use rustc::infer;\n use rustc::infer::type_variable::{TypeVariableOrigin, TypeVariableOriginKind};\n+use rustc::middle::lang_items;\n use rustc::mir::interpret::GlobalId;\n use rustc::ty;\n use rustc::ty::adjustment::{\n@@ -775,35 +776,80 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         // no need to check for bot/err -- callee does that\n         let rcvr_t = self.structurally_resolved_type(args[0].span, rcvr_t);\n \n-        let method = match self.lookup_method(rcvr_t,\n-                                              segment,\n-                                              span,\n-                                              expr,\n-                                              rcvr) {\n+        let method = match self.lookup_method(rcvr_t, segment, span, expr, rcvr) {\n             Ok(method) => {\n                 self.write_method_call(expr.hir_id, method);\n                 Ok(method)\n             }\n             Err(error) => {\n                 if segment.ident.name != kw::Invalid {\n-                    self.report_method_error(span,\n-                                             rcvr_t,\n-                                             segment.ident,\n-                                             SelfSource::MethodCall(rcvr),\n-                                             error,\n-                                             Some(args));\n+                    self.report_extended_method_error(segment, span, args, rcvr_t, error);\n                 }\n                 Err(())\n             }\n         };\n \n         // Call the generic checker.\n-        self.check_method_argument_types(span,\n-                                         expr.span,\n-                                         method,\n-                                         &args[1..],\n-                                         DontTupleArguments,\n-                                         expected)\n+        self.check_method_argument_types(\n+            span,\n+            expr.span,\n+            method,\n+            &args[1..],\n+            DontTupleArguments,\n+            expected,\n+        )\n+    }\n+\n+    fn report_extended_method_error(\n+        &self,\n+        segment: &hir::PathSegment,\n+        span: Span,\n+        args: &'tcx [hir::Expr],\n+        rcvr_t: Ty<'tcx>,\n+        error: MethodError<'tcx>\n+    ) {\n+        let rcvr = &args[0];\n+        let try_alt_rcvr = |err: &mut DiagnosticBuilder<'_>, new_rcvr_t| {\n+            if let Ok(pick) = self.lookup_probe(\n+                span,\n+                segment.ident,\n+                new_rcvr_t,\n+                rcvr,\n+                probe::ProbeScope::AllTraits,\n+            ) {\n+                err.span_label(\n+                    pick.item.ident.span,\n+                    &format!(\"the method is available for `{}` here\", new_rcvr_t),\n+                );\n+            }\n+        };\n+\n+        if let Some(mut err) = self.report_method_error(\n+            span,\n+            rcvr_t,\n+            segment.ident,\n+            SelfSource::MethodCall(rcvr),\n+            error,\n+            Some(args),\n+        ) {\n+            if let ty::Adt(..) = rcvr_t.sty {\n+                // Try alternative arbitrary self types that could fulfill this call.\n+                // FIXME: probe for all types that *could* be arbitrary self-types, not\n+                // just this whitelist.\n+                let box_rcvr_t = self.tcx.mk_box(rcvr_t);\n+                try_alt_rcvr(&mut err, box_rcvr_t);\n+                let pin_rcvr_t = self.tcx.mk_lang_item(\n+                    rcvr_t,\n+                    lang_items::PinTypeLangItem,\n+                );\n+                try_alt_rcvr(&mut err, pin_rcvr_t);\n+                let arc_rcvr_t = self.tcx.mk_lang_item(rcvr_t, lang_items::Arc);\n+                try_alt_rcvr(&mut err, arc_rcvr_t);\n+                let rc_rcvr_t = self.tcx.mk_lang_item(rcvr_t, lang_items::Rc);\n+                try_alt_rcvr(&mut err, rc_rcvr_t);\n+            }\n+            err.emit();\n+        }\n     }\n \n     fn check_expr_cast(\n@@ -1466,8 +1512,10 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             let struct_variant_def = def.non_enum_variant();\n             let field_names = self.available_field_names(struct_variant_def);\n             if !field_names.is_empty() {\n-                err.note(&format!(\"available fields are: {}\",\n-                                    self.name_series_display(field_names)));\n+                err.note(&format!(\n+                    \"available fields are: {}\",\n+                    self.name_series_display(field_names),\n+                ));\n             }\n         }\n     }"}, {"sha": "1509c0f8a219601d66cc51f8d021f2c6f0c56a48", "filename": "src/librustc_typeck/check/method/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fmod.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -245,7 +245,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         Ok(result.callee)\n     }\n \n-    fn lookup_probe(\n+    pub fn lookup_probe(\n         &self,\n         span: Span,\n         method_name: ast::Ident,"}, {"sha": "72e6f5971596092ab92b2fa39819ee86265089eb", "filename": "src/librustc_typeck/check/method/suggest.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fsuggest.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -69,12 +69,12 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         source: SelfSource<'b>,\n         error: MethodError<'tcx>,\n         args: Option<&'tcx [hir::Expr]>,\n-    ) {\n+    ) -> Option<DiagnosticBuilder<'_>> {\n         let orig_span = span;\n         let mut span = span;\n         // Avoid suggestions when we don't know what's going on.\n         if rcvr_ty.references_error() {\n-            return;\n+            return None;\n         }\n \n         let print_disambiguation_help = |\n@@ -314,7 +314,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                             _ => {}\n                         }\n                         err.emit();\n-                        return;\n+                        return None;\n                     } else {\n                         span = item_name.span;\n                         let mut err = struct_span_err!(\n@@ -529,7 +529,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     );\n                 }\n \n-                err.emit();\n+                return Some(err);\n             }\n \n             MethodError::Ambiguity(sources) => {\n@@ -573,6 +573,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 bug!(\"no return type expectations but got BadReturnType\")\n             }\n         }\n+        None\n     }\n \n     fn suggest_use_candidates(&self,"}, {"sha": "16903304a142782a8d4f51a86174491ab0ac2b88", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -3580,7 +3580,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     SelfSource::QPath(qself),\n                     error,\n                     None,\n-                );\n+                ).map(|mut e| e.emit());\n             }\n             result\n         });"}, {"sha": "002b60f9f258dd41ee32f038363a4bb9efbe0db5", "filename": "src/test/ui/impl-trait/no-method-suggested-traits.stderr", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fno-method-suggested-traits.stderr?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -49,6 +49,14 @@ LL | use foo::Bar;\n error[E0599]: no method named `method` found for type `std::rc::Rc<&mut std::boxed::Box<&char>>` in the current scope\n   --> $DIR/no-method-suggested-traits.rs:32:43\n    |\n+LL |         fn method(&self) {}\n+   |            ------\n+   |            |\n+   |            the method is available for `std::boxed::Box<std::rc::Rc<&mut std::boxed::Box<&char>>>` here\n+   |            the method is available for `std::pin::Pin<std::rc::Rc<&mut std::boxed::Box<&char>>>` here\n+   |            the method is available for `std::sync::Arc<std::rc::Rc<&mut std::boxed::Box<&char>>>` here\n+   |            the method is available for `std::rc::Rc<std::rc::Rc<&mut std::boxed::Box<&char>>>` here\n+...\n LL |     std::rc::Rc::new(&mut Box::new(&'a')).method();\n    |                                           ^^^^^^\n    |"}, {"sha": "0f7deeacad29278c31be5a36d1e6ceaefafb9d73", "filename": "src/test/ui/self/point-at-arbitrary-self-type-method.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -0,0 +1,9 @@\n+struct A;\n+\n+impl A {\n+    fn foo(self: Box<Self>) {}\n+}\n+\n+fn main() {\n+    A.foo(); //~ ERROR E0599\n+}"}, {"sha": "06dad7caa6735eb99a9bf19f1e578ae2f0008dcb", "filename": "src/test/ui/self/point-at-arbitrary-self-type-method.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-method.stderr?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -0,0 +1,15 @@\n+error[E0599]: no method named `foo` found for type `A` in the current scope\n+  --> $DIR/point-at-arbitrary-self-type-method.rs:8:7\n+   |\n+LL | struct A;\n+   | --------- method `foo` not found for this\n+...\n+LL |     fn foo(self: Box<Self>) {}\n+   |        --- the method is available for `std::boxed::Box<A>` here\n+...\n+LL |     A.foo();\n+   |       ^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0599`."}, {"sha": "53d992771186f152d30e9e422902a4ec728b04d7", "filename": "src/test/ui/self/point-at-arbitrary-self-type-trait-method.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.rs?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -0,0 +1,10 @@\n+trait B { fn foo(self: Box<Self>); }\n+struct A;\n+\n+impl B for A {\n+    fn foo(self: Box<Self>) {}\n+}\n+\n+fn main() {\n+    A.foo() //~ ERROR E0599\n+}"}, {"sha": "90cd3b807458014d8acc1d724c1d92775e439f09", "filename": "src/test/ui/self/point-at-arbitrary-self-type-trait-method.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Fpoint-at-arbitrary-self-type-trait-method.stderr?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -0,0 +1,18 @@\n+error[E0599]: no method named `foo` found for type `A` in the current scope\n+  --> $DIR/point-at-arbitrary-self-type-trait-method.rs:9:7\n+   |\n+LL | trait B { fn foo(self: Box<Self>); }\n+   |              --- the method is available for `std::boxed::Box<A>` here\n+LL | struct A;\n+   | --------- method `foo` not found for this\n+...\n+LL |     A.foo()\n+   |       ^^^\n+   |\n+   = help: items from traits can only be used if the trait is implemented and in scope\n+   = note: the following trait defines an item `foo`, perhaps you need to implement it:\n+           candidate #1: `B`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0599`."}, {"sha": "ce2919c8e77417c9eb0e000b62709679bc14c3b7", "filename": "src/test/ui/traits/trait-item-privacy.stderr", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Ftraits%2Ftrait-item-privacy.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/56d00e388b3e55352340b5c2235992fdaf1d26d7/src%2Ftest%2Fui%2Ftraits%2Ftrait-item-privacy.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Ftrait-item-privacy.stderr?ref=56d00e388b3e55352340b5c2235992fdaf1d26d7", "patch": "@@ -17,6 +17,13 @@ error[E0599]: no method named `b` found for type `S` in the current scope\n LL | struct S;\n    | --------- method `b` not found for this\n ...\n+LL |         fn b(&self) { }\n+   |            -\n+   |            |\n+   |            the method is available for `std::boxed::Box<S>` here\n+   |            the method is available for `std::sync::Arc<S>` here\n+   |            the method is available for `std::rc::Rc<S>` here\n+...\n LL |     S.b();\n    |       ^\n    |"}]}