{"sha": "d95a6cf91189421cc3174d10aaa910c7376529b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5NWE2Y2Y5MTE4OTQyMWNjMzE3NGQxMGFhYTkxMGM3Mzc2NTI5Yjg=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-05-01T05:11:44Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-05-01T05:13:53Z"}, "message": "Add support for --test-args to cargotest\n\nThis allows running a single test without having to wait for all tests\nto complete.", "tree": {"sha": "a00be62ba849b74286190cb3aba7ed220c0224b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a00be62ba849b74286190cb3aba7ed220c0224b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d95a6cf91189421cc3174d10aaa910c7376529b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d95a6cf91189421cc3174d10aaa910c7376529b8", "html_url": "https://github.com/rust-lang/rust/commit/d95a6cf91189421cc3174d10aaa910c7376529b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d95a6cf91189421cc3174d10aaa910c7376529b8/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b52769b804a12b7045ee1bce893a64045cdb974a", "url": "https://api.github.com/repos/rust-lang/rust/commits/b52769b804a12b7045ee1bce893a64045cdb974a", "html_url": "https://github.com/rust-lang/rust/commit/b52769b804a12b7045ee1bce893a64045cdb974a"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "814a591b13738f0ba64ce2d069dddde74e20025e", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d95a6cf91189421cc3174d10aaa910c7376529b8/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d95a6cf91189421cc3174d10aaa910c7376529b8/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=d95a6cf91189421cc3174d10aaa910c7376529b8", "patch": "@@ -183,6 +183,7 @@ impl Step for Cargotest {\n             builder,\n             cmd.arg(&cargo)\n                 .arg(&out_dir)\n+                .args(builder.config.cmd.test_args())\n                 .env(\"RUSTC\", builder.rustc(compiler))\n                 .env(\"RUSTDOC\", builder.rustdoc(compiler)),\n         );"}, {"sha": "54ff38e39dbe43af7c1427503481214f6dd72762", "filename": "src/tools/cargotest/main.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d95a6cf91189421cc3174d10aaa910c7376529b8/src%2Ftools%2Fcargotest%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d95a6cf91189421cc3174d10aaa910c7376529b8/src%2Ftools%2Fcargotest%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcargotest%2Fmain.rs?ref=d95a6cf91189421cc3174d10aaa910c7376529b8", "patch": "@@ -85,7 +85,9 @@ fn main() {\n     let cargo = &Path::new(cargo);\n \n     for test in TEST_REPOS.iter().rev() {\n-        test_repo(cargo, out_dir, test);\n+        if args[3..].is_empty() || args[3..].iter().any(|s| s.contains(test.name)) {\n+            test_repo(cargo, out_dir, test);\n+        }\n     }\n }\n "}]}