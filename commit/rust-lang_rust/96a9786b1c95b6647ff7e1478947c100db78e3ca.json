{"sha": "96a9786b1c95b6647ff7e1478947c100db78e3ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2YTk3ODZiMWM5NWI2NjQ3ZmY3ZTE0Nzg5NDdjMTAwZGI3OGUzY2E=", "commit": {"author": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-06-20T20:32:32Z"}, "committer": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-06-20T20:32:32Z"}, "message": "Fixed broken deploy script due to multiline configuration docs", "tree": {"sha": "de9ecfb5df2ea4cfa9e76168cc5123bf696c05df", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de9ecfb5df2ea4cfa9e76168cc5123bf696c05df"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96a9786b1c95b6647ff7e1478947c100db78e3ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96a9786b1c95b6647ff7e1478947c100db78e3ca", "html_url": "https://github.com/rust-lang/rust/commit/96a9786b1c95b6647ff7e1478947c100db78e3ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96a9786b1c95b6647ff7e1478947c100db78e3ca/comments", "author": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3120b09151242a2aaf3f5fdf36e6f98e5f6236cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/3120b09151242a2aaf3f5fdf36e6f98e5f6236cc", "html_url": "https://github.com/rust-lang/rust/commit/3120b09151242a2aaf3f5fdf36e6f98e5f6236cc"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "2f8064499fd793f0e6a19c82dcedc870c90aef0f", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/96a9786b1c95b6647ff7e1478947c100db78e3ca/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a9786b1c95b6647ff7e1478947c100db78e3ca/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=96a9786b1c95b6647ff7e1478947c100db78e3ca", "patch": "@@ -24,15 +24,18 @@ impl TryConf {\n     }\n }\n \n+/// Note that the configuration parsing currently doesn't support documentation that will\n+/// that spans over several lines. This will be possible with the new implementation\n+/// See (rust-clippy#7172)\n macro_rules! define_Conf {\n     ($(\n-        $(#[doc = $doc:literal])*\n+        #[doc = $doc:literal]\n         $(#[conf_deprecated($dep:literal)])?\n         ($name:ident: $ty:ty = $default:expr),\n     )*) => {\n         /// Clippy lint configuration\n         pub struct Conf {\n-            $($(#[doc = $doc])* pub $name: $ty,)*\n+            $(#[doc = $doc] pub $name: $ty,)*\n         }\n \n         mod defaults {\n@@ -109,7 +112,7 @@ macro_rules! define_Conf {\n                                 stringify!($name),\n                                 stringify!($ty),\n                                 format!(\"{:?}\", super::defaults::$name()),\n-                                concat!($($doc,)*),\n+                                $doc,\n                                 deprecation_reason,\n                             )\n                         },\n@@ -198,11 +201,7 @@ define_Conf! {\n     (upper_case_acronyms_aggressive: bool = false),\n     /// Lint: _CARGO_COMMON_METADATA. For internal testing only, ignores the current `publish` settings in the Cargo manifest.\n     (cargo_ignore_publish: bool = false),\n-    /// Lint: NONSTANDARD_MACRO_BRACES. Enforce the named macros always use the braces specified.\n-    ///\n-    /// A `MacroMatcher` can be added like so `{ name = \"macro_name\", brace = \"(\" }`.\n-    /// If the macro is could be used with a full path two `MacroMatcher`s have to be added one\n-    /// with the full path `crate_name::macro_name` and one with just the macro name.\n+    /// Lint: NONSTANDARD_MACRO_BRACES. Enforce the named macros always use the braces specified. <br> A `MacroMatcher` can be added like so `{ name = \"macro_name\", brace = \"(\" }`. If the macro is could be used with a full path two `MacroMatcher`s have to be added one with the full path `crate_name::macro_name` and one with just the macro name.\n     (standard_macro_braces: Vec<crate::nonstandard_macro_braces::MacroMatcher> = Vec::new()),\n }\n "}, {"sha": "3b6e8c372ede6f0cd6ad4a050a30f951d39fc019", "filename": "util/lintlib.py", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/96a9786b1c95b6647ff7e1478947c100db78e3ca/util%2Flintlib.py", "raw_url": "https://github.com/rust-lang/rust/raw/96a9786b1c95b6647ff7e1478947c100db78e3ca/util%2Flintlib.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Flintlib.py?ref=96a9786b1c95b6647ff7e1478947c100db78e3ca", "patch": "@@ -12,7 +12,7 @@\n \n lintname_re = re.compile(r'''pub\\s+([A-Z_][A-Z_0-9]*)''')\n group_re = re.compile(r'''\\s*([a-z_][a-z_0-9]+)''')\n-conf_re = re.compile(r'''define_Conf! {\\n([^}]*)\\n}''', re.MULTILINE)\n+conf_re = re.compile(r'''define_Conf! {\\n((?!\\n})[\\s\\S])*\\n}''', re.MULTILINE)\n confvar_re = re.compile(\n     r'''/// Lint: ([\\w,\\s]+)\\. (.*)\\n\\s*\\(([^:]+):\\s*([^\\s=]+)\\s*=\\s*([^\\.\\)]+).*\\),''', re.MULTILINE)\n comment_re = re.compile(r'''\\s*/// ?(.*)''')\n@@ -91,7 +91,7 @@ def parse_configs(path):\n         contents = fp.read()\n \n     match = re.search(conf_re, contents)\n-    confvars = re.findall(confvar_re, match.group(1))\n+    confvars = re.findall(confvar_re, match.group(0))\n \n     for (lints, doc, name, ty, default) in confvars:\n         for lint in lints.split(','):"}]}