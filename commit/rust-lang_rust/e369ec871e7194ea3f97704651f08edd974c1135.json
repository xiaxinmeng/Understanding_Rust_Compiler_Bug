{"sha": "e369ec871e7194ea3f97704651f08edd974c1135", "node_id": "C_kwDOAAsO6NoAKGUzNjllYzg3MWU3MTk0ZWEzZjk3NzA0NjUxZjA4ZWRkOTc0YzExMzU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-08-15T18:11:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-08-15T18:11:35Z"}, "message": "Rollup merge of #100458 - compiler-errors:fn-argument-span, r=estebank\n\nAdjust span of fn argument declaration\n\nSpan of a fn argument declaration goes from:\n\n```\nfn foo(i : i32 , ...)\n       ^^^^^^^^\n```\n\nto:\n\n```\nfn foo(i : i32 , ...)\n       ^^^^^^^\n```\n\nThat is, we don't include the extra spacing up to the trailing comma, which I think is more correct.\n\ncc https://github.com/rust-lang/rust/pull/99646#discussion_r944568074\nr? ``@estebank``\n\n---\n\nThe two tests that had dramatic changes in their rendering I think actually are improved, though they are kinda poor spans both before and after the changes. :shrug: Thoughts?", "tree": {"sha": "b1f1a4379634ecd230655296809e9038cf9350b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b1f1a4379634ecd230655296809e9038cf9350b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e369ec871e7194ea3f97704651f08edd974c1135", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi+oxXCRBK7hj4Ov3rIwAASw4IAE4W+rgCS+F6z1f3kodLuzLV\nUAqhNxbeLOhgEem/38s4E10q+mAKoe0iqhIOotijPFfyVEpnyUpJS0IDCCt95vWK\nXsGKafDLcBLQtEgd0hKas3dFVyjKQNCQjd6/6bVV8ZxhPTvvXye1Q6Hx8b/iWYAW\nM+QI5/LPMcy9gh0kOFI0qFtFByTbjsLXSeJ9uFHRguCcfYmJL2wDLn/32ytIpf5j\npSdPPZxVefvUzEmQLHphlMaOdo6zdBN2DsflQSJkBG2125VNF7AW4H4lJfPIyVYj\n3tsL6eEx3NSeQdpy93Y3XPQ/vfcp42eJSTngiQuLNJIHPlfC4mHD1xwctpoFZGQ=\n=aJ38\n-----END PGP SIGNATURE-----\n", "payload": "tree b1f1a4379634ecd230655296809e9038cf9350b7\nparent 3aa5734a2cf8d401ec7d194c87978f4a1231bb9d\nparent 9b0edd099dfe01b7e69140562cca3fe72ed445e9\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1660587095 +0200\ncommitter GitHub <noreply@github.com> 1660587095 +0200\n\nRollup merge of #100458 - compiler-errors:fn-argument-span, r=estebank\n\nAdjust span of fn argument declaration\n\nSpan of a fn argument declaration goes from:\n\n```\nfn foo(i : i32 , ...)\n       ^^^^^^^^\n```\n\nto:\n\n```\nfn foo(i : i32 , ...)\n       ^^^^^^^\n```\n\nThat is, we don't include the extra spacing up to the trailing comma, which I think is more correct.\n\ncc https://github.com/rust-lang/rust/pull/99646#discussion_r944568074\nr? ``@estebank``\n\n---\n\nThe two tests that had dramatic changes in their rendering I think actually are improved, though they are kinda poor spans both before and after the changes. :shrug: Thoughts?\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e369ec871e7194ea3f97704651f08edd974c1135", "html_url": "https://github.com/rust-lang/rust/commit/e369ec871e7194ea3f97704651f08edd974c1135", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e369ec871e7194ea3f97704651f08edd974c1135/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3aa5734a2cf8d401ec7d194c87978f4a1231bb9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3aa5734a2cf8d401ec7d194c87978f4a1231bb9d", "html_url": "https://github.com/rust-lang/rust/commit/3aa5734a2cf8d401ec7d194c87978f4a1231bb9d"}, {"sha": "9b0edd099dfe01b7e69140562cca3fe72ed445e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b0edd099dfe01b7e69140562cca3fe72ed445e9", "html_url": "https://github.com/rust-lang/rust/commit/9b0edd099dfe01b7e69140562cca3fe72ed445e9"}], "stats": {"total": 36, "additions": 15, "deletions": 21}, "files": [{"sha": "f3f070e6eb021675f7523cf3b8d52274a9ab3ce0", "filename": "compiler/rustc_parse/src/parser/item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e369ec871e7194ea3f97704651f08edd974c1135/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e369ec871e7194ea3f97704651f08edd974c1135/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs?ref=e369ec871e7194ea3f97704651f08edd974c1135", "patch": "@@ -2338,7 +2338,7 @@ impl<'a> Parser<'a> {\n                 }\n             };\n \n-            let span = lo.until(this.token.span);\n+            let span = lo.to(this.prev_token.span);\n \n             Ok((\n                 Param {"}, {"sha": "bf49e7444583b55eecb43ecd31e8dc544f657aaa", "filename": "src/test/ui/argument-suggestions/complex.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fargument-suggestions%2Fcomplex.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fargument-suggestions%2Fcomplex.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fargument-suggestions%2Fcomplex.stderr?ref=e369ec871e7194ea3f97704651f08edd974c1135", "patch": "@@ -8,7 +8,7 @@ note: function defined here\n   --> $DIR/complex.rs:11:4\n    |\n LL | fn complex(_i: u32, _s: &str, _e: E, _f: F, _g: G, _x: X, _y: Y, _z: Z ) {}\n-   |    ^^^^^^^ -------  --------  -----  -----  -----  -----  -----  ------\n+   |    ^^^^^^^ -------  --------  -----  -----  -----  -----  -----  -----\n help: did you mean\n    |\n LL |   complex(/* u32 */, &\"\", /* E */, F::X2, G{}, X {}, Y {}, Z {});"}, {"sha": "60b379faf4e060fe4c4317ffe4b7ce3a0f44de04", "filename": "src/test/ui/c-variadic/issue-86053-1.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fc-variadic%2Fissue-86053-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fc-variadic%2Fissue-86053-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fc-variadic%2Fissue-86053-1.stderr?ref=e369ec871e7194ea3f97704651f08edd974c1135", "patch": "@@ -44,19 +44,19 @@ error: `...` must be the last argument of a C-variadic function\n   --> $DIR/issue-86053-1.rs:11:12\n    |\n LL |     self , ... ,   self ,   self , ... ) where F : FnOnce ( & 'a & 'b usize ) {\n-   |            ^^^^\n+   |            ^^^\n \n error: only foreign or `unsafe extern \"C\"` functions may be C-variadic\n   --> $DIR/issue-86053-1.rs:11:12\n    |\n LL |     self , ... ,   self ,   self , ... ) where F : FnOnce ( & 'a & 'b usize ) {\n-   |            ^^^^\n+   |            ^^^\n \n error: only foreign or `unsafe extern \"C\"` functions may be C-variadic\n   --> $DIR/issue-86053-1.rs:11:36\n    |\n LL |     self , ... ,   self ,   self , ... ) where F : FnOnce ( & 'a & 'b usize ) {\n-   |                                    ^^^^\n+   |                                    ^^^\n \n error[E0412]: cannot find type `F` in this scope\n   --> $DIR/issue-86053-1.rs:11:48"}, {"sha": "17de49fbd841de4cb9aef08178564bd414095208", "filename": "src/test/ui/suggestions/suggest-ref-macro.stderr", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-ref-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-ref-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-ref-macro.stderr?ref=e369ec871e7194ea3f97704651f08edd974c1135", "patch": "@@ -10,14 +10,8 @@ LL | #[hello]\n note: function defined here\n   --> $DIR/suggest-ref-macro.rs:8:1\n    |\n-LL |   #[hello]\n-   |  _-^^^^^^^\n-LL | | fn abc() {}\n-LL | |\n-LL | | fn x(_: &mut i32) {}\n-LL | |\n-LL | | macro_rules! bla {\n-   | |_____________-\n+LL | #[hello]\n+   | ^^^^^^^^\n    = note: this error originates in the attribute macro `hello` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error[E0308]: mismatched types"}, {"sha": "847bc517ea3d368a72d0e52ceec779df61c22357", "filename": "src/test/ui/type/type-check/issue-88577-check-fn-with-more-than-65535-arguments.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-88577-check-fn-with-more-than-65535-arguments.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e369ec871e7194ea3f97704651f08edd974c1135/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-88577-check-fn-with-more-than-65535-arguments.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-88577-check-fn-with-more-than-65535-arguments.stderr?ref=e369ec871e7194ea3f97704651f08edd974c1135", "patch": "@@ -1,13 +1,13 @@\n error: function can not have more than 65535 arguments\n-  --> $DIR/issue-88577-check-fn-with-more-than-65535-arguments.rs:6:24\n+  --> $DIR/issue-88577-check-fn-with-more-than-65535-arguments.rs:6:22\n    |\n-LL |           fn _f($($t: ()),*) {}\n-   |  ________________________^\n-LL | |     }\n-LL | | }\n-LL | |\n-LL | | many_args!{[_]########## ######}\n-   | |____________^\n+LL |         fn _f($($t: ()),*) {}\n+   |                      ^\n+...\n+LL | many_args!{[_]########## ######}\n+   | -------------------------------- in this macro invocation\n+   |\n+   = note: this error originates in the macro `many_args` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: aborting due to previous error\n "}]}