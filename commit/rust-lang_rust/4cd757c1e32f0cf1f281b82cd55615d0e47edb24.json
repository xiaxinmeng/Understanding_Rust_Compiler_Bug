{"sha": "4cd757c1e32f0cf1f281b82cd55615d0e47edb24", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjZDc1N2MxZTMyZjBjZjFmMjgxYjgyY2Q1NTYxNWQwZTQ3ZWRiMjQ=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-03-07T11:28:19Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-03-07T11:28:19Z"}, "message": "Remove rust-project.json test w/ dependencies.", "tree": {"sha": "53e570017ba84d2a7fdf91bfbcf89ef0e30bb5db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/53e570017ba84d2a7fdf91bfbcf89ef0e30bb5db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cd757c1e32f0cf1f281b82cd55615d0e47edb24", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlyBAGAACgkQAXYLT59T\n8VQ4CRAAg8TD9TGRXzMM5owG44w0Mv6TtpF6b46DcnB18jVAc2gJYVvRoCrPOxlI\nTyS5EtokLKxsXL2A1GlsPA9c9Wsny9+4Ry4zUkcnpc8rsFc4LKu5dNVlAQmRm+Tr\n9to9ZW2uVD4kgPJbOyzjvOlzsPzErkbygxjLdLGcz4M9aYy2c3VJC4h/uM7oDXyQ\nZASdziOxmNY+nskOFbe2xhhXJtMrcSrgcYi2QwtTFrCoJJGTFRquaii1heQ17Y18\no9dyAmYueedc0RalL/Evcy7GlkPpYXoxgCYDGGtpVOeycUARQrGmJyP7S6usOxZ+\nwc5CSTzaIQ3aoiKw88cOFmq84f5wjLRDnKKwlKgpi9O4ZqoWRUykzcYX/otde849\nuRvT/iNS4YQ1IFpvonqHni7D0y9aFULe5ioErIVWpBbUooB3/YCOu6/FXnDnKD3X\nrpjWFbXdk7h4BVwWu9v4MCB1kRsB9dc0BdESNqqirTHLq0I9uYEETVTFh+mUzWmW\nhxnTrLzsl1BZnn3267araU5EXUOOpvMKR1peIapRvU9ZKH6cAFIwBsr7eKW1b8kl\nVknvcOX25nzXYAtNMshp5DkGdoDK8Kym8NsRWTRR++QGhAluCHZ/ZSiAlB1Xi4yG\nIpJ6mS+PPsKNJ8/FGe58rklDmjK1/i7P3FUzup3EudzavzSIWy0=\n=RSnl\n-----END PGP SIGNATURE-----", "payload": "tree 53e570017ba84d2a7fdf91bfbcf89ef0e30bb5db\nparent 3bc33ae712d24f19f348828b0b18cda3d09a2360\nauthor David Wood <david@davidtw.co> 1551958099 +0100\ncommitter David Wood <david@davidtw.co> 1551958099 +0100\n\nRemove rust-project.json test w/ dependencies.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cd757c1e32f0cf1f281b82cd55615d0e47edb24", "html_url": "https://github.com/rust-lang/rust/commit/4cd757c1e32f0cf1f281b82cd55615d0e47edb24", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cd757c1e32f0cf1f281b82cd55615d0e47edb24/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3bc33ae712d24f19f348828b0b18cda3d09a2360", "url": "https://api.github.com/repos/rust-lang/rust/commits/3bc33ae712d24f19f348828b0b18cda3d09a2360", "html_url": "https://github.com/rust-lang/rust/commit/3bc33ae712d24f19f348828b0b18cda3d09a2360"}], "stats": {"total": 43, "additions": 0, "deletions": 43}, "files": [{"sha": "41c240139a6e8a563b09cfb4c20cccb10caa22dd", "filename": "crates/ra_lsp_server/tests/heavy_tests/main.rs", "status": "modified", "additions": 0, "deletions": 43, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/4cd757c1e32f0cf1f281b82cd55615d0e47edb24/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cd757c1e32f0cf1f281b82cd55615d0e47edb24/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fmain.rs?ref=4cd757c1e32f0cf1f281b82cd55615d0e47edb24", "patch": "@@ -321,46 +321,3 @@ fn main() {}\n         json!([]),\n     );\n }\n-\n-#[test]\n-fn completes_items_from_second_crate_in_json_project() {\n-    let tmp_dir = TempDir::new().unwrap();\n-    let code = format!(\n-        r#\"\n-//- rust-project.json\n-{{ \n-    \"roots\": [ \"{PATH}\" ], \n-    \"crates\": [ \n-        {{ \n-            \"root_module\": \"{PATH}/foo/lib.rs\",\n-            \"deps\": [\n-                {{\n-                    \"name\": \"bar\",\n-                    \"crate\": 1\n-                }}\n-            ], \n-            \"edition\": \"2015\" \n-        }},\n-        {{ \"root_module\": \"{PATH}/bar/lib.rs\", \"deps\": [], \"edition\": \"2015\" }}\n-    ] \n-}}\n-\n-//- bar/lib.rs\n-pub struct Spam;\n-pub struct CannedMeat;\n-\n-//- foo/lib.rs\n-extern crate bar;\n-use bar::Spam;\n-\"#,\n-        PATH = tmp_dir.path().display()\n-    );\n-    let server = project_with_tmpdir(tmp_dir, &code);\n-    server.wait_for_message(\"workspace loaded\");\n-    let res = server.send_request::<Completion>(CompletionParams {\n-        text_document: server.doc_id(\"foo/lib.rs\"),\n-        context: None,\n-        position: Position::new(1, 10),\n-    });\n-    assert!(format!(\"{}\", res).contains(\"CannedMeat\"));\n-}"}]}