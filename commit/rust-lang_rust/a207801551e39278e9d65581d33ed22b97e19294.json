{"sha": "a207801551e39278e9d65581d33ed22b97e19294", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyMDc4MDE1NTFlMzkyNzhlOWQ2NTU4MWQzM2VkMjJiOTdlMTkyOTQ=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2020-11-17T09:06:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-17T09:06:29Z"}, "message": "Rollup merge of #79105 - petrochenkov:winlink, r=shepmaster\n\nstd: Fix test `symlink_hard_link` on Windows\n\nThe test was introduced in https://github.com/rust-lang/rust/pull/78026 and fails depending on Windows version and admin rights.\nOther similar tests check for symlink creation permissions before doing anything, this PR performs the same check for `symlink_hard_link` as well.", "tree": {"sha": "3187d8edfd03397a6606eac014ff19dbb92b2b9c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3187d8edfd03397a6606eac014ff19dbb92b2b9c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a207801551e39278e9d65581d33ed22b97e19294", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfs5KVCRBK7hj4Ov3rIwAAdHIIABkycdU27K+bAVS+t5J4fV9l\nTesaKPjzTuosXfYFCvfjBFWvd6GzzIconQp3Gc8U9rdXNSdO4nwF0AgpeRYDqQDh\njXYLpXSpq5IuntDRCtMIQe4CjTn9vtHZ5in+hvtgpxo6BXAQ7HYb9cgiKSDvMov0\n1y/a3fCDNgTOrGDpdqIOvMaJLmebC/RMASxenkgFLNML4YL7ajrakbWp+26BXIXr\nBtPBDtYangOIw4L1PzTU7dVhJSMWaAjCHouQ/a8Ac5/4JofdAxFE6kf2b+yIbC2V\nkIl4vBNj98PzSWICwHuYVaD9iWmZAtKH2FKQ3TqYvWqpieBcPZ6tCJmIkCFAUm8=\n=X+5R\n-----END PGP SIGNATURE-----\n", "payload": "tree 3187d8edfd03397a6606eac014ff19dbb92b2b9c\nparent c4abdcf0ac8fd9643f1c196a418e032e85c1988c\nparent a5bc780b508f373ff0c03b8a73c384204bfe1b0f\nauthor Mara Bos <m-ou.se@m-ou.se> 1605603989 +0100\ncommitter GitHub <noreply@github.com> 1605603989 +0100\n\nRollup merge of #79105 - petrochenkov:winlink, r=shepmaster\n\nstd: Fix test `symlink_hard_link` on Windows\n\nThe test was introduced in https://github.com/rust-lang/rust/pull/78026 and fails depending on Windows version and admin rights.\nOther similar tests check for symlink creation permissions before doing anything, this PR performs the same check for `symlink_hard_link` as well.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a207801551e39278e9d65581d33ed22b97e19294", "html_url": "https://github.com/rust-lang/rust/commit/a207801551e39278e9d65581d33ed22b97e19294", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a207801551e39278e9d65581d33ed22b97e19294/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4abdcf0ac8fd9643f1c196a418e032e85c1988c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4abdcf0ac8fd9643f1c196a418e032e85c1988c", "html_url": "https://github.com/rust-lang/rust/commit/c4abdcf0ac8fd9643f1c196a418e032e85c1988c"}, {"sha": "a5bc780b508f373ff0c03b8a73c384204bfe1b0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5bc780b508f373ff0c03b8a73c384204bfe1b0f", "html_url": "https://github.com/rust-lang/rust/commit/a5bc780b508f373ff0c03b8a73c384204bfe1b0f"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "5c969741592e62179b267247b9a2609e0c7cf772", "filename": "library/std/src/fs/tests.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a207801551e39278e9d65581d33ed22b97e19294/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a207801551e39278e9d65581d33ed22b97e19294/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs?ref=a207801551e39278e9d65581d33ed22b97e19294", "patch": "@@ -1341,6 +1341,9 @@ fn metadata_access_times() {\n #[test]\n fn symlink_hard_link() {\n     let tmpdir = tmpdir();\n+    if !got_symlink_permission(&tmpdir) {\n+        return;\n+    };\n \n     // Create \"file\", a file.\n     check!(fs::File::create(tmpdir.join(\"file\")));"}]}