{"sha": "a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f", "node_id": "C_kwDOAAsO6NoAKGE1MmI1MDcyYWM5NjQ0Y2U0ZjhlMzM2YzljMWQ3OWY3YWZlMTZmOWY", "commit": {"author": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-03-31T09:14:21Z"}, "committer": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-04-05T06:01:02Z"}, "message": "errors: disable directionality isolation markers\n\nFluent diagnostics can insert directionality isolation markers around\ninterpolated variables indicating that there may be a shift from\nright-to-left to left-to-right text (or vice-versa). These are disabled\nbecause they are sometimes visible in the error output, but may be worth\ninvestigating in future (for example: if type names are left-to-right\nand the surrounding diagnostic messages are right-to-left, then these\nmight be helpful).\n\nSigned-off-by: David Wood <david.wood@huawei.com>", "tree": {"sha": "aa00673038a250a4ee0d5e71fbcfc1d2234f2934", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa00673038a250a4ee0d5e71fbcfc1d2234f2934"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f", "html_url": "https://github.com/rust-lang/rust/commit/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9956d4f99d021fa255d007dc17f23a3b0cd351e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/9956d4f99d021fa255d007dc17f23a3b0cd351e9", "html_url": "https://github.com/rust-lang/rust/commit/9956d4f99d021fa255d007dc17f23a3b0cd351e9"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "c5fd43eda3c4a3eecd989707d0ba1e9238237823", "filename": "compiler/rustc_error_messages/src/lib.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs?ref=a52b5072ac9644ce4f8e336c9c1d79f7afe16f9f", "patch": "@@ -111,6 +111,13 @@ pub fn fluent_bundle(\n     trace!(?locale);\n     let mut bundle = FluentBundle::new(vec![locale]);\n \n+    // Fluent diagnostics can insert directionality isolation markers around interpolated variables\n+    // indicating that there may be a shift from right-to-left to left-to-right text (or\n+    // vice-versa). These are disabled because they are sometimes visible in the error output, but\n+    // may be worth investigating in future (for example: if type names are left-to-right and the\n+    // surrounding diagnostic messages are right-to-left, then these might be helpful).\n+    bundle.set_use_isolating(false);\n+\n     if let Some(requested_locale) = requested_locale {\n         let mut sysroot = sysroot.to_path_buf();\n         sysroot.push(\"share\");\n@@ -161,6 +168,8 @@ pub fn fallback_fluent_bundle() -> Result<Lrc<FluentBundle>, TranslationBundleEr\n         .map_err(TranslationBundleError::from)?;\n     trace!(?fallback_resource);\n     let mut fallback_bundle = FluentBundle::new(vec![langid!(\"en-US\")]);\n+    // See comment in `fluent_bundle`.\n+    fallback_bundle.set_use_isolating(false);\n     fallback_bundle.add_resource(fallback_resource).map_err(TranslationBundleError::from)?;\n     let fallback_bundle = Lrc::new(fallback_bundle);\n     Ok(fallback_bundle)"}]}