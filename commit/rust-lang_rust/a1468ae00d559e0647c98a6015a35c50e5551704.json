{"sha": "a1468ae00d559e0647c98a6015a35c50e5551704", "node_id": "C_kwDOAAsO6NoAKGExNDY4YWUwMGQ1NTllMDY0N2M5OGE2MDE1YTM1YzUwZTU1NTE3MDQ", "commit": {"author": {"name": "Alan Egerton", "email": "eggyal@gmail.com", "date": "2023-02-16T21:59:10Z"}, "committer": {"name": "Alan Egerton", "email": "eggyal@gmail.com", "date": "2023-02-16T22:10:29Z"}, "message": "Do not ICE on unmet trait alias impl bounds", "tree": {"sha": "60ac6f09cfd41893b7787a0d5016976319453e7b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/60ac6f09cfd41893b7787a0d5016976319453e7b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1468ae00d559e0647c98a6015a35c50e5551704", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCAAvFiEEvrRBFuOXsbT1OVTHfUwvbCISJTIFAmPuqdURHGVnZ3lhbEBn\nbWFpbC5jb20ACgkQfUwvbCISJTIH+Q/3b7q1zPe0KposonhSNRjfDqZzsaCLyqwt\nFlQH6uS1kpPI2ihMMk36K2yjIYfflnJsRLXf61HIeUR669bfUR9y75TYwqU2CUI/\nZZuXul6iwAQtR2EyjJAjjSOyanhecm2hTy9iWqo16p5EAExpE0tRz/Cw61dYg9ZJ\ndsBHjfjvxs/Ew6PsAboeF62bOylrXIyST6Qg5JK9Vg5JT7rQxuj5KpGFuu3SOSAS\nkOdkb/6qKdsv3jO3/+QV0S0A/68zZzasXmTrPlioLgxfwjmIy/p9mPMP5qDMFlWx\n7xFvNsECcArFReomP/jawXe7EW22oQ0ZatYqU3sbOlGZ8UdmTn0c7k+ug4xNfrgA\nD6EbYlo6aunjqkho+u+bxg5//xlbZq6qftH3Z2JAAva+C00pd1XFlgD6MpHwK4Pm\nXFwkyA924WAs+Z728VUc8Ta1SbyZ1DM5nyFCVzmsEbRJrJWnobpeJ2oM+yZ3+iCK\nwOhuXOWVIDvNoxRyIsILgyyN8oUY8PBM+Tp+618zeqX0XQmvHX0SI7uJO8fYv92i\nS2UZesE4JcBdbLnQMJGL42XK3eY0k36RTmUXxkFJTQGo2Rq6S4pabBu2E9oyXiR+\nAO3lsX1v15W17zBA44gygptxiuUttWMK8cf+JBJ4C67BJJzhMYaXAyBVkD5q8Mnp\nlTmNFhjTNQ==\n=4rY5\n-----END PGP SIGNATURE-----", "payload": "tree 60ac6f09cfd41893b7787a0d5016976319453e7b\nparent 9a7cc6c32f1a690f86827e4724bcda85e506ef35\nauthor Alan Egerton <eggyal@gmail.com> 1676584750 +0000\ncommitter Alan Egerton <eggyal@gmail.com> 1676585429 +0000\n\nDo not ICE on unmet trait alias impl bounds\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1468ae00d559e0647c98a6015a35c50e5551704", "html_url": "https://github.com/rust-lang/rust/commit/a1468ae00d559e0647c98a6015a35c50e5551704", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1468ae00d559e0647c98a6015a35c50e5551704/comments", "author": {"login": "eggyal", "id": 3089613, "node_id": "MDQ6VXNlcjMwODk2MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/3089613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eggyal", "html_url": "https://github.com/eggyal", "followers_url": "https://api.github.com/users/eggyal/followers", "following_url": "https://api.github.com/users/eggyal/following{/other_user}", "gists_url": "https://api.github.com/users/eggyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/eggyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eggyal/subscriptions", "organizations_url": "https://api.github.com/users/eggyal/orgs", "repos_url": "https://api.github.com/users/eggyal/repos", "events_url": "https://api.github.com/users/eggyal/events{/privacy}", "received_events_url": "https://api.github.com/users/eggyal/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eggyal", "id": 3089613, "node_id": "MDQ6VXNlcjMwODk2MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/3089613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eggyal", "html_url": "https://github.com/eggyal", "followers_url": "https://api.github.com/users/eggyal/followers", "following_url": "https://api.github.com/users/eggyal/following{/other_user}", "gists_url": "https://api.github.com/users/eggyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/eggyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eggyal/subscriptions", "organizations_url": "https://api.github.com/users/eggyal/orgs", "repos_url": "https://api.github.com/users/eggyal/repos", "events_url": "https://api.github.com/users/eggyal/events{/privacy}", "received_events_url": "https://api.github.com/users/eggyal/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a7cc6c32f1a690f86827e4724bcda85e506ef35", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a7cc6c32f1a690f86827e4724bcda85e506ef35", "html_url": "https://github.com/rust-lang/rust/commit/9a7cc6c32f1a690f86827e4724bcda85e506ef35"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "68d2b9c6428a14b4dd7440bdce4ef82be916a4ce", "filename": "compiler/rustc_hir_typeck/src/method/suggest.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a1468ae00d559e0647c98a6015a35c50e5551704/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1468ae00d559e0647c98a6015a35c50e5551704/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs?ref=a1468ae00d559e0647c98a6015a35c50e5551704", "patch": "@@ -714,7 +714,9 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                         );\n                     }\n                     Some(Node::Item(hir::Item {\n-                        ident, kind: hir::ItemKind::Trait(..), ..\n+                        ident,\n+                        kind: hir::ItemKind::Trait(..) | hir::ItemKind::TraitAlias(..),\n+                        ..\n                     })) => {\n                         skip_list.insert(p);\n                         let entry = spanned_predicates.entry(ident.span);"}, {"sha": "0b1f9ab57c987d499b711922747100fbd1fa024b", "filename": "tests/ui/traits/alias/issue-108132-unmet-trait-alias-bound-on-generic-impl.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a1468ae00d559e0647c98a6015a35c50e5551704/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1468ae00d559e0647c98a6015a35c50e5551704/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.rs?ref=a1468ae00d559e0647c98a6015a35c50e5551704", "patch": "@@ -0,0 +1,15 @@\n+// Regression test for #108132: do not ICE upon unmet trait alias constraint in generic impl\n+\n+#![feature(trait_alias)]\n+\n+trait IteratorAlias = Iterator;\n+\n+struct Foo<I>(I);\n+\n+impl<I: IteratorAlias> Foo<I> {\n+    fn f() {}\n+}\n+\n+fn main() {\n+    Foo::<()>::f() //~ trait bounds were not satisfied\n+}"}, {"sha": "f1b259d5a652d7656fd76e0c8b1a3fbfe524d4c4", "filename": "tests/ui/traits/alias/issue-108132-unmet-trait-alias-bound-on-generic-impl.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/a1468ae00d559e0647c98a6015a35c50e5551704/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a1468ae00d559e0647c98a6015a35c50e5551704/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftraits%2Falias%2Fissue-108132-unmet-trait-alias-bound-on-generic-impl.stderr?ref=a1468ae00d559e0647c98a6015a35c50e5551704", "patch": "@@ -0,0 +1,25 @@\n+error[E0599]: the function or associated item `f` exists for struct `Foo<()>`, but its trait bounds were not satisfied\n+  --> $DIR/issue-108132-unmet-trait-alias-bound-on-generic-impl.rs:14:16\n+   |\n+LL | struct Foo<I>(I);\n+   | ------------- function or associated item `f` not found for this struct\n+...\n+LL |     Foo::<()>::f()\n+   |                ^ function or associated item cannot be called on `Foo<()>` due to unsatisfied trait bounds\n+   |\n+note: trait bound `(): Iterator` was not satisfied\n+  --> $DIR/issue-108132-unmet-trait-alias-bound-on-generic-impl.rs:5:23\n+   |\n+LL | trait IteratorAlias = Iterator;\n+   |       -------------   ^^^^^^^^ unsatisfied trait bound introduced here\n+note: trait bound `(): IteratorAlias` was not satisfied\n+  --> $DIR/issue-108132-unmet-trait-alias-bound-on-generic-impl.rs:9:9\n+   |\n+LL | impl<I: IteratorAlias> Foo<I> {\n+   |         ^^^^^^^^^^^^^  ------\n+   |         |\n+   |         unsatisfied trait bound introduced here\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0599`."}]}