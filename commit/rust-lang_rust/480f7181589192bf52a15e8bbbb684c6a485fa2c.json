{"sha": "480f7181589192bf52a15e8bbbb684c6a485fa2c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4MGY3MTgxNTg5MTkyYmY1MmExNWU4YmJiYjY4NGM2YTQ4NWZhMmM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-05-07T15:58:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-05-07T15:58:53Z"}, "message": "Rollup merge of #71952 - JohnTitor:add-tests, r=Dylan-DPC\n\nAdd some regression tests\n\nCloses #29988\nCloses #34979\nPick up two snippets that have been fixed from #67945 (shouldn't be closed yet!)", "tree": {"sha": "68b3ec1bf5c4bfd403fb0efa599ff28641a976dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/68b3ec1bf5c4bfd403fb0efa599ff28641a976dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/480f7181589192bf52a15e8bbbb684c6a485fa2c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJetDA+CRBK7hj4Ov3rIwAAdHIIAJLFd/art7K19zJ069eoyJJA\n8APnjM8LslOGROWYJX5pQqxWjskHGse+TkagHgS5tdPOjhnnUf9xDNCRZjac+4EO\nsdyvUaz8JRcnv2OGlbYwXHxPRn+95Gxi2r5GnnIaqdzubNRrzuuDzoYojwE3EDmd\n0ISMUbNgp8OjAWGPyABFxU5CogLF9IXbE1wNNyXHO69ZugjcdL5Da1RSTB+/p0P0\nUuBlE5KajGwZGwucgpguzFv+55cD0VHnbnV2Aev93uWXGVPceHyhydl+Uo+9+Gon\nIFaAInotPFryLQGG+/VrS/vBF41xRC+pUsd9bqbkI6w+98hriOf8Gx3LMNbTZVI=\n=h8s5\n-----END PGP SIGNATURE-----\n", "payload": "tree 68b3ec1bf5c4bfd403fb0efa599ff28641a976dd\nparent 037ae4008f3be22f48d40da7325f7af2ae1ccd1e\nparent d717e55f19bb508279ce65ade826fd66be13a6e3\nauthor Dylan DPC <dylan.dpc@gmail.com> 1588867133 +0200\ncommitter GitHub <noreply@github.com> 1588867133 +0200\n\nRollup merge of #71952 - JohnTitor:add-tests, r=Dylan-DPC\n\nAdd some regression tests\n\nCloses #29988\nCloses #34979\nPick up two snippets that have been fixed from #67945 (shouldn't be closed yet!)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/480f7181589192bf52a15e8bbbb684c6a485fa2c", "html_url": "https://github.com/rust-lang/rust/commit/480f7181589192bf52a15e8bbbb684c6a485fa2c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/480f7181589192bf52a15e8bbbb684c6a485fa2c/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "037ae4008f3be22f48d40da7325f7af2ae1ccd1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/037ae4008f3be22f48d40da7325f7af2ae1ccd1e", "html_url": "https://github.com/rust-lang/rust/commit/037ae4008f3be22f48d40da7325f7af2ae1ccd1e"}, {"sha": "d717e55f19bb508279ce65ade826fd66be13a6e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/d717e55f19bb508279ce65ade826fd66be13a6e3", "html_url": "https://github.com/rust-lang/rust/commit/d717e55f19bb508279ce65ade826fd66be13a6e3"}], "stats": {"total": 107, "additions": 107, "deletions": 0}, "files": [{"sha": "139a06ab53d05314a17bbbefacaa8c22d67f2895", "filename": "src/test/codegen/ffi-out-of-bounds-loads.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fcodegen%2Fffi-out-of-bounds-loads.rs", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fcodegen%2Fffi-out-of-bounds-loads.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fffi-out-of-bounds-loads.rs?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,25 @@\n+// Regression test for #29988\n+\n+// compile-flags: -C no-prepopulate-passes\n+// only-x86_64\n+// ignore-windows\n+\n+#[repr(C)]\n+struct S {\n+    f1: i32,\n+    f2: i32,\n+    f3: i32,\n+}\n+\n+extern {\n+    fn foo(s: S);\n+}\n+\n+fn main() {\n+    let s = S { f1: 1, f2: 2, f3: 3 };\n+    unsafe {\n+        // CHECK: load { i64, i32 }, { i64, i32 }* {{.*}}, align 4\n+        // CHECK: call void @foo({ i64, i32 } {{.*}})\n+        foo(s);\n+    }\n+}"}, {"sha": "7977bddae7bcb39dc5efd61290baddfc4189142d", "filename": "src/test/ui/enum/issue-67945-1.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.rs?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,8 @@\n+enum Bug<S> {\n+    Var = {\n+        let x: S = 0; //~ ERROR: mismatched types\n+        0\n+    },\n+}\n+\n+fn main() {}"}, {"sha": "6583fe13d0c6345524cc3a3e805b46c2eea72cc7", "filename": "src/test/ui/enum/issue-67945-1.stderr", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum%2Fissue-67945-1.stderr?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,17 @@\n+error[E0308]: mismatched types\n+  --> $DIR/issue-67945-1.rs:3:20\n+   |\n+LL | enum Bug<S> {\n+   |          - this type parameter\n+LL |     Var = {\n+LL |         let x: S = 0;\n+   |                -   ^ expected type parameter `S`, found integer\n+   |                |\n+   |                expected due to this\n+   |\n+   = note: expected type parameter `S`\n+                        found type `{integer}`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "16bd8530ab38c47a32220219c01cffd0d8f48f75", "filename": "src/test/ui/enum/issue-67945-2.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.rs?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,9 @@\n+#![feature(type_ascription)]\n+\n+enum Bug<S> {\n+    Var = 0: S,\n+    //~^ ERROR: mismatched types\n+    //~| ERROR: mismatched types\n+}\n+\n+fn main() {}"}, {"sha": "c40506d59edd9ec8d76bb29ca7843b92b078d8bc", "filename": "src/test/ui/enum/issue-67945-2.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum%2Fissue-67945-2.stderr?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,25 @@\n+error[E0308]: mismatched types\n+  --> $DIR/issue-67945-2.rs:4:11\n+   |\n+LL | enum Bug<S> {\n+   |          - this type parameter\n+LL |     Var = 0: S,\n+   |           ^ expected type parameter `S`, found integer\n+   |\n+   = note: expected type parameter `S`\n+                        found type `{integer}`\n+\n+error[E0308]: mismatched types\n+  --> $DIR/issue-67945-2.rs:4:11\n+   |\n+LL | enum Bug<S> {\n+   |          - this type parameter\n+LL |     Var = 0: S,\n+   |           ^^^^ expected `isize`, found type parameter `S`\n+   |\n+   = note:        expected type `isize`\n+           found type parameter `S`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "252486dd92192011856e5bd884797e5f4f7ada08", "filename": "src/test/ui/lifetimes/issue-34979.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.rs", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.rs?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,9 @@\n+trait Foo {}\n+impl<'a, T> Foo for &'a T {}\n+\n+struct Ctx<'a>(&'a ())\n+where\n+    &'a (): Foo, //~ ERROR: type annotations needed\n+    &'static (): Foo;\n+\n+fn main() {}"}, {"sha": "04ad0d1276647f45483ede8548da3a1ab5f11e8d", "filename": "src/test/ui/lifetimes/issue-34979.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/480f7181589192bf52a15e8bbbb684c6a485fa2c/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Fissue-34979.stderr?ref=480f7181589192bf52a15e8bbbb684c6a485fa2c", "patch": "@@ -0,0 +1,14 @@\n+error[E0283]: type annotations needed\n+  --> $DIR/issue-34979.rs:6:13\n+   |\n+LL | trait Foo {}\n+   | --------- required by this bound in `Foo`\n+...\n+LL |     &'a (): Foo,\n+   |             ^^^ cannot infer type for reference `&'a ()`\n+   |\n+   = note: cannot satisfy `&'a (): Foo`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0283`."}]}