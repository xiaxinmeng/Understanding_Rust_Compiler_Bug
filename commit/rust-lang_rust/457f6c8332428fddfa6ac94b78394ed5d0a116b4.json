{"sha": "457f6c8332428fddfa6ac94b78394ed5d0a116b4", "node_id": "C_kwDOAAsO6NoAKDQ1N2Y2YzgzMzI0MjhmZGRmYTZhYzk0Yjc4Mzk0ZWQ1ZDBhMTE2YjQ", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-12-24T07:29:17Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-12-24T07:29:17Z"}, "message": "Extend GUI test for toggle-line background", "tree": {"sha": "79ba52daf7d487655b4566dcf801aa0ae3c8b3e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/79ba52daf7d487655b4566dcf801aa0ae3c8b3e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/457f6c8332428fddfa6ac94b78394ed5d0a116b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/457f6c8332428fddfa6ac94b78394ed5d0a116b4", "html_url": "https://github.com/rust-lang/rust/commit/457f6c8332428fddfa6ac94b78394ed5d0a116b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/457f6c8332428fddfa6ac94b78394ed5d0a116b4/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "518ca9c16f87435dca9db434a0d6d8f5d6a6d1e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/518ca9c16f87435dca9db434a0d6d8f5d6a6d1e8", "html_url": "https://github.com/rust-lang/rust/commit/518ca9c16f87435dca9db434a0d6d8f5d6a6d1e8"}], "stats": {"total": 44, "additions": 40, "deletions": 4}, "files": [{"sha": "9bb338d7129ce1892223afa06172540f15ab7a0a", "filename": "src/test/rustdoc-gui/scrape-examples-toggle.goml", "status": "modified", "additions": 40, "deletions": 4, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/457f6c8332428fddfa6ac94b78394ed5d0a116b4/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml", "raw_url": "https://github.com/rust-lang/rust/raw/457f6c8332428fddfa6ac94b78394ed5d0a116b4/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml?ref=457f6c8332428fddfa6ac94b78394ed5d0a116b4", "patch": "@@ -1,9 +1,45 @@\n goto: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test_many.html\"\n \n-// Clicking \"More examples...\" will open additional examples\n-assert-attribute-false: (\".more-examples-toggle\", {\"open\": \"\"})\n-click: \".more-examples-toggle\"\n-assert-attribute: (\".more-examples-toggle\", {\"open\": \"\"})\n+// Checking the color of the toggle line.\n+show-text: true\n+define-function: (\n+    \"check-color\",\n+    (theme, toggle_line_color, toggle_line_hover_color),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+\n+        // Clicking \"More examples...\" will open additional examples\n+        (\"assert-attribute-false\", (\".more-examples-toggle\", {\"open\": \"\"})),\n+        (\"click\", \".more-examples-toggle\"),\n+        (\"assert-attribute\", (\".more-examples-toggle\", {\"open\": \"\"})),\n+\n+        (\"assert-css\", (\".toggle-line-inner\", {\"background-color\": |toggle_line_color|}, ALL)),\n+        (\"move-cursor-to\", \".toggle-line\"),\n+        (\"assert-css\", (\n+            \".toggle-line:hover .toggle-line-inner\",\n+            {\"background-color\": |toggle_line_hover_color|},\n+        )),\n+        // Moving cursor away from the toggle line to prevent disrupting next test.\n+        (\"move-cursor-to\", \".search-input\"),\n+    ],\n+)\n+\n+call-function: (\"check-color\", {\n+    \"theme\": \"ayu\",\n+    \"toggle_line_color\": \"rgb(153, 153, 153)\",\n+    \"toggle_line_hover_color\": \"rgb(197, 197, 197)\",\n+})\n+call-function: (\"check-color\", {\n+    \"theme\": \"dark\",\n+    \"toggle_line_color\": \"rgb(153, 153, 153)\",\n+    \"toggle_line_hover_color\": \"rgb(197, 197, 197)\",\n+})\n+call-function: (\"check-color\", {\n+    \"theme\": \"light\",\n+    \"toggle_line_color\": \"rgb(204, 204, 204)\",\n+    \"toggle_line_hover_color\": \"rgb(153, 153, 153)\",\n+})\n \n // Toggling all docs will close additional examples\n click: \"#toggle-all-docs\""}]}