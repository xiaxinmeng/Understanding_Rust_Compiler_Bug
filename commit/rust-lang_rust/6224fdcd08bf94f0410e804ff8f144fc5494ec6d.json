{"sha": "6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyMjRmZGNkMDhiZjk0ZjA0MTBlODA0ZmY4ZjE0NGZjNTQ5NGVjNmQ=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-03-08T18:49:43Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-03-08T18:49:43Z"}, "message": "rustc: Add region-annoted type parameters to the AST; stub associated patterns", "tree": {"sha": "95dd5e37c56769b890dd19588efab42e4ce516ad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95dd5e37c56769b890dd19588efab42e4ce516ad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "html_url": "https://github.com/rust-lang/rust/commit/6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c09e3391337743ad28e847a78fab3ca6138d8033", "url": "https://api.github.com/repos/rust-lang/rust/commits/c09e3391337743ad28e847a78fab3ca6138d8033", "html_url": "https://github.com/rust-lang/rust/commit/c09e3391337743ad28e847a78fab3ca6138d8033"}], "stats": {"total": 1763, "additions": 931, "deletions": 832}, "files": [{"sha": "167e5666d83c6060a4a1d2dd0bb8043efdf3a9ea", "filename": "src/rustc/metadata/astencode_gen.rs", "status": "modified", "additions": 919, "deletions": 832, "changes": 1751, "blob_url": "https://github.com/rust-lang/rust/blob/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fmetadata%2Fastencode_gen.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fmetadata%2Fastencode_gen.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmetadata%2Fastencode_gen.rs?ref=6224fdcd08bf94f0410e804ff8f144fc5494ec6d"}, {"sha": "556d51564b6356545cd240b7282ed45e582f7b7f", "filename": "src/rustc/middle/typeck.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftypeck.rs?ref=6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "patch": "@@ -319,6 +319,9 @@ fn ast_ty_to_ty(tcx: ty::ctxt, mode: mode, &&ast_ty: @ast::ty) -> ty::t {\n       ast::ty_ptr(mt) {\n         ty::mk_ptr(tcx, ast_mt_to_mt(tcx, mode, mt))\n       }\n+      ast::ty_rptr(_,_) {\n+        fail \"TODO: regions\";\n+      }\n       ast::ty_tup(fields) {\n         let flds = vec::map(fields, bind ast_ty_to_ty(tcx, mode, _));\n         ty::mk_tup(tcx, flds)"}, {"sha": "934940bba18a6445e30ecbe9f8ec3635c18bfca7", "filename": "src/rustc/syntax/ast.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fsyntax%2Fast.rs?ref=6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "patch": "@@ -339,13 +339,20 @@ enum prim_ty {\n     ty_bool,\n }\n \n+enum region {\n+    re_inferred,\n+    re_named(ident),\n+    re_self\n+}\n+\n enum ty_ {\n     ty_nil,\n     ty_bot, /* bottom type */\n     ty_box(mt),\n     ty_uniq(mt),\n     ty_vec(mt),\n     ty_ptr(mt),\n+    ty_rptr(region, mt),\n     ty_rec([ty_field]),\n     ty_fn(proto, fn_decl),\n     ty_tup([@ty]),"}, {"sha": "bc9b4b790480ae372fd435dc18574232efdc62e0", "filename": "src/rustc/syntax/fold.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fsyntax%2Ffold.rs?ref=6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "patch": "@@ -479,6 +479,7 @@ fn noop_fold_ty(t: ty_, fld: ast_fold) -> ty_ {\n       ty_uniq(mt) {ty_uniq(fold_mt(mt, fld))}\n       ty_vec(mt) {ty_vec(fold_mt(mt, fld))}\n       ty_ptr(mt) {ty_ptr(fold_mt(mt, fld))}\n+      ty_rptr(region, mt) {ty_rptr(region, fold_mt(mt, fld))}\n       ty_rec(fields) {ty_rec(vec::map(fields) {|f| fold_field(f, fld)})}\n       ty_fn(proto, decl) {ty_fn(proto, fold_fn_decl(decl, fld))}\n       ty_tup(tys) {ty_tup(vec::map(tys) {|ty| fld.fold_ty(ty)})}"}, {"sha": "b1a07fae31c2f6b3df83c8d811b973bfb7262b62", "filename": "src/rustc/syntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6224fdcd08bf94f0410e804ff8f144fc5494ec6d/src%2Frustc%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fsyntax%2Fprint%2Fpprust.rs?ref=6224fdcd08bf94f0410e804ff8f144fc5494ec6d", "patch": "@@ -332,6 +332,7 @@ fn print_type(s: ps, &&ty: @ast::ty) {\n         word(s.s, \"]\");\n       }\n       ast::ty_ptr(mt) { word(s.s, \"*\"); print_mt(s, mt); }\n+      ast::ty_rptr(region, mt) { fail \"TODO\"; }\n       ast::ty_rec(fields) {\n         word(s.s, \"{\");\n         fn print_field(s: ps, f: ast::ty_field) {"}]}