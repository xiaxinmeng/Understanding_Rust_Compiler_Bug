{"sha": "d95ca2822cdc67ddec96d16533e23a10d6bfd136", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5NWNhMjgyMmNkYzY3ZGRlYzk2ZDE2NTMzZTIzYTEwZDZiZmQxMzY=", "commit": {"author": {"name": "pierzchalski", "email": "e.a.pierzchalski@gmail.com", "date": "2016-04-15T03:13:55Z"}, "committer": {"name": "pierzchalski", "email": "e.a.pierzchalski@gmail.com", "date": "2016-04-15T03:13:55Z"}, "message": "Add tests against weird provided/required method behaviour\n\nIn `test/rustdoc/manual_impl.rs` there are now three structs:\n\n* S1 implements and documents required method `a_method`.\n* S2 implements and documents `a_method` as well as provided\n  method `b_method`.\n* S3 implements `a_method` and `b_method`, but only documents\n  `b_method`.\n\nFor a struct, we want the rendered trait impls to include documentation\nif and only if it appears on the trait implementation itself\n(since users can just go to the trait definition for anything not\ncovered in the impl docs). This means we expect:\n\n* S1, S2, and S3 to all include top-level trait impl docs.\n* S1, S2, and S3 to exclude all trait definition docs.\n* S1 to show impl docs for `a_method`.\n* S2 to show impl docs for `a_method` and `b_method`.\n* S3 to show impl docs for `b_method`.\n\nThese tests cover those cases.", "tree": {"sha": "05012aec8cc1f37423ce57940b07bd8079a5aea3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/05012aec8cc1f37423ce57940b07bd8079a5aea3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d95ca2822cdc67ddec96d16533e23a10d6bfd136", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d95ca2822cdc67ddec96d16533e23a10d6bfd136", "html_url": "https://github.com/rust-lang/rust/commit/d95ca2822cdc67ddec96d16533e23a10d6bfd136", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d95ca2822cdc67ddec96d16533e23a10d6bfd136/comments", "author": {"login": "pierzchalski", "id": 1725294, "node_id": "MDQ6VXNlcjE3MjUyOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierzchalski", "html_url": "https://github.com/pierzchalski", "followers_url": "https://api.github.com/users/pierzchalski/followers", "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}", "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions", "organizations_url": "https://api.github.com/users/pierzchalski/orgs", "repos_url": "https://api.github.com/users/pierzchalski/repos", "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}", "received_events_url": "https://api.github.com/users/pierzchalski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pierzchalski", "id": 1725294, "node_id": "MDQ6VXNlcjE3MjUyOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1725294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pierzchalski", "html_url": "https://github.com/pierzchalski", "followers_url": "https://api.github.com/users/pierzchalski/followers", "following_url": "https://api.github.com/users/pierzchalski/following{/other_user}", "gists_url": "https://api.github.com/users/pierzchalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/pierzchalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pierzchalski/subscriptions", "organizations_url": "https://api.github.com/users/pierzchalski/orgs", "repos_url": "https://api.github.com/users/pierzchalski/repos", "events_url": "https://api.github.com/users/pierzchalski/events{/privacy}", "received_events_url": "https://api.github.com/users/pierzchalski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8d8669439bd9e636b9209733c24c32063cc611d", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8d8669439bd9e636b9209733c24c32063cc611d", "html_url": "https://github.com/rust-lang/rust/commit/d8d8669439bd9e636b9209733c24c32063cc611d"}], "stats": {"total": 62, "additions": 55, "deletions": 7}, "files": [{"sha": "6675a0fd43b4efd289b99ba9501ae92246f00eec", "filename": "src/test/rustdoc/manual_impl.rs", "status": "modified", "additions": 55, "deletions": 7, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/d95ca2822cdc67ddec96d16533e23a10d6bfd136/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d95ca2822cdc67ddec96d16533e23a10d6bfd136/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmanual_impl.rs?ref=d95ca2822cdc67ddec96d16533e23a10d6bfd136", "patch": "@@ -8,19 +8,67 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+/// Docs associated with the trait definition.\n pub trait T {\n+    /// Docs associated with the trait a_method definition.\n     fn a_method(&self) -> usize;\n+\n+    /// Docs associated with the trait b_method definition.\n+    fn b_method(&self) -> usize {\n+        self.a_method()\n+    }\n+}\n+\n+// @has manual_impl/struct.S1.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S1 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S1 trait a_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n+pub struct S1(usize);\n+\n+/// Docs associated with the S1 trait implementation.\n+impl T for S1 {\n+    /// Docs associated with the S1 trait a_method implementation.\n+    fn a_method(&self) -> usize {\n+        self.0\n+    }\n+}\n+\n+// @has manual_impl/struct.S2.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait a_method implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait b_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n+pub struct S2(usize);\n+\n+/// Docs associated with the S2 trait implementation.\n+impl T for S2 {\n+    /// Docs associated with the S2 trait a_method implementation.\n+    fn a_method(&self) -> usize {\n+        self.0\n+    }\n+\n+    /// Docs associated with the S2 trait b_method implementation.\n+    fn b_method(&self) -> usize {\n+        5\n+    }\n }\n \n-// @has manual_impl/struct.S.html '//*[@class=\"trait\"]' 'T'\n-// @has - '//*[@class=\"docblock\"]' 'Docs associated with the trait implementation.'\n-// @has - '//*[@class=\"docblock\"]' 'Docs associated with the trait method implementation.'\n-pub struct S(usize);\n+// @has manual_impl/struct.S3.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S3 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S3 trait b_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+pub struct S3(usize);\n \n-/// Docs associated with the trait implementation.\n-impl T for S {\n-    /// Docs associated with the trait method implementation.\n+/// Docs associated with the S3 trait implementation.\n+impl T for S3 {\n     fn a_method(&self) -> usize {\n         self.0\n     }\n+\n+    /// Docs associated with the S3 trait b_method implementation.\n+    fn b_method(&self) -> usize {\n+        5\n+    }\n }"}]}