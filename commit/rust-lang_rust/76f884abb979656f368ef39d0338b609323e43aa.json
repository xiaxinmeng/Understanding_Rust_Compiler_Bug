{"sha": "76f884abb979656f368ef39d0338b609323e43aa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2Zjg4NGFiYjk3OTY1NmYzNjhlZjM5ZDAzMzhiNjA5MzIzZTQzYWE=", "commit": {"author": {"name": "Stefan Lankes", "email": "slankes@eonerc.rwth-aachen.de", "date": "2021-05-04T23:03:50Z"}, "committer": {"name": "Stefan Lankes", "email": "slankes@eonerc.rwth-aachen.de", "date": "2021-05-07T08:09:11Z"}, "message": "rename LLVM target for RustyHermit\n\nRustyHermit ist is a library operating system. In this case, we link a static library as kernel to the application. The final result is a bootable application. The library and the application have to use the same target. Currently, the targets are different (see also https://github.com/rust-lang/rust/blob/master/compiler/rustc_target/src/spec/x86_64_unknown_hermit.rs). Consequently, this commit change the LLVM target to 'hermit'.\n\nThis kernel spec is needed to disable the usage of FPU registers, which are not allowed in kernel space. In contrast to Linux, everything is running in ring 0 and also in the same address space.\n\nSigned-off-by: Stefan Lankes <slankes@eonerc.rwth-aachen.de>", "tree": {"sha": "a2c4f3b1cfdde0fff41b8344e78ae0e72b15a015", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2c4f3b1cfdde0fff41b8344e78ae0e72b15a015"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/76f884abb979656f368ef39d0338b609323e43aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/76f884abb979656f368ef39d0338b609323e43aa", "html_url": "https://github.com/rust-lang/rust/commit/76f884abb979656f368ef39d0338b609323e43aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/76f884abb979656f368ef39d0338b609323e43aa/comments", "author": {"login": "stlankes", "id": 5888473, "node_id": "MDQ6VXNlcjU4ODg0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/5888473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stlankes", "html_url": "https://github.com/stlankes", "followers_url": "https://api.github.com/users/stlankes/followers", "following_url": "https://api.github.com/users/stlankes/following{/other_user}", "gists_url": "https://api.github.com/users/stlankes/gists{/gist_id}", "starred_url": "https://api.github.com/users/stlankes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stlankes/subscriptions", "organizations_url": "https://api.github.com/users/stlankes/orgs", "repos_url": "https://api.github.com/users/stlankes/repos", "events_url": "https://api.github.com/users/stlankes/events{/privacy}", "received_events_url": "https://api.github.com/users/stlankes/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stlankes", "id": 5888473, "node_id": "MDQ6VXNlcjU4ODg0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/5888473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stlankes", "html_url": "https://github.com/stlankes", "followers_url": "https://api.github.com/users/stlankes/followers", "following_url": "https://api.github.com/users/stlankes/following{/other_user}", "gists_url": "https://api.github.com/users/stlankes/gists{/gist_id}", "starred_url": "https://api.github.com/users/stlankes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stlankes/subscriptions", "organizations_url": "https://api.github.com/users/stlankes/orgs", "repos_url": "https://api.github.com/users/stlankes/repos", "events_url": "https://api.github.com/users/stlankes/events{/privacy}", "received_events_url": "https://api.github.com/users/stlankes/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc5f2cd2669eba101cef2626d02275cfc6f283e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/dc5f2cd2669eba101cef2626d02275cfc6f283e2", "html_url": "https://github.com/rust-lang/rust/commit/dc5f2cd2669eba101cef2626d02275cfc6f283e2"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "359cb0f6881de502f3ec49bcafc5ce013bd104ce", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_none_hermitkernel.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/76f884abb979656f368ef39d0338b609323e43aa/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76f884abb979656f368ef39d0338b609323e43aa/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs?ref=76f884abb979656f368ef39d0338b609323e43aa", "patch": "@@ -11,7 +11,7 @@ pub fn target() -> Target {\n     base.stack_probes = StackProbeType::Call;\n \n     Target {\n-        llvm_target: \"x86_64-unknown-none-elf\".to_string(),\n+        llvm_target: \"x86_64-unknown-hermit\".to_string(),\n         pointer_width: 64,\n         data_layout: \"e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128\"\n             .to_string(),"}]}