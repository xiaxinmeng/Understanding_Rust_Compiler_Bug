{"sha": "078cc68c527faa35c52a88aca22e46ee7402f356", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA3OGNjNjhjNTI3ZmFhMzVjNTJhODhhY2EyMmU0NmVlNzQwMmYzNTY=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-06-02T15:39:28Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-06-02T15:39:28Z"}, "message": "no indexing", "tree": {"sha": "abe8e0f101d28fda430dd9c2800b67d456de5334", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/abe8e0f101d28fda430dd9c2800b67d456de5334"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/078cc68c527faa35c52a88aca22e46ee7402f356", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXUFMwAAoJEFbW7qD8Z6xGB4YQAIuSKiwyOEbhge2q0do8AkO1\nHfaz+63HOKVyFVG8D/HKc8DoVulFdJX0UfV4s6infIqDzwxRoam7mNM19LeukUe5\n6EqxNWLe3b+Vz2tfSEa0HLC254M5O9dF70+S5dkJFXbHFHBLz9gSrPp3EHhOyXhk\nkaWV0XJaMI9mI84P6U/RS2Arnf5rwn3UT+GGz563AYyFlzS5LALQlwyaXDchLnsW\n8GpEvs7+8XSXFVf6jCSqIgSy2tohZQ1bTLAuU24AI5LLtBaXGwRlc6xW58DXReQe\nuviqJi/fEHDutV7UxppdfitTe/JJ6cpLqHyypYwBabhx5Fhcb4SIG2X5mKvJNRqO\nF+qJ0SDTJmSHN243n3a4IlfWiRcGoXfWnKQhtzl3CpO0QDxad0PVpfx+bUtCCQ5Q\nclDWzguBq65aNJ3253NBiRAyTkJC5lVYACx7sJCCkaVkfGr4nlb3fKUQQphIF2yV\n1z+7K4gIb7J+jBd7r6160tCOnxqhh+ieOcXjCIklBPk+u0DsrV8JRax6vnowgUwu\n4V67ynmei4Z6HNTy4kA6yCKQrjaFPKB1gS0M0mz/P5IcBrqf+H+6tt6D67z6qNbZ\n10PTHVdUQfcn0KDuaOYI+6JACGDGqFeLeDTG20k/ifBRtG9NKuLqy5VUt2I5OI1q\nE+g199OVgxipNA1VuN6X\n=t/RS\n-----END PGP SIGNATURE-----", "payload": "tree abe8e0f101d28fda430dd9c2800b67d456de5334\nparent 7bb8ba46318667da94b1533d371aa28025871a59\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1464881968 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1464881968 +0200\n\nno indexing"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/078cc68c527faa35c52a88aca22e46ee7402f356", "html_url": "https://github.com/rust-lang/rust/commit/078cc68c527faa35c52a88aca22e46ee7402f356", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/078cc68c527faa35c52a88aca22e46ee7402f356/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7bb8ba46318667da94b1533d371aa28025871a59", "url": "https://api.github.com/repos/rust-lang/rust/commits/7bb8ba46318667da94b1533d371aa28025871a59", "html_url": "https://github.com/rust-lang/rust/commit/7bb8ba46318667da94b1533d371aa28025871a59"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "db0c6613f3fcf97a6713dc8909151b43a574d126", "filename": "src/main.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/078cc68c527faa35c52a88aca22e46ee7402f356/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/078cc68c527faa35c52a88aca22e46ee7402f356/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=078cc68c527faa35c52a88aca22e46ee7402f356", "patch": "@@ -126,11 +126,14 @@ pub fn main() {\n         assert_eq!(metadata.version, 1);\n         for target in metadata.packages.remove(0).targets {\n             let args = std::env::args().skip(2);\n-            assert!(!target.kind.is_empty());\n-            if target.kind.len() > 1 || target.kind[0].ends_with(\"lib\") {\n-                process(std::iter::once(\"--lib\".to_owned()).chain(args), &dep_path, &sys_root);\n-            } else if target.kind[0] == \"bin\" {\n-                process(vec![\"--bin\".to_owned(), target.name].into_iter().chain(args), &dep_path, &sys_root);\n+            if let Some(first) = target.kind.get(0) {\n+                if target.kind.len() > 1 || first.ends_with(\"lib\") {\n+                    process(std::iter::once(\"--lib\".to_owned()).chain(args), &dep_path, &sys_root);\n+                } else if first == \"bin\" {\n+                    process(vec![\"--bin\".to_owned(), target.name].into_iter().chain(args), &dep_path, &sys_root);\n+                }\n+            } else {\n+                panic!(\"badly formatted cargo metadata: target::kind is an empty array\");\n             }\n         }\n     } else {"}]}