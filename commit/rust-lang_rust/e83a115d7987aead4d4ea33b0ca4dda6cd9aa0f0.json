{"sha": "e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4M2ExMTVkNzk4N2FlYWQ0ZDRlYTMzYjBjYTRkZGE2Y2Q5YWEwZjA=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-16T23:09:43Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T00:23:20Z"}, "message": "rustc: Parse crate attributes in standalone .rs files\n\nIssue #487", "tree": {"sha": "191ccb5df83a2a0f04f808930c463359f8a7f90a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/191ccb5df83a2a0f04f808930c463359f8a7f90a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "html_url": "https://github.com/rust-lang/rust/commit/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ffae6426630f719b6f1168c359f0f1a8b405bbc6", "url": "https://api.github.com/repos/rust-lang/rust/commits/ffae6426630f719b6f1168c359f0f1a8b405bbc6", "html_url": "https://github.com/rust-lang/rust/commit/ffae6426630f719b6f1168c359f0f1a8b405bbc6"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "33ddcc6d57d0824be36fafd5df92753cf311b1d4", "filename": "src/comp/front/parser.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0/src%2Fcomp%2Ffront%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0/src%2Fcomp%2Ffront%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fparser.rs?ref=e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "patch": "@@ -2285,7 +2285,11 @@ fn parse_native_view(&parser p) -> vec[@ast::view_item] {\n \n fn parse_crate_from_source_file(&parser p) -> @ast::crate {\n     auto lo = p.get_lo_pos();\n-    auto m = parse_mod_items(p, token::EOF, []);\n+    // FIXME (issue #487): Do something with these attrs\n+    auto crate_attrs = parse_inner_attrs_and_next(p);\n+    auto first_item_outer_attrs = crate_attrs._1;\n+    auto m = parse_mod_items(p, token::EOF,\n+                             first_item_outer_attrs);\n     let vec[@ast::crate_directive] cdirs = [];\n     ret @spanned(lo, p.get_lo_pos(), rec(directives=cdirs, module=m));\n }"}, {"sha": "667e537ca3780b1224f17a50d425203806122a1b", "filename": "src/test/run-pass/item-attributes.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0/src%2Ftest%2Frun-pass%2Fitem-attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0/src%2Ftest%2Frun-pass%2Fitem-attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fitem-attributes.rs?ref=e83a115d7987aead4d4ea33b0ca4dda6cd9aa0f0", "patch": "@@ -1,5 +1,11 @@\n // xfail-stage0\n \n+// These are attributes of the implicit crate. Really this just needs to parse\n+// for completeness since .rs files linked from .rc files support this\n+// notation to specify their module's attributes\n+#[attr1 = \"val\"];\n+#[attr2 = \"val\"];\n+\n // These are are attributes of the following mod\n #[attr1 = \"val\"]\n #[attr2 = \"val\"]"}]}