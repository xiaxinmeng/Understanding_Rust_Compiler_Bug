{"sha": "a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5MGI3NmE3MzFmMWQ0M2U3NDViMjRkNGU4YTlmMmZhZTlmMzQ2NTg=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2017-11-15T02:43:03Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-15T02:43:03Z"}, "message": "Merge pull request #2153 from topecongiro/issue-2152\n\nReturn None when a literal exceeds budget", "tree": {"sha": "187c1d54970bd883ead6711dec041e74ce840703", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/187c1d54970bd883ead6711dec041e74ce840703"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaC6m3CRBK7hj4Ov3rIwAAdHIIAExMrTSOWzXc1RhcC2KNLaSy\njgX49KwG0GNcPe7KcMDRYcZlVcoHwGepy2EBDz733UBJo+1g/b+Yg8c09/HQhkUI\nlhdjhfhpC6caCtoALxq3JzjJy6NwITIso3C2F72Gf1MSYtaJvp5SmyZvInMIOtkQ\nJvKA/eVohlK7qeVYuv0mBaLOLyCcUoXjiLyGES+e2Q+FHVQI1zSuck9zHh0rVKti\n+EujO2ZmJL7J2hAgdAwXMq52jmQvAJpwXWA848Ar0gs5ZtqpLhGVtAgWj6sUoepU\nurR25FSOt92inlUsrySvKhVLH6qw/r/9CMapLWsLQY0OF7X2EjgX+JdirnQMDHU=\n=tsdz\n-----END PGP SIGNATURE-----\n", "payload": "tree 187c1d54970bd883ead6711dec041e74ce840703\nparent f76b937e93307f269afb202c4e63cf55ab4d0ecc\nparent bdb8f369e8529c135fcaf8c1f2cf2c931032f067\nauthor Nick Cameron <nrc@ncameron.org> 1510713783 +1300\ncommitter GitHub <noreply@github.com> 1510713783 +1300\n\nMerge pull request #2153 from topecongiro/issue-2152\n\nReturn None when a literal exceeds budget "}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "html_url": "https://github.com/rust-lang/rust/commit/a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f76b937e93307f269afb202c4e63cf55ab4d0ecc", "url": "https://api.github.com/repos/rust-lang/rust/commits/f76b937e93307f269afb202c4e63cf55ab4d0ecc", "html_url": "https://github.com/rust-lang/rust/commit/f76b937e93307f269afb202c4e63cf55ab4d0ecc"}, {"sha": "bdb8f369e8529c135fcaf8c1f2cf2c931032f067", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdb8f369e8529c135fcaf8c1f2cf2c931032f067", "html_url": "https://github.com/rust-lang/rust/commit/bdb8f369e8529c135fcaf8c1f2cf2c931032f067"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "7380dc4850ecc4eba11b302b3277cc9d6c27bca8", "filename": "src/expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "patch": "@@ -1691,7 +1691,7 @@ fn rewrite_pat_expr(\n pub fn rewrite_literal(context: &RewriteContext, l: &ast::Lit, shape: Shape) -> Option<String> {\n     match l.node {\n         ast::LitKind::Str(_, ast::StrStyle::Cooked) => rewrite_string_lit(context, l.span, shape),\n-        _ => Some(context.snippet(l.span)),\n+        _ => wrap_str(context.snippet(l.span), context.config.max_width(), shape),\n     }\n }\n "}, {"sha": "ebae067b154324acef47c4f51f002187d68ec8e5", "filename": "tests/source/match.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/tests%2Fsource%2Fmatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/tests%2Fsource%2Fmatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fmatch.rs?ref=a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "patch": "@@ -434,3 +434,11 @@ impl<'tcx> Const<'tcx> {\n         };\n     }\n }\n+\n+// #2152\n+fn issue_2152() {\n+    match m {\n+        \"aaaaaaaaaaaaa\" | \"bbbbbbbbbbbbb\" | \"cccccccccccccccccccccccccccccccccccccccccccc\" if true => {}\n+        \"bind\" | \"writev\" | \"readv\" | \"sendmsg\" | \"recvmsg\" if android && (aarch64 || x86_64) => true,\n+    }\n+}"}, {"sha": "34d23630df6142ecbc61d023188d51ddda1e10a0", "filename": "tests/target/match.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/tests%2Ftarget%2Fmatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a90b76a731f1d43e745b24d4e8a9f2fae9f34658/tests%2Ftarget%2Fmatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fmatch.rs?ref=a90b76a731f1d43e745b24d4e8a9f2fae9f34658", "patch": "@@ -475,3 +475,14 @@ impl<'tcx> Const<'tcx> {\n         };\n     }\n }\n+\n+// #2152\n+fn issue_2152() {\n+    match m {\n+        \"aaaaaaaaaaaaa\" | \"bbbbbbbbbbbbb\" | \"cccccccccccccccccccccccccccccccccccccccccccc\"\n+            if true => {}\n+        \"bind\" | \"writev\" | \"readv\" | \"sendmsg\" | \"recvmsg\" if android && (aarch64 || x86_64) => {\n+            true\n+        }\n+    }\n+}"}]}