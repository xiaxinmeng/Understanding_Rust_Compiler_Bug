{"sha": "5640bead584165c061b3dfd2353948cddbcda50e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2NDBiZWFkNTg0MTY1YzA2MWIzZGZkMjM1Mzk0OGNkZGJjZGE1MGU=", "commit": {"author": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-06-16T18:51:03Z"}, "committer": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-06-20T19:04:33Z"}, "message": "Teach ret_ty_of_fn_ty to understand native functions. Closes #506.", "tree": {"sha": "75f2d6c4d93fff1d900e4cbf5aedfdefecee1a84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/75f2d6c4d93fff1d900e4cbf5aedfdefecee1a84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5640bead584165c061b3dfd2353948cddbcda50e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5640bead584165c061b3dfd2353948cddbcda50e", "html_url": "https://github.com/rust-lang/rust/commit/5640bead584165c061b3dfd2353948cddbcda50e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5640bead584165c061b3dfd2353948cddbcda50e/comments", "author": null, "committer": null, "parents": [{"sha": "283744ba7826738f85967893416ccb8787971c62", "url": "https://api.github.com/repos/rust-lang/rust/commits/283744ba7826738f85967893416ccb8787971c62", "html_url": "https://github.com/rust-lang/rust/commit/283744ba7826738f85967893416ccb8787971c62"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "657f184e8696c422a6d64f4a4b348d7f23c02d12", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5640bead584165c061b3dfd2353948cddbcda50e/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5640bead584165c061b3dfd2353948cddbcda50e/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=5640bead584165c061b3dfd2353948cddbcda50e", "patch": "@@ -7058,6 +7058,7 @@ fn arg_tys_of_fn(&@crate_ctxt ccx, ast::ann ann) -> vec[ty::arg] {\n fn ret_ty_of_fn_ty(&@crate_ctxt ccx, ty::t t) -> ty::t {\n     alt (ty::struct(ccx.tcx, t)) {\n         case (ty::ty_fn(_, _, ?ret_ty, _, _)) { ret ret_ty; }\n+        case (ty::ty_native_fn(_, _, ?ret_ty)) { ret ret_ty; }\n         case (_) {\n             ccx.sess.bug(\"ret_ty_of_fn_ty() called on non-function type: \" +\n                              ty_to_str(ccx.tcx, t));"}]}