{"sha": "bb01aca86f66954b80798213711e8eadc4b26902", "node_id": "C_kwDOAAsO6NoAKGJiMDFhY2E4NmY2Njk1NGI4MDc5ODIxMzcxMWU4ZWFkYzRiMjY5MDI", "commit": {"author": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2022-05-05T12:32:31Z"}, "committer": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2022-05-05T12:32:31Z"}, "message": "HACK: Move buggy lints to nursery\n\nThose lints are trait_duplication_in_bounds and\ntype_repetition_in_bounds. I don't think those can be fixed on the\nClippy side alone, but need changes in the compiler. So let's move them\nto nursery to get the sync through and then fix them on the rustc side.\n\nAlso adds a regression test that has to be fixed before they can be\nmoved back to pedantic.", "tree": {"sha": "da2ce6237f2419d835a54e653b4169faa30aa8aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da2ce6237f2419d835a54e653b4169faa30aa8aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bb01aca86f66954b80798213711e8eadc4b26902", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEij1UXJ/PQTcb99vTHKDfKvWdaKUFAmJzw/gACgkQHKDfKvWd\naKWltw//d7rwcuB5tW/uulRe18pkJmBOMkp7IIy/0OtsTytNM8bnNHtai79wZd58\nzz9rAldFOSjYlHywqNGBV3hHLVGjtM9n3sTrGrk+wqUkFn4YDN/NAfok4FV9b1uv\ne/nEujSWMcbR4mKY9d8dP27H0UadmBNY2lnf243EQ4nIoDxYkSwM+OrtGcq99xLG\n/wBstg96aqJW376X6PUM+DRDZSa4Y0bNi5OvejtYWT5uG4K9GvcMbWKdBEGQAVKX\nlB4OFOY/4RGxJEDjG2d14gNkJDclM9Xucl+qQZ0L23w/sIzcv1gXQJTQ+rt8hzY9\nMB/jxewmId5Q+cH66OmXADxf2BHOJ1jv4B9gHazzZu2np5J5I3EN7xzZVsJykgGd\nQRC+lXYuYstpoe8ioIQ01fN87fvZPf18RqAP+AubdgKn5B1qh8a/a18FZImPs+Ub\nNwDMoJIHbTwgO5wEgHnHKsNV92yddNQ0BrBCT2Yzc4/zVEZGPBt6am6VAc/6UL8v\njxy3RuwNrtdFqaKMdPf3oQEF7EO00+sQynYqhIbvksodD+7mRsTmMZ01MeNjNKpl\natK2aUpNxLSa3lbdCsHn6oMQmGofRbjMXX/IWJXe3CnwaGl2IS4nxqNn4RxNZ4K1\nJPhp0HMGKJarx6/xenyn0PGxp1851Bk+Fy1GXkFxG2ifPfj1pIo=\n=KVc0\n-----END PGP SIGNATURE-----", "payload": "tree da2ce6237f2419d835a54e653b4169faa30aa8aa\nparent 7e017dbe8d53bb8bce36871a53d8cdc47de5bc1a\nauthor flip1995 <philipp.krones@embecosm.com> 1651753951 +0100\ncommitter flip1995 <philipp.krones@embecosm.com> 1651753951 +0100\n\nHACK: Move buggy lints to nursery\n\nThose lints are trait_duplication_in_bounds and\ntype_repetition_in_bounds. I don't think those can be fixed on the\nClippy side alone, but need changes in the compiler. So let's move them\nto nursery to get the sync through and then fix them on the rustc side.\n\nAlso adds a regression test that has to be fixed before they can be\nmoved back to pedantic.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bb01aca86f66954b80798213711e8eadc4b26902", "html_url": "https://github.com/rust-lang/rust/commit/bb01aca86f66954b80798213711e8eadc4b26902", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bb01aca86f66954b80798213711e8eadc4b26902/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e017dbe8d53bb8bce36871a53d8cdc47de5bc1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e017dbe8d53bb8bce36871a53d8cdc47de5bc1a", "html_url": "https://github.com/rust-lang/rust/commit/7e017dbe8d53bb8bce36871a53d8cdc47de5bc1a"}], "stats": {"total": 34, "additions": 28, "deletions": 6}, "files": [{"sha": "ec187563b3f645a1c3c50d774cc8f2e26bf0d2ab", "filename": "clippy_lints/src/lib.register_nursery.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Flib.register_nursery.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Flib.register_nursery.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_nursery.rs?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -28,6 +28,8 @@ store.register_group(true, \"clippy::nursery\", Some(\"clippy_nursery\"), vec![\n     LintId::of(strings::STRING_LIT_AS_BYTES),\n     LintId::of(suspicious_operation_groupings::SUSPICIOUS_OPERATION_GROUPINGS),\n     LintId::of(trailing_empty_array::TRAILING_EMPTY_ARRAY),\n+    LintId::of(trait_bounds::TRAIT_DUPLICATION_IN_BOUNDS),\n+    LintId::of(trait_bounds::TYPE_REPETITION_IN_BOUNDS),\n     LintId::of(transmute::TRANSMUTE_UNDEFINED_REPR),\n     LintId::of(transmute::USELESS_TRANSMUTE),\n     LintId::of(use_self::USE_SELF),"}, {"sha": "2ee2c6e3358cd030ffd32a1b8287fc379932e348", "filename": "clippy_lints/src/lib.register_pedantic.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_pedantic.rs?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -84,8 +84,6 @@ store.register_group(true, \"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n     LintId::of(semicolon_if_nothing_returned::SEMICOLON_IF_NOTHING_RETURNED),\n     LintId::of(stable_sort_primitive::STABLE_SORT_PRIMITIVE),\n     LintId::of(strings::STRING_ADD_ASSIGN),\n-    LintId::of(trait_bounds::TRAIT_DUPLICATION_IN_BOUNDS),\n-    LintId::of(trait_bounds::TYPE_REPETITION_IN_BOUNDS),\n     LintId::of(transmute::TRANSMUTE_PTR_TO_PTR),\n     LintId::of(types::LINKEDLIST),\n     LintId::of(types::OPTION_OPTION),"}, {"sha": "78e388a49af1d470291e93a36958e66e6c2c6572", "filename": "clippy_lints/src/trait_bounds.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Ftrait_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/clippy_lints%2Fsrc%2Ftrait_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftrait_bounds.rs?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -35,7 +35,7 @@ declare_clippy_lint! {\n     /// ```\n     #[clippy::version = \"1.38.0\"]\n     pub TYPE_REPETITION_IN_BOUNDS,\n-    pedantic,\n+    nursery,\n     \"Types are repeated unnecessary in trait bounds use `+` instead of using `T: _, T: _`\"\n }\n \n@@ -65,7 +65,7 @@ declare_clippy_lint! {\n     /// ```\n     #[clippy::version = \"1.47.0\"]\n     pub TRAIT_DUPLICATION_IN_BOUNDS,\n-    pedantic,\n+    nursery,\n     \"Check if the same trait bounds are specified twice during a function declaration\"\n }\n "}, {"sha": "a21d4c5d637daec8678ce052656d1d86bff631aa", "filename": "tests/ui/trait_duplication_in_bounds.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftrait_duplication_in_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftrait_duplication_in_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftrait_duplication_in_bounds.rs?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -95,4 +95,7 @@ trait FooIter: Iterator<Item = Foo> {\n     }\n }\n \n+// This should not lint\n+fn impl_trait(_: impl AsRef<str>, _: impl AsRef<str>) {}\n+\n fn main() {}"}, {"sha": "d0a4cfb88370e2060620137f7e015632a96ff3e7", "filename": "tests/ui/trait_duplication_in_bounds.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftrait_duplication_in_bounds.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftrait_duplication_in_bounds.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftrait_duplication_in_bounds.stderr?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -67,5 +67,13 @@ LL |         Self: Iterator<Item = Foo>,\n    |\n    = help: consider removing this trait bound\n \n-error: aborting due to 8 previous errors\n+error: this trait bound is already specified in the where clause\n+  --> $DIR/trait_duplication_in_bounds.rs:99:23\n+   |\n+LL | fn impl_trait(_: impl AsRef<str>, _: impl AsRef<str>) {}\n+   |                       ^^^^^^^^^^\n+   |\n+   = help: consider removing this trait bound\n+\n+error: aborting due to 9 previous errors\n "}, {"sha": "d11432f9046111d4ff77f7279250bc7f10083975", "filename": "tests/ui/type_repetition_in_bounds.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftype_repetition_in_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftype_repetition_in_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftype_repetition_in_bounds.rs?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -79,4 +79,7 @@ where\n     u: U,\n }\n \n+// This should not lint\n+fn impl_trait(_: impl AsRef<str>, _: impl AsRef<str>) {}\n+\n fn main() {}"}, {"sha": "abc25e59496bfa13262c3a5b938ce282a7b25edb", "filename": "tests/ui/type_repetition_in_bounds.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftype_repetition_in_bounds.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bb01aca86f66954b80798213711e8eadc4b26902/tests%2Fui%2Ftype_repetition_in_bounds.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftype_repetition_in_bounds.stderr?ref=bb01aca86f66954b80798213711e8eadc4b26902", "patch": "@@ -19,5 +19,13 @@ LL |     Self: Copy + Default + Ord,\n    |\n    = help: consider combining the bounds: `Self: Clone + Copy + Default + Ord`\n \n-error: aborting due to 2 previous errors\n+error: this type has already been used as a bound predicate\n+  --> $DIR/type_repetition_in_bounds.rs:83:43\n+   |\n+LL | fn impl_trait(_: impl AsRef<str>, _: impl AsRef<str>) {}\n+   |                                           ^^^^^^^^^^\n+   |\n+   = help: consider combining the bounds: `impl AsRef<str>: AsRef<str> + AsRef<str>`\n+\n+error: aborting due to 3 previous errors\n "}]}