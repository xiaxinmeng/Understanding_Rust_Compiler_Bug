{"sha": "d0e08dffcf2353af76de298cd9cb4b9d55f66199", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwZTA4ZGZmY2YyMzUzYWY3NmRlMjk4Y2Q5Y2I0YjlkNTVmNjYxOTk=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-08-28T00:59:49Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-08-28T00:59:49Z"}, "message": "Add auto trait that shouldn't leak TAIT test", "tree": {"sha": "355701d99d8c9129afe98d267fbdb1bc21907550", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/355701d99d8c9129afe98d267fbdb1bc21907550"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0e08dffcf2353af76de298cd9cb4b9d55f66199", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmEpioUACgkQgTGiTgx5\n76/mEBAAprUrDq3CMZH2cngba7ZI3FapfbAYp1MDxU42BVH2ovfvF5Cy6BnnUnZv\nOw4gM8pBbqAjrqLeMpmvqHvGaCNZEsoXJQHuIo/o58i7tmNhx48mXXlGBHCnrxcW\nRcIgi969/iq7pukrmg/JKnJJCjD7ynYiry3tW6KBx3CHTc1vHe6n9ElYZy+uDpxP\n58MQimGobtQrc2VK1PpMXUBR5QfzyfySDh+XGF/OsH2qi+3pT4cY1tnR/HQuBsx/\nNuwB6aCCnr8iI02dNn8IMYLPWsLxheeoe6yqGqn1lBDXjS4yYuyoVYeLwyZTpTof\ntny50e99VfHJbiOMFmmwcmSVBV0P3/MYUanhlWP80gpzqYZDS7nJcyoYfa6iq6YS\n4WDGA7CwHod0g94GhUMDN/3tQ7To8omdCumhHBRnfM8WkoKqj3Gp4Lq+K1xoLW4a\n/mQajpb83E6lCzIW8I7kOIobMaep5CqAaRAPvvf3Gi3cDxOTxUzMEwk+cryG6cc+\nFv3q6bPADKE8X6ppe1IFiX0th2uPUc2t0stXbJSU4DrxMg5B7hp6/g2sTuzrZJqn\nGAOWjxPqE7eJgcXi3dTSuKZKoPgJvkVETfXYiKGYxFPAP5tl+CtTQQCyudf5RBDm\nQ3v1W/InpSkUz+M0WAElfjEUrgqABgomeqyL+Ar7oqhCR5fX+3A=\n=8UpB\n-----END PGP SIGNATURE-----", "payload": "tree 355701d99d8c9129afe98d267fbdb1bc21907550\nparent 5ac46d7bd88cf992d108d14913b599903140ce9d\nauthor Santiago Pastorino <spastorino@gmail.com> 1630112389 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1630112389 -0300\n\nAdd auto trait that shouldn't leak TAIT test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0e08dffcf2353af76de298cd9cb4b9d55f66199", "html_url": "https://github.com/rust-lang/rust/commit/d0e08dffcf2353af76de298cd9cb4b9d55f66199", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0e08dffcf2353af76de298cd9cb4b9d55f66199/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5ac46d7bd88cf992d108d14913b599903140ce9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ac46d7bd88cf992d108d14913b599903140ce9d", "html_url": "https://github.com/rust-lang/rust/commit/5ac46d7bd88cf992d108d14913b599903140ce9d"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "745379efa6df90e41b136773128944fb2e6d9add", "filename": "src/test/ui/type-alias-impl-trait/auto-trait-leakage2.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/d0e08dffcf2353af76de298cd9cb4b9d55f66199/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0e08dffcf2353af76de298cd9cb4b9d55f66199/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.rs?ref=d0e08dffcf2353af76de298cd9cb4b9d55f66199", "patch": "@@ -0,0 +1,19 @@\n+#![feature(type_alias_impl_trait)]\n+#![allow(dead_code)]\n+\n+mod m {\n+    use std::rc::Rc;\n+\n+    type Foo = impl std::fmt::Debug;\n+\n+    pub fn foo() -> Foo {\n+        Rc::new(22_u32)\n+    }\n+}\n+\n+fn is_send<T: Send>(_: T) {}\n+\n+fn main() {\n+    is_send(m::foo());\n+    //~^ ERROR: `Rc<u32>` cannot be sent between threads safely [E0277]\n+}"}, {"sha": "d60be4b1ccf9ca04289899c22b46222d5484dde4", "filename": "src/test/ui/type-alias-impl-trait/auto-trait-leakage2.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/d0e08dffcf2353af76de298cd9cb4b9d55f66199/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d0e08dffcf2353af76de298cd9cb4b9d55f66199/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fauto-trait-leakage2.stderr?ref=d0e08dffcf2353af76de298cd9cb4b9d55f66199", "patch": "@@ -0,0 +1,20 @@\n+error[E0277]: `Rc<u32>` cannot be sent between threads safely\n+  --> $DIR/auto-trait-leakage2.rs:17:5\n+   |\n+LL |     type Foo = impl std::fmt::Debug;\n+   |                -------------------- within this `impl Debug`\n+...\n+LL |     is_send(m::foo());\n+   |     ^^^^^^^ `Rc<u32>` cannot be sent between threads safely\n+   |\n+   = help: within `impl Debug`, the trait `Send` is not implemented for `Rc<u32>`\n+   = note: required because it appears within the type `impl Debug`\n+note: required by a bound in `is_send`\n+  --> $DIR/auto-trait-leakage2.rs:14:15\n+   |\n+LL | fn is_send<T: Send>(_: T) {}\n+   |               ^^^^ required by this bound in `is_send`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}