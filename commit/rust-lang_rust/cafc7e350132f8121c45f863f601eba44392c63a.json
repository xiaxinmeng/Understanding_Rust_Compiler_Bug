{"sha": "cafc7e350132f8121c45f863f601eba44392c63a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhZmM3ZTM1MDEzMmY4MTIxYzQ1Zjg2M2Y2MDFlYmE0NDM5MmM2M2E=", "commit": {"author": {"name": "longfangsong", "email": "longfangsong@icloud.com", "date": "2021-09-12T03:20:28Z"}, "committer": {"name": "longfangsong", "email": "longfangsong@icloud.com", "date": "2021-09-12T03:20:28Z"}, "message": "Fix doc test", "tree": {"sha": "8cd2ff0a4751f881c2e7c2babcc4b946dc61cb5d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8cd2ff0a4751f881c2e7c2babcc4b946dc61cb5d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cafc7e350132f8121c45f863f601eba44392c63a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cafc7e350132f8121c45f863f601eba44392c63a", "html_url": "https://github.com/rust-lang/rust/commit/cafc7e350132f8121c45f863f601eba44392c63a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cafc7e350132f8121c45f863f601eba44392c63a/comments", "author": {"login": "longfangsong", "id": 13777628, "node_id": "MDQ6VXNlcjEzNzc3NjI4", "avatar_url": "https://avatars.githubusercontent.com/u/13777628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/longfangsong", "html_url": "https://github.com/longfangsong", "followers_url": "https://api.github.com/users/longfangsong/followers", "following_url": "https://api.github.com/users/longfangsong/following{/other_user}", "gists_url": "https://api.github.com/users/longfangsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/longfangsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/longfangsong/subscriptions", "organizations_url": "https://api.github.com/users/longfangsong/orgs", "repos_url": "https://api.github.com/users/longfangsong/repos", "events_url": "https://api.github.com/users/longfangsong/events{/privacy}", "received_events_url": "https://api.github.com/users/longfangsong/received_events", "type": "User", "site_admin": false}, "committer": {"login": "longfangsong", "id": 13777628, "node_id": "MDQ6VXNlcjEzNzc3NjI4", "avatar_url": "https://avatars.githubusercontent.com/u/13777628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/longfangsong", "html_url": "https://github.com/longfangsong", "followers_url": "https://api.github.com/users/longfangsong/followers", "following_url": "https://api.github.com/users/longfangsong/following{/other_user}", "gists_url": "https://api.github.com/users/longfangsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/longfangsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/longfangsong/subscriptions", "organizations_url": "https://api.github.com/users/longfangsong/orgs", "repos_url": "https://api.github.com/users/longfangsong/repos", "events_url": "https://api.github.com/users/longfangsong/events{/privacy}", "received_events_url": "https://api.github.com/users/longfangsong/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3edc25dc2699c90621d20d85e7883d24edbf1794", "url": "https://api.github.com/repos/rust-lang/rust/commits/3edc25dc2699c90621d20d85e7883d24edbf1794", "html_url": "https://github.com/rust-lang/rust/commit/3edc25dc2699c90621d20d85e7883d24edbf1794"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "5991c0989feca717f68808ce845f62e7f44a426e", "filename": "crates/ide_assists/src/handlers/promote_mod_file.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/cafc7e350132f8121c45f863f601eba44392c63a/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fpromote_mod_file.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cafc7e350132f8121c45f863f601eba44392c63a/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fpromote_mod_file.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fpromote_mod_file.rs?ref=cafc7e350132f8121c45f863f601eba44392c63a", "patch": "@@ -14,12 +14,13 @@ use crate::assist_context::{AssistContext, Assists};\n // Moves inline module's contents to a separate file.\n //\n // ```\n-// // a.rs\n+// //- /main.rs\n+// mod a;\n+// //- /a.rs\n // $0fn t() {}\n // ```\n // ->\n // ```\n-// // /a/mod.rs\n // fn t() {}\n // ```\n pub(crate) fn promote_mod_file(acc: &mut Assists, ctx: &AssistContext) -> Option<()> {"}, {"sha": "98e0bd67489070ddf1e37601b2e668a718ec1a91", "filename": "crates/ide_assists/src/tests/generated.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/cafc7e350132f8121c45f863f601eba44392c63a/crates%2Fide_assists%2Fsrc%2Ftests%2Fgenerated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cafc7e350132f8121c45f863f601eba44392c63a/crates%2Fide_assists%2Fsrc%2Ftests%2Fgenerated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Ftests%2Fgenerated.rs?ref=cafc7e350132f8121c45f863f601eba44392c63a", "patch": "@@ -1226,6 +1226,22 @@ mod foo;\n     )\n }\n \n+#[test]\n+fn doctest_promote_mod_file() {\n+    check_doc_test(\n+        \"promote_mod_file\",\n+        r#####\"\n+//- /main.rs\n+mod a;\n+//- /a.rs\n+$0fn t() {}\n+\"#####,\n+        r#####\"\n+fn t() {}\n+\"#####,\n+    )\n+}\n+\n #[test]\n fn doctest_pull_assignment_up() {\n     check_doc_test("}]}