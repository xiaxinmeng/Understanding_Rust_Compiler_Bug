{"sha": "64caa027b884b3458997318a01e99812e6bb6fca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0Y2FhMDI3Yjg4NGIzNDU4OTk3MzE4YTAxZTk5ODEyZTZiYjZmY2E=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-12-20T20:01:36Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-12-20T20:01:36Z"}, "message": "Parse attributes in tuple expressions", "tree": {"sha": "01ddecdadffd74dae1e2f8f786ea246eb1d730da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01ddecdadffd74dae1e2f8f786ea246eb1d730da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/64caa027b884b3458997318a01e99812e6bb6fca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/64caa027b884b3458997318a01e99812e6bb6fca", "html_url": "https://github.com/rust-lang/rust/commit/64caa027b884b3458997318a01e99812e6bb6fca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/64caa027b884b3458997318a01e99812e6bb6fca/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4be9ed675ed2550e8cb10031fd4c4cfb01d2a2ed", "url": "https://api.github.com/repos/rust-lang/rust/commits/4be9ed675ed2550e8cb10031fd4c4cfb01d2a2ed", "html_url": "https://github.com/rust-lang/rust/commit/4be9ed675ed2550e8cb10031fd4c4cfb01d2a2ed"}], "stats": {"total": 59, "additions": 56, "deletions": 3}, "files": [{"sha": "e897d5a52f04ee55cdd5214e22f730f4067a99ec", "filename": "crates/parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=64caa027b884b3458997318a01e99812e6bb6fca", "patch": "@@ -156,11 +156,13 @@ fn tuple_expr(p: &mut Parser) -> CompletedMarker {\n     let mut saw_expr = false;\n     while !p.at(EOF) && !p.at(T![')']) {\n         saw_expr = true;\n-        if !p.at_ts(EXPR_FIRST) {\n-            p.error(\"expected expression\");\n+\n+        // test tuple_attrs\n+        // const A: (i64, i64) = (1, #[cfg(test)] 2);\n+        if !expr_with_attrs(p) {\n             break;\n         }\n-        expr(p);\n+\n         if !p.at(T![')']) {\n             saw_comma = true;\n             p.expect(T![,]);"}, {"sha": "d34b21abe8804444a98ec6b63af78582903b4d4d", "filename": "crates/syntax/test_data/parser/inline/ok/0154_tuple_attrs.rast", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rast?ref=64caa027b884b3458997318a01e99812e6bb6fca", "patch": "@@ -0,0 +1,50 @@\n+SOURCE_FILE@0..43\n+  CONST@0..42\n+    CONST_KW@0..5 \"const\"\n+    WHITESPACE@5..6 \" \"\n+    NAME@6..7\n+      IDENT@6..7 \"A\"\n+    COLON@7..8 \":\"\n+    WHITESPACE@8..9 \" \"\n+    TUPLE_TYPE@9..19\n+      L_PAREN@9..10 \"(\"\n+      PATH_TYPE@10..13\n+        PATH@10..13\n+          PATH_SEGMENT@10..13\n+            NAME_REF@10..13\n+              IDENT@10..13 \"i64\"\n+      COMMA@13..14 \",\"\n+      WHITESPACE@14..15 \" \"\n+      PATH_TYPE@15..18\n+        PATH@15..18\n+          PATH_SEGMENT@15..18\n+            NAME_REF@15..18\n+              IDENT@15..18 \"i64\"\n+      R_PAREN@18..19 \")\"\n+    WHITESPACE@19..20 \" \"\n+    EQ@20..21 \"=\"\n+    WHITESPACE@21..22 \" \"\n+    TUPLE_EXPR@22..41\n+      L_PAREN@22..23 \"(\"\n+      LITERAL@23..24\n+        INT_NUMBER@23..24 \"1\"\n+      COMMA@24..25 \",\"\n+      WHITESPACE@25..26 \" \"\n+      LITERAL@26..40\n+        ATTR@26..38\n+          POUND@26..27 \"#\"\n+          L_BRACK@27..28 \"[\"\n+          PATH@28..31\n+            PATH_SEGMENT@28..31\n+              NAME_REF@28..31\n+                IDENT@28..31 \"cfg\"\n+          TOKEN_TREE@31..37\n+            L_PAREN@31..32 \"(\"\n+            IDENT@32..36 \"test\"\n+            R_PAREN@36..37 \")\"\n+          R_BRACK@37..38 \"]\"\n+        WHITESPACE@38..39 \" \"\n+        INT_NUMBER@39..40 \"2\"\n+      R_PAREN@40..41 \")\"\n+    SEMICOLON@41..42 \";\"\n+  WHITESPACE@42..43 \"\\n\""}, {"sha": "f84b7ab31dc0443c42e60cca13d0abd32bd3c679", "filename": "crates/syntax/test_data/parser/inline/ok/0154_tuple_attrs.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64caa027b884b3458997318a01e99812e6bb6fca/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0154_tuple_attrs.rs?ref=64caa027b884b3458997318a01e99812e6bb6fca", "patch": "@@ -0,0 +1 @@\n+const A: (i64, i64) = (1, #[cfg(test)] 2);"}]}