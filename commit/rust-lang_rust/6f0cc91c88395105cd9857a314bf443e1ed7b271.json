{"sha": "6f0cc91c88395105cd9857a314bf443e1ed7b271", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmMGNjOTFjODgzOTUxMDVjZDk4NTdhMzE0YmY0NDNlMWVkN2IyNzE=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-06-09T08:56:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-09T08:56:28Z"}, "message": "Merge #4803\n\n4803: Parse default unsafe fn r=matklad a=Avi-D-coder\n\n\n\nCo-authored-by: Avi Dessauer <avi.the.coder@gmail.com>\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "a964cd7ace762bfdac7f9371d47a21c76ca7d056", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a964cd7ace762bfdac7f9371d47a21c76ca7d056"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f0cc91c88395105cd9857a314bf443e1ed7b271", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe3068CRBK7hj4Ov3rIwAAdHIIAKIPggwOnsOsdsq3U6TLzPdD\ndwqymnmQIYAbTiH58JF3GP2Ta280i2bf2FTwCW6q+7uPrxRh7fJ1qBUsFhkK2c1s\nd/WAAwyz/BMoscFuclsmj0GRuKo87RiAX/N4I4+b68PCfhx+WO5V1uvfdgm9jH+r\n4GhQ9Z04QzpWA0IMaOVeR5X9yf0EZqil7qrRMGfbdGkQM8/wbdgXG/+HAoJpLr7E\nGQPn4ClQm8GqOFFUsrLLZwvuKA4TIXUKa3J5WH1RtOcuJYKS20tzI5eIsYBe6ttY\nSCWMTP2CHkbO+SGcACtwvJWQ6/DfmdxDxq2nPKwlQJKoDvW5AYGEuhjgYXHW0rY=\n=HBNS\n-----END PGP SIGNATURE-----\n", "payload": "tree a964cd7ace762bfdac7f9371d47a21c76ca7d056\nparent 7ae2228039819b7a8f2ef74c9e607ff35d121ee3\nparent 2785362a1f9a3436072152e5499ac5d7c4d98cc4\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1591692988 +0000\ncommitter GitHub <noreply@github.com> 1591692988 +0000\n\nMerge #4803\n\n4803: Parse default unsafe fn r=matklad a=Avi-D-coder\n\n\n\nCo-authored-by: Avi Dessauer <avi.the.coder@gmail.com>\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f0cc91c88395105cd9857a314bf443e1ed7b271", "html_url": "https://github.com/rust-lang/rust/commit/6f0cc91c88395105cd9857a314bf443e1ed7b271", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f0cc91c88395105cd9857a314bf443e1ed7b271/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ae2228039819b7a8f2ef74c9e607ff35d121ee3", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ae2228039819b7a8f2ef74c9e607ff35d121ee3", "html_url": "https://github.com/rust-lang/rust/commit/7ae2228039819b7a8f2ef74c9e607ff35d121ee3"}, {"sha": "2785362a1f9a3436072152e5499ac5d7c4d98cc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/2785362a1f9a3436072152e5499ac5d7c4d98cc4", "html_url": "https://github.com/rust-lang/rust/commit/2785362a1f9a3436072152e5499ac5d7c4d98cc4"}], "stats": {"total": 50, "additions": 49, "deletions": 1}, "files": [{"sha": "97642bc244999bc537d903a4178611558ac06b4f", "filename": "crates/ra_parser/src/grammar/items.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs?ref=6f0cc91c88395105cd9857a314bf443e1ed7b271", "patch": "@@ -121,7 +121,12 @@ pub(super) fn maybe_item(p: &mut Parser, m: Marker, flavor: ItemFlavor) -> Resul\n             T![unsafe] => {\n                 // test default_unsafe_impl\n                 // default unsafe impl Foo {}\n-                if p.nth(2) == T![impl] {\n+\n+                // test default_unsafe_fn\n+                // impl T for Foo {\n+                //     default unsafe fn foo() {}\n+                // }\n+                if p.nth(2) == T![impl] || p.nth(2) == T![fn] {\n                     p.bump_remap(T![default]);\n                     p.bump(T![unsafe]);\n                     has_mods = true;"}, {"sha": "adb6159f4725d6b747cfb667a43d882cf11d773d", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0163_default_unsafe_fn.rast", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast", "raw_url": "https://github.com/rust-lang/rust/raw/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast?ref=6f0cc91c88395105cd9857a314bf443e1ed7b271", "patch": "@@ -0,0 +1,40 @@\n+SOURCE_FILE@0..50\n+  IMPL_DEF@0..49\n+    IMPL_KW@0..4 \"impl\"\n+    WHITESPACE@4..5 \" \"\n+    PATH_TYPE@5..6\n+      PATH@5..6\n+        PATH_SEGMENT@5..6\n+          NAME_REF@5..6\n+            IDENT@5..6 \"T\"\n+    WHITESPACE@6..7 \" \"\n+    FOR_KW@7..10 \"for\"\n+    WHITESPACE@10..11 \" \"\n+    PATH_TYPE@11..14\n+      PATH@11..14\n+        PATH_SEGMENT@11..14\n+          NAME_REF@11..14\n+            IDENT@11..14 \"Foo\"\n+    WHITESPACE@14..15 \" \"\n+    ITEM_LIST@15..49\n+      L_CURLY@15..16 \"{\"\n+      WHITESPACE@16..21 \"\\n    \"\n+      FN_DEF@21..47\n+        DEFAULT_KW@21..28 \"default\"\n+        WHITESPACE@28..29 \" \"\n+        UNSAFE_KW@29..35 \"unsafe\"\n+        WHITESPACE@35..36 \" \"\n+        FN_KW@36..38 \"fn\"\n+        WHITESPACE@38..39 \" \"\n+        NAME@39..42\n+          IDENT@39..42 \"foo\"\n+        PARAM_LIST@42..44\n+          L_PAREN@42..43 \"(\"\n+          R_PAREN@43..44 \")\"\n+        WHITESPACE@44..45 \" \"\n+        BLOCK_EXPR@45..47\n+          L_CURLY@45..46 \"{\"\n+          R_CURLY@46..47 \"}\"\n+      WHITESPACE@47..48 \"\\n\"\n+      R_CURLY@48..49 \"}\"\n+  WHITESPACE@49..50 \"\\n\""}, {"sha": "12926cd8a1b408b365566265f66b170ba194b0de", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0163_default_unsafe_fn.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f0cc91c88395105cd9857a314bf443e1ed7b271/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs?ref=6f0cc91c88395105cd9857a314bf443e1ed7b271", "patch": "@@ -0,0 +1,3 @@\n+impl T for Foo {\n+    default unsafe fn foo() {}\n+}"}]}