{"sha": "35466adbfe90939552580c15161a1ee9b9f1c4a5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1NDY2YWRiZmU5MDkzOTU1MjU4MGMxNTE2MWExZWU5YjlmMWM0YTU=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-16T08:38:12Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-16T08:43:36Z"}, "message": "Generalize ListItems to allow a separator other than comma", "tree": {"sha": "5cb10a48ab6fa85a0530ce3849f5946ed4af6d5e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5cb10a48ab6fa85a0530ce3849f5946ed4af6d5e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/35466adbfe90939552580c15161a1ee9b9f1c4a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/35466adbfe90939552580c15161a1ee9b9f1c4a5", "html_url": "https://github.com/rust-lang/rust/commit/35466adbfe90939552580c15161a1ee9b9f1c4a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/35466adbfe90939552580c15161a1ee9b9f1c4a5/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3bd1cc4fe072ccc6bd53ee57c90af3debca377fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/3bd1cc4fe072ccc6bd53ee57c90af3debca377fc", "html_url": "https://github.com/rust-lang/rust/commit/3bd1cc4fe072ccc6bd53ee57c90af3debca377fc"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "8290f1b09a13636b8f5554191bbef32a55500a1f", "filename": "src/closures.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fclosures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fclosures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fclosures.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -194,6 +194,7 @@ fn rewrite_closure_fn_decl(\n         context.codemap,\n         fn_decl.inputs.iter(),\n         \"|\",\n+        \",\",\n         |arg| span_lo_for_arg(arg),\n         |arg| span_hi_for_arg(context, arg),\n         |arg| arg.rewrite(context, arg_shape),"}, {"sha": "0b47bb847ed8e3e0c3901e4acfda7d3efdedf37a", "filename": "src/expr.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -430,6 +430,7 @@ where\n         context.codemap,\n         expr_iter,\n         \"]\",\n+        \",\",\n         |item| item.span.lo(),\n         |item| item.span.hi(),\n         |item| item.rewrite(context, nested_shape),\n@@ -1341,6 +1342,7 @@ fn rewrite_match_arms(\n             .zip(is_last_iter)\n             .map(|(arm, is_last)| ArmWrapper::new(arm, is_last)),\n         \"}\",\n+        \"|\",\n         |arm| arm.arm.span().lo(),\n         |arm| arm.arm.span().hi(),\n         |arm| arm.rewrite(context, arm_shape),\n@@ -1874,6 +1876,7 @@ where\n         context.codemap,\n         args.iter(),\n         \")\",\n+        \",\",\n         |item| item.span().lo(),\n         |item| item.span().hi(),\n         |item| item.rewrite(context, shape),\n@@ -2301,6 +2304,7 @@ fn rewrite_struct_lit<'a>(\n             context.codemap,\n             field_iter,\n             \"}\",\n+            \",\",\n             span_lo,\n             span_hi,\n             rewrite,\n@@ -2451,6 +2455,7 @@ where\n         context.codemap,\n         items,\n         \")\",\n+        \",\",\n         |item| item.span().lo(),\n         |item| item.span().hi(),\n         |item| item.rewrite(context, nested_shape),"}, {"sha": "56d23fa98277ec372a55abdfe8b9cdf1a61e1173", "filename": "src/imports.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -212,6 +212,7 @@ fn rewrite_imports(\n         context.codemap,\n         use_items.iter(),\n         \"\",\n+        \";\",\n         |item| item.span().lo(),\n         |item| item.span().hi(),\n         |item| {\n@@ -442,6 +443,7 @@ fn rewrite_use_list(\n             context.codemap,\n             path_list.iter(),\n             \"}\",\n+            \",\",\n             |vpi| vpi.span.lo(),\n             |vpi| vpi.span.hi(),\n             rewrite_path_item,"}, {"sha": "2dda5bc16bd27de250df1eb03c8d71d1150faa3c", "filename": "src/items.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -489,6 +489,7 @@ impl<'a> FmtVisitor<'a> {\n                 self.codemap,\n                 enum_def.variants.iter(),\n                 \"}\",\n+                \",\",\n                 |f| if !f.node.attrs.is_empty() {\n                     f.node.attrs[0].span.lo()\n                 } else {\n@@ -2226,6 +2227,7 @@ fn rewrite_args(\n                 .map(ArgumentKind::Regular)\n                 .chain(variadic_arg),\n             \")\",\n+            \",\",\n             |arg| match *arg {\n                 ArgumentKind::Regular(arg) => span_lo_for_arg(arg),\n                 ArgumentKind::Variadic(start) => start,\n@@ -2447,6 +2449,7 @@ fn rewrite_generics_inner(\n         context.codemap,\n         generics_args,\n         \">\",\n+        \",\",\n         |arg| arg.span().lo(),\n         |arg| arg.span().hi(),\n         |arg| arg.rewrite(context, shape),\n@@ -2589,6 +2592,7 @@ fn rewrite_where_clause_rfc_style(\n         context.codemap,\n         where_clause.predicates.iter(),\n         terminator,\n+        \",\",\n         |pred| pred.span().lo(),\n         |pred| pred.span().hi(),\n         |pred| pred.rewrite(context, clause_shape),\n@@ -2702,6 +2706,7 @@ fn rewrite_where_clause(\n         context.codemap,\n         where_clause.predicates.iter(),\n         terminator,\n+        \",\",\n         |pred| pred.span().lo(),\n         |pred| pred.span().hi(),\n         |pred| pred.rewrite(context, Shape::legacy(budget, offset)),"}, {"sha": "89382ab76ecdffc644f9f5045a839bb1195c1d38", "filename": "src/lists.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -509,6 +509,7 @@ where\n     prev_span_end: BytePos,\n     next_span_start: BytePos,\n     terminator: &'a str,\n+    separator: &'a str,\n     leave_last: bool,\n }\n \n@@ -581,7 +582,7 @@ where\n                         }\n                     }\n                     let newline_index = post_snippet.find('\\n');\n-                    if let Some(separator_index) = post_snippet.find_uncommented(\",\") {\n+                    if let Some(separator_index) = post_snippet.find_uncommented(self.separator) {\n                         match (block_open_index, newline_index) {\n                             // Separator before comment, with the next item on same line.\n                             // Comment belongs to next item.\n@@ -677,6 +678,7 @@ pub fn itemize_list<'a, T, I, F1, F2, F3>(\n     codemap: &'a CodeMap,\n     inner: I,\n     terminator: &'a str,\n+    separator: &'a str,\n     get_lo: F1,\n     get_hi: F2,\n     get_item_string: F3,\n@@ -699,6 +701,7 @@ where\n         prev_span_end: prev_span_end,\n         next_span_start: next_span_start,\n         terminator: terminator,\n+        separator: separator,\n         leave_last: leave_last,\n     }\n }"}, {"sha": "f4bb59e5127ac69032d6b1ef9ac8d0faee91d29e", "filename": "src/patterns.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -151,6 +151,7 @@ fn rewrite_struct_pat(\n         context.codemap,\n         fields.iter(),\n         terminator,\n+        \",\",\n         |f| f.span.lo(),\n         |f| f.span.hi(),\n         |f| f.node.rewrite(context, v_shape),\n@@ -347,6 +348,7 @@ fn count_wildcard_suffix_len(\n         context.codemap,\n         patterns.iter(),\n         \")\",\n+        \",\",\n         |item| item.span().lo(),\n         |item| item.span().hi(),\n         |item| item.rewrite(context, shape),"}, {"sha": "ab4de7349b1c17fdecf6c38753b33e9472b13de7", "filename": "src/types.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -230,6 +230,7 @@ fn rewrite_segment(\n                     context.codemap,\n                     param_list.into_iter(),\n                     \">\",\n+                    \",\",\n                     |param| param.get_span().lo(),\n                     |param| param.get_span().hi(),\n                     |seg| seg.rewrite(context, generics_shape),\n@@ -321,6 +322,7 @@ where\n             .map(|i| ArgumentKind::Regular(Box::new(i)))\n             .chain(variadic_arg),\n         \")\",\n+        \",\",\n         |arg| match *arg {\n             ArgumentKind::Regular(ref ty) => ty.span().lo(),\n             ArgumentKind::Variadic(start) => start,"}, {"sha": "bb4bad7852e0432925ce229d9aa5742ee584dc65", "filename": "src/vertical.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fvertical.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fvertical.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvertical.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -231,6 +231,7 @@ fn rewrite_aligned_items_inner<T: AlignedItem>(\n         context.codemap,\n         fields.iter(),\n         \"}\",\n+        \",\",\n         |field| field.get_span().lo(),\n         |field| field.get_span().hi(),\n         |field| field.rewrite_aligned_item(context, item_shape, field_prefix_max_width),"}, {"sha": "79bade0cc20bb05d3be8792076313306f4c6acfd", "filename": "src/visitor.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35466adbfe90939552580c15161a1ee9b9f1c4a5/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=35466adbfe90939552580c15161a1ee9b9f1c4a5", "patch": "@@ -750,6 +750,7 @@ impl Rewrite for ast::MetaItem {\n                     context.codemap,\n                     list.iter(),\n                     \")\",\n+                    \",\",\n                     |nested_meta_item| nested_meta_item.span.lo(),\n                     |nested_meta_item| nested_meta_item.span.hi(),\n                     |nested_meta_item| nested_meta_item.rewrite(context, item_shape),"}]}