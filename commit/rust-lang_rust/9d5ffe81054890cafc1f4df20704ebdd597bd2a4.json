{"sha": "9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkNWZmZTgxMDU0ODkwY2FmYzFmNGRmMjA3MDRlYmRkNTk3YmQyYTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-03-10T22:02:41Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-03-10T22:02:41Z"}, "message": "Auto merge of #5300 - JohnTitor:edition-flag, r=flip1995\n\nUse `edition:2018` flag more widely\n\nNow we recommend using `// edition:2018`, so let's use it more widely.\nAlso replace a too old example with new one in the docs.\n\nchangelog: none", "tree": {"sha": "0fff47a3fbcf831ba98d82152f76d83776bc3af1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0fff47a3fbcf831ba98d82152f76d83776bc3af1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "html_url": "https://github.com/rust-lang/rust/commit/9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23bd427f925e44a9244a40187659ca2a2eb0a6ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/23bd427f925e44a9244a40187659ca2a2eb0a6ee", "html_url": "https://github.com/rust-lang/rust/commit/23bd427f925e44a9244a40187659ca2a2eb0a6ee"}, {"sha": "d4eb4968560456827e71cdf1a48b5a4585168ec5", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4eb4968560456827e71cdf1a48b5a4585168ec5", "html_url": "https://github.com/rust-lang/rust/commit/d4eb4968560456827e71cdf1a48b5a4585168ec5"}], "stats": {"total": 23, "additions": 13, "deletions": 10}, "files": [{"sha": "b1f9be44b73d7f1942adf4c47fd6cd6d3b2bbe9c", "filename": "CONTRIBUTING.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/CONTRIBUTING.md", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/CONTRIBUTING.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CONTRIBUTING.md?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -54,7 +54,8 @@ and resolved paths.\n [`T-AST`] issues will generally need you to match against a predefined syntax structure.\n To figure out how this syntax structure is encoded in the AST, it is recommended to run\n `rustc -Z ast-json` on an example of the structure and compare with the [nodes in the AST docs].\n-Usually the lint will end up to be a nested series of matches and ifs, [like so].\n+Usually the lint will end up to be a nested series of matches and ifs, [like so][deep-nesting].\n+But we can make it nest-less by using [if_chain] macro, [like this][nest-less].\n \n [`E-medium`] issues are generally pretty easy too, though it's recommended you work on an E-easy issue first.\n They are mostly classified as [`E-medium`], since they might be somewhat involved code wise,\n@@ -71,7 +72,9 @@ an AST expression). `match_def_path()` in Clippy's `utils` module can also be us\n [`E-medium`]: https://github.com/rust-lang/rust-clippy/labels/E-medium\n [`ty`]: https://doc.rust-lang.org/nightly/nightly-rustc/rustc/ty\n [nodes in the AST docs]: https://doc.rust-lang.org/nightly/nightly-rustc/rustc_ast/ast/\n-[like so]: https://github.com/rust-lang/rust-clippy/blob/de5ccdfab68a5e37689f3c950ed1532ba9d652a0/src/misc.rs#L34\n+[deep-nesting]: https://github.com/rust-lang/rust-clippy/blob/557f6848bd5b7183f55c1e1522a326e9e1df6030/clippy_lints/src/mem_forget.rs#L29-L43\n+[if_chain]: https://docs.rs/if_chain/*/if_chain\n+[nest-less]: https://github.com/rust-lang/rust-clippy/blob/557f6848bd5b7183f55c1e1522a326e9e1df6030/clippy_lints/src/bit_mask.rs#L124-L150\n \n ## Writing code\n "}, {"sha": "445fc8d31d77a4ed794d58fbb3528aaa4f9c4874", "filename": "tests/ui/doc_errors.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fdoc_errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fdoc_errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdoc_errors.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: --edition 2018\n+// edition:2018\n #![warn(clippy::missing_errors_doc)]\n \n use std::io;"}, {"sha": "8a9d5a3d1d5696afe426d685f3314916e020c067", "filename": "tests/ui/issue_4266.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fissue_4266.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fissue_4266.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fissue_4266.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: --edition 2018\n+// edition:2018\n #![allow(dead_code)]\n \n async fn sink1<'a>(_: &'a str) {} // lint"}, {"sha": "60c64ee8146e517f71f28f1c0f62c9600bea9fd0", "filename": "tests/ui/macro_use_imports.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fmacro_use_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fmacro_use_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmacro_use_imports.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: --edition 2018\n+// edition:2018\n #![warn(clippy::macro_use_imports)]\n \n use std::collections::HashMap;"}, {"sha": "2af33b263405e8b6750dffed642a850bf06593b2", "filename": "tests/ui/methods.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmethods.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,5 +1,5 @@\n // aux-build:option_helpers.rs\n-// compile-flags: --edition 2018\n+// edition:2018\n \n #![warn(clippy::all, clippy::pedantic)]\n #![allow("}, {"sha": "a7a8499b58f000a58e163bed66534e50a2d38ea0", "filename": "tests/ui/single_component_path_imports.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fsingle_component_path_imports.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fsingle_component_path_imports.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_component_path_imports.fixed?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-// compile-flags: --edition 2018\n+// edition:2018\n #![warn(clippy::single_component_path_imports)]\n #![allow(unused_imports)]\n "}, {"sha": "9a427e90ad3df619a43491aaae91be5f83a418ba", "filename": "tests/ui/single_component_path_imports.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fsingle_component_path_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fsingle_component_path_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_component_path_imports.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-// compile-flags: --edition 2018\n+// edition:2018\n #![warn(clippy::single_component_path_imports)]\n #![allow(unused_imports)]\n "}, {"sha": "ebb3aa28daf3d80d0cbc862b80e88aa22b07034e", "filename": "tests/ui/use_self.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fuse_self.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fuse_self.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuse_self.fixed?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-// compile-flags: --edition 2018\n+// edition:2018\n \n #![warn(clippy::use_self)]\n #![allow(dead_code)]"}, {"sha": "8a182192ab34d67a070ee4990c801e87cbf9d669", "filename": "tests/ui/use_self.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d5ffe81054890cafc1f4df20704ebdd597bd2a4/tests%2Fui%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuse_self.rs?ref=9d5ffe81054890cafc1f4df20704ebdd597bd2a4", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-// compile-flags: --edition 2018\n+// edition:2018\n \n #![warn(clippy::use_self)]\n #![allow(dead_code)]"}]}