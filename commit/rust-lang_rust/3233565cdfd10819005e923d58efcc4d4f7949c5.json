{"sha": "3233565cdfd10819005e923d58efcc4d4f7949c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMyMzM1NjVjZGZkMTA4MTkwMDVlOTIzZDU4ZWZjYzRkNGY3OTQ5YzU=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-05-11T20:48:21Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2020-05-18T13:41:35Z"}, "message": "Mark asm unstable book doctests as allow_fail since they don't work with system LLVM", "tree": {"sha": "673e4911e7421036dbdc63c4540cd612b82eb371", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/673e4911e7421036dbdc63c4540cd612b82eb371"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3233565cdfd10819005e923d58efcc4d4f7949c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3233565cdfd10819005e923d58efcc4d4f7949c5", "html_url": "https://github.com/rust-lang/rust/commit/3233565cdfd10819005e923d58efcc4d4f7949c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3233565cdfd10819005e923d58efcc4d4f7949c5/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cecffdc1d74718444b6654b120dcd57dcbad018f", "url": "https://api.github.com/repos/rust-lang/rust/commits/cecffdc1d74718444b6654b120dcd57dcbad018f", "html_url": "https://github.com/rust-lang/rust/commit/cecffdc1d74718444b6654b120dcd57dcbad018f"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "bca5281b0b5536e19b1eef5bd33d96f00443342a", "filename": "src/doc/unstable-book/src/library-features/asm.md", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/3233565cdfd10819005e923d58efcc4d4f7949c5/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md", "raw_url": "https://github.com/rust-lang/rust/raw/3233565cdfd10819005e923d58efcc4d4f7949c5/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fasm.md?ref=3233565cdfd10819005e923d58efcc4d4f7949c5", "patch": "@@ -24,7 +24,7 @@ cannot be otherwise achieved. Accessing low level hardware primitives, e.g. in k\n \n Let us start with the simplest possible example:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n unsafe {\n     asm!(\"nop\");\n@@ -41,7 +41,7 @@ in the first argument of the `asm!` macro as a string literal.\n Now inserting an instruction that does nothing is rather boring. Let us do something that\n actually acts on data:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let x: u64;\n unsafe {\n@@ -63,7 +63,7 @@ the template and will read the variable from there after the inline assembly fin\n \n Let us see another example that also uses an input:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let i: u64 = 3;\n let o: u64;\n@@ -95,7 +95,7 @@ readability, and allows reordering instructions without changing the argument or\n \n We can further refine the above example to avoid the `mov` instruction:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let mut x: u64 = 3;\n unsafe {\n@@ -109,7 +109,7 @@ This is different from specifying an input and output separately in that it is g\n \n It is also possible to specify different variables for the input and output parts of an `inout` operand:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let x: u64 = 3;\n let y: u64;\n@@ -131,7 +131,7 @@ There is also a `inlateout` variant of this specifier.\n \n Here is an example where `inlateout` *cannot* be used:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let mut a: u64 = 4;\n let b: u64 = 4;\n@@ -149,7 +149,7 @@ Here the compiler is free to allocate the same register for inputs `b` and `c` s\n \n However the following example can use `inlateout` since the output is only modified after all input registers have been read:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let mut a: u64 = 4;\n let b: u64 = 4;\n@@ -168,7 +168,7 @@ Therefore, Rust inline assembly provides some more specific constraint specifier\n While `reg` is generally available on any architecture, these are highly architecture specific. E.g. for x86 the general purpose registers `eax`, `ebx`, `ecx`, `edx`, `ebp`, `esi`, and `edi`\n among others can be addressed by their name.\n \n-```rust,no_run\n+```rust,allow_fail,no_run\n # #![feature(asm)]\n let cmd = 0xd1;\n unsafe {\n@@ -184,7 +184,7 @@ Note that unlike other operand types, explicit register operands cannot be used\n \n Consider this example which uses the x86 `mul` instruction:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n fn mul(a: u64, b: u64) -> u128 {\n     let lo: u64;\n@@ -220,7 +220,7 @@ This state is generally referred to as being \"clobbered\".\n We need to tell the compiler about this since it may need to save and restore this state\n around the inline assembly block.\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let ebx: u32;\n let ecx: u32;\n@@ -250,7 +250,7 @@ However we still need to tell the compiler that `eax` and `edx` have been modifi\n \n This can also be used with a general register class (e.g. `reg`) to obtain a scratch register for use inside the asm code:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n // Multiply x by 6 using shifts and adds\n let mut x: u64 = 4;\n@@ -270,7 +270,7 @@ assert_eq!(x, 4 * 6);\n A special operand type, `sym`, allows you to use the symbol name of a `fn` or `static` in inline assembly code.\n This allows you to call a function or access a global variable without needing to keep its address in a register.\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n extern \"C\" fn foo(arg: i32) {\n     println!(\"arg = {}\", arg);\n@@ -306,7 +306,7 @@ By default the compiler will always choose the name that refers to the full regi\n \n This default can be overriden by using modifiers on the template string operands, just like you would with format strings:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let mut x: u16 = 0xab;\n \n@@ -330,7 +330,7 @@ By default, an inline assembly block is treated the same way as an external FFI\n \n Let's take our previous example of an `add` instruction:\n \n-```rust\n+```rust,allow_fail\n # #![feature(asm)]\n let mut a: u64 = 4;\n let b: u64 = 4;"}]}