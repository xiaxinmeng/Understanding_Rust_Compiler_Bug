{"sha": "4a865401f580863c67b9dd0e44a0192f21817c7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhODY1NDAxZjU4MDg2M2M2N2I5ZGQwZTQ0YTAxOTJmMjE4MTdjN2M=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-09-11T19:17:48Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-09-11T19:17:48Z"}, "message": "rustc: Remove a bunch of unused upcalls", "tree": {"sha": "037c77e61e17a05a8b965122bd920e4fe6284b2d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/037c77e61e17a05a8b965122bd920e4fe6284b2d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a865401f580863c67b9dd0e44a0192f21817c7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a865401f580863c67b9dd0e44a0192f21817c7c", "html_url": "https://github.com/rust-lang/rust/commit/4a865401f580863c67b9dd0e44a0192f21817c7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a865401f580863c67b9dd0e44a0192f21817c7c/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23880daef2fbdfc01f8651fa8e84eb9700cceb3c", "url": "https://api.github.com/repos/rust-lang/rust/commits/23880daef2fbdfc01f8651fa8e84eb9700cceb3c", "html_url": "https://github.com/rust-lang/rust/commit/23880daef2fbdfc01f8651fa8e84eb9700cceb3c"}], "stats": {"total": 19, "additions": 2, "deletions": 17}, "files": [{"sha": "8b9ed160804ee314634f530de7057c9aeffba645", "filename": "src/rustc/back/upcall.rs", "status": "modified", "additions": 2, "deletions": 17, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/4a865401f580863c67b9dd0e44a0192f21817c7c/src%2Frustc%2Fback%2Fupcall.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a865401f580863c67b9dd0e44a0192f21817c7c/src%2Frustc%2Fback%2Fupcall.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fback%2Fupcall.rs?ref=4a865401f580863c67b9dd0e44a0192f21817c7c", "patch": "@@ -8,16 +8,12 @@ use middle::trans::common::{T_fn, T_i1, T_i8, T_i32,\n use lib::llvm::{type_names, ModuleRef, ValueRef, TypeRef};\n \n type upcalls =\n-    {_fail: ValueRef,\n-     trace: ValueRef,\n+    {trace: ValueRef,\n      malloc: ValueRef,\n      free: ValueRef,\n      exchange_malloc: ValueRef,\n      exchange_free: ValueRef,\n      validate_box: ValueRef,\n-     mark: ValueRef,\n-     str_new_uniq: ValueRef,\n-     str_new_shared: ValueRef,\n      log_type: ValueRef,\n      call_shim_on_c_stack: ValueRef,\n      call_shim_on_rust_stack: ValueRef,\n@@ -45,10 +41,7 @@ fn declare_upcalls(targ_cfg: @session::config,\n     let int_t = T_int(targ_cfg);\n     let size_t = T_size_t(targ_cfg);\n \n-    return @{_fail: dv(~\"fail\", ~[T_ptr(T_i8()),\n-                             T_ptr(T_i8()),\n-                             size_t]),\n-          trace: dv(~\"trace\", ~[T_ptr(T_i8()),\n+    return @{trace: dv(~\"trace\", ~[T_ptr(T_i8()),\n                               T_ptr(T_i8()),\n                               int_t]),\n           malloc:\n@@ -65,14 +58,6 @@ fn declare_upcalls(targ_cfg: @session::config,\n               nothrow(dv(~\"exchange_free\", ~[T_ptr(T_i8())])),\n           validate_box:\n               nothrow(dv(~\"validate_box\", ~[T_ptr(T_i8())])),\n-          mark:\n-              d(~\"mark\", ~[T_ptr(T_i8())], int_t),\n-          str_new_uniq:\n-              nothrow(d(~\"str_new_uniq\", ~[T_ptr(T_i8()), int_t],\n-                        T_ptr(T_i8()))),\n-          str_new_shared:\n-              nothrow(d(~\"str_new_shared\", ~[T_ptr(T_i8()), int_t],\n-                        T_ptr(T_i8()))),\n           log_type:\n               dv(~\"log_type\", ~[T_ptr(tydesc_type),\n                               T_ptr(T_i8()), T_i32()]),"}]}