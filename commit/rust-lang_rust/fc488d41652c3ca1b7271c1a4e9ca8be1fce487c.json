{"sha": "fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjNDg4ZDQxNjUyYzNjYTFiNzI3MWMxYTRlOWNhOGJlMWZjZTQ4N2M=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-07-14T00:35:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-14T00:35:22Z"}, "message": "Rollup merge of #87085 - GuillaumeGomez:search-result-colors, r=notriddle\n\nSearch result colors\n\nPart of  #87072 (fixes the first and fourth regressions and add tests to prevent it from happening again).\n\ncc ````@Nemo157````\n\nr? ````@camelid````", "tree": {"sha": "b3ca4462e9b9a06d5ac5c0f5504fa66396abb958", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3ca4462e9b9a06d5ac5c0f5504fa66396abb958"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg7jFKCRBK7hj4Ov3rIwAA33AIAHb2NWN9qBpqhsYd0sx+7O5k\nA0a5rCanygQs9rylUFMjZlksknCirZz5dyrg44eIa7mV9GYVb4ZW/iFLNTtfEY79\nX18eZqOw0klzx10qCXmob59GPi8kzrJKrvTEHEbHlzR6xf8szPMmeQeBV6FSkdWT\nXbZIJ5zBgt2afJhVY5JZiUa0t+gtWrq+MgQTy8NG6AsnD/KaAq9tTD1gQ/BEP73V\n8Wt59Agtw290xTG9iGqpcFcMoLCmbiAdna4hqYEJW5d3D3rPvF6OZOKw+aiXkcDi\nPabydogi/P/nSeiTc3Mw8tEAWZlyy/1TXOg2PQcHM8/PEE8TFUOhotMiOkwvEE4=\n=gTW6\n-----END PGP SIGNATURE-----\n", "payload": "tree b3ca4462e9b9a06d5ac5c0f5504fa66396abb958\nparent 3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca\nparent b8264a862f045de899d79e149d7ba4bd15adb6a3\nauthor Yuki Okushi <jtitor@2k36.org> 1626222922 +0900\ncommitter GitHub <noreply@github.com> 1626222922 +0900\n\nRollup merge of #87085 - GuillaumeGomez:search-result-colors, r=notriddle\n\nSearch result colors\n\nPart of  #87072 (fixes the first and fourth regressions and add tests to prevent it from happening again).\n\ncc ````@Nemo157````\n\nr? ````@camelid````\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "html_url": "https://github.com/rust-lang/rust/commit/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca", "html_url": "https://github.com/rust-lang/rust/commit/3e1c75c6e25a4db968066bd2ef2dabc7c504d7ca"}, {"sha": "b8264a862f045de899d79e149d7ba4bd15adb6a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8264a862f045de899d79e149d7ba4bd15adb6a3", "html_url": "https://github.com/rust-lang/rust/commit/b8264a862f045de899d79e149d7ba4bd15adb6a3"}], "stats": {"total": 50, "additions": 46, "deletions": 4}, "files": [{"sha": "9da3fe07adea0a0b4b6daeb227349f489985bfe2", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "patch": "@@ -161,7 +161,7 @@ pre, .rustdoc.source .example-wrap {\n .search-results a {\n \tcolor: #0096cf;\n }\n-.search-results a span.desc {\n+.search-results a div.desc {\n \tcolor: #c5c5c5;\n }\n \n@@ -286,7 +286,7 @@ details.undocumented > summary::before {\n \tcolor: grey;\n }\n \n-tr.result span.primitive::after, tr.result span.keyword::after {\n+.result-name .primitive > i, .result-name .keyword > i {\n \tcolor: #788797;\n }\n "}, {"sha": "599fb942dbe2a35c420e38d2939542c06718b581", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "patch": "@@ -247,7 +247,7 @@ details.undocumented > summary::before {\n \tcolor: grey;\n }\n \n-tr.result span.primitive::after, tr.result span.keyword::after {\n+.result-name .primitive > i, .result-name .keyword > i {\n \tcolor: #ddd;\n }\n "}, {"sha": "0c2799727f3e30d71243807c12ebfd40f9b3a92c", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "patch": "@@ -237,7 +237,7 @@ details.undocumented > summary::before {\n \tcolor: grey;\n }\n \n-tr.result span.primitive::after, tr.result span.keyword::after {\n+.result-name .primitive > i, .result-name .keyword > i {\n \tcolor: black;\n }\n "}, {"sha": "bb8ecb98fa3872bbfba2a9d6b99b8a58c4ea7334", "filename": "src/test/rustdoc-gui/search-result-color.goml", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml?ref=fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "patch": "@@ -0,0 +1,41 @@\n+// The goal of this test is to ensure the color of the text is the one expected.\n+goto: file://|DOC_PATH|/test_docs/index.html?search=coo\n+\n+// This is needed so that the text color is computed.\n+show-text: true\n+\n+// Ayu theme\n+local-storage: {\"rustdoc-theme\": \"ayu\", \"rustdoc-preferred-dark-theme\": \"ayu\", \"rustdoc-use-system-theme\": \"false\"}\n+reload:\n+\n+// Waiting for the search results to appear...\n+wait-for: \"#titles\"\n+assert-css: (\"//*[@class='desc']//*[text()='Just a normal struct.']\", {\"color\": \"rgb(197, 197, 197)\"})\n+assert-css: (\"//*[@class='result-name']/*[text()='test_docs::']\", {\"color\": \"rgb(0, 150, 207)\"})\n+\n+// Checking the color for \"keyword\".\n+assert-css: (\"//*[@class='result-name']//*[text()='(keyword)']\", {\"color\": \"rgb(120, 135, 151)\"})\n+\n+// Dark theme\n+local-storage: {\"rustdoc-theme\": \"dark\", \"rustdoc-preferred-dark-theme\": \"dark\", \"rustdoc-use-system-theme\": \"false\"}\n+reload:\n+\n+// Waiting for the search results to appear...\n+wait-for: \"#titles\"\n+assert-css: (\"//*[@class='desc']//*[text()='Just a normal struct.']\", {\"color\": \"rgb(221, 221, 221)\"})\n+assert-css: (\"//*[@class='result-name']/*[text()='test_docs::']\", {\"color\": \"rgb(221, 221, 221)\"})\n+\n+// Checking the color for \"keyword\".\n+assert-css: (\"//*[@class='result-name']//*[text()='(keyword)']\", {\"color\": \"rgb(221, 221, 221)\"})\n+\n+// Light theme\n+local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n+reload:\n+\n+// Waiting for the search results to appear...\n+wait-for: \"#titles\"\n+assert-css: (\"//*[@class='desc']//*[text()='Just a normal struct.']\", {\"color\": \"rgb(0, 0, 0)\"})\n+assert-css: (\"//*[@class='result-name']/*[text()='test_docs::']\", {\"color\": \"rgb(0, 0, 0)\"})\n+\n+// Checking the color for \"keyword\".\n+assert-css: (\"//*[@class='result-name']//*[text()='(keyword)']\", {\"color\": \"rgb(0, 0, 0)\"})"}, {"sha": "1b9f652120e9465edd16eb88c1766e5a783f6b44", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc488d41652c3ca1b7271c1a4e9ca8be1fce487c/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=fc488d41652c3ca1b7271c1a4e9ca8be1fce487c", "patch": "@@ -101,6 +101,7 @@ pub enum AnEnum {\n }\n \n #[doc(keyword = \"CookieMonster\")]\n+/// Some keyword.\n pub mod keyword {}\n \n /// Just some type alias."}]}