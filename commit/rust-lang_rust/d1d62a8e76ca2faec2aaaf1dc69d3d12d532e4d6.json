{"sha": "d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxZDYyYThlNzZjYTJmYWVjMmFhYWYxZGM2OWQzZDEyZDUzMmU0ZDY=", "commit": {"author": {"name": "Andre Bogus", "email": "bogusandre@gmail.com", "date": "2016-05-29T09:48:28Z"}, "committer": {"name": "Andre Bogus", "email": "bogusandre@gmail.com", "date": "2016-05-29T09:48:28Z"}, "message": "Merge branch 'pr-961'", "tree": {"sha": "5dce8dc5418dc1aa359fa16d6ce6ef8e0acf3a3d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5dce8dc5418dc1aa359fa16d6ce6ef8e0acf3a3d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "html_url": "https://github.com/rust-lang/rust/commit/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/comments", "author": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "committer": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed7ac0d9b5ff57bda043b088ba81c73e84bc5c83", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed7ac0d9b5ff57bda043b088ba81c73e84bc5c83", "html_url": "https://github.com/rust-lang/rust/commit/ed7ac0d9b5ff57bda043b088ba81c73e84bc5c83"}, {"sha": "5d64b81787de81c43bf770ec4074493e1cafae40", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d64b81787de81c43bf770ec4074493e1cafae40", "html_url": "https://github.com/rust-lang/rust/commit/5d64b81787de81c43bf770ec4074493e1cafae40"}], "stats": {"total": 48, "additions": 38, "deletions": 10}, "files": [{"sha": "3d8dbf7c1d77c1bdfe8fb52c6c498ce6a856bbbf", "filename": "Cargo.toml", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "patch": "@@ -29,7 +29,9 @@ semver = \"0.2.1\"\n toml = \"0.1\"\n unicode-normalization = \"0.1\"\n quine-mc_cluskey = \"0.2.2\"\n-clippy_lints = { version = \"0.0.*\", path = \"clippy_lints\" }\n+# begin automatic update\n+clippy_lints = { version = \"0.0.69\", path = \"clippy_lints\" }\n+# end automatic update\n \n [dev-dependencies]\n compiletest_rs = \"0.1.0\""}, {"sha": "aa994cd72592339dace6a6804a27be90ad31c89e", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "patch": "@@ -1,6 +1,8 @@\n [package]\n name = \"clippy_lints\"\n+# begin automatic update\n version = \"0.0.70\"\n+# end automatic update\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\","}, {"sha": "35bddcbbb5c26fe522662fe56fcd0ba7236aee9b", "filename": "util/update_lints.py", "status": "modified", "additions": 33, "deletions": 9, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/util%2Fupdate_lints.py", "raw_url": "https://github.com/rust-lang/rust/raw/d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6/util%2Fupdate_lints.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fupdate_lints.py?ref=d1d62a8e76ca2faec2aaaf1dc69d3d12d532e4d6", "patch": "@@ -58,9 +58,9 @@ def collect(lints, deprecated_lints, restriction_lints, fn):\n         # remove \\-newline escapes from description string\n         desc = nl_escape_re.sub('', match.group('desc'))\n         restriction_lints.append((os.path.splitext(os.path.basename(fn))[0],\n-                                match.group('name').lower(),\n-                                \"allow\",\n-                                desc.replace('\\\\\"', '\"')))\n+                                  match.group('name').lower(),\n+                                  \"allow\",\n+                                  desc.replace('\\\\\"', '\"')))\n \n \n def gen_table(lints, link=None):\n@@ -100,6 +100,7 @@ def gen_deprecated(lints):\n     for lint in lints:\n         yield '    store.register_removed(\"%s\", \"%s\");\\n' % (lint[1], lint[2])\n \n+\n def replace_region(fn, region_start, region_end, callback,\n                    replace_start=True, write_back=True):\n     \"\"\"Replace a region in a file delimited by two lines matching regexes.\n@@ -155,6 +156,16 @@ def main(print_only=False, check=False):\n                 collect(lints, deprecated_lints, restriction_lints,\n                         os.path.join(root, fn))\n \n+    # determine version\n+    with open('Cargo.toml') as fp:\n+        for line in fp:\n+            if line.startswith('version ='):\n+                clippy_version = line.split()[2].strip('\"')\n+                break\n+        else:\n+            print('Error: version not found in Cargo.toml!')\n+            return\n+\n     if print_only:\n         sys.stdout.writelines(gen_table(lints + restriction_lints))\n         return\n@@ -168,8 +179,8 @@ def main(print_only=False, check=False):\n     changed |= replace_region(\n         'README.md',\n         r'^There are \\d+ lints included in this crate:', \"\",\n-        lambda: ['There are %d lints included in this crate:\\n' % (len(lints)\n-            + len(restriction_lints))],\n+        lambda: ['There are %d lints included in this crate:\\n' %\n+                 (len(lints) + len(restriction_lints))],\n         write_back=not check)\n \n     # update the links in the CHANGELOG\n@@ -182,6 +193,19 @@ def main(print_only=False, check=False):\n                         key=lambda l: l[1])],\n         replace_start=False, write_back=not check)\n \n+    # update version of clippy_lints in Cargo.toml\n+    changed |= replace_region(\n+        'Cargo.toml', r'# begin automatic update', '# end automatic update',\n+        lambda: ['clippy_lints = { version = \"%s\", path = \"clippy_lints\" }\\n' %\n+                 clippy_version],\n+        replace_start=False, write_back=not check)\n+\n+    # update version of clippy_lints in Cargo.toml\n+    changed |= replace_region(\n+        'clippy_lints/Cargo.toml', r'# begin automatic update', '# end automatic update',\n+        lambda: ['version = \"%s\"\\n' % clippy_version],\n+        replace_start=False, write_back=not check)\n+\n     # update the `pub mod` list\n     changed |= replace_region(\n         'clippy_lints/src/lib.rs', r'begin lints modules', r'end lints modules',\n@@ -196,10 +220,10 @@ def main(print_only=False, check=False):\n \n     # same for \"deprecated\" lint collection\n     changed |= replace_region(\n-            'clippy_lints/src/lib.rs', r'let mut store', r'end deprecated lints',\n-            lambda: gen_deprecated(deprecated_lints),\n-            replace_start=False,\n-            write_back=not check)\n+        'clippy_lints/src/lib.rs', r'let mut store', r'end deprecated lints',\n+        lambda: gen_deprecated(deprecated_lints),\n+        replace_start=False,\n+        write_back=not check)\n \n     # same for \"clippy_pedantic\" lint collection\n     changed |= replace_region("}]}