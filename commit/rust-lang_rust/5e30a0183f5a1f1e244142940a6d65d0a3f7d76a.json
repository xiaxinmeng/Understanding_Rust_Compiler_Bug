{"sha": "5e30a0183f5a1f1e244142940a6d65d0a3f7d76a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlMzBhMDE4M2Y1YTFmMWUyNDQxNDI5NDBhNmQ2NWQwYTNmN2Q3NmE=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-10-28T15:13:37Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-10-28T15:13:37Z"}, "message": "Filter packages only when '-p' was passed", "tree": {"sha": "1c5eea90b6ea09ae08a0a41d777e35a9cfe72b4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c5eea90b6ea09ae08a0a41d777e35a9cfe72b4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a", "html_url": "https://github.com/rust-lang/rust/commit/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98eb7da0d52f67d4e8d0d61239093dd8136c326b", "url": "https://api.github.com/repos/rust-lang/rust/commits/98eb7da0d52f67d4e8d0d61239093dd8136c326b", "html_url": "https://github.com/rust-lang/rust/commit/98eb7da0d52f67d4e8d0d61239093dd8136c326b"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "2c0b964b001e952f6c34d6117a93c2c87ab30f09", "filename": "src/bin/cargo-fmt.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a/src%2Fbin%2Fcargo-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e30a0183f5a1f1e244142940a6d65d0a3f7d76a/src%2Fbin%2Fcargo-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-fmt.rs?ref=5e30a0183f5a1f1e244142940a6d65d0a3f7d76a", "patch": "@@ -261,12 +261,12 @@ fn filter_packages_with_hitlist<'a>(\n     packages: Vec<Value>,\n     workspace_hitlist: &'a WorkspaceHitlist,\n ) -> Result<Vec<Value>, &'a String> {\n-    if *workspace_hitlist == WorkspaceHitlist::All {\n+    let some_hitlist: Option<HashSet<&String>> =\n+        workspace_hitlist.get_some().map(HashSet::from_iter);\n+    if some_hitlist.is_none() {\n         return Ok(packages);\n     }\n-    let mut hitlist: HashSet<&String> = workspace_hitlist\n-        .get_some()\n-        .map_or(HashSet::new(), HashSet::from_iter);\n+    let mut hitlist = some_hitlist.unwrap();\n     let members: Vec<Value> = packages\n         .into_iter()\n         .filter(|member| {"}]}