{"sha": "f60153ee9e1d598c170743633448aa3ede8cb72e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2MDE1M2VlOWUxZDU5OGMxNzA3NDM2MzM0NDhhYTNlZGU4Y2I3MmU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-11T18:27:25Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-11T18:55:56Z"}, "message": "warn louder on mising sysroot", "tree": {"sha": "13803f59445d7a36e2cc82a104248b6f29597dfe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/13803f59445d7a36e2cc82a104248b6f29597dfe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f60153ee9e1d598c170743633448aa3ede8cb72e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f60153ee9e1d598c170743633448aa3ede8cb72e", "html_url": "https://github.com/rust-lang/rust/commit/f60153ee9e1d598c170743633448aa3ede8cb72e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f60153ee9e1d598c170743633448aa3ede8cb72e/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "738c958a044361dc84a0f27e57b40f66a5815990", "url": "https://api.github.com/repos/rust-lang/rust/commits/738c958a044361dc84a0f27e57b40f66a5815990", "html_url": "https://github.com/rust-lang/rust/commit/738c958a044361dc84a0f27e57b40f66a5815990"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "6b9f6a988b5058bc7e0ea52c43774d934c11296b", "filename": "crates/ra_lsp_server/src/main_loop.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f60153ee9e1d598c170743633448aa3ede8cb72e/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f60153ee9e1d598c170743633448aa3ede8cb72e/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs?ref=f60153ee9e1d598c170743633448aa3ede8cb72e", "patch": "@@ -65,7 +65,7 @@ pub fn main_loop(\n     let workspaces = match ws_worker.recv().unwrap() {\n         Ok(ws) => vec![ws],\n         Err(e) => {\n-            log::warn!(\"loading workspace failed: {}\", e);\n+            log::error!(\"loading workspace failed: {}\", e);\n             Vec::new()\n         }\n     };"}, {"sha": "3b2fa070b2e5317e1e2c88ed1a14d9135b38c997", "filename": "crates/ra_lsp_server/src/project_model/sysroot.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f60153ee9e1d598c170743633448aa3ede8cb72e/crates%2Fra_lsp_server%2Fsrc%2Fproject_model%2Fsysroot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f60153ee9e1d598c170743633448aa3ede8cb72e/crates%2Fra_lsp_server%2Fsrc%2Fproject_model%2Fsysroot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fproject_model%2Fsysroot.rs?ref=f60153ee9e1d598c170743633448aa3ede8cb72e", "patch": "@@ -44,6 +44,14 @@ impl Sysroot {\n         let stdout = String::from_utf8(rustc_output.stdout)?;\n         let sysroot_path = Path::new(stdout.trim());\n         let src = sysroot_path.join(\"lib/rustlib/src/rust/src\");\n+        if !src.exists() {\n+            failure::bail!(\n+                \"can't load standard library from sysroot\\n\\\n+                 {:?}\\n\\\n+                 try running `rustup component add rust-src`\",\n+                src,\n+            );\n+        }\n \n         let mut sysroot = Sysroot {\n             crates: Arena::default(),"}]}