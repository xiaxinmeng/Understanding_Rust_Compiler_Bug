{"sha": "8d48597b76ef656a1a1f600c96176d1aaeab32ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkNDg1OTdiNzZlZjY1NmExYTFmNjAwYzk2MTc2ZDFhYWVhYjMyZmY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-01-29T22:16:31Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-02-02T19:52:34Z"}, "message": "Point at return type obligations instead of  at `fn` ident", "tree": {"sha": "13434e4338607616874e9b83a9f71cdcf2bc07b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/13434e4338607616874e9b83a9f71cdcf2bc07b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d48597b76ef656a1a1f600c96176d1aaeab32ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d48597b76ef656a1a1f600c96176d1aaeab32ff", "html_url": "https://github.com/rust-lang/rust/commit/8d48597b76ef656a1a1f600c96176d1aaeab32ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d48597b76ef656a1a1f600c96176d1aaeab32ff/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "972ae5afe5c38cbf80552179fc9051d78f983ca1", "url": "https://api.github.com/repos/rust-lang/rust/commits/972ae5afe5c38cbf80552179fc9051d78f983ca1", "html_url": "https://github.com/rust-lang/rust/commit/972ae5afe5c38cbf80552179fc9051d78f983ca1"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "3a4a015c14a5005323fa63cd9f887ed6aaa46ddd", "filename": "src/librustc_typeck/check/wfcheck.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8d48597b76ef656a1a1f600c96176d1aaeab32ff/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d48597b76ef656a1a1f600c96176d1aaeab32ff/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fwfcheck.rs?ref=8d48597b76ef656a1a1f600c96176d1aaeab32ff", "patch": "@@ -530,7 +530,7 @@ fn check_where_clauses<'tcx, 'fcx>(\n     fcx: &FnCtxt<'fcx, 'tcx>,\n     span: Span,\n     def_id: DefId,\n-    return_ty: Option<Ty<'tcx>>,\n+    return_ty: Option<(Ty<'tcx>, Span)>,\n ) {\n     debug!(\"check_where_clauses(def_id={:?}, return_ty={:?})\", def_id, return_ty);\n \n@@ -664,7 +664,7 @@ fn check_where_clauses<'tcx, 'fcx>(\n \n     let mut predicates = predicates.instantiate_identity(fcx.tcx);\n \n-    if let Some(return_ty) = return_ty {\n+    if let Some((return_ty, span)) = return_ty {\n         predicates.predicates.extend(check_opaque_types(tcx, fcx, def_id, span, return_ty));\n     }\n \n@@ -708,7 +708,7 @@ fn check_fn_or_method<'fcx, 'tcx>(\n     // FIXME(#25759) return types should not be implied bounds\n     implied_bounds.push(sig.output());\n \n-    check_where_clauses(tcx, fcx, span, def_id, Some(sig.output()));\n+    check_where_clauses(tcx, fcx, span, def_id, Some((sig.output(), hir_sig.decl.output.span())));\n }\n \n /// Checks \"defining uses\" of opaque `impl Trait` types to ensure that they meet the restrictions"}, {"sha": "08b26b8fc1307de927f4d60bccb3e2675ce23791", "filename": "src/test/ui/type-alias-impl-trait/generic_duplicate_lifetime_param.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8d48597b76ef656a1a1f600c96176d1aaeab32ff/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fgeneric_duplicate_lifetime_param.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8d48597b76ef656a1a1f600c96176d1aaeab32ff/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fgeneric_duplicate_lifetime_param.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fgeneric_duplicate_lifetime_param.stderr?ref=8d48597b76ef656a1a1f600c96176d1aaeab32ff", "patch": "@@ -1,8 +1,8 @@\n error: non-defining opaque type use in defining scope\n-  --> $DIR/generic_duplicate_lifetime_param.rs:7:4\n+  --> $DIR/generic_duplicate_lifetime_param.rs:7:26\n    |\n LL | fn one<'a>(t: &'a ()) -> Two<'a, 'a> {\n-   |    ^^^\n+   |                          ^^^^^^^^^^^\n    |\n note: lifetime used multiple times\n   --> $DIR/generic_duplicate_lifetime_param.rs:5:10"}]}