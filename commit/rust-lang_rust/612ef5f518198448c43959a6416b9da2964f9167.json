{"sha": "612ef5f518198448c43959a6416b9da2964f9167", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxMmVmNWY1MTgxOTg0NDhjNDM5NTlhNjQxNmI5ZGEyOTY0ZjkxNjc=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-09-12T21:04:32Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-09-13T19:15:50Z"}, "message": "add new tests for re_rebalance_coherence", "tree": {"sha": "ee8439fd56c2f8613e0d4e3bbf0ea3747c7bdd51", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee8439fd56c2f8613e0d4e3bbf0ea3747c7bdd51"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/612ef5f518198448c43959a6416b9da2964f9167", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/612ef5f518198448c43959a6416b9da2964f9167", "html_url": "https://github.com/rust-lang/rust/commit/612ef5f518198448c43959a6416b9da2964f9167", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/612ef5f518198448c43959a6416b9da2964f9167/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb48d6bdee6c655d71f26594d47d232adf3e4e93", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb48d6bdee6c655d71f26594d47d232adf3e4e93", "html_url": "https://github.com/rust-lang/rust/commit/eb48d6bdee6c655d71f26594d47d232adf3e4e93"}], "stats": {"total": 76, "additions": 62, "deletions": 14}, "files": [{"sha": "61f2637c0c297076d008a040e7e7559384a468c3", "filename": "src/test/ui/coherence/impl[t]-foreign[foreign[t],local]-for-foreign.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Bforeign%5Bt%5D%2Clocal%5D-for-foreign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Bforeign%5Bt%5D%2Clocal%5D-for-foreign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Bforeign%5Bt%5D%2Clocal%5D-for-foreign.rs?ref=612ef5f518198448c43959a6416b9da2964f9167", "patch": "@@ -0,0 +1,14 @@\n+#![feature(re_rebalance_coherence)]\n+\n+// run-pass\n+// compile-flags:--crate-name=test\n+// aux-build:coherence_lib.rs\n+\n+extern crate coherence_lib as lib;\n+use lib::*;\n+use std::rc::Rc;\n+\n+struct Local;\n+impl<T> Remote2<Rc<T>, Local> for usize { }\n+\n+fn main() {}"}, {"sha": "586b8de9e95c958897b97afdb1a9c676139b11d6", "filename": "src/test/ui/coherence/impl[t]-foreign[local]-for-fundamental[t].rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-fundamental%5Bt%5D.rs", "raw_url": "https://github.com/rust-lang/rust/raw/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-fundamental%5Bt%5D.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-fundamental%5Bt%5D.rs?ref=612ef5f518198448c43959a6416b9da2964f9167", "patch": "@@ -0,0 +1,21 @@\n+#![feature(re_rebalance_coherence)]\n+\n+// compile-flags:--crate-name=test\n+// aux-build:coherence_lib.rs\n+// run-pass\n+\n+extern crate coherence_lib as lib;\n+use lib::*;\n+use std::rc::Rc;\n+\n+struct Local;\n+\n+impl<T> Remote1<Local> for Box<T> {\n+    // FIXME(#64412) -- this is expected to error\n+}\n+\n+impl<T> Remote1<Local> for &T {\n+    // FIXME(#64412) -- this is expected to error\n+}\n+\n+fn main() {}"}, {"sha": "6f35c6c9dbc886b0d8b054762468d48ee8382f72", "filename": "src/test/ui/coherence/impl[t]-foreign[local]-for-t.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.rs", "raw_url": "https://github.com/rust-lang/rust/raw/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.rs?ref=612ef5f518198448c43959a6416b9da2964f9167", "patch": "@@ -0,0 +1,16 @@\n+#![feature(re_rebalance_coherence)]\n+\n+// compile-flags:--crate-name=test\n+// aux-build:coherence_lib.rs\n+\n+extern crate coherence_lib as lib;\n+use lib::*;\n+use std::rc::Rc;\n+\n+struct Local;\n+\n+impl<T> Remote1<Local> for T {\n+    //~^ ERROR type parameter `T` must be used as the type parameter for some local type\n+}\n+\n+fn main() {}"}, {"sha": "be7de8cccb46756609d91294649e3ead7b2b09ed", "filename": "src/test/ui/coherence/impl[t]-foreign[local]-for-t.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/612ef5f518198448c43959a6416b9da2964f9167/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fimpl%5Bt%5D-foreign%5Blocal%5D-for-t.stderr?ref=612ef5f518198448c43959a6416b9da2964f9167", "patch": "@@ -0,0 +1,11 @@\n+error[E0210]: type parameter `T` must be used as the type parameter for some local type (e.g., `MyStruct<T>`)\n+  --> $DIR/impl[t]-foreign[local]-for-t.rs:12:1\n+   |\n+LL | impl<T> Remote1<Local> for T {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ type parameter `T` must be used as the type parameter for some local type\n+   |\n+   = note: only traits defined in the current crate can be implemented for a type parameter\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0210`."}, {"sha": "bacd3b89fad29333a04f65de99c86f0b8b75abb6", "filename": "src/test/ui/coherence/re-rebalance-coherence-rpass.rs", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/eb48d6bdee6c655d71f26594d47d232adf3e4e93/src%2Ftest%2Fui%2Fcoherence%2Fre-rebalance-coherence-rpass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb48d6bdee6c655d71f26594d47d232adf3e4e93/src%2Ftest%2Fui%2Fcoherence%2Fre-rebalance-coherence-rpass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fre-rebalance-coherence-rpass.rs?ref=eb48d6bdee6c655d71f26594d47d232adf3e4e93", "patch": "@@ -1,14 +0,0 @@\n-#![allow(dead_code)]\n-#![feature(re_rebalance_coherence)]\n-\n-// run-pass\n-// aux-build:re_rebalance_coherence_lib.rs\n-\n-extern crate re_rebalance_coherence_lib as lib;\n-use lib::*;\n-\n-struct Oracle;\n-impl Backend for Oracle {}\n-impl<'a, T:'a, Tab> QueryFragment<Oracle> for BatchInsert<'a, T, Tab> {}\n-\n-fn main() {}"}]}