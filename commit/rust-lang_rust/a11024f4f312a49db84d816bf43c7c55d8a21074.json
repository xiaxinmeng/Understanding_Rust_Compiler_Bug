{"sha": "a11024f4f312a49db84d816bf43c7c55d8a21074", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExMTAyNGY0ZjMxMmE0OWRiODRkODE2YmY0M2M3YzU1ZDhhMjEwNzQ=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-05-28T23:27:59Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-07-18T03:20:51Z"}, "message": "Fix debug assertion in typeck", "tree": {"sha": "2c2005d8bc4e9b720088c94d9507da4e0b575ce9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c2005d8bc4e9b720088c94d9507da4e0b575ce9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a11024f4f312a49db84d816bf43c7c55d8a21074", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXmatGLoofN5+9u4rsJhshcDi2qEFAl8SapMACgkQsJhshcDi\n2qFJkw//Uc7ifbiBr4pL926tvbPvbvTMKjGSh1tX6ZYLPXN6TTJj/AggZshUozxQ\naOMy17BRXF/IKGjGn9hAz+CR9ddFHjkFajlMWL/COTBbotBYlV+v3LiP19Q22Wja\nYCoF0mciJoJchxFjQZ6fzmJDleFzmWxBbtoyrGMUqDMYtFgO7U+lGlpA0wSsfbjX\nib0RzxWdZaoyqU4YGoDfeLpfoLwhvyLL1s6mb8tz5F2yaw6NKrp5PfXuqtw2igSh\nDnjgvaWU4Nl0xmsK3Isb3oIzyevzQ9hLevZWo/ofdvixpfAOf2li+i9XCU/amObA\nYZtUVCU8NTxbh/Hu/joUFYa+cD0axce34tpSRHuWk+Swyg2MQ0W3pJ83iRMZ2ORm\nwwxscFrKmUOMXF+w5yuLb2qmO7m+gBvAc/qUdva8Iuy81CzqCLsTirPZ5OkxwqHf\n5u9nIoqzxthwQqYn4daR0BIQg9nJdQWRln/Uq708/HOHMXaiHpvnEDbBhRU3FqS1\nH5CqvaRkq5TWDc2u7UxvDNYcJZY5FaMvBfLdRYVxaOGS4nH0AzbN9rP59Oz7f6+w\nCYkN7M3cYuxV/ODstnqoEjHG+WYHLCcMuEs70/SSkWxykk/RJHokZKp/IYHmWbS/\nFmlay+aWb7zkTERAvRRZkGvVbz2yUe4uJiDseggRv5wXRi6zZZQ=\n=RNUz\n-----END PGP SIGNATURE-----", "payload": "tree 2c2005d8bc4e9b720088c94d9507da4e0b575ce9\nparent d3df8512d2c2afc6d2e7d8b5b951dd7f2ad77b02\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1590708479 +0900\ncommitter Yuki Okushi <huyuumi.dev@gmail.com> 1595042451 +0900\n\nFix debug assertion in typeck\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a11024f4f312a49db84d816bf43c7c55d8a21074", "html_url": "https://github.com/rust-lang/rust/commit/a11024f4f312a49db84d816bf43c7c55d8a21074", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a11024f4f312a49db84d816bf43c7c55d8a21074/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d3df8512d2c2afc6d2e7d8b5b951dd7f2ad77b02", "url": "https://api.github.com/repos/rust-lang/rust/commits/d3df8512d2c2afc6d2e7d8b5b951dd7f2ad77b02", "html_url": "https://github.com/rust-lang/rust/commit/d3df8512d2c2afc6d2e7d8b5b951dd7f2ad77b02"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "c3b54f146142649591cad2bffb5e4ad4747f3004", "filename": "src/librustc_typeck/collect.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Flibrustc_typeck%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Flibrustc_typeck%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcollect.rs?ref=a11024f4f312a49db84d816bf43c7c55d8a21074", "patch": "@@ -1927,7 +1927,7 @@ fn explicit_predicates_of(tcx: TyCtxt<'_>, def_id: DefId) -> ty::GenericPredicat\n                         let re_root_empty = tcx.lifetimes.re_root_empty;\n                         let predicate = ty::OutlivesPredicate(ty, re_root_empty);\n                         predicates.push((\n-                            ty::PredicateKind::TypeOutlives(ty::Binder::dummy(predicate))\n+                            ty::PredicateKind::TypeOutlives(ty::Binder::bind(predicate))\n                                 .to_predicate(tcx),\n                             span,\n                         ));"}, {"sha": "c95f1dfdca53a8ab34f6691c1508b0b0251edb4b", "filename": "src/test/ui/traits/issue-72410.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.rs?ref=a11024f4f312a49db84d816bf43c7c55d8a21074", "patch": "@@ -0,0 +1,18 @@\n+// Regression test for #72410, this should be used with debug assertion enabled.\n+\n+// should be fine\n+pub trait Foo {\n+    fn map()\n+    where\n+        Self: Sized,\n+        for<'a> &'a mut [u8]: ;\n+}\n+\n+// should fail\n+pub trait Bar {\n+    fn map()\n+    where for<'a> &'a mut [dyn Bar]: ;\n+    //~^ ERROR: the trait `Bar` cannot be made into an object\n+}\n+\n+fn main() {}"}, {"sha": "1db2320841ff7791aaa129656fa7d78782be4e15", "filename": "src/test/ui/traits/issue-72410.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a11024f4f312a49db84d816bf43c7c55d8a21074/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-72410.stderr?ref=a11024f4f312a49db84d816bf43c7c55d8a21074", "patch": "@@ -0,0 +1,18 @@\n+error[E0038]: the trait `Bar` cannot be made into an object\n+  --> $DIR/issue-72410.rs:14:19\n+   |\n+LL | pub trait Bar {\n+   |           --- this trait cannot be made into an object...\n+LL |     fn map()\n+   |        --- ...because associated function `map` has no `self` parameter\n+LL |     where for<'a> &'a mut [dyn Bar]: ;\n+   |                   ^^^^^^^^^^^^^^^^^ the trait `Bar` cannot be made into an object\n+   |\n+help: consider turning `map` into a method by giving it a `&self` argument or constraining it so it does not apply to trait objects\n+   |\n+LL |     where for<'a> &'a mut [dyn Bar]:, Self: Sized ;\n+   |                                     ^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0038`."}]}