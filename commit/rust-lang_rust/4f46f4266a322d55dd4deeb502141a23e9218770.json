{"sha": "4f46f4266a322d55dd4deeb502141a23e9218770", "node_id": "C_kwDOAAsO6NoAKDRmNDZmNDI2NmEzMjJkNTVkZDRkZWViNTAyMTQxYTIzZTkyMTg3NzA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-25T18:56:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-25T18:56:57Z"}, "message": "Auto merge of #7874 - xFrednet:7756-move-lint, r=llogiq\n\nMove `non_send_fields_in_send_ty` to `suspicious`\n\nStabilize the `non_send_fields_in_send_ty` lint and update the lint for the `allowed_scripts` configuration.\n\n---\n\ncloses: rust-lang/rust-clippy#7756\n\nchangelog: Move `non_send_fields_in_send_ty` to `suspicious`", "tree": {"sha": "63cc645bce290c13f3285c6f08654eb6852dec6c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/63cc645bce290c13f3285c6f08654eb6852dec6c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f46f4266a322d55dd4deeb502141a23e9218770", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f46f4266a322d55dd4deeb502141a23e9218770", "html_url": "https://github.com/rust-lang/rust/commit/4f46f4266a322d55dd4deeb502141a23e9218770", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f46f4266a322d55dd4deeb502141a23e9218770/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc2d93349a2edf6090cb2518358af6789d899d1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc2d93349a2edf6090cb2518358af6789d899d1e", "html_url": "https://github.com/rust-lang/rust/commit/cc2d93349a2edf6090cb2518358af6789d899d1e"}, {"sha": "1ad04f4054db6af3e64f95449a86753f2259fc5e", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ad04f4054db6af3e64f95449a86753f2259fc5e", "html_url": "https://github.com/rust-lang/rust/commit/1ad04f4054db6af3e64f95449a86753f2259fc5e"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "e08bfeec7ca399515744eae1f5f4e81183b08129", "filename": "clippy_lints/src/lib.register_all.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_all.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_all.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_all.rs?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -218,6 +218,7 @@ store.register_group(true, \"clippy::all\", Some(\"clippy_all\"), vec![\n     LintId::of(non_copy_const::DECLARE_INTERIOR_MUTABLE_CONST),\n     LintId::of(non_expressive_names::JUST_UNDERSCORES_AND_DIGITS),\n     LintId::of(non_octal_unix_permissions::NON_OCTAL_UNIX_PERMISSIONS),\n+    LintId::of(non_send_fields_in_send_ty::NON_SEND_FIELDS_IN_SEND_TY),\n     LintId::of(open_options::NONSENSICAL_OPEN_OPTIONS),\n     LintId::of(option_env_unwrap::OPTION_ENV_UNWRAP),\n     LintId::of(overflow_check_conditional::OVERFLOW_CHECK_CONDITIONAL),"}, {"sha": "44c75a11eec08111c17db1d2ca03862a17e3a6a3", "filename": "clippy_lints/src/lib.register_nursery.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_nursery.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_nursery.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_nursery.rs?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -17,7 +17,6 @@ store.register_group(true, \"clippy::nursery\", Some(\"clippy_nursery\"), vec![\n     LintId::of(missing_const_for_fn::MISSING_CONST_FOR_FN),\n     LintId::of(mutable_debug_assertion::DEBUG_ASSERT_WITH_MUT_CALL),\n     LintId::of(mutex_atomic::MUTEX_INTEGER),\n-    LintId::of(non_send_fields_in_send_ty::NON_SEND_FIELDS_IN_SEND_TY),\n     LintId::of(nonstandard_macro_braces::NONSTANDARD_MACRO_BRACES),\n     LintId::of(option_if_let_else::OPTION_IF_LET_ELSE),\n     LintId::of(path_buf_push_overwrite::PATH_BUF_PUSH_OVERWRITE),"}, {"sha": "a3f964d1580428f92230f26f169586fd86e25504", "filename": "clippy_lints/src/lib.register_suspicious.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_suspicious.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Flib.register_suspicious.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_suspicious.rs?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -15,6 +15,7 @@ store.register_group(true, \"clippy::suspicious\", Some(\"clippy_suspicious\"), vec!\n     LintId::of(loops::MUT_RANGE_BOUND),\n     LintId::of(methods::SUSPICIOUS_MAP),\n     LintId::of(mut_key::MUTABLE_KEY_TYPE),\n+    LintId::of(non_send_fields_in_send_ty::NON_SEND_FIELDS_IN_SEND_TY),\n     LintId::of(suspicious_trait_impl::SUSPICIOUS_ARITHMETIC_IMPL),\n     LintId::of(suspicious_trait_impl::SUSPICIOUS_OP_ASSIGN_IMPL),\n ])"}, {"sha": "7ebf84d400f569c3f891bc7d417afeeb2d741167", "filename": "clippy_lints/src/non_send_fields_in_send_ty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_send_fields_in_send_ty.rs?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -44,7 +44,7 @@ declare_clippy_lint! {\n     /// Use thread-safe types like [`std::sync::Arc`](https://doc.rust-lang.org/std/sync/struct.Arc.html)\n     /// or specify correct bounds on generic type parameters (`T: Send`).\n     pub NON_SEND_FIELDS_IN_SEND_TY,\n-    nursery,\n+    suspicious,\n     \"there is field that does not implement `Send` in a `Send` struct\"\n }\n "}, {"sha": "122a5ce3fc8f12d19fd8d0ce877ff2a672c01537", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -288,10 +288,10 @@ define_Conf! {\n     ///\n     /// The list of imports to always rename, a fully qualified path followed by the rename.\n     (enforced_import_renames: Vec<crate::utils::conf::Rename> = Vec::new()),\n-    /// Lint: RESTRICTED_SCRIPTS.\n+    /// Lint: DISALLOWED_SCRIPT_IDENTS.\n     ///\n     /// The list of unicode scripts allowed to be used in the scope.\n-    (allowed_scripts: Vec<String> = vec![\"Latin\".to_string()]),\n+    (allowed_scripts: Vec<String> = [\"Latin\"].iter().map(ToString::to_string).collect()),\n     /// Lint: NON_SEND_FIELDS_IN_SEND_TY.\n     ///\n     /// Whether to apply the raw pointer heuristic to determine if a type is `Send`."}, {"sha": "e0a9b27777aa47b4bb27c3580c25e0a7124c3b66", "filename": "doc/adding_lints.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f46f4266a322d55dd4deeb502141a23e9218770/doc%2Fadding_lints.md", "raw_url": "https://github.com/rust-lang/rust/raw/4f46f4266a322d55dd4deeb502141a23e9218770/doc%2Fadding_lints.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Fadding_lints.md?ref=4f46f4266a322d55dd4deeb502141a23e9218770", "patch": "@@ -564,7 +564,8 @@ in the following steps:\n     /// <The configuration field doc comment>\n     (configuration_ident: Type = DefaultValue),\n     ```\n-    The doc comment will be automatically added to the lint documentation.\n+    The doc comment is automatically added to the documentation of the listed lints. The default\n+    value will be formatted using the `Debug` implementation of the type.\n 2. Adding the configuration value to the lint impl struct:\n     1. This first requires the definition of a lint impl struct. Lint impl structs are usually\n         generated with the `declare_lint_pass!` macro. This struct needs to be defined manually"}]}