{"sha": "a4dbb8c9097157c8e51002c0b4d4216e04466338", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0ZGJiOGM5MDk3MTU3YzhlNTEwMDJjMGI0ZDQyMTZlMDQ0NjYzMzg=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-05-01T09:32:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-01T09:32:35Z"}, "message": "Rollup merge of #84740 - r00ster91:patch-6, r=GuillaumeGomez\n\nReset the docs' copy path button after 1 second\n\nI like that this copy path button on the top next to the type/module's name changes to a check mark when you successfully clicked and copied the path but I find it really weird how the icon stays that check mark forever after the first time of clicking it. Imagine you leave that documentation tab open and come back after 2 hours and you still see that check mark in that box because you copied the path 2 hours ago. You will probably be confused and you might've forgotten what that button even does (even more so currently where this is a new feature, or when you simply don't use it often), so I really think at some point it should go back to the \u2398 icon which, at least to me, pretty clearly indicates copying, whereas the check mark (if it stays there for so long) could falsely look like a verification mark indicating \"this module is verified\" or something like that.\nI believe after a longer period of time it's not logical to still tell the user \"yes you've copied this successful\".\n\nIn addition to this timeout, maybe it could be made so that you can't copy again until this cooldown of 1 second is over, but I'm not sure how useful or user-friendly that feature would be so maybe it's fine the way it is now.\nAlso the timeout is cleared every time you click again so if you constantly click it, it won't reset during that.", "tree": {"sha": "e0e092e9111a1f3dd1a7059550bd7f1d97945ff0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e0e092e9111a1f3dd1a7059550bd7f1d97945ff0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4dbb8c9097157c8e51002c0b4d4216e04466338", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgjSAzCRBK7hj4Ov3rIwAA5LEIAFVFDSDbC4HLvkr73wXJH4RS\ntYWuSjZ40gmHw4ZSxh5kSqEXieJtFTC2j06rgQ/O+KnwaH0Au/hK2ZUYoQBbllYu\nB++LRPKCiD9NL0HwcFElGJEEuuOwWLsqAkwiI08n3EMG+8Q6AE5hZYGEVeSz4KpK\nkAXwa5ex2Ihk3/BIxL3eyayuUF+tMdDFSGd6myt/VmPSWb8ZKb0px6smlGYPQqkY\nEriEjp34aaMgzYhfHsOXs8Q160394LEyT3si3rkvp9ouOsTJJVeWXyZVrpRei2aF\nNcWoaUm5bDplZSp+jfeRmqq8T74D8Sbgdoa4EHP6rHwRapiDt9V3YiZOab22LGE=\n=Z2tc\n-----END PGP SIGNATURE-----\n", "payload": "tree e0e092e9111a1f3dd1a7059550bd7f1d97945ff0\nparent 4d6d26ec6d6211890c5a3590555b22cd99b5f32c\nparent bea99a5da6acaa30cf27cd8d6268527ff24ee77e\nauthor Yuki Okushi <jtitor@2k36.org> 1619861555 +0900\ncommitter GitHub <noreply@github.com> 1619861555 +0900\n\nRollup merge of #84740 - r00ster91:patch-6, r=GuillaumeGomez\n\nReset the docs' copy path button after 1 second\n\nI like that this copy path button on the top next to the type/module's name changes to a check mark when you successfully clicked and copied the path but I find it really weird how the icon stays that check mark forever after the first time of clicking it. Imagine you leave that documentation tab open and come back after 2 hours and you still see that check mark in that box because you copied the path 2 hours ago. You will probably be confused and you might've forgotten what that button even does (even more so currently where this is a new feature, or when you simply don't use it often), so I really think at some point it should go back to the \u2398 icon which, at least to me, pretty clearly indicates copying, whereas the check mark (if it stays there for so long) could falsely look like a verification mark indicating \"this module is verified\" or something like that.\nI believe after a longer period of time it's not logical to still tell the user \"yes you've copied this successful\".\n\nIn addition to this timeout, maybe it could be made so that you can't copy again until this cooldown of 1 second is over, but I'm not sure how useful or user-friendly that feature would be so maybe it's fine the way it is now.\nAlso the timeout is cleared every time you click again so if you constantly click it, it won't reset during that.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4dbb8c9097157c8e51002c0b4d4216e04466338", "html_url": "https://github.com/rust-lang/rust/commit/a4dbb8c9097157c8e51002c0b4d4216e04466338", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4dbb8c9097157c8e51002c0b4d4216e04466338/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d6d26ec6d6211890c5a3590555b22cd99b5f32c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d6d26ec6d6211890c5a3590555b22cd99b5f32c", "html_url": "https://github.com/rust-lang/rust/commit/4d6d26ec6d6211890c5a3590555b22cd99b5f32c"}, {"sha": "bea99a5da6acaa30cf27cd8d6268527ff24ee77e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bea99a5da6acaa30cf27cd8d6268527ff24ee77e", "html_url": "https://github.com/rust-lang/rust/commit/bea99a5da6acaa30cf27cd8d6268527ff24ee77e"}], "stats": {"total": 55, "additions": 35, "deletions": 20}, "files": [{"sha": "e81eaca8f0e40ae4027c882b0eda19e45bfc918c", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 35, "deletions": 20, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/a4dbb8c9097157c8e51002c0b4d4216e04466338/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/a4dbb8c9097157c8e51002c0b4d4216e04466338/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=a4dbb8c9097157c8e51002c0b4d4216e04466338", "patch": "@@ -1490,27 +1490,42 @@ function hideThemeButtonState() {\n     searchState.setup();\n }());\n \n-function copy_path(but) {\n-    var parent = but.parentElement;\n-    var path = [];\n+(function () {\n+    var reset_button_timeout = null;\n \n-    onEach(parent.childNodes, function(child) {\n-        if (child.tagName === 'A') {\n-            path.push(child.textContent);\n-        }\n-    });\n+    window.copy_path = function(but) {\n+        var parent = but.parentElement;\n+        var path = [];\n \n-    var el = document.createElement('textarea');\n-    el.value = 'use ' + path.join('::') + ';';\n-    el.setAttribute('readonly', '');\n-    // To not make it appear on the screen.\n-    el.style.position = 'absolute';\n-    el.style.left = '-9999px';\n+        onEach(parent.childNodes, function(child) {\n+            if (child.tagName === 'A') {\n+                path.push(child.textContent);\n+            }\n+        });\n \n-    document.body.appendChild(el);\n-    el.select();\n-    document.execCommand('copy');\n-    document.body.removeChild(el);\n+        var el = document.createElement('textarea');\n+        el.value = 'use ' + path.join('::') + ';';\n+        el.setAttribute('readonly', '');\n+        // To not make it appear on the screen.\n+        el.style.position = 'absolute';\n+        el.style.left = '-9999px';\n \n-    but.textContent = '\u2713';\n-}\n+        document.body.appendChild(el);\n+        el.select();\n+        document.execCommand('copy');\n+        document.body.removeChild(el);\n+\n+        but.textContent = '\u2713';\n+\n+        if (reset_button_timeout !== null) {\n+            window.clearTimeout(reset_button_timeout);\n+        }\n+\n+        function reset_button() {\n+            but.textContent = '\u2398';\n+            reset_button_timeout = null;\n+        }\n+\n+        reset_button_timeout = window.setTimeout(reset_button, 1000);\n+    };\n+}());"}]}