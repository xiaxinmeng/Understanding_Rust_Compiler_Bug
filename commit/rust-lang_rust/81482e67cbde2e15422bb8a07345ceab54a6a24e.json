{"sha": "81482e67cbde2e15422bb8a07345ceab54a6a24e", "node_id": "C_kwDOAAsO6NoAKDgxNDgyZTY3Y2JkZTJlMTU0MjJiYjhhMDczNDVjZWFiNTRhNmEyNGU", "commit": {"author": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-06-22T05:31:23Z"}, "committer": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-06-22T05:33:35Z"}, "message": "Remove individual crate checks for bootstrap in tidy\n\nThis duplicates a lot of checking, and doesn't seem particularly useful -\nthese are already caught in review.\n\nNote that this still keeps the license check.", "tree": {"sha": "726714bc2524020107e3369438446d67b439af8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/726714bc2524020107e3369438446d67b439af8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81482e67cbde2e15422bb8a07345ceab54a6a24e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81482e67cbde2e15422bb8a07345ceab54a6a24e", "html_url": "https://github.com/rust-lang/rust/commit/81482e67cbde2e15422bb8a07345ceab54a6a24e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81482e67cbde2e15422bb8a07345ceab54a6a24e/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "345eb14f6c841cd38e76a5b0bbf99e1b94a90d40", "url": "https://api.github.com/repos/rust-lang/rust/commits/345eb14f6c841cd38e76a5b0bbf99e1b94a90d40", "html_url": "https://github.com/rust-lang/rust/commit/345eb14f6c841cd38e76a5b0bbf99e1b94a90d40"}], "stats": {"total": 83, "additions": 0, "deletions": 83}, "files": [{"sha": "55cf3fee9bf11d805880071e3913953e2e0dc4ab", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 0, "deletions": 83, "changes": 83, "blob_url": "https://github.com/rust-lang/rust/blob/81482e67cbde2e15422bb8a07345ceab54a6a24e/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81482e67cbde2e15422bb8a07345ceab54a6a24e/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=81482e67cbde2e15422bb8a07345ceab54a6a24e", "patch": "@@ -293,82 +293,6 @@ const PERMITTED_CRANELIFT_DEPENDENCIES: &[&str] = &[\n     \"winapi-x86_64-pc-windows-gnu\",\n ];\n \n-const PERMITTED_BOOTSTRAP_DEPENDENCIES: &[&str] = &[\n-    \"aho-corasick\",\n-    \"autocfg\",\n-    \"ansi_term\",\n-    \"block-buffer\",\n-    \"bitflags\",\n-    \"bstr\",\n-    \"core-foundation-sys\",\n-    \"cc\",\n-    \"cfg-if\",\n-    \"crossbeam-utils\",\n-    \"cmake\",\n-    \"cpufeatures\",\n-    \"crossbeam-channel\",\n-    \"crossbeam-deque\",\n-    \"crossbeam-epoch\",\n-    \"crypto-common\",\n-    \"ctor\",\n-    \"diff\",\n-    \"digest\",\n-    \"either\",\n-    \"filetime\",\n-    \"fnv\",\n-    \"getopts\",\n-    \"generic-array\",\n-    \"globset\",\n-    \"hermit-abi\",\n-    \"hex\",\n-    \"ignore\",\n-    \"itoa\",\n-    \"lazy_static\",\n-    \"libc\",\n-    \"log\",\n-    \"lzma-sys\",\n-    \"memchr\",\n-    \"memoffset\",\n-    \"ntapi\",\n-    \"num_cpus\",\n-    \"once_cell\",\n-    \"opener\",\n-    \"output_vt100\",\n-    \"pkg-config\",\n-    \"pretty_assertions\",\n-    \"proc-macro2\",\n-    \"quote\",\n-    \"rayon\",\n-    \"rayon-core\",\n-    \"redox_syscall\",\n-    \"regex\",\n-    \"regex-automata\",\n-    \"regex-syntax\",\n-    \"ryu\",\n-    \"same-file\",\n-    \"scopeguard\",\n-    \"serde\",\n-    \"serde_derive\",\n-    \"serde_json\",\n-    \"sha2\",\n-    \"syn\",\n-    \"sysinfo\",\n-    \"tar\",\n-    \"thread_local\",\n-    \"toml\",\n-    \"typenum\",\n-    \"unicode-ident\",\n-    \"unicode-width\",\n-    \"version_check\",\n-    \"walkdir\",\n-    \"winapi\",\n-    \"winapi-i686-pc-windows-gnu\",\n-    \"winapi-util\",\n-    \"winapi-x86_64-pc-windows-gnu\",\n-    \"xattr\",\n-    \"xz2\",\n-];\n-\n const FORBIDDEN_TO_HAVE_DUPLICATES: &[&str] = &[\n     // These two crates take quite a long time to build, so don't allow two versions of them\n     // to accidentally sneak into our dependency graph, in order to ensure we keep our CI times\n@@ -422,13 +346,6 @@ pub fn check(root: &Path, cargo: &Path, bad: &mut bool) {\n     let metadata = t!(cmd.exec());\n     let runtime_ids = HashSet::new();\n     check_exceptions(&metadata, EXCEPTIONS_BOOTSTRAP, runtime_ids, bad);\n-    check_dependencies(\n-        &metadata,\n-        \"bootstrap\",\n-        PERMITTED_BOOTSTRAP_DEPENDENCIES,\n-        &[\"bootstrap\"],\n-        bad,\n-    );\n }\n \n /// Check that all licenses are in the valid list in `LICENSES`."}]}