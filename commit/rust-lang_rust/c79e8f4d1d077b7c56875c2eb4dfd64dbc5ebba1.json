{"sha": "c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3OWU4ZjRkMWQwNzdiN2M1Njg3NWMyZWI0ZGZkNjRkYmM1ZWJiYTE=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2017-11-10T12:23:51Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2017-11-14T06:52:26Z"}, "message": "rustc: remove unused MirSource::GeneratorDrop.", "tree": {"sha": "c5dac85a7efadfce7fe0ba483a992fd71af1ea2c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c5dac85a7efadfce7fe0ba483a992fd71af1ea2c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "html_url": "https://github.com/rust-lang/rust/commit/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5022f2f16f380c4847b75d66c20f638b2fd1919", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5022f2f16f380c4847b75d66c20f638b2fd1919", "html_url": "https://github.com/rust-lang/rust/commit/c5022f2f16f380c4847b75d66c20f638b2fd1919"}], "stats": {"total": 14, "additions": 2, "deletions": 12}, "files": [{"sha": "00f8926711e337bc7c7d90a85da0637653bc69b4", "filename": "src/librustc/mir/transform.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc%2Fmir%2Ftransform.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc%2Fmir%2Ftransform.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Ftransform.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -31,9 +31,6 @@ pub enum MirSource {\n \n     /// Promoted rvalues within a function.\n     Promoted(NodeId, Promoted),\n-\n-    /// Drop glue for a generator.\n-    GeneratorDrop(NodeId),\n }\n \n impl<'a, 'gcx, 'tcx> MirSource {\n@@ -70,7 +67,6 @@ impl<'a, 'gcx, 'tcx> MirSource {\n         match *self {\n             MirSource::Fn(id) |\n             MirSource::Const(id) |\n-            MirSource::GeneratorDrop(id) |\n             MirSource::Static(id, _) |\n             MirSource::Promoted(id, _) => id\n         }"}, {"sha": "07d5f69eeedbcb6c481d9a5b1c3d8021e508efd1", "filename": "src/librustc_mir/build/scope.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Fbuild%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Fbuild%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fscope.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -603,8 +603,7 @@ impl<'a, 'gcx, 'tcx> Builder<'a, 'gcx, 'tcx> {\n                 None,\n             MirSource::Fn(_) =>\n                 Some(self.topmost_scope()),\n-            MirSource::Promoted(..) |\n-            MirSource::GeneratorDrop(..) =>\n+            MirSource::Promoted(..) =>\n                 bug!(),\n         }\n     }"}, {"sha": "9d88b1b0a16a8580e5a19b827030ef3e4b20d788", "filename": "src/librustc_mir/hair/cx/mod.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Fhair%2Fcx%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Fhair%2Fcx%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fhair%2Fcx%2Fmod.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -64,7 +64,6 @@ impl<'a, 'gcx, 'tcx> Cx<'a, 'gcx, 'tcx> {\n         let constness = match src {\n             MirSource::Const(_) |\n             MirSource::Static(..) => hir::Constness::Const,\n-            MirSource::GeneratorDrop(..) => hir::Constness::NotConst,\n             MirSource::Fn(id) => {\n                 let fn_like = FnLikeNode::from_node(infcx.tcx.hir.get(id));\n                 fn_like.map_or(hir::Constness::NotConst, |f| f.constness())"}, {"sha": "ea72125274c5394cd7af62c4e3bd30dd0992c9b9", "filename": "src/librustc_mir/transform/copy_prop.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Ftransform%2Fcopy_prop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Ftransform%2Fcopy_prop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fcopy_prop.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -61,7 +61,6 @@ impl MirPass for CopyPropagation {\n                     return\n                 }\n             }\n-            MirSource::GeneratorDrop(_) => (),\n         }\n \n         // We only run when the MIR optimization level is > 1."}, {"sha": "318406549ac9ad2ef97f6ba26562ec952c544569", "filename": "src/librustc_mir/transform/qualify_consts.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -979,7 +979,6 @@ impl MirPass for QualifyAndPromoteConstants {\n             }\n             MirSource::Static(_, hir::MutImmutable) => Mode::Static,\n             MirSource::Static(_, hir::MutMutable) => Mode::StaticMut,\n-            MirSource::GeneratorDrop(_) |\n             MirSource::Promoted(..) => return\n         };\n "}, {"sha": "95df07f06f4e0244861291b402252bb3f8787212", "filename": "src/librustc_mir/util/pretty.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Futil%2Fpretty.rs?ref=c79e8f4d1d077b7c56875c2eb4dfd64dbc5ebba1", "patch": "@@ -114,7 +114,6 @@ where\n {\n     let promotion_id = match source {\n         MirSource::Promoted(_, id) => format!(\"-{:?}\", id),\n-        MirSource::GeneratorDrop(_) => format!(\"-drop\"),\n         _ => String::new()\n     };\n \n@@ -374,15 +373,14 @@ fn write_mir_sig(tcx: TyCtxt, src: MirSource, mir: &Mir, w: &mut Write)\n         MirSource::Static(_, hir::MutImmutable) => write!(w, \"static\")?,\n         MirSource::Static(_, hir::MutMutable) => write!(w, \"static mut\")?,\n         MirSource::Promoted(_, i) => write!(w, \"{:?} in\", i)?,\n-        MirSource::GeneratorDrop(_) => write!(w, \"drop_glue\")?,\n     }\n \n     item_path::with_forced_impl_filename_line(|| { // see notes on #41697 elsewhere\n         write!(w, \" {}\", tcx.node_path_str(src.item_id()))\n     })?;\n \n     match src {\n-        MirSource::Fn(_) | MirSource::GeneratorDrop(_) => {\n+        MirSource::Fn(_) => {\n             write!(w, \"(\")?;\n \n             // fn argument types."}]}