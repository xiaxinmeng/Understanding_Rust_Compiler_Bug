{"sha": "ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "node_id": "C_kwDOAAsO6NoAKGVjOWE0Y2UxOWU2ZjFhNmM3NjA2MzNiY2M4ODI2ZDQ3Y2JhMjdmMjI", "commit": {"author": {"name": "Matt Harding", "email": "majaharding@gmail.com", "date": "2023-02-16T00:25:28Z"}, "committer": {"name": "Matt Harding", "email": "majaharding@gmail.com", "date": "2023-02-20T23:37:19Z"}, "message": "Explain the default panic hook better\n\nThis changes the documentation of `std::panic::set_hook` and `take_hook` to better explain how the default panic hook works. In particular the fact that `take_hook` registers the default hook, rather than no hook at all, was missing from the docs.", "tree": {"sha": "9ebfc9447b73ecbaa866e75fea5c17896e9a45bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9ebfc9447b73ecbaa866e75fea5c17896e9a45bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "html_url": "https://github.com/rust-lang/rust/commit/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22/comments", "author": {"login": "majaha", "id": 8265836, "node_id": "MDQ6VXNlcjgyNjU4MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/8265836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/majaha", "html_url": "https://github.com/majaha", "followers_url": "https://api.github.com/users/majaha/followers", "following_url": "https://api.github.com/users/majaha/following{/other_user}", "gists_url": "https://api.github.com/users/majaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/majaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/majaha/subscriptions", "organizations_url": "https://api.github.com/users/majaha/orgs", "repos_url": "https://api.github.com/users/majaha/repos", "events_url": "https://api.github.com/users/majaha/events{/privacy}", "received_events_url": "https://api.github.com/users/majaha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "majaha", "id": 8265836, "node_id": "MDQ6VXNlcjgyNjU4MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/8265836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/majaha", "html_url": "https://github.com/majaha", "followers_url": "https://api.github.com/users/majaha/followers", "following_url": "https://api.github.com/users/majaha/following{/other_user}", "gists_url": "https://api.github.com/users/majaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/majaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/majaha/subscriptions", "organizations_url": "https://api.github.com/users/majaha/orgs", "repos_url": "https://api.github.com/users/majaha/repos", "events_url": "https://api.github.com/users/majaha/events{/privacy}", "received_events_url": "https://api.github.com/users/majaha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5283576ec18937d98889679a54aa8f2dee2b875", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5283576ec18937d98889679a54aa8f2dee2b875", "html_url": "https://github.com/rust-lang/rust/commit/c5283576ec18937d98889679a54aa8f2dee2b875"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "e59f32af77df8bdf2428e2d348707154f0220431", "filename": "library/std/src/panicking.rs", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22/library%2Fstd%2Fsrc%2Fpanicking.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec9a4ce19e6f1a6c760633bcc8826d47cba27f22/library%2Fstd%2Fsrc%2Fpanicking.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpanicking.rs?ref=ec9a4ce19e6f1a6c760633bcc8826d47cba27f22", "patch": "@@ -95,13 +95,16 @@ impl Default for Hook {\n \n static HOOK: RwLock<Hook> = RwLock::new(Hook::Default);\n \n-/// Registers a custom panic hook, replacing any that was previously registered.\n+/// Registers a custom panic hook, replacing the previously registered hook.\n ///\n /// The panic hook is invoked when a thread panics, but before the panic runtime\n /// is invoked. As such, the hook will run with both the aborting and unwinding\n-/// runtimes. The default hook prints a message to standard error and generates\n-/// a backtrace if requested, but this behavior can be customized with the\n-/// `set_hook` and [`take_hook`] functions.\n+/// runtimes.\n+///\n+/// The default hook, which is registered at startup, prints a message to standard error and\n+/// generates a backtrace if requested. This behavior can be customized using the `set_hook` function.\n+/// The current hook can be retrieved while reinstating the default hook with the [`take_hook`]\n+/// function.\n ///\n /// [`take_hook`]: ./fn.take_hook.html\n ///\n@@ -143,13 +146,14 @@ pub fn set_hook(hook: Box<dyn Fn(&PanicInfo<'_>) + 'static + Sync + Send>) {\n     drop(old);\n }\n \n-/// Unregisters the current panic hook, returning it.\n+/// Unregisters the current panic hook and returns it, registering the default hook\n+/// in its place.\n ///\n /// *See also the function [`set_hook`].*\n ///\n /// [`set_hook`]: ./fn.set_hook.html\n ///\n-/// If no custom hook is registered, the default hook will be returned.\n+/// If the default hook is registered it will be returned, but remain registered.\n ///\n /// # Panics\n ///"}]}