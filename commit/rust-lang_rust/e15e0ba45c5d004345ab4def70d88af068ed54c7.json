{"sha": "e15e0ba45c5d004345ab4def70d88af068ed54c7", "node_id": "C_kwDOAAsO6NoAKGUxNWUwYmE0NWM1ZDAwNDM0NWFiNGRlZjcwZDg4YWYwNjhlZDU0Yzc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-11-29T09:41:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-11-29T09:41:38Z"}, "message": "Rollup merge of #91349 - tmiasko:accumulate-remark-args, r=nikic\n\nAccumulate all values of `-C remark` option\n\nWhen `-C remark=...` option is specified multiple times,\naccumulate all values instead of using only the last one.\n\nr? `@nikic`", "tree": {"sha": "b8e1742dd8a7c5eae29a58bf9ab5afe371e9c816", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8e1742dd8a7c5eae29a58bf9ab5afe371e9c816"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e15e0ba45c5d004345ab4def70d88af068ed54c7", "comment_count": 1, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhpKBSCRBK7hj4Ov3rIwAAkVcIAG8ffCMziHYQIK/YhpVYTQDg\nfIhssSDFIRRRim0FzRUSYHDPO7CxBbFdbJxdcXtMAcCn6Rv5yDkn/zonzgPqOvS7\n3RPz2AiHQwd9lnf769ehJQf4UnyrckylEG6N0UJDtNlRRO9Zt9hfG12iXX844h1c\nQWP3JH4/7bv6+txqdoVPDjSJTbMhvkjhbE9BK5sg5ReOR82Cnx2Ri7acJY6WYoQm\nbJ81vJQDPiKr8svxJiNgU8biRMZzlDmGPqT4XmjEc7a5ElbJq3yDe9mbi0rzdQ1Z\nUvpU3htFaYz4nbdAMlVMR7T5Rf0xLmJBhnUQsr7VAekxTTF9aCj4SXHJF/PQTp8=\n=XGfF\n-----END PGP SIGNATURE-----\n", "payload": "tree b8e1742dd8a7c5eae29a58bf9ab5afe371e9c816\nparent b8a4a4c2327c7699713a7a2f205affbb9de22b0e\nparent e74e39a6990d4d66f52c44bb9d0d06e9e2202d21\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1638178898 +0100\ncommitter GitHub <noreply@github.com> 1638178898 +0100\n\nRollup merge of #91349 - tmiasko:accumulate-remark-args, r=nikic\n\nAccumulate all values of `-C remark` option\n\nWhen `-C remark=...` option is specified multiple times,\naccumulate all values instead of using only the last one.\n\nr? `@nikic`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e15e0ba45c5d004345ab4def70d88af068ed54c7", "html_url": "https://github.com/rust-lang/rust/commit/e15e0ba45c5d004345ab4def70d88af068ed54c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e15e0ba45c5d004345ab4def70d88af068ed54c7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8a4a4c2327c7699713a7a2f205affbb9de22b0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8a4a4c2327c7699713a7a2f205affbb9de22b0e", "html_url": "https://github.com/rust-lang/rust/commit/b8a4a4c2327c7699713a7a2f205affbb9de22b0e"}, {"sha": "e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "url": "https://api.github.com/repos/rust-lang/rust/commits/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "html_url": "https://github.com/rust-lang/rust/commit/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "16b68d95858b87b9c63ef82cc17def481aa69aed", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e15e0ba45c5d004345ab4def70d88af068ed54c7/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e15e0ba45c5d004345ab4def70d88af068ed54c7/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=e15e0ba45c5d004345ab4def70d88af068ed54c7", "patch": "@@ -833,6 +833,13 @@ impl Passes {\n             Passes::All => false,\n         }\n     }\n+\n+    pub fn extend(&mut self, passes: impl IntoIterator<Item = String>) {\n+        match *self {\n+            Passes::Some(ref mut v) => v.extend(passes),\n+            Passes::All => {}\n+        }\n+    }\n }\n \n pub const fn default_lib_output() -> CrateType {"}, {"sha": "779f29e3dfedf32824e7b9cb558bc58e01f3436b", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e15e0ba45c5d004345ab4def70d88af068ed54c7/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e15e0ba45c5d004345ab4def70d88af068ed54c7/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=e15e0ba45c5d004345ab4def70d88af068ed54c7", "patch": "@@ -567,7 +567,7 @@ mod parse {\n             v => {\n                 let mut passes = vec![];\n                 if parse_list(&mut passes, v) {\n-                    *slot = Passes::Some(passes);\n+                    slot.extend(passes);\n                     true\n                 } else {\n                     false"}, {"sha": "36549cbc554bfdd1a6b504989006afbb6c51750f", "filename": "src/test/ui/optimization-remark.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e15e0ba45c5d004345ab4def70d88af068ed54c7/src%2Ftest%2Fui%2Foptimization-remark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e15e0ba45c5d004345ab4def70d88af068ed54c7/src%2Ftest%2Fui%2Foptimization-remark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Foptimization-remark.rs?ref=e15e0ba45c5d004345ab4def70d88af068ed54c7", "patch": "@@ -1,10 +1,19 @@\n // build-pass\n // ignore-pass\n // no-system-llvm\n-// revisions: all inline\n-//          compile-flags: --crate-type=lib -Cdebuginfo=1 -Copt-level=2\n+// revisions: all inline merge1 merge2\n+// compile-flags: --crate-type=lib -Cdebuginfo=1 -Copt-level=2\n+//\n+// Check that remarks can be enabled individually or with \"all\":\n+//\n // [all]    compile-flags: -Cremark=all\n // [inline] compile-flags: -Cremark=inline\n+//\n+// Check that values of -Cremark flag are accumulated:\n+//\n+// [merge1] compile-flags: -Cremark=all    -Cremark=giraffe\n+// [merge2] compile-flags: -Cremark=inline -Cremark=giraffe\n+//\n // error-pattern: inline: f not inlined into g\n // dont-check-compiler-stderr\n "}]}