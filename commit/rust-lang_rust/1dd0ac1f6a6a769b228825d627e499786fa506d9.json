{"sha": "1dd0ac1f6a6a769b228825d627e499786fa506d9", "node_id": "C_kwDOAAsO6NoAKDFkZDBhYzFmNmE2YTc2OWIyMjg4MjVkNjI3ZTQ5OTc4NmZhNTA2ZDk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-26T22:45:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-26T22:45:19Z"}, "message": "Rollup merge of #91861 - juniorbassani:use-from-array-in-collections-examples, r=yaahc\n\nReplace iterator-based construction of collections by `Into<T>`\n\nJust a few quality of life improvements in the doc examples. I also removed some `Vec`s in favor of arrays.", "tree": {"sha": "97360069bff3902deadb8b05545f2e599676e09e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/97360069bff3902deadb8b05545f2e599676e09e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1dd0ac1f6a6a769b228825d627e499786fa506d9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh8c7/CRBK7hj4Ov3rIwAApS0IAAmp+JEdA9X1YWNGTr8uufYG\nQ4APQVOnXHnZx5esZWYFD3a6+r4SY33P1//2ZNHc4z2aNFH4rXcYDUYBVgpo95DF\nJgggv3qMpIx58AY3Kp+k7JUXhphqb/eN+akut4CvE4pH2KweXcT983c9f2yXnC/x\nfBksdWIzQufbO3JpIMs1bD959Lkeo0WCNCl39A3VeZ4KNO4TmN92bANgf3HnbXkr\nM4DmVHy3xs5Q0IlVubUVhStFJDkU/ektjMiTzjP67FNCkoEqI96NG41U0d5ENgUH\nJhXqUo694YH/BS+l3Kpflw/MZzHZ8z4ukoMjFLDY7+NdTlVxTP8MnXKKlXTJfQQ=\n=5BNv\n-----END PGP SIGNATURE-----\n", "payload": "tree 97360069bff3902deadb8b05545f2e599676e09e\nparent faf2b7f45593112cdb000783663624ba071a74d4\nparent 8936659297e6e53c33fb1e8e8c723e451d9357ab\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1643237119 +0100\ncommitter GitHub <noreply@github.com> 1643237119 +0100\n\nRollup merge of #91861 - juniorbassani:use-from-array-in-collections-examples, r=yaahc\n\nReplace iterator-based construction of collections by `Into<T>`\n\nJust a few quality of life improvements in the doc examples. I also removed some `Vec`s in favor of arrays.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1dd0ac1f6a6a769b228825d627e499786fa506d9", "html_url": "https://github.com/rust-lang/rust/commit/1dd0ac1f6a6a769b228825d627e499786fa506d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1dd0ac1f6a6a769b228825d627e499786fa506d9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "faf2b7f45593112cdb000783663624ba071a74d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/faf2b7f45593112cdb000783663624ba071a74d4", "html_url": "https://github.com/rust-lang/rust/commit/faf2b7f45593112cdb000783663624ba071a74d4"}, {"sha": "8936659297e6e53c33fb1e8e8c723e451d9357ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/8936659297e6e53c33fb1e8e8c723e451d9357ab", "html_url": "https://github.com/rust-lang/rust/commit/8936659297e6e53c33fb1e8e8c723e451d9357ab"}], "stats": {"total": 75, "additions": 35, "deletions": 40}, "files": [{"sha": "56a47001811990fe286cf3bdc45ae0470271a821", "filename": "library/alloc/src/collections/binary_heap.rs", "status": "modified", "additions": 15, "deletions": 18, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs?ref=1dd0ac1f6a6a769b228825d627e499786fa506d9", "patch": "@@ -433,7 +433,7 @@ impl<T: Ord> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let mut heap = BinaryHeap::from(vec![1, 3]);\n+    /// let mut heap = BinaryHeap::from([1, 3]);\n     ///\n     /// assert_eq!(heap.pop(), Some(3));\n     /// assert_eq!(heap.pop(), Some(1));\n@@ -506,7 +506,7 @@ impl<T: Ord> BinaryHeap<T> {\n     /// ```\n     /// use std::collections::BinaryHeap;\n     ///\n-    /// let mut heap = BinaryHeap::from(vec![1, 2, 4, 5, 7]);\n+    /// let mut heap = BinaryHeap::from([1, 2, 4, 5, 7]);\n     /// heap.push(6);\n     /// heap.push(3);\n     ///\n@@ -725,11 +725,8 @@ impl<T: Ord> BinaryHeap<T> {\n     /// ```\n     /// use std::collections::BinaryHeap;\n     ///\n-    /// let v = vec![-10, 1, 2, 3, 3];\n-    /// let mut a = BinaryHeap::from(v);\n-    ///\n-    /// let v = vec![-20, 5, 43];\n-    /// let mut b = BinaryHeap::from(v);\n+    /// let mut a = BinaryHeap::from([-10, 1, 2, 3, 3]);\n+    /// let mut b = BinaryHeap::from([-20, 5, 43]);\n     ///\n     /// a.append(&mut b);\n     ///\n@@ -765,7 +762,7 @@ impl<T: Ord> BinaryHeap<T> {\n     /// #![feature(binary_heap_drain_sorted)]\n     /// use std::collections::BinaryHeap;\n     ///\n-    /// let mut heap = BinaryHeap::from(vec![1, 2, 3, 4, 5]);\n+    /// let mut heap = BinaryHeap::from([1, 2, 3, 4, 5]);\n     /// assert_eq!(heap.len(), 5);\n     ///\n     /// drop(heap.drain_sorted()); // removes all elements in heap order\n@@ -790,7 +787,7 @@ impl<T: Ord> BinaryHeap<T> {\n     /// #![feature(binary_heap_retain)]\n     /// use std::collections::BinaryHeap;\n     ///\n-    /// let mut heap = BinaryHeap::from(vec![-10, -5, 1, 2, 4, 13]);\n+    /// let mut heap = BinaryHeap::from([-10, -5, 1, 2, 4, 13]);\n     ///\n     /// heap.retain(|x| x % 2 == 0); // only keep even numbers\n     ///\n@@ -826,7 +823,7 @@ impl<T> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let heap = BinaryHeap::from(vec![1, 2, 3, 4]);\n+    /// let heap = BinaryHeap::from([1, 2, 3, 4]);\n     ///\n     /// // Print 1, 2, 3, 4 in arbitrary order\n     /// for x in heap.iter() {\n@@ -848,9 +845,9 @@ impl<T> BinaryHeap<T> {\n     /// ```\n     /// #![feature(binary_heap_into_iter_sorted)]\n     /// use std::collections::BinaryHeap;\n-    /// let heap = BinaryHeap::from(vec![1, 2, 3, 4, 5]);\n+    /// let heap = BinaryHeap::from([1, 2, 3, 4, 5]);\n     ///\n-    /// assert_eq!(heap.into_iter_sorted().take(2).collect::<Vec<_>>(), vec![5, 4]);\n+    /// assert_eq!(heap.into_iter_sorted().take(2).collect::<Vec<_>>(), [5, 4]);\n     /// ```\n     #[unstable(feature = \"binary_heap_into_iter_sorted\", issue = \"59278\")]\n     pub fn into_iter_sorted(self) -> IntoIterSorted<T> {\n@@ -1086,7 +1083,7 @@ impl<T> BinaryHeap<T> {\n     /// use std::collections::BinaryHeap;\n     /// use std::io::{self, Write};\n     ///\n-    /// let heap = BinaryHeap::from(vec![1, 2, 3, 4, 5, 6, 7]);\n+    /// let heap = BinaryHeap::from([1, 2, 3, 4, 5, 6, 7]);\n     ///\n     /// io::sink().write(heap.as_slice()).unwrap();\n     /// ```\n@@ -1105,7 +1102,7 @@ impl<T> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let heap = BinaryHeap::from(vec![1, 2, 3, 4, 5, 6, 7]);\n+    /// let heap = BinaryHeap::from([1, 2, 3, 4, 5, 6, 7]);\n     /// let vec = heap.into_vec();\n     ///\n     /// // Will print in some order\n@@ -1127,7 +1124,7 @@ impl<T> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let heap = BinaryHeap::from(vec![1, 3]);\n+    /// let heap = BinaryHeap::from([1, 3]);\n     ///\n     /// assert_eq!(heap.len(), 2);\n     /// ```\n@@ -1171,7 +1168,7 @@ impl<T> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let mut heap = BinaryHeap::from(vec![1, 3]);\n+    /// let mut heap = BinaryHeap::from([1, 3]);\n     ///\n     /// assert!(!heap.is_empty());\n     ///\n@@ -1195,7 +1192,7 @@ impl<T> BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let mut heap = BinaryHeap::from(vec![1, 3]);\n+    /// let mut heap = BinaryHeap::from([1, 3]);\n     ///\n     /// assert!(!heap.is_empty());\n     ///\n@@ -1616,7 +1613,7 @@ impl<T> IntoIterator for BinaryHeap<T> {\n     ///\n     /// ```\n     /// use std::collections::BinaryHeap;\n-    /// let heap = BinaryHeap::from(vec![1, 2, 3, 4]);\n+    /// let heap = BinaryHeap::from([1, 2, 3, 4]);\n     ///\n     /// // Print 1, 2, 3, 4 in arbitrary order\n     /// for x in heap.into_iter() {"}, {"sha": "cdb961d4cfbc5e697ebf49635231e5959aca84a3", "filename": "library/alloc/src/collections/btree/map.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs?ref=1dd0ac1f6a6a769b228825d627e499786fa506d9", "patch": "@@ -1098,10 +1098,8 @@ impl<K, V> BTreeMap<K, V> {\n     /// ```\n     /// use std::collections::BTreeMap;\n     ///\n-    /// let mut map: BTreeMap<&str, i32> = [\"Alice\", \"Bob\", \"Carol\", \"Cheryl\"]\n-    ///     .iter()\n-    ///     .map(|&s| (s, 0))\n-    ///     .collect();\n+    /// let mut map: BTreeMap<&str, i32> =\n+    ///     [(\"Alice\", 0), (\"Bob\", 0), (\"Carol\", 0), (\"Cheryl\", 0)].into();\n     /// for (_, balance) in map.range_mut(\"B\"..\"Cheryl\") {\n     ///     *balance += 100;\n     /// }\n@@ -1135,7 +1133,7 @@ impl<K, V> BTreeMap<K, V> {\n     /// let mut count: BTreeMap<&str, usize> = BTreeMap::new();\n     ///\n     /// // count the number of occurrences of letters in the vec\n-    /// for x in vec![\"a\", \"b\", \"a\", \"c\", \"a\", \"b\"] {\n+    /// for x in [\"a\", \"b\", \"a\", \"c\", \"a\", \"b\"] {\n     ///     *count.entry(x).or_insert(0) += 1;\n     /// }\n     ///\n@@ -1235,8 +1233,8 @@ impl<K, V> BTreeMap<K, V> {\n     /// let mut map: BTreeMap<i32, i32> = (0..8).map(|x| (x, x)).collect();\n     /// let evens: BTreeMap<_, _> = map.drain_filter(|k, _v| k % 2 == 0).collect();\n     /// let odds = map;\n-    /// assert_eq!(evens.keys().copied().collect::<Vec<_>>(), vec![0, 2, 4, 6]);\n-    /// assert_eq!(odds.keys().copied().collect::<Vec<_>>(), vec![1, 3, 5, 7]);\n+    /// assert_eq!(evens.keys().copied().collect::<Vec<_>>(), [0, 2, 4, 6]);\n+    /// assert_eq!(odds.keys().copied().collect::<Vec<_>>(), [1, 3, 5, 7]);\n     /// ```\n     #[unstable(feature = \"btree_drain_filter\", issue = \"70530\")]\n     pub fn drain_filter<F>(&mut self, pred: F) -> DrainFilter<'_, K, V, F>"}, {"sha": "a8a18d655855eb117585ae9b094b1084f1d9c53e", "filename": "library/alloc/src/collections/vec_deque/mod.rs", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fvec_deque%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1dd0ac1f6a6a769b228825d627e499786fa506d9/library%2Falloc%2Fsrc%2Fcollections%2Fvec_deque%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fvec_deque%2Fmod.rs?ref=1dd0ac1f6a6a769b228825d627e499786fa506d9", "patch": "@@ -669,7 +669,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut buf: VecDeque<i32> = [1].into_iter().collect();\n+    /// let mut buf: VecDeque<i32> = [1].into();\n     /// buf.reserve_exact(10);\n     /// assert!(buf.capacity() >= 11);\n     /// ```\n@@ -692,7 +692,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut buf: VecDeque<i32> = [1].into_iter().collect();\n+    /// let mut buf: VecDeque<i32> = [1].into();\n     /// buf.reserve(10);\n     /// assert!(buf.capacity() >= 11);\n     /// ```\n@@ -1153,7 +1153,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let v: VecDeque<_> = [1, 2, 3].into_iter().collect();\n+    /// let v: VecDeque<_> = [1, 2, 3].into();\n     /// let range = v.range(2..).copied().collect::<VecDeque<_>>();\n     /// assert_eq!(range, [3]);\n     ///\n@@ -1188,17 +1188,17 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut v: VecDeque<_> = [1, 2, 3].into_iter().collect();\n+    /// let mut v: VecDeque<_> = [1, 2, 3].into();\n     /// for v in v.range_mut(2..) {\n     ///   *v *= 2;\n     /// }\n-    /// assert_eq!(v, vec![1, 2, 6]);\n+    /// assert_eq!(v, [1, 2, 6]);\n     ///\n     /// // A full range covers all contents\n     /// for v in v.range_mut(..) {\n     ///   *v *= 2;\n     /// }\n-    /// assert_eq!(v, vec![2, 4, 12]);\n+    /// assert_eq!(v, [2, 4, 12]);\n     /// ```\n     #[inline]\n     #[stable(feature = \"deque_range\", since = \"1.51.0\")]\n@@ -1235,7 +1235,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut v: VecDeque<_> = [1, 2, 3].into_iter().collect();\n+    /// let mut v: VecDeque<_> = [1, 2, 3].into();\n     /// let drained = v.drain(2..).collect::<VecDeque<_>>();\n     /// assert_eq!(drained, [3]);\n     /// assert_eq!(v, [1, 2]);\n@@ -2025,7 +2025,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut buf: VecDeque<_> = [1, 2, 3].into_iter().collect();\n+    /// let mut buf: VecDeque<_> = [1, 2, 3].into();\n     /// let buf2 = buf.split_off(1);\n     /// assert_eq!(buf, [1]);\n     /// assert_eq!(buf2, [2, 3]);\n@@ -2091,8 +2091,8 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut buf: VecDeque<_> = [1, 2].into_iter().collect();\n-    /// let mut buf2: VecDeque<_> = [3, 4].into_iter().collect();\n+    /// let mut buf: VecDeque<_> = [1, 2].into();\n+    /// let mut buf2: VecDeque<_> = [3, 4].into();\n     /// buf.append(&mut buf2);\n     /// assert_eq!(buf, [1, 2, 3, 4]);\n     /// assert_eq!(buf2, []);\n@@ -2547,7 +2547,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let deque: VecDeque<_> = vec![0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n+    /// let deque: VecDeque<_> = [0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n     ///\n     /// assert_eq!(deque.binary_search(&13),  Ok(9));\n     /// assert_eq!(deque.binary_search(&4),   Err(7));\n@@ -2562,7 +2562,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let mut deque: VecDeque<_> = vec![0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n+    /// let mut deque: VecDeque<_> = [0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n     /// let num = 42;\n     /// let idx = deque.binary_search(&num).unwrap_or_else(|x| x);\n     /// deque.insert(idx, num);\n@@ -2605,7 +2605,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let deque: VecDeque<_> = vec![0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n+    /// let deque: VecDeque<_> = [0, 1, 1, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55].into();\n     ///\n     /// assert_eq!(deque.binary_search_by(|x| x.cmp(&13)),  Ok(9));\n     /// assert_eq!(deque.binary_search_by(|x| x.cmp(&4)),   Err(7));\n@@ -2658,7 +2658,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let deque: VecDeque<_> = vec![(0, 0), (2, 1), (4, 1), (5, 1),\n+    /// let deque: VecDeque<_> = [(0, 0), (2, 1), (4, 1), (5, 1),\n     ///          (3, 1), (1, 2), (2, 3), (4, 5), (5, 8), (3, 13),\n     ///          (1, 21), (2, 34), (4, 55)].into();\n     ///\n@@ -2701,7 +2701,7 @@ impl<T, A: Allocator> VecDeque<T, A> {\n     /// ```\n     /// use std::collections::VecDeque;\n     ///\n-    /// let deque: VecDeque<_> = vec![1, 2, 3, 3, 5, 6, 7].into();\n+    /// let deque: VecDeque<_> = [1, 2, 3, 3, 5, 6, 7].into();\n     /// let i = deque.partition_point(|&x| x < 5);\n     ///\n     /// assert_eq!(i, 4);"}]}