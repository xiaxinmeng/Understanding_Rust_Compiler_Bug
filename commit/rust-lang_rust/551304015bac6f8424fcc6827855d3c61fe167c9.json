{"sha": "551304015bac6f8424fcc6827855d3c61fe167c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1MTMwNDAxNWJhYzZmODQyNGZjYzY4Mjc4NTVkM2M2MWZlMTY3Yzk=", "commit": {"author": {"name": "Dave Huseby", "email": "dhuseby@mozilla.com", "date": "2015-02-11T22:48:55Z"}, "committer": {"name": "Dave Huseby", "email": "dhuseby@mozilla.com", "date": "2015-02-11T22:49:15Z"}, "message": "fixing the macos defines...i picked the wrong one during a merge earlier.", "tree": {"sha": "a9389c150ab1898e8e0da8b953de59658c0ec47b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9389c150ab1898e8e0da8b953de59658c0ec47b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/551304015bac6f8424fcc6827855d3c61fe167c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/551304015bac6f8424fcc6827855d3c61fe167c9", "html_url": "https://github.com/rust-lang/rust/commit/551304015bac6f8424fcc6827855d3c61fe167c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/551304015bac6f8424fcc6827855d3c61fe167c9/comments", "author": null, "committer": null, "parents": [{"sha": "4aa499a2311cc1d3b25aa613263883e335385a65", "url": "https://api.github.com/repos/rust-lang/rust/commits/4aa499a2311cc1d3b25aa613263883e335385a65", "html_url": "https://github.com/rust-lang/rust/commit/4aa499a2311cc1d3b25aa613263883e335385a65"}], "stats": {"total": 222, "additions": 115, "deletions": 107}, "files": [{"sha": "887ab548f40334dfcad0c854d364e0f7ab86a1a3", "filename": "src/liblibc/lib.rs", "status": "modified", "additions": 115, "deletions": 107, "changes": 222, "blob_url": "https://github.com/rust-lang/rust/blob/551304015bac6f8424fcc6827855d3c61fe167c9/src%2Fliblibc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/551304015bac6f8424fcc6827855d3c61fe167c9/src%2Fliblibc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliblibc%2Flib.rs?ref=551304015bac6f8424fcc6827855d3c61fe167c9", "patch": "@@ -4373,11 +4373,14 @@ pub mod consts {\n             pub const MCL_CURRENT : c_int = 0x0001;\n             pub const MCL_FUTURE : c_int = 0x0002;\n \n-            pub const MS_SYNC : c_int = 0x0002; // changed\n             pub const MS_ASYNC : c_int = 0x0001;\n-            pub const MS_INVALIDATE : c_int = 0x0004; // changed\n+            pub const MS_INVALIDATE : c_int = 0x0002;\n+            pub const MS_SYNC : c_int = 0x0010;\n+\n+            pub const MS_KILLPAGES : c_int = 0x0004;\n+            pub const MS_DEACTIVATE : c_int = 0x0008;\n \n-            pub const EPERM : c_int = 1; // not checked\n+            pub const EPERM : c_int = 1;\n             pub const ENOENT : c_int = 2;\n             pub const ESRCH : c_int = 3;\n             pub const EINTR : c_int = 4;\n@@ -4412,7 +4415,7 @@ pub mod consts {\n             pub const EDOM : c_int = 33;\n             pub const ERANGE : c_int = 34;\n             pub const EAGAIN : c_int = 35;\n-            pub const EWOULDBLOCK : c_int = 35;\n+            pub const EWOULDBLOCK : c_int = EAGAIN;\n             pub const EINPROGRESS : c_int = 36;\n             pub const EALREADY : c_int = 37;\n             pub const ENOTSOCK : c_int = 38;\n@@ -4422,7 +4425,7 @@ pub mod consts {\n             pub const ENOPROTOOPT : c_int = 42;\n             pub const EPROTONOSUPPORT : c_int = 43;\n             pub const ESOCKTNOSUPPORT : c_int = 44;\n-            pub const EOPNOTSUPP : c_int = 45;\n+            pub const ENOTSUP : c_int = 45;\n             pub const EPFNOSUPPORT : c_int = 46;\n             pub const EAFNOSUPPORT : c_int = 47;\n             pub const EADDRINUSE : c_int = 48;\n@@ -4459,25 +4462,32 @@ pub mod consts {\n             pub const EFTYPE : c_int = 79;\n             pub const EAUTH : c_int = 80;\n             pub const ENEEDAUTH : c_int = 81;\n-            pub const EIDRM : c_int = 82;\n-            pub const ENOMSG : c_int = 83;\n+            pub const EPWROFF : c_int = 82;\n+            pub const EDEVERR : c_int = 83;\n             pub const EOVERFLOW : c_int = 84;\n-            pub const ECANCELED : c_int = 85;\n-            pub const EILSEQ : c_int = 86;\n-            pub const ENOATTR : c_int = 87;\n-            pub const EDOOFUS : c_int = 88;\n-            pub const EBADMSG : c_int = 89;\n-            pub const EMULTIHOP : c_int = 90;\n-            pub const ENOLINK : c_int = 91;\n-            pub const EPROTO : c_int = 92;\n-            pub const ENOMEDIUM : c_int = 93;\n-            pub const EUNUSED94 : c_int = 94;\n-            pub const EUNUSED95 : c_int = 95;\n-            pub const EUNUSED96 : c_int = 96;\n-            pub const EUNUSED97 : c_int = 97;\n-            pub const EUNUSED98 : c_int = 98;\n-            pub const EASYNC : c_int = 99;\n-            pub const ELAST : c_int = 99;\n+            pub const EBADEXEC : c_int = 85;\n+            pub const EBADARCH : c_int = 86;\n+            pub const ESHLIBVERS : c_int = 87;\n+            pub const EBADMACHO : c_int = 88;\n+            pub const ECANCELED : c_int = 89;\n+            pub const EIDRM : c_int = 90;\n+            pub const ENOMSG : c_int = 91;\n+            pub const EILSEQ : c_int = 92;\n+            pub const ENOATTR : c_int = 93;\n+            pub const EBADMSG : c_int = 94;\n+            pub const EMULTIHOP : c_int = 95;\n+            pub const ENODATA : c_int = 96;\n+            pub const ENOLINK : c_int = 97;\n+            pub const ENOSR : c_int = 98;\n+            pub const ENOSTR : c_int = 99;\n+            pub const EPROTO : c_int = 100;\n+            pub const ETIME : c_int = 101;\n+            pub const EOPNOTSUPP : c_int = 102;\n+            pub const ENOPOLICY : c_int = 103;\n+            pub const ENOTRECOVERABLE : c_int = 104;\n+            pub const EOWNERDEAD : c_int = 105;\n+            pub const EQFULL : c_int = 106;\n+            pub const ELAST : c_int = 106;\n         }\n         pub mod posix01 {\n             use types::os::arch::c95::{c_int, size_t};\n@@ -4498,7 +4508,7 @@ pub mod consts {\n             pub const GLOB_MARK     : c_int = 0x0008;\n             pub const GLOB_NOCHECK  : c_int = 0x0010;\n             pub const GLOB_NOSORT   : c_int = 0x0020;\n-            pub const GLOB_NOESCAPE : c_int = 0x1000; // changed\n+            pub const GLOB_NOESCAPE : c_int = 0x2000;\n \n             pub const GLOB_NOSPACE  : c_int = -1;\n             pub const GLOB_ABORTED  : c_int = -2;\n@@ -4510,41 +4520,38 @@ pub mod consts {\n             pub const POSIX_MADV_WILLNEED : c_int = 3;\n             pub const POSIX_MADV_DONTNEED : c_int = 4;\n \n-            pub const _SC_IOV_MAX : c_int = 51; // all changed...\n-            pub const _SC_GETGR_R_SIZE_MAX : c_int = 100;\n-            pub const _SC_GETPW_R_SIZE_MAX : c_int = 101;\n-            pub const _SC_LOGIN_NAME_MAX : c_int = 102;\n-            pub const _SC_MQ_PRIO_MAX : c_int = 59;\n-            pub const _SC_THREAD_ATTR_STACKADDR : c_int = 77;\n-            pub const _SC_THREAD_ATTR_STACKSIZE : c_int = 78;\n-            pub const _SC_THREAD_DESTRUCTOR_ITERATIONS : c_int = 80;\n-            pub const _SC_THREAD_KEYS_MAX : c_int = 81;\n-            pub const _SC_THREAD_PRIO_INHERIT : c_int = 82;\n-            pub const _SC_THREAD_PRIO_PROTECT : c_int = 83;\n-            pub const _SC_THREAD_PRIORITY_SCHEDULING : c_int = 84;\n-            pub const _SC_THREAD_PROCESS_SHARED : c_int = 85;\n-            pub const _SC_THREAD_SAFE_FUNCTIONS : c_int = 103;\n-            pub const _SC_THREAD_STACK_MIN : c_int = 89;\n-            pub const _SC_THREAD_THREADS_MAX : c_int = 90;\n-            pub const _SC_THREADS : c_int = 91;\n-            pub const _SC_TTY_NAME_MAX : c_int = 107;\n-            pub const _SC_ATEXIT_MAX : c_int = 46;\n-            pub const _SC_XOPEN_CRYPT : c_int = 117;\n-            pub const _SC_XOPEN_ENH_I18N : c_int = 118;\n-            pub const _SC_XOPEN_LEGACY : c_int = 119;\n-            pub const _SC_XOPEN_REALTIME : c_int = 120;\n-            pub const _SC_XOPEN_REALTIME_THREADS : c_int = 121;\n-            pub const _SC_XOPEN_SHM : c_int = 30;\n-            pub const _SC_XOPEN_UNIX : c_int = 123;\n-            pub const _SC_XOPEN_VERSION : c_int = 125;\n-            //pub const _SC_XOPEN_XCU_VERSION : c_int = ;\n-\n-            pub const PTHREAD_CREATE_JOINABLE: c_int = 0;\n-            pub const PTHREAD_CREATE_DETACHED: c_int = 1;\n-            pub const PTHREAD_STACK_MIN: size_t = 2048;\n+            pub const _SC_IOV_MAX : c_int = 56;\n+            pub const _SC_GETGR_R_SIZE_MAX : c_int = 70;\n+            pub const _SC_GETPW_R_SIZE_MAX : c_int = 71;\n+            pub const _SC_LOGIN_NAME_MAX : c_int = 73;\n+            pub const _SC_MQ_PRIO_MAX : c_int = 75;\n+            pub const _SC_THREAD_ATTR_STACKADDR : c_int = 82;\n+            pub const _SC_THREAD_ATTR_STACKSIZE : c_int = 83;\n+            pub const _SC_THREAD_DESTRUCTOR_ITERATIONS : c_int = 85;\n+            pub const _SC_THREAD_KEYS_MAX : c_int = 86;\n+            pub const _SC_THREAD_PRIO_INHERIT : c_int = 87;\n+            pub const _SC_THREAD_PRIO_PROTECT : c_int = 88;\n+            pub const _SC_THREAD_PRIORITY_SCHEDULING : c_int = 89;\n+            pub const _SC_THREAD_PROCESS_SHARED : c_int = 90;\n+            pub const _SC_THREAD_SAFE_FUNCTIONS : c_int = 91;\n+            pub const _SC_THREAD_STACK_MIN : c_int = 93;\n+            pub const _SC_THREAD_THREADS_MAX : c_int = 94;\n+            pub const _SC_THREADS : c_int = 96;\n+            pub const _SC_TTY_NAME_MAX : c_int = 101;\n+            pub const _SC_ATEXIT_MAX : c_int = 107;\n+            pub const _SC_XOPEN_CRYPT : c_int = 108;\n+            pub const _SC_XOPEN_ENH_I18N : c_int = 109;\n+            pub const _SC_XOPEN_LEGACY : c_int = 110;\n+            pub const _SC_XOPEN_REALTIME : c_int = 111;\n+            pub const _SC_XOPEN_REALTIME_THREADS : c_int = 112;\n+            pub const _SC_XOPEN_SHM : c_int = 113;\n+            pub const _SC_XOPEN_UNIX : c_int = 115;\n+            pub const _SC_XOPEN_VERSION : c_int = 116;\n+            pub const _SC_XOPEN_XCU_VERSION : c_int = 121;\n \n-            pub const CLOCK_REALTIME: c_int = 0;\n-            pub const CLOCK_MONOTONIC: c_int = 3;\n+            pub const PTHREAD_CREATE_JOINABLE: c_int = 1;\n+            pub const PTHREAD_CREATE_DETACHED: c_int = 2;\n+            pub const PTHREAD_STACK_MIN: size_t = 8192;\n         }\n         pub mod posix08 {\n         }\n@@ -4556,23 +4563,21 @@ pub mod consts {\n             pub const MADV_SEQUENTIAL : c_int = 2;\n             pub const MADV_WILLNEED : c_int = 3;\n             pub const MADV_DONTNEED : c_int = 4;\n-            pub const MADV_FREE : c_int = 6; // changed\n-            //pub const MADV_NOSYNC : c_int = ;\n-            //pub const MADV_AUTOSYNC : c_int = ;\n-            //pub const MADV_NOCORE : c_int = ;\n-            //pub const MADV_CORE : c_int = ;\n-            //pub const MADV_PROTECT : c_int = ;\n-\n-            //pub const MINCORE_INCORE : c_int =  ;\n-            //pub const MINCORE_REFERENCED : c_int = ;\n-            //pub const MINCORE_MODIFIED : c_int = ;\n-            //pub const MINCORE_REFERENCED_OTHER : c_int = ;\n-            //pub const MINCORE_MODIFIED_OTHER : c_int = ;\n-            //pub const MINCORE_SUPER : c_int = ;\n+            pub const MADV_FREE : c_int = 5;\n+            pub const MADV_ZERO_WIRED_PAGES : c_int = 6;\n+            pub const MADV_FREE_REUSABLE : c_int = 7;\n+            pub const MADV_FREE_REUSE : c_int = 8;\n+            pub const MADV_CAN_REUSE : c_int = 9;\n+\n+            pub const MINCORE_INCORE : c_int =  0x1;\n+            pub const MINCORE_REFERENCED : c_int = 0x2;\n+            pub const MINCORE_MODIFIED : c_int = 0x4;\n+            pub const MINCORE_REFERENCED_OTHER : c_int = 0x8;\n+            pub const MINCORE_MODIFIED_OTHER : c_int = 0x10;\n \n-            pub const AF_INET: c_int = 2;\n-            pub const AF_INET6: c_int = 24; // changed\n             pub const AF_UNIX: c_int = 1;\n+            pub const AF_INET: c_int = 2;\n+            pub const AF_INET6: c_int = 30;\n             pub const SOCK_STREAM: c_int = 1;\n             pub const SOCK_DGRAM: c_int = 2;\n             pub const SOCK_RAW: c_int = 3;\n@@ -4585,13 +4590,11 @@ pub mod consts {\n             pub const IP_HDRINCL: c_int = 2;\n             pub const IP_ADD_MEMBERSHIP: c_int = 12;\n             pub const IP_DROP_MEMBERSHIP: c_int = 13;\n-            // don't exist, keep same as IP_ADD_MEMBERSHIP\n             pub const IPV6_ADD_MEMBERSHIP: c_int = 12;\n-            // don't exist, keep same as IP_DROP_MEMBERSHIP\n             pub const IPV6_DROP_MEMBERSHIP: c_int = 13;\n \n-            pub const TCP_NODELAY: c_int = 1;\n-            //pub const TCP_KEEPIDLE: c_int = ;\n+            pub const TCP_NODELAY: c_int = 0x01;\n+            pub const TCP_KEEPALIVE: c_int = 0x10;\n             pub const SOL_SOCKET: c_int = 0xffff;\n             pub const SO_KEEPALIVE: c_int = 0x0008;\n             pub const SO_BROADCAST: c_int = 0x0020;\n@@ -4607,18 +4610,19 @@ pub mod consts {\n         pub mod extra {\n             use types::os::arch::c95::c_int;\n \n+            pub const O_DSYNC : c_int = 4194304;\n             pub const O_SYNC : c_int = 128;\n             pub const O_NONBLOCK : c_int = 4;\n-            pub const CTL_KERN: c_int = 1;\n-            pub const KERN_PROC: c_int = 66;\n+            pub const F_FULLFSYNC : c_int = 51;\n \n             pub const MAP_COPY : c_int = 0x0002;\n-            pub const MAP_RENAME : c_int = 0x0000; // changed\n-            pub const MAP_NORESERVE : c_int = 0x0000; // changed\n-            pub const MAP_HASSEMAPHORE : c_int = 0x0000; // changed\n-            //pub const MAP_STACK : c_int = ;\n-            //pub const MAP_NOSYNC : c_int = ;\n-            //pub const MAP_NOCORE : c_int = ;\n+            pub const MAP_RENAME : c_int = 0x0020;\n+            pub const MAP_NORESERVE : c_int = 0x0040;\n+            pub const MAP_NOEXTEND : c_int = 0x0100;\n+            pub const MAP_HASSEMAPHORE : c_int = 0x0200;\n+            pub const MAP_NOCACHE : c_int = 0x0400;\n+            pub const MAP_JIT : c_int = 0x0800;\n+            pub const MAP_STACK : c_int = 0;\n \n             pub const IPPROTO_RAW : c_int = 255;\n         }\n@@ -4652,31 +4656,35 @@ pub mod consts {\n             pub const _SC_2_UPE : c_int = 25;\n             pub const _SC_STREAM_MAX : c_int = 26;\n             pub const _SC_TZNAME_MAX : c_int = 27;\n-            pub const _SC_ASYNCHRONOUS_IO : c_int = 45; // changed...\n-            pub const _SC_MAPPED_FILES : c_int = 53;\n-            pub const _SC_MEMLOCK : c_int = 54;\n-            pub const _SC_MEMLOCK_RANGE : c_int = 55;\n-            pub const _SC_MEMORY_PROTECTION : c_int = 56;\n-            pub const _SC_MESSAGE_PASSING : c_int = 57;\n-            pub const _SC_PRIORITIZED_IO : c_int = 60;\n-            pub const _SC_PRIORITY_SCHEDULING : c_int = 61;\n-            pub const _SC_REALTIME_SIGNALS : c_int = 64;\n-            pub const _SC_SEMAPHORES : c_int = 67;\n-            pub const _SC_FSYNC : c_int = 29;\n-            pub const _SC_SHARED_MEMORY_OBJECTS : c_int = 68;\n-            pub const _SC_SYNCHRONIZED_IO : c_int = 75;\n-            pub const _SC_TIMERS : c_int = 94; // ...changed\n+            pub const _SC_ASYNCHRONOUS_IO : c_int = 28;\n+            pub const _SC_PAGESIZE : c_int = 29;\n+            pub const _SC_MEMLOCK : c_int = 30;\n+            pub const _SC_MEMLOCK_RANGE : c_int = 31;\n+            pub const _SC_MEMORY_PROTECTION : c_int = 32;\n+            pub const _SC_MESSAGE_PASSING : c_int = 33;\n+            pub const _SC_PRIORITIZED_IO : c_int = 34;\n+            pub const _SC_PRIORITY_SCHEDULING : c_int = 35;\n+            pub const _SC_REALTIME_SIGNALS : c_int = 36;\n+            pub const _SC_SEMAPHORES : c_int = 37;\n+            pub const _SC_FSYNC : c_int = 38;\n+            pub const _SC_SHARED_MEMORY_OBJECTS : c_int = 39;\n+            pub const _SC_SYNCHRONIZED_IO : c_int = 40;\n+            pub const _SC_TIMERS : c_int = 41;\n             pub const _SC_AIO_LISTIO_MAX : c_int = 42;\n             pub const _SC_AIO_MAX : c_int = 43;\n             pub const _SC_AIO_PRIO_DELTA_MAX : c_int = 44;\n-            pub const _SC_DELAYTIMER_MAX : c_int = 50; // changed...\n-            pub const _SC_MQ_OPEN_MAX : c_int = 58;\n-            pub const _SC_PAGESIZE : c_int = 28;\n-            pub const _SC_RTSIG_MAX : c_int = 66;\n-            pub const _SC_SEM_NSEMS_MAX : c_int = 31;\n-            pub const _SC_SEM_VALUE_MAX : c_int = 32;\n-            pub const _SC_SIGQUEUE_MAX : c_int = 70;\n-            pub const _SC_TIMER_MAX : c_int = 93;\n+            pub const _SC_DELAYTIMER_MAX : c_int = 45;\n+            pub const _SC_MQ_OPEN_MAX : c_int = 46;\n+            pub const _SC_MAPPED_FILES : c_int = 47;\n+            pub const _SC_RTSIG_MAX : c_int = 48;\n+            pub const _SC_SEM_NSEMS_MAX : c_int = 49;\n+            pub const _SC_SEM_VALUE_MAX : c_int = 50;\n+            pub const _SC_SIGQUEUE_MAX : c_int = 51;\n+            pub const _SC_TIMER_MAX : c_int = 52;\n+            pub const _SC_XBS5_ILP32_OFF32 : c_int = 122;\n+            pub const _SC_XBS5_ILP32_OFFBIG : c_int = 123;\n+            pub const _SC_XBS5_LP64_OFF64 : c_int = 124;\n+            pub const _SC_XBS5_LPBIG_OFFBIG : c_int = 125;\n         }\n     }\n }"}]}