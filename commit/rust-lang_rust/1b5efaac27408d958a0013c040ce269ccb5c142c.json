{"sha": "1b5efaac27408d958a0013c040ce269ccb5c142c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiNWVmYWFjMjc0MDhkOTU4YTAwMTNjMDQwY2UyNjljY2I1YzE0MmM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-20T23:41:39Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-20T23:41:53Z"}, "message": "syntax: Pass the correct crate_cfg to the syntax expander", "tree": {"sha": "6018d021872213bf7adffbcbf74a5a6007b3c111", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6018d021872213bf7adffbcbf74a5a6007b3c111"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b5efaac27408d958a0013c040ce269ccb5c142c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b5efaac27408d958a0013c040ce269ccb5c142c", "html_url": "https://github.com/rust-lang/rust/commit/1b5efaac27408d958a0013c040ce269ccb5c142c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b5efaac27408d958a0013c040ce269ccb5c142c/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e14a0eec23b49f51a32ea254f2749f2f08386f5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e14a0eec23b49f51a32ea254f2749f2f08386f5b", "html_url": "https://github.com/rust-lang/rust/commit/e14a0eec23b49f51a32ea254f2749f2f08386f5b"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "ebdc8bc848c1df6784eb3213f84fe5584d3b436f", "filename": "src/rustc/driver/driver.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b5efaac27408d958a0013c040ce269ccb5c142c/src%2Frustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b5efaac27408d958a0013c040ce269ccb5c142c/src%2Frustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fdriver%2Fdriver.rs?ref=1b5efaac27408d958a0013c040ce269ccb5c142c", "patch": "@@ -173,7 +173,7 @@ fn compile_upto(sess: session, cfg: ast::crate_cfg,\n         front::test::modify_for_testing(sess, crate));\n \n     crate = time(time_passes, ~\"expansion\", ||\n-        syntax::ext::expand::expand_crate(sess.parse_sess, sess.opts.cfg,\n+        syntax::ext::expand::expand_crate(sess.parse_sess, cfg,\n                                           crate));\n \n     if upto == cu_expand { return {crate: crate, tcx: None}; }"}, {"sha": "8c085e6391dee10fb5346de3136ad1734667fb81", "filename": "src/rustc/driver/session.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b5efaac27408d958a0013c040ce269ccb5c142c/src%2Frustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b5efaac27408d958a0013c040ce269ccb5c142c/src%2Frustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fdriver%2Fsession.rs?ref=1b5efaac27408d958a0013c040ce269ccb5c142c", "patch": "@@ -144,6 +144,10 @@ type options =\n      addl_lib_search_paths: ~[Path],\n      maybe_sysroot: Option<Path>,\n      target_triple: ~str,\n+     // User-specified cfg meta items. The compiler itself will add additional\n+     // items to the crate config, and during parsing the entire crate config\n+     // will be added to the crate AST node.  This should not be used for\n+     // anything except building the full crate config prior to parsing.\n      cfg: ast::crate_cfg,\n      binary: ~str,\n      test: bool,"}]}