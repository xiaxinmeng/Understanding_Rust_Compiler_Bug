{"sha": "481499101b96f4a8253501fb8fbc03d64e9b83b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4MTQ5OTEwMWI5NmY0YTgyNTM1MDFmYjhmYmMwM2Q2NGU5YjgzYjU=", "commit": {"author": {"name": "Lzu Tao", "email": "taolzu@gmail.com", "date": "2019-07-06T05:30:11Z"}, "committer": {"name": "Lzu Tao", "email": "taolzu@gmail.com", "date": "2019-07-06T05:34:32Z"}, "message": "Remove lint for ONCE_INIT\n\nONCE_INIT will be deprecated in rust 1.38.0", "tree": {"sha": "da8bebe5d63fdb8731e17a0674eebc5fa136ef00", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da8bebe5d63fdb8731e17a0674eebc5fa136ef00"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/481499101b96f4a8253501fb8fbc03d64e9b83b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/481499101b96f4a8253501fb8fbc03d64e9b83b5", "html_url": "https://github.com/rust-lang/rust/commit/481499101b96f4a8253501fb8fbc03d64e9b83b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/481499101b96f4a8253501fb8fbc03d64e9b83b5/comments", "author": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a76bea04b8f3a06b32521528de57c590af338ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a76bea04b8f3a06b32521528de57c590af338ce", "html_url": "https://github.com/rust-lang/rust/commit/3a76bea04b8f3a06b32521528de57c590af338ce"}], "stats": {"total": 11, "additions": 1, "deletions": 10}, "files": [{"sha": "cb7be85ab394d41ee88cb323e47188398704a4a8", "filename": "clippy_lints/src/replace_consts.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/481499101b96f4a8253501fb8fbc03d64e9b83b5/clippy_lints%2Fsrc%2Freplace_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/481499101b96f4a8253501fb8fbc03d64e9b83b5/clippy_lints%2Fsrc%2Freplace_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freplace_consts.rs?ref=481499101b96f4a8253501fb8fbc03d64e9b83b5", "patch": "@@ -56,9 +56,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for ReplaceConsts {\n     }\n }\n \n-const REPLACEMENTS: [([&str; 3], &str); 25] = [\n-    // Once\n-    ([\"core\", \"sync\", \"ONCE_INIT\"], \"Once::new()\"),\n+const REPLACEMENTS: [([&str; 3], &str); 24] = [\n     // Min\n     ([\"core\", \"isize\", \"MIN\"], \"isize::min_value()\"),\n     ([\"core\", \"i8\", \"MIN\"], \"i8::min_value()\"),"}, {"sha": "0c8440e7675aa8215da98effef70d8d8b6475f68", "filename": "tests/ui/replace_consts.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/481499101b96f4a8253501fb8fbc03d64e9b83b5/tests%2Fui%2Freplace_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/481499101b96f4a8253501fb8fbc03d64e9b83b5/tests%2Fui%2Freplace_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Freplace_consts.rs?ref=481499101b96f4a8253501fb8fbc03d64e9b83b5", "patch": "@@ -4,14 +4,9 @@\n #![deny(clippy::replace_consts)]\n \n use std::sync::atomic::*;\n-use std::sync::Once;\n \n #[rustfmt::skip]\n fn bad() {\n-    #[allow(deprecated, unused_imports)]\n-    use std::sync::ONCE_INIT;\n-    // Once\n-    { let foo = ONCE_INIT; };\n     // Min\n     { let foo = std::isize::MIN; };\n     { let foo = std::i8::MIN; };\n@@ -42,8 +37,6 @@ fn bad() {\n \n #[rustfmt::skip]\n fn good() {\n-    // Once\n-    { let foo = Once::new(); };\n     // Atomic\n     { let foo = AtomicBool::new(false); };\n     { let foo = AtomicIsize::new(0); };"}]}