{"sha": "a871068b472d234e6515d5e979fac4826ec1dac1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4NzEwNjhiNDcyZDIzNGU2NTE1ZDVlOTc5ZmFjNDgyNmVjMWRhYzE=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-03-05T21:40:26Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-03-06T00:20:06Z"}, "message": "stats: fix handling of NaN in `min` and `max`\n\nThe `cmp::min` and `cmp::max` functions are not correct with partially\nordered values. #12712", "tree": {"sha": "cba5b946a1c2b0fe59207724452c71ed2d7657ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cba5b946a1c2b0fe59207724452c71ed2d7657ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a871068b472d234e6515d5e979fac4826ec1dac1", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a871068b472d234e6515d5e979fac4826ec1dac1", "html_url": "https://github.com/rust-lang/rust/commit/a871068b472d234e6515d5e979fac4826ec1dac1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a871068b472d234e6515d5e979fac4826ec1dac1/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5973b0c4ad26729aa1379b98317479f61cd0d87c", "url": "https://api.github.com/repos/rust-lang/rust/commits/5973b0c4ad26729aa1379b98317479f61cd0d87c", "html_url": "https://github.com/rust-lang/rust/commit/5973b0c4ad26729aa1379b98317479f61cd0d87c"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "23e3e104f164f31f63a83718037b60b3dab74f94", "filename": "src/libextra/stats.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a871068b472d234e6515d5e979fac4826ec1dac1/src%2Flibextra%2Fstats.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a871068b472d234e6515d5e979fac4826ec1dac1/src%2Flibextra%2Fstats.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Fstats.rs?ref=a871068b472d234e6515d5e979fac4826ec1dac1", "patch": "@@ -10,7 +10,6 @@\n \n #[allow(missing_doc)];\n \n-use std::cmp;\n use std::hash::Hash;\n use std::io;\n use std::mem;\n@@ -203,12 +202,12 @@ impl<'a> Stats for &'a [f64] {\n \n     fn min(self) -> f64 {\n         assert!(self.len() != 0);\n-        self.iter().fold(self[0], |p,q| cmp::min(p, *q))\n+        self.iter().fold(self[0], |p, q| p.min(*q))\n     }\n \n     fn max(self) -> f64 {\n         assert!(self.len() != 0);\n-        self.iter().fold(self[0], |p,q| cmp::max(p, *q))\n+        self.iter().fold(self[0], |p, q| p.max(*q))\n     }\n \n     fn mean(self) -> f64 {\n@@ -442,6 +441,7 @@ mod tests {\n     use stats::write_boxplot;\n     use std::io;\n     use std::str;\n+    use std::f64;\n \n     macro_rules! assert_approx_eq(\n         ($a:expr, $b:expr) => ({\n@@ -481,6 +481,14 @@ mod tests {\n         assert_eq!(summ.iqr, summ2.iqr);\n     }\n \n+    #[test]\n+    fn test_min_max_nan() {\n+        let xs = &[1.0, 2.0, f64::NAN, 3.0, 4.0];\n+        let summary = Summary::new(xs);\n+        assert_eq!(summary.min, 1.0);\n+        assert_eq!(summary.max, 4.0);\n+    }\n+\n     #[test]\n     fn test_norm2() {\n         let val = &["}]}