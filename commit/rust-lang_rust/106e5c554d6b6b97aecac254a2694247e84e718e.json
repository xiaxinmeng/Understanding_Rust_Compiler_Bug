{"sha": "106e5c554d6b6b97aecac254a2694247e84e718e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwNmU1YzU1NGQ2YjZiOTdhZWNhYzI1NGEyNjk0MjQ3ZTg0ZTcxOGU=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-01-26T19:34:12Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-01-26T19:35:27Z"}, "message": "Don't add \"in this macro invocation\" label to desugared spans", "tree": {"sha": "c0708b63de58b5db9759d28a676e30cac5e3fbbd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0708b63de58b5db9759d28a676e30cac5e3fbbd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/106e5c554d6b6b97aecac254a2694247e84e718e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/106e5c554d6b6b97aecac254a2694247e84e718e", "html_url": "https://github.com/rust-lang/rust/commit/106e5c554d6b6b97aecac254a2694247e84e718e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/106e5c554d6b6b97aecac254a2694247e84e718e/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f90c445637385c2526990119b3f177d809ac5459", "url": "https://api.github.com/repos/rust-lang/rust/commits/f90c445637385c2526990119b3f177d809ac5459", "html_url": "https://github.com/rust-lang/rust/commit/f90c445637385c2526990119b3f177d809ac5459"}], "stats": {"total": 25, "additions": 5, "deletions": 20}, "files": [{"sha": "8a4fd24a29b89ca525af34f3478e9ad35b980f25", "filename": "src/librustc_errors/emitter.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Flibrustc_errors%2Femitter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Flibrustc_errors%2Femitter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Femitter.rs?ref=106e5c554d6b6b97aecac254a2694247e84e718e", "patch": "@@ -767,6 +767,7 @@ impl EmitterWriter {\n                         }\n                         // Check to make sure we're not in any <*macros>\n                         if !cm.span_to_filename(def_site).is_macros() &&\n+                           !trace.macro_decl_name.starts_with(\"desugaring of \") &&\n                            !trace.macro_decl_name.starts_with(\"#[\") ||\n                            always_backtrace {\n                             new_labels.push((trace.call_site,"}, {"sha": "4f4f8b5ad00930d0e229d4f0af61b3cf68f46ba6", "filename": "src/test/ui/const-fn-error.stderr", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fconst-fn-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fconst-fn-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-fn-error.stderr?ref=106e5c554d6b6b97aecac254a2694247e84e718e", "patch": "@@ -17,16 +17,12 @@ error[E0015]: calls in constant functions are limited to constant functions, str\n    |\n 17 |     for i in 0..x { //~ ERROR calls in constant functions\n    |              ^^^^\n-   |              |\n-   |              in this macro invocation\n \n error[E0019]: constant function contains unimplemented expression type\n   --> $DIR/const-fn-error.rs:17:14\n    |\n 17 |     for i in 0..x { //~ ERROR calls in constant functions\n    |              ^^^^\n-   |              |\n-   |              in this macro invocation\n \n error[E0080]: constant evaluation error\n   --> $DIR/const-fn-error.rs:21:5"}, {"sha": "dfe950818e7e6ec181d0f6ed17d15dff843fe069", "filename": "src/test/ui/suggestions/try-on-option.stderr", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fsuggestions%2Ftry-on-option.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fsuggestions%2Ftry-on-option.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Ftry-on-option.stderr?ref=106e5c554d6b6b97aecac254a2694247e84e718e", "patch": "@@ -10,10 +10,7 @@ error[E0277]: the `?` operator can only be used in a function that returns `Resu\n   --> $DIR/try-on-option.rs:23:5\n    |\n 23 |     x?; //~ the `?` operator\n-   |     --\n-   |     |\n-   |     cannot use the `?` operator in a function that returns `u32`\n-   |     in this macro invocation\n+   |     ^^ cannot use the `?` operator in a function that returns `u32`\n    |\n    = help: the trait `std::ops::Try` is not implemented for `u32`\n    = note: required by `std::ops::Try::from_error`"}, {"sha": "e97823a3d5d5b96496e5acd2e0695da4c56e7555", "filename": "src/test/ui/suggestions/try-operator-on-main.stderr", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fsuggestions%2Ftry-operator-on-main.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/106e5c554d6b6b97aecac254a2694247e84e718e/src%2Ftest%2Fui%2Fsuggestions%2Ftry-operator-on-main.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Ftry-operator-on-main.stderr?ref=106e5c554d6b6b97aecac254a2694247e84e718e", "patch": "@@ -2,10 +2,7 @@ error[E0277]: the `?` operator can only be used in a function that returns `Resu\n   --> $DIR/try-operator-on-main.rs:19:5\n    |\n 19 |     std::fs::File::open(\"foo\")?; //~ ERROR the `?` operator can only\n-   |     ---------------------------\n-   |     |\n-   |     cannot use the `?` operator in a function that returns `()`\n-   |     in this macro invocation\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ cannot use the `?` operator in a function that returns `()`\n    |\n    = help: the trait `std::ops::Try` is not implemented for `()`\n    = note: required by `std::ops::Try::from_error`\n@@ -14,10 +11,7 @@ error[E0277]: the `?` operator can only be applied to values that implement `std\n   --> $DIR/try-operator-on-main.rs:22:5\n    |\n 22 |     ()?; //~ ERROR the `?` operator can only\n-   |     ---\n-   |     |\n-   |     the `?` operator cannot be applied to type `()`\n-   |     in this macro invocation\n+   |     ^^^ the `?` operator cannot be applied to type `()`\n    |\n    = help: the trait `std::ops::Try` is not implemented for `()`\n    = note: required by `std::ops::Try::into_result`\n@@ -38,10 +32,7 @@ error[E0277]: the `?` operator can only be applied to values that implement `std\n   --> $DIR/try-operator-on-main.rs:32:5\n    |\n 32 |     ()?; //~ ERROR the `?` operator can only\n-   |     ---\n-   |     |\n-   |     the `?` operator cannot be applied to type `()`\n-   |     in this macro invocation\n+   |     ^^^ the `?` operator cannot be applied to type `()`\n    |\n    = help: the trait `std::ops::Try` is not implemented for `()`\n    = note: required by `std::ops::Try::into_result`"}]}