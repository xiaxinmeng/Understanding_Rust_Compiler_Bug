{"sha": "c8d89ba5d52463b365e4d7306cff01401a621fb0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4ZDg5YmE1ZDUyNDYzYjM2NWU0ZDczMDZjZmYwMTQwMWE2MjFmYjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-10-06T22:33:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-10-06T22:33:57Z"}, "message": "Auto merge of #6127 - ebroto:reinstate_forbid_restriction, r=flip1995\n\nReinstate test for forbid(clippy::restriction)\n\nIn [this commit](https://github.com/rust-lang/rust-clippy/pull/6126/commits/5747c15961da9d2d0b0dd775174d39f3b5961597) coming from rust-lang/rust (#6126) the test for `#![forbid(clippy::restriction)]` was removed because some restriction lints were being allowed after the forbid.\n\nThis change reinstates the test for `forbid` by using a separate file.\n\nchangelog: none\n\nr? `@flip1995`", "tree": {"sha": "39b01a210f5c6c49f77c26957878eb15144842c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/39b01a210f5c6c49f77c26957878eb15144842c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8d89ba5d52463b365e4d7306cff01401a621fb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8d89ba5d52463b365e4d7306cff01401a621fb0", "html_url": "https://github.com/rust-lang/rust/commit/c8d89ba5d52463b365e4d7306cff01401a621fb0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8d89ba5d52463b365e4d7306cff01401a621fb0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a4175bcec39f36654aa8b377c657b2ce47b8f7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a4175bcec39f36654aa8b377c657b2ce47b8f7d", "html_url": "https://github.com/rust-lang/rust/commit/1a4175bcec39f36654aa8b377c657b2ce47b8f7d"}, {"sha": "6c3611bdef09170a4b889dc759f986490a528e42", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c3611bdef09170a4b889dc759f986490a528e42", "html_url": "https://github.com/rust-lang/rust/commit/6c3611bdef09170a4b889dc759f986490a528e42"}], "stats": {"total": 63, "additions": 39, "deletions": 24}, "files": [{"sha": "8df6e19421ec5707f9d09b186ccd380236e1a8b9", "filename": "tests/ui/attrs.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattrs.rs?ref=c8d89ba5d52463b365e4d7306cff01401a621fb0", "patch": "@@ -1,8 +1,5 @@\n #![warn(clippy::inline_always, clippy::deprecated_semver)]\n #![allow(clippy::assertions_on_constants)]\n-// Test that the whole restriction group is not enabled\n-#![warn(clippy::restriction)]\n-#![deny(clippy::restriction)]\n #![allow(clippy::missing_docs_in_private_items, clippy::panic, clippy::unreachable)]\n \n #[inline(always)]"}, {"sha": "df4e9e20b649c137467b2fcf2a5ced619d8e16cd", "filename": "tests/ui/attrs.stderr", "status": "modified", "additions": 4, "deletions": 21, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fattrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fattrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattrs.stderr?ref=c8d89ba5d52463b365e4d7306cff01401a621fb0", "patch": "@@ -1,41 +1,24 @@\n error: you have declared `#[inline(always)]` on `test_attr_lint`. This is usually a bad idea\n-  --> $DIR/attrs.rs:8:1\n+  --> $DIR/attrs.rs:5:1\n    |\n LL | #[inline(always)]\n    | ^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::inline-always` implied by `-D warnings`\n \n error: the since field must contain a semver-compliant version\n-  --> $DIR/attrs.rs:28:14\n+  --> $DIR/attrs.rs:25:14\n    |\n LL | #[deprecated(since = \"forever\")]\n    |              ^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::deprecated-semver` implied by `-D warnings`\n \n error: the since field must contain a semver-compliant version\n-  --> $DIR/attrs.rs:31:14\n+  --> $DIR/attrs.rs:28:14\n    |\n LL | #[deprecated(since = \"1\")]\n    |              ^^^^^^^^^^^\n \n-error: restriction lints are not meant to be all enabled\n-  --> $DIR/attrs.rs:4:9\n-   |\n-LL | #![warn(clippy::restriction)]\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: `-D clippy::blanket-clippy-restriction-lints` implied by `-D warnings`\n-   = help: try enabling only the lints you really need\n-\n-error: restriction lints are not meant to be all enabled\n-  --> $DIR/attrs.rs:5:9\n-   |\n-LL | #![deny(clippy::restriction)]\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: try enabling only the lints you really need\n-\n-error: aborting due to 5 previous errors\n+error: aborting due to 3 previous errors\n "}, {"sha": "d055f17526b9b079db3a9b06271c3f04cfd665b6", "filename": "tests/ui/blanket_clippy_restriction_lints.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fblanket_clippy_restriction_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fblanket_clippy_restriction_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblanket_clippy_restriction_lints.rs?ref=c8d89ba5d52463b365e4d7306cff01401a621fb0", "patch": "@@ -0,0 +1,8 @@\n+#![warn(clippy::blanket_clippy_restriction_lints)]\n+\n+//! Test that the whole restriction group is not enabled\n+#![warn(clippy::restriction)]\n+#![deny(clippy::restriction)]\n+#![forbid(clippy::restriction)]\n+\n+fn main() {}"}, {"sha": "537557f8b0af017174192521b0a3f5794655aac6", "filename": "tests/ui/blanket_clippy_restriction_lints.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fblanket_clippy_restriction_lints.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c8d89ba5d52463b365e4d7306cff01401a621fb0/tests%2Fui%2Fblanket_clippy_restriction_lints.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblanket_clippy_restriction_lints.stderr?ref=c8d89ba5d52463b365e4d7306cff01401a621fb0", "patch": "@@ -0,0 +1,27 @@\n+error: restriction lints are not meant to be all enabled\n+  --> $DIR/blanket_clippy_restriction_lints.rs:4:9\n+   |\n+LL | #![warn(clippy::restriction)]\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: `-D clippy::blanket-clippy-restriction-lints` implied by `-D warnings`\n+   = help: try enabling only the lints you really need\n+\n+error: restriction lints are not meant to be all enabled\n+  --> $DIR/blanket_clippy_restriction_lints.rs:5:9\n+   |\n+LL | #![deny(clippy::restriction)]\n+   |         ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: try enabling only the lints you really need\n+\n+error: restriction lints are not meant to be all enabled\n+  --> $DIR/blanket_clippy_restriction_lints.rs:6:11\n+   |\n+LL | #![forbid(clippy::restriction)]\n+   |           ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: try enabling only the lints you really need\n+\n+error: aborting due to 3 previous errors\n+"}]}