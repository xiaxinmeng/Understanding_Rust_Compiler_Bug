{"sha": "1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmY2Y2ODc2NTdjNzAyOWU3ZTM2ZGMyY2MxN2JkZWM3YTM5MWQ2M2Y=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-02-12T22:28:48Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-02-16T16:17:32Z"}, "message": "Fix bitrotted module name", "tree": {"sha": "43e4934ba5ead9e8397cec2651c14c47f72004f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43e4934ba5ead9e8397cec2651c14c47f72004f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "html_url": "https://github.com/rust-lang/rust/commit/1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3d56b89c54110aaafab14eeaa4c803abe10b7df", "url": "https://api.github.com/repos/rust-lang/rust/commits/f3d56b89c54110aaafab14eeaa4c803abe10b7df", "html_url": "https://github.com/rust-lang/rust/commit/f3d56b89c54110aaafab14eeaa4c803abe10b7df"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "9c873c097b1fae0ebf64eaef97bdbdd85a1bff58", "filename": "crates/rust-analyzer/src/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -25,7 +25,7 @@ use vfs::AbsPathBuf;\n \n use crate::{\n     caps::completion_item_edit_resolve, diagnostics::DiagnosticsMapConfig,\n-    line_endings::OffsetEncoding, lsp_ext::supports_utf8,\n+    line_index::OffsetEncoding, lsp_ext::supports_utf8,\n };\n \n config_data! {"}, {"sha": "5b02b2598d39d397c9b141ac681da9bea2717055", "filename": "crates/rust-analyzer/src/from_proto.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Ffrom_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Ffrom_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Ffrom_proto.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -9,7 +9,7 @@ use vfs::AbsPathBuf;\n use crate::{\n     from_json,\n     global_state::GlobalStateSnapshot,\n-    line_endings::{LineIndex, OffsetEncoding},\n+    line_index::{LineIndex, OffsetEncoding},\n     lsp_ext, Result,\n };\n "}, {"sha": "52c2497137f570c74a005cb7905038ab435e8ab1", "filename": "crates/rust-analyzer/src/global_state.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fglobal_state.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -22,7 +22,7 @@ use crate::{\n     diagnostics::{CheckFixes, DiagnosticCollection},\n     document::DocumentData,\n     from_proto,\n-    line_endings::{LineEndings, LineIndex},\n+    line_index::{LineEndings, LineIndex},\n     main_loop::Task,\n     op_queue::OpQueue,\n     reload::SourceRootConfig,"}, {"sha": "4f6f250d6c6ad57317be43b4e5debc36cbb99e86", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -36,8 +36,7 @@ use crate::{\n     diff::diff,\n     from_proto,\n     global_state::{GlobalState, GlobalStateSnapshot},\n-    line_endings::LineEndings,\n-    line_endings::LineIndex,\n+    line_index::{LineEndings, LineIndex},\n     lsp_ext::{self, InlayHint, InlayHintsParams},\n     lsp_utils::all_edits_are_disjoint,\n     to_proto, LspError, Result,"}, {"sha": "8b874239c77851b9cda649e0735cfdc2dfbcde4b", "filename": "crates/rust-analyzer/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Flib.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -29,7 +29,7 @@ mod from_proto;\n mod semantic_tokens;\n mod markdown;\n mod diagnostics;\n-mod line_endings;\n+mod line_index;\n mod request_metrics;\n mod lsp_utils;\n mod thread_pool;"}, {"sha": "c116414da01df110b7e20b21d0ebb4aa248b8d5a", "filename": "crates/rust-analyzer/src/line_index.rs", "status": "renamed", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fline_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fline_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fline_index.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -1,3 +1,6 @@\n+//! Enhances `ide::LineIndex` with additional info required to convert offsets\n+//! into lsp positions.\n+//!\n //! We maintain invariant that all internal strings use `\\n` as line separator.\n //! This module does line ending conversion and detection (so that we can\n //! convert back to `\\r\\n` on the way out).", "previous_filename": "crates/rust-analyzer/src/line_endings.rs"}, {"sha": "84f78b5b842cd44f56cd163873b7d997679d6a23", "filename": "crates/rust-analyzer/src/lsp_utils.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Flsp_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Flsp_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Flsp_utils.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -7,7 +7,7 @@ use lsp_server::Notification;\n use crate::{\n     from_proto,\n     global_state::GlobalState,\n-    line_endings::{LineEndings, LineIndex, OffsetEncoding},\n+    line_index::{LineEndings, LineIndex, OffsetEncoding},\n };\n \n pub(crate) fn is_canceled(e: &(dyn Error + 'static)) -> bool {"}, {"sha": "6aff65575dcdeb038e852adfe9d5589b4505fc6c", "filename": "crates/rust-analyzer/src/to_proto.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fcf687657c7029e7e36dc2cc17bdec7a391d63f/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs?ref=1fcf687657c7029e7e36dc2cc17bdec7a391d63f", "patch": "@@ -17,7 +17,7 @@ use serde_json::to_value;\n use crate::{\n     cargo_target_spec::CargoTargetSpec,\n     global_state::GlobalStateSnapshot,\n-    line_endings::{LineEndings, LineIndex, OffsetEncoding},\n+    line_index::{LineEndings, LineIndex, OffsetEncoding},\n     lsp_ext, semantic_tokens, Result,\n };\n "}]}