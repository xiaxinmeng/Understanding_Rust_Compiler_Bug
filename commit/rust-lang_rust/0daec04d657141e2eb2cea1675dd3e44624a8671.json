{"sha": "0daec04d657141e2eb2cea1675dd3e44624a8671", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBkYWVjMDRkNjU3MTQxZTJlYjJjZWExNjc1ZGQzZTQ0NjI0YTg2NzE=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-04-03T15:19:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-03T15:19:36Z"}, "message": "Rollup merge of #83756 - camelid:internal-rename-doc-spotlight, r=GuillaumeGomez\n\nrustdoc: Rename internal uses of `spotlight`\n\nI didn't make these renames in #80965 because I didn't want the PR to\nconflict with #80914.", "tree": {"sha": "0f67f477e1c6bc69744ebe0fa569e81ca1b34570", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f67f477e1c6bc69744ebe0fa569e81ca1b34570"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0daec04d657141e2eb2cea1675dd3e44624a8671", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgaIeICRBK7hj4Ov3rIwAAdHIIACdhJ3WF5UNMbM3/01pW2VvO\nXKTipPHO87LggxJM2x3jiUp8omGdcorHhEqL3n/Nj7C9r/YLLnm5BWGVrTB1bhEy\nZuGBA4Cu3Ui28ecTGF6bNsHZ/GwOhxKVIeSQ3A/W5ZlYen6bWD+F58LSZ78z6Txh\nQfNJK9nu2TkYF0722HHP58Yhg2gTSt2WpTLzZpVtBUPvWAiWmx7aq+4b12liSu74\nHofsjF4UuJR5m6IkzGdMmHBovgnYsyvCPHF8waXOMaRDmTiZ7GDWmWI0z6kNAvYZ\ni04Ey0rPBvQSn+vzKTf1NfBisTFdcI1R1PHGNO8Wz3WYYEnoIaiF4Lf31dEPlYM=\n=s9ba\n-----END PGP SIGNATURE-----\n", "payload": "tree 0f67f477e1c6bc69744ebe0fa569e81ca1b34570\nparent 3b40d2c1f3ef12c602c804282ff262fd694ffbba\nparent 1fe0fe47fcd88c67887b45293351a653b548e86a\nauthor Yuki Okushi <jtitor@2k36.org> 1617463176 +0900\ncommitter GitHub <noreply@github.com> 1617463176 +0900\n\nRollup merge of #83756 - camelid:internal-rename-doc-spotlight, r=GuillaumeGomez\n\nrustdoc: Rename internal uses of `spotlight`\n\nI didn't make these renames in #80965 because I didn't want the PR to\nconflict with #80914.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0daec04d657141e2eb2cea1675dd3e44624a8671", "html_url": "https://github.com/rust-lang/rust/commit/0daec04d657141e2eb2cea1675dd3e44624a8671", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0daec04d657141e2eb2cea1675dd3e44624a8671/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b40d2c1f3ef12c602c804282ff262fd694ffbba", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b40d2c1f3ef12c602c804282ff262fd694ffbba", "html_url": "https://github.com/rust-lang/rust/commit/3b40d2c1f3ef12c602c804282ff262fd694ffbba"}, {"sha": "1fe0fe47fcd88c67887b45293351a653b548e86a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1fe0fe47fcd88c67887b45293351a653b548e86a", "html_url": "https://github.com/rust-lang/rust/commit/1fe0fe47fcd88c67887b45293351a653b548e86a"}], "stats": {"total": 44, "additions": 21, "deletions": 23}, "files": [{"sha": "277ec91f15ed7205e737a183fdb393aadd0d2f61", "filename": "src/librustdoc/clean/inline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fclean%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fclean%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Finline.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -624,7 +624,7 @@ crate fn record_extern_trait(cx: &mut DocContext<'_>, did: DefId) {\n \n     let trait_ = clean::TraitWithExtraInfo {\n         trait_,\n-        is_spotlight: clean::utils::has_doc_flag(cx.tcx.get_attrs(did), sym::notable_trait),\n+        is_notable: clean::utils::has_doc_flag(cx.tcx.get_attrs(did), sym::notable_trait),\n     };\n     cx.external_traits.borrow_mut().insert(did, trait_);\n     cx.active_extern_traits.remove(&did);"}, {"sha": "95d9ff98aed21aadf54405093b6eccf74fa07421", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -65,7 +65,7 @@ crate struct Crate {\n #[derive(Clone, Debug)]\n crate struct TraitWithExtraInfo {\n     crate trait_: Trait,\n-    crate is_spotlight: bool,\n+    crate is_notable: bool,\n }\n \n #[derive(Clone, Debug)]"}, {"sha": "152094684adf42d169d04b0fb440bcc07033f958", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -488,10 +488,9 @@ crate fn run_global_ctxt(\n     if let Some(sized_trait_did) = ctxt.tcx.lang_items().sized_trait() {\n         let mut sized_trait = build_external_trait(&mut ctxt, sized_trait_did);\n         sized_trait.is_auto = true;\n-        ctxt.external_traits.borrow_mut().insert(\n-            sized_trait_did,\n-            TraitWithExtraInfo { trait_: sized_trait, is_spotlight: false },\n-        );\n+        ctxt.external_traits\n+            .borrow_mut()\n+            .insert(sized_trait_did, TraitWithExtraInfo { trait_: sized_trait, is_notable: false });\n     }\n \n     debug!(\"crate: {:?}\", tcx.hir().krate());"}, {"sha": "0e405d6ae028e8886b6900498683949c858ab416", "filename": "src/librustdoc/formats/cache.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fformats%2Fcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fformats%2Fcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fformats%2Fcache.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -116,7 +116,7 @@ crate struct Cache {\n     // even though the trait itself is not exported. This can happen if a trait\n     // was defined in function/expression scope, since the impl will be picked\n     // up by `collect-trait-impls` but the trait won't be scraped out in the HIR\n-    // crawl. In order to prevent crashes when looking for spotlight traits or\n+    // crawl. In order to prevent crashes when looking for notable traits or\n     // when gathering trait documentation on a type, hold impls here while\n     // folding and add them to the cache later on if we find the trait.\n     orphan_trait_impls: Vec<(DefId, FxHashSet<DefId>, Impl)>,\n@@ -227,7 +227,7 @@ impl<'a, 'tcx> DocFolder for CacheBuilder<'a, 'tcx> {\n         if let clean::TraitItem(ref t) = *item.kind {\n             self.cache.traits.entry(item.def_id).or_insert_with(|| clean::TraitWithExtraInfo {\n                 trait_: t.clone(),\n-                is_spotlight: item.attrs.has_doc_flag(sym::notable_trait),\n+                is_notable: item.attrs.has_doc_flag(sym::notable_trait),\n             });\n         }\n "}, {"sha": "a8a08fb23e08f4a3c9e640973e3305af8cef4213", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -1045,7 +1045,7 @@ fn render_assoc_item(\n         write!(\n             w,\n             \"{}{}{}{}{}{}{}fn <a href=\\\"{href}\\\" class=\\\"fnname\\\">{name}</a>\\\n-             {generics}{decl}{spotlight}{where_clause}\",\n+             {generics}{decl}{notable_traits}{where_clause}\",\n             if parent == ItemType::Trait { \"    \" } else { \"\" },\n             vis,\n             constness,\n@@ -1057,7 +1057,7 @@ fn render_assoc_item(\n             name = name,\n             generics = g.print(cache, tcx),\n             decl = d.full_print(cache, tcx, header_len, indent, header.asyncness),\n-            spotlight = spotlight_decl(&d, cache, tcx),\n+            notable_traits = notable_traits_decl(&d, cache, tcx),\n             where_clause = print_where_clause(g, cache, tcx, indent, end_newline),\n         )\n     }\n@@ -1341,17 +1341,19 @@ fn should_render_item(item: &clean::Item, deref_mut_: bool, cache: &Cache) -> bo\n     }\n }\n \n-fn spotlight_decl(decl: &clean::FnDecl, cache: &Cache, tcx: TyCtxt<'_>) -> String {\n+fn notable_traits_decl(decl: &clean::FnDecl, cache: &Cache, tcx: TyCtxt<'_>) -> String {\n     let mut out = Buffer::html();\n     let mut trait_ = String::new();\n \n     if let Some(did) = decl.output.def_id_full(cache) {\n         if let Some(impls) = cache.impls.get(&did) {\n             for i in impls {\n                 let impl_ = i.inner_impl();\n-                if impl_.trait_.def_id().map_or(false, |d| {\n-                    cache.traits.get(&d).map(|t| t.is_spotlight).unwrap_or(false)\n-                }) {\n+                if impl_\n+                    .trait_\n+                    .def_id()\n+                    .map_or(false, |d| cache.traits.get(&d).map(|t| t.is_notable).unwrap_or(false))\n+                {\n                     if out.is_empty() {\n                         write!(\n                             &mut out,"}, {"sha": "0cdfe435b9c9346379c5d2a6da808c1266c080af", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -10,9 +10,9 @@ use rustc_span::hygiene::MacroKind;\n use rustc_span::symbol::{kw, sym, Symbol};\n \n use super::{\n-    collect_paths_for_type, document, ensure_trailing_slash, item_ty_to_strs, render_assoc_item,\n-    render_assoc_items, render_attributes, render_impl, render_stability_since_raw, spotlight_decl,\n-    write_srclink, AssocItemLink, Context,\n+    collect_paths_for_type, document, ensure_trailing_slash, item_ty_to_strs, notable_traits_decl,\n+    render_assoc_item, render_assoc_items, render_attributes, render_impl,\n+    render_stability_since_raw, write_srclink, AssocItemLink, Context,\n };\n use crate::clean::{self, GetDefId};\n use crate::formats::cache::Cache;\n@@ -381,7 +381,7 @@ fn item_function(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, f: &clean::\n     write!(\n         w,\n         \"{vis}{constness}{asyncness}{unsafety}{abi}fn \\\n-         {name}{generics}{decl}{spotlight}{where_clause}</pre>\",\n+         {name}{generics}{decl}{notable_traits}{where_clause}</pre>\",\n         vis = it.visibility.print_with_space(cx.tcx(), it.def_id, cx.cache()),\n         constness = f.header.constness.print_with_space(),\n         asyncness = f.header.asyncness.print_with_space(),\n@@ -391,7 +391,7 @@ fn item_function(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, f: &clean::\n         generics = f.generics.print(cx.cache(), cx.tcx()),\n         where_clause = print_where_clause(&f.generics, cx.cache(), cx.tcx(), 0, true),\n         decl = f.decl.full_print(cx.cache(), cx.tcx(), header_len, 0, f.header.asyncness),\n-        spotlight = spotlight_decl(&f.decl, cx.cache(), cx.tcx()),\n+        notable_traits = notable_traits_decl(&f.decl, cx.cache(), cx.tcx()),\n     );\n     document(w, cx, it, None)\n }"}, {"sha": "f3ddd8ec6fab712451524604e5a54964d287b3d2", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/0daec04d657141e2eb2cea1675dd3e44624a8671/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=0daec04d657141e2eb2cea1675dd3e44624a8671", "patch": "@@ -173,13 +173,10 @@ code, pre, a.test-arrow {\n \tborder-radius: 3px;\n \tpadding: 0 0.1em;\n }\n-.docblock pre code, .docblock-short pre code, .docblock code.spotlight {\n+.docblock pre code, .docblock-short pre code {\n \tpadding: 0;\n \tpadding-right: 1ex;\n }\n-.docblock code.spotlight :last-child {\n-\tpadding-bottom: 0.6em;\n-}\n pre {\n \tpadding: 14px;\n }"}]}