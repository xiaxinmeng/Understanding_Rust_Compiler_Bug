{"sha": "d276e6942ea1af5c1ad79743e7f0ee797010023f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQyNzZlNjk0MmVhMWFmNWMxYWQ3OTc0M2U3ZjBlZTc5NzAxMDAyM2Y=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-01-19T11:52:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-19T11:52:09Z"}, "message": "Rollup merge of #68348 - xfix:patch-14, r=nagisa\n\nMake iter::Empty<T> Send and Sync for any T\n\nContinuing from #57682\n\nIt's quite funny, when I initially submitted this pull request, I said \"Likely nobody will be using that property of `iter::empty`\", but then a year later I got a compilation error because it wasn't `Send` and `Sync`.\n\nUnfortunately, `PhantomData<fn() -> T>` still errors out. Oh well. I proposed `\nstruct PhantomFnWorkaround<T>(fn() -> T);`, but dtolnay did not like it, so using explicit implementations.", "tree": {"sha": "7c54dabdc1a8a57a5da2d78f5c87b21971428cbf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c54dabdc1a8a57a5da2d78f5c87b21971428cbf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d276e6942ea1af5c1ad79743e7f0ee797010023f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeJELpCRBK7hj4Ov3rIwAAdHIIACA3+chrxIS6MFhPvZHhW6x0\n7+BDfUt16876swSGdAmNGwWYsdXYw2MVnxDDFir0cY1fdZBbugDg5Ju8YgJRUcgZ\naGyEP47rdhGVz6j7xGgbl1P6bwFZGZEn7Cic+6uUvhrsIiVAEdj+rKUWZ+u1jrQp\nKfF8VfwHi1fw6NMHYMKOBShCx6t/ep6pv8s0moSDshPq64qgru7gIxmYnyE0q2Oa\nzlRdosaZ51xRx4wH7hMwSm2f8OkXj+z1eBA/ll+9rRT4yB/Lg1qtNHpHGe+Dcgaj\nwXJevILHi+A6A7+RndxFGszRM+KHNmS6zHL9cDDVM3m+bNCudAcGZqG9y6kVQjU=\n=q/6e\n-----END PGP SIGNATURE-----\n", "payload": "tree 7c54dabdc1a8a57a5da2d78f5c87b21971428cbf\nparent a29ba0010765cb63de71a92df8c701e8e87878fc\nparent d7a18f89864a4360230e3cbbdcbf22d9864a86e0\nauthor Dylan DPC <dylan.dpc@gmail.com> 1579434729 +0530\ncommitter GitHub <noreply@github.com> 1579434729 +0530\n\nRollup merge of #68348 - xfix:patch-14, r=nagisa\n\nMake iter::Empty<T> Send and Sync for any T\n\nContinuing from #57682\n\nIt's quite funny, when I initially submitted this pull request, I said \"Likely nobody will be using that property of `iter::empty`\", but then a year later I got a compilation error because it wasn't `Send` and `Sync`.\n\nUnfortunately, `PhantomData<fn() -> T>` still errors out. Oh well. I proposed `\nstruct PhantomFnWorkaround<T>(fn() -> T);`, but dtolnay did not like it, so using explicit implementations.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d276e6942ea1af5c1ad79743e7f0ee797010023f", "html_url": "https://github.com/rust-lang/rust/commit/d276e6942ea1af5c1ad79743e7f0ee797010023f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d276e6942ea1af5c1ad79743e7f0ee797010023f/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a29ba0010765cb63de71a92df8c701e8e87878fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/a29ba0010765cb63de71a92df8c701e8e87878fc", "html_url": "https://github.com/rust-lang/rust/commit/a29ba0010765cb63de71a92df8c701e8e87878fc"}, {"sha": "d7a18f89864a4360230e3cbbdcbf22d9864a86e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7a18f89864a4360230e3cbbdcbf22d9864a86e0", "html_url": "https://github.com/rust-lang/rust/commit/d7a18f89864a4360230e3cbbdcbf22d9864a86e0"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "25dfc573e416abd38a0a9c3e23ae12812e2566b9", "filename": "src/libcore/iter/sources.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d276e6942ea1af5c1ad79743e7f0ee797010023f/src%2Flibcore%2Fiter%2Fsources.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d276e6942ea1af5c1ad79743e7f0ee797010023f/src%2Flibcore%2Fiter%2Fsources.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter%2Fsources.rs?ref=d276e6942ea1af5c1ad79743e7f0ee797010023f", "patch": "@@ -208,6 +208,11 @@ pub fn repeat_with<A, F: FnMut() -> A>(repeater: F) -> RepeatWith<F> {\n #[stable(feature = \"iter_empty\", since = \"1.2.0\")]\n pub struct Empty<T>(marker::PhantomData<T>);\n \n+#[stable(feature = \"iter_empty_send_sync\", since = \"1.42.0\")]\n+unsafe impl<T> Send for Empty<T> {}\n+#[stable(feature = \"iter_empty_send_sync\", since = \"1.42.0\")]\n+unsafe impl<T> Sync for Empty<T> {}\n+\n #[stable(feature = \"core_impl_debug\", since = \"1.9.0\")]\n impl<T> fmt::Debug for Empty<T> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {"}, {"sha": "2f6d35f01be62be86783118e1faa5368275448e3", "filename": "src/test/ui/threads-sendsync/sync-send-iterators-in-libcore.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d276e6942ea1af5c1ad79743e7f0ee797010023f/src%2Ftest%2Fui%2Fthreads-sendsync%2Fsync-send-iterators-in-libcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d276e6942ea1af5c1ad79743e7f0ee797010023f/src%2Ftest%2Fui%2Fthreads-sendsync%2Fsync-send-iterators-in-libcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fthreads-sendsync%2Fsync-send-iterators-in-libcore.rs?ref=d276e6942ea1af5c1ad79743e7f0ee797010023f", "patch": "@@ -88,6 +88,7 @@ fn main() {\n     is_sync_send!((1..));\n     is_sync_send!(repeat(1));\n     is_sync_send!(empty::<usize>());\n+    is_sync_send!(empty::<*mut i32>());\n     is_sync_send!(once(1));\n \n     // for option.rs"}]}