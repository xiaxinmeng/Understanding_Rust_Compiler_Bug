{"sha": "5dea1f188849e35aee866120958eaf3a2e196a47", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkZWExZjE4ODg0OWUzNWFlZTg2NjEyMDk1OGVhZjNhMmUxOTZhNDc=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-03-05T15:16:03Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-03-05T15:26:30Z"}, "message": "Clean up code around theme elements", "tree": {"sha": "1746ecf7a71dfe1783839773bcc5f69420b83072", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1746ecf7a71dfe1783839773bcc5f69420b83072"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5dea1f188849e35aee866120958eaf3a2e196a47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5dea1f188849e35aee866120958eaf3a2e196a47", "html_url": "https://github.com/rust-lang/rust/commit/5dea1f188849e35aee866120958eaf3a2e196a47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5dea1f188849e35aee866120958eaf3a2e196a47/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3ab4f9a204b130f7372e38ac7f79491478e544fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ab4f9a204b130f7372e38ac7f79491478e544fb", "html_url": "https://github.com/rust-lang/rust/commit/3ab4f9a204b130f7372e38ac7f79491478e544fb"}], "stats": {"total": 30, "additions": 19, "deletions": 11}, "files": [{"sha": "aef86998f0d16e1cf77ec3fc70edf7c6b22521b5", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 19, "deletions": 11, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/5dea1f188849e35aee866120958eaf3a2e196a47/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/5dea1f188849e35aee866120958eaf3a2e196a47/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=5dea1f188849e35aee866120958eaf3a2e196a47", "patch": "@@ -1,3 +1,4 @@\n+// ignore-tidy-filelength\n // Local js definitions:\n /* global addClass, getSettingValue, hasClass */\n /* global onEach, onEachLazy, hasOwnProperty, removeClass, updateLocalStorage */\n@@ -84,12 +85,20 @@ function getSearchElement() {\n     return document.getElementById(\"search\");\n }\n \n+function getThemesElementId() {\n+    return \"theme-choices\";\n+}\n+\n function getThemesElement() {\n-    return document.getElementById(\"theme-choices\");\n+    return document.getElementById(getThemesElementId());\n+}\n+\n+function getThemePickerElementId() {\n+    return \"theme-picker\";\n }\n \n function getThemePickerElement() {\n-    return document.getElementById(\"theme-picker\");\n+    return document.getElementById(getThemePickerElementId());\n }\n \n // Returns the current URL without any query parameter or hash.\n@@ -143,11 +152,11 @@ function hideThemeButtonState() {\n         var active = document.activeElement;\n         var related = e.relatedTarget;\n \n-        if (active.id !== \"theme-picker\" &&\n-            (!active.parentNode || active.parentNode.id !== \"theme-choices\") &&\n+        if (active.id !== getThemePickerElementId() &&\n+            (!active.parentNode || active.parentNode.id !== getThemesElementId()) &&\n             (!related ||\n-             (related.id !== \"theme-picker\" &&\n-              (!related.parentNode || related.parentNode.id !== \"theme-choices\")))) {\n+             (related.id !== getThemePickerElementId() &&\n+              (!related.parentNode || related.parentNode.id !== getThemesElementId())))) {\n             hideThemeButtonState();\n         }\n     }\n@@ -512,8 +521,7 @@ function hideThemeButtonState() {\n                 break;\n \n             default:\n-                var themePicker = getThemePickerElement();\n-                if (themePicker.parentNode.contains(ev.target)) {\n+                if (getThemePickerElement().parentNode.contains(ev.target)) {\n                     handleThemeKeyDown(ev);\n                 }\n             }\n@@ -526,7 +534,7 @@ function hideThemeButtonState() {\n         switch (getVirtualKey(ev)) {\n         case \"ArrowUp\":\n             ev.preventDefault();\n-            if (active.previousElementSibling && ev.target.id !== \"theme-picker\") {\n+            if (active.previousElementSibling && ev.target.id !== getThemePickerElementId()) {\n                 active.previousElementSibling.focus();\n             } else {\n                 showThemeButtonState();\n@@ -535,7 +543,7 @@ function hideThemeButtonState() {\n             break;\n         case \"ArrowDown\":\n             ev.preventDefault();\n-            if (active.nextElementSibling && ev.target.id !== \"theme-picker\") {\n+            if (active.nextElementSibling && ev.target.id !== getThemePickerElementId()) {\n                 active.nextElementSibling.focus();\n             } else {\n                 showThemeButtonState();\n@@ -545,7 +553,7 @@ function hideThemeButtonState() {\n         case \"Enter\":\n         case \"Return\":\n         case \"Space\":\n-            if (ev.target.id === \"theme-picker\" && themes.style.display === \"none\") {\n+            if (ev.target.id === getThemePickerElementId() && themes.style.display === \"none\") {\n                 ev.preventDefault();\n                 showThemeButtonState();\n                 themes.firstElementChild.focus();"}]}