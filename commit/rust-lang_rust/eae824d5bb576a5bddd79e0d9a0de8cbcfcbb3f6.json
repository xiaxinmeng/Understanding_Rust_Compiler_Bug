{"sha": "eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6", "node_id": "C_kwDOAAsO6NoAKGVhZTgyNGQ1YmI1NzZhNWJkZGQ3OWUwZDlhMGRlOGNiY2ZjYmIzZjY", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-10T16:28:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-08-10T16:28:19Z"}, "message": "Rollup merge of #100317 - kjetilkjeka:remove-nvptx32-logic, r=eddyb\n\nRemove logic related to deprecated nvptx-nvidia-cuda (32-bit) target\n\nAs described in the MCP https://github.com/rust-lang/compiler-team/issues/496#issuecomment-1196328748\n\nr? ``@eddyb``", "tree": {"sha": "57edea61a1baf528c14e4f3d5b65447e2a34c327", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57edea61a1baf528c14e4f3d5b65447e2a34c327"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi89yjCRBK7hj4Ov3rIwAAEx8IAJYLJEqKMpy/4o4NRLPZZpUT\njLjJZ3laz3BpHFMI7UxA8vVm4tQ5nQVxVjoM6eqzIr2pMj80CbCwUOgMSA8+ilDW\nsPD66If6VLQ5cSoPNSk2K8eB124ikrbX59zI60qLpgRbC/7wI392QtPjl+znsTtg\nIGrK+v0tGQKKoIddSFzmMcoE1oOnm1AwnLEgvuGtY0FR7toz7q0S+GFEcY2A0VOC\nsPP7EKtfkxlTbUFC/HJHmgfK43Xew2dCu1rmDgrR/aUTsX8JOEhFXWU5qeDaj++a\nRoYEru4EVt7Od6uL6oj9vPNax4fSuhrUI8Ct1lhUtOIHg5/TgQqGoxT/CMM4O44=\n=Q+sg\n-----END PGP SIGNATURE-----\n", "payload": "tree 57edea61a1baf528c14e4f3d5b65447e2a34c327\nparent d0d2f60e49d51aa34be648fa7bb102d3f46387ed\nparent 22930b7b25b12e53be9752e4fb8537c8abf709c8\nauthor Michael Goulet <michael@errs.io> 1660148899 -0700\ncommitter GitHub <noreply@github.com> 1660148899 -0700\n\nRollup merge of #100317 - kjetilkjeka:remove-nvptx32-logic, r=eddyb\n\nRemove logic related to deprecated nvptx-nvidia-cuda (32-bit) target\n\nAs described in the MCP https://github.com/rust-lang/compiler-team/issues/496#issuecomment-1196328748\n\nr? ``@eddyb``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6", "html_url": "https://github.com/rust-lang/rust/commit/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d0d2f60e49d51aa34be648fa7bb102d3f46387ed", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0d2f60e49d51aa34be648fa7bb102d3f46387ed", "html_url": "https://github.com/rust-lang/rust/commit/d0d2f60e49d51aa34be648fa7bb102d3f46387ed"}, {"sha": "22930b7b25b12e53be9752e4fb8537c8abf709c8", "url": "https://api.github.com/repos/rust-lang/rust/commits/22930b7b25b12e53be9752e4fb8537c8abf709c8", "html_url": "https://github.com/rust-lang/rust/commit/22930b7b25b12e53be9752e4fb8537c8abf709c8"}], "stats": {"total": 35, "additions": 0, "deletions": 35}, "files": [{"sha": "639ce64a9f557c3b404383ea1b78751bb735b8cd", "filename": "compiler/rustc_target/src/abi/call/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fmod.rs?ref=eae824d5bb576a5bddd79e0d9a0de8cbcfcbb3f6", "patch": "@@ -14,7 +14,6 @@ mod m68k;\n mod mips;\n mod mips64;\n mod msp430;\n-mod nvptx;\n mod nvptx64;\n mod powerpc;\n mod powerpc64;\n@@ -702,7 +701,6 @@ impl<'a, Ty> FnAbi<'a, Ty> {\n             \"msp430\" => msp430::compute_abi_info(self),\n             \"sparc\" => sparc::compute_abi_info(cx, self),\n             \"sparc64\" => sparc64::compute_abi_info(cx, self),\n-            \"nvptx\" => nvptx::compute_abi_info(self),\n             \"nvptx64\" => {\n                 if cx.target_spec().adjust_abi(abi) == spec::abi::Abi::PtxKernel {\n                     nvptx64::compute_ptx_kernel_abi_info(cx, self)"}, {"sha": "428dd95bbcd65be12d69d05b56ad90119e7e5126", "filename": "compiler/rustc_target/src/abi/call/nvptx.rs", "status": "removed", "additions": 0, "deletions": 33, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/d0d2f60e49d51aa34be648fa7bb102d3f46387ed/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fnvptx.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0d2f60e49d51aa34be648fa7bb102d3f46387ed/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fnvptx.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fabi%2Fcall%2Fnvptx.rs?ref=d0d2f60e49d51aa34be648fa7bb102d3f46387ed", "patch": "@@ -1,33 +0,0 @@\n-// Reference: PTX Writer's Guide to Interoperability\n-// https://docs.nvidia.com/cuda/ptx-writers-guide-to-interoperability\n-\n-use crate::abi::call::{ArgAbi, FnAbi};\n-\n-fn classify_ret<Ty>(ret: &mut ArgAbi<'_, Ty>) {\n-    if ret.layout.is_aggregate() && ret.layout.size.bits() > 32 {\n-        ret.make_indirect();\n-    } else {\n-        ret.extend_integer_width_to(32);\n-    }\n-}\n-\n-fn classify_arg<Ty>(arg: &mut ArgAbi<'_, Ty>) {\n-    if arg.layout.is_aggregate() && arg.layout.size.bits() > 32 {\n-        arg.make_indirect();\n-    } else {\n-        arg.extend_integer_width_to(32);\n-    }\n-}\n-\n-pub fn compute_abi_info<Ty>(fn_abi: &mut FnAbi<'_, Ty>) {\n-    if !fn_abi.ret.is_ignore() {\n-        classify_ret(&mut fn_abi.ret);\n-    }\n-\n-    for arg in &mut fn_abi.args {\n-        if arg.is_ignore() {\n-            continue;\n-        }\n-        classify_arg(arg);\n-    }\n-}"}]}