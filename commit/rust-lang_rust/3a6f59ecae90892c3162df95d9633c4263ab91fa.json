{"sha": "3a6f59ecae90892c3162df95d9633c4263ab91fa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhNmY1OWVjYWU5MDg5MmMzMTYyZGY5NWQ5NjMzYzQyNjNhYjkxZmE=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-10-08T11:50:24Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-10-08T11:50:24Z"}, "message": "Document string_lit_as_bytes known problems", "tree": {"sha": "8284abb7706d200e5163917e77d4a460c99cd84c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8284abb7706d200e5163917e77d4a460c99cd84c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a6f59ecae90892c3162df95d9633c4263ab91fa", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAl9+/QAACgkQ+boUO5X/\nbYJKpRAAjxzGOywhLVBmIzBZHf4bzImFm0tFnwks/EqnjigOxIv8/CBXUlepuVwD\nSqlFMzqSMVIWmunH//ItT9eJnPN6wuXC4Cc7iHxAoVhk3eG2G+388wU10oAwadjn\nJ0CKGVCn4kV0wo2AgeZiPiTRGvZ5gpRihgL2fnTfSGTfd1qQjqthVNCzr12tuiKv\nNklk2yYdkL8S/hnuNo8Nl34z5+iERkd+W3wyfXwP4pBR6yK2uaZK5I5RU+VXGxnx\nFJQHxOr/CVxPEOPxgO0FrFdC0q9sm9YLIVdXJ4SugvXIM304DRZAp9tRICXeEbt5\ndoBYY6ALmZmD5ISiYTzlf+qKw4+kUkPbUvPCHYFDl75TG+/JnpPvumu3+hgqlD3g\nrCTOvcKM1S7QKdjbk0p7SeeRlgHkfp8ueiW55Mdg/mo0oqvmNn5qAwaM/haChX8e\nBl5Tgu3MshZzkGSeIzbg7QVQU+f6hHCzp7WImYEpSPo+X64be1xktZBxh0PxU6uq\neZI3G4xZRyxBmX7v9IpiAzKoPiOwyfssqGUeaEzwVcwiCLmorn22+vT4AmgI56w7\nnII9vNRHT6/nLjYSK/+tmccQYWvMC94FHNm9uPnaWlq3Ju/41N1JpEzOWUYlxCPy\nU3fiahLFzdxb4O8Lgu0ilWUFa+H/l0zxxvnuiE2Aw1UinsEec1Q=\n=H+3b\n-----END PGP SIGNATURE-----", "payload": "tree 8284abb7706d200e5163917e77d4a460c99cd84c\nparent a5ef305cb5a10437963ecda82a833b6932dc70d1\nauthor David Tolnay <dtolnay@gmail.com> 1602157824 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1602157824 -0700\n\nDocument string_lit_as_bytes known problems\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a6f59ecae90892c3162df95d9633c4263ab91fa", "html_url": "https://github.com/rust-lang/rust/commit/3a6f59ecae90892c3162df95d9633c4263ab91fa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a6f59ecae90892c3162df95d9633c4263ab91fa/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5ef305cb5a10437963ecda82a833b6932dc70d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5ef305cb5a10437963ecda82a833b6932dc70d1", "html_url": "https://github.com/rust-lang/rust/commit/a5ef305cb5a10437963ecda82a833b6932dc70d1"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "415c07b22614ef8f62a668c0d4010841ce02c1a5", "filename": "clippy_lints/src/strings.rs", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/3a6f59ecae90892c3162df95d9633c4263ab91fa/clippy_lints%2Fsrc%2Fstrings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a6f59ecae90892c3162df95d9633c4263ab91fa/clippy_lints%2Fsrc%2Fstrings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fstrings.rs?ref=3a6f59ecae90892c3162df95d9633c4263ab91fa", "patch": "@@ -69,7 +69,27 @@ declare_clippy_lint! {\n     /// **Why is this bad?** Byte string literals (e.g., `b\"foo\"`) can be used\n     /// instead. They are shorter but less discoverable than `as_bytes()`.\n     ///\n-    /// **Known Problems:** None.\n+    /// **Known Problems:**\n+    /// `\"str\".as_bytes()` and the suggested replacement of `b\"str\"` are not\n+    /// equivalent because they have different types. The former is `&[u8]`\n+    /// while the latter is `&[u8; 3]`. That means in general they will have a\n+    /// different set of methods and different trait implementations.\n+    ///\n+    /// ```rust\n+    /// fn f(v: Vec<u8>) {}\n+    ///\n+    /// f(\"...\".as_bytes().to_owned()); // works\n+    /// f(b\"...\".to_owned()); // does not work, because arg is [u8; 3] not Vec<u8>\n+    ///\n+    /// fn g(r: impl std::io::Read) {}\n+    ///\n+    /// g(\"...\".as_bytes()); // works\n+    /// g(b\"...\"); // does not work\n+    /// ```\n+    ///\n+    /// The actual equivalent of `\"str\".as_bytes()` with the same type is not\n+    /// `b\"str\"` but `&b\"str\"[..]`, which is a great deal of punctuation and not\n+    /// more readable than a function call.\n     ///\n     /// **Example:**\n     /// ```rust"}]}