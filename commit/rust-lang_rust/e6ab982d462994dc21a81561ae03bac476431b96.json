{"sha": "e6ab982d462994dc21a81561ae03bac476431b96", "node_id": "C_kwDOAAsO6NoAKGU2YWI5ODJkNDYyOTk0ZGMyMWE4MTU2MWFlMDNiYWM0NzY0MzFiOTY", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-20T06:47:07Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-11-20T08:10:22Z"}, "message": "Reduce prominence of item-infos\n\n - Remove border.\n - Reduce size of emoji slightly.\n - Remove details disclosure for unstable reason. This was inconsistent\n   with our other details disclosures, and the detail revealed was\n   usually better explained by clicking on the issue link.", "tree": {"sha": "da7d0fbf6bc864c0f82d533cfcdbbd7d48cb7ba1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da7d0fbf6bc864c0f82d533cfcdbbd7d48cb7ba1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6ab982d462994dc21a81561ae03bac476431b96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6ab982d462994dc21a81561ae03bac476431b96", "html_url": "https://github.com/rust-lang/rust/commit/e6ab982d462994dc21a81561ae03bac476431b96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6ab982d462994dc21a81561ae03bac476431b96/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb", "html_url": "https://github.com/rust-lang/rust/commit/ce3f3a5ffa7452131cde06c003cc2eaa7c729bfb"}], "stats": {"total": 33, "additions": 4, "deletions": 29}, "files": [{"sha": "0ab6494d1845399aaddc09102e64fd959bbbbe7a", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/e6ab982d462994dc21a81561ae03bac476431b96/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6ab982d462994dc21a81561ae03bac476431b96/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=e6ab982d462994dc21a81561ae03bac476431b96", "patch": "@@ -682,7 +682,7 @@ fn short_item_info(\n \n     // Render unstable items. But don't render \"rustc_private\" crates (internal compiler crates).\n     // Those crates are permanently unstable so it makes no sense to render \"unstable\" everywhere.\n-    if let Some((StabilityLevel::Unstable { reason, issue, .. }, feature)) = item\n+    if let Some((StabilityLevel::Unstable { reason: _, issue, .. }, feature)) = item\n         .stability(cx.tcx())\n         .as_ref()\n         .filter(|stab| stab.feature != sym::rustc_private)\n@@ -702,22 +702,6 @@ fn short_item_info(\n \n         message.push_str(&format!(\" ({})\", feature));\n \n-        if let Some(unstable_reason) = reason {\n-            let mut ids = cx.id_map.borrow_mut();\n-            message = format!(\n-                \"<details><summary>{}</summary>{}</details>\",\n-                message,\n-                MarkdownHtml(\n-                    &unstable_reason.as_str(),\n-                    &mut ids,\n-                    error_codes,\n-                    cx.shared.edition(),\n-                    &cx.shared.playground,\n-                )\n-                .into_string()\n-            );\n-        }\n-\n         extra_info.push(format!(\"<div class=\\\"stab unstable\\\">{}</div>\", message));\n     }\n "}, {"sha": "26ba023606d0929292623d3082a8761bbaa20432", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e6ab982d462994dc21a81561ae03bac476431b96/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/e6ab982d462994dc21a81561ae03bac476431b96/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=e6ab982d462994dc21a81561ae03bac476431b96", "patch": "@@ -965,8 +965,6 @@ body.blur > :not(#help) {\n \tdisplay: table;\n }\n .stab {\n-\tborder-width: 1px;\n-\tborder-style: solid;\n \tpadding: 3px;\n \tmargin-bottom: 5px;\n \tfont-size: 90%;\n@@ -977,7 +975,7 @@ body.blur > :not(#help) {\n }\n \n .stab .emoji {\n-\tfont-size: 1.5em;\n+\tfont-size: 1.2em;\n }\n \n /* Black one-pixel outline around emoji shapes */"}, {"sha": "cdc00d341140332246dc0e3355472dc3bb45a651", "filename": "src/test/rustdoc-gui/item-info-width.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e6ab982d462994dc21a81561ae03bac476431b96/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "raw_url": "https://github.com/rust-lang/rust/raw/e6ab982d462994dc21a81561ae03bac476431b96/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml?ref=e6ab982d462994dc21a81561ae03bac476431b96", "patch": "@@ -4,4 +4,4 @@ goto: file://|DOC_PATH|/lib2/struct.Foo.html\n size: (1100, 800)\n // We check that \".item-info\" is bigger than its content.\n assert-css: (\".item-info\", {\"width\": \"807px\"})\n-assert-css: (\".item-info .stab\", {\"width\": \"343px\"})\n+assert-css: (\".item-info .stab\", {\"width\": \"341px\"})"}, {"sha": "7654a5615275ac17e4d074ed04e42df5c2e88d48", "filename": "src/test/rustdoc/issue-32374.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/e6ab982d462994dc21a81561ae03bac476431b96/src%2Ftest%2Frustdoc%2Fissue-32374.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6ab982d462994dc21a81561ae03bac476431b96/src%2Ftest%2Frustdoc%2Fissue-32374.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-32374.rs?ref=e6ab982d462994dc21a81561ae03bac476431b96", "patch": "@@ -1,7 +1,6 @@\n #![feature(staged_api)]\n #![doc(issue_tracker_base_url = \"https://issue_url/\")]\n-\n-#![unstable(feature=\"test\", issue = \"32374\")]\n+#![unstable(feature = \"test\", issue = \"32374\")]\n \n // @matches issue_32374/index.html '//*[@class=\"item-left unstable deprecated module-item\"]/span[@class=\"stab deprecated\"]' \\\n //      'Deprecated'\n@@ -23,12 +22,6 @@ pub struct T;\n //      '\ud83d\udc4e Deprecated since 1.0.0: deprecated'\n // @has issue_32374/struct.U.html '//*[@class=\"stab unstable\"]' \\\n //      '\ud83d\udd2c This is a nightly-only experimental API. (test #32374)'\n-// @has issue_32374/struct.U.html '//details' \\\n-//      '\ud83d\udd2c This is a nightly-only experimental API. (test #32374)'\n-// @has issue_32374/struct.U.html '//summary' \\\n-//      '\ud83d\udd2c This is a nightly-only experimental API. (test #32374)'\n-// @has issue_32374/struct.U.html '//details/p' \\\n-//      'unstable'\n #[rustc_deprecated(since = \"1.0.0\", reason = \"deprecated\")]\n #[unstable(feature = \"test\", issue = \"32374\", reason = \"unstable\")]\n pub struct U;"}]}