{"sha": "cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmMDAyZTlkMzJhOWI4MzhmMTE5MzNmM2UxZDM4YjZmZmRiYzBmOTg=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-11-13T21:32:49Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-11-14T02:35:02Z"}, "message": "Tools should not be build prereqs of tests. Closes #3946", "tree": {"sha": "7ec251f386060ee3918993d90e51d47f51e150fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ec251f386060ee3918993d90e51d47f51e150fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "html_url": "https://github.com/rust-lang/rust/commit/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e850c3c0ce22c1196e4d08eca2d30db6ad753bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e850c3c0ce22c1196e4d08eca2d30db6ad753bb", "html_url": "https://github.com/rust-lang/rust/commit/3e850c3c0ce22c1196e4d08eca2d30db6ad753bb"}], "stats": {"total": 37, "additions": 23, "deletions": 14}, "files": [{"sha": "34f98406e84800162de67c70a05b15b93e2bbceb", "filename": "Makefile.in", "status": "modified", "additions": 18, "deletions": 11, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "patch": "@@ -341,6 +341,7 @@ HSREQ$(1)_H_$(3) = \\\n \t$$(HLIB$(1)_H_$(3))/$$(CFG_RUSTLLVM) \\\n \t$$(HCORELIB_DEFAULT$(1)_H_$(3)) \\\n \t$$(HSTDLIB_DEFAULT$(1)_H_$(3)) \\\n+\t$$(HLIBSYNTAX_DEFAULT$(1)_H_$(3)) \\\n \t$$(HLIBRUSTC_DEFAULT$(1)_H_$(3)) \\\n \t$$(MKFILE_DEPS)\n \n@@ -350,17 +351,31 @@ TSREQ$(1)_T_$(2)_H_$(3) = \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUNTIME) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a\n \n-# Prerequisites for complete stageN targets\n+# Prerequisites for a working stageN compiler and libraries\n SREQ$(1)_T_$(2)_H_$(3) = \\\n \t$$(TSREQ$(1)_T_$(2)_H_$(3)) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_CORELIB) \\\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)\n+\n+# Prerequisites for a working stageN compiler and libraries\n+CSREQ$(1)_T_$(2)_H_$(3) = \\\n+\t$$(TSREQ$(1)_T_$(2)_H_$(3)) \\\n+\t$$(HBIN$(1)_H_$(3))/fuzzer$$(X) \\\n+\t$$(HBIN$(1)_H_$(3))/cargo$$(X) \\\n+\t$$(HBIN$(1)_H_$(3))/rustdoc$$(X) \\\n+\t$$(HBIN$(1)_H_$(3))/rusti$$(X) \\\n+\t$$(HLIB$(1)_H_$(3))/$$(CFG_LIBFUZZER) \\\n+\t$$(HLIB$(1)_H_$(3))/$$(CFG_LIBCARGO) \\\n+\t$$(HLIB$(1)_H_$(3))/$$(CFG_LIBRUSTDOC) \\\n+\t$$(HLIB$(1)_H_$(3))/$$(CFG_LIBRUSTI) \\\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_CORELIB) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)  \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBSYNTAX)  \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBFUZZER) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBCARGO) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTDOC) \\\n-\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTI)  \\\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTI)\n \n ifeq ($(1),0)\n # Don't run the the stage0 compiler under valgrind - that ship has sailed\n@@ -461,15 +476,7 @@ all: $(SREQ1$(CFG_HOST_TRIPLE)) $(GENERATED) docs\n \n else\n \n-TSREQS :=\t\t\t\t\t\t\t\t\t\t\t\\\n-\t$(foreach target,$(CFG_TARGET_TRIPLES),\t\t\t\\\n-\t\t$(SREQ3_T_$(target)_H_$(CFG_HOST_TRIPLE)))\n-FUZZ := $(HBIN2_H_$(CFG_HOST_TRIPLE))/fuzzer$(X)\n-CARGO := $(HBIN2_H_$(CFG_HOST_TRIPLE))/cargo$(X)\n-RUSTDOC := $(HBIN2_H_$(CFG_HOST_TRIPLE))/rustdoc$(X)\n-RUSTI := $(HBIN2_H_$(CFG_HOST_TRIPLE))/rusti$(X)\n-\n-all: rustc $(GENERATED) docs $(FUZZ) $(CARGO) $(RUSTDOC) $(RUSTI)\n+all: $(CSREQ3$(CFG_HOST_TRIPLE)) $(GENERATED) docs\n \n endif\n "}, {"sha": "8115cdd6c320c8bac876887e575d351014a9b581", "filename": "mk/install.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "patch": "@@ -33,7 +33,7 @@ PTR$(1)$(2) = $$(PREFIX_LIB)/rustc/$(1)\n PTB$(1)$(2) = $$(PTR$(1)$(2))/bin\n PTL$(1)$(2) = $$(PTR$(1)$(2))/$(CFG_LIBDIR)\n \n-install-target-$(1)-host-$(2): $$(SREQ$$(ISTAGE)_T_$(1)_H_$(2))\n+install-target-$(1)-host-$(2): $$(CSREQ$$(ISTAGE)_T_$(1)_H_$(2))\n \t$$(Q)mkdir -p $$(PTL$(1)$(2))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CFG_RUNTIME))\n \t$$(Q)$$(call INSTALL_LIB, \\\n@@ -74,7 +74,7 @@ PHB = $(PREFIX_BIN)\n # Shorthand for the prefix bin directory\n PHL = $(PREFIX_LIB)\n \n-install-host: $(SREQ$(ISTAGE)_T_$(CFG_HOST_TRIPLE)_H_$(CFG_HOST_TRIPLE))\n+install-host: $(CSREQ$(ISTAGE)_T_$(CFG_HOST_TRIPLE)_H_$(CFG_HOST_TRIPLE))\n \t$(Q)mkdir -p $(PREFIX_BIN)\n \t$(Q)mkdir -p $(PREFIX_LIB)\n \t$(Q)mkdir -p $(PREFIX_ROOT)/share/man/man1"}, {"sha": "cd38de6be1037d34b5355ece15290650378538e8", "filename": "mk/tests.mk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "patch": "@@ -352,7 +352,8 @@ $(3)/test/rustctest.stage$(1)-$(2)$$(X):\t\t\t\t\t\\\n \t\t$$(COMPILER_CRATE)\t\t\t\t\t\t\t\t\t\\\n \t\t$$(COMPILER_INPUTS)\t\t\t\t\t\t\t\t\t\\\n \t\t$$(SREQ$(1)_T_$(2)_H_$(3))\t\t\t\t\t\t\t\\\n-\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM)\n+\t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM) \\\n+                $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBSYNTAX)\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< --test\n "}, {"sha": "505528d95baef4c8aa22802bdc50347429302d8d", "filename": "src/test/compile-fail/qquote-1.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/src%2Ftest%2Fcompile-fail%2Fqquote-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98/src%2Ftest%2Fcompile-fail%2Fqquote-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fqquote-1.rs?ref=cf002e9d32a9b838f11933f3e1d38b6ffdbc0f98", "patch": "@@ -1,3 +1,4 @@\n+// xfail-test Can't use syntax crate here\n \n extern mod std;\n extern mod syntax;"}]}