{"sha": "faf8a2af7aab765c832c9045f08421e42ddb0b35", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhZjhhMmFmN2FhYjc2NWM4MzJjOTA0NWYwODQyMWU0MmRkYjBiMzU=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-10-09T18:42:29Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-10-09T18:42:29Z"}, "message": "Only suggest change mut if vars are resolved", "tree": {"sha": "1a4da07810081b2ebc3e73bb6732f03e1715d18b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a4da07810081b2ebc3e73bb6732f03e1715d18b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/faf8a2af7aab765c832c9045f08421e42ddb0b35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/faf8a2af7aab765c832c9045f08421e42ddb0b35", "html_url": "https://github.com/rust-lang/rust/commit/faf8a2af7aab765c832c9045f08421e42ddb0b35", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/faf8a2af7aab765c832c9045f08421e42ddb0b35/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c6bcac535942533489bccdd39515babd0ebb15a", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c6bcac535942533489bccdd39515babd0ebb15a", "html_url": "https://github.com/rust-lang/rust/commit/2c6bcac535942533489bccdd39515babd0ebb15a"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "9eb91569ed5c4f6ded2018545d83e7814038ece9", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/faf8a2af7aab765c832c9045f08421e42ddb0b35/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/faf8a2af7aab765c832c9045f08421e42ddb0b35/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=faf8a2af7aab765c832c9045f08421e42ddb0b35", "patch": "@@ -1134,6 +1134,12 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n             { // Do not suggest removal of borrow from type arguments.\n                 return;\n             }\n+            let trait_ref = self.resolve_vars_if_possible(trait_ref);\n+            if trait_ref.has_infer_types() {\n+                // Do not ICE while trying to find if a reborrow would succeed on a trait with\n+                // unresolved bindings.\n+                return;\n+            }\n \n             if let ty::Ref(region, t_type, mutability) = trait_ref.skip_binder().self_ty().kind {\n                 let trait_type = match mutability {"}, {"sha": "bfc313cabdc442d2627b35f0a4e8b7cd6502c463", "filename": "src/test/ui/suggestions/suggest-remove-refs-1.stderr", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/faf8a2af7aab765c832c9045f08421e42ddb0b35/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-remove-refs-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/faf8a2af7aab765c832c9045f08421e42ddb0b35/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-remove-refs-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-remove-refs-1.stderr?ref=faf8a2af7aab765c832c9045f08421e42ddb0b35", "patch": "@@ -8,7 +8,6 @@ LL |     for (i, n) in &v.iter().enumerate() {\n    |                   help: consider removing 1 leading `&`-references\n    |\n    = help: the trait `std::iter::Iterator` is not implemented for `&std::iter::Enumerate<std::slice::Iter<'_, {integer}>>`\n-   = note: `std::iter::Iterator` is implemented for `&mut std::iter::Enumerate<std::slice::Iter<'_, {integer}>>`, but not for `&std::iter::Enumerate<std::slice::Iter<'_, {integer}>>`\n    = note: required by `std::iter::IntoIterator::into_iter`\n \n error: aborting due to previous error"}]}