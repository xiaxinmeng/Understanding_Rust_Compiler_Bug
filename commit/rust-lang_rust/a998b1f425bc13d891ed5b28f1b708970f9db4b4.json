{"sha": "a998b1f425bc13d891ed5b28f1b708970f9db4b4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5OThiMWY0MjViYzEzZDg5MWVkNWIyOGYxYjcwODk3MGY5ZGI0YjQ=", "commit": {"author": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-27T15:56:58Z"}, "committer": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-27T21:50:47Z"}, "message": "allow specifying attributes for tool lints", "tree": {"sha": "073c5c09d959b0500bb5df39b44d7110f15e5002", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/073c5c09d959b0500bb5df39b44d7110f15e5002"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a998b1f425bc13d891ed5b28f1b708970f9db4b4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFKBAABCAA0FiEELriChyEaiMu0yCg7viIhAz7bw3QFAlx3Bj8WHGFydXNzZWxs\nMTIzQGdtYWlsLmNvbQAKCRC+IiEDPtvDdNHgB/sGtNYdeu8Wz5o2Qycd0yqvCN9u\nG4uqqCiiB+GeN9PLvqPCush4QSMnBlRxGKNl7BIVbxqCrIzfcvNkuqy87FrjC4x+\nhUQPwupo9CppOvIk9MM3GnD900zgFViE94C7PG7+E1Ninq4W9rs+7qnakC0i61Gv\npJ8c3g/FTsl9AqHqtVazWfqW+GQ8H1FPO0nf5N3A7lMtCqTf6DZkjtrBPqpU/JrM\nMqHaYaX6G8/gzVLMX4tsg8GD2th2WFRge1QJ7pn3kuG9QB36vSbIRAvgYVUP9i42\n0JiObePUUueOqLWq9/gRCRsauFTAhoMP/6J78vsmidyYqkwTe80Rl13nyU+d\n=kTGQ\n-----END PGP SIGNATURE-----", "payload": "tree 073c5c09d959b0500bb5df39b44d7110f15e5002\nparent ea43c3c688980edd6f09a4cb632c9eb996c4f2af\nauthor Andy Russell <arussell123@gmail.com> 1551283018 -0500\ncommitter Andy Russell <arussell123@gmail.com> 1551304247 -0500\n\nallow specifying attributes for tool lints\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a998b1f425bc13d891ed5b28f1b708970f9db4b4", "html_url": "https://github.com/rust-lang/rust/commit/a998b1f425bc13d891ed5b28f1b708970f9db4b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a998b1f425bc13d891ed5b28f1b708970f9db4b4/comments", "author": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea43c3c688980edd6f09a4cb632c9eb996c4f2af", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea43c3c688980edd6f09a4cb632c9eb996c4f2af", "html_url": "https://github.com/rust-lang/rust/commit/ea43c3c688980edd6f09a4cb632c9eb996c4f2af"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "496ff568b31b4d5a775a0f1f1382dfa477a9fff6", "filename": "src/librustc/lint/mod.rs", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/a998b1f425bc13d891ed5b28f1b708970f9db4b4/src%2Flibrustc%2Flint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a998b1f425bc13d891ed5b28f1b708970f9db4b4/src%2Flibrustc%2Flint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fmod.rs?ref=a998b1f425bc13d891ed5b28f1b708970f9db4b4", "patch": "@@ -132,14 +132,22 @@ macro_rules! declare_lint {\n \n #[macro_export]\n macro_rules! declare_tool_lint {\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr) => (\n-        declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, false}\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level: ident, $desc: expr\n+    ) => (\n+        declare_tool_lint!{$(#[$attr])* $vis $tool::$NAME, $Level, $desc, false}\n     );\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr,\n-     report_in_external_macro: $rep: expr) => (\n-         declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, $rep}\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level:ident, $desc:expr,\n+        report_in_external_macro: $rep:expr\n+    ) => (\n+         declare_tool_lint!{$(#[$attr])* $vis $tool::$NAME, $Level, $desc, $rep}\n     );\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr, $external: expr) => (\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level:ident, $desc:expr,\n+        $external:expr\n+    ) => (\n+        $(#[$attr])*\n         $vis static $NAME: &$crate::lint::Lint = &$crate::lint::Lint {\n             name: &concat!(stringify!($tool), \"::\", stringify!($NAME)),\n             default_level: $crate::lint::$Level,"}, {"sha": "d25a5ea374627dbf5ec62eff4467088c2eb42ecb", "filename": "src/test/ui-fulldeps/auxiliary/lint_tool_test.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a998b1f425bc13d891ed5b28f1b708970f9db4b4/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a998b1f425bc13d891ed5b28f1b708970f9db4b4/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs?ref=a998b1f425bc13d891ed5b28f1b708970f9db4b4", "patch": "@@ -13,7 +13,11 @@ use rustc::lint::{EarlyContext, LintContext, LintPass, EarlyLintPass,\n use rustc_plugin::Registry;\n use syntax::ast;\n declare_tool_lint!(pub clippy::TEST_LINT, Warn, \"Warn about stuff\");\n-declare_tool_lint!(pub clippy::TEST_GROUP, Warn, \"Warn about other stuff\");\n+declare_tool_lint!(\n+    /// Some docs\n+    pub clippy::TEST_GROUP,\n+    Warn, \"Warn about other stuff\"\n+);\n \n struct Pass;\n "}]}