{"sha": "c0808998481402cb1cd502ad6aa54e253840efc6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwODA4OTk4NDgxNDAyY2IxY2Q1MDJhZDZhYTU0ZTI1Mzg0MGVmYzY=", "commit": {"author": {"name": "Marcel Hellwig", "email": "github@cookiesoft.de", "date": "2021-05-03T14:18:41Z"}, "committer": {"name": "Marcel Hellwig", "email": "github@cookiesoft.de", "date": "2021-05-03T14:18:41Z"}, "message": "add strip_{prefix,suffix} to PATTERN_METHODS\n\nthis will warn, if a single_char_pattern is used in one of the above\nmethods", "tree": {"sha": "37a65075167e0a0182d7681cb0a78a76b387e8ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37a65075167e0a0182d7681cb0a78a76b387e8ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0808998481402cb1cd502ad6aa54e253840efc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0808998481402cb1cd502ad6aa54e253840efc6", "html_url": "https://github.com/rust-lang/rust/commit/c0808998481402cb1cd502ad6aa54e253840efc6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0808998481402cb1cd502ad6aa54e253840efc6/comments", "author": {"login": "hellow554", "id": 921462, "node_id": "MDQ6VXNlcjkyMTQ2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/921462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hellow554", "html_url": "https://github.com/hellow554", "followers_url": "https://api.github.com/users/hellow554/followers", "following_url": "https://api.github.com/users/hellow554/following{/other_user}", "gists_url": "https://api.github.com/users/hellow554/gists{/gist_id}", "starred_url": "https://api.github.com/users/hellow554/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hellow554/subscriptions", "organizations_url": "https://api.github.com/users/hellow554/orgs", "repos_url": "https://api.github.com/users/hellow554/repos", "events_url": "https://api.github.com/users/hellow554/events{/privacy}", "received_events_url": "https://api.github.com/users/hellow554/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hellow554", "id": 921462, "node_id": "MDQ6VXNlcjkyMTQ2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/921462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hellow554", "html_url": "https://github.com/hellow554", "followers_url": "https://api.github.com/users/hellow554/followers", "following_url": "https://api.github.com/users/hellow554/following{/other_user}", "gists_url": "https://api.github.com/users/hellow554/gists{/gist_id}", "starred_url": "https://api.github.com/users/hellow554/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hellow554/subscriptions", "organizations_url": "https://api.github.com/users/hellow554/orgs", "repos_url": "https://api.github.com/users/hellow554/repos", "events_url": "https://api.github.com/users/hellow554/events{/privacy}", "received_events_url": "https://api.github.com/users/hellow554/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "019dfb950252e5df05ac2fc2e7fc9d0197c19619", "url": "https://api.github.com/repos/rust-lang/rust/commits/019dfb950252e5df05ac2fc2e7fc9d0197c19619", "html_url": "https://github.com/rust-lang/rust/commit/019dfb950252e5df05ac2fc2e7fc9d0197c19619"}], "stats": {"total": 42, "additions": 30, "deletions": 12}, "files": [{"sha": "5ea989aa684be9d3cbaee7b313a7f5ed6213cf19", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c0808998481402cb1cd502ad6aa54e253840efc6/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0808998481402cb1cd502ad6aa54e253840efc6/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=c0808998481402cb1cd502ad6aa54e253840efc6", "patch": "@@ -2190,7 +2190,7 @@ const TRAIT_METHODS: [ShouldImplTraitCase; 30] = [\n ];\n \n #[rustfmt::skip]\n-const PATTERN_METHODS: [(&str, usize); 17] = [\n+const PATTERN_METHODS: [(&str, usize); 19] = [\n     (\"contains\", 1),\n     (\"starts_with\", 1),\n     (\"ends_with\", 1),\n@@ -2206,6 +2206,8 @@ const PATTERN_METHODS: [(&str, usize); 17] = [\n     (\"rmatches\", 1),\n     (\"match_indices\", 1),\n     (\"rmatch_indices\", 1),\n+    (\"strip_prefix\", 1),\n+    (\"strip_suffix\", 1),\n     (\"trim_start_matches\", 1),\n     (\"trim_end_matches\", 1),\n ];"}, {"sha": "fcbe9af9f5616c177b860960e5276fd2e735b86e", "filename": "tests/ui/single_char_pattern.fixed", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_char_pattern.fixed?ref=c0808998481402cb1cd502ad6aa54e253840efc6", "patch": "@@ -33,6 +33,8 @@ fn main() {\n     x.rmatch_indices('x');\n     x.trim_start_matches('x');\n     x.trim_end_matches('x');\n+    x.strip_prefix('x');\n+    x.strip_suffix('x');\n     // Make sure we escape characters correctly.\n     x.split('\\n');\n     x.split('\\'');"}, {"sha": "b8bc20f4070fc4a91f797a8d3d6dc51c85223f6b", "filename": "tests/ui/single_char_pattern.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_char_pattern.rs?ref=c0808998481402cb1cd502ad6aa54e253840efc6", "patch": "@@ -33,6 +33,8 @@ fn main() {\n     x.rmatch_indices(\"x\");\n     x.trim_start_matches(\"x\");\n     x.trim_end_matches(\"x\");\n+    x.strip_prefix(\"x\");\n+    x.strip_suffix(\"x\");\n     // Make sure we escape characters correctly.\n     x.split(\"\\n\");\n     x.split(\"'\");"}, {"sha": "6d94d8a34e39095dfe8c4086e5c8e05929d7e0ac", "filename": "tests/ui/single_char_pattern.stderr", "status": "modified", "additions": 23, "deletions": 11, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c0808998481402cb1cd502ad6aa54e253840efc6/tests%2Fui%2Fsingle_char_pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsingle_char_pattern.stderr?ref=c0808998481402cb1cd502ad6aa54e253840efc6", "patch": "@@ -121,64 +121,76 @@ LL |     x.trim_end_matches(\"x\");\n    |                        ^^^ help: try using a `char` instead: `'x'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:37:13\n+  --> $DIR/single_char_pattern.rs:36:20\n+   |\n+LL |     x.strip_prefix(\"x\");\n+   |                    ^^^ help: try using a `char` instead: `'x'`\n+\n+error: single-character string constant used as pattern\n+  --> $DIR/single_char_pattern.rs:37:20\n+   |\n+LL |     x.strip_suffix(\"x\");\n+   |                    ^^^ help: try using a `char` instead: `'x'`\n+\n+error: single-character string constant used as pattern\n+  --> $DIR/single_char_pattern.rs:39:13\n    |\n LL |     x.split(\"/n\");\n    |             ^^^^ help: try using a `char` instead: `'/n'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:38:13\n+  --> $DIR/single_char_pattern.rs:40:13\n    |\n LL |     x.split(\"'\");\n    |             ^^^ help: try using a `char` instead: `'/''`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:39:13\n+  --> $DIR/single_char_pattern.rs:41:13\n    |\n LL |     x.split(\"/'\");\n    |             ^^^^ help: try using a `char` instead: `'/''`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:44:31\n+  --> $DIR/single_char_pattern.rs:46:31\n    |\n LL |     x.replace(\";\", \",\").split(\",\"); // issue #2978\n    |                               ^^^ help: try using a `char` instead: `','`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:45:19\n+  --> $DIR/single_char_pattern.rs:47:19\n    |\n LL |     x.starts_with(\"/x03\"); // issue #2996\n    |                   ^^^^^^ help: try using a `char` instead: `'/x03'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:52:13\n+  --> $DIR/single_char_pattern.rs:54:13\n    |\n LL |     x.split(r\"a\");\n    |             ^^^^ help: try using a `char` instead: `'a'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:53:13\n+  --> $DIR/single_char_pattern.rs:55:13\n    |\n LL |     x.split(r#\"a\"#);\n    |             ^^^^^^ help: try using a `char` instead: `'a'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:54:13\n+  --> $DIR/single_char_pattern.rs:56:13\n    |\n LL |     x.split(r###\"a\"###);\n    |             ^^^^^^^^^^ help: try using a `char` instead: `'a'`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:55:13\n+  --> $DIR/single_char_pattern.rs:57:13\n    |\n LL |     x.split(r###\"'\"###);\n    |             ^^^^^^^^^^ help: try using a `char` instead: `'/''`\n \n error: single-character string constant used as pattern\n-  --> $DIR/single_char_pattern.rs:56:13\n+  --> $DIR/single_char_pattern.rs:58:13\n    |\n LL |     x.split(r###\"#\"###);\n    |             ^^^^^^^^^^ help: try using a `char` instead: `'#'`\n \n-error: aborting due to 30 previous errors\n+error: aborting due to 32 previous errors\n "}]}