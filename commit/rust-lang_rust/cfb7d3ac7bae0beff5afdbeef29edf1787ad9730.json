{"sha": "cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmYjdkM2FjN2JhZTBiZWZmNWFmZGJlZWYyOWVkZjE3ODdhZDk3MzA=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-07-26T13:23:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-26T13:23:17Z"}, "message": "Merge #9699\n\n9699: fix: Fix generic_arg not parsing opt_generic_arg_list properly in arg lists r=Veykril a=Veykril\n\nFixes #9697\r\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>", "tree": {"sha": "31e6314d21c2595366715e59e6421316f0bd8a50", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31e6314d21c2595366715e59e6421316f0bd8a50"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg/rdFCRBK7hj4Ov3rIwAAXdkIAAavRWCdOrh2CVO2TRGLOGzH\n6Q+xXl1RpgHoWQaqNS6zQOVh8/KqltQuVao8ROgFyg9n9gznP+94rbS5aBthFqRl\nuBgmC/6jlEolUP1PGlyfv4DusbmjWjwyfPawo0MISa1ZndYv8htHypsExzfol8UQ\nmspH2gRQJmH2PTezUKfY7RFdSf4PCiZQjtv3OHaJmkOntCLTG8n7lyHnWFsdnfxv\nMN93OOjS3HXCvKEyK5pR2We8J0Lkc7ovLBeBjYq4/FD/VFdNE+UGepfZdsdTCL6q\nk8j/mjvEIZJfNNW0iBH1XKbLaFuYKT4TFy2u/npec2RqMENiqR4EAtoscTKI8cE=\n=LCbS\n-----END PGP SIGNATURE-----\n", "payload": "tree 31e6314d21c2595366715e59e6421316f0bd8a50\nparent d571ca814e4efa64bc905df1789a2cf03beb6f62\nparent f43cd562bc09b1ec38b75e2d380883423464b9ee\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1627305797 +0000\ncommitter GitHub <noreply@github.com> 1627305797 +0000\n\nMerge #9699\n\n9699: fix: Fix generic_arg not parsing opt_generic_arg_list properly in arg lists r=Veykril a=Veykril\n\nFixes #9697\r\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "html_url": "https://github.com/rust-lang/rust/commit/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d571ca814e4efa64bc905df1789a2cf03beb6f62", "url": "https://api.github.com/repos/rust-lang/rust/commits/d571ca814e4efa64bc905df1789a2cf03beb6f62", "html_url": "https://github.com/rust-lang/rust/commit/d571ca814e4efa64bc905df1789a2cf03beb6f62"}, {"sha": "f43cd562bc09b1ec38b75e2d380883423464b9ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/f43cd562bc09b1ec38b75e2d380883423464b9ee", "html_url": "https://github.com/rust-lang/rust/commit/f43cd562bc09b1ec38b75e2d380883423464b9ee"}], "stats": {"total": 148, "additions": 81, "deletions": 67}, "files": [{"sha": "f09a28c443acea3caf1f0c820590253f13567dcb", "filename": "crates/parser/src/grammar/type_args.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Ftype_args.rs?ref=cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "patch": "@@ -65,15 +65,13 @@ fn generic_arg(p: &mut Parser) {\n             m.complete(p, LIFETIME_ARG);\n         }\n         // test associated_type_bounds\n-        // fn print_all<T: Iterator<Item, Item::Item, Item: Display, Item<'a> = Item>>(printables: T) {}\n+        // fn print_all<T: Iterator<Item, Item::Item, Item::<true>, Item: Display, Item<'a> = Item>>(printables: T) {}\n         IDENT if [T![<], T![=], T![:]].contains(&p.nth(1)) => {\n             let path_ty = p.start();\n             let path = p.start();\n             let path_seg = p.start();\n             name_ref(p);\n-            if p.current() == T![<] {\n-                opt_generic_arg_list(p, false);\n-            }\n+            opt_generic_arg_list(p, false);\n             match p.current() {\n                 // NameRef<...> =\n                 T![=] => {\n@@ -89,6 +87,7 @@ fn generic_arg(p: &mut Parser) {\n                     // NameRef::, this is a path type\n                     path_seg.complete(p, PATH_SEGMENT);\n                     let qual = path.complete(p, PATH);\n+                    opt_generic_arg_list(p, false);\n                     paths::type_path_for_qualifier(p, qual);\n                     path_ty.complete(p, PATH_TYPE);\n                     m.complete(p, TYPE_ARG);"}, {"sha": "a34aff3cbed7411f753b7ce3e79afb1bd21af34c", "filename": "crates/syntax/test_data/parser/inline/ok/0138_associated_type_bounds.rast", "status": "modified", "additions": 77, "deletions": 62, "changes": 139, "blob_url": "https://github.com/rust-lang/rust/blob/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rast", "raw_url": "https://github.com/rust-lang/rust/raw/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rast?ref=cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "patch": "@@ -1,24 +1,24 @@\n-SOURCE_FILE@0..94\n-  FN@0..93\n+SOURCE_FILE@0..108\n+  FN@0..107\n     FN_KW@0..2 \"fn\"\n     WHITESPACE@2..3 \" \"\n     NAME@3..12\n       IDENT@3..12 \"print_all\"\n-    GENERIC_PARAM_LIST@12..75\n+    GENERIC_PARAM_LIST@12..89\n       L_ANGLE@12..13 \"<\"\n-      TYPE_PARAM@13..74\n+      TYPE_PARAM@13..88\n         NAME@13..14\n           IDENT@13..14 \"T\"\n         COLON@14..15 \":\"\n         WHITESPACE@15..16 \" \"\n-        TYPE_BOUND_LIST@16..74\n-          TYPE_BOUND@16..74\n-            PATH_TYPE@16..74\n-              PATH@16..74\n-                PATH_SEGMENT@16..74\n+        TYPE_BOUND_LIST@16..88\n+          TYPE_BOUND@16..88\n+            PATH_TYPE@16..88\n+              PATH@16..88\n+                PATH_SEGMENT@16..88\n                   NAME_REF@16..24\n                     IDENT@16..24 \"Iterator\"\n-                  GENERIC_ARG_LIST@24..74\n+                  GENERIC_ARG_LIST@24..88\n                     L_ANGLE@24..25 \"<\"\n                     TYPE_ARG@25..29\n                       PATH_TYPE@25..29\n@@ -41,55 +41,70 @@ SOURCE_FILE@0..94\n                               IDENT@37..41 \"Item\"\n                     COMMA@41..42 \",\"\n                     WHITESPACE@42..43 \" \"\n-                    ASSOC_TYPE_ARG@43..56\n-                      NAME_REF@43..47\n-                        IDENT@43..47 \"Item\"\n-                      COLON@47..48 \":\"\n-                      WHITESPACE@48..49 \" \"\n-                      TYPE_BOUND_LIST@49..56\n-                        TYPE_BOUND@49..56\n-                          PATH_TYPE@49..56\n-                            PATH@49..56\n-                              PATH_SEGMENT@49..56\n-                                NAME_REF@49..56\n-                                  IDENT@49..56 \"Display\"\n-                    COMMA@56..57 \",\"\n-                    WHITESPACE@57..58 \" \"\n-                    ASSOC_TYPE_ARG@58..73\n-                      NAME_REF@58..62\n-                        IDENT@58..62 \"Item\"\n-                      GENERIC_ARG_LIST@62..66\n-                        L_ANGLE@62..63 \"<\"\n-                        LIFETIME_ARG@63..65\n-                          LIFETIME@63..65\n-                            LIFETIME_IDENT@63..65 \"'a\"\n-                        R_ANGLE@65..66 \">\"\n-                      WHITESPACE@66..67 \" \"\n-                      EQ@67..68 \"=\"\n-                      WHITESPACE@68..69 \" \"\n-                      PATH_TYPE@69..73\n-                        PATH@69..73\n-                          PATH_SEGMENT@69..73\n-                            NAME_REF@69..73\n-                              IDENT@69..73 \"Item\"\n-                    R_ANGLE@73..74 \">\"\n-      R_ANGLE@74..75 \">\"\n-    PARAM_LIST@75..90\n-      L_PAREN@75..76 \"(\"\n-      PARAM@76..89\n-        IDENT_PAT@76..86\n-          NAME@76..86\n-            IDENT@76..86 \"printables\"\n-        COLON@86..87 \":\"\n-        WHITESPACE@87..88 \" \"\n-        PATH_TYPE@88..89\n-          PATH@88..89\n-            PATH_SEGMENT@88..89\n-              NAME_REF@88..89\n-                IDENT@88..89 \"T\"\n-      R_PAREN@89..90 \")\"\n-    WHITESPACE@90..91 \" \"\n-    BLOCK_EXPR@91..93\n-      L_CURLY@91..92 \"{\"\n-      R_CURLY@92..93 \"}\"\n-  WHITESPACE@93..94 \"\\n\"\n+                    TYPE_ARG@43..55\n+                      PATH_TYPE@43..55\n+                        PATH@43..55\n+                          PATH_SEGMENT@43..55\n+                            NAME_REF@43..47\n+                              IDENT@43..47 \"Item\"\n+                            GENERIC_ARG_LIST@47..55\n+                              COLON2@47..49 \"::\"\n+                              L_ANGLE@49..50 \"<\"\n+                              CONST_ARG@50..54\n+                                LITERAL@50..54\n+                                  TRUE_KW@50..54 \"true\"\n+                              R_ANGLE@54..55 \">\"\n+                    COMMA@55..56 \",\"\n+                    WHITESPACE@56..57 \" \"\n+                    ASSOC_TYPE_ARG@57..70\n+                      NAME_REF@57..61\n+                        IDENT@57..61 \"Item\"\n+                      COLON@61..62 \":\"\n+                      WHITESPACE@62..63 \" \"\n+                      TYPE_BOUND_LIST@63..70\n+                        TYPE_BOUND@63..70\n+                          PATH_TYPE@63..70\n+                            PATH@63..70\n+                              PATH_SEGMENT@63..70\n+                                NAME_REF@63..70\n+                                  IDENT@63..70 \"Display\"\n+                    COMMA@70..71 \",\"\n+                    WHITESPACE@71..72 \" \"\n+                    ASSOC_TYPE_ARG@72..87\n+                      NAME_REF@72..76\n+                        IDENT@72..76 \"Item\"\n+                      GENERIC_ARG_LIST@76..80\n+                        L_ANGLE@76..77 \"<\"\n+                        LIFETIME_ARG@77..79\n+                          LIFETIME@77..79\n+                            LIFETIME_IDENT@77..79 \"'a\"\n+                        R_ANGLE@79..80 \">\"\n+                      WHITESPACE@80..81 \" \"\n+                      EQ@81..82 \"=\"\n+                      WHITESPACE@82..83 \" \"\n+                      PATH_TYPE@83..87\n+                        PATH@83..87\n+                          PATH_SEGMENT@83..87\n+                            NAME_REF@83..87\n+                              IDENT@83..87 \"Item\"\n+                    R_ANGLE@87..88 \">\"\n+      R_ANGLE@88..89 \">\"\n+    PARAM_LIST@89..104\n+      L_PAREN@89..90 \"(\"\n+      PARAM@90..103\n+        IDENT_PAT@90..100\n+          NAME@90..100\n+            IDENT@90..100 \"printables\"\n+        COLON@100..101 \":\"\n+        WHITESPACE@101..102 \" \"\n+        PATH_TYPE@102..103\n+          PATH@102..103\n+            PATH_SEGMENT@102..103\n+              NAME_REF@102..103\n+                IDENT@102..103 \"T\"\n+      R_PAREN@103..104 \")\"\n+    WHITESPACE@104..105 \" \"\n+    BLOCK_EXPR@105..107\n+      L_CURLY@105..106 \"{\"\n+      R_CURLY@106..107 \"}\"\n+  WHITESPACE@107..108 \"\\n\""}, {"sha": "0f7a2d1608308b116bbdcef530d0bcc86b91358a", "filename": "crates/syntax/test_data/parser/inline/ok/0138_associated_type_bounds.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cfb7d3ac7bae0beff5afdbeef29edf1787ad9730/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0138_associated_type_bounds.rs?ref=cfb7d3ac7bae0beff5afdbeef29edf1787ad9730", "patch": "@@ -1 +1 @@\n-fn print_all<T: Iterator<Item, Item::Item, Item: Display, Item<'a> = Item>>(printables: T) {}\n+fn print_all<T: Iterator<Item, Item::Item, Item::<true>, Item: Display, Item<'a> = Item>>(printables: T) {}"}]}