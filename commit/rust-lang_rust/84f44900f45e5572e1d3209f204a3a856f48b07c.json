{"sha": "84f44900f45e5572e1d3209f204a3a856f48b07c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0ZjQ0OTAwZjQ1ZTU1NzJlMWQzMjA5ZjIwNGEzYTg1NmY0OGIwN2M=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2021-04-04T13:35:19Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2021-04-04T13:35:19Z"}, "message": "also test old getrandom", "tree": {"sha": "acb55d674409f5d1dedbc6ed2cdf871a2ad3376b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/acb55d674409f5d1dedbc6ed2cdf871a2ad3376b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84f44900f45e5572e1d3209f204a3a856f48b07c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84f44900f45e5572e1d3209f204a3a856f48b07c", "html_url": "https://github.com/rust-lang/rust/commit/84f44900f45e5572e1d3209f204a3a856f48b07c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84f44900f45e5572e1d3209f204a3a856f48b07c/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c41b8b1cbde7c0af4802d44f28921c77fbbb7f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c41b8b1cbde7c0af4802d44f28921c77fbbb7f9", "html_url": "https://github.com/rust-lang/rust/commit/9c41b8b1cbde7c0af4802d44f28921c77fbbb7f9"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "45ec195843dc8f4c3014241158946a72cb62726d", "filename": "test-cargo-miri/Cargo.lock", "status": "modified", "additions": 21, "deletions": 3, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.lock?ref=84f44900f45e5572e1d3209f204a3a856f48b07c", "patch": "@@ -14,7 +14,8 @@ version = \"0.1.0\"\n dependencies = [\n  \"byteorder\",\n  \"cdylib\",\n- \"getrandom\",\n+ \"getrandom 0.1.16\",\n+ \"getrandom 0.2.2\",\n  \"issue_1567\",\n  \"issue_1691\",\n  \"issue_1705\",\n@@ -35,6 +36,17 @@ version = \"1.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd\"\n \n+[[package]]\n+name = \"getrandom\"\n+version = \"0.1.16\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"8fc3cb4d91f53b50155bdcfd23f6a4c39ae1969c2ae85982b135750cccaf5fce\"\n+dependencies = [\n+ \"cfg-if\",\n+ \"libc\",\n+ \"wasi 0.9.0+wasi-snapshot-preview1\",\n+]\n+\n [[package]]\n name = \"getrandom\"\n version = \"0.2.2\"\n@@ -43,7 +55,7 @@ checksum = \"c9495705279e7140bf035dde1f6e750c162df8b625267cd52cc44e0b156732c8\"\n dependencies = [\n  \"cfg-if\",\n  \"libc\",\n- \"wasi\",\n+ \"wasi 0.10.2+wasi-snapshot-preview1\",\n ]\n \n [[package]]\n@@ -141,7 +153,7 @@ version = \"0.6.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"34cf66eb183df1c5876e2dcf6b13d57340741e8dc255b48e40a26de954d06ae7\"\n dependencies = [\n- \"getrandom\",\n+ \"getrandom 0.2.2\",\n ]\n \n [[package]]\n@@ -188,6 +200,12 @@ version = \"0.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"f7fe0bb3479651439c9112f72b6c505038574c9fbb575ed1bf3b797fa39dd564\"\n \n+[[package]]\n+name = \"wasi\"\n+version = \"0.9.0+wasi-snapshot-preview1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"cccddf32554fecc6acb585f82a32a72e28b48f8c4c1883ddfeeeaa96f7d8e519\"\n+\n [[package]]\n name = \"wasi\"\n version = \"0.10.2+wasi-snapshot-preview1\""}, {"sha": "08470539727ab3f6349d2383b2c82a0b156cf50c", "filename": "test-cargo-miri/Cargo.toml", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.toml?ref=84f44900f45e5572e1d3209f204a3a856f48b07c", "patch": "@@ -16,7 +16,8 @@ issue_1705 = { path = \"issue-1705\" }\n \n [dev-dependencies]\n rand = { version = \"0.8\", features = [\"small_rng\"] }\n-getrandom = { version = \"0.2\" }\n+getrandom_1 = { package = \"getrandom\", version = \"0.1\" }\n+getrandom_2 = { package = \"getrandom\", version = \"0.2\" }\n serde_derive = \"1.0\" # not actually used, but exercises some unique code path (`--extern` .so file)\n \n [lib]"}, {"sha": "f0ff10ff6c0d893d34bd0fe0fc5f0295be7527b2", "filename": "test-cargo-miri/tests/test.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2Ftests%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84f44900f45e5572e1d3209f204a3a856f48b07c/test-cargo-miri%2Ftests%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftests%2Ftest.rs?ref=84f44900f45e5572e1d3209f204a3a856f48b07c", "patch": "@@ -24,9 +24,10 @@ fn does_not_work_on_miri() {\n \n #[test]\n fn entropy_rng() {\n-    // Test `getrandom` directly.\n+    // Test `getrandom` directly (in multiple different versions).\n     let mut data = vec![0; 16];\n-    getrandom::getrandom(&mut data).unwrap();\n+    getrandom_1::getrandom(&mut data).unwrap();\n+    getrandom_2::getrandom(&mut data).unwrap();\n \n     // Try seeding with \"real\" entropy.\n     let mut rng = SmallRng::from_entropy();"}]}