{"sha": "b691c521bb079dda26b9d37d00662fafeb87f783", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2OTFjNTIxYmIwNzlkZGEyNmI5ZDM3ZDAwNjYyZmFmZWI4N2Y3ODM=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-06T08:25:41Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-06T12:52:32Z"}, "message": "Rollup merge of #48754 - leodasvacas:while-let-all-the-things, r=rkruppe\n\nwhile let all the things", "tree": {"sha": "5c297b7f1da341d4169d92835b6c548a7c304083", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c297b7f1da341d4169d92835b6c548a7c304083"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b691c521bb079dda26b9d37d00662fafeb87f783", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlqejxEACgkQ/vbIBR0O\nATxCew/+NH7x8q0ycPBQRzONmOn1ZdNVNiYGQvrfyHnVKabqL9/R1WFh7p46Gaqx\ndRnOQaf7rQv017V7M6YkPO9uolCtVkiAY71/mRK3q98qibagA5aSgAAPxFOqRtCT\n6gHIH7kQfLsR94OMczsbA41IyaVl587dhFlqRZn2EKLLNiwKOpyxhwDPDZqEFXUk\nr3J4FsN4Ohz2KpcBT5LNQfA7k+xs+D9fLMt5l9ui765eLpEx4kcoKzEvZ2SMWFaE\nO9UF2g2M2RNESAnT1tnRlCQS6b2JeTdnZuNJarPUoA/cxBN6Rc96vcRPjQ/BOur9\nfFyDjXJNCGBH41fACD5opReiZUseHZYwwiE7McenXYxKumxZ2gnVCfBA8Gx37Xvx\njys8+ikKVNnOtQ6YMpzdj/NUTQSq0nXOaq2cj8Qqo121EOueTDKliaeS2p+QXD69\nsoUMuldi0J6mvo6V1/HAc7cGuX/ZN/J9SzqTIGJ4Zw7GdjZlX/YFD+ZG5cwMacNo\nY+xcQWx5HBit73LSkuDdxA75nCqA6KmZxBinNEulH8qg0O6a2tQMslf68AVIhUCY\nEJ35r2F/jbJzNkKC+/1diaZFtVnVjlYrW5qsB692YRvk1ctrvmRfPwdPd5qS8ghm\noxq9bVhaIBb7XmApNTW7d+qZFD0Kgs3qbIZfmTsPSES4aiCNWYI=\n=RYtt\n-----END PGP SIGNATURE-----", "payload": "tree 5c297b7f1da341d4169d92835b6c548a7c304083\nparent 7dc3f17ef999940a4337a5ea5823acb5c3da65e4\nparent 2e7e68b76223b9f14b54852584a5334f33a8798d\nauthor kennytm <kennytm@gmail.com> 1520324741 +0800\ncommitter kennytm <kennytm@gmail.com> 1520340752 +0800\n\nRollup merge of #48754 - leodasvacas:while-let-all-the-things, r=rkruppe\n\nwhile let all the things\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b691c521bb079dda26b9d37d00662fafeb87f783", "html_url": "https://github.com/rust-lang/rust/commit/b691c521bb079dda26b9d37d00662fafeb87f783", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b691c521bb079dda26b9d37d00662fafeb87f783/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7dc3f17ef999940a4337a5ea5823acb5c3da65e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/7dc3f17ef999940a4337a5ea5823acb5c3da65e4", "html_url": "https://github.com/rust-lang/rust/commit/7dc3f17ef999940a4337a5ea5823acb5c3da65e4"}, {"sha": "2e7e68b76223b9f14b54852584a5334f33a8798d", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e7e68b76223b9f14b54852584a5334f33a8798d", "html_url": "https://github.com/rust-lang/rust/commit/2e7e68b76223b9f14b54852584a5334f33a8798d"}], "stats": {"total": 70, "additions": 20, "deletions": 50}, "files": [{"sha": "d91aa3a385193b25924e54f18c7fae9037c212af", "filename": "src/librustc/hir/print.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc%2Fhir%2Fprint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc%2Fhir%2Fprint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fprint.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -2208,13 +2208,8 @@ impl<'a> State<'a> {\n         if self.next_comment().is_none() {\n             self.s.hardbreak()?;\n         }\n-        loop {\n-            match self.next_comment() {\n-                Some(ref cmnt) => {\n-                    self.print_comment(cmnt)?;\n-                }\n-                _ => break,\n-            }\n+        while let Some(ref cmnt) = self.next_comment() {\n+            self.print_comment(cmnt)?\n         }\n         Ok(())\n     }"}, {"sha": "5658b5b6832915ce29946bdb96fe9b85364c2122", "filename": "src/librustc/middle/reachable.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc%2Fmiddle%2Freachable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc%2Fmiddle%2Freachable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Freachable.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -206,11 +206,7 @@ impl<'a, 'tcx> ReachableContext<'a, 'tcx> {\n     // Step 2: Mark all symbols that the symbols on the worklist touch.\n     fn propagate(&mut self) {\n         let mut scanned = FxHashSet();\n-        loop {\n-            let search_item = match self.worklist.pop() {\n-                Some(item) => item,\n-                None => break,\n-            };\n+        while let Some(search_item) = self.worklist.pop() {\n             if !scanned.insert(search_item) {\n                 continue\n             }"}, {"sha": "42a17d33fa6f5c795562c783cd5bacd882e3f666", "filename": "src/librustc_data_structures/obligation_forest/mod.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc_data_structures%2Fobligation_forest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibrustc_data_structures%2Fobligation_forest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fobligation_forest%2Fmod.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -415,13 +415,7 @@ impl<O: ForestObligation> ObligationForest<O> {\n             }\n         }\n \n-        loop {\n-            // non-standard `while let` to bypass #6393\n-            let i = match error_stack.pop() {\n-                Some(i) => i,\n-                None => break\n-            };\n-\n+        while let Some(i) = error_stack.pop() {\n             let node = &self.nodes[i];\n \n             match node.state.get() {"}, {"sha": "9fff8b91f96f32f155f8f9378e515e785ee56b1e", "filename": "src/libstd/sys_common/wtf8.rs", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibstd%2Fsys_common%2Fwtf8.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibstd%2Fsys_common%2Fwtf8.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Fwtf8.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -428,20 +428,15 @@ impl fmt::Debug for Wtf8 {\n \n         formatter.write_str(\"\\\"\")?;\n         let mut pos = 0;\n-        loop {\n-            match self.next_surrogate(pos) {\n-                None => break,\n-                Some((surrogate_pos, surrogate)) => {\n-                    write_str_escaped(\n-                        formatter,\n-                        unsafe { str::from_utf8_unchecked(\n-                            &self.bytes[pos .. surrogate_pos]\n-                        )},\n-                    )?;\n-                    write!(formatter, \"\\\\u{{{:x}}}\", surrogate)?;\n-                    pos = surrogate_pos + 3;\n-                }\n-            }\n+        while let Some((surrogate_pos, surrogate)) = self.next_surrogate(pos) {\n+            write_str_escaped(\n+                formatter,\n+                unsafe { str::from_utf8_unchecked(\n+                    &self.bytes[pos .. surrogate_pos]\n+                )},\n+            )?;\n+            write!(formatter, \"\\\\u{{{:x}}}\", surrogate)?;\n+            pos = surrogate_pos + 3;\n         }\n         write_str_escaped(\n             formatter,"}, {"sha": "8fd95aa1ca8612c40e47e63b7298050969c4c0e1", "filename": "src/libsyntax_ext/format.rs", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibsyntax_ext%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibsyntax_ext%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Fformat.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -732,18 +732,13 @@ pub fn expand_preparsed_format_args(ecx: &mut ExtCtxt,\n     let mut parser = parse::Parser::new(fmt_str);\n     let mut pieces = vec![];\n \n-    loop {\n-        match parser.next() {\n-            Some(mut piece) => {\n-                if !parser.errors.is_empty() {\n-                    break;\n-                }\n-                cx.verify_piece(&piece);\n-                cx.resolve_name_inplace(&mut piece);\n-                pieces.push(piece);\n-            }\n-            None => break,\n+    while let Some(mut piece) = parser.next() {\n+        if !parser.errors.is_empty() {\n+            break;\n         }\n+        cx.verify_piece(&piece);\n+        cx.resolve_name_inplace(&mut piece);\n+        pieces.push(piece);\n     }\n \n     let numbered_position_args = pieces.iter().any(|arg: &parse::Piece| {"}, {"sha": "ed9eb5d5c9261fb6d0a313fc2c723e633b77a7f6", "filename": "src/libsyntax_pos/lib.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibsyntax_pos%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Flibsyntax_pos%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_pos%2Flib.rs?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -322,12 +322,7 @@ impl Span {\n     pub fn macro_backtrace(mut self) -> Vec<MacroBacktrace> {\n         let mut prev_span = DUMMY_SP;\n         let mut result = vec![];\n-        loop {\n-            let info = match self.ctxt().outer().expn_info() {\n-                Some(info) => info,\n-                None => break,\n-            };\n-\n+        while let Some(info) = self.ctxt().outer().expn_info() {\n             let (pre, post) = match info.callee.format {\n                 ExpnFormat::MacroAttribute(..) => (\"#[\", \"]\"),\n                 ExpnFormat::MacroBang(..) => (\"\", \"!\"),"}]}