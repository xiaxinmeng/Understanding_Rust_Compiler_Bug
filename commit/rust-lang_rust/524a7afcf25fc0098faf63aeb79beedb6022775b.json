{"sha": "524a7afcf25fc0098faf63aeb79beedb6022775b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyNGE3YWZjZjI1ZmMwMDk4ZmFmNjNhZWI3OWJlZWRiNjAyMjc3NWI=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-16T06:57:01Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-16T14:40:49Z"}, "message": "Rollup merge of #59201 - lambda:remove-repr-simd-isize-usize-restriction, r=alexcrichton\n\nRemove restriction on isize/usize in repr(simd)\n\nAs discussed in #55078, there's no known reason for this restriction.\n\nIt's unlikely that repr(simd) will be stabilized in its current form, but\nmight as well remove some restrictions on it.\n\nThis removes the branch in `is_machine` which returns false for these types.\n`is_machine` is only used for the repr(simd) type validation check.", "tree": {"sha": "c50e7a2308386621815b0f6f6bd23b7585e1e4e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c50e7a2308386621815b0f6f6bd23b7585e1e4e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/524a7afcf25fc0098faf63aeb79beedb6022775b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlyNCvIACgkQ/vbIBR0O\nATxEhw//dMXy2k9yUG2jApDjWKkEn5AevxIPaax0AfQiJcni0C6HmlJmOnfHt+tK\nqvHBuT3uI3yAoBEl1o/imAPKYNP5LzWfHnPSoKpbbjJfrWuUK6pMxy2gy9VSqLAu\nxHB1okIF+zTf1FLgqnDFhsHpjMebgjQf7cVcrTtNbak2bjTqTEy9j20MoHhe+KA5\nIwGQ2ZwhmQixaetc2b+EWa/SA+UFaUF1o4g9ZSOr3272FFhX41M8HffRh3fMxjjP\nxlO2Q5kBOEi+Dm8/zhMsvaUBK8hP8VznuL4IyuxZURVZf9kbzrHEvM/suB2T6HDU\n2zG3kaMQJ85Mz8CrFcXu/Tox5tuCHBsj8g4JbZ8OXcWU6gLITiOnz01VK06Nfeum\nJcRsEpIVQNqDtxh33fIK5Qjb6WHtLiRlrKdF9ai6uRQcSW2y0wRO9MMlZN0nxAIo\nhQYVEMI0EIGP+pIt97WkJEZJ/J0kuj+lRUgeeDnnZlqdFPyVX3M/nuw1JFJinXmD\nAaMaVaq3z8oj7eJfuCuJLUgTjyEOQaHpOcdEkYReqgjTK7taFdmiWcaiMVYOpfzf\nfEh13indvBC/8VR8Kl21eferjuwD7AjM9p9SM6QyQxiOl6ouxBrXCMNw6hyW/Hj8\nY3SKgVX2r66OMYdZS7jUj8sofvlSL6cCIoRMo46zjI4tJRNTGOI=\n=p7ip\n-----END PGP SIGNATURE-----", "payload": "tree c50e7a2308386621815b0f6f6bd23b7585e1e4e1\nparent 0b2c3484f98838748d8ca785484b8132bd945595\nparent 5303c1b90b12c0edb3fbadf96f15edf93fb69155\nauthor kennytm <kennytm@gmail.com> 1552719421 +0800\ncommitter kennytm <kennytm@gmail.com> 1552747249 +0800\n\nRollup merge of #59201 - lambda:remove-repr-simd-isize-usize-restriction, r=alexcrichton\n\nRemove restriction on isize/usize in repr(simd)\n\nAs discussed in #55078, there's no known reason for this restriction.\n\nIt's unlikely that repr(simd) will be stabilized in its current form, but\nmight as well remove some restrictions on it.\n\nThis removes the branch in `is_machine` which returns false for these types.\n`is_machine` is only used for the repr(simd) type validation check.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/524a7afcf25fc0098faf63aeb79beedb6022775b", "html_url": "https://github.com/rust-lang/rust/commit/524a7afcf25fc0098faf63aeb79beedb6022775b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/524a7afcf25fc0098faf63aeb79beedb6022775b/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b2c3484f98838748d8ca785484b8132bd945595", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b2c3484f98838748d8ca785484b8132bd945595", "html_url": "https://github.com/rust-lang/rust/commit/0b2c3484f98838748d8ca785484b8132bd945595"}, {"sha": "5303c1b90b12c0edb3fbadf96f15edf93fb69155", "url": "https://api.github.com/repos/rust-lang/rust/commits/5303c1b90b12c0edb3fbadf96f15edf93fb69155", "html_url": "https://github.com/rust-lang/rust/commit/5303c1b90b12c0edb3fbadf96f15edf93fb69155"}], "stats": {"total": 46, "additions": 34, "deletions": 12}, "files": [{"sha": "7b6a51c01845980bc9764e623050f0e702efa972", "filename": "src/librustc/ty/sty.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Flibrustc%2Fty%2Fsty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Flibrustc%2Fty%2Fsty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fsty.rs?ref=524a7afcf25fc0098faf63aeb79beedb6022775b", "patch": "@@ -1911,7 +1911,6 @@ impl<'a, 'gcx, 'tcx> TyS<'tcx> {\n \n     pub fn is_machine(&self) -> bool {\n         match self.sty {\n-            Int(ast::IntTy::Isize) | Uint(ast::UintTy::Usize) => false,\n             Int(..) | Uint(..) | Float(..) => true,\n             _ => false,\n         }"}, {"sha": "556013788c33557c0b81445d0b3d5d235d1dd5a5", "filename": "src/test/run-pass/simd/simd-size-align.rs", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Frun-pass%2Fsimd%2Fsimd-size-align.rs", "raw_url": "https://github.com/rust-lang/rust/raw/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Frun-pass%2Fsimd%2Fsimd-size-align.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsimd%2Fsimd-size-align.rs?ref=524a7afcf25fc0098faf63aeb79beedb6022775b", "patch": "@@ -37,6 +37,22 @@ fn main() {\n     check::<f32x6>();\n     check::<f32x7>();\n     check::<f32x8>();\n+\n+    check::<usizex2>();\n+    check::<usizex3>();\n+    check::<usizex4>();\n+    check::<usizex5>();\n+    check::<usizex6>();\n+    check::<usizex7>();\n+    check::<usizex8>();\n+\n+    check::<isizex2>();\n+    check::<isizex3>();\n+    check::<isizex4>();\n+    check::<isizex5>();\n+    check::<isizex6>();\n+    check::<isizex7>();\n+    check::<isizex8>();\n }\n \n #[repr(simd)] struct u8x2(u8, u8);\n@@ -62,3 +78,19 @@ fn main() {\n #[repr(simd)] struct f32x6(f32, f32, f32, f32, f32, f32);\n #[repr(simd)] struct f32x7(f32, f32, f32, f32, f32, f32, f32);\n #[repr(simd)] struct f32x8(f32, f32, f32, f32, f32, f32, f32, f32);\n+\n+#[repr(simd)] struct usizex2(usize, usize);\n+#[repr(simd)] struct usizex3(usize, usize, usize);\n+#[repr(simd)] struct usizex4(usize, usize, usize, usize);\n+#[repr(simd)] struct usizex5(usize, usize, usize, usize, usize);\n+#[repr(simd)] struct usizex6(usize, usize, usize, usize, usize, usize);\n+#[repr(simd)] struct usizex7(usize, usize, usize, usize, usize, usize, usize);\n+#[repr(simd)] struct usizex8(usize, usize, usize, usize, usize, usize, usize, usize);\n+\n+#[repr(simd)] struct isizex2(isize, isize);\n+#[repr(simd)] struct isizex3(isize, isize, isize);\n+#[repr(simd)] struct isizex4(isize, isize, isize, isize);\n+#[repr(simd)] struct isizex5(isize, isize, isize, isize, isize);\n+#[repr(simd)] struct isizex6(isize, isize, isize, isize, isize, isize);\n+#[repr(simd)] struct isizex7(isize, isize, isize, isize, isize, isize, isize);\n+#[repr(simd)] struct isizex8(isize, isize, isize, isize, isize, isize, isize, isize);"}, {"sha": "9e4b7e7656055f1ca685ec7c026a671713d74df3", "filename": "src/test/ui/simd-type.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Fui%2Fsimd-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Fui%2Fsimd-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd-type.rs?ref=524a7afcf25fc0098faf63aeb79beedb6022775b", "patch": "@@ -7,7 +7,4 @@ struct empty; //~ ERROR SIMD vector cannot be empty\n #[repr(simd)]\n struct i64f64(i64, f64); //~ ERROR SIMD vector should be homogeneous\n \n-#[repr(simd)]\n-struct int4(isize, isize, isize, isize); //~ ERROR SIMD vector element type should be machine type\n-\n fn main() {}"}, {"sha": "48b9916e89d98b65cbabdbd2a14575769474c028", "filename": "src/test/ui/simd-type.stderr", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Fui%2Fsimd-type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/524a7afcf25fc0098faf63aeb79beedb6022775b/src%2Ftest%2Fui%2Fsimd-type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimd-type.stderr?ref=524a7afcf25fc0098faf63aeb79beedb6022775b", "patch": "@@ -10,13 +10,7 @@ error[E0076]: SIMD vector should be homogeneous\n LL | struct i64f64(i64, f64);\n    | ^^^^^^^^^^^^^^^^^^^^^^^^ SIMD elements must have the same type\n \n-error[E0077]: SIMD vector element type should be machine type\n-  --> $DIR/simd-type.rs:11:1\n-   |\n-LL | struct int4(isize, isize, isize, isize);\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 3 previous errors\n+error: aborting due to 2 previous errors\n \n-Some errors occurred: E0075, E0076, E0077.\n+Some errors occurred: E0075, E0076.\n For more information about an error, try `rustc --explain E0075`."}]}