{"sha": "30761556749ff4bce889f5b0ec9fd183aaa12f73", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwNzYxNTU2NzQ5ZmY0YmNlODg5ZjViMGVjOWZkMTgzYWFhMTJmNzM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-31T18:04:25Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-31T18:19:36Z"}, "message": "travis: Compile OSX releases with Xcode 7\n\nUnfortunately what we're using right now, Xcode 8.2, cannot compile LLVM for OSX\n10.7. We've done this historically and Gecko would like to maintain this\ncompabitiliby. This commit moves our release builders for OSX to using Xcode 7\nwhich can compile LLVM for 10.7.\n\nThe builders running tests continue to use Xcode 8.2, however, because the LLDB\nversion with Xcode 7, 350, is blacklisted in running our LLDB tests. To continue\nrunning LLDB tests we'll stick with Xcode 8.2.", "tree": {"sha": "e57e6073b4b41b69e7701fecb3fb1a59b0aaabe7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e57e6073b4b41b69e7701fecb3fb1a59b0aaabe7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/30761556749ff4bce889f5b0ec9fd183aaa12f73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/30761556749ff4bce889f5b0ec9fd183aaa12f73", "html_url": "https://github.com/rust-lang/rust/commit/30761556749ff4bce889f5b0ec9fd183aaa12f73", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/30761556749ff4bce889f5b0ec9fd183aaa12f73/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd", "html_url": "https://github.com/rust-lang/rust/commit/ccce2c6eb914a66571f60fa0afe8a46faa9fb3bd"}], "stats": {"total": 26, "additions": 16, "deletions": 10}, "files": [{"sha": "f95893cd5e63d7113ab8edc379a929a9b7a387c9", "filename": ".travis.yml", "status": "modified", "additions": 16, "deletions": 10, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/30761556749ff4bce889f5b0ec9fd183aaa12f73/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/30761556749ff4bce889f5b0ec9fd183aaa12f73/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=30761556749ff4bce889f5b0ec9fd183aaa12f73", "patch": "@@ -40,7 +40,10 @@ matrix:\n     - env: IMAGE=x86_64-gnu-distcheck\n     - env: IMAGE=x86_64-gnu-incremental\n \n-    # OSX builders\n+    # OSX builders running tests, these run the full test suite.\n+    #\n+    # Note that the compiler is compiled to target 10.8 here because the Xcode\n+    # version that we're using, 8.2, cannot compile LLVM for OSX 10.7.\n     - env: >\n         RUST_CHECK_TARGET=check\n         RUST_CONFIGURE_ARGS=--build=x86_64-apple-darwin\n@@ -68,17 +71,22 @@ matrix:\n       osx_image: xcode8.2\n       install: *osx_install_sccache\n \n+    # OSX builders producing releases. These do not run the full test suite and\n+    # just produce a bunch of artifacts.\n+    #\n+    # Note that these are running in the `xcode7` image instead of the\n+    # `xcode8.2` image as above. That's because we want to build releases for\n+    # OSX 10.7 and `xcode7` is the latest Xcode able to compile LLVM for 10.7.\n     - env: >\n         RUST_CHECK_TARGET=dist\n         RUST_CONFIGURE_ARGS=\"--build=i686-apple-darwin --enable-extended\"\n         SRC=.\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        MACOSX_DEPLOYMENT_TARGET=10.8\n-        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n+        MACOSX_DEPLOYMENT_TARGET=10.7\n       os: osx\n-      osx_image: xcode8.2\n+      osx_image: xcode7\n       install: *osx_install_sccache\n     - env: >\n         RUST_CHECK_TARGET=dist\n@@ -87,10 +95,9 @@ matrix:\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        MACOSX_DEPLOYMENT_TARGET=10.8\n-        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n+        MACOSX_DEPLOYMENT_TARGET=10.7\n       os: osx\n-      osx_image: xcode8.2\n+      osx_image: xcode7\n       install: *osx_install_sccache\n \n     # \"alternate\" deployments, these are \"nightlies\" but don't have assertions\n@@ -105,10 +112,9 @@ matrix:\n         DEPLOY_ALT=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n-        MACOSX_DEPLOYMENT_TARGET=10.8\n-        MACOSX_STD_DEPLOYMENT_TARGET=10.7\n+        MACOSX_DEPLOYMENT_TARGET=10.7\n       os: osx\n-      osx_image: xcode8.2\n+      osx_image: xcode7\n       install: *osx_install_sccache\n \n env:"}]}