{"sha": "32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "node_id": "C_kwDOAAsO6NoAKDMyODQyZTg3YjFiYjg4Yzc4M2NiZGM4NmJmYjg0MjYyNmJiOWVjZDQ", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2023-03-31T20:32:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-31T20:32:51Z"}, "message": "Rollup merge of #109818 - GuillaumeGomez:test-collapsed-item, r=notriddle\n\nrustdoc: Add GUI test for jump to collapsed item\n\nPart of https://github.com/rust-lang/rust/issues/66181.\n\nI updated `browser-ui-test` version because I needed to add a new command `property`: https://github.com/GuillaumeGomez/browser-UI-test/pull/452.\n\nr? `@notriddle`", "tree": {"sha": "4c432245b77c499cd5483689b3597c1ef1c35817", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c432245b77c499cd5483689b3597c1ef1c35817"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkJ0NzCRBK7hj4Ov3rIwAAhkQIAGg9FK349NFGF2JViCGevNeI\n60vFCnupE1ozx6ApmLEtNKm6tVFoFsTTdaXKJgTNhZmMu5O6YgVid1Wmu9457vET\nppCjqB/QErjOlS3/In1+68uDmfniqT3dz/ZRRGE7SAlSphicvSmm1mpxYHb9l8py\na6xGdCVPkOL3273euwT6dLIusj/8oubDcV1GPxsUoiHNG75Cj/AjSX9uJ+edaXGq\nmnWviEus6WAlS9xX1kFyULCy0uy2b8HT7uU2bo2uhu1xBM5S85qYImAx0Dv8oWw9\n0v6mnWWz8yi2dI5XHz/DeVcygkhP/ojFpHt15yRcvgWRWXzIRdCVVVxTtIsw0v4=\n=tI6r\n-----END PGP SIGNATURE-----\n", "payload": "tree 4c432245b77c499cd5483689b3597c1ef1c35817\nparent d732934fa8f7c2aa3c3c4b66fd26b969276a8505\nparent efad057eed692f2fc8c243707abebe02932fa223\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1680294771 +0200\ncommitter GitHub <noreply@github.com> 1680294771 +0200\n\nRollup merge of #109818 - GuillaumeGomez:test-collapsed-item, r=notriddle\n\nrustdoc: Add GUI test for jump to collapsed item\n\nPart of https://github.com/rust-lang/rust/issues/66181.\n\nI updated `browser-ui-test` version because I needed to add a new command `property`: https://github.com/GuillaumeGomez/browser-UI-test/pull/452.\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "html_url": "https://github.com/rust-lang/rust/commit/32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/32842e87b1bb88c783cbdc86bfb842626bb9ecd4/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d732934fa8f7c2aa3c3c4b66fd26b969276a8505", "url": "https://api.github.com/repos/rust-lang/rust/commits/d732934fa8f7c2aa3c3c4b66fd26b969276a8505", "html_url": "https://github.com/rust-lang/rust/commit/d732934fa8f7c2aa3c3c4b66fd26b969276a8505"}, {"sha": "efad057eed692f2fc8c243707abebe02932fa223", "url": "https://api.github.com/repos/rust-lang/rust/commits/efad057eed692f2fc8c243707abebe02932fa223", "html_url": "https://github.com/rust-lang/rust/commit/efad057eed692f2fc8c243707abebe02932fa223"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "66fb941ea37512a0b87ba91b8584ffa6ab63d8a9", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32842e87b1bb88c783cbdc86bfb842626bb9ecd4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/32842e87b1bb88c783cbdc86bfb842626bb9ecd4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "patch": "@@ -1 +1 @@\n-0.14.5\n\\ No newline at end of file\n+0.14.6\n\\ No newline at end of file"}, {"sha": "279048e37c1f3ae733bcbdadfbfea734cba98b29", "filename": "tests/rustdoc-gui/go-to-collapsed-elem.goml", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/32842e87b1bb88c783cbdc86bfb842626bb9ecd4/tests%2Frustdoc-gui%2Fgo-to-collapsed-elem.goml", "raw_url": "https://github.com/rust-lang/rust/raw/32842e87b1bb88c783cbdc86bfb842626bb9ecd4/tests%2Frustdoc-gui%2Fgo-to-collapsed-elem.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fgo-to-collapsed-elem.goml?ref=32842e87b1bb88c783cbdc86bfb842626bb9ecd4", "patch": "@@ -0,0 +1,21 @@\n+// This test ensures that when clicking on a link which leads to an item inside a collapsed element,\n+// the collapsed element will be expanded.\n+goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html\"\n+// We check that the implementors block is expanded.\n+assert-property: (\"#implementations-list .implementors-toggle\", {\"open\": \"true\"})\n+// We now collapse the implementors block.\n+property: (\"#implementations-list .implementors-toggle\", {\"open\": \"false\"})\n+// And now we click on the link to the method to ensure it'll expand the implementors block.\n+click: \"//*[@class='sidebar']//a[@href='#method.must_use']\"\n+assert-property: (\"#implementations-list .implementors-toggle\", {\"open\": \"true\"})\n+\n+// Now we do the same through search result.\n+// First we reload the page without the anchor in the URL.\n+goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html\"\n+// Then we collapse the section again...\n+property: (\"#implementations-list .implementors-toggle\", {\"open\": \"false\"})\n+// Then we run the search.\n+write: (\".search-input\", \"foo::must_use\")\n+wait-for: \"//*[@id='search']//a[@href='../test_docs/struct.Foo.html#method.must_use']\"\n+click: \"//*[@id='search']//a[@href='../test_docs/struct.Foo.html#method.must_use']\"\n+assert-property: (\"#implementations-list .implementors-toggle\", {\"open\": \"true\"})"}]}