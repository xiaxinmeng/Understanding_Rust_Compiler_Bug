{"sha": "3575812e449e8a174b67023ee0879f573f8a6d1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1NzU4MTJlNDQ5ZThhMTc0YjY3MDIzZWUwODc5ZjU3M2Y4YTZkMWY=", "commit": {"author": {"name": "Omer Sheikh", "email": "ojsheikh@gmail.com", "date": "2016-08-05T15:54:04Z"}, "committer": {"name": "Omer Sheikh", "email": "ojsheikh@gmail.com", "date": "2016-08-05T16:02:27Z"}, "message": "Update E0107 message to new format", "tree": {"sha": "b8eb1f2223afaae2d4c843d81e4443b08ee31d81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8eb1f2223afaae2d4c843d81e4443b08ee31d81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3575812e449e8a174b67023ee0879f573f8a6d1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3575812e449e8a174b67023ee0879f573f8a6d1f", "html_url": "https://github.com/rust-lang/rust/commit/3575812e449e8a174b67023ee0879f573f8a6d1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3575812e449e8a174b67023ee0879f573f8a6d1f/comments", "author": {"login": "ojsheikh", "id": 13085633, "node_id": "MDQ6VXNlcjEzMDg1NjMz", "avatar_url": "https://avatars.githubusercontent.com/u/13085633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ojsheikh", "html_url": "https://github.com/ojsheikh", "followers_url": "https://api.github.com/users/ojsheikh/followers", "following_url": "https://api.github.com/users/ojsheikh/following{/other_user}", "gists_url": "https://api.github.com/users/ojsheikh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ojsheikh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ojsheikh/subscriptions", "organizations_url": "https://api.github.com/users/ojsheikh/orgs", "repos_url": "https://api.github.com/users/ojsheikh/repos", "events_url": "https://api.github.com/users/ojsheikh/events{/privacy}", "received_events_url": "https://api.github.com/users/ojsheikh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ojsheikh", "id": 13085633, "node_id": "MDQ6VXNlcjEzMDg1NjMz", "avatar_url": "https://avatars.githubusercontent.com/u/13085633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ojsheikh", "html_url": "https://github.com/ojsheikh", "followers_url": "https://api.github.com/users/ojsheikh/followers", "following_url": "https://api.github.com/users/ojsheikh/following{/other_user}", "gists_url": "https://api.github.com/users/ojsheikh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ojsheikh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ojsheikh/subscriptions", "organizations_url": "https://api.github.com/users/ojsheikh/orgs", "repos_url": "https://api.github.com/users/ojsheikh/repos", "events_url": "https://api.github.com/users/ojsheikh/events{/privacy}", "received_events_url": "https://api.github.com/users/ojsheikh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c02363852e6ce41cf2da1b43a32cb7780a9b067", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c02363852e6ce41cf2da1b43a32cb7780a9b067", "html_url": "https://github.com/rust-lang/rust/commit/4c02363852e6ce41cf2da1b43a32cb7780a9b067"}], "stats": {"total": 30, "additions": 25, "deletions": 5}, "files": [{"sha": "e3f4f82b0ef6d4a5527ea8d89941a776a544f693", "filename": "src/librustc_typeck/astconv.rs", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/3575812e449e8a174b67023ee0879f573f8a6d1f/src%2Flibrustc_typeck%2Fastconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3575812e449e8a174b67023ee0879f573f8a6d1f/src%2Flibrustc_typeck%2Fastconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fastconv.rs?ref=3575812e449e8a174b67023ee0879f573f8a6d1f", "patch": "@@ -2266,9 +2266,25 @@ fn check_type_argument_count(tcx: TyCtxt, span: Span, supplied: usize,\n }\n \n fn report_lifetime_number_error(tcx: TyCtxt, span: Span, number: usize, expected: usize) {\n-    span_err!(tcx.sess, span, E0107,\n-              \"wrong number of lifetime parameters: expected {}, found {}\",\n-              expected, number);\n+    let label = if number < expected {\n+        if expected == 1 {\n+            format!(\"expected {} lifetime parameter\", expected)\n+        } else {\n+            format!(\"expected {} lifetime parameters\", expected)\n+        }\n+    } else {\n+        let additional = number - expected;\n+        if additional == 1 {\n+            \"unexpected lifetime parameter\".to_string()\n+        } else {\n+            format!(\"{} unexpected lifetime parameters\", additional)\n+        }\n+    };\n+    struct_span_err!(tcx.sess, span, E0107,\n+                     \"wrong number of lifetime parameters: expected {}, found {}\",\n+                     expected, number)\n+        .span_label(span, &label)\n+        .emit();\n }\n \n // A helper struct for conveniently grouping a set of bounds which we pass to"}, {"sha": "6a5456c0109538572985e5c3b092695191651c1b", "filename": "src/test/compile-fail/E0107.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3575812e449e8a174b67023ee0879f573f8a6d1f/src%2Ftest%2Fcompile-fail%2FE0107.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3575812e449e8a174b67023ee0879f573f8a6d1f/src%2Ftest%2Fcompile-fail%2FE0107.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0107.rs?ref=3575812e449e8a174b67023ee0879f573f8a6d1f", "patch": "@@ -17,8 +17,12 @@ enum Bar {\n }\n \n struct Baz<'a> {\n-    foo: Foo, //~ ERROR E0107\n-    bar: Bar<'a>, //~ ERROR E0107\n+    foo: Foo,\n+    //~^ ERROR E0107\n+    //~| expected 1 lifetime parameter\n+    bar: Bar<'a>,\n+    //~^ ERROR E0107\n+    //~| unexpected lifetime parameter\n }\n \n fn main() {"}]}