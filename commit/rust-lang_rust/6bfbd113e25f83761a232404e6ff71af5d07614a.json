{"sha": "6bfbd113e25f83761a232404e6ff71af5d07614a", "node_id": "C_kwDOAAsO6NoAKDZiZmJkMTEzZTI1ZjgzNzYxYTIzMjQwNGU2ZmY3MWFmNWQwNzYxNGE", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-11-03T15:04:07Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-11-17T08:37:41Z"}, "message": "run tests on the remote device even when the default address is used\n\nWhen running tests inside the Android emulator, bootstrap doesn't set\nthe TEST_DEVICE_ADDR environment variable, as the default address\n(127.0.0.1:12345) is used.\n\nInstead, REMOTE_TEST_CLIENT is set all the times when remote testing is\nneeded, and in no other cases. To ensure Android tests are executed in\nthe emulator, change the check.", "tree": {"sha": "6f8752504b76eb2f74aa2f22f2bf4f415761d037", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f8752504b76eb2f74aa2f22f2bf4f415761d037"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6bfbd113e25f83761a232404e6ff71af5d07614a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmN18tUACgkQzXazX3c0\ndp6Ldw//TfIMJtYW1H365IwrohnqPxfSyV0mdtY0gGUpab7znvvqnsN0tIEoGSz3\nv2dNvtDzq6cdCxPiIvm4iXi54LXCKYyWqnKBIPb61AO7GioBzakzeGRdDIgQCt8P\nzJUu4JHKVzBOltPOYpSmrPIkSsnBwhpY3MT+Zcy4uDlSvk8TOGQoGFWMQ08oZoYP\nkqxDM/poFipVBSbOXgxHorOEtKWVNvcsQoBhCZ/WwJSJTeiyzKlUAm1hzx6qGrz8\n32pwy3Y7knuq1/22xeyGwMccKutk8n4dBnuXMsyxUsztUB3pahWUfokELAbbuTyK\nrqoODvprsZGXTtmOjMd23yr/qSYVZ3CfH1WVnEwyOc71KSAHCHFjFBrxAJ/E3nAH\noreSC8RqQytMS0z8pfj68sJQLmtSfcWaRqcaZkzFK9NDPQqQ7I7h4ZRfjkYkRJ1O\n8kgJU6pfF+aXB2eSZDSrx5n+CUKAy5ENhjKltbSUV2uBLcSUoziAo1VKiXkTdiuN\nUOUeBWyJ5/g3VyYXKGxDlE+4MYKTKMAuoM/AYlsJDSmlFPqDZAgrn0vWR/zL5PWs\nNExAaUbJgnVZ41eIenEasYaC4ge/l2l9snsEE6FusBa7J6cJdfuiKxW2eBMy9iRk\nAKnB17ITxxSgbua91h+sv5Q4mGE8R9OZZFVE99xUjd7iGWzjsGQ=\n=Fj71\n-----END PGP SIGNATURE-----", "payload": "tree 6f8752504b76eb2f74aa2f22f2bf4f415761d037\nparent 6d8160261ff3aee3b6eaacc37ac96cafff530980\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1667487847 +0100\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1668674261 +0100\n\nrun tests on the remote device even when the default address is used\n\nWhen running tests inside the Android emulator, bootstrap doesn't set\nthe TEST_DEVICE_ADDR environment variable, as the default address\n(127.0.0.1:12345) is used.\n\nInstead, REMOTE_TEST_CLIENT is set all the times when remote testing is\nneeded, and in no other cases. To ensure Android tests are executed in\nthe emulator, change the check.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6bfbd113e25f83761a232404e6ff71af5d07614a", "html_url": "https://github.com/rust-lang/rust/commit/6bfbd113e25f83761a232404e6ff71af5d07614a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6bfbd113e25f83761a232404e6ff71af5d07614a/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d8160261ff3aee3b6eaacc37ac96cafff530980", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d8160261ff3aee3b6eaacc37ac96cafff530980", "html_url": "https://github.com/rust-lang/rust/commit/6d8160261ff3aee3b6eaacc37ac96cafff530980"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "0f5425daa1684c2941d0c3b557b3372065fe3d49", "filename": "src/test/run-make-fulldeps/tools.mk", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6bfbd113e25f83761a232404e6ff71af5d07614a/src%2Ftest%2Frun-make-fulldeps%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/6bfbd113e25f83761a232404e6ff71af5d07614a/src%2Ftest%2Frun-make-fulldeps%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Ftools.mk?ref=6bfbd113e25f83761a232404e6ff71af5d07614a", "patch": "@@ -40,9 +40,9 @@ endif\n # e.g. for `$(CC) -o $(RUN_BINFILE)`.\n RUN_BINFILE = $(TMPDIR)/$(1)\n \n-# Invoke the generated binary on the remote machine if a test address is\n-# provided, otherwise run it on the current host.\n-ifdef TEST_DEVICE_ADDR\n+# Invoke the generated binary on the remote machine if compiletest was\n+# configured to use a remote test device, otherwise run it on the current host.\n+ifdef REMOTE_TEST_CLIENT\n # FIXME: if a test requires additional files, this will need to be changed to\n # also push them (by changing the 0 to the number of additional files, and\n # providing the path of the additional files as the last arguments)."}]}