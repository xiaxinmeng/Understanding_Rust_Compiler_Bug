{"sha": "ba2380d7b328ae59261d134970593c2a2668c690", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhMjM4MGQ3YjMyOGFlNTkyNjFkMTM0OTcwNTkzYzJhMjY2OGM2OTA=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-04-21T22:53:32Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-04-27T16:22:05Z"}, "message": "rustc: Add target_env for triples by default\n\nThis adds a new `#[cfg]` matcher against the `target_env` property of the\ndestination target triple. For example all windows triples today end with `-gnu`\nbut we will also hopefully support non-`gnu` targets for Windows, at which point\nwe'll need to differentiate between the two. This new `target_env` matches is\nprovided and filled in with the target's environment name.\n\nCurrently the only non-empty value of this name is `gnu`, but `musl` will be\nshortly added for the linux triples.", "tree": {"sha": "968f5352d57cdf79fecbb4b8b3f3101b3d8c7a32", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/968f5352d57cdf79fecbb4b8b3f3101b3d8c7a32"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba2380d7b328ae59261d134970593c2a2668c690", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba2380d7b328ae59261d134970593c2a2668c690", "html_url": "https://github.com/rust-lang/rust/commit/ba2380d7b328ae59261d134970593c2a2668c690", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba2380d7b328ae59261d134970593c2a2668c690/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "681fc824569cc2d37522b9927b9a6ecbfffee3eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/681fc824569cc2d37522b9927b9a6ecbfffee3eb", "html_url": "https://github.com/rust-lang/rust/commit/681fc824569cc2d37522b9927b9a6ecbfffee3eb"}], "stats": {"total": 33, "additions": 31, "deletions": 2}, "files": [{"sha": "072761f2754b3723fed2c29ee2d3f623c314a404", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -621,6 +621,7 @@ pub fn default_configuration(sess: &Session) -> ast::CrateConfig {\n     let arch = &sess.target.target.arch;\n     let wordsz = &sess.target.target.target_pointer_width;\n     let os = &sess.target.target.target_os;\n+    let env = &sess.target.target.target_env;\n \n     let fam = match sess.target.target.options.is_like_windows {\n         true  => InternedString::new(\"windows\"),\n@@ -634,8 +635,8 @@ pub fn default_configuration(sess: &Session) -> ast::CrateConfig {\n          mk(InternedString::new(\"target_family\"), fam),\n          mk(InternedString::new(\"target_arch\"), intern(arch)),\n          mk(InternedString::new(\"target_endian\"), intern(end)),\n-         mk(InternedString::new(\"target_pointer_width\"),\n-            intern(wordsz))\n+         mk(InternedString::new(\"target_pointer_width\"), intern(wordsz)),\n+         mk(InternedString::new(\"target_env\"), intern(env)),\n     ];\n     if sess.opts.debug_assertions {\n         ret.push(attr::mk_word_item(InternedString::new(\"debug_assertions\")));"}, {"sha": "dd6bc672a03d996ab8d1cf390eac171cef3696e5", "filename": "src/librustc_back/target/aarch64_apple_ios.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Faarch64_apple_ios.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -22,6 +22,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"aarch64\".to_string(),\n         target_os: \"ios\".to_string(),\n+        target_env: \"\".to_string(),\n         options: TargetOptions {\n             features: \"+neon,+fp-armv8,+cyclone\".to_string(),\n             eliminate_frame_pointer: false,"}, {"sha": "fcc901fc81f576f7da57193785e0cc4f5444168f", "filename": "src/librustc_back/target/aarch64_linux_android.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_linux_android.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_linux_android.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Faarch64_linux_android.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -24,6 +24,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"aarch64\".to_string(),\n         target_os: \"android\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "18e67d066d03632f8c148a54c03326411364fc44", "filename": "src/librustc_back/target/aarch64_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Faarch64_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Faarch64_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -19,6 +19,7 @@ pub fn target() -> Target {\n         llvm_target: \"aarch64-unknown-linux-gnu\".to_string(),\n         target_endian: \"little\".to_string(),\n         target_pointer_width: \"64\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         arch: \"aarch64\".to_string(),\n         target_os: \"linux\".to_string(),\n         options: base,"}, {"sha": "57712d18cbae2fd7568cb59cc67bd2ef71c23697", "filename": "src/librustc_back/target/arm_linux_androideabi.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_linux_androideabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_linux_androideabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Farm_linux_androideabi.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -31,6 +31,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"arm\".to_string(),\n         target_os: \"android\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "30015c4a7e6ff0ef1a34a6b04fd36ea956162ffd", "filename": "src/librustc_back/target/arm_unknown_linux_gnueabi.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabi.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -23,6 +23,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"arm\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnueabi\".to_string(),\n \n         options: TargetOptions {\n             features: \"+v6\".to_string(),"}, {"sha": "8f8c7114e6effa537c55bdeec16fa3b0ccb3a304", "filename": "src/librustc_back/target/arm_unknown_linux_gnueabihf.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Farm_unknown_linux_gnueabihf.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -23,6 +23,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"arm\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnueabihf\".to_string(),\n \n         options: TargetOptions {\n             features: \"+v6,+vfp2\".to_string(),"}, {"sha": "3b55993659de24c132dbbb585b7fb7832b44c9c3", "filename": "src/librustc_back/target/armv7_apple_ios.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farmv7_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farmv7_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Farmv7_apple_ios.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -19,6 +19,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"arm\".to_string(),\n         target_os: \"ios\".to_string(),\n+        target_env: \"\".to_string(),\n         options: TargetOptions {\n             features: \"+v7,+vfp3,+neon\".to_string(),\n             .. opts(Arch::Armv7)"}, {"sha": "5a67e3fe127d6f375bb7018a9ccf7b45da1ddce4", "filename": "src/librustc_back/target/armv7s_apple_ios.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farmv7s_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Farmv7s_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Farmv7s_apple_ios.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -19,6 +19,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"arm\".to_string(),\n         target_os: \"ios\".to_string(),\n+        target_env: \"\".to_string(),\n         options: TargetOptions {\n             features: \"+v7,+vfp4,+neon\".to_string(),\n             .. opts(Arch::Armv7s)"}, {"sha": "a9a073e2a8c64ae3db1c0394edc549f430b38329", "filename": "src/librustc_back/target/i386_apple_ios.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi386_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi386_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fi386_apple_ios.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -23,6 +23,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"x86\".to_string(),\n         target_os: \"ios\".to_string(),\n+        target_env: \"\".to_string(),\n         options: opts(Arch::I386)\n     }\n }"}, {"sha": "47b329982d43e29383a77083d92c556c7e835a85", "filename": "src/librustc_back/target/i686_apple_darwin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_apple_darwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_apple_darwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fi686_apple_darwin.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -26,6 +26,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"x86\".to_string(),\n         target_os: \"macos\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "9e2aa20085c3634f1dde00f97e1eb0def39a5ecf", "filename": "src/librustc_back/target/i686_pc_windows_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_pc_windows_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_pc_windows_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fi686_pc_windows_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -30,6 +30,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"x86\".to_string(),\n         target_os: \"windows\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: options,\n     }\n }"}, {"sha": "ecabe71ad4c6c635ef279472ac60868a6cdd38c2", "filename": "src/librustc_back/target/i686_unknown_dragonfly.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_dragonfly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_dragonfly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_dragonfly.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -22,6 +22,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"x86\".to_string(),\n         target_os: \"dragonfly\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "21094ad905e90f5c281c8d451fa44fb676b97399", "filename": "src/librustc_back/target/i686_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fi686_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -22,6 +22,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"x86\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "4662ff1958ba87de61a7d1922324e047f7185f90", "filename": "src/librustc_back/target/mips_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmips_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmips_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fmips_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -22,6 +22,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"mips\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: super::linux_base::opts()\n     }\n }"}, {"sha": "80e38c5ddea98e61cdc65bcdb8d94371b11f4373", "filename": "src/librustc_back/target/mipsel_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmipsel_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmipsel_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fmipsel_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -22,6 +22,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"mips\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n \n         options: super::linux_base::opts()\n     }"}, {"sha": "cf7499a337d089effe77949741fcca3715127182", "filename": "src/librustc_back/target/mod.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fmod.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -100,6 +100,8 @@ pub struct Target {\n     pub target_pointer_width: String,\n     /// OS name to use for conditional compilation.\n     pub target_os: String,\n+    /// Environment name to use for conditional compilation.\n+    pub target_env: String,\n     /// Architecture to use for ABI considerations. Valid options: \"x86\", \"x86_64\", \"arm\",\n     /// \"aarch64\", \"mips\", and \"powerpc\". \"mips\" includes \"mipsel\".\n     pub arch: String,\n@@ -250,6 +252,8 @@ impl Target {\n             target_pointer_width: get_req_field(\"target-pointer-width\"),\n             arch: get_req_field(\"arch\"),\n             target_os: get_req_field(\"os\"),\n+            target_env: obj.find(\"env\").and_then(|s| s.as_string())\n+                           .map(|s| s.to_string()).unwrap_or(String::new()),\n             options: Default::default(),\n         };\n "}, {"sha": "3a2b4bd16065ef38e892a78415b4d0f4cc75b39a", "filename": "src/librustc_back/target/powerpc_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fpowerpc_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fpowerpc_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fpowerpc_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -21,6 +21,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"32\".to_string(),\n         arch: \"powerpc\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "89a67da2d8bbcf9b677553c31287036004fd85b2", "filename": "src/librustc_back/target/x86_64_apple_darwin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_darwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_darwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_darwin.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -25,6 +25,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"macos\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "74491629ed8592faf1e53115f5dbfc7890756f17", "filename": "src/librustc_back/target/x86_64_apple_ios.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_apple_ios.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -21,6 +21,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"ios\".to_string(),\n+        target_env: \"\".to_string(),\n         options: opts(Arch::X86_64)\n     }\n }"}, {"sha": "bea7d16e9dfadd83897082db1e9218f3ea2e4305", "filename": "src/librustc_back/target/x86_64_pc_windows_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_pc_windows_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_pc_windows_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_pc_windows_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -27,6 +27,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"windows\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "201c56b2e15c682b991738e9306332b331f467e4", "filename": "src/librustc_back/target/x86_64_unknown_bitrig.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_bitrig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_bitrig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_bitrig.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -23,6 +23,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"bitrig\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "c590f0297b948a03648ac04b4c482d8ebb8c3935", "filename": "src/librustc_back/target/x86_64_unknown_dragonfly.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_dragonfly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_dragonfly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_dragonfly.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -24,6 +24,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"dragonfly\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "0d8ea90a2ab04921d0371cbe94f6244c273b1d15", "filename": "src/librustc_back/target/x86_64_unknown_freebsd.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_freebsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_freebsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_freebsd.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -24,6 +24,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"freebsd\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "ba945afc5649b38f70750eea70bda88479f72aff", "filename": "src/librustc_back/target/x86_64_unknown_linux_gnu.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_linux_gnu.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -24,6 +24,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"linux\".to_string(),\n+        target_env: \"gnu\".to_string(),\n         options: base,\n     }\n }"}, {"sha": "7f64259adf9f8cf0c581a0e50d7a00a014b353a0", "filename": "src/librustc_back/target/x86_64_unknown_openbsd.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_openbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba2380d7b328ae59261d134970593c2a2668c690/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_openbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Ftarget%2Fx86_64_unknown_openbsd.rs?ref=ba2380d7b328ae59261d134970593c2a2668c690", "patch": "@@ -23,6 +23,7 @@ pub fn target() -> Target {\n         target_pointer_width: \"64\".to_string(),\n         arch: \"x86_64\".to_string(),\n         target_os: \"openbsd\".to_string(),\n+        target_env: \"\".to_string(),\n         options: base,\n     }\n }"}]}