{"sha": "61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxZmYzYmE1MzY0YWU3YmJmOTNiZTViODkyZmE3YzEyMmQzY2ZhYjI=", "commit": {"author": {"name": "Gilad Naaman", "email": "gilad.naaman@gmail.com", "date": "2018-01-27T20:34:05Z"}, "committer": {"name": "Gilad Naaman", "email": "gilad.naaman@gmail.com", "date": "2018-02-04T04:10:54Z"}, "message": "libtest: Replace panics with error messages", "tree": {"sha": "56544b8c182d1757e272ae4e46bde8dd7133de31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/56544b8c182d1757e272ae4e46bde8dd7133de31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2", "html_url": "https://github.com/rust-lang/rust/commit/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2/comments", "author": null, "committer": null, "parents": [{"sha": "6b99adeb11313197f409b4f7c4083c2ceca8a4fe", "url": "https://api.github.com/repos/rust-lang/rust/commits/6b99adeb11313197f409b4f7c4083c2ceca8a4fe", "html_url": "https://github.com/rust-lang/rust/commit/6b99adeb11313197f409b4f7c4083c2ceca8a4fe"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "9ea5f39b71feecca2ae04b27164c8c1bc2cbb6b3", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=61ff3ba5364ae7bbf93be5b892fa7c122d3cfab2", "patch": "@@ -72,6 +72,7 @@ use std::sync::{Arc, Mutex};\n use std::thread;\n use std::time::{Instant, Duration};\n use std::borrow::Cow;\n+use std::process;\n \n const TEST_WARN_TIMEOUT_S: u64 = 60;\n const QUIET_MODE_MAX_COLUMN: usize = 100; // insert a '\\n' after 100 tests in quiet mode\n@@ -266,19 +267,27 @@ impl Options {\n pub fn test_main(args: &[String], tests: Vec<TestDescAndFn>, options: Options) {\n     let mut opts = match parse_opts(args) {\n         Some(Ok(o)) => o,\n-        Some(Err(msg)) => panic!(\"{:?}\", msg),\n+        Some(Err(msg)) => {\n+            eprintln!(\"error: {}\", msg);\n+            process::exit(101);\n+        },\n         None => return,\n     };\n+\n     opts.options = options;\n     if opts.list {\n         if let Err(e) = list_tests_console(&opts, tests) {\n-            panic!(\"io error when listing tests: {:?}\", e);\n+            eprintln!(\"error: io error when listing tests: {:?}\", e);\n+            process::exit(101);\n         }\n     } else {\n         match run_tests_console(&opts, tests) {\n             Ok(true) => {}\n-            Ok(false) => std::process::exit(101),\n-            Err(e) => panic!(\"io error when running tests: {:?}\", e),\n+            Ok(false) => process::exit(101),\n+            Err(e) => {\n+                eprintln!(\"error: io error when listing tests: {:?}\", e);\n+                process::exit(101);\n+            },\n         }\n     }\n }"}]}