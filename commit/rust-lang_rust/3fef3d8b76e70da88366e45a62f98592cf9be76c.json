{"sha": "3fef3d8b76e70da88366e45a62f98592cf9be76c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmZWYzZDhiNzZlNzBkYTg4MzY2ZTQ1YTYyZjk4NTkyY2Y5YmU3NmM=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-01-17T13:22:40Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-01-17T13:22:40Z"}, "message": "Add @weiznich's regression test", "tree": {"sha": "45dcdb672cc47d3e37259d670dd4502b6901dfec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/45dcdb672cc47d3e37259d670dd4502b6901dfec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3fef3d8b76e70da88366e45a62f98592cf9be76c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl4htTAACgkQtAh+UQ6Y\nsWRn/RAAs4edF8j3HW4stwD1GPITaoaK5i8swuiD5RJLCdSzlcKVCFDxnnXrygBK\nH8xENJ2K6TpLcgWYmN1UM1oVoplK+vH3etkaqjXKTgmhquyHC0Q6PNdPAdxXztFh\naGhbLcdxTY0C5220Lxi4FG1mOMR/eVp8XRyjyumgZHM2CD+42qu2zwgo5imG6wGd\n0ffBuB3uY+dusO0E6QR+JBODoG2i3vs9l3p+ciWKYdLYwFvmD+SwMFJ87mJK59Sg\n27sYUTbsLc+9JqwlzrCnK4T+atE/AtwOJchwawcClJluI/5ooaOH4SeWggevw4OZ\nAl1fxbXxG+/85KHFw9UHxuWXJWM+xZp0LVcBfQ0tB7WidYi9Ao43cWnQta5+hD58\nQEQ71mxPMkHtDY868KFW9S1wuZKVU2IrvFvhNV5QZf3hkdvvm/r2Mbs8BCET7LaL\nbzyq72cJy/HuXZd+5BKguUxYUGadWYqUbP7jJW9mCOF+VsqjnHEXdj/Y24RYCsMR\nJL6MHuYqYGR40jDrzf7fl8rZdbWoKHzpvGMJwFjUR25gXk+CgjtqgBmyQad2KRw9\npIDUNsQXqZ6EUOD5oLWM8pbqPbpRTcqZ3/J7F0cpkdejwXJmnOIcfO2uSh9HIuee\nMsuji9Zkm5w+DcAuRGVBD8lezdFwDGBD07e0V/WQUS/miwIRZD8=\n=GY6m\n-----END PGP SIGNATURE-----", "payload": "tree 45dcdb672cc47d3e37259d670dd4502b6901dfec\nparent c431cd751f6b0257443cd4d25c67ab36a8e9bc12\nauthor Aaron Hill <aa1ronham@gmail.com> 1579267360 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1579267360 -0500\n\nAdd @weiznich's regression test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3fef3d8b76e70da88366e45a62f98592cf9be76c", "html_url": "https://github.com/rust-lang/rust/commit/3fef3d8b76e70da88366e45a62f98592cf9be76c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3fef3d8b76e70da88366e45a62f98592cf9be76c/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c431cd751f6b0257443cd4d25c67ab36a8e9bc12", "url": "https://api.github.com/repos/rust-lang/rust/commits/c431cd751f6b0257443cd4d25c67ab36a8e9bc12", "html_url": "https://github.com/rust-lang/rust/commit/c431cd751f6b0257443cd4d25c67ab36a8e9bc12"}], "stats": {"total": 43, "additions": 43, "deletions": 0}, "files": [{"sha": "8f21e0648d4c73c012ec1f7f592fd64886f71beb", "filename": "src/test/ui/consts/issue-68264-overflow.rs", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/3fef3d8b76e70da88366e45a62f98592cf9be76c/src%2Ftest%2Fui%2Fconsts%2Fissue-68264-overflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3fef3d8b76e70da88366e45a62f98592cf9be76c/src%2Ftest%2Fui%2Fconsts%2Fissue-68264-overflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-68264-overflow.rs?ref=3fef3d8b76e70da88366e45a62f98592cf9be76c", "patch": "@@ -0,0 +1,43 @@\n+// check-pass\n+// compile-flags: --emit=mir,link\n+// Regression test for issue #68264\n+// Checks that we don't encounter overflow\n+// when running const-prop on functions with\n+// complicated bounds\n+pub trait Query {}\n+\n+pub trait AsQuery {\n+    type Query: Query;\n+}\n+pub trait Table: AsQuery + Sized {}\n+\n+pub trait LimitDsl {\n+    type Output;\n+}\n+\n+pub(crate) trait LoadQuery<Conn, U>: RunQueryDsl<Conn> {}\n+\n+impl<T: Query> AsQuery for T {\n+    type Query = Self;\n+}\n+\n+impl<T> LimitDsl for T\n+where\n+    T: Table,\n+    T::Query: LimitDsl,\n+{\n+    type Output = <T::Query as LimitDsl>::Output;\n+}\n+\n+pub(crate) trait RunQueryDsl<Conn>: Sized {\n+    fn first<U>(self, _conn: &Conn) -> U\n+    where\n+        Self: LimitDsl,\n+        Self::Output: LoadQuery<Conn, U>,\n+    {\n+        // Overflow is caused by this function body\n+        unimplemented!()\n+    }\n+}\n+\n+fn main() {}"}]}