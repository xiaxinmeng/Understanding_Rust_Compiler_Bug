{"sha": "485229c4a3d6a2fbe40f5a6976a33144a27497c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4NTIyOWM0YTNkNmEyZmJlNDBmNWE2OTc2YTMzMTQ0YTI3NDk3YzY=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-05-12T14:26:55Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-06-16T19:02:26Z"}, "message": "Fix fallout in redundant_field_names", "tree": {"sha": "5e41d355cd1a30c2deb62f8bcf00199e6fe6ff0e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e41d355cd1a30c2deb62f8bcf00199e6fe6ff0e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/485229c4a3d6a2fbe40f5a6976a33144a27497c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl7pF0IACgkQLO/Nsn7Q\nvnlqig//SrLX7v4ReX0q67iv6SJAc6Rum3WfqYNLgxk89cv6iJvOHOSZuQY8niQ4\nrh7Zh5jfivGQNODKrN2ZuqT3/YfI0ZkGpDBBTgV5IRrpgQaoi2nR9FfPdRxKIWfP\nMzckxGYH8gIcyRdxHKWVSXrke1d6vQzdtCils0ucIr7IdXbIC5yEsXCZVXOgSH8z\nl9o2anpKpx6/cnrSo37rw5X+L20u9m/PdyKdVyDFJqS6yBTiVHHt8VtB34zhiccT\n2Fjb2O8AVVXyCAlRcVpjCJ/H4w9Xsqf+l/9/zXe2MTcF2/E22e1ijjZ+dotfimhe\nhfyHw2FQlhooa4RpcK6XXwIsYA5P3zJY20C2mOG/8+kWUsa/GUKMwvKRrFaZemiz\nsQqAP94u5c4Ye5FxusetuPbjDAfy911zHiCyZ9d8XYvTgoRmyQkZR2256ShHiRCP\nM+Nz/ScWT7nNWYUZjb5bEnWyvT3nNaMdPzUpfftFcIxG9ht6Gl38ZNKxeKzd56ae\nPyV8g9oxcG1g+c7uiXqsJiTd99XBvcA7jdWue4BVsNbx9RVp70/2wtoczFdzzJ9H\nNVTnp9oNiqmm3BuBP2xcWZB//gA7LMf/sLas1akGkoRB2AcHKUWX2sej/7O++u66\n/ZX6RPSvTCp5ldhI6g72odfaApiJ16A61s9Kqv+Zmdq4+kZvFd0=\n=CcWh\n-----END PGP SIGNATURE-----", "payload": "tree 5e41d355cd1a30c2deb62f8bcf00199e6fe6ff0e\nparent f7acea2683c6124854bfe20e7127e4dfba344d3e\nauthor flip1995 <hello@philkrones.com> 1589293615 +0200\ncommitter flip1995 <hello@philkrones.com> 1592334146 +0200\n\nFix fallout in redundant_field_names\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/485229c4a3d6a2fbe40f5a6976a33144a27497c6", "html_url": "https://github.com/rust-lang/rust/commit/485229c4a3d6a2fbe40f5a6976a33144a27497c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/485229c4a3d6a2fbe40f5a6976a33144a27497c6/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7acea2683c6124854bfe20e7127e4dfba344d3e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7acea2683c6124854bfe20e7127e4dfba344d3e", "html_url": "https://github.com/rust-lang/rust/commit/f7acea2683c6124854bfe20e7127e4dfba344d3e"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "2a81170e49e75026ce6c328adbb7eaa144ac30e6", "filename": "clippy_lints/src/redundant_field_names.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/485229c4a3d6a2fbe40f5a6976a33144a27497c6/clippy_lints%2Fsrc%2Fredundant_field_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/485229c4a3d6a2fbe40f5a6976a33144a27497c6/clippy_lints%2Fsrc%2Fredundant_field_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_field_names.rs?ref=485229c4a3d6a2fbe40f5a6976a33144a27497c6", "patch": "@@ -2,6 +2,7 @@ use crate::utils::span_lint_and_sugg;\n use rustc_ast::ast::{Expr, ExprKind};\n use rustc_errors::Applicability;\n use rustc_lint::{EarlyContext, EarlyLintPass};\n+use rustc_middle::lint::in_external_macro;\n use rustc_session::{declare_lint_pass, declare_tool_lint};\n \n declare_clippy_lint! {\n@@ -36,6 +37,9 @@ declare_lint_pass!(RedundantFieldNames => [REDUNDANT_FIELD_NAMES]);\n \n impl EarlyLintPass for RedundantFieldNames {\n     fn check_expr(&mut self, cx: &EarlyContext<'_>, expr: &Expr) {\n+        if in_external_macro(cx.sess, expr.span) {\n+            return;\n+        }\n         if let ExprKind::Struct(_, ref fields, _) = expr.kind {\n             for field in fields {\n                 if field.is_shorthand {"}]}