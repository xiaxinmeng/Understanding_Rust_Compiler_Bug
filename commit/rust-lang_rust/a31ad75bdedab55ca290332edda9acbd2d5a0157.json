{"sha": "a31ad75bdedab55ca290332edda9acbd2d5a0157", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzMWFkNzViZGVkYWI1NWNhMjkwMzMyZWRkYTlhY2JkMmQ1YTAxNTc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-11-24T17:56:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-11-24T17:56:11Z"}, "message": "Auto merge of #37944 - bluss:adaptors-are-empty, r=alexcrichton\n\nForward ExactSizeIterator::len and is_empty for important iterator adaptors\n\nForward ExactSizeIterator::len and is_empty for important iterator adaptors\n\nBecause some iterators will provide improved version of len and/or is_empty,\nadaptors should forward to those implementations if possible.", "tree": {"sha": "98ccd8b9b05f0a956fde5f9d4d2021cf1eb3200a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98ccd8b9b05f0a956fde5f9d4d2021cf1eb3200a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a31ad75bdedab55ca290332edda9acbd2d5a0157", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a31ad75bdedab55ca290332edda9acbd2d5a0157", "html_url": "https://github.com/rust-lang/rust/commit/a31ad75bdedab55ca290332edda9acbd2d5a0157", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a31ad75bdedab55ca290332edda9acbd2d5a0157/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ddf011d7730594f4db36b01858b8c6733b07c084", "url": "https://api.github.com/repos/rust-lang/rust/commits/ddf011d7730594f4db36b01858b8c6733b07c084", "html_url": "https://github.com/rust-lang/rust/commit/ddf011d7730594f4db36b01858b8c6733b07c084"}, {"sha": "22739a148edb2b0b202a55a365f30b113ae5aea3", "url": "https://api.github.com/repos/rust-lang/rust/commits/22739a148edb2b0b202a55a365f30b113ae5aea3", "html_url": "https://github.com/rust-lang/rust/commit/22739a148edb2b0b202a55a365f30b113ae5aea3"}], "stats": {"total": 63, "additions": 57, "deletions": 6}, "files": [{"sha": "2e08508de67f3ad1b887c8d922ae580e1360de94", "filename": "src/libcore/iter/mod.rs", "status": "modified", "additions": 57, "deletions": 6, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/a31ad75bdedab55ca290332edda9acbd2d5a0157/src%2Flibcore%2Fiter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a31ad75bdedab55ca290332edda9acbd2d5a0157/src%2Flibcore%2Fiter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter%2Fmod.rs?ref=a31ad75bdedab55ca290332edda9acbd2d5a0157", "patch": "@@ -368,7 +368,16 @@ impl<I> DoubleEndedIterator for Rev<I> where I: DoubleEndedIterator {\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<I> ExactSizeIterator for Rev<I>\n-    where I: ExactSizeIterator + DoubleEndedIterator {}\n+    where I: ExactSizeIterator + DoubleEndedIterator\n+{\n+    fn len(&self) -> usize {\n+        self.iter.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.iter.is_empty()\n+    }\n+}\n \n #[unstable(feature = \"fused\", issue = \"35602\")]\n impl<I> FusedIterator for Rev<I>\n@@ -425,7 +434,15 @@ impl<'a, I, T: 'a> DoubleEndedIterator for Cloned<I>\n #[stable(feature = \"iter_cloned\", since = \"1.1.0\")]\n impl<'a, I, T: 'a> ExactSizeIterator for Cloned<I>\n     where I: ExactSizeIterator<Item=&'a T>, T: Clone\n-{}\n+{\n+    fn len(&self) -> usize {\n+        self.it.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.it.is_empty()\n+    }\n+}\n \n #[unstable(feature = \"fused\", issue = \"35602\")]\n impl<'a, I, T: 'a> FusedIterator for Cloned<I>\n@@ -1007,7 +1024,16 @@ impl<B, I: DoubleEndedIterator, F> DoubleEndedIterator for Map<I, F> where\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<B, I: ExactSizeIterator, F> ExactSizeIterator for Map<I, F>\n-    where F: FnMut(I::Item) -> B {}\n+    where F: FnMut(I::Item) -> B\n+{\n+    fn len(&self) -> usize {\n+        self.iter.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.iter.is_empty()\n+    }\n+}\n \n #[unstable(feature = \"fused\", issue = \"35602\")]\n impl<B, I: FusedIterator, F> FusedIterator for Map<I, F>\n@@ -1236,7 +1262,15 @@ impl<I> DoubleEndedIterator for Enumerate<I> where\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<I> ExactSizeIterator for Enumerate<I> where I: ExactSizeIterator {}\n+impl<I> ExactSizeIterator for Enumerate<I> where I: ExactSizeIterator {\n+    fn len(&self) -> usize {\n+        self.iter.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.iter.is_empty()\n+    }\n+}\n \n #[doc(hidden)]\n unsafe impl<I> TrustedRandomAccess for Enumerate<I>\n@@ -1945,7 +1979,15 @@ impl<I> DoubleEndedIterator for Fuse<I>\n \n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<I> ExactSizeIterator for Fuse<I> where I: ExactSizeIterator {}\n+impl<I> ExactSizeIterator for Fuse<I> where I: ExactSizeIterator {\n+    fn len(&self) -> usize {\n+        self.iter.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.iter.is_empty()\n+    }\n+}\n \n /// An iterator that calls a function with a reference to each element before\n /// yielding it.\n@@ -2012,7 +2054,16 @@ impl<I: DoubleEndedIterator, F> DoubleEndedIterator for Inspect<I, F>\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<I: ExactSizeIterator, F> ExactSizeIterator for Inspect<I, F>\n-    where F: FnMut(&I::Item) {}\n+    where F: FnMut(&I::Item)\n+{\n+    fn len(&self) -> usize {\n+        self.iter.len()\n+    }\n+\n+    fn is_empty(&self) -> bool {\n+        self.iter.is_empty()\n+    }\n+}\n \n #[unstable(feature = \"fused\", issue = \"35602\")]\n impl<I: FusedIterator, F> FusedIterator for Inspect<I, F>"}]}