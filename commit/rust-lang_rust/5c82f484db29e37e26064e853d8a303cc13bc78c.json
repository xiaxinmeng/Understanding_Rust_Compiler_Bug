{"sha": "5c82f484db29e37e26064e853d8a303cc13bc78c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVjODJmNDg0ZGIyOWUzN2UyNjA2NGU4NTNkOGEzMDNjYzEzYmM3OGM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-08-27T18:53:23Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-08-27T19:06:44Z"}, "message": "Remove invalid test -- this test reads freed memory, from what I can tell", "tree": {"sha": "b5262ac98c1f356484a9438d8d9f57e9de16c839", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b5262ac98c1f356484a9438d8d9f57e9de16c839"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5c82f484db29e37e26064e853d8a303cc13bc78c", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5c82f484db29e37e26064e853d8a303cc13bc78c", "html_url": "https://github.com/rust-lang/rust/commit/5c82f484db29e37e26064e853d8a303cc13bc78c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5c82f484db29e37e26064e853d8a303cc13bc78c/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18d6eefadbe03ca913cd3a049e900024c4c680d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/18d6eefadbe03ca913cd3a049e900024c4c680d6", "html_url": "https://github.com/rust-lang/rust/commit/18d6eefadbe03ca913cd3a049e900024c4c680d6"}], "stats": {"total": 21, "additions": 0, "deletions": 21}, "files": [{"sha": "32b77be78a43806487c8d777556aec1de5525b45", "filename": "src/libsync/spsc_queue.rs", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/5c82f484db29e37e26064e853d8a303cc13bc78c/src%2Flibsync%2Fspsc_queue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5c82f484db29e37e26064e853d8a303cc13bc78c/src%2Flibsync%2Fspsc_queue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsync%2Fspsc_queue.rs?ref=5c82f484db29e37e26064e853d8a303cc13bc78c", "patch": "@@ -315,27 +315,6 @@ mod test {\n         assert_eq!(consumer.pop(), None);\n     }\n \n-    // This behaviour is blocked by the type system if using the safe constructor\n-    #[test]\n-    fn pop_peeked_unchecked() {\n-        let q = unsafe { Queue::new(0) };\n-        q.push(vec![1i]);\n-        q.push(vec![2]);\n-        let peeked = q.peek().unwrap();\n-\n-        assert_eq!(*peeked, vec![1]);\n-        assert_eq!(q.pop(), Some(vec![1]));\n-\n-        assert_eq!(*peeked, vec![1]);\n-        q.push(vec![7]);\n-\n-        // Note: This should actually expect 1, but this test is to highlight\n-        // the unsafety allowed by the unchecked usage. A Rust user would not\n-        // expect their peeked value to mutate like this without the type system\n-        // complaining.\n-        assert_eq!(*peeked, vec![7]);\n-    }\n-\n     #[test]\n     fn peek() {\n         let (mut consumer, mut producer) = queue(0);"}]}