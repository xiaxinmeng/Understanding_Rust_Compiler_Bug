{"sha": "9ed8ce33646e0253fda91471fe528d1800bdf70c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjllZDhjZTMzNjQ2ZTAyNTNmZGE5MTQ3MWZlNTI4ZDE4MDBiZGY3MGM=", "commit": {"author": {"name": "Zack Corr", "email": "zack@z0w0.me", "date": "2012-10-27T11:16:26Z"}, "committer": {"name": "Zack Corr", "email": "zack@z0w0.me", "date": "2012-10-27T11:16:26Z"}, "message": "Correct makefiles to build linenoise correctly", "tree": {"sha": "34aa8e024e458c2606b290bb2d3ae25650c25a0f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34aa8e024e458c2606b290bb2d3ae25650c25a0f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9ed8ce33646e0253fda91471fe528d1800bdf70c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9ed8ce33646e0253fda91471fe528d1800bdf70c", "html_url": "https://github.com/rust-lang/rust/commit/9ed8ce33646e0253fda91471fe528d1800bdf70c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9ed8ce33646e0253fda91471fe528d1800bdf70c/comments", "author": {"login": "z0w0", "id": 676417, "node_id": "MDQ6VXNlcjY3NjQxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/676417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/z0w0", "html_url": "https://github.com/z0w0", "followers_url": "https://api.github.com/users/z0w0/followers", "following_url": "https://api.github.com/users/z0w0/following{/other_user}", "gists_url": "https://api.github.com/users/z0w0/gists{/gist_id}", "starred_url": "https://api.github.com/users/z0w0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/z0w0/subscriptions", "organizations_url": "https://api.github.com/users/z0w0/orgs", "repos_url": "https://api.github.com/users/z0w0/repos", "events_url": "https://api.github.com/users/z0w0/events{/privacy}", "received_events_url": "https://api.github.com/users/z0w0/received_events", "type": "User", "site_admin": false}, "committer": {"login": "z0w0", "id": 676417, "node_id": "MDQ6VXNlcjY3NjQxNw==", "avatar_url": "https://avatars.githubusercontent.com/u/676417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/z0w0", "html_url": "https://github.com/z0w0", "followers_url": "https://api.github.com/users/z0w0/followers", "following_url": "https://api.github.com/users/z0w0/following{/other_user}", "gists_url": "https://api.github.com/users/z0w0/gists{/gist_id}", "starred_url": "https://api.github.com/users/z0w0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/z0w0/subscriptions", "organizations_url": "https://api.github.com/users/z0w0/orgs", "repos_url": "https://api.github.com/users/z0w0/repos", "events_url": "https://api.github.com/users/z0w0/events{/privacy}", "received_events_url": "https://api.github.com/users/z0w0/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c97c8131a558595c0a19a283b99ef1ba4638f853", "url": "https://api.github.com/repos/rust-lang/rust/commits/c97c8131a558595c0a19a283b99ef1ba4638f853", "html_url": "https://github.com/rust-lang/rust/commit/c97c8131a558595c0a19a283b99ef1ba4638f853"}], "stats": {"total": 38, "additions": 26, "deletions": 12}, "files": [{"sha": "93cf3a82fca714ef5b9c02d16c180e645dce2d16", "filename": "Makefile.in", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9ed8ce33646e0253fda91471fe528d1800bdf70c/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/9ed8ce33646e0253fda91471fe528d1800bdf70c/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=9ed8ce33646e0253fda91471fe528d1800bdf70c", "patch": "@@ -337,7 +337,8 @@ HSREQ$(1)_H_$(3) = \\\n TSREQ$(1)_T_$(2)_H_$(3) = \\\n \t$$(HSREQ$(1)_H_$(3)) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUNTIME) \\\n-\t$$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a \\\n+  $$(TLIB$(1)_T_$(2)_H_$(3))/liblinenoise.a\n \n # Prerequisites for complete stageN targets\n SREQ$(1)_T_$(2)_H_$(3) = \\\n@@ -491,6 +492,7 @@ include $(CFG_SRC_DIR)mk/host.mk\n include $(CFG_SRC_DIR)mk/stage0.mk\n include $(CFG_SRC_DIR)mk/rt.mk\n include $(CFG_SRC_DIR)mk/rustllvm.mk\n+include $(CFG_SRC_DIR)mk/linenoise.mk\n include $(CFG_SRC_DIR)mk/tools.mk\n include $(CFG_SRC_DIR)mk/docs.mk\n include $(CFG_SRC_DIR)mk/llvm.mk"}, {"sha": "19a94a429b3c8a7a194e6ffc4accc35ab3ef2081", "filename": "mk/linenoise.mk", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/9ed8ce33646e0253fda91471fe528d1800bdf70c/mk%2Flinenoise.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9ed8ce33646e0253fda91471fe528d1800bdf70c/mk%2Flinenoise.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Flinenoise.mk?ref=9ed8ce33646e0253fda91471fe528d1800bdf70c", "patch": "@@ -0,0 +1,23 @@\n+######################################################################\n+# linenoise - minimalistic readline alternative used by the REPL\n+######################################################################\n+\n+define DEF_LINENOISE_TARGETS\n+\n+LINENOISE_CS_$(1) := $$(addprefix linenoise/, linenoise.c)\n+LINENOISE_OBJS_$(1) := $(LINENOISE_CS_$(1):linenoise/%.c=linenoise/$(1)/%.o)\n+\n+ALL_OBJ_FILES += $$(LINENOISE_OBJS_$(1))\n+\n+linenoise/$(1)/liblinenoise.a: $$(LINENOISE_OBJS_$(1))\n+\t@$$(call E, link: $$@)\n+\t$$(Q)ar rcs $$@ $$<\n+\n+linenoise/$(1)/%.o: linenoise/%.c $$(MKFILE_DEPS)\n+\t@$$(call E, compile: $$@)\n+\t$$(Q)$$(call CFG_COMPILE_C_$(1), $$@,) $$<\n+endef\n+\n+# Instantiate template for all stages\n+$(foreach target,$(CFG_TARGET_TRIPLES), \\\n+ $(eval $(call DEF_LINENOISE_TARGETS,$(target))))"}, {"sha": "231bf56ba8364e615269d6cd70e6b46e3dfe4766", "filename": "mk/target.mk", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/9ed8ce33646e0253fda91471fe528d1800bdf70c/mk%2Ftarget.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9ed8ce33646e0253fda91471fe528d1800bdf70c/mk%2Ftarget.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftarget.mk?ref=9ed8ce33646e0253fda91471fe528d1800bdf70c", "patch": "@@ -12,17 +12,6 @@ USE_SNAPSHOT_RUNTIME=0\n USE_SNAPSHOT_CORELIB=0\n USE_SNAPSHOT_STDLIB=0\n \n-LINENOISE_OBJS_$(2) := linenoise/$(2)/linenoise.o\n-ALL_OBJ_FILES += $$(LINENOISE_OBJS_$(2))\n-\n-linenoise/$(2)/linenoise.o: linenoise/linenoise.c $$(MKFILE_DEPS)\n-\t@$$(call E, compile: $$@)\n-\t$$(Q)$$(call CFG_COMPILE_C_$(2), $$@,) $$<\n-\n-linenoise/$(2)/liblinenoise.a: $$(LINENOISE_OBJS_$(2))\n-\t@$$(call E, link: $$@)\n-\t$$(Q)ar rcs $$@ $$<\n-\n define TARGET_STAGE_N\n \n $$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a: \\"}]}