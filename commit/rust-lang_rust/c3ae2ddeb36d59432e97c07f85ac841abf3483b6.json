{"sha": "c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzYWUyZGRlYjM2ZDU5NDMyZTk3YzA3Zjg1YWM4NDFhYmYzNDgzYjY=", "commit": {"author": {"name": "laurent", "email": "laurent.mazare@gmail.com", "date": "2017-11-29T21:42:58Z"}, "committer": {"name": "laurent", "email": "laurent.mazare@gmail.com", "date": "2017-11-29T21:42:58Z"}, "message": "Fix a bug in search_same + add a test case.", "tree": {"sha": "c9c298af0f4ecd58b7fb18f73e2660df945cfac7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9c298af0f4ecd58b7fb18f73e2660df945cfac7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "html_url": "https://github.com/rust-lang/rust/commit/c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/comments", "author": {"login": "LaurentMazare", "id": 1041292, "node_id": "MDQ6VXNlcjEwNDEyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1041292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaurentMazare", "html_url": "https://github.com/LaurentMazare", "followers_url": "https://api.github.com/users/LaurentMazare/followers", "following_url": "https://api.github.com/users/LaurentMazare/following{/other_user}", "gists_url": "https://api.github.com/users/LaurentMazare/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaurentMazare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaurentMazare/subscriptions", "organizations_url": "https://api.github.com/users/LaurentMazare/orgs", "repos_url": "https://api.github.com/users/LaurentMazare/repos", "events_url": "https://api.github.com/users/LaurentMazare/events{/privacy}", "received_events_url": "https://api.github.com/users/LaurentMazare/received_events", "type": "User", "site_admin": false}, "committer": {"login": "LaurentMazare", "id": 1041292, "node_id": "MDQ6VXNlcjEwNDEyOTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1041292?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LaurentMazare", "html_url": "https://github.com/LaurentMazare", "followers_url": "https://api.github.com/users/LaurentMazare/followers", "following_url": "https://api.github.com/users/LaurentMazare/following{/other_user}", "gists_url": "https://api.github.com/users/LaurentMazare/gists{/gist_id}", "starred_url": "https://api.github.com/users/LaurentMazare/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LaurentMazare/subscriptions", "organizations_url": "https://api.github.com/users/LaurentMazare/orgs", "repos_url": "https://api.github.com/users/LaurentMazare/repos", "events_url": "https://api.github.com/users/LaurentMazare/events{/privacy}", "received_events_url": "https://api.github.com/users/LaurentMazare/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3eb642bcdd0ce547c4e361b1b8635c69aabb37ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/3eb642bcdd0ce547c4e361b1b8635c69aabb37ca", "html_url": "https://github.com/rust-lang/rust/commit/3eb642bcdd0ce547c4e361b1b8635c69aabb37ca"}], "stats": {"total": 41, "additions": 34, "deletions": 7}, "files": [{"sha": "69527ba6ff88eb9a3aeedbab2136cc883ceb208b", "filename": "clippy_lints/src/consts.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconsts.rs?ref=c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "patch": "@@ -74,9 +74,8 @@ impl PartialEq for Constant {\n                 }\n             },\n             (&Constant::Bool(l), &Constant::Bool(r)) => l == r,\n-            (&Constant::Vec(ref l), &Constant::Vec(ref r)) => l == r,\n+            (&Constant::Vec(ref l), &Constant::Vec(ref r)) | (&Constant::Tuple(ref l), &Constant::Tuple(ref r)) => l == r,\n             (&Constant::Repeat(ref lv, ref ls), &Constant::Repeat(ref rv, ref rs)) => ls == rs && lv == rv,\n-            (&Constant::Tuple(ref l), &Constant::Tuple(ref r)) => l == r,\n             _ => false, // TODO: Are there inter-type equalities?\n         }\n     }"}, {"sha": "5a693ce5524e6a42df12a7e4022ca232761297f6", "filename": "clippy_lints/src/copies.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fcopies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fcopies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcopies.rs?ref=c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "patch": "@@ -325,10 +325,13 @@ where\n \n     for expr in exprs {\n         match map.entry(hash(expr)) {\n-            Entry::Occupied(o) => for o in o.get() {\n-                if eq(o, expr) {\n-                    return Some((o, expr));\n+            Entry::Occupied(mut o) => {\n+                for o in o.get() {\n+                    if eq(o, expr) {\n+                        return Some((o, expr));\n+                    }\n                 }\n+                o.get_mut().push(expr);\n             },\n             Entry::Vacant(v) => {\n                 v.insert(vec![expr]);"}, {"sha": "ea8ecb91d0a630f0e3ea5228a15f37b216e9d2ed", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "patch": "@@ -206,8 +206,7 @@ fn check_doc<'a, Events: Iterator<Item = (usize, pulldown_cmark::Event<'a>)>>(\n             End(Link(_, _)) => in_link = None,\n             Start(_tag) | End(_tag) => (),         // We don't care about other tags\n             Html(_html) | InlineHtml(_html) => (), // HTML is weird, just ignore it\n-            SoftBreak => (),\n-            HardBreak => (),\n+            SoftBreak | HardBreak => (),\n             FootnoteReference(text) | Text(text) => {\n                 if Some(&text) == in_link.as_ref() {\n                     // Probably a link of the form `<http://example.com>`"}, {"sha": "352749d48e13f82360e8fb68122b3e3dbec77e11", "filename": "tests/ui/matches.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/tests%2Fui%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/tests%2Fui%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatches.rs?ref=c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "patch": "@@ -305,6 +305,14 @@ fn match_wild_err_arm() {\n         (Ok(_), Some(x)) => println!(\"ok {}\", x),\n         _ => println!(\"err\")\n     }\n+\n+    // because of a bug, no warning was generated for this case before #2251\n+    match x {\n+        Ok(_tmp) => println!(\"ok\"),\n+        Ok(3) => println!(\"ok\"),\n+        Ok(_) => println!(\"ok\"),\n+        Err(_) => {unreachable!();}\n+    }\n }\n \n fn main() {"}, {"sha": "beb3387d0380de0a923ad82acb9d542d01723869", "filename": "tests/ui/matches.stderr", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/tests%2Fui%2Fmatches.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3ae2ddeb36d59432e97c07f85ac841abf3483b6/tests%2Fui%2Fmatches.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmatches.stderr?ref=c3ae2ddeb36d59432e97c07f85ac841abf3483b6", "patch": "@@ -426,3 +426,21 @@ note: consider refactoring into `(Ok(x), Some(_)) | (Ok(_), Some(x))`\n     |                             ^^^^^^^^^^^^^^^^^^^^\n     = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n+error: this `match` has identical arm bodies\n+   --> $DIR/matches.rs:313:18\n+    |\n+313 |         Ok(_) => println!(\"ok\"),\n+    |                  ^^^^^^^^^^^^^^\n+    |\n+note: same as this\n+   --> $DIR/matches.rs:312:18\n+    |\n+312 |         Ok(3) => println!(\"ok\"),\n+    |                  ^^^^^^^^^^^^^^\n+note: consider refactoring into `Ok(3) | Ok(_)`\n+   --> $DIR/matches.rs:312:18\n+    |\n+312 |         Ok(3) => println!(\"ok\"),\n+    |                  ^^^^^^^^^^^^^^\n+    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n+"}]}