{"sha": "c3601e9860e533c7990d90dbd773a49039bb037e", "node_id": "C_kwDOAAsO6NoAKGMzNjAxZTk4NjBlNTMzYzc5OTBkOTBkYmQ3NzNhNDkwMzliYjAzN2U", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2022-02-07T18:53:31Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2022-02-07T18:53:39Z"}, "message": "Reverse fixups", "tree": {"sha": "695bae6f075bdfa28b5029be912fdbcd3eaa44c6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/695bae6f075bdfa28b5029be912fdbcd3eaa44c6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3601e9860e533c7990d90dbd773a49039bb037e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3601e9860e533c7990d90dbd773a49039bb037e", "html_url": "https://github.com/rust-lang/rust/commit/c3601e9860e533c7990d90dbd773a49039bb037e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3601e9860e533c7990d90dbd773a49039bb037e/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79ebf618ecb097ff4e8b6cc4842ca3f648fe371b", "url": "https://api.github.com/repos/rust-lang/rust/commits/79ebf618ecb097ff4e8b6cc4842ca3f648fe371b", "html_url": "https://github.com/rust-lang/rust/commit/79ebf618ecb097ff4e8b6cc4842ca3f648fe371b"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "0ca30fb79928517788345819f3fa05a2656955af", "filename": "crates/hir_def/src/macro_expansion_tests/proc_macros.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fproc_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fproc_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fproc_macros.rs?ref=c3601e9860e533c7990d90dbd773a49039bb037e", "patch": "@@ -76,7 +76,6 @@ fn foo() {\n #[test]\n fn attribute_macro_syntax_completion_2() {\n     // common case of dot completion while typing\n-    // right now not working\n     check(\n         r#\"\n //- proc_macros: identity_when_valid\n@@ -88,7 +87,7 @@ fn foo() { bar.; blub }\n fn foo() { bar.; blub }\n \n fn foo() {\n-    bar.;\n+    bar. ;\n     blub\n }\"##]],\n     );"}, {"sha": "935fb30fa9feb39172f6d6666d9dca4853d3d507", "filename": "crates/hir_expand/src/db.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fhir_expand%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fhir_expand%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_expand%2Fsrc%2Fdb.rs?ref=c3601e9860e533c7990d90dbd773a49039bb037e", "patch": "@@ -430,7 +430,7 @@ fn macro_expand(db: &dyn AstDatabase, id: MacroCallId) -> ExpandResult<Option<Ar\n         // be reported at the definition site (when we construct a def map).\n         Err(err) => return ExpandResult::str_err(format!(\"invalid macro definition: {}\", err)),\n     };\n-    let ExpandResult { value: tt, err } = expander.expand(db, id, &macro_arg.0);\n+    let ExpandResult { value: mut tt, err } = expander.expand(db, id, &macro_arg.0);\n     // Set a hard limit for the expanded tt\n     let count = tt.count();\n     // XXX: Make ExpandResult a real error and use .map_err instead?\n@@ -442,6 +442,8 @@ fn macro_expand(db: &dyn AstDatabase, id: MacroCallId) -> ExpandResult<Option<Ar\n         ));\n     }\n \n+    fixup::reverse_fixups(&mut tt);\n+\n     ExpandResult { value: Some(Arc::new(tt)), err }\n }\n "}, {"sha": "d3489813e175e6742405f63840b3d978fd14d538", "filename": "crates/mbe/src/syntax_bridge.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3601e9860e533c7990d90dbd773a49039bb037e/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs?ref=c3601e9860e533c7990d90dbd773a49039bb037e", "patch": "@@ -1,7 +1,7 @@\n //! Conversions between [`SyntaxNode`] and [`tt::TokenTree`].\n \n use rustc_hash::{FxHashMap, FxHashSet};\n-use stdx::{non_empty_vec::NonEmptyVec, always};\n+use stdx::{always, non_empty_vec::NonEmptyVec};\n use syntax::{\n     ast::{self, make::tokens::doc_comment},\n     AstToken, Parse, PreorderWithTokens, SmolStr, SyntaxElement, SyntaxKind,"}]}