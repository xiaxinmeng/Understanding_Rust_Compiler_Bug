{"sha": "228a8bd168ae897283c00e55c799535fa1e5d1b2", "node_id": "C_kwDOAAsO6NoAKDIyOGE4YmQxNjhhZTg5NzI4M2MwMGU1NWM3OTk1MzVmYTFlNWQxYjI", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-09-12T09:51:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-12T09:51:35Z"}, "message": "Rollup merge of #101701 - aDotInTheVoid:rdj-impl-tests, r=GuillaumeGomez\n\nRustdoc-Json: Add tests for trait impls.", "tree": {"sha": "89673f58439e390d9ec5783c75d22add0bbcde64", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/89673f58439e390d9ec5783c75d22add0bbcde64"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/228a8bd168ae897283c00e55c799535fa1e5d1b2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjHwEnCRBK7hj4Ov3rIwAAP9kIAHsTIY+x/zwsibkkyBagF1m/\nBaPnyo55FBMcFsIVz3+s9LAINRE+HsAXgjUx9pgUv6JuPXUALe1JanqUdUQEm+dg\nv02yM7Jb3DfromRF93nigAaMEL0Lf/laVuec3va3N/UvdxeQopD09YWGS7tqkjwr\nCiQEdAhlwDkrNlhfMJ/TRBlU9jvTIDtGLdrXNqkv2JAE9hObkTvIZZBi++lVu9Ck\nh5Wm65U0BVMnBHJLZ6/xZreOQ1lnq6YsMA+GaL3A7hmttPJxveHg4bJjQGThMyvk\nTPZi8K9KESZq/xNAEn9Hhm46ioDFb6iG+falaam2/QIs4zM2Ggl26l4gmctvaxQ=\n=huj/\n-----END PGP SIGNATURE-----\n", "payload": "tree 89673f58439e390d9ec5783c75d22add0bbcde64\nparent 8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6\nparent c3fcfa82728cb55b8e4dc6e2c8492d0ed79e174a\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1662976295 +0530\ncommitter GitHub <noreply@github.com> 1662976295 +0530\n\nRollup merge of #101701 - aDotInTheVoid:rdj-impl-tests, r=GuillaumeGomez\n\nRustdoc-Json: Add tests for trait impls.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/228a8bd168ae897283c00e55c799535fa1e5d1b2", "html_url": "https://github.com/rust-lang/rust/commit/228a8bd168ae897283c00e55c799535fa1e5d1b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/228a8bd168ae897283c00e55c799535fa1e5d1b2/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "html_url": "https://github.com/rust-lang/rust/commit/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6"}, {"sha": "c3fcfa82728cb55b8e4dc6e2c8492d0ed79e174a", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3fcfa82728cb55b8e4dc6e2c8492d0ed79e174a", "html_url": "https://github.com/rust-lang/rust/commit/c3fcfa82728cb55b8e4dc6e2c8492d0ed79e174a"}], "stats": {"total": 81, "additions": 81, "deletions": 0}, "files": [{"sha": "832d0fce599095f371a70ec2cdd742a8fad72ca4", "filename": "src/test/rustdoc-json/impls/auxiliary/foreign_struct.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_struct.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1 @@\n+pub struct ForeignStruct;"}, {"sha": "2c81bee61282efc42db66b6b3a6fae0b92f71e0a", "filename": "src/test/rustdoc-json/impls/auxiliary/foreign_trait.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Fauxiliary%2Fforeign_trait.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1 @@\n+pub trait ForeignTrait {}"}, {"sha": "290c2d571e87457365f445cfdfe6ca34def7e786", "filename": "src/test/rustdoc-json/impls/foreign_for_local.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fforeign_for_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Fforeign_for_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Fforeign_for_local.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1,18 @@\n+// aux-build: foreign_trait.rs\n+extern crate foreign_trait;\n+\n+/// ForeignTrait id hack\n+pub use foreign_trait::ForeignTrait as _;\n+// @set ForeignTrait = \"$.index[*][?(@.docs=='ForeignTrait id hack')].inner.id\"\n+\n+pub struct LocalStruct;\n+// @set LocalStruct = \"$.index[*][?(@.name=='LocalStruct')].id\"\n+\n+/// foreign for local\n+impl foreign_trait::ForeignTrait for LocalStruct {}\n+\n+// @set impl = \"$.index[*][?(@.docs=='foreign for local')].id\"\n+// @is \"$.index[*][?(@.docs=='foreign for local')].inner.for.inner.id\" $LocalStruct\n+// @is \"$.index[*][?(@.docs=='foreign for local')].inner.trait.id\" $ForeignTrait\n+\n+// @has \"$.index[*][?(@.name=='LocalStruct')].inner.impls[*]\" $impl"}, {"sha": "74f2f08b5a42f56e742cfde0f4401e7831f3d4a7", "filename": "src/test/rustdoc-json/impls/local_for_foreign.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_foreign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_foreign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_foreign.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1,18 @@\n+// aux-build: foreign_struct.rs\n+extern crate foreign_struct;\n+\n+/// ForeignStruct id hack\n+pub use foreign_struct::ForeignStruct as _;\n+// @set ForeignStruct = \"$.index[*][?(@.docs=='ForeignStruct id hack')].inner.id\"\n+\n+pub trait LocalTrait {}\n+// @set LocalTrait = \"$.index[*][?(@.name=='LocalTrait')].id\"\n+\n+/// local for foreign\n+impl LocalTrait for foreign_struct::ForeignStruct {}\n+\n+// @set impl = \"$.index[*][?(@.docs=='local for foreign')].id\"\n+// @is \"$.index[*][?(@.docs=='local for foreign')].inner.trait.id\" $LocalTrait\n+// @is \"$.index[*][?(@.docs=='local for foreign')].inner.for.inner.id\" $ForeignStruct\n+\n+// @is \"$.index[*][?(@.name=='LocalTrait')].inner.implementations[*]\" $impl"}, {"sha": "93dedb7ec92d2d3493d3806390196f782c9fcec2", "filename": "src/test/rustdoc-json/impls/local_for_local.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1,15 @@\n+#![feature(no_core)]\n+#![no_core]\n+\n+// @set struct = \"$.index[*][?(@.name=='Struct')].id\"\n+pub struct Struct;\n+// @set trait = \"$.index[*][?(@.name=='Trait')].id\"\n+pub trait Trait {}\n+// @set impl = \"$.index[*][?(@.docs=='impl')].id\"\n+/// impl\n+impl Trait for Struct {}\n+\n+// @is \"$.index[*][?(@.name=='Struct')].inner.impls[*]\" $impl\n+// @is \"$.index[*][?(@.name=='Trait')].inner.implementations[*]\" $impl\n+// @is \"$.index[*][?(@.docs=='impl')].inner.trait.id\" $trait\n+// @is \"$.index[*][?(@.docs=='impl')].inner.for.inner.id\" $struct"}, {"sha": "38e7e2658dfd5f474a9585d16ec92ad939dd05c9", "filename": "src/test/rustdoc-json/impls/local_for_local_primitive.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local_primitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local_primitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_local_primitive.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1,21 @@\n+#![feature(no_core)]\n+#![feature(rustdoc_internals)]\n+#![no_core]\n+\n+// @set Local = \"$.index[*][?(@.name=='Local')].id\"\n+pub trait Local {}\n+\n+// @is \"$.index[*][?(@.docs=='Local for bool')].inner.trait.id\" $Local\n+// @is \"$.index[*][?(@.docs=='Local for bool')].inner.for.kind\" '\"primitive\"'\n+// @is \"$.index[*][?(@.docs=='Local for bool')].inner.for.inner\" '\"bool\"'\n+/// Local for bool\n+impl Local for bool {}\n+\n+// @set impl =  \"$.index[*][?(@.docs=='Local for bool')].id\"\n+// @is \"$.index[*][?(@.name=='Local')].inner.implementations[*]\" $impl\n+\n+// FIXME(#101695): Test bool's `impls` include \"Local for bool\"\n+// @has \"$.index[*][?(@.name=='bool')]\"\n+#[doc(primitive = \"bool\")]\n+/// Boolean docs\n+mod prim_bool {}"}, {"sha": "7702a526fd84445d8a83a126bf2b483f3afd1005", "filename": "src/test/rustdoc-json/impls/local_for_primitive.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_primitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/228a8bd168ae897283c00e55c799535fa1e5d1b2/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_primitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fimpls%2Flocal_for_primitive.rs?ref=228a8bd168ae897283c00e55c799535fa1e5d1b2", "patch": "@@ -0,0 +1,7 @@\n+// @set local = \"$.index[*][?(@.name=='Local')]\"\n+pub trait Local {}\n+\n+// @set impl = \"$.index[*][?(@.docs=='local for bool')].id\"\n+// @is \"$.index[*][?(@.name=='Local')].inner.implementations[*]\" $impl\n+/// local for bool\n+impl Local for bool {}"}]}