{"sha": "2f8a8d3468050f724473900bcfcc75a110314059", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmOGE4ZDM0NjgwNTBmNzI0NDczOTAwYmNmY2M3NWExMTAzMTQwNTk=", "commit": {"author": {"name": "nahuakang", "email": "kangnahua@gmail.com", "date": "2021-02-04T09:51:40Z"}, "committer": {"name": "nahuakang", "email": "kangnahua@gmail.com", "date": "2021-02-04T09:51:40Z"}, "message": "Improve lint message; add note for future autofixable updates", "tree": {"sha": "eaa4aee5911a318a13bf203575aab44aa906b664", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eaa4aee5911a318a13bf203575aab44aa906b664"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f8a8d3468050f724473900bcfcc75a110314059", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f8a8d3468050f724473900bcfcc75a110314059", "html_url": "https://github.com/rust-lang/rust/commit/2f8a8d3468050f724473900bcfcc75a110314059", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f8a8d3468050f724473900bcfcc75a110314059/comments", "author": {"login": "nahuakang", "id": 18533347, "node_id": "MDQ6VXNlcjE4NTMzMzQ3", "avatar_url": "https://avatars.githubusercontent.com/u/18533347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nahuakang", "html_url": "https://github.com/nahuakang", "followers_url": "https://api.github.com/users/nahuakang/followers", "following_url": "https://api.github.com/users/nahuakang/following{/other_user}", "gists_url": "https://api.github.com/users/nahuakang/gists{/gist_id}", "starred_url": "https://api.github.com/users/nahuakang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nahuakang/subscriptions", "organizations_url": "https://api.github.com/users/nahuakang/orgs", "repos_url": "https://api.github.com/users/nahuakang/repos", "events_url": "https://api.github.com/users/nahuakang/events{/privacy}", "received_events_url": "https://api.github.com/users/nahuakang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nahuakang", "id": 18533347, "node_id": "MDQ6VXNlcjE4NTMzMzQ3", "avatar_url": "https://avatars.githubusercontent.com/u/18533347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nahuakang", "html_url": "https://github.com/nahuakang", "followers_url": "https://api.github.com/users/nahuakang/followers", "following_url": "https://api.github.com/users/nahuakang/following{/other_user}", "gists_url": "https://api.github.com/users/nahuakang/gists{/gist_id}", "starred_url": "https://api.github.com/users/nahuakang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nahuakang/subscriptions", "organizations_url": "https://api.github.com/users/nahuakang/orgs", "repos_url": "https://api.github.com/users/nahuakang/repos", "events_url": "https://api.github.com/users/nahuakang/events{/privacy}", "received_events_url": "https://api.github.com/users/nahuakang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78ef0f2f6c17f5933ab4dbab544b76f7da742467", "url": "https://api.github.com/repos/rust-lang/rust/commits/78ef0f2f6c17f5933ab4dbab544b76f7da742467", "html_url": "https://github.com/rust-lang/rust/commit/78ef0f2f6c17f5933ab4dbab544b76f7da742467"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "663c2df23e22bd77ea0cfe1b3cdfbe0b3f3756ae", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f8a8d3468050f724473900bcfcc75a110314059/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f8a8d3468050f724473900bcfcc75a110314059/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=2f8a8d3468050f724473900bcfcc75a110314059", "patch": "@@ -2051,7 +2051,7 @@ fn check_manual_flatten<'tcx>(\n                         );\n                         diag.span_help(\n                             inner_expr.span,\n-                            \"also remove the `if let` statement in the for loop\",\n+                            \"...and remove the `if let` statement in the for loop\",\n                         );\n                     }\n                 );"}, {"sha": "cff68eca933743338acd6b184c3b25c0883aa9c1", "filename": "tests/ui/manual_flatten.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2f8a8d3468050f724473900bcfcc75a110314059/tests%2Fui%2Fmanual_flatten.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f8a8d3468050f724473900bcfcc75a110314059/tests%2Fui%2Fmanual_flatten.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_flatten.rs?ref=2f8a8d3468050f724473900bcfcc75a110314059", "patch": "@@ -25,7 +25,7 @@ fn main() {\n     }\n \n     // Test for loop over an implicit reference\n-    // Note: If `clippy::manual_flatten` is made autofixable, this case will\n+    // Note: if `clippy::manual_flatten` is made autofixable, this case will\n     // lead to a follow-up lint `clippy::into_iter_on_ref`\n     let z = &y;\n     for n in z {\n@@ -44,6 +44,8 @@ fn main() {\n     }\n \n     // Using the `None` variant should not trigger the lint\n+    // Note: for an autofixable suggestion, the binding in the for loop has to take the\n+    // name of the binding in the `if let`\n     let z = vec![Some(1), Some(2), Some(3)];\n     for n in z {\n         if n.is_none() {"}, {"sha": "855dd9130e2fbbdc8e9c77047a4d69d1c5ebae9e", "filename": "tests/ui/manual_flatten.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2f8a8d3468050f724473900bcfcc75a110314059/tests%2Fui%2Fmanual_flatten.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2f8a8d3468050f724473900bcfcc75a110314059/tests%2Fui%2Fmanual_flatten.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_flatten.stderr?ref=2f8a8d3468050f724473900bcfcc75a110314059", "patch": "@@ -12,7 +12,7 @@ LL | |     }\n    | |_____^\n    |\n    = note: `-D clippy::manual-flatten` implied by `-D warnings`\n-help: also remove the `if let` statement in the for loop\n+help: ...and remove the `if let` statement in the for loop\n   --> $DIR/manual_flatten.rs:7:9\n    |\n LL | /         if let Some(y) = n {\n@@ -33,7 +33,7 @@ LL | |         };\n LL | |     }\n    | |_____^\n    |\n-help: also remove the `if let` statement in the for loop\n+help: ...and remove the `if let` statement in the for loop\n   --> $DIR/manual_flatten.rs:15:9\n    |\n LL | /         if let Ok(n) = n {\n@@ -54,7 +54,7 @@ LL | |         }\n LL | |     }\n    | |_____^\n    |\n-help: also remove the `if let` statement in the for loop\n+help: ...and remove the `if let` statement in the for loop\n   --> $DIR/manual_flatten.rs:22:9\n    |\n LL | /         if let Ok(n) = n {\n@@ -75,7 +75,7 @@ LL | |         }\n LL | |     }\n    | |_____^\n    |\n-help: also remove the `if let` statement in the for loop\n+help: ...and remove the `if let` statement in the for loop\n   --> $DIR/manual_flatten.rs:32:9\n    |\n LL | /         if let Ok(n) = n {\n@@ -96,7 +96,7 @@ LL | |         }\n LL | |     }\n    | |_____^\n    |\n-help: also remove the `if let` statement in the for loop\n+help: ...and remove the `if let` statement in the for loop\n   --> $DIR/manual_flatten.rs:41:9\n    |\n LL | /         if let Some(m) = n {"}]}