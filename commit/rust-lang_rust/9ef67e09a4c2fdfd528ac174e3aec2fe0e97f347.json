{"sha": "9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "node_id": "MDY6Q29tbWl0NzI0NzEyOjllZjY3ZTA5YTRjMmZkZmQ1MjhhYzE3NGUzYWVjMmZlMGU5N2YzNDc=", "commit": {"author": {"name": "\u00d6mer Sinan A\u011facan", "email": "omeragacan@gmail.com", "date": "2021-02-18T13:47:01Z"}, "committer": {"name": "\u00d6mer Sinan A\u011facan", "email": "omeragacan@gmail.com", "date": "2021-02-18T13:47:01Z"}, "message": "Add regression test", "tree": {"sha": "eac0fb4d95f52530f6260f6b569032339f3cdb54", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eac0fb4d95f52530f6260f6b569032339f3cdb54"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "html_url": "https://github.com/rust-lang/rust/commit/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/comments", "author": {"login": "osa1", "id": 448274, "node_id": "MDQ6VXNlcjQ0ODI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/448274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osa1", "html_url": "https://github.com/osa1", "followers_url": "https://api.github.com/users/osa1/followers", "following_url": "https://api.github.com/users/osa1/following{/other_user}", "gists_url": "https://api.github.com/users/osa1/gists{/gist_id}", "starred_url": "https://api.github.com/users/osa1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osa1/subscriptions", "organizations_url": "https://api.github.com/users/osa1/orgs", "repos_url": "https://api.github.com/users/osa1/repos", "events_url": "https://api.github.com/users/osa1/events{/privacy}", "received_events_url": "https://api.github.com/users/osa1/received_events", "type": "User", "site_admin": false}, "committer": {"login": "osa1", "id": 448274, "node_id": "MDQ6VXNlcjQ0ODI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/448274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osa1", "html_url": "https://github.com/osa1", "followers_url": "https://api.github.com/users/osa1/followers", "following_url": "https://api.github.com/users/osa1/following{/other_user}", "gists_url": "https://api.github.com/users/osa1/gists{/gist_id}", "starred_url": "https://api.github.com/users/osa1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osa1/subscriptions", "organizations_url": "https://api.github.com/users/osa1/orgs", "repos_url": "https://api.github.com/users/osa1/repos", "events_url": "https://api.github.com/users/osa1/events{/privacy}", "received_events_url": "https://api.github.com/users/osa1/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "15fdccc6ae636b0f5663e2e75e0a115d60b8633c", "url": "https://api.github.com/repos/rust-lang/rust/commits/15fdccc6ae636b0f5663e2e75e0a115d60b8633c", "html_url": "https://github.com/rust-lang/rust/commit/15fdccc6ae636b0f5663e2e75e0a115d60b8633c"}], "stats": {"total": 53, "additions": 53, "deletions": 0}, "files": [{"sha": "5683c45adf26d0c07c1b54e042e6cf228bd4ea6a", "filename": "src/test/ui/suggestions/auxiliary/issue-81839.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fauxiliary%2Fissue-81839.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fauxiliary%2Fissue-81839.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fauxiliary%2Fissue-81839.rs?ref=9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "patch": "@@ -0,0 +1,9 @@\n+// edition:2018\n+\n+pub struct Test {}\n+\n+impl Test {\n+    pub async fn answer_str(&self, _s: &str) -> Test {\n+        Test {}\n+    }\n+}"}, {"sha": "0b9b7aefe735dd123727de92e2503756812ca259", "filename": "src/test/ui/suggestions/issue-81839.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.rs?ref=9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "patch": "@@ -0,0 +1,17 @@\n+// aux-build:issue-81839.rs\n+// edition:2018\n+\n+extern crate issue_81839;\n+\n+async fn test(ans: &str, num: i32, cx: &issue_81839::Test) -> u32 {\n+    match num {\n+        1 => {\n+            cx.answer_str(\"hi\");\n+        }\n+        _ => cx.answer_str(\"hi\"), //~ `match` arms have incompatible types\n+    }\n+\n+    1\n+}\n+\n+fn main() {}"}, {"sha": "1a289d39e446786d16a0f254c4ca7754d3d91fee", "filename": "src/test/ui/suggestions/issue-81839.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fissue-81839.stderr?ref=9ef67e09a4c2fdfd528ac174e3aec2fe0e97f347", "patch": "@@ -0,0 +1,27 @@\n+error[E0308]: `match` arms have incompatible types\n+  --> $DIR/issue-81839.rs:11:14\n+   |\n+LL | /     match num {\n+LL | |         1 => {\n+LL | |             cx.answer_str(\"hi\");\n+   | |             --------------------\n+   | |             |                  |\n+   | |             |                  help: consider removing this semicolon\n+   | |             this is found to be of type `()`\n+LL | |         }\n+LL | |         _ => cx.answer_str(\"hi\"),\n+   | |              ^^^^^^^^^^^^^^^^^^^ expected `()`, found opaque type\n+LL | |     }\n+   | |_____- `match` arms have incompatible types\n+   | \n+  ::: $DIR/auxiliary/issue-81839.rs:6:49\n+   |\n+LL |       pub async fn answer_str(&self, _s: &str) -> Test {\n+   |                                                   ---- the `Output` of this `async fn`'s found opaque type\n+   |\n+   = note:     expected type `()`\n+           found opaque type `impl Future`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}]}