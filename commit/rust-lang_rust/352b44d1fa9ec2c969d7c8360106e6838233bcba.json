{"sha": "352b44d1fa9ec2c969d7c8360106e6838233bcba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1MmI0NGQxZmE5ZWMyYzk2OWQ3YzgzNjAxMDZlNjgzODIzM2JjYmE=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-03-29T10:50:17Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-03-29T16:36:01Z"}, "message": "Remove unnecessary dependencies on rustc_llvm.", "tree": {"sha": "46c6a6d5ca7c326e50af7071afae632ed1339aac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46c6a6d5ca7c326e50af7071afae632ed1339aac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/352b44d1fa9ec2c969d7c8360106e6838233bcba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/352b44d1fa9ec2c969d7c8360106e6838233bcba", "html_url": "https://github.com/rust-lang/rust/commit/352b44d1fa9ec2c969d7c8360106e6838233bcba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/352b44d1fa9ec2c969d7c8360106e6838233bcba/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cad964a62655110753d73527df7ad808a235fc84", "url": "https://api.github.com/repos/rust-lang/rust/commits/cad964a62655110753d73527df7ad808a235fc84", "html_url": "https://github.com/rust-lang/rust/commit/cad964a62655110753d73527df7ad808a235fc84"}], "stats": {"total": 26, "additions": 7, "deletions": 19}, "files": [{"sha": "f5622aef55122f10770a0b2d620c2e96086e7fb8", "filename": "mk/crates.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/mk%2Fcrates.mk", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/mk%2Fcrates.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcrates.mk?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -94,9 +94,9 @@ DEPS_syntax_ext := syntax fmt_macros\n DEPS_rustc_const_eval := std syntax\n \n DEPS_rustc := syntax fmt_macros flate arena serialize getopts rbml rustc_front\\\n-              log graphviz rustc_llvm rustc_back rustc_data_structures\\\n+              log graphviz rustc_back rustc_data_structures\\\n \t\t  \t  rustc_const_eval\n-DEPS_rustc_back := std syntax rustc_llvm rustc_front flate log libc\n+DEPS_rustc_back := std syntax rustc_front flate log libc\n DEPS_rustc_borrowck := rustc rustc_front rustc_mir log graphviz syntax\n DEPS_rustc_data_structures := std log serialize\n DEPS_rustc_driver := arena flate getopts graphviz libc rustc rustc_back rustc_borrowck \\"}, {"sha": "d2dc5f1ed93e08c4a1edf87efca5d091e74fc49a", "filename": "src/librustc/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2FCargo.toml?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -21,6 +21,5 @@ rustc_bitflags = { path = \"../librustc_bitflags\" }\n rustc_const_eval = { path = \"../librustc_const_eval\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_front = { path = \"../librustc_front\" }\n-rustc_llvm = { path = \"../librustc_llvm\" }\n serialize = { path = \"../libserialize\" }\n syntax = { path = \"../libsyntax\" }"}, {"sha": "6b5f889fcfb8582e49d77316a4aeb0dbf08235c8", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -50,7 +50,6 @@ extern crate getopts;\n extern crate graphviz;\n extern crate libc;\n extern crate rbml;\n-pub extern crate rustc_llvm as llvm;\n extern crate rustc_back;\n extern crate rustc_front;\n extern crate rustc_data_structures;\n@@ -140,10 +139,6 @@ pub mod util {\n     pub mod fs;\n }\n \n-pub mod lib {\n-    pub use llvm;\n-}\n-\n // A private module so that macro-expanded idents like\n // `::rustc::lint::Lint` will also work in `rustc` itself.\n //"}, {"sha": "0eef4b5221aa5b0202298b3f82233e4947b3fbd1", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -38,8 +38,6 @@ use std::env;\n use std::fmt;\n use std::path::PathBuf;\n \n-use llvm;\n-\n pub struct Config {\n     pub target: Target,\n     pub int_type: IntTy,\n@@ -1052,10 +1050,6 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n     let dump_dep_graph = debugging_opts.dump_dep_graph;\n     let no_analysis = debugging_opts.no_analysis;\n \n-    if debugging_opts.debug_llvm {\n-        unsafe { llvm::LLVMSetDebug(1); }\n-    }\n-\n     let mut output_types = HashMap::new();\n     if !debugging_opts.parse_only && !no_trans {\n         for list in matches.opt_strs(\"emit\") {"}, {"sha": "2cf6cbc4bcfa1780626bc4675cffbed4aa0ac39e", "filename": "src/librustc_back/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_back%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_back%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2FCargo.toml?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -11,7 +11,6 @@ crate-type = [\"dylib\"]\n [dependencies]\n syntax = { path = \"../libsyntax\" }\n serialize = { path = \"../libserialize\" }\n-rustc_llvm = { path = \"../librustc_llvm\" }\n rustc_front = { path = \"../librustc_front\" }\n log = { path = \"../liblog\" }\n "}, {"sha": "80dec2cd28153c23e7f7f4ce6ff6e87eb6207389", "filename": "src/librustc_back/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_back%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_back%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Flib.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -45,7 +45,6 @@\n extern crate syntax;\n extern crate libc;\n extern crate serialize;\n-extern crate rustc_llvm;\n extern crate rustc_front;\n #[macro_use] extern crate log;\n "}, {"sha": "057a34c27b1c7f434d41bb06cf4a98c1de65e877", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -166,6 +166,10 @@ pub fn run_compiler<'a>(args: &[String],\n \n     let sopts = config::build_session_options(&matches);\n \n+    if sopts.debugging_opts.debug_llvm {\n+        unsafe { llvm::LLVMSetDebug(1); }\n+    }\n+\n     let descriptions = diagnostics_registry();\n \n     do_or_return!(callbacks.early_callback(&matches,"}, {"sha": "abdc3b3d6364194b698acc5b86d7fb634feeb386", "filename": "src/librustc_platform_intrinsics/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_platform_intrinsics%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_platform_intrinsics%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_platform_intrinsics%2FCargo.toml?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -9,5 +9,4 @@ path = \"lib.rs\"\n crate-type = [\"dylib\"]\n \n [dependencies]\n-rustc_llvm = { path = \"../librustc_llvm\" }\n rustc = { path = \"../librustc\" }"}, {"sha": "fdd9b7d8fd3f37ed1de8ce83ded10fe85a21c2eb", "filename": "src/librustc_platform_intrinsics/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_platform_intrinsics%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Flibrustc_platform_intrinsics%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_platform_intrinsics%2Flib.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -16,7 +16,6 @@\n #![cfg_attr(not(stage0), deny(warnings))]\n #![allow(bad_style)]\n \n-extern crate rustc_llvm as llvm;\n extern crate rustc;\n \n use rustc::ty::TyCtxt;"}, {"sha": "81ad276ca6874727c2604b91d9bfc890c4ab09ea", "filename": "src/test/run-make/execution-engine/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Ftest%2Frun-make%2Fexecution-engine%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/352b44d1fa9ec2c969d7c8360106e6838233bcba/src%2Ftest%2Frun-make%2Fexecution-engine%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fexecution-engine%2Ftest.rs?ref=352b44d1fa9ec2c969d7c8360106e6838233bcba", "patch": "@@ -16,6 +16,7 @@ extern crate rustc;\n extern crate rustc_driver;\n extern crate rustc_front;\n extern crate rustc_lint;\n+extern crate rustc_llvm as llvm;\n extern crate rustc_metadata;\n extern crate rustc_resolve;\n #[macro_use] extern crate syntax;\n@@ -28,7 +29,6 @@ use std::thread::Builder;\n \n use rustc::dep_graph::DepGraph;\n use rustc::front::map as ast_map;\n-use rustc::llvm;\n use rustc::middle::cstore::{CrateStore, LinkagePreference};\n use rustc::ty;\n use rustc::session::config::{self, basic_options, build_configuration, Input, Options};"}]}