{"sha": "5fe77e59979e7fa0a83db18c203875de71b5a44d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmZTc3ZTU5OTc5ZTdmYTBhODNkYjE4YzIwMzg3NWRlNzFiNWE0NGQ=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-05-12T09:41:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-05-12T09:41:10Z"}, "message": "Rollup merge of #71928 - mibac138:strikethrough, r=GuillaumeGomez\n\nAdd strikethrough support to rustdoc\n\nImplements uncontroversial part of #71183.\nr? @GuillaumeGomez", "tree": {"sha": "ef09f7a3acbe8a2df97023a9186131dd96424065", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef09f7a3acbe8a2df97023a9186131dd96424065"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fe77e59979e7fa0a83db18c203875de71b5a44d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeum82CRBK7hj4Ov3rIwAAdHIIABXu/DxKOJnoLJFbsBphDG8V\nvFZMF5tNK4JF9gn7a2rzIMChu8fl7Trqdr3RyfCt3Y0kyekZxvQaVxoOe64NGli1\nBi3Y4BkI/DHsvi4XJ4Eu3NUJ+RJAobXN3d+uFbKxp2Ia3fovfs9GQIwrelNaFczL\n19SR7Qtg4jB2/ZGfGFSvRqx/B1hvEufPXB/FP+c8CxWfgCU43lTOqz2WST8Ffi+p\nbI0AMp+eeFUgxdRT2X7IMpv1xsx9UMZ+x+IWz9gmYjebplJZS3RwxYRCj3S5DUd0\ngwlv1gPodRQaEVeTV/BJWtM3z8IwOjo480XCJVKuxqOi8pV6ZMZ0WPFc2pQXR80=\n=Nnyw\n-----END PGP SIGNATURE-----\n", "payload": "tree ef09f7a3acbe8a2df97023a9186131dd96424065\nparent 2a1581c50c5af46a7760f0ce9fe93d5b52818940\nparent bbda107436c01204614dce4cff70a0b475945a9d\nauthor Dylan DPC <dylan.dpc@gmail.com> 1589276470 +0200\ncommitter GitHub <noreply@github.com> 1589276470 +0200\n\nRollup merge of #71928 - mibac138:strikethrough, r=GuillaumeGomez\n\nAdd strikethrough support to rustdoc\n\nImplements uncontroversial part of #71183.\nr? @GuillaumeGomez\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fe77e59979e7fa0a83db18c203875de71b5a44d", "html_url": "https://github.com/rust-lang/rust/commit/5fe77e59979e7fa0a83db18c203875de71b5a44d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fe77e59979e7fa0a83db18c203875de71b5a44d/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2a1581c50c5af46a7760f0ce9fe93d5b52818940", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a1581c50c5af46a7760f0ce9fe93d5b52818940", "html_url": "https://github.com/rust-lang/rust/commit/2a1581c50c5af46a7760f0ce9fe93d5b52818940"}, {"sha": "bbda107436c01204614dce4cff70a0b475945a9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbda107436c01204614dce4cff70a0b475945a9d", "html_url": "https://github.com/rust-lang/rust/commit/bbda107436c01204614dce4cff70a0b475945a9d"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "c129e54c0f28ae3e92f5748c073ce6aa569fc9fe", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/5fe77e59979e7fa0a83db18c203875de71b5a44d/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe77e59979e7fa0a83db18c203875de71b5a44d/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=5fe77e59979e7fa0a83db18c203875de71b5a44d", "patch": "@@ -44,7 +44,7 @@ use pulldown_cmark::{html, CodeBlockKind, CowStr, Event, Options, Parser, Tag};\n mod tests;\n \n fn opts() -> Options {\n-    Options::ENABLE_TABLES | Options::ENABLE_FOOTNOTES\n+    Options::ENABLE_TABLES | Options::ENABLE_FOOTNOTES | Options::ENABLE_STRIKETHROUGH\n }\n \n /// When `to_string` is called, this struct will emit the HTML corresponding to\n@@ -933,7 +933,11 @@ impl MarkdownSummaryLine<'_> {\n             }\n         };\n \n-        let p = Parser::new_with_broken_link_callback(md, Options::empty(), Some(&replacer));\n+        let p = Parser::new_with_broken_link_callback(\n+            md,\n+            Options::ENABLE_STRIKETHROUGH,\n+            Some(&replacer),\n+        );\n \n         let mut s = String::new();\n \n@@ -975,7 +979,11 @@ pub fn plain_summary_line(md: &str) -> String {\n         }\n     }\n     let mut s = String::with_capacity(md.len() * 3 / 2);\n-    let p = ParserWrapper { inner: Parser::new(md), is_in: 0, is_first: true };\n+    let p = ParserWrapper {\n+        inner: Parser::new_ext(md, Options::ENABLE_STRIKETHROUGH),\n+        is_in: 0,\n+        is_first: true,\n+    };\n     p.filter(|t| !t.is_empty()).for_each(|i| s.push_str(&i));\n     s\n }"}, {"sha": "c7855729a98eee20cd78c1c566287add8db9ecee", "filename": "src/test/rustdoc/test-strikethrough.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5fe77e59979e7fa0a83db18c203875de71b5a44d/src%2Ftest%2Frustdoc%2Ftest-strikethrough.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fe77e59979e7fa0a83db18c203875de71b5a44d/src%2Ftest%2Frustdoc%2Ftest-strikethrough.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftest-strikethrough.rs?ref=5fe77e59979e7fa0a83db18c203875de71b5a44d", "patch": "@@ -0,0 +1,6 @@\n+#![crate_name = \"foo\"]\n+\n+// @has foo/fn.f.html\n+// @has - //del \"Y\"\n+/// ~~Y~~\n+pub fn f() {}"}]}