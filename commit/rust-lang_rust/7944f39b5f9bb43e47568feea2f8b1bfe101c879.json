{"sha": "7944f39b5f9bb43e47568feea2f8b1bfe101c879", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5NDRmMzliNWY5YmI0M2U0NzU2OGZlZWEyZjhiMWJmZTEwMWM4Nzk=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-04-09T16:17:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-09T16:17:20Z"}, "message": "Rollup merge of #70939 - varkor:const-generics-regression-tests, r=Centril\n\nAdd two const generics regression tests\n\nCloses https://github.com/rust-lang/rust/issues/66596.\nCloses https://github.com/rust-lang/rust/issues/61522.", "tree": {"sha": "fb7b94165a4a3b0313a0199d00226b7c86d55b6b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb7b94165a4a3b0313a0199d00226b7c86d55b6b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7944f39b5f9bb43e47568feea2f8b1bfe101c879", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJej0qQCRBK7hj4Ov3rIwAAdHIIACL9aefvo8BDO1zvy4gY0FcX\nms75vYrEaI7+OsiHyHbCJ9er4Lu5wD/tOUlakDNWb+NxVWkd33O1Gt0X3ftyMeQr\nPlE7HzuLoLolFTBNhOKjWnrhSR7PsVrcFcPysRKD1gPGP21Zc1LZPl1LTKD06ncR\nmRRKWmBTfkzLDkUcebaKTnGrpSwbSuZHkvldFxfWN0jeo3jLMIbF7xuJAAsDuJvz\nBwENZpwnADnulW7VE8smpMZYgZ/fLdoYnDCx5jEZ6+EM8/kPeUfLc7NDM86CGk4u\n/m1QUoaO7I26E8lAEpCfoi+gak24G9AsL9WPK5b3z5k1kugMj6vMBqV/fudBfIo=\n=VsJU\n-----END PGP SIGNATURE-----\n", "payload": "tree fb7b94165a4a3b0313a0199d00226b7c86d55b6b\nparent cb68d6e38966e31b1c4ca3a4538e0f77f76b05a7\nparent 0f0252260ce50d9a6a3c1afa3c3df7f469cbcb67\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1586449040 +0200\ncommitter GitHub <noreply@github.com> 1586449040 +0200\n\nRollup merge of #70939 - varkor:const-generics-regression-tests, r=Centril\n\nAdd two const generics regression tests\n\nCloses https://github.com/rust-lang/rust/issues/66596.\nCloses https://github.com/rust-lang/rust/issues/61522.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7944f39b5f9bb43e47568feea2f8b1bfe101c879", "html_url": "https://github.com/rust-lang/rust/commit/7944f39b5f9bb43e47568feea2f8b1bfe101c879", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7944f39b5f9bb43e47568feea2f8b1bfe101c879/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cb68d6e38966e31b1c4ca3a4538e0f77f76b05a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/cb68d6e38966e31b1c4ca3a4538e0f77f76b05a7", "html_url": "https://github.com/rust-lang/rust/commit/cb68d6e38966e31b1c4ca3a4538e0f77f76b05a7"}, {"sha": "0f0252260ce50d9a6a3c1afa3c3df7f469cbcb67", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f0252260ce50d9a6a3c1afa3c3df7f469cbcb67", "html_url": "https://github.com/rust-lang/rust/commit/0f0252260ce50d9a6a3c1afa3c3df7f469cbcb67"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "3b627a5e5301b78926733bd24fb2580891e68e4a", "filename": "src/test/ui/const-generics/issue-61522-array-len-succ.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.rs?ref=7944f39b5f9bb43e47568feea2f8b1bfe101c879", "patch": "@@ -0,0 +1,14 @@\n+#![feature(const_generics)]\n+//~^ WARN the feature `const_generics` is incomplete and may cause the compiler to crash\n+\n+pub struct MyArray<const COUNT: usize>([u8; COUNT + 1]);\n+//~^ ERROR constant expression depends on a generic parameter\n+\n+impl<const COUNT: usize> MyArray<COUNT> {\n+    fn inner(&self) -> &[u8; COUNT + 1] {\n+        //~^ ERROR constant expression depends on a generic parameter\n+        &self.0\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "0c4bd4afce4de21293cec1bed51bf795948a1461", "filename": "src/test/ui/const-generics/issue-61522-array-len-succ.stderr", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissue-61522-array-len-succ.stderr?ref=7944f39b5f9bb43e47568feea2f8b1bfe101c879", "patch": "@@ -0,0 +1,26 @@\n+warning: the feature `const_generics` is incomplete and may cause the compiler to crash\n+  --> $DIR/issue-61522-array-len-succ.rs:1:12\n+   |\n+LL | #![feature(const_generics)]\n+   |            ^^^^^^^^^^^^^^\n+   |\n+   = note: `#[warn(incomplete_features)]` on by default\n+\n+error: constant expression depends on a generic parameter\n+  --> $DIR/issue-61522-array-len-succ.rs:4:40\n+   |\n+LL | pub struct MyArray<const COUNT: usize>([u8; COUNT + 1]);\n+   |                                        ^^^^^^^^^^^^^^^\n+   |\n+   = note: this may fail depending on what value the parameter takes\n+\n+error: constant expression depends on a generic parameter\n+  --> $DIR/issue-61522-array-len-succ.rs:8:24\n+   |\n+LL |     fn inner(&self) -> &[u8; COUNT + 1] {\n+   |                        ^^^^^^^^^^^^^^^^\n+   |\n+   = note: this may fail depending on what value the parameter takes\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "b677dcc4af4b4bc103296acdb9debf256a730f1f", "filename": "src/test/ui/const-generics/issue-66596-impl-trait-for-str-const-arg.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.rs?ref=7944f39b5f9bb43e47568feea2f8b1bfe101c879", "patch": "@@ -0,0 +1,16 @@\n+// check-pass\n+\n+#![feature(const_generics)]\n+//~^ WARN the feature `const_generics` is incomplete and may cause the compiler to crash\n+\n+trait Trait<const NAME: &'static str> {\n+    type Assoc;\n+}\n+\n+impl Trait<\"0\"> for () {\n+    type Assoc = ();\n+}\n+\n+fn main() {\n+    let _: <() as Trait<\"0\">>::Assoc = ();\n+}"}, {"sha": "8ab28cc2a858054eaad5094c024c9711aacf2c09", "filename": "src/test/ui/const-generics/issue-66596-impl-trait-for-str-const-arg.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7944f39b5f9bb43e47568feea2f8b1bfe101c879/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissue-66596-impl-trait-for-str-const-arg.stderr?ref=7944f39b5f9bb43e47568feea2f8b1bfe101c879", "patch": "@@ -0,0 +1,8 @@\n+warning: the feature `const_generics` is incomplete and may cause the compiler to crash\n+  --> $DIR/issue-66596-impl-trait-for-str-const-arg.rs:3:12\n+   |\n+LL | #![feature(const_generics)]\n+   |            ^^^^^^^^^^^^^^\n+   |\n+   = note: `#[warn(incomplete_features)]` on by default\n+"}]}