{"sha": "72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d", "node_id": "C_kwDOAAsO6NoAKDcyZmQwOGQ4ZDJkMzkxNWEwZDljYzg2OGRjYTdjNGJjOGVjMjc3NmQ", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-01-14T16:45:57Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-01-14T16:45:57Z"}, "message": "Remove redundant recursion limit", "tree": {"sha": "571863bb2734bc2a44aefc79b3faf225e91a3664", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/571863bb2734bc2a44aefc79b3faf225e91a3664"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d", "html_url": "https://github.com/rust-lang/rust/commit/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ba6cfa9c70c153b71982b07f39aab73a5252ef8", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ba6cfa9c70c153b71982b07f39aab73a5252ef8", "html_url": "https://github.com/rust-lang/rust/commit/9ba6cfa9c70c153b71982b07f39aab73a5252ef8"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "97930871f0d90b6845b66976e70e7af2e3f04def", "filename": "crates/hir_def/src/data.rs", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d/crates%2Fhir_def%2Fsrc%2Fdata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d/crates%2Fhir_def%2Fsrc%2Fdata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fdata.rs?ref=72fd08d8d2d3915a0d9cc868dca7c4bc8ec2776d", "patch": "@@ -358,7 +358,6 @@ fn do_collect(\n         assoc_items.iter().copied(),\n         tree_id,\n         container,\n-        100,\n     );\n \n     let attribute_calls =\n@@ -375,12 +374,7 @@ fn collect_items(\n     assoc_items: impl Iterator<Item = AssocItem>,\n     tree_id: item_tree::TreeId,\n     container: ItemContainerId,\n-    limit: usize,\n ) {\n-    if limit == 0 {\n-        return;\n-    }\n-\n     let item_tree = tree_id.item_tree(db);\n     let crate_graph = db.crate_graph();\n     let cfg_options = &crate_graph[module.krate].cfg_options;\n@@ -401,7 +395,7 @@ fn collect_items(\n             {\n                 attr_calls.push((ast_id, call_id));\n                 let res = expander.enter_expand_id(db, call_id);\n-                collect_macro_items(db, items, attr_calls, module, expander, container, limit, res);\n+                collect_macro_items(db, items, attr_calls, module, expander, container, res);\n                 continue 'items;\n             }\n         }\n@@ -435,9 +429,7 @@ fn collect_items(\n                 let res = expander.enter_expand(db, call);\n \n                 if let Ok(res) = res {\n-                    collect_macro_items(\n-                        db, items, attr_calls, module, expander, container, limit, res,\n-                    );\n+                    collect_macro_items(db, items, attr_calls, module, expander, container, res);\n                 }\n             }\n         }\n@@ -451,15 +443,14 @@ fn collect_macro_items(\n     module: ModuleId,\n     expander: &mut Expander,\n     container: ItemContainerId,\n-    limit: usize,\n     res: ExpandResult<Option<(Mark, ast::MacroItems)>>,\n ) {\n     if let Some((mark, mac)) = res.value {\n         let src: InFile<ast::MacroItems> = expander.to_source(mac);\n         let tree_id = item_tree::TreeId::new(src.file_id, None);\n         let item_tree = tree_id.item_tree(db);\n         let iter = item_tree.top_level_items().iter().filter_map(ModItem::as_assoc_item);\n-        collect_items(db, items, attr_calls, module, expander, iter, tree_id, container, limit - 1);\n+        collect_items(db, items, attr_calls, module, expander, iter, tree_id, container);\n \n         expander.exit(db, mark);\n     }"}]}