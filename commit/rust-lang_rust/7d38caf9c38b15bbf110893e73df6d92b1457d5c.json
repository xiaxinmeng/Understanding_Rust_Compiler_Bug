{"sha": "7d38caf9c38b15bbf110893e73df6d92b1457d5c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkMzhjYWY5YzM4YjE1YmJmMTEwODkzZTczZGY2ZDkyYjE0NTdkNWM=", "commit": {"author": {"name": "Tohava", "email": "tohava@tohava-laptop.(none)", "date": "2010-08-06T14:15:55Z"}, "committer": {"name": "Tohava", "email": "tohava@tohava-laptop.(none)", "date": "2010-08-06T14:15:55Z"}, "message": "Added forgotten handling for alt_type_else, and also for stmt_note", "tree": {"sha": "d180df29154fa6d6fce92d6ecaec369881c85a42", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d180df29154fa6d6fce92d6ecaec369881c85a42"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d38caf9c38b15bbf110893e73df6d92b1457d5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d38caf9c38b15bbf110893e73df6d92b1457d5c", "html_url": "https://github.com/rust-lang/rust/commit/7d38caf9c38b15bbf110893e73df6d92b1457d5c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d38caf9c38b15bbf110893e73df6d92b1457d5c/comments", "author": null, "committer": null, "parents": [{"sha": "4bc173fd3c66bb5b072b6452df8cb383b789c464", "url": "https://api.github.com/repos/rust-lang/rust/commits/4bc173fd3c66bb5b072b6452df8cb383b789c464", "html_url": "https://github.com/rust-lang/rust/commit/4bc173fd3c66bb5b072b6452df8cb383b789c464"}], "stats": {"total": 36, "additions": 26, "deletions": 10}, "files": [{"sha": "efbd62ae20259be6f0863f1ebb72f89559fb799a", "filename": "src/boot/fe/ast.ml", "status": "modified", "additions": 26, "deletions": 10, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/7d38caf9c38b15bbf110893e73df6d92b1457d5c/src%2Fboot%2Ffe%2Fast.ml", "raw_url": "https://github.com/rust-lang/rust/raw/7d38caf9c38b15bbf110893e73df6d92b1457d5c/src%2Fboot%2Ffe%2Fast.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Ffe%2Fast.ml?ref=7d38caf9c38b15bbf110893e73df6d92b1457d5c", "patch": "@@ -254,7 +254,14 @@ and stmt_alt_type =\n     {\n       alt_type_lval: lval;\n       alt_type_arms: type_arm array;\n-      alt_type_else: stmt option;\n+      alt_type_else: block option;\n+    }\n+\n+and stmt_alt_port =\n+    {\n+      (* else lval is a timeout value. *)\n+      alt_port_arms: (lval * lval) array;\n+      alt_port_else: (lval * block) option;\n     }\n \n and block' = stmt array\n@@ -264,12 +271,6 @@ and stmt_decl =\n     DECL_mod_item of (ident * mod_item)\n   | DECL_slot of (slot_key * (slot identified))\n \n-and stmt_alt_port =\n-    {\n-      (* else lval is a timeout value. *)\n-      alt_port_arms: (lval * lval) array;\n-      alt_port_else: (lval * stmt) option;\n-    }\n \n and stmt_while =\n     {\n@@ -1233,10 +1234,25 @@ and fmt_stmt_body (ff:Format.formatter) (s:stmt) : unit =\n           fmt ff \") \";\n           fmt_obr ff;\n           Array.iter (fmt_type_arm ff) at.alt_type_arms;\n+          begin\n+            match at.alt_type_else with \n+                None -> ()\n+              | Some block ->\n+                  fmt ff \"@\\n\";\n+                  fmt_obox ff;\n+                  fmt ff \"case (_) \";\n+                  fmt_obr ff;\n+                  fmt_stmts ff block.node;\n+                  fmt_cbb ff;\n+          end;\n           fmt_cbb ff;\n-          \n       | STMT_alt_port _ -> fmt ff \"?stmt_alt_port?\"\n-      | STMT_note _ -> fmt ff \"?stmt_note?\"\n+      | STMT_note at -> \n+          begin\n+            fmt ff \"note \";\n+            fmt_atom ff at;\n+            fmt ff \";\"\n+          end\n       | STMT_slice (dst, src, slice) -> \n           fmt_lval ff dst;\n           fmt ff \" = \";\n@@ -1245,7 +1261,7 @@ and fmt_stmt_body (ff:Format.formatter) (s:stmt) : unit =\n           fmt_slice ff slice;\n           fmt ff \";\";\n   end\n-\n+    \n and fmt_arm \n     (ff:Format.formatter) \n     (fmt_arm_case_expr : Format.formatter -> unit)"}]}