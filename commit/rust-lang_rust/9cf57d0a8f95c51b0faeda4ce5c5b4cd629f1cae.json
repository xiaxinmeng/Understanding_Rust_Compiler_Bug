{"sha": "9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "node_id": "C_kwDOAAsO6NoAKDljZjU3ZDBhOGY5NWM1MWIwZmFlZGE0Y2U1YzViNGNkNjI5ZjFjYWU", "commit": {"author": {"name": "feniljain", "email": "fkjainco@gmail.com", "date": "2023-04-05T14:33:45Z"}, "committer": {"name": "feniljain", "email": "fkjainco@gmail.com", "date": "2023-04-05T14:33:45Z"}, "message": "fix(needles_return): correct span selection for text replacement", "tree": {"sha": "e3ba6ec127f0c311dfeef390c8eb122c002f38b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3ba6ec127f0c311dfeef390c8eb122c002f38b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "html_url": "https://github.com/rust-lang/rust/commit/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/comments", "author": {"login": "feniljain", "id": 49019259, "node_id": "MDQ6VXNlcjQ5MDE5MjU5", "avatar_url": "https://avatars.githubusercontent.com/u/49019259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feniljain", "html_url": "https://github.com/feniljain", "followers_url": "https://api.github.com/users/feniljain/followers", "following_url": "https://api.github.com/users/feniljain/following{/other_user}", "gists_url": "https://api.github.com/users/feniljain/gists{/gist_id}", "starred_url": "https://api.github.com/users/feniljain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feniljain/subscriptions", "organizations_url": "https://api.github.com/users/feniljain/orgs", "repos_url": "https://api.github.com/users/feniljain/repos", "events_url": "https://api.github.com/users/feniljain/events{/privacy}", "received_events_url": "https://api.github.com/users/feniljain/received_events", "type": "User", "site_admin": false}, "committer": {"login": "feniljain", "id": 49019259, "node_id": "MDQ6VXNlcjQ5MDE5MjU5", "avatar_url": "https://avatars.githubusercontent.com/u/49019259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feniljain", "html_url": "https://github.com/feniljain", "followers_url": "https://api.github.com/users/feniljain/followers", "following_url": "https://api.github.com/users/feniljain/following{/other_user}", "gists_url": "https://api.github.com/users/feniljain/gists{/gist_id}", "starred_url": "https://api.github.com/users/feniljain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feniljain/subscriptions", "organizations_url": "https://api.github.com/users/feniljain/orgs", "repos_url": "https://api.github.com/users/feniljain/repos", "events_url": "https://api.github.com/users/feniljain/events{/privacy}", "received_events_url": "https://api.github.com/users/feniljain/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b499b7dc73f3571e2627a34a93e3079cab848bbc", "url": "https://api.github.com/repos/rust-lang/rust/commits/b499b7dc73f3571e2627a34a93e3079cab848bbc", "html_url": "https://github.com/rust-lang/rust/commit/b499b7dc73f3571e2627a34a93e3079cab848bbc"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "df126d7617ebe6ca13cd69e50e204d8c5bc04994", "filename": "clippy_lints/src/returns.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/clippy_lints%2Fsrc%2Freturns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/clippy_lints%2Fsrc%2Freturns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freturns.rs?ref=9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "patch": "@@ -286,7 +286,7 @@ fn check_final_expr<'tcx>(\n         ExprKind::Match(_, arms, MatchSource::Normal) => {\n             let match_ty = cx.typeck_results().expr_ty(peeled_drop_expr);\n             for arm in arms.iter() {\n-                check_final_expr(cx, arm.body, semi_spans.clone(), RetReplacement::Empty, Some(match_ty));\n+                check_final_expr(cx, arm.body, semi_spans.clone(), RetReplacement::Unit, Some(match_ty));\n             }\n         },\n         // if it's a whole block, check it"}, {"sha": "57c08996ce25d38660d096451594efdeea17948d", "filename": "tests/ui/needless_return.fixed", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/tests%2Fui%2Fneedless_return.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/tests%2Fui%2Fneedless_return.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.fixed?ref=9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "patch": "@@ -81,7 +81,7 @@ fn test_void_if_fun(b: bool) {\n fn test_void_match(x: u32) {\n     match x {\n         0 => (),\n-        _ =>(),\n+        _ => (),\n     }\n }\n \n@@ -91,7 +91,7 @@ fn test_nested_match(x: u32) {\n         1 => {\n             let _ = 42;\n         },\n-        _ =>(),\n+        _ => (),\n     }\n }\n \n@@ -196,7 +196,7 @@ async fn async_test_void_if_fun(b: bool) {\n async fn async_test_void_match(x: u32) {\n     match x {\n         0 => (),\n-        _ =>(),\n+        _ => (),\n     }\n }\n "}, {"sha": "87d0cd3e14cfabb315e5ebe2c528d6bc73f5cfa6", "filename": "tests/ui/needless_return.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/tests%2Fui%2Fneedless_return.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae/tests%2Fui%2Fneedless_return.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.stderr?ref=9cf57d0a8f95c51b0faeda4ce5c5b4cd629f1cae", "patch": "@@ -118,10 +118,10 @@ LL | |         return;\n    = help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:87:13\n+  --> $DIR/needless_return.rs:87:14\n    |\n LL |         _ => return,\n-   |             ^^^^^^^\n+   |              ^^^^^^\n    |\n    = help: replace `return` with a unit value\n \n@@ -136,10 +136,10 @@ LL | |             return;\n    = help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:98:13\n+  --> $DIR/needless_return.rs:98:14\n    |\n LL |         _ => return,\n-   |             ^^^^^^^\n+   |              ^^^^^^\n    |\n    = help: replace `return` with a unit value\n \n@@ -296,10 +296,10 @@ LL | |         return;\n    = help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:207:13\n+  --> $DIR/needless_return.rs:207:14\n    |\n LL |         _ => return,\n-   |             ^^^^^^^\n+   |              ^^^^^^\n    |\n    = help: replace `return` with a unit value\n "}]}