{"sha": "c0d4e88428296b8da6f2616f47c760b32abf66ed", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwZDRlODg0MjgyOTZiOGRhNmYyNjE2ZjQ3Yzc2MGIzMmFiZjY2ZWQ=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-12-31T18:35:39Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-12-31T18:35:39Z"}, "message": "Add std.dbg.trap(str msg) for help debugging.", "tree": {"sha": "1a374f814eec606eef3163b20dd27d08a83ecff9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a374f814eec606eef3163b20dd27d08a83ecff9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0d4e88428296b8da6f2616f47c760b32abf66ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0d4e88428296b8da6f2616f47c760b32abf66ed", "html_url": "https://github.com/rust-lang/rust/commit/c0d4e88428296b8da6f2616f47c760b32abf66ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0d4e88428296b8da6f2616f47c760b32abf66ed/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "065542378c86eb0ae6ceb2d106f2601a6ac121aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/065542378c86eb0ae6ceb2d106f2601a6ac121aa", "html_url": "https://github.com/rust-lang/rust/commit/065542378c86eb0ae6ceb2d106f2601a6ac121aa"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "774052dcaf512ba01d71f20be69d816f53fedff4", "filename": "src/lib/dbg.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c0d4e88428296b8da6f2616f47c760b32abf66ed/src%2Flib%2Fdbg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0d4e88428296b8da6f2616f47c760b32abf66ed/src%2Flib%2Fdbg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fdbg.rs?ref=c0d4e88428296b8da6f2616f47c760b32abf66ed", "patch": "@@ -18,6 +18,7 @@ native \"rust\" mod rustrt {\n     fn debug_obj[T](&T x, uint nmethods, uint nbytes);\n     fn debug_fn[T](&T x);\n     fn debug_ptrcast[T, U](@T x) -> @U;\n+    fn debug_trap(str msg);\n }\n \n fn debug_vec[T](vec[T] v) {\n@@ -61,6 +62,10 @@ fn ptr_cast[T, U](@T x) -> @U {\n     ret rustrt.debug_ptrcast[T, U](x);\n }\n \n+fn trap(str s) {\n+    rustrt.debug_trap(s);\n+}\n+\n // Local Variables:\n // mode: rust;\n // fill-column: 78;"}, {"sha": "84111d826e76a5a12ac28cae97e6146559de98da", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c0d4e88428296b8da6f2616f47c760b32abf66ed/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/c0d4e88428296b8da6f2616f47c760b32abf66ed/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=c0d4e88428296b8da6f2616f47c760b32abf66ed", "patch": "@@ -363,6 +363,14 @@ debug_ptrcast(rust_task *task,\n     return ptr;\n }\n \n+extern \"C\" CDECL void\n+debug_trap(rust_task *task, rust_str *s)\n+{\n+    task->log(rust_log::STDLIB, \"trapping: %s\", s->data);\n+    // FIXME: x86-ism.\n+    __asm__(\"int3\");\n+}\n+\n \n //\n // Local Variables:"}]}