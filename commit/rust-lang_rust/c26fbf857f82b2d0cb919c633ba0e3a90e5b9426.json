{"sha": "c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "node_id": "C_kwDOAAsO6NoAKGMyNmZiZjg1N2Y4MmIyZDBjYjkxOWM2MzNiYTBlM2E5MGU1Yjk0MjY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-13T09:41:41Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-13T09:41:41Z"}, "message": "Auto merge of #93763 - jsha:re-space-empty-impls, r=GuillaumeGomez\n\nrustdoc: fix spacing of non-toggled impl blocks\n\nWe [recently removed the \"up here\" arrows on item-infos](https://github.com/rust-lang/rust/pull/92651), and adjusted\nvertical spacing so that even without the arrow, it would be visually\nclear which item the item-info belonged to. The new CSS styles for\nvertical spacing only applied to toggles, though. This missed\nnon-toggled impl blocks - for instance, those without any methods, like\nhttps://doc.rust-lang.org/nightly/std/marker/trait.Send.html#implementors.\nThe result was lists of implementors that were spaced too closely. This\nPR fixes the spacing by making it apply to non-toggled impl blocks as\nwell.\n\nThis also fixes an issue where item-infos were displayed too far below\ntheir items. That was a result of display: table on .item-info .stab.\nChanged that to display: inline-block.\n\nDemo: https://rustdoc.crud.net/jsha/re-space-empty-impls/std/marker/trait.Send.html\n\nBefore:\n\n<img width=300 src=\"https://user-images.githubusercontent.com/220205/152954394-ec0b80e7-2573-4f06-9d7a-7b10b8ceac60.png\">\n\nAfter:\n\n<img width=300 src=\"https://user-images.githubusercontent.com/220205/152954228-abac1d30-a76d-4ab1-89ec-ef7549fe8c9c.png\">\n\nr? `@GuillaumeGomez`", "tree": {"sha": "c515ffd580374f6b3c0ff4e4052aba218089bb9a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c515ffd580374f6b3c0ff4e4052aba218089bb9a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "html_url": "https://github.com/rust-lang/rust/commit/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a60099cc43c8a07abb280be323d1ed9afc27f2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a60099cc43c8a07abb280be323d1ed9afc27f2c", "html_url": "https://github.com/rust-lang/rust/commit/9a60099cc43c8a07abb280be323d1ed9afc27f2c"}, {"sha": "0b22d4170eddc179680c0da4415fab721e02f85a", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b22d4170eddc179680c0da4415fab721e02f85a", "html_url": "https://github.com/rust-lang/rust/commit/0b22d4170eddc179680c0da4415fab721e02f85a"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "4327a554fc62f542878de10d5b40281165d4404c", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "patch": "@@ -1041,7 +1041,7 @@ body.blur > :not(#help) {\n }\n \n .item-info .stab {\n-\tdisplay: table;\n+\tdisplay: inline-block;\n }\n .stab {\n \tpadding: 3px;\n@@ -2018,7 +2018,8 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n }\n \n .method-toggle summary,\n-.implementors-toggle summary {\n+.implementors-toggle summary,\n+.impl {\n \tmargin-bottom: 0.75em;\n }\n "}, {"sha": "6460a917e92d008dc0885d6ca225d4d2d630f9db", "filename": "src/test/rustdoc-gui/implementors.goml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml?ref=c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "patch": "@@ -14,3 +14,7 @@ assert: (\"#implementors-list .impl:nth-child(2) > a.anchor\")\n assert-attribute: (\"#implementors-list .impl:nth-child(2)\", {\"id\": \"impl-Whatever-1\"})\n assert-attribute: (\"#implementors-list .impl:nth-child(2) > a.anchor\", {\"href\": \"#impl-Whatever-1\"})\n assert: \"#implementors-list .impl:nth-child(2) > .code-header.in-band\"\n+\n+goto: file://|DOC_PATH|/test_docs/struct.HasEmptyTraits.html\n+compare-elements-position-near-false: (\"#impl-EmptyTrait1\", \"#impl-EmptyTrait2\", {\"y\": 30})\n+compare-elements-position-near: (\"#impl-EmptyTrait3 h3\", \"#impl-EmptyTrait3 .item-info\", {\"y\": 30})"}, {"sha": "82fcca94a18208bbb6e59c13316fc314b685f0cb", "filename": "src/test/rustdoc-gui/item-info-width.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "raw_url": "https://github.com/rust-lang/rust/raw/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml?ref=c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "patch": "@@ -4,5 +4,5 @@ goto: file://|DOC_PATH|/lib2/struct.Foo.html\n size: (1100, 800)\n // We check that \".item-info\" is bigger than its content.\n assert-css: (\".item-info\", {\"width\": \"790px\"})\n-assert-css: (\".item-info .stab\", {\"width\": \"340px\"})\n+assert-css: (\".item-info .stab\", {\"width\": \"339.562px\"})\n assert-position: (\".item-info .stab\", {\"x\": 295})"}, {"sha": "8be819b76e4134a700755f354145b182dec09362", "filename": "src/test/rustdoc-gui/src/test_docs/Cargo.toml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml?ref=c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "patch": "@@ -7,3 +7,7 @@ build = \"build.rs\"\n \n [lib]\n path = \"lib.rs\"\n+\n+[features]\n+default = [\"some-feature\"]\n+some-feature = []"}, {"sha": "2068d1d6f39af1e1867d4e4d2b951c483a7eb59f", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c26fbf857f82b2d0cb919c633ba0e3a90e5b9426/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=c26fbf857f82b2d0cb919c633ba0e3a90e5b9426", "patch": "@@ -260,3 +260,14 @@ impl HeavilyDocumentedUnion {\n macro_rules! heavily_documented_macro {\n     () => {};\n }\n+\n+pub trait EmptyTrait1 {}\n+pub trait EmptyTrait2 {}\n+pub trait EmptyTrait3 {}\n+\n+pub struct HasEmptyTraits{}\n+\n+impl EmptyTrait1 for HasEmptyTraits {}\n+impl EmptyTrait2 for HasEmptyTraits {}\n+#[doc(cfg(feature = \"some-feature\"))]\n+impl EmptyTrait3 for HasEmptyTraits {}"}]}