{"sha": "7cbd18a690da89251390db373d499b1770f20753", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdjYmQxOGE2OTBkYTg5MjUxMzkwZGIzNzNkNDk5YjE3NzBmMjA3NTM=", "commit": {"author": {"name": "Johannes Oertel", "email": "johannes.oertel@uni-due.de", "date": "2016-11-30T14:23:11Z"}, "committer": {"name": "Johannes Oertel", "email": "johannes.oertel@uni-due.de", "date": "2016-11-30T14:51:04Z"}, "message": "Remove the `unmarked_api` feature\n\nCloses #37981.", "tree": {"sha": "0fc7115cc9164b22a28c73ef7f031dacbce14611", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0fc7115cc9164b22a28c73ef7f031dacbce14611"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7cbd18a690da89251390db373d499b1770f20753", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7cbd18a690da89251390db373d499b1770f20753", "html_url": "https://github.com/rust-lang/rust/commit/7cbd18a690da89251390db373d499b1770f20753", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7cbd18a690da89251390db373d499b1770f20753/comments", "author": {"login": "jooert", "id": 1774713, "node_id": "MDQ6VXNlcjE3NzQ3MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1774713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jooert", "html_url": "https://github.com/jooert", "followers_url": "https://api.github.com/users/jooert/followers", "following_url": "https://api.github.com/users/jooert/following{/other_user}", "gists_url": "https://api.github.com/users/jooert/gists{/gist_id}", "starred_url": "https://api.github.com/users/jooert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jooert/subscriptions", "organizations_url": "https://api.github.com/users/jooert/orgs", "repos_url": "https://api.github.com/users/jooert/repos", "events_url": "https://api.github.com/users/jooert/events{/privacy}", "received_events_url": "https://api.github.com/users/jooert/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jooert", "id": 1774713, "node_id": "MDQ6VXNlcjE3NzQ3MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1774713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jooert", "html_url": "https://github.com/jooert", "followers_url": "https://api.github.com/users/jooert/followers", "following_url": "https://api.github.com/users/jooert/following{/other_user}", "gists_url": "https://api.github.com/users/jooert/gists{/gist_id}", "starred_url": "https://api.github.com/users/jooert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jooert/subscriptions", "organizations_url": "https://api.github.com/users/jooert/orgs", "repos_url": "https://api.github.com/users/jooert/repos", "events_url": "https://api.github.com/users/jooert/events{/privacy}", "received_events_url": "https://api.github.com/users/jooert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3abaf43f770a8bae23da474690e3841041219029", "url": "https://api.github.com/repos/rust-lang/rust/commits/3abaf43f770a8bae23da474690e3841041219029", "html_url": "https://github.com/rust-lang/rust/commit/3abaf43f770a8bae23da474690e3841041219029"}], "stats": {"total": 30, "additions": 4, "deletions": 26}, "files": [{"sha": "fe0507fd4a59d73cfe9ea1faaa0708a8eb0bbbdd", "filename": "src/doc/reference.md", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7cbd18a690da89251390db373d499b1770f20753/src%2Fdoc%2Freference.md", "raw_url": "https://github.com/rust-lang/rust/raw/7cbd18a690da89251390db373d499b1770f20753/src%2Fdoc%2Freference.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Freference.md?ref=7cbd18a690da89251390db373d499b1770f20753", "patch": "@@ -2462,11 +2462,6 @@ The currently implemented features of the reference compiler are:\n * `unboxed_closures` - Rust's new closure design, which is currently a work in\n                        progress feature with many known bugs.\n \n-* `unmarked_api` - Allows use of items within a `#![staged_api]` crate\n-                   which have not been marked with a stability marker.\n-                   Such items should not be allowed by the compiler to exist,\n-                   so if you need this there probably is a compiler bug.\n-\n * `allow_internal_unstable` - Allows `macro_rules!` macros to be tagged with the\n                               `#[allow_internal_unstable]` attribute, designed\n                               to allow `std` macros to call"}, {"sha": "3e32957aecfe07ab60fc0d8d5edf5685602e7d5b", "filename": "src/librustc/middle/stability.rs", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/7cbd18a690da89251390db373d499b1770f20753/src%2Flibrustc%2Fmiddle%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbd18a690da89251390db373d499b1770f20753/src%2Flibrustc%2Fmiddle%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fstability.rs?ref=7cbd18a690da89251390db373d499b1770f20753", "patch": "@@ -513,23 +513,7 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n                 // handled by the lint emitting logic above.\n             }\n             None => {\n-                // This is an 'unmarked' API, which should not exist\n-                // in the standard library.\n-                if self.sess.features.borrow().unmarked_api {\n-                    self.sess.struct_span_warn(span, \"use of unmarked library feature\")\n-                             .span_note(span, \"this is either a bug in the library you are \\\n-                                               using or a bug in the compiler - please \\\n-                                               report it in both places\")\n-                             .emit()\n-                } else {\n-                    self.sess.struct_span_err(span, \"use of unmarked library feature\")\n-                             .span_note(span, \"this is either a bug in the library you are \\\n-                                               using or a bug in the compiler - please \\\n-                                               report it in both places\")\n-                             .span_note(span, \"use #![feature(unmarked_api)] in the \\\n-                                               crate attributes to override this\")\n-                             .emit()\n-                }\n+                span_bug!(span, \"encountered unmarked API\");\n             }\n         }\n     }"}, {"sha": "52374f232de0dd372380a7c82b5e2a9b49320770", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7cbd18a690da89251390db373d499b1770f20753/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbd18a690da89251390db373d499b1770f20753/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=7cbd18a690da89251390db373d499b1770f20753", "patch": "@@ -153,10 +153,6 @@ declare_features! (\n     // rustc internal\n     (active, staged_api, \"1.0.0\", None),\n \n-    // Allows using items which are missing stability attributes\n-    // rustc internal\n-    (active, unmarked_api, \"1.0.0\", None),\n-\n     // Allows using #![no_core]\n     (active, no_core, \"1.3.0\", Some(29639)),\n \n@@ -330,6 +326,9 @@ declare_features! (\n     (removed, test_removed_feature, \"1.0.0\", None),\n     (removed, visible_private_types, \"1.0.0\", None),\n     (removed, unsafe_no_drop_flag, \"1.0.0\", None),\n+    // Allows using items which are missing stability attributes\n+    // rustc internal\n+    (removed, unmarked_api, \"1.0.0\", None),\n );\n \n declare_features! ("}]}