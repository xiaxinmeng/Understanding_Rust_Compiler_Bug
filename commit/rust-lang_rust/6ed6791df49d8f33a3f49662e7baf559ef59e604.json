{"sha": "6ed6791df49d8f33a3f49662e7baf559ef59e604", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlZDY3OTFkZjQ5ZDhmMzNhM2Y0OTY2MmU3YmFmNTU5ZWY1OWU2MDQ=", "commit": {"author": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-06-16T19:18:54Z"}, "committer": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-06-16T19:23:13Z"}, "message": "Removing dead upcall_join. Closes #509.", "tree": {"sha": "08a9b5ed1b18331da8280bf2d9fa2b61f6fcac9e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/08a9b5ed1b18331da8280bf2d9fa2b61f6fcac9e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6ed6791df49d8f33a3f49662e7baf559ef59e604", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6ed6791df49d8f33a3f49662e7baf559ef59e604", "html_url": "https://github.com/rust-lang/rust/commit/6ed6791df49d8f33a3f49662e7baf559ef59e604", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6ed6791df49d8f33a3f49662e7baf559ef59e604/comments", "author": null, "committer": null, "parents": [{"sha": "a5563e173e705fcc03c5bcc91a7c0ff620fc7b57", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5563e173e705fcc03c5bcc91a7c0ff620fc7b57", "html_url": "https://github.com/rust-lang/rust/commit/a5563e173e705fcc03c5bcc91a7c0ff620fc7b57"}], "stats": {"total": 24, "additions": 0, "deletions": 24}, "files": [{"sha": "7cb859a8fa3f04565ed7504edfe86e27fab75a45", "filename": "src/comp/back/upcall.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Fcomp%2Fback%2Fupcall.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Fcomp%2Fback%2Fupcall.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fback%2Fupcall.rs?ref=6ed6791df49d8f33a3f49662e7baf559ef59e604", "patch": "@@ -40,7 +40,6 @@ type upcalls =\n         ValueRef clone_chan,\n         ValueRef _yield,\n         ValueRef sleep,\n-        ValueRef _join,\n         ValueRef send,\n         ValueRef recv,\n         ValueRef _fail,\n@@ -91,7 +90,6 @@ fn declare_upcalls(type_names tn, ModuleRef llmod) -> @upcalls {\n                           T_opaque_chan_ptr()),\n              _yield=dv(\"yield\", empty_vec),\n              sleep=dv(\"sleep\", [T_size_t()]),\n-             _join=dv(\"join\", [T_taskptr(tn)]),\n              send=dv(\"send\", [T_opaque_chan_ptr(), T_ptr(T_i8())]),\n              recv=dv(\"recv\", [T_ptr(T_ptr(T_i8())), T_opaque_port_ptr()]),\n              _fail=dv(\"fail\", [T_ptr(T_i8()), T_ptr(T_i8()), T_size_t()]),"}, {"sha": "1a0d4f8c0b05eb36aca11bacca6a1d8bfb95854b", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=6ed6791df49d8f33a3f49662e7baf559ef59e604", "patch": "@@ -195,27 +195,6 @@ upcall_sleep(rust_task *task, size_t time_in_us) {\n     task->yield(2, time_in_us);\n }\n \n-extern \"C\" CDECL void\n-upcall_join(rust_task *task, maybe_proxy<rust_task> *target) {\n-    LOG_UPCALL_ENTRY(task);\n-\n-    if (target->is_proxy()) {\n-        rust_handle<rust_task> *task_handle = target->as_proxy()->handle();\n-        notify_message::send(notify_message::JOIN, \"join\",\n-                             task->get_handle(), task_handle);\n-        task->block(task_handle, \"joining remote task\");\n-        task->yield(2);\n-    } else {\n-        rust_task *target_task = target->referent();\n-        // If the other task is already dying, we don't have to wait for it.\n-        if (target_task->dead() == false) {\n-            target_task->tasks_waiting_to_join.push(task);\n-            task->block(target_task, \"joining local task\");\n-            task->yield(2);\n-        }\n-    }\n-}\n-\n /**\n  * Buffers a chunk of data in the specified channel.\n  *"}, {"sha": "ef0d5878ad8b25d2eff36caaa62e4d4491923089", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/6ed6791df49d8f33a3f49662e7baf559ef59e604/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=6ed6791df49d8f33a3f49662e7baf559ef59e604", "patch": "@@ -51,7 +51,6 @@ upcall_get_type_desc\n upcall_grow_task\n upcall_ivec_resize\n upcall_ivec_spill\n-upcall_join\n upcall_kill\n upcall_log_double\n upcall_log_float"}]}