{"sha": "5624175574990ba448557473ccf3ae04c15835b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2MjQxNzU1NzQ5OTBiYTQ0ODU1NzQ3M2NjZjNhZTA0YzE1ODM1YjE=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-09T15:22:00Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-12-09T15:22:00Z"}, "message": "Format macro in pattern position", "tree": {"sha": "5acd515634864d896b27680f0c398080f3c1c38e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5acd515634864d896b27680f0c398080f3c1c38e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5624175574990ba448557473ccf3ae04c15835b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5624175574990ba448557473ccf3ae04c15835b1", "html_url": "https://github.com/rust-lang/rust/commit/5624175574990ba448557473ccf3ae04c15835b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5624175574990ba448557473ccf3ae04c15835b1/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0909ecbac7680a6fb235eda5f4a63f8816ee1357", "url": "https://api.github.com/repos/rust-lang/rust/commits/0909ecbac7680a6fb235eda5f4a63f8816ee1357", "html_url": "https://github.com/rust-lang/rust/commit/0909ecbac7680a6fb235eda5f4a63f8816ee1357"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "71be3b65224c53015e14cf87a70ae80fb6ba15e0", "filename": "src/macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5624175574990ba448557473ccf3ae04c15835b1/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5624175574990ba448557473ccf3ae04c15835b1/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=5624175574990ba448557473ccf3ae04c15835b1", "patch": "@@ -50,6 +50,7 @@ pub enum MacroPosition {\n     Item,\n     Statement,\n     Expression,\n+    Pat,\n }\n \n impl MacroStyle {"}, {"sha": "700fbd0da218c82dbe5e0496dea25719fdcf5abb", "filename": "src/patterns.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5624175574990ba448557473ccf3ae04c15835b1/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5624175574990ba448557473ccf3ae04c15835b1/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=5624175574990ba448557473ccf3ae04c15835b1", "patch": "@@ -19,6 +19,7 @@ use expr::{can_be_overflowed_expr, rewrite_call_inner, rewrite_pair, rewrite_una\n            wrap_struct_field, PairParts};\n use lists::{itemize_list, shape_for_tactic, struct_lit_formatting, struct_lit_shape,\n             struct_lit_tactic, write_list, DefinitiveListTactic, SeparatorPlace, SeparatorTactic};\n+use macros::{rewrite_macro, MacroPosition};\n use rewrite::{Rewrite, RewriteContext};\n use shape::Shape;\n use types::{rewrite_path, PathContext};\n@@ -121,8 +122,7 @@ impl Rewrite for Pat {\n             PatKind::Struct(ref path, ref fields, ellipsis) => {\n                 rewrite_struct_pat(path, fields, ellipsis, self.span, context, shape)\n             }\n-            // FIXME(#819) format pattern macros.\n-            PatKind::Mac(..) => Some(context.snippet(self.span).to_owned()),\n+            PatKind::Mac(ref mac) => rewrite_macro(mac, None, context, shape, MacroPosition::Pat),\n         }\n     }\n }"}]}