{"sha": "02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyMjE5NjQyYmM1ZThhOTQ1NGZmNGQ2YzZiMGVkZTE2YTMyMWFiOWQ=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-22T04:22:26Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-23T05:04:13Z"}, "message": "rustc: Add some build scripts for librustc crates\n\nThis commit adds some \"boilerplate\" build scripts to librustc/libsyntax crates\nto declare dependencies on various environment variables that are configured\nthroughout the build. Cargo recently gained the ability to depend on environment\nvariables in build scripts which can help trigger recompilation of a crate.\n\nThis should fix weird bugs where after you make a commit or a few days later\nyou'll get weird \"not built with the same compiler\" errors hopefully.", "tree": {"sha": "29de075e5d359b5a8b60c5e57416f73befa75398", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29de075e5d359b5a8b60c5e57416f73befa75398"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "html_url": "https://github.com/rust-lang/rust/commit/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef19bd1a339212f77160f12af6d5d85d8bb36ea4", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef19bd1a339212f77160f12af6d5d85d8bb36ea4", "html_url": "https://github.com/rust-lang/rust/commit/ef19bd1a339212f77160f12af6d5d85d8bb36ea4"}], "stats": {"total": 106, "additions": 106, "deletions": 0}, "files": [{"sha": "4df5f0e64050c79290121b030e6bc8b9afdf1b0d", "filename": "src/librustc/build.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_LIBDIR_RELATIVE\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_COMPILER_HOST_TRIPLE\");\n+}"}, {"sha": "16f0872b25ac119f1092831248e85d2587c6031e", "filename": "src/librustc_back/build.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_back%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_back%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_DEFAULT_LINKER\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_DEFAULT_AR\");\n+}"}, {"sha": "9844f3b557a1f264d71750066731ee537f54a4e6", "filename": "src/librustc_driver/build.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_driver%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_driver%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_RELEASE\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VERSION\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VER_DATE\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VER_HASH\");\n+}"}, {"sha": "f18a3f9b9401663d0d7e20c661d65af051e09bb7", "filename": "src/librustc_incremental/build.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_incremental%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_incremental%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VERSION\");\n+}"}, {"sha": "f18a3f9b9401663d0d7e20c661d65af051e09bb7", "filename": "src/librustc_metadata/build.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_metadata%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_metadata%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VERSION\");\n+}"}, {"sha": "97accbb4b8fe631b6ef2a07643bff9e1962bedb4", "filename": "src/librustc_trans/build.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_trans%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibrustc_trans%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,16 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_VERSION\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_PREFIX\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_LLVM_ROOT\");\n+}"}, {"sha": "d39340c332690cd89078d33fb0314e1b632e2f8b", "filename": "src/libsyntax/build.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibsyntax%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02219642bc5e8a9454ff4d6c6b0ede16a321ab9d/src%2Flibsyntax%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fbuild.rs?ref=02219642bc5e8a9454ff4d6c6b0ede16a321ab9d", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    println!(\"cargo:rerun-if-changed=build.rs\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_RELEASE_CHANNEL\");\n+    println!(\"cargo:rerun-if-env-changed=CFG_DISABLE_UNSTABLE_FEATURES\");\n+}"}]}