{"sha": "0dcb1754b6c2d2cf97aa06973875a6484be59adb", "node_id": "C_kwDOAAsO6NoAKDBkY2IxNzU0YjZjMmQyY2Y5N2FhMDY5NzM4NzVhNjQ4NGJlNTlhZGI", "commit": {"author": {"name": "Joshua M. Clulow", "email": "jmc@oxide.computer", "date": "2022-03-15T20:46:02Z"}, "committer": {"name": "Joshua M. Clulow", "email": "jmc@oxide.computer", "date": "2022-03-15T20:46:02Z"}, "message": "solaris build environment should include libsendfile/liblgrp\n\nAs of version 0.2.120 of the libc crate, the solaris target now requires\nsome additional libraries to be present in the sysroot.  Note that the\nsolaris target doesn't really build against files from Solaris, but\nrather against some files from DilOS (a platform similar to both Solaris\nand illumos).  Pull in the extra libraries and their compilation links\nfrom that apt repository.", "tree": {"sha": "d883b62421c87936dda0c1e167689aedd3f1e3a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d883b62421c87936dda0c1e167689aedd3f1e3a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0dcb1754b6c2d2cf97aa06973875a6484be59adb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0dcb1754b6c2d2cf97aa06973875a6484be59adb", "html_url": "https://github.com/rust-lang/rust/commit/0dcb1754b6c2d2cf97aa06973875a6484be59adb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0dcb1754b6c2d2cf97aa06973875a6484be59adb/comments", "author": {"login": "jclulow", "id": 304070, "node_id": "MDQ6VXNlcjMwNDA3MA==", "avatar_url": "https://avatars.githubusercontent.com/u/304070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jclulow", "html_url": "https://github.com/jclulow", "followers_url": "https://api.github.com/users/jclulow/followers", "following_url": "https://api.github.com/users/jclulow/following{/other_user}", "gists_url": "https://api.github.com/users/jclulow/gists{/gist_id}", "starred_url": "https://api.github.com/users/jclulow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jclulow/subscriptions", "organizations_url": "https://api.github.com/users/jclulow/orgs", "repos_url": "https://api.github.com/users/jclulow/repos", "events_url": "https://api.github.com/users/jclulow/events{/privacy}", "received_events_url": "https://api.github.com/users/jclulow/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jclulow", "id": 304070, "node_id": "MDQ6VXNlcjMwNDA3MA==", "avatar_url": "https://avatars.githubusercontent.com/u/304070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jclulow", "html_url": "https://github.com/jclulow", "followers_url": "https://api.github.com/users/jclulow/followers", "following_url": "https://api.github.com/users/jclulow/following{/other_user}", "gists_url": "https://api.github.com/users/jclulow/gists{/gist_id}", "starred_url": "https://api.github.com/users/jclulow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jclulow/subscriptions", "organizations_url": "https://api.github.com/users/jclulow/orgs", "repos_url": "https://api.github.com/users/jclulow/repos", "events_url": "https://api.github.com/users/jclulow/events{/privacy}", "received_events_url": "https://api.github.com/users/jclulow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83460d5e624e9dff72ea8c8f6e79c10af10a3aa1", "url": "https://api.github.com/repos/rust-lang/rust/commits/83460d5e624e9dff72ea8c8f6e79c10af10a3aa1", "html_url": "https://github.com/rust-lang/rust/commit/83460d5e624e9dff72ea8c8f6e79c10af10a3aa1"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "cf784a66ae4f9b0a7beb774bb9ec71a4259210b0", "filename": "src/ci/docker/host-x86_64/dist-various-2/build-solaris-toolchain.sh", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/0dcb1754b6c2d2cf97aa06973875a6484be59adb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/0dcb1754b6c2d2cf97aa06973875a6484be59adb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh?ref=0dcb1754b6c2d2cf97aa06973875a6484be59adb", "patch": "@@ -33,14 +33,18 @@ cd solaris\n dpkg --add-architecture $APT_ARCH\n apt-get update\n apt-get download $(apt-cache depends --recurse --no-replaces \\\n-  libc:$APT_ARCH           \\\n-  libm-dev:$APT_ARCH       \\\n-  libpthread:$APT_ARCH     \\\n-  libresolv:$APT_ARCH      \\\n-  librt:$APT_ARCH          \\\n-  libsocket:$APT_ARCH      \\\n-  system-crt:$APT_ARCH     \\\n-  system-header:$APT_ARCH  \\\n+  libc:$APT_ARCH                                             \\\n+  liblgrp-dev:$APT_ARCH                                      \\\n+  liblgrp:$APT_ARCH                                          \\\n+  libm-dev:$APT_ARCH                                         \\\n+  libpthread:$APT_ARCH                                       \\\n+  libresolv:$APT_ARCH                                        \\\n+  librt:$APT_ARCH                                            \\\n+  libsendfile-dev:$APT_ARCH                                  \\\n+  libsendfile:$APT_ARCH                                      \\\n+  libsocket:$APT_ARCH                                        \\\n+  system-crt:$APT_ARCH                                       \\\n+  system-header:$APT_ARCH                                    \\\n   | grep \"^\\w\")\n \n for deb in *$APT_ARCH.deb; do"}]}