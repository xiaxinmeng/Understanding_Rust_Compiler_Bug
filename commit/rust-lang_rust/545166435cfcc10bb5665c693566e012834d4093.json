{"sha": "545166435cfcc10bb5665c693566e012834d4093", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0NTE2NjQzNWNmY2MxMGJiNTY2NWM2OTM1NjZlMDEyODM0ZDQwOTM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-10-28T20:36:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-10-28T20:36:07Z"}, "message": "Rollup merge of #65891 - michaelwoerister:sp-crate-metadata, r=wesleywiser\n\nself-profiling: Record something more useful for crate metadata generation event.\n\nBefore this commit, we had an event that would only track the compression step\nfor proc-macros and Rust dylibs. After the commit we measure the time for\nacutally generating the crate metadata bytes.\n\nr? @wesleywiser", "tree": {"sha": "27d2026e04c44a898b32b6a7ab3aed7136cf68cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27d2026e04c44a898b32b6a7ab3aed7136cf68cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/545166435cfcc10bb5665c693566e012834d4093", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdt1E3CRBK7hj4Ov3rIwAAdHIIADnXSLkZW/vZ91bqGAe5VmFI\nsMrA9uumsYJfiea1PqrfUj+1Mq5VfCUydQl9Yg0nefHu3estIbiGSzHW34gft0gF\nJq7I+oBIUsfoclII2+z8tjeoKF1q00vpWSxA4gS78D1hJzEGQR2opmMKt06ks2bk\nsNHLiDHOcOsgegmq1ppHLW2clKIR4n19B2De3M4y3DLe1RHPQUBXX5D2zsHfpxu4\nm8KDVouExupSXLK6O46jJOasvD5eQqN8ZEXI6mBy0iIG8Opngr6g60SPq/hx7ckw\n2/a3YjhcCXPORIylO5yeqKXooVXgaUUSAm7/OjZuePUQQ16nPJC5vOsI32+oGIw=\n=5QsN\n-----END PGP SIGNATURE-----\n", "payload": "tree 27d2026e04c44a898b32b6a7ab3aed7136cf68cc\nparent cceefd3d98bc2d6e2e1912b63055d3c1b1647a97\nparent 46a39a2d424cefb2d0c56fae9682cfa253a79d47\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1572294967 +0100\ncommitter GitHub <noreply@github.com> 1572294967 +0100\n\nRollup merge of #65891 - michaelwoerister:sp-crate-metadata, r=wesleywiser\n\nself-profiling: Record something more useful for crate metadata generation event.\n\nBefore this commit, we had an event that would only track the compression step\nfor proc-macros and Rust dylibs. After the commit we measure the time for\nacutally generating the crate metadata bytes.\n\nr? @wesleywiser\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/545166435cfcc10bb5665c693566e012834d4093", "html_url": "https://github.com/rust-lang/rust/commit/545166435cfcc10bb5665c693566e012834d4093", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/545166435cfcc10bb5665c693566e012834d4093/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cceefd3d98bc2d6e2e1912b63055d3c1b1647a97", "url": "https://api.github.com/repos/rust-lang/rust/commits/cceefd3d98bc2d6e2e1912b63055d3c1b1647a97", "html_url": "https://github.com/rust-lang/rust/commit/cceefd3d98bc2d6e2e1912b63055d3c1b1647a97"}, {"sha": "46a39a2d424cefb2d0c56fae9682cfa253a79d47", "url": "https://api.github.com/repos/rust-lang/rust/commits/46a39a2d424cefb2d0c56fae9682cfa253a79d47", "html_url": "https://github.com/rust-lang/rust/commit/46a39a2d424cefb2d0c56fae9682cfa253a79d47"}], "stats": {"total": 3, "additions": 1, "deletions": 2}, "files": [{"sha": "bdf9b2d7f3f27f435046f9abae4b34f15089c4d7", "filename": "src/librustc/ty/context.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/545166435cfcc10bb5665c693566e012834d4093/src%2Flibrustc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/545166435cfcc10bb5665c693566e012834d4093/src%2Flibrustc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fcontext.rs?ref=545166435cfcc10bb5665c693566e012834d4093", "patch": "@@ -1408,6 +1408,7 @@ impl<'tcx> TyCtxt<'tcx> {\n     }\n \n     pub fn encode_metadata(self)-> EncodedMetadata {\n+        let _prof_timer = self.prof.generic_activity(\"generate_crate_metadata\");\n         self.cstore.encode_metadata(self)\n     }\n "}, {"sha": "ee4ec7fb41eacca1833eec68e4168726fc0235e0", "filename": "src/librustc_codegen_ssa/base.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/545166435cfcc10bb5665c693566e012834d4093/src%2Flibrustc_codegen_ssa%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/545166435cfcc10bb5665c693566e012834d4093/src%2Flibrustc_codegen_ssa%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fbase.rs?ref=545166435cfcc10bb5665c693566e012834d4093", "patch": "@@ -574,8 +574,6 @@ pub fn codegen_crate<B: ExtraBackendMethods>(\n \n     if need_metadata_module {\n         // Codegen the encoded metadata.\n-        let _prof_timer = tcx.prof.generic_activity(\"codegen_crate_metadata\");\n-\n         let metadata_cgu_name = cgu_name_builder.build_cgu_name(LOCAL_CRATE,\n                                                                 &[\"crate\"],\n                                                                 Some(\"metadata\")).as_str()"}]}