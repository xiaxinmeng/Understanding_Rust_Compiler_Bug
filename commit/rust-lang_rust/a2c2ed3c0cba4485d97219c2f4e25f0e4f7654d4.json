{"sha": "a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyYzJlZDNjMGNiYTQ0ODVkOTcyMTljMmY0ZTI1ZjBlNGY3NjU0ZDQ=", "commit": {"author": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-06-03T11:56:58Z"}, "committer": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-06-03T16:23:01Z"}, "message": "use rustc version as llvm-tools version", "tree": {"sha": "c0ebcd23cb54aaa0a781e697df443b81f3fb2de5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0ebcd23cb54aaa0a781e697df443b81f3fb2de5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4", "html_url": "https://github.com/rust-lang/rust/commit/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4/comments", "author": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "committer": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66a7db9a3593b1bc4744239a21520369f0418d3c", "url": "https://api.github.com/repos/rust-lang/rust/commits/66a7db9a3593b1bc4744239a21520369f0418d3c", "html_url": "https://github.com/rust-lang/rust/commit/66a7db9a3593b1bc4744239a21520369f0418d3c"}], "stats": {"total": 33, "additions": 18, "deletions": 15}, "files": [{"sha": "5bb9584a8da1c268249363ba75e36dd2ff15e285", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 18, "deletions": 15, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=a2c2ed3c0cba4485d97219c2f4e25f0e4f7654d4", "patch": "@@ -958,21 +958,24 @@ impl Build {\n     }\n \n     fn llvm_tools_vers(&self) -> String {\n-        let stdout = build_helper::output(\n-            Command::new(self.llvm_out(self.config.build).join(\"build/bin/llvm-size\"))\n-                .arg(\"--version\"),\n-        );\n-\n-        for line in stdout.lines() {\n-            if line.contains(\"LLVM version\") {\n-                if let Some(vers) = line.split_whitespace().nth(2) {\n-                    return vers.to_string();\n-                }\n-            }\n-        }\n-\n-        panic!(\"The output of $LLVM_TOOL has changed; \\\n-                please fix `bootstrap::Build.llvm_tools_vers`\");\n+        // XXX should we use LLVM version here?\n+        // let stdout = build_helper::output(\n+        //     Command::new(self.llvm_out(self.config.build).join(\"build/bin/llvm-size\"))\n+        //         .arg(\"--version\"),\n+        // );\n+\n+        // for line in stdout.lines() {\n+        //     if line.contains(\"LLVM version\") {\n+        //         if let Some(vers) = line.split_whitespace().nth(2) {\n+        //             return vers.to_string();\n+        //         }\n+        //     }\n+        // }\n+\n+        // panic!(\"The output of $LLVM_TOOL has changed; \\\n+        //         please fix `bootstrap::Build.llvm_tools_vers`\");\n+\n+        self.rust_version()\n     }\n \n     /// Returns the `version` string associated with this compiler for Rust"}]}