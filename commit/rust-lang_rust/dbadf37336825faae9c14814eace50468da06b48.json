{"sha": "dbadf37336825faae9c14814eace50468da06b48", "node_id": "C_kwDOAAsO6NoAKGRiYWRmMzczMzY4MjVmYWFlOWMxNDgxNGVhY2U1MDQ2OGRhMDZiNDg", "commit": {"author": {"name": "Evan Typanski", "email": "evan.typanski@microfocus.com", "date": "2022-09-30T15:37:50Z"}, "committer": {"name": "Evan Typanski", "email": "evan.typanski@microfocus.com", "date": "2022-09-30T15:38:12Z"}, "message": "Add test case where `FnMut` used once needs `&mut`", "tree": {"sha": "81b2af78617ba66a6b4cc38c7bcfc5cda2f74654", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81b2af78617ba66a6b4cc38c7bcfc5cda2f74654"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbadf37336825faae9c14814eace50468da06b48", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbadf37336825faae9c14814eace50468da06b48", "html_url": "https://github.com/rust-lang/rust/commit/dbadf37336825faae9c14814eace50468da06b48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbadf37336825faae9c14814eace50468da06b48/comments", "author": null, "committer": null, "parents": [{"sha": "85b8ff7f38149caefd60fd79dc156dc3d18c3c7c", "url": "https://api.github.com/repos/rust-lang/rust/commits/85b8ff7f38149caefd60fd79dc156dc3d18c3c7c", "html_url": "https://github.com/rust-lang/rust/commit/85b8ff7f38149caefd60fd79dc156dc3d18c3c7c"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "e257b3b3afa6f7c0bda4152ebc4c5c016d85a831", "filename": "tests/ui/eta.fixed", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feta.fixed?ref=dbadf37336825faae9c14814eace50468da06b48", "patch": "@@ -305,12 +305,14 @@ fn not_general_enough() {\n }\n \n // https://github.com/rust-lang/rust-clippy/issues/9369\n-pub fn mutable_impl_fn_mut(mut f: impl FnMut()) {\n+pub fn mutable_impl_fn_mut(mut f: impl FnMut(), mut f_used_once: impl FnMut()) -> impl FnMut() {\n     fn takes_fn_mut(_: impl FnMut()) {}\n     takes_fn_mut(&mut f);\n \n     fn takes_fn_once(_: impl FnOnce()) {}\n     takes_fn_once(&mut f);\n \n     f();\n+\n+    move || takes_fn_mut(&mut f_used_once)\n }"}, {"sha": "486a251f30b0e5f5ec820acebab7936d1c84999c", "filename": "tests/ui/eta.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feta.rs?ref=dbadf37336825faae9c14814eace50468da06b48", "patch": "@@ -305,12 +305,14 @@ fn not_general_enough() {\n }\n \n // https://github.com/rust-lang/rust-clippy/issues/9369\n-pub fn mutable_impl_fn_mut(mut f: impl FnMut()) {\n+pub fn mutable_impl_fn_mut(mut f: impl FnMut(), mut f_used_once: impl FnMut()) -> impl FnMut() {\n     fn takes_fn_mut(_: impl FnMut()) {}\n     takes_fn_mut(|| f());\n \n     fn takes_fn_once(_: impl FnOnce()) {}\n     takes_fn_once(|| f());\n \n     f();\n+\n+    move || takes_fn_mut(|| f_used_once())\n }"}, {"sha": "434706b7e258f07d70cd75e9523b4807c06a739c", "filename": "tests/ui/eta.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dbadf37336825faae9c14814eace50468da06b48/tests%2Fui%2Feta.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feta.stderr?ref=dbadf37336825faae9c14814eace50468da06b48", "patch": "@@ -128,5 +128,11 @@ error: redundant closure\n LL |     takes_fn_once(|| f());\n    |                   ^^^^^^ help: replace the closure with the function itself: `&mut f`\n \n-error: aborting due to 21 previous errors\n+error: redundant closure\n+  --> $DIR/eta.rs:317:26\n+   |\n+LL |     move || takes_fn_mut(|| f_used_once())\n+   |                          ^^^^^^^^^^^^^^^^ help: replace the closure with the function itself: `&mut f_used_once`\n+\n+error: aborting due to 22 previous errors\n "}]}