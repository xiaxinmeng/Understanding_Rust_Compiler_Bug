{"sha": "7a2bff7f1a253f6f3d713c153d651f4d52038be5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhMmJmZjdmMWEyNTNmNmYzZDcxM2MxNTNkNjUxZjRkNTIwMzhiZTU=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-12-14T14:40:51Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-12-14T14:40:51Z"}, "message": "Do not produce debuginfo for tools", "tree": {"sha": "ba1a2603b2ef5baafee17ceea495338af298a4fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ba1a2603b2ef5baafee17ceea495338af298a4fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a2bff7f1a253f6f3d713c153d651f4d52038be5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAloyjXMACgkQpp+NIls6\n19mo4A//QQUjnpJZOpDzb0V2Zfj4Yfqm9iWtmnBlpVoSV3O5vZ6Iazbc4APcCoie\njGzJhRfy+gDr9j6++KOyB97Jb9r6tUjoJzvKTAOaQH+GSmdM9MCacUMMsYBsiZ6u\nBtl9B6xbkzVn6HAwsDqhGkkcksKyK6bqPjCTcoM2jKa7HTTGv+4Qd1fnY0Xls+MR\npDIZysZawHgYd3N8fknxDUfLVf8QpoWAZtlsdmYc+V8PemdlhwWyLr4rgUGr6IXo\nyNv0+1S4HtGneY2I6BTn+Ls96m+V9wHy76zg5GTEwUeR4A8kTi0fyejYvzEyoag8\nssbdO+P1c4LcspYF7IGFmTizZdLeWxELZ//R8KmNaDu7n/tqFCqNvrcT1Cdeufyi\n5rfOKPXnss3/712uBKOIiazhS3NmFdgafm/vsobsGsnRKydOBvfm9lhVnQkaxEKj\nDo2wEcFNNb1HDgDjk6QTZi9pKWB5zjzY3ouJ2vQ+gQcUjg2Shujibl8oaDozwZte\nvzn6edF6t3H5aAMTBKMWw7nCMr7AFMBhFminDgpvUUpJp7VUxb0HRGliS4pbsYq5\nAiCXRzZhrrYUF5z11r0TZE/k/4NXoMDlR2bAjZIZdFxZP1l513WZo4Ca/1ngdDjh\n0yMK5zDdfOOzwnClrQ6QkEu2Ox/Ya8jffb4fMHWsHRbfFo6VxQQ=\n=g7gT\n-----END PGP SIGNATURE-----", "payload": "tree ba1a2603b2ef5baafee17ceea495338af298a4fa\nparent 1ba46dc378bbc3101a657a095d66a9c62a80a423\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1513262451 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1513262451 +0100\n\nDo not produce debuginfo for tools\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a2bff7f1a253f6f3d713c153d651f4d52038be5", "html_url": "https://github.com/rust-lang/rust/commit/7a2bff7f1a253f6f3d713c153d651f4d52038be5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a2bff7f1a253f6f3d713c153d651f4d52038be5/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1ba46dc378bbc3101a657a095d66a9c62a80a423", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ba46dc378bbc3101a657a095d66a9c62a80a423", "html_url": "https://github.com/rust-lang/rust/commit/1ba46dc378bbc3101a657a095d66a9c62a80a423"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "bdc00295a2041073dd15476f4ff91dae482d0886", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7a2bff7f1a253f6f3d713c153d651f4d52038be5/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2bff7f1a253f6f3d713c153d651f4d52038be5/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=7a2bff7f1a253f6f3d713c153d651f4d52038be5", "patch": "@@ -495,10 +495,13 @@ impl<'a> Builder<'a> {\n         if let Some(target_linker) = self.build.linker(target) {\n             cargo.env(\"RUSTC_TARGET_LINKER\", target_linker);\n         }\n-        cargo.env(\"RUSTC_DEBUGINFO\", self.config.rust_debuginfo.to_string())\n-            .env(\"RUSTC_DEBUGINFO_LINES\", self.config.rust_debuginfo_lines.to_string());\n \n         if mode != Mode::Tool {\n+            // Tools don't get debuginfo right now, e.g. cargo and rls don't\n+            // get compiled with debuginfo.\n+            // Adding debuginfo increases their sizes by a factor of 3-4.\n+            cargo.env(\"RUSTC_DEBUGINFO\", self.config.rust_debuginfo.to_string());\n+            cargo.env(\"RUSTC_DEBUGINFO_LINES\", self.config.rust_debuginfo_lines.to_string());\n             cargo.env(\"RUSTC_FORCE_UNSTABLE\", \"1\");\n \n             // Currently the compiler depends on crates from crates.io, and"}]}