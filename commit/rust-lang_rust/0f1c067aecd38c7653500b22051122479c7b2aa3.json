{"sha": "0f1c067aecd38c7653500b22051122479c7b2aa3", "node_id": "C_kwDOAAsO6NoAKDBmMWMwNjdhZWNkMzhjNzY1MzUwMGIyMjA1MTEyMjQ3OWM3YjJhYTM", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-05-07T03:49:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-07T03:49:34Z"}, "message": "Rollup merge of #96758 - davidtwco:split-debuginfo-bootstrap-bsd, r=Mark-Simulacrum\n\nbootstrap: bsd platform flags for split debuginfo\n\nAddresses https://github.com/rust-lang/rust/pull/96597#issuecomment-1118905025.\n\nBootstrap currently provides `-Zunstable-options` for OpenBSD when using split debuginfo - this commit provides it for all BSD targets.\n\nWe should probably work out a better way of handling the stability of the split debuginfo flag - all options for the flag are unstable but one of them is the default for each platform already.\n\ncc `@m-ou-se`\nr? `@Mark-Simulacrum`", "tree": {"sha": "5eb8e1e0de6e591f8cdb91bac7065ffddd241fac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5eb8e1e0de6e591f8cdb91bac7065ffddd241fac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0f1c067aecd38c7653500b22051122479c7b2aa3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJidexOCRBK7hj4Ov3rIwAAJCMIACZUz9aPPvWcomfJRf380v/e\nJORFlUlW1uxcoh5xDAmnh/13QiFyznPIUsw4uXmPtTyzh+liWJl+Zk66mlzzNkBB\naeAq1iEuPN7dDzRnEDEGrIU2Ed3CZN7oK0DKWWvrwOvHWRTs/hCOiHFCPEgVaE5G\nODG9FZFYgMufhdlNMJd72Q0fuGcx9jjlVQV3K4HZfSL9azjvKrQhrrr8S2VAr/Mu\nxsCbU2DajziJRqUofl0hBlYYwzua7glGRh+9xsYzvRQikf/aERon71ABPEJS16Z5\nF6wwAtgMo2oZLi937/XOKX4be1eczxclZWpaxbij3LHWAgL6E4Dyc6C32GIRSF0=\n=akcn\n-----END PGP SIGNATURE-----\n", "payload": "tree 5eb8e1e0de6e591f8cdb91bac7065ffddd241fac\nparent 825dc80d1a056d57fd136a448609bb2beb0be5fd\nparent 80087b98ccea66b0734c514b97014399b5100255\nauthor Michael Goulet <michael@errs.io> 1651895374 -0700\ncommitter GitHub <noreply@github.com> 1651895374 -0700\n\nRollup merge of #96758 - davidtwco:split-debuginfo-bootstrap-bsd, r=Mark-Simulacrum\n\nbootstrap: bsd platform flags for split debuginfo\n\nAddresses https://github.com/rust-lang/rust/pull/96597#issuecomment-1118905025.\n\nBootstrap currently provides `-Zunstable-options` for OpenBSD when using split debuginfo - this commit provides it for all BSD targets.\n\nWe should probably work out a better way of handling the stability of the split debuginfo flag - all options for the flag are unstable but one of them is the default for each platform already.\n\ncc `@m-ou-se`\nr? `@Mark-Simulacrum`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0f1c067aecd38c7653500b22051122479c7b2aa3", "html_url": "https://github.com/rust-lang/rust/commit/0f1c067aecd38c7653500b22051122479c7b2aa3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0f1c067aecd38c7653500b22051122479c7b2aa3/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "825dc80d1a056d57fd136a448609bb2beb0be5fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/825dc80d1a056d57fd136a448609bb2beb0be5fd", "html_url": "https://github.com/rust-lang/rust/commit/825dc80d1a056d57fd136a448609bb2beb0be5fd"}, {"sha": "80087b98ccea66b0734c514b97014399b5100255", "url": "https://api.github.com/repos/rust-lang/rust/commits/80087b98ccea66b0734c514b97014399b5100255", "html_url": "https://github.com/rust-lang/rust/commit/80087b98ccea66b0734c514b97014399b5100255"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "fe60c6da92bfb0f67bf93ae8a735b5c88689b509", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0f1c067aecd38c7653500b22051122479c7b2aa3/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0f1c067aecd38c7653500b22051122479c7b2aa3/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=0f1c067aecd38c7653500b22051122479c7b2aa3", "patch": "@@ -1417,8 +1417,12 @@ impl<'a> Builder<'a> {\n         // FIXME(davidtwco): #[cfg(not(bootstrap))] - #95612 needs to be in the bootstrap compiler\n         // for this conditional to be removed.\n         if !target.contains(\"windows\") || compiler.stage >= 1 {\n-            if target.contains(\"linux\") || target.contains(\"windows\") || target.contains(\"openbsd\")\n-            {\n+            let needs_unstable_opts = target.contains(\"linux\")\n+                || target.contains(\"windows\")\n+                || target.contains(\"bsd\")\n+                || target.contains(\"dragonfly\");\n+\n+            if needs_unstable_opts {\n                 rustflags.arg(\"-Zunstable-options\");\n             }\n             match self.config.rust_split_debuginfo {"}]}