{"sha": "ca225df7f328a574638ca45ff2c0c15ff8aeabd2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhMjI1ZGY3ZjMyOGE1NzQ2MzhjYTQ1ZmYyYzBjMTVmZjhhZWFiZDI=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-05-14T14:03:09Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-05-14T14:03:09Z"}, "message": "Rollup merge of #25354 - mdinger:delete_book, r=steveklabnik\n\nrustbook throws errors if the `_book` folder exists already. Common if you build twice in a row. Identical to https://github.com/steveklabnik/rustbook/issues/20", "tree": {"sha": "a77eaf82e695f88b0dd463b561a1f293b985512c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a77eaf82e695f88b0dd463b561a1f293b985512c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca225df7f328a574638ca45ff2c0c15ff8aeabd2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca225df7f328a574638ca45ff2c0c15ff8aeabd2", "html_url": "https://github.com/rust-lang/rust/commit/ca225df7f328a574638ca45ff2c0c15ff8aeabd2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca225df7f328a574638ca45ff2c0c15ff8aeabd2/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1bd3a3c5180b2d671e5810cb5211b2d2b456a71", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1bd3a3c5180b2d671e5810cb5211b2d2b456a71", "html_url": "https://github.com/rust-lang/rust/commit/b1bd3a3c5180b2d671e5810cb5211b2d2b456a71"}, {"sha": "e5efea4eb3a75db539fd267ae2574278ec6838bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5efea4eb3a75db539fd267ae2574278ec6838bd", "html_url": "https://github.com/rust-lang/rust/commit/e5efea4eb3a75db539fd267ae2574278ec6838bd"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "47bdc9335c4019819de309ac70da326c1c528162", "filename": "src/rustbook/build.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ca225df7f328a574638ca45ff2c0c15ff8aeabd2/src%2Frustbook%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca225df7f328a574638ca45ff2c0c15ff8aeabd2/src%2Frustbook%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustbook%2Fbuild.rs?ref=ca225df7f328a574638ca45ff2c0c15ff8aeabd2", "patch": "@@ -183,6 +183,12 @@ impl Subcommand for Build {\n             tgt = PathBuf::from(&env::args().nth(3).unwrap());\n         }\n \n+        // `_book` directory may already exist from previous runs. Check and\n+        // delete it if it exists.\n+        for entry in try!(fs::read_dir(&cwd)) {\n+            let path = try!(entry).path();\n+            if path == tgt { try!(fs::remove_dir_all(&tgt)) }\n+        }\n         try!(fs::create_dir(&tgt));\n \n         try!(File::create(&tgt.join(\"rust-book.css\")).and_then(|mut f| {"}]}