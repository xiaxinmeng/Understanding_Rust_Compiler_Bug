{"sha": "1183371af17fb67317a9d860d3028db500a14ba7", "node_id": "C_kwDOAAsO6NoAKDExODMzNzFhZjE3ZmI2NzMxN2E5ZDg2MGQzMDI4ZGI1MDBhMTRiYTc", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2021-09-19T17:46:05Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2021-09-21T02:21:43Z"}, "message": "Remove Drop-caused migration-added captures\n\nAll of these were added due to insignificant Drop types being present.", "tree": {"sha": "f7ef5044d3b8affa637d11227aee0a6687eb5b12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7ef5044d3b8affa637d11227aee0a6687eb5b12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1183371af17fb67317a9d860d3028db500a14ba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1183371af17fb67317a9d860d3028db500a14ba7", "html_url": "https://github.com/rust-lang/rust/commit/1183371af17fb67317a9d860d3028db500a14ba7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1183371af17fb67317a9d860d3028db500a14ba7/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ede86797bd8249db720fc61a0c6b9d94c0bd9052", "url": "https://api.github.com/repos/rust-lang/rust/commits/ede86797bd8249db720fc61a0c6b9d94c0bd9052", "html_url": "https://github.com/rust-lang/rust/commit/ede86797bd8249db720fc61a0c6b9d94c0bd9052"}], "stats": {"total": 5, "additions": 1, "deletions": 4}, "files": [{"sha": "3a94f47298390a22ef1fc51459b443691fffc70c", "filename": "clippy_utils/src/lib.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1183371af17fb67317a9d860d3028db500a14ba7/clippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1183371af17fb67317a9d860d3028db500a14ba7/clippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Flib.rs?ref=1183371af17fb67317a9d860d3028db500a14ba7", "patch": "@@ -990,10 +990,7 @@ pub fn can_move_expr_to_closure(cx: &LateContext<'tcx>, expr: &'tcx Expr<'_>) ->\n         captures: HirIdMap::default(),\n     };\n     v.visit_expr(expr);\n-    v.allow_closure.then(|| {\n-        let _ = &v;\n-        v.captures\n-    })\n+    v.allow_closure.then(|| v.captures)\n }\n \n /// Returns the method names and argument list of nested method call expressions that make up"}]}