{"sha": "f53d43663814f63f1979c27085abb27aa9a183df", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1M2Q0MzY2MzgxNGY2M2YxOTc5YzI3MDg1YWJiMjdhYTlhMTgzZGY=", "commit": {"author": {"name": "Cassandra Fridkin", "email": "cass@swag.lgbt", "date": "2020-10-05T22:59:47Z"}, "committer": {"name": "Cassandra Fridkin", "email": "cass@swag.lgbt", "date": "2020-10-05T22:59:47Z"}, "message": "Remove the rust stuff and just make it a simple shell script\n\nIt's ok, now I'm writing enough Rust that i'm able to get my fix elsewhere", "tree": {"sha": "6a096e2f374d2b22a71807c9b4f024f333b2b375", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a096e2f374d2b22a71807c9b4f024f333b2b375"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f53d43663814f63f1979c27085abb27aa9a183df", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEdn8arGOPUN7UUjx9sGOAzKYTMzoFAl97pXsACgkQsGOAzKYT\nMzo1yw/+O0uAV3rOo/5IM17E/BJxrZo1Z8zyCwPGcXtvJNwAOoz54MvSWE3PsNu2\nQepzcvBPd8CEFgVugZbUcV8GCD59B8opVhCThuGISuYRm4hLZ8hJEOWUX0ph5346\nKkDb7iV9UcIT1RxwpoxupynyeHIPVChQoEO1VwLqMCn/qe3oNavaNQ5S61P+foo3\noJxP4coYZPjCnuVFIgSvVc4UKTsZSXLntP4sDoCxUj4ihDoqJ8ELNTuZ+TPXONN2\nK4p2SMl2ff5psHpYcAF84dfJEqy0GHgEuzpjgHCHSSYP1oQKZ1nRUqye8oIHu+pQ\nyuyz7xGKQ8ijHhkPZhJnvlzCZHIkkZmUD2npOvI2kf2H68yZl2J1aXcBILdheNSj\n+muVeChNSW+a8qyu/NzpTv5Iq82lqphqA97Yhy2oGvp7ctH4h+GFqlB7LelaYWoX\n2qW75/75WbkTtg/LHmpCqi9aH39/Gm659rzunn/UfGj913/CqaPjfvG6Xmw+IHTM\n4owtXF97dUhjjimXl4bdCqVwO+5BuAksOZfZhZlPJNBO6GULbHzSfSxCAMLEnRsC\nR1AjeHIP/v//TNeQYwD3EkugKbWY9GopO7EPd7ciHqreXUv3VGZZcwLX4cAErY9f\naixns7DpZobFkLnq5+FlDdpQqmsQ63XmiMYMv0WWbwlNivViDBs=\n=+K5k\n-----END PGP SIGNATURE-----", "payload": "tree 6a096e2f374d2b22a71807c9b4f024f333b2b375\nparent 7de557bf9c550623ce6493b8af940cb9b08c2293\nauthor Cassandra Fridkin <cass@swag.lgbt> 1601938787 -0400\ncommitter Cassandra Fridkin <cass@swag.lgbt> 1601938787 -0400\n\nRemove the rust stuff and just make it a simple shell script\n\nIt's ok, now I'm writing enough Rust that i'm able to get my fix elsewhere\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f53d43663814f63f1979c27085abb27aa9a183df", "html_url": "https://github.com/rust-lang/rust/commit/f53d43663814f63f1979c27085abb27aa9a183df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f53d43663814f63f1979c27085abb27aa9a183df/comments", "author": {"login": "caass", "id": 25358963, "node_id": "MDQ6VXNlcjI1MzU4OTYz", "avatar_url": "https://avatars.githubusercontent.com/u/25358963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caass", "html_url": "https://github.com/caass", "followers_url": "https://api.github.com/users/caass/followers", "following_url": "https://api.github.com/users/caass/following{/other_user}", "gists_url": "https://api.github.com/users/caass/gists{/gist_id}", "starred_url": "https://api.github.com/users/caass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caass/subscriptions", "organizations_url": "https://api.github.com/users/caass/orgs", "repos_url": "https://api.github.com/users/caass/repos", "events_url": "https://api.github.com/users/caass/events{/privacy}", "received_events_url": "https://api.github.com/users/caass/received_events", "type": "User", "site_admin": false}, "committer": {"login": "caass", "id": 25358963, "node_id": "MDQ6VXNlcjI1MzU4OTYz", "avatar_url": "https://avatars.githubusercontent.com/u/25358963?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caass", "html_url": "https://github.com/caass", "followers_url": "https://api.github.com/users/caass/followers", "following_url": "https://api.github.com/users/caass/following{/other_user}", "gists_url": "https://api.github.com/users/caass/gists{/gist_id}", "starred_url": "https://api.github.com/users/caass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caass/subscriptions", "organizations_url": "https://api.github.com/users/caass/orgs", "repos_url": "https://api.github.com/users/caass/repos", "events_url": "https://api.github.com/users/caass/events{/privacy}", "received_events_url": "https://api.github.com/users/caass/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7de557bf9c550623ce6493b8af940cb9b08c2293", "url": "https://api.github.com/repos/rust-lang/rust/commits/7de557bf9c550623ce6493b8af940cb9b08c2293", "html_url": "https://github.com/rust-lang/rust/commit/7de557bf9c550623ce6493b8af940cb9b08c2293"}], "stats": {"total": 52, "additions": 1, "deletions": 51}, "files": [{"sha": "d216b09c66a603899a0b4540ec539b01cf2454b0", "filename": "Cargo.lock", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f53d43663814f63f1979c27085abb27aa9a183df/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/f53d43663814f63f1979c27085abb27aa9a183df/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=f53d43663814f63f1979c27085abb27aa9a183df", "patch": "@@ -1458,10 +1458,6 @@ dependencies = [\n  \"hashbrown\",\n ]\n \n-[[package]]\n-name = \"install-git-hook\"\n-version = \"0.1.0\"\n-\n [[package]]\n name = \"installer\"\n version = \"0.0.0\""}, {"sha": "02794d1028b506b4510a71e140de62a4fb210d31", "filename": "Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f53d43663814f63f1979c27085abb27aa9a183df/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/f53d43663814f63f1979c27085abb27aa9a183df/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=f53d43663814f63f1979c27085abb27aa9a183df", "patch": "@@ -8,7 +8,6 @@ members = [\n   \"src/tools/clippy\",\n   \"src/tools/compiletest\",\n   \"src/tools/error_index_generator\",\n-  \"src/tools/install-git-hook\",\n   \"src/tools/linkchecker\",\n   \"src/tools/lint-docs\",\n   \"src/tools/rustbook\","}, {"sha": "4bc162abee6c11e26faadc741ae8f982d07c9caf", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=f53d43663814f63f1979c27085abb27aa9a183df", "patch": "@@ -477,7 +477,7 @@ impl<'a> Builder<'a> {\n                 install::Src,\n                 install::Rustc\n             ),\n-            Kind::Run => describe!(run::ExpandYamlAnchors, run::BuildManifest, run::InstallGitHook),\n+            Kind::Run => describe!(run::ExpandYamlAnchors, run::BuildManifest),\n         }\n     }\n "}, {"sha": "80c093e713eff8619d427c5ec2872b5a6b0c9e27", "filename": "src/bootstrap/run.rs", "status": "modified", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Frun.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Frun.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Frun.rs?ref=f53d43663814f63f1979c27085abb27aa9a183df", "patch": "@@ -44,29 +44,6 @@ fn try_run(builder: &Builder<'_>, cmd: &mut Command) -> bool {\n     true\n }\n \n-#[derive(Debug, Copy, Clone, PartialEq, Eq, Hash)]\n-pub struct InstallGitHook;\n-\n-impl Step for InstallGitHook {\n-    type Output = ();\n-\n-    /// Runs the `install-git-hook` tool.\n-    ///\n-    /// This tool in `src/tools` installs a git hook to automatically run\n-    /// `tidy --bless` before each commit, so you don't forget to do it\n-    fn run(self, builder: &Builder<'_>) {\n-        builder.info(\"Installing git hook\");\n-        try_run(builder, &mut builder.tool_cmd(Tool::InstallGitHook).arg(&builder.src));\n-    }\n-\n-    fn should_run(run: ShouldRun<'_>) -> ShouldRun<'_> {\n-        run.path(\"src/tools/install-git-hook\")\n-    }\n-\n-    fn make_run(run: RunConfig<'_>) {\n-        run.builder.ensure(InstallGitHook);\n-    }\n-}\n #[derive(Debug, PartialOrd, Ord, Copy, Clone, Hash, PartialEq, Eq)]\n pub struct BuildManifest;\n "}, {"sha": "290e3744852f4d2dcbf38ff5866a56ba4ad5d9a0", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f53d43663814f63f1979c27085abb27aa9a183df/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=f53d43663814f63f1979c27085abb27aa9a183df", "patch": "@@ -366,7 +366,6 @@ bootstrap_tool!(\n     RustInstaller, \"src/tools/rust-installer\", \"fabricate\", is_external_tool = true;\n     RustdocTheme, \"src/tools/rustdoc-themes\", \"rustdoc-themes\";\n     ExpandYamlAnchors, \"src/tools/expand-yaml-anchors\", \"expand-yaml-anchors\";\n-    InstallGitHook, \"src/tools/install-git-hook\", \"install-git-hook\";\n     LintDocs, \"src/tools/lint-docs\", \"lint-docs\";\n );\n "}, {"sha": "1b089a84da880f56d2b1e385eb721944c35a8d4c", "filename": "src/tools/install-git-hook/Cargo.toml", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7de557bf9c550623ce6493b8af940cb9b08c2293/src%2Ftools%2Finstall-git-hook%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7de557bf9c550623ce6493b8af940cb9b08c2293/src%2Ftools%2Finstall-git-hook%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Finstall-git-hook%2FCargo.toml?ref=7de557bf9c550623ce6493b8af940cb9b08c2293", "patch": "@@ -1,5 +0,0 @@\n-[package]\n-name = \"install-git-hook\"\n-version = \"0.1.0\"\n-authors = [\"Cass Fridkin <cass@swag.lgbt>\"]\n-edition = \"2018\"\n\\ No newline at end of file"}, {"sha": "64b5233dfb398e2160bea2d0ff645eec763e78cb", "filename": "src/tools/install-git-hook/src/main.rs", "status": "removed", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/7de557bf9c550623ce6493b8af940cb9b08c2293/src%2Ftools%2Finstall-git-hook%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7de557bf9c550623ce6493b8af940cb9b08c2293/src%2Ftools%2Finstall-git-hook%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Finstall-git-hook%2Fsrc%2Fmain.rs?ref=7de557bf9c550623ce6493b8af940cb9b08c2293", "patch": "@@ -1,16 +0,0 @@\n-//! Small helper program to install a git hook to automatically run\n-//! `x.py test tidy --bless` before each commit.\n-\n-use std::env;\n-use std::fs;\n-use std::path::PathBuf;\n-\n-fn main() {\n-    let root_path: PathBuf = env::args_os().nth(1).expect(\"need path to root of repo\").into();\n-    let script_path: PathBuf = root_path.join(\"src/tools/install-git-hook/src/pre-commit.sh\");\n-    let hook_path: PathBuf = root_path.join(\".git/hooks/pre-commit\");\n-\n-    fs::copy(&script_path, &hook_path).expect(\n-        format!(\"Failed to copy pre-commit script to {}\", &hook_path.to_string_lossy()).as_str(),\n-    );\n-}"}]}