{"sha": "00cbc75c74cda031a5e9df592cca95644f17ec8f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwY2JjNzVjNzRjZGEwMzFhNWU5ZGY1OTJjY2E5NTY0NGYxN2VjOGY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-20T17:32:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-20T17:32:06Z"}, "message": "Rollup merge of #66298 - Ppjet6:disable-search-field, r=GuillaumeGomez\n\nrustdoc: fixes #64305: disable search field instead of hidding it\n\nThe result seems to be ok but I wasn't entirely sure how to get there. I tried to stay generic a bit but maybe it's not required at all.\n\n@GuillaumeGomez\n\nSigned-off-by: Maxime \u201cpep\u201d Buquet <pep@bouah.net>", "tree": {"sha": "6d2135b0044c17ad36a707beb42c54d4cea912f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d2135b0044c17ad36a707beb42c54d4cea912f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00cbc75c74cda031a5e9df592cca95644f17ec8f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJd1XiWCRBK7hj4Ov3rIwAAdHIIAFHj3gIAJxIqWKhpO5sY6pF6\nIy7xt+5F3NIFz/2BQzY0hRaiaypvtlDyGsLhhYERwIrvC6qaoHdH5RJ4sKwHpkX+\nK/TZtGUHm2Z6LnSpuFeqaKLhQ3qAJ/nzeQ7M2Mp/W6z/69DbfdF83C6ZbGORMDqd\nF6aXGOOb/rDljMGWjYyAQeSqdEIiMeI6BpT8SqJwOifYUL5gqXq99gogAlNlhXEG\nzKtDbBHvwlM4C9qUqWH9+QEcnu8iOarrH2fQshI08jgpYbtXnjUy643Bvc1tTlz0\nKC9XodRANlKSuvUjqjZpM/dEv+E6en8rM79qntNDzk8aw8bZ71DOZS0zH8Vq3w8=\n=nUpc\n-----END PGP SIGNATURE-----\n", "payload": "tree 6d2135b0044c17ad36a707beb42c54d4cea912f9\nparent e32397a75404d3e23701a727ebba753e391c1471\nparent 572133845afaea6b3ed4c3400202301a96d44c00\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1574271126 +0100\ncommitter GitHub <noreply@github.com> 1574271126 +0100\n\nRollup merge of #66298 - Ppjet6:disable-search-field, r=GuillaumeGomez\n\nrustdoc: fixes #64305: disable search field instead of hidding it\n\nThe result seems to be ok but I wasn't entirely sure how to get there. I tried to stay generic a bit but maybe it's not required at all.\n\n@GuillaumeGomez\n\nSigned-off-by: Maxime \u201cpep\u201d Buquet <pep@bouah.net>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00cbc75c74cda031a5e9df592cca95644f17ec8f", "html_url": "https://github.com/rust-lang/rust/commit/00cbc75c74cda031a5e9df592cca95644f17ec8f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00cbc75c74cda031a5e9df592cca95644f17ec8f/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e32397a75404d3e23701a727ebba753e391c1471", "url": "https://api.github.com/repos/rust-lang/rust/commits/e32397a75404d3e23701a727ebba753e391c1471", "html_url": "https://github.com/rust-lang/rust/commit/e32397a75404d3e23701a727ebba753e391c1471"}, {"sha": "572133845afaea6b3ed4c3400202301a96d44c00", "url": "https://api.github.com/repos/rust-lang/rust/commits/572133845afaea6b3ed4c3400202301a96d44c00", "html_url": "https://github.com/rust-lang/rust/commit/572133845afaea6b3ed4c3400202301a96d44c00"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "a6f37053687c995d6cff07eaeddb86a4803c54db", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=00cbc75c74cda031a5e9df592cca95644f17ec8f", "patch": "@@ -87,10 +87,11 @@ pub fn render<T: Print, S: Print>(\n     </div>\\\n     <script src=\\\"{static_root_path}theme{suffix}.js\\\"></script>\\\n     <nav class=\\\"sub\\\">\\\n-        <form class=\\\"search-form js-only\\\">\\\n+        <form class=\\\"search-form\\\">\\\n             <div class=\\\"search-container\\\">\\\n                 <div>{filter_crates}\\\n                     <input class=\\\"search-input\\\" name=\\\"search\\\" \\\n+                           disabled \\\n                            autocomplete=\\\"off\\\" \\\n                            spellcheck=\\\"false\\\" \\\n                            placeholder=\\\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\\\" \\"}, {"sha": "7e6666d59047799516947d6c82ae3d0de6e4c778", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=00cbc75c74cda031a5e9df592cca95644f17ec8f", "patch": "@@ -142,10 +142,6 @@ function getSearchElement() {\n     var TY_PRIMITIVE = itemTypes.indexOf(\"primitive\");\n     var TY_KEYWORD = itemTypes.indexOf(\"keyword\");\n \n-    onEachLazy(document.getElementsByClassName(\"js-only\"), function(e) {\n-        removeClass(e, \"js-only\");\n-    });\n-\n     function getQueryStringParams() {\n         var params = {};\n         window.location.search.substring(1).split(\"&\").\n@@ -2639,6 +2635,10 @@ function getSearchElement() {\n             option.innerText = crates_text[i];\n             elem.appendChild(option);\n         }\n+\n+        if (search_input) {\n+            search_input.removeAttribute('disabled');\n+        };\n     }\n \n     window.addSearchOptions = addSearchOptions;"}, {"sha": "b2c48bf089b1b242416451b7c95a16c91c83cec6", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=00cbc75c74cda031a5e9df592cca95644f17ec8f", "patch": "@@ -203,7 +203,7 @@ nav.sub {\n \n /* Everything else */\n \n-.js-only, .hidden {\n+.hidden {\n \tdisplay: none !important;\n }\n "}, {"sha": "f46bd6d6a10052530880791548e987c46ffe38c3", "filename": "src/librustdoc/html/static/themes/dark.css", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Fdark.css?ref=00cbc75c74cda031a5e9df592cca95644f17ec8f", "patch": "@@ -177,6 +177,10 @@ a.test-arrow {\n \tborder-color: #008dfd;\n }\n \n+.search-focus:disabled {\n+\tbackground-color: #c5c4c4;\n+}\n+\n #crate-search + .search-input:focus {\n \tbox-shadow: 0 0 8px 4px #078dd8;\n }"}, {"sha": "ca67b1c1f8241993e474b0f0824447ba4d889ebf", "filename": "src/librustdoc/html/static/themes/light.css", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/00cbc75c74cda031a5e9df592cca95644f17ec8f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fthemes%2Flight.css?ref=00cbc75c74cda031a5e9df592cca95644f17ec8f", "patch": "@@ -177,6 +177,10 @@ a.test-arrow {\n \tborder-color: #66afe9;\n }\n \n+.search-focus:disabled {\n+\tbackground-color: #e6e6e6;\n+}\n+\n #crate-search + .search-input:focus {\n \tbox-shadow: 0 0 8px #078dd8;\n }"}]}