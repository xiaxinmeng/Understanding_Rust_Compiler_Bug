{"sha": "7b5c3afae533e725d2eddb48df27117bdb820e15", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiNWMzYWZhZTUzM2U3MjVkMmVkZGI0OGRmMjcxMTdiZGI4MjBlMTU=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-14T19:55:51Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-14T19:55:51Z"}, "message": "Revert part of my last change while I figure out why windows doesn't like it.", "tree": {"sha": "c7f28f857aceb857fe61ba171f7e07086d6afa37", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7f28f857aceb857fe61ba171f7e07086d6afa37"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b5c3afae533e725d2eddb48df27117bdb820e15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b5c3afae533e725d2eddb48df27117bdb820e15", "html_url": "https://github.com/rust-lang/rust/commit/7b5c3afae533e725d2eddb48df27117bdb820e15", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b5c3afae533e725d2eddb48df27117bdb820e15/comments", "author": null, "committer": null, "parents": [{"sha": "f24408d89a4135d355dbd54c9a58ea591779edfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/f24408d89a4135d355dbd54c9a58ea591779edfb", "html_url": "https://github.com/rust-lang/rust/commit/f24408d89a4135d355dbd54c9a58ea591779edfb"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "79ab8d3774b626ee4e81d7fd1984d8b708e71e9d", "filename": "mk/tests.mk", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/7b5c3afae533e725d2eddb48df27117bdb820e15/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/7b5c3afae533e725d2eddb48df27117bdb820e15/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=7b5c3afae533e725d2eddb48df27117bdb820e15", "patch": "@@ -200,13 +200,15 @@ compile-check: tidy \\\n \t@# programs, I\\'ll live with the noise.\n \t-$(Q)$(CFG_DSYMUTIL) $@\n \n-%.stage2$(X): %.rs $(SREQ2)\n-\t@$(call E, compile_and_link: $@)\n-\t$(STAGE2) -o $@ $<\n+%.stage2$(X): %.stage2.o $(SREQ2)\n+\t@$(call E, link [gcc]: $@)\n+\t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage3/glue.o -o $@ $< \\\n+      -Lstage3 -Lrt rt/main.o -lrustrt -lstd -lm\n+\t@# dsymutil sometimes fails or prints a warning, but the\n+\t@# program still runs.  Since it simplifies debugging other\n+\t@# programs, I\\'ll live with the noise.\n+\t-$(Q)$(CFG_DSYMUTIL) $@\n \n-%.stage2$(X): %.rc $(SREQ2)\n-\t@$(call E, compile_and_link: $@)\n-\t$(STAGE2) -o $@ $<\n \n %.stage0.o: %.rc $(SREQ0)\n \t@$(call E, compile [stage0]: $@)\n@@ -225,6 +227,15 @@ compile-check: tidy \\\n \t@$(call E, compile [stage1]: $@)\n \t$(STAGE1) -c -o $@ $<\n \n+\n+%.stage2.o: %.rc $(SREQ2)\n+\t@$(call E, compile [stage2]: $@)\n+\t$(STAGE2) -c -o $@ $<\n+\n+%.stage2.o: %.rs $(SREQ2)\n+\t@$(call E, compile [stage2]: $@)\n+\t$(STAGE2) -c -o $@ $<\n+\n # Cancel the implicit .out rule in GNU make.\n %.out: %\n "}]}