{"sha": "aa1ad42736a296211effd3b0a320a8057e3552f5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhMWFkNDI3MzZhMjk2MjExZWZmZDNiMGEzMjBhODA1N2UzNTUyZjU=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-03-25T19:01:11Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-03-25T19:20:54Z"}, "message": "Also deploy from the beta branch", "tree": {"sha": "17c6c603e1768e634e812fca87f1565ffcef9995", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17c6c603e1768e634e812fca87f1565ffcef9995"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa1ad42736a296211effd3b0a320a8057e3552f5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl57rxYACgkQLO/Nsn7Q\nvnngAA/+Lbq7k3bb5w7O1DWcsjH0fFso+fGvubprIN9L+KzOM3t6CEdsB7UI+SRN\nRrm8DLjudF+mCETyYaOmk+YIlFwAIGrMKMp8H4jFS6Xewnl4idXv9iK8chc9E5XI\nd7wn7i2oMIzQywJpFr/hW8bOsfRdkKM5UtRXzuqTm3geaX8t5CJVmBlFAIgMs3uE\noe7gXm1FSi/wFnvgvQRV4GTtMPEzCdJdlJa9QQkL2V8c2KSvKcFMgEDRJcOmgeMc\nlKvuEcohsyStsbrXbbbOJYG+wQaKzJcextx6MJUuHBDtVjZiLdWeK1lHfpwPj6Jc\nlvnGIrODt0LSV7h46YCFEQuN9qIx3oOravPwzXgQZG8HxgLblgmWkc9iVD+GqHJm\nrkVDy3kO4nYv9RETBlvk90VhYVCWqPMtjYxZ042rUhD8jnRbNQDZPW4UaSwU5Dxh\nviFI5LI+7PdI+ZtAqyQuhvpl8slSpdWPl/2qJbLAxAJeRhvvI4pAyoI+i/m37jm9\nqFdYvV7fns8BO6oJoJ8NF1pJAFOr/+b9DFd+j0OmRhtbRff+BZA9mRRn+sab5CJk\nQc2MktAPgSpDDPrHwjB+qSkEyWhD3spua0iAPNWuWOT92T2WAhvPm4xybKJE0NsI\nEhRELM5azyx4U1Mf7h3pgustWv6edPPC/iHENS0iRbozPTkwBnk=\n=ScMN\n-----END PGP SIGNATURE-----", "payload": "tree 17c6c603e1768e634e812fca87f1565ffcef9995\nparent d7440a0d7c0c080d1bfbe661436793947d87f2cc\nauthor flip1995 <hello@philkrones.com> 1585162871 +0100\ncommitter flip1995 <hello@philkrones.com> 1585164054 +0100\n\nAlso deploy from the beta branch\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa1ad42736a296211effd3b0a320a8057e3552f5", "html_url": "https://github.com/rust-lang/rust/commit/aa1ad42736a296211effd3b0a320a8057e3552f5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa1ad42736a296211effd3b0a320a8057e3552f5/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d7440a0d7c0c080d1bfbe661436793947d87f2cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7440a0d7c0c080d1bfbe661436793947d87f2cc", "html_url": "https://github.com/rust-lang/rust/commit/d7440a0d7c0c080d1bfbe661436793947d87f2cc"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "3f425e5b7258d52580b162ba1b6aecac643d8191", "filename": ".github/deploy.sh", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/aa1ad42736a296211effd3b0a320a8057e3552f5/.github%2Fdeploy.sh", "raw_url": "https://github.com/rust-lang/rust/raw/aa1ad42736a296211effd3b0a320a8057e3552f5/.github%2Fdeploy.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fdeploy.sh?ref=aa1ad42736a296211effd3b0a320a8057e3552f5", "patch": "@@ -17,6 +17,11 @@ if [[ -n $TAG_NAME ]]; then\n   ln -s \"$TAG_NAME\" out/stable\n fi\n \n+if [[ $BETA = \"true\" ]]; then\n+  echo \"Update documentation for the beta release\"\n+  cp -r out/master out/beta\n+fi\n+\n # Generate version index that is shown as root index page\n cp util/gh-pages/versions.html out/index.html\n \n@@ -35,12 +40,15 @@ fi\n \n if [[ -n $TAG_NAME ]]; then\n   # Add the new dir\n-  git add $TAG_NAME\n+  git add \"$TAG_NAME\"\n   # Update the symlink\n   git add stable\n   # Update versions file\n   git add versions.json\n   git commit -m \"Add documentation for ${TAG_NAME} release: ${SHA}\"\n+elif [[ $BETA = \"true\" ]]; then\n+  git add beta\n+  git commit -m \"Automatic deploy to GitHub Pages (beta): ${SHA}\"\n else\n   git add .\n   git commit -m \"Automatic deploy to GitHub Pages: ${SHA}\""}, {"sha": "10033daf0aedb428e9dc1f71a3f072f57aa3f468", "filename": ".github/workflows/deploy.yml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/aa1ad42736a296211effd3b0a320a8057e3552f5/.github%2Fworkflows%2Fdeploy.yml", "raw_url": "https://github.com/rust-lang/rust/raw/aa1ad42736a296211effd3b0a320a8057e3552f5/.github%2Fworkflows%2Fdeploy.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fdeploy.yml?ref=aa1ad42736a296211effd3b0a320a8057e3552f5", "patch": "@@ -4,6 +4,7 @@ on:\n   push:\n     branches:\n       - master\n+      - beta\n     tags:\n       - rust-1.**\n \n@@ -34,6 +35,9 @@ jobs:\n       run: |\n         TAG=$(basename ${{ github.ref }})\n         echo \"::set-env name=TAG_NAME::$TAG\"\n+    - name: Set beta to true\n+      if: github.ref == 'refs/heads/beta'\n+      run: echo \"::set-env name=BETA::true\"\n     - name: Deploy\n       run: |\n         eval \"$(ssh-agent -s)\""}, {"sha": "6e810a349bfccb640adbabfd9ce97d258bfd91d0", "filename": "util/gh-pages/versions.html", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa1ad42736a296211effd3b0a320a8057e3552f5/util%2Fgh-pages%2Fversions.html", "raw_url": "https://github.com/rust-lang/rust/raw/aa1ad42736a296211effd3b0a320a8057e3552f5/util%2Fgh-pages%2Fversions.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fgh-pages%2Fversions.html?ref=aa1ad42736a296211effd3b0a320a8057e3552f5", "patch": "@@ -65,6 +65,7 @@ <h3 class=\"panel-title\">\n             $scope.versionOrder = function(v) {\n                 if (v === 'master') { return Infinity; }\n                 if (v === 'stable') { return Number.MAX_VALUE; }\n+                if (v === 'beta') { return Number.MAX_VALUE - 1; }\n \n                 return $scope.normalizeVersion(v)\n                     .split('.')"}, {"sha": "5cdc7313f543906479d47f95c6b5be5edd189cc5", "filename": "util/versions.py", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa1ad42736a296211effd3b0a320a8057e3552f5/util%2Fversions.py", "raw_url": "https://github.com/rust-lang/rust/raw/aa1ad42736a296211effd3b0a320a8057e3552f5/util%2Fversions.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fversions.py?ref=aa1ad42736a296211effd3b0a320a8057e3552f5", "patch": "@@ -12,6 +12,8 @@ def key(v):\n         return float('inf')\n     if v == 'stable':\n         return sys.maxsize\n+    if v == 'beta':\n+        return sys.maxsize - 1\n \n     v = v.replace('v', '').replace('rust-', '')\n "}]}