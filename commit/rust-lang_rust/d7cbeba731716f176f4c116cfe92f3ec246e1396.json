{"sha": "d7cbeba731716f176f4c116cfe92f3ec246e1396", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3Y2JlYmE3MzE3MTZmMTc2ZjRjMTE2Y2ZlOTJmM2VjMjQ2ZTEzOTY=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2010-12-21T23:58:17Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2010-12-21T23:59:14Z"}, "message": "rustboot: Only bottom out at opaque IL types after finding two cycles. DON'T ASK ME WHY THIS WORKS.", "tree": {"sha": "6f4693f2689e63f5beeb46cc0b6854833ea4aad8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f4693f2689e63f5beeb46cc0b6854833ea4aad8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d7cbeba731716f176f4c116cfe92f3ec246e1396", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d7cbeba731716f176f4c116cfe92f3ec246e1396", "html_url": "https://github.com/rust-lang/rust/commit/d7cbeba731716f176f4c116cfe92f3ec246e1396", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d7cbeba731716f176f4c116cfe92f3ec246e1396/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6443179bcab63c440203a321297d32f5b2a2f8e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/6443179bcab63c440203a321297d32f5b2a2f8e0", "html_url": "https://github.com/rust-lang/rust/commit/6443179bcab63c440203a321297d32f5b2a2f8e0"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "019cd13ea1217f1e5ba8bfe88245f60de0c825bd", "filename": "src/boot/me/semant.ml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d7cbeba731716f176f4c116cfe92f3ec246e1396/src%2Fboot%2Fme%2Fsemant.ml", "raw_url": "https://github.com/rust-lang/rust/raw/d7cbeba731716f176f4c116cfe92f3ec246e1396/src%2Fboot%2Fme%2Fsemant.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Fme%2Fsemant.ml?ref=d7cbeba731716f176f4c116cfe92f3ec246e1396", "patch": "@@ -2425,7 +2425,7 @@ and referent_type\n                 Some parent_tags\n                   when boxed\n                     && parent_tags <> []\n-                    && List.mem ttag parent_tags\n+                    && (list_count ttag parent_tags) > 1\n                     && is_back_edge ttag (List.hd parent_tags) ->\n                   Il.StructTy [| word; Il.OpaqueTy |]\n               | _ -> tag ttag"}, {"sha": "f9b18246c79ca842dbb1d5544343ae5146378f01", "filename": "src/boot/util/common.ml", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d7cbeba731716f176f4c116cfe92f3ec246e1396/src%2Fboot%2Futil%2Fcommon.ml", "raw_url": "https://github.com/rust-lang/rust/raw/d7cbeba731716f176f4c116cfe92f3ec246e1396/src%2Fboot%2Futil%2Fcommon.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Futil%2Fcommon.ml?ref=d7cbeba731716f176f4c116cfe92f3ec246e1396", "patch": "@@ -380,6 +380,13 @@ let rec list_drop n ls =\n   else list_drop (n-1) (List.tl ls)\n ;;\n \n+let rec list_count elem lst =\n+  match lst with\n+      [] -> 0\n+    | h::t when h = elem -> 1 + (list_count elem t)\n+    | _::t -> list_count elem t\n+;;\n+\n \n (*\n  * Auxiliary pair functions."}]}