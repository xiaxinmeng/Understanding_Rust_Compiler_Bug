{"sha": "2d52aa05d1786b32f7d6e944a733352d31675acc", "node_id": "C_kwDOAAsO6NoAKDJkNTJhYTA1ZDE3ODZiMzJmN2Q2ZTk0NGE3MzMzNTJkMzE2NzVhY2M", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2022-07-27T15:55:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-27T15:55:08Z"}, "message": "Rollup merge of #99812 - GuillaumeGomez:fix-headings-colors, r=jsha,notriddle\n\nFix headings colors\n\nFixes #99797.\n\n![image](https://user-images.githubusercontent.com/3050060/181260966-49faf9d3-f6b8-4de4-bc7d-ed9f0467cf68.png)\n\ncc `@jsha`\nr? `@notriddle`", "tree": {"sha": "c4de38a0c79f34932eeb8c2716585a167e243703", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4de38a0c79f34932eeb8c2716585a167e243703"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2d52aa05d1786b32f7d6e944a733352d31675acc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi4V/cCRBK7hj4Ov3rIwAAnIYIAJt2mg/6AB0rETtSRkbm7o1t\naq9CDonw6e4V+NFzsPrLplKTMMNcXaxpa3SLlyKCyy69XGZhq7AZjccukZSBI7+L\n4v+L0lFJHJpuaxvQJB2fQWPX8UlI+nQ84r/p4sp/Kw794i3CwXJa21+sg7+VqhuE\no1LDrCsEyLN7XM0BM3fmeKZDnVoFEHzjfLtLawViQDvHd2n7OGh9WTzGxIKe+bOY\n6u6Ery1z4ZAoRMckGVxy2ip95fKq3T9ysmpUVCOLWNSTeSzMPXWCQt/b13a6Bai9\nIFaBnVymOaslZbSCMtZS2fbdh8rNG9bAzNCNtlKY7BjtFXbQW6+Zc4bsFdapJh4=\n=OPoH\n-----END PGP SIGNATURE-----\n", "payload": "tree c4de38a0c79f34932eeb8c2716585a167e243703\nparent c37ee1a7e04419bf91a280357bfbb950d99512b3\nparent bff43d0e37c5299152c61d6ad959860dcd1ec15d\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1658937308 +0200\ncommitter GitHub <noreply@github.com> 1658937308 +0200\n\nRollup merge of #99812 - GuillaumeGomez:fix-headings-colors, r=jsha,notriddle\n\nFix headings colors\n\nFixes #99797.\n\n![image](https://user-images.githubusercontent.com/3050060/181260966-49faf9d3-f6b8-4de4-bc7d-ed9f0467cf68.png)\n\ncc `@jsha`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2d52aa05d1786b32f7d6e944a733352d31675acc", "html_url": "https://github.com/rust-lang/rust/commit/2d52aa05d1786b32f7d6e944a733352d31675acc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2d52aa05d1786b32f7d6e944a733352d31675acc/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c37ee1a7e04419bf91a280357bfbb950d99512b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c37ee1a7e04419bf91a280357bfbb950d99512b3", "html_url": "https://github.com/rust-lang/rust/commit/c37ee1a7e04419bf91a280357bfbb950d99512b3"}, {"sha": "bff43d0e37c5299152c61d6ad959860dcd1ec15d", "url": "https://api.github.com/repos/rust-lang/rust/commits/bff43d0e37c5299152c61d6ad959860dcd1ec15d", "html_url": "https://github.com/rust-lang/rust/commit/bff43d0e37c5299152c61d6ad959860dcd1ec15d"}], "stats": {"total": 116, "additions": 105, "deletions": 11}, "files": [{"sha": "aecc9aa879a69fe1e392723de2c89d9aa8f2d487", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=2d52aa05d1786b32f7d6e944a733352d31675acc", "patch": "@@ -167,7 +167,7 @@ h2, h3, h4 {\n h2,\n .top-doc .docblock > h3,\n .top-doc .docblock > h4 {\n-\tborder-bottom: 1px solid;\n+\tborder-bottom: 1px solid var(--headings-border-bottom-color);\n }\n h3.code-header {\n \tfont-size: 1.125rem; /* 18px */\n@@ -652,7 +652,7 @@ h2.location a {\n }\n \n .top-doc .docblock h2 { font-size: 1.375rem; }\n-.top-doc .docblock h3 { font-size: 1.25; }\n+.top-doc .docblock h3 { font-size: 1.25rem; }\n .top-doc .docblock h4,\n .top-doc .docblock h5 {\n \tfont-size: 1.125rem;"}, {"sha": "a550eb1c130afd655c7247454f438b9b5adf5dfd", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=2d52aa05d1786b32f7d6e944a733352d31675acc", "patch": "@@ -42,10 +42,6 @@ input:focus + .slider {\n \tbackground-color: #0a042f !important;\n }\n \n-.docblock h1, .docblock h2, .docblock h3, .docblock h4, .docblock h5, .docblock h6 {\n-\tborder-bottom-color: #DDD;\n-}\n-\n .docblock table td, .docblock table th {\n \tborder-color: #ddd;\n }"}, {"sha": "f6287ade2f295b2f6b3c266555590e0d5ed1337d", "filename": "src/test/rustdoc-gui/docblock-details.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fdocblock-details.goml", "raw_url": "https://github.com/rust-lang/rust/raw/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fdocblock-details.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-details.goml?ref=2d52aa05d1786b32f7d6e944a733352d31675acc", "patch": "@@ -9,12 +9,12 @@ reload:\n assert-text: (\".top-doc .docblock > h3\", \"Hello\")\n assert-css: (\n     \".top-doc .docblock > h3\",\n-    {\"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n+    {\"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n )\n // We now check that the `<summary>` doesn't have a bottom border and has the correct display.\n assert-css: (\n     \".top-doc .docblock summary h4\",\n-    {\"border-bottom\": \"0px none rgb(221, 221, 221)\"},\n+    {\"border-bottom\": \"0px none rgb(210, 210, 210)\"},\n )\n // This allows to ensure that summary is on one line only!\n assert-property: (\".top-doc .docblock summary h4\", {\"offsetHeight\": \"33\"})"}, {"sha": "8c2c3df1588f507370b1c20f0a1fbafa35abbeb2", "filename": "src/test/rustdoc-gui/headings.goml", "status": "modified", "additions": 97, "deletions": 3, "changes": 100, "blob_url": "https://github.com/rust-lang/rust/blob/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheadings.goml?ref=2d52aa05d1786b32f7d6e944a733352d31675acc", "patch": "@@ -150,15 +150,109 @@ assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"font-size\": \"20px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"border-bottom-width\": \"1px\"})\n \n-goto: file://|DOC_PATH|/staged_api/struct.Foo.html\n+// Checking colors now.\n show-text: true\n local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n+goto: file://|DOC_PATH|/test_docs/struct.HeavilyDocumentedStruct.html\n+assert-css: (\n+    \".top-doc .docblock h2\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h3\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h4\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h5\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"0px none rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h4\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"0px none rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h5\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"0px none rgb(221, 221, 221)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h6\",\n+    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"0px none rgb(221, 221, 221)\"},\n+)\n+\n+local-storage: {\"rustdoc-theme\": \"dark\"}\n+reload:\n+assert-css: (\n+    \".top-doc .docblock h2\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h3\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h4\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h5\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"0px none rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h4\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"0px none rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h5\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"0px none rgb(210, 210, 210)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h6\",\n+    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"0px none rgb(210, 210, 210)\"},\n+)\n+\n+local-storage: {\"rustdoc-theme\": \"ayu\"}\n+reload:\n+assert-css: (\n+    \".top-doc .docblock h2\",\n+    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h2\",\n+    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h4\",\n+    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \".top-doc .docblock h5\",\n+    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom\": \"0px none rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h4\",\n+    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"0px none rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h5\",\n+    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom\": \"0px none rgb(92, 103, 115)\"},\n+)\n+assert-css: (\n+    \"#implementations-list .docblock h6\",\n+    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom\": \"0px none rgb(92, 103, 115)\"},\n+)\n+\n+local-storage: {\"rustdoc-theme\": \"light\"}\n+goto: file://|DOC_PATH|/staged_api/struct.Foo.html\n assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"})\n \n-local-storage: {\"rustdoc-theme\": \"dark\", \"rustdoc-use-system-theme\": \"false\"}\n+local-storage: {\"rustdoc-theme\": \"dark\"}\n reload:\n assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"})\n \n-local-storage: {\"rustdoc-theme\": \"ayu\", \"rustdoc-use-system-theme\": \"false\"}\n+local-storage: {\"rustdoc-theme\": \"ayu\"}\n reload:\n assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"})"}, {"sha": "1b26aaecb5ef3d224a1db4202858a3abd4becb3a", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d52aa05d1786b32f7d6e944a733352d31675acc/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=2d52aa05d1786b32f7d6e944a733352d31675acc", "patch": "@@ -146,6 +146,10 @@ pub use crate::repro as repro2;\n /// ### Top-doc Prose sub-sub-heading\n ///\n /// Text below sub-sub-heading\n+///\n+/// #### You know the drill.\n+///\n+/// More text.\n pub struct HeavilyDocumentedStruct {\n     /// # Title for field\n     /// ## Sub-heading for field"}]}