{"sha": "8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiM2QyMDczZmE4YjFmNDhhMjcwODE5NDRjMWE3MDEwYThkN2I3YjE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-10-04T20:26:54Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-10-04T20:26:54Z"}, "message": "Only run tests if pointer width is 64bit\n\nIf the pointer width of the architechture is 32bit or something else,\nthen the tests will most likely produce different results.", "tree": {"sha": "b5b819b5b048366f144e4e791046b531a56b708d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b5b819b5b048366f144e4e791046b531a56b708d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEvUKv4zqIn2RHUgCKtvoGpuDiZlsFAlu2d9kACgkQtvoGpuDi\nZluqxw/+LuNi3ONC5P/JPiYsP9ONlUw3cMRqZQ6Hhl2Qi9jAD7cBY3Qbw+m9Vdlh\nlvhqyKDcLZDTKw3aQLpNeqTBxJR43pXP3NkwApMoW1TabmLyJfUqUUKfgSLtapVg\nQ70lj4tuE7Fe9sbA1brztgQ4dRUbxt5e8zQ80yq8cZX732AJ1r946PlQRRHw0KxA\nXD+JwbznGazrFv0q9+M4gYiqdlNuuclSqCGPD49/lC+Qgp9Ha+Awza/9DC0NGkeD\nPOIEwSHwwkw2pegyMht77wl01PLb43F475RH1VHWDzqe6h77mSw49BoUkopcNcpb\nC2XwIcvdgLS+yyw9aIxoVOhI4GJiJ9oYXakvI9hb6q1UvZA23HhjSUMI8mY7YuZb\nH2xaOVFNO2hYwfloKvTyKaQq44U6BtGaQo4J4a9YkY7ykfDxWPc9elrnIzsVJN4g\nRcA3W1p54FkxNXc19jQtk7XRe2Dn6Z1mmLgRiB4C+vqXye5oCH8X85l/jYt23Cau\nafhRjmriVGJkSsrLLetfLxgdCxgrqWXofuJfpEB29BNfTYYFtQolXnp1rTXxlbzc\nM88JNChL2Ef5/m570fMU7UXyKdJeTlg+ddY/tmO7v2BpYx9SA1F3+u/BHFznsBMT\nZbqVhLXLIEKlwdix03g9CFvonfFq+DI0ZHoUT4sHeueLPXCOYTE=\n=7mPs\n-----END PGP SIGNATURE-----", "payload": "tree b5b819b5b048366f144e4e791046b531a56b708d\nparent 391d53db6657be45fb85835c3e042e2287035ece\nauthor Philipp Hansch <dev@phansch.net> 1538684814 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1538684814 +0200\n\nOnly run tests if pointer width is 64bit\n\nIf the pointer width of the architechture is 32bit or something else,\nthen the tests will most likely produce different results.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "html_url": "https://github.com/rust-lang/rust/commit/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "391d53db6657be45fb85835c3e042e2287035ece", "url": "https://api.github.com/repos/rust-lang/rust/commits/391d53db6657be45fb85835c3e042e2287035ece", "html_url": "https://github.com/rust-lang/rust/commit/391d53db6657be45fb85835c3e042e2287035ece"}], "stats": {"total": 40, "additions": 21, "deletions": 19}, "files": [{"sha": "4ebde4e8c1d5295dfe153b22b539c291867cd6d8", "filename": "tests/ui/fn_to_numeric_cast_with_truncation.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs?ref=8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "patch": "@@ -1,3 +1,4 @@\n+// only-64bit\n #![feature(tool_lints)]\n \n #![warn(clippy::fn_to_numeric_cast_with_truncation)]\n@@ -13,11 +14,12 @@ fn test_fn_to_numeric_cast_with_truncation() {\n     let _ = foo as u16;\n     let _ = foo as u32;\n \n-    // TODO: Is it bad to have these tests?\n-    // Running the tests on a different architechture will\n-    // produce different results\n+    // These should not lint, because because casting to these types\n+    // does not truncate the function pointer address.\n     let _ = foo as u64;\n     let _ = foo as i64;\n+    let _ = foo as u128;\n+    let _ = foo as i128;\n }\n \n fn main() {}"}, {"sha": "65c996814ca518403b89694518e0a5aca03080f3", "filename": "tests/ui/fn_to_numeric_cast_with_truncation.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr?ref=8b3d2073fa8b1f48a27081944c1a7010a8d7b7b1", "patch": "@@ -1,39 +1,39 @@\n error: casting function pointer `foo` to `i8`, which truncates the value\n- --> $DIR/fn_to_numeric_cast_with_truncation.rs:9:13\n-  |\n-9 |     let _ = foo as i8;\n-  |             ^^^^^^^^^ help: try: `foo as usize`\n-  |\n-  = note: `-D clippy::fn-to-numeric-cast-with-truncation` implied by `-D warnings`\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:10:13\n+   |\n+10 |     let _ = foo as i8;\n+   |             ^^^^^^^^^ help: try: `foo as usize`\n+   |\n+   = note: `-D clippy::fn-to-numeric-cast-with-truncation` implied by `-D warnings`\n \n error: casting function pointer `foo` to `i16`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:10:13\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:11:13\n    |\n-10 |     let _ = foo as i16;\n+11 |     let _ = foo as i16;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `i32`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:11:13\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:12:13\n    |\n-11 |     let _ = foo as i32;\n+12 |     let _ = foo as i32;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `u8`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:12:13\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:13:13\n    |\n-12 |     let _ = foo as u8;\n+13 |     let _ = foo as u8;\n    |             ^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `u16`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:13:13\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:14:13\n    |\n-13 |     let _ = foo as u16;\n+14 |     let _ = foo as u16;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `u32`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:14:13\n+  --> $DIR/fn_to_numeric_cast_with_truncation.rs:15:13\n    |\n-14 |     let _ = foo as u32;\n+15 |     let _ = foo as u32;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: aborting due to 6 previous errors"}]}