{"sha": "54110fed4129eb2b78798a8c200248720707a66a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0MTEwZmVkNDEyOWViMmI3ODc5OGE4YzIwMDI0ODcyMDcwN2E2NmE=", "commit": {"author": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2021-07-10T16:15:01Z"}, "committer": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2021-07-10T16:15:09Z"}, "message": "Use nproc instead of hardcoded 10 for build parallelism", "tree": {"sha": "b44d8c17c9bbe03003c4de5b5939557a714748e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b44d8c17c9bbe03003c4de5b5939557a714748e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54110fed4129eb2b78798a8c200248720707a66a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54110fed4129eb2b78798a8c200248720707a66a", "html_url": "https://github.com/rust-lang/rust/commit/54110fed4129eb2b78798a8c200248720707a66a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54110fed4129eb2b78798a8c200248720707a66a/comments", "author": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f9467c13d75817663c3d6cbe918adfe01fe51aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/7f9467c13d75817663c3d6cbe918adfe01fe51aa", "html_url": "https://github.com/rust-lang/rust/commit/7f9467c13d75817663c3d6cbe918adfe01fe51aa"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "b5378244b793c6cd559b159c19241fed823f8c62", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-binutils.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-binutils.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-binutils.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-binutils.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -11,7 +11,7 @@ curl https://ftp.gnu.org/gnu/binutils/binutils-$VERSION.tar.bz2 | tar xfj -\n mkdir binutils-build\n cd binutils-build\n hide_output ../binutils-$VERSION/configure --prefix=/rustroot\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n \n cd .."}, {"sha": "40a637616d35f1fe434bac93a88a19f3a68b382a", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-clang.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-clang.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-clang.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-clang.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -30,7 +30,7 @@ hide_output \\\n       -DLLVM_ENABLE_PROJECTS=\"clang;lld\" \\\n       -DC_INCLUDE_DIRS=\"$INC\"\n \n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n \n cd ../.."}, {"sha": "2f6b1fa9b8e3e657c344943d2adb07e1fac28ead", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-cmake.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-cmake.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-cmake.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-cmake.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -9,7 +9,7 @@ curl -L https://github.com/Kitware/CMake/releases/download/v$CMAKE/cmake-$CMAKE.\n mkdir cmake-build\n cd cmake-build\n hide_output ../cmake-$CMAKE/configure --prefix=/rustroot\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n \n cd .."}, {"sha": "6efa789756619fcaf3e318159da75bf2a1051c9b", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-curl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-curl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-curl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-curl.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -30,7 +30,7 @@ hide_output ../curl-$VERSION/configure \\\n       --disable-rtsp \\\n       --disable-ldaps \\\n       --disable-ldap\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n \n cd .."}, {"sha": "3a03eb2bdc8384557067160e5ece530535a21f0d", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-gcc.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-gcc.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-gcc.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-gcc.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -32,7 +32,7 @@ hide_output ../gcc-$GCC/configure \\\n     --prefix=/rustroot \\\n     --enable-languages=c,c++ \\\n     --disable-gnu-unique-object\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n ln -s gcc /rustroot/bin/cc\n "}, {"sha": "34bbe19d2fac331cec92db088c24190512273174", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-openssl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-openssl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-openssl.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -14,7 +14,7 @@ curl $URL | tar xzf -\n \n cd openssl-$VERSION\n hide_output ./config --prefix=/rustroot shared -fPIC\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n cd ..\n rm -rf openssl-$VERSION"}, {"sha": "9a203beadd1033ef903be18f94af77839bc923ad", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/build-python.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-python.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54110fed4129eb2b78798a8c200248720707a66a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-python.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2Fbuild-python.sh?ref=54110fed4129eb2b78798a8c200248720707a66a", "patch": "@@ -14,7 +14,7 @@ cd python-build\n # than that fairly normal.\n CFLAGS='-I /rustroot/include' LDFLAGS='-L /rustroot/lib -L /rustroot/lib64' \\\n     hide_output ../Python-$VERSION/configure --prefix=/rustroot\n-hide_output make -j10\n+hide_output make -j$(nproc)\n hide_output make install\n \n cd .."}]}