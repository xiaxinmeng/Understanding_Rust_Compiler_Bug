{"sha": "97bbe2d86a3c35f970266dfa1a9bd9a878d629f3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk3YmJlMmQ4NmEzYzM1Zjk3MDI2NmRmYTFhOWJkOWE4NzhkNjI5ZjM=", "commit": {"author": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2021-03-06T14:28:55Z"}, "committer": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2021-04-03T17:54:29Z"}, "message": "Fix normal and subnormal classification", "tree": {"sha": "2878690c77839b07f074f06137a229f1022f9500", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2878690c77839b07f074f06137a229f1022f9500"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3", "html_url": "https://github.com/rust-lang/rust/commit/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3/comments", "author": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07247a001f43ddc35235202fc203159fbf081449", "url": "https://api.github.com/repos/rust-lang/rust/commits/07247a001f43ddc35235202fc203159fbf081449", "html_url": "https://github.com/rust-lang/rust/commit/07247a001f43ddc35235202fc203159fbf081449"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "bea711a503597b0faf085f5952ad58438ea93b51", "filename": "crates/core_simd/src/vector/float.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3/crates%2Fcore_simd%2Fsrc%2Fvector%2Ffloat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97bbe2d86a3c35f970266dfa1a9bd9a878d629f3/crates%2Fcore_simd%2Fsrc%2Fvector%2Ffloat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcore_simd%2Fsrc%2Fvector%2Ffloat.rs?ref=97bbe2d86a3c35f970266dfa1a9bd9a878d629f3", "patch": "@@ -79,15 +79,14 @@ macro_rules! impl_float_vector {\n             /// Returns true for each lane if its value is subnormal.\n             #[inline]\n             pub fn is_subnormal(self) -> crate::$mask_ty<LANES> {\n-                let exponent_mask = crate::$bits_ty::splat(!0 << <$type>::MANTISSA_DIGITS);\n-                self.abs().lanes_ne(Self::splat(0.0)) & (self.to_bits() & exponent_mask).lanes_eq(crate::$bits_ty::splat(0))\n+                self.abs().lanes_ne(Self::splat(0.0)) & (self.to_bits() & Self::splat(<$type>::INFINITY).to_bits()).lanes_eq(crate::$bits_ty::splat(0))\n             }\n \n             /// Returns true for each lane if its value is neither neither zero, infinite,\n             /// subnormal, or `NaN`.\n             #[inline]\n             pub fn is_normal(self) -> crate::$mask_ty<LANES> {\n-                !(self.abs().lanes_eq(Self::splat(0.0)) | self.is_nan() | self.is_subnormal())\n+                !(self.abs().lanes_eq(Self::splat(0.0)) | self.is_nan() | self.is_subnormal() | self.is_infinite())\n             }\n         }\n     };"}]}