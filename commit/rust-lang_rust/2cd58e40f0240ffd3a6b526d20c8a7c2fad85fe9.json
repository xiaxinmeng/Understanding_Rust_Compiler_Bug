{"sha": "2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjZDU4ZTQwZjAyNDBmZmQzYTZiNTI2ZDIwYzhhN2MyZmFkODVmZTk=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-03T15:49:05Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-03T15:49:05Z"}, "message": "Improve the coverage script", "tree": {"sha": "f94e668479f3cd4dd3843a0a3a0578086507b83a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f94e668479f3cd4dd3843a0a3a0578086507b83a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJX8n34AAoJEF5CfHlMukXo+TYP/iWLXz/Os/FDjXe60bLRJzMQ\n8npvMAAMUqyM8KOINrMYAaOLyyLQGdEEt7Uc4Whc/32crdsaHfmT7es3HVwxBGtc\nmdg3uYZZpe7JBq9e9Mjdrq5HvmYXIN5F+lgrtzhVf7CjyCiMd43YN2Xdd9voGZ1S\nUoXO75R9uUbHHCdnkws9Nh5ekDqOqMcNIgjf07RKvLmamHbMHbPD+m4p5eohtDdI\n3rSTIGXVyZCCPkOx9p4ssf3BGiwVzTBVMudKG7m8tLzGCv0qYO27t9PpTppf2UKG\n00uschHBT4KH+s/OQD4YZISE1HvIInDNbTJGaaMOifL4EPx6XTRbsjCtftm7xr19\nUZhEN7ezCq9FEX3KVpOQ7z+dw7mowtt+PXPkP6IJEWck8jxxHFlnIv4O2/0XdvdY\negjYFm/7xaZUgoOLSOxom/mb78znu9zVnoZdkRdesouP0aLToJPFBrhuZp8t3ZcX\nO4k/QXFjqgMfLVpPAxjzdbw5chQabtVXY+TPdCObWxfr0ctLv4J0NcjoZTMiGShR\nR8eQt9vE2rKa9yXzvb3B7hA/S+Jsk/t5EarooodLnVVXk2jt7+4In5uQaBfOvUir\n0c0ArN9my/oQ7za2dg3M9GgKe+f/cSSNXjN1wQfKKpQtb/fT9fizMVjuAe66+S/K\ngFvIqeqd3pUonN+AkAFM\n=LShv\n-----END PGP SIGNATURE-----", "payload": "tree f94e668479f3cd4dd3843a0a3a0578086507b83a\nparent 12c2d6a8d02e6d9836e3b10680ab545a05f13d4b\nauthor mcarton <cartonmartin+git@gmail.com> 1475509745 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1475509745 +0200\n\nImprove the coverage script\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9", "html_url": "https://github.com/rust-lang/rust/commit/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "html_url": "https://github.com/rust-lang/rust/commit/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b"}], "stats": {"total": 24, "additions": 7, "deletions": 17}, "files": [{"sha": "3f9a6b06f7255d4aaa201a129c895de2e588f326", "filename": "util/cov.sh", "status": "modified", "additions": 7, "deletions": 17, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9/util%2Fcov.sh", "raw_url": "https://github.com/rust-lang/rust/raw/2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9/util%2Fcov.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fcov.sh?ref=2cd58e40f0240ffd3a6b526d20c8a7c2fad85fe9", "patch": "@@ -5,42 +5,32 @@\n # `compile-test` is special. `kcov` does not work directly on it so these files\n # are compiled manually.\n \n-tests=(\n-    camel_case\n-    cc_seme\n-    consts\n-    dogfood\n-    issue_825\n-    matches\n-    trim_multiline\n-    used_underscore_binding_macro\n-    versioncheck\n-)\n+tests=$(find tests/ -maxdepth 1 -name '*.rs' ! -name compile-test.rs -exec basename {} .rs \\;)\n tmpdir=$(mktemp -d)\n \n cargo test --no-run --verbose\n \n-for t in \"${tests[@]}\"; do\n+for t in $tests; do\n   kcov \\\n     --verify \\\n-    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n+    --include-path=\"$(pwd)/src,$(pwd)/clippy_lints/src\" \\\n     \"$tmpdir/$t\" \\\n     cargo test --test \"$t\"\n done\n \n for t in ./tests/compile-fail/*.rs; do\n   kcov \\\n     --verify \\\n-    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n-    \"$tmpdir/compile-fail-$(basename $t)\" \\\n+    --include-path=\"$(pwd)/src,$(pwd)/clippy_lints/src\" \\\n+    \"$tmpdir/compile-fail-$(basename \"$t\")\" \\\n     cargo run -- -L target/debug -L target/debug/deps -Z no-trans \"$t\"\n done\n \n for t in ./tests/run-pass/*.rs; do\n   kcov \\\n     --verify \\\n-    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n-    \"$tmpdir/run-pass-$(basename $t)\" \\\n+    --include-path=\"$(pwd)/src,$(pwd)/clippy_lints/src\" \\\n+    \"$tmpdir/run-pass-$(basename \"$t\")\" \\\n     cargo run -- -L target/debug -L target/debug/deps -Z no-trans \"$t\"\n done\n "}]}