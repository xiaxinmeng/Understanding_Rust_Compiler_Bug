{"sha": "7f5ec6c392c53225d85b160bcef3cedbc366ed72", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmNWVjNmMzOTJjNTMyMjVkODViMTYwYmNlZjNjZWRiYzM2NmVkNzI=", "commit": {"author": {"name": "Jan-Erik Rediger", "email": "janerik@fnordig.de", "date": "2015-09-14T11:52:32Z"}, "committer": {"name": "Jan-Erik Rediger", "email": "janerik@fnordig.de", "date": "2015-09-14T20:48:34Z"}, "message": "Disable browser history API on file:/ URLs\n\nhistory.pushState is defined, but not working whenever document.origin is \"null\"\n(literally that string, not just the null object).\nThis is due to some security considerations and is unlikely to be ever working.\n\nFor now just disable the usage of the history API when the documentation\nis accessed through a file:/ URL.\n\nSee https://code.google.com/p/chromium/issues/detail?id=301210 for a\nChrome-specific issue on the history API on file:/ URLs\n\nCloses #25953", "tree": {"sha": "06784cdeab4baddbefcb396c662042e9285cd734", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06784cdeab4baddbefcb396c662042e9285cd734"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f5ec6c392c53225d85b160bcef3cedbc366ed72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f5ec6c392c53225d85b160bcef3cedbc366ed72", "html_url": "https://github.com/rust-lang/rust/commit/7f5ec6c392c53225d85b160bcef3cedbc366ed72", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f5ec6c392c53225d85b160bcef3cedbc366ed72/comments", "author": {"login": "badboy", "id": 2129, "node_id": "MDQ6VXNlcjIxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/2129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badboy", "html_url": "https://github.com/badboy", "followers_url": "https://api.github.com/users/badboy/followers", "following_url": "https://api.github.com/users/badboy/following{/other_user}", "gists_url": "https://api.github.com/users/badboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/badboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badboy/subscriptions", "organizations_url": "https://api.github.com/users/badboy/orgs", "repos_url": "https://api.github.com/users/badboy/repos", "events_url": "https://api.github.com/users/badboy/events{/privacy}", "received_events_url": "https://api.github.com/users/badboy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "badboy", "id": 2129, "node_id": "MDQ6VXNlcjIxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/2129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badboy", "html_url": "https://github.com/badboy", "followers_url": "https://api.github.com/users/badboy/followers", "following_url": "https://api.github.com/users/badboy/following{/other_user}", "gists_url": "https://api.github.com/users/badboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/badboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badboy/subscriptions", "organizations_url": "https://api.github.com/users/badboy/orgs", "repos_url": "https://api.github.com/users/badboy/repos", "events_url": "https://api.github.com/users/badboy/events{/privacy}", "received_events_url": "https://api.github.com/users/badboy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "664a45976fb5dd433766f73a221435883151d0ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/664a45976fb5dd433766f73a221435883151d0ee", "html_url": "https://github.com/rust-lang/rust/commit/664a45976fb5dd433766f73a221435883151d0ee"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "5b0b19b95af197da09c7e058b070db216635bf9e", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7f5ec6c392c53225d85b160bcef3cedbc366ed72/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/7f5ec6c392c53225d85b160bcef3cedbc366ed72/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=7f5ec6c392c53225d85b160bcef3cedbc366ed72", "patch": "@@ -54,7 +54,8 @@\n     }\n \n     function browserSupportsHistoryApi() {\n-        return window.history && typeof window.history.pushState === \"function\";\n+        return document.location.protocol != \"file:\" &&\n+          window.history && typeof window.history.pushState === \"function\";\n     }\n \n     function highlightSourceLines(ev) {"}]}