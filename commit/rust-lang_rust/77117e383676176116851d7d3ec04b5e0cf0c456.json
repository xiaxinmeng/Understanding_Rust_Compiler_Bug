{"sha": "77117e383676176116851d7d3ec04b5e0cf0c456", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3MTE3ZTM4MzY3NjE3NjExNjg1MWQ3ZDNlYzA0YjVlMGNmMGM0NTY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-07-10T06:52:20Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-07-10T06:52:20Z"}, "message": "Auto merge of #52177 - ljedrz:bare_gcc_warning, r=alexcrichton\n\nWarn windows-gnu users that the bundled gcc can't compile\n\nAdd a `DO NOT USE THIS gcc.exe FOR COMPILATION.txt` file to `lib\\rustlib\\*-pc-windows-gnu\\bin` folders in `windows-gnu` installations in order to warn against attempting to use the bundled `gcc.exe` as a C compiler. I'm pretty sure that location is usually found manually, so this should be easily noticeable.\n\nThis mistake has been made plenty of times and has lead to misunderstandings:\nRust: [Bundled gcc (windows x64) is unable to build any c file](https://github.com/rust-lang/rust/issues/24418)\ngtk-rs:    [Compiling on windows](https://github.com/gtk-rs/gtk/issues/625)\nbzip2-rs: [Build failure at gcc level: blocksort.c not found](https://github.com/alexcrichton/bzip2-rs/issues/30)\n\nAlternatives: rename the bundled `gcc.exe` to e.g. `rustc-gcc.exe` or `gcc-linker.exe`. This might require a more comprehensive change or break crates already using it as a linker.\n\nr? @alexcrichton", "tree": {"sha": "4de12bf33deac9e05123c404bc830be500039d36", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4de12bf33deac9e05123c404bc830be500039d36"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77117e383676176116851d7d3ec04b5e0cf0c456", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77117e383676176116851d7d3ec04b5e0cf0c456", "html_url": "https://github.com/rust-lang/rust/commit/77117e383676176116851d7d3ec04b5e0cf0c456", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77117e383676176116851d7d3ec04b5e0cf0c456/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3e7d70ce7730a929fd3d5094e8ad2eb71c3a399", "url": "https://api.github.com/repos/rust-lang/rust/commits/b3e7d70ce7730a929fd3d5094e8ad2eb71c3a399", "html_url": "https://github.com/rust-lang/rust/commit/b3e7d70ce7730a929fd3d5094e8ad2eb71c3a399"}, {"sha": "232e77e007eb9ec847f1737cd200102e2c309cf7", "url": "https://api.github.com/repos/rust-lang/rust/commits/232e77e007eb9ec847f1737cd200102e2c309cf7", "html_url": "https://github.com/rust-lang/rust/commit/232e77e007eb9ec847f1737cd200102e2c309cf7"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "e4fbabdf2318f527d63c97d950928f00e71458a9", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/77117e383676176116851d7d3ec04b5e0cf0c456/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77117e383676176116851d7d3ec04b5e0cf0c456/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=77117e383676176116851d7d3ec04b5e0cf0c456", "patch": "@@ -308,6 +308,14 @@ fn make_win_dist(\n         builder.copy_to_folder(&src, &target_bin_dir);\n     }\n \n+    // Warn windows-gnu users that the bundled GCC cannot compile C files\n+    builder.create(\n+        &target_bin_dir.join(\"GCC-WARNING.txt\"),\n+        \"gcc.exe contained in this folder cannot be used for compiling C files - it is only\\\n+         used as a linker. In order to be able to compile projects containing C code use\\\n+         the GCC provided by MinGW or Cygwin.\"\n+    );\n+\n     //Copy platform libs to platform-specific lib directory\n     let target_lib_dir = plat_root.join(\"lib\").join(\"rustlib\").join(target_triple).join(\"lib\");\n     fs::create_dir_all(&target_lib_dir).expect(\"creating target_lib_dir failed\");"}]}