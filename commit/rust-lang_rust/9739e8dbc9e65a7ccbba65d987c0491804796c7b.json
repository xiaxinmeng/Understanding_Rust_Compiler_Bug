{"sha": "9739e8dbc9e65a7ccbba65d987c0491804796c7b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk3MzllOGRiYzllNjVhN2NjYmJhNjVkOTg3YzA0OTE4MDQ3OTZjN2I=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2017-05-23T04:15:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-05-23T04:15:43Z"}, "message": "Rollup merge of #42144 - cengizIO:master, r=nikomatsakis\n\nmake ui test output patch compatible #41948\n\nHello!\n\nPreviously with #41474 I've changed the internals of UI test output comparison mechanism.\n\nThat change didn't change the diff format that we were producing but we needed to improve it anyway.\n\nThis makes unified diff lines a little bit more `patch` compatible.\n\nAlso I tried to introduce a unit test to check this but couldn't decide which of the following to implement:\n\n1. Should I replace `println` macros with `Writer`s? And access the produced output within a test?\n2. Should I add an external test (something like `src/test/run-pass/command-exec.rs`)\n3. There are crates that capture `stdout`. Are they safe to use here? (I don't think so)\n\nThanks!\n\ncc @nikomatsakis", "tree": {"sha": "c90fc9241b1b9210220e962137af21c54c8762ce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c90fc9241b1b9210220e962137af21c54c8762ce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9739e8dbc9e65a7ccbba65d987c0491804796c7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9739e8dbc9e65a7ccbba65d987c0491804796c7b", "html_url": "https://github.com/rust-lang/rust/commit/9739e8dbc9e65a7ccbba65d987c0491804796c7b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9739e8dbc9e65a7ccbba65d987c0491804796c7b/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a7e2360765e5ce2eb0ad5da409da24f440dc68f", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a7e2360765e5ce2eb0ad5da409da24f440dc68f", "html_url": "https://github.com/rust-lang/rust/commit/7a7e2360765e5ce2eb0ad5da409da24f440dc68f"}, {"sha": "9111d07a6ea8dad2685e8d39bffd654f231a24c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/9111d07a6ea8dad2685e8d39bffd654f231a24c2", "html_url": "https://github.com/rust-lang/rust/commit/9111d07a6ea8dad2685e8d39bffd654f231a24c2"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "1bec6f6af83814c6f725ff3b529602c040b36a59", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9739e8dbc9e65a7ccbba65d987c0491804796c7b/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9739e8dbc9e65a7ccbba65d987c0491804796c7b/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=9739e8dbc9e65a7ccbba65d987c0491804796c7b", "patch": "@@ -2415,11 +2415,11 @@ actual:\\n\\\n         println!(\"expected {}:\\n{}\\n\", kind, expected);\n         println!(\"diff of {}:\\n\", kind);\n \n-        for diff in diff::lines(actual, expected) {\n+        for diff in diff::lines(expected, actual) {\n             match diff {\n-                diff::Result::Left(l)    => println!(\"+{}\", l),\n+                diff::Result::Left(l)    => println!(\"-{}\", l),\n                 diff::Result::Both(l, _) => println!(\" {}\", l),\n-                diff::Result::Right(r)   => println!(\"-{}\", r),\n+                diff::Result::Right(r)   => println!(\"+{}\", r),\n             }\n         }\n "}]}