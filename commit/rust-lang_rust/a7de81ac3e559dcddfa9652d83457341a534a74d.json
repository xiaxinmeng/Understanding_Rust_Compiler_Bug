{"sha": "a7de81ac3e559dcddfa9652d83457341a534a74d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3ZGU4MWFjM2U1NTlkY2RkZmE5NjUyZDgzNDU3MzQxYTUzNGE3NGQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-03-03T04:12:36Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-03-03T04:12:36Z"}, "message": "auto merge of #5203 : erickt/rust/incoming, r=brson\n\nMy merges for #5143 missed a couple other copies. This patch corrects this, and gets stage0 to compile libsyntax with `#[deny(vecs_implicitly_copyable)]`. stage1 still fails though.", "tree": {"sha": "136d04a7a0dfb4a3c9456e7bb21202b7a70bb3f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/136d04a7a0dfb4a3c9456e7bb21202b7a70bb3f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7de81ac3e559dcddfa9652d83457341a534a74d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7de81ac3e559dcddfa9652d83457341a534a74d", "html_url": "https://github.com/rust-lang/rust/commit/a7de81ac3e559dcddfa9652d83457341a534a74d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7de81ac3e559dcddfa9652d83457341a534a74d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5655ae46a73723203edcf6a53c87560e0da7aaec", "url": "https://api.github.com/repos/rust-lang/rust/commits/5655ae46a73723203edcf6a53c87560e0da7aaec", "html_url": "https://github.com/rust-lang/rust/commit/5655ae46a73723203edcf6a53c87560e0da7aaec"}, {"sha": "4172faea8487d38abdaed54fcdf4cf9405ea011b", "url": "https://api.github.com/repos/rust-lang/rust/commits/4172faea8487d38abdaed54fcdf4cf9405ea011b", "html_url": "https://github.com/rust-lang/rust/commit/4172faea8487d38abdaed54fcdf4cf9405ea011b"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "004acd406917614e4cd9691c32c7f4bb5459f2ba", "filename": "src/libsyntax/ext/tt/macro_parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs?ref=a7de81ac3e559dcddfa9652d83457341a534a74d", "patch": "@@ -140,7 +140,7 @@ pub fn count_names(ms: &[matcher]) -> uint {\n }\n \n #[allow(non_implicitly_copyable_typarams)]\n-pub fn initial_matcher_pos(+ms: ~[matcher], sep: Option<Token>, lo: BytePos)\n+pub fn initial_matcher_pos(+ms: ~[matcher], +sep: Option<Token>, lo: BytePos)\n                         -> ~MatcherPos {\n     let mut match_idx_hi = 0u;\n     for ms.each |elt| {"}, {"sha": "370b838ab419db306457162d30a53ab136a94396", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=a7de81ac3e559dcddfa9652d83457341a534a74d", "patch": "@@ -32,7 +32,7 @@ pub fn add_new_extension(cx: ext_ctxt, sp: span, name: ident,\n                          arg: ~[ast::token_tree]) -> base::MacResult {\n     // these spans won't matter, anyways\n     fn ms(m: matcher_) -> matcher {\n-        spanned { node: m, span: dummy_sp() }\n+        spanned { node: copy m, span: dummy_sp() }\n     }\n \n     let lhs_nm =  cx.parse_sess().interner.gensym(@~\"lhs\");"}, {"sha": "443c0b40390ce2a3149c475dea0d44dfb8fe0e58", "filename": "src/libsyntax/ext/tt/transcribe.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7de81ac3e559dcddfa9652d83457341a534a74d/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Ftranscribe.rs?ref=a7de81ac3e559dcddfa9652d83457341a534a74d", "patch": "@@ -85,7 +85,7 @@ pure fn dup_tt_frame(f: @mut TtFrame) -> @mut TtFrame {\n         readme: @mut (copy *f.readme),\n         idx: f.idx,\n         dotdotdoted: f.dotdotdoted,\n-        sep: f.sep,\n+        sep: copy f.sep,\n         up: match f.up {\n             Some(up_frame) => Some(dup_tt_frame(up_frame)),\n             None => None\n@@ -191,7 +191,7 @@ pub fn tt_next_token(r: @mut TtReader) -> TokenAndSpan {\n             r.cur.idx = 0u;\n             r.repeat_idx[r.repeat_idx.len() - 1u] += 1u;\n             match r.cur.sep {\n-              Some(tk) => {\n+              Some(copy tk) => {\n                 r.cur_tok = tk; /* repeat same span, I guess */\n                 return ret_val;\n               }\n@@ -219,7 +219,8 @@ pub fn tt_next_token(r: @mut TtReader) -> TokenAndSpan {\n             return ret_val;\n           }\n           tt_seq(sp, copy tts, copy sep, zerok) => {\n-            match lockstep_iter_size(tt_seq(sp, copy tts, sep, zerok), r) {\n+            let t = tt_seq(sp, copy tts, copy sep, zerok);\n+            match lockstep_iter_size(t, r) {\n               lis_unconstrained => {\n                 r.sp_diag.span_fatal(\n                     sp, /* blame macro writer */\n@@ -246,11 +247,11 @@ pub fn tt_next_token(r: @mut TtReader) -> TokenAndSpan {\n                     r.repeat_len.push(len);\n                     r.repeat_idx.push(0u);\n                     r.cur = @mut TtFrame {\n-                        readme: @mut copy tts,\n+                        readme: @mut tts,\n                         idx: 0u,\n                         dotdotdoted: true,\n                         sep: sep,\n-                        up: option::Some(r.cur)\n+                        up: Some(r.cur)\n                     };\n                 }\n               }"}]}