{"sha": "de02d2891ec7f7b295e33887d49de954f677387a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlMDJkMjg5MWVjN2Y3YjI5NWUzMzg4N2Q0OWRlOTU0ZjY3NzM4N2E=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-14T08:46:46Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-14T08:46:46Z"}, "message": "full range expr", "tree": {"sha": "3c3526196a440d06217ef1e81bce9d9c62d49b59", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c3526196a440d06217ef1e81bce9d9c62d49b59"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de02d2891ec7f7b295e33887d49de954f677387a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de02d2891ec7f7b295e33887d49de954f677387a", "html_url": "https://github.com/rust-lang/rust/commit/de02d2891ec7f7b295e33887d49de954f677387a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de02d2891ec7f7b295e33887d49de954f677387a/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b828c68e8acda628d6e3a36827d1ffd9c9aaec6", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b828c68e8acda628d6e3a36827d1ffd9c9aaec6", "html_url": "https://github.com/rust-lang/rust/commit/2b828c68e8acda628d6e3a36827d1ffd9c9aaec6"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "feef5f1d67e7311213dd1ffdc3d27aafc2d66e6e", "filename": "crates/libsyntax2/src/grammar/expressions/mod.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fexpressions%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fexpressions%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fexpressions%2Fmod.rs?ref=de02d2891ec7f7b295e33887d49de954f677387a", "patch": "@@ -174,10 +174,14 @@ fn lhs(p: &mut Parser, r: Restrictions) -> Option<CompletedMarker> {\n             p.bump();\n             PREFIX_EXPR\n         }\n+        // test full_range_expr\n+        // fn foo() { xs[..]; }\n         DOTDOT => {\n             m = p.start();\n             p.bump();\n-            expr_bp(p, r, 2);\n+            if EXPR_FIRST.contains(p.current()) {\n+                expr_bp(p, r, 2);\n+            }\n             return Some(m.complete(p, RANGE_EXPR));\n         }\n         _ => {"}, {"sha": "ae21ad94cb384d9497d720270871f497f0234c35", "filename": "crates/libsyntax2/tests/data/parser/inline/0102_full_range_expr.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.rs?ref=de02d2891ec7f7b295e33887d49de954f677387a", "patch": "@@ -0,0 +1 @@\n+fn foo() { xs[..]; }"}, {"sha": "8e7b403c5c1b5b90f47cccc3f46ae36d704ed76b", "filename": "crates/libsyntax2/tests/data/parser/inline/0102_full_range_expr.txt", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/de02d2891ec7f7b295e33887d49de954f677387a/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0102_full_range_expr.txt?ref=de02d2891ec7f7b295e33887d49de954f677387a", "patch": "@@ -0,0 +1,28 @@\n+FILE@[0; 21)\n+  FN_DEF@[0; 20)\n+    FN_KW@[0; 2)\n+    WHITESPACE@[2; 3)\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 8)\n+      L_PAREN@[6; 7)\n+      R_PAREN@[7; 8)\n+    WHITESPACE@[8; 9)\n+    BLOCK_EXPR@[9; 20)\n+      L_CURLY@[9; 10)\n+      WHITESPACE@[10; 11)\n+      EXPR_STMT@[11; 18)\n+        INDEX_EXPR@[11; 17)\n+          PATH_EXPR@[11; 13)\n+            PATH@[11; 13)\n+              PATH_SEGMENT@[11; 13)\n+                NAME_REF@[11; 13)\n+                  IDENT@[11; 13) \"xs\"\n+          L_BRACK@[13; 14)\n+          RANGE_EXPR@[14; 16)\n+            DOTDOT@[14; 16)\n+          R_BRACK@[16; 17)\n+        SEMI@[17; 18)\n+      WHITESPACE@[18; 19)\n+      R_CURLY@[19; 20)\n+  WHITESPACE@[20; 21)"}]}