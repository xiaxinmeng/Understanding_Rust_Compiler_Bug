{"sha": "4b094c5933b6aad94db93b65e1f6e35564270258", "node_id": "C_kwDOAAsO6NoAKDRiMDk0YzU5MzNiNmFhZDk0ZGI5M2I2NWUxZjZlMzU1NjQyNzAyNTg", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-01-06T06:08:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-06T06:08:57Z"}, "message": "Rollup merge of #106494 - JohnTitor:issue-58355, r=compiler-errors\n\nAdd regression test for #58355\n\nCloses #58355\nr? `@compiler-errors`\nSigned-off-by: Yuki Okushi <jtitor@2k36.org>", "tree": {"sha": "48255315c3576f2a9a1be0686e398bc51c77c65a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/48255315c3576f2a9a1be0686e398bc51c77c65a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b094c5933b6aad94db93b65e1f6e35564270258", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjt7r5CRBK7hj4Ov3rIwAAmSkIAIIGCDMMVUrC/Eaff2UE3dh5\n/MsT3LhyyuKka5NvyYT7PaHYMKmtrKZ6h5294vmQWEj9ixhq5/PHOIJY+foZpv2r\nfgTnus0OeNkShFcA1HgwIQXELr5liO5VVqHVhp7ANZ6EyMnXT9VeFt8KbTWyFOIY\nzpGZrbv8paYmEs/V8HJI33mRl4XPlVVi4yxbaS9gS5RxCKvZMyYRXZm5Oq68Mrnn\nX57rDVZDUIv9V98cFvgk1SeZ5KlMC8xHpycENLjd1XRomgcgv5rTbgRNNtrHbVis\nvlCQEkBpPjT52+tWojBzrQgykoRd5LQKqL6Wy5gNqNlqx3GHXa6ar0HH0xFj6H0=\n=bZTc\n-----END PGP SIGNATURE-----\n", "payload": "tree 48255315c3576f2a9a1be0686e398bc51c77c65a\nparent 2b6e38cb71c8c60c314e042f4d8ee367c82a6fae\nparent b83fa06c561dbccb1cdb35c4862d4f47969a1cab\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1672985337 +0530\ncommitter GitHub <noreply@github.com> 1672985337 +0530\n\nRollup merge of #106494 - JohnTitor:issue-58355, r=compiler-errors\n\nAdd regression test for #58355\n\nCloses #58355\nr? `@compiler-errors`\nSigned-off-by: Yuki Okushi <jtitor@2k36.org>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b094c5933b6aad94db93b65e1f6e35564270258", "html_url": "https://github.com/rust-lang/rust/commit/4b094c5933b6aad94db93b65e1f6e35564270258", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b094c5933b6aad94db93b65e1f6e35564270258/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b6e38cb71c8c60c314e042f4d8ee367c82a6fae", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b6e38cb71c8c60c314e042f4d8ee367c82a6fae", "html_url": "https://github.com/rust-lang/rust/commit/2b6e38cb71c8c60c314e042f4d8ee367c82a6fae"}, {"sha": "b83fa06c561dbccb1cdb35c4862d4f47969a1cab", "url": "https://api.github.com/repos/rust-lang/rust/commits/b83fa06c561dbccb1cdb35c4862d4f47969a1cab", "html_url": "https://github.com/rust-lang/rust/commit/b83fa06c561dbccb1cdb35c4862d4f47969a1cab"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "3b62fdece403b922c15a37a532c20997e35f24e5", "filename": "src/test/ui/type/issue-58355.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4b094c5933b6aad94db93b65e1f6e35564270258/src%2Ftest%2Fui%2Ftype%2Fissue-58355.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b094c5933b6aad94db93b65e1f6e35564270258/src%2Ftest%2Fui%2Ftype%2Fissue-58355.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Fissue-58355.rs?ref=4b094c5933b6aad94db93b65e1f6e35564270258", "patch": "@@ -0,0 +1,7 @@\n+#![crate_type = \"lib\"]\n+\n+pub fn foo(callback: fn() -> dyn ToString) {\n+    let mut x: Option<Box<dyn Fn() -> dyn ToString>> = None;\n+    x = Some(Box::new(callback));\n+    //~^ ERROR: the size for values of type `dyn ToString` cannot be known at compilation time\n+}"}, {"sha": "6f89a7b004999a5812f72be17bfa80cdc32907d5", "filename": "src/test/ui/type/issue-58355.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4b094c5933b6aad94db93b65e1f6e35564270258/src%2Ftest%2Fui%2Ftype%2Fissue-58355.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4b094c5933b6aad94db93b65e1f6e35564270258/src%2Ftest%2Fui%2Ftype%2Fissue-58355.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Fissue-58355.stderr?ref=4b094c5933b6aad94db93b65e1f6e35564270258", "patch": "@@ -0,0 +1,13 @@\n+error[E0277]: the size for values of type `dyn ToString` cannot be known at compilation time\n+  --> $DIR/issue-58355.rs:5:14\n+   |\n+LL |     x = Some(Box::new(callback));\n+   |              ^^^^^^^^^^^^^^^^^^ doesn't have a size known at compile-time\n+   |\n+   = help: within `fn() -> dyn ToString`, the trait `Sized` is not implemented for `dyn ToString`\n+   = note: required because it appears within the type `fn() -> dyn ToString`\n+   = note: required for the cast from `fn() -> dyn ToString` to the object type `dyn Fn() -> (dyn ToString + 'static)`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}