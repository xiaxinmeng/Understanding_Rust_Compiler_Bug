{"sha": "2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzMTVhODE3Y2U2NTg5ZjNmMjdkMGY4MDE5MmMwMzdjM2U5YmI1YWQ=", "commit": {"author": {"name": "Arnavion", "email": "arnavion@gmail.com", "date": "2016-10-23T19:24:16Z"}, "committer": {"name": "Arnavion", "email": "arnavion@gmail.com", "date": "2016-10-23T19:24:16Z"}, "message": "Changed signature of cargo::metadata according to review comment.", "tree": {"sha": "98d409484f5af5672705ca961dde9c8ebe62eb98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98d409484f5af5672705ca961dde9c8ebe62eb98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "html_url": "https://github.com/rust-lang/rust/commit/2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/comments", "author": null, "committer": null, "parents": [{"sha": "ebbd00b1abb2d6d2f189288a10f23556ee997424", "url": "https://api.github.com/repos/rust-lang/rust/commits/ebbd00b1abb2d6d2f189288a10f23556ee997424", "html_url": "https://github.com/rust-lang/rust/commit/ebbd00b1abb2d6d2f189288a10f23556ee997424"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "b9ce8626eb9bf3a5e6286d084af0aa492e2b8ec5", "filename": "clippy_lints/src/utils/cargo.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/clippy_lints%2Fsrc%2Futils%2Fcargo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/clippy_lints%2Fsrc%2Futils%2Fcargo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fcargo.rs?ref=2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "patch": "@@ -65,10 +65,10 @@ impl From<json::DecoderError> for Error {\n     }\n }\n \n-pub fn metadata(manifest_path_arg: &Option<String>) -> Result<Metadata, Error> {\n+pub fn metadata(manifest_path_arg: Option<&str>) -> Result<Metadata, Error> {\n     let mut cmd = Command::new(\"cargo\");\n     cmd.arg(\"metadata\").arg(\"--no-deps\");\n-    if let Some(ref mani) = *manifest_path_arg {\n+    if let Some(mani) = manifest_path_arg {\n         cmd.arg(mani);\n     }\n     let output = cmd.output()?;"}, {"sha": "c008dae2fe85d98a387623a88b2acc1439f2a556", "filename": "src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "patch": "@@ -140,7 +140,7 @@ pub fn main() {\n         // this arm is executed on the initial call to `cargo clippy`\n         let manifest_path_arg = std::env::args().skip(2).find(|val| val.starts_with(\"--manifest-path=\"));\n \n-        let mut metadata = cargo::metadata(&manifest_path_arg).expect(\"could not obtain cargo metadata\");\n+        let mut metadata = cargo::metadata(manifest_path_arg.as_ref().map(AsRef::as_ref)).expect(\"could not obtain cargo metadata\");\n         assert_eq!(metadata.version, 1);\n \n         let manifest_path = manifest_path_arg.map(|arg| PathBuf::from(Path::new(&arg[\"--manifest-path=\".len()..])));"}, {"sha": "e216c801546431e54339f6a0729a1aa89a5f9ab4", "filename": "tests/versioncheck.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/tests%2Fversioncheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2315a817ce6589f3f27d0f80192c037c3e9bb5ad/tests%2Fversioncheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fversioncheck.rs?ref=2315a817ce6589f3f27d0f80192c037c3e9bb5ad", "patch": "@@ -3,9 +3,9 @@ use clippy_lints::utils::cargo;\n \n #[test]\n fn check_that_clippy_lints_has_the_same_version_as_clippy() {\n-    let clippy_meta = cargo::metadata(&None).expect(\"could not obtain cargo metadata\");\n+    let clippy_meta = cargo::metadata(None).expect(\"could not obtain cargo metadata\");\n     std::env::set_current_dir(std::env::current_dir().unwrap().join(\"clippy_lints\")).unwrap();\n-    let clippy_lints_meta = cargo::metadata(&None).expect(\"could not obtain cargo metadata\");\n+    let clippy_lints_meta = cargo::metadata(None).expect(\"could not obtain cargo metadata\");\n     assert_eq!(clippy_lints_meta.packages[0].version, clippy_meta.packages[0].version);\n     for package in &clippy_meta.packages[0].dependencies {\n         if package.name == \"clippy_lints\" {"}]}