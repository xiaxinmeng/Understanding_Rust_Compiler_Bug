{"sha": "06af3a63a597a40604976666dea19a503557855a", "node_id": "C_kwDOAAsO6NoAKDA2YWYzYTYzYTU5N2E0MDYwNDk3NjY2NmRlYTE5YTUwMzU1Nzg1NWE", "commit": {"author": {"name": "Artyom Pavlov", "email": "newpavlov@gmail.com", "date": "2022-05-27T00:22:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-27T00:22:56Z"}, "message": "add debug asserts", "tree": {"sha": "04316b1d84bc3e527bb54c667e17db2efe64065b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04316b1d84bc3e527bb54c667e17db2efe64065b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/06af3a63a597a40604976666dea19a503557855a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJikBngCRBK7hj4Ov3rIwAAntAIAG0V8bwP9S6ikEWS1GHyrplw\nZJHxLcpVCO2J00+Ng+n6mgNkKrM3ELOjmIhh4i/l5lvppUBBrnBctwFR5klbRj7D\nd4NJDJd/idEY3xnnhamMH8Oj//Pxo4bCwlT9dIo8yzWQ9XjntwsJGQBZQDWmSRWq\nxUYVAt2iv3GMbM78x25I5938WToiPSaDie8DdSHf9lHPn87zJqdfngGU63VGrNEI\nzePGTWTptTDA1Ya6oIZU88qKPif7320q7HeeknY/r4l9uCVKgIh/gvou8tf74oHz\n3eBQh8SWTed+k8T9iRSJm6kmL4n3t9DJgUuQfnpIHCcjIWbCbqVkcHdFuUdAbik=\n=49yq\n-----END PGP SIGNATURE-----\n", "payload": "tree 04316b1d84bc3e527bb54c667e17db2efe64065b\nparent 26f859463eb756e7363cc32f5b5ae795790803b5\nauthor Artyom Pavlov <newpavlov@gmail.com> 1653610976 +0000\ncommitter GitHub <noreply@github.com> 1653610976 +0000\n\nadd debug asserts"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/06af3a63a597a40604976666dea19a503557855a", "html_url": "https://github.com/rust-lang/rust/commit/06af3a63a597a40604976666dea19a503557855a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/06af3a63a597a40604976666dea19a503557855a/comments", "author": {"login": "newpavlov", "id": 329626, "node_id": "MDQ6VXNlcjMyOTYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/newpavlov", "html_url": "https://github.com/newpavlov", "followers_url": "https://api.github.com/users/newpavlov/followers", "following_url": "https://api.github.com/users/newpavlov/following{/other_user}", "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions", "organizations_url": "https://api.github.com/users/newpavlov/orgs", "repos_url": "https://api.github.com/users/newpavlov/repos", "events_url": "https://api.github.com/users/newpavlov/events{/privacy}", "received_events_url": "https://api.github.com/users/newpavlov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26f859463eb756e7363cc32f5b5ae795790803b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/26f859463eb756e7363cc32f5b5ae795790803b5", "html_url": "https://github.com/rust-lang/rust/commit/26f859463eb756e7363cc32f5b5ae795790803b5"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "46fab01b1bf20fd122fe9c46f6114428260283b9", "filename": "library/core/src/time.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/06af3a63a597a40604976666dea19a503557855a/library%2Fcore%2Fsrc%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06af3a63a597a40604976666dea19a503557855a/library%2Fcore%2Fsrc%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftime.rs?ref=06af3a63a597a40604976666dea19a503557855a", "patch": "@@ -1290,8 +1290,10 @@ macro_rules! try_from_secs {\n \n             // note that neither `f32`, nor `f64` can represent\n             // 0.999_999_999_5 exactly, so the nanos part\n-            // never will be equal to 10^9.\n-            (0, nanos + add_ns as u32)\n+            // never will be equal to NANOS_PER_SEC\n+            let nanos = nanos + add_ns as u32;\n+            debug_assert!(nanos < NANOS_PER_SEC);\n+            (0, nanos)\n         } else if exp < $mant_bits {\n             let secs = u64::from(mant >> ($mant_bits - exp));\n             let t = <$double_ty>::from((mant << exp) & MANT_MASK);\n@@ -1308,8 +1310,10 @@ macro_rules! try_from_secs {\n             let add_ns = !(rem_msb || (is_even && is_tie));\n \n             // neither `f32`, nor `f64` can represent x.999_999_999_5 exactly,\n-            // so the nanos part never will be equal to 10^9\n-            (secs, nanos + add_ns as u32)\n+            // so the nanos part never will be equal to NANOS_PER_SEC\n+            let nanos = nanos + add_ns as u32;\n+            debug_assert!(nanos < NANOS_PER_SEC);\n+            (secs, nanos)\n         } else if exp < 64 {\n             // the input has no fractional part\n             let secs = u64::from(mant) << (exp - $mant_bits);"}]}