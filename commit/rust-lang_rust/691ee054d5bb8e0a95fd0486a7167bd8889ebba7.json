{"sha": "691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5MWVlMDU0ZDViYjhlMGE5NWZkMDQ4NmE3MTY3YmQ4ODg5ZWJiYTc=", "commit": {"author": {"name": "Wesley Wiser", "email": "wesleywiser@microsoft.com", "date": "2021-06-30T16:08:58Z"}, "committer": {"name": "Wesley Wiser", "email": "wesleywiser@microsoft.com", "date": "2021-07-08T16:55:49Z"}, "message": "Add natvis for Duration, ManuallyDrop and Pin types", "tree": {"sha": "7449fdf68eca09e2fdbf64ce5b2463dd109100e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7449fdf68eca09e2fdbf64ce5b2463dd109100e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "html_url": "https://github.com/rust-lang/rust/commit/691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/comments", "author": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2aba34eea86a1e3c1ebdd0b8f7adfc730169518", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2aba34eea86a1e3c1ebdd0b8f7adfc730169518", "html_url": "https://github.com/rust-lang/rust/commit/f2aba34eea86a1e3c1ebdd0b8f7adfc730169518"}], "stats": {"total": 62, "additions": 62, "deletions": 0}, "files": [{"sha": "abac2cefa3886c95dc3575cf7097e71d142ecbc8", "filename": "src/etc/natvis/libcore.natvis", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Fetc%2Fnatvis%2Flibcore.natvis", "raw_url": "https://github.com/rust-lang/rust/raw/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Fetc%2Fnatvis%2Flibcore.natvis", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fnatvis%2Flibcore.natvis?ref=691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "patch": "@@ -34,6 +34,13 @@\n     </Expand>\n   </Type>\n \n+  <Type Name=\"core::mem::manually_drop::ManuallyDrop&lt;*&gt;\">\n+    <DisplayString>{value}</DisplayString>\n+    <Expand>\n+      <ExpandedItem>value</ExpandedItem>\n+    </Expand>\n+  </Type>\n+\n   <Type Name=\"core::num::nonzero::NonZeroI8\">\n     <DisplayString>{__0}</DisplayString>\n   </Type>\n@@ -91,6 +98,13 @@\n     <DisplayString>(..={end})</DisplayString>\n   </Type>\n \n+  <Type Name=\"core::pin::Pin&lt;*&gt;\">\n+    <DisplayString>Pin({(void*)pointer}: {pointer})</DisplayString>\n+    <Expand>\n+      <ExpandedItem>pointer</ExpandedItem>\n+    </Expand>\n+  </Type>\n+\n   <Type Name=\"core::ptr::non_null::NonNull&lt;*&gt;\">\n     <DisplayString>NonNull({(void*) pointer}: {pointer})</DisplayString>\n     <Expand>\n@@ -138,4 +152,12 @@\n   <Type Name=\"core::sync::atomic::AtomicUsize\">\n     <DisplayString>{v.value}</DisplayString>\n   </Type>\n+\n+  <Type Name=\"core::time::Duration\">\n+    <DisplayString>{secs,d}s {nanos,d}ns</DisplayString>\n+    <Expand>\n+      <Item Name=\"seconds\">secs</Item>\n+      <Item Name=\"nanoseconds\">nanos</Item>\n+    </Expand>\n+  </Type>\n </AutoVisualizer>"}, {"sha": "3a7f9f78b5fed0125e79bb239e3c4ddab89cc1d8", "filename": "src/test/debuginfo/duration-type.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Ftest%2Fdebuginfo%2Fduration-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Ftest%2Fdebuginfo%2Fduration-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fduration-type.rs?ref=691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "patch": "@@ -0,0 +1,22 @@\n+// only-cdb\n+// compile-flags:-g\n+\n+// === CDB TESTS ==================================================================================\n+\n+// cdb-command: g\n+\n+// cdb-command: dx duration\n+// cdb-check:duration         : 5s 12ns [Type: core::time::Duration]\n+// cdb-check:    [<Raw View>]     [Type: core::time::Duration]\n+// cdb-check:    seconds          : 0x5 [Type: unsigned __int64]\n+// cdb-check:    nanoseconds      : 0xc [Type: unsigned int]\n+\n+use std::time::Duration;\n+\n+fn main() {\n+    let duration = Duration::new(5, 12);\n+\n+    zzz(); // #break\n+}\n+\n+fn zzz() { }"}, {"sha": "de4e8311a4fc35c05fcc00e0647383e475a79fce", "filename": "src/test/debuginfo/marker-types.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Ftest%2Fdebuginfo%2Fmarker-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/691ee054d5bb8e0a95fd0486a7167bd8889ebba7/src%2Ftest%2Fdebuginfo%2Fmarker-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fmarker-types.rs?ref=691ee054d5bb8e0a95fd0486a7167bd8889ebba7", "patch": "@@ -10,11 +10,29 @@\n // cdb-check:    [<Raw View>]     [Type: core::ptr::non_null::NonNull<u32>]\n // cdb-checK:    0xc [Type: unsigned int]\n \n+// cdb-command: dx manuallydrop\n+// cdb-check:manuallydrop     : 12345 [Type: core::mem::manually_drop::ManuallyDrop<i32>]\n+// cdb-check:    [<Raw View>]     [Type: core::mem::manually_drop::ManuallyDrop<i32>]\n+\n+// cdb-command: dx pin\n+// cdb-check:pin              : Pin(0x[...]: \"this\") [Type: core::pin::Pin<ref_mut$<alloc::string::String> >]\n+// cdb-check:    [<Raw View>]     [Type: core::pin::Pin<ref_mut$<alloc::string::String> >]\n+// cdb-check:    [len]            : 0x4 [Type: unsigned __int64]\n+// cdb-check:    [capacity]       : 0x4 [Type: unsigned __int64]\n+// cdb-check:    [chars]\n+\n+use std::mem::ManuallyDrop;\n+use std::pin::Pin;\n use std::ptr::NonNull;\n \n fn main() {\n     let nonnull: NonNull<_> = (&12u32).into();\n \n+    let manuallydrop = ManuallyDrop::new(12345i32);\n+\n+    let mut s = \"this\".to_string();\n+    let pin = Pin::new(&mut s);\n+\n     zzz(); // #break\n }\n "}]}