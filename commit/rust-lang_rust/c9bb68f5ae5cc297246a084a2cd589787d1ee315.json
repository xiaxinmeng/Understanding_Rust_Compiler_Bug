{"sha": "c9bb68f5ae5cc297246a084a2cd589787d1ee315", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5YmI2OGY1YWU1Y2MyOTcyNDZhMDg0YTJjZDU4OTc4N2QxZWUzMTU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-17T22:18:26Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-17T22:18:26Z"}, "message": "Auto merge of #56303 - petrochenkov:stabuseas, r=cramertj\n\nStabilize `underscore_imports`\n\nCloses https://github.com/rust-lang/rust/issues/48216", "tree": {"sha": "a8b9817bb23f94392f8ab08b883f86c3cd90582f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8b9817bb23f94392f8ab08b883f86c3cd90582f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9bb68f5ae5cc297246a084a2cd589787d1ee315", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9bb68f5ae5cc297246a084a2cd589787d1ee315", "html_url": "https://github.com/rust-lang/rust/commit/c9bb68f5ae5cc297246a084a2cd589787d1ee315", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9bb68f5ae5cc297246a084a2cd589787d1ee315/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "adbfec229ce07ff4b2a7bf2d6dec2d13cb224980", "url": "https://api.github.com/repos/rust-lang/rust/commits/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980", "html_url": "https://github.com/rust-lang/rust/commit/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980"}, {"sha": "7c901ba537c0df324c8b99f06ca3b76fcf20766a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c901ba537c0df324c8b99f06ca3b76fcf20766a", "html_url": "https://github.com/rust-lang/rust/commit/7c901ba537c0df324c8b99f06ca3b76fcf20766a"}], "stats": {"total": 80, "additions": 11, "deletions": 69}, "files": [{"sha": "983488da0031da2f9b56d22526b379574d45722e", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -37,7 +37,7 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![feature(if_while_or_patterns)]\n #![feature(try_from)]\n #![feature(reverse_bits)]\n-#![feature(underscore_imports)]\n+#![cfg_attr(stage0, feature(underscore_imports))]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "4eca0c942f34e2af6b236038556106803cd6ac02", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 21, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -400,9 +400,6 @@ declare_features! (\n     // Allows `#[repr(packed)]` attribute on structs.\n     (active, repr_packed, \"1.26.0\", Some(33158), None),\n \n-    // Allows `use path as _;` and `extern crate c as _;`.\n-    (active, underscore_imports, \"1.26.0\", Some(48216), None),\n-\n     // Allows macro invocations in `extern {}` blocks.\n     (active, macros_in_extern, \"1.27.0\", Some(49476), None),\n \n@@ -694,6 +691,8 @@ declare_features! (\n     (accepted, self_struct_ctor, \"1.32.0\", Some(51994), None),\n     // `Self` in type definitions (RFC 2300)\n     (accepted, self_in_typedefs, \"1.32.0\", Some(49303), None),\n+    // `use path as _;` and `extern crate c as _;`\n+    (accepted, underscore_imports, \"1.33.0\", Some(48216), None),\n );\n \n // If you change this, please modify `src/doc/unstable-book` as well. You must\n@@ -1547,26 +1546,8 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n         }\n     }\n \n-    fn visit_use_tree(&mut self, use_tree: &'a ast::UseTree, id: NodeId, _nested: bool) {\n-        if let ast::UseTreeKind::Simple(Some(ident), ..) = use_tree.kind {\n-            if ident.name == \"_\" {\n-                gate_feature_post!(&self, underscore_imports, use_tree.span,\n-                                   \"renaming imports with `_` is unstable\");\n-            }\n-        }\n-\n-        visit::walk_use_tree(self, use_tree, id);\n-    }\n-\n     fn visit_item(&mut self, i: &'a ast::Item) {\n         match i.node {\n-            ast::ItemKind::ExternCrate(_) => {\n-                if i.ident.name == \"_\" {\n-                    gate_feature_post!(&self, underscore_imports, i.span,\n-                                       \"renaming extern crates with `_` is unstable\");\n-                }\n-            }\n-\n             ast::ItemKind::Static(..) |\n             ast::ItemKind::Const(_,_) => {\n                 if i.ident.name == \"_\" {"}, {"sha": "ceb8afe124a8cbdddf53256c42325163073fc73b", "filename": "src/test/ui/feature-gates/feature-gate-underscore-imports.rs", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.rs?ref=adbfec229ce07ff4b2a7bf2d6dec2d13cb224980", "patch": "@@ -1,14 +0,0 @@\n-// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-extern crate std as _; //~ ERROR renaming extern crates with `_` is unstable\n-use std::vec as _; //~ ERROR renaming imports with `_` is unstable\n-\n-fn main() {}"}, {"sha": "2eea95260d5e590de18b18a0f95238c3231febe6", "filename": "src/test/ui/feature-gates/feature-gate-underscore-imports.stderr", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/adbfec229ce07ff4b2a7bf2d6dec2d13cb224980/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-underscore-imports.stderr?ref=adbfec229ce07ff4b2a7bf2d6dec2d13cb224980", "patch": "@@ -1,19 +0,0 @@\n-error[E0658]: renaming extern crates with `_` is unstable (see issue #48216)\n-  --> $DIR/feature-gate-underscore-imports.rs:11:1\n-   |\n-LL | extern crate std as _; //~ ERROR renaming extern crates with `_` is unstable\n-   | ^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = help: add #![feature(underscore_imports)] to the crate attributes to enable\n-\n-error[E0658]: renaming imports with `_` is unstable (see issue #48216)\n-  --> $DIR/feature-gate-underscore-imports.rs:12:5\n-   |\n-LL | use std::vec as _; //~ ERROR renaming imports with `_` is unstable\n-   |     ^^^^^^^^^^^^^\n-   |\n-   = help: add #![feature(underscore_imports)] to the crate attributes to enable\n-\n-error: aborting due to 2 previous errors\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "c335336bee8e3ab800aee18e01836512c023569c", "filename": "src/test/ui/rfc-2166-underscore-imports/auxiliary/underscore-imports.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fauxiliary%2Funderscore-imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fauxiliary%2Funderscore-imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fauxiliary%2Funderscore-imports.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,5 +1,3 @@\n-#![feature(underscore_imports)]\n-\n #[macro_export]\n macro_rules! do_nothing {\n     () => ()"}, {"sha": "93b246fb92d5fdf3d22bcf8492f8fafcf65710e8", "filename": "src/test/ui/rfc-2166-underscore-imports/basic.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -11,7 +11,6 @@\n // compile-pass\n // aux-build:underscore-imports.rs\n \n-#![feature(underscore_imports)]\n #![warn(unused_imports, unused_extern_crates)]\n \n #[macro_use]"}, {"sha": "f2b8cc411ffe26195334ac99af6e99afa0205b07", "filename": "src/test/ui/rfc-2166-underscore-imports/basic.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fbasic.stderr?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,17 +1,17 @@\n warning: unused import: `m::Tr1 as _`\n-  --> $DIR/basic.rs:37:9\n+  --> $DIR/basic.rs:36:9\n    |\n LL |     use m::Tr1 as _; //~ WARN unused import\n    |         ^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/basic.rs:15:9\n+  --> $DIR/basic.rs:14:9\n    |\n LL | #![warn(unused_imports, unused_extern_crates)]\n    |         ^^^^^^^^^^^^^^\n \n warning: unused import: `S as _`\n-  --> $DIR/basic.rs:38:9\n+  --> $DIR/basic.rs:37:9\n    |\n LL |     use S as _; //~ WARN unused import\n    |         ^^^^^^"}, {"sha": "95f7cae0b87d20435afc2ed5dfe436a21073c5e6", "filename": "src/test/ui/rfc-2166-underscore-imports/duplicate.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fduplicate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fduplicate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Fduplicate.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,8 +1,6 @@\n // compile-pass\n // aux-build:duplicate.rs\n \n-#![feature(underscore_imports)]\n-\n extern crate duplicate;\n \n #[duplicate::duplicate]"}, {"sha": "d06a26a5f116664b5ce0094e594d5e50b4a5c4c0", "filename": "src/test/ui/rfc-2166-underscore-imports/unused-2018.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,6 +1,5 @@\n // edition:2018\n \n-#![feature(underscore_imports)]\n #![deny(unused_imports)]\n \n mod multi_segment {"}, {"sha": "4163c2876074befdc95f7a8fda5184b84e03d9a2", "filename": "src/test/ui/rfc-2166-underscore-imports/unused-2018.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2166-underscore-imports%2Funused-2018.stderr?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,17 +1,17 @@\n error: unused import: `core::any`\n-  --> $DIR/unused-2018.rs:7:9\n+  --> $DIR/unused-2018.rs:6:9\n    |\n LL |     use core::any; //~ ERROR unused import: `core::any`\n    |         ^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/unused-2018.rs:4:9\n+  --> $DIR/unused-2018.rs:3:9\n    |\n LL | #![deny(unused_imports)]\n    |         ^^^^^^^^^^^^^^\n \n error: unused import: `core`\n-  --> $DIR/unused-2018.rs:11:9\n+  --> $DIR/unused-2018.rs:10:9\n    |\n LL |     use core; //~ ERROR unused import: `core`\n    |         ^^^^"}, {"sha": "4f0cadaae5d53299251b36c17aada8e036f90b04", "filename": "src/test/ui/rust-2018/future-proofing-locals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frust-2018%2Ffuture-proofing-locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frust-2018%2Ffuture-proofing-locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Ffuture-proofing-locals.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -1,6 +1,6 @@\n // edition:2018\n \n-#![feature(uniform_paths, underscore_imports)]\n+#![feature(uniform_paths)]\n \n mod T {\n     pub struct U;"}, {"sha": "fc433c201b062b137f33003625204b70216647b0", "filename": "src/test/ui/rust-2018/uniform-paths/macro-rules.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frust-2018%2Funiform-paths%2Fmacro-rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9bb68f5ae5cc297246a084a2cd589787d1ee315/src%2Ftest%2Fui%2Frust-2018%2Funiform-paths%2Fmacro-rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Funiform-paths%2Fmacro-rules.rs?ref=c9bb68f5ae5cc297246a084a2cd589787d1ee315", "patch": "@@ -2,7 +2,7 @@\n \n // For the time being `macro_rules` items are treated as *very* private...\n \n-#![feature(underscore_imports, decl_macro, uniform_paths)]\n+#![feature(decl_macro, uniform_paths)]\n \n mod m1 {\n     macro_rules! legacy_macro { () => () }"}]}