{"sha": "8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "node_id": "C_kwDOAAsO6NoAKDhiZGYwOGZiZWQyZmJhNjBlNDFkYWRiM2JlOTcxNGI0YzA0NDFmNzI", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-21T22:15:14Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-02-03T18:59:09Z"}, "message": "Change pp indent to signed to allow negative indents", "tree": {"sha": "18ebf6319abe87a9c5e760b7c987ba13813ac551", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18ebf6319abe87a9c5e760b7c987ba13813ac551"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmH8Jf8ACgkQ+boUO5X/\nbYKbSBAAxZ4gbrsntxAh/FzJRMrD7YBT/69Nyq/+1dNgnJLrmkXtQlOpgAf/s23A\nA4/XtMZr8+QFaFbsC7cf0a7NseBnZVHGfwmXV1x8BfE0XmE4z/uVqCOdr5VhSraE\nl4Ku/jNy8L9ewsJ3Qz79Lhl0XqyDMc7pxJmCYhvv11+oej08+8E04R9tZ9bYxVLm\n6ZYEwJheLOK/+pdQacGtR67fD9hJHoASe8MLE2HJ6OGXE0RudYN+I/I508FWxaWe\nvSpCjt2Se7hoLFl3R+VI3XLAnvQkWASK4X5qMe+zZPYA9ul5wGIx0xWiP4YoUXt+\nyDLPSopVAPHZhJvOjsHXqrbW7nzFakznddMH0hw9OxARCI1dMRSgdYUAqMcqGE/J\nMG03N37+2imleUpp+8TXHAMIGpENLe6HafoWukT+4xKG/GZ4k29Hz5q+n4G1nB/D\n6TJT/rRPb/cTxuJQbA9ylaATAwi+3lIb4EtAXcMf5IcGLM3Oj7+wA1ywDsF0HOA2\nzBn/QDac5C88TcMcC1BCYE2v9bAoQqrde4HpHtyTI1s2Q2LmxQd0/YpjldrmKWag\nHfi68hL+ojmP+T7rHOTtlU7sC0J/PeDRMh2d8iZdczQeEQcy5IY05s/GQm32u3PY\nw29iV0tZ9uu2j7qPBfnAwUr7GVHdmeSGikBQYcfpEJuiBj7cjF4=\n=CUks\n-----END PGP SIGNATURE-----", "payload": "tree 18ebf6319abe87a9c5e760b7c987ba13813ac551\nparent 0b7e1baa58dea7cfb1170a361e12c3dec8e76840\nauthor David Tolnay <dtolnay@gmail.com> 1642803314 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1643914749 -0800\n\nChange pp indent to signed to allow negative indents\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "html_url": "https://github.com/rust-lang/rust/commit/8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b7e1baa58dea7cfb1170a361e12c3dec8e76840", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b7e1baa58dea7cfb1170a361e12c3dec8e76840", "html_url": "https://github.com/rust-lang/rust/commit/0b7e1baa58dea7cfb1170a361e12c3dec8e76840"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "7f03f98f1a29e1c531c6461aa1260873bc457fc9", "filename": "compiler/rustc_ast_pretty/src/pp.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs?ref=8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "patch": "@@ -392,7 +392,9 @@ impl Printer {\n         if size > self.space {\n             self.print_stack.push(PrintFrame::Broken { indent: self.indent, breaks: token.breaks });\n             self.indent = match token.indent {\n-                IndentStyle::Block { offset } => (self.indent as isize + offset) as usize,\n+                IndentStyle::Block { offset } => {\n+                    usize::try_from(self.indent as isize + offset).unwrap()\n+                }\n                 IndentStyle::Visual => (MARGIN - self.space) as usize,\n             };\n         } else {"}, {"sha": "785e6886d8a3841ecac46ee1eeed4a9e033eeaa8", "filename": "compiler/rustc_ast_pretty/src/pp/convenience.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp%2Fconvenience.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp%2Fconvenience.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp%2Fconvenience.rs?ref=8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "patch": "@@ -3,20 +3,17 @@ use std::borrow::Cow;\n \n impl Printer {\n     /// \"raw box\"\n-    pub fn rbox(&mut self, indent: usize, breaks: Breaks) {\n-        self.scan_begin(BeginToken {\n-            indent: IndentStyle::Block { offset: indent as isize },\n-            breaks,\n-        })\n+    pub fn rbox(&mut self, indent: isize, breaks: Breaks) {\n+        self.scan_begin(BeginToken { indent: IndentStyle::Block { offset: indent }, breaks })\n     }\n \n     /// Inconsistent breaking box\n-    pub fn ibox(&mut self, indent: usize) {\n+    pub fn ibox(&mut self, indent: isize) {\n         self.rbox(indent, Breaks::Inconsistent)\n     }\n \n     /// Consistent breaking box\n-    pub fn cbox(&mut self, indent: usize) {\n+    pub fn cbox(&mut self, indent: isize) {\n         self.rbox(indent, Breaks::Consistent)\n     }\n "}, {"sha": "e88d37ec102dcd0fe9e36dfd9db056ff095f75e3", "filename": "compiler/rustc_ast_pretty/src/pprust/state.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs?ref=8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "patch": "@@ -92,7 +92,7 @@ pub struct State<'a> {\n     ann: &'a (dyn PpAnn + 'a),\n }\n \n-crate const INDENT_UNIT: usize = 4;\n+crate const INDENT_UNIT: isize = 4;\n \n /// Requires you to pass an input filename and reader so that\n /// it can scan the input text for comments to copy forward."}, {"sha": "13008a8337979dca2dc39f0640d436bb45c23dc0", "filename": "compiler/rustc_hir_pretty/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bdf08fbed2fba60e41dadb3be9714b4c0441f72/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs?ref=8bdf08fbed2fba60e41dadb3be9714b4c0441f72", "patch": "@@ -139,7 +139,7 @@ impl<'a> PrintState<'a> for State<'a> {\n     }\n }\n \n-pub const INDENT_UNIT: usize = 4;\n+pub const INDENT_UNIT: isize = 4;\n \n /// Requires you to pass an input filename and reader so that\n /// it can scan the input text for comments to copy forward."}]}