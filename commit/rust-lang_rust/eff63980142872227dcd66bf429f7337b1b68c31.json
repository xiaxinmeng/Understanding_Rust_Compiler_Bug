{"sha": "eff63980142872227dcd66bf429f7337b1b68c31", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmZjYzOTgwMTQyODcyMjI3ZGNkNjZiZjQyOWY3MzM3YjFiNjhjMzE=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-10-02T22:31:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-02T22:31:17Z"}, "message": "Rollup merge of #77452 - Mark-Simulacrum:fix-symbol-v0, r=eddyb\n\nPermit ty::Bool in const generics for v0 mangling\n\nThis should unbreak using new-symbol-mangling = true in config.toml (once it lands in beta anyway).\n\nFixes #76365 (well, it will, but seems fine to close as soon as we have support)\n\nr? @eddyb (for mangling) but I'm okay with some other reviewer too :)", "tree": {"sha": "807dbc3a528785d6119b683c2a511bbc2f9629f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/807dbc3a528785d6119b683c2a511bbc2f9629f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eff63980142872227dcd66bf429f7337b1b68c31", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfd6o2CRBK7hj4Ov3rIwAAdHIIAKeLGyAsxzbEJ4LOpMJtNMt1\nf1YZXSzOGZLCN/xU9f9qweiwFVwO3/9IjDPZOr5ijlDBPwB55V/ujLZqZs87ThWS\ne//PNvMpa/DFuPzq6KTJg7AS9qII98rlJTQoPXvSrB9HQg9rRI6ceIpI8i+xew/+\noLscSqssymB6WcIddSdC0G1yx2MJ/Bxud50+gPv3tAvd/cLYNhw33RutsCljMQrx\nHha1xB31ua9o112qctkpLgwJuoARdQ1qP25FYCY4qfMFnVmVLxxotVSHsFjDgU3e\n2S3e9XO7CG/kodmqB6t/2dyGgNCtCtt8NDUTTGzWfNtGV4yyp2KHU29cvZtX238=\n=o79J\n-----END PGP SIGNATURE-----\n", "payload": "tree 807dbc3a528785d6119b683c2a511bbc2f9629f9\nparent 23408de992598d89bf6ed697b4b86bbefc0f2df0\nparent 89fdfe682870bd60e759a38c0509af605eaff759\nauthor Jonas Schievink <jonasschievink@gmail.com> 1601677877 +0200\ncommitter GitHub <noreply@github.com> 1601677877 +0200\n\nRollup merge of #77452 - Mark-Simulacrum:fix-symbol-v0, r=eddyb\n\nPermit ty::Bool in const generics for v0 mangling\n\nThis should unbreak using new-symbol-mangling = true in config.toml (once it lands in beta anyway).\n\nFixes #76365 (well, it will, but seems fine to close as soon as we have support)\n\nr? @eddyb (for mangling) but I'm okay with some other reviewer too :)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eff63980142872227dcd66bf429f7337b1b68c31", "html_url": "https://github.com/rust-lang/rust/commit/eff63980142872227dcd66bf429f7337b1b68c31", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eff63980142872227dcd66bf429f7337b1b68c31/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23408de992598d89bf6ed697b4b86bbefc0f2df0", "url": "https://api.github.com/repos/rust-lang/rust/commits/23408de992598d89bf6ed697b4b86bbefc0f2df0", "html_url": "https://github.com/rust-lang/rust/commit/23408de992598d89bf6ed697b4b86bbefc0f2df0"}, {"sha": "89fdfe682870bd60e759a38c0509af605eaff759", "url": "https://api.github.com/repos/rust-lang/rust/commits/89fdfe682870bd60e759a38c0509af605eaff759", "html_url": "https://github.com/rust-lang/rust/commit/89fdfe682870bd60e759a38c0509af605eaff759"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "da9c93143bfb345d7836bb0cfe996c3c9fb2287c", "filename": "compiler/rustc_symbol_mangling/src/v0.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eff63980142872227dcd66bf429f7337b1b68c31/compiler%2Frustc_symbol_mangling%2Fsrc%2Fv0.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff63980142872227dcd66bf429f7337b1b68c31/compiler%2Frustc_symbol_mangling%2Fsrc%2Fv0.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_symbol_mangling%2Fsrc%2Fv0.rs?ref=eff63980142872227dcd66bf429f7337b1b68c31", "patch": "@@ -504,6 +504,7 @@ impl Printer<'tcx> for SymbolMangler<'tcx> {\n \n         match ct.ty.kind() {\n             ty::Uint(_) => {}\n+            ty::Bool => {}\n             _ => {\n                 bug!(\"symbol_names: unsupported constant of type `{}` ({:?})\", ct.ty, ct);\n             }"}, {"sha": "61ba255dac04d78d0453617b59161e38a5eb0f30", "filename": "src/test/ui/symbol-names/issue-76365.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/eff63980142872227dcd66bf429f7337b1b68c31/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eff63980142872227dcd66bf429f7337b1b68c31/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsymbol-names%2Fissue-76365.rs?ref=eff63980142872227dcd66bf429f7337b1b68c31", "patch": "@@ -0,0 +1,18 @@\n+// check-pass\n+// revisions: legacy v0\n+//[legacy]compile-flags: -Z symbol-mangling-version=legacy --crate-type=lib\n+    //[v0]compile-flags: -Z symbol-mangling-version=v0 --crate-type=lib\n+\n+#![feature(min_const_generics)]\n+\n+pub struct Bar<const F: bool>;\n+\n+impl Bar<true> {\n+    pub fn foo() {}\n+}\n+\n+impl<const F: bool> Bar<F> {\n+    pub fn bar() {}\n+}\n+\n+fn main() {}"}]}