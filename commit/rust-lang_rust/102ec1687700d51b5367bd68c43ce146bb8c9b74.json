{"sha": "102ec1687700d51b5367bd68c43ce146bb8c9b74", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwMmVjMTY4NzcwMGQ1MWI1MzY3YmQ2OGM0M2NlMTQ2YmI4YzliNzQ=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-18T16:00:10Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-18T16:00:10Z"}, "message": "Flesh out the ast module in rustc a little.", "tree": {"sha": "a7577cc95b055183b35b1c00d08d0a08d6ed5ee8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a7577cc95b055183b35b1c00d08d0a08d6ed5ee8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/102ec1687700d51b5367bd68c43ce146bb8c9b74", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/102ec1687700d51b5367bd68c43ce146bb8c9b74", "html_url": "https://github.com/rust-lang/rust/commit/102ec1687700d51b5367bd68c43ce146bb8c9b74", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/102ec1687700d51b5367bd68c43ce146bb8c9b74/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9db70bfc42702e32bac09394e55bd756664aadf8", "url": "https://api.github.com/repos/rust-lang/rust/commits/9db70bfc42702e32bac09394e55bd756664aadf8", "html_url": "https://github.com/rust-lang/rust/commit/9db70bfc42702e32bac09394e55bd756664aadf8"}], "stats": {"total": 48, "additions": 47, "deletions": 1}, "files": [{"sha": "3a329dede1c235cbba58979db653d0bdae21524a", "filename": "src/comp/fe/ast.rs", "status": "modified", "additions": 47, "deletions": 1, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/102ec1687700d51b5367bd68c43ce146bb8c9b74/src%2Fcomp%2Ffe%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/102ec1687700d51b5367bd68c43ce146bb8c9b74/src%2Fcomp%2Ffe%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffe%2Fast.rs?ref=102ec1687700d51b5367bd68c43ce146bb8c9b74", "patch": "@@ -1,4 +1,50 @@\n-type crate = rec( str filename );\n+\n+import std.util.option;\n+import std.map.hashmap;\n+\n+type ident = str;\n+\n+type crate = rec( str filename,\n+                  _mod module);\n+\n+type block = vec[stmt];\n+\n+type stmt = tag( stmt_block(block),\n+                 stmt_decl(@decl),\n+                 stmt_ret(option[@lval]) );\n+\n+type decl = tag( decl_local(ident, option[ty]),\n+                 decl_item(ident, @item) );\n+\n+type lval = tag( lval_ident(ident),\n+                 lval_ext(@lval, ident),\n+                 lval_idx(@lval, @atom) );\n+\n+type atom = tag( atom_lit(lit));\n+\n+type lit = tag( lit_char(char),\n+                lit_int(int),\n+                lit_nil(),\n+                lit_bool(bool) );\n+\n+type ty = tag( ty_nil(),\n+               ty_bool(),\n+               ty_int(),\n+               ty_char() );\n+\n+type mode = tag( local(), alias() );\n+\n+type slot = rec(ty ty, mode mode);\n+\n+type _fn = rec(vec[rec(slot slot, ident ident)] inputs,\n+               slot output,\n+               block body);\n+\n+type _mod = hashmap[ident,item];\n+\n+type item = tag( item_fn(@_fn),\n+                 item_mod(@_mod) );\n+\n \n //\n // Local Variables:"}]}