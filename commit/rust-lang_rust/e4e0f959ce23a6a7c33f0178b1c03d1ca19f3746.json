{"sha": "e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0ZTBmOTU5Y2UyM2E2YTdjMzNmMDE3OGIxYzAzZDFjYTE5ZjM3NDY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-12T20:53:00Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-24T05:58:37Z"}, "message": "promoted_errors: warn -> deny.", "tree": {"sha": "94cf21f2aece5650d6102cf094e97a0cbafb3b1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/94cf21f2aece5650d6102cf094e97a0cbafb3b1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "html_url": "https://github.com/rust-lang/rust/commit/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e364eb40d5652d3aa668fe4b50e78098a83fe04e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e364eb40d5652d3aa668fe4b50e78098a83fe04e", "html_url": "https://github.com/rust-lang/rust/commit/e364eb40d5652d3aa668fe4b50e78098a83fe04e"}], "stats": {"total": 66, "additions": 36, "deletions": 30}, "files": [{"sha": "fa8859cbb3bb652282ed7d1ac8cd4182420a62cc", "filename": "src/test/ui/consts/const-eval/promoted_errors.rs", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.rs?ref=e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "patch": "@@ -1,19 +1,23 @@\n-#![warn(const_err)]\n-\n-// compile-pass\n // compile-flags: -O\n+\n+#![deny(const_err)]\n+\n fn main() {\n     println!(\"{}\", 0u32 - 1);\n     let _x = 0u32 - 1;\n-    //~^ WARN const_err\n+    //~^ ERROR this expression will panic at runtime [const_err]\n     println!(\"{}\", 1/(1-1));\n-    //~^ WARN const_err\n+    //~^ ERROR this expression will panic at runtime [const_err]\n+    //~| ERROR attempt to divide by zero [const_err]\n+    //~| ERROR reaching this expression at runtime will panic or abort [const_err]\n     let _x = 1/(1-1);\n-    //~^ WARN const_err\n-    //~| WARN const_err\n+    //~^ ERROR const_err\n+    //~| ERROR const_err\n     println!(\"{}\", 1/(false as u32));\n-    //~^ WARN const_err\n+    //~^ ERROR this expression will panic at runtime [const_err]\n+    //~| ERROR attempt to divide by zero [const_err]\n+    //~| ERROR reaching this expression at runtime will panic or abort [const_err]\n     let _x = 1/(false as u32);\n-    //~^ WARN const_err\n-    //~| WARN const_err\n+    //~^ ERROR const_err\n+    //~| ERROR const_err\n }"}, {"sha": "12407accf096f0ee5b01c1d03301317b4a81044c", "filename": "src/test/ui/consts/const-eval/promoted_errors.stderr", "status": "modified", "additions": 22, "deletions": 20, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fpromoted_errors.stderr?ref=e4e0f959ce23a6a7c33f0178b1c03d1ca19f3746", "patch": "@@ -1,72 +1,74 @@\n-warning: this expression will panic at runtime\n+error: this expression will panic at runtime\n   --> $DIR/promoted_errors.rs:7:14\n    |\n LL |     let _x = 0u32 - 1;\n    |              ^^^^^^^^ attempt to subtract with overflow\n    |\n note: lint level defined here\n-  --> $DIR/promoted_errors.rs:1:9\n+  --> $DIR/promoted_errors.rs:3:9\n    |\n-LL | #![warn(const_err)]\n+LL | #![deny(const_err)]\n    |         ^^^^^^^^^\n \n-warning: attempt to divide by zero\n+error: attempt to divide by zero\n   --> $DIR/promoted_errors.rs:9:20\n    |\n LL |     println!(\"{}\", 1/(1-1));\n    |                    ^^^^^^^\n \n-warning: this expression will panic at runtime\n+error: this expression will panic at runtime\n   --> $DIR/promoted_errors.rs:9:20\n    |\n LL |     println!(\"{}\", 1/(1-1));\n    |                    ^^^^^^^ attempt to divide by zero\n \n-warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:11:14\n+error: attempt to divide by zero\n+  --> $DIR/promoted_errors.rs:13:14\n    |\n LL |     let _x = 1/(1-1);\n    |              ^^^^^^^\n \n-warning: this expression will panic at runtime\n-  --> $DIR/promoted_errors.rs:11:14\n+error: this expression will panic at runtime\n+  --> $DIR/promoted_errors.rs:13:14\n    |\n LL |     let _x = 1/(1-1);\n    |              ^^^^^^^ attempt to divide by zero\n \n-warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:14:20\n+error: attempt to divide by zero\n+  --> $DIR/promoted_errors.rs:16:20\n    |\n LL |     println!(\"{}\", 1/(false as u32));\n    |                    ^^^^^^^^^^^^^^^^\n \n-warning: this expression will panic at runtime\n-  --> $DIR/promoted_errors.rs:14:20\n+error: this expression will panic at runtime\n+  --> $DIR/promoted_errors.rs:16:20\n    |\n LL |     println!(\"{}\", 1/(false as u32));\n    |                    ^^^^^^^^^^^^^^^^ attempt to divide by zero\n \n-warning: attempt to divide by zero\n-  --> $DIR/promoted_errors.rs:16:14\n+error: attempt to divide by zero\n+  --> $DIR/promoted_errors.rs:20:14\n    |\n LL |     let _x = 1/(false as u32);\n    |              ^^^^^^^^^^^^^^^^\n \n-warning: this expression will panic at runtime\n-  --> $DIR/promoted_errors.rs:16:14\n+error: this expression will panic at runtime\n+  --> $DIR/promoted_errors.rs:20:14\n    |\n LL |     let _x = 1/(false as u32);\n    |              ^^^^^^^^^^^^^^^^ attempt to divide by zero\n \n-warning: reaching this expression at runtime will panic or abort\n-  --> $DIR/promoted_errors.rs:14:20\n+error: reaching this expression at runtime will panic or abort\n+  --> $DIR/promoted_errors.rs:16:20\n    |\n LL |     println!(\"{}\", 1/(false as u32));\n    |                    ^^^^^^^^^^^^^^^^ attempt to divide by zero\n \n-warning: reaching this expression at runtime will panic or abort\n+error: reaching this expression at runtime will panic or abort\n   --> $DIR/promoted_errors.rs:9:20\n    |\n LL |     println!(\"{}\", 1/(1-1));\n    |                    ^^^^^^^ attempt to divide by zero\n \n+error: aborting due to 11 previous errors\n+"}]}