{"sha": "4d06185688aa2bc533776669b53a2479e2cf3e8c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkMDYxODU2ODhhYTJiYzUzMzc3NjY2OWI1M2EyNDc5ZTJjZjNlOGM=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-09-02T11:59:53Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-09-02T14:11:25Z"}, "message": "Remove invalid doctest from bootstrap.py.\n\nMake sure that if the test is failed, the CI will stop the build.", "tree": {"sha": "623194deb89bbb8b5c19020c44be8c66b2982980", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/623194deb89bbb8b5c19020c44be8c66b2982980"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d06185688aa2bc533776669b53a2479e2cf3e8c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJZqrwRAAoJEP72yAUdDgE8OiwP/2+UfAxoAQV65UFkWNQJLjWa\nUzecuUz8iU9RmqzSUgMSVkUytyCW3MKTkgB6i6TB1beVF1lSUGxwtbEaqrEV2pO1\nu0cQRsW23umkRjH4t4c50DyWVpqUgFfXwcS7ybEPGV6igQzG7fJYFmaTCjqB+te3\nYoa3GODJ/QRn09B2ZWKE+kdwB6/nOnvqCN+DkcnDNYOrNdlGyluxAicVB+MV2tjB\nRq/JBBF5KpzmCdX9zm0WNc7kiN8V1VsjUgNsdtbUKWtzCymVybR9e7ZmTBpgGvPO\nZhFH4o6/MKun/1CAMva98H0lJCMPDY29N4eHSqq09JF2wMfAgq5Tr8KvrAaIcGm7\nWFPCvst+kK97p0QjKiX0frcgeT0fBbxOKpIzBRv8Bl+JN0paVYlKhb9OU0h5i9w/\nLFCj3eKqZRJkCI7L3U6d50d4faAGl1PDad+LhlNlhL2dlebXticAYwFf5hY03yl+\nEY+gtTAgKRvl5QbKT68o+S1xVzJLg6qeMX0JdIGbPUQ2etyxRGpyyiZw4wb2D88r\nAv9wZN6Eo//9FfSzgCdOT4F9e7Tudw4UcoiYWrcbLAe0nMGJNASc8iX0o9TAI4J9\nSxga9u6cHbupJkh5DGCdXFIkgBpYiBFLvg5EV7qvq+9zDefIx1nHNsuwloeIqlsp\nXZ3r+mAtY9VIHuEwuYo8\n=dj6r\n-----END PGP SIGNATURE-----", "payload": "tree 623194deb89bbb8b5c19020c44be8c66b2982980\nparent efceda220e92f02f7a29a15e4cf56f5a3cdf1792\nauthor kennytm <kennytm@gmail.com> 1504353593 +0800\ncommitter kennytm <kennytm@gmail.com> 1504361485 +0800\n\nRemove invalid doctest from bootstrap.py.\n\nMake sure that if the test is failed, the CI will stop the build.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d06185688aa2bc533776669b53a2479e2cf3e8c", "html_url": "https://github.com/rust-lang/rust/commit/4d06185688aa2bc533776669b53a2479e2cf3e8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d06185688aa2bc533776669b53a2479e2cf3e8c/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efceda220e92f02f7a29a15e4cf56f5a3cdf1792", "url": "https://api.github.com/repos/rust-lang/rust/commits/efceda220e92f02f7a29a15e4cf56f5a3cdf1792", "html_url": "https://github.com/rust-lang/rust/commit/efceda220e92f02f7a29a15e4cf56f5a3cdf1792"}], "stats": {"total": 10, "additions": 4, "deletions": 6}, "files": [{"sha": "4ef6d70e820ea9d4f3f54bc4814e5c716c387a51", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d06185688aa2bc533776669b53a2479e2cf3e8c/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/4d06185688aa2bc533776669b53a2479e2cf3e8c/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=4d06185688aa2bc533776669b53a2479e2cf3e8c", "patch": "@@ -523,10 +523,6 @@ def program_config(self, program):\n         >>> rb.config_toml = 'rustc = \"rustc\"\\\\n'\n         >>> rb.program_config('rustc')\n         'rustc'\n-        >>> cargo_path = rb.program_config('cargo')\n-        >>> cargo_path.rstrip(\".exe\") == os.path.join(\"/tmp/rust\",\n-        ... \"bin\", \"cargo\")\n-        True\n         >>> rb.config_toml = ''\n         >>> cargo_path = rb.program_config('cargo')\n         >>> cargo_path.rstrip(\".exe\") == os.path.join(rb.bin_root(),"}, {"sha": "32ea4b4abe638b51cfc95d898e800922962ce792", "filename": "src/bootstrap/bootstrap_test.py", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4d06185688aa2bc533776669b53a2479e2cf3e8c/src%2Fbootstrap%2Fbootstrap_test.py", "raw_url": "https://github.com/rust-lang/rust/raw/4d06185688aa2bc533776669b53a2479e2cf3e8c/src%2Fbootstrap%2Fbootstrap_test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap_test.py?ref=4d06185688aa2bc533776669b53a2479e2cf3e8c", "patch": "@@ -15,6 +15,7 @@\n import unittest\n import tempfile\n import hashlib\n+import sys\n \n from shutil import rmtree\n \n@@ -110,5 +111,6 @@ def test_same_dates(self):\n         TEST_LOADER.loadTestsFromTestCase(VerifyTestCase),\n         TEST_LOADER.loadTestsFromTestCase(ProgramOutOfDate)])\n \n-    RUNNER = unittest.TextTestRunner(verbosity=2)\n-    RUNNER.run(SUITE)\n+    RUNNER = unittest.TextTestRunner(stream=sys.stdout, verbosity=2)\n+    result = RUNNER.run(SUITE)\n+    sys.exit(0 if result.wasSuccessful() else 1)"}]}