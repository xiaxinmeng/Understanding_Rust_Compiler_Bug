{"sha": "920a2b7468db034ae5accaa584aedb42f80f3112", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyMGEyYjc0NjhkYjAzNGFlNWFjY2FhNTg0YWVkYjQyZjgwZjMxMTI=", "commit": {"author": {"name": "Theemathas Chirananthavat", "email": "theemathas@gmail.com", "date": "2016-12-30T02:28:49Z"}, "committer": {"name": "Theemathas Chirananthavat", "email": "theemathas@gmail.com", "date": "2017-01-06T01:41:01Z"}, "message": "The drop_ref test does not require implementing the Drop trait.", "tree": {"sha": "661f26a4974b55343cbb56d0602da91ec069bcb4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/661f26a4974b55343cbb56d0602da91ec069bcb4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/920a2b7468db034ae5accaa584aedb42f80f3112", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/920a2b7468db034ae5accaa584aedb42f80f3112", "html_url": "https://github.com/rust-lang/rust/commit/920a2b7468db034ae5accaa584aedb42f80f3112", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/920a2b7468db034ae5accaa584aedb42f80f3112/comments", "author": {"login": "theemathas", "id": 6120103, "node_id": "MDQ6VXNlcjYxMjAxMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/6120103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theemathas", "html_url": "https://github.com/theemathas", "followers_url": "https://api.github.com/users/theemathas/followers", "following_url": "https://api.github.com/users/theemathas/following{/other_user}", "gists_url": "https://api.github.com/users/theemathas/gists{/gist_id}", "starred_url": "https://api.github.com/users/theemathas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theemathas/subscriptions", "organizations_url": "https://api.github.com/users/theemathas/orgs", "repos_url": "https://api.github.com/users/theemathas/repos", "events_url": "https://api.github.com/users/theemathas/events{/privacy}", "received_events_url": "https://api.github.com/users/theemathas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "theemathas", "id": 6120103, "node_id": "MDQ6VXNlcjYxMjAxMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/6120103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theemathas", "html_url": "https://github.com/theemathas", "followers_url": "https://api.github.com/users/theemathas/followers", "following_url": "https://api.github.com/users/theemathas/following{/other_user}", "gists_url": "https://api.github.com/users/theemathas/gists{/gist_id}", "starred_url": "https://api.github.com/users/theemathas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theemathas/subscriptions", "organizations_url": "https://api.github.com/users/theemathas/orgs", "repos_url": "https://api.github.com/users/theemathas/repos", "events_url": "https://api.github.com/users/theemathas/events{/privacy}", "received_events_url": "https://api.github.com/users/theemathas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f145fc44f83febd20a5423dd752c3c366f497d4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/f145fc44f83febd20a5423dd752c3c366f497d4b", "html_url": "https://github.com/rust-lang/rust/commit/f145fc44f83febd20a5423dd752c3c366f497d4b"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "76d7d9ca21b5b12592fb971c109d9924fb89ae9e", "filename": "tests/compile-fail/drop_ref.rs", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/920a2b7468db034ae5accaa584aedb42f80f3112/tests%2Fcompile-fail%2Fdrop_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/920a2b7468db034ae5accaa584aedb42f80f3112/tests%2Fcompile-fail%2Fdrop_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fdrop_ref.rs?ref=920a2b7468db034ae5accaa584aedb42f80f3112", "patch": "@@ -6,26 +6,25 @@\n \n use std::mem::drop;\n \n-struct DroppableStruct;\n-impl Drop for DroppableStruct { fn drop(&mut self) {} }\n+struct SomeStruct;\n \n fn main() {\n-    drop(&DroppableStruct); //~ERROR call to `std::mem::drop` with a reference argument\n+    drop(&SomeStruct); //~ERROR call to `std::mem::drop` with a reference argument\n \n-    let mut owned = DroppableStruct;\n+    let mut owned = SomeStruct;\n     drop(&owned); //~ERROR call to `std::mem::drop` with a reference argument\n     drop(&&owned); //~ERROR call to `std::mem::drop` with a reference argument\n     drop(&mut owned); //~ERROR call to `std::mem::drop` with a reference argument\n     drop(owned); //OK\n \n-    let reference1 = &DroppableStruct;\n+    let reference1 = &SomeStruct;\n     drop(reference1); //~ERROR call to `std::mem::drop` with a reference argument\n     drop(&*reference1); //~ERROR call to `std::mem::drop` with a reference argument\n \n-    let reference2 = &mut DroppableStruct;\n+    let reference2 = &mut SomeStruct;\n     drop(reference2); //~ERROR call to `std::mem::drop` with a reference argument\n \n-    let ref reference3 = DroppableStruct;\n+    let ref reference3 = SomeStruct;\n     drop(reference3); //~ERROR call to `std::mem::drop` with a reference argument\n }\n \n@@ -38,6 +37,6 @@ fn test_generic_fn<T>(val: T) {\n #[allow(dead_code)]\n fn test_similarly_named_function() {\n     fn drop<T>(_val: T) {}\n-    drop(&DroppableStruct); //OK; call to unrelated function which happens to have the same name\n-    std::mem::drop(&DroppableStruct); //~ERROR call to `std::mem::drop` with a reference argument\n+    drop(&SomeStruct); //OK; call to unrelated function which happens to have the same name\n+    std::mem::drop(&SomeStruct); //~ERROR call to `std::mem::drop` with a reference argument\n }"}]}