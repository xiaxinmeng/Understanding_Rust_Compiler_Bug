{"sha": "5ed195baaa7d8753053c13a8bb932385becf64a6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlZDE5NWJhYWE3ZDg3NTMwNTNjMTNhOGJiOTMyMzg1YmVjZjY0YTY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-10T06:13:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-10T06:13:21Z"}, "message": "Rollup merge of #63394 - jackh726:issue-36804, r=jonas-schievink\n\nAdd test for issue 36804\n\nI slightly reduced the repro that ICEs on nightly-2017-01-20.\n\nCloses #36804", "tree": {"sha": "fe6c8bc6bc8316b285e59881a65600d2b1e0ef3e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fe6c8bc6bc8316b285e59881a65600d2b1e0ef3e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ed195baaa7d8753053c13a8bb932385becf64a6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdTmCBCRBK7hj4Ov3rIwAAdHIIAA7Jyz5uLZxDR3Wzgxp9mWiQ\nJ5fNROqphKQUHoCl5zlR5DMJ2fPATFUtsndKtAdinldFD1ejVe3dUYtpYczETRqx\ntbK6mu3o0PEzwHOSLzmkpyrkx1BShkX54NDsNyrBpu49LV7b/GyS3hx2z7fffbSa\njcxy2Ymz8dbshkJVv7W+wPfl+KVNpEOiXyuqp5/YolSnlReqqt2rLkmbDUKHCTRA\nkntG7qTftsUMAGOm46OOBVKZp4TSP5HXmI/PVs7ULaqw+TTTlbxbt/jXDvXPKbgf\nrpaxbVVgkytoaZrohUjrB4MK9qqRnuyDJl5OTLyXTM6od3Q3656hfHw8NWgLgHw=\n=lvOS\n-----END PGP SIGNATURE-----\n", "payload": "tree fe6c8bc6bc8316b285e59881a65600d2b1e0ef3e\nparent 6743ad6726fa4144ca4616f728533fc819430d9d\nparent 322a7d6387a875d9f751c1b332f84c181e57ac64\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1565417601 +0200\ncommitter GitHub <noreply@github.com> 1565417601 +0200\n\nRollup merge of #63394 - jackh726:issue-36804, r=jonas-schievink\n\nAdd test for issue 36804\n\nI slightly reduced the repro that ICEs on nightly-2017-01-20.\n\nCloses #36804\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ed195baaa7d8753053c13a8bb932385becf64a6", "html_url": "https://github.com/rust-lang/rust/commit/5ed195baaa7d8753053c13a8bb932385becf64a6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ed195baaa7d8753053c13a8bb932385becf64a6/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6743ad6726fa4144ca4616f728533fc819430d9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/6743ad6726fa4144ca4616f728533fc819430d9d", "html_url": "https://github.com/rust-lang/rust/commit/6743ad6726fa4144ca4616f728533fc819430d9d"}, {"sha": "322a7d6387a875d9f751c1b332f84c181e57ac64", "url": "https://api.github.com/repos/rust-lang/rust/commits/322a7d6387a875d9f751c1b332f84c181e57ac64", "html_url": "https://github.com/rust-lang/rust/commit/322a7d6387a875d9f751c1b332f84c181e57ac64"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "36cb939bc48fbdb069d08c28b966c5fa67e50746", "filename": "src/test/ui/specialization/issue-36804.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/5ed195baaa7d8753053c13a8bb932385becf64a6/src%2Ftest%2Fui%2Fspecialization%2Fissue-36804.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ed195baaa7d8753053c13a8bb932385becf64a6/src%2Ftest%2Fui%2Fspecialization%2Fissue-36804.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspecialization%2Fissue-36804.rs?ref=5ed195baaa7d8753053c13a8bb932385becf64a6", "patch": "@@ -0,0 +1,31 @@\n+// check-pass\n+#![feature(specialization)]\n+\n+pub struct Cloned<I>(I);\n+\n+impl<'a, I, T: 'a> Iterator for Cloned<I>\n+where\n+    I: Iterator<Item = &'a T>,\n+    T: Clone,\n+{\n+    type Item = T;\n+\n+    fn next(&mut self) -> Option<T> {\n+        unimplemented!()\n+    }\n+}\n+\n+impl<'a, I, T: 'a> Iterator for Cloned<I>\n+where\n+    I: Iterator<Item = &'a T>,\n+    T: Copy,\n+{\n+    fn count(self) -> usize {\n+        unimplemented!()\n+    }\n+}\n+\n+fn main() {\n+    let a = [1,2,3,4];\n+    Cloned(a.iter()).count();\n+}"}]}