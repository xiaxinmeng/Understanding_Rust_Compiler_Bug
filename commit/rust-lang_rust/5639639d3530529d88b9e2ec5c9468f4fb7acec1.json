{"sha": "5639639d3530529d88b9e2ec5c9468f4fb7acec1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2Mzk2MzlkMzUzMDUyOWQ4OGI5ZTJlYzVjOTQ2OGY0ZmI3YWNlYzE=", "commit": {"author": {"name": "Lzu Tao", "email": "taolzu@gmail.com", "date": "2019-09-26T01:53:39Z"}, "committer": {"name": "Lzu Tao", "email": "taolzu@gmail.com", "date": "2019-09-26T01:53:39Z"}, "message": "Remove unused attribute in test", "tree": {"sha": "d985ab958297ca3dfebad9f14f1f35e07d30f52d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d985ab958297ca3dfebad9f14f1f35e07d30f52d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5639639d3530529d88b9e2ec5c9468f4fb7acec1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5639639d3530529d88b9e2ec5c9468f4fb7acec1", "html_url": "https://github.com/rust-lang/rust/commit/5639639d3530529d88b9e2ec5c9468f4fb7acec1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5639639d3530529d88b9e2ec5c9468f4fb7acec1/comments", "author": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tesuji", "id": 15225902, "node_id": "MDQ6VXNlcjE1MjI1OTAy", "avatar_url": "https://avatars.githubusercontent.com/u/15225902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tesuji", "html_url": "https://github.com/tesuji", "followers_url": "https://api.github.com/users/tesuji/followers", "following_url": "https://api.github.com/users/tesuji/following{/other_user}", "gists_url": "https://api.github.com/users/tesuji/gists{/gist_id}", "starred_url": "https://api.github.com/users/tesuji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tesuji/subscriptions", "organizations_url": "https://api.github.com/users/tesuji/orgs", "repos_url": "https://api.github.com/users/tesuji/repos", "events_url": "https://api.github.com/users/tesuji/events{/privacy}", "received_events_url": "https://api.github.com/users/tesuji/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "08ce6bc6d9532191e59a49786811a0735ea35f5a", "url": "https://api.github.com/repos/rust-lang/rust/commits/08ce6bc6d9532191e59a49786811a0735ea35f5a", "html_url": "https://github.com/rust-lang/rust/commit/08ce6bc6d9532191e59a49786811a0735ea35f5a"}], "stats": {"total": 56, "additions": 27, "deletions": 29}, "files": [{"sha": "9438abbe330d5253c8ce3410e70e936fef5fd366", "filename": "tests/ui/toplevel_ref_arg.fixed", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftoplevel_ref_arg.fixed?ref=5639639d3530529d88b9e2ec5c9468f4fb7acec1", "patch": "@@ -1,27 +1,26 @@\n // run-rustfix\n \n #![warn(clippy::toplevel_ref_arg)]\n-#![allow(unused)]\n \n fn main() {\n     // Closures should not warn\n     let y = |ref x| println!(\"{:?}\", x);\n     y(1u8);\n \n-    let x = &1;\n+    let _x = &1;\n \n-    let y: &(&_, u8) = &(&1, 2);\n+    let _y: &(&_, u8) = &(&1, 2);\n \n-    let z = &(1 + 2);\n+    let _z = &(1 + 2);\n \n-    let z = &mut (1 + 2);\n+    let _z = &mut (1 + 2);\n \n     let (ref x, _) = (1, 2); // ok, not top level\n     println!(\"The answer is {}.\", x);\n \n-    let x = &vec![1, 2, 3];\n+    let _x = &vec![1, 2, 3];\n \n     // Make sure that allowing the lint works\n     #[allow(clippy::toplevel_ref_arg)]\n-    let ref mut x = 1_234_543;\n+    let ref mut _x = 1_234_543;\n }"}, {"sha": "ee630f12a601847ab0c78c014ca4c861ef6571f4", "filename": "tests/ui/toplevel_ref_arg.rs", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftoplevel_ref_arg.rs?ref=5639639d3530529d88b9e2ec5c9468f4fb7acec1", "patch": "@@ -1,27 +1,26 @@\n // run-rustfix\n \n #![warn(clippy::toplevel_ref_arg)]\n-#![allow(unused)]\n \n fn main() {\n     // Closures should not warn\n     let y = |ref x| println!(\"{:?}\", x);\n     y(1u8);\n \n-    let ref x = 1;\n+    let ref _x = 1;\n \n-    let ref y: (&_, u8) = (&1, 2);\n+    let ref _y: (&_, u8) = (&1, 2);\n \n-    let ref z = 1 + 2;\n+    let ref _z = 1 + 2;\n \n-    let ref mut z = 1 + 2;\n+    let ref mut _z = 1 + 2;\n \n     let (ref x, _) = (1, 2); // ok, not top level\n     println!(\"The answer is {}.\", x);\n \n-    let ref x = vec![1, 2, 3];\n+    let ref _x = vec![1, 2, 3];\n \n     // Make sure that allowing the lint works\n     #[allow(clippy::toplevel_ref_arg)]\n-    let ref mut x = 1_234_543;\n+    let ref mut _x = 1_234_543;\n }"}, {"sha": "19d69496709be158fc260cceb39ca02b4f21bcb4", "filename": "tests/ui/toplevel_ref_arg.stderr", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5639639d3530529d88b9e2ec5c9468f4fb7acec1/tests%2Fui%2Ftoplevel_ref_arg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftoplevel_ref_arg.stderr?ref=5639639d3530529d88b9e2ec5c9468f4fb7acec1", "patch": "@@ -1,34 +1,34 @@\n error: `ref` on an entire `let` pattern is discouraged, take a reference with `&` instead\n-  --> $DIR/toplevel_ref_arg.rs:11:9\n+  --> $DIR/toplevel_ref_arg.rs:10:9\n    |\n-LL |     let ref x = 1;\n-   |     ----^^^^^----- help: try: `let x = &1;`\n+LL |     let ref _x = 1;\n+   |     ----^^^^^^----- help: try: `let _x = &1;`\n    |\n    = note: `-D clippy::toplevel-ref-arg` implied by `-D warnings`\n \n error: `ref` on an entire `let` pattern is discouraged, take a reference with `&` instead\n-  --> $DIR/toplevel_ref_arg.rs:13:9\n+  --> $DIR/toplevel_ref_arg.rs:12:9\n    |\n-LL |     let ref y: (&_, u8) = (&1, 2);\n-   |     ----^^^^^--------------------- help: try: `let y: &(&_, u8) = &(&1, 2);`\n+LL |     let ref _y: (&_, u8) = (&1, 2);\n+   |     ----^^^^^^--------------------- help: try: `let _y: &(&_, u8) = &(&1, 2);`\n \n error: `ref` on an entire `let` pattern is discouraged, take a reference with `&` instead\n-  --> $DIR/toplevel_ref_arg.rs:15:9\n+  --> $DIR/toplevel_ref_arg.rs:14:9\n    |\n-LL |     let ref z = 1 + 2;\n-   |     ----^^^^^--------- help: try: `let z = &(1 + 2);`\n+LL |     let ref _z = 1 + 2;\n+   |     ----^^^^^^--------- help: try: `let _z = &(1 + 2);`\n \n error: `ref` on an entire `let` pattern is discouraged, take a reference with `&` instead\n-  --> $DIR/toplevel_ref_arg.rs:17:9\n+  --> $DIR/toplevel_ref_arg.rs:16:9\n    |\n-LL |     let ref mut z = 1 + 2;\n-   |     ----^^^^^^^^^--------- help: try: `let z = &mut (1 + 2);`\n+LL |     let ref mut _z = 1 + 2;\n+   |     ----^^^^^^^^^^--------- help: try: `let _z = &mut (1 + 2);`\n \n error: `ref` on an entire `let` pattern is discouraged, take a reference with `&` instead\n-  --> $DIR/toplevel_ref_arg.rs:22:9\n+  --> $DIR/toplevel_ref_arg.rs:21:9\n    |\n-LL |     let ref x = vec![1, 2, 3];\n-   |     ----^^^^^----------------- help: try: `let x = &vec![1, 2, 3];`\n+LL |     let ref _x = vec![1, 2, 3];\n+   |     ----^^^^^^----------------- help: try: `let _x = &vec![1, 2, 3];`\n \n error: aborting due to 5 previous errors\n "}]}