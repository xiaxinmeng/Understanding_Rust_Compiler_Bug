{"sha": "4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "node_id": "C_kwDOAAsO6NoAKDRhZmYyYzVmZjg5ZTM3ODM1N2Q4ZmEwMGM0ZjQ2NWQ3OWIyNmRkZGI", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-02-24T06:32:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-24T06:32:43Z"}, "message": "Rollup merge of #108377 - clubby789:duplicate-diagnostic-ice, r=compiler-errors\n\nFix ICE in 'duplicate diagnostic item' diagnostic\n\nNot sure how to add this in a test; I found it by mistakenly running `cargo fix --lib -p std` rather than `x fix` at the root.", "tree": {"sha": "25f44e58d85465c789781ee9bba343c52db4d82a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/25f44e58d85465c789781ee9bba343c52db4d82a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj+FoLCRBK7hj4Ov3rIwAAwsAIAE7Z9VsjQRpDfgpiTJOSrGuI\nyRYSh77zu3803gu+DVBfItIXKNfE5OQvaVMpPHHeXQW/LHC371ty2QMXfa8VRi1s\nhARbHieCDDJvBdCsiKEQT5Whv1gWn54vjvHN3o5GN6XHGJDX0OqFk2YRQIeTjGmr\ndW1nuXhKq5ROAGuvBegaJ58OUYwU67UO8Qhe58tcIXdVazBWgAIGq9AAk46YO7Yy\nWHX/GsrB97cwEs/SPP94ulPxv9tOq+lFPmTc3J+YpTeBfbq/VzzmYnRjqm2rA090\nm2nZC2hPT8wSzz/ydpWtd74Ub2FSX7JmsxynU2zqvVeamuA/GbqI9OWvQzkA1Fc=\n=2BhI\n-----END PGP SIGNATURE-----\n", "payload": "tree 25f44e58d85465c789781ee9bba343c52db4d82a\nparent f94c3c9da19451a14202a7dcffe78e08d75fd9ce\nparent 4332a27c2d582d05157fca4b0de593d146e774c5\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1677220363 +0530\ncommitter GitHub <noreply@github.com> 1677220363 +0530\n\nRollup merge of #108377 - clubby789:duplicate-diagnostic-ice, r=compiler-errors\n\nFix ICE in 'duplicate diagnostic item' diagnostic\n\nNot sure how to add this in a test; I found it by mistakenly running `cargo fix --lib -p std` rather than `x fix` at the root.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "html_url": "https://github.com/rust-lang/rust/commit/4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f94c3c9da19451a14202a7dcffe78e08d75fd9ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/f94c3c9da19451a14202a7dcffe78e08d75fd9ce", "html_url": "https://github.com/rust-lang/rust/commit/f94c3c9da19451a14202a7dcffe78e08d75fd9ce"}, {"sha": "4332a27c2d582d05157fca4b0de593d146e774c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/4332a27c2d582d05157fca4b0de593d146e774c5", "html_url": "https://github.com/rust-lang/rust/commit/4332a27c2d582d05157fca4b0de593d146e774c5"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "8fe8472b21630c424d8331306041aac3a328bdc7", "filename": "compiler/rustc_passes/locales/en-US.ftl", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl?ref=4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "patch": "@@ -407,10 +407,10 @@ passes_duplicate_diagnostic_item =\n \n passes_duplicate_diagnostic_item_in_crate =\n     duplicate diagnostic item in crate `{$crate_name}`: `{$name}`.\n+    .note = the diagnostic item is first defined in crate `{$orig_crate_name}`.\n \n passes_diagnostic_item_first_defined =\n     the diagnostic item is first defined here\n-    .note = the diagnostic item is first defined in crate `{$orig_crate_name}`.\n \n passes_abi =\n     abi: {$abi}"}, {"sha": "47195c7e9d658f5bd790c6dddbd1d66834fdc21e", "filename": "tests/ui/tool-attributes/auxiliary/p1.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs?ref=4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "patch": "@@ -0,0 +1,3 @@\n+#![feature(rustc_attrs)]\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {}"}, {"sha": "47195c7e9d658f5bd790c6dddbd1d66834fdc21e", "filename": "tests/ui/tool-attributes/auxiliary/p2.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs?ref=4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "patch": "@@ -0,0 +1,3 @@\n+#![feature(rustc_attrs)]\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {}"}, {"sha": "39c2ca1cb860cb10b59aadc94fb9427f7e96d3d3", "filename": "tests/ui/tool-attributes/duplicate-diagnostic.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs?ref=4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "patch": "@@ -0,0 +1,13 @@\n+// aux-build: p1.rs\n+// aux-build: p2.rs\n+\n+// error-pattern: duplicate diagnostic item in crate `p2`\n+// error-pattern: note: the diagnostic item is first defined in crate `p1`\n+\n+#![feature(rustc_attrs)]\n+extern crate p1;\n+extern crate p2;\n+\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {} //~ ERROR duplicate diagnostic item found\n+fn main() {}"}, {"sha": "e315fdc7d84bc4ec1de913a492a994fb2df08b75", "filename": "tests/ui/tool-attributes/duplicate-diagnostic.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4aff2c5ff89e378357d8fa00c4f465d79b26dddb/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr?ref=4aff2c5ff89e378357d8fa00c4f465d79b26dddb", "patch": "@@ -0,0 +1,12 @@\n+error: duplicate diagnostic item in crate `p2`: `Foo`.\n+   |\n+   = note: the diagnostic item is first defined in crate `p1`.\n+\n+error: duplicate diagnostic item found: `Foo`.\n+  --> $DIR/duplicate-diagnostic.rs:12:1\n+   |\n+LL | pub struct Foo {}\n+   | ^^^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+"}]}