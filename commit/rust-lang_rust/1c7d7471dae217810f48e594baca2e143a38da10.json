{"sha": "1c7d7471dae217810f48e594baca2e143a38da10", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjN2Q3NDcxZGFlMjE3ODEwZjQ4ZTU5NGJhY2EyZTE0M2EzOGRhMTA=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-03-16T16:40:53Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-03-16T16:40:53Z"}, "message": "Don't duplicate `check_abi()`", "tree": {"sha": "4a7371502ae467ae4084ebad61fe9d769e6ba796", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a7371502ae467ae4084ebad61fe9d769e6ba796"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c7d7471dae217810f48e594baca2e143a38da10", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYFDflRUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLhSJgEA2FmHzBkYeehgv5U7h4bCs7Q8BQfD\nlWJ8jWn+HRK3n8cA/iXzbjsLTWDvl7J+9v60I2VF4pr46ooJdzGiIXNkaLUB\n=37eP\n-----END PGP SIGNATURE-----", "payload": "tree 4a7371502ae467ae4084ebad61fe9d769e6ba796\nparent 0788188c7b586289edb878f1f5b4e23700671978\nauthor hyd-dev <yd-huang@outlook.com> 1615912853 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1615912853 +0800\n\nDon't duplicate `check_abi()`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c7d7471dae217810f48e594baca2e143a38da10", "html_url": "https://github.com/rust-lang/rust/commit/1c7d7471dae217810f48e594baca2e143a38da10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c7d7471dae217810f48e594baca2e143a38da10/comments", "author": null, "committer": null, "parents": [{"sha": "0788188c7b586289edb878f1f5b4e23700671978", "url": "https://api.github.com/repos/rust-lang/rust/commits/0788188c7b586289edb878f1f5b4e23700671978", "html_url": "https://github.com/rust-lang/rust/commit/0788188c7b586289edb878f1f5b4e23700671978"}], "stats": {"total": 4, "additions": 1, "deletions": 3}, "files": [{"sha": "fe4766d87700a6872c7cd806d52b0ceedec9c1f6", "filename": "src/helpers.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1c7d7471dae217810f48e594baca2e143a38da10/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c7d7471dae217810f48e594baca2e143a38da10/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=1c7d7471dae217810f48e594baca2e143a38da10", "patch": "@@ -169,9 +169,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         let this = self.eval_context_mut();\n         let param_env = ty::ParamEnv::reveal_all(); // in Miri this is always the param_env we use... and this.param_env is private.\n         let callee_abi = f.ty(*this.tcx, param_env).fn_sig(*this.tcx).abi();\n-        if callee_abi != caller_abi {\n-            throw_ub_format!(\"calling a function with ABI {} using caller ABI {}\", callee_abi.name(), caller_abi.name())\n-        }\n+        check_abi(caller_abi, callee_abi)?;\n \n         // Push frame.\n         let mir = &*this.load_mir(f.def, None)?;"}]}