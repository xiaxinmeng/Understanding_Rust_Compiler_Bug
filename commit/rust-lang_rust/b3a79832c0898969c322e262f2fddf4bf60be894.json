{"sha": "b3a79832c0898969c322e262f2fddf4bf60be894", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzYTc5ODMyYzA4OTg5NjljMzIyZTI2MmYyZmRkZjRiZjYwYmU4OTQ=", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-07-01T09:24:45Z"}, "committer": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-07-01T09:24:45Z"}, "message": "Use revisions for cross-crate test", "tree": {"sha": "bb29f12cc158cd770ba69221b0c78202ab2ff42d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb29f12cc158cd770ba69221b0c78202ab2ff42d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3a79832c0898969c322e262f2fddf4bf60be894", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEjbeLZzPb62/vY3smZSV3NIU3bZIFAmDdiewACgkQZSV3NIU3\nbZKP4hAAiLmRNMxl/Hf/oZMngY4PNumgAi5kIKjSTJjCCSmGbE6LB0eT0XHzYCqv\nO8QaLH8kYw9P/GQZYp2sTKZP/ZKO6tz7eBc2NLNgdXXPlfvGGrCmA2sKa7Hqo4Jp\nzFWJQiXHWqXirqAZr4m0VTMzzEj6IaoRbj4s+CSPelsJiLrVVyxslt15fUMckGYj\nWiZn2dX5HXLt7dKtUB5JAbD0k4psPJbjZVlJ34ZljdG0C533TQf+Pv06KxQLdhrv\nKr7C6VaB6u85mmq6wQwkvr7R7nUABE+8W742NsKnwbUvd29oSRLF2g/EdbVziOmi\nsQf7bDZU8SS1XoDK7TdRM+RDGOMkfDb68dYp0vDvuvt2y6ayJVVjJYpSs1Kh1kuC\nW1eHUabpHEFgeJRiUUlrKJpg+GI6RT9cPCE5vFqEopPKjMjtXd8i9fkflLqUxyxo\nUMDMASmPcZlKUC2UA/Q6V5ZMRqdmy4myaJnjmxn7OvkkXXq7BF4uPxqYEGhJhgkd\nur50tOrshI/p0d8vcCoXEDssGmBVaN+Z8cbpxcrT7AUvI7FQc/HcuOxBluSYw1Hs\n+yLlqMQBp5HScnMPmrV0L+0ktXruWWtEpo8i3gaED74MecZHPEDJhziO+nPfjImP\nzSD4XHGuXP45EuGq6gP7DqjI2G82To6puhZE5dNyn21yZyWw/5I=\n=xRJD\n-----END PGP SIGNATURE-----", "payload": "tree bb29f12cc158cd770ba69221b0c78202ab2ff42d\nparent c424510746c3e890157e3c30ad7fcf2051b9f769\nauthor Deadbeef <ent3rm4n@gmail.com> 1625131485 +0800\ncommitter Deadbeef <ent3rm4n@gmail.com> 1625131485 +0800\n\nUse revisions for cross-crate test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3a79832c0898969c322e262f2fddf4bf60be894", "html_url": "https://github.com/rust-lang/rust/commit/b3a79832c0898969c322e262f2fddf4bf60be894", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3a79832c0898969c322e262f2fddf4bf60be894/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c424510746c3e890157e3c30ad7fcf2051b9f769", "url": "https://api.github.com/repos/rust-lang/rust/commits/c424510746c3e890157e3c30ad7fcf2051b9f769", "html_url": "https://github.com/rust-lang/rust/commit/c424510746c3e890157e3c30ad7fcf2051b9f769"}], "stats": {"total": 28, "additions": 6, "deletions": 22}, "files": [{"sha": "abd11d8b0e92338a42bc0ac5bd929125f9d4f38d", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate-feature-disabled.rs", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c424510746c3e890157e3c30ad7fcf2051b9f769/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate-feature-disabled.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c424510746c3e890157e3c30ad7fcf2051b9f769/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate-feature-disabled.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate-feature-disabled.rs?ref=c424510746c3e890157e3c30ad7fcf2051b9f769", "patch": "@@ -1,18 +0,0 @@\n-// aux-build: cross-crate.rs\n-extern crate cross_crate;\n-\n-use cross_crate::*;\n-\n-fn non_const_context() {\n-    NonConst.func();\n-    Const.func();\n-}\n-\n-const fn const_context() {\n-    NonConst.func();\n-    //~^ ERROR: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-    Const.func();\n-    //~^ ERROR: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-}\n-\n-fn main() {}"}, {"sha": "30baa38547580cdd35bc0991803c14f9aeef50e5", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.gated.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr?ref=b3a79832c0898969c322e262f2fddf4bf60be894", "patch": "@@ -1,5 +1,5 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate-feature-enabled.rs:15:5\n+  --> $DIR/cross-crate.rs:16:5\n    |\n LL |     NonConst.func();\n    |     ^^^^^^^^^^^^^^^", "previous_filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate-feature-enabled.stderr"}, {"sha": "c28ff638958419148dfa2ae1bd73b30a68b34871", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.rs", "status": "renamed", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs?ref=b3a79832c0898969c322e262f2fddf4bf60be894", "patch": "@@ -1,4 +1,5 @@\n-#![feature(const_trait_impl)]\n+// revisions: stock gated\n+#![cfg_attr(gated, feature(const_trait_impl))]\n #![allow(incomplete_features)]\n \n // aux-build: cross-crate.rs\n@@ -15,6 +16,7 @@ const fn const_context() {\n     NonConst.func();\n     //~^ ERROR: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n     Const.func();\n+    //[stock]~^ ERROR: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n }\n \n fn main() {}", "previous_filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate-feature-enabled.rs"}, {"sha": "e6a86f251ca3c31d2028c54617c184860c391e47", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.stock.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b3a79832c0898969c322e262f2fddf4bf60be894/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr?ref=b3a79832c0898969c322e262f2fddf4bf60be894", "patch": "@@ -1,11 +1,11 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate-feature-disabled.rs:12:5\n+  --> $DIR/cross-crate.rs:16:5\n    |\n LL |     NonConst.func();\n    |     ^^^^^^^^^^^^^^^\n \n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate-feature-disabled.rs:14:5\n+  --> $DIR/cross-crate.rs:18:5\n    |\n LL |     Const.func();\n    |     ^^^^^^^^^^^^", "previous_filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate-feature-disabled.stderr"}]}