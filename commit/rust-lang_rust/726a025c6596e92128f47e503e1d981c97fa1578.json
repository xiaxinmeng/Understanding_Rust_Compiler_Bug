{"sha": "726a025c6596e92128f47e503e1d981c97fa1578", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyNmEwMjVjNjU5NmU5MjEyOGY0N2U1MDNlMWQ5ODFjOTdmYTE1Nzg=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-02-24T19:10:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-24T19:10:18Z"}, "message": "Rollup merge of #69435 - anyska:cell-replace, r=Centril\n\nReplace uses of Cell::get + Cell::set with Cell::replace.", "tree": {"sha": "73601e2b434657366bb70210c706615fbca18e1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73601e2b434657366bb70210c706615fbca18e1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/726a025c6596e92128f47e503e1d981c97fa1578", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeVB+aCRBK7hj4Ov3rIwAAdHIIAJo9UgRDt9CjzbwbHmPY4ZrN\nEZ9QzFi31m6bFupM/FDA+auxtocKJ1dwg2+CqBLPiglPiVxK2cmsQEAhR7U7bPqB\nGNyBB8nnGyf0r1vQnMK6w6fZBAp4FdfjiAJV0nfZPf4me4vs2yD1jxPFGlwOk7s8\nEpThW8e9kIPGhAG8NYTB6D75i1CWqs2rwtLQv/7W/fdJd2zznjqqnM4OXn9BLWLx\nzoWSLrb8wp9uJsSwQ249Vg/E7gdIfK7xmW7K3QLl+Yt8jjydzoKJB20aDc0QsAE5\n+rYSZLejLe9ggwDdknKBxL5y6UKQuvYaHA3Vq87Guo4zN9ruIDsQyjxzdkARl9o=\n=9XF3\n-----END PGP SIGNATURE-----\n", "payload": "tree 73601e2b434657366bb70210c706615fbca18e1b\nparent eda4489121d13d7483161eb47a1aaabd08f356dc\nparent 0445574340f972ae892a6ef4589ba63756883a0a\nauthor Dylan DPC <dylan.dpc@gmail.com> 1582571418 +0100\ncommitter GitHub <noreply@github.com> 1582571418 +0100\n\nRollup merge of #69435 - anyska:cell-replace, r=Centril\n\nReplace uses of Cell::get + Cell::set with Cell::replace.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/726a025c6596e92128f47e503e1d981c97fa1578", "html_url": "https://github.com/rust-lang/rust/commit/726a025c6596e92128f47e503e1d981c97fa1578", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/726a025c6596e92128f47e503e1d981c97fa1578/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eda4489121d13d7483161eb47a1aaabd08f356dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/eda4489121d13d7483161eb47a1aaabd08f356dc", "html_url": "https://github.com/rust-lang/rust/commit/eda4489121d13d7483161eb47a1aaabd08f356dc"}, {"sha": "0445574340f972ae892a6ef4589ba63756883a0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/0445574340f972ae892a6ef4589ba63756883a0a", "html_url": "https://github.com/rust-lang/rust/commit/0445574340f972ae892a6ef4589ba63756883a0a"}], "stats": {"total": 15, "additions": 5, "deletions": 10}, "files": [{"sha": "0726bf30d3b3485c18c6e3e50e5510606c43d578", "filename": "src/librustc/ty/print/pretty.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/726a025c6596e92128f47e503e1d981c97fa1578/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/726a025c6596e92128f47e503e1d981c97fa1578/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs?ref=726a025c6596e92128f47e503e1d981c97fa1578", "patch": "@@ -64,8 +64,7 @@ thread_local! {\n /// calling the same query.\n pub fn with_no_queries<F: FnOnce() -> R, R>(f: F) -> R {\n     NO_QUERIES.with(|no_queries| {\n-        let old = no_queries.get();\n-        no_queries.set(true);\n+        let old = no_queries.replace(true);\n         let result = f();\n         no_queries.set(old);\n         result\n@@ -78,8 +77,7 @@ pub fn with_no_queries<F: FnOnce() -> R, R>(f: F) -> R {\n /// so this variable disables that check.\n pub fn with_forced_impl_filename_line<F: FnOnce() -> R, R>(f: F) -> R {\n     FORCE_IMPL_FILENAME_LINE.with(|force| {\n-        let old = force.get();\n-        force.set(true);\n+        let old = force.replace(true);\n         let result = f();\n         force.set(old);\n         result\n@@ -89,8 +87,7 @@ pub fn with_forced_impl_filename_line<F: FnOnce() -> R, R>(f: F) -> R {\n /// Adds the `crate::` prefix to paths where appropriate.\n pub fn with_crate_prefix<F: FnOnce() -> R, R>(f: F) -> R {\n     SHOULD_PREFIX_WITH_CRATE.with(|flag| {\n-        let old = flag.get();\n-        flag.set(true);\n+        let old = flag.replace(true);\n         let result = f();\n         flag.set(old);\n         result"}, {"sha": "65f060deb465d2cf14c44910da49546a4b61646b", "filename": "src/librustc_infer/infer/mod.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/726a025c6596e92128f47e503e1d981c97fa1578/src%2Flibrustc_infer%2Finfer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/726a025c6596e92128f47e503e1d981c97fa1578/src%2Flibrustc_infer%2Finfer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_infer%2Finfer%2Fmod.rs?ref=726a025c6596e92128f47e503e1d981c97fa1578", "patch": "@@ -730,8 +730,7 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n     where\n         F: FnOnce(&Self) -> R,\n     {\n-        let flag = self.in_snapshot.get();\n-        self.in_snapshot.set(false);\n+        let flag = self.in_snapshot.replace(false);\n         let result = func(self);\n         self.in_snapshot.set(flag);\n         result\n@@ -740,8 +739,7 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n     fn start_snapshot(&self) -> CombinedSnapshot<'a, 'tcx> {\n         debug!(\"start_snapshot()\");\n \n-        let in_snapshot = self.in_snapshot.get();\n-        self.in_snapshot.set(true);\n+        let in_snapshot = self.in_snapshot.replace(true);\n \n         let mut inner = self.inner.borrow_mut();\n         CombinedSnapshot {"}]}