{"sha": "c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3YTZhNjZlNGI4YzI2ZDI1ZjNlYjI4MDEwZTcxYmE2MWFhMDg2YjU=", "commit": {"author": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2012-07-23T23:40:25Z"}, "committer": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2012-07-24T00:09:17Z"}, "message": "Get rid of task::future_task", "tree": {"sha": "70f7f492c8ecfdff70ae3dcc0aab0b286b076359", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70f7f492c8ecfdff70ae3dcc0aab0b286b076359"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5", "html_url": "https://github.com/rust-lang/rust/commit/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5/comments", "author": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6efb24f3fa47462a3febd052e5ccc21e2c3ec63", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6efb24f3fa47462a3febd052e5ccc21e2c3ec63", "html_url": "https://github.com/rust-lang/rust/commit/e6efb24f3fa47462a3febd052e5ccc21e2c3ec63"}], "stats": {"total": 46, "additions": 0, "deletions": 46}, "files": [{"sha": "7c3037606d97d02690de04c1adb7b8737f2be4ec", "filename": "src/libcore/task.rs", "status": "modified", "additions": 0, "deletions": 46, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5/src%2Flibcore%2Ftask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5/src%2Flibcore%2Ftask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask.rs?ref=c7a6a66e4b8c26d25f3eb28010e71ba61aa086b5", "patch": "@@ -45,7 +45,6 @@ export add_wrapper;\n export run;\n \n export future_result;\n-export future_task;\n export unsupervise;\n export run_listener;\n export run_with;\n@@ -464,30 +463,6 @@ fn future_result(builder: builder) -> future::future<task_result> {\n     }\n }\n \n-fn future_task(builder: builder) -> future::future<task> {\n-    //! Get a future representing the handle to the new task\n-\n-    import future::future_pipe;\n-\n-    let (po, ch) = future_pipe::init();\n-\n-    let ch = ~mut some(ch);\n-\n-    do add_wrapper(builder) |body, move ch| {\n-        let ch = { let mut t = none;\n-                  t <-> *ch;\n-                  ~mut t};\n-        fn~(move ch) {\n-            let mut po = none;\n-            po <-> *ch;\n-            future_pipe::server::completed(option::unwrap(po),\n-                                           get_task());\n-            body();\n-        }\n-    }\n-    future::from_port(po)\n-}\n-\n fn unsupervise(builder: builder) {\n     //! Configures the new task to not propagate failure to its parent\n \n@@ -1476,16 +1451,6 @@ fn test_future_result() {\n     assert future::get(option::unwrap(result)) == failure;\n }\n \n-#[test]\n-fn test_future_task() {\n-    let po = comm::port();\n-    let ch = comm::chan(po);\n-    let buildr = builder();\n-    let task1 = future_task(buildr);\n-    do run(buildr) { comm::send(ch, get_task()) }\n-    assert future::get(task1) == comm::recv(po);\n-}\n-\n #[test]\n fn test_spawn_listiner_bidi() {\n     let po = comm::port();\n@@ -1700,17 +1665,6 @@ fn test_avoid_copying_the_body_try() {\n     }\n }\n \n-#[test]\n-fn test_avoid_copying_the_body_future_task() {\n-    do avoid_copying_the_body |f| {\n-        let buildr = builder();\n-        future_task(buildr);\n-        do run(buildr) {\n-            f();\n-        }\n-    }\n-}\n-\n #[test]\n fn test_avoid_copying_the_body_unlinked() {\n     do avoid_copying_the_body |f| {"}]}