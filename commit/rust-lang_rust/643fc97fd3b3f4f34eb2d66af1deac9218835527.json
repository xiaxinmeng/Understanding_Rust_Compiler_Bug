{"sha": "643fc97fd3b3f4f34eb2d66af1deac9218835527", "node_id": "C_kwDOAAsO6NoAKDY0M2ZjOTdmZDNiM2Y0ZjM0ZWIyZDY2YWYxZGVhYzkyMTg4MzU1Mjc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-02T05:52:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-02T05:52:15Z"}, "message": "Rollup merge of #107576 - P1n3appl3:master, r=tmandry\n\nAdd proc-macro boilerplate to crt-static test\n\nI was seeing this failure when running ui tests with with a `-Cpanic=abort` stdlib targeting fuchsia:\n\n```\n---- [ui] tests/ui/proc-macro/crt-static.rs stdout ----\nnormalized stderr:\nwarning: building proc macro crate with `panic=abort` may crash the compiler should the proc-macro panic\n\nwarning: 1 warning emitted\n\nThe actual stderr differed from the expected stderr.\n```\n\n`force-host` was enough to stop it from running/failing, not sure if I should also add `needs-unwind`?", "tree": {"sha": "7f043e0e0aee64c1f2d9a2f203c57518ba5e403e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f043e0e0aee64c1f2d9a2f203c57518ba5e403e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/643fc97fd3b3f4f34eb2d66af1deac9218835527", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj20+PCRBK7hj4Ov3rIwAAfIoIAFkWxoIbiQl6t7dtd8qBd33e\nbHTIC2kI0iuuzGYjPLDiVcjxeZtMMSLoh1/TJCsDfMV2RRCP6slOCJ2gNHLhHEca\nvmFul+Zi2NlBIb0Ig6nARRJHGP7dgbi2VK7QDK8Emb2UX/+laYOe1HzV6ETZdNNB\ne6IY+kYV/88pSExOWlhStAeoN8/CY6zKKvzBku3xXnen3rrNPo1VCqlO3pr6oJY+\npqJKi4qoigbd+EcYcDCRP9NzYu5e1b3/9D44AQeeOeSxWzRdaeGIpbWdiP7nwu1/\nkSSJpf53iQNK+wbDWRwNodV3m7w6Lry3j3MOaWW6Oopokpn1zJgLwakxFV0Fsjs=\n=lIx2\n-----END PGP SIGNATURE-----\n", "payload": "tree 7f043e0e0aee64c1f2d9a2f203c57518ba5e403e\nparent 75ea3a9948b77c3ef2471545b9c818ab1a724dcd\nparent fb3857808253c3513ffff1f2c2b033081ae24cf5\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1675317135 +0100\ncommitter GitHub <noreply@github.com> 1675317135 +0100\n\nRollup merge of #107576 - P1n3appl3:master, r=tmandry\n\nAdd proc-macro boilerplate to crt-static test\n\nI was seeing this failure when running ui tests with with a `-Cpanic=abort` stdlib targeting fuchsia:\n\n```\n---- [ui] tests/ui/proc-macro/crt-static.rs stdout ----\nnormalized stderr:\nwarning: building proc macro crate with `panic=abort` may crash the compiler should the proc-macro panic\n\nwarning: 1 warning emitted\n\nThe actual stderr differed from the expected stderr.\n```\n\n`force-host` was enough to stop it from running/failing, not sure if I should also add `needs-unwind`?\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/643fc97fd3b3f4f34eb2d66af1deac9218835527", "html_url": "https://github.com/rust-lang/rust/commit/643fc97fd3b3f4f34eb2d66af1deac9218835527", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/643fc97fd3b3f4f34eb2d66af1deac9218835527/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75ea3a9948b77c3ef2471545b9c818ab1a724dcd", "url": "https://api.github.com/repos/rust-lang/rust/commits/75ea3a9948b77c3ef2471545b9c818ab1a724dcd", "html_url": "https://github.com/rust-lang/rust/commit/75ea3a9948b77c3ef2471545b9c818ab1a724dcd"}, {"sha": "fb3857808253c3513ffff1f2c2b033081ae24cf5", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb3857808253c3513ffff1f2c2b033081ae24cf5", "html_url": "https://github.com/rust-lang/rust/commit/fb3857808253c3513ffff1f2c2b033081ae24cf5"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "020128fa214460f0d2f6f574eb422d5314c7c5d1", "filename": "tests/ui/proc-macro/crt-static.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/643fc97fd3b3f4f34eb2d66af1deac9218835527/tests%2Fui%2Fproc-macro%2Fcrt-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/643fc97fd3b3f4f34eb2d66af1deac9218835527/tests%2Fui%2Fproc-macro%2Fcrt-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fproc-macro%2Fcrt-static.rs?ref=643fc97fd3b3f4f34eb2d66af1deac9218835527", "patch": "@@ -5,6 +5,9 @@\n // ignore-wasm32\n // ignore-sgx no support for proc-macro crate type\n // build-pass\n+// force-host\n+// no-prefer-dynamic\n+\n #![crate_type = \"proc-macro\"]\n \n // FIXME: This don't work when crate-type is specified by attribute"}]}