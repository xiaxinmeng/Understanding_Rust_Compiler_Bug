{"sha": "9384de77bbc8edf5e7c7c1a84e79cd29588cdee9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzODRkZTc3YmJjOGVkZjVlN2M3YzFhODRlNzljZDI5NTg4Y2RlZTk=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-12-14T16:12:59Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-12-16T09:23:28Z"}, "message": "debuginfo: Add comment on is_local_to_unit parameter.", "tree": {"sha": "c80da98dfea2d6cf4c19f004ba6d516da7237779", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c80da98dfea2d6cf4c19f004ba6d516da7237779"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9", "html_url": "https://github.com/rust-lang/rust/commit/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d35fff89944f583f4f96b384e3f5d075503e0d36", "url": "https://api.github.com/repos/rust-lang/rust/commits/d35fff89944f583f4f96b384e3f5d075503e0d36", "html_url": "https://github.com/rust-lang/rust/commit/d35fff89944f583f4f96b384e3f5d075503e0d36"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "0783d5b418f2166d8953629e2050ea2b0773527c", "filename": "src/librustc/middle/trans/debuginfo.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9384de77bbc8edf5e7c7c1a84e79cd29588cdee9/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs?ref=9384de77bbc8edf5e7c7c1a84e79cd29588cdee9", "patch": "@@ -690,6 +690,13 @@ pub fn create_function_debug_context(cx: &mut CrateContext,\n \n     // Clang sets this parameter to the opening brace of the function's block, so let's do this too.\n     let scope_line = span_start(cx, top_level_block.span).line;\n+\n+    // The is_local_to_unit flag indicates whether a function is local to the current compilation\n+    // unit (i.e. if it is *static* in the C-sense). The *reachable* set should provide a good\n+    // approximation of this, as it contains everything that might leak out of the current crate\n+    // (by being externally visible or by being inlined into something externally visible). It might\n+    // better to use the `exported_items` set from `driver::CrateAnalysis` in the future, but (atm)\n+    // this set is not available in the translation pass.\n     let is_local_to_unit = !cx.reachable.contains(&fn_ast_id);\n \n     let fn_metadata = function_name.with_c_str(|function_name| {"}]}