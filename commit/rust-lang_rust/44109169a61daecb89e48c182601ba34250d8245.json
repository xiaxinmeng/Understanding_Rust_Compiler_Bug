{"sha": "44109169a61daecb89e48c182601ba34250d8245", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0MTA5MTY5YTYxZGFlY2I4OWU0OGMxODI2MDFiYTM0MjUwZDgyNDU=", "commit": {"author": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2019-06-19T13:25:31Z"}, "committer": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2019-06-20T10:47:25Z"}, "message": "replace NodeId with HirId in traits::ObligationCauseCode", "tree": {"sha": "4f8b5d05781e8a4af0f13bbdcbfe7553709cd5ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f8b5d05781e8a4af0f13bbdcbfe7553709cd5ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/44109169a61daecb89e48c182601ba34250d8245", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/44109169a61daecb89e48c182601ba34250d8245", "html_url": "https://github.com/rust-lang/rust/commit/44109169a61daecb89e48c182601ba34250d8245", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/44109169a61daecb89e48c182601ba34250d8245/comments", "author": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4fb77a0398d0339f35f1b18595b375428babd431", "url": "https://api.github.com/repos/rust-lang/rust/commits/4fb77a0398d0339f35f1b18595b375428babd431", "html_url": "https://github.com/rust-lang/rust/commit/4fb77a0398d0339f35f1b18595b375428babd431"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "b433098c1b2653143e294da1ff155165f9554e31", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=44109169a61daecb89e48c182601ba34250d8245", "patch": "@@ -937,9 +937,9 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n         code: &ObligationCauseCode<'tcx>,\n         err: &mut DiagnosticBuilder<'tcx>,\n     ) {\n-        if let &ObligationCauseCode::VariableType(node_id) = code {\n-            let parent_node = self.tcx.hir().get_parent_node(node_id);\n-            if let Some(Node::Local(ref local)) = self.tcx.hir().find(parent_node) {\n+        if let &ObligationCauseCode::VariableType(hir_id) = code {\n+            let parent_node = self.tcx.hir().get_parent_node_by_hir_id(hir_id);\n+            if let Some(Node::Local(ref local)) = self.tcx.hir().find_by_hir_id(parent_node) {\n                 if let Some(ref expr) = local.init {\n                     if let hir::ExprKind::Index(_, _) = expr.node {\n                         if let Ok(snippet) = self.tcx.sess.source_map().span_to_snippet(expr.span) {"}, {"sha": "8d17df1e61055ab3183412856a6a687e36b73985", "filename": "src/librustc/traits/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc%2Ftraits%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc%2Ftraits%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fmod.rs?ref=44109169a61daecb89e48c182601ba34250d8245", "patch": "@@ -188,7 +188,7 @@ pub enum ObligationCauseCode<'tcx> {\n     /// S { ... } must be Sized\n     StructInitializerSized,\n     /// Type of each variable must be Sized\n-    VariableType(ast::NodeId),\n+    VariableType(hir::HirId),\n     /// Argument type must be Sized\n     SizedArgumentType,\n     /// Return type must be Sized"}, {"sha": "0fee2f063b8f4a3a1550b038e3fabee30ea7d1cf", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/44109169a61daecb89e48c182601ba34250d8245/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=44109169a61daecb89e48c182601ba34250d8245", "patch": "@@ -993,10 +993,9 @@ impl<'a, 'tcx> Visitor<'tcx> for GatherLocalsVisitor<'a, 'tcx> {\n         if let PatKind::Binding(_, _, ident, _) = p.node {\n             let var_ty = self.assign(p.span, p.hir_id, None);\n \n-            let node_id = self.fcx.tcx.hir().hir_to_node_id(p.hir_id);\n             if !self.fcx.tcx.features().unsized_locals {\n                 self.fcx.require_type_is_sized(var_ty, p.span,\n-                                               traits::VariableType(node_id));\n+                                               traits::VariableType(p.hir_id));\n             }\n \n             debug!(\"Pattern binding {} is assigned to {} with type {:?}\","}]}