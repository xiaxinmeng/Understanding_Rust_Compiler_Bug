{"sha": "89c67a87bc84be74632e0099584223b537a6abac", "node_id": "C_kwDOAAsO6NoAKDg5YzY3YTg3YmM4NGJlNzQ2MzJlMDA5OTU4NDIyM2I1MzdhNmFiYWM", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-04-17T17:41:24Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-04-17T17:41:28Z"}, "message": "Remove option to select regalloc algorithm\n\nThe main branch of Cranelift has switched to a new register allocator.\nThis register allocator doesn't have any alternative regalloc algorithms\nunlike the old register allocator.", "tree": {"sha": "b591e14a877bbb5eb9fb9c284063906a5b726b3d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b591e14a877bbb5eb9fb9c284063906a5b726b3d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89c67a87bc84be74632e0099584223b537a6abac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89c67a87bc84be74632e0099584223b537a6abac", "html_url": "https://github.com/rust-lang/rust/commit/89c67a87bc84be74632e0099584223b537a6abac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89c67a87bc84be74632e0099584223b537a6abac/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83d470d91c15d0cb5890705291e6ee9e5be8a842", "url": "https://api.github.com/repos/rust-lang/rust/commits/83d470d91c15d0cb5890705291e6ee9e5be8a842", "html_url": "https://github.com/rust-lang/rust/commit/83d470d91c15d0cb5890705291e6ee9e5be8a842"}], "stats": {"total": 11, "additions": 0, "deletions": 11}, "files": [{"sha": "e59a0cb0a23237bfe0b4fd0164909db4d8a98e49", "filename": "src/config.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/89c67a87bc84be74632e0099584223b537a6abac/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89c67a87bc84be74632e0099584223b537a6abac/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=89c67a87bc84be74632e0099584223b537a6abac", "patch": "@@ -48,12 +48,6 @@ pub struct BackendConfig {\n     /// Can be set using `-Cllvm-args=display_cg_time=...`.\n     pub display_cg_time: bool,\n \n-    /// The register allocator to use.\n-    ///\n-    /// Defaults to the value of `CG_CLIF_REGALLOC` or `backtracking` otherwise. Can be set using\n-    /// `-Cllvm-args=regalloc=...`.\n-    pub regalloc: String,\n-\n     /// Enable the Cranelift ir verifier for all compilation passes. If not set it will only run\n     /// once before passing the clif ir to Cranelift for compilation.\n     ///\n@@ -80,8 +74,6 @@ impl Default for BackendConfig {\n                 args.split(' ').map(|arg| arg.to_string()).collect()\n             },\n             display_cg_time: bool_env_var(\"CG_CLIF_DISPLAY_CG_TIME\"),\n-            regalloc: std::env::var(\"CG_CLIF_REGALLOC\")\n-                .unwrap_or_else(|_| \"backtracking\".to_string()),\n             enable_verifier: cfg!(debug_assertions) || bool_env_var(\"CG_CLIF_ENABLE_VERIFIER\"),\n             disable_incr_cache: bool_env_var(\"CG_CLIF_DISABLE_INCR_CACHE\"),\n         }\n@@ -101,7 +93,6 @@ impl BackendConfig {\n                 match name {\n                     \"mode\" => config.codegen_mode = value.parse()?,\n                     \"display_cg_time\" => config.display_cg_time = parse_bool(name, value)?,\n-                    \"regalloc\" => config.regalloc = value.to_string(),\n                     \"enable_verifier\" => config.enable_verifier = parse_bool(name, value)?,\n                     \"disable_incr_cache\" => config.disable_incr_cache = parse_bool(name, value)?,\n                     _ => return Err(format!(\"Unknown option `{}`\", name)),"}, {"sha": "9d2e12f98984ae366b37472015543a0adcee4559", "filename": "src/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/89c67a87bc84be74632e0099584223b537a6abac/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89c67a87bc84be74632e0099584223b537a6abac/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=89c67a87bc84be74632e0099584223b537a6abac", "patch": "@@ -256,8 +256,6 @@ fn build_isa(sess: &Session, backend_config: &BackendConfig) -> Box<dyn isa::Tar\n \n     flags_builder.set(\"enable_llvm_abi_extensions\", \"true\").unwrap();\n \n-    flags_builder.set(\"regalloc\", &backend_config.regalloc).unwrap();\n-\n     use rustc_session::config::OptLevel;\n     match sess.opts.optimize {\n         OptLevel::No => {"}]}