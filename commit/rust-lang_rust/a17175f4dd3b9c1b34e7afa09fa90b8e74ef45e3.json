{"sha": "a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExNzE3NWY0ZGQzYjljMWIzNGU3YWZhMDlmYTkwYjhlNzRlZjQ1ZTM=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-09-26T21:29:37Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-09-26T21:34:32Z"}, "message": "Test more attributes in test issue-75930-derive-cfg.rs\n\nSplit out from #76130\n\nThis tests our handling of combining derives, derive helper\nattributes, attribute macros, and `cfg`/`cfg_attr`", "tree": {"sha": "b9183be78d393bb0374134cfe65e2f2dab1ec0db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9183be78d393bb0374134cfe65e2f2dab1ec0db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl9vs/IACgkQtAh+UQ6Y\nsWSG4A//TfgIOXKdl+2xluFDnRJqLUX4D4XLpwkcqFsSyo2D2uVPeVTU7Tx+WS/m\nNwlDWx9AEqsGPXgENCcNfp36YlniU3bDLw6KocjD1c75xaPlkXD7iq8/v5NdK5XU\n4BS4q+OgcE3NP1r/Kqz4jSZHRdkNclAELh4vbJbWHLeOhfojxWS40T5doVEbIh/S\neAUL2L/TEYdiQnfWYWiS64qTensWhNZLZ+AxGZFww4+os/WGga8rK9Z2zQxJjVLS\nkmHj5LWMEZpMFYhnGi8wOPO9TlF/Cy9dQPWaJHB5RuYXsNjQlJ8Ym7+7cqTwT7kg\nu9hRhUKIUR9begVU6QoVAKBhmri5prvKeYDnYIlt7CsT5DWnlm+6fSSu9tbw/lEC\nyhJ+H1Mum4sG4CUJeqWH2VrzfKMh1wIS0/P0rBnK5dk5rusg3swBcnZds9vpb8wy\nHEfsKFOVSDPS/okhM5EsEAO3RBQ2NSPiNhn6ekJbgZsSsTKvDCWAXzoMxFp93JyY\nSIRx5nlVfT/QROhGQo3KUkvtzDEkOAPZ8Thz6h+xlqF8TIef6dQ0L2e3t9j9jZcO\ng1BSQRiHOnZShnmMGWBa8cr9sKR9gXqve9bnDbaycfpnDjtbZN5QiDzY/Gi2GSAK\nmiDtcwQRMu/ZinlK0lrk3VrXtP2EMhkTyy5A7ucH+QqEhiXvp80=\n=k832\n-----END PGP SIGNATURE-----", "payload": "tree b9183be78d393bb0374134cfe65e2f2dab1ec0db\nparent e37c99fa1ca2341d652a1b1859ea9aa2ae993e1e\nauthor Aaron Hill <aa1ronham@gmail.com> 1601155777 -0400\ncommitter Aaron Hill <aa1ronham@gmail.com> 1601156072 -0400\n\nTest more attributes in test issue-75930-derive-cfg.rs\n\nSplit out from #76130\n\nThis tests our handling of combining derives, derive helper\nattributes, attribute macros, and `cfg`/`cfg_attr`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "html_url": "https://github.com/rust-lang/rust/commit/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e37c99fa1ca2341d652a1b1859ea9aa2ae993e1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e37c99fa1ca2341d652a1b1859ea9aa2ae993e1e", "html_url": "https://github.com/rust-lang/rust/commit/e37c99fa1ca2341d652a1b1859ea9aa2ae993e1e"}], "stats": {"total": 1658, "additions": 1652, "deletions": 6}, "files": [{"sha": "a051d23bac0ae8935a4bb35dbe87f2fa4a10b173", "filename": "src/test/ui/proc-macro/issue-75930-derive-cfg.rs", "status": "modified", "additions": 39, "deletions": 3, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.rs?ref=a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "patch": "@@ -1,29 +1,65 @@\n // check-pass\n-// compile-flags: -Z span-debug\n+// compile-flags: -Z span-debug --error-format human\n // aux-build:test-macros.rs\n \n // Regression test for issue #75930\n // Tests that we cfg-strip all targets before invoking\n // a derive macro\n+// We need '--error-format human' to stop compiletest from\n+// trying to interpret proc-macro output as JSON messages\n+// (a pretty-printed struct may cause a line to start with '{' )\n+// FIXME: We currently lose spans here (see issue #43081)\n \n #[macro_use]\n extern crate test_macros;\n \n+#[print_helper(a)]\n+#[cfg_attr(not(FALSE), allow(dead_code))]\n+#[print_attr]\n #[derive(Print)]\n+#[print_helper(b)]\n struct Foo<#[cfg(FALSE)] A, B> {\n     #[cfg(FALSE)] first: String,\n-    second: bool,\n+    #[cfg_attr(FALSE, deny(warnings))] second: bool,\n     third: [u8; {\n         #[cfg(FALSE)] struct Bar;\n         #[cfg(not(FALSE))] struct Inner;\n         #[cfg(FALSE)] let a = 25;\n         match true {\n             #[cfg(FALSE)] true => {},\n-            false => {},\n+            #[cfg_attr(not(FALSE), allow(warnings))] false => {},\n             _ => {}\n         };\n+\n+        #[print_helper(should_be_removed)]\n+        fn removed_fn() {\n+            #![cfg(FALSE)]\n+        }\n+\n+        #[print_helper(c)] #[cfg(not(FALSE))] fn kept_fn() {\n+            #![cfg(not(FALSE))]\n+            let my_val = true;\n+        }\n+\n+        enum TupleEnum {\n+            Foo(\n+                #[cfg(FALSE)] u8,\n+                #[cfg(FALSE)] bool,\n+                #[cfg(not(FALSE))] i32,\n+                #[cfg(FALSE)] String, u8\n+            )\n+        }\n+\n+        struct TupleStruct(\n+            #[cfg(FALSE)] String,\n+            #[cfg(not(FALSE))] i32,\n+            #[cfg(FALSE)] bool,\n+            u8\n+        );\n+\n         0\n     }],\n+    #[print_helper(d)]\n     fourth: B\n }\n "}, {"sha": "f3daa56a49c454e5c4bc33daf8c3efa75b0c822c", "filename": "src/test/ui/proc-macro/issue-75930-derive-cfg.stdout", "status": "modified", "additions": 1613, "deletions": 3, "changes": 1616, "blob_url": "https://github.com/rust-lang/rust/blob/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fissue-75930-derive-cfg.stdout?ref=a17175f4dd3b9c1b34e7afa09fa90b8e74ef45e3", "patch": "@@ -1,13 +1,1288 @@\n-PRINT-DERIVE INPUT (DISPLAY): struct Foo < B >\n+PRINT-ATTR INPUT (DISPLAY): #[allow(dead_code)] #[derive(Print)] #[print_helper(b)] #[print_helper(a)]\n+struct Foo < #[cfg(FALSE)] A, B >\n+{\n+    #[cfg(FALSE)] first : String, #[cfg_attr(FALSE, deny(warnings))] second :\n+    bool, third :\n+    [u8 ;\n+     {\n+         #[cfg(FALSE)] struct Bar ; #[cfg(not(FALSE))] struct Inner ;\n+         #[cfg(FALSE)] let a = 25 ; match true\n+         {\n+             #[cfg(FALSE)] true => { },\n+             #[cfg_attr(not(FALSE), allow(warnings))] false => { }, _ => { }\n+         } ; #[print_helper(should_be_removed)] fn removed_fn()\n+         { # ! [cfg(FALSE)] } #[print_helper(c)] #[cfg(not(FALSE))] fn\n+         kept_fn() { # ! [cfg(not(FALSE))] let my_val = true ; } enum\n+         TupleEnum\n+         {\n+             Foo(#[cfg(FALSE)] u8, #[cfg(FALSE)] bool, #[cfg(not(FALSE))] i32,\n+                 #[cfg(FALSE)] String, u8)\n+         } struct\n+         TupleStruct(#[cfg(FALSE)] String, #[cfg(not(FALSE))] i32,\n+                     #[cfg(FALSE)] bool, u8) ; 0\n+     }], #[print_helper(d)] fourth : B\n+}\n+PRINT-ATTR INPUT (DEBUG): TokenStream [\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:17:24: 17:40 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"allow\",\n+                span: $DIR/issue-75930-derive-cfg.rs:17:24: 17:29 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"dead_code\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:17:30: 17:39 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:17:29: 17:40 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:17:24: 17:40 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:19:1: 19:17 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"derive\",\n+                span: $DIR/issue-75930-derive-cfg.rs:19:3: 19:9 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"Print\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:19:10: 19:15 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:19:9: 19:16 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:19:1: 19:17 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:20:1: 20:19 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"print_helper\",\n+                span: $DIR/issue-75930-derive-cfg.rs:20:3: 20:15 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"b\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:20:16: 20:17 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:20:15: 20:18 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:20:1: 20:19 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:16:1: 16:19 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"print_helper\",\n+                span: $DIR/issue-75930-derive-cfg.rs:16:3: 16:15 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"a\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:16:16: 16:17 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:16:15: 16:18 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:16:1: 16:19 (#0),\n+    },\n+    Ident {\n+        ident: \"struct\",\n+        span: $DIR/issue-75930-derive-cfg.rs:21:1: 21:7 (#0),\n+    },\n+    Ident {\n+        ident: \"Foo\",\n+        span: $DIR/issue-75930-derive-cfg.rs:21:8: 21:11 (#0),\n+    },\n+    Punct {\n+        ch: '<',\n+        spacing: Joint,\n+        span: $DIR/issue-75930-derive-cfg.rs:21:11: 21:12 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:21:12: 21:13 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"cfg\",\n+                span: $DIR/issue-75930-derive-cfg.rs:21:14: 21:17 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"FALSE\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:21:18: 21:23 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:21:17: 21:24 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:21:13: 21:25 (#0),\n+    },\n+    Ident {\n+        ident: \"A\",\n+        span: $DIR/issue-75930-derive-cfg.rs:21:26: 21:27 (#0),\n+    },\n+    Punct {\n+        ch: ',',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:21:27: 21:28 (#0),\n+    },\n+    Ident {\n+        ident: \"B\",\n+        span: $DIR/issue-75930-derive-cfg.rs:21:29: 21:30 (#0),\n+    },\n+    Punct {\n+        ch: '>',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:21:30: 21:31 (#0),\n+    },\n+    Group {\n+        delimiter: Brace,\n+        stream: TokenStream [\n+            Punct {\n+                ch: '#',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:22:5: 22:6 (#0),\n+            },\n+            Group {\n+                delimiter: Bracket,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"cfg\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:22:7: 22:10 (#0),\n+                    },\n+                    Group {\n+                        delimiter: Parenthesis,\n+                        stream: TokenStream [\n+                            Ident {\n+                                ident: \"FALSE\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:22:11: 22:16 (#0),\n+                            },\n+                        ],\n+                        span: $DIR/issue-75930-derive-cfg.rs:22:10: 22:17 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:22:6: 22:18 (#0),\n+            },\n+            Ident {\n+                ident: \"first\",\n+                span: $DIR/issue-75930-derive-cfg.rs:22:19: 22:24 (#0),\n+            },\n+            Punct {\n+                ch: ':',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:22:24: 22:25 (#0),\n+            },\n+            Ident {\n+                ident: \"String\",\n+                span: $DIR/issue-75930-derive-cfg.rs:22:26: 22:32 (#0),\n+            },\n+            Punct {\n+                ch: ',',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:22:32: 22:33 (#0),\n+            },\n+            Punct {\n+                ch: '#',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:23:5: 23:6 (#0),\n+            },\n+            Group {\n+                delimiter: Bracket,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"cfg_attr\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:23:7: 23:15 (#0),\n+                    },\n+                    Group {\n+                        delimiter: Parenthesis,\n+                        stream: TokenStream [\n+                            Ident {\n+                                ident: \"FALSE\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:23:16: 23:21 (#0),\n+                            },\n+                            Punct {\n+                                ch: ',',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:23:21: 23:22 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"deny\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:23:23: 23:27 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"warnings\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:23:28: 23:36 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:23:27: 23:37 (#0),\n+                            },\n+                        ],\n+                        span: $DIR/issue-75930-derive-cfg.rs:23:15: 23:38 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:23:6: 23:39 (#0),\n+            },\n+            Ident {\n+                ident: \"second\",\n+                span: $DIR/issue-75930-derive-cfg.rs:23:40: 23:46 (#0),\n+            },\n+            Punct {\n+                ch: ':',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:23:46: 23:47 (#0),\n+            },\n+            Ident {\n+                ident: \"bool\",\n+                span: $DIR/issue-75930-derive-cfg.rs:23:48: 23:52 (#0),\n+            },\n+            Punct {\n+                ch: ',',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:23:52: 23:53 (#0),\n+            },\n+            Ident {\n+                ident: \"third\",\n+                span: $DIR/issue-75930-derive-cfg.rs:24:5: 24:10 (#0),\n+            },\n+            Punct {\n+                ch: ':',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:24:10: 24:11 (#0),\n+            },\n+            Group {\n+                delimiter: Bracket,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"u8\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:24:13: 24:15 (#0),\n+                    },\n+                    Punct {\n+                        ch: ';',\n+                        spacing: Alone,\n+                        span: $DIR/issue-75930-derive-cfg.rs:24:15: 24:16 (#0),\n+                    },\n+                    Group {\n+                        delimiter: Brace,\n+                        stream: TokenStream [\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:25:9: 25:10 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"cfg\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:25:11: 25:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"FALSE\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:25:15: 25:20 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:25:14: 25:21 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:25:10: 25:22 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"struct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:25:23: 25:29 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"Bar\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:25:30: 25:33 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:25:33: 25:34 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:26:9: 26:10 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"cfg\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:26:11: 26:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"not\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:26:15: 26:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:26:19: 26:24 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:26:18: 26:25 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:26:14: 26:26 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:26:10: 26:27 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"struct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:26:28: 26:34 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"Inner\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:26:35: 26:40 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:26:40: 26:41 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:9: 27:10 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"cfg\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:27:11: 27:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"FALSE\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:27:15: 27:20 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:27:14: 27:21 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:10: 27:22 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"let\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:23: 27:26 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"a\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:27: 27:28 (#0),\n+                            },\n+                            Punct {\n+                                ch: '=',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:29: 27:30 (#0),\n+                            },\n+                            Literal {\n+                                kind: Integer,\n+                                symbol: \"25\",\n+                                suffix: None,\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:31: 27:33 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:27:33: 27:34 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"match\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:28:9: 28:14 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"true\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:28:15: 28:19 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:13: 29:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:29:15: 29:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:29:19: 29:24 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:29:18: 29:25 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:14: 29:26 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"true\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:27: 29:31 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '=',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:32: 29:34 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '>',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:32: 29:34 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Brace,\n+                                        stream: TokenStream [],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:35: 29:37 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:29:37: 29:38 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:13: 30:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg_attr\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:30:15: 30:23 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"not\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:30:24: 30:27 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:30:28: 30:33 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:30:27: 30:34 (#0),\n+                                                    },\n+                                                    Punct {\n+                                                        ch: ',',\n+                                                        spacing: Alone,\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:30:34: 30:35 (#0),\n+                                                    },\n+                                                    Ident {\n+                                                        ident: \"allow\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:30:36: 30:41 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"warnings\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:30:42: 30:50 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:30:41: 30:51 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:30:23: 30:52 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:14: 30:53 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"false\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:54: 30:59 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '=',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:60: 30:62 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '>',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:60: 30:62 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Brace,\n+                                        stream: TokenStream [],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:63: 30:65 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:30:65: 30:66 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"_\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:31:13: 31:14 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '=',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:31:15: 31:17 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '>',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:31:15: 31:17 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Brace,\n+                                        stream: TokenStream [],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:31:18: 31:20 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:28:20: 32:10 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:32:10: 32:11 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:34:9: 34:10 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"print_helper\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:34:11: 34:23 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"should_be_removed\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:34:24: 34:41 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:34:23: 34:42 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:34:10: 34:43 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:35:9: 35:11 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"removed_fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:35:12: 35:22 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [],\n+                                span: $DIR/issue-75930-derive-cfg.rs:35:22: 35:24 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:36:13: 36:14 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '!',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:36:14: 36:15 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:36:16: 36:19 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:36:20: 36:25 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:36:19: 36:26 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:36:15: 36:27 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:35:25: 37:10 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:9: 39:10 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"print_helper\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:39:11: 39:23 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"c\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:39:24: 39:25 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:39:23: 39:26 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:10: 39:27 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:28: 39:29 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"cfg\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:39:30: 39:33 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"not\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:39:34: 39:37 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:39:38: 39:43 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:39:37: 39:44 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:39:33: 39:45 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:29: 39:46 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:47: 39:49 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"kept_fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:50: 39:57 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [],\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:57: 39:59 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:40:13: 40:14 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '!',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:40:14: 40:15 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:40:16: 40:19 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"not\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:40:20: 40:23 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:40:24: 40:29 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:40:23: 40:30 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:40:19: 40:31 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:40:15: 40:32 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"let\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:41:13: 41:16 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"my_val\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:41:17: 41:23 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '=',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:41:24: 41:25 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"true\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:41:26: 41:30 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ';',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:41:30: 41:31 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:39:60: 42:10 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"enum\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:44:9: 44:13 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"TupleEnum\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:44:14: 44:23 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"Foo\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:45:13: 45:16 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Punct {\n+                                                ch: '#',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:46:17: 46:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Bracket,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"cfg\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:46:19: 46:22 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:46:23: 46:28 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:46:22: 46:29 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:46:18: 46:30 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"u8\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:46:31: 46:33 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: ',',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:46:33: 46:34 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: '#',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:47:17: 47:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Bracket,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"cfg\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:47:19: 47:22 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:47:23: 47:28 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:47:22: 47:29 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:47:18: 47:30 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"bool\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:47:31: 47:35 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: ',',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:47:35: 47:36 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: '#',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:48:17: 48:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Bracket,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"cfg\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:48:19: 48:22 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"not\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:48:23: 48:26 (#0),\n+                                                            },\n+                                                            Group {\n+                                                                delimiter: Parenthesis,\n+                                                                stream: TokenStream [\n+                                                                    Ident {\n+                                                                        ident: \"FALSE\",\n+                                                                        span: $DIR/issue-75930-derive-cfg.rs:48:27: 48:32 (#0),\n+                                                                    },\n+                                                                ],\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:48:26: 48:33 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:48:22: 48:34 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:48:18: 48:35 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"i32\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:48:36: 48:39 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: ',',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:48:39: 48:40 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: '#',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:49:17: 49:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Bracket,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"cfg\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:49:19: 49:22 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:49:23: 49:28 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:49:22: 49:29 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:49:18: 49:30 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"String\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:49:31: 49:37 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: ',',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:49:37: 49:38 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"u8\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:49:39: 49:41 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:45:16: 50:14 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:44:24: 51:10 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"struct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:53:9: 53:15 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"TupleStruct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:53:16: 53:27 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:54:13: 54:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:54:15: 54:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:54:19: 54:24 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:54:18: 54:25 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:54:14: 54:26 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"String\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:54:27: 54:33 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:54:33: 54:34 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:55:13: 55:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:55:15: 55:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"not\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:55:19: 55:22 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:55:23: 55:28 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:55:22: 55:29 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:55:18: 55:30 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:55:14: 55:31 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"i32\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:55:32: 55:35 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:55:35: 55:36 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:56:13: 56:14 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:56:15: 56:18 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:56:19: 56:24 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:56:18: 56:25 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:56:14: 56:26 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"bool\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:56:27: 56:31 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:56:31: 56:32 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"u8\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:57:13: 57:15 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:53:27: 58:10 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:58:10: 58:11 (#0),\n+                            },\n+                            Literal {\n+                                kind: Integer,\n+                                symbol: \"0\",\n+                                suffix: None,\n+                                span: $DIR/issue-75930-derive-cfg.rs:60:9: 60:10 (#0),\n+                            },\n+                        ],\n+                        span: $DIR/issue-75930-derive-cfg.rs:24:17: 61:6 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:24:12: 61:7 (#0),\n+            },\n+            Punct {\n+                ch: ',',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:61:7: 61:8 (#0),\n+            },\n+            Punct {\n+                ch: '#',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:62:5: 62:6 (#0),\n+            },\n+            Group {\n+                delimiter: Bracket,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"print_helper\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:62:7: 62:19 (#0),\n+                    },\n+                    Group {\n+                        delimiter: Parenthesis,\n+                        stream: TokenStream [\n+                            Ident {\n+                                ident: \"d\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:62:20: 62:21 (#0),\n+                            },\n+                        ],\n+                        span: $DIR/issue-75930-derive-cfg.rs:62:19: 62:22 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:62:6: 62:23 (#0),\n+            },\n+            Ident {\n+                ident: \"fourth\",\n+                span: $DIR/issue-75930-derive-cfg.rs:63:5: 63:11 (#0),\n+            },\n+            Punct {\n+                ch: ':',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:63:11: 63:12 (#0),\n+            },\n+            Ident {\n+                ident: \"B\",\n+                span: $DIR/issue-75930-derive-cfg.rs:63:13: 63:14 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:21:32: 64:2 (#0),\n+    },\n+]\n+PRINT-DERIVE INPUT (DISPLAY): #[allow(dead_code)] #[print_helper(b)] #[print_helper(a)] struct Foo < B >\n {\n     second : bool, third :\n     [u8 ;\n      {\n          #[cfg(not(FALSE))] struct Inner ; match true\n-         { false => { } _ => { } } ; 0\n-     }], fourth : B,\n+         { #[allow(warnings)] false => { } _ => { } } ; #[print_helper(c)]\n+         #[cfg(not(FALSE))] fn kept_fn()\n+         { # ! [cfg(not(FALSE))] let my_val = true ; } enum TupleEnum\n+         { Foo(#[cfg(not(FALSE))] i32, u8), } struct\n+         TupleStruct(#[cfg(not(FALSE))] i32, u8) ; 0\n+     }], #[print_helper(d)] fourth : B,\n }\n PRINT-DERIVE INPUT (DEBUG): TokenStream [\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"allow\",\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"dead_code\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"print_helper\",\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"b\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n+    Punct {\n+        ch: '#',\n+        spacing: Alone,\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n+    Group {\n+        delimiter: Bracket,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"print_helper\",\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"a\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+        ],\n+        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+    },\n     Ident {\n         ident: \"struct\",\n         span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n@@ -134,6 +1409,31 @@ PRINT-DERIVE INPUT (DEBUG): TokenStream [\n                             Group {\n                                 delimiter: Brace,\n                                 stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"allow\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"warnings\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n                                     Ident {\n                                         ident: \"false\",\n                                         span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n@@ -180,6 +1480,291 @@ PRINT-DERIVE INPUT (DEBUG): TokenStream [\n                                 spacing: Alone,\n                                 span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n                             },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"print_helper\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"c\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Punct {\n+                                ch: '#',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Bracket,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"cfg\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"not\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"FALSE\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"kept_fn\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Joint,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '!',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"not\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"let\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"my_val\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: '=',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"true\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ';',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"enum\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"TupleEnum\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Brace,\n+                                stream: TokenStream [\n+                                    Ident {\n+                                        ident: \"Foo\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Parenthesis,\n+                                        stream: TokenStream [\n+                                            Punct {\n+                                                ch: '#',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Bracket,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"cfg\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"not\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                            },\n+                                                            Group {\n+                                                                delimiter: Parenthesis,\n+                                                                stream: TokenStream [\n+                                                                    Ident {\n+                                                                        ident: \"FALSE\",\n+                                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                                    },\n+                                                                ],\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"i32\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Punct {\n+                                                ch: ',',\n+                                                spacing: Alone,\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Ident {\n+                                                ident: \"u8\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"struct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Ident {\n+                                ident: \"TupleStruct\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Group {\n+                                delimiter: Parenthesis,\n+                                stream: TokenStream [\n+                                    Punct {\n+                                        ch: '#',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Group {\n+                                        delimiter: Bracket,\n+                                        stream: TokenStream [\n+                                            Ident {\n+                                                ident: \"cfg\",\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                            Group {\n+                                                delimiter: Parenthesis,\n+                                                stream: TokenStream [\n+                                                    Ident {\n+                                                        ident: \"not\",\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                    Group {\n+                                                        delimiter: Parenthesis,\n+                                                        stream: TokenStream [\n+                                                            Ident {\n+                                                                ident: \"FALSE\",\n+                                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                            },\n+                                                        ],\n+                                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                                    },\n+                                                ],\n+                                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                            },\n+                                        ],\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"i32\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Punct {\n+                                        ch: ',',\n+                                        spacing: Alone,\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                    Ident {\n+                                        ident: \"u8\",\n+                                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                                    },\n+                                ],\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                            Punct {\n+                                ch: ';',\n+                                spacing: Alone,\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n                             Literal {\n                                 kind: Integer,\n                                 symbol: \"0\",\n@@ -197,6 +1782,31 @@ PRINT-DERIVE INPUT (DEBUG): TokenStream [\n                 spacing: Alone,\n                 span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n             },\n+            Punct {\n+                ch: '#',\n+                spacing: Alone,\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n+            Group {\n+                delimiter: Bracket,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"print_helper\",\n+                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                    },\n+                    Group {\n+                        delimiter: Parenthesis,\n+                        stream: TokenStream [\n+                            Ident {\n+                                ident: \"d\",\n+                                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                            },\n+                        ],\n+                        span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+                    },\n+                ],\n+                span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),\n+            },\n             Ident {\n                 ident: \"fourth\",\n                 span: $DIR/issue-75930-derive-cfg.rs:1:1: 1:1 (#0),"}]}