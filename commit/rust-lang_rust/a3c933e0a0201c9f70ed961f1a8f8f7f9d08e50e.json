{"sha": "a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzYzkzM2UwYTAyMDFjOWY3MGVkOTYxZjFhOGY4ZjdmOWQwOGU1MGU=", "commit": {"author": {"name": "Jeff Olson", "email": "olson.jeffery@gmail.com", "date": "2012-06-29T14:06:32Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-06-29T22:41:56Z"}, "message": "std: uv::ll fixes for 32bit linux", "tree": {"sha": "4e62ccf94d405fbb12849cfa34fa4f5ed72bd26f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e62ccf94d405fbb12849cfa34fa4f5ed72bd26f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "html_url": "https://github.com/rust-lang/rust/commit/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e/comments", "author": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "087c4244b11f9aeb829640caa661b2dc2d976f0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/087c4244b11f9aeb829640caa661b2dc2d976f0a", "html_url": "https://github.com/rust-lang/rust/commit/087c4244b11f9aeb829640caa661b2dc2d976f0a"}], "stats": {"total": 67, "additions": 54, "deletions": 13}, "files": [{"sha": "4c0f3835f32e70afc149055c0b18fd50a6fcf856", "filename": "src/libstd/uv_ll.rs", "status": "modified", "additions": 54, "deletions": 11, "changes": 65, "blob_url": "https://github.com/rust-lang/rust/blob/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e/src%2Flibstd%2Fuv_ll.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e/src%2Flibstd%2Fuv_ll.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fuv_ll.rs?ref=a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "patch": "@@ -225,12 +225,12 @@ type sockaddr_in = {\n \n // unix size: 28 .. FIXME #1645\n // stuck with 32 becuse of rust padding structs?\n-#[cfg(unix)]\n+#[cfg(target_arch=\"x86_64\")]\n type sockaddr_in6 = {\n     a0: *u8, a1: *u8,\n     a2: *u8, a3: *u8\n };\n-#[cfg(windows)]\n+#[cfg(target_arch=\"x86\")]\n type sockaddr_in6 = {\n     a0: *u8, a1: *u8,\n     a2: *u8, a3: *u8,\n@@ -240,16 +240,59 @@ type sockaddr_in6 = {\n \n // unix size: 28 .. FIXME #1645\n // stuck with 32 becuse of rust padding structs?\n-type addr_in = {\n-    a0: *u8, a1: *u8,\n-    a2: *u8, a3: *u8\n-};\n+type addr_in = addr_in_impl::addr_in;\n+#[cfg(unix)]\n+mod addr_in_impl {\n+    #[cfg(target_arch=\"x86_64\")]\n+    type addr_in = {\n+        a0: *u8, a1: *u8,\n+        a2: *u8, a3: *u8\n+    };\n+    #[cfg(target_arch=\"x86\")]\n+    type addr_in = {\n+        a0: *u8, a1: *u8,\n+        a2: *u8, a3: *u8,\n+        a4: *u8, a5: *u8,\n+        a6: *u8, a7: *u8,\n+    };\n+}\n+#[cfg(windows)]\n+mod addr_in_impl {\n+    type addr_in = {\n+        a0: *u8, a1: *u8,\n+        a2: *u8, a3: *u8\n+    };\n+}\n \n-// unix size: 48\n-type addrinfo = {\n-    a00: *u8, a01: *u8, a02: *u8, a03: *u8,\n-    a04: *u8, a05: *u8\n-};\n+// unix size: 48, 32bit: 32\n+type addrinfo = addrinfo_impl::addrinfo;\n+#[cfg(target_os=\"linux\")]\n+mod addrinfo_impl {\n+    #[cfg(target_arch=\"x86_64\")]\n+    type addrinfo = {\n+        a00: *u8, a01: *u8, a02: *u8, a03: *u8,\n+        a04: *u8, a05: *u8\n+    };\n+    #[cfg(target_arch=\"x86\")]\n+    type addrinfo = {\n+        a00: *u8, a01: *u8, a02: *u8, a03: *u8,\n+        a04: *u8, a05: *u8, a06: *u8, a07: *u8\n+    };\n+}\n+#[cfg(target_os=\"macos\")]\n+mod addrinfo_impl {\n+    type addrinfo = {\n+        a00: *u8, a01: *u8, a02: *u8, a03: *u8,\n+        a04: *u8, a05: *u8\n+    };\n+}\n+#[cfg(windows)]\n+mod addrinfo_impl {\n+    type addrinfo = {\n+        a00: *u8, a01: *u8, a02: *u8, a03: *u8,\n+        a04: *u8, a05: *u8\n+    };\n+}\n \n // unix size: 72\n type uv_getaddrinfo_t = {"}, {"sha": "706e8ff43807fca67d77e1c79bbbac6116d33711", "filename": "src/rt/rust_uv.cpp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e/src%2Frt%2Frust_uv.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e/src%2Frt%2Frust_uv.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_uv.cpp?ref=a3c933e0a0201c9f70ed961f1a8f8f7f9d08e50e", "patch": "@@ -478,8 +478,6 @@ rust_uv_ip4_name(struct sockaddr_in* src, char* dst, size_t size) {\n extern \"C\" int\n rust_uv_ip6_name(struct sockaddr_in6* src, char* dst, size_t size) {\n     int result = uv_ip6_name(src, dst, size);\n-    printf(\"rust_uv_ip6_name: src ptr: %lu dst result: '%s'\\n\",\n-        (unsigned long int)src, dst);\n     return result;\n }\n "}]}