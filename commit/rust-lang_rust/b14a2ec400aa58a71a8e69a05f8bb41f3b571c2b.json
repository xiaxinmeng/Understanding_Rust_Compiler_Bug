{"sha": "b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxNGEyZWM0MDBhYTU4YTcxYThlNjlhMDVmOGJiNDFmM2I1NzFjMmI=", "commit": {"author": {"name": "Andrew Xu", "email": "andrewxuyuan@gmail.com", "date": "2019-07-03T14:37:33Z"}, "committer": {"name": "Andrew Xu", "email": "andrewxuyuan@gmail.com", "date": "2019-07-06T06:09:41Z"}, "message": "Remove duplicated arc_wake.rs\n\nThe auxiliary file arc_wake.rs is in run-pass/auxiliary and also\nui/async-await/auxiliary. Remove the former one as their contents\nare same.\nMove run-pass/futures-api.rs to ui/async-await/futures-api.rs as it\nneeds to use arc_wake.rs.", "tree": {"sha": "0645e92a2b62e3a3921b9235074e13fa35cbc5c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0645e92a2b62e3a3921b9235074e13fa35cbc5c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b", "html_url": "https://github.com/rust-lang/rust/commit/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b/comments", "author": {"login": "agnxy", "id": 911732, "node_id": "MDQ6VXNlcjkxMTczMg==", "avatar_url": "https://avatars.githubusercontent.com/u/911732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agnxy", "html_url": "https://github.com/agnxy", "followers_url": "https://api.github.com/users/agnxy/followers", "following_url": "https://api.github.com/users/agnxy/following{/other_user}", "gists_url": "https://api.github.com/users/agnxy/gists{/gist_id}", "starred_url": "https://api.github.com/users/agnxy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agnxy/subscriptions", "organizations_url": "https://api.github.com/users/agnxy/orgs", "repos_url": "https://api.github.com/users/agnxy/repos", "events_url": "https://api.github.com/users/agnxy/events{/privacy}", "received_events_url": "https://api.github.com/users/agnxy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "agnxy", "id": 911732, "node_id": "MDQ6VXNlcjkxMTczMg==", "avatar_url": "https://avatars.githubusercontent.com/u/911732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agnxy", "html_url": "https://github.com/agnxy", "followers_url": "https://api.github.com/users/agnxy/followers", "following_url": "https://api.github.com/users/agnxy/following{/other_user}", "gists_url": "https://api.github.com/users/agnxy/gists{/gist_id}", "starred_url": "https://api.github.com/users/agnxy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agnxy/subscriptions", "organizations_url": "https://api.github.com/users/agnxy/orgs", "repos_url": "https://api.github.com/users/agnxy/repos", "events_url": "https://api.github.com/users/agnxy/events{/privacy}", "received_events_url": "https://api.github.com/users/agnxy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45dda939ab558b244d9099798047ec6e6376cff1", "url": "https://api.github.com/repos/rust-lang/rust/commits/45dda939ab558b244d9099798047ec6e6376cff1", "html_url": "https://github.com/rust-lang/rust/commit/45dda939ab558b244d9099798047ec6e6376cff1"}], "stats": {"total": 66, "additions": 2, "deletions": 64}, "files": [{"sha": "c21886f26f467e2176460fc166f95d0d9ee3cc6c", "filename": "src/test/run-pass/auxiliary/arc_wake.rs", "status": "removed", "additions": 0, "deletions": 64, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/45dda939ab558b244d9099798047ec6e6376cff1/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45dda939ab558b244d9099798047ec6e6376cff1/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs?ref=45dda939ab558b244d9099798047ec6e6376cff1", "patch": "@@ -1,64 +0,0 @@\n-// edition:2018\n-\n-use std::sync::Arc;\n-use std::task::{\n-    Waker, RawWaker, RawWakerVTable,\n-};\n-\n-macro_rules! waker_vtable {\n-    ($ty:ident) => {\n-        &RawWakerVTable::new(\n-            clone_arc_raw::<$ty>,\n-            wake_arc_raw::<$ty>,\n-            wake_by_ref_arc_raw::<$ty>,\n-            drop_arc_raw::<$ty>,\n-        )\n-    };\n-}\n-\n-pub trait ArcWake {\n-    fn wake(self: Arc<Self>);\n-\n-    fn wake_by_ref(arc_self: &Arc<Self>) {\n-        arc_self.clone().wake()\n-    }\n-\n-    fn into_waker(wake: Arc<Self>) -> Waker where Self: Sized\n-    {\n-        let ptr = Arc::into_raw(wake) as *const ();\n-\n-        unsafe {\n-            Waker::from_raw(RawWaker::new(ptr, waker_vtable!(Self)))\n-        }\n-    }\n-}\n-\n-unsafe fn increase_refcount<T: ArcWake>(data: *const ()) {\n-    // Retain Arc by creating a copy\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    let arc_clone = arc.clone();\n-    // Forget the Arcs again, so that the refcount isn't decrased\n-    let _ = Arc::into_raw(arc);\n-    let _ = Arc::into_raw(arc_clone);\n-}\n-\n-unsafe fn clone_arc_raw<T: ArcWake>(data: *const ()) -> RawWaker {\n-    increase_refcount::<T>(data);\n-    RawWaker::new(data, waker_vtable!(T))\n-}\n-\n-unsafe fn drop_arc_raw<T: ArcWake>(data: *const ()) {\n-    // Drop Arc\n-    let _: Arc<T> = Arc::from_raw(data as *const T);\n-}\n-\n-unsafe fn wake_arc_raw<T: ArcWake>(data: *const ()) {\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    ArcWake::wake(arc);\n-}\n-\n-unsafe fn wake_by_ref_arc_raw<T: ArcWake>(data: *const ()) {\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    ArcWake::wake_by_ref(&arc);\n-    let _ = Arc::into_raw(arc);\n-}"}, {"sha": "a7da058de3081f7aa48cb3e3e98a327c566d8ac2", "filename": "src/test/ui/async-await/futures-api.rs", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs?ref=b14a2ec400aa58a71a8e69a05f8bb41f3b571c2b", "patch": "@@ -1,3 +1,5 @@\n+// run-pass\n+\n // aux-build:arc_wake.rs\n \n extern crate arc_wake;", "previous_filename": "src/test/run-pass/futures-api.rs"}]}