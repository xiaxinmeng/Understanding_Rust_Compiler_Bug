{"sha": "6f17635f94ebcc9e70b8355d1d26b542ec83b396", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmMTc2MzVmOTRlYmNjOWU3MGI4MzU1ZDFkMjZiNTQyZWM4M2IzOTY=", "commit": {"author": {"name": "Wilco Kusee", "email": "wilcokusee@gmail.com", "date": "2019-01-13T13:24:21Z"}, "committer": {"name": "Wilco Kusee", "email": "wilcokusee@gmail.com", "date": "2019-01-13T13:26:09Z"}, "message": "Add run-rustfix for precedence test", "tree": {"sha": "e1a1c4dcb170b8c1d161058b84e99415f9cc63de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1a1c4dcb170b8c1d161058b84e99415f9cc63de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f17635f94ebcc9e70b8355d1d26b542ec83b396", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f17635f94ebcc9e70b8355d1d26b542ec83b396", "html_url": "https://github.com/rust-lang/rust/commit/6f17635f94ebcc9e70b8355d1d26b542ec83b396", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f17635f94ebcc9e70b8355d1d26b542ec83b396/comments", "author": {"login": "detrumi", "id": 5758008, "node_id": "MDQ6VXNlcjU3NTgwMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/detrumi", "html_url": "https://github.com/detrumi", "followers_url": "https://api.github.com/users/detrumi/followers", "following_url": "https://api.github.com/users/detrumi/following{/other_user}", "gists_url": "https://api.github.com/users/detrumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/detrumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/detrumi/subscriptions", "organizations_url": "https://api.github.com/users/detrumi/orgs", "repos_url": "https://api.github.com/users/detrumi/repos", "events_url": "https://api.github.com/users/detrumi/events{/privacy}", "received_events_url": "https://api.github.com/users/detrumi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "detrumi", "id": 5758008, "node_id": "MDQ6VXNlcjU3NTgwMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/detrumi", "html_url": "https://github.com/detrumi", "followers_url": "https://api.github.com/users/detrumi/followers", "following_url": "https://api.github.com/users/detrumi/following{/other_user}", "gists_url": "https://api.github.com/users/detrumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/detrumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/detrumi/subscriptions", "organizations_url": "https://api.github.com/users/detrumi/orgs", "repos_url": "https://api.github.com/users/detrumi/repos", "events_url": "https://api.github.com/users/detrumi/events{/privacy}", "received_events_url": "https://api.github.com/users/detrumi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95f2a9dbfcaaf8b319c2743ea641b785ff4c9d2e", "url": "https://api.github.com/repos/rust-lang/rust/commits/95f2a9dbfcaaf8b319c2743ea641b785ff4c9d2e", "html_url": "https://github.com/rust-lang/rust/commit/95f2a9dbfcaaf8b319c2743ea641b785ff4c9d2e"}], "stats": {"total": 65, "additions": 52, "deletions": 13}, "files": [{"sha": "0ec85bc47e7d0e995e4f073ec6e63d3acc6ad880", "filename": "tests/ui/precedence.fixed", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprecedence.fixed?ref=6f17635f94ebcc9e70b8355d1d26b542ec83b396", "patch": "@@ -0,0 +1,37 @@\n+// run-rustfix\n+#![warn(clippy::precedence)]\n+#![allow(unused_must_use, clippy::no_effect, clippy::unnecessary_operation)]\n+#![allow(clippy::identity_op)]\n+#![allow(clippy::eq_op)]\n+\n+macro_rules! trip {\n+    ($a:expr) => {\n+        match $a & 0b1111_1111u8 {\n+            0 => println!(\"a is zero ({})\", $a),\n+            _ => println!(\"a is {}\", $a),\n+        }\n+    };\n+}\n+\n+fn main() {\n+    1 << (2 + 3);\n+    (1 + 2) << 3;\n+    4 >> (1 + 1);\n+    (1 + 3) >> 2;\n+    1 ^ (1 - 1);\n+    3 | (2 - 1);\n+    3 & (5 - 2);\n+    -(1i32.abs());\n+    -(1f32.abs());\n+\n+    // These should not trigger an error\n+    let _ = (-1i32).abs();\n+    let _ = (-1f32).abs();\n+    let _ = -(1i32).abs();\n+    let _ = -(1f32).abs();\n+    let _ = -(1i32.abs());\n+    let _ = -(1f32.abs());\n+\n+    let b = 3;\n+    trip!(b * 8);\n+}"}, {"sha": "4ef771c314f51e22c1785d3bad5e0f0fc5071bbd", "filename": "tests/ui/precedence.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprecedence.rs?ref=6f17635f94ebcc9e70b8355d1d26b542ec83b396", "patch": "@@ -1,10 +1,12 @@\n-#[warn(clippy::precedence)]\n-#[allow(clippy::identity_op)]\n-#[allow(clippy::eq_op)]\n+// run-rustfix\n+#![warn(clippy::precedence)]\n+#![allow(unused_must_use, clippy::no_effect, clippy::unnecessary_operation)]\n+#![allow(clippy::identity_op)]\n+#![allow(clippy::eq_op)]\n \n macro_rules! trip {\n     ($a:expr) => {\n-        match $a & 0b1111_1111i8 {\n+        match $a & 0b1111_1111u8 {\n             0 => println!(\"a is zero ({})\", $a),\n             _ => println!(\"a is {}\", $a),\n         }"}, {"sha": "a2ed5392bfc7c643593dbf24434ab8c05d1d3c93", "filename": "tests/ui/precedence.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6f17635f94ebcc9e70b8355d1d26b542ec83b396/tests%2Fui%2Fprecedence.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprecedence.stderr?ref=6f17635f94ebcc9e70b8355d1d26b542ec83b396", "patch": "@@ -1,55 +1,55 @@\n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:15:5\n+  --> $DIR/precedence.rs:17:5\n    |\n LL |     1 << 2 + 3;\n    |     ^^^^^^^^^^ help: consider parenthesizing your expression: `1 << (2 + 3)`\n    |\n    = note: `-D clippy::precedence` implied by `-D warnings`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:16:5\n+  --> $DIR/precedence.rs:18:5\n    |\n LL |     1 + 2 << 3;\n    |     ^^^^^^^^^^ help: consider parenthesizing your expression: `(1 + 2) << 3`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:17:5\n+  --> $DIR/precedence.rs:19:5\n    |\n LL |     4 >> 1 + 1;\n    |     ^^^^^^^^^^ help: consider parenthesizing your expression: `4 >> (1 + 1)`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:18:5\n+  --> $DIR/precedence.rs:20:5\n    |\n LL |     1 + 3 >> 2;\n    |     ^^^^^^^^^^ help: consider parenthesizing your expression: `(1 + 3) >> 2`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:19:5\n+  --> $DIR/precedence.rs:21:5\n    |\n LL |     1 ^ 1 - 1;\n    |     ^^^^^^^^^ help: consider parenthesizing your expression: `1 ^ (1 - 1)`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:20:5\n+  --> $DIR/precedence.rs:22:5\n    |\n LL |     3 | 2 - 1;\n    |     ^^^^^^^^^ help: consider parenthesizing your expression: `3 | (2 - 1)`\n \n error: operator precedence can trip the unwary\n-  --> $DIR/precedence.rs:21:5\n+  --> $DIR/precedence.rs:23:5\n    |\n LL |     3 & 5 - 2;\n    |     ^^^^^^^^^ help: consider parenthesizing your expression: `3 & (5 - 2)`\n \n error: unary minus has lower precedence than method call\n-  --> $DIR/precedence.rs:22:5\n+  --> $DIR/precedence.rs:24:5\n    |\n LL |     -1i32.abs();\n    |     ^^^^^^^^^^^ help: consider adding parentheses to clarify your intent: `-(1i32.abs())`\n \n error: unary minus has lower precedence than method call\n-  --> $DIR/precedence.rs:23:5\n+  --> $DIR/precedence.rs:25:5\n    |\n LL |     -1f32.abs();\n    |     ^^^^^^^^^^^ help: consider adding parentheses to clarify your intent: `-(1f32.abs())`"}]}