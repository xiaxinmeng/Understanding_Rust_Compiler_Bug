{"sha": "53232e534c62411445fd27d1182a647833aa31b9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzMjMyZTUzNGM2MjQxMTQ0NWZkMjdkMTE4MmE2NDc4MzNhYTMxYjk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-20T15:45:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-04-20T15:45:44Z"}, "message": "Rollup merge of #50117 - pnkfelix:fix-issue-50113, r=oli-obk\n\nmust explicitly request file name when using with_file_name.\n\nFix #50113", "tree": {"sha": "e38ca27f894912314e2372e9d42da2dbe2381636", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e38ca27f894912314e2372e9d42da2dbe2381636"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53232e534c62411445fd27d1182a647833aa31b9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJa2gsoCRBK7hj4Ov3rIwAAdHIIAHkyPng7yOyQSiMDblDTmqTV\nYn+euTNuC5Ze5VyULm1BWFIhKGiG7yK7wlGkfLuYbXzuk02m+A1lP2McXk6jBfCD\nAmPUlUMnf5+pJFdhp/PwvdC7UVr3suLKK9cxTFuZcDWgw8giEkgQyhXIRDy9UwxL\nL9Iypv4Ckfn1JNE25+gkRuTsiPqG5TVo0XEwtOGOdhGuaTjBjbLR83KKVcxJgRZO\nSja9STHHeL/C2UVdjzFDeO8NuEP0RG7u1fhhV9MA9QgDKnjaajia0u2IY1G/ObZM\nZRItxAkgLj2FXLDPbocRGzQeXEEyr5mdRLTYFF+OQfWP1DlGKgzF8K+05s1YzWM=\n=9gXf\n-----END PGP SIGNATURE-----\n", "payload": "tree e38ca27f894912314e2372e9d42da2dbe2381636\nparent 4ede03830951f2413806a8b72d9551bcdf2c3b30\nparent 042e1e027974eadc164b875b4a0ab197dd9988cb\nauthor kennytm <kennytm@gmail.com> 1524239144 +0800\ncommitter GitHub <noreply@github.com> 1524239144 +0800\n\nRollup merge of #50117 - pnkfelix:fix-issue-50113, r=oli-obk\n\nmust explicitly request file name when using with_file_name.\n\nFix #50113\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53232e534c62411445fd27d1182a647833aa31b9", "html_url": "https://github.com/rust-lang/rust/commit/53232e534c62411445fd27d1182a647833aa31b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53232e534c62411445fd27d1182a647833aa31b9/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ede03830951f2413806a8b72d9551bcdf2c3b30", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ede03830951f2413806a8b72d9551bcdf2c3b30", "html_url": "https://github.com/rust-lang/rust/commit/4ede03830951f2413806a8b72d9551bcdf2c3b30"}, {"sha": "042e1e027974eadc164b875b4a0ab197dd9988cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/042e1e027974eadc164b875b4a0ab197dd9988cb", "html_url": "https://github.com/rust-lang/rust/commit/042e1e027974eadc164b875b4a0ab197dd9988cb"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "0f4d247633a61b46016c27b0b8b860475d3aa19b", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/53232e534c62411445fd27d1182a647833aa31b9/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53232e534c62411445fd27d1182a647833aa31b9/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=53232e534c62411445fd27d1182a647833aa31b9", "patch": "@@ -2880,8 +2880,10 @@ impl<'test> TestCx<'test> {\n             }\n         }\n \n-        let expected_output_path = self.expected_output_path(kind);\n-        let output_file = self.output_base_name().with_file_name(&expected_output_path);\n+        let expected_output = self.expected_output_path(kind);\n+        // #50113: output is abspath; only want filename component.\n+        let expected_output = expected_output.file_name().expect(\"output path requires file name\");\n+        let output_file = self.output_base_name().with_file_name(&expected_output);\n         match File::create(&output_file).and_then(|mut f| f.write_all(actual.as_bytes())) {\n             Ok(()) => {}\n             Err(e) => self.fatal(&format!("}]}