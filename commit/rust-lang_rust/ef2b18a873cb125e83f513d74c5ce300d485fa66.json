{"sha": "ef2b18a873cb125e83f513d74c5ce300d485fa66", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmMmIxOGE4NzNjYjEyNWU4M2Y1MTNkNzRjNWNlMzAwZDQ4NWZhNjY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-12-02T11:24:51Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-12-03T12:02:02Z"}, "message": "fix recently added Retag statement", "tree": {"sha": "a88fa8db0bac2990328c62d436774176991931a3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a88fa8db0bac2990328c62d436774176991931a3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef2b18a873cb125e83f513d74c5ce300d485fa66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef2b18a873cb125e83f513d74c5ce300d485fa66", "html_url": "https://github.com/rust-lang/rust/commit/ef2b18a873cb125e83f513d74c5ce300d485fa66", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef2b18a873cb125e83f513d74c5ce300d485fa66/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "005df5fe03ba2f9cdb7ed58d7cfb2c194184cc28", "url": "https://api.github.com/repos/rust-lang/rust/commits/005df5fe03ba2f9cdb7ed58d7cfb2c194184cc28", "html_url": "https://github.com/rust-lang/rust/commit/005df5fe03ba2f9cdb7ed58d7cfb2c194184cc28"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "3a53cc6eaea71704f905fcd34a8db1a1434799ac", "filename": "src/librustc_mir/shim.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ef2b18a873cb125e83f513d74c5ce300d485fa66/src%2Flibrustc_mir%2Fshim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef2b18a873cb125e83f513d74c5ce300d485fa66/src%2Flibrustc_mir%2Fshim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fshim.rs?ref=ef2b18a873cb125e83f513d74c5ce300d485fa66", "patch": "@@ -229,7 +229,11 @@ fn build_drop_shim<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n             // Function arguments should be retagged\n             mir.basic_blocks_mut()[START_BLOCK].statements.insert(0, Statement {\n                 source_info,\n-                kind: StatementKind::Retag { fn_entry: true, place: dropee_ptr.clone() },\n+                kind: StatementKind::Retag {\n+                    fn_entry: true,\n+                    two_phase: false,\n+                    place: dropee_ptr.clone(),\n+                },\n             });\n             // We use raw ptr operations, better prepare the alias tracking for that\n             mir.basic_blocks_mut()[START_BLOCK].statements.insert(1, Statement {"}]}