{"sha": "1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmYjg1N2RjYjA0MDBkZWJjMDFiNDNjYjAxMmQ1NjJlMmE5ZDdjYjE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-11-08T15:38:06Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-11-08T15:38:06Z"}, "message": "Auto merge of #1043 - RalfJung:cache, r=RalfJung\n\nCache rustup-toolchain-install-master again\n\nWe temporarily disabled the cache just to get it updated.", "tree": {"sha": "5dcfcb83554627d452147a5e663fd19c954d69f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5dcfcb83554627d452147a5e663fd19c954d69f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "html_url": "https://github.com/rust-lang/rust/commit/1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5dc433a13db0ba7907abb550fc7d13f0a24f791e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5dc433a13db0ba7907abb550fc7d13f0a24f791e", "html_url": "https://github.com/rust-lang/rust/commit/5dc433a13db0ba7907abb550fc7d13f0a24f791e"}, {"sha": "9ca277f2e9cface924a5afa8ccfb9c77747956d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ca277f2e9cface924a5afa8ccfb9c77747956d0", "html_url": "https://github.com/rust-lang/rust/commit/9ca277f2e9cface924a5afa8ccfb9c77747956d0"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "b9e112aa08608bf9e8708757c6e92cc9598c750f", "filename": ".appveyor.yml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/.appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/.appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.appveyor.yml?ref=1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "patch": "@@ -28,10 +28,9 @@ install:\n     - set PATH=%USERPROFILE%\\.cargo\\bin;%PATH%\n     - rustup default stable\n     - rustup uninstall beta\n-    - rustup component remove rust-docs & exit 0\n     - rustup update\n     # Install \"master\" toolchain\n-    - cargo install rustup-toolchain-install-master -f\n+    - cargo install rustup-toolchain-install-master & exit 0\n     # We need to install cargo here as well or else the DLL search path inside `cargo run`\n     # will be for the wrong toolchain. (On Unix, `./miri` takes care of this, but not here.)\n     - rustup-toolchain-install-master -f -n master %RUSTC_HASH% -c rust-src -c rustc-dev -c cargo"}, {"sha": "a080ab55b94f2326d2aef074e8b26c183dbe84fb", "filename": ".travis.yml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "patch": "@@ -35,10 +35,9 @@ before_script:\n - export PATH=$HOME/.cargo/bin:$PATH\n - rustup default stable\n - rustup uninstall beta\n-- rustup component remove rust-docs || echo \"rust-docs already gone\"\n - rustup update\n # Install \"master\" toolchain\n-- cargo install rustup-toolchain-install-master -f\n+- cargo install rustup-toolchain-install-master || echo \"rustup-toolchain-install-master already installed\"\n - travis_retry rustup-toolchain-install-master -f -n master $RUSTC_HASH -c rust-src -c rustc-dev\n - rustup default master\n - rustc --version"}, {"sha": "36545766d101d94e2351b4a760e46e72e7fcf55f", "filename": "src/bin/cargo-miri.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/src%2Fbin%2Fcargo-miri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fb857dcb0400debc01b43cb012d562e2a9d7cb1/src%2Fbin%2Fcargo-miri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-miri.rs?ref=1fb857dcb0400debc01b43cb012d562e2a9d7cb1", "patch": "@@ -6,6 +6,8 @@ use std::path::{PathBuf, Path};\n use std::process::Command;\n use std::ops::Not;\n \n+const XARGO_MIN_VERSION: (u32, u32, u32) = (0, 3, 17);\n+\n const CARGO_MIRI_HELP: &str = r#\"Interprets bin crates and tests in Miri\n \n Usage:\n@@ -258,7 +260,7 @@ fn setup(ask_user: bool) {\n     }\n \n     // First, we need xargo.\n-    if xargo_version().map_or(true, |v| v < (0, 3, 16)) {\n+    if xargo_version().map_or(true, |v| v < XARGO_MIN_VERSION) {\n         if std::env::var(\"XARGO\").is_ok() {\n             // The user manually gave us a xargo binary; don't do anything automatically.\n             show_error(format!(\"Your xargo is too old; please upgrade to the latest version\"))"}]}