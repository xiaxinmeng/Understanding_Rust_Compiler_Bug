{"sha": "083963e58c752f1a51b67d65dc6a207bf69f1d64", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA4Mzk2M2U1OGM3NTJmMWE1MWI2N2Q2NWRjNmEyMDdiZjY5ZjFkNjQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-24T23:50:21Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-24T23:50:21Z"}, "message": "parser: 'while parsing this or-pattern...'", "tree": {"sha": "a5274c7e6ffaa7f09d21d0f5c1d8782dfb2c5e36", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a5274c7e6ffaa7f09d21d0f5c1d8782dfb2c5e36"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/083963e58c752f1a51b67d65dc6a207bf69f1d64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/083963e58c752f1a51b67d65dc6a207bf69f1d64", "html_url": "https://github.com/rust-lang/rust/commit/083963e58c752f1a51b67d65dc6a207bf69f1d64", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/083963e58c752f1a51b67d65dc6a207bf69f1d64/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1202cb0e2b168b0a913b33e3cb3c1d9339683e28", "url": "https://api.github.com/repos/rust-lang/rust/commits/1202cb0e2b168b0a913b33e3cb3c1d9339683e28", "html_url": "https://github.com/rust-lang/rust/commit/1202cb0e2b168b0a913b33e3cb3c1d9339683e28"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "a0278fa407765ac4a7059ba1cf0759e88d741acc", "filename": "src/libsyntax/parse/parser/pat.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Flibsyntax%2Fparse%2Fparser%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Flibsyntax%2Fparse%2Fparser%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser%2Fpat.rs?ref=083963e58c752f1a51b67d65dc6a207bf69f1d64", "patch": "@@ -81,7 +81,10 @@ impl<'a> Parser<'a> {\n         let lo = first_pat.span;\n         let mut pats = vec![first_pat];\n         while self.eat_or_separator() {\n-            let pat = self.parse_pat(None)?;\n+            let pat = self.parse_pat(None).map_err(|mut err| {\n+                err.span_label(lo, \"while parsing this or-pattern staring here\");\n+                err\n+            })?;\n             self.maybe_recover_unexpected_comma(pat.span, top_level)?;\n             pats.push(pat);\n         }"}, {"sha": "4a9fae1406af7f378b584d394df1570e4cff2703", "filename": "src/test/ui/or-patterns/while-parsing-this-or-pattern.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.rs?ref=083963e58c752f1a51b67d65dc6a207bf69f1d64", "patch": "@@ -0,0 +1,9 @@\n+// Test the parser for the \"while parsing this or-pattern...\" label here.\n+\n+fn main() {\n+    match Some(42) {\n+        Some(42) | .=. => {} //~ ERROR expected pattern, found `.`\n+        //~^ while parsing this or-pattern staring here\n+        //~| NOTE expected pattern\n+    }\n+}"}, {"sha": "21fece6c64fe5000071803e526349a92bda8ec50", "filename": "src/test/ui/or-patterns/while-parsing-this-or-pattern.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/083963e58c752f1a51b67d65dc6a207bf69f1d64/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2For-patterns%2Fwhile-parsing-this-or-pattern.stderr?ref=083963e58c752f1a51b67d65dc6a207bf69f1d64", "patch": "@@ -0,0 +1,10 @@\n+error: expected pattern, found `.`\n+  --> $DIR/while-parsing-this-or-pattern.rs:5:20\n+   |\n+LL |         Some(42) | .=. => {}\n+   |         --------   ^ expected pattern\n+   |         |\n+   |         while parsing this or-pattern staring here\n+\n+error: aborting due to previous error\n+"}]}