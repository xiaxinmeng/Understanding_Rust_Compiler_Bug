{"sha": "4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlMmEyNWQ3NTlkM2UwMTRkYzVlNDc4NzJkOGNmZjJhNGE4MjFiMDg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-31T13:22:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-31T13:22:38Z"}, "message": "Rollup merge of #75938 - Amjad50:min_const_generics-tests-revisions, r=lcnr\n\nAdded some `min_const_generics` revisions into `const_generics` tests\n\nHelp in #75279. still a lot more to cover though\n\nr? @lcnr", "tree": {"sha": "3087e716db067672db8eaec435103c648f5e7594", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3087e716db067672db8eaec435103c648f5e7594"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfTPmfCRBK7hj4Ov3rIwAAdHIIAIRPLXzmPX3vSe3BnIK3gu6+\nD2pqismouH1FFNI0a/8gWd0/IfIzygx6Bk08/naOEGL9aUQaZMe7G4Q4iOU9a234\nIkYdlTNbW4BqCBV+gOgiVPl/gF8/VrbasJMDFNMZtCpYtioL43957J9oAvUhO3lX\n3Cjp6FPgydvHh2UpwGvdBGsCm/R9RmT20LgnOXYc1qMj3igtilPDvZV07YiJVOVl\ndPp6zf3QxzckchbTR55tifUqX1lDVFD5ncTa/YPWOI2jwpm3fV1mpkH4aXaUbLTC\ng/g0/RnE2S9CZdaxFBnjZDZn0zm9T06O+ERUMkKuC4sudD7Zzol+WWAO3SfyNiY=\n=fHyd\n-----END PGP SIGNATURE-----\n", "payload": "tree 3087e716db067672db8eaec435103c648f5e7594\nparent 3b4797cb598260b96dd8d6e47cd429210e14c1f6\nparent 668f63d83302c858dfae998e22fe3881d56d4e52\nauthor Aleksey Kladov <aleksey.kladov@gmail.com> 1598880158 +0200\ncommitter GitHub <noreply@github.com> 1598880158 +0200\n\nRollup merge of #75938 - Amjad50:min_const_generics-tests-revisions, r=lcnr\n\nAdded some `min_const_generics` revisions into `const_generics` tests\n\nHelp in #75279. still a lot more to cover though\n\nr? @lcnr\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "html_url": "https://github.com/rust-lang/rust/commit/4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b4797cb598260b96dd8d6e47cd429210e14c1f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b4797cb598260b96dd8d6e47cd429210e14c1f6", "html_url": "https://github.com/rust-lang/rust/commit/3b4797cb598260b96dd8d6e47cd429210e14c1f6"}, {"sha": "668f63d83302c858dfae998e22fe3881d56d4e52", "url": "https://api.github.com/repos/rust-lang/rust/commits/668f63d83302c858dfae998e22fe3881d56d4e52", "html_url": "https://github.com/rust-lang/rust/commit/668f63d83302c858dfae998e22fe3881d56d4e52"}], "stats": {"total": 1137, "additions": 762, "deletions": 375}, "files": [{"sha": "b52e505070330d912bfdd4912eff2b8cf1ab0fea", "filename": "src/test/ui/const-generics/argument_order.full.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,11 +1,11 @@\n error: lifetime parameters must be declared prior to const parameters\n-  --> $DIR/argument_order.rs:9:32\n+  --> $DIR/argument_order.rs:12:32\n    |\n LL | struct AlsoBad<const N: usize, 'a, T, 'b, const M: usize, U> {\n    |               -----------------^^-----^^-------------------- help: reorder the parameters: lifetimes, then consts and types: `<'a, 'b, const N: usize, T, const M: usize, U>`\n \n error[E0747]: lifetime provided when a type was expected\n-  --> $DIR/argument_order.rs:16:23\n+  --> $DIR/argument_order.rs:20:23\n    |\n LL |     let _: AlsoBad<7, 'static, u32, 'static, 17, u16>;\n    |                       ^^^^^^^", "previous_filename": "src/test/ui/const-generics/argument_order.stderr"}, {"sha": "728ae69b41f19f77d770c876d268329b2b436254", "filename": "src/test/ui/const-generics/argument_order.min.stderr", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,30 @@\n+error: type parameters must be declared prior to const parameters\n+  --> $DIR/argument_order.rs:6:28\n+   |\n+LL | struct Bad<const N: usize, T> {\n+   |           -----------------^- help: reorder the parameters: lifetimes, then types, then consts: `<T, const N: usize>`\n+\n+error: lifetime parameters must be declared prior to const parameters\n+  --> $DIR/argument_order.rs:12:32\n+   |\n+LL | struct AlsoBad<const N: usize, 'a, T, 'b, const M: usize, U> {\n+   |               -----------------^^-----^^-------------------- help: reorder the parameters: lifetimes, then types, then consts: `<'a, 'b, T, U, const N: usize, const M: usize>`\n+\n+error: type parameters must be declared prior to const parameters\n+  --> $DIR/argument_order.rs:12:36\n+   |\n+LL | struct AlsoBad<const N: usize, 'a, T, 'b, const M: usize, U> {\n+   |               ---------------------^----------------------^- help: reorder the parameters: lifetimes, then types, then consts: `<'a, 'b, T, U, const N: usize, const M: usize>`\n+\n+error[E0747]: lifetime provided when a type was expected\n+  --> $DIR/argument_order.rs:20:23\n+   |\n+LL |     let _: AlsoBad<7, 'static, u32, 'static, 17, u16>;\n+   |                       ^^^^^^^\n+   |\n+   = note: lifetime arguments must be provided before type arguments\n+   = help: reorder the arguments: lifetimes, then types, then consts: `<'a, 'b, T, U, N, M>`\n+\n+error: aborting due to 4 previous errors\n+\n+For more information about this error, try `rustc --explain E0747`."}, {"sha": "507baf5fd755eeb58e04f80e57d14087846abc74", "filename": "src/test/ui/const-generics/argument_order.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fargument_order.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,13 +1,17 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Bad<const N: usize, T> {\n+    //[min]~^ ERROR type parameters must be declared prior to const parameters\n     arr: [u8; { N }],\n     another: T,\n }\n \n struct AlsoBad<const N: usize, 'a, T, 'b, const M: usize, U> {\n     //~^ ERROR lifetime parameters must be declared prior\n+    //[min]~^^ ERROR type parameters must be declared prior to const parameters\n     a: &'a T,\n     b: &'b U,\n }"}, {"sha": "390b6cc2049e546eed3cdb4cebc9ad1ff2a62357", "filename": "src/test/ui/const-generics/array-wrapper-struct-ctor.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // run-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n #![allow(dead_code)]\n "}, {"sha": "e6eb2a0a78303ff7e9bc8557efeed159bd7592fe", "filename": "src/test/ui/const-generics/array-wrapper-struct-ctor.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Farray-wrapper-struct-ctor.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/array-wrapper-struct-ctor.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "931f6ade7f15c88dc78c269b1c978b78c6741b19", "filename": "src/test/ui/const-generics/cannot-infer-type-for-const-param.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n // This test confirms that the types can be inferred correctly for this example with const\n // generics. Previously this would ICE, and more recently error."}, {"sha": "c5c48d7be46895123d03a9f0935675e060c35793", "filename": "src/test/ui/const-generics/cannot-infer-type-for-const-param.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fcannot-infer-type-for-const-param.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/cannot-infer-type-for-const-param.rs:2:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "3827002ff4bc6fa06c5a41e03fffb234fa2a3847", "filename": "src/test/ui/const-generics/const-arg-type-arg-misordered.full.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,5 @@\n error[E0747]: constant provided when a type was expected\n-  --> $DIR/const-arg-type-arg-misordered.rs:6:35\n+  --> $DIR/const-arg-type-arg-misordered.rs:8:35\n    |\n LL | fn foo<const N: usize>() -> Array<N, ()> {\n    |                                   ^", "previous_filename": "src/test/ui/const-generics/const-arg-type-arg-misordered.stderr"}, {"sha": "2c5fc8dcc01fc98a3c2a45174d2c4e93b5d7af8a", "filename": "src/test/ui/const-generics/const-arg-type-arg-misordered.min.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,12 @@\n+error[E0747]: constant provided when a type was expected\n+  --> $DIR/const-arg-type-arg-misordered.rs:8:35\n+   |\n+LL | fn foo<const N: usize>() -> Array<N, ()> {\n+   |                                   ^\n+   |\n+   = note: type arguments must be provided before constant arguments\n+   = help: reorder the arguments: types, then consts: `<T, N>`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0747`."}, {"sha": "6680f772fa3fea7705ae14b2aae9de01d0fab40b", "filename": "src/test/ui/const-generics/const-arg-type-arg-misordered.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-arg-type-arg-misordered.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,9 +1,12 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n type Array<T, const N: usize> = [T; N];\n \n-fn foo<const N: usize>() -> Array<N, ()> { //~ ERROR constant provided when a type was expected\n+fn foo<const N: usize>() -> Array<N, ()> {\n+    //~^ ERROR constant provided when a type was expected\n     unimplemented!()\n }\n "}, {"sha": "c2acaabbd8832cecba0b8bfbf43cc02404bef244", "filename": "src/test/ui/const-generics/const-param-before-other-params.full.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,5 @@\n error: lifetime parameters must be declared prior to const parameters\n-  --> $DIR/const-param-before-other-params.rs:4:21\n+  --> $DIR/const-param-before-other-params.rs:6:21\n    |\n LL | fn bar<const X: (), 'a>(_: &'a ()) {\n    |       --------------^^- help: reorder the parameters: lifetimes, then consts and types: `<'a, const X: ()>`", "previous_filename": "src/test/ui/const-generics/const-param-before-other-params.stderr"}, {"sha": "c7e6d1be421610b19a7fde14478d6c6f68bac6c3", "filename": "src/test/ui/const-generics/const-param-before-other-params.min.stderr", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,32 @@\n+error: lifetime parameters must be declared prior to const parameters\n+  --> $DIR/const-param-before-other-params.rs:6:21\n+   |\n+LL | fn bar<const X: (), 'a>(_: &'a ()) {\n+   |       --------------^^- help: reorder the parameters: lifetimes, then types, then consts: `<'a, const X: ()>`\n+\n+error: type parameters must be declared prior to const parameters\n+  --> $DIR/const-param-before-other-params.rs:11:21\n+   |\n+LL | fn foo<const X: (), T>(_: &T) {}\n+   |       --------------^- help: reorder the parameters: lifetimes, then types, then consts: `<T, const X: ()>`\n+\n+error: `()` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-param-before-other-params.rs:6:17\n+   |\n+LL | fn bar<const X: (), 'a>(_: &'a ()) {\n+   |                 ^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `()` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-param-before-other-params.rs:11:17\n+   |\n+LL | fn foo<const X: (), T>(_: &T) {}\n+   |                 ^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to 4 previous errors\n+"}, {"sha": "f1be90cf2e418a62413c151c84e61c9c77b71121", "filename": "src/test/ui/const-generics/const-param-before-other-params.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fconst-param-before-other-params.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,10 +1,15 @@\n-#![allow(incomplete_features)]\n-#![feature(const_generics)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n fn bar<const X: (), 'a>(_: &'a ()) {\n     //~^ ERROR lifetime parameters must be declared prior to const parameters\n+    //[min]~^^ ERROR `()` is forbidden as the type of a const generic parameter\n }\n \n fn foo<const X: (), T>(_: &T) {}\n+//[min]~^ ERROR type parameters must be declared prior to const parameters\n+//[min]~^^ ERROR `()` is forbidden as the type of a const generic parameter\n \n fn main() {}"}, {"sha": "a20c7264acfdda5460eb50b281231ed12a88c834", "filename": "src/test/ui/const-generics/issues/issue-63322-forbid-dyn.full.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,9 @@\n+error[E0741]: `&'static (dyn A + 'static)` must be annotated with `#[derive(PartialEq, Eq)]` to be used as the type of a const parameter\n+  --> $DIR/issue-63322-forbid-dyn.rs:10:18\n+   |\n+LL | fn test<const T: &'static dyn A>() {\n+   |                  ^^^^^^^^^^^^^^ `&'static (dyn A + 'static)` doesn't derive both `PartialEq` and `Eq`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0741`."}, {"sha": "e6d9fb7a246836c763aa8ae4d87b77406cd86578", "filename": "src/test/ui/const-generics/issues/issue-63322-forbid-dyn.min.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,18 @@\n+error: `&'static (dyn A + 'static)` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-63322-forbid-dyn.rs:10:18\n+   |\n+LL | fn test<const T: &'static dyn A>() {\n+   |                  ^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error[E0741]: `&'static (dyn A + 'static)` must be annotated with `#[derive(PartialEq, Eq)]` to be used as the type of a const parameter\n+  --> $DIR/issue-63322-forbid-dyn.rs:10:18\n+   |\n+LL | fn test<const T: &'static dyn A>() {\n+   |                  ^^^^^^^^^^^^^^ `&'static (dyn A + 'static)` doesn't derive both `PartialEq` and `Eq`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0741`."}, {"sha": "2194eb97a410740802c64b8eafc8c761ab3991ed", "filename": "src/test/ui/const-generics/issues/issue-63322-forbid-dyn.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,12 +1,15 @@\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait A {}\n struct B;\n impl A for B {}\n \n fn test<const T: &'static dyn A>() {\n     //~^ ERROR must be annotated with `#[derive(PartialEq, Eq)]` to be used\n+    //[min]~^^ ERROR `&'static (dyn A + 'static)` is forbidden\n     unimplemented!()\n }\n "}, {"sha": "32054e43716cb39cff3e499a04e8e55b7d429fb7", "filename": "src/test/ui/const-generics/issues/issue-63322-forbid-dyn.stderr", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-63322-forbid-dyn.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,18 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-63322-forbid-dyn.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error[E0741]: `&'static (dyn A + 'static)` must be annotated with `#[derive(PartialEq, Eq)]` to be used as the type of a const parameter\n-  --> $DIR/issue-63322-forbid-dyn.rs:8:18\n-   |\n-LL | fn test<const T: &'static dyn A>() {\n-   |                  ^^^^^^^^^^^^^^ `&'static (dyn A + 'static)` doesn't derive both `PartialEq` and `Eq`\n-\n-error: aborting due to previous error; 1 warning emitted\n-\n-For more information about this error, try `rustc --explain E0741`."}, {"sha": "a97ec9308f814f86230bfb8ebf3e681f07c01189", "filename": "src/test/ui/const-generics/issues/issue-64494.full.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,13 +1,13 @@\n error: constant expression depends on a generic parameter\n-  --> $DIR/issue-64494.rs:14:53\n+  --> $DIR/issue-64494.rs:16:53\n    |\n LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 5}>: True {}\n    |                                                     ^^^^\n    |\n    = note: this may fail depending on what value the parameter takes\n \n error: constant expression depends on a generic parameter\n-  --> $DIR/issue-64494.rs:16:53\n+  --> $DIR/issue-64494.rs:19:53\n    |\n LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 6}>: True {}\n    |                                                     ^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-64494.stderr"}, {"sha": "69fe0974a791a166040d65a526d756fad617d37c", "filename": "src/test/ui/const-generics/issues/issue-64494.min.stderr", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,28 @@\n+error: generic parameters must not be used inside of non trivial constant values\n+  --> $DIR/issue-64494.rs:16:38\n+   |\n+LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 5}>: True {}\n+   |                                      ^^^^^^ non-trivial anonymous constants must not depend on the parameter `T`\n+   |\n+   = help: it is currently only allowed to use either `T` or `{ T }` as generic constants\n+\n+error: generic parameters must not be used inside of non trivial constant values\n+  --> $DIR/issue-64494.rs:19:38\n+   |\n+LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 6}>: True {}\n+   |                                      ^^^^^^ non-trivial anonymous constants must not depend on the parameter `T`\n+   |\n+   = help: it is currently only allowed to use either `T` or `{ T }` as generic constants\n+\n+error[E0119]: conflicting implementations of trait `MyTrait`:\n+  --> $DIR/issue-64494.rs:19:1\n+   |\n+LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 5}>: True {}\n+   | ------------------------------------ first implementation here\n+...\n+LL | impl<T: Foo> MyTrait for T where Is<{T::VAL == 6}>: True {}\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ conflicting implementation\n+\n+error: aborting due to 3 previous errors\n+\n+For more information about this error, try `rustc --explain E0119`."}, {"sha": "3b598a415223ac7bf9a3af5adac1d183753aec68", "filename": "src/test/ui/const-generics/issues/issue-64494.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64494.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait Foo {\n     const VAL: usize;\n@@ -12,8 +14,11 @@ struct Is<const T: bool>;\n impl True for Is<{true}> {}\n \n impl<T: Foo> MyTrait for T where Is<{T::VAL == 5}>: True {}\n-//~^ ERROR constant expression depends on a generic parameter\n+//[full]~^ ERROR constant expression depends on a generic parameter\n+//[min]~^^ ERROR generic parameters must not be used inside of non trivial constant values\n impl<T: Foo> MyTrait for T where Is<{T::VAL == 6}>: True {}\n-//~^ ERROR constant expression depends on a generic parameter\n+//[full]~^ ERROR constant expression depends on a generic parameter\n+//[min]~^^ ERROR generic parameters must not be used inside of non trivial constant values\n+//[min]~| ERROR conflicting implementations of trait `MyTrait`\n \n fn main() {}"}, {"sha": "1ca709d09755bc7bc71a0cf82acb1ab3999279cc", "filename": "src/test/ui/const-generics/issues/issue-64519.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64519.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64519.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-64519.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // check-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Foo<const D: usize> {\n     state: Option<[u8; D]>,"}, {"sha": "a1520912e4e2bb2930f3c8ec401722043e33616b", "filename": "src/test/ui/const-generics/issues/issue-66205.full.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,10 @@\n+error: constant expression depends on a generic parameter\n+  --> $DIR/issue-66205.rs:8:12\n+   |\n+LL |     fact::<{ N - 1 }>();\n+   |            ^^^^^^^^^\n+   |\n+   = note: this may fail depending on what value the parameter takes\n+\n+error: aborting due to previous error\n+"}, {"sha": "86709c389b623d04c0064cfbdd758c910838802f", "filename": "src/test/ui/const-generics/issues/issue-66205.min.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,10 @@\n+error: generic parameters must not be used inside of non trivial constant values\n+  --> $DIR/issue-66205.rs:8:14\n+   |\n+LL |     fact::<{ N - 1 }>();\n+   |              ^ non-trivial anonymous constants must not depend on the parameter `N`\n+   |\n+   = help: it is currently only allowed to use either `N` or `{ N }` as generic constants\n+\n+error: aborting due to previous error\n+"}, {"sha": "e115eff356a7f51d2e5302893e39e09057fac01b", "filename": "src/test/ui/const-generics/issues/issue-66205.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,10 +1,13 @@\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n #![allow(dead_code, unconditional_recursion)]\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n \n fn fact<const N: usize>() {\n     fact::<{ N - 1 }>();\n-    //~^ ERROR constant expression depends on a generic parameter\n+    //[full]~^ ERROR constant expression depends on a generic parameter\n+    //[min]~^^ ERROR generic parameters must not be used inside of non trivial constant values\n }\n \n fn main() {}"}, {"sha": "1e9c0f2f3d9eb175e34479b6936157180decaf88", "filename": "src/test/ui/const-generics/issues/issue-66205.stderr", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66205.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,19 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-66205.rs:2:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error: constant expression depends on a generic parameter\n-  --> $DIR/issue-66205.rs:6:12\n-   |\n-LL |     fact::<{ N - 1 }>();\n-   |            ^^^^^^^^^\n-   |\n-   = note: this may fail depending on what value the parameter takes\n-\n-error: aborting due to previous error; 1 warning emitted\n-"}, {"sha": "3e048593c9b2ca8dc156199c0849b9112b13027b", "filename": "src/test/ui/const-generics/issues/issue-66906.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // check-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n pub struct Tuple;\n "}, {"sha": "8e8b552f90eb5604e56264ae8f6b0d6f73664c8c", "filename": "src/test/ui/const-generics/issues/issue-66906.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-66906.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-66906.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "09d88ef89a308f86998e130d2c9ed42c0641ce91", "filename": "src/test/ui/const-generics/issues/issue-67185-1.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // check-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait Baz {\n     type Quaks;"}, {"sha": "9cc797d6d8a017b704cf77c2830ec0f68e19b7fd", "filename": "src/test/ui/const-generics/issues/issue-67185-1.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-67185-1.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-67185-1.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "3b27d4d68c5d440bd8954de299fc1c99d503b261", "filename": "src/test/ui/const-generics/issues/issue-68596.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68596.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68596.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68596.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n pub struct S(u8);\n "}, {"sha": "81c8f4392c735e9288633ea15796f998485f4959", "filename": "src/test/ui/const-generics/issues/issue-68615-adt.min.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,11 @@\n+error: `[usize; 0]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-68615-adt.rs:7:23\n+   |\n+LL | struct Const<const V: [usize; 0]> {}\n+   |                       ^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to previous error\n+"}, {"sha": "d616f3ab95a822581724dbae5dc78ab573ef2a38", "filename": "src/test/ui/const-generics/issues/issue-68615-adt.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-adt.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,8 +1,11 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Const<const V: [usize; 0]> {}\n+//[min]~^ ERROR `[usize; 0]` is forbidden as the type of a const generic parameter\n type MyConst = Const<{ [] }>;\n \n fn main() {"}, {"sha": "8f55a92fce9af58abfb5dbd297ff12f06374c315", "filename": "src/test/ui/const-generics/issues/issue-68615-array.min.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,11 @@\n+error: `[usize; 0]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-68615-array.rs:7:21\n+   |\n+LL | struct Foo<const V: [usize; 0] > {}\n+   |                     ^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to previous error\n+"}, {"sha": "24c9a59a1855f04d9ba1d415a5ecc7585cd2bcf3", "filename": "src/test/ui/const-generics/issues/issue-68615-array.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68615-array.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,8 +1,11 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Foo<const V: [usize; 0] > {}\n+//[min]~^ ERROR `[usize; 0]` is forbidden as the type of a const generic parameter\n \n type MyFoo = Foo<{ [] }>;\n "}, {"sha": "3690bac3eb342fc1bf2fa732d1422ca70275b052", "filename": "src/test/ui/const-generics/issues/issue-68977.full.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,10 @@\n+error: constant expression depends on a generic parameter\n+  --> $DIR/issue-68977.rs:35:44\n+   |\n+LL |     FxpStorageHelper<INT_BITS, FRAC_BITS>: FxpStorage,\n+   |                                            ^^^^^^^^^^\n+   |\n+   = note: this may fail depending on what value the parameter takes\n+\n+error: aborting due to previous error\n+"}, {"sha": "5b2137b244cb26a4234095ee04ed6a598a890567", "filename": "src/test/ui/const-generics/issues/issue-68977.min.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,18 @@\n+error: generic parameters must not be used inside of non trivial constant values\n+  --> $DIR/issue-68977.rs:29:17\n+   |\n+LL |     PhantomU8<{(INT_BITS + FRAC_BITS + 7) / 8}>;\n+   |                 ^^^^^^^^ non-trivial anonymous constants must not depend on the parameter `INT_BITS`\n+   |\n+   = help: it is currently only allowed to use either `INT_BITS` or `{ INT_BITS }` as generic constants\n+\n+error: generic parameters must not be used inside of non trivial constant values\n+  --> $DIR/issue-68977.rs:29:28\n+   |\n+LL |     PhantomU8<{(INT_BITS + FRAC_BITS + 7) / 8}>;\n+   |                            ^^^^^^^^^ non-trivial anonymous constants must not depend on the parameter `FRAC_BITS`\n+   |\n+   = help: it is currently only allowed to use either `FRAC_BITS` or `{ FRAC_BITS }` as generic constants\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "02e634efec3e7198b4d2c1070c447f28f6cd358c", "filename": "src/test/ui/const-generics/issues/issue-68977.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct PhantomU8<const X: u8>;\n \n@@ -25,11 +27,13 @@ fxp_storage_impls! {\n \n type FxpStorageHelper<const INT_BITS: u8, const FRAC_BITS: u8> =\n     PhantomU8<{(INT_BITS + FRAC_BITS + 7) / 8}>;\n+    //[min]~^ ERROR generic parameters must not be used inside of non trivial constant values\n+    //[min]~| ERROR generic parameters must not be used inside of non trivial constant values\n \n struct Fxp<const INT_BITS: u8, const FRAC_BITS: u8>\n where\n     FxpStorageHelper<INT_BITS, FRAC_BITS>: FxpStorage,\n-    //~^ ERROR constant expression depends on a generic parameter\n+    //[full]~^ ERROR constant expression depends on a generic parameter\n {\n     storage: <FxpStorageHelper<INT_BITS, FRAC_BITS> as FxpStorage>::SInt,\n }"}, {"sha": "e1190d9026da9d70fee5fe87b5b276667b4d936e", "filename": "src/test/ui/const-generics/issues/issue-68977.stderr", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-68977.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,19 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-68977.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error: constant expression depends on a generic parameter\n-  --> $DIR/issue-68977.rs:31:44\n-   |\n-LL |     FxpStorageHelper<INT_BITS, FRAC_BITS>: FxpStorage,\n-   |                                            ^^^^^^^^^^\n-   |\n-   = note: this may fail depending on what value the parameter takes\n-\n-error: aborting due to previous error; 1 warning emitted\n-"}, {"sha": "04175089dc069510d4189d5921b4ce145074ffeb", "filename": "src/test/ui/const-generics/issues/issue-70125-1.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n const L: usize = 4;\n "}, {"sha": "8ad4b25ae5bc0c23095d919c59a093d1ae245aed", "filename": "src/test/ui/const-generics/issues/issue-70125-1.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-1.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-70125-1.rs:2:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "ceefc2dcb32cfae181b2f75023e78e73d7d24a32", "filename": "src/test/ui/const-generics/issues/issue-70125-2.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // run-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n fn main() {\n     <()>::foo();"}, {"sha": "c1f9634810e4897ab298a6440378d5d29029447a", "filename": "src/test/ui/const-generics/issues/issue-70125-2.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70125-2.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-70125-2.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "04c76a4dcaff763bf260db466b384dbf6c17650d", "filename": "src/test/ui/const-generics/issues/issue-70167.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // check-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n pub trait Trait<const N: usize>: From<<Self as Trait<N>>::Item> {\n   type Item;"}, {"sha": "5d647e933c4c56daf25021c687d5fba91d16d9c8", "filename": "src/test/ui/const-generics/issues/issue-70167.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-70167.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-70167.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "b87825d20ce321b1d15c4b299339629acf79885a", "filename": "src/test/ui/const-generics/issues/issue-71169.full.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,11 +1,11 @@\n error[E0770]: the type of const parameters must not depend on other generic parameters\n-  --> $DIR/issue-71169.rs:4:43\n+  --> $DIR/issue-71169.rs:6:43\n    |\n LL | fn foo<const LEN: usize, const DATA: [u8; LEN]>() {}\n    |                                           ^^^ the type must not depend on the parameter `LEN`\n \n error: constant expression depends on a generic parameter\n-  --> $DIR/issue-71169.rs:8:14\n+  --> $DIR/issue-71169.rs:11:14\n    |\n LL |     foo::<4, DATA>();\n    |              ^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-71169.stderr"}, {"sha": "79d63443351ff6045f0a65feb0f1e6818cc2769b", "filename": "src/test/ui/const-generics/issues/issue-71169.min.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,18 @@\n+error[E0770]: the type of const parameters must not depend on other generic parameters\n+  --> $DIR/issue-71169.rs:6:43\n+   |\n+LL | fn foo<const LEN: usize, const DATA: [u8; LEN]>() {}\n+   |                                           ^^^ the type must not depend on the parameter `LEN`\n+\n+error: `[u8; _]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-71169.rs:6:38\n+   |\n+LL | fn foo<const LEN: usize, const DATA: [u8; LEN]>() {}\n+   |                                      ^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0770`."}, {"sha": "7007ec222caa8440baedbcf45ca2e954a53edcda", "filename": "src/test/ui/const-generics/issues/issue-71169.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71169.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,10 +1,13 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n fn foo<const LEN: usize, const DATA: [u8; LEN]>() {}\n //~^ ERROR the type of const parameters must not\n+//[min]~^^ ERROR `[u8; _]` is forbidden as the type of a const generic parameter\n fn main() {\n     const DATA: [u8; 4] = *b\"ABCD\";\n     foo::<4, DATA>();\n-    //~^ ERROR constant expression depends on\n+    //[full]~^ ERROR constant expression depends on\n }"}, {"sha": "453ef00e6dc1d4976fccae77352a223fc8b51e0e", "filename": "src/test/ui/const-generics/issues/issue-71381.full.stderr", "status": "renamed", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,23 +1,23 @@\n error[E0770]: the type of const parameters must not depend on other generic parameters\n-  --> $DIR/issue-71381.rs:13:82\n+  --> $DIR/issue-71381.rs:15:82\n    |\n LL |     pub fn call_me<Args: Sized, const IDX: usize, const FN: unsafe extern \"C\" fn(Args)>(&self) {\n    |                                                                                  ^^^^ the type must not depend on the parameter `Args`\n \n error[E0770]: the type of const parameters must not depend on other generic parameters\n-  --> $DIR/issue-71381.rs:22:40\n+  --> $DIR/issue-71381.rs:24:40\n    |\n LL |         const FN: unsafe extern \"C\" fn(Args),\n    |                                        ^^^^ the type must not depend on the parameter `Args`\n \n error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-71381.rs:13:61\n+  --> $DIR/issue-71381.rs:15:61\n    |\n LL |     pub fn call_me<Args: Sized, const IDX: usize, const FN: unsafe extern \"C\" fn(Args)>(&self) {\n    |                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-71381.rs:22:19\n+  --> $DIR/issue-71381.rs:24:19\n    |\n LL |         const FN: unsafe extern \"C\" fn(Args),\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-71381.stderr"}, {"sha": "453ef00e6dc1d4976fccae77352a223fc8b51e0e", "filename": "src/test/ui/const-generics/issues/issue-71381.min.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,27 @@\n+error[E0770]: the type of const parameters must not depend on other generic parameters\n+  --> $DIR/issue-71381.rs:15:82\n+   |\n+LL |     pub fn call_me<Args: Sized, const IDX: usize, const FN: unsafe extern \"C\" fn(Args)>(&self) {\n+   |                                                                                  ^^^^ the type must not depend on the parameter `Args`\n+\n+error[E0770]: the type of const parameters must not depend on other generic parameters\n+  --> $DIR/issue-71381.rs:24:40\n+   |\n+LL |         const FN: unsafe extern \"C\" fn(Args),\n+   |                                        ^^^^ the type must not depend on the parameter `Args`\n+\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71381.rs:15:61\n+   |\n+LL |     pub fn call_me<Args: Sized, const IDX: usize, const FN: unsafe extern \"C\" fn(Args)>(&self) {\n+   |                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71381.rs:24:19\n+   |\n+LL |         const FN: unsafe extern \"C\" fn(Args),\n+   |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 4 previous errors\n+\n+For more information about this error, try `rustc --explain E0770`."}, {"sha": "65d88e553b9e5dd1ea324d3a41557abf1ce0a617", "filename": "src/test/ui/const-generics/issues/issue-71381.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71381.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Test(*const usize);\n "}, {"sha": "3da85ee040de9951ecd0ef23f50e8f37dd299900", "filename": "src/test/ui/const-generics/issues/issue-71382.full.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,5 @@\n error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-71382.rs:15:23\n+  --> $DIR/issue-71382.rs:17:23\n    |\n LL |     fn test<const FN: fn()>(&self) {\n    |                       ^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-71382.stderr"}, {"sha": "3da85ee040de9951ecd0ef23f50e8f37dd299900", "filename": "src/test/ui/const-generics/issues/issue-71382.min.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71382.rs:17:23\n+   |\n+LL |     fn test<const FN: fn()>(&self) {\n+   |                       ^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "12a7d08382a371c7d813a966a7e6f3ff7b02b1e9", "filename": "src/test/ui/const-generics/issues/issue-71382.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71382.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Test();\n "}, {"sha": "48d4bb361a183a89595985efa5334d6eaf0b7e7f", "filename": "src/test/ui/const-generics/issues/issue-71611.full.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,11 +1,11 @@\n error[E0770]: the type of const parameters must not depend on other generic parameters\n-  --> $DIR/issue-71611.rs:4:31\n+  --> $DIR/issue-71611.rs:6:31\n    |\n LL | fn func<A, const F: fn(inner: A)>(outer: A) {\n    |                               ^ the type must not depend on the parameter `A`\n \n error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-71611.rs:4:21\n+  --> $DIR/issue-71611.rs:6:21\n    |\n LL | fn func<A, const F: fn(inner: A)>(outer: A) {\n    |                     ^^^^^^^^^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-71611.stderr"}, {"sha": "48d4bb361a183a89595985efa5334d6eaf0b7e7f", "filename": "src/test/ui/const-generics/issues/issue-71611.min.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,15 @@\n+error[E0770]: the type of const parameters must not depend on other generic parameters\n+  --> $DIR/issue-71611.rs:6:31\n+   |\n+LL | fn func<A, const F: fn(inner: A)>(outer: A) {\n+   |                               ^ the type must not depend on the parameter `A`\n+\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71611.rs:6:21\n+   |\n+LL | fn func<A, const F: fn(inner: A)>(outer: A) {\n+   |                     ^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0770`."}, {"sha": "9b8e8be6bc6fc72124b9f5008a83ba19eeee0fb3", "filename": "src/test/ui/const-generics/issues/issue-71611.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-71611.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n fn func<A, const F: fn(inner: A)>(outer: A) {\n     //~^ ERROR: using function pointers as const generic parameters is forbidden"}, {"sha": "51f94678467437a7ac8541da7c419361205e778c", "filename": "src/test/ui/const-generics/issues/issue-72352.full.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,5 @@\n error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-72352.rs:6:42\n+  --> $DIR/issue-72352.rs:8:42\n    |\n LL | unsafe fn unsafely_do_the_thing<const F: fn(&CStr) -> usize>(ptr: *const i8) -> usize {\n    |                                          ^^^^^^^^^^^^^^^^^^", "previous_filename": "src/test/ui/const-generics/issues/issue-72352.stderr"}, {"sha": "51f94678467437a7ac8541da7c419361205e778c", "filename": "src/test/ui/const-generics/issues/issue-72352.min.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-72352.rs:8:42\n+   |\n+LL | unsafe fn unsafely_do_the_thing<const F: fn(&CStr) -> usize>(ptr: *const i8) -> usize {\n+   |                                          ^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "1517f3dae4ff4974d3c3210087ff5c16b879ffb8", "filename": "src/test/ui/const-generics/issues/issue-72352.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-72352.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n use std::ffi::{CStr, CString};\n "}, {"sha": "5bf3671d38be354af5306ac7484a50a05a0c523d", "filename": "src/test/ui/const-generics/issues/issue-73491.min.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,11 @@\n+error: `[u32; _]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-73491.rs:9:19\n+   |\n+LL | fn hoge<const IN: [u32; LEN]>() {}\n+   |                   ^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to previous error\n+"}, {"sha": "4f6c44ad2cdb0fed2205297405f08dc67dd46480", "filename": "src/test/ui/const-generics/issues/issue-73491.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73491.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,9 +1,12 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n const LEN: usize = 1024;\n \n fn hoge<const IN: [u32; LEN]>() {}\n+//[min]~^ ERROR `[u32; _]` is forbidden as the type of a const generic parameter\n \n fn main() {}"}, {"sha": "0816bad35b2de05dc732a32afa6fd3c5297f88b3", "filename": "src/test/ui/const-generics/issues/issue-73508.full.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using raw pointers as const generic parameters is forbidden\n+  --> $DIR/issue-73508.rs:6:33\n+   |\n+LL | pub const fn func_name<const X: *const u32>() {}\n+   |                                 ^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "0816bad35b2de05dc732a32afa6fd3c5297f88b3", "filename": "src/test/ui/const-generics/issues/issue-73508.min.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using raw pointers as const generic parameters is forbidden\n+  --> $DIR/issue-73508.rs:6:33\n+   |\n+LL | pub const fn func_name<const X: *const u32>() {}\n+   |                                 ^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "21b87f7f9014c31457c0f6b639e0133e0e5510b3", "filename": "src/test/ui/const-generics/issues/issue-73508.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,4 +1,7 @@\n-#![feature(const_generics)] //~ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n pub const fn func_name<const X: *const u32>() {}\n //~^ ERROR using raw pointers"}, {"sha": "23ad1818b6f37305dfb1e10bf9fb0b393b1ff209", "filename": "src/test/ui/const-generics/issues/issue-73508.stderr", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-73508.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,17 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-73508.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error: using raw pointers as const generic parameters is forbidden\n-  --> $DIR/issue-73508.rs:3:33\n-   |\n-LL | pub const fn func_name<const X: *const u32>() {}\n-   |                                 ^^^^^^^^^^\n-\n-error: aborting due to previous error; 1 warning emitted\n-"}, {"sha": "8062faefbe60b25ea5bbdd3cd21da3ef6c495f87", "filename": "src/test/ui/const-generics/issues/issue-74101.min.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,20 @@\n+error: `[u8; _]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-74101.rs:7:18\n+   |\n+LL | fn test<const N: [u8; 1 + 2]>() {}\n+   |                  ^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `[u8; _]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-74101.rs:10:21\n+   |\n+LL | struct Foo<const N: [u8; 1 + 2]>;\n+   |                     ^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "2a7d31ac8dd662502b4e87c67afc51face437e70", "filename": "src/test/ui/const-generics/issues/issue-74101.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74101.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,9 +1,13 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n fn test<const N: [u8; 1 + 2]>() {}\n+//[min]~^ ERROR `[u8; _]` is forbidden as the type of a const generic parameter\n \n struct Foo<const N: [u8; 1 + 2]>;\n+//[min]~^ ERROR `[u8; _]` is forbidden as the type of a const generic parameter\n \n fn main() {}"}, {"sha": "86937d715c9739b11dc9a4396a1d95918b0f9ab9", "filename": "src/test/ui/const-generics/issues/issue-74255.min.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,11 @@\n+error: `IceEnum` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-74255.rs:15:31\n+   |\n+LL |     fn ice_struct_fn<const I: IceEnum>() {}\n+   |                               ^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to previous error\n+"}, {"sha": "b277c273461c3ce8c540ea16cd3ba3a91af4267d", "filename": "src/test/ui/const-generics/issues/issue-74255.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-74255.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(dead_code, incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n #[derive(PartialEq, Eq)]\n enum IceEnum {\n@@ -11,6 +13,7 @@ struct IceStruct;\n \n impl IceStruct {\n     fn ice_struct_fn<const I: IceEnum>() {}\n+    //[min]~^ ERROR `IceEnum` is forbidden as the type of a const generic parameter\n }\n \n fn main() {"}, {"sha": "edc54b082dbcbcde8d5f02accb1ef04994233ffc", "filename": "src/test/ui/const-generics/issues/issue-75047.min.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,11 @@\n+error: `[u8; _]` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-75047.rs:15:21\n+   |\n+LL | struct Foo<const N: [u8; Bar::<u32>::value()]>;\n+   |                     ^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to previous error\n+"}, {"sha": "7bab7cdd0989e4c966dfeda2f418e60c253f01fa", "filename": "src/test/ui/const-generics/issues/issue-75047.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-75047.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n-// check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Bar<T>(T);\n \n@@ -11,5 +13,6 @@ impl<T> Bar<T> {\n }\n \n struct Foo<const N: [u8; Bar::<u32>::value()]>;\n+//[min]~^ ERROR `[u8; _]` is forbidden as the type of a const generic parameter\n \n fn main() {}"}, {"sha": "28f80702dcf00c9093c810ab78cb63c3b0c3e5d6", "filename": "src/test/ui/const-generics/issues/issue70273-assoc-fn.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // check-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait T<const A: usize> {\n     fn f();"}, {"sha": "931701b64b48165a10dd68504dbfe582304dfafd", "filename": "src/test/ui/const-generics/issues/issue70273-assoc-fn.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue70273-assoc-fn.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue70273-assoc-fn.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "a71e744202151644e3bfbfcc21eb060462a39409", "filename": "src/test/ui/const-generics/std/const-generics-range.min.stderr", "status": "added", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,56 @@\n+error: `std::ops::Range<usize>` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:8:24\n+   |\n+LL | struct _Range<const R: std::ops::Range<usize>>;\n+   |                        ^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `std::ops::RangeFrom<usize>` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:13:28\n+   |\n+LL | struct _RangeFrom<const R: std::ops::RangeFrom<usize>>;\n+   |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `std::ops::RangeFull` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:18:28\n+   |\n+LL | struct _RangeFull<const R: std::ops::RangeFull>;\n+   |                            ^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `std::ops::RangeInclusive<usize>` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:24:33\n+   |\n+LL | struct _RangeInclusive<const R: std::ops::RangeInclusive<usize>>;\n+   |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `std::ops::RangeTo<usize>` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:29:26\n+   |\n+LL | struct _RangeTo<const R: std::ops::RangeTo<usize>>;\n+   |                          ^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `std::ops::RangeToInclusive<usize>` is forbidden as the type of a const generic parameter\n+  --> $DIR/const-generics-range.rs:34:35\n+   |\n+LL | struct _RangeToInclusive<const R: std::ops::RangeToInclusive<usize>>;\n+   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to 6 previous errors\n+"}, {"sha": "c04f4a3acfbb582c2c42a6db6e698f3be8d1ce46", "filename": "src/test/ui/const-generics/std/const-generics-range.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fstd%2Fconst-generics-range.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,30 +1,38 @@\n-// check-pass\n-#![allow(incomplete_features)]\n-#![feature(const_generics)]\n+// [full] check-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n // `Range` should be usable within const generics:\n struct _Range<const R: std::ops::Range<usize>>;\n+//[min]~^ ERROR `std::ops::Range<usize>` is forbidden\n const RANGE : _Range<{ 0 .. 1000 }> = _Range;\n \n // `RangeFrom` should be usable within const generics:\n struct _RangeFrom<const R: std::ops::RangeFrom<usize>>;\n+//[min]~^ ERROR `std::ops::RangeFrom<usize>` is forbidden\n const RANGE_FROM : _RangeFrom<{ 0 .. }> = _RangeFrom;\n \n // `RangeFull` should be usable within const generics:\n struct _RangeFull<const R: std::ops::RangeFull>;\n+//[min]~^ ERROR `std::ops::RangeFull` is forbidden\n const RANGE_FULL : _RangeFull<{ .. }> = _RangeFull;\n \n // Regression test for #70155\n // `RangeInclusive` should be usable within const generics:\n struct _RangeInclusive<const R: std::ops::RangeInclusive<usize>>;\n+//[min]~^ ERROR `std::ops::RangeInclusive<usize>` is forbidden\n const RANGE_INCLUSIVE : _RangeInclusive<{ 0 ..= 999 }> = _RangeInclusive;\n \n // `RangeTo` should be usable within const generics:\n struct _RangeTo<const R: std::ops::RangeTo<usize>>;\n+//[min]~^ ERROR `std::ops::RangeTo<usize>` is forbidden\n const RANGE_TO : _RangeTo<{ .. 1000 }> = _RangeTo;\n \n // `RangeToInclusive` should be usable within const generics:\n struct _RangeToInclusive<const R: std::ops::RangeToInclusive<usize>>;\n+//[min]~^ ERROR `std::ops::RangeToInclusive<usize>` is forbidden\n const RANGE_TO_INCLUSIVE : _RangeToInclusive<{ ..= 999 }> = _RangeToInclusive;\n \n pub fn main() {}"}, {"sha": "67a44d2c5b4ada4624ecc4ecb7033c182630d562", "filename": "src/test/ui/const-generics/type-after-const-ok.min.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: type parameters must be declared prior to const parameters\n+  --> $DIR/type-after-const-ok.rs:9:26\n+   |\n+LL | struct A<const N: usize, T>(T);\n+   |         -----------------^- help: reorder the parameters: lifetimes, then types, then consts: `<T, const N: usize>`\n+\n+error: aborting due to previous error\n+"}, {"sha": "69227cdf19c33a64c383cbaf8d9872cf8e83c333", "filename": "src/test/ui/const-generics/type-after-const-ok.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-after-const-ok.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,10 +1,12 @@\n-// run-pass\n+// [full] run-pass\n+// revisions: full min\n // Verifies that having generic parameters after constants is permitted\n-\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n #[allow(dead_code)]\n struct A<const N: usize, T>(T);\n+//[min]~^ ERROR type parameters must be declared prior to const parameters\n \n fn main() {}"}, {"sha": "1d42afa3f8461de59044ed35380182c730f91b0a", "filename": "src/test/ui/const-generics/type-dependent/issue-61936.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-61936.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-61936.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-61936.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait SliceExt<T: Clone> {\n     fn array_windows<'a, const N: usize>(&'a self) -> ArrayWindows<'a, T, N>;"}, {"sha": "465b66b09ce22c85bd654fbe6b401e754585f159", "filename": "src/test/ui/const-generics/type-dependent/issue-63695.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-63695.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-63695.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-63695.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait T {\n     fn test<const A: i32>(&self) -> i32 { A }"}, {"sha": "3d4910e9e4b40bf97590818953e968dfc5491b81", "filename": "src/test/ui/const-generics/type-dependent/issue-67144-1.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-1.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct X;\n "}, {"sha": "0868d309b337d67ef0fa43200ddbbf38f51e5649", "filename": "src/test/ui/const-generics/type-dependent/issue-67144-2.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-67144-2.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct A<const N: usize>;\n "}, {"sha": "4a374dc1db60be03b4857418d9fca9b8d85b6dab", "filename": "src/test/ui/const-generics/type-dependent/issue-69816.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-69816.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-69816.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-69816.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait IterExt: Sized + Iterator {\n     fn default_for_size<const N: usize>(self) -> [Self::Item; N]"}, {"sha": "ba5a42e47e92da9e7b352f1952e2dc8d3355384a", "filename": "src/test/ui/const-generics/type-dependent/issue-70217.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70217.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70217.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70217.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,9 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Struct<const N: usize>;\n "}, {"sha": "234c09e04ae6d35a543fab83a3b7d7ecd374611d", "filename": "src/test/ui/const-generics/type-dependent/issue-70507.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70507.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70507.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70507.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait ConstChunksExactTrait<T> {\n     fn const_chunks_exact<const N: usize>(&self) -> ConstChunksExact<'_, T, {N}>;"}, {"sha": "fd52373cee218cb5ed7a6944850acd5b374dddb2", "filename": "src/test/ui/const-generics/type-dependent/issue-70586.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70586.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70586.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-70586.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n use std::marker::PhantomData;\n "}, {"sha": "8656239605dfd8cb1c1fa5576a19dcc7ea73c922", "filename": "src/test/ui/const-generics/type-dependent/issue-71348.min.stderr", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,20 @@\n+error: `&'static str` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-71348.rs:11:24\n+   |\n+LL | trait Get<'a, const N: &'static str> {\n+   |                        ^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: `&'static str` is forbidden as the type of a const generic parameter\n+  --> $DIR/issue-71348.rs:19:25\n+   |\n+LL |     fn ask<'a, const N: &'static str>(&'a self) -> &'a <Self as Get<N>>::Target\n+   |                         ^^^^^^^^^^^^\n+   |\n+   = note: the only supported types are integers, `bool` and `char`\n+   = note: more complex types are supported with `#[feature(const_generics)]`\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "772e179746ddb5e0df14837b7d9d645df847e0d2", "filename": "src/test/ui/const-generics/type-dependent/issue-71348.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71348.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,19 +1,23 @@\n-// run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// [full] run-pass\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Foo {\n     i: i32,\n }\n \n trait Get<'a, const N: &'static str> {\n+    //[min]~^ ERROR `&'static str` is forbidden as the type of a const generic parameter\n     type Target: 'a;\n \n     fn get(&'a self) -> &'a Self::Target;\n }\n \n impl Foo {\n     fn ask<'a, const N: &'static str>(&'a self) -> &'a <Self as Get<N>>::Target\n+    //[min]~^ ERROR `&'static str` is forbidden as the type of a const generic parameter\n     where\n         Self: Get<'a, N>,\n     {"}, {"sha": "da1d3270b7cccc2c678be8ccae8249089a6f2213", "filename": "src/test/ui/const-generics/type-dependent/issue-71382.full.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71382.rs:17:23\n+   |\n+LL |     fn test<const FN: fn() -> u8>(&self) -> u8 {\n+   |                       ^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "da1d3270b7cccc2c678be8ccae8249089a6f2213", "filename": "src/test/ui/const-generics/type-dependent/issue-71382.min.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,8 @@\n+error: using function pointers as const generic parameters is forbidden\n+  --> $DIR/issue-71382.rs:17:23\n+   |\n+LL |     fn test<const FN: fn() -> u8>(&self) -> u8 {\n+   |                       ^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "497fd1381de7f3d3901326e70182e3ecd68e687e", "filename": "src/test/ui/const-generics/type-dependent/issue-71382.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct Test;\n "}, {"sha": "f441b71031ece1a8a3df2b0c83b6cb33820c1638", "filename": "src/test/ui/const-generics/type-dependent/issue-71382.stderr", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71382.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,17 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/issue-71382.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error: using function pointers as const generic parameters is forbidden\n-  --> $DIR/issue-71382.rs:15:23\n-   |\n-LL |     fn test<const FN: fn() -> u8>(&self) -> u8 {\n-   |                       ^^^^^^^^^^\n-\n-error: aborting due to previous error; 1 warning emitted\n-"}, {"sha": "2aaf12cea4f8c0fb252c569ec99f234f52b4a5ec", "filename": "src/test/ui/const-generics/type-dependent/issue-71805.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71805.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71805.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-71805.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n use std::mem::MaybeUninit;\n "}, {"sha": "3e53190ee48692117a500bd60d2f81916fa76434", "filename": "src/test/ui/const-generics/type-dependent/issue-73730.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-73730.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-73730.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fissue-73730.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // check-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n trait Foo<'a, A>: Iterator<Item=A> {\n     fn bar<const N: usize>(&mut self) -> *const [A; N];"}, {"sha": "747664a0962997d365b2216ec69764420424690a", "filename": "src/test/ui/const-generics/type-dependent/non-local.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fnon-local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fnon-local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fnon-local.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,9 @@\n // aux-build:type_dependent_lib.rs\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n extern crate type_dependent_lib;\n "}, {"sha": "ec23ff1d2212273ac68ba935cf3cce89ae40bf3f", "filename": "src/test/ui/const-generics/type-dependent/qpath.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fqpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fqpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fqpath.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct A;\n impl A {"}, {"sha": "70af65509231015197c622acaec2bc3765f6f575", "filename": "src/test/ui/const-generics/type-dependent/simple.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fsimple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fsimple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Fsimple.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,6 +1,8 @@\n // run-pass\n-#![feature(const_generics)]\n-#![allow(incomplete_features)]\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct R;\n "}, {"sha": "a530e63449d4038958472f80b23eedd3beac8622", "filename": "src/test/ui/const-generics/type-dependent/type-mismatch.full.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,14 @@\n+error[E0308]: mismatched types\n+  --> $DIR/type-mismatch.rs:12:27\n+   |\n+LL |     assert_eq!(R.method::<1u16>(), 1);\n+   |                           ^^^^ expected `u8`, found `u16`\n+   |\n+help: change the type of the numeric literal from `u16` to `u8`\n+   |\n+LL |     assert_eq!(R.method::<1u8>(), 1);\n+   |                           ^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "a530e63449d4038958472f80b23eedd3beac8622", "filename": "src/test/ui/const-generics/type-dependent/type-mismatch.min.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,14 @@\n+error[E0308]: mismatched types\n+  --> $DIR/type-mismatch.rs:12:27\n+   |\n+LL |     assert_eq!(R.method::<1u16>(), 1);\n+   |                           ^^^^ expected `u8`, found `u16`\n+   |\n+help: change the type of the numeric literal from `u16` to `u8`\n+   |\n+LL |     assert_eq!(R.method::<1u8>(), 1);\n+   |                           ^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "67d80973f0397a46ab239ea019a4af092c78ce1b", "filename": "src/test/ui/const-generics/type-dependent/type-mismatch.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n struct R;\n "}, {"sha": "5bb7c5b0ea9bf9e4aa75c8bac8c39f56c6dd1bae", "filename": "src/test/ui/const-generics/type-dependent/type-mismatch.stderr", "status": "removed", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftype-dependent%2Ftype-mismatch.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,23 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/type-mismatch.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-error[E0308]: mismatched types\n-  --> $DIR/type-mismatch.rs:10:27\n-   |\n-LL |     assert_eq!(R.method::<1u16>(), 1);\n-   |                           ^^^^ expected `u8`, found `u16`\n-   |\n-help: change the type of the numeric literal from `u16` to `u8`\n-   |\n-LL |     assert_eq!(R.method::<1u8>(), 1);\n-   |                           ^^^\n-\n-error: aborting due to previous error; 1 warning emitted\n-\n-For more information about this error, try `rustc --explain E0308`."}, {"sha": "265e9ee618be14d8e99f93eebf25c1e8a93027f3", "filename": "src/test/ui/const-generics/types-mismatch-const-args.full.stderr", "status": "renamed", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.full.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.full.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.full.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,14 +1,5 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/types-mismatch-const-args.rs:1:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n error[E0308]: mismatched types\n-  --> $DIR/types-mismatch-const-args.rs:13:41\n+  --> $DIR/types-mismatch-const-args.rs:15:41\n    |\n LL |     let _: A<'a, u32, {2u32}, {3u32}> = A::<'a, u32, {4u32}, {3u32}> { data: PhantomData };\n    |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `2_u32`, found `4_u32`\n@@ -17,7 +8,7 @@ LL |     let _: A<'a, u32, {2u32}, {3u32}> = A::<'a, u32, {4u32}, {3u32}> { data\n               found type `4_u32`\n \n error[E0308]: mismatched types\n-  --> $DIR/types-mismatch-const-args.rs:15:41\n+  --> $DIR/types-mismatch-const-args.rs:17:41\n    |\n LL |     let _: A<'a, u16, {2u32}, {3u32}> = A::<'b, u32, {2u32}, {3u32}> { data: PhantomData };\n    |            --------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u16`, found `u32`\n@@ -27,6 +18,6 @@ LL |     let _: A<'a, u16, {2u32}, {3u32}> = A::<'b, u32, {2u32}, {3u32}> { data\n    = note: expected struct `A<'a, u16, {2u32}, {3u32}>`\n               found struct `A<'b, u32, {2u32}, {3u32}>`\n \n-error: aborting due to 2 previous errors; 1 warning emitted\n+error: aborting due to 2 previous errors\n \n For more information about this error, try `rustc --explain E0308`.", "previous_filename": "src/test/ui/const-generics/types-mismatch-const-args.stderr"}, {"sha": "27277f0c0befad0bab38dc682686de4c1a1565b3", "filename": "src/test/ui/const-generics/types-mismatch-const-args.min.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.min.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.min.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.min.stderr?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -0,0 +1,25 @@\n+error[E0308]: mismatched types\n+  --> $DIR/types-mismatch-const-args.rs:15:41\n+   |\n+LL |     let _: A<'a, u32, {2u32}, {3u32}> = A::<'a, u32, {4u32}, {3u32}> { data: PhantomData };\n+   |            --------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `2_u32`, found `4_u32`\n+   |            |\n+   |            expected due to this\n+   |\n+   = note: expected struct `A<'_, _, 2_u32, _>`\n+              found struct `A<'_, _, 4_u32, _>`\n+\n+error[E0308]: mismatched types\n+  --> $DIR/types-mismatch-const-args.rs:17:41\n+   |\n+LL |     let _: A<'a, u16, {2u32}, {3u32}> = A::<'b, u32, {2u32}, {3u32}> { data: PhantomData };\n+   |            --------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u16`, found `u32`\n+   |            |\n+   |            expected due to this\n+   |\n+   = note: expected struct `A<'a, u16, _, _>`\n+              found struct `A<'b, u32, _, _>`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "34b85304cc4d1a90185d4df1ff76eca2b5f36578", "filename": "src/test/ui/const-generics/types-mismatch-const-args.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ftypes-mismatch-const-args.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,5 +1,7 @@\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n // tests the diagnostic output of type mismatches for types that have const generics arguments.\n "}, {"sha": "45afbdc9ab10556d11ad202bbd99186bc36029e9", "filename": "src/test/ui/const-generics/uninferred-consts-during-codegen-1.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // run-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n use std::fmt;\n "}, {"sha": "f41628d5d8ee945d80d2b081daf65b4945c93193", "filename": "src/test/ui/const-generics/uninferred-consts-during-codegen-1.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-1.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/uninferred-consts-during-codegen-1.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}, {"sha": "65ae05e11982609398e2966f55410b2ee60738bf", "filename": "src/test/ui/const-generics/uninferred-consts-during-codegen-2.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2a25d759d3e014dc5e47872d8cff2a4a821b08/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.rs?ref=4e2a25d759d3e014dc5e47872d8cff2a4a821b08", "patch": "@@ -1,7 +1,8 @@\n // run-pass\n-\n-#![feature(const_generics)]\n-//~^ WARN the feature `const_generics` is incomplete\n+// revisions: full min\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n \n use std::fmt;\n "}, {"sha": "f1703bc3a2f8db1d0887e253675d4845c7ffd6b1", "filename": "src/test/ui/const-generics/uninferred-consts-during-codegen-2.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b4797cb598260b96dd8d6e47cd429210e14c1f6/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funinferred-consts-during-codegen-2.stderr?ref=3b4797cb598260b96dd8d6e47cd429210e14c1f6", "patch": "@@ -1,11 +0,0 @@\n-warning: the feature `const_generics` is incomplete and may not be safe to use and/or cause compiler crashes\n-  --> $DIR/uninferred-consts-during-codegen-2.rs:3:12\n-   |\n-LL | #![feature(const_generics)]\n-   |            ^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(incomplete_features)]` on by default\n-   = note: see issue #44580 <https://github.com/rust-lang/rust/issues/44580> for more information\n-\n-warning: 1 warning emitted\n-"}]}