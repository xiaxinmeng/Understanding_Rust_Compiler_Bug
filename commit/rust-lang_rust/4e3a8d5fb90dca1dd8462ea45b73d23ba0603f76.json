{"sha": "4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "node_id": "C_kwDOAAsO6NoAKDRlM2E4ZDVmYjkwZGNhMWRkODQ2MmVhNDViNzNkMjNiYTA2MDNmNzY", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-01-09T16:30:01Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-01-09T16:30:01Z"}, "message": "Move validate_simd_type from intrinsics to intrinsics::simd", "tree": {"sha": "754459d0545a983d17606e2a8325b4c2d80c58bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/754459d0545a983d17606e2a8325b4c2d80c58bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "html_url": "https://github.com/rust-lang/rust/commit/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9295b086f6e2a42a7739bd522051060b0c12f885", "url": "https://api.github.com/repos/rust-lang/rust/commits/9295b086f6e2a42a7739bd522051060b0c12f885", "html_url": "https://github.com/rust-lang/rust/commit/9295b086f6e2a42a7739bd522051060b0c12f885"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "36490c370009dea1c61b6f4de495a5f36645f30c", "filename": "src/intrinsics/mod.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76/src%2Fintrinsics%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76/src%2Fintrinsics%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsics%2Fmod.rs?ref=4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "patch": "@@ -91,15 +91,6 @@ macro validate_atomic_type($fx:ident, $intrinsic:ident, $span:ident, $ty:expr) {\n     }\n }\n \n-fn validate_simd_type(fx: &mut FunctionCx<'_, '_, '_>, intrinsic: Symbol, span: Span, ty: Ty<'_>) {\n-    if !ty.is_simd() {\n-        fx.tcx.sess.span_err(span, &format!(\"invalid monomorphization of `{}` intrinsic: expected SIMD input type, found non-SIMD `{}`\", intrinsic, ty));\n-        // Prevent verifier error\n-        crate::trap::trap_unreachable(fx, \"compilation should not have succeeded\");\n-        return;\n-    }\n-}\n-\n pub(crate) fn clif_vector_type<'tcx>(tcx: TyCtxt<'tcx>, layout: TyAndLayout<'tcx>) -> Option<Type> {\n     let (element, count) = match layout.abi {\n         Abi::Vector { element, count } => (element, count),"}, {"sha": "8bc4dd8e615b17b2e86253123754a8436ce910d7", "filename": "src/intrinsics/simd.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76/src%2Fintrinsics%2Fsimd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76/src%2Fintrinsics%2Fsimd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsics%2Fsimd.rs?ref=4e3a8d5fb90dca1dd8462ea45b73d23ba0603f76", "patch": "@@ -6,6 +6,15 @@ use rustc_span::Symbol;\n use super::*;\n use crate::prelude::*;\n \n+fn validate_simd_type(fx: &mut FunctionCx<'_, '_, '_>, intrinsic: Symbol, span: Span, ty: Ty<'_>) {\n+    if !ty.is_simd() {\n+        fx.tcx.sess.span_err(span, &format!(\"invalid monomorphization of `{}` intrinsic: expected SIMD input type, found non-SIMD `{}`\", intrinsic, ty));\n+        // Prevent verifier error\n+        crate::trap::trap_unreachable(fx, \"compilation should not have succeeded\");\n+        return;\n+    }\n+}\n+\n pub(super) fn codegen_simd_intrinsic_call<'tcx>(\n     fx: &mut FunctionCx<'_, '_, 'tcx>,\n     intrinsic: Symbol,"}]}