{"sha": "b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwZDg0Y2I4ZmFlZmVkZGU3YWNlNGZmMTUyYTJhMTM0MDhlNzllNWQ=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-05-29T06:30:48Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-05-29T06:30:48Z"}, "message": "Merge #1338\n\n1338: Highlight names correctly r=matklad a=lnicola\n\nPart of #1294.\n\nCo-authored-by: Lauren\u021biu Nicola <lnicola@dend.ro>", "tree": {"sha": "584ecc92533e0ee9046a831e4344b50c1becd2b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/584ecc92533e0ee9046a831e4344b50c1becd2b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "html_url": "https://github.com/rust-lang/rust/commit/b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0d84cb8faefedde7ace4ff152a2a13408e79e5d/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "0545e4781d3aba3083835cfa8afab07b7442a3aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/0545e4781d3aba3083835cfa8afab07b7442a3aa", "html_url": "https://github.com/rust-lang/rust/commit/0545e4781d3aba3083835cfa8afab07b7442a3aa"}, {"sha": "9146a64386b0ae0c5f680fcca5e0cd08a8844e85", "url": "https://api.github.com/repos/rust-lang/rust/commits/9146a64386b0ae0c5f680fcca5e0cd08a8844e85", "html_url": "https://github.com/rust-lang/rust/commit/9146a64386b0ae0c5f680fcca5e0cd08a8844e85"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "2a32b32413f2442437708aa5b716968564014c00", "filename": "crates/ra_ide_api/src/snapshots/highlighting.html", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b0d84cb8faefedde7ace4ff152a2a13408e79e5d/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/b0d84cb8faefedde7ace4ff152a2a13408e79e5d/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html?ref=b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "patch": "@@ -18,13 +18,14 @@\n .keyword\\.control { color: #DC8CC3; }\n </style>\n <pre><code><span class=\"attribute\">#</span><span class=\"attribute\">[</span><span class=\"attribute\">derive</span><span class=\"attribute\">(</span><span class=\"attribute\">Clone</span><span class=\"attribute\">,</span><span class=\"attribute\"> </span><span class=\"attribute\">Debug</span><span class=\"attribute\">)</span><span class=\"attribute\">]</span>\n-<span class=\"keyword\">struct</span> <span class=\"function\">Foo</span> {\n+<span class=\"keyword\">struct</span> <span class=\"type\">Foo</span> {\n     <span class=\"keyword\">pub</span> <span class=\"function\">x</span>: <span class=\"text\">i32</span>,\n     <span class=\"keyword\">pub</span> <span class=\"function\">y</span>: <span class=\"text\">i32</span>,\n }\n \n-<span class=\"keyword\">fn</span> <span class=\"function\">foo</span>&lt;<span class=\"type function\">T</span>&gt;() -&gt; <span class=\"type\">T</span> {\n+<span class=\"keyword\">fn</span> <span class=\"function\">foo</span>&lt;<span class=\"type type\">T</span>&gt;() -&gt; <span class=\"type\">T</span> {\n     <span class=\"macro\">unimplemented</span><span class=\"macro\">!</span>();\n+    <span class=\"function\">foo</span>::&lt;<span class=\"type text\">i32</span>&gt;();\n }\n \n <span class=\"comment\">// comment</span>"}, {"sha": "739b898d2ceaf1ccfde278c9676b0b2bb5202662", "filename": "crates/ra_ide_api/src/syntax_highlighting.rs", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/b0d84cb8faefedde7ace4ff152a2a13408e79e5d/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0d84cb8faefedde7ace4ff152a2a13408e79e5d/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs?ref=b0d84cb8faefedde7ace4ff152a2a13408e79e5d", "patch": "@@ -1,6 +1,8 @@\n use rustc_hash::{FxHashSet, FxHashMap};\n \n-use ra_syntax::{ast, AstNode, TextRange, Direction, SmolStr, SyntaxKind, SyntaxKind::*, SyntaxElement, T};\n+use ra_syntax::{\n+    ast, AstNode, TextRange, Direction, SmolStr, SyntaxKind, SyntaxKind::*, SyntaxElement, T,\n+};\n use ra_db::SourceDatabase;\n use ra_prof::profile;\n \n@@ -116,6 +118,19 @@ pub(crate) fn highlight(db: &RootDatabase, file_id: FileId) -> Vec<HighlightedRa\n                             calc_binding_hash(file_id, &text, *shadow_count)\n                         });\n                         \"variable\"\n+                    } else if name\n+                        .syntax()\n+                        .parent()\n+                        .map(|x| {\n+                            x.kind() == TYPE_PARAM\n+                                || x.kind() == STRUCT_DEF\n+                                || x.kind() == ENUM_DEF\n+                                || x.kind() == TRAIT_DEF\n+                                || x.kind() == TYPE_ALIAS_DEF\n+                        })\n+                        .unwrap_or(false)\n+                    {\n+                        \"type\"\n                     } else {\n                         \"function\"\n                     }\n@@ -263,6 +278,7 @@ struct Foo {\n \n fn foo<T>() -> T {\n     unimplemented!();\n+    foo::<i32>();\n }\n \n // comment"}]}