{"sha": "fc0a9e266b9d663b1eeca3963495c68ca3384be2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjMGE5ZTI2NmI5ZDY2M2IxZWVjYTM5NjM0OTVjNjhjYTMzODRiZTI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-02-10T11:00:23Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-02-10T11:00:23Z"}, "message": "G: introduce names", "tree": {"sha": "324632ed4e19f1b2499d8d1be9b4bc631878a3ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/324632ed4e19f1b2499d8d1be9b4bc631878a3ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc0a9e266b9d663b1eeca3963495c68ca3384be2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc0a9e266b9d663b1eeca3963495c68ca3384be2", "html_url": "https://github.com/rust-lang/rust/commit/fc0a9e266b9d663b1eeca3963495c68ca3384be2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc0a9e266b9d663b1eeca3963495c68ca3384be2/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3b009b6d24225ad2add62fce8206918fceba3eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3b009b6d24225ad2add62fce8206918fceba3eb", "html_url": "https://github.com/rust-lang/rust/commit/c3b009b6d24225ad2add62fce8206918fceba3eb"}], "stats": {"total": 60, "additions": 42, "deletions": 18}, "files": [{"sha": "0130b7b37dcc35a0777e84648d6af823d0a453b3", "filename": "grammar.ron", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/grammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/grammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/grammar.ron?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -118,5 +118,7 @@ Grammar(\n         \"LIFETIME_PARAM\",\n         \"TYPE_PARAM\",\n         \"ABI\",\n+        \"NAME\",\n+        \"NAME_REF\",\n     ]\n )"}, {"sha": "d671568b1f83e635f3124420ab203dab97353bb3", "filename": "src/parser/grammar/items/mod.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -196,8 +196,9 @@ fn extern_crate_item(p: &mut Parser) {\n     p.bump();\n     assert!(p.at(CRATE_KW));\n     p.bump();\n-\n-    p.expect(IDENT) && alias(p) && p.expect(SEMI);\n+    name(p);\n+    alias(p);\n+    p.expect(SEMI);\n }\n \n fn extern_block(p: &mut Parser) {"}, {"sha": "6e82d7c696f7f3e913bfcaebe0733f6c193f481a", "filename": "src/parser/grammar/mod.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fparser%2Fgrammar%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fparser%2Fgrammar%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fmod.rs?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -44,12 +44,22 @@ fn alias(p: &mut Parser) -> bool {\n     if p.at(AS_KW) {\n         let alias = p.start();\n         p.bump();\n-        p.expect(IDENT);\n+        name(p);\n         alias.complete(p, ALIAS);\n     }\n     true //FIXME: return false if three are errors\n }\n \n+fn name(p: &mut Parser) {\n+    if p.at(IDENT) {\n+        let m = p.start();\n+        p.bump();\n+        m.complete(p, NAME);\n+    } else {\n+        p.error(\"expected a name\");\n+    }\n+}\n+\n fn error_block(p: &mut Parser, message: &str) {\n     assert!(p.at(L_CURLY));\n     let err = p.start();"}, {"sha": "7450f9d6f2d957f7818e3d95d08ac8ac3f5497d7", "filename": "src/syntax_kinds.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fsyntax_kinds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/src%2Fsyntax_kinds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsyntax_kinds.rs?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -116,6 +116,8 @@ pub enum SyntaxKind {\n     LIFETIME_PARAM,\n     TYPE_PARAM,\n     ABI,\n+    NAME,\n+    NAME_REF,\n \n     // Technical SyntaxKinds: they appear temporally during parsing,\n     // but never end up in the final tree\n@@ -239,6 +241,8 @@ impl SyntaxKind {\n             LIFETIME_PARAM => &SyntaxInfo { name: \"LIFETIME_PARAM\" },\n             TYPE_PARAM => &SyntaxInfo { name: \"TYPE_PARAM\" },\n             ABI => &SyntaxInfo { name: \"ABI\" },\n+            NAME => &SyntaxInfo { name: \"NAME\" },\n+            NAME_REF => &SyntaxInfo { name: \"NAME_REF\" },\n \n             TOMBSTONE => &SyntaxInfo { name: \"TOMBSTONE\" },\n             EOF => &SyntaxInfo { name: \"EOF\" },"}, {"sha": "cbdf5aba11515ada73a1a08a651d07f935b71a1c", "filename": "tests/data/parser/inline/0005_extern_crate.txt", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Finline%2F0005_extern_crate.txt", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Finline%2F0005_extern_crate.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0005_extern_crate.txt?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -3,7 +3,8 @@ FILE@[0; 18)\n     EXTERN_KW@[0; 6)\n     WHITESPACE@[6; 7)\n     CRATE_KW@[7; 12)\n-    WHITESPACE@[12; 13)\n-    IDENT@[13; 16) \"foo\"\n+    NAME@[12; 16)\n+      WHITESPACE@[12; 13)\n+      IDENT@[13; 16) \"foo\"\n     SEMI@[16; 17)\n     WHITESPACE@[17; 18)"}, {"sha": "33ce2ae658d5d5f891ad843653e7a561180b0097", "filename": "tests/data/parser/ok/0007_extern_crate.txt", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Fok%2F0007_extern_crate.txt", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Fok%2F0007_extern_crate.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0007_extern_crate.txt?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -3,20 +3,23 @@ FILE@[0; 43)\n     EXTERN_KW@[0; 6)\n     WHITESPACE@[6; 7)\n     CRATE_KW@[7; 12)\n-    WHITESPACE@[12; 13)\n-    IDENT@[13; 16) \"foo\"\n+    NAME@[12; 16)\n+      WHITESPACE@[12; 13)\n+      IDENT@[13; 16) \"foo\"\n     SEMI@[16; 17)\n     WHITESPACE@[17; 18)\n   EXTERN_CRATE_ITEM@[18; 43)\n     EXTERN_KW@[18; 24)\n     WHITESPACE@[24; 25)\n     CRATE_KW@[25; 30)\n-    WHITESPACE@[30; 31)\n-    IDENT@[31; 34) \"foo\"\n-    ALIAS@[34; 41)\n+    NAME@[30; 35)\n+      WHITESPACE@[30; 31)\n+      IDENT@[31; 34) \"foo\"\n       WHITESPACE@[34; 35)\n+    ALIAS@[35; 41)\n       AS_KW@[35; 37)\n-      WHITESPACE@[37; 38)\n-      IDENT@[38; 41) \"bar\"\n+      NAME@[37; 41)\n+        WHITESPACE@[37; 38)\n+        IDENT@[38; 41) \"bar\"\n     SEMI@[41; 42)\n     WHITESPACE@[42; 43)"}, {"sha": "28f5f789e8a321a15d694103707d896ebf0c6cd6", "filename": "tests/data/parser/ok/0015_use_tree.txt", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Fok%2F0015_use_tree.txt", "raw_url": "https://github.com/rust-lang/rust/raw/fc0a9e266b9d663b1eeca3963495c68ca3384be2/tests%2Fdata%2Fparser%2Fok%2F0015_use_tree.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0015_use_tree.txt?ref=fc0a9e266b9d663b1eeca3963495c68ca3384be2", "patch": "@@ -9,8 +9,9 @@ FILE@[0; 55)\n           WHITESPACE@[7; 8)\n       ALIAS@[8; 14)\n         AS_KW@[8; 10)\n-        WHITESPACE@[10; 11)\n-        IDENT@[11; 14) \"bar\"\n+        NAME@[10; 14)\n+          WHITESPACE@[10; 11)\n+          IDENT@[11; 14) \"bar\"\n     SEMI@[14; 15)\n     WHITESPACE@[15; 16)\n   USE_ITEM@[16; 55)\n@@ -29,8 +30,9 @@ FILE@[0; 55)\n             WHITESPACE@[27; 28)\n         ALIAS@[28; 32)\n           AS_KW@[28; 30)\n-          WHITESPACE@[30; 31)\n-          IDENT@[31; 32) \"b\"\n+          NAME@[30; 32)\n+            WHITESPACE@[30; 31)\n+            IDENT@[31; 32) \"b\"\n       COMMA@[32; 33)\n       USE_TREE@[33; 35)\n         WHITESPACE@[33; 34)\n@@ -50,8 +52,9 @@ FILE@[0; 55)\n             WHITESPACE@[47; 48)\n         ALIAS@[48; 52)\n           AS_KW@[48; 50)\n-          WHITESPACE@[50; 51)\n-          IDENT@[51; 52) \"x\"\n+          NAME@[50; 52)\n+            WHITESPACE@[50; 51)\n+            IDENT@[51; 52) \"x\"\n       R_CURLY@[52; 53)\n     SEMI@[53; 54)\n     WHITESPACE@[54; 55)"}]}