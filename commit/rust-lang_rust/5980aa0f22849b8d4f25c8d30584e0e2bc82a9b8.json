{"sha": "5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5ODBhYTBmMjI4NDliOGQ0ZjI1YzhkMzA1ODRlMGUyYmM4MmE5Yjg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-18T07:51:22Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-18T07:51:22Z"}, "message": "auto merge of #15727 : fhahn/rust/remove-some-unwraps, r=alexcrichton\n\nWhen looking through the `btree` code, I stumbled over a couple of `unwraps` that could be avoided.", "tree": {"sha": "b55218e242f945e860cc08150353f511aaa294eb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b55218e242f945e860cc08150353f511aaa294eb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8", "html_url": "https://github.com/rust-lang/rust/commit/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8067d03679a7526b33cfc921432beb4eb9b5271b", "url": "https://api.github.com/repos/rust-lang/rust/commits/8067d03679a7526b33cfc921432beb4eb9b5271b", "html_url": "https://github.com/rust-lang/rust/commit/8067d03679a7526b33cfc921432beb4eb9b5271b"}, {"sha": "1565df1ccf950621b43f18949480d41cf3f6b37a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1565df1ccf950621b43f18949480d41cf3f6b37a", "html_url": "https://github.com/rust-lang/rust/commit/1565df1ccf950621b43f18949480d41cf3f6b37a"}], "stats": {"total": 24, "additions": 12, "deletions": 12}, "files": [{"sha": "e4605527ce55011bc64aedf178de136acef067b9", "filename": "src/libcollections/btree.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8/src%2Flibcollections%2Fbtree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8/src%2Flibcollections%2Fbtree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree.rs?ref=5980aa0f22849b8d4f25c8d30584e0e2bc82a9b8", "patch": "@@ -365,12 +365,12 @@ impl<K: Clone + Ord, V: Clone> Leaf<K, V> {\n                 return (Node::new_leaf(self.clone().elts), false);\n             }\n             //If there is an index, insert at that index.\n-            _ => {\n-                if index.unwrap() >= self.elts.len() {\n+            Some(i) => {\n+                if i >= self.elts.len() {\n                     self.elts.push(to_insert.clone());\n                 }\n                 else {\n-                    self.elts.insert(index.unwrap(), to_insert.clone());\n+                    self.elts.insert(i, to_insert.clone());\n                 }\n             }\n         }\n@@ -526,16 +526,16 @@ impl<K: Clone + Ord, V: Clone> Branch<K, V> {\n                                          self.clone().rightmost_child),\n                         outcome);\n             }\n-            _ => {\n-                if index.unwrap() == self.elts.len() {\n+            Some(i) => {\n+                if i == self.elts.len() {\n                     let new_outcome = self.clone().rightmost_child.insert(k.clone(),\n                                                                        v.clone(),\n                                                                        ub.clone());\n                     new_branch = new_outcome.clone().val0();\n                     outcome = new_outcome.val1();\n                 }\n                 else {\n-                    let new_outcome = self.elts.get(index.unwrap()).left.clone().insert(k.clone(),\n+                    let new_outcome = self.elts.get(i).left.clone().insert(k.clone(),\n                                                                                  v.clone(),\n                                                                                  ub.clone());\n                     new_branch = new_outcome.clone().val0();\n@@ -547,11 +547,11 @@ impl<K: Clone + Ord, V: Clone> Branch<K, V> {\n                     //If we have a leaf, we do not need to resize the tree,\n                     //so we can return false.\n                     LeafNode(..) => {\n-                        if index.unwrap() == self.elts.len() {\n+                        if i == self.elts.len() {\n                             self.rightmost_child = box new_branch.clone();\n                         }\n                         else {\n-                            self.elts.get_mut(index.unwrap()).left = box new_branch.clone();\n+                            self.elts.get_mut(i).left = box new_branch.clone();\n                         }\n                         return (Node::new_branch(self.clone().elts,\n                                                  self.clone().rightmost_child),\n@@ -589,13 +589,13 @@ impl<K: Clone + Ord, V: Clone> Branch<K, V> {\n                                                      self.clone().rightmost_child),\n                                     false);\n                             }\n-                        _ => {\n-                            self.elts.insert(new_elt_index.unwrap(), new_elt);\n-                            if new_elt_index.unwrap() + 1 >= self.elts.len() {\n+                        Some(i) => {\n+                            self.elts.insert(i, new_elt);\n+                            if i + 1 >= self.elts.len() {\n                                 self.rightmost_child = branch.clone().rightmost_child;\n                             }\n                             else {\n-                                self.elts.get_mut(new_elt_index.unwrap() + 1).left =\n+                                self.elts.get_mut(i + 1).left =\n                                     branch.clone().rightmost_child;\n                             }\n                         }"}]}