{"sha": "c0e3f4b8bbf10cc308823c98913b942b75c6a543", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwZTNmNGI4YmJmMTBjYzMwODgyM2M5ODkxM2I5NDJiNzVjNmE1NDM=", "commit": {"author": {"name": "John Ginger", "email": "JohnGinger@users.noreply.github.com", "date": "2018-12-07T14:15:36Z"}, "committer": {"name": "John Ginger", "email": "JohnGinger@users.noreply.github.com", "date": "2018-12-07T14:15:36Z"}, "message": "Change to give a help message", "tree": {"sha": "656e6213988f2853e5d7537c00dd39876447caac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/656e6213988f2853e5d7537c00dd39876447caac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0e3f4b8bbf10cc308823c98913b942b75c6a543", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0e3f4b8bbf10cc308823c98913b942b75c6a543", "html_url": "https://github.com/rust-lang/rust/commit/c0e3f4b8bbf10cc308823c98913b942b75c6a543", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0e3f4b8bbf10cc308823c98913b942b75c6a543/comments", "author": {"login": "JohnGinger", "id": 2624571, "node_id": "MDQ6VXNlcjI2MjQ1NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2624571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnGinger", "html_url": "https://github.com/JohnGinger", "followers_url": "https://api.github.com/users/JohnGinger/followers", "following_url": "https://api.github.com/users/JohnGinger/following{/other_user}", "gists_url": "https://api.github.com/users/JohnGinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnGinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnGinger/subscriptions", "organizations_url": "https://api.github.com/users/JohnGinger/orgs", "repos_url": "https://api.github.com/users/JohnGinger/repos", "events_url": "https://api.github.com/users/JohnGinger/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnGinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnGinger", "id": 2624571, "node_id": "MDQ6VXNlcjI2MjQ1NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/2624571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnGinger", "html_url": "https://github.com/JohnGinger", "followers_url": "https://api.github.com/users/JohnGinger/followers", "following_url": "https://api.github.com/users/JohnGinger/following{/other_user}", "gists_url": "https://api.github.com/users/JohnGinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnGinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnGinger/subscriptions", "organizations_url": "https://api.github.com/users/JohnGinger/orgs", "repos_url": "https://api.github.com/users/JohnGinger/repos", "events_url": "https://api.github.com/users/JohnGinger/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnGinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70536d4b4c8287925ccc4a8255f3d42c70aed6e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/70536d4b4c8287925ccc4a8255f3d42c70aed6e3", "html_url": "https://github.com/rust-lang/rust/commit/70536d4b4c8287925ccc4a8255f3d42c70aed6e3"}], "stats": {"total": 32, "additions": 19, "deletions": 13}, "files": [{"sha": "2136cd27e4306df1460d040f3a0611001d091f1a", "filename": "src/librustc/middle/liveness.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Flibrustc%2Fmiddle%2Fliveness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fliveness.rs?ref=c0e3f4b8bbf10cc308823c98913b942b75c6a543", "patch": "@@ -1657,13 +1657,15 @@ impl<'a, 'tcx> Liveness<'a, 'tcx> {\n     fn report_dead_assign(&self, hir_id: HirId, sp: Span, var: Variable, is_argument: bool) {\n         if let Some(name) = self.should_warn(var) {\n             if is_argument {\n-                self.ir.tcx.lint_hir(lint::builtin::UNUSED_ASSIGNMENTS, hir_id, sp,\n-                    &format!(\"value passed to `{}` is never read\n-                     (maybe it is overwritten before being read)\", name));\n+                self.ir.tcx.struct_span_lint_hir(lint::builtin::UNUSED_ASSIGNMENTS, hir_id, sp,\n+                &format!(\"value passed to `{}` is never read\", name))\n+                .help(\"maybe it is overwritten before being read?\")\n+                .emit();\n             } else {\n-                self.ir.tcx.lint_hir(lint::builtin::UNUSED_ASSIGNMENTS, hir_id, sp,\n-                    &format!(\"value assigned to `{}` is never read\n-                     (maybe it is overwritten before being read)\", name));\n+                self.ir.tcx.struct_span_lint_hir(lint::builtin::UNUSED_ASSIGNMENTS, hir_id, sp,\n+                &format!(\"value assigned to `{}` is never read\", name))\n+                .help(\"maybe it is overwritten before being read?\")\n+                .emit();\n             }\n         }\n     }"}, {"sha": "6b9e1dc70573ee58ffe0887bbaa6e0db04602ee8", "filename": "src/test/ui/lint/issue-47390-unused-variable-in-struct-pattern.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Flint%2Fissue-47390-unused-variable-in-struct-pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Flint%2Fissue-47390-unused-variable-in-struct-pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fissue-47390-unused-variable-in-struct-pattern.stderr?ref=c0e3f4b8bbf10cc308823c98913b942b75c6a543", "patch": "@@ -44,7 +44,6 @@ LL |                          mut hours_are_suns,\n    = note: consider using `_hours_are_suns` instead\n \n warning: value assigned to `hours_are_suns` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/issue-47390-unused-variable-in-struct-pattern.rs:50:9\n    |\n LL |         hours_are_suns = false;\n@@ -56,6 +55,7 @@ note: lint level defined here\n LL | #![warn(unused)] // UI tests pass `-A unused` (#43896)\n    |         ^^^^^^\n    = note: #[warn(unused_assignments)] implied by #[warn(unused)]\n+   = help: maybe it is overwritten before being read?\n \n warning: unused variable: `fire`\n   --> $DIR/issue-47390-unused-variable-in-struct-pattern.rs:54:32"}, {"sha": "6e43cccdccff230b5b9916021bb0958e0e607d41", "filename": "src/test/ui/liveness/liveness-dead.stderr", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Fliveness%2Fliveness-dead.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Fliveness%2Fliveness-dead.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fliveness%2Fliveness-dead.stderr?ref=c0e3f4b8bbf10cc308823c98913b942b75c6a543", "patch": "@@ -1,5 +1,4 @@\n error: value assigned to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-dead.rs:19:13\n    |\n LL |     let mut x: isize = 3; //~ ERROR: value assigned to `x` is never read\n@@ -10,27 +9,31 @@ note: lint level defined here\n    |\n LL | #![deny(unused_assignments)]\n    |         ^^^^^^^^^^^^^^^^^^\n+   = help: maybe it is overwritten before being read?\n \n error: value assigned to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-dead.rs:27:5\n    |\n LL |     x = 4; //~ ERROR: value assigned to `x` is never read\n    |     ^\n+   |\n+   = help: maybe it is overwritten before being read?\n \n error: value passed to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-dead.rs:30:11\n    |\n LL | fn f4(mut x: i32) { //~ ERROR: value passed to `x` is never read\n    |           ^\n+   |\n+   = help: maybe it is overwritten before being read?\n \n error: value assigned to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-dead.rs:37:5\n    |\n LL |     x = 4; //~ ERROR: value assigned to `x` is never read\n    |     ^\n+   |\n+   = help: maybe it is overwritten before being read?\n \n error: aborting due to 4 previous errors\n "}, {"sha": "35ccc79a19ac094f3210762d67dcc006daa2e8a6", "filename": "src/test/ui/liveness/liveness-unused.stderr", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Fliveness%2Fliveness-unused.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c0e3f4b8bbf10cc308823c98913b942b75c6a543/src%2Ftest%2Fui%2Fliveness%2Fliveness-unused.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fliveness%2Fliveness-unused.stderr?ref=c0e3f4b8bbf10cc308823c98913b942b75c6a543", "patch": "@@ -50,7 +50,6 @@ LL |     let mut x = 3;\n    = note: consider using `_x` instead\n \n error: value assigned to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-unused.rs:42:5\n    |\n LL |     x += 4;\n@@ -61,6 +60,7 @@ note: lint level defined here\n    |\n LL | #![deny(unused_assignments)]\n    |         ^^^^^^^^^^^^^^^^^^\n+   = help: maybe it is overwritten before being read?\n \n error: variable `z` is assigned to, but never used\n   --> $DIR/liveness-unused.rs:47:13\n@@ -103,11 +103,12 @@ LL |     let x;\n    = note: consider using `_x` instead\n \n error: value assigned to `x` is never read\n-                     (maybe it is overwritten before being read)\n   --> $DIR/liveness-unused.rs:126:9\n    |\n LL |         x = 0;  //~ ERROR value assigned to `x` is never read\n    |         ^\n+   |\n+   = help: maybe it is overwritten before being read?\n \n error: aborting due to 13 previous errors\n "}]}