{"sha": "5879ee1ecaa5738d93613c7bd14bdd09ab48450d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4NzllZTFlY2FhNTczOGQ5MzYxM2M3YmQxNGJkZDA5YWI0ODQ1MGQ=", "commit": {"author": {"name": "Andrea Canciani", "email": "ranma42@gmail.com", "date": "2016-04-14T11:02:47Z"}, "committer": {"name": "Andrea Canciani", "email": "ranma42@gmail.com", "date": "2016-04-19T15:48:51Z"}, "message": "Distinguish different `vfp?` features\n\nThe different generations of ARM floating point VFP correspond to the\nLLVM CPU features named `vfp2`, `vfp3`, and `vfp4`; they are now\nexposed in Rust under the same names.\n\nThis commit fixes some crashes that would occour when checking if the\n`vfp` feature exists (the crash occurs because the linear scan of the\nLLVM feature goes past the end of the features whenever it searches\nfor a feature that does not exist in the LLVM tables).", "tree": {"sha": "0bf2ac8255b4e938cd7bfd444fa6aa1a938b85d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0bf2ac8255b4e938cd7bfd444fa6aa1a938b85d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5879ee1ecaa5738d93613c7bd14bdd09ab48450d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5879ee1ecaa5738d93613c7bd14bdd09ab48450d", "html_url": "https://github.com/rust-lang/rust/commit/5879ee1ecaa5738d93613c7bd14bdd09ab48450d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5879ee1ecaa5738d93613c7bd14bdd09ab48450d/comments", "author": {"login": "ranma42", "id": 1506030, "node_id": "MDQ6VXNlcjE1MDYwMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ranma42", "html_url": "https://github.com/ranma42", "followers_url": "https://api.github.com/users/ranma42/followers", "following_url": "https://api.github.com/users/ranma42/following{/other_user}", "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}", "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions", "organizations_url": "https://api.github.com/users/ranma42/orgs", "repos_url": "https://api.github.com/users/ranma42/repos", "events_url": "https://api.github.com/users/ranma42/events{/privacy}", "received_events_url": "https://api.github.com/users/ranma42/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ranma42", "id": 1506030, "node_id": "MDQ6VXNlcjE1MDYwMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1506030?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ranma42", "html_url": "https://github.com/ranma42", "followers_url": "https://api.github.com/users/ranma42/followers", "following_url": "https://api.github.com/users/ranma42/following{/other_user}", "gists_url": "https://api.github.com/users/ranma42/gists{/gist_id}", "starred_url": "https://api.github.com/users/ranma42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ranma42/subscriptions", "organizations_url": "https://api.github.com/users/ranma42/orgs", "repos_url": "https://api.github.com/users/ranma42/repos", "events_url": "https://api.github.com/users/ranma42/events{/privacy}", "received_events_url": "https://api.github.com/users/ranma42/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f942c28900159152358dd2f5718262464c09dc52", "url": "https://api.github.com/repos/rust-lang/rust/commits/f942c28900159152358dd2f5718262464c09dc52", "html_url": "https://github.com/rust-lang/rust/commit/f942c28900159152358dd2f5718262464c09dc52"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "73b2b85a352ad9f205235cbd5eda228bfc75da7f", "filename": "src/librustc_driver/target_features.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5879ee1ecaa5738d93613c7bd14bdd09ab48450d/src%2Flibrustc_driver%2Ftarget_features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5879ee1ecaa5738d93613c7bd14bdd09ab48450d/src%2Flibrustc_driver%2Ftarget_features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Ftarget_features.rs?ref=5879ee1ecaa5738d93613c7bd14bdd09ab48450d", "patch": "@@ -24,9 +24,15 @@ use libc::c_char;\n pub fn add_configuration(cfg: &mut ast::CrateConfig, sess: &Session) {\n     let target_machine = create_target_machine(sess);\n \n+    // WARNING: the features must be known to LLVM or the feature\n+    // detection code will walk past the end of the feature array,\n+    // leading to crashes.\n+\n     let arm_whitelist = [\n         \"neon\\0\",\n-        \"vfp\\0\",\n+        \"vfp2\\0\",\n+        \"vfp3\\0\",\n+        \"vfp4\\0\",\n     ];\n \n     let x86_whitelist = ["}]}