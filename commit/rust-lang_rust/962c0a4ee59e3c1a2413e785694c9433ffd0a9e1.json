{"sha": "962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "node_id": "C_kwDOAAsO6NoAKDk2MmMwYTRlZTU5ZTNjMWEyNDEzZTc4NTY5NGM5NDMzZmZkMGE5ZTE", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2021-12-04T01:09:04Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-01-08T14:49:41Z"}, "message": "Make source links look cleaner\n\nChange from syntaxy-looking [src] to the plain word \"source\".", "tree": {"sha": "fb7535f5fc4d26d40c8192616aeb65bf5d9178e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb7535f5fc4d26d40c8192616aeb65bf5d9178e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "html_url": "https://github.com/rust-lang/rust/commit/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a77cc64af491a31db224109a76b9b81cd26cd07c", "url": "https://api.github.com/repos/rust-lang/rust/commits/a77cc64af491a31db224109a76b9b81cd26cd07c", "html_url": "https://github.com/rust-lang/rust/commit/a77cc64af491a31db224109a76b9b81cd26cd07c"}], "stats": {"total": 175, "additions": 96, "deletions": 79}, "files": [{"sha": "4ba4e2a528e60a381d254b333185a1b98e34a818", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -35,8 +35,8 @@\n //! development you may want to press the `[-]` button near the top of the\n //! page to collapse it into a more skimmable view.\n //!\n-//! While you are looking at that `[-]` button also notice the `[src]`\n-//! button. Rust's API documentation comes with the source code and you are\n+//! While you are looking at that `[-]` button also notice the `source`\n+//! link. Rust's API documentation comes with the source code and you are\n //! encouraged to read it. The standard library source is generally high\n //! quality and a peek behind the curtains is often enlightening.\n //!"}, {"sha": "2ae203e0d2f8866c339a46ead3465345a216d79b", "filename": "src/librustdoc/html/render/context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -65,7 +65,7 @@ crate struct Context<'tcx> {\n     ///\n     /// [#82381]: https://github.com/rust-lang/rust/issues/82381\n     crate shared: Rc<SharedContext<'tcx>>,\n-    /// This flag indicates whether `[src]` links should be generated or not. If\n+    /// This flag indicates whether source links should be generated or not. If\n     /// the source files are present in the html rendering, then this will be\n     /// `true`.\n     crate include_sources: bool,"}, {"sha": "1af847b81d507383ec882ca3572050f58abc0151", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -182,7 +182,7 @@ impl StylePath {\n \n fn write_srclink(cx: &Context<'_>, item: &clean::Item, buf: &mut Buffer) {\n     if let Some(l) = cx.src_href(item) {\n-        write!(buf, \"<a class=\\\"srclink\\\" href=\\\"{}\\\" title=\\\"goto source code\\\">[src]</a>\", l)\n+        write!(buf, \"<a class=\\\"srclink\\\" href=\\\"{}\\\" title=\\\"goto source code\\\">source</a>\", l)\n     }\n }\n \n@@ -807,7 +807,7 @@ fn render_stability_since_raw(\n     const_stability: Option<ConstStability>,\n     containing_ver: Option<Symbol>,\n     containing_const_ver: Option<Symbol>,\n-) {\n+) -> bool {\n     let ver = ver.filter(|inner| !inner.is_empty());\n \n     match (ver, const_stability) {\n@@ -850,8 +850,9 @@ fn render_stability_since_raw(\n                 v\n             );\n         }\n-        _ => {}\n+        _ => return false,\n     }\n+    true\n }\n \n fn render_assoc_item(\n@@ -1640,7 +1641,7 @@ fn render_impl(\n }\n \n // Render the items that appear on the right side of methods, impls, and\n-// associated types. For example \"1.0.0 (const: 1.39.0) [src]\".\n+// associated types. For example \"1.0.0 (const: 1.39.0) \u00b7 source\".\n fn render_rightside(\n     w: &mut Buffer,\n     cx: &Context<'_>,\n@@ -1658,13 +1659,16 @@ fn render_rightside(\n     };\n \n     write!(w, \"<div class=\\\"rightside\\\">\");\n-    render_stability_since_raw(\n+    let has_stability = render_stability_since_raw(\n         w,\n         item.stable_since(tcx),\n         const_stability,\n         containing_item.stable_since(tcx),\n         const_stable_since,\n     );\n+    if has_stability {\n+        w.write_str(\" \u00b7 \");\n+    }\n \n     write_srclink(cx, item, w);\n     w.write_str(\"</div>\");"}, {"sha": "9f2830ba54215bf85500f80ba8e747524a03a81e", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -108,10 +108,10 @@ pub(super) fn print_item(\n     );\n     let stability_since_raw: String = stability_since_raw.into_inner();\n \n-    // Write `src` tag\n+    // Write source tag\n     //\n     // When this item is part of a `crate use` in a downstream crate, the\n-    // [src] link in the downstream documentation will actually come back to\n+    // source link in the downstream documentation will actually come back to\n     // this page, and this link will be auto-clicked. The `id` attribute is\n     // used to find the link to auto-click.\n     let src_href =\n@@ -1467,7 +1467,7 @@ fn render_stability_since(\n         item.const_stability(tcx),\n         containing_item.stable_since(tcx),\n         containing_item.const_stable_since(tcx),\n-    )\n+    );\n }\n \n fn compare_impl<'a, 'b>(lhs: &'a &&Impl, rhs: &'b &&Impl, cx: &Context<'_>) -> Ordering {"}, {"sha": "49c0726dbca034470011c79c528c1c474cd88c73", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 20, "deletions": 12, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -137,17 +137,25 @@ h1, h2, h3, h4 {\n \tmargin: 15px 0 5px 0;\n }\n h1.fqn {\n+\tmargin: 0;\n+\tpadding: 0;\n+}\n+.main-heading {\n \tdisplay: flex;\n-\tborder-bottom: 1px dashed;\n-\tmargin-top: 0;\n+\tborder-bottom: 1px dashed #DDDDDD;\n+\tpadding-bottom: 6px;\n+\tmargin-bottom: 15px;\n \n \t/* workaround to keep flex from breaking below 700 px width due to the float: right on the nav\n \t   above the h1 */\n \tpadding-left: 1px;\n }\n-h1.fqn > .in-band > a:hover {\n+.main-heading a:hover {\n \ttext-decoration: underline;\n }\n+#toggle-all-docs {\n+\ttext-decoration: none;\n+}\n /* The only headings that get underlines are:\n \t Markdown-generated headings within the top-doc\n \t Rustdoc-generated h2 section headings (e.g. \"Implementations\", \"Required Methods\", etc)\n@@ -195,11 +203,13 @@ h1, h2, h3, h4, h5, h6,\n .sidebar, a.source, .search-input, .search-results .result-name,\n .content table td:first-child > a,\n .item-left > a,\n-div.item-list .out-of-band, span.since,\n+.out-of-band,\n+span.since,\n #source-sidebar, #sidebar-toggle,\n details.rustdoc-toggle > summary::before,\n div.impl-items > div:not(.docblock):not(.item-info),\n-.content ul.crate a.crate, a.srclink,\n+.content ul.crate a.crate,\n+a.srclink,\n /* This selector is for the items listed in the \"all items\" page. */\n #main-content > ul.docblock > li > a {\n \tfont-family: \"Fira Sans\", Arial, NanumBarunGothic, sans-serif;\n@@ -605,10 +615,12 @@ nav.sub {\n .content .out-of-band {\n \tflex-grow: 0;\n \ttext-align: right;\n-\tfont-size: 1.4375rem;\n-\tmargin: 0px;\n+\tmargin-left: auto;\n+\tmargin-right: 0;\n+\tfont-size: 1.15rem;\n \tpadding: 0 0 0 12px;\n \tfont-weight: normal;\n+\tfloat: right;\n }\n \n .method > .code-header, .trait-impl > .code-header, .invisible > .code-header {\n@@ -1072,7 +1084,7 @@ body.blur > :not(#help) {\n \tfont-size: initial;\n }\n \n-.impl-items .since, .impl .since, .methods .since {\n+.rightside {\n \tpadding-left: 12px;\n \tpadding-right: 2px;\n \tposition: initial;\n@@ -1144,10 +1156,6 @@ a.test-arrow:hover{\n \tfont-weight: 300;\n }\n \n-.since + .srclink {\n-\tpadding-left: 10px;\n-}\n-\n .item-spacer {\n \twidth: 100%;\n \theight: 12px;"}, {"sha": "39df523c9d50e906453e0518c868c20f8fb6ba52", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -222,7 +222,7 @@ nav.main .separator {\n a {\n \tcolor: #39AFD7;\n }\n-a.srclink,\n+\n a#toggle-all-docs,\n a.anchor,\n .small-section-header a,"}, {"sha": "35fde2b275eb7ee56e6de94bbe52f314d24fa8e1", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -180,7 +180,7 @@ nav.main .separator {\n a {\n \tcolor: #D2991D;\n }\n-a.srclink,\n+\n a#toggle-all-docs,\n a.anchor,\n .small-section-header a,"}, {"sha": "e777285d9ea1c1cddc423d30b634a1fc85e7b1a0", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -177,7 +177,7 @@ nav.main .separator {\n a {\n \tcolor: #3873AD;\n }\n-a.srclink,\n+\n a#toggle-all-docs,\n a.anchor,\n .small-section-header a,\n@@ -243,10 +243,6 @@ details.undocumented > summary::before {\n \tborder-color: #bfbfbf;\n }\n \n-.since {\n-\tcolor: grey;\n-}\n-\n .result-name .primitive > i, .result-name .keyword > i {\n \tcolor: black;\n }"}, {"sha": "09cd8513a6453e98936f5cc1170d7f552554438c", "filename": "src/librustdoc/html/templates/print_item.html", "status": "modified", "additions": 26, "deletions": 24, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,26 +1,28 @@\n-<h1 class=\"fqn\"> {#- -#}\n-    <span class=\"in-band\"> {#- -#}\n-        {{-typ-}}\n-        {#- The breadcrumbs of the item path, like std::string -#}\n-        {%- for component in path_components -%}\n-        <a href=\"{{component.path | safe}}index.html\">{{component.name}}</a>::<wbr>\n-        {%- endfor -%}\n-        <a class=\"{{item_type}}\" href=\"#\">{{name}}</a> {#- -#}\n-        <button id=\"copy-path\" onclick=\"copy_path(this)\" title=\"Copy item path to clipboard\"> {#- -#}\n-            <img src=\"{{static_root_path | safe}}clipboard{{page.resource_suffix}}.svg\" {# -#}\n-                width=\"19\" height=\"18\" {# -#}\n-                alt=\"Copy item path\"> {#- -#}\n-        </button> {#- -#}\n-    </span> {#- -#}\n-    <span class=\"out-of-band\"> {#- -#}\n-        {{- stability_since_raw | safe -}}\n-        <span id=\"render-detail\"> {#- -#}\n-            <a id=\"toggle-all-docs\" href=\"javascript:void(0)\" title=\"collapse all docs\"> {#- -#}\n-                [<span class=\"inner\">&#x2212;</span>] {#- -#}\n-            </a> {#- -#}\n+<div class=\"main-heading\">\n+    <h1 class=\"fqn\"> {#- -#}\n+        <span class=\"in-band\"> {#- -#}\n+            {{-typ-}}\n+            {#- The breadcrumbs of the item path, like std::string -#}\n+            {%- for component in path_components -%}\n+            <a href=\"{{component.path | safe}}index.html\">{{component.name}}</a>::<wbr>\n+            {%- endfor -%}\n+            <a class=\"{{item_type}}\" href=\"#\">{{name}}</a> {#- -#}\n+            <button id=\"copy-path\" onclick=\"copy_path(this)\" title=\"Copy item path to clipboard\"> {#- -#}\n+                <img src=\"{{static_root_path | safe}}clipboard{{page.resource_suffix}}.svg\" {# -#}\n+                    width=\"19\" height=\"18\" {# -#}\n+                    alt=\"Copy item path\"> {#- -#}\n+            </button> {#- -#}\n         </span> {#- -#}\n-        {%- if src_href -%}\n-        <a class=\"srclink\" href=\"{{src_href | safe}}\" title=\"goto source code\">[src]</a>\n-        {%- endif -%}\n+    </h1> {#- -#}\n+    <span class=\"out-of-band\"> {#- -#}\n+        {% if stability_since_raw %}\n+        {{- stability_since_raw | safe -}} \u00b7 \n+        {% endif %}\n+        {%- if src_href %}\n+        <a class=\"srclink\" href=\"{{src_href | safe}}\" title=\"goto source code\">source</a> \u00b7\n+        {% endif -%}\n+        <a id=\"toggle-all-docs\" href=\"javascript:void(0)\" title=\"collapse all docs\"> {#- -#}\n+            [<span class=\"inner\">&#x2212;</span>] {#- -#}\n+        </a> {#- -#}\n     </span> {#- -#}\n-</h1> {#- -#}\n+</div>"}, {"sha": "e6758287d8cb2e7a59446ef2a4a674eed0be0cca", "filename": "src/test/rustdoc-gui/anchors.goml", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fanchors.goml?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -13,8 +13,10 @@ reload:\n assert-css: (\"#toggle-all-docs\", {\"color\": \"rgb(0, 0, 0)\"})\n assert-css: (\".fqn .in-band a:nth-of-type(1)\", {\"color\": \"rgb(0, 0, 0)\"})\n assert-css: (\".fqn .in-band a:nth-of-type(2)\", {\"color\": \"rgb(173, 55, 138)\"})\n-assert-css: (\".srclink\", {\"color\": \"rgb(0, 0, 0)\"})\n-assert-css: (\".srclink\", {\"color\": \"rgb(0, 0, 0)\"})\n+assert-css: (\".srclink\", {\"color\": \"rgb(56, 115, 173)\"})\n+\n+move-cursor-to: \".main-heading .srclink\"\n+assert-css: (\".srclink\", {\"text-decoration\": \"underline solid rgb(56, 115, 173)\"})\n \n assert-css: (\"#top-doc-prose-title\", {\"color\": \"rgb(0, 0, 0)\"})\n "}, {"sha": "9db75c59d948a8afee2126a5af6d10872c6af169", "filename": "src/test/rustdoc-gui/headings.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheadings.goml?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -15,7 +15,7 @@\n goto: file://|DOC_PATH|/test_docs/struct.HeavilyDocumentedStruct.html\n \n assert-css: (\"h1.fqn\", {\"font-size\": \"24px\"})\n-assert-css: (\"h1.fqn\", {\"border-bottom-width\": \"1px\"})\n+assert-css: (\".main-heading\", {\"border-bottom-width\": \"1px\"})\n \n assert-css: (\"h2#top-doc-prose-title\", {\"font-size\": \"20.8px\"})\n assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n@@ -55,7 +55,7 @@ assert-css: (\"h6#sub-sub-heading-for-struct-impl-item-doc\", {\"font-size\": \"15.2p\n goto: file://|DOC_PATH|/test_docs/enum.HeavilyDocumentedEnum.html\n \n assert-css: (\"h1.fqn\", {\"font-size\": \"24px\"})\n-assert-css: (\"h1.fqn\", {\"border-bottom-width\": \"1px\"})\n+assert-css: (\".main-heading\", {\"border-bottom-width\": \"1px\"})\n \n assert-css: (\"h2#top-doc-prose-title\", {\"font-size\": \"20.8px\"})\n assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n@@ -115,7 +115,7 @@ assert-css: (\".sidebar .others h3\", {\"border-bottom-width\": \"1px\"}, ALL)\n goto: file://|DOC_PATH|/test_docs/union.HeavilyDocumentedUnion.html\n \n assert-css: (\"h1.fqn\", {\"font-size\": \"24px\"})\n-assert-css: (\"h1.fqn\", {\"border-bottom-width\": \"1px\"})\n+assert-css: (\".main-heading\", {\"border-bottom-width\": \"1px\"})\n \n assert-css: (\"h2#top-doc-prose-title\", {\"font-size\": \"20.8px\"})\n assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n@@ -148,7 +148,7 @@ assert-css: (\"h6#sub-heading-for-union-impl-item-doc\", {\"border-bottom-width\": \"\n goto: file://|DOC_PATH|/test_docs/macro.heavily_documented_macro.html\n \n assert-css: (\"h1.fqn\", {\"font-size\": \"24px\"})\n-assert-css: (\"h1.fqn\", {\"border-bottom-width\": \"1px\"})\n+assert-css: (\".main-heading\", {\"border-bottom-width\": \"1px\"})\n \n assert-css: (\"h2#top-doc-prose-title\", {\"font-size\": \"20.8px\"})\n assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})"}, {"sha": "e11aae21e3fa6367e9c914e02dba73fa52e2cd46", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,10 +1,13 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n assert-attribute: (\"#main-content > details.top-doc\", {\"open\": \"\"})\n+assert-text: (\"#toggle-all-docs\", \"[\u2212]\")\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // This is now collapsed so there shouldn't be the \"open\" attribute on details.\n assert-attribute-false: (\"#main-content > details.top-doc\", {\"open\": \"\"})\n+assert-text: (\"#toggle-all-docs\", \"[+]\")\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // Not collapsed anymore so the \"open\" attribute should be back.\n assert-attribute: (\"#main-content > details.top-doc\", {\"open\": \"\"})\n+assert-text: (\"#toggle-all-docs\", \"[\u2212]\")"}, {"sha": "d32d3fc581f8aaca3d4edced4e69e49f270e8797", "filename": "src/test/rustdoc/ensure-src-link.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fensure-src-link.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fensure-src-link.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fensure-src-link.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -2,5 +2,5 @@\n \n // This test ensures that the [src] link is present on traits items.\n \n-// @has foo/trait.Iterator.html '//div[@id=\"method.zip\"]//a[@class=\"srclink\"]' \"[src]\"\n+// @has foo/trait.Iterator.html '//div[@id=\"method.zip\"]//a[@class=\"srclink\"]' \"source\"\n pub use std::iter::Iterator;"}, {"sha": "359551ab78d1e060b2a484d98eceb2ecf33f488f", "filename": "src/test/rustdoc/external-macro-src.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fexternal-macro-src.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fexternal-macro-src.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fexternal-macro-src.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -5,8 +5,8 @@\n #[macro_use]\n extern crate external_macro_src;\n \n-// @has foo/index.html '//a[@href=\"../src/foo/external-macro-src.rs.html#3-12\"]' '[src]'\n+// @has foo/index.html '//a[@href=\"../src/foo/external-macro-src.rs.html#3-12\"]' 'source'\n \n // @has foo/struct.Foo.html\n-// @has - '//a[@href=\"../src/foo/external-macro-src.rs.html#12\"]' '[src]'\n+// @has - '//a[@href=\"../src/foo/external-macro-src.rs.html#12\"]' 'source'\n make_foo!();"}, {"sha": "ec007e36b726c8e8cd66a7090c6ac5b886aeb321", "filename": "src/test/rustdoc/issue-16265-1.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-16265-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-16265-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-16265-1.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,8 +1,10 @@\n pub struct Foo;\n \n-// @has issue_16265_1/traits/index.html '[src]'\n+// @has issue_16265_1/traits/index.html 'source'\n pub mod traits {\n     impl PartialEq for super::Foo {\n-        fn eq(&self, _: &super::Foo) -> bool { true }\n+        fn eq(&self, _: &super::Foo) -> bool {\n+            true\n+        }\n     }\n }"}, {"sha": "d5cd18d9daf9d80449a6f6d73280fbe6978baaf1", "filename": "src/test/rustdoc/issue-16265-2.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-16265-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-16265-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-16265-2.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,4 +1,4 @@\n-// @has issue_16265_2/index.html '[src]'\n+// @has issue_16265_2/index.html 'source'\n \n trait Y {}\n-impl Y for Option<u32>{}\n+impl Y for Option<u32> {}"}, {"sha": "d5cb2c710cde891b4bcd85b12951ccfa87484899", "filename": "src/test/rustdoc/issue-26606.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-26606.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fissue-26606.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-26606.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -7,5 +7,5 @@\n extern crate issue_26606_macro;\n \n // @has issue_26606/constant.FOO.html\n-// @has - '//a[@href=\"../src/issue_26606/issue-26606.rs.html#11\"]' '[src]'\n+// @has - '//a[@href=\"../src/issue_26606/issue-26606.rs.html#11\"]' 'source'\n make_item!(FOO);"}, {"sha": "46b8778217d27fd5d8f4380865e05822495ce436", "filename": "src/test/rustdoc/src-links-auto-impls.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -2,11 +2,11 @@\n \n // @has foo/struct.Unsized.html\n // @has - '//div[@id=\"impl-Sized\"]/h3[@class=\"code-header in-band\"]' 'impl !Sized for Unsized'\n-// @!has - '//div[@id=\"impl-Sized\"]//a[@class=\"srclink\"]' '[src]'\n+// @!has - '//div[@id=\"impl-Sized\"]//a[@class=\"srclink\"]' 'source'\n // @has - '//div[@id=\"impl-Sync\"]/h3[@class=\"code-header in-band\"]' 'impl Sync for Unsized'\n-// @!has - '//div[@id=\"impl-Sync\"]//a[@class=\"srclink\"]' '[src]'\n+// @!has - '//div[@id=\"impl-Sync\"]//a[@class=\"srclink\"]' 'source'\n // @has - '//div[@id=\"impl-Any\"]/h3[@class=\"code-header in-band\"]' 'impl<T> Any for T'\n-// @has - '//div[@id=\"impl-Any\"]//a[@class=\"srclink\"]' '[src]'\n+// @has - '//div[@id=\"impl-Any\"]//a[@class=\"srclink\"]' 'source'\n pub struct Unsized {\n     data: [u8],\n }"}, {"sha": "6de35e3233b0573234b976f39636e7b3d8427a46", "filename": "src/test/rustdoc/thread-local-src.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fthread-local-src.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Fthread-local-src.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fthread-local-src.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,6 +1,6 @@\n #![crate_name = \"foo\"]\n \n-// @has foo/index.html '//a[@href=\"../src/foo/thread-local-src.rs.html#1-6\"]' '[src]'\n+// @has foo/index.html '//a[@href=\"../src/foo/thread-local-src.rs.html#1-6\"]' 'source'\n \n-// @has foo/constant.FOO.html '//a[@href=\"../src/foo/thread-local-src.rs.html#6\"]' '[src]'\n+// @has foo/constant.FOO.html '//a[@href=\"../src/foo/thread-local-src.rs.html#6\"]' 'source'\n thread_local!(pub static FOO: bool = false);"}, {"sha": "a6367efba6121f1ee85c19b7f9b45ce029f6a086", "filename": "src/test/rustdoc/trait-src-link.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Ftrait-src-link.rs", "raw_url": "https://github.com/rust-lang/rust/raw/962c0a4ee59e3c1a2413e785694c9433ffd0a9e1/src%2Ftest%2Frustdoc%2Ftrait-src-link.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftrait-src-link.rs?ref=962c0a4ee59e3c1a2413e785694c9433ffd0a9e1", "patch": "@@ -1,26 +1,26 @@\n #![crate_name = \"quix\"]\n pub trait Foo {\n-    // @has quix/trait.Foo.html '//a[@href=\"../src/quix/trait-src-link.rs.html#4\"]' '[src]'\n+    // @has quix/trait.Foo.html '//a[@href=\"../src/quix/trait-src-link.rs.html#4\"]' 'source'\n     fn required();\n \n-    // @has quix/trait.Foo.html '//a[@href=\"../src/quix/trait-src-link.rs.html#7\"]' '[src]'\n+    // @has quix/trait.Foo.html '//a[@href=\"../src/quix/trait-src-link.rs.html#7\"]' 'source'\n     fn provided() {}\n }\n \n pub struct Bar;\n \n impl Foo for Bar {\n-    // @has quix/struct.Bar.html '//a[@href=\"../src/quix/trait-src-link.rs.html#14\"]' '[src]'\n+    // @has quix/struct.Bar.html '//a[@href=\"../src/quix/trait-src-link.rs.html#14\"]' 'source'\n     fn required() {}\n-    // @has quix/struct.Bar.html '//a[@href=\"../src/quix/trait-src-link.rs.html#7\"]' '[src]'\n+    // @has quix/struct.Bar.html '//a[@href=\"../src/quix/trait-src-link.rs.html#7\"]' 'source'\n }\n \n pub struct Baz;\n \n impl Foo for Baz {\n-    // @has quix/struct.Baz.html '//a[@href=\"../src/quix/trait-src-link.rs.html#22\"]' '[src]'\n+    // @has quix/struct.Baz.html '//a[@href=\"../src/quix/trait-src-link.rs.html#22\"]' 'source'\n     fn required() {}\n \n-    // @has quix/struct.Baz.html '//a[@href=\"../src/quix/trait-src-link.rs.html#25\"]' '[src]'\n+    // @has quix/struct.Baz.html '//a[@href=\"../src/quix/trait-src-link.rs.html#25\"]' 'source'\n     fn provided() {}\n }"}]}