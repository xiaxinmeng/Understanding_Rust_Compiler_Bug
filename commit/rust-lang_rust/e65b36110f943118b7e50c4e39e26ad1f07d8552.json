{"sha": "e65b36110f943118b7e50c4e39e26ad1f07d8552", "node_id": "C_kwDOAAsO6NoAKGU2NWIzNjExMGY5NDMxMThiN2U1MGM0ZTM5ZTI2YWQxZjA3ZDg1NTI", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-24T00:10:54Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-24T00:32:22Z"}, "message": "rustdoc: rearrange HTML in primitive reference links\n\nThis patch avoids hard-to-click single character links by making\nthe generic part of the link:\n\nBefore: <a href=\"#\">&</a>T\n\nAfter: <a href=\"#\">&T</a>", "tree": {"sha": "c5599d1c06b8805f09b94973add4d00b41f712f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c5599d1c06b8805f09b94973add4d00b41f712f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e65b36110f943118b7e50c4e39e26ad1f07d8552", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e65b36110f943118b7e50c4e39e26ad1f07d8552", "html_url": "https://github.com/rust-lang/rust/commit/e65b36110f943118b7e50c4e39e26ad1f07d8552", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e65b36110f943118b7e50c4e39e26ad1f07d8552/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8e6a9e8b6251bbc8276cb78cabe1998deecbed7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8e6a9e8b6251bbc8276cb78cabe1998deecbed7", "html_url": "https://github.com/rust-lang/rust/commit/c8e6a9e8b6251bbc8276cb78cabe1998deecbed7"}], "stats": {"total": 18, "additions": 6, "deletions": 12}, "files": [{"sha": "33404a76835975da4e656f3f8bff6f5952116202", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e65b36110f943118b7e50c4e39e26ad1f07d8552/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65b36110f943118b7e50c4e39e26ad1f07d8552/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=e65b36110f943118b7e50c4e39e26ad1f07d8552", "patch": "@@ -1064,14 +1064,8 @@ fn fmt_type<'cx>(\n                     fmt_type(ty, f, use_absolute, cx)?;\n                     write!(f, \")\")\n                 }\n-                clean::Generic(..) => {\n-                    primitive_link(\n-                        f,\n-                        PrimitiveType::Reference,\n-                        &format!(\"{}{}{}\", amp, lt, m),\n-                        cx,\n-                    )?;\n-                    fmt_type(ty, f, use_absolute, cx)\n+                clean::Generic(name) => {\n+                    primitive_link(f, PrimitiveType::Reference, &format!(\"{amp}{lt}{m}{name}\"), cx)\n                 }\n                 _ => {\n                     write!(f, \"{}{}{}\", amp, lt, m)?;"}, {"sha": "eeb22878f3c63f7c6f4fd1da7e361f5a8f2bcfdb", "filename": "tests/rustdoc/whitespace-after-where-clause.enum.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "raw_url": "https://github.com/rust-lang/rust/raw/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html?ref=e65b36110f943118b7e50c4e39e26ad1f07d8552", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub enum Cow&lt;'a, B&gt;<span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + ?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a,</span>{\n-    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>),\n     Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "c8037c2a8df5a946527d14945c30514be80c0418", "filename": "tests/rustdoc/whitespace-after-where-clause.enum2.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "raw_url": "https://github.com/rust-lang/rust/raw/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html?ref=e65b36110f943118b7e50c4e39e26ad1f07d8552", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub enum Cow2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n-    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>),\n     Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "5892270b2f9309aa04495227d0f921c6d539fbbc", "filename": "tests/rustdoc/whitespace-after-where-clause.struct.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "raw_url": "https://github.com/rust-lang/rust/raw/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html?ref=e65b36110f943118b7e50c4e39e26ad1f07d8552", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub struct Struct&lt;'a, B&gt;<span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + ?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a,</span>{\n-    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>,\n     pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "d3952b0c56699eecd68e68005bb243b737d82285", "filename": "tests/rustdoc/whitespace-after-where-clause.struct2.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "raw_url": "https://github.com/rust-lang/rust/raw/e65b36110f943118b7e50c4e39e26ad1f07d8552/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html?ref=e65b36110f943118b7e50c4e39e26ad1f07d8552", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub struct Struct2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n-    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>,\n     pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n }</code></pre></div>\n\\ No newline at end of file"}]}