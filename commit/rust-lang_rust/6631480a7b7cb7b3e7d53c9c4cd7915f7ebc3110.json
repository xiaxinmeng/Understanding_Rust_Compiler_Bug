{"sha": "6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "node_id": "C_kwDOAAsO6NoAKDY2MzE0ODBhN2I3Y2I3YjNlN2Q1M2M5YzRjZDc5MTVmN2ViYzMxMTA", "commit": {"author": {"name": "blyxyas", "email": "blyxyas@gmail.com", "date": "2023-03-13T18:13:56Z"}, "committer": {"name": "blyxyas", "email": "blyxyas@gmail.com", "date": "2023-03-13T18:13:56Z"}, "message": "Fix false positive with `a = a`", "tree": {"sha": "a5f8ebab2334731d5eed8b1ada9697ec55d37305", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a5f8ebab2334731d5eed8b1ada9697ec55d37305"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEM3aofraJSaf7CtgpTTgXC1ovwzQFAmQPZ+UACgkQTTgXC1ov\nwzQR3Q//djctOl4lb/2PmeVJU2Gl0Y6AI7J2tWUf3hYQOp+0hbsHDEVCB8KsuDER\n9eKJoWkXt/zr6+ljIWI+ThxD+R+9A/H7nKHDsMGE75WIBcmCDL6Wn6JAnf+gTrVU\nElDD6eBZONCW2Ai3zT1O6A+6hQxx6vjB+e2BbBpGUQPAGiXMGfuaTGhZI1Nbdy1G\nvTKoBXXhQYY6fJhi9weYLfk6Aqt6BqcVmrHn5CLFv5kVNPbQ6sw4m/tK9USrdlNT\nXF0MjkRoZ56pCKRP3OdjtiG3MqFM6vlsXyu/+U02gzHtRoJAELG0f3woilOeJsCC\nBSg6UjG3BFue+ppIZJgKHoFuajG2rKW34yjZy6sZ3AffmCZAeHgj0JR75kPoiYej\n+HrEXx1jbn0LZUFqNE2EyQSmmRhxISMk65o7TgVoRf8qKgOZM3IIQClzNpp92koH\ndMZy2IE2e9Z1cCnMzeQYllZzDp2CnxJtuG3GZo9TqQXn4sCxnXCPL8DQ1HPDgp8r\nd5/CatZLVWqj1ev4FOVRigZ1chw4b6yeljVct53DvKVRFJRgRIO+4n23INqObMPx\n2DkjfM/LvbF0hHmPZ90DSNmPhdA1LrfgIm7BWKWKhIxjIYWKqkgvpR+i8Hr2b2NP\nZFUNROxquxMicHgVyZQKP+T71j3pUT1OY7xniLTtVtouNcfhvpw=\n=wzka\n-----END PGP SIGNATURE-----", "payload": "tree a5f8ebab2334731d5eed8b1ada9697ec55d37305\nparent e65ad6f5d0c97d4b20e68c9c81c3f35225563fa6\nauthor blyxyas <blyxyas@gmail.com> 1678731236 +0100\ncommitter blyxyas <blyxyas@gmail.com> 1678731236 +0100\n\nFix false positive with `a = a`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "html_url": "https://github.com/rust-lang/rust/commit/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/comments", "author": {"login": "blyxyas", "id": 73757586, "node_id": "MDQ6VXNlcjczNzU3NTg2", "avatar_url": "https://avatars.githubusercontent.com/u/73757586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blyxyas", "html_url": "https://github.com/blyxyas", "followers_url": "https://api.github.com/users/blyxyas/followers", "following_url": "https://api.github.com/users/blyxyas/following{/other_user}", "gists_url": "https://api.github.com/users/blyxyas/gists{/gist_id}", "starred_url": "https://api.github.com/users/blyxyas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blyxyas/subscriptions", "organizations_url": "https://api.github.com/users/blyxyas/orgs", "repos_url": "https://api.github.com/users/blyxyas/repos", "events_url": "https://api.github.com/users/blyxyas/events{/privacy}", "received_events_url": "https://api.github.com/users/blyxyas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "blyxyas", "id": 73757586, "node_id": "MDQ6VXNlcjczNzU3NTg2", "avatar_url": "https://avatars.githubusercontent.com/u/73757586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blyxyas", "html_url": "https://github.com/blyxyas", "followers_url": "https://api.github.com/users/blyxyas/followers", "following_url": "https://api.github.com/users/blyxyas/following{/other_user}", "gists_url": "https://api.github.com/users/blyxyas/gists{/gist_id}", "starred_url": "https://api.github.com/users/blyxyas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blyxyas/subscriptions", "organizations_url": "https://api.github.com/users/blyxyas/orgs", "repos_url": "https://api.github.com/users/blyxyas/repos", "events_url": "https://api.github.com/users/blyxyas/events{/privacy}", "received_events_url": "https://api.github.com/users/blyxyas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e65ad6f5d0c97d4b20e68c9c81c3f35225563fa6", "url": "https://api.github.com/repos/rust-lang/rust/commits/e65ad6f5d0c97d4b20e68c9c81c3f35225563fa6", "html_url": "https://github.com/rust-lang/rust/commit/e65ad6f5d0c97d4b20e68c9c81c3f35225563fa6"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "5087c19e5f3e278b4072a3567d61a51e1205cff6", "filename": "clippy_lints/src/swap.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/clippy_lints%2Fsrc%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/clippy_lints%2Fsrc%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fswap.rs?ref=6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "patch": "@@ -190,6 +190,7 @@ fn check_suspicious_swap(cx: &LateContext<'_>, block: &Block<'_>) {\n             && first.span.eq_ctxt(second.span)\n             && is_same(cx, lhs0, rhs1)\n             && is_same(cx, lhs1, rhs0)\n+\t\t\t&& !is_same(cx, lhs1, rhs1) // Ignore a = b; a = a (#10421)\n             && let Some(lhs_sugg) = match &lhs0 {\n                 ExprOrIdent::Expr(expr) => Sugg::hir_opt(cx, expr),\n                 ExprOrIdent::Ident(ident) => Some(Sugg::NonParen(ident.as_str().into())),"}, {"sha": "775b0dbde88a039c4d092379edd622ba2444b530", "filename": "tests/ui/swap.fixed", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/tests%2Fui%2Fswap.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/tests%2Fui%2Fswap.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fswap.fixed?ref=6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "patch": "@@ -186,3 +186,11 @@ const fn issue_9864(mut u: u32) -> u32 {\n     v = temp;\n     u + v\n }\n+\n+#[allow(clippy::let_and_return)]\n+const fn issue_10421(x: u32) -> u32 {\n+    let a = x;\n+    let a = a;\n+    let a = a;\n+    a\n+}"}, {"sha": "bc9a78b49c77ce72e482bc286b14c4b0d2fb3f9e", "filename": "tests/ui/swap.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/tests%2Fui%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110/tests%2Fui%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fswap.rs?ref=6631480a7b7cb7b3e7d53c9c4cd7915f7ebc3110", "patch": "@@ -215,3 +215,11 @@ const fn issue_9864(mut u: u32) -> u32 {\n     v = temp;\n     u + v\n }\n+\n+#[allow(clippy::let_and_return)]\n+const fn issue_10421(x: u32) -> u32 {\n+    let a = x;\n+    let a = a;\n+    let a = a;\n+    a\n+}"}]}