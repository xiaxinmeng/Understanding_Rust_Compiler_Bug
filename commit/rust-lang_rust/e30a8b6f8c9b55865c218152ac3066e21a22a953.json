{"sha": "e30a8b6f8c9b55865c218152ac3066e21a22a953", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzMGE4YjZmOGM5YjU1ODY1YzIxODE1MmFjMzA2NmUyMWEyMmE5NTM=", "commit": {"author": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-06-20T00:28:29Z"}, "committer": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-06-20T00:37:51Z"}, "message": "Updating kind rules to make sure we don't sneakily send ports.", "tree": {"sha": "5dd44ecfc148dddcb7af0fb006d29e7129b44956", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5dd44ecfc148dddcb7af0fb006d29e7129b44956"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e30a8b6f8c9b55865c218152ac3066e21a22a953", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e30a8b6f8c9b55865c218152ac3066e21a22a953", "html_url": "https://github.com/rust-lang/rust/commit/e30a8b6f8c9b55865c218152ac3066e21a22a953", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e30a8b6f8c9b55865c218152ac3066e21a22a953/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3cf582b5291b9ab72cac6d54abb405017922475c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3cf582b5291b9ab72cac6d54abb405017922475c", "html_url": "https://github.com/rust-lang/rust/commit/3cf582b5291b9ab72cac6d54abb405017922475c"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "890295490e95c2013b039d30ed6f168469e63fbf", "filename": "src/rustc/middle/ty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e30a8b6f8c9b55865c218152ac3066e21a22a953/src%2Frustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e30a8b6f8c9b55865c218152ac3066e21a22a953/src%2Frustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fty.rs?ref=e30a8b6f8c9b55865c218152ac3066e21a22a953", "patch": "@@ -1608,7 +1608,7 @@ fn type_kind(cx: ctxt, ty: t) -> kind {\n       }\n       ty_res(did, inner, tps) {\n         let inner = subst(cx, tps, inner);\n-        (kind_const() & type_kind(cx, inner)) | kind_send_only()\n+        (kind_const() | kind_send_only()) & type_kind(cx, inner)\n       }\n       ty_param(_, did) {\n         param_bounds_to_kind(cx.ty_param_bounds.get(did.node))"}, {"sha": "1bbb362db57a7b69d4a2b9f6a4d22d58e737c41f", "filename": "src/test/compile-fail/no-send-res-ports.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/e30a8b6f8c9b55865c218152ac3066e21a22a953/src%2Ftest%2Fcompile-fail%2Fno-send-res-ports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e30a8b6f8c9b55865c218152ac3066e21a22a953/src%2Ftest%2Fcompile-fail%2Fno-send-res-ports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fno-send-res-ports.rs?ref=e30a8b6f8c9b55865c218152ac3066e21a22a953", "patch": "@@ -0,0 +1,11 @@\n+fn main() {\n+    resource foo(_x: comm::port<()>) {}\n+\n+    let x = ~mut some(foo(comm::port()));\n+\n+    task::spawn {|move x| //! ERROR not a sendable value\n+        let mut y = none;\n+        *x <-> y;\n+        log(error, y);\n+    }\n+}"}]}