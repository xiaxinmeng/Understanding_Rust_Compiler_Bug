{"sha": "c656bf3946268d9d0b87174af6e26d32075dfe01", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2NTZiZjM5NDYyNjhkOWQwYjg3MTc0YWY2ZTI2ZDMyMDc1ZGZlMDE=", "commit": {"author": {"name": "Florian Diebold", "email": "florian.diebold@freiheit.com", "date": "2019-03-14T21:08:37Z"}, "committer": {"name": "Florian Diebold", "email": "florian.diebold@freiheit.com", "date": "2019-03-14T21:08:37Z"}, "message": "Fix ra-emacs-lsp for newest lsp-mode with native json support", "tree": {"sha": "8e3b8a3755760de22c6b4f3c003e814a813cf212", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e3b8a3755760de22c6b4f3c003e814a813cf212"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c656bf3946268d9d0b87174af6e26d32075dfe01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c656bf3946268d9d0b87174af6e26d32075dfe01", "html_url": "https://github.com/rust-lang/rust/commit/c656bf3946268d9d0b87174af6e26d32075dfe01", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c656bf3946268d9d0b87174af6e26d32075dfe01/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb4d6cf25f9ba886f4aa8ee46149af2807baae7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb4d6cf25f9ba886f4aa8ee46149af2807baae7f", "html_url": "https://github.com/rust-lang/rust/commit/eb4d6cf25f9ba886f4aa8ee46149af2807baae7f"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "955703edbafb1dec9a7d3c1d7aec37c4d2192227", "filename": "editors/emacs/ra-emacs-lsp.el", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c656bf3946268d9d0b87174af6e26d32075dfe01/editors%2Femacs%2Fra-emacs-lsp.el", "raw_url": "https://github.com/rust-lang/rust/raw/c656bf3946268d9d0b87174af6e26d32075dfe01/editors%2Femacs%2Fra-emacs-lsp.el", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Femacs%2Fra-emacs-lsp.el?ref=c656bf3946268d9d0b87174af6e26d32075dfe01", "patch": "@@ -58,17 +58,16 @@\n \n (defun rust-analyzer--apply-source-change (data)\n   ;; TODO fileSystemEdits\n-  (--each (-> data (ht-get \"workspaceEdit\") (ht-get \"documentChanges\"))\n+  (seq-doseq (it (-> data (ht-get \"workspaceEdit\") (ht-get \"documentChanges\")))\n     (rust-analyzer--apply-text-document-edit it))\n   (-when-let (cursor-position (ht-get data \"cursorPosition\"))\n     (let ((filename (rust-analyzer--uri-filename (ht-get cursor-position \"textDocument\")))\n           (position (ht-get cursor-position \"position\")))\n       (find-file filename)\n-      (rust-analyzer--goto-lsp-loc position)\n-      )))\n+      (rust-analyzer--goto-lsp-loc position))))\n \n (defun rust-analyzer--apply-source-change-command (p)\n-  (let ((data (-> p (ht-get \"arguments\") (car))))\n+  (let ((data (-> p (ht-get \"arguments\") (seq-first))))\n     (rust-analyzer--apply-source-change data)))\n \n (lsp-register-client\n@@ -126,7 +125,7 @@\n      \"rust-analyzer/extendSelection\"\n      (rust-analyzer--extend-selection-params)))\n    (ht-get \"selections\")\n-   (car)))\n+   (seq-first)))\n \n (defun rust-analyzer--add-er-expansion ()\n   (make-variable-buffer-local 'er/try-expand-list)"}]}