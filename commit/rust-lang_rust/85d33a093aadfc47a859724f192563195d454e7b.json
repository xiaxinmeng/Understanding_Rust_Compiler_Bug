{"sha": "85d33a093aadfc47a859724f192563195d454e7b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1ZDMzYTA5M2FhZGZjNDdhODU5NzI0ZjE5MjU2MzE5NWQ0NTRlN2I=", "commit": {"author": {"name": "Jan Niklas Hasse", "email": "jhasse@gmail.com", "date": "2013-12-12T17:12:04Z"}, "committer": {"name": "Jan Niklas Hasse", "email": "jhasse@gmail.com", "date": "2013-12-12T17:12:04Z"}, "message": "Use libdir() instead of hard coded string. Fixes #10903", "tree": {"sha": "4374cb70ca28a92d7acb42831941541baa586fa8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4374cb70ca28a92d7acb42831941541baa586fa8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85d33a093aadfc47a859724f192563195d454e7b", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85d33a093aadfc47a859724f192563195d454e7b", "html_url": "https://github.com/rust-lang/rust/commit/85d33a093aadfc47a859724f192563195d454e7b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85d33a093aadfc47a859724f192563195d454e7b/comments", "author": {"login": "jhasse", "id": 80071, "node_id": "MDQ6VXNlcjgwMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/80071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhasse", "html_url": "https://github.com/jhasse", "followers_url": "https://api.github.com/users/jhasse/followers", "following_url": "https://api.github.com/users/jhasse/following{/other_user}", "gists_url": "https://api.github.com/users/jhasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhasse/subscriptions", "organizations_url": "https://api.github.com/users/jhasse/orgs", "repos_url": "https://api.github.com/users/jhasse/repos", "events_url": "https://api.github.com/users/jhasse/events{/privacy}", "received_events_url": "https://api.github.com/users/jhasse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jhasse", "id": 80071, "node_id": "MDQ6VXNlcjgwMDcx", "avatar_url": "https://avatars.githubusercontent.com/u/80071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhasse", "html_url": "https://github.com/jhasse", "followers_url": "https://api.github.com/users/jhasse/followers", "following_url": "https://api.github.com/users/jhasse/following{/other_user}", "gists_url": "https://api.github.com/users/jhasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhasse/subscriptions", "organizations_url": "https://api.github.com/users/jhasse/orgs", "repos_url": "https://api.github.com/users/jhasse/repos", "events_url": "https://api.github.com/users/jhasse/events{/privacy}", "received_events_url": "https://api.github.com/users/jhasse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d441c5468814b0d8f9ccdba426baf1f16b5134fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/d441c5468814b0d8f9ccdba426baf1f16b5134fc", "html_url": "https://github.com/rust-lang/rust/commit/d441c5468814b0d8f9ccdba426baf1f16b5134fc"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "a6b1088335c63f2454ee181d843f6453541b7756", "filename": "src/librustpkg/path_util.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/85d33a093aadfc47a859724f192563195d454e7b/src%2Flibrustpkg%2Fpath_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d33a093aadfc47a859724f192563195d454e7b/src%2Flibrustpkg%2Fpath_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Fpath_util.rs?ref=85d33a093aadfc47a859724f192563195d454e7b", "patch": "@@ -16,6 +16,7 @@ pub use package_id::PkgId;\n pub use target::{OutputType, Main, Lib, Test, Bench, Target, Build, Install};\n pub use version::{Version, NoVersion, split_version_general, try_parsing_version};\n pub use rustc::metadata::filesearch::rust_path;\n+use rustc::metadata::filesearch::libdir;\n use rustc::driver::driver::host_triple;\n \n use std::libc;\n@@ -113,7 +114,7 @@ pub fn target_build_dir(workspace: &Path) -> Path {\n /// Return the target-specific lib subdirectory, pushed onto `base`;\n /// doesn't check that it exists or create it\n fn target_lib_dir(workspace: &Path) -> Path {\n-    let mut dir = workspace.join(\"lib\");\n+    let mut dir = workspace.join(libdir());\n     dir.push(host_triple());\n     dir\n }\n@@ -184,7 +185,7 @@ pub fn installed_library_in_workspace(pkg_path: &Path, workspace: &Path) -> Opti\n                                                  short_name,\n                                                  Install,\n                                                  workspace,\n-                                                 \"lib\",\n+                                                 libdir(),\n                                                  &NoVersion)\n     }\n }\n@@ -212,7 +213,7 @@ pub fn library_in_workspace(path: &Path, short_name: &str, where: Target,\n \n // rustc doesn't use target-specific subdirectories\n pub fn system_library(sysroot: &Path, lib_name: &str) -> Option<Path> {\n-    library_in(lib_name, &NoVersion, &sysroot.join(\"lib\"))\n+    library_in(lib_name, &NoVersion, &sysroot.join(libdir()))\n }\n \n fn library_in(short_name: &str, version: &Version, dir_to_search: &Path) -> Option<Path> {"}]}