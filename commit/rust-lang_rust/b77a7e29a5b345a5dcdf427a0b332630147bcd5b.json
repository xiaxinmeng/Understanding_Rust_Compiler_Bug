{"sha": "b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI3N2E3ZTI5YTViMzQ1YTVkY2RmNDI3YTBiMzMyNjMwMTQ3YmNkNWI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-01-09T17:44:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-09T17:44:31Z"}, "message": "Merge #2779\n\n2779: Parse trait aliases r=matklad a=kiljacken\n\nImplements the needed changes to correctly parse trait aliases.\r\n\r\nThis is my first change in the parser code, so would appreciate a comment on whether this is the right way to go about it.\n\nCo-authored-by: Emil Lauridsen <mine809@gmail.com>", "tree": {"sha": "db971989f71796845e9e7cd5396d6b49be61a0a9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/db971989f71796845e9e7cd5396d6b49be61a0a9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeF2Z/CRBK7hj4Ov3rIwAAdHIIAIrmjLLM+5wJypBdinXSaa+1\n5SXl4FOJkgXJZieT0g0h2OXdUCW3qel2e4Ib9s7PvoZyqFUq1Fc21GEGuiQA3P3f\no6Cz/1DB4i/Zu2mtE1GSS6008IMGBhqNh97Zpg4oFfvL85gdIxzRI7/NijTdS1/Q\neR+eiZBIvNa133FnQs88p69SXSUl9+fQRgqiL7uLpzp1O2kQxzK26NOBbbf4gt6l\nH90lECYyvpDVTJ0X43AnyjUEVxzLjlgm4KXGgZ9yFUpHQ/MSWZUw+DJmjoTxuYF7\njOkYkJ8Vx6qlTKD8rT4vGFoUhixnb4JP11rbNXN/3FwGj9XNKlu2LjWVd2gJq44=\n=0XlT\n-----END PGP SIGNATURE-----\n", "payload": "tree db971989f71796845e9e7cd5396d6b49be61a0a9\nparent c2bbfb9a5f614719c9805c7921653c8e4b85b1f1\nparent aa433c67d85c5e56c1343ac5eb62872502ca8d55\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1578591871 +0000\ncommitter GitHub <noreply@github.com> 1578591871 +0000\n\nMerge #2779\n\n2779: Parse trait aliases r=matklad a=kiljacken\n\nImplements the needed changes to correctly parse trait aliases.\r\n\r\nThis is my first change in the parser code, so would appreciate a comment on whether this is the right way to go about it.\n\nCo-authored-by: Emil Lauridsen <mine809@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "html_url": "https://github.com/rust-lang/rust/commit/b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2bbfb9a5f614719c9805c7921653c8e4b85b1f1", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2bbfb9a5f614719c9805c7921653c8e4b85b1f1", "html_url": "https://github.com/rust-lang/rust/commit/c2bbfb9a5f614719c9805c7921653c8e4b85b1f1"}, {"sha": "aa433c67d85c5e56c1343ac5eb62872502ca8d55", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa433c67d85c5e56c1343ac5eb62872502ca8d55", "html_url": "https://github.com/rust-lang/rust/commit/aa433c67d85c5e56c1343ac5eb62872502ca8d55"}], "stats": {"total": 141, "additions": 141, "deletions": 0}, "files": [{"sha": "03dae3cdb4e1af498b7f2af094a66392fa2f440e", "filename": "crates/ra_parser/src/grammar/items/traits.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems%2Ftraits.rs?ref=b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "patch": "@@ -10,6 +10,16 @@ pub(super) fn trait_def(p: &mut Parser) {\n     p.bump(T![trait]);\n     name_r(p, ITEM_RECOVERY_SET);\n     type_params::opt_type_param_list(p);\n+    // test trait_alias\n+    // trait Z<U> = T<U>;\n+    // trait Z<U> = T<U> where U: Copy;\n+    // trait Z<U> = where Self: T<U>;\n+    if p.eat(T![=]) {\n+        type_params::bounds_without_colon(p);\n+        type_params::opt_where_clause(p);\n+        p.expect(T![;]);\n+        return;\n+    }\n     if p.at(T![:]) {\n         type_params::bounds(p);\n     }"}, {"sha": "4bd428ee46985f1ce4791d79b7925c49b684c4c9", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0151_trait_alias.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.rs?ref=b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "patch": "@@ -0,0 +1,3 @@\n+trait Z<U> = T<U>;\n+trait Z<U> = T<U> where U: Copy;\n+trait Z<U> = where Self: T<U>;"}, {"sha": "de1536ef0fccd75df8d82223c127bb2344a3fbc7", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0151_trait_alias.txt", "status": "added", "additions": 128, "deletions": 0, "changes": 128, "blob_url": "https://github.com/rust-lang/rust/blob/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.txt", "raw_url": "https://github.com/rust-lang/rust/raw/b77a7e29a5b345a5dcdf427a0b332630147bcd5b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0151_trait_alias.txt?ref=b77a7e29a5b345a5dcdf427a0b332630147bcd5b", "patch": "@@ -0,0 +1,128 @@\n+SOURCE_FILE@[0; 83)\n+  TRAIT_DEF@[0; 18)\n+    TRAIT_KW@[0; 5) \"trait\"\n+    WHITESPACE@[5; 6) \" \"\n+    NAME@[6; 7)\n+      IDENT@[6; 7) \"Z\"\n+    TYPE_PARAM_LIST@[7; 10)\n+      L_ANGLE@[7; 8) \"<\"\n+      TYPE_PARAM@[8; 9)\n+        NAME@[8; 9)\n+          IDENT@[8; 9) \"U\"\n+      R_ANGLE@[9; 10) \">\"\n+    WHITESPACE@[10; 11) \" \"\n+    EQ@[11; 12) \"=\"\n+    WHITESPACE@[12; 13) \" \"\n+    TYPE_BOUND_LIST@[13; 17)\n+      TYPE_BOUND@[13; 17)\n+        PATH_TYPE@[13; 17)\n+          PATH@[13; 17)\n+            PATH_SEGMENT@[13; 17)\n+              NAME_REF@[13; 14)\n+                IDENT@[13; 14) \"T\"\n+              TYPE_ARG_LIST@[14; 17)\n+                L_ANGLE@[14; 15) \"<\"\n+                TYPE_ARG@[15; 16)\n+                  PATH_TYPE@[15; 16)\n+                    PATH@[15; 16)\n+                      PATH_SEGMENT@[15; 16)\n+                        NAME_REF@[15; 16)\n+                          IDENT@[15; 16) \"U\"\n+                R_ANGLE@[16; 17) \">\"\n+    SEMI@[17; 18) \";\"\n+  WHITESPACE@[18; 19) \"\\n\"\n+  TRAIT_DEF@[19; 51)\n+    TRAIT_KW@[19; 24) \"trait\"\n+    WHITESPACE@[24; 25) \" \"\n+    NAME@[25; 26)\n+      IDENT@[25; 26) \"Z\"\n+    TYPE_PARAM_LIST@[26; 29)\n+      L_ANGLE@[26; 27) \"<\"\n+      TYPE_PARAM@[27; 28)\n+        NAME@[27; 28)\n+          IDENT@[27; 28) \"U\"\n+      R_ANGLE@[28; 29) \">\"\n+    WHITESPACE@[29; 30) \" \"\n+    EQ@[30; 31) \"=\"\n+    WHITESPACE@[31; 32) \" \"\n+    TYPE_BOUND_LIST@[32; 36)\n+      TYPE_BOUND@[32; 36)\n+        PATH_TYPE@[32; 36)\n+          PATH@[32; 36)\n+            PATH_SEGMENT@[32; 36)\n+              NAME_REF@[32; 33)\n+                IDENT@[32; 33) \"T\"\n+              TYPE_ARG_LIST@[33; 36)\n+                L_ANGLE@[33; 34) \"<\"\n+                TYPE_ARG@[34; 35)\n+                  PATH_TYPE@[34; 35)\n+                    PATH@[34; 35)\n+                      PATH_SEGMENT@[34; 35)\n+                        NAME_REF@[34; 35)\n+                          IDENT@[34; 35) \"U\"\n+                R_ANGLE@[35; 36) \">\"\n+    WHITESPACE@[36; 37) \" \"\n+    WHERE_CLAUSE@[37; 50)\n+      WHERE_KW@[37; 42) \"where\"\n+      WHITESPACE@[42; 43) \" \"\n+      WHERE_PRED@[43; 50)\n+        PATH_TYPE@[43; 44)\n+          PATH@[43; 44)\n+            PATH_SEGMENT@[43; 44)\n+              NAME_REF@[43; 44)\n+                IDENT@[43; 44) \"U\"\n+        COLON@[44; 45) \":\"\n+        WHITESPACE@[45; 46) \" \"\n+        TYPE_BOUND_LIST@[46; 50)\n+          TYPE_BOUND@[46; 50)\n+            PATH_TYPE@[46; 50)\n+              PATH@[46; 50)\n+                PATH_SEGMENT@[46; 50)\n+                  NAME_REF@[46; 50)\n+                    IDENT@[46; 50) \"Copy\"\n+    SEMI@[50; 51) \";\"\n+  WHITESPACE@[51; 52) \"\\n\"\n+  TRAIT_DEF@[52; 82)\n+    TRAIT_KW@[52; 57) \"trait\"\n+    WHITESPACE@[57; 58) \" \"\n+    NAME@[58; 59)\n+      IDENT@[58; 59) \"Z\"\n+    TYPE_PARAM_LIST@[59; 62)\n+      L_ANGLE@[59; 60) \"<\"\n+      TYPE_PARAM@[60; 61)\n+        NAME@[60; 61)\n+          IDENT@[60; 61) \"U\"\n+      R_ANGLE@[61; 62) \">\"\n+    WHITESPACE@[62; 63) \" \"\n+    EQ@[63; 64) \"=\"\n+    WHITESPACE@[64; 65) \" \"\n+    TYPE_BOUND_LIST@[65; 65)\n+    WHERE_CLAUSE@[65; 81)\n+      WHERE_KW@[65; 70) \"where\"\n+      WHITESPACE@[70; 71) \" \"\n+      WHERE_PRED@[71; 81)\n+        PATH_TYPE@[71; 75)\n+          PATH@[71; 75)\n+            PATH_SEGMENT@[71; 75)\n+              NAME_REF@[71; 75)\n+                IDENT@[71; 75) \"Self\"\n+        COLON@[75; 76) \":\"\n+        WHITESPACE@[76; 77) \" \"\n+        TYPE_BOUND_LIST@[77; 81)\n+          TYPE_BOUND@[77; 81)\n+            PATH_TYPE@[77; 81)\n+              PATH@[77; 81)\n+                PATH_SEGMENT@[77; 81)\n+                  NAME_REF@[77; 78)\n+                    IDENT@[77; 78) \"T\"\n+                  TYPE_ARG_LIST@[78; 81)\n+                    L_ANGLE@[78; 79) \"<\"\n+                    TYPE_ARG@[79; 80)\n+                      PATH_TYPE@[79; 80)\n+                        PATH@[79; 80)\n+                          PATH_SEGMENT@[79; 80)\n+                            NAME_REF@[79; 80)\n+                              IDENT@[79; 80) \"U\"\n+                    R_ANGLE@[80; 81) \">\"\n+    SEMI@[81; 82) \";\"\n+  WHITESPACE@[82; 83) \"\\n\""}]}