{"sha": "136900fdbbe218d16190c38042ec2aa16cb50840", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzNjkwMGZkYmJlMjE4ZDE2MTkwYzM4MDQyZWMyYWExNmNiNTA4NDA=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-09-01T19:53:03Z"}, "committer": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2013-09-16T11:26:49Z"}, "message": "Finish addition of rustdoc_ng to Makefiles.", "tree": {"sha": "ed65a8ca63873d95ac6bcc3f30e058b796f670bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed65a8ca63873d95ac6bcc3f30e058b796f670bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/136900fdbbe218d16190c38042ec2aa16cb50840", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/136900fdbbe218d16190c38042ec2aa16cb50840", "html_url": "https://github.com/rust-lang/rust/commit/136900fdbbe218d16190c38042ec2aa16cb50840", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/136900fdbbe218d16190c38042ec2aa16cb50840/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "268f3f0ff5d80544ca21d565354eae6d3e29fb91", "url": "https://api.github.com/repos/rust-lang/rust/commits/268f3f0ff5d80544ca21d565354eae6d3e29fb91", "html_url": "https://github.com/rust-lang/rust/commit/268f3f0ff5d80544ca21d565354eae6d3e29fb91"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "848fa8447b693b6f3879f284a526aff64524ace2", "filename": "mk/tools.mk", "status": "modified", "additions": 26, "deletions": 2, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/136900fdbbe218d16190c38042ec2aa16cb50840/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/136900fdbbe218d16190c38042ec2aa16cb50840/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=136900fdbbe218d16190c38042ec2aa16cb50840", "patch": "@@ -25,8 +25,8 @@ RUSTDOC_INPUTS := $(wildcard $(S)src/librustdoc/*.rs)\n \n # rustdoc_ng, the next generation documentation tool\n \n-RUSTDOCNG_LIB := $(S)src/rustdoc/lib.rs\n-RUSTDOCNG_INPUTS := $(wildcard $(S)src/rustdoc/*.rs)\n+RUSTDOCNG_LIB := $(S)src/rustdoc_ng/lib.rs\n+RUSTDOCNG_INPUTS := $(wildcard $(S)src/rustdoc_ng/*.rs)\n \n # Rusti, the JIT REPL\n RUSTI_LIB := $(S)src/librusti/rusti.rs\n@@ -83,6 +83,16 @@ $$(TBIN$(1)_T_$(4)_H_$(3))/rustdoc$$(X_$(4)):\t\t\t\\\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(4)_H_$(3)) --cfg rustdoc -o $$@ $$<\n \n+$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTDOCNG_$(4)):\t\t\\\n+\t\t$$(RUSTDOCNG_LIB) $$(RUSTDOCNG_INPUTS)\t\t\t\\\n+\t\t$$(SREQ$(1)_T_$(4)_H_$(3))\t\t\t\\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTC_$(4)) \\\n+\t\t| $$(TLIB$(1)_T_$(4)_H_$(3))/\n+\t@$$(call E, compile_and_link: $$@)\n+\t$$(call REMOVE_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTDOCNG_GLOB_$(4)),$$(notdir $$@))\n+\t$$(STAGE$(1)_T_$(4)_H_$(3)) --out-dir $$(@D) $$< && touch $$@\n+\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTDOCNG_GLOB_$(4)),$$(notdir $$@))\n+\n $$(TBIN$(1)_T_$(4)_H_$(3))/rustdoc_ng$$(X_$(4)):\t\t\t\\\n \t\t$$(DRIVER_CRATE) \t\t\t\t\t\t\t\\\n \t\t$$(TSREQ$(1)_T_$(4)_H_$(3))\t\t\t\t\t\t\\\n@@ -115,6 +125,7 @@ $$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUST_$(4)):\t\t\\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTPKG_$(4))\t\\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTI_$(4))\t\t\\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTDOC_$(4))\t\\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTDOCNG_$(4))\t\\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTC_$(4))\t\t\\\n \t\t| $$(TLIB$(1)_T_$(4)_H_$(3))/\n \t@$$(call E, compile_and_link: $$@)\n@@ -184,6 +195,19 @@ $$(HBIN$(2)_H_$(4))/rustdoc$$(X_$(4)):\t\t\t\t\\\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n+$$(HLIB$(2)_H_$(4))/$(CFG_LIBRUSTDOCNG_$(4)):\t\t\t\t\t\\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTDOCNG_$(4))\t\\\n+\t\t$$(HLIB$(2)_H_$(4))/$(CFG_LIBRUSTC_$(4))\t\t\t\\\n+\t\t$$(HSREQ$(2)_H_$(4)) \\\n+\t\t| $$(HLIB$(2)_H_$(4))/\n+\t@$$(call E, cp: $$@)\n+\t$$(call REMOVE_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTDOCNG_GLOB_$(4)),$$(notdir $$@))\n+\t$$(Q)cp $$< $$@\n+\t$$(call LIST_ALL_OLD_GLOB_MATCHES_EXCEPT,$$(dir $$@),$(LIBRUSTDOCNG_GLOB_$(4)),$$(notdir $$@))\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTDOCNG_GLOB_$(4)) \\\n+\t\t$$(wildcard $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTDOCNG_DSYM_GLOB_$(4))) \\\n+\t        $$(HLIB$(2)_H_$(4))\n+\n $$(HLIB$(2)_H_$(4))/$(CFG_LIBRUSTI_$(4)):\t\t\t\t\t\\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(CFG_LIBRUSTI_$(4))\t\\\n \t\t$$(HLIB$(2)_H_$(4))/$(CFG_LIBRUSTC_$(4))\t\t\t\\"}]}