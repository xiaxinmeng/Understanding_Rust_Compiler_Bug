{"sha": "a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyY2EwM2QxMGIwOTNlYTIwZDdkYjhiZmQ3OGFhMWU3ODc0ODJjYzA=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-17T11:11:00Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-17T11:11:00Z"}, "message": ":arrow_up: salsa", "tree": {"sha": "0723f5b15899902811d027587a46698016d21d54", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0723f5b15899902811d027587a46698016d21d54"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "html_url": "https://github.com/rust-lang/rust/commit/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "454cc313589fb17de92d6f3dbf576a5ea5f4adf2", "url": "https://api.github.com/repos/rust-lang/rust/commits/454cc313589fb17de92d6f3dbf576a5ea5f4adf2", "html_url": "https://github.com/rust-lang/rust/commit/454cc313589fb17de92d6f3dbf576a5ea5f4adf2"}], "stats": {"total": 424, "additions": 190, "deletions": 234}, "files": [{"sha": "e0a41e2580c3f18c2192eda0694a1aa09ce18e59", "filename": "Cargo.lock", "status": "modified", "additions": 55, "deletions": 44, "changes": 99, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -39,15 +39,15 @@ dependencies = [\n \n [[package]]\n name = \"autocfg\"\n-version = \"0.1.1\"\n+version = \"0.1.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"backtrace\"\n version = \"0.3.13\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"autocfg 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"autocfg 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"backtrace-sys 0.1.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.47 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -118,7 +118,7 @@ dependencies = [\n  \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_derive 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -246,9 +246,9 @@ name = \"derive-new\"\n version = \"0.5.6\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -314,9 +314,9 @@ name = \"failure_derive\"\n version = \"0.1.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"synstructure 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -327,7 +327,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"flexi_logger\"\n-version = \"0.10.4\"\n+version = \"0.10.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"chrono 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -373,7 +373,7 @@ dependencies = [\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lsp-types 0.54.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -414,7 +414,7 @@ dependencies = [\n \n [[package]]\n name = \"im\"\n-version = \"12.2.0\"\n+version = \"12.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -437,7 +437,7 @@ dependencies = [\n  \"failure 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -495,7 +495,7 @@ dependencies = [\n  \"num-traits 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_derive 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"url 1.7.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"url_serde 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -545,9 +545,9 @@ version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"num-traits 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -629,9 +629,9 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"pest 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pest_meta 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -646,7 +646,7 @@ dependencies = [\n \n [[package]]\n name = \"proc-macro2\"\n-version = \"0.4.24\"\n+version = \"0.4.25\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -679,7 +679,7 @@ name = \"quote\"\n version = \"0.6.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -707,7 +707,7 @@ dependencies = [\n  \"ra_syntax 0.1.0\",\n  \"relative-path 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"salsa 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"salsa 0.10.0-alpha1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"test_utils 0.1.0\",\n ]\n \n@@ -717,7 +717,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"arrayvec 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ena 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"flexi_logger 0.10.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"flexi_logger 0.10.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"join_to_string 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -726,7 +726,6 @@ dependencies = [\n  \"ra_syntax 0.1.0\",\n  \"relative-path 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"salsa 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"test_utils 0.1.0\",\n ]\n \n@@ -747,7 +746,6 @@ dependencies = [\n  \"rayon 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"relative-path 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"salsa 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"test_utils 0.1.0\",\n  \"unicase 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -776,9 +774,9 @@ dependencies = [\n  \"drop_bomb 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"failure 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"failure_derive 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"flexi_logger 0.10.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"flexi_logger 0.10.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"gen_lsp_server 0.1.0\",\n- \"im 12.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"im 12.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lsp-types 0.54.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -791,7 +789,7 @@ dependencies = [\n  \"relative-path 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"test_utils 0.1.0\",\n  \"thread_worker 0.1.0\",\n@@ -857,7 +855,7 @@ name = \"rand\"\n version = \"0.6.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"autocfg 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"autocfg 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.47 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_chacha 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -874,7 +872,7 @@ name = \"rand_chacha\"\n version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"autocfg 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"autocfg 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1071,7 +1069,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"salsa\"\n-version = \"0.9.2\"\n+version = \"0.10.0-alpha1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"derive-new 0.5.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1080,9 +1078,21 @@ dependencies = [\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"salsa-macros 0.10.0-alpha1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"smallvec 0.6.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"salsa-macros\"\n+version = \"0.10.0-alpha1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"heck 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"same-file\"\n version = \"1.0.4\"\n@@ -1123,14 +1133,14 @@ name = \"serde_derive\"\n version = \"1.0.84\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"serde_json\"\n-version = \"1.0.35\"\n+version = \"1.0.36\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"itoa 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1190,10 +1200,10 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"syn\"\n-version = \"0.15.25\"\n+version = \"0.15.26\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -1203,9 +1213,9 @@ name = \"synstructure\"\n version = \"0.10.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1236,7 +1246,7 @@ dependencies = [\n  \"pest_derive 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"slug 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unic-segment 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"url 1.7.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1277,7 +1287,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"difference 2.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"itertools 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"text_unit 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1536,7 +1546,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum arrayref 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0d382e583f07208808f6b1249e60848879ba3543f57c32277bf52d69c2f0f0ee\"\n \"checksum arrayvec 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"92c7fb76bc8826a8b33b4ee5bb07a247a81e76764ab4d55e8f73e3a4d8808c71\"\n \"checksum atty 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9a7d5b8723950951411ee34d271d99dddcc2035a16ab25310ea2c8cfd4369652\"\n-\"checksum autocfg 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4e5f34df7a019573fb8bdc7e24a2bfebe51a2a1d6bfdbaeccedb3c41fc574727\"\n+\"checksum autocfg 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a6d640bee2da49f60a4068a7fae53acde8982514ab7bae8b8cea9e88cbcfd799\"\n \"checksum backtrace 0.3.13 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b5b493b66e03090ebc4343eb02f94ff944e0cbc9ac6571491d170ba026741eb5\"\n \"checksum backtrace-sys 0.1.28 (registry+https://github.com/rust-lang/crates.io-index)\" = \"797c830ac25ccc92a7f8a7b9862bde440715531514594a6154e3d4a54dd769b6\"\n \"checksum base64 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"621fc7ecb8008f86d7fb9b95356cd692ce9514b80a86d85b397f32a22da7b9e2\"\n@@ -1571,7 +1581,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum failure 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"795bd83d3abeb9220f257e597aa0080a508b27533824adf336529648f6abf7e2\"\n \"checksum failure_derive 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ea1063915fd7ef4309e222a5a07cf9c319fb9c7836b1f89b85458672dbb127e1\"\n \"checksum fake-simd 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e88a8acf291dafb59c2d96e8f59828f3838bb1a70398823ade51a84de6a6deed\"\n-\"checksum flexi_logger 0.10.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7d3681306880a7ce87740ceb3d1ce98ca92ae636ff30a629494488cbbcf85ff8\"\n+\"checksum flexi_logger 0.10.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bbd731387787f54fa333fa426e173fe42ea3d1123636b2b27ad802025fc5d182\"\n \"checksum fnv 1.0.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2fad85553e09a6f881f739c29f0b00b0f01357c743266d478b68951ce23285f3\"\n \"checksum fst 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"db72126ca7dff566cdbbdd54af44668c544897d9d3862b198141f176f1238bdf\"\n \"checksum fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82\"\n@@ -1581,7 +1591,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum heck 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"20564e78d53d2bb135c343b3f47714a56af2061f1c928fdb541dc7b9fdd94205\"\n \"checksum humansize 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b6cab2627acfc432780848602f3f558f7e9dd427352224b0d9324025796d2a5e\"\n \"checksum idna 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"38f09e0f0b1fb55fdee1f17470ad800da77af5186a1a76c026b679358b7e844e\"\n-\"checksum im 12.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ae9c7f9bb8aee47fc16d535a705f7867a9fc83bb822e5e1043bb98e77ffeed3c\"\n+\"checksum im 12.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0627d417829c1d763d602687634869f254fc79f7e22dea6c824dab993db857e4\"\n \"checksum indexmap 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7e81a7c05f79578dbc15793d8b619db9ba32b4577003ef3af1a91c416798c58d\"\n \"checksum insta 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"60e94ba6dd3521d953caeed96f6ba06f4cdc9e30e398b3ee7acdd680294f87dc\"\n \"checksum itertools 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5b8467d9c1cebe26feb08c640139247fac215782d35371ade9a2136ed6085358\"\n@@ -1610,7 +1620,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum pest_derive 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"833d1ae558dc601e9a60366421196a8d94bc0ac980476d0b67e1d0988d72b2d0\"\n \"checksum pest_generator 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"63120576c4efd69615b5537d3d052257328a4ca82876771d6944424ccfd9f646\"\n \"checksum pest_meta 2.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f5a3492a4ed208ffc247adcdcc7ba2a95be3104f58877d0d02f0df39bf3efb5e\"\n-\"checksum proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\" = \"77619697826f31a02ae974457af0b29b723e5619e113e9397b8b82c6bd253f09\"\n+\"checksum proc-macro2 0.4.25 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d3797b7142c9aa74954e351fc089bbee7958cebbff6bf2815e7ffff0b19f547d\"\n \"checksum proptest 0.8.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"926d0604475349f463fe44130aae73f2294b5309ab2ca0310b998bd334ef191f\"\n \"checksum quick-error 1.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9274b940887ce9addde99c4eee6b5c44cc494b182b97e73dc8ffdcb3397fd3f0\"\n \"checksum quote 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"53fa22a1994bd0f9372d7a816207d8a2677ad0325b073f5c5332760f0fb62b5c\"\n@@ -1640,22 +1650,23 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n \"checksum rusty-fork 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9591f190d2852720b679c21f66ad929f9f1d7bb09d1193c26167586029d8489c\"\n \"checksum ryu 0.2.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"eb9e9b8cde282a9fe6a42dd4681319bfb63f121b8a8ee9439c6f4107e58a46f7\"\n-\"checksum salsa 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c73fd43ecb8ec5fbe64828ced981075b828109f011620d0fa1b66e9e983ceb84\"\n+\"checksum salsa 0.10.0-alpha1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4cc048429df53bf0720b93cfa5fa8c3fc3dc7dd65ab41b3f754a8870e7b5c834\"\n+\"checksum salsa-macros 0.10.0-alpha1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0d5a1aeb618da4b1a00d2885d045154ac30deb04109f3ce73c1fd789caba4fb1\"\n \"checksum same-file 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8f20c4be53a8a1ff4c1f1b2bd14570d2f634628709752f0702ecdd2b3f9a5267\"\n \"checksum scopeguard 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94258f53601af11e6a49f722422f6e3425c52b06245a5cf9bc09908b174f5e27\"\n \"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n \"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n \"checksum serde 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0e732ed5a5592c17d961555e3b552985baf98d50ce418b7b655f31f6ba7eb1b7\"\n \"checksum serde_derive 1.0.84 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b4d6115a3ca25c224e409185325afc16a0d5aaaabc15c42b09587d6f1ba39a5b\"\n-\"checksum serde_json 1.0.35 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dfb1277d4d0563e4593e0b8b5d23d744d277b55d2bc0bf1c38d0d8a6589d38aa\"\n+\"checksum serde_json 1.0.36 (registry+https://github.com/rust-lang/crates.io-index)\" = \"574378d957d6dcdf1bbb5d562a15cbd5e644159432f84634b94e485267abbcc7\"\n \"checksum sha-1 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"51b9d1f3b5de8a167ab06834a7c883bd197f2191e1dda1a22d9ccfeedbf9aded\"\n \"checksum slug 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b3bc762e6a4b6c6fcaade73e77f9ebc6991b676f88bb2358bddb56560f073373\"\n \"checksum smallvec 0.6.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b73ea3738b47563803ef814925e69be00799a8c07420be8b996f8e98fb2336db\"\n \"checksum smol_str 0.1.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9af1035bc5d742ab6b7ab16713e41cc2ffe78cb474f6f43cd696b2d16052007e\"\n \"checksum stable_deref_trait 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dba1a27d3efae4351c8051072d619e3ade2820635c3958d826bfea39d59b54c8\"\n \"checksum strsim 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bb4f380125926a99e52bc279241539c018323fab05ad6368b56f93d9369ff550\"\n \"checksum superslice 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b50b13d42370e0f5fc62eafdd5c2d20065eaf5458dab215ff3e20e63eea96b30\"\n-\"checksum syn 0.15.25 (registry+https://github.com/rust-lang/crates.io-index)\" = \"71b7693d9626935a362a3d1d4e59380800a919ebfa478d77a4f49e2a6d2c3ad5\"\n+\"checksum syn 0.15.26 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f92e629aa1d9c827b2bb8297046c1ccffc57c99b947a680d3ccff1f136a3bee9\"\n \"checksum synstructure 0.10.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"73687139bf99285483c96ac0add482c3776528beac1d97d444f6e91f203a2015\"\n \"checksum tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7e91405c14320e5c79b3d148e1c86f40749a36e490642202a31689cb1a3452b2\"\n \"checksum tera 0.11.20 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4b505279e19d8f7d24b1a9dc58327c9c36174b1a2c7ebdeac70792d017cb64f3\""}, {"sha": "bb1b5eae790e1c1c48cb5c2d76d6fbcd6a7388ef", "filename": "crates/ra_db/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2FCargo.toml?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -6,7 +6,7 @@ authors = [\"Aleksey Kladov <aleksey.kladov@gmail.com>\"]\n \n [dependencies]\n relative-path = \"0.4.0\"\n-salsa = \"0.9.2\"\n+salsa = \"0.10.0-alpha1\"\n rustc-hash = \"1.0\"\n parking_lot = \"0.7.0\"\n ra_arena = { path = \"../ra_arena\" }"}, {"sha": "b5d63e82012e308c06757940186ba011204f9548", "filename": "crates/ra_db/src/input.rs", "status": "modified", "additions": 25, "deletions": 40, "changes": 65, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2Fsrc%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2Fsrc%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Finput.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -146,46 +146,31 @@ impl CrateGraph {\n     }\n }\n \n-salsa::query_group! {\n-    pub trait FilesDatabase: salsa::Database {\n-        /// Text of the file.\n-        fn file_text(file_id: FileId) -> Arc<String> {\n-            type FileTextQuery;\n-            storage input;\n-        }\n-        /// Path to a file, relative to the root of its source root.\n-        fn file_relative_path(file_id: FileId) -> RelativePathBuf {\n-            type FileRelativePathQuery;\n-            storage input;\n-        }\n-        /// Source root of the file.\n-        fn file_source_root(file_id: FileId) -> SourceRootId {\n-            type FileSourceRootQuery;\n-            storage input;\n-        }\n-        /// Contents of the source root.\n-        fn source_root(id: SourceRootId) -> Arc<SourceRoot> {\n-            type SourceRootQuery;\n-            storage input;\n-        }\n-        /// The set of \"local\" (that is, from the current workspace) roots.\n-        /// Files in local roots are assumed to change frequently.\n-        fn local_roots() -> Arc<Vec<SourceRootId>> {\n-            type LocalRootsQuery;\n-            storage input;\n-        }\n-        /// The set of roots for crates.io libraries.\n-        /// Files in libraries are assumed to never change.\n-        fn library_roots() -> Arc<Vec<SourceRootId>> {\n-            type LibraryRootsQuery;\n-            storage input;\n-        }\n-        /// The crate graph.\n-        fn crate_graph() -> Arc<CrateGraph> {\n-            type CrateGraphQuery;\n-            storage input;\n-        }\n-    }\n+#[salsa::query_group]\n+pub trait FilesDatabase: salsa::Database {\n+    /// Text of the file.\n+    #[salsa::input]\n+    fn file_text(&self, file_id: FileId) -> Arc<String>;\n+    /// Path to a file, relative to the root of its source root.\n+    #[salsa::input]\n+    fn file_relative_path(&self, file_id: FileId) -> RelativePathBuf;\n+    /// Source root of the file.\n+    #[salsa::input]\n+    fn file_source_root(&self, file_id: FileId) -> SourceRootId;\n+    /// Contents of the source root.\n+    #[salsa::input]\n+    fn source_root(&self, id: SourceRootId) -> Arc<SourceRoot>;\n+    /// The set of \"local\" (that is, from the current workspace) roots.\n+    /// Files in local roots are assumed to change frequently.\n+    #[salsa::input]\n+    fn local_roots(&self) -> Arc<Vec<SourceRootId>>;\n+    /// The set of roots for crates.io libraries.\n+    /// Files in libraries are assumed to never change.\n+    #[salsa::input]\n+    fn library_roots(&self) -> Arc<Vec<SourceRootId>>;\n+    /// The crate graph.\n+    #[salsa::input]\n+    fn crate_graph(&self) -> Arc<CrateGraph>;\n }\n \n #[cfg(test)]"}, {"sha": "dbeb9ec716ce270913d7ea2da8c34e13268630c1", "filename": "crates/ra_db/src/lib.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_db%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Flib.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -9,6 +9,7 @@ use std::panic;\n \n use ra_syntax::{TextUnit, TextRange, SourceFile, TreeArc};\n \n+pub use ::salsa as salsa;\n pub use crate::{\n     cancellation::Canceled,\n     syntax_ptr::LocalSyntaxPtr,\n@@ -51,12 +52,9 @@ pub trait BaseDatabase: salsa::Database + panic::RefUnwindSafe {\n     }\n }\n \n-salsa::query_group! {\n-    pub trait SyntaxDatabase: crate::input::FilesDatabase + BaseDatabase {\n-        fn source_file(file_id: FileId) -> TreeArc<SourceFile> {\n-            type SourceFileQuery;\n-        }\n-    }\n+#[salsa::query_group]\n+pub trait SyntaxDatabase: crate::input::FilesDatabase + BaseDatabase {\n+    fn source_file(&self, file_id: FileId) -> TreeArc<SourceFile>;\n }\n \n fn source_file(db: &impl SyntaxDatabase, file_id: FileId) -> TreeArc<SourceFile> {"}, {"sha": "87d2e98e9d4e25f743d05c5d3e829af1ac7a7cdb", "filename": "crates/ra_hir/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2FCargo.toml?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -8,7 +8,6 @@ authors = [\"Aleksey Kladov <aleksey.kladov@gmail.com>\"]\n arrayvec = \"0.4.10\"\n log = \"0.4.5\"\n relative-path = \"0.4.0\"\n-salsa = \"0.9.2\"\n rustc-hash = \"1.0\"\n parking_lot = \"0.7.0\"\n ena = \"0.11\""}, {"sha": "b42f100718862a6c087bc6650956bb7259b80909", "filename": "crates/ra_hir/src/db.rs", "status": "modified", "additions": 70, "deletions": 104, "changes": 174, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fdb.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -1,7 +1,7 @@\n use std::sync::Arc;\n \n use ra_syntax::{SyntaxNode, TreeArc, SourceFile};\n-use ra_db::{SourceRootId, LocationIntener, SyntaxDatabase};\n+use ra_db::{SourceRootId, LocationIntener, SyntaxDatabase, salsa};\n \n use crate::{\n     DefLoc, DefId, MacroCallLoc, MacroCallId, Name, HirFileId,\n@@ -16,111 +16,77 @@ use crate::{\n     impl_block::ModuleImplBlocks,\n };\n \n-salsa::query_group! {\n-\n-pub trait HirDatabase: SyntaxDatabase\n+#[salsa::query_group]\n+pub trait HirDatabase:\n+    SyntaxDatabase\n     + AsRef<LocationIntener<DefLoc, DefId>>\n     + AsRef<LocationIntener<MacroCallLoc, MacroCallId>>\n {\n-    fn hir_source_file(file_id: HirFileId) -> TreeArc<SourceFile> {\n-        type HirSourceFileQuery;\n-        use fn HirFileId::hir_source_file;\n-    }\n-\n-    fn expand_macro_invocation(invoc: MacroCallId) -> Option<Arc<MacroExpansion>> {\n-        type ExpandMacroCallQuery;\n-        use fn crate::macros::expand_macro_invocation;\n-    }\n-\n-    fn fn_scopes(def_id: DefId) -> Arc<FnScopes> {\n-        type FnScopesQuery;\n-        use fn query_definitions::fn_scopes;\n-    }\n-\n-    fn struct_data(def_id: DefId) -> Arc<StructData> {\n-        type StructDataQuery;\n-        use fn crate::adt::StructData::struct_data_query;\n-    }\n-\n-    fn enum_data(def_id: DefId) -> Arc<EnumData> {\n-        type EnumDataQuery;\n-        use fn crate::adt::EnumData::enum_data_query;\n-    }\n-\n-    fn enum_variant_data(def_id: DefId) -> Arc<EnumVariantData> {\n-        type EnumVariantDataQuery;\n-        use fn crate::adt::EnumVariantData::enum_variant_data_query;\n-    }\n-\n-    fn infer(def_id: DefId) -> Arc<InferenceResult> {\n-        type InferQuery;\n-        use fn crate::ty::infer;\n-    }\n-\n-    fn type_for_def(def_id: DefId) -> Ty {\n-        type TypeForDefQuery;\n-        use fn crate::ty::type_for_def;\n-    }\n-\n-    fn type_for_field(def_id: DefId, field: Name) -> Option<Ty> {\n-        type TypeForFieldQuery;\n-        use fn crate::ty::type_for_field;\n-    }\n-\n-    fn file_items(file_id: HirFileId) -> Arc<SourceFileItems> {\n-        type SourceFileItemsQuery;\n-        use fn query_definitions::file_items;\n-    }\n-\n-    fn file_item(source_item_id: SourceItemId) -> TreeArc<SyntaxNode> {\n-        type FileItemQuery;\n-        use fn query_definitions::file_item;\n-    }\n-\n-    fn submodules(source: SourceItemId) -> Arc<Vec<crate::module_tree::Submodule>> {\n-        type SubmodulesQuery;\n-        use fn crate::module_tree::Submodule::submodules_query;\n-    }\n-\n-    fn input_module_items(source_root_id: SourceRootId, module_id: ModuleId) -> Arc<InputModuleItems> {\n-        type InputModuleItemsQuery;\n-        use fn query_definitions::input_module_items;\n-    }\n-\n-    fn item_map(source_root_id: SourceRootId) -> Arc<ItemMap> {\n-        type ItemMapQuery;\n-        use fn query_definitions::item_map;\n-    }\n-\n-    fn module_tree(source_root_id: SourceRootId) -> Arc<ModuleTree> {\n-        type ModuleTreeQuery;\n-        use fn crate::module_tree::ModuleTree::module_tree_query;\n-    }\n-\n-    fn impls_in_module(source_root_id: SourceRootId, module_id: ModuleId) -> Arc<ModuleImplBlocks> {\n-        type ImplsInModuleQuery;\n-        use fn crate::impl_block::impls_in_module;\n-    }\n-\n-    fn impls_in_crate(krate: Crate) -> Arc<CrateImplBlocks> {\n-        type ImplsInCrateQuery;\n-        use fn crate::ty::method_resolution::CrateImplBlocks::impls_in_crate_query;\n-    }\n-\n-    fn body_hir(def_id: DefId) -> Arc<crate::expr::Body> {\n-        type BodyHirQuery;\n-        use fn crate::expr::body_hir;\n-    }\n-\n-    fn body_syntax_mapping(def_id: DefId) -> Arc<crate::expr::BodySyntaxMapping> {\n-        type BodySyntaxMappingQuery;\n-        use fn crate::expr::body_syntax_mapping;\n-    }\n-\n-    fn fn_signature(def_id: DefId) -> Arc<FnSignature> {\n-        type FnSignatureQuery;\n-        use fn crate::FnSignature::fn_signature_query;\n-    }\n-}\n+    #[salsa::invoke(HirFileId::hir_source_file)]\n+    fn hir_source_file(&self, file_id: HirFileId) -> TreeArc<SourceFile>;\n+\n+    #[salsa::invoke(crate::macros::expand_macro_invocation)]\n+    fn expand_macro_invocation(&self, invoc: MacroCallId) -> Option<Arc<MacroExpansion>>;\n+\n+    #[salsa::invoke(query_definitions::fn_scopes)]\n+    fn fn_scopes(&self, def_id: DefId) -> Arc<FnScopes>;\n+\n+    #[salsa::invoke(crate::adt::StructData::struct_data_query)]\n+    fn struct_data(&self, def_id: DefId) -> Arc<StructData>;\n+\n+    #[salsa::invoke(crate::adt::EnumData::enum_data_query)]\n+    fn enum_data(&self, def_id: DefId) -> Arc<EnumData>;\n+\n+    #[salsa::invoke(crate::adt::EnumVariantData::enum_variant_data_query)]\n+    fn enum_variant_data(&self, def_id: DefId) -> Arc<EnumVariantData>;\n+\n+    #[salsa::invoke(crate::ty::infer)]\n+    fn infer(&self, def_id: DefId) -> Arc<InferenceResult>;\n+\n+    #[salsa::invoke(crate::ty::type_for_def)]\n+    fn type_for_def(&self, def_id: DefId) -> Ty;\n+\n+    #[salsa::invoke(crate::ty::type_for_field)]\n+    fn type_for_field(&self, def_id: DefId, field: Name) -> Option<Ty>;\n+\n+    #[salsa::invoke(query_definitions::file_items)]\n+    fn file_items(&self, file_id: HirFileId) -> Arc<SourceFileItems>;\n+\n+    #[salsa::invoke(query_definitions::file_item)]\n+    fn file_item(&self, source_item_id: SourceItemId) -> TreeArc<SyntaxNode>;\n+\n+    #[salsa::invoke(crate::module_tree::Submodule::submodules_query)]\n+    fn submodules(&self, source: SourceItemId) -> Arc<Vec<crate::module_tree::Submodule>>;\n+\n+    #[salsa::invoke(query_definitions::input_module_items)]\n+    fn input_module_items(\n+        &self,\n+        source_root_id: SourceRootId,\n+        module_id: ModuleId,\n+    ) -> Arc<InputModuleItems>;\n+\n+    #[salsa::invoke(query_definitions::item_map)]\n+    fn item_map(&self, source_root_id: SourceRootId) -> Arc<ItemMap>;\n+\n+    #[salsa::invoke(crate::module_tree::ModuleTree::module_tree_query)]\n+    fn module_tree(&self, source_root_id: SourceRootId) -> Arc<ModuleTree>;\n+\n+    #[salsa::invoke(crate::impl_block::impls_in_module)]\n+    fn impls_in_module(\n+        &self,\n+        source_root_id: SourceRootId,\n+        module_id: ModuleId,\n+    ) -> Arc<ModuleImplBlocks>;\n+\n+    #[salsa::invoke(crate::ty::method_resolution::CrateImplBlocks::impls_in_crate_query)]\n+    fn impls_in_crate(&self, krate: Crate) -> Arc<CrateImplBlocks>;\n+\n+    #[salsa::invoke(crate::expr::body_hir)]\n+    fn body_hir(&self, def_id: DefId) -> Arc<crate::expr::Body>;\n+\n+    #[salsa::invoke(crate::expr::body_syntax_mapping)]\n+    fn body_syntax_mapping(&self, def_id: DefId) -> Arc<crate::expr::BodySyntaxMapping>;\n \n+    #[salsa::invoke(crate::FnSignature::fn_signature_query)]\n+    fn fn_signature(&self, def_id: DefId) -> Arc<FnSignature>;\n }"}, {"sha": "a83a5c6cc1627c36551c6ddf5c1b31c8a6cef1df", "filename": "crates/ra_hir/src/mock.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fmock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fmock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fmock.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -1,8 +1,10 @@\n use std::{sync::Arc, panic};\n \n use parking_lot::Mutex;\n-use salsa::{self, Database};\n-use ra_db::{LocationIntener, BaseDatabase, FilePosition, FileId, CrateGraph, SourceRoot, SourceRootId};\n+use ra_db::{\n+    LocationIntener, BaseDatabase, FilePosition, FileId, CrateGraph, SourceRoot, SourceRootId,\n+    salsa::{self, Database},\n+};\n use relative_path::RelativePathBuf;\n use test_utils::{parse_fixture, CURSOR_MARKER, extract_offset};\n \n@@ -220,10 +222,10 @@ salsa::database_storage! {\n         }\n         impl db::HirDatabase {\n             fn hir_source_file() for db::HirSourceFileQuery;\n-            fn expand_macro_invocation() for db::ExpandMacroCallQuery;\n+            fn expand_macro_invocation() for db::ExpandMacroInvocationQuery;\n             fn module_tree() for db::ModuleTreeQuery;\n             fn fn_scopes() for db::FnScopesQuery;\n-            fn file_items() for db::SourceFileItemsQuery;\n+            fn file_items() for db::FileItemsQuery;\n             fn file_item() for db::FileItemQuery;\n             fn input_module_items() for db::InputModuleItemsQuery;\n             fn item_map() for db::ItemMapQuery;"}, {"sha": "0ec11ec127eaf3b8bdeb703b2e97b4b5c3d89df8", "filename": "crates/ra_hir/src/nameres/tests.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fnameres%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fnameres%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fnameres%2Ftests.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -1,7 +1,6 @@\n use std::sync::Arc;\n \n-use salsa::Database;\n-use ra_db::{FilesDatabase, CrateGraph, SourceRootId};\n+use ra_db::{FilesDatabase, CrateGraph, SourceRootId, salsa::Database};\n use relative_path::RelativePath;\n use test_utils::assert_eq_text;\n "}, {"sha": "a430cbe88f08a641bb728052a7f786ded257d59c", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -3,9 +3,7 @@ use std::fmt::Write;\n use std::path::{PathBuf, Path};\n use std::fs;\n \n-use salsa::Database;\n-\n-use ra_db::SyntaxDatabase;\n+use ra_db::{SyntaxDatabase, salsa::Database};\n use ra_syntax::ast::{self, AstNode};\n use test_utils::{project_dir, assert_eq_text, read_text};\n "}, {"sha": "702c119321b469b70db3277d48fbd668f2ebbda4", "filename": "crates/ra_ide_api/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2FCargo.toml?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -10,7 +10,6 @@ log = \"0.4.5\"\n relative-path = \"0.4.0\"\n rayon = \"1.0.2\"\n fst = \"0.3.1\"\n-salsa = \"0.9.2\"\n rustc-hash = \"1.0\"\n parking_lot = \"0.7.0\"\n unicase = \"2.2.0\""}, {"sha": "36778b9559edaf3421dc3b5f36b619498ad53659", "filename": "crates/ra_ide_api/src/db.rs", "status": "modified", "additions": 9, "deletions": 10, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fdb.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -1,7 +1,9 @@\n use std::{fmt, sync::Arc};\n \n-use salsa::{self, Database};\n-use ra_db::{LocationIntener, BaseDatabase, FileId, Canceled};\n+use ra_db::{\n+    LocationIntener, BaseDatabase, FileId, Canceled,\n+    salsa::{self, Database},\n+};\n \n use crate::{symbol_index, LineIndex};\n \n@@ -73,12 +75,9 @@ impl AsRef<LocationIntener<hir::MacroCallLoc, hir::MacroCallId>> for RootDatabas\n     }\n }\n \n-salsa::query_group! {\n-    pub(crate) trait LineIndexDatabase: ra_db::FilesDatabase + BaseDatabase {\n-        fn line_index(file_id: FileId) -> Arc<LineIndex> {\n-            type LineIndexQuery;\n-        }\n-    }\n+#[salsa::query_group]\n+pub(crate) trait LineIndexDatabase: ra_db::FilesDatabase + BaseDatabase {\n+    fn line_index(&self, file_id: FileId) -> Arc<LineIndex>;\n }\n \n fn line_index(db: &impl ra_db::FilesDatabase, file_id: FileId) -> Arc<LineIndex> {\n@@ -109,10 +108,10 @@ salsa::database_storage! {\n         }\n         impl hir::db::HirDatabase {\n             fn hir_source_file() for hir::db::HirSourceFileQuery;\n-            fn expand_macro_invocation() for hir::db::ExpandMacroCallQuery;\n+            fn expand_macro_invocation() for hir::db::ExpandMacroInvocationQuery;\n             fn module_tree() for hir::db::ModuleTreeQuery;\n             fn fn_scopes() for hir::db::FnScopesQuery;\n-            fn file_items() for hir::db::SourceFileItemsQuery;\n+            fn file_items() for hir::db::FileItemsQuery;\n             fn file_item() for hir::db::FileItemQuery;\n             fn input_module_items() for hir::db::InputModuleItemsQuery;\n             fn item_map() for hir::db::ItemMapQuery;"}, {"sha": "28e497965027b5fa97b7ccecd9737d2ab69e65a7", "filename": "crates/ra_ide_api/src/imp.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fimp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fimp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fimp.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -1,11 +1,12 @@\n use std::sync::Arc;\n \n-use salsa::Database;\n-\n use hir::{\n     self, Problem, source_binder,\n };\n-use ra_db::{FilesDatabase, SourceRoot, SourceRootId, SyntaxDatabase};\n+use ra_db::{\n+    FilesDatabase, SourceRoot, SourceRootId, SyntaxDatabase,\n+    salsa::{self, Database},\n+};\n use ra_ide_api_light::{self, assists, LocalEdit, Severity};\n use ra_syntax::{\n     TextRange, AstNode, SourceFile,\n@@ -89,7 +90,7 @@ impl db::RootDatabase {\n     fn gc_syntax_trees(&mut self) {\n         self.query(ra_db::SourceFileQuery)\n             .sweep(salsa::SweepStrategy::default().discard_values());\n-        self.query(hir::db::SourceFileItemsQuery)\n+        self.query(hir::db::FileItemsQuery)\n             .sweep(salsa::SweepStrategy::default().discard_values());\n         self.query(hir::db::FileItemQuery)\n             .sweep(salsa::SweepStrategy::default().discard_values());"}, {"sha": "7b47d7b6d04036437199c9856b56639ef0ea50b0", "filename": "crates/ra_ide_api/src/lib.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Flib.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -28,11 +28,13 @@ use std::{fmt, sync::Arc};\n \n use ra_syntax::{SourceFile, TreeArc, TextRange, TextUnit};\n use ra_text_edit::TextEdit;\n-use ra_db::{SyntaxDatabase, FilesDatabase, BaseDatabase};\n+use ra_db::{\n+    SyntaxDatabase, FilesDatabase, BaseDatabase,\n+    salsa::{self, ParallelDatabase},\n+};\n use rayon::prelude::*;\n use relative_path::RelativePathBuf;\n use rustc_hash::FxHashMap;\n-use salsa::ParallelDatabase;\n \n use crate::{\n     symbol_index::{FileSymbol, SymbolIndex},"}, {"sha": "bfa2f34699655f532f08e2c7fd20e3291021642b", "filename": "crates/ra_ide_api/src/symbol_index.rs", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fsymbol_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2ca03d10b093ea20d7db8bfd78aa1e787482cc0/crates%2Fra_ide_api%2Fsrc%2Fsymbol_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsymbol_index.rs?ref=a2ca03d10b093ea20d7db8bfd78aa1e787482cc0", "patch": "@@ -32,25 +32,22 @@ use ra_syntax::{\n     SyntaxKind::{self, *},\n     ast::{self, NameOwner},\n };\n-use ra_db::{SourceRootId, FilesDatabase, LocalSyntaxPtr};\n-use salsa::ParallelDatabase;\n+use ra_db::{\n+    SourceRootId, FilesDatabase, LocalSyntaxPtr,\n+    salsa::{self, ParallelDatabase},\n+};\n use rayon::prelude::*;\n \n use crate::{\n     FileId, Query,\n     db::RootDatabase,\n };\n \n-salsa::query_group! {\n-    pub(crate) trait SymbolsDatabase: hir::db::HirDatabase {\n-        fn file_symbols(file_id: FileId) -> Arc<SymbolIndex> {\n-            type FileSymbolsQuery;\n-        }\n-        fn library_symbols(id: SourceRootId) -> Arc<SymbolIndex> {\n-            type LibrarySymbolsQuery;\n-            storage input;\n-        }\n-    }\n+#[salsa::query_group]\n+pub(crate) trait SymbolsDatabase: hir::db::HirDatabase {\n+    fn file_symbols(&self, file_id: FileId) -> Arc<SymbolIndex>;\n+    #[salsa::input]\n+    fn library_symbols(&self, id: SourceRootId) -> Arc<SymbolIndex>;\n }\n \n fn file_symbols(db: &impl SymbolsDatabase, file_id: FileId) -> Arc<SymbolIndex> {"}]}