{"sha": "a75c21fc9cf970c0a4372c2e4c5f3b770050f26f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3NWMyMWZjOWNmOTcwYzBhNDM3MmMyZTRjNWYzYjc3MDA1MGYyNmY=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-24T18:56:02Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-24T18:56:02Z"}, "message": "Rollup merge of #27220 - AlisdairO:diagnostics120, r=Manishearth\n\nAs title!\r\n\r\nI should probably be bunching these up a bit more, but I'm not sure when my time is going to disappear on me.  Once my schedule stabilises I'll try to start batching them into larger PRs.\r\n\r\nPart of #24407.\r\nr? @Manishearth", "tree": {"sha": "8e321788aeeff241533aff0b915cd03a76fec487", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e321788aeeff241533aff0b915cd03a76fec487"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f", "html_url": "https://github.com/rust-lang/rust/commit/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fafb1fa82357e89759fb5698bac3252f852208f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/fafb1fa82357e89759fb5698bac3252f852208f0", "html_url": "https://github.com/rust-lang/rust/commit/fafb1fa82357e89759fb5698bac3252f852208f0"}, {"sha": "e66817512a414d1665e37e6016a6fc06522fb2e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e66817512a414d1665e37e6016a6fc06522fb2e0", "html_url": "https://github.com/rust-lang/rust/commit/e66817512a414d1665e37e6016a6fc06522fb2e0"}], "stats": {"total": 40, "additions": 39, "deletions": 1}, "files": [{"sha": "73ee3bbbe5b0132bee84908897f8add77eee573e", "filename": "src/librustc_typeck/diagnostics.rs", "status": "modified", "additions": 39, "deletions": 1, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f/src%2Flibrustc_typeck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a75c21fc9cf970c0a4372c2e4c5f3b770050f26f/src%2Flibrustc_typeck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fdiagnostics.rs?ref=a75c21fc9cf970c0a4372c2e4c5f3b770050f26f", "patch": "@@ -1316,6 +1316,45 @@ fn main() {\n ```\n \"##,\n \n+E0120: r##\"\n+An attempt was made to implement Drop on a trait, which is not allowed: only\n+structs and enums can implement Drop. An example causing this error:\n+\n+```\n+trait MyTrait {}\n+\n+impl Drop for MyTrait {\n+    fn drop(&mut self) {}\n+}\n+```\n+\n+A workaround for this problem is to wrap the trait up in a struct, and implement\n+Drop on that. An example is shown below:\n+\n+```\n+trait MyTrait {}\n+struct MyWrapper<T: MyTrait> { foo: T }\n+\n+impl <T: MyTrait> Drop for MyWrapper<T> {\n+    fn drop(&mut self) {}\n+}\n+\n+```\n+\n+Alternatively, wrapping trait objects requires something like the following:\n+\n+```\n+trait MyTrait {}\n+\n+//or Box<MyTrait>, if you wanted an owned trait object\n+struct MyWrapper<'a> { foo: &'a MyTrait }\n+\n+impl <'a> Drop for MyWrapper<'a> {\n+    fn drop(&mut self) {}\n+}\n+```\n+\"##,\n+\n E0121: r##\"\n In order to be consistent with Rust's lack of global type inference, type\n placeholders are disallowed by design in item signatures.\n@@ -2251,7 +2290,6 @@ register_diagnostics! {\n     E0103,\n     E0104,\n     E0118,\n-    E0120,\n     E0122,\n     E0123,\n     E0127,"}]}