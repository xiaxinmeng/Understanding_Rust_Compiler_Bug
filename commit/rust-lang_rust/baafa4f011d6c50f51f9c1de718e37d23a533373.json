{"sha": "baafa4f011d6c50f51f9c1de718e37d23a533373", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhYWZhNGYwMTFkNmM1MGY1MWY5YzFkZTcxOGUzN2QyM2E1MzMzNzM=", "commit": {"author": {"name": "Michael Smith", "email": "michael@spinda.net", "date": "2017-08-19T21:57:01Z"}, "committer": {"name": "Michael Smith", "email": "michael@spinda.net", "date": "2017-08-19T22:30:53Z"}, "message": "Fix wrapping of bounds in associated types\n\nBounds were wrapped to the full width of the line rather then the width\navailable after the \"type ...: \", resulting in rustfmt unnecessarily producing\nlines that were longer than the maximum width.", "tree": {"sha": "c94c8ee078a456afab61be4f6adc486d15ccdc7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c94c8ee078a456afab61be4f6adc486d15ccdc7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/baafa4f011d6c50f51f9c1de718e37d23a533373", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJZmLwfAAoJEIZFvfV06PdVaagP/0ZrevrzI4P1uSNCZo9fHMHV\nYJ+D9ZmCjfwSQTfpPVLbTCJF9a3jvlOTLgt1yewaHAFQaXoeUoG53HtSW2RgAiLt\nQ9C3gVGETgvCy+MM0FYHPVcBlvlifnEcwEjgeCj/dU0aXBH2CB4TZjNbjwrXnA6v\nxzGDzWziJ0H3Uh0O0HFshujzA8B1XyhfkVJYyYBafPJrcki5dwwNsifFpGeY4Wa+\n+Us5+6ZaCkTVMXUvBx7OObNm3FGyTpqRgP6fit4gMlECaIBQaKw4hvXzKb0lQbDb\nxeE82eeziNM0B14hsjSCyQRIHPbPKw/cvFrx9nEU8my+V4KBVllbG2yXB+BHfIvy\nyqdUmB6umSc7TH8zV0fyHOVXg9K4Fu9zOpZYLW0nL0EYOf5SLzDkIjuejnLoWGSX\nRdoKeRgadzeGk92BdWMc3XBEiLKATuJFUXsHtTFAZmwrmFOIQWZoUf41I9HlKPfv\nTaygErz0MCTA1Lhv2MILRBJmCRo9qshxclyGMMJ0+PsJ0+aINqH1E9sb/u8R7Ux0\nqR2SnGZoAnPJSY1mik0/F6SnYeakPabaVP/oDjJZEBiWMNclzx9cLKnQZFmHCZZT\nC7nLQpaaUfeXfTglk13RlchmTaamvz02Bwdxmgr+Fpb9g/lW5nEn3BBcxzsHgvP4\nMxX34AHBFzlL+1JKJUyp\n=FEhU\n-----END PGP SIGNATURE-----", "payload": "tree c94c8ee078a456afab61be4f6adc486d15ccdc7c\nparent c166004e6da83e4c90459bf96e95574c065ee306\nauthor Michael Smith <michael@spinda.net> 1503179821 -0700\ncommitter Michael Smith <michael@spinda.net> 1503181853 -0700\n\nFix wrapping of bounds in associated types\n\nBounds were wrapped to the full width of the line rather then the width\navailable after the \"type ...: \", resulting in rustfmt unnecessarily producing\nlines that were longer than the maximum width.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/baafa4f011d6c50f51f9c1de718e37d23a533373", "html_url": "https://github.com/rust-lang/rust/commit/baafa4f011d6c50f51f9c1de718e37d23a533373", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/baafa4f011d6c50f51f9c1de718e37d23a533373/comments", "author": {"login": "spinda", "id": 7958605, "node_id": "MDQ6VXNlcjc5NTg2MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7958605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spinda", "html_url": "https://github.com/spinda", "followers_url": "https://api.github.com/users/spinda/followers", "following_url": "https://api.github.com/users/spinda/following{/other_user}", "gists_url": "https://api.github.com/users/spinda/gists{/gist_id}", "starred_url": "https://api.github.com/users/spinda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spinda/subscriptions", "organizations_url": "https://api.github.com/users/spinda/orgs", "repos_url": "https://api.github.com/users/spinda/repos", "events_url": "https://api.github.com/users/spinda/events{/privacy}", "received_events_url": "https://api.github.com/users/spinda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spinda", "id": 7958605, "node_id": "MDQ6VXNlcjc5NTg2MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7958605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spinda", "html_url": "https://github.com/spinda", "followers_url": "https://api.github.com/users/spinda/followers", "following_url": "https://api.github.com/users/spinda/following{/other_user}", "gists_url": "https://api.github.com/users/spinda/gists{/gist_id}", "starred_url": "https://api.github.com/users/spinda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spinda/subscriptions", "organizations_url": "https://api.github.com/users/spinda/orgs", "repos_url": "https://api.github.com/users/spinda/repos", "events_url": "https://api.github.com/users/spinda/events{/privacy}", "received_events_url": "https://api.github.com/users/spinda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c166004e6da83e4c90459bf96e95574c065ee306", "url": "https://api.github.com/repos/rust-lang/rust/commits/c166004e6da83e4c90459bf96e95574c065ee306", "html_url": "https://github.com/rust-lang/rust/commit/c166004e6da83e4c90459bf96e95574c065ee306"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "0eed4204d45b7b302f35892f7ffbd5a37b44d28b", "filename": "src/items.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/baafa4f011d6c50f51f9c1de718e37d23a533373/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baafa4f011d6c50f51f9c1de718e37d23a533373/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=baafa4f011d6c50f51f9c1de718e37d23a533373", "patch": "@@ -1551,7 +1551,8 @@ pub fn rewrite_associated_type(\n     let prefix = format!(\"type {}\", ident);\n \n     let type_bounds_str = if let Some(ty_param_bounds) = ty_param_bounds_opt {\n-        let shape = Shape::indented(indent, context.config);\n+        // 2 = \": \".len()\n+        let shape = try_opt!(Shape::indented(indent, context.config).offset_left(prefix.len() + 2));\n         let bounds: &[_] = ty_param_bounds;\n         let bound_str = try_opt!(\n             bounds"}, {"sha": "8f5e21725691c108331525fd9c35eb29a7b1ef20", "filename": "tests/source/associated-types-bounds-wrapping.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/baafa4f011d6c50f51f9c1de718e37d23a533373/tests%2Fsource%2Fassociated-types-bounds-wrapping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baafa4f011d6c50f51f9c1de718e37d23a533373/tests%2Fsource%2Fassociated-types-bounds-wrapping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fassociated-types-bounds-wrapping.rs?ref=baafa4f011d6c50f51f9c1de718e37d23a533373", "patch": "@@ -0,0 +1,6 @@\n+// rustfmt-max_width: 100\n+// Test proper wrapping of long associated type bounds\n+\n+pub trait HttpService {\n+    type WsService: 'static + Service<Request = WsCommand, Response = WsResponse, Error = ServerError>;\n+}"}, {"sha": "d5b94a5e86991f4e600aa3c4e741d4af9016d2c4", "filename": "tests/target/associated-types-bounds-wrapping.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/baafa4f011d6c50f51f9c1de718e37d23a533373/tests%2Ftarget%2Fassociated-types-bounds-wrapping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/baafa4f011d6c50f51f9c1de718e37d23a533373/tests%2Ftarget%2Fassociated-types-bounds-wrapping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fassociated-types-bounds-wrapping.rs?ref=baafa4f011d6c50f51f9c1de718e37d23a533373", "patch": "@@ -0,0 +1,7 @@\n+// rustfmt-max_width: 100\n+// Test proper wrapping of long associated type bounds\n+\n+pub trait HttpService {\n+    type WsService: 'static\n+        + Service<Request = WsCommand, Response = WsResponse, Error = ServerError>;\n+}"}]}