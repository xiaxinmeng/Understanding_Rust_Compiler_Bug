{"sha": "8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMmNkMjhjNDhmZmMxYTgyNTI4NDY5Y2RlN2JmMTI0MmU1MTEwZjc=", "commit": {"author": {"name": "Seivan Heidari", "email": "seivan.heidari@icloud.com", "date": "2019-10-27T22:49:41Z"}, "committer": {"name": "Seivan Heidari", "email": "seivan.heidari@icloud.com", "date": "2019-10-27T22:49:41Z"}, "message": "Adding debugging to figure out missing scopes from theme.", "tree": {"sha": "bac22fbb6a7a498a0a3313f32709ef1b6340b190", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bac22fbb6a7a498a0a3313f32709ef1b6340b190"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "html_url": "https://github.com/rust-lang/rust/commit/8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c2cd28c48ffc1a82528469cde7bf1242e5110f7/comments", "author": {"login": "seivan", "id": 55424, "node_id": "MDQ6VXNlcjU1NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/55424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seivan", "html_url": "https://github.com/seivan", "followers_url": "https://api.github.com/users/seivan/followers", "following_url": "https://api.github.com/users/seivan/following{/other_user}", "gists_url": "https://api.github.com/users/seivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/seivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seivan/subscriptions", "organizations_url": "https://api.github.com/users/seivan/orgs", "repos_url": "https://api.github.com/users/seivan/repos", "events_url": "https://api.github.com/users/seivan/events{/privacy}", "received_events_url": "https://api.github.com/users/seivan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "seivan", "id": 55424, "node_id": "MDQ6VXNlcjU1NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/55424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seivan", "html_url": "https://github.com/seivan", "followers_url": "https://api.github.com/users/seivan/followers", "following_url": "https://api.github.com/users/seivan/following{/other_user}", "gists_url": "https://api.github.com/users/seivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/seivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seivan/subscriptions", "organizations_url": "https://api.github.com/users/seivan/orgs", "repos_url": "https://api.github.com/users/seivan/repos", "events_url": "https://api.github.com/users/seivan/events{/privacy}", "received_events_url": "https://api.github.com/users/seivan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89993517e97c1bb797b2614110573a1fee4ae071", "url": "https://api.github.com/repos/rust-lang/rust/commits/89993517e97c1bb797b2614110573a1fee4ae071", "html_url": "https://github.com/rust-lang/rust/commit/89993517e97c1bb797b2614110573a1fee4ae071"}], "stats": {"total": 21, "additions": 10, "deletions": 11}, "files": [{"sha": "b7dffaff53f704c21cfa810b995cc46c7779987e", "filename": "editors/code/src/highlighting.ts", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8c2cd28c48ffc1a82528469cde7bf1242e5110f7/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "raw_url": "https://github.com/rust-lang/rust/raw/8c2cd28c48ffc1a82528469cde7bf1242e5110f7/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fhighlighting.ts?ref=8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "patch": "@@ -66,15 +66,14 @@ export class Highlighter {\n             textDecoration?: string\n         ): [string, vscode.TextEditorDecorationType] => {\n \n-            const foundRule = scopesMapper.toRule(tag, scopes.find) || scopes.find(tag)\n+            const rule = scopesMapper.toRule(tag, scopes.find)\n \n-\n-\n-            if (foundRule) {\n-                const decor = createDecorationFromTextmate(foundRule);\n+            if (rule) {\n+                const decor = createDecorationFromTextmate(rule);\n                 return [tag, decor];\n             }\n             else {\n+                console.log('Missing theme for: ' + tag);\n                 const color = new vscode.ThemeColor('ralsp.' + tag);\n                 const decor = vscode.window.createTextEditorDecorationType({\n                     color,"}, {"sha": "4534d8a32f47233fb4b64829dffe49f520cb1e42", "filename": "editors/code/src/scopes_mapper.ts", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/8c2cd28c48ffc1a82528469cde7bf1242e5110f7/editors%2Fcode%2Fsrc%2Fscopes_mapper.ts", "raw_url": "https://github.com/rust-lang/rust/raw/8c2cd28c48ffc1a82528469cde7bf1242e5110f7/editors%2Fcode%2Fsrc%2Fscopes_mapper.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fscopes_mapper.ts?ref=8c2cd28c48ffc1a82528469cde7bf1242e5110f7", "patch": "@@ -8,11 +8,11 @@ let mappings = new Map<string, string[]>()\n \n \n const defaultMapping = new Map<string, string[]>([\n-    ['comment', ['comment']],\n+    ['comment', ['comment', 'comment.block', 'comment.line', 'comment.block.documentation']],\n     ['string', ['string']],\n     ['keyword', ['keyword']],\n     ['keyword.control', ['keyword.control', 'keyword', 'keyword.other']],\n-    ['keyword.unsafe', ['storage.modifier', 'keyword.other', 'keyword.control']],\n+    ['keyword.unsafe', ['storage.modifier', 'keyword.other', 'keyword.control', 'keyword']],\n     ['function', ['entity.name.function']],\n     ['parameter', ['variable.parameter']],\n     ['constant', ['constant', 'variable']],\n@@ -23,17 +23,17 @@ const defaultMapping = new Map<string, string[]>([\n     ['literal', ['string', 'string.quoted', 'string.regexp']],\n     ['macro', ['support.other']],\n     ['variable', ['variable']],\n-    ['variable.mut', ['variable']],\n-    ['field', ['variable.object.property']],\n-    ['module', ['entity.name.section']]\n+    ['variable.mut', ['variable', 'storage.modifier']],\n+    ['field', ['variable.object.property', 'meta.field.declaration', 'meta.definition.property', 'variable.other',]],\n+    ['module', ['entity.name.section', 'entity.other']]\n ]\n )\n function find(scope: string): string[] {\n     return mappings.get(scope) || []\n }\n \n export function toRule(scope: string, intoRule: (scope: string) => TextMateRuleSettings | undefined): TextMateRuleSettings | undefined {\n-    return find(scope).map(intoRule).find(rule => rule !== null)\n+    return find(scope).map(intoRule).filter(rule => rule !== undefined)[0];\n }\n \n "}]}