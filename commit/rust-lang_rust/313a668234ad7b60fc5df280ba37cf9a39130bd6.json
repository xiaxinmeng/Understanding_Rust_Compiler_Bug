{"sha": "313a668234ad7b60fc5df280ba37cf9a39130bd6", "node_id": "C_kwDOAAsO6NoAKDMxM2E2NjgyMzRhZDdiNjBmYzVkZjI4MGJhMzdjZjlhMzkxMzBiZDY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-03-10T11:20:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-10T11:20:51Z"}, "message": "Rollup merge of #94635 - jhpratt:merge-deprecated-attrs, r=davidtwco\n\nMerge `#[deprecated]` and `#[rustc_deprecated]`\n\nThe first commit makes \"reason\" an alias for \"note\" in `#[rustc_deprecated]`, while still prohibiting it in `#[deprecated]`.\n\nThe second commit changes \"suggestion\" to not just be a feature of `#[rustc_deprecated]`. This is placed behind the new `deprecated_suggestion` feature. This needs a tracking issue; let me know if this PR will be approved and I can create one.\n\nThe third commit is what permits `#[deprecated]` to be used when `#![feature(staged_api)]` is enabled. This isn't yet used in stdlib (only tests), as it would require duplicating all deprecation attributes until a bootstrap occurs. I intend to submit a follow-up PR that replaces all uses and removes the remaining `#[rustc_deprecated]` code after the next bootstrap.\n\n`@rustbot` label +T-libs-api +C-feature-request +A-attributes +S-waiting-on-review", "tree": {"sha": "32992521b80af70a4a0266c32c93344a00b14a4a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/32992521b80af70a4a0266c32c93344a00b14a4a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/313a668234ad7b60fc5df280ba37cf9a39130bd6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiKd8TCRBK7hj4Ov3rIwAAdH8IAG5XaOSTgF9u1xTSvzgk6poc\nGhV3r/pICAXOyYwRUcuTwimbgh/yq3TxjejSNmEAPVc4RwIDec//AktGaeyWEK0I\nKwDD5g0ra09tJ1OgwCwwTgdOmvmDPxno7oNwUzsu4Po58AT4E9hUCvX1u8ja/ujw\npspbVPDaBBBon7Z7u56BLYJdw/Tkv13pZJ39x/go4vPoQC6yNTL/WIiNWCz5KpAW\n9HXoCJQQD3r4E0SuLT3Xz0VdehPmEwYD8fgOghNh/x4Vv3MTtb621FdYdB7OGvKO\ndEU//e6d+SFobA/bVrrDpW7pyQvdiot0ebP1Xkdzy3dxhaE5pNdYX432pCGGe/Q=\n=ywzV\n-----END PGP SIGNATURE-----\n", "payload": "tree 32992521b80af70a4a0266c32c93344a00b14a4a\nparent 7473750b13c2000a1ce04d851906030527d6278a\nparent 38478ea0cda8c7e2a4e8e841f97910bcb6d08ef3\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1646911251 +0100\ncommitter GitHub <noreply@github.com> 1646911251 +0100\n\nRollup merge of #94635 - jhpratt:merge-deprecated-attrs, r=davidtwco\n\nMerge `#[deprecated]` and `#[rustc_deprecated]`\n\nThe first commit makes \"reason\" an alias for \"note\" in `#[rustc_deprecated]`, while still prohibiting it in `#[deprecated]`.\n\nThe second commit changes \"suggestion\" to not just be a feature of `#[rustc_deprecated]`. This is placed behind the new `deprecated_suggestion` feature. This needs a tracking issue; let me know if this PR will be approved and I can create one.\n\nThe third commit is what permits `#[deprecated]` to be used when `#![feature(staged_api)]` is enabled. This isn't yet used in stdlib (only tests), as it would require duplicating all deprecation attributes until a bootstrap occurs. I intend to submit a follow-up PR that replaces all uses and removes the remaining `#[rustc_deprecated]` code after the next bootstrap.\n\n`@rustbot` label +T-libs-api +C-feature-request +A-attributes +S-waiting-on-review\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/313a668234ad7b60fc5df280ba37cf9a39130bd6", "html_url": "https://github.com/rust-lang/rust/commit/313a668234ad7b60fc5df280ba37cf9a39130bd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/313a668234ad7b60fc5df280ba37cf9a39130bd6/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7473750b13c2000a1ce04d851906030527d6278a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7473750b13c2000a1ce04d851906030527d6278a", "html_url": "https://github.com/rust-lang/rust/commit/7473750b13c2000a1ce04d851906030527d6278a"}, {"sha": "38478ea0cda8c7e2a4e8e841f97910bcb6d08ef3", "url": "https://api.github.com/repos/rust-lang/rust/commits/38478ea0cda8c7e2a4e8e841f97910bcb6d08ef3", "html_url": "https://github.com/rust-lang/rust/commit/38478ea0cda8c7e2a4e8e841f97910bcb6d08ef3"}], "stats": {"total": 597, "additions": 217, "deletions": 380}, "files": [{"sha": "097bd07c74ce8a5ba6dca07e3f11d9bb113c423e", "filename": "compiler/rustc_ast_passes/src/feature_gate.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -437,13 +437,6 @@ impl<'a> Visitor<'a> for PostExpansionVisitor<'a> {\n                 )\n                 .emit();\n             }\n-        } else {\n-            if attr.has_name(sym::deprecated) {\n-                self.sess\n-                    .struct_span_err(attr.span, \"`#[deprecated]` cannot be used in staged API\")\n-                    .span_label(attr.span, \"use `#[rustc_deprecated]` instead\")\n-                    .emit();\n-            }\n         }\n     }\n "}, {"sha": "613320087d2ddc33d4087b30a8dba03885bb59ef", "filename": "compiler/rustc_attr/src/builtin.rs", "status": "modified", "additions": 24, "deletions": 11, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -664,6 +664,7 @@ where\n {\n     let mut depr: Option<(Deprecation, Span)> = None;\n     let diagnostic = &sess.parse_sess.span_diagnostic;\n+    let is_rustc = sess.features_untracked().staged_api;\n \n     'outer: for attr in attrs_iter {\n         if !(attr.has_name(sym::deprecated) || attr.has_name(sym::rustc_deprecated)) {\n@@ -728,17 +729,31 @@ where\n                                     continue 'outer;\n                                 }\n                             }\n-                            sym::note if attr.has_name(sym::deprecated) => {\n+                            sym::note => {\n                                 if !get(mi, &mut note) {\n                                     continue 'outer;\n                                 }\n                             }\n+                            // FIXME(jhpratt) remove this after a bootstrap occurs. Emitting an\n+                            // error specific to the renaming would be a good idea as well.\n                             sym::reason if attr.has_name(sym::rustc_deprecated) => {\n                                 if !get(mi, &mut note) {\n                                     continue 'outer;\n                                 }\n                             }\n-                            sym::suggestion if attr.has_name(sym::rustc_deprecated) => {\n+                            sym::suggestion => {\n+                                if !sess.features_untracked().deprecated_suggestion {\n+                                    let mut diag = sess.struct_span_err(\n+                                        mi.span,\n+                                        \"suggestions on deprecated items are unstable\",\n+                                    );\n+                                    if sess.is_nightly_build() {\n+                                        diag.help(\"add `#![feature(deprecated_suggestion)]` to the crate root\");\n+                                    }\n+                                    // FIXME(jhpratt) change this to an actual tracking issue\n+                                    diag.note(\"see #XXX for more details\").emit();\n+                                }\n+\n                                 if !get(mi, &mut suggestion) {\n                                     continue 'outer;\n                                 }\n@@ -752,7 +767,7 @@ where\n                                         if attr.has_name(sym::deprecated) {\n                                             &[\"since\", \"note\"]\n                                         } else {\n-                                            &[\"since\", \"reason\", \"suggestion\"]\n+                                            &[\"since\", \"note\", \"suggestion\"]\n                                         },\n                                     ),\n                                 );\n@@ -775,24 +790,22 @@ where\n             }\n         }\n \n-        if suggestion.is_some() && attr.has_name(sym::deprecated) {\n-            unreachable!(\"only allowed on rustc_deprecated\")\n-        }\n-\n-        if attr.has_name(sym::rustc_deprecated) {\n+        if is_rustc {\n             if since.is_none() {\n                 handle_errors(&sess.parse_sess, attr.span, AttrError::MissingSince);\n                 continue;\n             }\n \n             if note.is_none() {\n-                struct_span_err!(diagnostic, attr.span, E0543, \"missing 'reason'\").emit();\n+                struct_span_err!(diagnostic, attr.span, E0543, \"missing 'note'\").emit();\n                 continue;\n             }\n         }\n \n-        let is_since_rustc_version = attr.has_name(sym::rustc_deprecated);\n-        depr = Some((Deprecation { since, note, suggestion, is_since_rustc_version }, attr.span));\n+        depr = Some((\n+            Deprecation { since, note, suggestion, is_since_rustc_version: is_rustc },\n+            attr.span,\n+        ));\n     }\n \n     depr"}, {"sha": "1899e837eeabe659745037c68321735023cbfa4d", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -362,6 +362,8 @@ declare_features! (\n     (active, default_alloc_error_handler, \"1.48.0\", Some(66741), None),\n     /// Allows default type parameters to influence type inference.\n     (active, default_type_parameter_fallback, \"1.3.0\", Some(27336), None),\n+    /// Allows having using `suggestion` in the `#[deprecated]` attribute.\n+    (active, deprecated_suggestion, \"1.61.0\", Some(94785), None),\n     /// Allows `#[derive(Default)]` and `#[default]` on enums.\n     (active, derive_default_enum, \"1.56.0\", Some(86985), None),\n     /// Tells rustdoc to automatically generate `#[doc(cfg(...))]`."}, {"sha": "9c7b8f803249683bceef3387cb577b6f382038c4", "filename": "compiler/rustc_feature/src/builtin_attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -461,7 +461,7 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n     // DuplicatesOk since it has its own validation\n     ungated!(\n         rustc_deprecated, Normal,\n-        template!(List: r#\"since = \"version\", reason = \"...\"\"#), DuplicatesOk // See E0550\n+        template!(List: r#\"since = \"version\", note = \"...\"\"#), DuplicatesOk // See E0550\n     ),\n     // DuplicatesOk since it has its own validation\n     ungated!("}, {"sha": "f36a1f61aaccb03f02d693a14480a9491567dce2", "filename": "compiler/rustc_passes/src/stability.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fstability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -202,7 +202,7 @@ impl<'a, 'tcx> Annotator<'a, 'tcx> {\n                     self.tcx.sess,\n                     *span,\n                     E0549,\n-                    \"rustc_deprecated attribute must be paired with \\\n+                    \"deprecated attribute must be paired with \\\n                     either stable or unstable attribute\"\n                 )\n                 .emit();"}, {"sha": "6b5dcacd12bd3b9bab8d86973c0d36a1bd58721d", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -562,6 +562,7 @@ symbols! {\n         delay_span_bug_from_inside_query,\n         deny,\n         deprecated,\n+        deprecated_suggestion,\n         deref,\n         deref_method,\n         deref_mut,"}, {"sha": "b18dcbab400e6da31c35c1f41fb54b98fba63f7c", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -167,6 +167,7 @@\n #![feature(const_refs_to_cell)]\n #![feature(decl_macro)]\n #![feature(derive_default_enum)]\n+#![cfg_attr(not(bootstrap), feature(deprecated_suggestion))]\n #![feature(doc_cfg)]\n #![feature(doc_notable_trait)]\n #![feature(rustdoc_internals)]"}, {"sha": "ebc0c5180d77b1d6157f6b461bc9be180bd5996c", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -263,6 +263,7 @@\n #![feature(doc_cfg)]\n #![feature(doc_cfg_hide)]\n #![feature(rustdoc_internals)]\n+#![cfg_attr(not(bootstrap), feature(deprecated_suggestion))]\n #![feature(doc_masked)]\n #![feature(doc_notable_trait)]\n #![feature(dropck_eyepatch)]"}, {"sha": "910bfd1b5e48a4afa42423439de70ecd486ee234", "filename": "src/test/ui/deprecation/deprecation-in-staged-api.rs", "status": "removed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.rs?ref=7473750b13c2000a1ce04d851906030527d6278a", "patch": "@@ -1,4 +0,0 @@\n-#![feature(staged_api)]\n-#![stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[deprecated] //~ ERROR `#[deprecated]` cannot be used in staged API\n-fn main() {}"}, {"sha": "5c14f5ed356f321d54f21846801b1333a3c77a4d", "filename": "src/test/ui/deprecation/deprecation-in-staged-api.stderr", "status": "removed", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-in-staged-api.stderr?ref=7473750b13c2000a1ce04d851906030527d6278a", "patch": "@@ -1,8 +0,0 @@\n-error: `#[deprecated]` cannot be used in staged API\n-  --> $DIR/deprecation-in-staged-api.rs:3:1\n-   |\n-LL | #[deprecated]\n-   | ^^^^^^^^^^^^^ use `#[rustc_deprecated]` instead\n-\n-error: aborting due to previous error\n-"}, {"sha": "a2d0023e3f47938b23195d9e93ab07a894bfb919", "filename": "src/test/ui/deprecation/feature-gate-deprecated_suggestion.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -0,0 +1,6 @@\n+// compile-flags: --crate-type=lib\n+\n+#![no_implicit_prelude]\n+\n+#[deprecated(suggestion = \"foo\")] //~ ERROR suggestions on deprecated items are unstable\n+struct Foo {}"}, {"sha": "3b995fed75c8cb73afaeb067a33839676d141ad9", "filename": "src/test/ui/deprecation/feature-gate-deprecated_suggestion.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -0,0 +1,11 @@\n+error: suggestions on deprecated items are unstable\n+  --> $DIR/feature-gate-deprecated_suggestion.rs:5:14\n+   |\n+LL | #[deprecated(suggestion = \"foo\")]\n+   |              ^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: add `#![feature(deprecated_suggestion)]` to the crate root\n+   = note: see #XXX for more details\n+\n+error: aborting due to previous error\n+"}, {"sha": "87b15ec303c336c751b18c0862c14ab753d4e454", "filename": "src/test/ui/deprecation/staged-deprecation-in-future.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -4,11 +4,11 @@\n \n #![stable(feature = \"rustc_deprecation-in-future-test\", since = \"1.0.0\")]\n \n-#[rustc_deprecated(since = \"99.99.99\", reason = \"effectively never\")]\n+#[deprecated(since = \"99.99.99\", note = \"effectively never\")]\n #[stable(feature = \"rustc_deprecation-in-future-test\", since = \"1.0.0\")]\n pub struct S1;\n \n-#[rustc_deprecated(since = \"TBD\", reason = \"literally never\")]\n+#[deprecated(since = \"TBD\", note = \"literally never\")]\n #[stable(feature = \"rustc_deprecation-in-future-test\", since = \"1.0.0\")]\n pub struct S2;\n ", "previous_filename": "src/test/ui/deprecation/rustc_deprecation-in-future.rs"}, {"sha": "13d98044a88d830a2bed66c4898885cd39b9ff07", "filename": "src/test/ui/deprecation/staged-deprecation-in-future.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fstaged-deprecation-in-future.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -1,17 +1,17 @@\n error: use of unit struct `S1` that will be deprecated in future version 99.99.99: effectively never\n-  --> $DIR/rustc_deprecation-in-future.rs:16:13\n+  --> $DIR/staged-deprecation-in-future.rs:16:13\n    |\n LL |     let _ = S1;\n    |             ^^\n    |\n note: the lint level is defined here\n-  --> $DIR/rustc_deprecation-in-future.rs:1:9\n+  --> $DIR/staged-deprecation-in-future.rs:1:9\n    |\n LL | #![deny(deprecated_in_future)]\n    |         ^^^^^^^^^^^^^^^^^^^^\n \n error: use of unit struct `S2` that will be deprecated in a future Rust version: literally never\n-  --> $DIR/rustc_deprecation-in-future.rs:17:13\n+  --> $DIR/staged-deprecation-in-future.rs:17:13\n    |\n LL |     let _ = S2;\n    |             ^^", "previous_filename": "src/test/ui/deprecation/rustc_deprecation-in-future.stderr"}, {"sha": "d9fa2b56eeef705b94a316842252e34c1234600f", "filename": "src/test/ui/deprecation/suggestion.fixed", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.fixed?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![feature(staged_api)]\n+#![feature(deprecated_suggestion)]\n \n #![stable(since = \"1.0.0\", feature = \"test\")]\n \n@@ -10,9 +11,9 @@\n struct Foo;\n \n impl Foo {\n-    #[rustc_deprecated(\n+    #[deprecated(\n         since = \"1.0.0\",\n-        reason = \"replaced by `replacement`\",\n+        note = \"replaced by `replacement`\",\n         suggestion = \"replacement\",\n     )]\n     #[stable(since = \"1.0.0\", feature = \"test\")]\n@@ -22,9 +23,9 @@ impl Foo {\n }\n \n mod bar {\n-    #[rustc_deprecated(\n+    #[deprecated(\n     since = \"1.0.0\",\n-    reason = \"replaced by `replacement`\",\n+    note = \"replaced by `replacement`\",\n     suggestion = \"replacement\",\n     )]\n     #[stable(since = \"1.0.0\", feature = \"test\")]"}, {"sha": "9dc2eaf25550710b4b945dc66a5170ccf248d366", "filename": "src/test/ui/deprecation/suggestion.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![feature(staged_api)]\n+#![feature(deprecated_suggestion)]\n \n #![stable(since = \"1.0.0\", feature = \"test\")]\n \n@@ -10,9 +11,9 @@\n struct Foo;\n \n impl Foo {\n-    #[rustc_deprecated(\n+    #[deprecated(\n         since = \"1.0.0\",\n-        reason = \"replaced by `replacement`\",\n+        note = \"replaced by `replacement`\",\n         suggestion = \"replacement\",\n     )]\n     #[stable(since = \"1.0.0\", feature = \"test\")]\n@@ -22,9 +23,9 @@ impl Foo {\n }\n \n mod bar {\n-    #[rustc_deprecated(\n+    #[deprecated(\n     since = \"1.0.0\",\n-    reason = \"replaced by `replacement`\",\n+    note = \"replaced by `replacement`\",\n     suggestion = \"replacement\",\n     )]\n     #[stable(since = \"1.0.0\", feature = \"test\")]"}, {"sha": "8d1e108345f30418210b459951133102253c6cd1", "filename": "src/test/ui/deprecation/suggestion.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fsuggestion.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -1,17 +1,17 @@\n error: use of deprecated function `bar::deprecated`: replaced by `replacement`\n-  --> $DIR/suggestion.rs:41:10\n+  --> $DIR/suggestion.rs:42:10\n    |\n LL |     bar::deprecated();\n    |          ^^^^^^^^^^ help: replace the use of the deprecated function: `replacement`\n    |\n note: the lint level is defined here\n-  --> $DIR/suggestion.rs:7:9\n+  --> $DIR/suggestion.rs:8:9\n    |\n LL | #![deny(deprecated)]\n    |         ^^^^^^^^^^\n \n error: use of deprecated associated function `Foo::deprecated`: replaced by `replacement`\n-  --> $DIR/suggestion.rs:39:9\n+  --> $DIR/suggestion.rs:40:9\n    |\n LL |     foo.deprecated();\n    |         ^^^^^^^^^^ help: replace the use of the deprecated associated function: `replacement`"}, {"sha": "3acfbd0ca23aedd6b89356c27a504d4b800e8953", "filename": "src/test/ui/feature-gates/issue-43106-gating-of-rustc_deprecated.rs", "status": "removed", "additions": 0, "deletions": 43, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.rs?ref=7473750b13c2000a1ce04d851906030527d6278a", "patch": "@@ -1,43 +0,0 @@\n-// Testing gating of `#[rustc_deprecated]` in \"weird\" places.\n-//\n-// This file sits on its own because these signal errors, making\n-// this test incompatible with the \"warnings only\" nature of\n-// issue-43106-gating-of-builtin-attrs.rs\n-\n-#![rustc_deprecated()]\n-//~^ ERROR stability attributes may not be used outside of the standard library\n-//~| ERROR missing 'since' [E0542]\n-\n-#[rustc_deprecated()]\n-//~^ ERROR stability attributes may not be used outside of the standard library\n-//~| ERROR missing 'since' [E0542]\n-mod rustc_deprecated {\n-    mod inner {\n-        #![rustc_deprecated()]\n-        //~^ ERROR stability attributes may not be used outside of the standard library\n-        //~| ERROR missing 'since' [E0542]\n-    }\n-\n-    #[rustc_deprecated()]\n-    //~^ ERROR stability attributes may not be used outside of the standard library\n-    //~| ERROR missing 'since' [E0542]\n-    fn f() {}\n-\n-    #[rustc_deprecated()]\n-    //~^ ERROR stability attributes may not be used outside of the standard library\n-    //~| ERROR missing 'since' [E0542]\n-    //~| ERROR missing 'since' [E0542]\n-    struct S;\n-\n-    #[rustc_deprecated()]\n-    //~^ ERROR stability attributes may not be used outside of the standard library\n-    //~| ERROR missing 'since' [E0542]\n-    type T = S;\n-\n-    #[rustc_deprecated()]\n-    //~^ ERROR stability attributes may not be used outside of the standard library\n-    //~| ERROR missing 'since' [E0542]\n-    impl S {}\n-}\n-\n-fn main() {}"}, {"sha": "4ec78f318c2338fd6d19de21e2e3e59f5001dd7b", "filename": "src/test/ui/feature-gates/issue-43106-gating-of-rustc_deprecated.stderr", "status": "removed", "additions": 0, "deletions": 94, "changes": 94, "blob_url": "https://github.com/rust-lang/rust/blob/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7473750b13c2000a1ce04d851906030527d6278a/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Fissue-43106-gating-of-rustc_deprecated.stderr?ref=7473750b13c2000a1ce04d851906030527d6278a", "patch": "@@ -1,94 +0,0 @@\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:16:9\n-   |\n-LL |         #![rustc_deprecated()]\n-   |         ^^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:21:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:26:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:32:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:37:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:11:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:7:1\n-   |\n-LL | #![rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:7:1\n-   |\n-LL | #![rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:11:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:16:9\n-   |\n-LL |         #![rustc_deprecated()]\n-   |         ^^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:21:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:26:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:26:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:32:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/issue-43106-gating-of-rustc_deprecated.rs:37:5\n-   |\n-LL |     #[rustc_deprecated()]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 15 previous errors\n-\n-Some errors have detailed explanations: E0542, E0734.\n-For more information about an error, try `rustc --explain E0542`."}, {"sha": "193f89f83789713ceee17de020266ad0c9925ccc", "filename": "src/test/ui/issues/issue-17337.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fissues%2Fissue-17337.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fissues%2Fissue-17337.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17337.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -7,7 +7,7 @@ struct Foo;\n \n impl Foo {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn foo(self) {}\n }\n "}, {"sha": "62100e5cc9496c0dd153155c3402582d6817823f", "filename": "src/test/ui/lint/auxiliary/inherited_stability.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Finherited_stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Finherited_stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Finherited_stability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -20,7 +20,7 @@ pub mod stable_mod {\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n pub mod unstable_mod {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated() {}\n \n     pub fn unstable() {}"}, {"sha": "4e3547250e4c4f1016d42924d0779ae9bedab482", "filename": "src/test/ui/lint/auxiliary/lint_output_format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_output_format.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_output_format.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_output_format.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -4,7 +4,7 @@\n #![unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn foo() -> usize {\n     20\n }"}, {"sha": "99c29dcdda6777f28e7d8d43438caf2a5881fdfc", "filename": "src/test/ui/lint/auxiliary/lint_stability.rs", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -5,21 +5,21 @@\n #![stable(feature = \"lint_stability\", since = \"1.0.0\")]\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated() {}\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_text() {}\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"99.99.99\", reason = \"text\")]\n+#[deprecated(since = \"99.99.99\", note = \"text\")]\n pub fn deprecated_future() {}\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_unstable() {}\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_unstable_text() {}\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -37,17 +37,17 @@ pub struct MethodTester;\n \n impl MethodTester {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated(&self) {}\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_unstable(&self) {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_unstable_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -64,17 +64,17 @@ impl MethodTester {\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub trait Trait {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated(&self) {}\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_unstable(&self) {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_unstable_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -93,7 +93,7 @@ pub trait TraitWithAssociatedTypes {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     type TypeUnstable = u8;\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     type TypeDeprecated = u8;\n }\n \n@@ -104,18 +104,18 @@ impl Trait for MethodTester {}\n pub trait UnstableTrait { fn dummy(&self) { } }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub trait DeprecatedTrait {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] fn dummy(&self) { }\n }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedStruct {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] pub i: isize\n }\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableStruct {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] pub i: isize\n }\n@@ -133,10 +133,10 @@ pub enum UnstableEnum {}\n pub enum StableEnum {}\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnitStruct;\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableUnitStruct;\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n pub struct UnstableUnitStruct;\n@@ -146,10 +146,10 @@ pub struct StableUnitStruct;\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub enum Enum {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     DeprecatedVariant,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     DeprecatedUnstableVariant,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     UnstableVariant,\n@@ -159,10 +159,10 @@ pub enum Enum {\n }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n pub struct UnstableTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);"}, {"sha": "e72a501e11b40cf643781d266f91b09135ecb5f2", "filename": "src/test/ui/lint/auxiliary/lint_stability_fields.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability_fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability_fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fauxiliary%2Flint_stability_fields.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -6,7 +6,7 @@ pub struct Stable {\n     pub inherit: u8,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub override1: u8,\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub override2: u8,\n     #[stable(feature = \"rust2\", since = \"2.0.0\")]\n@@ -17,7 +17,7 @@ pub struct Stable {\n pub struct Stable2(#[stable(feature = \"rust2\", since = \"2.0.0\")] pub u8,\n                    #[unstable(feature = \"unstable_test_feature\", issue = \"none\")] pub u8,\n                    #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                   #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] pub u8,\n+                   #[deprecated(since = \"1.0.0\", note = \"text\")] pub u8,\n                    pub u8);\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -28,7 +28,7 @@ pub enum Stable3 {\n     Override1,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     Override2,\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     Override3,\n }\n@@ -38,7 +38,7 @@ pub struct Unstable {\n     pub inherit: u8,\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub override1: u8,\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub override2: u8,\n }\n@@ -47,10 +47,10 @@ pub struct Unstable {\n pub struct Unstable2(pub u8,\n                      #[stable(feature = \"rust1\", since = \"1.0.0\")] pub u8,\n                      #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                     #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] pub u8);\n+                     #[deprecated(since = \"1.0.0\", note = \"text\")] pub u8);\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct Deprecated {\n     pub inherit: u8,\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -60,7 +60,7 @@ pub struct Deprecated {\n }\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct Deprecated2(pub u8,\n                        #[stable(feature = \"rust1\", since = \"1.0.0\")] pub u8,\n                        #[unstable(feature = \"unstable_test_feature\", issue = \"none\")] pub u8);"}, {"sha": "94a8d08c8fe9ce98750b3960aa3ad3f080175e4a", "filename": "src/test/ui/lint/lint-stability-2.rs", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability-2.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -169,10 +169,10 @@ mod cross_crate {\n \n mod this_crate {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated() {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated_text() {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -190,10 +190,10 @@ mod this_crate {\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -209,10 +209,10 @@ mod this_crate {\n \n     pub trait Trait {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -229,7 +229,7 @@ mod this_crate {\n     impl Trait for MethodTester {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedStruct {\n         #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] i: isize\n     }\n@@ -243,7 +243,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedUnitStruct;\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableUnitStruct;\n@@ -252,7 +252,7 @@ mod this_crate {\n \n     pub enum Enum {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         DeprecatedVariant,\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         UnstableVariant,\n@@ -262,7 +262,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedTupleStruct(isize);\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableTupleStruct(isize);\n@@ -382,23 +382,23 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn test_fn_body() {\n         fn fn_in_body() {}\n         fn_in_body();\n     }\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn test_method_body(&self) {\n             fn fn_in_body() {}\n             fn_in_body();\n         }\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub trait DeprecatedTrait {\n         fn dummy(&self) { }\n     }"}, {"sha": "bdc66e83083f66e6704b198354088eec67bf4a68", "filename": "src/test/ui/lint/lint-stability-deprecated.rs", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-deprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-deprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability-deprecated.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -219,10 +219,10 @@ mod inheritance {\n \n mod this_crate {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated() {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated_text() {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -240,10 +240,10 @@ mod this_crate {\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -259,10 +259,10 @@ mod this_crate {\n \n     pub trait Trait {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -279,7 +279,7 @@ mod this_crate {\n     impl Trait for MethodTester {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedStruct {\n         #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] i: isize\n     }\n@@ -293,7 +293,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedUnitStruct;\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableUnitStruct;\n@@ -302,7 +302,7 @@ mod this_crate {\n \n     pub enum Enum {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         DeprecatedVariant,\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         UnstableVariant,\n@@ -312,7 +312,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedTupleStruct(isize);\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableTupleStruct(isize);\n@@ -433,23 +433,23 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn test_fn_body() {\n         fn fn_in_body() {}\n         fn_in_body(); //~ WARN use of deprecated function `this_crate::test_fn_body::fn_in_body`: text\n     }\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn test_method_body(&self) {\n             fn fn_in_body() {}\n             fn_in_body(); //~ WARN use of deprecated function `this_crate::MethodTester::test_method_body::fn_in_body`: text\n         }\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub trait DeprecatedTrait {\n         fn dummy(&self) { }\n     }"}, {"sha": "a5511966d7e79bad5793724f0623b8f87f973bdd", "filename": "src/test/ui/lint/lint-stability-fields-deprecated.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-fields-deprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-fields-deprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability-fields-deprecated.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -160,7 +160,7 @@ mod this_crate {\n         inherit: u8,\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override1: u8,\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override2: u8,\n     }\n@@ -169,14 +169,14 @@ mod this_crate {\n     struct Stable2(u8,\n                    #[stable(feature = \"rust1\", since = \"1.0.0\")] u8,\n                    #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                   #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] u8);\n+                   #[deprecated(since = \"1.0.0\", note = \"text\")] u8);\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     struct Unstable {\n         inherit: u8,\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n         override1: u8,\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override2: u8,\n     }\n@@ -185,10 +185,10 @@ mod this_crate {\n     struct Unstable2(u8,\n                      #[stable(feature = \"rust1\", since = \"1.0.0\")] u8,\n                      #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                     #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] u8);\n+                     #[deprecated(since = \"1.0.0\", note = \"text\")] u8);\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     struct Deprecated {\n         inherit: u8,\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -198,7 +198,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     struct Deprecated2(u8,\n                        #[stable(feature = \"rust1\", since = \"1.0.0\")] u8,\n                        #[unstable(feature = \"unstable_test_feature\", issue = \"none\")] u8);"}, {"sha": "51990b6eef161fba0eb8a6d8593b8ff422b1b20f", "filename": "src/test/ui/lint/lint-stability-fields.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability-fields.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -135,7 +135,7 @@ mod this_crate {\n         inherit: u8,\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override1: u8,\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override2: u8,\n         #[stable(feature = \"rust2\", since = \"2.0.0\")]\n@@ -146,14 +146,14 @@ mod this_crate {\n     struct Stable2(u8,\n                    #[stable(feature = \"rust2\", since = \"2.0.0\")] u8,\n                    #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                   #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] u8);\n+                   #[deprecated(since = \"1.0.0\", note = \"text\")] u8);\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     struct Unstable {\n         inherit: u8,\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n         override1: u8,\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         override2: u8,\n     }\n@@ -162,10 +162,10 @@ mod this_crate {\n     struct Unstable2(u8,\n                      #[stable(feature = \"rust1\", since = \"1.0.0\")] u8,\n                      #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-                     #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")] u8);\n+                     #[deprecated(since = \"1.0.0\", note = \"text\")] u8);\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     struct Deprecated {\n         inherit: u8,\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -175,7 +175,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     struct Deprecated2(u8,\n                        #[stable(feature = \"rust1\", since = \"1.0.0\")] u8,\n                        #[unstable(feature = \"unstable_test_feature\", issue = \"none\")] u8);"}, {"sha": "464b32c5f43ed994ac6a1259da96e5f41a185757", "filename": "src/test/ui/lint/lint-stability.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Flint%2Flint-stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -204,14 +204,14 @@ mod inheritance {\n \n mod this_crate {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated() {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn deprecated_text() {}\n \n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"99.99.99\", reason = \"text\")]\n+    #[deprecated(since = \"99.99.99\", note = \"text\")]\n     pub fn deprecated_future() {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -229,10 +229,10 @@ mod this_crate {\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         pub fn method_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -248,10 +248,10 @@ mod this_crate {\n \n     pub trait Trait {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated(&self) {}\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn trait_deprecated_text(&self) {}\n \n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -268,7 +268,7 @@ mod this_crate {\n     impl Trait for MethodTester {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedStruct {\n         #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] i: isize\n     }\n@@ -282,7 +282,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedUnitStruct;\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableUnitStruct;\n@@ -291,7 +291,7 @@ mod this_crate {\n \n     pub enum Enum {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         DeprecatedVariant,\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n         UnstableVariant,\n@@ -301,7 +301,7 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub struct DeprecatedTupleStruct(isize);\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     pub struct UnstableTupleStruct(isize);\n@@ -423,23 +423,23 @@ mod this_crate {\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn test_fn_body() {\n         fn fn_in_body() {}\n         fn_in_body();\n     }\n \n     impl MethodTester {\n         #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-        #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+        #[deprecated(since = \"1.0.0\", note = \"text\")]\n         fn test_method_body(&self) {\n             fn fn_in_body() {}\n             fn_in_body();\n         }\n     }\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub trait DeprecatedTrait {\n         fn dummy(&self) { }\n     }"}, {"sha": "3aadd4b0ca64181d732e9b2dcbe649bc173f58b9", "filename": "src/test/ui/macros/auxiliary/unstable-macros.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fauxiliary%2Funstable-macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fauxiliary%2Funstable-macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fauxiliary%2Funstable-macros.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -7,7 +7,7 @@\n macro_rules! unstable_macro{ () => () }\n \n #[stable(feature = \"deprecated_macros\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"deprecation reason\")]\n+#[deprecated(since = \"1.0.0\", note = \"deprecation note\")]\n #[macro_export]\n macro_rules! deprecated_macro{ () => () }\n "}, {"sha": "ed7618a672be8910d0a710132a68374e8b1fa2d4", "filename": "src/test/ui/macros/macro-stability.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -14,7 +14,7 @@ macro_rules! local_unstable { () => () }\n macro local_unstable_modern() {}\n \n #[stable(feature = \"deprecated_macros\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"local deprecation reason\")]\n+#[deprecated(since = \"1.0.0\", note = \"local deprecation note\")]\n #[macro_export]\n macro_rules! local_deprecated{ () => () }\n \n@@ -25,7 +25,7 @@ fn main() {\n     // unstable_macro_modern!(); // ERROR use of unstable library feature 'unstable_macros'\n \n     deprecated_macro!();\n-    //~^ WARN use of deprecated macro `deprecated_macro`: deprecation reason\n+    //~^ WARN use of deprecated macro `deprecated_macro`: deprecation note\n     local_deprecated!();\n-    //~^ WARN use of deprecated macro `local_deprecated`: local deprecation reason\n+    //~^ WARN use of deprecated macro `local_deprecated`: local deprecation note\n }"}, {"sha": "2cfdb52b174a90f3dce9ecc667e2f026fda7dc96", "filename": "src/test/ui/macros/macro-stability.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -22,15 +22,15 @@ LL |     unstable_macro!();\n    |\n    = help: add `#![feature(unstable_macros)]` to the crate attributes to enable\n \n-warning: use of deprecated macro `deprecated_macro`: deprecation reason\n+warning: use of deprecated macro `deprecated_macro`: deprecation note\n   --> $DIR/macro-stability.rs:27:5\n    |\n LL |     deprecated_macro!();\n    |     ^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(deprecated)]` on by default\n \n-warning: use of deprecated macro `local_deprecated`: local deprecation reason\n+warning: use of deprecated macro `local_deprecated`: local deprecation note\n   --> $DIR/macro-stability.rs:29:5\n    |\n LL |     local_deprecated!();"}, {"sha": "99c29dcdda6777f28e7d8d43438caf2a5881fdfc", "filename": "src/test/ui/stability-attribute/auxiliary/lint-stability.rs", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Flint-stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Flint-stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Flint-stability.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -5,21 +5,21 @@\n #![stable(feature = \"lint_stability\", since = \"1.0.0\")]\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated() {}\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_text() {}\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"99.99.99\", reason = \"text\")]\n+#[deprecated(since = \"99.99.99\", note = \"text\")]\n pub fn deprecated_future() {}\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_unstable() {}\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub fn deprecated_unstable_text() {}\n \n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -37,17 +37,17 @@ pub struct MethodTester;\n \n impl MethodTester {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated(&self) {}\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_unstable(&self) {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     pub fn method_deprecated_unstable_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -64,17 +64,17 @@ impl MethodTester {\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub trait Trait {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated(&self) {}\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_unstable(&self) {}\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     fn trait_deprecated_unstable_text(&self) {}\n \n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n@@ -93,7 +93,7 @@ pub trait TraitWithAssociatedTypes {\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     type TypeUnstable = u8;\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     type TypeDeprecated = u8;\n }\n \n@@ -104,18 +104,18 @@ impl Trait for MethodTester {}\n pub trait UnstableTrait { fn dummy(&self) { } }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub trait DeprecatedTrait {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] fn dummy(&self) { }\n }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedStruct {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] pub i: isize\n }\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableStruct {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] pub i: isize\n }\n@@ -133,10 +133,10 @@ pub enum UnstableEnum {}\n pub enum StableEnum {}\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnitStruct;\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableUnitStruct;\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n pub struct UnstableUnitStruct;\n@@ -146,10 +146,10 @@ pub struct StableUnitStruct;\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub enum Enum {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     DeprecatedVariant,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-    #[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+    #[deprecated(since = \"1.0.0\", note = \"text\")]\n     DeprecatedUnstableVariant,\n     #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n     UnstableVariant,\n@@ -159,10 +159,10 @@ pub enum Enum {\n }\n \n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n-#[rustc_deprecated(since = \"1.0.0\", reason = \"text\")]\n+#[deprecated(since = \"1.0.0\", note = \"text\")]\n pub struct DeprecatedUnstableTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);\n #[unstable(feature = \"unstable_test_feature\", issue = \"none\")]\n pub struct UnstableTupleStruct(#[stable(feature = \"rust1\", since = \"1.0.0\")] pub isize);"}, {"sha": "1d6a6bd4e13fcbabaf21e3e8e636743d5ca1a2ec", "filename": "src/test/ui/stability-attribute/auxiliary/unstable_generic_param.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Funstable_generic_param.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Funstable_generic_param.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fauxiliary%2Funstable_generic_param.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -40,14 +40,14 @@ pub struct Struct3<A = isize, #[unstable(feature = \"unstable_default\", issue = \"\n     pub field2: B,\n }\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub struct Struct4<A = usize> {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n     pub field: A,\n }\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub struct Struct5<#[unstable(feature = \"unstable_default\", issue = \"none\")] A = usize> {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n@@ -99,7 +99,7 @@ pub enum Enum3<T = isize, #[unstable(feature = \"unstable_default\", issue = \"none\n     Err(#[stable(feature = \"stable_test_feature\", since = \"1.0.0\")] E),\n }\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub enum Enum4<T = usize> {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n@@ -108,7 +108,7 @@ pub enum Enum4<T = usize> {\n     None,\n }\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub enum Enum5<#[unstable(feature = \"unstable_default\", issue = \"none\")] T = usize> {\n     #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n@@ -152,11 +152,11 @@ pub type Alias2<T = usize> = Option<T>;\n pub type Alias3<T = isize, #[unstable(feature = \"unstable_default\", issue = \"none\")] E = usize> =\n     Result<T, E>;\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub type Alias4<T = usize> = Option<T>;\n \n-#[rustc_deprecated(since = \"1.1.0\", reason = \"test\")]\n+#[deprecated(since = \"1.1.0\", note = \"test\")]\n #[stable(feature = \"stable_test_feature\", since = \"1.0.0\")]\n pub type Alias5<#[unstable(feature = \"unstable_default\", issue = \"none\")] T = usize> = Option<T>;\n "}, {"sha": "f61acc8aac5db919b6376e1f9fafb188e9f24cc3", "filename": "src/test/ui/stability-attribute/stability-attribute-non-staged-force-unstable.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -2,6 +2,4 @@\n \n #[unstable()] //~ ERROR: stability attributes may not be used\n #[stable()] //~ ERROR: stability attributes may not be used\n-#[rustc_deprecated()] //~ ERROR: stability attributes may not be used\n-//~^ ERROR missing 'since'\n fn main() {}"}, {"sha": "45d965ea0a069a0d29c8ea062217c489820c8880", "filename": "src/test/ui/stability-attribute/stability-attribute-non-staged-force-unstable.stderr", "status": "modified", "additions": 2, "deletions": 15, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged-force-unstable.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -10,19 +10,6 @@ error[E0734]: stability attributes may not be used outside of the standard libra\n LL | #[stable()]\n    | ^^^^^^^^^^^\n \n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/stability-attribute-non-staged-force-unstable.rs:5:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/stability-attribute-non-staged-force-unstable.rs:5:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 4 previous errors\n+error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0542, E0734.\n-For more information about an error, try `rustc --explain E0542`.\n+For more information about this error, try `rustc --explain E0734`."}, {"sha": "4015f2f971e696f25ce21e9e0469c14217f5db73", "filename": "src/test/ui/stability-attribute/stability-attribute-non-staged.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -1,5 +1,3 @@\n #[unstable()] //~ ERROR: stability attributes may not be used\n #[stable()] //~ ERROR: stability attributes may not be used\n-#[rustc_deprecated()] //~ ERROR: stability attributes may not be used\n-//~^ ERROR missing 'since'\n fn main() {}"}, {"sha": "391f3c2744d3cb77478e79bccdf3a96d1ecbdccb", "filename": "src/test/ui/stability-attribute/stability-attribute-non-staged.stderr", "status": "modified", "additions": 2, "deletions": 15, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-non-staged.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -10,19 +10,6 @@ error[E0734]: stability attributes may not be used outside of the standard libra\n LL | #[stable()]\n    | ^^^^^^^^^^^\n \n-error[E0734]: stability attributes may not be used outside of the standard library\n-  --> $DIR/stability-attribute-non-staged.rs:3:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error[E0542]: missing 'since'\n-  --> $DIR/stability-attribute-non-staged.rs:3:1\n-   |\n-LL | #[rustc_deprecated()]\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 4 previous errors\n+error: aborting due to 2 previous errors\n \n-Some errors have detailed explanations: E0542, E0734.\n-For more information about an error, try `rustc --explain E0542`.\n+For more information about this error, try `rustc --explain E0734`."}, {"sha": "64f996352196a8406dfb034623dcf954de8df536", "filename": "src/test/ui/stability-attribute/stability-attribute-sanity-4.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -18,13 +18,11 @@ mod bogus_attribute_types_2 {\n     fn f4() { }\n \n     #[stable(feature = \"a\", since = \"b\")]\n-    #[rustc_deprecated] //~ ERROR malformed `rustc_deprecated` attribute\n-                        //~^ ERROR missing 'since'\n+    #[deprecated] //~ ERROR missing 'since'\n     fn f5() { }\n \n     #[stable(feature = \"a\", since = \"b\")]\n-    #[rustc_deprecated = \"a\"] //~ ERROR malformed `rustc_deprecated` attribute\n-                              //~^ ERROR missing 'since'\n+    #[deprecated = \"a\"] //~ ERROR missing 'since'\n     fn f6() { }\n }\n "}, {"sha": "a76f5be1e3d7c428f312e286d35f030ae8a127d2", "filename": "src/test/ui/stability-attribute/stability-attribute-sanity-4.stderr", "status": "modified", "additions": 6, "deletions": 18, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity-4.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -22,30 +22,18 @@ error: malformed `stable` attribute input\n LL |     #[stable = \"a\"]\n    |     ^^^^^^^^^^^^^^^ help: must be of the form: `#[stable(feature = \"name\", since = \"version\")]`\n \n-error: malformed `rustc_deprecated` attribute input\n-  --> $DIR/stability-attribute-sanity-4.rs:21:5\n-   |\n-LL |     #[rustc_deprecated]\n-   |     ^^^^^^^^^^^^^^^^^^^ help: must be of the form: `#[rustc_deprecated(since = \"version\", reason = \"...\")]`\n-\n-error: malformed `rustc_deprecated` attribute input\n-  --> $DIR/stability-attribute-sanity-4.rs:26:5\n-   |\n-LL |     #[rustc_deprecated = \"a\"]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^ help: must be of the form: `#[rustc_deprecated(since = \"version\", reason = \"...\")]`\n-\n error[E0542]: missing 'since'\n   --> $DIR/stability-attribute-sanity-4.rs:21:5\n    |\n-LL |     #[rustc_deprecated]\n-   |     ^^^^^^^^^^^^^^^^^^^\n+LL |     #[deprecated]\n+   |     ^^^^^^^^^^^^^\n \n error[E0542]: missing 'since'\n-  --> $DIR/stability-attribute-sanity-4.rs:26:5\n+  --> $DIR/stability-attribute-sanity-4.rs:25:5\n    |\n-LL |     #[rustc_deprecated = \"a\"]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     #[deprecated = \"a\"]\n+   |     ^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 8 previous errors\n+error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0542`."}, {"sha": "f37a8f328a75ae3e839ac8a18195191597d5223e", "filename": "src/test/ui/stability-attribute/stability-attribute-sanity.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.rs?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -37,11 +37,11 @@ mod missing_version {\n     fn f1() { }\n \n     #[stable(feature = \"a\", since = \"b\")]\n-    #[rustc_deprecated(reason = \"a\")] //~ ERROR missing 'since' [E0542]\n+    #[deprecated(note = \"a\")] //~ ERROR missing 'since' [E0542]\n     fn f2() { }\n \n     #[stable(feature = \"a\", since = \"b\")]\n-    #[rustc_deprecated(since = \"a\")] //~ ERROR missing 'reason' [E0543]\n+    #[deprecated(since = \"a\")] //~ ERROR missing 'note' [E0543]\n     fn f3() { }\n }\n \n@@ -58,19 +58,19 @@ fn multiple2() { }\n fn multiple3() { }\n \n #[stable(feature = \"a\", since = \"b\")] //~ ERROR invalid stability version found\n-#[rustc_deprecated(since = \"b\", reason = \"text\")]\n-#[rustc_deprecated(since = \"b\", reason = \"text\")] //~ ERROR multiple deprecated attributes\n+#[deprecated(since = \"b\", note = \"text\")]\n+#[deprecated(since = \"b\", note = \"text\")] //~ ERROR multiple deprecated attributes\n #[rustc_const_unstable(feature = \"c\", issue = \"none\")]\n #[rustc_const_unstable(feature = \"d\", issue = \"none\")] //~ ERROR multiple stability levels\n pub const fn multiple4() { }\n \n #[stable(feature = \"a\", since = \"1.0.0\")] //~ ERROR invalid deprecation version found\n //~^ ERROR feature `a` is declared stable since 1.0.0\n-#[rustc_deprecated(since = \"invalid\", reason = \"text\")]\n+#[deprecated(since = \"invalid\", note = \"text\")]\n fn invalid_deprecation_version() {}\n \n-#[rustc_deprecated(since = \"a\", reason = \"text\")]\n+#[deprecated(since = \"a\", note = \"text\")]\n fn deprecated_without_unstable_or_stable() { }\n-//~^^ ERROR rustc_deprecated attribute must be paired with either stable or unstable attribute\n+//~^^ ERROR deprecated attribute must be paired with either stable or unstable attribute\n \n fn main() { }"}, {"sha": "9e2d9f2708489c57489fd1c8265c36723f53215b", "filename": "src/test/ui/stability-attribute/stability-attribute-sanity.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/313a668234ad7b60fc5df280ba37cf9a39130bd6/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fstability-attribute-sanity.stderr?ref=313a668234ad7b60fc5df280ba37cf9a39130bd6", "patch": "@@ -55,14 +55,14 @@ LL |     #[stable(feature = \"a\")]\n error[E0542]: missing 'since'\n   --> $DIR/stability-attribute-sanity.rs:40:5\n    |\n-LL |     #[rustc_deprecated(reason = \"a\")]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     #[deprecated(note = \"a\")]\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0543]: missing 'reason'\n+error[E0543]: missing 'note'\n   --> $DIR/stability-attribute-sanity.rs:44:5\n    |\n-LL |     #[rustc_deprecated(since = \"a\")]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |     #[deprecated(since = \"a\")]\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error[E0544]: multiple stability levels\n   --> $DIR/stability-attribute-sanity.rs:49:1\n@@ -85,10 +85,10 @@ LL | #[stable(feature = \"a\", since = \"b\")]\n error[E0550]: multiple deprecated attributes\n   --> $DIR/stability-attribute-sanity.rs:62:1\n    |\n-LL | #[rustc_deprecated(since = \"b\", reason = \"text\")]\n-   | ------------------------------------------------- first deprecation attribute\n-LL | #[rustc_deprecated(since = \"b\", reason = \"text\")]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ repeated deprecation attribute\n+LL | #[deprecated(since = \"b\", note = \"text\")]\n+   | ----------------------------------------- first deprecation attribute\n+LL | #[deprecated(since = \"b\", note = \"text\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ repeated deprecation attribute\n \n error[E0544]: multiple stability levels\n   --> $DIR/stability-attribute-sanity.rs:64:1\n@@ -114,11 +114,11 @@ LL | #[stable(feature = \"a\", since = \"1.0.0\")]\n LL | fn invalid_deprecation_version() {}\n    | ----------------------------------- the stability attribute annotates this item\n \n-error[E0549]: rustc_deprecated attribute must be paired with either stable or unstable attribute\n+error[E0549]: deprecated attribute must be paired with either stable or unstable attribute\n   --> $DIR/stability-attribute-sanity.rs:72:1\n    |\n-LL | #[rustc_deprecated(since = \"a\", reason = \"text\")]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #[deprecated(since = \"a\", note = \"text\")]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error[E0711]: feature `a` is declared stable since 1.0.0, but was previously declared stable since b\n   --> $DIR/stability-attribute-sanity.rs:67:1"}]}