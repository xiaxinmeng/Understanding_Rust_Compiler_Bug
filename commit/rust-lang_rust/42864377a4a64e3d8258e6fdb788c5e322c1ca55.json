{"sha": "42864377a4a64e3d8258e6fdb788c5e322c1ca55", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQyODY0Mzc3YTRhNjRlM2Q4MjU4ZTZmZGI3ODhjNWUzMjJjMWNhNTU=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-22T11:19:07Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-22T12:06:20Z"}, "message": "Remove silly restriction on passing type params by alias\n\nSince they are now passed by pointer, this is no longer a problem", "tree": {"sha": "c0a812b89e1dcf072f9439ea39ee0e36ba2bacba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c0a812b89e1dcf072f9439ea39ee0e36ba2bacba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/42864377a4a64e3d8258e6fdb788c5e322c1ca55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/42864377a4a64e3d8258e6fdb788c5e322c1ca55", "html_url": "https://github.com/rust-lang/rust/commit/42864377a4a64e3d8258e6fdb788c5e322c1ca55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/42864377a4a64e3d8258e6fdb788c5e322c1ca55/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10269dfaeb223f28421eb4564b03aa31ef49c5a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/10269dfaeb223f28421eb4564b03aa31ef49c5a1", "html_url": "https://github.com/rust-lang/rust/commit/10269dfaeb223f28421eb4564b03aa31ef49c5a1"}], "stats": {"total": 23, "additions": 2, "deletions": 21}, "files": [{"sha": "be3db59561ba6dbf7ca8de2b2435f0f73c449843", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/42864377a4a64e3d8258e6fdb788c5e322c1ca55/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42864377a4a64e3d8258e6fdb788c5e322c1ca55/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=42864377a4a64e3d8258e6fdb788c5e322c1ca55", "patch": "@@ -4553,7 +4553,7 @@ fn trans_arg_expr(cx: &@block_ctxt, arg: &ty::arg, lldestty0: TypeRef,\n         };\n         if !lv.is_mem && !is_ext_vec_plus {\n             // Do nothing for temporaries, just give them to callee\n-        } else if ty::type_is_structural(ccx.tcx, e_ty) {\n+        } else if type_is_structural_or_param(ccx.tcx, e_ty) {\n             let dst = alloc_ty(bcx, e_ty);\n             bcx = copy_val(dst.bcx, INIT, dst.val, val, e_ty);\n             val = dst.val;\n@@ -5906,7 +5906,7 @@ fn copy_args_to_allocas(fcx: @fn_ctxt, scope: @block_ctxt,\n           ast::val. {\n             // Structural types are passed by pointer, and we use the\n             // pointed-to memory for the local.\n-            if !ty::type_is_structural(fcx_tcx(fcx), arg_ty) {\n+            if !type_is_structural_or_param(fcx_tcx(fcx), arg_ty) {\n                 // Overwrite the llargs entry for this arg with its alloca.\n                 let aval = bcx.fcx.llargs.get(aarg.id);\n                 let addr = do_spill(bcx, aval);"}, {"sha": "cdbc833dac072b312d70a3dcad3a13f3f4c28358", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/42864377a4a64e3d8258e6fdb788c5e322c1ca55/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/42864377a4a64e3d8258e6fdb788c5e322c1ca55/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=42864377a4a64e3d8258e6fdb788c5e322c1ca55", "patch": "@@ -593,16 +593,6 @@ mod collect {\n         let ty_mode = ast_mode_to_mode(a.mode);\n         let f = bind getter(cx, _);\n         let tt = ast_ty_to_ty(cx.tcx, f, a.ty);\n-        if ty::type_has_dynamic_size(cx.tcx, tt) {\n-            alt ty_mode {\n-              mo_val. {\n-                cx.tcx.sess.span_err(a.ty.span,\n-                                     \"Dynamically sized arguments \\\n-                                      must be passed by alias\");\n-              }\n-              _ { }\n-            }\n-        }\n         ret {mode: ty_mode, ty: tt};\n     }\n     fn ty_of_method(cx: @ctxt, m: &@ast::method) -> ty::method {"}, {"sha": "bb1d8bafcd88b22c7375ec93bcb0c74f2cf557aa", "filename": "src/test/compile-fail/item-name-overload.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/10269dfaeb223f28421eb4564b03aa31ef49c5a1/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10269dfaeb223f28421eb4564b03aa31ef49c5a1/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs?ref=10269dfaeb223f28421eb4564b03aa31ef49c5a1", "patch": "@@ -1,9 +0,0 @@\n-// -*- rust -*-\n-// error-pattern: Dynamically sized arguments must be passed by alias\n-\n-mod foo {\n-    fn bar<T>(f: T) -> int { ret 17; }\n-    type bar<U, T> = {a: int, b: U, c: T};\n-}\n-\n-fn main() { }"}]}