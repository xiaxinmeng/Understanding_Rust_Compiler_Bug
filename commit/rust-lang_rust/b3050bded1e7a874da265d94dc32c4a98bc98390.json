{"sha": "b3050bded1e7a874da265d94dc32c4a98bc98390", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzMDUwYmRlZDFlN2E4NzRkYTI2NWQ5NGRjMzJjNGE5OGJjOTgzOTA=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-24T00:06:12Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-24T00:06:12Z"}, "message": "Introduce internal snippet cap", "tree": {"sha": "f6cf82956933e7ff53e4cfcc34a0e15c53889b86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f6cf82956933e7ff53e4cfcc34a0e15c53889b86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3050bded1e7a874da265d94dc32c4a98bc98390", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3050bded1e7a874da265d94dc32c4a98bc98390", "html_url": "https://github.com/rust-lang/rust/commit/b3050bded1e7a874da265d94dc32c4a98bc98390", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3050bded1e7a874da265d94dc32c4a98bc98390/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd3b2393903de2fc98a50426f36d14dc7e86d8da", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd3b2393903de2fc98a50426f36d14dc7e86d8da", "html_url": "https://github.com/rust-lang/rust/commit/bd3b2393903de2fc98a50426f36d14dc7e86d8da"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "6cf7ed6e4c97d7875716c699e358698965d88df2", "filename": "crates/ra_ide/src/completion/completion_config.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b3050bded1e7a874da265d94dc32c4a98bc98390/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_config.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3050bded1e7a874da265d94dc32c4a98bc98390/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_config.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcompletion_config.rs?ref=b3050bded1e7a874da265d94dc32c4a98bc98390", "patch": "@@ -1,8 +1,20 @@\n+//! Settings for tweaking completion.\n+//!\n+//! The fun thing here is `SnippetCap` -- this type can only be created in this\n+//! module, and we use to statically check that we only produce snippet\n+//! completions if we are allowed to.\n+\n #[derive(Clone, Debug, PartialEq, Eq)]\n pub struct CompletionConfig {\n     pub enable_postfix_completions: bool,\n     pub add_call_parenthesis: bool,\n     pub add_call_argument_snippets: bool,\n+    pub snippet_cap: Option<SnippetCap>,\n+}\n+\n+#[derive(Clone, Copy, Debug, PartialEq, Eq)]\n+pub struct SnippetCap {\n+    _private: (),\n }\n \n impl Default for CompletionConfig {\n@@ -11,6 +23,7 @@ impl Default for CompletionConfig {\n             enable_postfix_completions: true,\n             add_call_parenthesis: true,\n             add_call_argument_snippets: true,\n+            snippet_cap: Some(SnippetCap { _private: () }),\n         }\n     }\n }"}, {"sha": "33d7c95a802fa61c9d9a360bc1a0dfdb5fb587ef", "filename": "crates/rust-analyzer/src/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b3050bded1e7a874da265d94dc32c4a98bc98390/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3050bded1e7a874da265d94dc32c4a98bc98390/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs?ref=b3050bded1e7a874da265d94dc32c4a98bc98390", "patch": "@@ -104,6 +104,7 @@ impl Default for Config {\n                 enable_postfix_completions: true,\n                 add_call_parenthesis: true,\n                 add_call_argument_snippets: true,\n+                ..CompletionConfig::default()\n             },\n             call_info_full: true,\n         }"}]}