{"sha": "291df4d73287b80764a5d42e71ab7fec31e3f3c3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5MWRmNGQ3MzI4N2I4MDc2NGE1ZDQyZTcxYWI3ZmVjMzFlM2YzYzM=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-05T21:28:50Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-07-05T21:29:14Z"}, "message": "rt: Add missing CDECL to routines in rust_builtin", "tree": {"sha": "11905d038406dd02958b47b7844ceb6bae61c97c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/11905d038406dd02958b47b7844ceb6bae61c97c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/291df4d73287b80764a5d42e71ab7fec31e3f3c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/291df4d73287b80764a5d42e71ab7fec31e3f3c3", "html_url": "https://github.com/rust-lang/rust/commit/291df4d73287b80764a5d42e71ab7fec31e3f3c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/291df4d73287b80764a5d42e71ab7fec31e3f3c3/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a7d82a7f0fca121a336a84f88499cc2ec4f97447", "url": "https://api.github.com/repos/rust-lang/rust/commits/a7d82a7f0fca121a336a84f88499cc2ec4f97447", "html_url": "https://github.com/rust-lang/rust/commit/a7d82a7f0fca121a336a84f88499cc2ec4f97447"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "6438c549c5520265cc40414e5ac790908dfb5265", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/291df4d73287b80764a5d42e71ab7fec31e3f3c3/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/291df4d73287b80764a5d42e71ab7fec31e3f3c3/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=291df4d73287b80764a5d42e71ab7fec31e3f3c3", "patch": "@@ -621,7 +621,7 @@ nano_time(rust_task *task, uint64_t *ns) {\n /**\n  * Preallocates the exact number of bytes in the given interior vector.\n  */\n-extern \"C\" void\n+extern \"C\" CDECL void\n ivec_reserve(rust_task *task, type_desc *ty, rust_ivec *v, size_t n_elems)\n {\n     size_t new_alloc = n_elems * ty->size;\n@@ -652,7 +652,7 @@ ivec_reserve(rust_task *task, type_desc *ty, rust_ivec *v, size_t n_elems)\n  * Returns true if the given vector is on the heap and false if it's on the\n  * stack.\n  */\n-extern \"C\" bool\n+extern \"C\" CDECL bool\n ivec_on_heap(rust_task *task, type_desc *ty, rust_ivec *v)\n {\n     return !v->fill && v->payload.ptr;\n@@ -661,7 +661,7 @@ ivec_on_heap(rust_task *task, type_desc *ty, rust_ivec *v)\n /**\n  * Returns an unsafe pointer to the data part of an interior vector.\n  */\n-extern \"C\" void *\n+extern \"C\" CDECL void *\n ivec_to_ptr(rust_task *task, type_desc *ty, rust_ivec *v)\n {\n     return v->fill ? v->payload.data : v->payload.ptr->data;\n@@ -681,7 +681,7 @@ get_ivec_size(rust_ivec *v)\n  * Copies elements in an unsafe buffer to the given interior vector. The\n  * vector must have size zero.\n  */\n-extern \"C\" void\n+extern \"C\" CDECL void\n ivec_copy_from_buf(rust_task *task, type_desc *ty, rust_ivec *v, void *ptr,\n                    size_t count)\n {\n@@ -706,12 +706,12 @@ ivec_copy_from_buf(rust_task *task, type_desc *ty, rust_ivec *v, void *ptr,\n     v->payload.ptr->fill = new_size;\n }\n \n-extern \"C\" void\n+extern \"C\" CDECL void\n pin_task(rust_task *task) {\n     task->pin();\n }\n \n-extern \"C\" void\n+extern \"C\" CDECL void\n unpin_task(rust_task *task) {\n     task->unpin();\n }"}]}