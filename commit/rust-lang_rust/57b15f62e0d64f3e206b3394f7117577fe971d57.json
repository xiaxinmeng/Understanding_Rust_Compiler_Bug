{"sha": "57b15f62e0d64f3e206b3394f7117577fe971d57", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3YjE1ZjYyZTBkNjRmM2UyMDZiMzM5NGY3MTE3NTc3ZmU5NzFkNTc=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T19:25:11Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T19:34:49Z"}, "message": "Rollup merge of #49849 - alecmocatta:master, r=alexcrichton\n\nAdd --enable-debug flag to musl CI build script\n\nBuilding for x86_64-unknown-linux-musl currently results in an executable lacking debug information for musl libc itself. If you request a backtrace in GDB while control flow is within musl \u2013 including sycalls made by musl \u2013 the result looks like:\n\n```\n#0  0x0000000000434b46 in __cp_end ()\n#1  0x0000000000432dbd in __syscall_cp_c ()\n#2  0x0000000000000000 in ?? ()\n```\n\ni.e. not very helpful. Adding --enable-debug resolves this, and --enable-optimize re-enables optimisations which default to off given the previous flag.", "tree": {"sha": "55f0c622967e29a3b13ba7f326e053758f8ddcdd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55f0c622967e29a3b13ba7f326e053758f8ddcdd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/57b15f62e0d64f3e206b3394f7117577fe971d57", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrOY1kACgkQ/vbIBR0O\nATwNog/+OKU8OHhOiv+tOSahbSsSBXEy2Jxjl4Cxbf/KmdiGoKPnd0o1KBWG85iO\nz+uLvSd+q40y7RUHEAD74Fqv53xfmqiTjUO/DDqmtG7qbstTAIt76p4Sr+NY1LDe\n/GNWbRQFSk/d/iLWGYkSLDNG3nhmAeyTdZCxGn1061N23FIcSxelQ8T/Z4LeQT/9\n1+gu3EMKsZmX0PPJfYtsFKC+jyyMGPAfAb15lbS9lyFD+4eNe2tlQqlWjPGfJJ8X\nTFEZ+2EVxAhpqsY7G4Z8V92RuWFebaVbwc1aYIkjn9bLpePSd97Po8kLILP7tkDt\naZ3AltnwKjRejkq0EmGBruXvBg1wg0UbjWPN4B5vCWOVNMiYcJuMvuEUhUxLvKpj\nLr3YoxOvYoj4OufbvU1b1aSU69UYkLHKb5DfvvZnT5F8OwHc80G/I0N2jcJP7jAg\nvY9as9IP0WAAba6sPBbaN+5q//IS7xTCtbftS3URq/1AmkKwu3+YZNXMChw8iSeI\nM8WB3U6Zyrd6lckoZI4ncjNFAxzYclQ6ocsmOt95b/tV85owmwesQ0VsF5MtQ7KN\nBLmWAKXtMmSClYl3hiFVP/aKcCLGf5MlTRk1MrKWt8XbdwEgGedZaLN6VBpwa5Mw\nHbBh2uDTEySLwYNIqyDH65j3SXCjeH6kDgA5HCHaEbxe1DEIhWw=\n=RbIG\n-----END PGP SIGNATURE-----", "payload": "tree 55f0c622967e29a3b13ba7f326e053758f8ddcdd\nparent dfdcf6361236442d9f9110d77d9f7e0b5937136c\nparent 18e95320986243696f31f4b596761eb35759dfe9\nauthor kennytm <kennytm@gmail.com> 1523474711 +0800\ncommitter kennytm <kennytm@gmail.com> 1523475289 +0800\n\nRollup merge of #49849 - alecmocatta:master, r=alexcrichton\n\nAdd --enable-debug flag to musl CI build script\n\nBuilding for x86_64-unknown-linux-musl currently results in an executable lacking debug information for musl libc itself. If you request a backtrace in GDB while control flow is within musl \u2013 including sycalls made by musl \u2013 the result looks like:\n\n```\n#0  0x0000000000434b46 in __cp_end ()\n#1  0x0000000000432dbd in __syscall_cp_c ()\n#2  0x0000000000000000 in ?? ()\n```\n\ni.e. not very helpful. Adding --enable-debug resolves this, and --enable-optimize re-enables optimisations which default to off given the previous flag.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/57b15f62e0d64f3e206b3394f7117577fe971d57", "html_url": "https://github.com/rust-lang/rust/commit/57b15f62e0d64f3e206b3394f7117577fe971d57", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/57b15f62e0d64f3e206b3394f7117577fe971d57/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dfdcf6361236442d9f9110d77d9f7e0b5937136c", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfdcf6361236442d9f9110d77d9f7e0b5937136c", "html_url": "https://github.com/rust-lang/rust/commit/dfdcf6361236442d9f9110d77d9f7e0b5937136c"}, {"sha": "18e95320986243696f31f4b596761eb35759dfe9", "url": "https://api.github.com/repos/rust-lang/rust/commits/18e95320986243696f31f4b596761eb35759dfe9", "html_url": "https://github.com/rust-lang/rust/commit/18e95320986243696f31f4b596761eb35759dfe9"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "f87ba8fe4e60e150613178a8157b170f33fc398c", "filename": "src/ci/docker/scripts/musl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/57b15f62e0d64f3e206b3394f7117577fe971d57/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/57b15f62e0d64f3e206b3394f7117577fe971d57/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh?ref=57b15f62e0d64f3e206b3394f7117577fe971d57", "patch": "@@ -40,7 +40,7 @@ if [ ! -d $MUSL ]; then\n fi\n \n cd $MUSL\n-./configure --disable-shared --prefix=/musl-$TAG $@\n+./configure --enable-optimize --enable-debug --disable-shared --prefix=/musl-$TAG $@\n if [ \"$TAG\" = \"i586\" -o \"$TAG\" = \"i686\" ]; then\n   hide_output make -j$(nproc) AR=ar RANLIB=ranlib\n else"}]}