{"sha": "bd4a772e1a87180f31da81f7d11ef07cff042bbf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkNGE3NzJlMWE4NzE4MGYzMWRhODFmN2QxMWVmMDdjZmYwNDJiYmY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-04-16T17:12:56Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-04-16T17:13:53Z"}, "message": "update cargo miri test to test rng crate a bit; this currently fails", "tree": {"sha": "62b0f5db4884b6e9a829d0f1ae48ebb659cbe8cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62b0f5db4884b6e9a829d0f1ae48ebb659cbe8cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd4a772e1a87180f31da81f7d11ef07cff042bbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd4a772e1a87180f31da81f7d11ef07cff042bbf", "html_url": "https://github.com/rust-lang/rust/commit/bd4a772e1a87180f31da81f7d11ef07cff042bbf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd4a772e1a87180f31da81f7d11ef07cff042bbf/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ceca7c502057fedee2e77329df4ec23b1bebaa03", "url": "https://api.github.com/repos/rust-lang/rust/commits/ceca7c502057fedee2e77329df4ec23b1bebaa03", "html_url": "https://github.com/rust-lang/rust/commit/ceca7c502057fedee2e77329df4ec23b1bebaa03"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "f1412dbf3969ec13902312d87a0348659401415e", "filename": "test-cargo-miri/run-test.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Frun-test.py", "raw_url": "https://github.com/rust-lang/rust/raw/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Frun-test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Frun-test.py?ref=bd4a772e1a87180f31da81f7d11ef07cff042bbf", "patch": "@@ -43,7 +43,7 @@ def test_cargo_miri_run():\n     )\n \n def test_cargo_miri_test():\n-    test(\"cargo miri test\", [\"cargo\", \"miri\", \"test\", \"-q\"], \"test.stdout.ref\", \"test.stderr.ref\")\n+    test(\"cargo miri test\", [\"cargo\", \"miri\", \"test\", \"-q\", \"--\", \"-Zmiri-seed=feed\"], \"test.stdout.ref\", \"test.stderr.ref\")\n     test(\"cargo miri test (with filter)\",\n         [\"cargo\", \"miri\", \"test\", \"-q\", \"--\", \"--\", \"impl\"],\n         \"test.stdout.ref2\", \"test.stderr.ref\""}, {"sha": "318057a7d9e64e1ac843de61f88f6411e3fc9bdf", "filename": "test-cargo-miri/test.stdout.ref", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Ftest.stdout.ref", "raw_url": "https://github.com/rust-lang/rust/raw/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Ftest.stdout.ref", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref?ref=bd4a772e1a87180f31da81f7d11ef07cff042bbf", "patch": "@@ -5,9 +5,10 @@ test test::rng ... ok\n test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n \n \n-running 2 tests\n+running 3 tests\n test rng ... ok\n+test seeded_rng ... ok\n test simple ... ok\n \n-test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n+test result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n "}, {"sha": "6f7876d679b63690c550aa4b795d4d5dfe08e016", "filename": "test-cargo-miri/tests/test.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Ftests%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd4a772e1a87180f31da81f7d11ef07cff042bbf/test-cargo-miri%2Ftests%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftests%2Ftest.rs?ref=bd4a772e1a87180f31da81f7d11ef07cff042bbf", "patch": "@@ -1,6 +1,6 @@\n extern crate rand;\n \n-use rand::{Rng, SeedableRng};\n+use rand::{SeedableRng, FromEntropy, Rng, rngs::SmallRng};\n \n #[test]\n fn simple() {\n@@ -17,6 +17,14 @@ fn rng() {\n     assert_ne!(x, y);\n }\n \n+#[test]\n+#[cfg(not(target_os=\"macos\"))] // FIXME entropy does not work on macOS\n+fn seeded_rng() {\n+    // Use this opportunity to test querying the RNG (needs an external crate, hence tested here and not in the compiletest suite)\n+    let mut rng = SmallRng::from_entropy();\n+    let _val = rng.gen::<i32>();\n+}\n+\n // A test that won't work on miri\n #[cfg(not(miri))]\n #[test]"}]}