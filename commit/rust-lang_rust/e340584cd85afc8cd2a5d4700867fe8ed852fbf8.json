{"sha": "e340584cd85afc8cd2a5d4700867fe8ed852fbf8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzNDA1ODRjZDg1YWZjOGNkMmE1ZDQ3MDA4NjdmZThlZDg1MmZiZjg=", "commit": {"author": {"name": "llogiq", "email": "bogusandre@gmail.com", "date": "2015-08-28T12:39:09Z"}, "committer": {"name": "llogiq", "email": "bogusandre@gmail.com", "date": "2015-08-28T12:39:09Z"}, "message": "Merge pull request #248 from Manishearth/rustup\n\nrustup", "tree": {"sha": "4d5c95339f96618879bf2898677cfcb2feb0a695", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4d5c95339f96618879bf2898677cfcb2feb0a695"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e340584cd85afc8cd2a5d4700867fe8ed852fbf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e340584cd85afc8cd2a5d4700867fe8ed852fbf8", "html_url": "https://github.com/rust-lang/rust/commit/e340584cd85afc8cd2a5d4700867fe8ed852fbf8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e340584cd85afc8cd2a5d4700867fe8ed852fbf8/comments", "author": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "committer": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2606f34bcb060c85cc8cdb3ce4183101b3c4902d", "url": "https://api.github.com/repos/rust-lang/rust/commits/2606f34bcb060c85cc8cdb3ce4183101b3c4902d", "html_url": "https://github.com/rust-lang/rust/commit/2606f34bcb060c85cc8cdb3ce4183101b3c4902d"}, {"sha": "621818e6061e693c57a494742ba4094029a855c0", "url": "https://api.github.com/repos/rust-lang/rust/commits/621818e6061e693c57a494742ba4094029a855c0", "html_url": "https://github.com/rust-lang/rust/commit/621818e6061e693c57a494742ba4094029a855c0"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "b6fae89fc31a9f32fe2340999a22f377ca0bbfad", "filename": "src/utils.rs", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/e340584cd85afc8cd2a5d4700867fe8ed852fbf8/src%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e340584cd85afc8cd2a5d4700867fe8ed852fbf8/src%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Futils.rs?ref=e340584cd85afc8cd2a5d4700867fe8ed852fbf8", "patch": "@@ -18,13 +18,17 @@ pub const LL_PATH:     [&'static str; 3] = [\"collections\", \"linked_list\", \"Linke\n pub fn in_macro(cx: &Context, opt_info: Option<&ExpnInfo>) -> bool {\n     // no ExpnInfo = no macro\n     opt_info.map_or(false, |info| {\n-        if info.callee.format == ExpnFormat::CompilerExpansion {\n-            if info.callee.name == \"closure expansion\" {\n-                return false;\n-            }\n-        } else if info.callee.format == ExpnFormat::MacroAttribute {\n-            // these are all plugins\n-            return true;\n+        match info.callee.format {\n+            ExpnFormat::CompilerExpansion(..) => {\n+                if info.callee.name() == \"closure expansion\" {\n+                    return false;\n+                }\n+            }, \n+            ExpnFormat::MacroAttribute(..) => {\n+                // these are all plugins\n+                return true;\n+            },\n+            _ => (),\n         }\n         // no span for the callee = external macro\n         info.callee.span.map_or(true, |span| {"}]}