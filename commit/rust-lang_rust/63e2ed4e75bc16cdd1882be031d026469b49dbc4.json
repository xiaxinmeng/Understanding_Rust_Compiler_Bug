{"sha": "63e2ed4e75bc16cdd1882be031d026469b49dbc4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzZTJlZDRlNzViYzE2Y2RkMTg4MmJlMDMxZDAyNjQ2OWI0OWRiYzQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-31T16:37:40Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-07-31T16:37:40Z"}, "message": "Nodes for type args", "tree": {"sha": "28e2319edf5fb77998cc2cc4391ca007edaf55fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/28e2319edf5fb77998cc2cc4391ca007edaf55fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63e2ed4e75bc16cdd1882be031d026469b49dbc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63e2ed4e75bc16cdd1882be031d026469b49dbc4", "html_url": "https://github.com/rust-lang/rust/commit/63e2ed4e75bc16cdd1882be031d026469b49dbc4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63e2ed4e75bc16cdd1882be031d026469b49dbc4/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd814fdf8113bc801b735ed462ba142e98f1f81b", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd814fdf8113bc801b735ed462ba142e98f1f81b", "html_url": "https://github.com/rust-lang/rust/commit/cd814fdf8113bc801b735ed462ba142e98f1f81b"}], "stats": {"total": 96, "additions": 84, "deletions": 12}, "files": [{"sha": "6c67db73998e2608c66796c22be43b9ea0689833", "filename": "src/grammar.ron", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fgrammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fgrammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fgrammar.ron?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -152,10 +152,13 @@ Grammar(\n         \"LET_STMT\",\n         \"EXPR_STMT\",\n \n-        \"TYPE_PARAM\",\n-        \"LIFETIME_PARAM\",\n         \"TYPE_PARAM_LIST\",\n+        \"LIFETIME_PARAM\",\n+        \"TYPE_PARAM\",\n         \"TYPE_ARG_LIST\",\n+        \"LIFETIME_ARG\",\n+        \"TYPE_ARG\",\n+        \"ASSOC_TYPE_ARG\",\n \n         \"PARAM_LIST\",\n         \"SELF_PARAM\","}, {"sha": "6b22170127512de9f934213cdd2cf8902e581bed", "filename": "src/parser/grammar/type_args.rs", "status": "modified", "additions": 23, "deletions": 1, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fparser%2Fgrammar%2Ftype_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fparser%2Fgrammar%2Ftype_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Ftype_args.rs?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -16,11 +16,33 @@ pub(super) fn list(p: &mut Parser, colon_colon_required: bool) {\n     };\n \n     while !p.at(EOF) && !p.at(R_ANGLE) {\n-        types::type_(p);\n+        type_arg(p);\n         if !p.at(R_ANGLE) && !p.expect(COMMA) {\n             break;\n         }\n     }\n     p.expect(R_ANGLE);\n     m.complete(p, TYPE_ARG_LIST);\n }\n+\n+// test type_arg\n+// type A = B<'static, i32, Item=u64>\n+fn type_arg(p: &mut Parser) {\n+    let m = p.start();\n+    match p.current() {\n+        LIFETIME => {\n+            p.bump();\n+            m.complete(p, LIFETIME_ARG);\n+        },\n+        IDENT if p.nth(1) == EQ => {\n+            p.bump();\n+            p.bump();\n+            types::type_(p);\n+            m.complete(p, ASSOC_TYPE_ARG);\n+        },\n+        _ => {\n+            types::type_(p);\n+            m.complete(p, TYPE_ARG);\n+        },\n+    }\n+}"}, {"sha": "7c9333fc51c822613efc266580a86f95fab66a43", "filename": "src/syntax_kinds/generated.rs", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fsyntax_kinds%2Fgenerated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/src%2Fsyntax_kinds%2Fgenerated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsyntax_kinds%2Fgenerated.rs?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -140,10 +140,13 @@ pub enum SyntaxKind {\n     BLOCK,\n     LET_STMT,\n     EXPR_STMT,\n-    TYPE_PARAM,\n-    LIFETIME_PARAM,\n     TYPE_PARAM_LIST,\n+    LIFETIME_PARAM,\n+    TYPE_PARAM,\n     TYPE_ARG_LIST,\n+    LIFETIME_ARG,\n+    TYPE_ARG,\n+    ASSOC_TYPE_ARG,\n     PARAM_LIST,\n     SELF_PARAM,\n     ARG_LIST,\n@@ -294,10 +297,13 @@ impl SyntaxKind {\n             BLOCK => &SyntaxInfo { name: \"BLOCK\" },\n             LET_STMT => &SyntaxInfo { name: \"LET_STMT\" },\n             EXPR_STMT => &SyntaxInfo { name: \"EXPR_STMT\" },\n-            TYPE_PARAM => &SyntaxInfo { name: \"TYPE_PARAM\" },\n-            LIFETIME_PARAM => &SyntaxInfo { name: \"LIFETIME_PARAM\" },\n             TYPE_PARAM_LIST => &SyntaxInfo { name: \"TYPE_PARAM_LIST\" },\n+            LIFETIME_PARAM => &SyntaxInfo { name: \"LIFETIME_PARAM\" },\n+            TYPE_PARAM => &SyntaxInfo { name: \"TYPE_PARAM\" },\n             TYPE_ARG_LIST => &SyntaxInfo { name: \"TYPE_ARG_LIST\" },\n+            LIFETIME_ARG => &SyntaxInfo { name: \"LIFETIME_ARG\" },\n+            TYPE_ARG => &SyntaxInfo { name: \"TYPE_ARG\" },\n+            ASSOC_TYPE_ARG => &SyntaxInfo { name: \"ASSOC_TYPE_ARG\" },\n             PARAM_LIST => &SyntaxInfo { name: \"PARAM_LIST\" },\n             SELF_PARAM => &SyntaxInfo { name: \"SELF_PARAM\" },\n             ARG_LIST => &SyntaxInfo { name: \"ARG_LIST\" },"}, {"sha": "c3fc0c4bfb534113215e3c4cde93541dd90ef084", "filename": "tests/data/parser/inline/0039_path_expr.txt", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0039_path_expr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0039_path_expr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0039_path_expr.txt?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -63,11 +63,12 @@ FILE@[0; 68)\n               TYPE_ARG_LIST@[59; 64)\n                 COLONCOLON@[59; 61)\n                 L_ANGLE@[61; 62)\n-                PATH_TYPE@[62; 63)\n-                  PATH@[62; 63)\n-                    PATH_SEGMENT@[62; 63)\n-                      NAME_REF@[62; 63)\n-                        IDENT@[62; 63) \"b\"\n+                TYPE_ARG@[62; 63)\n+                  PATH_TYPE@[62; 63)\n+                    PATH@[62; 63)\n+                      PATH_SEGMENT@[62; 63)\n+                        NAME_REF@[62; 63)\n+                          IDENT@[62; 63) \"b\"\n                 R_ANGLE@[63; 64)\n         SEMI@[64; 65)\n         WHITESPACE@[65; 66)"}, {"sha": "f0c8cc3a8e4bda6c741dae0bc3af9e013365e8fe", "filename": "tests/data/parser/inline/0058_type_arg.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.rs?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -0,0 +1 @@\n+type A = B<'static, i32, Item=u64>"}, {"sha": "af4bcedefc649557c522843237c750a432f352f9", "filename": "tests/data/parser/inline/0058_type_arg.txt", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.txt", "raw_url": "https://github.com/rust-lang/rust/raw/63e2ed4e75bc16cdd1882be031d026469b49dbc4/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0058_type_arg.txt?ref=63e2ed4e75bc16cdd1882be031d026469b49dbc4", "patch": "@@ -0,0 +1,39 @@\n+FILE@[0; 35)\n+  TYPE_ITEM@[0; 35)\n+    TYPE_KW@[0; 4)\n+    NAME@[4; 7)\n+      WHITESPACE@[4; 5)\n+      IDENT@[5; 6) \"A\"\n+      WHITESPACE@[6; 7)\n+    EQ@[7; 8)\n+    PATH_TYPE@[8; 35)\n+      PATH@[8; 35)\n+        PATH_SEGMENT@[8; 35)\n+          NAME_REF@[8; 10)\n+            WHITESPACE@[8; 9)\n+            IDENT@[9; 10) \"B\"\n+          TYPE_ARG_LIST@[10; 35)\n+            L_ANGLE@[10; 11)\n+            LIFETIME_ARG@[11; 18)\n+              LIFETIME@[11; 18) \"'static\"\n+            COMMA@[18; 19)\n+            TYPE_ARG@[19; 23)\n+              PATH_TYPE@[19; 23)\n+                PATH@[19; 23)\n+                  PATH_SEGMENT@[19; 23)\n+                    NAME_REF@[19; 23)\n+                      WHITESPACE@[19; 20)\n+                      IDENT@[20; 23) \"i32\"\n+            COMMA@[23; 24)\n+            ASSOC_TYPE_ARG@[24; 33)\n+              WHITESPACE@[24; 25)\n+              IDENT@[25; 29) \"Item\"\n+              EQ@[29; 30)\n+              PATH_TYPE@[30; 33)\n+                PATH@[30; 33)\n+                  PATH_SEGMENT@[30; 33)\n+                    NAME_REF@[30; 33)\n+                      IDENT@[30; 33) \"u64\"\n+            R_ANGLE@[33; 34)\n+            WHITESPACE@[34; 35)\n+            err: `expected SEMI`"}]}