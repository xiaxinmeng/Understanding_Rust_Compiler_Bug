{"sha": "f87afe54b87586a80b9a2b8e0193c933ef763e6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY4N2FmZTU0Yjg3NTg2YTgwYjlhMmI4ZTAxOTNjOTMzZWY3NjNlNmQ=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-06T16:20:55Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-06T16:26:55Z"}, "message": "Extend the comment of `check_toolstate()` to clarify that the tool won't be shipped on all targets", "tree": {"sha": "e8301e51c5fef252d5f0b7c38c278dee3b978609", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e8301e51c5fef252d5f0b7c38c278dee3b978609"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f87afe54b87586a80b9a2b8e0193c933ef763e6d", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYB7DTxUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLhuSwEAnzLVOlTRA/hHR7wWvyowXMXHC3kM\n4Hgut0D8YjD/gVcBAJCK9miUbfsyih5aaeQDS5xlQUe1lPDK2IOYaOpzBCUM\n=MRae\n-----END PGP SIGNATURE-----", "payload": "tree e8301e51c5fef252d5f0b7c38c278dee3b978609\nparent f82315a37e02e8815e09a001779e2843a64f5591\nauthor hyd-dev <yd-huang@outlook.com> 1612628455 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1612628815 +0800\n\nExtend the comment of `check_toolstate()` to clarify that the tool won't be shipped on all targets\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f87afe54b87586a80b9a2b8e0193c933ef763e6d", "html_url": "https://github.com/rust-lang/rust/commit/f87afe54b87586a80b9a2b8e0193c933ef763e6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f87afe54b87586a80b9a2b8e0193c933ef763e6d/comments", "author": null, "committer": null, "parents": [{"sha": "f82315a37e02e8815e09a001779e2843a64f5591", "url": "https://api.github.com/repos/rust-lang/rust/commits/f82315a37e02e8815e09a001779e2843a64f5591", "html_url": "https://github.com/rust-lang/rust/commit/f82315a37e02e8815e09a001779e2843a64f5591"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "d7c2fb8c8b893b740c81fb3d066df59e443a0906", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f87afe54b87586a80b9a2b8e0193c933ef763e6d/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f87afe54b87586a80b9a2b8e0193c933ef763e6d/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=f87afe54b87586a80b9a2b8e0193c933ef763e6d", "patch": "@@ -254,7 +254,10 @@ impl Builder {\n         t!(self.checksums.store_cache());\n     }\n \n-    /// If a tool does not pass its tests, don't ship it.\n+    /// If a tool does not pass its tests on *any* of Linux and Windows, don't ship\n+    /// it on *all* targets, because tools like Miri can \"cross-run\" programs for\n+    /// different targets, for example, run a program for `x86_64-pc-windows-msvc`\n+    /// on `x86_64-unknown-linux-gnu`.\n     /// Right now, we do this only for Miri.\n     fn check_toolstate(&mut self) {\n         for file in &[\"toolstates-linux.json\", \"toolstates-windows.json\"] {"}]}