{"sha": "e66817512a414d1665e37e6016a6fc06522fb2e0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2NjgxNzUxMmE0MTRkMTY2NWUzN2U2MDE2YTZmYzA2NTIyZmIyZTA=", "commit": {"author": {"name": "Alisdair Owens", "email": "awo101@zepler.net", "date": "2015-07-22T16:24:03Z"}, "committer": {"name": "Alisdair Owens", "email": "awo101@zepler.net", "date": "2015-07-23T16:35:24Z"}, "message": "Add diagnostics for E0120", "tree": {"sha": "04388c697ce14a6e6b8c59b754b7d058faa603ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04388c697ce14a6e6b8c59b754b7d058faa603ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e66817512a414d1665e37e6016a6fc06522fb2e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e66817512a414d1665e37e6016a6fc06522fb2e0", "html_url": "https://github.com/rust-lang/rust/commit/e66817512a414d1665e37e6016a6fc06522fb2e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e66817512a414d1665e37e6016a6fc06522fb2e0/comments", "author": {"login": "AlisdairO", "id": 6296622, "node_id": "MDQ6VXNlcjYyOTY2MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/6296622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlisdairO", "html_url": "https://github.com/AlisdairO", "followers_url": "https://api.github.com/users/AlisdairO/followers", "following_url": "https://api.github.com/users/AlisdairO/following{/other_user}", "gists_url": "https://api.github.com/users/AlisdairO/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlisdairO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlisdairO/subscriptions", "organizations_url": "https://api.github.com/users/AlisdairO/orgs", "repos_url": "https://api.github.com/users/AlisdairO/repos", "events_url": "https://api.github.com/users/AlisdairO/events{/privacy}", "received_events_url": "https://api.github.com/users/AlisdairO/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AlisdairO", "id": 6296622, "node_id": "MDQ6VXNlcjYyOTY2MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/6296622?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlisdairO", "html_url": "https://github.com/AlisdairO", "followers_url": "https://api.github.com/users/AlisdairO/followers", "following_url": "https://api.github.com/users/AlisdairO/following{/other_user}", "gists_url": "https://api.github.com/users/AlisdairO/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlisdairO/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlisdairO/subscriptions", "organizations_url": "https://api.github.com/users/AlisdairO/orgs", "repos_url": "https://api.github.com/users/AlisdairO/repos", "events_url": "https://api.github.com/users/AlisdairO/events{/privacy}", "received_events_url": "https://api.github.com/users/AlisdairO/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e5b165e1801c2ddb5d3cc49ff96b9f264a4545c", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e5b165e1801c2ddb5d3cc49ff96b9f264a4545c", "html_url": "https://github.com/rust-lang/rust/commit/2e5b165e1801c2ddb5d3cc49ff96b9f264a4545c"}], "stats": {"total": 40, "additions": 39, "deletions": 1}, "files": [{"sha": "ad45304341a531f549fbd5c4450c802a591fd8ff", "filename": "src/librustc_typeck/diagnostics.rs", "status": "modified", "additions": 39, "deletions": 1, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/e66817512a414d1665e37e6016a6fc06522fb2e0/src%2Flibrustc_typeck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e66817512a414d1665e37e6016a6fc06522fb2e0/src%2Flibrustc_typeck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fdiagnostics.rs?ref=e66817512a414d1665e37e6016a6fc06522fb2e0", "patch": "@@ -1316,6 +1316,45 @@ fn main() {\n ```\n \"##,\n \n+E0120: r##\"\n+An attempt was made to implement Drop on a trait, which is not allowed: only\n+structs and enums can implement Drop. An example causing this error:\n+\n+```\n+trait MyTrait {}\n+\n+impl Drop for MyTrait {\n+    fn drop(&mut self) {}\n+}\n+```\n+\n+A workaround for this problem is to wrap the trait up in a struct, and implement\n+Drop on that. An example is shown below:\n+\n+```\n+trait MyTrait {}\n+struct MyWrapper<T: MyTrait> { foo: T }\n+\n+impl <T: MyTrait> Drop for MyWrapper<T> {\n+    fn drop(&mut self) {}\n+}\n+\n+```\n+\n+Alternatively, wrapping trait objects requires something like the following:\n+\n+```\n+trait MyTrait {}\n+\n+//or Box<MyTrait>, if you wanted an owned trait object\n+struct MyWrapper<'a> { foo: &'a MyTrait }\n+\n+impl <'a> Drop for MyWrapper<'a> {\n+    fn drop(&mut self) {}\n+}\n+```\n+\"##,\n+\n E0121: r##\"\n In order to be consistent with Rust's lack of global type inference, type\n placeholders are disallowed by design in item signatures.\n@@ -2195,7 +2234,6 @@ register_diagnostics! {\n     E0103,\n     E0104,\n     E0118,\n-    E0120,\n     E0122,\n     E0123,\n     E0127,"}]}