{"sha": "dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiYzAwY2VkM2EwOWE3YThjMzJkNjlhODliOWUwNzMyNTJjY2EzOWQ=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-09-25T03:24:32Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-09-25T03:26:06Z"}, "message": "rt: Add a logging function for strings (only).\n\nThis will be the shape-free replacement for upcall_log_type.", "tree": {"sha": "ede5a5e4626d0912136ab4e4f7e8a68f108ea0fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ede5a5e4626d0912136ab4e4f7e8a68f108ea0fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "html_url": "https://github.com/rust-lang/rust/commit/dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbc00ced3a09a7a8c32d69a89b9e073252cca39d/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00e349251107963a1669d7314d8fe530b55f9cbb", "url": "https://api.github.com/repos/rust-lang/rust/commits/00e349251107963a1669d7314d8fe530b55f9cbb", "html_url": "https://github.com/rust-lang/rust/commit/00e349251107963a1669d7314d8fe530b55f9cbb"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "02bc86f88b68579569c70f8cddf61b94aebb5a88", "filename": "src/rt/rust_builtin.cpp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/dbc00ced3a09a7a8c32d69a89b9e073252cca39d/src%2Frt%2Frust_builtin.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/dbc00ced3a09a7a8c32d69a89b9e073252cca39d/src%2Frt%2Frust_builtin.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_builtin.cpp?ref=dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "patch": "@@ -950,6 +950,13 @@ rust_call_tydesc_glue(void *root, size_t *tydesc, size_t glue_index) {\n         glue_fn(0, 0, 0, root);\n }\n \n+// Don't run on the Rust stack!\n+extern \"C\" void\n+rust_log_str(uint32_t level, const char *str) {\n+    rust_task *task = rust_get_current_task();\n+    task->sched_loop->get_log().log(task, level, \"%s\", str);\n+}\n+\n //\n // Local Variables:\n // mode: C++"}, {"sha": "43f24f4dd4fa6582fe6c7b3a568e3592a2bd4240", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dbc00ced3a09a7a8c32d69a89b9e073252cca39d/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/dbc00ced3a09a7a8c32d69a89b9e073252cca39d/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=dbc00ced3a09a7a8c32d69a89b9e073252cca39d", "patch": "@@ -60,6 +60,7 @@ rust_get_task\n rust_get_stack_segment\n rust_task_weaken\n rust_task_unweaken\n+rust_log_str\n shape_log_str\n start_task\n vec_reserve_shared_actual"}]}