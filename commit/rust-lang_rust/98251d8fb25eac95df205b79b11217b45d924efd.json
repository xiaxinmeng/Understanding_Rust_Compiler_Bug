{"sha": "98251d8fb25eac95df205b79b11217b45d924efd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4MjUxZDhmYjI1ZWFjOTVkZjIwNWI3OWIxMTIxN2I0NWQ5MjRlZmQ=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-02-22T18:53:10Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-02-29T04:59:58Z"}, "message": "Reduce visibility of `get_module_parent_node` and remove `get_module_parent`", "tree": {"sha": "cf29b74bdbfa6038975ed34c7933030e5ec1529f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf29b74bdbfa6038975ed34c7933030e5ec1529f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98251d8fb25eac95df205b79b11217b45d924efd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98251d8fb25eac95df205b79b11217b45d924efd", "html_url": "https://github.com/rust-lang/rust/commit/98251d8fb25eac95df205b79b11217b45d924efd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98251d8fb25eac95df205b79b11217b45d924efd/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "542d813475eeac7cac1bae5de32fe7809b4bf771", "url": "https://api.github.com/repos/rust-lang/rust/commits/542d813475eeac7cac1bae5de32fe7809b4bf771", "html_url": "https://github.com/rust-lang/rust/commit/542d813475eeac7cac1bae5de32fe7809b4bf771"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "d3de20fd970176f948c46b1650d37014c4758d83", "filename": "src/librustc/hir/map/mod.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/98251d8fb25eac95df205b79b11217b45d924efd/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98251d8fb25eac95df205b79b11217b45d924efd/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmap%2Fmod.rs?ref=98251d8fb25eac95df205b79b11217b45d924efd", "patch": "@@ -746,15 +746,9 @@ impl<'hir> Map<'hir> {\n         hir_id\n     }\n \n-    /// Returns the `DefId` of `id`'s nearest module parent, or `id` itself if no\n-    /// module parent is in this map.\n-    pub fn get_module_parent(&self, id: HirId) -> DefId {\n-        self.local_def_id(self.get_module_parent_node(id))\n-    }\n-\n     /// Returns the `HirId` of `id`'s nearest module parent, or `id` itself if no\n     /// module parent is in this map.\n-    pub fn get_module_parent_node(&self, hir_id: HirId) -> HirId {\n+    pub(super) fn get_module_parent_node(&self, hir_id: HirId) -> HirId {\n         for (hir_id, node) in self.parent_iter(hir_id) {\n             if let Node::Item(&Item { kind: ItemKind::Mod(_), .. }) = node {\n                 return hir_id;"}, {"sha": "1aa3b27bd1a5dfb418bdb590ce8dc1098fd70b13", "filename": "src/librustc/hir/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98251d8fb25eac95df205b79b11217b45d924efd/src%2Flibrustc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98251d8fb25eac95df205b79b11217b45d924efd/src%2Flibrustc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmod.rs?ref=98251d8fb25eac95df205b79b11217b45d924efd", "patch": "@@ -55,7 +55,7 @@ impl<'tcx> TyCtxt<'tcx> {\n pub fn provide(providers: &mut Providers<'_>) {\n     providers.parent_module_from_def_id = |tcx, id| {\n         let hir = tcx.hir();\n-        hir.get_module_parent(hir.as_local_hir_id(id).unwrap())\n+        hir.local_def_id(hir.get_module_parent_node(hir.as_local_hir_id(id).unwrap()))\n     };\n     providers.hir_crate = |tcx, _| tcx.hir_map.untracked_krate();\n     map::provide(providers);"}]}