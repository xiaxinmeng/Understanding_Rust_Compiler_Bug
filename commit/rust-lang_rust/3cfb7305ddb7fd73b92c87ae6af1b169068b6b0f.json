{"sha": "3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjZmI3MzA1ZGRiN2ZkNzNiOTJjODdhZTZhZjFiMTY5MDY4YjZiMGY=", "commit": {"author": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2021-08-16T16:42:21Z"}, "committer": {"name": "Nikita Popov", "email": "nikita.ppv@gmail.com", "date": "2021-08-16T18:24:02Z"}, "message": "Relax internal/private checks in coverage IR test\n\nSince https://reviews.llvm.org/D103355 this will usually also use\ninternal rather than private on Windows as well. We don't\nparticularly care about this implementation detail, just accept\neither.", "tree": {"sha": "e9d4272af546b80b80631a235dedb53621f95563", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9d4272af546b80b80631a235dedb53621f95563"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "html_url": "https://github.com/rust-lang/rust/commit/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f/comments", "author": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikic", "id": 216080, "node_id": "MDQ6VXNlcjIxNjA4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/216080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikic", "html_url": "https://github.com/nikic", "followers_url": "https://api.github.com/users/nikic/followers", "following_url": "https://api.github.com/users/nikic/following{/other_user}", "gists_url": "https://api.github.com/users/nikic/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikic/subscriptions", "organizations_url": "https://api.github.com/users/nikic/orgs", "repos_url": "https://api.github.com/users/nikic/repos", "events_url": "https://api.github.com/users/nikic/events{/privacy}", "received_events_url": "https://api.github.com/users/nikic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a454edce908ab2ef204052c4ca5bad29fa9a30e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6a454edce908ab2ef204052c4ca5bad29fa9a30e", "html_url": "https://github.com/rust-lang/rust/commit/6a454edce908ab2ef204052c4ca5bad29fa9a30e"}], "stats": {"total": 10, "additions": 4, "deletions": 6}, "files": [{"sha": "1ff1ffcc4b0b8a80dde01c8f60df5b0de136859c", "filename": "src/test/run-make-fulldeps/coverage-llvmir/Makefile", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile?ref=3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "patch": "@@ -22,7 +22,6 @@ DEFINE_INTERNAL=define internal\n ifdef IS_WINDOWS\n \tLLVM_FILECHECK_OPTIONS=\\\n \t\t-check-prefixes=CHECK,WINDOWS \\\n-\t\t-DPRIVATE_GLOBAL='internal global' \\\n \t\t-DDEFINE_INTERNAL='$(DEFINE_INTERNAL)' \\\n \t\t-DCOMDAT_IF_SUPPORTED='$(COMDAT_IF_SUPPORTED)' \\\n \t\t-DINSTR_PROF_DATA='.lprfd$$M' \\\n@@ -36,7 +35,6 @@ ifdef IS_WINDOWS\n else\n \tLLVM_FILECHECK_OPTIONS=\\\n \t\t-check-prefixes=CHECK \\\n-\t\t-DPRIVATE_GLOBAL='private global' \\\n \t\t-DDEFINE_INTERNAL='$(DEFINE_INTERNAL)' \\\n \t\t-DCOMDAT_IF_SUPPORTED='$(COMDAT_IF_SUPPORTED)' \\\n \t\t-DINSTR_PROF_DATA='$(DATA_SECTION_PREFIX)__llvm_prf_data$(INSTR_PROF_DATA_SUFFIX)' \\"}, {"sha": "973f695e36dd6e6bf29f79cd8e2981fa95d29f9b", "filename": "src/test/run-make-fulldeps/coverage-llvmir/filecheck.testprog.txt", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2Ffilecheck.testprog.txt?ref=3cfb7305ddb7fd73b92c87ae6af1b169068b6b0f", "patch": "@@ -11,17 +11,17 @@ CHECK-SAME:   section \"[[INSTR_PROF_COVMAP]]\", align 8\n \n WINDOWS:      @__llvm_profile_runtime = external global i32\n \n-CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n+CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = {{private|internal}} global\n CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\"{{.*}}, align 8\n \n-CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = [[PRIVATE_GLOBAL]]\n+CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog14will_be_called = {{private|internal}} global\n CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog14will_be_called,\n CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\"{{.*}}, align 8\n \n-CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n+CHECK:        @__profc__R{{[a-zA-Z0-9_]+}}testprog4main = {{private|internal}} global\n CHECK-SAME:   section \"[[INSTR_PROF_CNTS]]\"{{.*}}, align 8\n \n-CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog4main = [[PRIVATE_GLOBAL]]\n+CHECK:        @__profd__R{{[a-zA-Z0-9_]+}}testprog4main = {{private|internal}} global\n CHECK-SAME:   @__profc__R{{[a-zA-Z0-9_]+}}testprog4main,\n CHECK-SAME:   section \"[[INSTR_PROF_DATA]]\"{{.*}}, align 8\n "}]}