{"sha": "9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "node_id": "C_kwDOAAsO6NoAKDliYjc5N2MyYWVmMWE1MTc1MTg1ZjRjN2QyNWZhMjNlYWFlZWMzMjY", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-27T16:05:23Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-30T12:16:02Z"}, "message": "Add missing vendor intrinsics", "tree": {"sha": "251a41814254971dac2924c5ffe006f8bdb007c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/251a41814254971dac2924c5ffe006f8bdb007c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "html_url": "https://github.com/rust-lang/rust/commit/9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9bb797c2aef1a5175185f4c7d25fa23eaaeec326/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a445bcb53d5f62d188ef9c1bb107668293fd9013", "url": "https://api.github.com/repos/rust-lang/rust/commits/a445bcb53d5f62d188ef9c1bb107668293fd9013", "html_url": "https://github.com/rust-lang/rust/commit/a445bcb53d5f62d188ef9c1bb107668293fd9013"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "d88fe9bca2ac5ef070eec64ed76852746508713b", "filename": "src/base.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9bb797c2aef1a5175185f4c7d25fa23eaaeec326/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9bb797c2aef1a5175185f4c7d25fa23eaaeec326/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "patch": "@@ -79,7 +79,10 @@ pub fn compile_codegen_unit<'tcx>(tcx: TyCtxt<'tcx>, cgu_name: Symbol, supports_\n         // TODO(antoyo): only set on x86 platforms.\n         context.add_command_line_option(\"-masm=intel\");\n         // TODO(antoyo): only add the following cli argument if the feature is supported.\n+        context.add_command_line_option(\"-msse2\");\n         context.add_command_line_option(\"-mavx2\");\n+        context.add_command_line_option(\"-msha\");\n+        context.add_command_line_option(\"-mpclmul\");\n         // FIXME(antoyo): the following causes an illegal instruction on vmovdqu64 in std_example on my CPU.\n         // Only add if the CPU supports it.\n         //context.add_command_line_option(\"-mavx512f\");"}, {"sha": "7634c649bc34327dd5c6fe7ee2b3ed90fc8e2aca", "filename": "src/intrinsic/llvm.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9bb797c2aef1a5175185f4c7d25fa23eaaeec326/src%2Fintrinsic%2Fllvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9bb797c2aef1a5175185f4c7d25fa23eaaeec326/src%2Fintrinsic%2Fllvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsic%2Fllvm.rs?ref=9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "patch": "@@ -16,6 +16,7 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.pshuf.b\" => \"__builtin_ia32_pshufb256\",\n             \"llvm.x86.avx2.pslli.d\" => \"__builtin_ia32_pslldi256\",\n             \"llvm.x86.avx2.psrli.d\" => \"__builtin_ia32_psrldi256\",\n+            \"llvm.x86.sse2.pslli.q\" => \"__builtin_ia32_psllqi128\",\n             \"llvm.x86.avx.vzeroupper\" => \"__builtin_ia32_vzeroupper\",\n             \"llvm.x86.avx2.vperm2i128\" => \"__builtin_ia32_permti256\",\n             \"llvm.x86.avx2.psrli.w\" => \"__builtin_ia32_psrlwi256\",\n@@ -28,6 +29,11 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.pabs.b\" => \"__builtin_ia32_pabsb256\",\n             \"llvm.x86.avx2.psrli.q\" => \"__builtin_ia32_psrlqi256\",\n             \"llvm.x86.sse41.pblendvb\" => \"__builtin_ia32_pblendvb128\",\n+            \"llvm.x86.sse41.pblendw\" => \"__builtin_ia32_pblendw128\",\n+            \"llvm.x86.sse42.crc32.32.8\" => \"__builtin_ia32_crc32qi\",\n+            \"llvm.x86.sse42.crc32.32.16\" => \"__builtin_ia32_crc32hi\",\n+            \"llvm.x86.sse42.crc32.32.32\" => \"__builtin_ia32_crc32si\",\n+            \"llvm.x86.sse42.crc32.64.64\" => \"__builtin_ia32_crc32di\",\n             \"llvm.x86.avx2.pavg.w\" => \"__builtin_ia32_pavgw256\",\n             \"llvm.x86.avx2.pavg.b\" => \"__builtin_ia32_pavgb256\",\n             \"llvm.x86.avx2.phadd.w\" => \"__builtin_ia32_phaddw256\",\n@@ -113,6 +119,14 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.psrlv.q\" => \"__builtin_ia32_psrlv2di\",\n             \"llvm.x86.avx2.psrlv.q.256\" => \"__builtin_ia32_psrlv4di\",\n             \"llvm.x86.sse.sqrt.ss\" => \"__builtin_ia32_sqrtss\",\n+            \"llvm.x86.pclmulqdq\" => \"__builtin_ia32_pclmulqdq128\",\n+            \"llvm.x86.sha1msg1\" => \"__builtin_ia32_sha1msg1\",\n+            \"llvm.x86.sha1msg2\" => \"__builtin_ia32_sha1msg2\",\n+            \"llvm.x86.sha1nexte\" => \"__builtin_ia32_sha1nexte\",\n+            \"llvm.x86.sha1rnds4\" => \"__builtin_ia32_sha1rnds4\",\n+            \"llvm.x86.sha256msg1\" => \"__builtin_ia32_sha256msg1\",\n+            \"llvm.x86.sha256msg2\" => \"__builtin_ia32_sha256msg2\",\n+            \"llvm.x86.sha256rnds2\" => \"__builtin_ia32_sha256rnds2\",\n \n             \"llvm.sqrt.v2f64\" => \"__builtin_ia32_sqrtpd\",\n             _ => unimplemented!(\"***** unsupported LLVM intrinsic {}\", name),"}]}