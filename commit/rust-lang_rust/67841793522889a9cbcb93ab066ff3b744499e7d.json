{"sha": "67841793522889a9cbcb93ab066ff3b744499e7d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3ODQxNzkzNTIyODg5YTljYmNiOTNhYjA2NmZmM2I3NDQ0OTllN2Q=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-02-14T05:19:06Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-02-14T05:19:06Z"}, "message": "Stop looping on error waiting for android test results\n\nThese seem to be causing iloops on the bots. Let's rather see the errors.", "tree": {"sha": "793c4490ca985059eb1497d2533d4d49b2b092f2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/793c4490ca985059eb1497d2533d4d49b2b092f2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67841793522889a9cbcb93ab066ff3b744499e7d", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67841793522889a9cbcb93ab066ff3b744499e7d", "html_url": "https://github.com/rust-lang/rust/commit/67841793522889a9cbcb93ab066ff3b744499e7d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67841793522889a9cbcb93ab066ff3b744499e7d/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a06ce0c91fac04c74a76b8fdcf89c19407af8e6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a06ce0c91fac04c74a76b8fdcf89c19407af8e6a", "html_url": "https://github.com/rust-lang/rust/commit/a06ce0c91fac04c74a76b8fdcf89c19407af8e6a"}], "stats": {"total": 18, "additions": 2, "deletions": 16}, "files": [{"sha": "81f086fdabd6121d40071265590d9268b1381ada", "filename": "src/etc/adb_run_wrapper.sh", "status": "modified", "additions": 2, "deletions": 16, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/67841793522889a9cbcb93ab066ff3b744499e7d/src%2Fetc%2Fadb_run_wrapper.sh", "raw_url": "https://github.com/rust-lang/rust/raw/67841793522889a9cbcb93ab066ff3b744499e7d/src%2Fetc%2Fadb_run_wrapper.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fadb_run_wrapper.sh?ref=67841793522889a9cbcb93ab066ff3b744499e7d", "patch": "@@ -2,9 +2,6 @@\n # usage : adb_run_wrapper [test dir - where test executables exist] [test executable]\n #\n \n-# Sometimes android shell produce exitcode \"1 : Text File Busy\"\n-# Retry after $WAIT seconds, expecting resource cleaned-up\n-WAIT=10\n TEST_PATH=$1\n BIN_PATH=/system/bin\n if [ -d \"$TEST_PATH\" ]\n@@ -16,20 +13,9 @@ then\n     then\n         shift\n \n-        L_RET=1\n-        L_COUNT=0\n         cd $TEST_PATH\n-        while [ $L_RET -eq 1 ]\n-        do\n-            TEST_EXEC_ENV=22 LD_LIBRARY_PATH=$TEST_PATH PATH=$BIN_PATH:$TEST_PATH $TEST_PATH/$RUN $@ 1>$TEST_PATH/$RUN.stdout 2>$TEST_PATH/$RUN.stderr\n-            L_RET=$?\n-            if [ $L_COUNT -gt 0 ]\n-            then\n-               /system/bin/sleep $WAIT\n-               /system/bin/sync\n-            fi\n-            L_COUNT=$((L_COUNT+1))\n-        done\n+        TEST_EXEC_ENV=22 LD_LIBRARY_PATH=$TEST_PATH PATH=$BIN_PATH:$TEST_PATH $TEST_PATH/$RUN $@ 1>$TEST_PATH/$RUN.stdout 2>$TEST_PATH/$RUN.stderr\n+        L_RET=$?\n \n         echo $L_RET > $TEST_PATH/$RUN.exitcode\n "}]}