{"sha": "d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "node_id": "C_kwDOAAsO6NoAKGQwZWE0NDBkZmU4NjU5ZGViZDAxMjQ2YjVmMmI4NDQ4YWJmYjFlOGI", "commit": {"author": {"name": "Preston From", "email": "prestonfrom@gmail.com", "date": "2022-07-30T04:52:46Z"}, "committer": {"name": "Preston From", "email": "prestonfrom@gmail.com", "date": "2022-08-02T06:20:44Z"}, "message": "Improve position named arguments lint underline and formatting names\n\nFor named arguments used as implicit position arguments, underline both\nthe opening curly brace and either:\n* if there is formatting, the next character (which will either be the\n  closing curl brace or the `:` denoting the start of formatting args)\n* if there is no formatting, the entire arg span (important if there is\n  whitespace like `{  }`)\n\nThis should make it more obvious where the named argument should be.\n\nAdditionally, in the lint message, emit the formatting argument names\nwithout a dollar sign to avoid potentially confusion.\n\nFixes #99907", "tree": {"sha": "eca2ca58896675fb4c513fe85a1f1167b6252d1d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eca2ca58896675fb4c513fe85a1f1167b6252d1d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "html_url": "https://github.com/rust-lang/rust/commit/d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/comments", "author": {"login": "PrestonFrom", "id": 12164367, "node_id": "MDQ6VXNlcjEyMTY0MzY3", "avatar_url": "https://avatars.githubusercontent.com/u/12164367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PrestonFrom", "html_url": "https://github.com/PrestonFrom", "followers_url": "https://api.github.com/users/PrestonFrom/followers", "following_url": "https://api.github.com/users/PrestonFrom/following{/other_user}", "gists_url": "https://api.github.com/users/PrestonFrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/PrestonFrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PrestonFrom/subscriptions", "organizations_url": "https://api.github.com/users/PrestonFrom/orgs", "repos_url": "https://api.github.com/users/PrestonFrom/repos", "events_url": "https://api.github.com/users/PrestonFrom/events{/privacy}", "received_events_url": "https://api.github.com/users/PrestonFrom/received_events", "type": "User", "site_admin": false}, "committer": {"login": "PrestonFrom", "id": 12164367, "node_id": "MDQ6VXNlcjEyMTY0MzY3", "avatar_url": "https://avatars.githubusercontent.com/u/12164367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PrestonFrom", "html_url": "https://github.com/PrestonFrom", "followers_url": "https://api.github.com/users/PrestonFrom/followers", "following_url": "https://api.github.com/users/PrestonFrom/following{/other_user}", "gists_url": "https://api.github.com/users/PrestonFrom/gists{/gist_id}", "starred_url": "https://api.github.com/users/PrestonFrom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PrestonFrom/subscriptions", "organizations_url": "https://api.github.com/users/PrestonFrom/orgs", "repos_url": "https://api.github.com/users/PrestonFrom/repos", "events_url": "https://api.github.com/users/PrestonFrom/events{/privacy}", "received_events_url": "https://api.github.com/users/PrestonFrom/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d5cd21a5d4d5325b1f1c9903d000d19e3703e2a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d5cd21a5d4d5325b1f1c9903d000d19e3703e2a", "html_url": "https://github.com/rust-lang/rust/commit/9d5cd21a5d4d5325b1f1c9903d000d19e3703e2a"}], "stats": {"total": 441, "additions": 305, "deletions": 136}, "files": [{"sha": "e6d514e76d2e5dfb73e339b100702d398348dc71", "filename": "compiler/rustc_builtin_macros/src/format.rs", "status": "modified", "additions": 61, "deletions": 25, "changes": 86, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_builtin_macros%2Fsrc%2Fformat.rs?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -16,6 +16,7 @@ use smallvec::SmallVec;\n \n use rustc_lint_defs::builtin::NAMED_ARGUMENTS_USED_POSITIONALLY;\n use rustc_lint_defs::{BufferedEarlyLint, BuiltinLintDiagnostics, LintId};\n+use rustc_parse_format::Count;\n use std::borrow::Cow;\n use std::collections::hash_map::Entry;\n \n@@ -57,26 +58,47 @@ struct PositionalNamedArg {\n     replacement: Symbol,\n     /// The span for the positional named argument (so the lint can point a message to it)\n     positional_named_arg_span: Span,\n+    has_formatting: bool,\n }\n \n impl PositionalNamedArg {\n-    /// Determines what span to replace with the name of the named argument\n-    fn get_span_to_replace(&self, cx: &Context<'_, '_>) -> Option<Span> {\n+    /// Determines:\n+    /// 1) span to be replaced with the name of the named argument and\n+    /// 2) span to be underlined for error messages\n+    fn get_positional_arg_spans(&self, cx: &Context<'_, '_>) -> (Option<Span>, Option<Span>) {\n         if let Some(inner_span) = &self.inner_span_to_replace {\n-            return Some(\n-                cx.fmtsp.from_inner(InnerSpan { start: inner_span.start, end: inner_span.end }),\n-            );\n+            let span =\n+                cx.fmtsp.from_inner(InnerSpan { start: inner_span.start, end: inner_span.end });\n+            (Some(span), Some(span))\n         } else if self.ty == PositionalNamedArgType::Arg {\n-            // In the case of a named argument whose position is implicit, there will not be a span\n-            // to replace. Instead, we insert the name after the `{`, which is the first character\n-            // of arg_span.\n-            return cx\n-                .arg_spans\n-                .get(self.cur_piece)\n-                .map(|arg_span| arg_span.with_lo(arg_span.lo() + BytePos(1)).shrink_to_lo());\n+            // In the case of a named argument whose position is implicit, if the argument *has*\n+            // formatting, there will not be a span to replace. Instead, we insert the name after\n+            // the `{`, which will be the first character of arg_span. If the argument does *not*\n+            // have formatting, there may or may not be a span to replace. This is because\n+            // whitespace is allowed in arguments without formatting (such as `format!(\"{  }\", 1);`)\n+            // but is not allowed in arguments with formatting (an error will be generated in cases\n+            // like `format!(\"{ :1.1}\", 1.0f32);`.\n+            // For the message span, if there is formatting, we want to use the opening `{` and the\n+            // next character, which will the `:` indicating the start of formatting. If there is\n+            // not any formatting, we want to underline the entire span.\n+            if self.has_formatting {\n+                cx.arg_spans.get(self.cur_piece).map_or((None, None), |arg_span| {\n+                    (\n+                        Some(arg_span.with_lo(arg_span.lo() + BytePos(1)).shrink_to_lo()),\n+                        Some(arg_span.with_hi(arg_span.lo() + BytePos(2))),\n+                    )\n+                })\n+            } else {\n+                cx.arg_spans.get(self.cur_piece).map_or((None, None), |arg_span| {\n+                    let replace_start = arg_span.lo() + BytePos(1);\n+                    let replace_end = arg_span.hi() - BytePos(1);\n+                    let to_replace = arg_span.with_lo(replace_start).with_hi(replace_end);\n+                    (Some(to_replace), Some(*arg_span))\n+                })\n+            }\n+        } else {\n+            (None, None)\n         }\n-\n-        None\n     }\n }\n \n@@ -117,10 +139,18 @@ impl PositionalNamedArgsLint {\n         cur_piece: usize,\n         inner_span_to_replace: Option<rustc_parse_format::InnerSpan>,\n         names: &FxHashMap<Symbol, (usize, Span)>,\n+        has_formatting: bool,\n     ) {\n         let start_of_named_args = total_args_length - names.len();\n         if current_positional_arg >= start_of_named_args {\n-            self.maybe_push(format_argument_index, ty, cur_piece, inner_span_to_replace, names)\n+            self.maybe_push(\n+                format_argument_index,\n+                ty,\n+                cur_piece,\n+                inner_span_to_replace,\n+                names,\n+                has_formatting,\n+            )\n         }\n     }\n \n@@ -134,6 +164,7 @@ impl PositionalNamedArgsLint {\n         cur_piece: usize,\n         inner_span_to_replace: Option<rustc_parse_format::InnerSpan>,\n         names: &FxHashMap<Symbol, (usize, Span)>,\n+        has_formatting: bool,\n     ) {\n         let named_arg = names\n             .iter()\n@@ -156,6 +187,7 @@ impl PositionalNamedArgsLint {\n                 inner_span_to_replace,\n                 replacement,\n                 positional_named_arg_span,\n+                has_formatting,\n             });\n         }\n     }\n@@ -414,6 +446,9 @@ impl<'a, 'b> Context<'a, 'b> {\n                     PositionalNamedArgType::Precision,\n                 );\n \n+                let has_precision = arg.format.precision != Count::CountImplied;\n+                let has_width = arg.format.width != Count::CountImplied;\n+\n                 // argument second, if it's an implicit positional parameter\n                 // it's written second, so it should come after width/precision.\n                 let pos = match arg.position {\n@@ -426,6 +461,7 @@ impl<'a, 'b> Context<'a, 'b> {\n                             self.curpiece,\n                             arg_end,\n                             &self.names,\n+                            has_precision || has_width,\n                         );\n \n                         Exact(i)\n@@ -439,6 +475,7 @@ impl<'a, 'b> Context<'a, 'b> {\n                             self.curpiece,\n                             None,\n                             &self.names,\n+                            has_precision || has_width,\n                         );\n                         Exact(i)\n                     }\n@@ -529,6 +566,7 @@ impl<'a, 'b> Context<'a, 'b> {\n                     self.curpiece,\n                     *inner_span,\n                     &self.names,\n+                    true,\n                 );\n                 self.verify_arg_type(Exact(i), Count);\n             }\n@@ -1150,24 +1188,22 @@ pub fn expand_format_args_nl<'cx>(\n \n fn create_lints_for_named_arguments_used_positionally(cx: &mut Context<'_, '_>) {\n     for named_arg in &cx.unused_names_lint.positional_named_args {\n-        let arg_span = named_arg.get_span_to_replace(cx);\n+        let (position_sp_to_replace, position_sp_for_msg) = named_arg.get_positional_arg_spans(cx);\n \n         let msg = format!(\"named argument `{}` is not used by name\", named_arg.replacement);\n-        let replacement = match named_arg.ty {\n-            PositionalNamedArgType::Arg => named_arg.replacement.to_string(),\n-            _ => named_arg.replacement.to_string() + \"$\",\n-        };\n \n         cx.ecx.buffered_early_lint.push(BufferedEarlyLint {\n             span: MultiSpan::from_span(named_arg.positional_named_arg_span),\n             msg: msg.clone(),\n             node_id: ast::CRATE_NODE_ID,\n             lint_id: LintId::of(&NAMED_ARGUMENTS_USED_POSITIONALLY),\n-            diagnostic: BuiltinLintDiagnostics::NamedArgumentUsedPositionally(\n-                arg_span,\n-                named_arg.positional_named_arg_span,\n-                replacement,\n-            ),\n+            diagnostic: BuiltinLintDiagnostics::NamedArgumentUsedPositionally {\n+                position_sp_to_replace,\n+                position_sp_for_msg,\n+                named_arg_sp: named_arg.positional_named_arg_span,\n+                named_arg_name: named_arg.replacement.to_string(),\n+                is_formatting_arg: named_arg.ty != PositionalNamedArgType::Arg,\n+            },\n         });\n     }\n }"}, {"sha": "b95fc341db656c0091b92020eb726ba7f4450bdd", "filename": "compiler/rustc_lint/src/context.rs", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -856,13 +856,18 @@ pub trait LintContext: Sized {\n                         Applicability::MachineApplicable,\n                     );\n                 },\n-                BuiltinLintDiagnostics::NamedArgumentUsedPositionally(positional_arg, named_arg, name) => {\n-                    db.span_label(named_arg, \"this named argument is only referred to by position in formatting string\");\n-                    if let Some(positional_arg) = positional_arg {\n-                        let msg = format!(\"this formatting argument uses named argument `{}` by position\", name);\n-                        db.span_label(positional_arg, msg);\n+                BuiltinLintDiagnostics::NamedArgumentUsedPositionally{ position_sp_to_replace, position_sp_for_msg, named_arg_sp, named_arg_name, is_formatting_arg} => {\n+                    db.span_label(named_arg_sp, \"this named argument is referred to by position in formatting string\");\n+                    if let Some(positional_arg_for_msg) = position_sp_for_msg {\n+                        let msg = format!(\"this formatting argument uses named argument `{}` by position\", named_arg_name);\n+                        db.span_label(positional_arg_for_msg, msg);\n+                    }\n+\n+                    if let Some(positional_arg_to_replace) = position_sp_to_replace {\n+                        let name = if is_formatting_arg { named_arg_name + \"$\" } else { named_arg_name };\n+\n                         db.span_suggestion_verbose(\n-                            positional_arg,\n+                            positional_arg_to_replace,\n                             \"use the named argument by name to avoid ambiguity\",\n                             name,\n                             Applicability::MaybeIncorrect,"}, {"sha": "6acbe97a7a118d13093351c045ccd54a90f41ac5", "filename": "compiler/rustc_lint_defs/src/lib.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Flib.rs?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -467,7 +467,19 @@ pub enum BuiltinLintDiagnostics {\n         /// If true, the lifetime will be fully elided.\n         use_span: Option<(Span, bool)>,\n     },\n-    NamedArgumentUsedPositionally(Option<Span>, Span, String),\n+    NamedArgumentUsedPositionally {\n+        /// Span where the named argument is used by position and will be replaced with the named\n+        /// argument name\n+        position_sp_to_replace: Option<Span>,\n+        /// Span where the named argument is used by position and is used for lint messages\n+        position_sp_for_msg: Option<Span>,\n+        /// Span where the named argument's name is (so we know where to put the warning message)\n+        named_arg_sp: Span,\n+        /// String containing the named arguments name\n+        named_arg_name: String,\n+        /// Indicates if the named argument is used as a width/precision for formatting\n+        is_formatting_arg: bool,\n+    },\n }\n \n /// Lints that are buffered up early on in the `Session` before the"}, {"sha": "c93451c761ae4f3619c0f8b75790b1c2e4da88a4", "filename": "src/test/ui/macros/issue-98466.stderr", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-98466.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-98466.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-98466.stderr?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -2,9 +2,9 @@ warning: named argument `_x` is not used by name\n   --> $DIR/issue-98466.rs:7:26\n    |\n LL |     println!(\"_x is {}\", _x = 5);\n-   |                      -   ^^ this named argument is only referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `_x` by position\n+   |                     --   ^^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `_x` by position\n    |\n    = note: `#[warn(named_arguments_used_positionally)]` on by default\n help: use the named argument by name to avoid ambiguity\n@@ -16,9 +16,9 @@ warning: named argument `y` is not used by name\n   --> $DIR/issue-98466.rs:10:26\n    |\n LL |     println!(\"_x is {}\", y = _x);\n-   |                      -   ^ this named argument is only referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `y` by position\n+   |                     --   ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `y` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -29,9 +29,9 @@ warning: named argument `y` is not used by name\n   --> $DIR/issue-98466.rs:13:83\n    |\n LL |     println!(\"first positional arg {}, second positional arg {}, _x is {}\", 1, 2, y = _x);\n-   |                                                                         -         ^ this named argument is only referred to by position in formatting string\n-   |                                                                         |\n-   |                                                                         this formatting argument uses named argument `y` by position\n+   |                                                                        --         ^ this named argument is referred to by position in formatting string\n+   |                                                                        |\n+   |                                                                        this formatting argument uses named argument `y` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -42,9 +42,9 @@ warning: named argument `_x` is not used by name\n   --> $DIR/issue-98466.rs:19:34\n    |\n LL |     let _f = format!(\"_x is {}\", _x = 5);\n-   |                              -   ^^ this named argument is only referred to by position in formatting string\n-   |                              |\n-   |                              this formatting argument uses named argument `_x` by position\n+   |                             --   ^^ this named argument is referred to by position in formatting string\n+   |                             |\n+   |                             this formatting argument uses named argument `_x` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -55,9 +55,9 @@ warning: named argument `y` is not used by name\n   --> $DIR/issue-98466.rs:22:34\n    |\n LL |     let _f = format!(\"_x is {}\", y = _x);\n-   |                              -   ^ this named argument is only referred to by position in formatting string\n-   |                              |\n-   |                              this formatting argument uses named argument `y` by position\n+   |                             --   ^ this named argument is referred to by position in formatting string\n+   |                             |\n+   |                             this formatting argument uses named argument `y` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -68,9 +68,9 @@ warning: named argument `y` is not used by name\n   --> $DIR/issue-98466.rs:25:91\n    |\n LL |     let _f = format!(\"first positional arg {}, second positional arg {}, _x is {}\", 1, 2, y = _x);\n-   |                                                                                 -         ^ this named argument is only referred to by position in formatting string\n-   |                                                                                 |\n-   |                                                                                 this formatting argument uses named argument `y` by position\n+   |                                                                                --         ^ this named argument is referred to by position in formatting string\n+   |                                                                                |\n+   |                                                                                this formatting argument uses named argument `y` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |"}, {"sha": "2bfeedd7d07370312c8e0fc1fa6bf1063d61283b", "filename": "src/test/ui/macros/issue-99265.stderr", "status": "modified", "additions": 86, "deletions": 86, "changes": 172, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -2,9 +2,9 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:5:24\n    |\n LL |     println!(\"{b} {}\", a=1, b=2);\n-   |                    -   ^ this named argument is only referred to by position in formatting string\n-   |                    |\n-   |                    this formatting argument uses named argument `a` by position\n+   |                   --   ^ this named argument is referred to by position in formatting string\n+   |                   |\n+   |                   this formatting argument uses named argument `a` by position\n    |\n    = note: `#[warn(named_arguments_used_positionally)]` on by default\n help: use the named argument by name to avoid ambiguity\n@@ -16,9 +16,9 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:9:35\n    |\n LL |     println!(\"{} {} {} {} {}\", 0, a=1, b=2, c=3, d=4);\n-   |                   -               ^ this named argument is only referred to by position in formatting string\n-   |                   |\n-   |                   this formatting argument uses named argument `a` by position\n+   |                  --               ^ this named argument is referred to by position in formatting string\n+   |                  |\n+   |                  this formatting argument uses named argument `a` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -29,9 +29,9 @@ warning: named argument `b` is not used by name\n   --> $DIR/issue-99265.rs:9:40\n    |\n LL |     println!(\"{} {} {} {} {}\", 0, a=1, b=2, c=3, d=4);\n-   |                      -                 ^ this named argument is only referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `b` by position\n+   |                     --                 ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `b` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -42,9 +42,9 @@ warning: named argument `c` is not used by name\n   --> $DIR/issue-99265.rs:9:45\n    |\n LL |     println!(\"{} {} {} {} {}\", 0, a=1, b=2, c=3, d=4);\n-   |                         -                   ^ this named argument is only referred to by position in formatting string\n-   |                         |\n-   |                         this formatting argument uses named argument `c` by position\n+   |                        --                   ^ this named argument is referred to by position in formatting string\n+   |                        |\n+   |                        this formatting argument uses named argument `c` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -55,9 +55,9 @@ warning: named argument `d` is not used by name\n   --> $DIR/issue-99265.rs:9:50\n    |\n LL |     println!(\"{} {} {} {} {}\", 0, a=1, b=2, c=3, d=4);\n-   |                            -                     ^ this named argument is only referred to by position in formatting string\n-   |                            |\n-   |                            this formatting argument uses named argument `d` by position\n+   |                           --                     ^ this named argument is referred to by position in formatting string\n+   |                           |\n+   |                           this formatting argument uses named argument `d` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -68,9 +68,9 @@ warning: named argument `width` is not used by name\n   --> $DIR/issue-99265.rs:19:35\n    |\n LL |     println!(\"Hello {:1$}!\", \"x\", width = 5);\n-   |                       --          ^^^^^ this named argument is only referred to by position in formatting string\n+   |                       --          ^^^^^ this named argument is referred to by position in formatting string\n    |                       |\n-   |                       this formatting argument uses named argument `width$` by position\n+   |                       this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -81,9 +81,9 @@ warning: named argument `width` is not used by name\n   --> $DIR/issue-99265.rs:23:46\n    |\n LL |     println!(\"Hello {:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                       --                     ^^^^^ this named argument is only referred to by position in formatting string\n+   |                       --                     ^^^^^ this named argument is referred to by position in formatting string\n    |                       |\n-   |                       this formatting argument uses named argument `width$` by position\n+   |                       this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -94,9 +94,9 @@ warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:23:57\n    |\n LL |     println!(\"Hello {:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                          --                             ^^^^^^^^^ this named argument is only referred to by position in formatting string\n+   |                          --                             ^^^^^^^^^ this named argument is referred to by position in formatting string\n    |                          |\n-   |                          this formatting argument uses named argument `precision$` by position\n+   |                          this formatting argument uses named argument `precision` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -107,9 +107,9 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:23:33\n    |\n LL |     println!(\"Hello {:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                      -          ^ this named argument is only referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `f` by position\n+   |                     --          ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -120,9 +120,9 @@ warning: named argument `width` is not used by name\n   --> $DIR/issue-99265.rs:31:47\n    |\n LL |     println!(\"Hello {0:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                        --                     ^^^^^ this named argument is only referred to by position in formatting string\n+   |                        --                     ^^^^^ this named argument is referred to by position in formatting string\n    |                        |\n-   |                        this formatting argument uses named argument `width$` by position\n+   |                        this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -133,9 +133,9 @@ warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:31:58\n    |\n LL |     println!(\"Hello {0:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                           --                             ^^^^^^^^^ this named argument is only referred to by position in formatting string\n+   |                           --                             ^^^^^^^^^ this named argument is referred to by position in formatting string\n    |                           |\n-   |                           this formatting argument uses named argument `precision$` by position\n+   |                           this formatting argument uses named argument `precision` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -146,7 +146,7 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:31:34\n    |\n LL |     println!(\"Hello {0:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                      -           ^ this named argument is only referred to by position in formatting string\n+   |                      -           ^ this named argument is referred to by position in formatting string\n    |                      |\n    |                      this formatting argument uses named argument `f` by position\n    |\n@@ -159,10 +159,10 @@ warning: named argument `width` is not used by name\n   --> $DIR/issue-99265.rs:52:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                       -- this formatting argument uses named argument `width$` by position\n+   |                       -- this formatting argument uses named argument `width` by position\n ...\n LL |         width = 5,\n-   |         ^^^^^ this named argument is only referred to by position in formatting string\n+   |         ^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -173,10 +173,10 @@ warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:54:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                          -- this formatting argument uses named argument `precision$` by position\n+   |                          -- this formatting argument uses named argument `precision` by position\n ...\n LL |         precision = 2,\n-   |         ^^^^^^^^^ this named argument is only referred to by position in formatting string\n+   |         ^^^^^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -190,7 +190,7 @@ LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n    |                     - this formatting argument uses named argument `f` by position\n ...\n LL |         f = 0.02f32,\n-   |         ^ this named argument is only referred to by position in formatting string\n+   |         ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -201,10 +201,10 @@ warning: named argument `width2` is not used by name\n   --> $DIR/issue-99265.rs:58:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                                 -- this formatting argument uses named argument `width2$` by position\n+   |                                 -- this formatting argument uses named argument `width2` by position\n ...\n LL |         width2 = 5,\n-   |         ^^^^^^ this named argument is only referred to by position in formatting string\n+   |         ^^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -215,10 +215,10 @@ warning: named argument `precision2` is not used by name\n   --> $DIR/issue-99265.rs:60:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                                    -- this formatting argument uses named argument `precision2$` by position\n+   |                                    -- this formatting argument uses named argument `precision2` by position\n ...\n LL |         precision2 = 2\n-   |         ^^^^^^^^^^ this named argument is only referred to by position in formatting string\n+   |         ^^^^^^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -232,7 +232,7 @@ LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n    |                               - this formatting argument uses named argument `g` by position\n ...\n LL |         g = 0.02f32,\n-   |         ^ this named argument is only referred to by position in formatting string\n+   |         ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -246,7 +246,7 @@ LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n    |                                          - this formatting argument uses named argument `f` by position\n ...\n LL |         f = 0.02f32,\n-   |         ^ this named argument is only referred to by position in formatting string\n+   |         ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -257,9 +257,9 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:64:31\n    |\n LL |     println!(\"Hello {:0.1}!\", f = 0.02f32);\n-   |                      -        ^ this named argument is only referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `f` by position\n+   |                     --        ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -270,7 +270,7 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:68:32\n    |\n LL |     println!(\"Hello {0:0.1}!\", f = 0.02f32);\n-   |                      -         ^ this named argument is only referred to by position in formatting string\n+   |                      -         ^ this named argument is referred to by position in formatting string\n    |                      |\n    |                      this formatting argument uses named argument `f` by position\n    |\n@@ -283,9 +283,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:79:23\n    |\n LL |     println!(\"{:0$}\", v = val);\n-   |                 --    ^ this named argument is only referred to by position in formatting string\n+   |                 --    ^ this named argument is referred to by position in formatting string\n    |                 |\n-   |                 this formatting argument uses named argument `v$` by position\n+   |                 this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -296,9 +296,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:79:23\n    |\n LL |     println!(\"{:0$}\", v = val);\n-   |                -      ^ this named argument is only referred to by position in formatting string\n-   |                |\n-   |                this formatting argument uses named argument `v` by position\n+   |               --      ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -309,9 +309,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:84:24\n    |\n LL |     println!(\"{0:0$}\", v = val);\n-   |                  --    ^ this named argument is only referred to by position in formatting string\n+   |                  --    ^ this named argument is referred to by position in formatting string\n    |                  |\n-   |                  this formatting argument uses named argument `v$` by position\n+   |                  this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -322,7 +322,7 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:84:24\n    |\n LL |     println!(\"{0:0$}\", v = val);\n-   |                -       ^ this named argument is only referred to by position in formatting string\n+   |                -       ^ this named argument is referred to by position in formatting string\n    |                |\n    |                this formatting argument uses named argument `v` by position\n    |\n@@ -335,9 +335,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n    |\n LL |     println!(\"{:0$.0$}\", v = val);\n-   |                 --       ^ this named argument is only referred to by position in formatting string\n+   |                 --       ^ this named argument is referred to by position in formatting string\n    |                 |\n-   |                 this formatting argument uses named argument `v$` by position\n+   |                 this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -348,9 +348,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n    |\n LL |     println!(\"{:0$.0$}\", v = val);\n-   |                    --    ^ this named argument is only referred to by position in formatting string\n+   |                    --    ^ this named argument is referred to by position in formatting string\n    |                    |\n-   |                    this formatting argument uses named argument `v$` by position\n+   |                    this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -361,9 +361,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n    |\n LL |     println!(\"{:0$.0$}\", v = val);\n-   |                -         ^ this named argument is only referred to by position in formatting string\n-   |                |\n-   |                this formatting argument uses named argument `v` by position\n+   |               --         ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -374,9 +374,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n    |\n LL |     println!(\"{0:0$.0$}\", v = val);\n-   |                  --       ^ this named argument is only referred to by position in formatting string\n+   |                  --       ^ this named argument is referred to by position in formatting string\n    |                  |\n-   |                  this formatting argument uses named argument `v$` by position\n+   |                  this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -387,9 +387,9 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n    |\n LL |     println!(\"{0:0$.0$}\", v = val);\n-   |                     --    ^ this named argument is only referred to by position in formatting string\n+   |                     --    ^ this named argument is referred to by position in formatting string\n    |                     |\n-   |                     this formatting argument uses named argument `v$` by position\n+   |                     this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -400,7 +400,7 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n    |\n LL |     println!(\"{0:0$.0$}\", v = val);\n-   |                -          ^ this named argument is only referred to by position in formatting string\n+   |                -          ^ this named argument is referred to by position in formatting string\n    |                |\n    |                this formatting argument uses named argument `v` by position\n    |\n@@ -413,9 +413,9 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:104:28\n    |\n LL |     println!(\"{} {a} {0}\", a = 1);\n-   |                -           ^ this named argument is only referred to by position in formatting string\n-   |                |\n-   |                this formatting argument uses named argument `a` by position\n+   |               --           ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `a` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -426,7 +426,7 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:104:28\n    |\n LL |     println!(\"{} {a} {0}\", a = 1);\n-   |                       -    ^ this named argument is only referred to by position in formatting string\n+   |                       -    ^ this named argument is referred to by position in formatting string\n    |                       |\n    |                       this formatting argument uses named argument `a` by position\n    |\n@@ -439,10 +439,10 @@ warning: named argument `b` is not used by name\n   --> $DIR/issue-99265.rs:115:23\n    |\n LL |                 {:1$.2$}\",\n-   |                   -- this formatting argument uses named argument `b$` by position\n+   |                   -- this formatting argument uses named argument `b` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                       ^ this named argument is only referred to by position in formatting string\n+   |                       ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -453,10 +453,10 @@ warning: named argument `c` is not used by name\n   --> $DIR/issue-99265.rs:115:30\n    |\n LL |                 {:1$.2$}\",\n-   |                      -- this formatting argument uses named argument `c$` by position\n+   |                      -- this formatting argument uses named argument `c` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                              ^ this named argument is only referred to by position in formatting string\n+   |                              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -467,10 +467,10 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:115:14\n    |\n LL |                 {:1$.2$}\",\n-   |                  - this formatting argument uses named argument `a` by position\n+   |                 -- this formatting argument uses named argument `a` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |              ^ this named argument is only referred to by position in formatting string\n+   |              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -481,10 +481,10 @@ warning: named argument `b` is not used by name\n   --> $DIR/issue-99265.rs:126:23\n    |\n LL |                 {0:1$.2$}\",\n-   |                    -- this formatting argument uses named argument `b$` by position\n+   |                    -- this formatting argument uses named argument `b` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                       ^ this named argument is only referred to by position in formatting string\n+   |                       ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -495,10 +495,10 @@ warning: named argument `c` is not used by name\n   --> $DIR/issue-99265.rs:126:30\n    |\n LL |                 {0:1$.2$}\",\n-   |                       -- this formatting argument uses named argument `c$` by position\n+   |                       -- this formatting argument uses named argument `c` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                              ^ this named argument is only referred to by position in formatting string\n+   |                              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -512,7 +512,7 @@ LL |                 {0:1$.2$}\",\n    |                  - this formatting argument uses named argument `a` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |              ^ this named argument is only referred to by position in formatting string\n+   |              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -523,9 +523,9 @@ warning: named argument `width` is not used by name\n   --> $DIR/issue-99265.rs:132:39\n    |\n LL |     println!(\"{{{:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                   --                  ^^^^^ this named argument is only referred to by position in formatting string\n+   |                   --                  ^^^^^ this named argument is referred to by position in formatting string\n    |                   |\n-   |                   this formatting argument uses named argument `width$` by position\n+   |                   this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -536,9 +536,9 @@ warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:132:50\n    |\n LL |     println!(\"{{{:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                      --                          ^^^^^^^^^ this named argument is only referred to by position in formatting string\n+   |                      --                          ^^^^^^^^^ this named argument is referred to by position in formatting string\n    |                      |\n-   |                      this formatting argument uses named argument `precision$` by position\n+   |                      this formatting argument uses named argument `precision` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n@@ -549,9 +549,9 @@ warning: named argument `x` is not used by name\n   --> $DIR/issue-99265.rs:132:30\n    |\n LL |     println!(\"{{{:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                  -           ^ this named argument is only referred to by position in formatting string\n-   |                  |\n-   |                  this formatting argument uses named argument `x` by position\n+   |                 --           ^ this named argument is referred to by position in formatting string\n+   |                 |\n+   |                 this formatting argument uses named argument `x` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |"}, {"sha": "9e0e1b80ee59fbb24fd3a2755a06ec54bcf74a0d", "filename": "src/test/ui/macros/issue-99907.fixed", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.fixed?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -0,0 +1,24 @@\n+// check-pass\n+// run-rustfix\n+\n+fn main() {\n+    println!(\"Hello {f:.1}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {f:1.1}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {f}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {f}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {f}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+}"}, {"sha": "eebcfc2efecc9d097b40db2c16604760b538af8e", "filename": "src/test/ui/macros/issue-99907.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.rs?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -0,0 +1,24 @@\n+// check-pass\n+// run-rustfix\n+\n+fn main() {\n+    println!(\"Hello {:.1}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {:1.1}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {}!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello { }!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+\n+    println!(\"Hello {  }!\", f = 0.02f32);\n+    //~^ WARNING named argument `f` is not used by name [named_arguments_used_positionally]\n+    //~| HELP use the named argument by name to avoid ambiguity\n+}"}, {"sha": "4786ce003b4c2462d7fce35b4047632af1e73a09", "filename": "src/test/ui/macros/issue-99907.stderr", "status": "added", "additions": 68, "deletions": 0, "changes": 68, "blob_url": "https://github.com/rust-lang/rust/blob/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d0ea440dfe8659debd01246b5f2b8448abfb1e8b/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr?ref=d0ea440dfe8659debd01246b5f2b8448abfb1e8b", "patch": "@@ -0,0 +1,68 @@\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99907.rs:5:30\n+   |\n+LL |     println!(\"Hello {:.1}!\", f = 0.02f32);\n+   |                     --       ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n+   |\n+   = note: `#[warn(named_arguments_used_positionally)]` on by default\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"Hello {f:.1}!\", f = 0.02f32);\n+   |                      +\n+\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99907.rs:9:31\n+   |\n+LL |     println!(\"Hello {:1.1}!\", f = 0.02f32);\n+   |                     --        ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n+   |\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"Hello {f:1.1}!\", f = 0.02f32);\n+   |                      +\n+\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99907.rs:13:27\n+   |\n+LL |     println!(\"Hello {}!\", f = 0.02f32);\n+   |                     --    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n+   |\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"Hello {f}!\", f = 0.02f32);\n+   |                      +\n+\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99907.rs:17:28\n+   |\n+LL |     println!(\"Hello { }!\", f = 0.02f32);\n+   |                     ---    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n+   |\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"Hello {f}!\", f = 0.02f32);\n+   |                      +\n+\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99907.rs:21:29\n+   |\n+LL |     println!(\"Hello {  }!\", f = 0.02f32);\n+   |                     ----    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n+   |\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"Hello {f}!\", f = 0.02f32);\n+   |                      +\n+\n+warning: 5 warnings emitted\n+"}]}