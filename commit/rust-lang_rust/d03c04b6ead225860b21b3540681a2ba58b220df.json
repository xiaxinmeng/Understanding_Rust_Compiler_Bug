{"sha": "d03c04b6ead225860b21b3540681a2ba58b220df", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwM2MwNGI2ZWFkMjI1ODYwYjIxYjM1NDA2ODFhMmJhNThiMjIwZGY=", "commit": {"author": {"name": "Paul Stansifer", "email": "paul.stansifer@gmail.com", "date": "2012-06-07T22:33:59Z"}, "committer": {"name": "Paul Stansifer", "email": "paul.stansifer@gmail.com", "date": "2012-06-15T19:41:41Z"}, "message": "Make tt lexers duplicatible.", "tree": {"sha": "6f019252dc26b782c89d11312c85f7b93c433acb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f019252dc26b782c89d11312c85f7b93c433acb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d03c04b6ead225860b21b3540681a2ba58b220df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d03c04b6ead225860b21b3540681a2ba58b220df", "html_url": "https://github.com/rust-lang/rust/commit/d03c04b6ead225860b21b3540681a2ba58b220df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d03c04b6ead225860b21b3540681a2ba58b220df/comments", "author": {"login": "paulstansifer", "id": 1431, "node_id": "MDQ6VXNlcjE0MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulstansifer", "html_url": "https://github.com/paulstansifer", "followers_url": "https://api.github.com/users/paulstansifer/followers", "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}", "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions", "organizations_url": "https://api.github.com/users/paulstansifer/orgs", "repos_url": "https://api.github.com/users/paulstansifer/repos", "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}", "received_events_url": "https://api.github.com/users/paulstansifer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "paulstansifer", "id": 1431, "node_id": "MDQ6VXNlcjE0MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulstansifer", "html_url": "https://github.com/paulstansifer", "followers_url": "https://api.github.com/users/paulstansifer/followers", "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}", "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions", "organizations_url": "https://api.github.com/users/paulstansifer/orgs", "repos_url": "https://api.github.com/users/paulstansifer/repos", "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}", "received_events_url": "https://api.github.com/users/paulstansifer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f8be7dcbb7c5e507051210839e8b58e95d32887", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f8be7dcbb7c5e507051210839e8b58e95d32887", "html_url": "https://github.com/rust-lang/rust/commit/2f8be7dcbb7c5e507051210839e8b58e95d32887"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "f0a9d7dd3020ad1e541c20de6246afdd026d2eba", "filename": "src/libsyntax/parse/lexer.rs", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/d03c04b6ead225860b21b3540681a2ba58b220df/src%2Flibsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d03c04b6ead225860b21b3540681a2ba58b220df/src%2Flibsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer.rs?ref=d03c04b6ead225860b21b3540681a2ba58b220df", "patch": "@@ -4,7 +4,7 @@ import diagnostic;\n import ast::{tt_delim,tt_flat};\n \n export reader, string_reader, new_string_reader, is_whitespace;\n-export tt_reader,  new_tt_reader;\n+export tt_reader,  new_tt_reader, dup_tt_reader;\n export nextch, is_eof, bump, get_str_from;\n export string_reader_as_reader, tt_reader_as_reader;\n \n@@ -49,6 +49,22 @@ fn new_tt_reader(span_diagnostic: diagnostic::span_handler,\n     ret r;\n }\n \n+pure fn dup_tt_frame(&&f: tt_frame) -> tt_frame {\n+    @{readme: f.readme, mut idx: f.idx,\n+      up: alt f.up {\n+        tt_frame_up(o_f) {\n+          tt_frame_up(option::map(o_f, dup_tt_frame))\n+        }\n+      }\n+     }\n+}\n+\n+pure fn dup_tt_reader(&&r: tt_reader) -> tt_reader {\n+    @{span_diagnostic: r.span_diagnostic, interner: r.interner,\n+      mut cur: dup_tt_frame(r.cur),\n+      mut cur_tok: r.cur_tok, mut cur_chpos: r.cur_chpos}\n+}\n+\n type string_reader = @{\n     span_diagnostic: diagnostic::span_handler,\n     src: @str,"}]}