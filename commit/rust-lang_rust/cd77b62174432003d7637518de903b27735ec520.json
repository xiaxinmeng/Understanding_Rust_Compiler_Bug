{"sha": "cd77b62174432003d7637518de903b27735ec520", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNkNzdiNjIxNzQ0MzIwMDNkNzYzNzUxOGRlOTAzYjI3NzM1ZWM1MjA=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-08-28T08:24:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-28T08:24:06Z"}, "message": "Rollup merge of #75972 - JulianKnodt:i70381, r=rollup\n\nFix ICE due to carriage return w/ multibyte char\n\nBased off of this [commit](https://github.com/kfitch/rust/commit/972560b83f80e1219b5735ff3d751c034115b08e)\n\nFixes #70381\n\nCC: @Dylan-DPC", "tree": {"sha": "2a4f5b47d4a11db5ff5c9e9c7730941dea0cded3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a4f5b47d4a11db5ff5c9e9c7730941dea0cded3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd77b62174432003d7637518de903b27735ec520", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfSL8mCRBK7hj4Ov3rIwAAdHIIAIC9uV66zBaH8a/kIXYlxO2Z\npcBXr977xHUKMjTDEDHRw96YKtwTDaNvxqD5/I3CX8sukHXOVXgIF1pk3xk8RtmC\nEc5uZyFFEq20l6oCtDcyqHQ0WvbYL0LFsAVv2TtEqz/sSygghNzDDiBuEvB7sCE5\nVeQkldQUXGYWdI5zZn6dOEomOEzGFdm9CbZ1PXWQHQ2eQkQsz0t0SsF8T8/C6fVN\nAlYgd6NLop5p6XBNKTBqL6lFCbq5+0PwHT2IQsgpSUF5sHZbqSJu03f4iqv4X7Ju\nt3KPYN4OyTYUwM7vOp54BEEzqj4HwsFOw8PzXodPLe5Z/WrmylyY3HG3JOvk6/4=\n=RGIz\n-----END PGP SIGNATURE-----\n", "payload": "tree 2a4f5b47d4a11db5ff5c9e9c7730941dea0cded3\nparent 0f1ffa85d1d97375eac16c8b25d0c5abf7a3b690\nparent ed9df28655607a17f01714b67930bdddba14fb26\nauthor Pietro Albini <pietro@pietroalbini.org> 1598603046 +0200\ncommitter GitHub <noreply@github.com> 1598603046 +0200\n\nRollup merge of #75972 - JulianKnodt:i70381, r=rollup\n\nFix ICE due to carriage return w/ multibyte char\n\nBased off of this [commit](https://github.com/kfitch/rust/commit/972560b83f80e1219b5735ff3d751c034115b08e)\n\nFixes #70381\n\nCC: @Dylan-DPC\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd77b62174432003d7637518de903b27735ec520", "html_url": "https://github.com/rust-lang/rust/commit/cd77b62174432003d7637518de903b27735ec520", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd77b62174432003d7637518de903b27735ec520/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f1ffa85d1d97375eac16c8b25d0c5abf7a3b690", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f1ffa85d1d97375eac16c8b25d0c5abf7a3b690", "html_url": "https://github.com/rust-lang/rust/commit/0f1ffa85d1d97375eac16c8b25d0c5abf7a3b690"}, {"sha": "ed9df28655607a17f01714b67930bdddba14fb26", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed9df28655607a17f01714b67930bdddba14fb26", "html_url": "https://github.com/rust-lang/rust/commit/ed9df28655607a17f01714b67930bdddba14fb26"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "e07b8b86aef8e45cb84879be4841a8b13f04bc2b", "filename": "src/librustc_parse_format/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cd77b62174432003d7637518de903b27735ec520/src%2Flibrustc_parse_format%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd77b62174432003d7637518de903b27735ec520/src%2Flibrustc_parse_format%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse_format%2Flib.rs?ref=cd77b62174432003d7637518de903b27735ec520", "patch": "@@ -760,7 +760,7 @@ fn find_skips_from_snippet(\n                 (' ' | '\\n' | '\\t', _) if eat_ws => {\n                     skips.push(pos);\n                 }\n-                ('\\\\', Some((next_pos, 'n' | 't' | '0' | '\\\\' | '\\'' | '\\\"'))) => {\n+                ('\\\\', Some((next_pos, 'n' | 't' | 'r' | '0' | '\\\\' | '\\'' | '\\\"'))) => {\n                     skips.push(*next_pos);\n                     let _ = s.next();\n                 }"}, {"sha": "3df8277b87372fdf62a969843ce3791891b3d187", "filename": "src/test/ui/issues/issue-70381.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/cd77b62174432003d7637518de903b27735ec520/src%2Ftest%2Fui%2Fissues%2Fissue-70381.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd77b62174432003d7637518de903b27735ec520/src%2Ftest%2Fui%2Fissues%2Fissue-70381.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-70381.rs?ref=cd77b62174432003d7637518de903b27735ec520", "patch": "@@ -0,0 +1,6 @@\n+// Test that multi-byte unicode characters with missing parameters do not ICE.\n+\n+fn main() {\n+  println!(\"\\r\u00a1{}\")\n+  //~^ ERROR 1 positional argument in format string\n+}"}, {"sha": "96b8e656991c2abef2b9e0e3f3b7ed1ae5feb6ea", "filename": "src/test/ui/issues/issue-70381.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cd77b62174432003d7637518de903b27735ec520/src%2Ftest%2Fui%2Fissues%2Fissue-70381.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cd77b62174432003d7637518de903b27735ec520/src%2Ftest%2Fui%2Fissues%2Fissue-70381.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-70381.stderr?ref=cd77b62174432003d7637518de903b27735ec520", "patch": "@@ -0,0 +1,8 @@\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/issue-70381.rs:4:16\n+   |\n+LL |   println!(\"\\r\u00a1{}\")\n+   |                ^^\n+\n+error: aborting due to previous error\n+"}]}