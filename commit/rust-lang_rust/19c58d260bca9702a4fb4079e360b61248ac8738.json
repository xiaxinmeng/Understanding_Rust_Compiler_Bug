{"sha": "19c58d260bca9702a4fb4079e360b61248ac8738", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5YzU4ZDI2MGJjYTk3MDJhNGZiNDA3OWUzNjBiNjEyNDhhYzg3Mzg=", "commit": {"author": {"name": "Phil Hansch", "email": "dev@phansch.net", "date": "2019-10-04T06:08:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-10-04T06:08:59Z"}, "message": "Rollup merge of #4614 - HMPerson1:abs_cast_unsigned, r=flip1995\n\nAllow casts from the result of `abs` to unsigned\n\nchangelog: Allow casts from the result of `abs` to unsigned in `cast_sign_loss`\n\nFixes #4605", "tree": {"sha": "a2d02733357a4e1603e357df74f4a46f38be833f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2d02733357a4e1603e357df74f4a46f38be833f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19c58d260bca9702a4fb4079e360b61248ac8738", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdluH7CRBK7hj4Ov3rIwAAdHIIADCWH9oB9aZB976Ez019/eCm\nPvpea6SwsXon4oI8eYlT1URns2l3Xy0P3M5+71B3MsLNSfM+ewjSj2di/Zk80E1Y\nF18O+iTQWNTRC3+8bk5kreIiX+fbTu6E5xv+Ub5e3PRdG4Tr8rxF2ZBGPTFjwaQX\nMTlsjBo4hEaJnq5CKCvK696zYMVz0+z9DqsHyseWdmd6mMJXXz99x4atruzfRVQ1\n0DX98ZoXnAZZ8VgEfFhSh1ZPO+AW46e3Jr0rtyXTmu+B4NOI9BSCf+LMK7iKaWfr\nQS0D+xU9s7Hg945KK+Pq+xk3xMbgTWtvdEBqVowBZyN2eXWnpDzKCeu8qBp8FBc=\n=6lkz\n-----END PGP SIGNATURE-----\n", "payload": "tree a2d02733357a4e1603e357df74f4a46f38be833f\nparent 8d2912ec00a42698e44db924495bcc30a090ee2b\nparent 0e1dd65c14743b5b58c546ccaadc209f390af7df\nauthor Phil Hansch <dev@phansch.net> 1570169339 +0200\ncommitter GitHub <noreply@github.com> 1570169339 +0200\n\nRollup merge of #4614 - HMPerson1:abs_cast_unsigned, r=flip1995\n\nAllow casts from the result of `abs` to unsigned\n\nchangelog: Allow casts from the result of `abs` to unsigned in `cast_sign_loss`\n\nFixes #4605\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19c58d260bca9702a4fb4079e360b61248ac8738", "html_url": "https://github.com/rust-lang/rust/commit/19c58d260bca9702a4fb4079e360b61248ac8738", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19c58d260bca9702a4fb4079e360b61248ac8738/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d2912ec00a42698e44db924495bcc30a090ee2b", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d2912ec00a42698e44db924495bcc30a090ee2b", "html_url": "https://github.com/rust-lang/rust/commit/8d2912ec00a42698e44db924495bcc30a090ee2b"}, {"sha": "0e1dd65c14743b5b58c546ccaadc209f390af7df", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e1dd65c14743b5b58c546ccaadc209f390af7df", "html_url": "https://github.com/rust-lang/rust/commit/0e1dd65c14743b5b58c546ccaadc209f390af7df"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "133001e35f77ec0a1fbdba2ea6660f790b48bca2", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/19c58d260bca9702a4fb4079e360b61248ac8738/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19c58d260bca9702a4fb4079e360b61248ac8738/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=19c58d260bca9702a4fb4079e360b61248ac8738", "patch": "@@ -986,6 +986,17 @@ fn check_loss_of_sign(cx: &LateContext<'_, '_>, expr: &Expr, op: &Expr, cast_fro\n         }\n     }\n \n+    // don't lint for the result of `abs`\n+    // `abs` is an inherent impl of `i{N}`, so a method call with ident `abs` will always\n+    // resolve to that spesific method\n+    if_chain! {\n+        if let ExprKind::MethodCall(ref path, _, _) = op.kind;\n+        if path.ident.name.as_str() == \"abs\";\n+        then {\n+            return\n+        }\n+    }\n+\n     span_lint(\n         cx,\n         CAST_SIGN_LOSS,"}, {"sha": "80329a52c2d0d90dd0e768cbf38351fd1b57f9af", "filename": "tests/ui/cast.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/19c58d260bca9702a4fb4079e360b61248ac8738/tests%2Fui%2Fcast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19c58d260bca9702a4fb4079e360b61248ac8738/tests%2Fui%2Fcast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast.rs?ref=19c58d260bca9702a4fb4079e360b61248ac8738", "patch": "@@ -42,4 +42,9 @@ fn main() {\n     i32::max_value() as u32;\n     i64::max_value() as u64;\n     i128::max_value() as u128;\n+    (-1i8).abs() as u8;\n+    (-1i16).abs() as u16;\n+    (-1i32).abs() as u32;\n+    (-1i64).abs() as u64;\n+    (-1isize).abs() as usize;\n }"}]}