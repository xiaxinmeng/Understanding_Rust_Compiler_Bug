{"sha": "23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "node_id": "C_kwDOAAsO6NoAKDIzZTYwYzE0ZTJlM2VmMDI1N2FjNjM1NmI5MzJmYTE3Yjg5Y2JmNGU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-01T17:41:56Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-01T17:41:56Z"}, "message": "Auto merge of #14073 - lnicola:zip, r=lnicola\n\nminor: Bump `zip` to avoid `time-macros`\n\nThis fixes the compile time regression in #13876 and sneaks in two typo fixes spotted by `@cuishuang` (sorry for not preserving the commit attribution, but it's a little hard to manage it across repositories).", "tree": {"sha": "5f90a96bff68aa79a64b73be2d711e99ef0ddef5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5f90a96bff68aa79a64b73be2d711e99ef0ddef5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "html_url": "https://github.com/rust-lang/rust/commit/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7acc434f4659da56e8b5d05dd54e09a650b9a422", "url": "https://api.github.com/repos/rust-lang/rust/commits/7acc434f4659da56e8b5d05dd54e09a650b9a422", "html_url": "https://github.com/rust-lang/rust/commit/7acc434f4659da56e8b5d05dd54e09a650b9a422"}, {"sha": "ff340f9c211c4788bd993f6db7e9f10c23560714", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff340f9c211c4788bd993f6db7e9f10c23560714", "html_url": "https://github.com/rust-lang/rust/commit/ff340f9c211c4788bd993f6db7e9f10c23560714"}], "stats": {"total": 30, "additions": 13, "deletions": 17}, "files": [{"sha": "c1f146411b23238c94ef34dae4f5270f2d19b877", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 13, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "patch": "@@ -1832,10 +1832,8 @@ version = \"0.3.17\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"a561bf4617eebd33bca6434b988f39ed798e527f51a1e797d0ee4f61c0a38376\"\n dependencies = [\n- \"itoa\",\n  \"serde\",\n  \"time-core\",\n- \"time-macros\",\n ]\n \n [[package]]\n@@ -1844,15 +1842,6 @@ version = \"0.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"2e153e1f1acaef8acc537e68b44906d2db6436e2b35ac2c6b42640fff91f00fd\"\n \n-[[package]]\n-name = \"time-macros\"\n-version = \"0.2.6\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d967f99f534ca7e495c575c62638eebc2898a8c84c119b89e250477bc4ba16b2\"\n-dependencies = [\n- \"time-core\",\n-]\n-\n [[package]]\n name = \"tinyvec\"\n version = \"1.6.0\"\n@@ -2205,6 +2194,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"anyhow\",\n  \"flate2\",\n+ \"time\",\n  \"write-json\",\n  \"xflags\",\n  \"xshell\",\n@@ -2213,9 +2203,9 @@ dependencies = [\n \n [[package]]\n name = \"zip\"\n-version = \"0.6.3\"\n+version = \"0.6.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"537ce7411d25e54e8ae21a7ce0b15840e7bfcff15b51d697ec3266cc76bdf080\"\n+checksum = \"0445d0fbc924bb93539b4316c11afb121ea39296f99a3c4c9edad09e3658cdef\"\n dependencies = [\n  \"byteorder\",\n  \"crc32fast\","}, {"sha": "a64ba7510e7f112ed4792285c9849e3797264d86", "filename": "crates/proc-macro-api/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/crates%2Fproc-macro-api%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/crates%2Fproc-macro-api%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproc-macro-api%2Fsrc%2Flib.rs?ref=23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "patch": "@@ -71,7 +71,7 @@ impl MacroDylib {\n \n /// A handle to a specific macro (a `#[proc_macro]` annotated function).\n ///\n-/// It exists withing a context of a specific [`ProcMacroProcess`] -- currently\n+/// It exists within a context of a specific [`ProcMacroProcess`] -- currently\n /// we share a single expander process for all macros.\n #[derive(Debug, Clone)]\n pub struct ProcMacro {"}, {"sha": "e7fc3d970bfff31c15c506e09608d4ae8e0c440f", "filename": "crates/profile/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/crates%2Fprofile%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/crates%2Fprofile%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fprofile%2Fsrc%2Flib.rs?ref=23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "patch": "@@ -26,7 +26,7 @@ pub use countme::Count;\n \n thread_local!(static IN_SCOPE: RefCell<bool> = RefCell::new(false));\n \n-/// Allows to check if the current code is withing some dynamic scope, can be\n+/// Allows to check if the current code is within some dynamic scope, can be\n /// useful during debugging to figure out why a function is called.\n pub struct Scope {\n     prev: bool,"}, {"sha": "b4b294c3099fa2a6807ebae125de1969ac8dc603", "filename": "xtask/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/xtask%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/xtask%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2FCargo.toml?ref=23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "patch": "@@ -12,5 +12,6 @@ flate2 = \"1.0.24\"\n write-json = \"0.1.2\"\n xshell = \"0.2.2\"\n xflags = \"0.3.0\"\n+time = { version = \"0.3\", default-features = false }\n zip = { version = \"0.6\", default-features = false, features = [\"deflate\", \"time\"] }\n # Avoid adding more dependencies to this crate"}, {"sha": "5a03c71b28a98f98e7ce3e729ac97b7fc8987b0d", "filename": "xtask/src/dist.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/xtask%2Fsrc%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23e60c14e2e3ef0257ac6356b932fa17b89cbf4e/xtask%2Fsrc%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fdist.rs?ref=23e60c14e2e3ef0257ac6356b932fa17b89cbf4e", "patch": "@@ -6,6 +6,7 @@ use std::{\n };\n \n use flate2::{write::GzEncoder, Compression};\n+use time::OffsetDateTime;\n use xshell::{cmd, Shell};\n use zip::{write::FileOptions, DateTime, ZipWriter};\n \n@@ -112,7 +113,8 @@ fn zip(src_path: &Path, symbols_path: Option<&PathBuf>, dest_path: &Path) -> any\n         src_path.file_name().unwrap().to_str().unwrap(),\n         FileOptions::default()\n             .last_modified_time(\n-                DateTime::from_time(std::fs::metadata(src_path)?.modified()?.into()).unwrap(),\n+                DateTime::try_from(OffsetDateTime::from(std::fs::metadata(src_path)?.modified()?))\n+                    .unwrap(),\n             )\n             .unix_permissions(0o755)\n             .compression_method(zip::CompressionMethod::Deflated)\n@@ -125,7 +127,10 @@ fn zip(src_path: &Path, symbols_path: Option<&PathBuf>, dest_path: &Path) -> any\n             symbols_path.file_name().unwrap().to_str().unwrap(),\n             FileOptions::default()\n                 .last_modified_time(\n-                    DateTime::from_time(std::fs::metadata(src_path)?.modified()?.into()).unwrap(),\n+                    DateTime::try_from(OffsetDateTime::from(\n+                        std::fs::metadata(src_path)?.modified()?,\n+                    ))\n+                    .unwrap(),\n                 )\n                 .compression_method(zip::CompressionMethod::Deflated)\n                 .compression_level(Some(9)),"}]}