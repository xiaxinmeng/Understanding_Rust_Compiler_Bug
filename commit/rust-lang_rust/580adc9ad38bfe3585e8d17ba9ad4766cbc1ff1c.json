{"sha": "580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4MGFkYzlhZDM4YmZlMzU4NWU4ZDE3YmE5YWQ0NzY2Y2JjMWZmMWM=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-10-08T10:45:41Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2013-10-08T12:45:02Z"}, "message": "Add bindings for start and ends of keyword ranges; use bindings in match arms.", "tree": {"sha": "7ee3733ac99c9b75db127eb71ba651de2c962211", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ee3733ac99c9b75db127eb71ba651de2c962211"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c", "html_url": "https://github.com/rust-lang/rust/commit/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9196290af3934481bd413e11057725f248fd104", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9196290af3934481bd413e11057725f248fd104", "html_url": "https://github.com/rust-lang/rust/commit/c9196290af3934481bd413e11057725f248fd104"}], "stats": {"total": 51, "additions": 40, "deletions": 11}, "files": [{"sha": "f949524a7009ca3adc0df6137266ad189dc86fa6", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 40, "deletions": 11, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=580adc9ad38bfe3585e8d17ba9ad4766cbc1ff1c", "patch": "@@ -326,7 +326,7 @@ pub mod special_idents {\n     pub static unary_minus_fn : Ident = Ident { name: 6, ctxt: 0}; // apparently unused?\n     pub static clownshoes_extensions : Ident = Ident { name: 7, ctxt: 0};\n \n-    pub static self_ : Ident = Ident { name: 8, ctxt: 0}; // 'self'\n+    pub static self_ : Ident = Ident { name: super::SELF_KEYWORD_NAME, ctxt: 0}; // 'self'\n \n     /* for matcher NTs */\n     // none of these appear to be used, but perhaps references to\n@@ -352,7 +352,7 @@ pub mod special_idents {\n     pub static main : Ident = Ident { name: 24, ctxt: 0};\n     pub static opaque : Ident = Ident { name: 25, ctxt: 0};\n     pub static blk : Ident = Ident { name: 26, ctxt: 0};\n-    pub static statik : Ident = Ident { name: 27, ctxt: 0};\n+    pub static statik : Ident = Ident { name: super::STATIC_KEYWORD_NAME, ctxt: 0};\n     pub static clownshoes_foreign_mod: Ident = Ident { name: 28, ctxt: 0};\n     pub static unnamed_field: Ident = Ident { name: 29, ctxt: 0};\n     pub static c_abi: Ident = Ident { name: 30, ctxt: 0}; // apparently unused?\n@@ -414,8 +414,9 @@ pub type ident_interner = StrInterner;\n \n // return a fresh interner, preloaded with special identifiers.\n fn mk_fresh_ident_interner() -> @ident_interner {\n-    // the indices here must correspond to the numbers in\n-    // special_idents.\n+    // The indices here must correspond to the numbers in\n+    // special_idents, in Keyword to_ident(), and in static\n+    // constants below.\n     let init_vec = ~[\n         \"_\",                  // 0\n         \"anon\",               // 1\n@@ -473,8 +474,8 @@ fn mk_fresh_ident_interner() -> @ident_interner {\n         \"pub\",                // 52\n         \"ref\",                // 53\n         \"return\",             // 54\n-        \"static\",             // 27 -- also a special ident\n-        \"self\",               //  8 -- also a special ident\n+        \"static\",             // 27 -- also a special ident (prefill de-dupes)\n+        \"self\",               //  8 -- also a special ident (prefill de-dupes)\n         \"struct\",             // 55\n         \"super\",              // 56\n         \"true\",               // 57\n@@ -498,6 +499,32 @@ fn mk_fresh_ident_interner() -> @ident_interner {\n     @interner::StrInterner::prefill(init_vec)\n }\n \n+// NOTE remove stage0 pub'ed special cases after next snapshot.\n+#[cfg(stage0)]\n+pub static SELF_KEYWORD_NAME: uint = 8;\n+#[cfg(not(stage0))]\n+static SELF_KEYWORD_NAME: uint = 8;\n+#[cfg(stage0)]\n+pub static STATIC_KEYWORD_NAME: uint = 27;\n+#[cfg(not(stage0))]\n+static STATIC_KEYWORD_NAME: uint = 27;\n+#[cfg(stage0)]\n+pub static STRICT_KEYWORD_START: uint = 32;\n+#[cfg(not(stage0))]\n+static STRICT_KEYWORD_START: uint = 32;\n+#[cfg(stage0)]\n+pub static STRICT_KEYWORD_FINAL: uint = 64;\n+#[cfg(not(stage0))]\n+static STRICT_KEYWORD_FINAL: uint = 64;\n+#[cfg(stage0)]\n+pub static RESERVED_KEYWORD_START: uint = 65;\n+#[cfg(not(stage0))]\n+static RESERVED_KEYWORD_START: uint = 65;\n+#[cfg(stage0)]\n+pub static RESERVED_KEYWORD_FINAL: uint = 71;\n+#[cfg(not(stage0))]\n+static RESERVED_KEYWORD_FINAL: uint = 71;\n+\n // if an interner exists in TLS, return it. Otherwise, prepare a\n // fresh one.\n pub fn get_ident_interner() -> @ident_interner {\n@@ -675,8 +702,8 @@ pub mod keywords {\n                 Pub => Ident { name: 52, ctxt: 0 },\n                 Ref => Ident { name: 53, ctxt: 0 },\n                 Return => Ident { name: 54, ctxt: 0 },\n-                Static => Ident { name: 27, ctxt: 0 },\n-                Self => Ident { name: 8, ctxt: 0 },\n+                Static => Ident { name: super::STATIC_KEYWORD_NAME, ctxt: 0 },\n+                Self => Ident { name: super::SELF_KEYWORD_NAME, ctxt: 0 },\n                 Struct => Ident { name: 55, ctxt: 0 },\n                 Super => Ident { name: 56, ctxt: 0 },\n                 True => Ident { name: 57, ctxt: 0 },\n@@ -709,7 +736,8 @@ pub fn is_keyword(kw: keywords::Keyword, tok: &Token) -> bool {\n pub fn is_any_keyword(tok: &Token) -> bool {\n     match *tok {\n         token::IDENT(sid, false) => match sid.name {\n-            8 | 27 | 32 .. 70 => true,\n+            SELF_KEYWORD_NAME | STATIC_KEYWORD_NAME |\n+            STRICT_KEYWORD_START .. RESERVED_KEYWORD_FINAL => true,\n             _ => false,\n         },\n         _ => false\n@@ -719,7 +747,8 @@ pub fn is_any_keyword(tok: &Token) -> bool {\n pub fn is_strict_keyword(tok: &Token) -> bool {\n     match *tok {\n         token::IDENT(sid, false) => match sid.name {\n-            8 | 27 | 32 .. 64 => true,\n+            SELF_KEYWORD_NAME | STATIC_KEYWORD_NAME |\n+            STRICT_KEYWORD_START .. STRICT_KEYWORD_FINAL => true,\n             _ => false,\n         },\n         _ => false,\n@@ -729,7 +758,7 @@ pub fn is_strict_keyword(tok: &Token) -> bool {\n pub fn is_reserved_keyword(tok: &Token) -> bool {\n     match *tok {\n         token::IDENT(sid, false) => match sid.name {\n-            65 .. 71 => true,\n+            RESERVED_KEYWORD_START .. RESERVED_KEYWORD_FINAL => true,\n             _ => false,\n         },\n         _ => false,"}]}