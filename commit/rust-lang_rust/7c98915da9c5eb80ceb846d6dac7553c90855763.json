{"sha": "7c98915da9c5eb80ceb846d6dac7553c90855763", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdjOTg5MTVkYTljNWViODBjZWI4NDZkNmRhYzc1NTNjOTA4NTU3NjM=", "commit": {"author": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2019-07-01T05:16:32Z"}, "committer": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2019-07-01T05:22:04Z"}, "message": "Fix `never_loop` false positive\n\nCloses #4058", "tree": {"sha": "1ab3483d3c931ad8b57a3d51e1ae3582d107817a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1ab3483d3c931ad8b57a3d51e1ae3582d107817a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7c98915da9c5eb80ceb846d6dac7553c90855763", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7c98915da9c5eb80ceb846d6dac7553c90855763", "html_url": "https://github.com/rust-lang/rust/commit/7c98915da9c5eb80ceb846d6dac7553c90855763", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7c98915da9c5eb80ceb846d6dac7553c90855763/comments", "author": null, "committer": null, "parents": [{"sha": "58e6431f1ab5216819859495a18d6e855e6515d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/58e6431f1ab5216819859495a18d6e855e6515d4", "html_url": "https://github.com/rust-lang/rust/commit/58e6431f1ab5216819859495a18d6e855e6515d4"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "2d7a641a8313bd0fe4b6bd926ff8466589544227", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7c98915da9c5eb80ceb846d6dac7553c90855763/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7c98915da9c5eb80ceb846d6dac7553c90855763/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=7c98915da9c5eb80ceb846d6dac7553c90855763", "patch": "@@ -727,8 +727,7 @@ fn never_loop_expr(expr: &Expr, main_loop_id: HirId) -> NeverLoopResult {\n                 NeverLoopResult::AlwaysBreak\n             }\n         },\n-        ExprKind::Break(_, _) => NeverLoopResult::AlwaysBreak,\n-        ExprKind::Ret(ref e) => {\n+        ExprKind::Break(_, ref e) | ExprKind::Ret(ref e) => {\n             if let Some(ref e) = *e {\n                 combine_seq(never_loop_expr(e, main_loop_id), NeverLoopResult::AlwaysBreak)\n             } else {"}, {"sha": "cbc4ca39161681f3edd71b684a9a91a2d8722d0b", "filename": "tests/ui/never_loop.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7c98915da9c5eb80ceb846d6dac7553c90855763/tests%2Fui%2Fnever_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7c98915da9c5eb80ceb846d6dac7553c90855763/tests%2Fui%2Fnever_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fnever_loop.rs?ref=7c98915da9c5eb80ceb846d6dac7553c90855763", "patch": "@@ -175,6 +175,17 @@ pub fn test15() {\n     }\n }\n \n+// Issue #4058: `continue` in `break` expression\n+pub fn test16() {\n+    let mut n = 1;\n+    loop {\n+        break if n != 5 {\n+            n += 1;\n+            continue;\n+        };\n+    }\n+}\n+\n fn main() {\n     test1();\n     test2();"}]}