{"sha": "7897e168bdd9708f83514a9c3e88d83278de4334", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4OTdlMTY4YmRkOTcwOGY4MzUxNGE5YzNlODhkODMyNzhkZTQzMzQ=", "commit": {"author": {"name": "Dylan Maccora", "email": "maccora17@gmail.com", "date": "2017-04-01T04:35:03Z"}, "committer": {"name": "Dylan Maccora", "email": "maccora17@gmail.com", "date": "2017-04-01T05:56:16Z"}, "message": "Convert docs clean up.", "tree": {"sha": "ff9a8147d312af637ca6b0e9d0f0a75f429dac31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ff9a8147d312af637ca6b0e9d0f0a75f429dac31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7897e168bdd9708f83514a9c3e88d83278de4334", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7897e168bdd9708f83514a9c3e88d83278de4334", "html_url": "https://github.com/rust-lang/rust/commit/7897e168bdd9708f83514a9c3e88d83278de4334", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7897e168bdd9708f83514a9c3e88d83278de4334/comments", "author": {"login": "maccoda", "id": 15388206, "node_id": "MDQ6VXNlcjE1Mzg4MjA2", "avatar_url": "https://avatars.githubusercontent.com/u/15388206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maccoda", "html_url": "https://github.com/maccoda", "followers_url": "https://api.github.com/users/maccoda/followers", "following_url": "https://api.github.com/users/maccoda/following{/other_user}", "gists_url": "https://api.github.com/users/maccoda/gists{/gist_id}", "starred_url": "https://api.github.com/users/maccoda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maccoda/subscriptions", "organizations_url": "https://api.github.com/users/maccoda/orgs", "repos_url": "https://api.github.com/users/maccoda/repos", "events_url": "https://api.github.com/users/maccoda/events{/privacy}", "received_events_url": "https://api.github.com/users/maccoda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "maccoda", "id": 15388206, "node_id": "MDQ6VXNlcjE1Mzg4MjA2", "avatar_url": "https://avatars.githubusercontent.com/u/15388206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maccoda", "html_url": "https://github.com/maccoda", "followers_url": "https://api.github.com/users/maccoda/followers", "following_url": "https://api.github.com/users/maccoda/following{/other_user}", "gists_url": "https://api.github.com/users/maccoda/gists{/gist_id}", "starred_url": "https://api.github.com/users/maccoda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maccoda/subscriptions", "organizations_url": "https://api.github.com/users/maccoda/orgs", "repos_url": "https://api.github.com/users/maccoda/repos", "events_url": "https://api.github.com/users/maccoda/events{/privacy}", "received_events_url": "https://api.github.com/users/maccoda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7846dbe0c8de17f59cdfc3d2b914d58faad7eade", "url": "https://api.github.com/repos/rust-lang/rust/commits/7846dbe0c8de17f59cdfc3d2b914d58faad7eade", "html_url": "https://github.com/rust-lang/rust/commit/7846dbe0c8de17f59cdfc3d2b914d58faad7eade"}], "stats": {"total": 145, "additions": 114, "deletions": 31}, "files": [{"sha": "5546d2a13c478124d09c15c713219c90946a48a7", "filename": "src/libcore/convert.rs", "status": "modified", "additions": 114, "deletions": 31, "changes": 145, "blob_url": "https://github.com/rust-lang/rust/blob/7897e168bdd9708f83514a9c3e88d83278de4334/src%2Flibcore%2Fconvert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7897e168bdd9708f83514a9c3e88d83278de4334/src%2Flibcore%2Fconvert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fconvert.rs?ref=7897e168bdd9708f83514a9c3e88d83278de4334", "patch": "@@ -17,8 +17,8 @@\n //! Like many traits, these are often used as bounds for generic functions, to\n //! support arguments of multiple types.\n //!\n-//! - Impl the `As*` traits for reference-to-reference conversions\n-//! - Impl the [`Into`] trait when you want to consume the value in the conversion\n+//! - Implement the `As*` traits for reference-to-reference conversions\n+//! - Implement the [`Into`] trait when you want to consume the value in the conversion\n //! - The [`From`] trait is the most flexible, useful for value _and_ reference conversions\n //! - The [`TryFrom`] and [`TryInto`] traits behave like [`From`] and [`Into`], but allow for the\n //!   conversion to fail\n@@ -29,7 +29,7 @@\n //! equivalent [`Into`] or [`TryInto`] implementations for free, thanks to a blanket implementation\n //! in the standard library.\n //!\n-//! # Generic impl\n+//! # Generic Implementations\n //!\n //! - [`AsRef`] and [`AsMut`] auto-dereference if the inner type is a reference\n //! - [`From`]`<U> for T` implies [`Into`]`<T> for U`\n@@ -50,10 +50,20 @@\n \n use str::FromStr;\n \n-/// A cheap, reference-to-reference conversion.\n+/// A cheap reference-to-reference conversion. Used to convert a value to a reference value\n+/// within generic code.\n ///\n-/// `AsRef` is very similar to, but different than, [`Borrow`]. See\n-/// [the book][book] for more.\n+/// `AsRef` is very similar to, but serves a slightly different purpose than, [`Borrow`].\n+///\n+/// `AsRef` is to be used when wishing to convert to a reference of another type.\n+/// `Borrow` is more related to the notion of taking the reference. It is useful when wishing to abstract\n+/// over the type of reference (`&T`, `&mut T`) or allow both the referenced and owned type to be treated in the same manner.\n+/// The key difference between the two traits is the intention:\n+///\n+/// - Use `AsRef` when goal is to simply convert into a reference\n+/// - Use `Borrow` when goal is related to writing code that is agnostic to the type of borrow and if is reference or value\n+///\n+/// See [the book][book] for a more detailed comparison.\n ///\n /// [book]: ../../book/borrow-and-asref.html\n /// [`Borrow`]: ../../std/borrow/trait.Borrow.html\n@@ -64,7 +74,23 @@ use str::FromStr;\n /// [`Option<T>`]: ../../std/option/enum.Option.html\n /// [`Result<T, E>`]: ../../std/result/enum.Result.html\n ///\n+/// # Generic Implementations\n+///\n+/// - `AsRef` auto-dereferences if the inner type is a reference or a mutable\n+/// reference (e.g.: `foo.as_ref()` will work the same if `foo` has type `&mut Foo` or `&&mut Foo`)\n+///\n /// # Examples\n+/// An example implementation of the trait is [`Path`].\n+///\n+/// [`Path`]: ../../std/struct.Path.html\n+///\n+/// ```\n+/// impl AsRef<Path> for str {\n+///     fn as_ref(&self) -> &Path {\n+///         Path::new(self)\n+///     }\n+/// }\n+/// ```\n ///\n /// Both [`String`] and `&str` implement `AsRef<str>`:\n ///\n@@ -82,11 +108,6 @@ use str::FromStr;\n /// is_hello(s);\n /// ```\n ///\n-/// # Generic Impls\n-///\n-/// - `AsRef` auto-dereferences if the inner type is a reference or a mutable\n-/// reference (e.g.: `foo.as_ref()` will work the same if `foo` has type `&mut Foo` or `&&mut Foo`)\n-///\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub trait AsRef<T: ?Sized> {\n     /// Performs the conversion.\n@@ -96,12 +117,19 @@ pub trait AsRef<T: ?Sized> {\n \n /// A cheap, mutable reference-to-mutable reference conversion.\n ///\n+/// This trait is similar to `AsRef` but used for converting mutable references.\n+///\n /// **Note: this trait must not fail**. If the conversion can fail, use a dedicated method which\n /// returns an [`Option<T>`] or a [`Result<T, E>`].\n ///\n /// [`Option<T>`]: ../../std/option/enum.Option.html\n /// [`Result<T, E>`]: ../../std/result/enum.Result.html\n ///\n+/// # Generic Implementations\n+///\n+/// - `AsMut` auto-dereferences if the inner type is a reference or a mutable\n+/// reference (e.g.: `foo.as_ref()` will work the same if `foo` has type `&mut Foo` or `&&mut Foo`)\n+///\n /// # Examples\n ///\n /// [`Box<T>`] implements `AsMut<T>`:\n@@ -118,10 +146,13 @@ pub trait AsRef<T: ?Sized> {\n /// assert_eq!(*boxed_num, 1);\n /// ```\n ///\n-/// # Generic Impls\n+/// Implementing `AsMut`:\n ///\n-/// - `AsMut` auto-dereferences if the inner type is a reference or a mutable\n-/// reference (e.g.: `foo.as_ref()` will work the same if `foo` has type `&mut Foo` or `&&mut Foo`)\n+/// ```\n+/// impl Type {\n+/// let a = 1;\n+/// }\n+/// ```\n ///\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub trait AsMut<T: ?Sized> {\n@@ -130,7 +161,7 @@ pub trait AsMut<T: ?Sized> {\n     fn as_mut(&mut self) -> &mut T;\n }\n \n-/// A conversion that consumes `self`, which may or may not be expensive.\n+/// A conversion that consumes `self`, which may or may not be expensive. The reciprocal of [`From`][From].\n ///\n /// **Note: this trait must not fail**. If the conversion can fail, use [`TryInto`] or a dedicated\n /// method which returns an [`Option<T>`] or a [`Result<T, E>`].\n@@ -139,6 +170,11 @@ pub trait AsMut<T: ?Sized> {\n /// the [`From`][From] trait, which offers greater flexibility and provides an equivalent `Into`\n /// implementation for free, thanks to a blanket implementation in the standard library.\n ///\n+/// # Generic Implementations\n+///\n+/// - [`From<T>`][From]` for U` implies `Into<U> for T`\n+/// - [`into`] is reflexive, which means that `Into<T> for T` is implemented\n+///\n /// # Examples\n ///\n /// [`String`] implements `Into<Vec<u8>>`:\n@@ -153,11 +189,6 @@ pub trait AsMut<T: ?Sized> {\n /// is_hello(s);\n /// ```\n ///\n-/// # Generic Impls\n-///\n-/// - [`From<T>`][From]` for U` implies `Into<U> for T`\n-/// - [`into`] is reflexive, which means that `Into<T> for T` is implemented\n-///\n /// [`TryInto`]: trait.TryInto.html\n /// [`Option<T>`]: ../../std/option/enum.Option.html\n /// [`Result<T, E>`]: ../../std/result/enum.Result.html\n@@ -171,11 +202,24 @@ pub trait Into<T>: Sized {\n     fn into(self) -> T;\n }\n \n-/// Construct `Self` via a conversion.\n+/// Simple and safe type conversions in to `Self`. It is the reciprocal of `Into`.\n+///\n+/// This trait is useful when performing error handling as described by [the book][book] and is closely related to the `?` operator.\n+///\n+/// When constructing a function that is capable of failing the return type will generally be of the form `Result<T, E>`.\n+/// The `From` trait allows for simplification of error handling by providing a means of returning a single error type that encapsulates\n+/// numerous possible erroneous situations.\n+/// This trait is not limited to error handling, rather the general case for this trait would be in any type conversions to have an\n+/// explicit definition of how they are performed.\n ///\n /// **Note: this trait must not fail**. If the conversion can fail, use [`TryFrom`] or a dedicated\n /// method which returns an [`Option<T>`] or a [`Result<T, E>`].\n ///\n+/// # Generic Implementations\n+///\n+/// - `From<T> for U` implies [`Into<U>`]` for T`\n+/// - [`from`] is reflexive, which means that `From<T> for T` is implemented\n+///\n /// # Examples\n ///\n /// [`String`] implements `From<&str>`:\n@@ -186,17 +230,42 @@ pub trait Into<T>: Sized {\n ///\n /// assert_eq!(string, other_string);\n /// ```\n-/// # Generic impls\n ///\n-/// - `From<T> for U` implies [`Into<U>`]` for T`\n-/// - [`from`] is reflexive, which means that `From<T> for T` is implemented\n+/// An example usage for error handling:\n+///\n+/// ```\n+/// enum CliError {\n+///     IoError(io::Error),\n+///     ParseError(num::ParseIntError),\n+/// }\n+///\n+/// impl From<io::Error> for MyError {\n+///     fn from(error: io::Error) -> Self {\n+///         CliError::IoError(error)\n+///     }\n+/// }\n+///\n+/// impl From<num::ParseIntError> for MyError {\n+///     fn from(error: io::Error) -> Self {\n+///         CliError::ParseError(error)\n+///     }\n+/// }\n+///\n+/// fn open_and_parse_file(file_name: &str) -> Result<i32, MyError> {\n+///     let file = std::fs::File::open(\"test\")?;\n+///     let mut contents = String::new();\n+///     file.read_to_string(&mut contents)?;\n+///     let num: i32 = contents.trim().parse()?;\n+/// }\n+/// ```\n ///\n /// [`TryFrom`]: trait.TryFrom.html\n /// [`Option<T>`]: ../../std/option/enum.Option.html\n /// [`Result<T, E>`]: ../../std/result/enum.Result.html\n /// [`String`]: ../../std/string/struct.String.html\n /// [`Into<U>`]: trait.Into.html\n /// [`from`]: trait.From.html#tymethod.from\n+/// [book]: ../../book/error-handling.html#the-from-trait\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub trait From<T>: Sized {\n     /// Performs the conversion.\n@@ -236,15 +305,19 @@ pub trait TryFrom<T>: Sized {\n \n // As lifts over &\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<'a, T: ?Sized, U: ?Sized> AsRef<U> for &'a T where T: AsRef<U> {\n+impl<'a, T: ?Sized, U: ?Sized> AsRef<U> for &'a T\n+    where T: AsRef<U>\n+{\n     fn as_ref(&self) -> &U {\n         <T as AsRef<U>>::as_ref(*self)\n     }\n }\n \n // As lifts over &mut\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<'a, T: ?Sized, U: ?Sized> AsRef<U> for &'a mut T where T: AsRef<U> {\n+impl<'a, T: ?Sized, U: ?Sized> AsRef<U> for &'a mut T\n+    where T: AsRef<U>\n+{\n     fn as_ref(&self) -> &U {\n         <T as AsRef<U>>::as_ref(*self)\n     }\n@@ -260,7 +333,9 @@ impl<'a, T: ?Sized, U: ?Sized> AsRef<U> for &'a mut T where T: AsRef<U> {\n \n // AsMut lifts over &mut\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<'a, T: ?Sized, U: ?Sized> AsMut<U> for &'a mut T where T: AsMut<U> {\n+impl<'a, T: ?Sized, U: ?Sized> AsMut<U> for &'a mut T\n+    where T: AsMut<U>\n+{\n     fn as_mut(&mut self) -> &mut U {\n         (*self).as_mut()\n     }\n@@ -276,7 +351,9 @@ impl<'a, T: ?Sized, U: ?Sized> AsMut<U> for &'a mut T where T: AsMut<U> {\n \n // From implies Into\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<T, U> Into<U> for T where U: From<T> {\n+impl<T, U> Into<U> for T\n+    where U: From<T>\n+{\n     fn into(self) -> U {\n         U::from(self)\n     }\n@@ -285,13 +362,17 @@ impl<T, U> Into<U> for T where U: From<T> {\n // From (and thus Into) is reflexive\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T> From<T> for T {\n-    fn from(t: T) -> T { t }\n+    fn from(t: T) -> T {\n+        t\n+    }\n }\n \n \n // TryFrom implies TryInto\n #[unstable(feature = \"try_from\", issue = \"33417\")]\n-impl<T, U> TryInto<U> for T where U: TryFrom<T> {\n+impl<T, U> TryInto<U> for T\n+    where U: TryFrom<T>\n+{\n     type Error = U::Error;\n \n     fn try_into(self) -> Result<U, U::Error> {\n@@ -327,7 +408,9 @@ impl AsRef<str> for str {\n \n // FromStr implies TryFrom<&str>\n #[unstable(feature = \"try_from\", issue = \"33417\")]\n-impl<'a, T> TryFrom<&'a str> for T where T: FromStr {\n+impl<'a, T> TryFrom<&'a str> for T\n+    where T: FromStr\n+{\n     type Error = <T as FromStr>::Err;\n \n     fn try_from(s: &'a str) -> Result<T, Self::Error> {"}]}