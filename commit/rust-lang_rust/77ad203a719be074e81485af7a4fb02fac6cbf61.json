{"sha": "77ad203a719be074e81485af7a4fb02fac6cbf61", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3YWQyMDNhNzE5YmUwNzRlODE0ODVhZjdhNGZiMDJmYWM2Y2JmNjE=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-12-28T12:34:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-12-28T12:34:19Z"}, "message": "Merge #7060\n\n7060: Fix mbe fail to pass expr with attr r=edwin0cheng a=edwin0cheng\n\nbors r+\r\n\r\nFixes #5896\n\nCo-authored-by: Edwin Cheng <edwin0cheng@gmail.com>", "tree": {"sha": "69f29dec5bfb8f9d3b86e0e05ccb9d88193fb02d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69f29dec5bfb8f9d3b86e0e05ccb9d88193fb02d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77ad203a719be074e81485af7a4fb02fac6cbf61", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf6dDLCRBK7hj4Ov3rIwAAdHIIACBzX7+oCme5lYLZyajrZPQM\nYp3TTZqar4D4L8Cxm5ZwDsZJb3sr/dSDihfmsR0ElYID8nTKiw+p8aCvrh2XyX1d\nI1mRrcpaVigGoTHEu6q4JXRlIhgxWxQLYaYvNQ9+57SKdE4kpOzFz5EPSc2NKGp5\n7wqLk+GQvfskU56MDhqLnVVB9I1E49FIUZD8Cxay0t8yP9yyqk2ZRmw/FB++NSE7\nAP6ZqBLQX2TE8qH6EewHnuikKJtOOYeYGRMxD3V4pcIoqQzAe8FbQ5RZd8A4oH8T\njjng85MkPZaFq9TKFNkqZDrJvH2a9n90ZCYIZcnFxaozAzzzlYhQCHFdTk0F/rk=\n=Np8l\n-----END PGP SIGNATURE-----\n", "payload": "tree 69f29dec5bfb8f9d3b86e0e05ccb9d88193fb02d\nparent 99ec2f623d4446bcc0befe17a98db9c7062b8009\nparent 877c251bef9bd4ac8ccab971786847bd4f28cc34\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1609158859 +0000\ncommitter GitHub <noreply@github.com> 1609158859 +0000\n\nMerge #7060\n\n7060: Fix mbe fail to pass expr with attr r=edwin0cheng a=edwin0cheng\n\nbors r+\r\n\r\nFixes #5896\n\nCo-authored-by: Edwin Cheng <edwin0cheng@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77ad203a719be074e81485af7a4fb02fac6cbf61", "html_url": "https://github.com/rust-lang/rust/commit/77ad203a719be074e81485af7a4fb02fac6cbf61", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77ad203a719be074e81485af7a4fb02fac6cbf61/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "99ec2f623d4446bcc0befe17a98db9c7062b8009", "url": "https://api.github.com/repos/rust-lang/rust/commits/99ec2f623d4446bcc0befe17a98db9c7062b8009", "html_url": "https://github.com/rust-lang/rust/commit/99ec2f623d4446bcc0befe17a98db9c7062b8009"}, {"sha": "877c251bef9bd4ac8ccab971786847bd4f28cc34", "url": "https://api.github.com/repos/rust-lang/rust/commits/877c251bef9bd4ac8ccab971786847bd4f28cc34", "html_url": "https://github.com/rust-lang/rust/commit/877c251bef9bd4ac8ccab971786847bd4f28cc34"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "e5e9e8ca16d3ac118885168e69a15a959bb629b9", "filename": "crates/hir_def/src/nameres/tests/macros.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fhir_def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fhir_def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fnameres%2Ftests%2Fmacros.rs?ref=77ad203a719be074e81485af7a4fb02fac6cbf61", "patch": "@@ -677,7 +677,7 @@ fn macro_expansion_overflow() {\n         r#\"\n macro_rules! a {\n     ($e:expr; $($t:tt)*) => {\n-        b!($($t)*);\n+        b!(static = (); $($t)*);\n     };\n     () => {};\n }\n@@ -689,7 +689,7 @@ macro_rules! b {\n     () => {};\n }\n \n-b! { static = #[] (); }\n+b! { static = #[] ();}\n \"#,\n         expect![[r#\"\n             crate"}, {"sha": "1d9afb4fb8a1b236190380801377dc3ae647ce0c", "filename": "crates/mbe/src/tests.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fmbe%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fmbe%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Ftests.rs?ref=77ad203a719be074e81485af7a4fb02fac6cbf61", "patch": "@@ -760,6 +760,18 @@ fn test_last_expr() {\n     );\n }\n \n+#[test]\n+fn test_expr_with_attr() {\n+    parse_macro(\n+        r#\"\n+macro_rules! m {\n+    ($a:expr) => {0}\n+}\n+\"#,\n+    )\n+    .assert_expand_items(\"m!(#[allow(a)]())\", \"0\");\n+}\n+\n #[test]\n fn test_ty() {\n     parse_macro("}, {"sha": "63cc900272ce9c3e833c7e39fc8faf1c9372870a", "filename": "crates/parser/src/grammar.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fparser%2Fsrc%2Fgrammar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77ad203a719be074e81485af7a4fb02fac6cbf61/crates%2Fparser%2Fsrc%2Fgrammar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar.rs?ref=77ad203a719be074e81485af7a4fb02fac6cbf61", "patch": "@@ -59,7 +59,7 @@ pub(crate) mod fragments {\n     };\n \n     pub(crate) fn expr(p: &mut Parser) {\n-        let _ = expressions::expr(p);\n+        let _ = expressions::expr_with_attrs(p);\n     }\n \n     pub(crate) fn stmt(p: &mut Parser) {"}]}