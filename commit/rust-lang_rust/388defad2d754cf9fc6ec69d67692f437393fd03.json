{"sha": "388defad2d754cf9fc6ec69d67692f437393fd03", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM4OGRlZmFkMmQ3NTRjZjlmYzZlYzY5ZDY3NjkyZjQzNzM5M2ZkMDM=", "commit": {"author": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2018-04-15T13:47:56Z"}, "committer": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2018-04-26T20:17:57Z"}, "message": "Simplified name mapping in auto trait handling.", "tree": {"sha": "ca0ae3c0dfbabe55bc328e8e1113ff2cc9eaa77a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca0ae3c0dfbabe55bc328e8e1113ff2cc9eaa77a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/388defad2d754cf9fc6ec69d67692f437393fd03", "comment_count": 0, "verification": {"verified": false, "reason": "unverified_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXezFNCHL3+3lgSPSfvyOxSJN6OwFAlriM/UACgkQfvyOxSJN\n6OzCYQ//VMqSaY+fSDJpdCviDj1SP9YV00ynZ1TKINVRkkKd9cnS5CQ9/i5NujQ7\n3omBJEUlrguVCq3h+uH1zvdCnZrknXH5Ctr111mpk5fZUkzL5x1qhs0k76VHVGPy\nBZcCSt2S10bnUBCTxUwzaOFQkr8KCxy4Z3cs+FsHDMKO+WNKEft5HEghtfaJKi+X\nAPnfGWgf5hrEMaBrO9IBxZM0o0OenGzJmnlMH//uFmRghnpZTnZeLvMqP+gRUY+A\n3dmVYAOowOIBjQgLCmM1btBDs1GNnHgEU1JxIIWNClPeUm5/peb04mXkTyeCDVHH\nur4tXsu5+C/L6S/c0Y0IAgy/1e78I727x0joZ09DzsmSRuF9/MD7vsxjQEu/hMw8\nzmc4TFQN0imLSODaFtj5GLQ3AzHiXy5IplDaSNJuecFkspXVJwhlqw3LgUCBRv5w\nb4m/Qw5KxTHTQsLIZwoT+xK10kBQYOBUELSTV1PRqObbDzDLRg5wyRS+QP01xLLx\nPFBhpH/qiwqcwvr/aseqioDQwxL8aVxfSdOZTMNwD9Y/3dfwzyw7TfojX6RKx/0G\nv6vbaA2VbpJLS2bWY/LyKlBCtvMNYh3ArXuxR6aEYJYCI3XVDI7nXkYSqor5G5Q+\nCVLsRMY8n/4sCz/xbtyvW4noeCuwecldf6XMIaaAor3m362U3PY=\n=ui+j\n-----END PGP SIGNATURE-----", "payload": "tree ca0ae3c0dfbabe55bc328e8e1113ff2cc9eaa77a\nparent d101753cd8a010abef238e616ac2f5bd5cbbf756\nauthor Inokentiy Babushkin <twk@twki.de> 1523800076 +0200\ncommitter Inokentiy Babushkin <twk@twki.de> 1524773877 +0200\n\nSimplified name mapping in auto trait handling.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/388defad2d754cf9fc6ec69d67692f437393fd03", "html_url": "https://github.com/rust-lang/rust/commit/388defad2d754cf9fc6ec69d67692f437393fd03", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/388defad2d754cf9fc6ec69d67692f437393fd03/comments", "author": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d101753cd8a010abef238e616ac2f5bd5cbbf756", "url": "https://api.github.com/repos/rust-lang/rust/commits/d101753cd8a010abef238e616ac2f5bd5cbbf756", "html_url": "https://github.com/rust-lang/rust/commit/d101753cd8a010abef238e616ac2f5bd5cbbf756"}], "stats": {"total": 10, "additions": 4, "deletions": 6}, "files": [{"sha": "db8f59ce954b315103cb0544e66d352f7d34346b", "filename": "src/librustc/traits/auto_trait.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/388defad2d754cf9fc6ec69d67692f437393fd03/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/388defad2d754cf9fc6ec69d67692f437393fd03/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fauto_trait.rs?ref=388defad2d754cf9fc6ec69d67692f437393fd03", "patch": "@@ -55,7 +55,7 @@ impl<A> AutoTraitResult<A> {\n pub struct AutoTraitInfo<'cx> {\n     pub full_user_env: ty::ParamEnv<'cx>,\n     pub region_data: RegionConstraintData<'cx>,\n-    pub names_map: FxHashMap<String, String>,\n+    pub names_map: FxHashSet<String>,\n     pub vid_to_region: FxHashMap<ty::RegionVid, ty::Region<'cx>>,\n }\n \n@@ -206,12 +206,10 @@ impl<'a, 'tcx> AutoTraitFinder<'a, 'tcx> {\n                 )\n             });\n \n-            let names_map: FxHashMap<String, String> = generics\n+            let names_map: FxHashSet<String> = generics\n                 .regions\n                 .iter()\n-                .map(|l| (l.name.to_string(), l.name.to_string()))\n-                // TODO(twk): Lifetime branding and why is this map a set?!\n-                //     l.clean(self.cx) was present in the original code\n+                .map(|l| l.name.to_string())\n                 .collect();\n \n             let body_ids: FxHashSet<_> = infcx"}, {"sha": "f8c0c40443048ca24082f17ca32d29f3f805c106", "filename": "src/librustdoc/clean/auto_trait.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/388defad2d754cf9fc6ec69d67692f437393fd03/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/388defad2d754cf9fc6ec69d67692f437393fd03/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs?ref=388defad2d754cf9fc6ec69d67692f437393fd03", "patch": "@@ -290,7 +290,7 @@ impl<'a, 'tcx, 'rcx> AutoTraitFinder<'a, 'tcx, 'rcx> {\n                     let names_map =\n                         info.names_map\n                             .drain()\n-                            .map(|(name, lifetime)| (name, Lifetime(lifetime)))\n+                            .map(|name| (name.clone(), Lifetime(name)))\n                             .collect();\n                     let lifetime_predicates =\n                         self.handle_lifetimes(&region_data, &names_map);"}]}