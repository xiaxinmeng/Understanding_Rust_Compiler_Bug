{"sha": "adbaa85ee90b120ab22082811373750a95aeda39", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkYmFhODVlZTkwYjEyMGFiMjIwODI4MTEzNzM3NTBhOTVhZWRhMzk=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-10-17T19:01:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-10-17T19:01:15Z"}, "message": "Merge pull request #3330 from shssoichiro/3309-goblin-ice\n\nResolve ICE in needless range loop lint", "tree": {"sha": "e2c6b79e7bcd8b016849398b78621c408ab17282", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e2c6b79e7bcd8b016849398b78621c408ab17282"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/adbaa85ee90b120ab22082811373750a95aeda39", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbx4b7CRBK7hj4Ov3rIwAAdHIIAEPOf9rhbJc7ZlGnKYeBLy8x\nYYFYLnBMRWoS6M25ttrwLWIUt45uvrWu/2yFF4aJQgu3S3rroDAdr0kfKJ3Dydfl\nTs5QLXrR2kIp07dUc1+EiK2VIUQ5afCAlL0ymAMzK2gnvH5M15qgNH/XsP1NF+Lg\nCbyYJg/ge3dFjTbfZYs2IEL1cTmNfHVyT0SXL43+Etph0VIpvOhtyQ5eHkR/xnjn\nMFAynLqdwvHsL6YjIrnd+HGPfn0VaIbCPE1AO7H3TibGg+113IjSZ3rq2EFLI4OF\nGx8EF4yS7sORyCsJeyTpTYrCoKm8IVDray7jFjUqEGK0Iv5WYaoC1vP9SdRKwhg=\n=pUvR\n-----END PGP SIGNATURE-----\n", "payload": "tree e2c6b79e7bcd8b016849398b78621c408ab17282\nparent f40c4fa51d308bd32b4b3e3302bad8965d10ffbc\nparent 4b68c965feec8ce0e86d0b396baca5e33c3cf0af\nauthor Philipp Hansch <dev@phansch.net> 1539802875 +0200\ncommitter GitHub <noreply@github.com> 1539802875 +0200\n\nMerge pull request #3330 from shssoichiro/3309-goblin-ice\n\nResolve ICE in needless range loop lint"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/adbaa85ee90b120ab22082811373750a95aeda39", "html_url": "https://github.com/rust-lang/rust/commit/adbaa85ee90b120ab22082811373750a95aeda39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/adbaa85ee90b120ab22082811373750a95aeda39/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f40c4fa51d308bd32b4b3e3302bad8965d10ffbc", "url": "https://api.github.com/repos/rust-lang/rust/commits/f40c4fa51d308bd32b4b3e3302bad8965d10ffbc", "html_url": "https://github.com/rust-lang/rust/commit/f40c4fa51d308bd32b4b3e3302bad8965d10ffbc"}, {"sha": "4b68c965feec8ce0e86d0b396baca5e33c3cf0af", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b68c965feec8ce0e86d0b396baca5e33c3cf0af", "html_url": "https://github.com/rust-lang/rust/commit/4b68c965feec8ce0e86d0b396baca5e33c3cf0af"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "950c1043802cc6896da5a587b6dd235399070ca1", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/adbaa85ee90b120ab22082811373750a95aeda39/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/adbaa85ee90b120ab22082811373750a95aeda39/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=adbaa85ee90b120ab22082811373750a95aeda39", "patch": "@@ -31,7 +31,7 @@ use std::mem;\n use crate::syntax::ast;\n use crate::syntax::source_map::Span;\n use crate::syntax_pos::BytePos;\n-use crate::utils::{sugg, sext};\n+use crate::utils::{in_macro, sugg, sext};\n use crate::utils::usage::mutated_variables;\n use crate::consts::{constant, Constant};\n \n@@ -1030,6 +1030,10 @@ fn check_for_loop_range<'a, 'tcx>(\n     body: &'tcx Expr,\n     expr: &'tcx Expr,\n ) {\n+    if in_macro(expr.span) {\n+        return;\n+    }\n+\n     if let Some(higher::Range {\n         start: Some(start),\n         ref end,"}, {"sha": "b640597586215e2b107661c9cf97dd0ec85736a4", "filename": "mini-macro/src/lib.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/adbaa85ee90b120ab22082811373750a95aeda39/mini-macro%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/adbaa85ee90b120ab22082811373750a95aeda39/mini-macro%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mini-macro%2Fsrc%2Flib.rs?ref=adbaa85ee90b120ab22082811373750a95aeda39", "patch": "@@ -17,5 +17,10 @@ use proc_macro::{TokenStream, quote};\n pub fn mini_macro(_: TokenStream) -> TokenStream {\n     quote!(\n         #[allow(unused)] fn needless_take_by_value(s: String) { println!(\"{}\", s.len()); }\n+        #[allow(unused)] fn needless_loop(items: &[u8]) {\n+            for i in 0..items.len() {\n+                println!(\"{}\", items[i]);\n+            }\n+        }\n     )\n }"}]}