{"sha": "599bf45ac9afc309332388fe4bc42a100e3d1586", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5OWJmNDVhYzlhZmMzMDkzMzIzODhmZTRiYzQyYTEwMGUzZDE1ODY=", "commit": {"author": {"name": "Theo Belaire", "email": "theo.belaire@gmail.com", "date": "2015-05-01T19:13:27Z"}, "committer": {"name": "Oliver Schneider", "email": "git1984941651981@oli-obk.de", "date": "2015-06-24T10:25:01Z"}, "message": "Indent code past the widest line number\n\nFixes #11715", "tree": {"sha": "c8fc69c1c3833e685a7b06930501b5c845047b10", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8fc69c1c3833e685a7b06930501b5c845047b10"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/599bf45ac9afc309332388fe4bc42a100e3d1586", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/599bf45ac9afc309332388fe4bc42a100e3d1586", "html_url": "https://github.com/rust-lang/rust/commit/599bf45ac9afc309332388fe4bc42a100e3d1586", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/599bf45ac9afc309332388fe4bc42a100e3d1586/comments", "author": {"login": "tbelaire", "id": 427239, "node_id": "MDQ6VXNlcjQyNzIzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/427239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tbelaire", "html_url": "https://github.com/tbelaire", "followers_url": "https://api.github.com/users/tbelaire/followers", "following_url": "https://api.github.com/users/tbelaire/following{/other_user}", "gists_url": "https://api.github.com/users/tbelaire/gists{/gist_id}", "starred_url": "https://api.github.com/users/tbelaire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tbelaire/subscriptions", "organizations_url": "https://api.github.com/users/tbelaire/orgs", "repos_url": "https://api.github.com/users/tbelaire/repos", "events_url": "https://api.github.com/users/tbelaire/events{/privacy}", "received_events_url": "https://api.github.com/users/tbelaire/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e749f724b07121e965120f6974aa0b3fda888944", "url": "https://api.github.com/repos/rust-lang/rust/commits/e749f724b07121e965120f6974aa0b3fda888944", "html_url": "https://github.com/rust-lang/rust/commit/e749f724b07121e965120f6974aa0b3fda888944"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "6c2e3dc6330ec3f8fe8d6224dd7aaaafbe196fb1", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/599bf45ac9afc309332388fe4bc42a100e3d1586/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/599bf45ac9afc309332388fe4bc42a100e3d1586/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=599bf45ac9afc309332388fe4bc42a100e3d1586", "patch": "@@ -594,12 +594,18 @@ fn highlight_lines(err: &mut EmitterWriter,\n     let display_line_infos = &lines.lines[..display_lines];\n     let display_line_strings = &line_strings[..display_lines];\n \n+    // Calculate the widest number to format evenly and fix #11715\n+    assert!(display_line_infos.len() > 0);\n+    let mut max_line_num = display_line_infos[display_line_infos.len() - 1].line_index + 1;\n+    let mut digits = 0;\n+    while max_line_num > 0 { max_line_num /= 10; digits += 1; }\n     // Print the offending lines\n     for (line_info, line) in display_line_infos.iter().zip(display_line_strings) {\n-        try!(write!(&mut err.dst, \"{}:{} {}\\n\",\n+        try!(write!(&mut err.dst, \"{}:{:>width$} {}\\n\",\n                     fm.name,\n                     line_info.line_index + 1,\n-                    line));\n+                    line,\n+                    width=digits));\n     }\n \n     // If we elided something, put an ellipsis."}]}