{"sha": "73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczODc3YTBiYzg4MmFiYzJhODhmZTljMGQ0ZmI5NWQ0OWMxYmE0OTI=", "commit": {"author": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2016-12-20T10:48:14Z"}, "committer": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2016-12-20T10:48:14Z"}, "message": "Find FileCheck using llvm-config", "tree": {"sha": "06957f3293e6fec24503407ced2be73298ee5d0a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06957f3293e6fec24503407ced2be73298ee5d0a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "html_url": "https://github.com/rust-lang/rust/commit/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492/comments", "author": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94ae2a2e6791e0c4ab6fba836b2b09a07f2d3c8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/94ae2a2e6791e0c4ab6fba836b2b09a07f2d3c8a", "html_url": "https://github.com/rust-lang/rust/commit/94ae2a2e6791e0c4ab6fba836b2b09a07f2d3c8a"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "128e03fe8f88848fd4ae3f13369f490937769cd1", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "patch": "@@ -721,7 +721,8 @@ impl Build {\n     fn llvm_filecheck(&self, target: &str) -> PathBuf {\n         let target_config = self.config.target_config.get(target);\n         if let Some(s) = target_config.and_then(|c| c.llvm_config.as_ref()) {\n-            s.parent().unwrap().join(exe(\"FileCheck\", target))\n+            let llvm_bindir = output(Command::new(s).arg(\"--bindir\"));\n+            Path::new(llvm_bindir.trim()).join(exe(\"FileCheck\", target))\n         } else {\n             let base = self.llvm_out(&self.config.build).join(\"build\");\n             let exe = exe(\"FileCheck\", target);"}, {"sha": "5d543419fc9b6a78b8331728caf46d2f02e31aa3", "filename": "src/bootstrap/sanity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492/src%2Fbootstrap%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73877a0bc882abc2a88fe9c0d4fb95d49c1ba492/src%2Fbootstrap%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsanity.rs?ref=73877a0bc882abc2a88fe9c0d4fb95d49c1ba492", "patch": "@@ -143,7 +143,7 @@ pub fn check(build: &mut Build) {\n     // Externally configured LLVM requires FileCheck to exist\n     let filecheck = build.llvm_filecheck(&build.config.build);\n     if !filecheck.starts_with(&build.out) && !filecheck.exists() && build.config.codegen_tests {\n-        panic!(\"filecheck executable {:?} does not exist\", filecheck);\n+        panic!(\"FileCheck executable {:?} does not exist\", filecheck);\n     }\n \n     for target in build.config.target.iter() {"}]}