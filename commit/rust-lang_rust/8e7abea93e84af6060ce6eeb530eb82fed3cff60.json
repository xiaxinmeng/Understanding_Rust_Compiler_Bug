{"sha": "8e7abea93e84af6060ce6eeb530eb82fed3cff60", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhlN2FiZWE5M2U4NGFmNjA2MGNlNmVlYjUzMGViODJmZWQzY2ZmNjA=", "commit": {"author": {"name": "Alex Burka", "email": "aburka@seas.upenn.edu", "date": "2016-07-27T17:51:48Z"}, "committer": {"name": "Alex Burka", "email": "aburka@seas.upenn.edu", "date": "2016-07-27T17:58:51Z"}, "message": "revert libc changes", "tree": {"sha": "8e7778b70b2c9b647d7f2e7e572b9687e069cdec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e7778b70b2c9b647d7f2e7e572b9687e069cdec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e7abea93e84af6060ce6eeb530eb82fed3cff60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e7abea93e84af6060ce6eeb530eb82fed3cff60", "html_url": "https://github.com/rust-lang/rust/commit/8e7abea93e84af6060ce6eeb530eb82fed3cff60", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e7abea93e84af6060ce6eeb530eb82fed3cff60/comments", "author": {"login": "durka", "id": 47007, "node_id": "MDQ6VXNlcjQ3MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durka", "html_url": "https://github.com/durka", "followers_url": "https://api.github.com/users/durka/followers", "following_url": "https://api.github.com/users/durka/following{/other_user}", "gists_url": "https://api.github.com/users/durka/gists{/gist_id}", "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durka/subscriptions", "organizations_url": "https://api.github.com/users/durka/orgs", "repos_url": "https://api.github.com/users/durka/repos", "events_url": "https://api.github.com/users/durka/events{/privacy}", "received_events_url": "https://api.github.com/users/durka/received_events", "type": "User", "site_admin": false}, "committer": {"login": "durka", "id": 47007, "node_id": "MDQ6VXNlcjQ3MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durka", "html_url": "https://github.com/durka", "followers_url": "https://api.github.com/users/durka/followers", "following_url": "https://api.github.com/users/durka/following{/other_user}", "gists_url": "https://api.github.com/users/durka/gists{/gist_id}", "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durka/subscriptions", "organizations_url": "https://api.github.com/users/durka/orgs", "repos_url": "https://api.github.com/users/durka/repos", "events_url": "https://api.github.com/users/durka/events{/privacy}", "received_events_url": "https://api.github.com/users/durka/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54ecc210ec720e93c6e493e6fc3e7464cd22002f", "url": "https://api.github.com/repos/rust-lang/rust/commits/54ecc210ec720e93c6e493e6fc3e7464cd22002f", "html_url": "https://github.com/rust-lang/rust/commit/54ecc210ec720e93c6e493e6fc3e7464cd22002f"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "983bd46a0c9e64b66f22604389f05e704d374cbb", "filename": "src/doc/book/ffi.md", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/8e7abea93e84af6060ce6eeb530eb82fed3cff60/src%2Fdoc%2Fbook%2Fffi.md", "raw_url": "https://github.com/rust-lang/rust/raw/8e7abea93e84af6060ce6eeb530eb82fed3cff60/src%2Fdoc%2Fbook%2Fffi.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fbook%2Fffi.md?ref=8e7abea93e84af6060ce6eeb530eb82fed3cff60", "patch": "@@ -461,11 +461,12 @@ global state. In order to access these variables, you declare them in `extern`\n blocks with the `static` keyword:\n \n ```rust,no_run\n-use std::os::raw::c_int;\n+# #![feature(libc)]\n+extern crate libc;\n \n #[link(name = \"readline\")]\n extern {\n-    static rl_readline_version: c_int;\n+    static rl_readline_version: libc::c_int;\n }\n \n fn main() {\n@@ -479,14 +480,15 @@ interface. To do this, statics can be declared with `mut` so we can mutate\n them.\n \n ```rust,no_run\n+# #![feature(libc)]\n+extern crate libc;\n \n use std::ffi::CString;\n-use std::os::raw::c_char;\n use std::ptr;\n \n #[link(name = \"readline\")]\n extern {\n-    static mut rl_prompt: *const c_char;\n+    static mut rl_prompt: *const libc::c_char;\n }\n \n fn main() {\n@@ -511,13 +513,14 @@ calling foreign functions. Some foreign functions, most notably the Windows API,\n conventions. Rust provides a way to tell the compiler which convention to use:\n \n ```rust\n-use std::os::raw::c_int;\n+# #![feature(libc)]\n+extern crate libc;\n \n #[cfg(all(target_os = \"win32\", target_arch = \"x86\"))]\n #[link(name = \"kernel32\")]\n #[allow(non_snake_case)]\n extern \"stdcall\" {\n-    fn SetEnvironmentVariableA(n: *const u8, v: *const u8) -> c_int;\n+    fn SetEnvironmentVariableA(n: *const u8, v: *const u8) -> libc::c_int;\n }\n # fn main() { }\n ```\n@@ -690,11 +693,12 @@ void bar(void *arg);\n We can represent this in Rust with the `c_void` type:\n \n ```rust\n-use std::os::raw::c_void;\n+# #![feature(libc)]\n+extern crate libc;\n \n extern \"C\" {\n-    pub fn foo(arg: *mut c_void);\n-    pub fn bar(arg: *mut c_void);\n+    pub fn foo(arg: *mut libc::c_void);\n+    pub fn bar(arg: *mut libc::c_void);\n }\n # fn main() {}\n ```"}]}