{"sha": "dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiZjFjZGYzNGFhODljZGFiYTFiYjk5OTNlNmFlZDIyMWRmY2ViOTA=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-12-24T09:57:31Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-12-24T09:57:31Z"}, "message": "Fix panic lint", "tree": {"sha": "243f461e3a69163c7ae5b4bf2280c3e6b1c4615f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/243f461e3a69163c7ae5b4bf2280c3e6b1c4615f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90", "html_url": "https://github.com/rust-lang/rust/commit/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "592ca26e902bfa9ed3648db4ef0eeb53a5d598fe", "url": "https://api.github.com/repos/rust-lang/rust/commits/592ca26e902bfa9ed3648db4ef0eeb53a5d598fe", "html_url": "https://github.com/rust-lang/rust/commit/592ca26e902bfa9ed3648db4ef0eeb53a5d598fe"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "40d6e7d4dff8b0dbb81b2a4bd706fd95aa9244e6", "filename": "src/panic.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90/src%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90/src%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpanic.rs?ref=dbf1cdf34aa89cdaba1bb9993e6aed221dfceb90", "patch": "@@ -28,15 +28,22 @@ impl LateLintPass for PanicPass {\n     fn check_expr(&mut self, cx: &LateContext, expr: &Expr) {\n         if_let_chain! {[\n             in_external_macro(cx, expr.span),\n-            let ExprCall(ref fun, ref params) = expr.node,\n+            let ExprBlock(ref block) = expr.node,\n+            let Some(ref ex) = block.expr,\n+            let ExprCall(ref fun, ref params) = ex.node,\n             params.len() == 2,\n             let ExprPath(None, ref path) = fun.node,\n             match_path(path, &BEGIN_UNWIND),\n             let ExprLit(ref lit) = params[0].node,\n             let LitStr(ref string, _) = lit.node,\n-            string.contains('{')\n+            string.contains('{'),\n+            let Some(sp) = cx.sess().codemap()\n+                             .with_expn_info(expr.span.expn_id,\n+                                             |info| info.map(|i| i.call_site))\n         ], {\n-            span_lint(cx, PANIC_PARAMS, expr.span, \"You probably are missing some parameter in your `panic!` call\");\n+\n+            span_lint(cx, PANIC_PARAMS, sp,\n+                      \"You probably are missing some parameter in your `panic!` call\");\n         }}\n     }\n }"}]}