{"sha": "6c87772e3cbeb575aaab2896ded3d16a89d9679d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjODc3NzJlM2NiZWI1NzVhYWFiMjg5NmRlZDNkMTZhODlkOTY3OWQ=", "commit": {"author": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2021-06-29T15:20:22Z"}, "committer": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2021-07-06T18:12:55Z"}, "message": "Rename reserved_prefix lint to reserved_prefixes", "tree": {"sha": "b6e9ec430e94d9df0238ea6cc376114c926b654a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6e9ec430e94d9df0238ea6cc376114c926b654a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c87772e3cbeb575aaab2896ded3d16a89d9679d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c87772e3cbeb575aaab2896ded3d16a89d9679d", "html_url": "https://github.com/rust-lang/rust/commit/6c87772e3cbeb575aaab2896ded3d16a89d9679d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c87772e3cbeb575aaab2896ded3d16a89d9679d/comments", "author": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ecca9a8b1aecd6675d995e89ea2f93635b05500a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ecca9a8b1aecd6675d995e89ea2f93635b05500a", "html_url": "https://github.com/rust-lang/rust/commit/ecca9a8b1aecd6675d995e89ea2f93635b05500a"}], "stats": {"total": 40, "additions": 20, "deletions": 20}, "files": [{"sha": "52bdb4f3e41339a445b8c7f7e50d2423bc646b3a", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6c87772e3cbeb575aaab2896ded3d16a89d9679d/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c87772e3cbeb575aaab2896ded3d16a89d9679d/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=6c87772e3cbeb575aaab2896ded3d16a89d9679d", "patch": "@@ -2973,7 +2973,7 @@ declare_lint_pass! {\n         RUST_2021_INCOMPATIBLE_OR_PATTERNS,\n         LARGE_ASSIGNMENTS,\n         FUTURE_PRELUDE_COLLISIONS,\n-        RESERVED_PREFIX,\n+        RESERVED_PREFIXES,\n         UNSUPPORTED_CALLING_CONVENTIONS,\n     ]\n }\n@@ -3270,13 +3270,13 @@ declare_lint! {\n }\n \n declare_lint! {\n-    /// The `reserved_prefix` lint detects identifiers that will be parsed as a\n+    /// The `reserved_prefixes` lint detects identifiers that will be parsed as a\n     /// prefix instead in Rust 2021.\n     ///\n     /// ### Example\n     ///\n     /// ```rust,compile_fail\n-    /// #![deny(reserved_prefix)]\n+    /// #![deny(reserved_prefixes)]\n     ///\n     /// macro_rules! m {\n     ///     (z $x:expr) => ();\n@@ -3295,7 +3295,7 @@ declare_lint! {\n     ///\n     /// This lint suggests to add whitespace between the `z` and `\"hey\"` tokens\n     /// to keep them separated in Rust 2021.\n-    pub RESERVED_PREFIX,\n+    pub RESERVED_PREFIXES,\n     Allow,\n     \"identifiers that will be parsed as a prefix in Rust 2021\",\n     @future_incompatible = FutureIncompatibleInfo {"}, {"sha": "3f58476296b7336d05683aa430125da532047195", "filename": "compiler/rustc_parse/src/lexer/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6c87772e3cbeb575aaab2896ded3d16a89d9679d/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c87772e3cbeb575aaab2896ded3d16a89d9679d/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs?ref=6c87772e3cbeb575aaab2896ded3d16a89d9679d", "patch": "@@ -4,7 +4,7 @@ use rustc_ast::tokenstream::{Spacing, TokenStream};\n use rustc_errors::{error_code, Applicability, DiagnosticBuilder, FatalError, PResult};\n use rustc_lexer::unescape::{self, Mode};\n use rustc_lexer::{Base, DocStyle, RawStrError};\n-use rustc_session::lint::builtin::RESERVED_PREFIX;\n+use rustc_session::lint::builtin::RESERVED_PREFIXES;\n use rustc_session::lint::BuiltinLintDiagnostics;\n use rustc_session::parse::ParseSess;\n use rustc_span::symbol::{sym, Symbol};\n@@ -526,7 +526,7 @@ impl<'a> StringReader<'a> {\n         } else {\n             // Before Rust 2021, only emit a lint for migration.\n             self.sess.buffer_lint_with_diagnostic(\n-                &RESERVED_PREFIX,\n+                &RESERVED_PREFIXES,\n                 prefix_span,\n                 ast::CRATE_NODE_ID,\n                 &msg,"}, {"sha": "f6b6f7405a665ea4175c01666f68ffd957963b62", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.fixed", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed?ref=6c87772e3cbeb575aaab2896ded3d16a89d9679d", "patch": "@@ -2,7 +2,7 @@\n // run-rustfix\n // compile-flags: -Z unstable-options --edition 2018\n \n-#![warn(reserved_prefix)]\n+#![warn(reserved_prefixes)]\n \n macro_rules! m2 {\n     ($a:tt $b:tt) => {};\n@@ -14,16 +14,16 @@ macro_rules! m3 {\n \n fn main() {\n     m2!(z \"hey\");\n-    //~^ WARNING prefix `z` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `z` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m2!(prefix \"hey\");\n-    //~^ WARNING prefix `prefix` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `prefix` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey #123);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey #hey);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n }\n \n@@ -33,6 +33,6 @@ macro_rules! quote {\n \n quote! {\n     #name = #kind #value\n-    //~^ WARNING prefix `kind` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `kind` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n }"}, {"sha": "2b056245a997c96a959a9b98d9a13140f380cdb8", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs?ref=6c87772e3cbeb575aaab2896ded3d16a89d9679d", "patch": "@@ -2,7 +2,7 @@\n // run-rustfix\n // compile-flags: -Z unstable-options --edition 2018\n \n-#![warn(reserved_prefix)]\n+#![warn(reserved_prefixes)]\n \n macro_rules! m2 {\n     ($a:tt $b:tt) => {};\n@@ -14,16 +14,16 @@ macro_rules! m3 {\n \n fn main() {\n     m2!(z\"hey\");\n-    //~^ WARNING prefix `z` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `z` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m2!(prefix\"hey\");\n-    //~^ WARNING prefix `prefix` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `prefix` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey#123);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey#hey);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n }\n \n@@ -33,6 +33,6 @@ macro_rules! quote {\n \n quote! {\n     #name = #kind#value\n-    //~^ WARNING prefix `kind` is unknown [reserved_prefix]\n+    //~^ WARNING prefix `kind` is unknown [reserved_prefixes]\n     //~| WARNING hard error in Rust 2021\n }"}, {"sha": "ec27b68e2dfe4947f781744800fdb70f20cfa804", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c87772e3cbeb575aaab2896ded3d16a89d9679d/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr?ref=6c87772e3cbeb575aaab2896ded3d16a89d9679d", "patch": "@@ -7,8 +7,8 @@ LL |     m2!(z\"hey\");\n note: the lint level is defined here\n   --> $DIR/reserved-prefixes-migration.rs:5:9\n    |\n-LL | #![warn(reserved_prefix)]\n-   |         ^^^^^^^^^^^^^^^\n+LL | #![warn(reserved_prefixes)]\n+   |         ^^^^^^^^^^^^^^^^^\n    = warning: this is accepted in the current edition (Rust 2018) but is a hard error in Rust 2021!\n    = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021"}]}