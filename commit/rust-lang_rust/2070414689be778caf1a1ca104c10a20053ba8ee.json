{"sha": "2070414689be778caf1a1ca104c10a20053ba8ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwNzA0MTQ2ODliZTc3OGNhZjFhMWNhMTA0YzEwYTIwMDUzYmE4ZWU=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-03-09T23:48:58Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-03-16T18:32:49Z"}, "message": "CI: Set job names.\n\nThis should make it easier to identify what each job is doing when looking at the Travis or Appveyor UI.\n\n- Set `name` for each job in Travis.\n- Move `CI_JOB_NAME` to the front in Appveyor so that it appears first in the UI.", "tree": {"sha": "37d706a1a86e2c2743eb938c827db1b5aa6c3ab7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37d706a1a86e2c2743eb938c827db1b5aa6c3ab7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2070414689be778caf1a1ca104c10a20053ba8ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2070414689be778caf1a1ca104c10a20053ba8ee", "html_url": "https://github.com/rust-lang/rust/commit/2070414689be778caf1a1ca104c10a20053ba8ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2070414689be778caf1a1ca104c10a20053ba8ee/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c8bbf50db0ef90a33f986ba8fc2e1fe129197ff", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c8bbf50db0ef90a33f986ba8fc2e1fe129197ff", "html_url": "https://github.com/rust-lang/rust/commit/2c8bbf50db0ef90a33f986ba8fc2e1fe129197ff"}], "stats": {"total": 110, "additions": 76, "deletions": 34}, "files": [{"sha": "7a8772d7abd63556a991e2dd2f10b8c0ccdbba69", "filename": ".travis.yml", "status": "modified", "additions": 48, "deletions": 6, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/2070414689be778caf1a1ca104c10a20053ba8ee/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/2070414689be778caf1a1ca104c10a20053ba8ee/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=2070414689be778caf1a1ca104c10a20053ba8ee", "patch": "@@ -12,20 +12,27 @@ git:\n   depth: 2\n   submodules: false\n \n+env:\n+  global:\n+    - CI_JOB_NAME=$TRAVIS_JOB_NAME\n+\n matrix:\n   fast_finish: true\n   include:\n     # Images used in testing PR and try-build should be run first.\n     - env: IMAGE=x86_64-gnu-llvm-6.0 RUST_BACKTRACE=1\n+      name: x86_64-gnu-llvm-6.0\n       if: type = pull_request OR branch = auto\n \n     - env: IMAGE=dist-x86_64-linux DEPLOY=1\n+      name: dist-x86_64-linux\n       if: branch = try OR branch = auto\n \n     # \"alternate\" deployments, these are \"nightlies\" but have LLVM assertions\n     # turned on, they're deployed to a different location primarily for\n     # additional testing.\n-    - env: IMAGE=dist-x86_64-linux DEPLOY_ALT=1 CI_JOB_NAME=dist-x86_64-linux-alt\n+    - env: IMAGE=dist-x86_64-linux DEPLOY_ALT=1\n+      name: dist-x86_64-linux-alt\n       if: branch = try OR branch = auto\n \n     - env: >\n@@ -37,9 +44,9 @@ matrix:\n         MACOSX_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n-        CI_JOB_NAME=dist-x86_64-apple-alt\n       os: osx\n       osx_image: xcode9.3-moar\n+      name: dist-x86_64-apple-alt\n       if: branch = auto\n \n     # macOS builders. These are placed near the beginning because they are very\n@@ -60,9 +67,9 @@ matrix:\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n-        CI_JOB_NAME=x86_64-apple\n       os: osx\n       osx_image: xcode9.3-moar\n+      name: x86_64-apple\n       if: branch = auto\n \n     - env: >\n@@ -74,9 +81,9 @@ matrix:\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n-        CI_JOB_NAME=i686-apple\n       os: osx\n       osx_image: xcode9.3-moar\n+      name: i686-apple\n       if: branch = auto\n \n     # OSX builders producing releases. These do not run the full test suite and\n@@ -95,9 +102,9 @@ matrix:\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n         DIST_REQUIRE_ALL_TOOLS=1\n-        CI_JOB_NAME=dist-i686-apple\n       os: osx\n       osx_image: xcode9.3-moar\n+      name: dist-i686-apple\n       if: branch = auto\n \n     - env: >\n@@ -110,81 +117,116 @@ matrix:\n         NO_LLVM_ASSERTIONS=1\n         NO_DEBUG_ASSERTIONS=1\n         DIST_REQUIRE_ALL_TOOLS=1\n-        CI_JOB_NAME=dist-x86_64-apple\n       os: osx\n       osx_image: xcode9.3-moar\n+      name: dist-x86_64-apple\n       if: branch = auto\n \n     # Linux builders, remaining docker images\n     - env: IMAGE=arm-android\n+      name: arm-android\n       if: branch = auto\n     - env: IMAGE=armhf-gnu\n+      name: armhf-gnu\n       if: branch = auto\n     - env: IMAGE=dist-various-1 DEPLOY=1\n+      name: dist-various-1\n       if: branch = auto\n     - env: IMAGE=dist-various-2 DEPLOY=1\n+      name: dist-various-2\n       if: branch = auto\n     - env: IMAGE=dist-aarch64-linux DEPLOY=1\n+      name: dist-aarch64-linux\n       if: branch = auto\n     - env: IMAGE=dist-android DEPLOY=1\n+      name: dist-android\n       if: branch = auto\n     - env: IMAGE=dist-arm-linux DEPLOY=1\n+      name: dist-arm-linux\n       if: branch = auto\n     - env: IMAGE=dist-armhf-linux DEPLOY=1\n+      name: dist-armhf-linux\n       if: branch = auto\n     - env: IMAGE=dist-armv7-linux DEPLOY=1\n+      name: dist-armv7-linux\n       if: branch = auto\n     - env: IMAGE=dist-i586-gnu-i586-i686-musl DEPLOY=1\n+      name: dist-i586-gnu-i586-i686-musl\n       if: branch = auto\n     - env: IMAGE=dist-i686-freebsd DEPLOY=1\n+      name: dist-i686-freebsd\n       if: branch = auto\n     - env: IMAGE=dist-i686-linux DEPLOY=1\n+      name: dist-i686-linux\n       if: branch = auto\n     - env: IMAGE=dist-mips-linux DEPLOY=1\n+      name: dist-mips-linux\n       if: branch = auto\n     - env: IMAGE=dist-mips64-linux DEPLOY=1\n+      name: dist-mips64-linux\n       if: branch = auto\n     - env: IMAGE=dist-mips64el-linux DEPLOY=1\n+      name: dist-mips64el-linux\n       if: branch = auto\n     - env: IMAGE=dist-mipsel-linux DEPLOY=1\n+      name: dist-mipsel-linux\n       if: branch = auto\n     - env: IMAGE=dist-powerpc-linux DEPLOY=1\n+      name: dist-powerpc-linux\n       if: branch = auto\n     - env: IMAGE=dist-powerpc64-linux DEPLOY=1\n+      name: dist-powerpc64-linux\n       if: branch = auto\n     - env: IMAGE=dist-powerpc64le-linux DEPLOY=1\n+      name: dist-powerpc64le-linux\n       if: branch = auto\n     - env: IMAGE=dist-s390x-linux DEPLOY=1\n+      name: dist-s390x-linux\n       if: branch = auto\n     - env: IMAGE=dist-x86_64-freebsd DEPLOY=1\n+      name: dist-x86_64-freebsd\n       if: branch = auto\n     - env: IMAGE=dist-x86_64-musl DEPLOY=1\n+      name: dist-x86_64-musl\n       if: branch = auto\n     - env: IMAGE=dist-x86_64-netbsd DEPLOY=1\n+      name: dist-x86_64-netbsd\n       if: branch = auto\n     - env: IMAGE=asmjs\n+      name: asmjs\n       if: branch = auto\n     - env: IMAGE=i686-gnu\n+      name: i686-gnu\n       if: branch = auto\n     - env: IMAGE=i686-gnu-nopt\n+      name: i686-gnu-nopt\n       if: branch = auto\n     - env: IMAGE=test-various\n+      name: test-various\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu\n+      name: x86_64-gnu\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu-full-bootstrap\n+      name: x86_64-gnu-full-bootstrap\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu-aux\n+      name: x86_64-gnu-aux\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu-tools\n+      name: x86_64-gnu-tools\n       if: branch = auto OR (type = pull_request AND commit_message =~ /(?i:^update.*\\b(rls|rustfmt|clippy|miri|cargo)\\b)/)\n     - env: IMAGE=x86_64-gnu-debug\n+      name: x86_64-gnu-debug\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu-nopt\n+      name: x86_64-gnu-nopt\n       if: branch = auto\n     - env: IMAGE=x86_64-gnu-distcheck\n+      name: x86_64-gnu-distcheck\n       if: branch = auto\n     - env: IMAGE=mingw-check\n+      name: mingw-check\n       if: type = pull_request OR branch = auto\n \n     - stage: publish toolstate"}, {"sha": "ab0a29d2752b532195dba8f2c54ccf73186bb44e", "filename": "appveyor.yml", "status": "modified", "additions": 28, "deletions": 28, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/2070414689be778caf1a1ca104c10a20053ba8ee/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/2070414689be778caf1a1ca104c10a20053ba8ee/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=2070414689be778caf1a1ca104c10a20053ba8ee", "patch": "@@ -10,34 +10,34 @@ environment:\n \n   matrix:\n   # 32/64 bit MSVC tests\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: x86_64-msvc\n+    MSYS_BITS: 64\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n     SCRIPT: python x.py test\n-    CI_JOB_NAME: x86_64-msvc\n-  - MSYS_BITS: 32\n+  - CI_JOB_NAME: i686-msvc-1\n+    MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n     SCRIPT: make appveyor-subset-1\n-    CI_JOB_NAME: i686-msvc-1\n-  - MSYS_BITS: 32\n+  - CI_JOB_NAME: i686-msvc-2\n+    MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc\n     SCRIPT: make appveyor-subset-2\n-    CI_JOB_NAME: i686-msvc-2\n \n   # MSVC aux tests\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: x86_64-msvc-aux\n+    MSYS_BITS: 64\n     RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-    CI_JOB_NAME: x86_64-msvc-aux\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: x86_64-msvc-cargo\n+    MSYS_BITS: 64\n     SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-    CI_JOB_NAME: x86_64-msvc-cargo\n \n   # MSVC tools tests\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: x86_64-msvc-tools\n+    MSYS_BITS: 64\n     SCRIPT: src/ci/docker/x86_64-gnu-tools/checktools.sh x.py /tmp/toolstates.json windows\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --save-toolstates=/tmp/toolstates.json --enable-test-miri\n-    CI_JOB_NAME: x86_64-msvc-tools\n \n   # 32/64-bit MinGW builds.\n   #\n@@ -52,72 +52,72 @@ environment:\n   # bucket, but they cleraly didn't originate there! The downloads originally\n   # came from the mingw-w64 SourceForge download site. Unfortunately\n   # SourceForge is notoriously flaky, so we mirror it on our own infrastructure.\n-  - MSYS_BITS: 32\n+  - CI_JOB_NAME: i686-mingw-1\n+    MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n     SCRIPT: make appveyor-subset-1\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n-    CI_JOB_NAME: i686-mingw-1\n-  - MSYS_BITS: 32\n+  - CI_JOB_NAME: i686-mingw-2\n+    MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu\n     SCRIPT: make appveyor-subset-2\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n-    CI_JOB_NAME: i686-mingw-2\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: x86_64-mingw\n+    MSYS_BITS: 64\n     SCRIPT: python x.py test\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n     MINGW_DIR: mingw64\n-    CI_JOB_NAME: x86_64-mingw\n \n   # 32/64 bit MSVC and GNU deployment\n-  - RUST_CONFIGURE_ARGS: >\n+  - CI_JOB_NAME: dist-x86_64-msvc\n+    RUST_CONFIGURE_ARGS: >\n       --build=x86_64-pc-windows-msvc\n       --target=x86_64-pc-windows-msvc,aarch64-pc-windows-msvc\n       --enable-full-tools\n       --enable-profiler\n     SCRIPT: python x.py dist\n     DIST_REQUIRE_ALL_TOOLS: 1\n     DEPLOY: 1\n-    CI_JOB_NAME: dist-x86_64-msvc\n-  - RUST_CONFIGURE_ARGS: >\n+  - CI_JOB_NAME: dist-i686-msvc\n+    RUST_CONFIGURE_ARGS: >\n       --build=i686-pc-windows-msvc\n       --target=i586-pc-windows-msvc\n       --enable-full-tools\n       --enable-profiler\n     SCRIPT: python x.py dist\n     DIST_REQUIRE_ALL_TOOLS: 1\n     DEPLOY: 1\n-    CI_JOB_NAME: dist-i686-msvc\n-  - MSYS_BITS: 32\n+  - CI_JOB_NAME: dist-i686-mingw\n+    MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-full-tools\n     SCRIPT: python x.py dist\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n     DIST_REQUIRE_ALL_TOOLS: 1\n     DEPLOY: 1\n-    CI_JOB_NAME: dist-i686-mingw\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: dist-x86_64-mingw\n+    MSYS_BITS: 64\n     SCRIPT: python x.py dist\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-full-tools\n     MINGW_URL: https://s3-us-west-1.amazonaws.com/rust-lang-ci2/rust-ci-mirror\n     MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n     MINGW_DIR: mingw64\n     DIST_REQUIRE_ALL_TOOLS: 1\n     DEPLOY: 1\n-    CI_JOB_NAME: dist-x86_64-mingw\n \n   # \"alternate\" deployment, see .travis.yml for more info\n-  - MSYS_BITS: 64\n+  - CI_JOB_NAME: dist-x86_64-msvc-alt\n+    MSYS_BITS: 64\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-extended --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY_ALT: 1\n-    CI_JOB_NAME: dist-x86_64-msvc-alt\n \n matrix:\n   fast_finish: true"}]}