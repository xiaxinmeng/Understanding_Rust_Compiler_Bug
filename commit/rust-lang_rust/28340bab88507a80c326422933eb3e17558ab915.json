{"sha": "28340bab88507a80c326422933eb3e17558ab915", "node_id": "C_kwDOAAsO6NoAKDI4MzQwYmFiODg1MDdhODBjMzI2NDIyOTMzZWIzZTE3NTU4YWI5MTU", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-01-30T09:41:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-30T09:41:44Z"}, "message": "Rollup merge of #101569 - m-ou-se:alloc-no-rexport-argumentv1, r=thomcc\n\nDon't re-export private/unstable ArgumentV1 from `alloc`.\n\nThe `alloc::fmt::ArgumentV1` re-export was marked as `#[stable]` even though the original `core::fmt::ArgumentV1` is `#[unstable]` (and `#[doc(hidden)]`).\n\n(It wasn't usable though:\n\n```\nerror[E0658]: use of unstable library feature 'fmt_internals': internal to format_args!\n --> src/main.rs:4:12\n  |\n4 |     let _: alloc::fmt::ArgumentV1 = todo!();\n  |            ^^^^^^^^^^^^^^^^^^^^^^\n  |\n  = help: add `#![feature(fmt_internals)]` to the crate attributes to enable\n```\n)\n\nPart of #99012", "tree": {"sha": "5245c24ded69c157d02b598777abef3bdacee174", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5245c24ded69c157d02b598777abef3bdacee174"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/28340bab88507a80c326422933eb3e17558ab915", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj15DYCRBK7hj4Ov3rIwAAZpUIAAUszKQitSARfA46AcrBb7ja\nn4lu9QNS15jDkwKHwN36a2dzenPxINSJOajeuoN1z59qOZocmDXMx4osjcx0Gqq4\n+lAR/GL7HSHq9wDyQTpmv/IpqmEyqpvXTPz07BGemlsVBg3fVIdqRUwiS0CyoZQE\nJ4vwP/S3HyWs6oQLAdOCIEWVtKjStzlBLvt9E54DxWfWbYBmJlr8LR/y1jAzRbTE\nVB0Jd8HZ5hTGafB1FOubvTcc6v07egauEECbAABZULJBt5uHJeURN5y9KQKmn+53\nnvnqV0f2pPIxqPkq41H4HvUTE7/uxXCK9lu48x1uU99xtoOmJTFOHqJTZcXE+O4=\n=SeZJ\n-----END PGP SIGNATURE-----\n", "payload": "tree 5245c24ded69c157d02b598777abef3bdacee174\nparent f55b0022db8dccc6aa6bf3f650b562eaec0fdc54\nparent 47adb652d3bb279032ac51adefc6b030d2ae60dc\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1675071704 +0530\ncommitter GitHub <noreply@github.com> 1675071704 +0530\n\nRollup merge of #101569 - m-ou-se:alloc-no-rexport-argumentv1, r=thomcc\n\nDon't re-export private/unstable ArgumentV1 from `alloc`.\n\nThe `alloc::fmt::ArgumentV1` re-export was marked as `#[stable]` even though the original `core::fmt::ArgumentV1` is `#[unstable]` (and `#[doc(hidden)]`).\n\n(It wasn't usable though:\n\n```\nerror[E0658]: use of unstable library feature 'fmt_internals': internal to format_args!\n --> src/main.rs:4:12\n  |\n4 |     let _: alloc::fmt::ArgumentV1 = todo!();\n  |            ^^^^^^^^^^^^^^^^^^^^^^\n  |\n  = help: add `#![feature(fmt_internals)]` to the crate attributes to enable\n```\n)\n\nPart of #99012\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/28340bab88507a80c326422933eb3e17558ab915", "html_url": "https://github.com/rust-lang/rust/commit/28340bab88507a80c326422933eb3e17558ab915", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/28340bab88507a80c326422933eb3e17558ab915/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f55b0022db8dccc6aa6bf3f650b562eaec0fdc54", "url": "https://api.github.com/repos/rust-lang/rust/commits/f55b0022db8dccc6aa6bf3f650b562eaec0fdc54", "html_url": "https://github.com/rust-lang/rust/commit/f55b0022db8dccc6aa6bf3f650b562eaec0fdc54"}, {"sha": "47adb652d3bb279032ac51adefc6b030d2ae60dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/47adb652d3bb279032ac51adefc6b030d2ae60dc", "html_url": "https://github.com/rust-lang/rust/commit/47adb652d3bb279032ac51adefc6b030d2ae60dc"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "1da86e1a46a572149937f8fcd7de92c942da5cfe", "filename": "library/alloc/src/fmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/28340bab88507a80c326422933eb3e17558ab915/library%2Falloc%2Fsrc%2Ffmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/28340bab88507a80c326422933eb3e17558ab915/library%2Falloc%2Fsrc%2Ffmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Ffmt.rs?ref=28340bab88507a80c326422933eb3e17558ab915", "patch": "@@ -558,7 +558,7 @@ pub use core::fmt::Alignment;\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub use core::fmt::Error;\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-pub use core::fmt::{write, ArgumentV1, Arguments};\n+pub use core::fmt::{write, Arguments};\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub use core::fmt::{Binary, Octal};\n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "e0fa1fe28246e7be95de552a3642e0666adb8d38", "filename": "tests/pretty/issue-4264.pp", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/28340bab88507a80c326422933eb3e17558ab915/tests%2Fpretty%2Fissue-4264.pp", "raw_url": "https://github.com/rust-lang/rust/raw/28340bab88507a80c326422933eb3e17558ab915/tests%2Fpretty%2Fissue-4264.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpretty%2Fissue-4264.pp?ref=28340bab88507a80c326422933eb3e17558ab915", "patch": "@@ -34,10 +34,11 @@\n                     ((::alloc::fmt::format as\n                             for<'a> fn(Arguments<'a>) -> String {format})(((<#[lang = \"format_arguments\"]>::new_v1\n                                 as\n-                                fn(&[&'static str], &[ArgumentV1<'_>]) -> Arguments<'_> {Arguments::<'_>::new_v1})((&([(\"test\"\n+                                fn(&[&'static str], &[core::fmt::ArgumentV1<'_>]) -> Arguments<'_> {Arguments::<'_>::new_v1})((&([(\"test\"\n                                             as &str)] as [&str; 1]) as &[&str; 1]),\n-                            (&([] as [ArgumentV1<'_>; 0]) as &[ArgumentV1<'_>; 0])) as\n-                            Arguments<'_>)) as String);\n+                            (&([] as [core::fmt::ArgumentV1<'_>; 0]) as\n+                                &[core::fmt::ArgumentV1<'_>; 0])) as Arguments<'_>)) as\n+                        String);\n                 (res as String)\n             } as String);\n     } as ())"}, {"sha": "3480a2ec8154806572d6255a4523745a7873f3b0", "filename": "tests/ui/fmt/ifmt-unimpl.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/28340bab88507a80c326422933eb3e17558ab915/tests%2Fui%2Ffmt%2Fifmt-unimpl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/28340bab88507a80c326422933eb3e17558ab915/tests%2Fui%2Ffmt%2Fifmt-unimpl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffmt%2Fifmt-unimpl.stderr?ref=28340bab88507a80c326422933eb3e17558ab915", "patch": "@@ -15,7 +15,7 @@ LL |     format!(\"{:X}\", \"3\");\n              NonZeroIsize\n            and 21 others\n    = note: required for `&str` to implement `UpperHex`\n-note: required by a bound in `ArgumentV1::<'a>::new_upper_hex`\n+note: required by a bound in `core::fmt::ArgumentV1::<'a>::new_upper_hex`\n   --> $SRC_DIR/core/src/fmt/mod.rs:LL:COL\n    = note: this error originates in the macro `$crate::__export::format_args` which comes from the expansion of the macro `arg_new` (in Nightly builds, run with -Z macro-backtrace for more info)\n "}, {"sha": "d43f4f0d9570b0ce3ffc8c32bd01baf2d887e53a", "filename": "tests/ui/fmt/send-sync.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/28340bab88507a80c326422933eb3e17558ab915/tests%2Fui%2Ffmt%2Fsend-sync.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/28340bab88507a80c326422933eb3e17558ab915/tests%2Fui%2Ffmt%2Fsend-sync.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffmt%2Fsend-sync.stderr?ref=28340bab88507a80c326422933eb3e17558ab915", "patch": "@@ -6,11 +6,11 @@ LL |     send(format_args!(\"{:?}\", c));\n    |     |\n    |     required by a bound introduced by this call\n    |\n-   = help: within `[ArgumentV1<'_>]`, the trait `Sync` is not implemented for `core::fmt::Opaque`\n+   = help: within `[core::fmt::ArgumentV1<'_>]`, the trait `Sync` is not implemented for `core::fmt::Opaque`\n    = note: required because it appears within the type `&core::fmt::Opaque`\n    = note: required because it appears within the type `ArgumentV1<'_>`\n    = note: required because it appears within the type `[ArgumentV1<'_>]`\n-   = note: required for `&[ArgumentV1<'_>]` to implement `Send`\n+   = note: required for `&[core::fmt::ArgumentV1<'_>]` to implement `Send`\n    = note: required because it appears within the type `Arguments<'_>`\n note: required by a bound in `send`\n   --> $DIR/send-sync.rs:1:12"}]}