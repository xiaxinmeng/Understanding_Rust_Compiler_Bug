{"sha": "1e74f285998daf6809d2d418d2bbe1ab094e694e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFlNzRmMjg1OTk4ZGFmNjgwOWQyZDQxOGQyYmJlMWFiMDk0ZTY5NGU=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-07-14T20:19:26Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-14T20:19:26Z"}, "message": "Rollup merge of #74252 - shepmaster:bootstrap-rust-destdir, r=Mark-Simulacrum\n\nDon't allow `DESTDIR` to influence LLVM builds\n\nWhen running a command like `DESTDIR=foo x.py install` in a completely\nclean build directory, this will cause LLVM to be installed into\n`DESTDIR`, which then causes the build to fail later when it attempts\nto *use* those LLVM files.", "tree": {"sha": "74d7da7508e04c3dd2e0e66e41195f1ad02560ca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74d7da7508e04c3dd2e0e66e41195f1ad02560ca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1e74f285998daf6809d2d418d2bbe1ab094e694e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfDhNOCRBK7hj4Ov3rIwAAdHIIAIpPgt6ax3Q/U8eUVHOqyQxO\nWxulqy1FnNKWxNYfDwvo3CRGAagycDZwha9SGFkFm0iTe3B+6twPd8wC7Ud3yqWu\nxFXXs5VTu1WPSC7va70CB5GsdXFe9VQuGWmcDOx82N1JvZQjhjR2gikK4yBiX4NI\nEAVmEzncBcUFR7Vr+nkVfEEbmAy36LOxfnQlTHQcL8vt4ZK5aWDeA6W1JNXO2iXh\nVL3N9GgPpc176zyAGt5mAQqZKKr6wVrTpfOhwJjQvLiNngpaaoeFlcY4IMAMho4+\nFh80Pyr+AGfHf5SohZt0ClO9v9JXiefp8zsRsnsTYcbTTTsKrTDaGYX9t6tasiw=\n=7aiU\n-----END PGP SIGNATURE-----\n", "payload": "tree 74d7da7508e04c3dd2e0e66e41195f1ad02560ca\nparent a364c0a782948e48333e296bcb089119394de9e5\nparent 9741fbd202b2b55de95abe1eb7f3d8185e312444\nauthor Manish Goregaokar <manishsmail@gmail.com> 1594757966 -0700\ncommitter GitHub <noreply@github.com> 1594757966 -0700\n\nRollup merge of #74252 - shepmaster:bootstrap-rust-destdir, r=Mark-Simulacrum\n\nDon't allow `DESTDIR` to influence LLVM builds\n\nWhen running a command like `DESTDIR=foo x.py install` in a completely\nclean build directory, this will cause LLVM to be installed into\n`DESTDIR`, which then causes the build to fail later when it attempts\nto *use* those LLVM files.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1e74f285998daf6809d2d418d2bbe1ab094e694e", "html_url": "https://github.com/rust-lang/rust/commit/1e74f285998daf6809d2d418d2bbe1ab094e694e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1e74f285998daf6809d2d418d2bbe1ab094e694e/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a364c0a782948e48333e296bcb089119394de9e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/a364c0a782948e48333e296bcb089119394de9e5", "html_url": "https://github.com/rust-lang/rust/commit/a364c0a782948e48333e296bcb089119394de9e5"}, {"sha": "9741fbd202b2b55de95abe1eb7f3d8185e312444", "url": "https://api.github.com/repos/rust-lang/rust/commits/9741fbd202b2b55de95abe1eb7f3d8185e312444", "html_url": "https://github.com/rust-lang/rust/commit/9741fbd202b2b55de95abe1eb7f3d8185e312444"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "ca0b3ddc920ed6d9faeda24a0578266d7032646a", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1e74f285998daf6809d2d418d2bbe1ab094e694e/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1e74f285998daf6809d2d418d2bbe1ab094e694e/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=1e74f285998daf6809d2d418d2bbe1ab094e694e", "patch": "@@ -347,6 +347,11 @@ fn configure_cmake(\n     // LLVM and LLD builds can produce a lot of those and hit CI limits on log size.\n     cfg.define(\"CMAKE_INSTALL_MESSAGE\", \"LAZY\");\n \n+    // Do not allow the user's value of DESTDIR to influence where\n+    // LLVM will install itself. LLVM must always be installed in our\n+    // own build directories.\n+    cfg.env(\"DESTDIR\", \"\");\n+\n     if builder.config.ninja {\n         cfg.generator(\"Ninja\");\n     }"}]}