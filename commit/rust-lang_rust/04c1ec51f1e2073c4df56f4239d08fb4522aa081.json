{"sha": "04c1ec51f1e2073c4df56f4239d08fb4522aa081", "node_id": "C_kwDOAAsO6NoAKDA0YzFlYzUxZjFlMjA3M2M0ZGY1NmY0MjM5ZDA4ZmI0NTIyYWEwODE", "commit": {"author": {"name": "Wilfred Hughes", "email": "me@wilfred.me.uk", "date": "2021-07-28T06:13:42Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2021-10-21T13:30:46Z"}, "message": "Clarify undefined behaviour for binary heap, btree and hashset\n\nPreviously, it wasn't clear whether \"This could include\" was referring\nto logic errors, or undefined behaviour. Tweak wording to clarify this\nsentence does not relate to UB.", "tree": {"sha": "bf77872a96d795ff02e06ae0954999adc6a148de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bf77872a96d795ff02e06ae0954999adc6a148de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04c1ec51f1e2073c4df56f4239d08fb4522aa081", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04c1ec51f1e2073c4df56f4239d08fb4522aa081", "html_url": "https://github.com/rust-lang/rust/commit/04c1ec51f1e2073c4df56f4239d08fb4522aa081", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04c1ec51f1e2073c4df56f4239d08fb4522aa081/comments", "author": {"login": "Wilfred", "id": 70800, "node_id": "MDQ6VXNlcjcwODAw", "avatar_url": "https://avatars.githubusercontent.com/u/70800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Wilfred", "html_url": "https://github.com/Wilfred", "followers_url": "https://api.github.com/users/Wilfred/followers", "following_url": "https://api.github.com/users/Wilfred/following{/other_user}", "gists_url": "https://api.github.com/users/Wilfred/gists{/gist_id}", "starred_url": "https://api.github.com/users/Wilfred/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Wilfred/subscriptions", "organizations_url": "https://api.github.com/users/Wilfred/orgs", "repos_url": "https://api.github.com/users/Wilfred/repos", "events_url": "https://api.github.com/users/Wilfred/events{/privacy}", "received_events_url": "https://api.github.com/users/Wilfred/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e015ef5b2633960e7653b744d7a1c3d1d336313a", "url": "https://api.github.com/repos/rust-lang/rust/commits/e015ef5b2633960e7653b744d7a1c3d1d336313a", "html_url": "https://github.com/rust-lang/rust/commit/e015ef5b2633960e7653b744d7a1c3d1d336313a"}], "stats": {"total": 22, "additions": 11, "deletions": 11}, "files": [{"sha": "d7620c68f2cae7cb62c8210f27ccc369d577a8b4", "filename": "library/alloc/src/collections/binary_heap.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbinary_heap.rs?ref=04c1ec51f1e2073c4df56f4239d08fb4522aa081", "patch": "@@ -162,9 +162,9 @@ use super::SpecExtend;\n /// item's ordering relative to any other item, as determined by the [`Ord`]\n /// trait, changes while it is in the heap. This is normally only possible\n /// through [`Cell`], [`RefCell`], global state, I/O, or unsafe code. The\n-/// behavior resulting from such a logic error is not specified, but will\n-/// not result in undefined behavior. This could include panics, incorrect\n-/// results, aborts, memory leaks, and non-termination.\n+/// behavior resulting from such a logic error is not specified (it\n+/// could include panics, incorrect results, aborts, memory leaks, or\n+/// non-termination) but will not be undefined behavior.\n ///\n /// # Examples\n ///"}, {"sha": "07920a6dba61978514032192cbe0443b3655d4e2", "filename": "library/alloc/src/collections/btree/map.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap.rs?ref=04c1ec51f1e2073c4df56f4239d08fb4522aa081", "patch": "@@ -61,9 +61,9 @@ pub(super) const MIN_LEN: usize = node::MIN_LEN_AFTER_SPLIT;\n /// It is a logic error for a key to be modified in such a way that the key's ordering relative to\n /// any other key, as determined by the [`Ord`] trait, changes while it is in the map. This is\n /// normally only possible through [`Cell`], [`RefCell`], global state, I/O, or unsafe code.\n-/// The behavior resulting from such a logic error is not specified, but will not result in\n-/// undefined behavior. This could include panics, incorrect results, aborts, memory leaks, and\n-/// non-termination.\n+/// The behavior resulting from such a logic error is not specified (it could include panics,\n+/// incorrect results, aborts, memory leaks, or non-termination) but will not be undefined\n+/// behavior.\n ///\n /// [B-Tree]: https://en.wikipedia.org/wiki/B-tree\n /// [`Cell`]: core::cell::Cell"}, {"sha": "237e0107f247585c169202c1c6afa5b5d35b174a", "filename": "library/alloc/src/collections/btree/set.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fset.rs?ref=04c1ec51f1e2073c4df56f4239d08fb4522aa081", "patch": "@@ -23,9 +23,9 @@ use super::Recover;\n /// It is a logic error for an item to be modified in such a way that the item's ordering relative\n /// to any other item, as determined by the [`Ord`] trait, changes while it is in the set. This is\n /// normally only possible through [`Cell`], [`RefCell`], global state, I/O, or unsafe code.\n-/// The behavior resulting from such a logic error is not specified, but will not result in\n-/// undefined behavior. This could include panics, incorrect results, aborts, memory leaks, and\n-/// non-termination.\n+/// The behavior resulting from such a logic error is not specified (it could include panics,\n+/// incorrect results, aborts, memory leaks, or non-termination) but will not be undefined\n+/// behavior.\n ///\n /// [`Ord`]: core::cmp::Ord\n /// [`Cell`]: core::cell::Cell"}, {"sha": "546c43faecfdc6f5f3bbc5b15d16028bcfdd5361", "filename": "library/std/src/collections/hash/set.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fset.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04c1ec51f1e2073c4df56f4239d08fb4522aa081/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fset.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fset.rs?ref=04c1ec51f1e2073c4df56f4239d08fb4522aa081", "patch": "@@ -38,8 +38,8 @@ use super::map::{map_try_reserve_error, RandomState};\n /// determined by the [`Eq`] trait, changes while it is in the set. This is\n /// normally only possible through [`Cell`], [`RefCell`], global state, I/O, or\n /// unsafe code. The behavior resulting from such a logic error is not\n-/// specified, but will not result in undefined behavior. This could include\n-/// panics, incorrect results, aborts, memory leaks, and non-termination.\n+/// specified (it could include panics, incorrect results, aborts, memory\n+/// leaks, or non-termination) but will not be undefined behavior.\n ///\n /// # Examples\n ///"}]}