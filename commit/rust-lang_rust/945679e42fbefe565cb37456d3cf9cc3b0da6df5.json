{"sha": "945679e42fbefe565cb37456d3cf9cc3b0da6df5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk0NTY3OWU0MmZiZWZlNTY1Y2IzNzQ1NmQzY2Y5Y2MzYjBkYTZkZjU=", "commit": {"author": {"name": "arsdragonfly", "email": "arsdragonfly@gmail.com", "date": "2019-09-27T21:33:14Z"}, "committer": {"name": "arsdragonfly", "email": "arsdragonfly@gmail.com", "date": "2019-09-27T21:33:14Z"}, "message": "Fix tests", "tree": {"sha": "24be462aff4959fb7b6adb1b1577e85237119fd5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/24be462aff4959fb7b6adb1b1577e85237119fd5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/945679e42fbefe565cb37456d3cf9cc3b0da6df5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/945679e42fbefe565cb37456d3cf9cc3b0da6df5", "html_url": "https://github.com/rust-lang/rust/commit/945679e42fbefe565cb37456d3cf9cc3b0da6df5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/945679e42fbefe565cb37456d3cf9cc3b0da6df5/comments", "author": {"login": "arsdragonfly", "id": 4067473, "node_id": "MDQ6VXNlcjQwNjc0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4067473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arsdragonfly", "html_url": "https://github.com/arsdragonfly", "followers_url": "https://api.github.com/users/arsdragonfly/followers", "following_url": "https://api.github.com/users/arsdragonfly/following{/other_user}", "gists_url": "https://api.github.com/users/arsdragonfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/arsdragonfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arsdragonfly/subscriptions", "organizations_url": "https://api.github.com/users/arsdragonfly/orgs", "repos_url": "https://api.github.com/users/arsdragonfly/repos", "events_url": "https://api.github.com/users/arsdragonfly/events{/privacy}", "received_events_url": "https://api.github.com/users/arsdragonfly/received_events", "type": "User", "site_admin": false}, "committer": {"login": "arsdragonfly", "id": 4067473, "node_id": "MDQ6VXNlcjQwNjc0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/4067473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arsdragonfly", "html_url": "https://github.com/arsdragonfly", "followers_url": "https://api.github.com/users/arsdragonfly/followers", "following_url": "https://api.github.com/users/arsdragonfly/following{/other_user}", "gists_url": "https://api.github.com/users/arsdragonfly/gists{/gist_id}", "starred_url": "https://api.github.com/users/arsdragonfly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arsdragonfly/subscriptions", "organizations_url": "https://api.github.com/users/arsdragonfly/orgs", "repos_url": "https://api.github.com/users/arsdragonfly/repos", "events_url": "https://api.github.com/users/arsdragonfly/events{/privacy}", "received_events_url": "https://api.github.com/users/arsdragonfly/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84340db87aed477f61bf46ba5e4a75f3eb672237", "url": "https://api.github.com/repos/rust-lang/rust/commits/84340db87aed477f61bf46ba5e4a75f3eb672237", "html_url": "https://github.com/rust-lang/rust/commit/84340db87aed477f61bf46ba5e4a75f3eb672237"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "327d15046f52ad532d6c73208f0b1b716b8cc00f", "filename": "editors/code/src/test/utils/diagnotics/rust.test.ts", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/945679e42fbefe565cb37456d3cf9cc3b0da6df5/editors%2Fcode%2Fsrc%2Ftest%2Futils%2Fdiagnotics%2Frust.test.ts", "raw_url": "https://github.com/rust-lang/rust/raw/945679e42fbefe565cb37456d3cf9cc3b0da6df5/editors%2Fcode%2Fsrc%2Ftest%2Futils%2Fdiagnotics%2Frust.test.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Ftest%2Futils%2Fdiagnotics%2Frust.test.ts?ref=945679e42fbefe565cb37456d3cf9cc3b0da6df5", "patch": "@@ -50,7 +50,7 @@ describe('mapRustDiagnosticToVsCode', () => {\n             ].join('\\n')\n         );\n         assert.strictEqual(diagnostic.code, 'E0053');\n-        assert.strictEqual(diagnostic.tags, undefined);\n+        assert.deepStrictEqual(diagnostic.tags, []);\n \n         // No related information\n         assert.deepStrictEqual(diagnostic.relatedInformation, []);\n@@ -115,7 +115,7 @@ describe('mapRustDiagnosticToVsCode', () => {\n         );\n         assert.strictEqual(diagnostic.code, 'E0061');\n         assert.strictEqual(diagnostic.source, 'rustc');\n-        assert.strictEqual(diagnostic.tags, undefined);\n+        assert.deepStrictEqual(diagnostic.tags, []);\n \n         // One related information for the original definition\n         const relatedInformation = diagnostic.relatedInformation;\n@@ -149,7 +149,7 @@ describe('mapRustDiagnosticToVsCode', () => {\n             ].join('\\n')\n         );\n         assert.strictEqual(diagnostic.code, 'trivially_copy_pass_by_ref');\n-        assert.strictEqual(diagnostic.tags, undefined);\n+        assert.deepStrictEqual(diagnostic.tags, []);\n \n         // One related information for the lint definition\n         const relatedInformation = diagnostic.relatedInformation;\n@@ -189,7 +189,7 @@ describe('mapRustDiagnosticToVsCode', () => {\n         );\n         assert.strictEqual(diagnostic.code, 'E0308');\n         assert.strictEqual(diagnostic.source, 'rustc');\n-        assert.strictEqual(diagnostic.tags, undefined);\n+        assert.deepStrictEqual(diagnostic.tags, []);\n \n         // No related information\n         assert.deepStrictEqual(diagnostic.relatedInformation, []);"}, {"sha": "cd02ee46c9e94ace6e32a38903681daa39d13121", "filename": "editors/code/src/utils/diagnostics/rust.ts", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/945679e42fbefe565cb37456d3cf9cc3b0da6df5/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts", "raw_url": "https://github.com/rust-lang/rust/raw/945679e42fbefe565cb37456d3cf9cc3b0da6df5/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futils%2Fdiagnostics%2Frust.ts?ref=945679e42fbefe565cb37456d3cf9cc3b0da6df5", "patch": "@@ -213,6 +213,7 @@ export function mapRustDiagnosticToVsCode(\n     vd.source = source;\n     vd.code = code;\n     vd.relatedInformation = [];\n+    vd.tags = [];\n \n     for (const secondarySpan of secondarySpans) {\n         const related = mapSecondarySpanToRelated(secondarySpan);\n@@ -246,8 +247,6 @@ export function mapRustDiagnosticToVsCode(\n         vd.message += `\\n${primarySpanLabel}`;\n     }\n \n-    vd.tags = []\n-\n     if (isUnusedOrUnnecessary(rd)) {\n         vd.tags.push(vscode.DiagnosticTag.Unnecessary);\n     }"}]}