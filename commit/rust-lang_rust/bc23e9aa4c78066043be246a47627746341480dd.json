{"sha": "bc23e9aa4c78066043be246a47627746341480dd", "node_id": "C_kwDOAAsO6NoAKGJjMjNlOWFhNGM3ODA2NjA0M2JlMjQ2YTQ3NjI3NzQ2MzQxNDgwZGQ", "commit": {"author": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2023-01-24T12:11:00Z"}, "committer": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2023-01-27T13:28:52Z"}, "message": "Improve tests for FFI attr validation", "tree": {"sha": "3903548cd6f7db9c003a9a314a30f5c88cb83585", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3903548cd6f7db9c003a9a314a30f5c88cb83585"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bc23e9aa4c78066043be246a47627746341480dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bc23e9aa4c78066043be246a47627746341480dd", "html_url": "https://github.com/rust-lang/rust/commit/bc23e9aa4c78066043be246a47627746341480dd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bc23e9aa4c78066043be246a47627746341480dd/comments", "author": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "committer": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e04e678dca99db95c28a3aa7091d4fa800dfb61", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e04e678dca99db95c28a3aa7091d4fa800dfb61", "html_url": "https://github.com/rust-lang/rust/commit/6e04e678dca99db95c28a3aa7091d4fa800dfb61"}], "stats": {"total": 72, "additions": 69, "deletions": 3}, "files": [{"sha": "aa20a4d4c653a871d276fdf45ed00f7fae764ccf", "filename": "tests/ui/ffi_const.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_const.rs?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -3,3 +3,13 @@\n \n #[ffi_const] //~ ERROR `#[ffi_const]` may only be used on foreign functions\n pub fn foo() {}\n+\n+#[ffi_const] //~ ERROR `#[ffi_const]` may only be used on foreign functions\n+macro_rules! bar {\n+    () => ()\n+}\n+\n+extern \"C\" {\n+    #[ffi_const] //~ ERROR `#[ffi_const]` may only be used on foreign functions\n+    static INT: i32;\n+}"}, {"sha": "394b98f89712a6f7380d1921e24132a89f4b0b52", "filename": "tests/ui/ffi_const.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_const.stderr?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -4,6 +4,18 @@ error[E0756]: `#[ffi_const]` may only be used on foreign functions\n LL | #[ffi_const]\n    | ^^^^^^^^^^^^\n \n-error: aborting due to previous error\n+error[E0756]: `#[ffi_const]` may only be used on foreign functions\n+  --> $DIR/ffi_const.rs:7:1\n+   |\n+LL | #[ffi_const]\n+   | ^^^^^^^^^^^^\n+\n+error[E0756]: `#[ffi_const]` may only be used on foreign functions\n+  --> $DIR/ffi_const.rs:13:5\n+   |\n+LL |     #[ffi_const]\n+   |     ^^^^^^^^^^^^\n+\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0756`."}, {"sha": "6d2f3a614ec97154f344223a35be02d6c8ed216e", "filename": "tests/ui/ffi_pure.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_pure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_pure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_pure.rs?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -3,3 +3,13 @@\n \n #[ffi_pure] //~ ERROR `#[ffi_pure]` may only be used on foreign functions\n pub fn foo() {}\n+\n+#[ffi_pure] //~ ERROR `#[ffi_pure]` may only be used on foreign functions\n+macro_rules! bar {\n+    () => ()\n+}\n+\n+extern \"C\" {\n+    #[ffi_pure] //~ ERROR `#[ffi_pure]` may only be used on foreign functions\n+    static INT: i32;\n+}"}, {"sha": "8b61a4b609fc08e9e1f1dffbbf9e0be36615147d", "filename": "tests/ui/ffi_pure.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_pure.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_pure.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_pure.stderr?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -4,6 +4,18 @@ error[E0755]: `#[ffi_pure]` may only be used on foreign functions\n LL | #[ffi_pure]\n    | ^^^^^^^^^^^\n \n-error: aborting due to previous error\n+error[E0755]: `#[ffi_pure]` may only be used on foreign functions\n+  --> $DIR/ffi_pure.rs:7:1\n+   |\n+LL | #[ffi_pure]\n+   | ^^^^^^^^^^^\n+\n+error[E0755]: `#[ffi_pure]` may only be used on foreign functions\n+  --> $DIR/ffi_pure.rs:13:5\n+   |\n+LL |     #[ffi_pure]\n+   |     ^^^^^^^^^^^\n+\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0755`."}, {"sha": "8195d0e48636927b6a7410c18637a451c516773b", "filename": "tests/ui/ffi_returns_twice.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_returns_twice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_returns_twice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_returns_twice.rs?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -3,3 +3,13 @@\n \n #[ffi_returns_twice] //~ ERROR `#[ffi_returns_twice]` may only be used on foreign functions\n pub fn foo() {}\n+\n+#[ffi_returns_twice] //~ ERROR `#[ffi_returns_twice]` may only be used on foreign functions\n+macro_rules! bar {\n+    () => ()\n+}\n+\n+extern \"C\" {\n+    #[ffi_returns_twice] //~ ERROR `#[ffi_returns_twice]` may only be used on foreign functions\n+    static INT: i32;\n+}"}, {"sha": "0abe7613f1493a0ce7521c374577b92509ea80f9", "filename": "tests/ui/ffi_returns_twice.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_returns_twice.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bc23e9aa4c78066043be246a47627746341480dd/tests%2Fui%2Fffi_returns_twice.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fffi_returns_twice.stderr?ref=bc23e9aa4c78066043be246a47627746341480dd", "patch": "@@ -4,6 +4,18 @@ error[E0724]: `#[ffi_returns_twice]` may only be used on foreign functions\n LL | #[ffi_returns_twice]\n    | ^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to previous error\n+error[E0724]: `#[ffi_returns_twice]` may only be used on foreign functions\n+  --> $DIR/ffi_returns_twice.rs:7:1\n+   |\n+LL | #[ffi_returns_twice]\n+   | ^^^^^^^^^^^^^^^^^^^^\n+\n+error[E0724]: `#[ffi_returns_twice]` may only be used on foreign functions\n+  --> $DIR/ffi_returns_twice.rs:13:5\n+   |\n+LL |     #[ffi_returns_twice]\n+   |     ^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0724`."}]}