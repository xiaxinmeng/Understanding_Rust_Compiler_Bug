{"sha": "d032b8967cdff300bd48ea983b0ac2a9d207bc57", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwMzJiODk2N2NkZmYzMDBiZDQ4ZWE5ODNiMGFjMmE5ZDIwN2JjNTc=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-02-21T13:55:52Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-21T13:55:52Z"}, "message": "Merge pull request #1491 from Manishearth/into_iter_on_ref\n\nfix explicit_into_iter_loop on references", "tree": {"sha": "89145ee7cf01b88f2d5c90a39559bb5ed7cb68b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/89145ee7cf01b88f2d5c90a39559bb5ed7cb68b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d032b8967cdff300bd48ea983b0ac2a9d207bc57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d032b8967cdff300bd48ea983b0ac2a9d207bc57", "html_url": "https://github.com/rust-lang/rust/commit/d032b8967cdff300bd48ea983b0ac2a9d207bc57", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d032b8967cdff300bd48ea983b0ac2a9d207bc57/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "27aa309b3d0afc094cc4cd44c23e607237403d3d", "url": "https://api.github.com/repos/rust-lang/rust/commits/27aa309b3d0afc094cc4cd44c23e607237403d3d", "html_url": "https://github.com/rust-lang/rust/commit/27aa309b3d0afc094cc4cd44c23e607237403d3d"}, {"sha": "f2ff5e21334b8051305227f8ba5c400af47e6e26", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2ff5e21334b8051305227f8ba5c400af47e6e26", "html_url": "https://github.com/rust-lang/rust/commit/f2ff5e21334b8051305227f8ba5c400af47e6e26"}], "stats": {"total": 272, "additions": 151, "deletions": 121}, "files": [{"sha": "734f832d51eb62e16853c2c9081a3b17db99286c", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 40, "deletions": 33, "changes": 73, "blob_url": "https://github.com/rust-lang/rust/blob/d032b8967cdff300bd48ea983b0ac2a9d207bc57/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d032b8967cdff300bd48ea983b0ac2a9d207bc57/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=d032b8967cdff300bd48ea983b0ac2a9d207bc57", "patch": "@@ -16,7 +16,7 @@ use utils::sugg;\n \n use utils::{snippet, span_lint, get_parent_expr, match_trait_method, match_type, multispan_sugg, in_external_macro,\n             is_refutable, span_help_and_lint, is_integer_literal, get_enclosing_block, span_lint_and_then, higher,\n-            last_path_segment};\n+            last_path_segment, span_lint_and_sugg};\n use utils::paths;\n \n /// **What it does:** Checks for looping over the range of `0..len` of some\n@@ -644,48 +644,55 @@ fn check_for_loop_reverse_range(cx: &LateContext, arg: &Expr, expr: &Expr) {\n     }\n }\n \n+fn lint_iter_method(cx: &LateContext, args: &[Expr], arg: &Expr, method_name: &str) {\n+    let object = snippet(cx, args[0].span, \"_\");\n+    let muta = if method_name == \"iter_mut\" {\n+        \"mut \"\n+    } else {\n+        \"\"\n+    };\n+    span_lint_and_sugg(cx,\n+                       EXPLICIT_ITER_LOOP,\n+                       arg.span,\n+                       \"it is more idiomatic to loop over references to containers instead of using explicit \\\n+                        iteration methods\",\n+                       \"to write this more concisely, try\",\n+                       format!(\"&{}{}\", muta, object))\n+}\n+\n fn check_for_loop_arg(cx: &LateContext, pat: &Pat, arg: &Expr, expr: &Expr) {\n     let mut next_loop_linted = false; // whether or not ITER_NEXT_LOOP lint was used\n     if let ExprMethodCall(ref method, _, ref args) = arg.node {\n         // just the receiver, no arguments\n         if args.len() == 1 {\n-            let method_name = method.node;\n+            let method_name = &*method.node.as_str();\n             // check for looping over x.iter() or x.iter_mut(), could use &x or &mut x\n-            if &*method_name.as_str() == \"iter\" || &*method_name.as_str() == \"iter_mut\" {\n+            if method_name == \"iter\" || method_name == \"iter_mut\" {\n                 if is_ref_iterable_type(cx, &args[0]) {\n+                    lint_iter_method(cx, args, arg, method_name);\n+                }\n+            } else if method_name == \"into_iter\" && match_trait_method(cx, arg, &paths::INTO_ITERATOR) {\n+                let method_call = ty::MethodCall::expr(arg.id);\n+                let fn_ty = cx.tables\n+                    .method_map\n+                    .get(&method_call)\n+                    .map(|method_callee| method_callee.ty)\n+                    .expect(\"method calls need an entry in the method map\");\n+                let fn_arg_tys = fn_ty.fn_args();\n+                assert_eq!(fn_arg_tys.skip_binder().len(), 1);\n+                if fn_arg_tys.skip_binder()[0].is_region_ptr() {\n+                    lint_iter_method(cx, args, arg, method_name);\n+                } else {\n                     let object = snippet(cx, args[0].span, \"_\");\n-                    let suggestion = format!(\"&{}{}\",\n-                                             if &*method_name.as_str() == \"iter_mut\" {\n-                                                 \"mut \"\n-                                             } else {\n-                                                 \"\"\n-                                             },\n-                                             object);\n-                    span_lint_and_then(cx,\n-                                       EXPLICIT_ITER_LOOP,\n+                    span_lint_and_sugg(cx,\n+                                       EXPLICIT_INTO_ITER_LOOP,\n                                        arg.span,\n-                                       &format!(\"it is more idiomatic to loop over `{}` instead of `{}.{}()`\",\n-                                                suggestion,\n-                                                object,\n-                                                method_name),\n-                                       |db| {\n-                        db.span_suggestion(arg.span, \"to write this more concisely, try looping over\", suggestion);\n-                    });\n+                                       \"it is more idiomatic to loop over containers instead of using explicit \\\n+                                        iteration methods`\",\n+                                       \"to write this more concisely, try\",\n+                                       object.to_string());\n                 }\n-            } else if &*method_name.as_str() == \"into_iter\" && match_trait_method(cx, arg, &paths::INTO_ITERATOR) {\n-                let object = snippet(cx, args[0].span, \"_\");\n-                span_lint_and_then(cx,\n-                                   EXPLICIT_INTO_ITER_LOOP,\n-                                   arg.span,\n-                                   &format!(\"it is more idiomatic to loop over `{}` instead of `{}.{}()`\",\n-                                            object,\n-                                            object,\n-                                            method_name),\n-                                   |db| {\n-                    db.span_suggestion(arg.span, \"to write this more concisely, try looping over\", object.to_string());\n-                });\n-\n-            } else if &*method_name.as_str() == \"next\" && match_trait_method(cx, arg, &paths::ITERATOR) {\n+            } else if method_name == \"next\" && match_trait_method(cx, arg, &paths::ITERATOR) {\n                 span_lint(cx,\n                           ITER_NEXT_LOOP,\n                           expr.span,"}, {"sha": "edd29cd613a4611465e81b0dc1753aee7ed647f9", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d032b8967cdff300bd48ea983b0ac2a9d207bc57/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d032b8967cdff300bd48ea983b0ac2a9d207bc57/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=d032b8967cdff300bd48ea983b0ac2a9d207bc57", "patch": "@@ -569,6 +569,17 @@ pub fn span_lint_and_then<'a, 'tcx: 'a, T: LintContext<'tcx>, F>(\n     }\n }\n \n+pub fn span_lint_and_sugg<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n+    cx: &'a T,\n+    lint: &'static Lint,\n+    sp: Span,\n+    msg: &str,\n+    help: &str,\n+    sugg: String\n+) {\n+    span_lint_and_then(cx, lint, sp, msg, |db| { db.span_suggestion(sp, help, sugg); });\n+}\n+\n /// Create a suggestion made from several `span \u2192 replacement`.\n ///\n /// Note: in the JSON format (used by `compiletest_rs`), the help message will appear once per"}, {"sha": "76c8a82341d783060c9ff87fdbee401f7fbd7c5e", "filename": "tests/ui/for_loop.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d032b8967cdff300bd48ea983b0ac2a9d207bc57/tests%2Fui%2Ffor_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d032b8967cdff300bd48ea983b0ac2a9d207bc57/tests%2Fui%2Ffor_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffor_loop.rs?ref=d032b8967cdff300bd48ea983b0ac2a9d207bc57", "patch": "@@ -302,6 +302,9 @@ fn main() {\n \n \n \n+    let array = [1, 2, 3];\n+    for _v in array.into_iter() {}\n+\n     for _v in &vec { } // these are fine\n     for _v in &mut vec { } // these are fine\n "}, {"sha": "608ee7f2629f755e1852d8a8736d75b36da9e6a5", "filename": "tests/ui/for_loop.stderr", "status": "modified", "additions": 97, "deletions": 88, "changes": 185, "blob_url": "https://github.com/rust-lang/rust/blob/d032b8967cdff300bd48ea983b0ac2a9d207bc57/tests%2Fui%2Ffor_loop.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d032b8967cdff300bd48ea983b0ac2a9d207bc57/tests%2Fui%2Ffor_loop.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffor_loop.stderr?ref=d032b8967cdff300bd48ea983b0ac2a9d207bc57", "patch": "@@ -381,7 +381,7 @@ error: this range is empty so this for loop will never run\n 268 | |     }\n     | |_____^ ...ending here\n \n-error: it is more idiomatic to loop over `&vec` instead of `vec.iter()`\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n    --> $DIR/for_loop.rs:289:15\n     |\n 289 |     for _v in vec.iter() { }\n@@ -392,19 +392,19 @@ note: lint level defined here\n     |\n 90  | #[deny(needless_range_loop, explicit_iter_loop, explicit_into_iter_loop, iter_next_loop, reverse_range_loop, explicit_counter_loop, for_kv_map)]\n     |                             ^^^^^^^^^^^^^^^^^^\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &vec { }\n \n-error: it is more idiomatic to loop over `&mut vec` instead of `vec.iter_mut()`\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n    --> $DIR/for_loop.rs:294:15\n     |\n 294 |     for _v in vec.iter_mut() { }\n     |               ^^^^^^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &mut vec { }\n \n-error: it is more idiomatic to loop over `out_vec` instead of `out_vec.into_iter()`\n+error: it is more idiomatic to loop over containers instead of using explicit iteration methods`\n    --> $DIR/for_loop.rs:300:15\n     |\n 300 |     for _v in out_vec.into_iter() { }\n@@ -415,94 +415,103 @@ note: lint level defined here\n     |\n 90  | #[deny(needless_range_loop, explicit_iter_loop, explicit_into_iter_loop, iter_next_loop, reverse_range_loop, explicit_counter_loop, for_kv_map)]\n     |                                                 ^^^^^^^^^^^^^^^^^^^^^^^\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in out_vec { }\n \n-error: it is more idiomatic to loop over `&[1, 2, 3]` instead of `[1, 2, 3].iter()`\n-   --> $DIR/for_loop.rs:308:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:306:15\n     |\n-308 |     for _v in [1, 2, 3].iter() { }\n+306 |     for _v in array.into_iter() {}\n+    |               ^^^^^^^^^^^^^^^^^\n+    |\n+help: to write this more concisely, try\n+    |     for _v in &array {}\n+\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:311:15\n+    |\n+311 |     for _v in [1, 2, 3].iter() { }\n     |               ^^^^^^^^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &[1, 2, 3] { }\n \n-error: it is more idiomatic to loop over `&[0; 32]` instead of `[0; 32].iter()`\n-   --> $DIR/for_loop.rs:315:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:318:15\n     |\n-315 |     for _v in [0; 32].iter() {}\n+318 |     for _v in [0; 32].iter() {}\n     |               ^^^^^^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &[0; 32] {}\n \n-error: it is more idiomatic to loop over `&ll` instead of `ll.iter()`\n-   --> $DIR/for_loop.rs:323:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:326:15\n     |\n-323 |     for _v in ll.iter() { }\n+326 |     for _v in ll.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &ll { }\n \n-error: it is more idiomatic to loop over `&vd` instead of `vd.iter()`\n-   --> $DIR/for_loop.rs:329:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:332:15\n     |\n-329 |     for _v in vd.iter() { }\n+332 |     for _v in vd.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &vd { }\n \n-error: it is more idiomatic to loop over `&bh` instead of `bh.iter()`\n-   --> $DIR/for_loop.rs:335:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:338:15\n     |\n-335 |     for _v in bh.iter() { }\n+338 |     for _v in bh.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &bh { }\n \n-error: it is more idiomatic to loop over `&hm` instead of `hm.iter()`\n-   --> $DIR/for_loop.rs:341:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:344:15\n     |\n-341 |     for _v in hm.iter() { }\n+344 |     for _v in hm.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &hm { }\n \n-error: it is more idiomatic to loop over `&bt` instead of `bt.iter()`\n-   --> $DIR/for_loop.rs:347:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:350:15\n     |\n-347 |     for _v in bt.iter() { }\n+350 |     for _v in bt.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &bt { }\n \n-error: it is more idiomatic to loop over `&hs` instead of `hs.iter()`\n-   --> $DIR/for_loop.rs:353:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:356:15\n     |\n-353 |     for _v in hs.iter() { }\n+356 |     for _v in hs.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &hs { }\n \n-error: it is more idiomatic to loop over `&bs` instead of `bs.iter()`\n-   --> $DIR/for_loop.rs:359:15\n+error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n+   --> $DIR/for_loop.rs:362:15\n     |\n-359 |     for _v in bs.iter() { }\n+362 |     for _v in bs.iter() { }\n     |               ^^^^^^^^^\n     |\n-help: to write this more concisely, try looping over\n+help: to write this more concisely, try\n     |     for _v in &bs { }\n \n error: you are iterating over `Iterator::next()` which is an Option; this will compile but is probably not what you want\n-   --> $DIR/for_loop.rs:365:5\n+   --> $DIR/for_loop.rs:368:5\n     |\n-365 |     for _v in vec.iter().next() { }\n+368 |     for _v in vec.iter().next() { }\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n note: lint level defined here\n@@ -512,9 +521,9 @@ note: lint level defined here\n     |                                                                          ^^^^^^^^^^^^^^\n \n error: you are collect()ing an iterator and throwing away the result. Consider using an explicit for loop to exhaust the iterator\n-   --> $DIR/for_loop.rs:372:5\n+   --> $DIR/for_loop.rs:375:5\n     |\n-372 |     vec.iter().map(|x| out.push(x)).collect::<Vec<_>>();\n+375 |     vec.iter().map(|x| out.push(x)).collect::<Vec<_>>();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n note: lint level defined here\n@@ -524,9 +533,9 @@ note: lint level defined here\n     |        ^^^^^^^^^^^^^^\n \n error: the variable `_index` is used as a loop counter. Consider using `for (_index, item) in &vec.enumerate()` or similar iterators\n-   --> $DIR/for_loop.rs:377:5\n+   --> $DIR/for_loop.rs:380:5\n     |\n-377 |     for _v in &vec { _index += 1 }\n+380 |     for _v in &vec { _index += 1 }\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n note: lint level defined here\n@@ -536,22 +545,22 @@ note: lint level defined here\n     |                                                                                                              ^^^^^^^^^^^^^^^^^^^^^\n \n error: the variable `_index` is used as a loop counter. Consider using `for (_index, item) in &vec.enumerate()` or similar iterators\n-   --> $DIR/for_loop.rs:381:5\n+   --> $DIR/for_loop.rs:384:5\n     |\n-381 |     for _v in &vec { _index += 1 }\n+384 |     for _v in &vec { _index += 1 }\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you seem to want to iterate on a map's values\n-   --> $DIR/for_loop.rs:441:5\n+   --> $DIR/for_loop.rs:444:5\n     |\n-441 |       for (_, v) in &m {\n+444 |       for (_, v) in &m {\n     |  _____^ starting here...\n-442 | |\n-443 | |\n-444 | |\n 445 | |\n-446 | |         let _v = v;\n-447 | |     }\n+446 | |\n+447 | |\n+448 | |\n+449 | |         let _v = v;\n+450 | |     }\n     | |_____^ ...ending here\n     |\n note: lint level defined here\n@@ -563,70 +572,70 @@ help: use the corresponding method\n     |     for v in m.values() {\n \n error: you seem to want to iterate on a map's values\n-   --> $DIR/for_loop.rs:450:5\n+   --> $DIR/for_loop.rs:453:5\n     |\n-450 |       for (_, v) in &*m {\n+453 |       for (_, v) in &*m {\n     |  _____^ starting here...\n-451 | |\n-452 | |\n-453 | |\n 454 | |\n-455 | |         let _v = v;\n-456 | |         // Here the `*` is not actually necesarry, but the test tests that we don't suggest\n-457 | |         // `in *m.values()` as we used to\n-458 | |     }\n+455 | |\n+456 | |\n+457 | |\n+458 | |         let _v = v;\n+459 | |         // Here the `*` is not actually necesarry, but the test tests that we don't suggest\n+460 | |         // `in *m.values()` as we used to\n+461 | |     }\n     | |_____^ ...ending here\n     |\n help: use the corresponding method\n     |     for v in (*m).values() {\n \n error: you seem to want to iterate on a map's values\n-   --> $DIR/for_loop.rs:461:5\n+   --> $DIR/for_loop.rs:464:5\n     |\n-461 |       for (_, v) in &mut m {\n+464 |       for (_, v) in &mut m {\n     |  _____^ starting here...\n-462 | |\n-463 | |\n-464 | |\n 465 | |\n-466 | |         let _v = v;\n-467 | |     }\n+466 | |\n+467 | |\n+468 | |\n+469 | |         let _v = v;\n+470 | |     }\n     | |_____^ ...ending here\n     |\n help: use the corresponding method\n     |     for v in m.values_mut() {\n \n error: you seem to want to iterate on a map's values\n-   --> $DIR/for_loop.rs:470:5\n+   --> $DIR/for_loop.rs:473:5\n     |\n-470 |       for (_, v) in &mut *m {\n+473 |       for (_, v) in &mut *m {\n     |  _____^ starting here...\n-471 | |\n-472 | |\n-473 | |\n 474 | |\n-475 | |         let _v = v;\n-476 | |     }\n+475 | |\n+476 | |\n+477 | |\n+478 | |         let _v = v;\n+479 | |     }\n     | |_____^ ...ending here\n     |\n help: use the corresponding method\n     |     for v in (*m).values_mut() {\n \n error: you seem to want to iterate on a map's keys\n-   --> $DIR/for_loop.rs:480:5\n+   --> $DIR/for_loop.rs:483:5\n     |\n-480 |       for (k, _value) in rm {\n+483 |       for (k, _value) in rm {\n     |  _____^ starting here...\n-481 | |\n-482 | |\n-483 | |\n 484 | |\n-485 | |         let _k = k;\n-486 | |     }\n+485 | |\n+486 | |\n+487 | |\n+488 | |         let _k = k;\n+489 | |     }\n     | |_____^ ...ending here\n     |\n help: use the corresponding method\n     |     for k in rm.keys() {\n \n-error: aborting due to 47 previous errors\n+error: aborting due to 48 previous errors\n "}]}