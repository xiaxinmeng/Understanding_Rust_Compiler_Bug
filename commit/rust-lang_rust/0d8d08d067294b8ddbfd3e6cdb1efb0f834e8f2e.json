{"sha": "0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBkOGQwOGQwNjcyOTRiOGRkYmZkM2U2Y2RiMWVmYjBmODM0ZThmMmU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-12T23:49:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-12T23:49:29Z"}, "message": "Rollup merge of #61675 - fintelia:riscv-frame-pointer, r=nagisa\n\nInclude frame pointer for bare metal RISC-V targets\n\nThis changes the default setting to enable the use of the frame pointer register when targeting RISC-V. On that architecture there is a dedicated frame pointer register which LLVM would otherwise never use so there is no increase in register pressure. Further, since these are bare metal targets, getting backtraces without the frame pointer is considerably more difficult (you can't just ask the OS to load the ELF executable and parse DWARF symbols). It is true that this setting can also be changed with the `-C force-frame-pointers` flag but that won't impact the compilation of the standard library, meaning that backtraces from, say, a panic handler would be useless.", "tree": {"sha": "8288d6ee84c90de88cef491a5afb209adf410e79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8288d6ee84c90de88cef491a5afb209adf410e79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdAY+JCRBK7hj4Ov3rIwAAdHIIAHz7J33v4l7xjECiPj0dINHF\nTTIQ61rZ8EF4trDhL6hyfRxuLKjCQ25x1PXJTg2/JBdljLMCnakZJoydanbcors0\n1fu8xTU44pHtF6iXPGtfkzJaSWlhgyF0PdZ5tSn8WCLSiPf9FlF3vVMvqI47LqUk\nVEIEn2Pbw/hO+AlTKOMKmJTF/D+ZggN9NZp7b2irlxzccN96lnxXQuB/kdUa2GmS\ndENTefA8rq0NNzUM9Dm0MbsYhpQO6bU1mN/T/tPqZ2ECN71X8eXEFdVRgHahItPd\nAqaHWcEwZiGqT6haIuZw1RB+Idd0JOrcVpYTdwkPqnSZtxv9kge9sf/SnOhJzbA=\n=dMfI\n-----END PGP SIGNATURE-----\n", "payload": "tree 8288d6ee84c90de88cef491a5afb209adf410e79\nparent 96b58301a38e1c7bbcb2accfcdfea4132e52f3f3\nparent 493d1b473a271e3fc8d332c6bf8e24930a7be597\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1560383369 +0200\ncommitter GitHub <noreply@github.com> 1560383369 +0200\n\nRollup merge of #61675 - fintelia:riscv-frame-pointer, r=nagisa\n\nInclude frame pointer for bare metal RISC-V targets\n\nThis changes the default setting to enable the use of the frame pointer register when targeting RISC-V. On that architecture there is a dedicated frame pointer register which LLVM would otherwise never use so there is no increase in register pressure. Further, since these are bare metal targets, getting backtraces without the frame pointer is considerably more difficult (you can't just ask the OS to load the ELF executable and parse DWARF symbols). It is true that this setting can also be changed with the `-C force-frame-pointers` flag but that won't impact the compilation of the standard library, meaning that backtraces from, say, a panic handler would be useless.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "html_url": "https://github.com/rust-lang/rust/commit/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96b58301a38e1c7bbcb2accfcdfea4132e52f3f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/96b58301a38e1c7bbcb2accfcdfea4132e52f3f3", "html_url": "https://github.com/rust-lang/rust/commit/96b58301a38e1c7bbcb2accfcdfea4132e52f3f3"}, {"sha": "493d1b473a271e3fc8d332c6bf8e24930a7be597", "url": "https://api.github.com/repos/rust-lang/rust/commits/493d1b473a271e3fc8d332c6bf8e24930a7be597", "html_url": "https://github.com/rust-lang/rust/commit/493d1b473a271e3fc8d332c6bf8e24930a7be597"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "8a97a09bb60aa5c71f5c2b5ac238ccc868bcc156", "filename": "src/librustc_target/spec/riscv32imac_unknown_none_elf.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv32imac_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv32imac_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Friscv32imac_unknown_none_elf.rs?ref=0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "patch": "@@ -25,6 +25,7 @@ pub fn target() -> TargetResult {\n             relocation_model: \"static\".to_string(),\n             emit_debug_gdb_scripts: false,\n             abi_blacklist: super::riscv_base::abi_blacklist(),\n+            eliminate_frame_pointer: false,\n             .. Default::default()\n         },\n     })"}, {"sha": "647d33e3ffeeed91ea49ab8ca96f63b37f979e7d", "filename": "src/librustc_target/spec/riscv32imc_unknown_none_elf.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv32imc_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv32imc_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Friscv32imc_unknown_none_elf.rs?ref=0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "patch": "@@ -26,6 +26,7 @@ pub fn target() -> TargetResult {\n             relocation_model: \"static\".to_string(),\n             emit_debug_gdb_scripts: false,\n             abi_blacklist: super::riscv_base::abi_blacklist(),\n+            eliminate_frame_pointer: false,\n             .. Default::default()\n         },\n     })"}, {"sha": "a5c13fa28e2cedeefb09ec45aeec77d0951d6191", "filename": "src/librustc_target/spec/riscv64gc_unknown_none_elf.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv64gc_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv64gc_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Friscv64gc_unknown_none_elf.rs?ref=0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "patch": "@@ -25,6 +25,7 @@ pub fn target() -> TargetResult {\n             relocation_model: \"static\".to_string(),\n             emit_debug_gdb_scripts: false,\n             abi_blacklist: super::riscv_base::abi_blacklist(),\n+            eliminate_frame_pointer: false,\n             .. Default::default()\n         },\n     })"}, {"sha": "237d615ffcc4b6cd463df06c19f2b88d1cb4abc6", "filename": "src/librustc_target/spec/riscv64imac_unknown_none_elf.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv64imac_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e/src%2Flibrustc_target%2Fspec%2Friscv64imac_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Friscv64imac_unknown_none_elf.rs?ref=0d8d08d067294b8ddbfd3e6cdb1efb0f834e8f2e", "patch": "@@ -25,6 +25,7 @@ pub fn target() -> TargetResult {\n             relocation_model: \"static\".to_string(),\n             emit_debug_gdb_scripts: false,\n             abi_blacklist: super::riscv_base::abi_blacklist(),\n+            eliminate_frame_pointer: false,\n             .. Default::default()\n         },\n     })"}]}