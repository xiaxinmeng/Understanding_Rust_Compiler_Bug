{"sha": "265e3a6230364455dfe55378b59833be93e17084", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2NWUzYTYyMzAzNjQ0NTVkZmU1NTM3OGI1OTgzM2JlOTNlMTcwODQ=", "commit": {"author": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2019-07-09T19:39:19Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2019-07-09T19:39:25Z"}, "message": "Unit test Iterator::partition_in_place and is_partitioned", "tree": {"sha": "3668e1411c6ab26685ca1c3275f2fd2280a107c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3668e1411c6ab26685ca1c3275f2fd2280a107c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/265e3a6230364455dfe55378b59833be93e17084", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/265e3a6230364455dfe55378b59833be93e17084", "html_url": "https://github.com/rust-lang/rust/commit/265e3a6230364455dfe55378b59833be93e17084", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/265e3a6230364455dfe55378b59833be93e17084/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0492f972c7751daaa819a937c75ceadd0cf5326e", "url": "https://api.github.com/repos/rust-lang/rust/commits/0492f972c7751daaa819a937c75ceadd0cf5326e", "html_url": "https://github.com/rust-lang/rust/commit/0492f972c7751daaa819a937c75ceadd0cf5326e"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "b7b0849e2129b65af0c1ab3c4e409f0fbb2c1f15", "filename": "src/libcore/tests/iter.rs", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/265e3a6230364455dfe55378b59833be93e17084/src%2Flibcore%2Ftests%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/265e3a6230364455dfe55378b59833be93e17084/src%2Flibcore%2Ftests%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftests%2Fiter.rs?ref=265e3a6230364455dfe55378b59833be93e17084", "patch": "@@ -2460,3 +2460,39 @@ fn test_is_sorted() {\n     assert!(![\"c\", \"bb\", \"aaa\"].iter().is_sorted());\n     assert!([\"c\", \"bb\", \"aaa\"].iter().is_sorted_by_key(|s| s.len()));\n }\n+\n+#[test]\n+fn test_partition() {\n+    fn check(xs: &mut [i32], ref p: impl Fn(&i32) -> bool, expected: usize) {\n+        let i = xs.iter_mut().partition_in_place(p);\n+        assert_eq!(expected, i);\n+        assert!(xs[..i].iter().all(p));\n+        assert!(!xs[i..].iter().any(p));\n+        assert!(xs.iter().is_partitioned(p));\n+        if i == 0 || i == xs.len() {\n+            assert!(xs.iter().rev().is_partitioned(p));\n+        } else {\n+            assert!(!xs.iter().rev().is_partitioned(p));\n+        }\n+    }\n+\n+    check(&mut [], |_| true, 0);\n+    check(&mut [], |_| false, 0);\n+\n+    check(&mut [0], |_| true, 1);\n+    check(&mut [0], |_| false, 0);\n+\n+    check(&mut [-1, 1], |&x| x > 0, 1);\n+    check(&mut [-1, 1], |&x| x < 0, 1);\n+\n+    let ref mut xs = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n+    check(xs, |_| true, 10);\n+    check(xs, |_| false, 0);\n+    check(xs, |&x| x % 2 == 0, 5); // evens\n+    check(xs, |&x| x % 2 == 1, 5); // odds\n+    check(xs, |&x| x % 3 == 0, 4); // multiple of 3\n+    check(xs, |&x| x % 4 == 0, 3); // multiple of 4\n+    check(xs, |&x| x % 5 == 0, 2); // multiple of 5\n+    check(xs, |&x| x < 3, 3); // small\n+    check(xs, |&x| x > 6, 3); // large\n+}"}, {"sha": "cbb6423d710106fb4ac7bdba6f8e7d1fe2bdcd80", "filename": "src/libcore/tests/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/265e3a6230364455dfe55378b59833be93e17084/src%2Flibcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/265e3a6230364455dfe55378b59833be93e17084/src%2Flibcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftests%2Flib.rs?ref=265e3a6230364455dfe55378b59833be93e17084", "patch": "@@ -31,6 +31,8 @@\n #![feature(slice_partition_dedup)]\n #![feature(int_error_matching)]\n #![feature(const_fn)]\n+#![feature(iter_partition_in_place)]\n+#![feature(iter_is_partitioned)]\n #![warn(rust_2018_idioms)]\n \n extern crate test;"}]}