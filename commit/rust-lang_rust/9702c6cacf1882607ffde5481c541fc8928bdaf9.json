{"sha": "9702c6cacf1882607ffde5481c541fc8928bdaf9", "node_id": "C_kwDOAAsO6NoAKDk3MDJjNmNhY2YxODgyNjA3ZmZkZTU0ODFjNTQxZmM4OTI4YmRhZjk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-09-17T17:27:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-17T17:27:08Z"}, "message": "Rollup merge of #101918 - notriddle:notriddle/all, r=GuillaumeGomez\n\nrustdoc: clean up CSS for All Items and All Crates lists\n\nThis reduces the amount of CSS, and makes these two pages more consistent (which, necessarily, means changing them a bit).\n\n# Before\n\n![image](https://user-images.githubusercontent.com/1593513/190735035-c66b2664-3783-483c-9bc6-89f80e4a5490.png)\n\n![image](https://user-images.githubusercontent.com/1593513/190735134-1d5df81d-58c5-4c86-b066-6dd3031ffc2e.png)\n\n# After\n\n![image](https://user-images.githubusercontent.com/1593513/190735261-fc3878bb-0cab-4c4e-a6da-b5f7abd06588.png)\n\n![image](https://user-images.githubusercontent.com/1593513/190735389-935a7836-f2c0-4349-a7d0-7fe5378f6b9a.png)", "tree": {"sha": "7a3ddb62e615f3f2dc31c1b33469387259dcd385", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a3ddb62e615f3f2dc31c1b33469387259dcd385"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9702c6cacf1882607ffde5481c541fc8928bdaf9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjJgNsCRBK7hj4Ov3rIwAAn7oIACohPPaO0NyP5JA0sr8v8h4e\nL0fG6PGDuKPV+YsqZ1LthAWGBNDUYa0kGtNmMN0aGrZLG983RLrFuO1Cboc0RmI5\nt4ZAcSvIGaPoPZNJEA/JvZodvEKLtchY8ia0bA2bMii17yAau+Q2FZX0F4PbUfYb\ns6OEt4yPY6ONAFNFFRbfDBotN3MgojB05DZ6TQQIpyn8++IKgVohsUMmEbiuGhQ0\nMdyr+/9qDAGDzTxfsj9Vlo81J1jNPFomgr5bnklV8FMHok5o1RVQYKRLJoFksIgL\nknnFKZPQJ48zA+vTOjHo6N8X1UKnTfI+rChmz/ZWivG+h7PMarYvREKcNXZMuOU=\n=7kYJ\n-----END PGP SIGNATURE-----\n", "payload": "tree 7a3ddb62e615f3f2dc31c1b33469387259dcd385\nparent 179fd13e80bb1259a9bb0a3c49aab3d56217816a\nparent a87a883f4adfc6be528a04216a3615e4907fffd4\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1663435628 +0200\ncommitter GitHub <noreply@github.com> 1663435628 +0200\n\nRollup merge of #101918 - notriddle:notriddle/all, r=GuillaumeGomez\n\nrustdoc: clean up CSS for All Items and All Crates lists\n\nThis reduces the amount of CSS, and makes these two pages more consistent (which, necessarily, means changing them a bit).\n\n# Before\n\n![image](https://user-images.githubusercontent.com/1593513/190735035-c66b2664-3783-483c-9bc6-89f80e4a5490.png)\n\n![image](https://user-images.githubusercontent.com/1593513/190735134-1d5df81d-58c5-4c86-b066-6dd3031ffc2e.png)\n\n# After\n\n![image](https://user-images.githubusercontent.com/1593513/190735261-fc3878bb-0cab-4c4e-a6da-b5f7abd06588.png)\n\n![image](https://user-images.githubusercontent.com/1593513/190735389-935a7836-f2c0-4349-a7d0-7fe5378f6b9a.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9702c6cacf1882607ffde5481c541fc8928bdaf9", "html_url": "https://github.com/rust-lang/rust/commit/9702c6cacf1882607ffde5481c541fc8928bdaf9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9702c6cacf1882607ffde5481c541fc8928bdaf9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "179fd13e80bb1259a9bb0a3c49aab3d56217816a", "url": "https://api.github.com/repos/rust-lang/rust/commits/179fd13e80bb1259a9bb0a3c49aab3d56217816a", "html_url": "https://github.com/rust-lang/rust/commit/179fd13e80bb1259a9bb0a3c49aab3d56217816a"}, {"sha": "a87a883f4adfc6be528a04216a3615e4907fffd4", "url": "https://api.github.com/repos/rust-lang/rust/commits/a87a883f4adfc6be528a04216a3615e4907fffd4", "html_url": "https://github.com/rust-lang/rust/commit/a87a883f4adfc6be528a04216a3615e4907fffd4"}], "stats": {"total": 52, "additions": 24, "deletions": 28}, "files": [{"sha": "ced0ebdbb864a8e82f7c770379fa3d052ea0a6df", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 17, "deletions": 18, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=9702c6cacf1882607ffde5481c541fc8928bdaf9", "patch": "@@ -294,16 +294,15 @@ impl AllTypes {\n \n impl AllTypes {\n     fn print(self, f: &mut Buffer) {\n-        fn print_entries(f: &mut Buffer, e: &FxHashSet<ItemEntry>, title: &str, class: &str) {\n+        fn print_entries(f: &mut Buffer, e: &FxHashSet<ItemEntry>, title: &str) {\n             if !e.is_empty() {\n                 let mut e: Vec<&ItemEntry> = e.iter().collect();\n                 e.sort();\n                 write!(\n                     f,\n-                    \"<h3 id=\\\"{}\\\">{}</h3><ul class=\\\"{} docblock\\\">\",\n+                    \"<h3 id=\\\"{}\\\">{}</h3><ul class=\\\"all-items\\\">\",\n                     title.replace(' ', \"-\"), // IDs cannot contain whitespaces.\n-                    title,\n-                    class\n+                    title\n                 );\n \n                 for s in e.iter() {\n@@ -321,20 +320,20 @@ impl AllTypes {\n         );\n         // Note: print_entries does not escape the title, because we know the current set of titles\n         // doesn't require escaping.\n-        print_entries(f, &self.structs, \"Structs\", \"structs\");\n-        print_entries(f, &self.enums, \"Enums\", \"enums\");\n-        print_entries(f, &self.unions, \"Unions\", \"unions\");\n-        print_entries(f, &self.primitives, \"Primitives\", \"primitives\");\n-        print_entries(f, &self.traits, \"Traits\", \"traits\");\n-        print_entries(f, &self.macros, \"Macros\", \"macros\");\n-        print_entries(f, &self.attributes, \"Attribute Macros\", \"attributes\");\n-        print_entries(f, &self.derives, \"Derive Macros\", \"derives\");\n-        print_entries(f, &self.functions, \"Functions\", \"functions\");\n-        print_entries(f, &self.typedefs, \"Typedefs\", \"typedefs\");\n-        print_entries(f, &self.trait_aliases, \"Trait Aliases\", \"trait-aliases\");\n-        print_entries(f, &self.opaque_tys, \"Opaque Types\", \"opaque-types\");\n-        print_entries(f, &self.statics, \"Statics\", \"statics\");\n-        print_entries(f, &self.constants, \"Constants\", \"constants\")\n+        print_entries(f, &self.structs, \"Structs\");\n+        print_entries(f, &self.enums, \"Enums\");\n+        print_entries(f, &self.unions, \"Unions\");\n+        print_entries(f, &self.primitives, \"Primitives\");\n+        print_entries(f, &self.traits, \"Traits\");\n+        print_entries(f, &self.macros, \"Macros\");\n+        print_entries(f, &self.attributes, \"Attribute Macros\");\n+        print_entries(f, &self.derives, \"Derive Macros\");\n+        print_entries(f, &self.functions, \"Functions\");\n+        print_entries(f, &self.typedefs, \"Typedefs\");\n+        print_entries(f, &self.trait_aliases, \"Trait Aliases\");\n+        print_entries(f, &self.opaque_tys, \"Opaque Types\");\n+        print_entries(f, &self.statics, \"Statics\");\n+        print_entries(f, &self.constants, \"Constants\");\n     }\n }\n "}, {"sha": "1c88528aa20a9bae31fbd2759648003d11bd9b70", "filename": "src/librustdoc/html/render/write_shared.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs?ref=9702c6cacf1882607ffde5481c541fc8928bdaf9", "patch": "@@ -519,12 +519,12 @@ if (typeof exports !== 'undefined') {exports.searchIndex = searchIndex};\n             let content = format!(\n                 \"<h1 class=\\\"fqn\\\">\\\n                      <span class=\\\"in-band\\\">List of all crates</span>\\\n-                </h1><ul class=\\\"crate mod\\\">{}</ul>\",\n+                </h1><ul class=\\\"all-items\\\">{}</ul>\",\n                 krates\n                     .iter()\n                     .map(|s| {\n                         format!(\n-                            \"<li><a class=\\\"crate mod\\\" href=\\\"{}index.html\\\">{}</a></li>\",\n+                            \"<li><a href=\\\"{}index.html\\\">{}</a></li>\",\n                             ensure_trailing_slash(s),\n                             s\n                         )"}, {"sha": "a83887f7bbd0033473725c6752bbe6da271aecc5", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=9702c6cacf1882607ffde5481c541fc8928bdaf9", "patch": "@@ -207,7 +207,6 @@ a.source,\n .out-of-band,\n span.since,\n details.rustdoc-toggle > summary::before,\n-.content ul.crate a.crate,\n a.srclink,\n #help-button > button,\n details.rustdoc-toggle.top-doc > summary,\n@@ -218,7 +217,7 @@ details.rustdoc-toggle.non-exhaustive > summary::before,\n .more-examples-toggle summary, .more-examples-toggle .hide-more,\n .example-links a,\n /* This selector is for the items listed in the \"all items\" page. */\n-#main-content > ul.docblock > li > a {\n+ul.all-items {\n \tfont-family: \"Fira Sans\", Arial, NanumBarunGothic, sans-serif;\n }\n \n@@ -786,6 +785,7 @@ h2.small-section-header > .anchor {\n \tcontent: '\u00a7';\n }\n \n+.all-items a:hover,\n .docblock a:not(.srclink):not(.test-arrow):not(.scrape-help):hover,\n .docblock-short a:not(.srclink):not(.test-arrow):not(.scrape-help):hover, .item-info a {\n \ttext-decoration: underline;\n@@ -1515,10 +1515,7 @@ kbd {\n \tcursor: default;\n }\n \n-#main-content > ul {\n-\tpadding-left: 10px;\n-}\n-#main-content > ul > li {\n+ul.all-items > li {\n \tlist-style: none;\n }\n "}, {"sha": "5677019fbb88edaaf1ba9f126b2655f353136e1d", "filename": "src/test/rustdoc/index-page.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Ftest%2Frustdoc%2Findex-page.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9702c6cacf1882607ffde5481c541fc8928bdaf9/src%2Ftest%2Frustdoc%2Findex-page.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Findex-page.rs?ref=9702c6cacf1882607ffde5481c541fc8928bdaf9", "patch": "@@ -6,6 +6,6 @@\n \n // @has foo/../index.html\n // @has - '//span[@class=\"in-band\"]' 'List of all crates'\n-// @has - '//ul[@class=\"crate mod\"]//a[@href=\"foo/index.html\"]' 'foo'\n-// @has - '//ul[@class=\"crate mod\"]//a[@href=\"all_item_types/index.html\"]' 'all_item_types'\n+// @has - '//ul[@class=\"all-items\"]//a[@href=\"foo/index.html\"]' 'foo'\n+// @has - '//ul[@class=\"all-items\"]//a[@href=\"all_item_types/index.html\"]' 'all_item_types'\n pub struct Foo;"}]}