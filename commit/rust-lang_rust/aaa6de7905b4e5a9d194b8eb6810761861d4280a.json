{"sha": "aaa6de7905b4e5a9d194b8eb6810761861d4280a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhYTZkZTc5MDViNGU1YTlkMTk0YjhlYjY4MTA3NjE4NjFkNDI4MGE=", "commit": {"author": {"name": "Ophir LOJKINE", "email": "pere.jobs@gmail.com", "date": "2021-09-03T10:14:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-09-03T10:14:55Z"}, "message": "Add a better error message for #39364\n\nThere is a known bug in the implementation of mpsc channels in rust.\r\nThis adds a clearer error message when the bug occurs, so that developers don't lose too much time looking for the origin of the bug.\r\nSee https://github.com/rust-lang/rust/issues/39364", "tree": {"sha": "d238728cc064ebfd69d3afabe1ba13282615f4c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d238728cc064ebfd69d3afabe1ba13282615f4c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aaa6de7905b4e5a9d194b8eb6810761861d4280a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhMfWfCRBK7hj4Ov3rIwAAx3kIAEncIos7XDXcymS86Eea3KHU\n9tAqMErHBHivFWe+wjyv1yuVk6YmtmnJJ9Bf3vz3V4akEneHy0QEtzamTJuSeLPl\n8bLyyUYeTp8ZNYkuDuc3Tn6l8AU9G1Re1D+6MTujcKjaTFdT7DQuicIafkoWRCTc\n4QmAtFoxw5ODScd0raO3Hhe4cwVgf0eDCp0TPOv6LtrTv4PIB0VcyiHTCKwKTuBS\nyopj/Giz3VKXdRp65wjlmmPY9MluoQFxlyGxwf3C48o1QH4HD9SMLaI8yX1gBE6t\nHNZgRYX2nVbeRdDYxQtgNvxnvijWy5vkkKBRo8grNYDfYB3DuucW/qMLresfvcE=\n=KFff\n-----END PGP SIGNATURE-----\n", "payload": "tree d238728cc064ebfd69d3afabe1ba13282615f4c4\nparent fbdff7fae941bce21fd3047f87777c84b866850e\nauthor Ophir LOJKINE <pere.jobs@gmail.com> 1630664095 +0200\ncommitter GitHub <noreply@github.com> 1630664095 +0200\n\nAdd a better error message for #39364\n\nThere is a known bug in the implementation of mpsc channels in rust.\r\nThis adds a clearer error message when the bug occurs, so that developers don't lose too much time looking for the origin of the bug.\r\nSee https://github.com/rust-lang/rust/issues/39364"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aaa6de7905b4e5a9d194b8eb6810761861d4280a", "html_url": "https://github.com/rust-lang/rust/commit/aaa6de7905b4e5a9d194b8eb6810761861d4280a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aaa6de7905b4e5a9d194b8eb6810761861d4280a/comments", "author": {"login": "lovasoa", "id": 552629, "node_id": "MDQ6VXNlcjU1MjYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/552629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lovasoa", "html_url": "https://github.com/lovasoa", "followers_url": "https://api.github.com/users/lovasoa/followers", "following_url": "https://api.github.com/users/lovasoa/following{/other_user}", "gists_url": "https://api.github.com/users/lovasoa/gists{/gist_id}", "starred_url": "https://api.github.com/users/lovasoa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lovasoa/subscriptions", "organizations_url": "https://api.github.com/users/lovasoa/orgs", "repos_url": "https://api.github.com/users/lovasoa/repos", "events_url": "https://api.github.com/users/lovasoa/events{/privacy}", "received_events_url": "https://api.github.com/users/lovasoa/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbdff7fae941bce21fd3047f87777c84b866850e", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbdff7fae941bce21fd3047f87777c84b866850e", "html_url": "https://github.com/rust-lang/rust/commit/fbdff7fae941bce21fd3047f87777c84b866850e"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "d4ee1b414d9b0faaa938a4dbc64d9c3f8ee325a5", "filename": "library/std/src/sync/mpsc/shared.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aaa6de7905b4e5a9d194b8eb6810761861d4280a/library%2Fstd%2Fsrc%2Fsync%2Fmpsc%2Fshared.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aaa6de7905b4e5a9d194b8eb6810761861d4280a/library%2Fstd%2Fsrc%2Fsync%2Fmpsc%2Fshared.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fmpsc%2Fshared.rs?ref=aaa6de7905b4e5a9d194b8eb6810761861d4280a", "patch": "@@ -248,7 +248,7 @@ impl<T> Packet<T> {\n     // Returns true if blocking should proceed.\n     fn decrement(&self, token: SignalToken) -> StartResult {\n         unsafe {\n-            assert_eq!(self.to_wake.load(Ordering::SeqCst), 0);\n+            assert_eq!(self.to_wake.load(Ordering::SeqCst), 0, \"This is a known bug in rust. See https://github.com/rust-lang/rust/issues/39364\");\n             let ptr = token.cast_to_usize();\n             self.to_wake.store(ptr, Ordering::SeqCst);\n "}]}