{"sha": "52a3d38796c616bbed39cda2dc3538f2cedbd5ac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyYTNkMzg3OTZjNjE2YmJlZDM5Y2RhMmRjMzUzOGYyY2VkYmQ1YWM=", "commit": {"author": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2014-02-11T22:29:23Z"}, "committer": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2014-02-14T18:50:19Z"}, "message": "rustdoc: Strip impls of stripped private types\n\nIn strip-private, also strip impls of traits for private types. This\nfixes the search index so searching for \"drop\", \"eq\", etc doesn't throw\nan exception.", "tree": {"sha": "c66fd309d0fdc22dc67a402c5a6e6881bfe5d77d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c66fd309d0fdc22dc67a402c5a6e6881bfe5d77d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/52a3d38796c616bbed39cda2dc3538f2cedbd5ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/52a3d38796c616bbed39cda2dc3538f2cedbd5ac", "html_url": "https://github.com/rust-lang/rust/commit/52a3d38796c616bbed39cda2dc3538f2cedbd5ac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/52a3d38796c616bbed39cda2dc3538f2cedbd5ac/comments", "author": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92c5738aae54a15717005e84499a522d173a4a09", "url": "https://api.github.com/repos/rust-lang/rust/commits/92c5738aae54a15717005e84499a522d173a4a09", "html_url": "https://github.com/rust-lang/rust/commit/92c5738aae54a15717005e84499a522d173a4a09"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "fce4cab52c937027b7d596b5bd24a235910d1e0f", "filename": "src/librustdoc/passes.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/52a3d38796c616bbed39cda2dc3538f2cedbd5ac/src%2Flibrustdoc%2Fpasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a3d38796c616bbed39cda2dc3538f2cedbd5ac/src%2Flibrustdoc%2Fpasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses.rs?ref=52a3d38796c616bbed39cda2dc3538f2cedbd5ac", "patch": "@@ -110,8 +110,16 @@ impl<'a> fold::DocFolder for Stripper<'a> {\n             // handled below\n             clean::ModuleItem(..) => {}\n \n-            // impls/tymethods have no control over privacy\n-            clean::ImplItem(..) | clean::TyMethodItem(..) => {}\n+            // trait impls for private items should be stripped\n+            clean::ImplItem(clean::Impl{ for_: clean::ResolvedPath{ id: ref for_id, .. }, .. }) => {\n+                if !self.exported_items.contains(for_id) {\n+                    return None;\n+                }\n+            }\n+            clean::ImplItem(..) => {}\n+\n+            // tymethods have no control over privacy\n+            clean::TyMethodItem(..) => {}\n         }\n \n         let fastreturn = match i.inner {"}]}