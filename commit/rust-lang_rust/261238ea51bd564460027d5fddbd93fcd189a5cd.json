{"sha": "261238ea51bd564460027d5fddbd93fcd189a5cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2MTIzOGVhNTFiZDU2NDQ2MDAyN2Q1ZmRkYmQ5M2ZjZDE4OWE1Y2Q=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-06-19T01:26:36Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-06-19T01:28:27Z"}, "message": "Change `use_small_heuristics` to an enum and stabilise\n\nSince it is now an enum, we can be future compatible since we can add variants\nfor different heuristics.\n\nCloses #1974", "tree": {"sha": "49410d837d0e5ac1d4bbf31ef41dfacf7e0e71f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/49410d837d0e5ac1d4bbf31ef41dfacf7e0e71f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/261238ea51bd564460027d5fddbd93fcd189a5cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/261238ea51bd564460027d5fddbd93fcd189a5cd", "html_url": "https://github.com/rust-lang/rust/commit/261238ea51bd564460027d5fddbd93fcd189a5cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/261238ea51bd564460027d5fddbd93fcd189a5cd/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1c5c46986eb03836ad3463fca4623695db091de", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1c5c46986eb03836ad3463fca4623695db091de", "html_url": "https://github.com/rust-lang/rust/commit/a1c5c46986eb03836ad3463fca4623695db091de"}], "stats": {"total": 32, "additions": 21, "deletions": 11}, "files": [{"sha": "d868d83a5ce7c497346a84ec51d3baf4df211299", "filename": "CHANGELOG.md", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -2,6 +2,9 @@\n \n ## [Unreleased]\n \n+- `use_small_heuristics` changed to be an enum and stabilised. Configuration\n+  options are now ready for 1.0.\n+\n ## [0.4.1] 2018-03-16\n \n ### Added"}, {"sha": "79a20c4531abbae05353934751a4f28b43ccfaec", "filename": "Configurations.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -275,11 +275,11 @@ fn lorem<Ipsum, Dolor, Sit, Amet>() -> T\n \n Whether to use different formatting for items and expressions if they satisfy a heuristic notion of 'small'.\n \n-- **Default value**: `true`\n-- **Possible values**: `true`, `false`\n-- **Stable**: No\n+- **Default value**: `Default`\n+- **Possible values**: `Default`, `Off`\n+- **Stable**: Yess\n \n-#### `true` (default):\n+#### `Default` (default):\n \n ```rust\n enum Lorem {\n@@ -309,7 +309,7 @@ fn main() {\n }\n ```\n \n-#### `false`:\n+#### `Off`:\n \n ```rust\n enum Lorem {"}, {"sha": "57a02fb531b5258830345f1e37c88db56fe4d423", "filename": "src/config/config_type.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Fconfig_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Fconfig_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fconfig_type.rs?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -399,7 +399,7 @@ macro_rules! create_config {\n             }\n \n             fn set_heuristics(&mut self) {\n-                if self.use_small_heuristics.2 {\n+                if self.use_small_heuristics.2 == Heuristics::Default {\n                     let max_width = self.max_width.2;\n                     self.set().width_heuristics(WidthHeuristics::scaled(max_width));\n                 } else {"}, {"sha": "71bdefeea79ceed12a2827d7447641155e46282f", "filename": "src/config/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fmod.rs?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -41,8 +41,8 @@ create_config! {\n     hard_tabs: bool, false, true, \"Use tab characters for indentation, spaces for alignment\";\n     tab_spaces: usize, 4, true, \"Number of spaces per tab\";\n     newline_style: NewlineStyle, NewlineStyle::Unix, true, \"Unix or Windows line endings\";\n-    use_small_heuristics: bool, true, false, \"Whether to use different formatting for items and \\\n-        expressions if they satisfy a heuristic notion of 'small'.\";\n+    use_small_heuristics: Heuristics, Heuristics::Default, true, \"Whether to use different \\\n+        formatting for items and expressions if they satisfy a heuristic notion of 'small'.\";\n     indent_style: IndentStyle, IndentStyle::Block, false, \"How do we indent expressions or items.\";\n \n     // Comments and strings\n@@ -236,7 +236,7 @@ mod test {\n         create_config! {\n             // Options that are used by the generated functions\n             max_width: usize, 100, true, \"Maximum width of each line\";\n-            use_small_heuristics: bool, true, false,\n+            use_small_heuristics: Heuristics, Heuristics::Default, true,\n                 \"Whether to use different formatting for items and \\\n                  expressions if they satisfy a heuristic notion of 'small'.\";\n             license_template_path: String, String::default(), false,"}, {"sha": "5f781507d901378a35706145f3859696d42b5e31", "filename": "src/config/options.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/src%2Fconfig%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Foptions.rs?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -151,6 +151,13 @@ configuration_option_enum! { TypeDensity:\n     Wide,\n }\n \n+configuration_option_enum! { Heuristics:\n+    // Turn off any heuristics\n+    Off,\n+    // Use Rustfmt's defaults\n+    Default,\n+}\n+\n impl Density {\n     pub fn to_list_tactic(self) -> ListTactic {\n         match self {"}, {"sha": "f9581101bb5bf41dd33338ddd01915a04e1d5c2e", "filename": "tests/source/chains.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/tests%2Fsource%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/tests%2Fsource%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains.rs?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -1,5 +1,5 @@\n // rustfmt-normalize_comments: true\n-// rustfmt-use_small_heuristics: false\n+// rustfmt-use_small_heuristics: Off\n // Test chain formatting.\n \n fn main() {"}, {"sha": "8023b1243cb33cc6abce52232c28e6a2dd463ff3", "filename": "tests/target/chains.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/261238ea51bd564460027d5fddbd93fcd189a5cd/tests%2Ftarget%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/261238ea51bd564460027d5fddbd93fcd189a5cd/tests%2Ftarget%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains.rs?ref=261238ea51bd564460027d5fddbd93fcd189a5cd", "patch": "@@ -1,5 +1,5 @@\n // rustfmt-normalize_comments: true\n-// rustfmt-use_small_heuristics: false\n+// rustfmt-use_small_heuristics: Off\n // Test chain formatting.\n \n fn main() {"}]}