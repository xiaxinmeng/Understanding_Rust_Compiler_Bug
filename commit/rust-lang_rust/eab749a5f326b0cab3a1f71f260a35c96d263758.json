{"sha": "eab749a5f326b0cab3a1f71f260a35c96d263758", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhYjc0OWE1ZjMyNmIwY2FiM2ExZjcxZjI2MGEzNWM5NmQyNjM3NTg=", "commit": {"author": {"name": "toddaaro", "email": "github@opprobrio.us", "date": "2013-08-02T23:48:29Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-08-03T07:09:04Z"}, "message": "modified logging function to truncate output and adjusted error output formatting tests to be compatible with both the new and old runtimes", "tree": {"sha": "9b314c0aa27c17549bac6f865103606cac95c81c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9b314c0aa27c17549bac6f865103606cac95c81c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eab749a5f326b0cab3a1f71f260a35c96d263758", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eab749a5f326b0cab3a1f71f260a35c96d263758", "html_url": "https://github.com/rust-lang/rust/commit/eab749a5f326b0cab3a1f71f260a35c96d263758", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eab749a5f326b0cab3a1f71f260a35c96d263758/comments", "author": {"login": "toddaaro", "id": 366431, "node_id": "MDQ6VXNlcjM2NjQzMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/366431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/toddaaro", "html_url": "https://github.com/toddaaro", "followers_url": "https://api.github.com/users/toddaaro/followers", "following_url": "https://api.github.com/users/toddaaro/following{/other_user}", "gists_url": "https://api.github.com/users/toddaaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/toddaaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/toddaaro/subscriptions", "organizations_url": "https://api.github.com/users/toddaaro/orgs", "repos_url": "https://api.github.com/users/toddaaro/repos", "events_url": "https://api.github.com/users/toddaaro/events{/privacy}", "received_events_url": "https://api.github.com/users/toddaaro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "deddb009f0003734d3c73fa859826d57ec600270", "url": "https://api.github.com/repos/rust-lang/rust/commits/deddb009f0003734d3c73fa859826d57ec600270", "html_url": "https://github.com/rust-lang/rust/commit/deddb009f0003734d3c73fa859826d57ec600270"}], "stats": {"total": 26, "additions": 18, "deletions": 8}, "files": [{"sha": "c53e7e8284103222e5eb8d72bae7e4e75e990f48", "filename": "src/libstd/logging.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Flibstd%2Flogging.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Flibstd%2Flogging.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flogging.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -85,6 +85,16 @@ pub fn log_type<T>(level: u32, object: &T) {\n fn newsched_log_str(msg: ~str) {\n     use rt::task::Task;\n     use rt::local::Local;\n+    use str::StrSlice;\n+    use container::Container;\n+\n+    // Truncate the string\n+    let buf_bytes = 2048;\n+    let msg = if msg.len() > buf_bytes {\n+        msg.slice(0, buf_bytes) + \"[...]\"\n+    } else {\n+        msg\n+    };\n \n     unsafe {\n         match Local::try_unsafe_borrow::<Task>() {"}, {"sha": "8e70c2c3561a2fce2364f19b98791a4929bc5981", "filename": "src/test/run-fail/assert-macro-explicit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'assertion failed: false'\n+// error-pattern:failed at 'assertion failed: false'\n \n fn main() {\n     assert!(false);"}, {"sha": "2159f68cc71701cf42c5d8812c4cecd833a2dc90", "filename": "src/test/run-fail/assert-macro-fmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-assert-fmt 42 rust'\n+// error-pattern:failed at 'test-assert-fmt 42 rust'\n \n fn main() {\n     assert!(false, \"test-assert-fmt %d %s\", 42, \"rust\");"}, {"sha": "f45af290b3d3da28e271af0fe7296aaf0f84150c", "filename": "src/test/run-fail/assert-macro-owned.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-assert-owned'\n+// error-pattern:failed at 'test-assert-owned'\n \n fn main() {\n     assert!(false, ~\"test-assert-owned\");"}, {"sha": "a35258462deaa7f4ad569034ee07916d4981e939", "filename": "src/test/run-fail/assert-macro-static.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-assert-static'\n+// error-pattern:failed at 'test-assert-static'\n \n fn main() {\n     assert!(false, \"test-assert-static\");"}, {"sha": "13e3a6a31a8fa535139ddbe6710d9d5a41925781", "filename": "src/test/run-fail/fail-macro-explicit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'explicit failure'\n+// error-pattern:failed at 'explicit failure'\n \n fn main() {\n     fail!();"}, {"sha": "5fc51ac674581e34f6c64c571fd3a76d811e7792", "filename": "src/test/run-fail/fail-macro-fmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-fail-fmt 42 rust'\n+// error-pattern:failed at 'test-fail-fmt 42 rust'\n \n fn main() {\n     fail!(\"test-fail-fmt %d %s\", 42, \"rust\");"}, {"sha": "e59f5bdcaa1797d8e2507614879291f3f9488f1e", "filename": "src/test/run-fail/fail-macro-owned.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-fail-owned'\n+// error-pattern:failed at 'test-fail-owned'\n \n fn main() {\n     fail!(\"test-fail-owned\");"}, {"sha": "688ca4ce7e5720145a6a7f2efc721753639c3bae", "filename": "src/test/run-fail/fail-macro-static.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eab749a5f326b0cab3a1f71f260a35c96d263758/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs?ref=eab749a5f326b0cab3a1f71f260a35c96d263758", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:task failed at 'test-fail-static'\n+// error-pattern:failed at 'test-fail-static'\n \n fn main() {\n     fail!(\"test-fail-static\");"}]}