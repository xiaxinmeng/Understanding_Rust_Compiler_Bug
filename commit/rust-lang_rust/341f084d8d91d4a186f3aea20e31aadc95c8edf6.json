{"sha": "341f084d8d91d4a186f3aea20e31aadc95c8edf6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0MWYwODRkOGQ5MWQ0YTE4NmYzYWVhMjBlMzFhYWRjOTVjOGVkZjY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-04T19:47:18Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-04T19:47:18Z"}, "message": "Auto merge of #38087 - jooert:remove_unmarked, r=petrochenkov\n\nRemove the `unmarked_api` feature\n\nCloses #37981.", "tree": {"sha": "37713fac5d93a8701fd25de3317afc2fa65f5138", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37713fac5d93a8701fd25de3317afc2fa65f5138"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/341f084d8d91d4a186f3aea20e31aadc95c8edf6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/341f084d8d91d4a186f3aea20e31aadc95c8edf6", "html_url": "https://github.com/rust-lang/rust/commit/341f084d8d91d4a186f3aea20e31aadc95c8edf6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/341f084d8d91d4a186f3aea20e31aadc95c8edf6/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2190f6c3c28595275b73e2b6134e3bfcab1f66f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2190f6c3c28595275b73e2b6134e3bfcab1f66f5", "html_url": "https://github.com/rust-lang/rust/commit/2190f6c3c28595275b73e2b6134e3bfcab1f66f5"}, {"sha": "7cbd18a690da89251390db373d499b1770f20753", "url": "https://api.github.com/repos/rust-lang/rust/commits/7cbd18a690da89251390db373d499b1770f20753", "html_url": "https://github.com/rust-lang/rust/commit/7cbd18a690da89251390db373d499b1770f20753"}], "stats": {"total": 30, "additions": 4, "deletions": 26}, "files": [{"sha": "12d29f2a3a70c2608444b2f0111803d868e44da0", "filename": "src/doc/reference.md", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Fdoc%2Freference.md", "raw_url": "https://github.com/rust-lang/rust/raw/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Fdoc%2Freference.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Freference.md?ref=341f084d8d91d4a186f3aea20e31aadc95c8edf6", "patch": "@@ -2463,11 +2463,6 @@ The currently implemented features of the reference compiler are:\n * `unboxed_closures` - Rust's new closure design, which is currently a work in\n                        progress feature with many known bugs.\n \n-* `unmarked_api` - Allows use of items within a `#![staged_api]` crate\n-                   which have not been marked with a stability marker.\n-                   Such items should not be allowed by the compiler to exist,\n-                   so if you need this there probably is a compiler bug.\n-\n * `allow_internal_unstable` - Allows `macro_rules!` macros to be tagged with the\n                               `#[allow_internal_unstable]` attribute, designed\n                               to allow `std` macros to call"}, {"sha": "3e32957aecfe07ab60fc0d8d5edf5685602e7d5b", "filename": "src/librustc/middle/stability.rs", "status": "modified", "additions": 1, "deletions": 17, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Flibrustc%2Fmiddle%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Flibrustc%2Fmiddle%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fstability.rs?ref=341f084d8d91d4a186f3aea20e31aadc95c8edf6", "patch": "@@ -513,23 +513,7 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n                 // handled by the lint emitting logic above.\n             }\n             None => {\n-                // This is an 'unmarked' API, which should not exist\n-                // in the standard library.\n-                if self.sess.features.borrow().unmarked_api {\n-                    self.sess.struct_span_warn(span, \"use of unmarked library feature\")\n-                             .span_note(span, \"this is either a bug in the library you are \\\n-                                               using or a bug in the compiler - please \\\n-                                               report it in both places\")\n-                             .emit()\n-                } else {\n-                    self.sess.struct_span_err(span, \"use of unmarked library feature\")\n-                             .span_note(span, \"this is either a bug in the library you are \\\n-                                               using or a bug in the compiler - please \\\n-                                               report it in both places\")\n-                             .span_note(span, \"use #![feature(unmarked_api)] in the \\\n-                                               crate attributes to override this\")\n-                             .emit()\n-                }\n+                span_bug!(span, \"encountered unmarked API\");\n             }\n         }\n     }"}, {"sha": "29854260899e75be8221056fc4c490f37568f2c3", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/341f084d8d91d4a186f3aea20e31aadc95c8edf6/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=341f084d8d91d4a186f3aea20e31aadc95c8edf6", "patch": "@@ -153,10 +153,6 @@ declare_features! (\n     // rustc internal\n     (active, staged_api, \"1.0.0\", None),\n \n-    // Allows using items which are missing stability attributes\n-    // rustc internal\n-    (active, unmarked_api, \"1.0.0\", None),\n-\n     // Allows using #![no_core]\n     (active, no_core, \"1.3.0\", Some(29639)),\n \n@@ -333,6 +329,9 @@ declare_features! (\n     (removed, test_removed_feature, \"1.0.0\", None),\n     (removed, visible_private_types, \"1.0.0\", None),\n     (removed, unsafe_no_drop_flag, \"1.0.0\", None),\n+    // Allows using items which are missing stability attributes\n+    // rustc internal\n+    (removed, unmarked_api, \"1.0.0\", None),\n );\n \n declare_features! ("}]}