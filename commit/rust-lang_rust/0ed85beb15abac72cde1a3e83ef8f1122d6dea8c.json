{"sha": "0ed85beb15abac72cde1a3e83ef8f1122d6dea8c", "node_id": "C_kwDOAAsO6NoAKDBlZDg1YmViMTVhYmFjNzJjZGUxYTNlODNlZjhmMTEyMmQ2ZGVhOGM", "commit": {"author": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-05-20T23:36:26Z"}, "committer": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-05-20T23:36:26Z"}, "message": "Don't suggest enum variant if name_ref start with ASCII lowercase letter", "tree": {"sha": "cae749305189b7f624bca8284ae14146fbf21aed", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cae749305189b7f624bca8284ae14146fbf21aed"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c", "html_url": "https://github.com/rust-lang/rust/commit/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c/comments", "author": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d716cbeb984be292802c966f6a858ca5ea29f97", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d716cbeb984be292802c966f6a858ca5ea29f97", "html_url": "https://github.com/rust-lang/rust/commit/7d716cbeb984be292802c966f6a858ca5ea29f97"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "c68b587ad17eb2cf3caf5e2f18bae605e4d36395", "filename": "crates/ide-assists/src/handlers/generate_enum_variant.rs", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed85beb15abac72cde1a3e83ef8f1122d6dea8c/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs?ref=0ed85beb15abac72cde1a3e83ef8f1122d6dea8c", "patch": "@@ -41,6 +41,10 @@ pub(crate) fn generate_enum_variant(acc: &mut Assists, ctx: &AssistContext) -> O\n     }\n \n     let name_ref = path.segment()?.name_ref()?;\n+    if name_ref.text().as_str().chars().next()?.is_ascii_lowercase() {\n+        // No need to generate anything if the name starts with a lowercase letter\n+        return None;\n+    }\n \n     if let Some(hir::PathResolution::Def(hir::ModuleDef::Adt(hir::Adt::Enum(e)))) =\n         ctx.sema.resolve_path(&path.qualifier()?)\n@@ -146,6 +150,21 @@ fn main() {\n         )\n     }\n \n+    #[test]\n+    fn not_applicable_for_lowercase() {\n+        check_assist_not_applicable(\n+            generate_enum_variant,\n+            r\"\n+enum Foo {\n+    Bar,\n+}\n+fn main() {\n+    Foo::new$0\n+}\n+\",\n+        )\n+    }\n+\n     #[test]\n     fn indentation_level_is_correct() {\n         check_assist("}]}