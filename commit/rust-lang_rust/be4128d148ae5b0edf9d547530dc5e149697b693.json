{"sha": "be4128d148ae5b0edf9d547530dc5e149697b693", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlNDEyOGQxNDhhZTViMGVkZjlkNTQ3NTMwZGM1ZTE0OTY5N2I2OTM=", "commit": {"author": {"name": "Jonathan S", "email": "gereeter+code@gmail.com", "date": "2016-01-17T04:55:56Z"}, "committer": {"name": "Jonathan S", "email": "gereeter+code@gmail.com", "date": "2016-01-17T04:55:56Z"}, "message": "BTreeMap: Add a test for clone", "tree": {"sha": "06a0e2366a804fea2225b4b9f270f3e2def66ae7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06a0e2366a804fea2225b4b9f270f3e2def66ae7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be4128d148ae5b0edf9d547530dc5e149697b693", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be4128d148ae5b0edf9d547530dc5e149697b693", "html_url": "https://github.com/rust-lang/rust/commit/be4128d148ae5b0edf9d547530dc5e149697b693", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be4128d148ae5b0edf9d547530dc5e149697b693/comments", "author": {"login": "gereeter", "id": 2328242, "node_id": "MDQ6VXNlcjIzMjgyNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gereeter", "html_url": "https://github.com/gereeter", "followers_url": "https://api.github.com/users/gereeter/followers", "following_url": "https://api.github.com/users/gereeter/following{/other_user}", "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}", "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions", "organizations_url": "https://api.github.com/users/gereeter/orgs", "repos_url": "https://api.github.com/users/gereeter/repos", "events_url": "https://api.github.com/users/gereeter/events{/privacy}", "received_events_url": "https://api.github.com/users/gereeter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gereeter", "id": 2328242, "node_id": "MDQ6VXNlcjIzMjgyNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2328242?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gereeter", "html_url": "https://github.com/gereeter", "followers_url": "https://api.github.com/users/gereeter/followers", "following_url": "https://api.github.com/users/gereeter/following{/other_user}", "gists_url": "https://api.github.com/users/gereeter/gists{/gist_id}", "starred_url": "https://api.github.com/users/gereeter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gereeter/subscriptions", "organizations_url": "https://api.github.com/users/gereeter/orgs", "repos_url": "https://api.github.com/users/gereeter/repos", "events_url": "https://api.github.com/users/gereeter/events{/privacy}", "received_events_url": "https://api.github.com/users/gereeter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd639d8927674cda3303c4d4af33565dab12b17b", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd639d8927674cda3303c4d4af33565dab12b17b", "html_url": "https://github.com/rust-lang/rust/commit/cd639d8927674cda3303c4d4af33565dab12b17b"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "c4473b64066d5f292d54dfffb0fdb63215c4724f", "filename": "src/libcollectionstest/btree/map.rs", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/be4128d148ae5b0edf9d547530dc5e149697b693/src%2Flibcollectionstest%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be4128d148ae5b0edf9d547530dc5e149697b693/src%2Flibcollectionstest%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollectionstest%2Fbtree%2Fmap.rs?ref=be4128d148ae5b0edf9d547530dc5e149697b693", "patch": "@@ -346,6 +346,38 @@ fn test_bad_zst() {\n     }\n }\n \n+#[test]\n+fn test_clone() {\n+    let mut map = BTreeMap::new();\n+    let size = 100;\n+    assert_eq!(map.len(), 0);\n+\n+    for i in 0..size {\n+        assert_eq!(map.insert(i, 10*i), None);\n+        assert_eq!(map.len(), i + 1);\n+        assert_eq!(map, map.clone());\n+    }\n+\n+    for i in 0..size {\n+        assert_eq!(map.insert(i, 100*i), Some(10*i));\n+        assert_eq!(map.len(), size);\n+        assert_eq!(map, map.clone());\n+    }\n+\n+    for i in 0..size/2 {\n+        assert_eq!(map.remove(&(i*2)), Some(i*200));\n+        assert_eq!(map.len(), size - i - 1);\n+        assert_eq!(map, map.clone());\n+    }\n+\n+    for i in 0..size/2 {\n+        assert_eq!(map.remove(&(2*i)), None);\n+        assert_eq!(map.remove(&(2*i+1)), Some(i*200 + 100));\n+        assert_eq!(map.len(), size/2 - i - 1);\n+        assert_eq!(map, map.clone());\n+    }\n+}\n+\n mod bench {\n     use std::collections::BTreeMap;\n     use std::__rand::{Rng, thread_rng};"}]}