{"sha": "1c4dd8d3eb2204510599e090e3bef65f553d066f", "node_id": "C_kwDOAAsO6NoAKDFjNGRkOGQzZWIyMjA0NTEwNTk5ZTA5MGUzYmVmNjVmNTUzZDA2NmY", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-11-02T21:08:09Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-11-05T16:39:50Z"}, "message": "Remove trim_semicolon", "tree": {"sha": "e121bc81f29bc4e470048bb57d3c770a23033f8d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e121bc81f29bc4e470048bb57d3c770a23033f8d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c4dd8d3eb2204510599e090e3bef65f553d066f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c4dd8d3eb2204510599e090e3bef65f553d066f", "html_url": "https://github.com/rust-lang/rust/commit/1c4dd8d3eb2204510599e090e3bef65f553d066f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c4dd8d3eb2204510599e090e3bef65f553d066f/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "445c83f8f36d78895c92f7f8145542b6ea6b59a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/445c83f8f36d78895c92f7f8145542b6ea6b59a8", "html_url": "https://github.com/rust-lang/rust/commit/445c83f8f36d78895c92f7f8145542b6ea6b59a8"}], "stats": {"total": 11, "additions": 2, "deletions": 9}, "files": [{"sha": "bb30accf145429d9208c06b7a420bd9f11c1d11b", "filename": "clippy_lints/src/format_args.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1c4dd8d3eb2204510599e090e3bef65f553d066f/clippy_lints%2Fsrc%2Fformat_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c4dd8d3eb2204510599e090e3bef65f553d066f/clippy_lints%2Fsrc%2Fformat_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat_args.rs?ref=1c4dd8d3eb2204510599e090e3bef65f553d066f", "patch": "@@ -10,7 +10,7 @@ use rustc_lint::{LateContext, LateLintPass};\n use rustc_middle::ty::adjustment::{Adjust, Adjustment};\n use rustc_middle::ty::Ty;\n use rustc_session::{declare_lint_pass, declare_tool_lint};\n-use rustc_span::{sym, BytePos, ExpnData, ExpnKind, Span, Symbol};\n+use rustc_span::{sym, ExpnData, ExpnKind, Span, Symbol};\n \n declare_clippy_lint! {\n     /// ### What it does\n@@ -128,7 +128,7 @@ fn check_format_in_format_args(cx: &LateContext<'_>, call_site: Span, name: Symb\n             span_lint_and_then(\n                 cx,\n                 FORMAT_IN_FORMAT_ARGS,\n-                trim_semicolon(cx, call_site),\n+                call_site,\n                 &format!(\"`format!` in `{}!` args\", name),\n                 |diag| {\n                     diag.help(&format!(\n@@ -192,13 +192,6 @@ fn is_aliased(args: &[FormatArgsArg<'_>], i: usize) -> bool {\n         .any(|(j, arg)| i != j && std::ptr::eq(value, arg.value))\n }\n \n-fn trim_semicolon(cx: &LateContext<'_>, span: Span) -> Span {\n-    snippet_opt(cx, span).map_or(span, |snippet| {\n-        let snippet = snippet.trim_end_matches(';');\n-        span.with_hi(span.lo() + BytePos(u32::try_from(snippet.len()).unwrap()))\n-    })\n-}\n-\n fn count_needed_derefs<'tcx, I>(mut ty: Ty<'tcx>, mut iter: I) -> (usize, Ty<'tcx>)\n where\n     I: Iterator<Item = &'tcx Adjustment<'tcx>>,"}]}