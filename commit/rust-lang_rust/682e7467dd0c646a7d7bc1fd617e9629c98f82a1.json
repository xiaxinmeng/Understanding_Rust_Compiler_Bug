{"sha": "682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4MmU3NDY3ZGQwYzY0NmE3ZDdiYzFmZDYxN2U5NjI5Yzk4ZjgyYTE=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2013-06-21T10:31:11Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2013-07-08T17:55:10Z"}, "message": "Patch up some new errors from rustpkg", "tree": {"sha": "bfdb233723723978b8fcc93e18c648260cd7c556", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bfdb233723723978b8fcc93e18c648260cd7c556"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "html_url": "https://github.com/rust-lang/rust/commit/682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "59083d2c6aedcbab469e263850c717cd958c24e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/59083d2c6aedcbab469e263850c717cd958c24e6", "html_url": "https://github.com/rust-lang/rust/commit/59083d2c6aedcbab469e263850c717cd958c24e6"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "54ad888e2ae8ca2ee442540202a3dcc2b1774125", "filename": "src/librustpkg/package_source.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Fpackage_source.rs", "raw_url": "https://github.com/rust-lang/rust/raw/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Fpackage_source.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Fpackage_source.rs?ref=682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "patch": "@@ -202,7 +202,7 @@ impl PkgSrc {\n                     crates: &[Crate],\n                     cfgs: &[~str],\n                     what: OutputType) {\n-        for crates.iter().advance |&crate| {\n+        for crates.iter().advance |crate| {\n             let path = &src_dir.push_rel(&crate.file).normalize();\n             note(fmt!(\"build_crates: compiling %s\", path.to_str()));\n             note(fmt!(\"build_crates: destination dir is %s\", dst_dir.to_str()));"}, {"sha": "c6f7735b204e47ac600817e0b7b2a3f8a6b31b5b", "filename": "src/librustpkg/path_util.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Fpath_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Fpath_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Fpath_util.rs?ref=682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "patch": "@@ -71,8 +71,8 @@ pub fn make_dir_rwx(p: &Path) -> bool { os::make_dir(p, U_RWX) }\n pub fn workspace_contains_package_id(pkgid: &PkgId, workspace: &Path) -> bool {\n     let src_dir = workspace.push(\"src\");\n     let dirs = os::list_dir(&src_dir);\n-    for dirs.iter().advance |&p| {\n-        let p = Path(p);\n+    for dirs.iter().advance |p| {\n+        let p = Path(copy *p);\n         debug!(\"=> p = %s\", p.to_str());\n         if !os::path_is_dir(&src_dir.push_rel(&p)) {\n             loop;\n@@ -84,8 +84,8 @@ pub fn workspace_contains_package_id(pkgid: &PkgId, workspace: &Path) -> bool {\n         }\n         else {\n             let pf = p.filename();\n-            for pf.iter().advance |&pf| {\n-                let f_ = copy pf;\n+            for pf.iter().advance |pf| {\n+                let f_ = copy *pf;\n                 let g = f_.to_str();\n                 match split_version_general(g, '-') {\n                     Some((ref might_match, ref vers)) => {\n@@ -217,10 +217,10 @@ pub fn library_in_workspace(path: &LocalPath, short_name: &str, where: Target,\n     debug!(\"lib_prefix = %s and lib_filetype = %s\", lib_prefix, lib_filetype);\n \n     let mut result_filename = None;\n-    for dir_contents.iter().advance |&p| {\n+    for dir_contents.iter().advance |p| {\n         let mut which = 0;\n         let mut hash = None;\n-        let p_path = Path(p);\n+        let p_path = Path(copy *p);\n         let extension = p_path.filetype();\n         debug!(\"p = %s, p's extension is %?\", p.to_str(), extension);\n         match extension {"}, {"sha": "da5c98680b9199745444b797081c2497b8fd696f", "filename": "src/librustpkg/util.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/682e7467dd0c646a7d7bc1fd617e9629c98f82a1/src%2Flibrustpkg%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Futil.rs?ref=682e7467dd0c646a7d7bc1fd617e9629c98f82a1", "patch": "@@ -194,7 +194,7 @@ pub fn compile_input(ctxt: &Ctx,\n                               Main => ~[]\n                           }\n                           + flags\n-                          + cfgs.flat_map(|&c| { ~[~\"--cfg\", c] }),\n+                          + cfgs.flat_map(|c| { ~[~\"--cfg\", copy *c] }),\n                           driver::optgroups()).get();\n     let options = @session::options {\n         crate_type: crate_type,\n@@ -311,8 +311,8 @@ pub fn compile_crate(ctxt: &Ctx, pkg_id: &PkgId,\n                      what: OutputType) -> bool {\n     debug!(\"compile_crate: crate=%s, dir=%s\", crate.to_str(), dir.to_str());\n     debug!(\"compile_crate: short_name = %s, flags =...\", pkg_id.to_str());\n-    for flags.iter().advance |&fl| {\n-        debug!(\"+++ %s\", fl);\n+    for flags.iter().advance |fl| {\n+        debug!(\"+++ %s\", *fl);\n     }\n     compile_input(ctxt, pkg_id, crate, dir, flags, cfgs, opt, what)\n }"}]}