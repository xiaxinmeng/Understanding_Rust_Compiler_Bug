{"sha": "747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0N2JjOGVjODhiOTRkZGZiZDY2NWQyMWJiODc3MzI0MTFiY2QxZjc=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-07-21T18:53:39Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-07-22T11:13:15Z"}, "message": "Enable perf try builder\n\nThis adds a dedicated branch for perf to use for CI, intended to allow perf to\nenqueue builds without needing to use bors. bors is great, but bors requires an\nopen PR to work, and we want to invoke perf on closed PRs sometimes (in\nparticular, rollups).", "tree": {"sha": "eefaf0963f08be935516b52c3e600d148b4d8c63", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eefaf0963f08be935516b52c3e600d148b4d8c63"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "html_url": "https://github.com/rust-lang/rust/commit/747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/747bc8ec88b94ddfbd665d21bb87732411bcd1f7/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4825e12fc9c79954aa0fe18f5521efa6c19c7539", "url": "https://api.github.com/repos/rust-lang/rust/commits/4825e12fc9c79954aa0fe18f5521efa6c19c7539", "html_url": "https://github.com/rust-lang/rust/commit/4825e12fc9c79954aa0fe18f5521efa6c19c7539"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "d83971b70bedc45bfecb79c29608d884c0d5ef79", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/747bc8ec88b94ddfbd665d21bb87732411bcd1f7/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/747bc8ec88b94ddfbd665d21bb87732411bcd1f7/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "patch": "@@ -20,6 +20,7 @@ name: CI\n     branches:\n       - auto\n       - try\n+      - try-perf\n       - master\n   pull_request:\n     branches:\n@@ -146,7 +147,7 @@ jobs:\n       CACHES_AWS_ACCESS_KEY_ID: AKIA46X5W6CZI5DHEBFL\n       ARTIFACTS_AWS_ACCESS_KEY_ID: AKIA46X5W6CZN24CBO55\n       CACHE_DOMAIN: ci-caches.rust-lang.org\n-    if: \"github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n+    if: \"github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\"\n     strategy:\n       matrix:\n         include:\n@@ -717,7 +718,7 @@ jobs:\n   try-success:\n     needs:\n       - try\n-    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n+    if: \"success() && github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a success\n         run: exit 0\n@@ -727,7 +728,7 @@ jobs:\n   try-failure:\n     needs:\n       - try\n-    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n+    if: \"!success() && github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a failure\n         run: exit 1"}, {"sha": "0aeb6a04e5f773ec8d12ef17351ba9ef77f5d88f", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/747bc8ec88b94ddfbd665d21bb87732411bcd1f7/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/747bc8ec88b94ddfbd665d21bb87732411bcd1f7/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=747bc8ec88b94ddfbd665d21bb87732411bcd1f7", "patch": "@@ -247,6 +247,7 @@ on:\n     branches:\n       - auto\n       - try\n+      - try-perf\n       - master\n   pull_request:\n     branches:\n@@ -285,7 +286,7 @@ jobs:\n     name: try\n     env:\n       <<: [*shared-ci-variables, *prod-variables]\n-    if: github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\n+    if: github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\n     strategy:\n       matrix:\n         include:\n@@ -645,11 +646,11 @@ jobs:\n   # successful listening to webhooks only.\n   try-success:\n     needs: [try]\n-    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n+    if: \"success() && github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-success-job\n   try-failure:\n     needs: [try]\n-    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n+    if: \"!success() && github.event_name == 'push' && (github.ref == 'refs/heads/try' || github.ref == 'refs/heads/try-perf') && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-failure-job\n   auto-success:\n     needs: [auto]"}]}