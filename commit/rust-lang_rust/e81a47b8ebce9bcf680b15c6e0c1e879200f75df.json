{"sha": "e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4MWE0N2I4ZWJjZTliY2Y2ODBiMTVjNmUwYzFlODc5MjAwZjc1ZGY=", "commit": {"author": {"name": "Michael Bolin", "email": "bolinfest@gmail.com", "date": "2019-07-11T05:49:29Z"}, "committer": {"name": "Michael Bolin", "email": "bolinfest@gmail.com", "date": "2019-07-11T05:49:35Z"}, "message": "Remove executeCommandProvider: apply_code_action.\n\nThis appears to have been introduced ages ago in\nhttps://github.com/rust-analyzer/rust-analyzer/commit/be742a587704f27f4e503c50f549aa9ec1527fcc\nbut has since been removed.\n\nAs it stands, it is problematic if multiple instances of the\nrust-analyzer LSP are launched during the same VS Code session because\nVS Code complains about multiple LSP servers trying to register the\nsame command.\n\nMost LSP servers workaround this by parameterizing the command by the\nprocess id. For example, this is where `rls` does this:\n\nhttps://github.com/rust-lang/rls/blob/ff0b9057c8f62bc4f8113d741e96c9587ef1a817/rls/src/server/mod.rs#L413-L421\n\nThough `apply_code_action` does not seems to be used, so it seems better\nto delete it than to parameterize it.", "tree": {"sha": "b1cb42753d44169529ba62353746ce964bab5c7b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b1cb42753d44169529ba62353746ce964bab5c7b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "html_url": "https://github.com/rust-lang/rust/commit/e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/comments", "author": {"login": "bolinfest", "id": 655869, "node_id": "MDQ6VXNlcjY1NTg2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/655869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bolinfest", "html_url": "https://github.com/bolinfest", "followers_url": "https://api.github.com/users/bolinfest/followers", "following_url": "https://api.github.com/users/bolinfest/following{/other_user}", "gists_url": "https://api.github.com/users/bolinfest/gists{/gist_id}", "starred_url": "https://api.github.com/users/bolinfest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bolinfest/subscriptions", "organizations_url": "https://api.github.com/users/bolinfest/orgs", "repos_url": "https://api.github.com/users/bolinfest/repos", "events_url": "https://api.github.com/users/bolinfest/events{/privacy}", "received_events_url": "https://api.github.com/users/bolinfest/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bolinfest", "id": 655869, "node_id": "MDQ6VXNlcjY1NTg2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/655869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bolinfest", "html_url": "https://github.com/bolinfest", "followers_url": "https://api.github.com/users/bolinfest/followers", "following_url": "https://api.github.com/users/bolinfest/following{/other_user}", "gists_url": "https://api.github.com/users/bolinfest/gists{/gist_id}", "starred_url": "https://api.github.com/users/bolinfest/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bolinfest/subscriptions", "organizations_url": "https://api.github.com/users/bolinfest/orgs", "repos_url": "https://api.github.com/users/bolinfest/repos", "events_url": "https://api.github.com/users/bolinfest/events{/privacy}", "received_events_url": "https://api.github.com/users/bolinfest/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a814883cd40be772d52bb8e7424326021fdb0e0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a814883cd40be772d52bb8e7424326021fdb0e0e", "html_url": "https://github.com/rust-lang/rust/commit/a814883cd40be772d52bb8e7424326021fdb0e0e"}], "stats": {"total": 20, "additions": 8, "deletions": 12}, "files": [{"sha": "bb9205aed4d2b06511bb594c87063b5522758c1a", "filename": "crates/ra_lsp_server/src/caps.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs?ref=e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "patch": "@@ -1,8 +1,8 @@\n use lsp_types::{\n     CodeActionProviderCapability, CodeLensOptions, CompletionOptions,\n-    DocumentOnTypeFormattingOptions, ExecuteCommandOptions, FoldingRangeProviderCapability,\n-    GenericCapability, ImplementationProviderCapability, RenameOptions, RenameProviderCapability,\n-    ServerCapabilities, SignatureHelpOptions, TextDocumentSyncCapability, TextDocumentSyncKind,\n+    DocumentOnTypeFormattingOptions, FoldingRangeProviderCapability, GenericCapability,\n+    ImplementationProviderCapability, RenameOptions, RenameProviderCapability, ServerCapabilities,\n+    SignatureHelpOptions, TextDocumentSyncCapability, TextDocumentSyncKind,\n     TextDocumentSyncOptions, TypeDefinitionProviderCapability,\n };\n \n@@ -44,9 +44,7 @@ pub fn server_capabilities() -> ServerCapabilities {\n             prepare_provider: Some(true),\n         })),\n         color_provider: None,\n-        execute_command_provider: Some(ExecuteCommandOptions {\n-            commands: vec![\"apply_code_action\".to_string()],\n-        }),\n+        execute_command_provider: None,\n         workspace: None,\n     }\n }"}, {"sha": "8d39b04a7482e2bcbdb71f1c46c57e0ccc24408b", "filename": "crates/ra_lsp_server/src/req.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/crates%2Fra_lsp_server%2Fsrc%2Freq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/crates%2Fra_lsp_server%2Fsrc%2Freq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Freq.rs?ref=e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "patch": "@@ -6,10 +6,10 @@ use url_serde;\n pub use lsp_types::{\n     notification::*, request::*, ApplyWorkspaceEditParams, CodeActionParams, CodeLens,\n     CodeLensParams, CompletionParams, CompletionResponse, DidChangeConfigurationParams,\n-    DocumentOnTypeFormattingParams, DocumentSymbolParams, DocumentSymbolResponse,\n-    ExecuteCommandParams, Hover, InitializeResult, MessageType, PublishDiagnosticsParams,\n-    ReferenceParams, ShowMessageParams, SignatureHelp, TextDocumentEdit,\n-    TextDocumentPositionParams, TextEdit, WorkspaceEdit, WorkspaceSymbolParams,\n+    DocumentOnTypeFormattingParams, DocumentSymbolParams, DocumentSymbolResponse, Hover,\n+    InitializeResult, MessageType, PublishDiagnosticsParams, ReferenceParams, ShowMessageParams,\n+    SignatureHelp, TextDocumentEdit, TextDocumentPositionParams, TextEdit, WorkspaceEdit,\n+    WorkspaceSymbolParams,\n };\n \n pub enum AnalyzerStatus {}"}, {"sha": "d3e79b8bee112339471a72f5b2fd2bfbd0352da9", "filename": "docs/dev/lsp-features.md", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/docs%2Fdev%2Flsp-features.md", "raw_url": "https://github.com/rust-lang/rust/raw/e81a47b8ebce9bcf680b15c6e0c1e879200f75df/docs%2Fdev%2Flsp-features.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Flsp-features.md?ref=e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "patch": "@@ -16,8 +16,6 @@ This list documents LSP features, supported by rust-analyzer.\n - [ ] [workspace/configuration](https://microsoft.github.io/language-server-protocol/specification#workspace_configuration)\n - [x] [workspace/didChangeWatchedFiles](https://microsoft.github.io/language-server-protocol/specification#workspace_didChangeWatchedFiles)\n - [x] [workspace/symbol](https://microsoft.github.io/language-server-protocol/specification#workspace_symbol)\n-- [x] [workspace/executeCommand](https://microsoft.github.io/language-server-protocol/specification#workspace_executeCommand)\n- - `apply_code_action`\n - [ ] [workspace/applyEdit](https://microsoft.github.io/language-server-protocol/specification#workspace_applyEdit)\n \n ## Text Synchronization"}]}