{"sha": "50d8e9f2a193b3321009f7f92b2201c0863a1b83", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwZDhlOWYyYTE5M2IzMzIxMDA5ZjdmOTJiMjIwMWMwODYzYTFiODM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-01-24T00:23:08Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-01-24T00:23:08Z"}, "message": "Revert \"rustdoc: Get the crate brief description from the 'desc' attr\"\n\nThis reverts commit 521e58a3c4f45ffc30a914dd0bb517945d87a503.\n\nSome crates use 'desc', some 'comment' - I want them to just use 'doc'", "tree": {"sha": "a1920dc2bde0ec266ce41d067d49a06b44196c6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1920dc2bde0ec266ce41d067d49a06b44196c6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/50d8e9f2a193b3321009f7f92b2201c0863a1b83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/50d8e9f2a193b3321009f7f92b2201c0863a1b83", "html_url": "https://github.com/rust-lang/rust/commit/50d8e9f2a193b3321009f7f92b2201c0863a1b83", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/50d8e9f2a193b3321009f7f92b2201c0863a1b83/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4c31bda62dd42d6d7990a2e56821eff12099bf7", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4c31bda62dd42d6d7990a2e56821eff12099bf7", "html_url": "https://github.com/rust-lang/rust/commit/f4c31bda62dd42d6d7990a2e56821eff12099bf7"}], "stats": {"total": 40, "additions": 5, "deletions": 35}, "files": [{"sha": "f952bb1a92f9261b44335f298f887e9425009cd6", "filename": "src/rustdoc/attr_parser.rs", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Fattr_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Fattr_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fattr_parser.rs?ref=50d8e9f2a193b3321009f7f92b2201c0863a1b83", "patch": "@@ -13,8 +13,7 @@ export crate_attrs, mod_attrs, fn_attrs, arg_attrs;\n export parse_crate, parse_mod, parse_fn;\n \n type crate_attrs = {\n-    name: option<str>,\n-    desc: option<str>\n+    name: option<str>\n };\n \n type mod_attrs = {\n@@ -56,11 +55,9 @@ fn doc_meta(\n \n fn parse_crate(attrs: [ast::attribute]) -> crate_attrs {\n     let link_metas = attr::find_linkage_metas(attrs);\n-    let attr_metas = attr::attr_metas(attrs);\n \n     {\n-        name: attr::meta_item_value_from_list(link_metas, \"name\"),\n-        desc: attr::meta_item_value_from_list(attr_metas, \"desc\")\n+        name: attr::meta_item_value_from_list(link_metas, \"name\")\n     }\n }\n \n@@ -88,14 +85,6 @@ fn should_not_extract_crate_name_if_no_name_value_in_link_attribute() {\n     assert attrs.name == none;\n }\n \n-#[test]\n-fn should_extract_crate_desc() {\n-    let source = \"#[desc = \\\"Teddybears\\\"]\";\n-    let attrs = test::parse_attributes(source);\n-    let attrs = parse_crate(attrs);\n-    assert attrs.desc == some(\"Teddybears\");\n-}\n-\n fn parse_mod(attrs: [ast::attribute]) -> mod_attrs {\n     parse_short_doc_or(\n         attrs,"}, {"sha": "4c945a7869f327312e1a34b58f2a74a9cee59476", "filename": "src/rustdoc/attr_pass.rs", "status": "modified", "additions": 1, "deletions": 22, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Fattr_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Fattr_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fattr_pass.rs?ref=50d8e9f2a193b3321009f7f92b2201c0863a1b83", "patch": "@@ -36,25 +36,14 @@ fn fold_crate(\n     let srv = fold.ctxt;\n     let doc = fold::default_seq_fold_crate(fold, doc);\n \n-    // Use various crate attributes to set documentation on the top mod\n-\n     let attrs = astsrv::exec(srv) {|ctxt|\n         let attrs = ctxt.ast.node.attrs;\n         attr_parser::parse_crate(attrs)\n     };\n \n-    let brief = option::maybe(doc.topmod.brief, attrs.desc) {|desc|\n-        if option::is_some(doc.topmod.brief) {\n-            #warn(\"overriding crate brief doc attribute \\\n-                   with crate description\");\n-        }\n-        some(desc)\n-    };\n-\n     ~{\n         topmod: ~{\n-            name: option::from_maybe(doc.topmod.name, attrs.name),\n-            brief: brief\n+            name: option::from_maybe(doc.topmod.name, attrs.name)\n             with *doc.topmod\n         }\n     }\n@@ -70,16 +59,6 @@ fn should_replace_top_module_name_with_crate_name() {\n     assert doc.topmod.name == \"bond\";\n }\n \n-#[test]\n-fn should_replace_top_module_brief_with_crate_desc() {\n-    let source = \"#[desc = \\\"The Rust compiler\\\"];\";\n-    let srv = astsrv::mk_srv_from_str(source);\n-    let doc = extract::from_srv(srv, \"\");\n-    let fold = fold::default_seq_fold(srv);\n-    let doc = fold_crate(fold, doc);\n-    assert doc.topmod.brief == some(\"The Rust compiler\");\n-}\n-\n fn fold_mod(fold: fold::fold<astsrv::srv>, doc: doc::moddoc) -> doc::moddoc {\n     let srv = fold.ctxt;\n     let attrs = if doc.id == ast::crate_node_id {"}, {"sha": "12a8733a9b2b111cbe84d70904bdbc9ae7efa700", "filename": "src/rustdoc/rustdoc.rc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Frustdoc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/50d8e9f2a193b3321009f7f92b2201c0863a1b83/src%2Frustdoc%2Frustdoc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Frustdoc.rc?ref=50d8e9f2a193b3321009f7f92b2201c0863a1b83", "patch": "@@ -1,3 +1,5 @@\n+#[doc = \"Rustdoc - The Rust documentation generator\"];\n+\n #[link(name = \"rustdoc\",\n        vers = \"0.1\",\n        uuid = \"f8abd014-b281-484d-a0c3-26e3de8e2412\","}]}