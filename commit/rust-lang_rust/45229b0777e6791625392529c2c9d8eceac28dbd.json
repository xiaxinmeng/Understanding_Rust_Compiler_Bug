{"sha": "45229b0777e6791625392529c2c9d8eceac28dbd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1MjI5YjA3NzdlNjc5MTYyNTM5MjUyOWMyYzlkOGVjZWFjMjhkYmQ=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-03-05T14:50:20Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-03-05T20:26:55Z"}, "message": "Rename `rustdoc` to `rustdoc::all`\n\nWhen rustdoc lints were changed to be tool lints, the `rustdoc` group\nwas removed, leading to spurious warnings like\n\n```\nwarning: unknown lint: `rustdoc`\n```\n\nThe lint group still worked when rustdoc ran, since rustdoc added the group itself.\n\nThis renames the group to `rustdoc::all` for consistency with\n`clippy::all` and the rest of the rustdoc lints.", "tree": {"sha": "18d23f922c7ab062417c94e6c738f230452d90b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18d23f922c7ab062417c94e6c738f230452d90b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45229b0777e6791625392529c2c9d8eceac28dbd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45229b0777e6791625392529c2c9d8eceac28dbd", "html_url": "https://github.com/rust-lang/rust/commit/45229b0777e6791625392529c2c9d8eceac28dbd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45229b0777e6791625392529c2c9d8eceac28dbd/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ccc89bc312caa65ca46b55b47492abdd5b6910a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ccc89bc312caa65ca46b55b47492abdd5b6910a", "html_url": "https://github.com/rust-lang/rust/commit/8ccc89bc312caa65ca46b55b47492abdd5b6910a"}], "stats": {"total": 91, "additions": 58, "deletions": 33}, "files": [{"sha": "94ca0df818b9ff0ecaf6af1648adb6495df42fc0", "filename": "compiler/rustc_lint/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/compiler%2Frustc_lint%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/compiler%2Frustc_lint%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Flib.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -343,6 +343,7 @@ fn register_builtins(store: &mut LintStore, no_interleave_lints: bool) {\n         \"intra_doc_link_resolution_failure\",\n         \"use `rustdoc::broken_intra_doc_links` instead\",\n     );\n+    store.register_removed(\"rustdoc\", \"use `rustdoc::all` instead\");\n \n     store.register_removed(\"unknown_features\", \"replaced by an error\");\n     store.register_removed(\"unsigned_negation\", \"replaced by negate_unsigned feature gate\");"}, {"sha": "754ec53b330f133012ad9a120bac3a457befc768", "filename": "src/librustdoc/lint.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Flibrustdoc%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Flibrustdoc%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flint.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -175,8 +175,8 @@ crate fn register_lints(_sess: &Session, lint_store: &mut LintStore) {\n     lint_store.register_lints(&**RUSTDOC_LINTS);\n     lint_store.register_group(\n         true,\n-        \"rustdoc\",\n-        None,\n+        \"rustdoc::all\",\n+        Some(\"rustdoc\"),\n         RUSTDOC_LINTS.iter().map(|&lint| LintId::of(lint)).collect(),\n     );\n     for lint in &*RUSTDOC_LINTS {"}, {"sha": "2355d6a3d6cbc24a4502d9a9644c730e96e643e2", "filename": "src/test/rustdoc-ui/check-fail.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -1,7 +1,7 @@\n // compile-flags: -Z unstable-options --check\n \n #![deny(missing_docs)]\n-#![deny(rustdoc)]\n+#![deny(rustdoc::all)]\n \n //! ```rust,testharness\n //~^ ERROR"}, {"sha": "2758c5490a3d8229bb0706aa6ced678ee991871b", "filename": "src/test/rustdoc-ui/check-fail.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -19,9 +19,9 @@ LL | pub fn foo() {}\n note: the lint level is defined here\n   --> $DIR/check-fail.rs:4:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc::all)]`\n \n error: unknown attribute `testharness`. Did you mean `test_harness`?\n   --> $DIR/check-fail.rs:6:1\n@@ -35,9 +35,9 @@ LL | | //! ```\n note: the lint level is defined here\n   --> $DIR/check-fail.rs:4:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::invalid_codeblock_attributes)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::invalid_codeblock_attributes)]` implied by `#[deny(rustdoc::all)]`\n    = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n \n error: unknown attribute `testharness`. Did you mean `test_harness`?"}, {"sha": "65a56e03d9dfcf4c1c36261525d7ed7aa12e2dd8", "filename": "src/test/rustdoc-ui/check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -4,7 +4,7 @@\n #![warn(missing_docs)]\n //~^ WARN\n //~^^ WARN\n-#![warn(rustdoc)]\n+#![warn(rustdoc::all)]\n \n pub fn foo() {}\n //~^ WARN"}, {"sha": "2e1fc1eca4d6e7e9c0e400249d1fa1130f407915", "filename": "src/test/rustdoc-ui/check.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -4,7 +4,7 @@ warning: missing documentation for the crate\n LL | / #![warn(missing_docs)]\n LL | |\n LL | |\n-LL | | #![warn(rustdoc)]\n+LL | | #![warn(rustdoc::all)]\n LL | |\n LL | | pub fn foo() {}\n    | |_______________^\n@@ -26,9 +26,9 @@ warning: no documentation found for this crate's top-level module\n note: the lint level is defined here\n   --> $DIR/check.rs:7:9\n    |\n-LL | #![warn(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[warn(rustdoc::missing_crate_level_docs)]` implied by `#[warn(rustdoc)]`\n+LL | #![warn(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[warn(rustdoc::missing_crate_level_docs)]` implied by `#[warn(rustdoc::all)]`\n    = help: The following guide may be of use:\n            https://doc.rust-lang.org/nightly/rustdoc/how-to-write-documentation.html\n \n@@ -38,17 +38,17 @@ warning: missing code example in this documentation\n LL | / #![warn(missing_docs)]\n LL | |\n LL | |\n-LL | | #![warn(rustdoc)]\n+LL | | #![warn(rustdoc::all)]\n LL | |\n LL | | pub fn foo() {}\n    | |_______________^\n    |\n note: the lint level is defined here\n   --> $DIR/check.rs:7:9\n    |\n-LL | #![warn(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[warn(rustdoc::missing_doc_code_examples)]` implied by `#[warn(rustdoc)]`\n+LL | #![warn(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[warn(rustdoc::missing_doc_code_examples)]` implied by `#[warn(rustdoc::all)]`\n \n warning: missing code example in this documentation\n   --> $DIR/check.rs:9:1"}, {"sha": "61555a6e68617f1736692ffb67400c1b9e7a3e92", "filename": "src/test/rustdoc-ui/lint-group.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Flint-group.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Flint-group.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-group.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -4,7 +4,7 @@\n //! println!(\"sup\");\n //! ```\n \n-#![deny(rustdoc)]\n+#![deny(rustdoc::all)]\n \n /// what up, let's make an [error]\n ///"}, {"sha": "cc6f03b03ff613431115dbdce0777476876aa8c4", "filename": "src/test/rustdoc-ui/lint-group.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -7,9 +7,9 @@ LL | /// wait, this doesn't have a doctest?\n note: the lint level is defined here\n   --> $DIR/lint-group.rs:7:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc::all)]`\n \n error: documentation test in private item\n   --> $DIR/lint-group.rs:19:1\n@@ -24,9 +24,9 @@ LL | | /// ```\n note: the lint level is defined here\n   --> $DIR/lint-group.rs:7:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::private_doc_tests)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::private_doc_tests)]` implied by `#[deny(rustdoc::all)]`\n \n error: missing code example in this documentation\n   --> $DIR/lint-group.rs:26:1\n@@ -43,9 +43,9 @@ LL | /// what up, let's make an [error]\n note: the lint level is defined here\n   --> $DIR/lint-group.rs:7:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::broken_intra_doc_links)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::broken_intra_doc_links)]` implied by `#[deny(rustdoc::all)]`\n    = help: to escape `[` and `]` characters, add '\\' before them like `\\[` or `\\]`\n \n error: unclosed HTML tag `unknown`\n@@ -57,9 +57,9 @@ LL | /// <unknown>\n note: the lint level is defined here\n   --> $DIR/lint-group.rs:7:9\n    |\n-LL | #![deny(rustdoc)]\n-   |         ^^^^^^^\n-   = note: `#[deny(rustdoc::invalid_html_tags)]` implied by `#[deny(rustdoc)]`\n+LL | #![deny(rustdoc::all)]\n+   |         ^^^^^^^^^^^^\n+   = note: `#[deny(rustdoc::invalid_html_tags)]` implied by `#[deny(rustdoc::all)]`\n \n error: aborting due to 5 previous errors\n "}, {"sha": "9d20cb7d30d55c727a718a48af9039d80f4ffc15", "filename": "src/test/rustdoc-ui/unknown-renamed-lints.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -12,6 +12,9 @@\n #![deny(non_autolinks)]\n //~^ ERROR renamed to `rustdoc::non_autolinks`\n \n+#![deny(rustdoc)]\n+//~^ ERROR removed: use `rustdoc::all` instead\n+\n // Explicitly don't try to handle this case, it was never valid\n #![deny(rustdoc::intra_doc_link_resolution_failure)]\n //~^ ERROR unknown lint"}, {"sha": "2036335e855747e4264fe53188fd75215630510a", "filename": "src/test/rustdoc-ui/unknown-renamed-lints.stderr", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Funknown-renamed-lints.stderr?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -34,13 +34,19 @@ error: lint `non_autolinks` has been renamed to `rustdoc::non_autolinks`\n LL | #![deny(non_autolinks)]\n    |         ^^^^^^^^^^^^^ help: use the new name: `rustdoc::non_autolinks`\n \n+error: lint `rustdoc` has been removed: use `rustdoc::all` instead\n+  --> $DIR/unknown-renamed-lints.rs:15:9\n+   |\n+LL | #![deny(rustdoc)]\n+   |         ^^^^^^^\n+\n error: unknown lint: `rustdoc::intra_doc_link_resolution_failure`\n-  --> $DIR/unknown-renamed-lints.rs:16:9\n+  --> $DIR/unknown-renamed-lints.rs:19:9\n    |\n LL | #![deny(rustdoc::intra_doc_link_resolution_failure)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: Compilation failed, aborting rustdoc\n \n-error: aborting due to 6 previous errors\n+error: aborting due to 7 previous errors\n "}, {"sha": "130abe4253a1392cfae8e4d1dc6d27296d9aeb2e", "filename": "src/test/ui/lint/rustdoc-group.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Fui%2Flint%2Frustdoc-group.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Fui%2Flint%2Frustdoc-group.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Frustdoc-group.rs?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -0,0 +1,5 @@\n+// check-pass\n+// compile-flags: --crate-type lib\n+#![deny(rustdoc)]\n+//~^ WARNING removed: use `rustdoc::all`\n+#![deny(rustdoc::all)] // has no effect when run with rustc directly"}, {"sha": "fddc863ae1e99190fc577a8a87a29bb30cfb85d8", "filename": "src/test/ui/lint/rustdoc-group.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Fui%2Flint%2Frustdoc-group.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45229b0777e6791625392529c2c9d8eceac28dbd/src%2Ftest%2Fui%2Flint%2Frustdoc-group.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Frustdoc-group.stderr?ref=45229b0777e6791625392529c2c9d8eceac28dbd", "patch": "@@ -0,0 +1,10 @@\n+warning: lint `rustdoc` has been removed: use `rustdoc::all` instead\n+  --> $DIR/rustdoc-group.rs:3:9\n+   |\n+LL | #![deny(rustdoc)]\n+   |         ^^^^^^^\n+   |\n+   = note: `#[warn(renamed_and_removed_lints)]` on by default\n+\n+warning: 1 warning emitted\n+"}]}