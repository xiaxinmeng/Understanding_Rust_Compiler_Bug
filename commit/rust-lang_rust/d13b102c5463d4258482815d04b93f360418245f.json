{"sha": "d13b102c5463d4258482815d04b93f360418245f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxM2IxMDJjNTQ2M2Q0MjU4NDgyODE1ZDA0YjkzZjM2MDQxODI0NWY=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-10-12T17:15:26Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-10-12T21:07:54Z"}, "message": "Rollup merge of #36991 - wesleywiser:fixme_1, r=arielb1\n\nMove IdxSetBuf and BitSlice to rustc_data_structures\n\nResolves a FIXME", "tree": {"sha": "160dc7f9201e9e54ef7133585b68ecc27278005a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/160dc7f9201e9e54ef7133585b68ecc27278005a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d13b102c5463d4258482815d04b93f360418245f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d13b102c5463d4258482815d04b93f360418245f", "html_url": "https://github.com/rust-lang/rust/commit/d13b102c5463d4258482815d04b93f360418245f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d13b102c5463d4258482815d04b93f360418245f/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "091b5471226a5dd8049ba498134daac03376c4d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/091b5471226a5dd8049ba498134daac03376c4d5", "html_url": "https://github.com/rust-lang/rust/commit/091b5471226a5dd8049ba498134daac03376c4d5"}, {"sha": "5e91c073f232472e65c8f8021f47d3c91657881c", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e91c073f232472e65c8f8021f47d3c91657881c", "html_url": "https://github.com/rust-lang/rust/commit/5e91c073f232472e65c8f8021f47d3c91657881c"}], "stats": {"total": 30, "additions": 12, "deletions": 18}, "files": [{"sha": "f6260527039d0129823fa91d1678d1cc721dfc07", "filename": "src/librustc_borrowck/borrowck/mir/dataflow/graphviz.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fgraphviz.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -12,6 +12,8 @@\n \n use syntax::ast::NodeId;\n use rustc::mir::repr::{BasicBlock, Mir};\n+use rustc_data_structures::bitslice::bits_to_string;\n+use rustc_data_structures::indexed_set::{IdxSet};\n use rustc_data_structures::indexed_vec::Idx;\n \n use dot;\n@@ -27,8 +29,6 @@ use std::path::Path;\n \n use super::super::MoveDataParamEnv;\n use super::super::MirBorrowckCtxtPreDataflow;\n-use bitslice::bits_to_string;\n-use indexed_set::{IdxSet};\n use super::{BitDenotation, DataflowState};\n \n impl<O: BitDenotation> DataflowState<O> {"}, {"sha": "dce167975cf34d0fb7d8f749b77839da40d24ebb", "filename": "src/librustc_borrowck/borrowck/mir/dataflow/impls.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fimpls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fimpls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fimpls.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -10,6 +10,9 @@\n \n use rustc::ty::TyCtxt;\n use rustc::mir::repr::{self, Mir, Location};\n+use rustc_data_structures::bitslice::BitSlice; // adds set_bit/get_bit to &[usize] bitvector rep.\n+use rustc_data_structures::bitslice::{BitwiseOperator};\n+use rustc_data_structures::indexed_set::{IdxSet};\n use rustc_data_structures::indexed_vec::Idx;\n \n use super::super::gather_moves::{MoveOutIndex, MovePathIndex};\n@@ -21,10 +24,6 @@ use super::super::on_lookup_result_bits;\n \n use super::{BitDenotation, BlockSets, DataflowOperator};\n \n-use bitslice::BitSlice; // adds set_bit/get_bit to &[usize] bitvector rep.\n-use bitslice::{BitwiseOperator};\n-use indexed_set::{IdxSet};\n-\n // Dataflow analyses are built upon some interpretation of the\n // bitvectors attached to each basic block, represented via a\n // zero-sized structure."}, {"sha": "0c510e95b67fe26b6402037d5cbdc444cd9484d5", "filename": "src/librustc_borrowck/borrowck/mir/dataflow/mod.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Fdataflow%2Fmod.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -8,7 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use rustc_data_structures::indexed_set::{IdxSet, IdxSetBuf};\n use rustc_data_structures::indexed_vec::Idx;\n+use rustc_data_structures::bitslice::{bitwise, BitwiseOperator};\n \n use rustc::ty::TyCtxt;\n use rustc::mir::repr::{self, Mir};\n@@ -22,9 +24,6 @@ use std::usize;\n use super::MirBorrowckCtxtPreDataflow;\n use super::MoveDataParamEnv;\n \n-use bitslice::{bitwise, BitwiseOperator};\n-use indexed_set::{IdxSet, IdxSetBuf};\n-\n pub use self::sanity_check::sanity_check_via_rustc_peek;\n pub use self::impls::{MaybeInitializedLvals, MaybeUninitializedLvals};\n pub use self::impls::{DefinitelyInitializedLvals, MovingOutStatements};"}, {"sha": "25986b85f7b3a3d0cf603a9105ebb0800cd128fc", "filename": "src/librustc_borrowck/borrowck/mir/elaborate_drops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Felaborate_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Felaborate_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmir%2Felaborate_drops.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -8,7 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use indexed_set::IdxSetBuf;\n use super::gather_moves::{MoveData, MovePathIndex, LookupResult};\n use super::dataflow::{MaybeInitializedLvals, MaybeUninitializedLvals};\n use super::dataflow::{DataflowResults};\n@@ -23,6 +22,7 @@ use rustc::mir::transform::{Pass, MirPass, MirSource};\n use rustc::middle::const_val::ConstVal;\n use rustc::middle::lang_items;\n use rustc::util::nodemap::FnvHashMap;\n+use rustc_data_structures::indexed_set::IdxSetBuf;\n use rustc_data_structures::indexed_vec::Idx;\n use syntax_pos::Span;\n "}, {"sha": "905acb79a996309537a18fad41ff35445ea1a5d3", "filename": "src/librustc_borrowck/lib.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_borrowck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Flib.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -50,8 +50,6 @@ pub use borrowck::{AnalysisData, BorrowckCtxt, ElaborateDrops};\n pub mod diagnostics;\n \n mod borrowck;\n-mod bitslice;\n-mod indexed_set;\n \n pub mod graphviz;\n "}, {"sha": "ba53578e5791852ccc56486325bda181fff1f2e7", "filename": "src/librustc_data_structures/bitslice.rs", "status": "renamed", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Fbitslice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Fbitslice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fbitslice.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -8,8 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// FIXME: move this to `rustc_data_structures` and potentially merge\n-// with `bitvec` there.\n+// FIXME: merge with `bitvec`\n \n use std::mem;\n ", "previous_filename": "src/librustc_borrowck/bitslice.rs"}, {"sha": "2e9e054e97eafe7dd0172d5f116710d65f1c7669", "filename": "src/librustc_data_structures/indexed_set.rs", "status": "renamed", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Findexed_set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Findexed_set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Findexed_set.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -8,16 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// FIXME: move this to `rustc_data_structures`\n-\n use std::fmt;\n use std::marker::PhantomData;\n use std::mem;\n use std::ops::{Deref, DerefMut, Range};\n use bitslice::{BitSlice, Word};\n use bitslice::{bitwise, Union, Subtract};\n-\n-use rustc_data_structures::indexed_vec::Idx;\n+use indexed_vec::Idx;\n \n /// Represents a set (or packed family of sets), of some element type\n /// E, where each E is identified by some unique index type `T`.", "previous_filename": "src/librustc_borrowck/indexed_set.rs"}, {"sha": "c8f4d766153cf9788b26ff8d00963b5a7abc5340", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d13b102c5463d4258482815d04b93f360418245f/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=d13b102c5463d4258482815d04b93f360418245f", "patch": "@@ -41,9 +41,11 @@ extern crate serialize as rustc_serialize; // used by deriving\n #[cfg(unix)]\n extern crate libc;\n \n+pub mod bitslice;\n pub mod bitvec;\n pub mod graph;\n pub mod ivar;\n+pub mod indexed_set;\n pub mod indexed_vec;\n pub mod obligation_forest;\n pub mod snapshot_map;"}]}