{"sha": "694b0486371752cd75270788f30e19a16601f88d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5NGIwNDg2MzcxNzUyY2Q3NTI3MDc4OGYzMGUxOWExNjYwMWY4OGQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-05T15:43:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-05T15:43:34Z"}, "message": "Rollup merge of #61546 - alexcrichton:fix-azure, r=pietroalbini\n\nazure: Fix some minor issues which have broken our configuration\n\n* Ensure that when we enable IPv6 for Docker on Linux that the various directories before writing a config file\n* Delete a previously installed rustup if any since it seems to interfere with Cargo's test suite.", "tree": {"sha": "634f8455dd741aa6d35996dd28469a300c3e582c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/634f8455dd741aa6d35996dd28469a300c3e582c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/694b0486371752cd75270788f30e19a16601f88d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc9+MmCRBK7hj4Ov3rIwAAdHIIADLNpSDmOlmuRMyi7IpGKW5C\n2OyT63t8VBHuCouMpE3RvQEMNZxDayZlbRzh61Y/chHV4BvFVaQR0cuJ6pbneSeV\nfY8yGDFhXj7mtkZgt7yWFObCqH6Leo57iCzLk+XW74SWytexLpdpuKgCoZ5OSdee\nOcC2NjQaT7g1j528Zjcv6/Oz2/uvOR7gezeyOBcpDqwPnfaLBMc0gf6Y+Dwt4Q/+\nDgiB7E/jSlcp6jgT79eVh0ypgOfKbBXilgGF8cUu5zj08FDuZAr56q7hONbBtnwW\nrZo0HCVbCbBUsJvSoAOnoeJFE+HVFCjPI+QpPAwA/EWTQIgSlquaaNIvAw2meOw=\n=COsE\n-----END PGP SIGNATURE-----\n", "payload": "tree 634f8455dd741aa6d35996dd28469a300c3e582c\nparent 928f2eeb7bab8ab63539d68989981c9aed8a65bb\nparent fb3bd58e4f75c6752d0e2d32a04270044515c00d\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1559749414 +0200\ncommitter GitHub <noreply@github.com> 1559749414 +0200\n\nRollup merge of #61546 - alexcrichton:fix-azure, r=pietroalbini\n\nazure: Fix some minor issues which have broken our configuration\n\n* Ensure that when we enable IPv6 for Docker on Linux that the various directories before writing a config file\n* Delete a previously installed rustup if any since it seems to interfere with Cargo's test suite.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/694b0486371752cd75270788f30e19a16601f88d", "html_url": "https://github.com/rust-lang/rust/commit/694b0486371752cd75270788f30e19a16601f88d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/694b0486371752cd75270788f30e19a16601f88d/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "928f2eeb7bab8ab63539d68989981c9aed8a65bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/928f2eeb7bab8ab63539d68989981c9aed8a65bb", "html_url": "https://github.com/rust-lang/rust/commit/928f2eeb7bab8ab63539d68989981c9aed8a65bb"}, {"sha": "fb3bd58e4f75c6752d0e2d32a04270044515c00d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb3bd58e4f75c6752d0e2d32a04270044515c00d", "html_url": "https://github.com/rust-lang/rust/commit/fb3bd58e4f75c6752d0e2d32a04270044515c00d"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "a646b34fe7d024adb4cf8f4ba1dbfa967c326e44", "filename": ".azure-pipelines/steps/run.yml", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/694b0486371752cd75270788f30e19a16601f88d/.azure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/694b0486371752cd75270788f30e19a16601f88d/.azure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Fsteps%2Frun.yml?ref=694b0486371752cd75270788f30e19a16601f88d", "patch": "@@ -50,6 +50,7 @@ steps:\n # on since libstd tests require it\n - bash: |\n     set -e\n+    sudo mkdir -p /etc/docker\n     echo '{\"ipv6\":true,\"fixed-cidr-v6\":\"fd9a:8454:6789:13f7::/64\"}' | sudo tee /etc/docker/daemon.json\n     sudo service docker restart\n   displayName: Enable IPv6\n@@ -101,6 +102,10 @@ steps:\n \n - bash: |\n     set -e\n+    # Remove any preexisting rustup installation since it can interfere\n+    # with the cargotest step and its auto-detection of things like Clippy in\n+    # the environment\n+    rustup self uninstall -y || true\n     if [ \"$IMAGE\" = \"\" ]; then\n       src/ci/run.sh\n     else"}]}