{"sha": "984b10da169bff9bcc1fcf75984467f0f218108a", "node_id": "C_kwDOAAsO6NoAKDk4NGIxMGRhMTY5YmZmOWJjYzFmY2Y3NTk4NDQ2N2YwZjIxODEwOGE", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-20T20:34:10Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-20T20:34:10Z"}, "message": "Change Backtrace::enabled atomic from SeqCst to Relaxed", "tree": {"sha": "409d3f7540109bf218ee7d3f02c50434c6b45249", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/409d3f7540109bf218ee7d3f02c50434c6b45249"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/984b10da169bff9bcc1fcf75984467f0f218108a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHA6MIACgkQ+boUO5X/\nbYIYxw//SDbNbQFukqFWkHXM93/1ofUuQa2vzugNxXShmOyywIi81JOpwJBlke8A\nxRAnUExEeM6swWJYqLfh/pr9zKv8zuCAmIt7GLr9mCNzIFcWtWaFpnS+OdVIOdCk\nnK29+gNAO7JoutGKjyZxuucpit1IyPYOBz1DFu25M+B8ubbzCX+hGEawthUxK0fR\nBaBpuZgPjFD9iLqrAiRPe8mmiNJVp4DLUNf0vyL61nmkdP6eNzoyz/JvJCtk2okd\nm4I1oEVv96UXWri58W6dhfelj/xaQR5j1uBlPYkTxxLw592VULwouypxskJnqvIy\n3BUQBB0lkKa2clMl7SrT8mhbsdeCgXlbTNSO0eiP/PDS2JjgUJ82V20bO4BSwlfZ\nQXDJli2/JjKJw1g4s2wg+sI4Te8ZGTMT5mJGXQocr82hBBXN9muGW1QskARfmXdn\n3fbr8fggv6CrIIdcFV6KdCJbvRuqUKUGWQYTJ2u0SxL5JlVi+kFlZUTXGa4Anwdq\nQ75ubl7JnwOYsHTYGrqyJ7871BDvRFpsQgWcwG63md/8xbPIRo2ttL9Dx1ma3CSz\nkpF2IkH1G1qq3hgCM9AHVngcwdfVcuG0Vyjx02wCi2NZpZwSOlOzrF3oqUtxxeed\ncRscT32TNsqMkJ34arUHI5Tfaw8gZ2mhxPKjGTe5nwkP1VhYnTg=\n=s7hC\n-----END PGP SIGNATURE-----", "payload": "tree 409d3f7540109bf218ee7d3f02c50434c6b45249\nparent 23f69235ad2eb9b44ac1a55eeaa3f9b484d9de4a\nauthor David Tolnay <dtolnay@gmail.com> 1640032450 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1640032450 -0800\n\nChange Backtrace::enabled atomic from SeqCst to Relaxed\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/984b10da169bff9bcc1fcf75984467f0f218108a", "html_url": "https://github.com/rust-lang/rust/commit/984b10da169bff9bcc1fcf75984467f0f218108a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/984b10da169bff9bcc1fcf75984467f0f218108a/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23f69235ad2eb9b44ac1a55eeaa3f9b484d9de4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/23f69235ad2eb9b44ac1a55eeaa3f9b484d9de4a", "html_url": "https://github.com/rust-lang/rust/commit/23f69235ad2eb9b44ac1a55eeaa3f9b484d9de4a"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "94e6070c0f794f70d5b11226c492e6315cbcc37b", "filename": "library/std/src/backtrace.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/984b10da169bff9bcc1fcf75984467f0f218108a/library%2Fstd%2Fsrc%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/984b10da169bff9bcc1fcf75984467f0f218108a/library%2Fstd%2Fsrc%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fbacktrace.rs?ref=984b10da169bff9bcc1fcf75984467f0f218108a", "patch": "@@ -99,7 +99,7 @@ use crate::cell::UnsafeCell;\n use crate::env;\n use crate::ffi::c_void;\n use crate::fmt;\n-use crate::sync::atomic::{AtomicUsize, Ordering::SeqCst};\n+use crate::sync::atomic::{AtomicUsize, Ordering::Relaxed};\n use crate::sync::Once;\n use crate::sys_common::backtrace::{lock, output_filename};\n use crate::vec::Vec;\n@@ -256,7 +256,7 @@ impl Backtrace {\n         // backtrace captures speedy, because otherwise reading environment\n         // variables every time can be somewhat slow.\n         static ENABLED: AtomicUsize = AtomicUsize::new(0);\n-        match ENABLED.load(SeqCst) {\n+        match ENABLED.load(Relaxed) {\n             0 => {}\n             1 => return false,\n             _ => return true,\n@@ -268,7 +268,7 @@ impl Backtrace {\n                 Err(_) => false,\n             },\n         };\n-        ENABLED.store(enabled as usize + 1, SeqCst);\n+        ENABLED.store(enabled as usize + 1, Relaxed);\n         enabled\n     }\n "}]}