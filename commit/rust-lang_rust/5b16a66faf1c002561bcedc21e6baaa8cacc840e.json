{"sha": "5b16a66faf1c002561bcedc21e6baaa8cacc840e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMTZhNjZmYWYxYzAwMjU2MWJjZWRjMjFlNmJhYWE4Y2FjYzg0MGU=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-11-06T16:02:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-06T16:02:28Z"}, "message": "Rollup merge of #78795 - est31:node_id_assignment_doc_fix, r=oli-obk\n\nThe renumber pass is long gone\n\nOriginally, there has been a dedicated pass for renumbering\nAST NodeIds to have actual values. This pass had been added by\ncommit a5ad4c379466519a0bf977864a5cdc50a7ade385.\n\nThen, later, this step was moved to where it resides now,\nmacro expansion. See commit c86c8d41a26b2037e80c9fd028a59313a78b3a66\nor PR #36438.\n\nThe comment snippet, added by the original commit, has\nsurvived the times without any change, becoming outdated\nat removal of the dedicated pass.\n\nNowadays, grepping for the next_node_id function will show up\nmultiple places in the compiler that call it, but the main\nrewriting that the comment talks about is still done in the\nexpansion step, inside an innocious looking visit_id function\nthat's called during macro invocation collection.", "tree": {"sha": "cfa0ae6fd852fdba02dffe9e0a7f7ef4a2278087", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfa0ae6fd852fdba02dffe9e0a7f7ef4a2278087"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b16a66faf1c002561bcedc21e6baaa8cacc840e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfpXOVCRBK7hj4Ov3rIwAAdHIIAGnJbi/vgiyYBk7nsXiUWzQo\nkwduAIc8qFcgGWvaVBpmV7SXFPUgKH8N6ok9znjphe50b89gCBnaBPTqApemp2jF\nNtP+Bj87Zi0TP0DaErgCNZL8dPSXv8f54VhTZBnyepK3yYGSzAal3ui+HOmp10wk\ndR3w93C3Za62VWkMnd/zpUNE+J09JHcnHdg1T/dDcGic7VUWo4e3rPJofjt90dlb\ngJ0ps6MIWU1KV7EAvVIanoYRbRErrq8AA1iR4er7vgeFKLlbsCIK6KClsMiQcAnU\nKhYiveZQc5lAzmB68bjpIy6CyKEe0799htFUkJNs+jyl1QfxMroievmgXaUloEw=\n=/cyR\n-----END PGP SIGNATURE-----\n", "payload": "tree cfa0ae6fd852fdba02dffe9e0a7f7ef4a2278087\nparent 09a40af85eae9895f6e4d90967d566aaec217769\nparent dfa5e46fd56337aee6ce8473526cd8e43787289f\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1604678548 +0900\ncommitter GitHub <noreply@github.com> 1604678548 +0900\n\nRollup merge of #78795 - est31:node_id_assignment_doc_fix, r=oli-obk\n\nThe renumber pass is long gone\n\nOriginally, there has been a dedicated pass for renumbering\nAST NodeIds to have actual values. This pass had been added by\ncommit a5ad4c379466519a0bf977864a5cdc50a7ade385.\n\nThen, later, this step was moved to where it resides now,\nmacro expansion. See commit c86c8d41a26b2037e80c9fd028a59313a78b3a66\nor PR #36438.\n\nThe comment snippet, added by the original commit, has\nsurvived the times without any change, becoming outdated\nat removal of the dedicated pass.\n\nNowadays, grepping for the next_node_id function will show up\nmultiple places in the compiler that call it, but the main\nrewriting that the comment talks about is still done in the\nexpansion step, inside an innocious looking visit_id function\nthat's called during macro invocation collection.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b16a66faf1c002561bcedc21e6baaa8cacc840e", "html_url": "https://github.com/rust-lang/rust/commit/5b16a66faf1c002561bcedc21e6baaa8cacc840e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b16a66faf1c002561bcedc21e6baaa8cacc840e/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "09a40af85eae9895f6e4d90967d566aaec217769", "url": "https://api.github.com/repos/rust-lang/rust/commits/09a40af85eae9895f6e4d90967d566aaec217769", "html_url": "https://github.com/rust-lang/rust/commit/09a40af85eae9895f6e4d90967d566aaec217769"}, {"sha": "dfa5e46fd56337aee6ce8473526cd8e43787289f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfa5e46fd56337aee6ce8473526cd8e43787289f", "html_url": "https://github.com/rust-lang/rust/commit/dfa5e46fd56337aee6ce8473526cd8e43787289f"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "6e7d2bab2877eadc77f0a756cf38598afe0984a9", "filename": "compiler/rustc_ast/src/node_id.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5b16a66faf1c002561bcedc21e6baaa8cacc840e/compiler%2Frustc_ast%2Fsrc%2Fnode_id.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b16a66faf1c002561bcedc21e6baaa8cacc840e/compiler%2Frustc_ast%2Fsrc%2Fnode_id.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Fnode_id.rs?ref=5b16a66faf1c002561bcedc21e6baaa8cacc840e", "patch": "@@ -13,8 +13,8 @@ rustc_data_structures::define_id_collections!(NodeMap, NodeSet, NodeId);\n pub const CRATE_NODE_ID: NodeId = NodeId::from_u32(0);\n \n /// When parsing and doing expansions, we initially give all AST nodes this AST\n-/// node value. Then later, in the renumber pass, we renumber them to have\n-/// small, positive ids.\n+/// node value. Then later, during expansion, we renumber them to have small,\n+/// positive ids.\n pub const DUMMY_NODE_ID: NodeId = NodeId::MAX;\n \n impl NodeId {"}]}