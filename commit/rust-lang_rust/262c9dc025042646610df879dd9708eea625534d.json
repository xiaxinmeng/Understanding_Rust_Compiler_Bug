{"sha": "262c9dc025042646610df879dd9708eea625534d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2MmM5ZGMwMjUwNDI2NDY2MTBkZjg3OWRkOTcwOGVlYTYyNTUzNGQ=", "commit": {"author": {"name": "ThibsG", "email": "Thibs@debian.com", "date": "2020-05-29T16:15:42Z"}, "committer": {"name": "ThibsG", "email": "Thibs@debian.com", "date": "2020-06-01T08:39:52Z"}, "message": "Fix more code examples", "tree": {"sha": "c57546a9b3a6ac676b68939e14c705a8854aa3b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c57546a9b3a6ac676b68939e14c705a8854aa3b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/262c9dc025042646610df879dd9708eea625534d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/262c9dc025042646610df879dd9708eea625534d", "html_url": "https://github.com/rust-lang/rust/commit/262c9dc025042646610df879dd9708eea625534d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/262c9dc025042646610df879dd9708eea625534d/comments", "author": {"login": "ThibsG", "id": 12683889, "node_id": "MDQ6VXNlcjEyNjgzODg5", "avatar_url": "https://avatars.githubusercontent.com/u/12683889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThibsG", "html_url": "https://github.com/ThibsG", "followers_url": "https://api.github.com/users/ThibsG/followers", "following_url": "https://api.github.com/users/ThibsG/following{/other_user}", "gists_url": "https://api.github.com/users/ThibsG/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThibsG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThibsG/subscriptions", "organizations_url": "https://api.github.com/users/ThibsG/orgs", "repos_url": "https://api.github.com/users/ThibsG/repos", "events_url": "https://api.github.com/users/ThibsG/events{/privacy}", "received_events_url": "https://api.github.com/users/ThibsG/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ThibsG", "id": 12683889, "node_id": "MDQ6VXNlcjEyNjgzODg5", "avatar_url": "https://avatars.githubusercontent.com/u/12683889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThibsG", "html_url": "https://github.com/ThibsG", "followers_url": "https://api.github.com/users/ThibsG/followers", "following_url": "https://api.github.com/users/ThibsG/following{/other_user}", "gists_url": "https://api.github.com/users/ThibsG/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThibsG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThibsG/subscriptions", "organizations_url": "https://api.github.com/users/ThibsG/orgs", "repos_url": "https://api.github.com/users/ThibsG/repos", "events_url": "https://api.github.com/users/ThibsG/events{/privacy}", "received_events_url": "https://api.github.com/users/ThibsG/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61587c9a294a423fb9eb9d57c5856c9e83e22d42", "url": "https://api.github.com/repos/rust-lang/rust/commits/61587c9a294a423fb9eb9d57c5856c9e83e22d42", "html_url": "https://github.com/rust-lang/rust/commit/61587c9a294a423fb9eb9d57c5856c9e83e22d42"}], "stats": {"total": 72, "additions": 51, "deletions": 21}, "files": [{"sha": "575462f25e61d254140eaee28705bfdb0cef9f1e", "filename": "clippy_lints/src/fallible_impl_from.rs", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffallible_impl_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffallible_impl_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffallible_impl_from.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -18,13 +18,24 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n     /// struct Foo(i32);\n+    ///\n+    /// // Bad\n     /// impl From<String> for Foo {\n     ///     fn from(s: String) -> Self {\n     ///         Foo(s.parse().unwrap())\n     ///     }\n     /// }\n+    ///\n+    /// // Good\n+    /// use std::convert::TryFrom;\n+    /// impl TryFrom<String> for Foo {\n+    ///     type Error = ();\n+    ///     fn try_from(s: String) -> Result<Self, Self::Error> {\n+    ///         s.parse()\n+    ///     }\n+    /// }\n     /// ```\n     pub FALLIBLE_IMPL_FROM,\n     nursery,\n@@ -120,7 +131,7 @@ fn lint_impl_body<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, impl_span: Span, impl_it\n                         move |diag| {\n                             diag.help(\n                                 \"`From` is intended for infallible conversions only. \\\n-                                 Use `TryFrom` if there's a possibility for the conversion to fail.\");\n+                                Use `TryFrom` if there's a possibility for the conversion to fail.\");\n                             diag.span_note(fpu.result, \"potential failure(s)\");\n                         });\n                 }"}, {"sha": "3a912d928375ddc79e6b620f8e4c23a302a0c4f5", "filename": "clippy_lints/src/floating_point_arithmetic.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -28,7 +28,6 @@ declare_clippy_lint! {\n     /// **Example:**\n     ///\n     /// ```rust\n-    ///\n     /// let a = 3f32;\n     /// let _ = a.powf(1.0 / 3.0);\n     /// let _ = (1.0 + a).ln();\n@@ -38,7 +37,6 @@ declare_clippy_lint! {\n     /// is better expressed as\n     ///\n     /// ```rust\n-    ///\n     /// let a = 3f32;\n     /// let _ = a.cbrt();\n     /// let _ = a.ln_1p();"}, {"sha": "1530538aa7d13107f07fce63377a54ce44e6ad0b", "filename": "clippy_lints/src/format.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -25,9 +25,13 @@ declare_clippy_lint! {\n     ///\n     /// **Examples:**\n     /// ```rust\n+    ///\n+    /// // Bad\n     /// # let foo = \"foo\";\n-    /// format!(\"foo\");\n     /// format!(\"{}\", foo);\n+    ///\n+    /// // Good\n+    /// format!(\"foo\");\n     /// ```\n     pub USELESS_FORMAT,\n     complexity,"}, {"sha": "9b5f1dee7f44a60804604ff61a8fa83be6484b09", "filename": "clippy_lints/src/functions.rs", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -49,11 +49,11 @@ declare_clippy_lint! {\n     /// **Known problems:** None.\n     ///\n     /// **Example:**\n-    /// ``` rust\n+    /// ```rust\n     /// fn im_too_long() {\n-    /// println!(\"\");\n+    ///     println!(\"\");\n     /// // ... 100 more LoC\n-    /// println!(\"\");\n+    ///     println!(\"\");\n     /// }\n     /// ```\n     pub TOO_MANY_LINES,\n@@ -79,10 +79,16 @@ declare_clippy_lint! {\n     /// `some_argument.get_raw_ptr()`).\n     ///\n     /// **Example:**\n-    /// ```rust\n+    /// ```rust,ignore\n+    /// // Bad\n     /// pub fn foo(x: *const u8) {\n     ///     println!(\"{}\", unsafe { *x });\n     /// }\n+    ///\n+    /// // Good\n+    /// pub unsafe fn foo(x: *const u8) {\n+    ///     println!(\"{}\", unsafe { *x });\n+    /// }\n     /// ```\n     pub NOT_UNSAFE_PTR_ARG_DEREF,\n     correctness,"}, {"sha": "fdaf37e5e08fa79abb7a21ae94550db6aadfdfd6", "filename": "clippy_lints/src/implicit_saturating_sub.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fimplicit_saturating_sub.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -25,13 +25,6 @@ declare_clippy_lint! {\n     /// if i != 0 {\n     ///     i -= 1;\n     /// }\n-    /// ```\n-    /// Use instead:\n-    /// ```rust\n-    /// let end: u32 = 10;\n-    /// let start: u32 = 5;\n-    ///\n-    /// let mut i: u32 = end - start;\n     ///\n     /// // Good\n     /// i = i.saturating_sub(1);"}, {"sha": "e91fb0c2f27cd0340caf1ace6afb0fb8e70d7098", "filename": "clippy_lints/src/int_plus_one.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fint_plus_one.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fint_plus_one.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fint_plus_one.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -10,7 +10,6 @@ use crate::utils::{snippet_opt, span_lint_and_sugg};\n declare_clippy_lint! {\n     /// **What it does:** Checks for usage of `x >= y + 1` or `x - 1 >= y` (and `<=`) in a block\n     ///\n-    ///\n     /// **Why is this bad?** Readability -- better to use `> y` instead of `>= y + 1`.\n     ///\n     /// **Known problems:** None."}, {"sha": "d537ef3f3238e05c9cb0029d959800fbd1ca145f", "filename": "clippy_lints/src/integer_division.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Finteger_division.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Finteger_division.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finteger_division.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -15,10 +15,13 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n-    /// fn main() {\n-    ///     let x = 3 / 2;\n-    ///     println!(\"{}\", x);\n-    /// }\n+    /// // Bad\n+    /// let x = 3 / 2;\n+    /// println!(\"{}\", x);\n+    ///\n+    /// // Good\n+    /// let x = 3f32 / 2f32;\n+    /// println!(\"{}\", x);\n     /// ```\n     pub INTEGER_DIVISION,\n     restriction,"}, {"sha": "c8576bcfcb444bfdcd436e005da71d0791ece679", "filename": "clippy_lints/src/items_after_statements.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/262c9dc025042646610df879dd9708eea625534d/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fitems_after_statements.rs?ref=262c9dc025042646610df879dd9708eea625534d", "patch": "@@ -16,6 +16,7 @@ declare_clippy_lint! {\n     ///\n     /// **Example:**\n     /// ```rust\n+    /// // Bad\n     /// fn foo() {\n     ///     println!(\"cake\");\n     /// }\n@@ -28,6 +29,21 @@ declare_clippy_lint! {\n     ///     foo(); // prints \"foo\"\n     /// }\n     /// ```\n+    ///\n+    /// ```rust\n+    /// // Good\n+    /// fn foo() {\n+    ///     println!(\"cake\");\n+    /// }\n+    ///\n+    /// fn main() {\n+    ///     fn foo() {\n+    ///         println!(\"foo\");\n+    ///     }\n+    ///     foo(); // prints \"foo\"\n+    ///     foo(); // prints \"foo\"\n+    /// }\n+    /// ```\n     pub ITEMS_AFTER_STATEMENTS,\n     pedantic,\n     \"blocks where an item comes after a statement\""}]}