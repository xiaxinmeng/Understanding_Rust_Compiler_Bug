{"sha": "d0b482a27c1a347eac366bde82340e527c6cecf8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwYjQ4MmEyN2MxYTM0N2VhYzM2NmJkZTgyMzQwZTUyN2M2Y2VjZjg=", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-08-18T23:13:25Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-08-21T23:15:05Z"}, "message": "Add more tuple pattern too many fields test cases", "tree": {"sha": "60dfb6d3c4e37213ab3ae6a7382c228e22b229bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/60dfb6d3c4e37213ab3ae6a7382c228e22b229bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0b482a27c1a347eac366bde82340e527c6cecf8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0b482a27c1a347eac366bde82340e527c6cecf8", "html_url": "https://github.com/rust-lang/rust/commit/d0b482a27c1a347eac366bde82340e527c6cecf8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0b482a27c1a347eac366bde82340e527c6cecf8/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da25af2940f44f841f91ba038535e8e84c4893f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/da25af2940f44f841f91ba038535e8e84c4893f3", "html_url": "https://github.com/rust-lang/rust/commit/da25af2940f44f841f91ba038535e8e84c4893f3"}], "stats": {"total": 264, "additions": 258, "deletions": 6}, "files": [{"sha": "dd0548a088c720a5d7c687d15efefb415d70893b", "filename": "src/test/ui/pattern/pat-tuple-overfield.rs", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/d0b482a27c1a347eac366bde82340e527c6cecf8/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0b482a27c1a347eac366bde82340e527c6cecf8/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.rs?ref=d0b482a27c1a347eac366bde82340e527c6cecf8", "patch": "@@ -1,4 +1,18 @@\n struct S(u8, u8, u8);\n+struct M(\n+    u8,\n+    u8,\n+    u8,\n+    u8,\n+    u8,\n+);\n+\n+struct Z0;\n+struct Z1();\n+enum E1 {\n+    Z0,\n+    Z1(),\n+}\n \n fn main() {\n     match (1, 2, 3) {\n@@ -13,4 +27,32 @@ fn main() {\n         //~^ ERROR this pattern has 4 fields, but the corresponding tuple struct has 3 fields\n         _ => {}\n     }\n+    match M(1, 2, 3, 4, 5) {\n+        M(1, 2, 3, 4, 5, 6) => {}\n+        //~^ ERROR this pattern has 6 fields, but the corresponding tuple struct has 5 fields\n+    }\n+    match Z0 {\n+        Z0 => {}\n+        Z0() => {} //~ ERROR expected tuple struct or tuple variant, found unit struct `Z0`\n+        Z0(_) => {} //~ ERROR expected tuple struct or tuple variant, found unit struct `Z0`\n+        Z0(_, _) => {} //~ ERROR expected tuple struct or tuple variant, found unit struct `Z0`\n+    }\n+    match Z1() {\n+        Z1 => {} //~ ERROR match bindings cannot shadow tuple structs\n+        Z1() => {}\n+        Z1(_) => {} //~ ERROR this pattern has 1 field, but the corresponding tuple struct has 0 fields\n+        Z1(_, _) => {} //~ ERROR this pattern has 2 fields, but the corresponding tuple struct has 0 fields\n+    }\n+    match E1::Z0 {\n+        E1::Z0 => {}\n+        E1::Z0() => {} //~ ERROR expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+        E1::Z0(_) => {} //~ ERROR expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+        E1::Z0(_, _) => {} //~ ERROR expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+    }\n+    match E1::Z1() {\n+        E1::Z1 => {} //~ ERROR expected unit struct, unit variant or constant, found tuple variant `E1::Z1`\n+        E1::Z1() => {}\n+        E1::Z1(_) => {} //~ ERROR this pattern has 1 field, but the corresponding tuple variant has 0 fields\n+        E1::Z1(_, _) => {} //~ ERROR this pattern has 2 fields, but the corresponding tuple variant has 0 fields\n+    }\n }"}, {"sha": "cc4ca4326eccdc05af4f24480ca42b20458f8519", "filename": "src/test/ui/pattern/pat-tuple-overfield.stderr", "status": "modified", "additions": 216, "deletions": 6, "changes": 222, "blob_url": "https://github.com/rust-lang/rust/blob/d0b482a27c1a347eac366bde82340e527c6cecf8/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d0b482a27c1a347eac366bde82340e527c6cecf8/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fpat-tuple-overfield.stderr?ref=d0b482a27c1a347eac366bde82340e527c6cecf8", "patch": "@@ -1,5 +1,154 @@\n+error[E0530]: match bindings cannot shadow tuple structs\n+  --> $DIR/pat-tuple-overfield.rs:43:9\n+   |\n+LL | struct Z1();\n+   | ------------ the tuple struct `Z1` is defined here\n+...\n+LL |         Z1 => {}\n+   |         ^^ cannot be named the same as a tuple struct\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit struct `Z0`\n+  --> $DIR/pat-tuple-overfield.rs:38:9\n+   |\n+LL | struct Z0;\n+   | ---------- `Z0` defined here\n+LL | struct Z1();\n+   | ------------ similarly named tuple struct `Z1` defined here\n+...\n+LL |         Z0() => {}\n+   |         ^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         Z0 => {}\n+   |         ~~\n+help: a tuple struct with a similar name exists\n+   |\n+LL |         Z1() => {}\n+   |         ~~\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit struct `Z0`\n+  --> $DIR/pat-tuple-overfield.rs:39:9\n+   |\n+LL | struct Z0;\n+   | ---------- `Z0` defined here\n+LL | struct Z1();\n+   | ------------ similarly named tuple struct `Z1` defined here\n+...\n+LL |         Z0(_) => {}\n+   |         ^^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         Z0 => {}\n+   |         ~~\n+help: a tuple struct with a similar name exists\n+   |\n+LL |         Z1(_) => {}\n+   |         ~~\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit struct `Z0`\n+  --> $DIR/pat-tuple-overfield.rs:40:9\n+   |\n+LL | struct Z0;\n+   | ---------- `Z0` defined here\n+LL | struct Z1();\n+   | ------------ similarly named tuple struct `Z1` defined here\n+...\n+LL |         Z0(_, _) => {}\n+   |         ^^^^^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         Z0 => {}\n+   |         ~~\n+help: a tuple struct with a similar name exists\n+   |\n+LL |         Z1(_, _) => {}\n+   |         ~~\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+  --> $DIR/pat-tuple-overfield.rs:50:9\n+   |\n+LL |     Z0,\n+   |     -- `E1::Z0` defined here\n+LL |     Z1(),\n+   |     ---- similarly named tuple variant `Z1` defined here\n+...\n+LL |         E1::Z0() => {}\n+   |         ^^^^^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         E1::Z0 => {}\n+   |         ~~~~~~\n+help: a tuple variant with a similar name exists\n+   |\n+LL |         E1::Z1() => {}\n+   |             ~~\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+  --> $DIR/pat-tuple-overfield.rs:51:9\n+   |\n+LL |     Z0,\n+   |     -- `E1::Z0` defined here\n+LL |     Z1(),\n+   |     ---- similarly named tuple variant `Z1` defined here\n+...\n+LL |         E1::Z0(_) => {}\n+   |         ^^^^^^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         E1::Z0 => {}\n+   |         ~~~~~~\n+help: a tuple variant with a similar name exists\n+   |\n+LL |         E1::Z1(_) => {}\n+   |             ~~\n+\n+error[E0532]: expected tuple struct or tuple variant, found unit variant `E1::Z0`\n+  --> $DIR/pat-tuple-overfield.rs:52:9\n+   |\n+LL |     Z0,\n+   |     -- `E1::Z0` defined here\n+LL |     Z1(),\n+   |     ---- similarly named tuple variant `Z1` defined here\n+...\n+LL |         E1::Z0(_, _) => {}\n+   |         ^^^^^^^^^^^^\n+   |\n+help: use this syntax instead\n+   |\n+LL |         E1::Z0 => {}\n+   |         ~~~~~~\n+help: a tuple variant with a similar name exists\n+   |\n+LL |         E1::Z1(_, _) => {}\n+   |             ~~\n+\n+error[E0532]: expected unit struct, unit variant or constant, found tuple variant `E1::Z1`\n+  --> $DIR/pat-tuple-overfield.rs:55:9\n+   |\n+LL |     Z0,\n+   |     -- similarly named unit variant `Z0` defined here\n+LL |     Z1(),\n+   |     ---- `E1::Z1` defined here\n+...\n+LL |         E1::Z1 => {}\n+   |         ^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         E1::Z1() => {}\n+   |         ~~~~~~~~\n+help: a unit variant with a similar name exists\n+   |\n+LL |         E1::Z0 => {}\n+   |             ~~\n+\n error[E0308]: mismatched types\n-  --> $DIR/pat-tuple-overfield.rs:5:9\n+  --> $DIR/pat-tuple-overfield.rs:21:9\n    |\n LL |     match (1, 2, 3) {\n    |           --------- this expression has type `({integer}, {integer}, {integer})`\n@@ -10,7 +159,7 @@ LL |         (1, 2, 3, 4) => {}\n               found tuple `(_, _, _, _)`\n \n error[E0308]: mismatched types\n-  --> $DIR/pat-tuple-overfield.rs:6:9\n+  --> $DIR/pat-tuple-overfield.rs:22:9\n    |\n LL |     match (1, 2, 3) {\n    |           --------- this expression has type `({integer}, {integer}, {integer})`\n@@ -22,7 +171,7 @@ LL |         (1, 2, .., 3, 4) => {}\n               found tuple `(_, _, _, _)`\n \n error[E0023]: this pattern has 4 fields, but the corresponding tuple struct has 3 fields\n-  --> $DIR/pat-tuple-overfield.rs:10:10\n+  --> $DIR/pat-tuple-overfield.rs:26:10\n    |\n LL | struct S(u8, u8, u8);\n    | --------------------- tuple struct defined here\n@@ -33,7 +182,7 @@ LL |         S(1, 2, 3, 4) => {}\n    |         this tuple struct\n \n error[E0023]: this pattern has 4 fields, but the corresponding tuple struct has 3 fields\n-  --> $DIR/pat-tuple-overfield.rs:12:10\n+  --> $DIR/pat-tuple-overfield.rs:28:10\n    |\n LL | struct S(u8, u8, u8);\n    | --------------------- tuple struct defined here\n@@ -43,7 +192,68 @@ LL |         S(1, 2, .., 3, 4) => {}\n    |         |\n    |         this tuple struct\n \n-error: aborting due to 4 previous errors\n+error[E0023]: this pattern has 6 fields, but the corresponding tuple struct has 5 fields\n+  --> $DIR/pat-tuple-overfield.rs:33:10\n+   |\n+LL | / struct M(\n+LL | |     u8,\n+LL | |     u8,\n+LL | |     u8,\n+LL | |     u8,\n+LL | |     u8,\n+LL | | );\n+   | |__- tuple struct defined here\n+...\n+LL |           M(1, 2, 3, 4, 5, 6) => {}\n+   |           -^^^^^^^^^^^^^^^^^^ expected 5 fields, found 6\n+   |           |\n+   |           this tuple struct\n+\n+error[E0023]: this pattern has 1 field, but the corresponding tuple struct has 0 fields\n+  --> $DIR/pat-tuple-overfield.rs:45:11\n+   |\n+LL | struct Z1();\n+   | ------------ tuple struct defined here\n+...\n+LL |         Z1(_) => {}\n+   |         --^^^ expected 0 fields, found 1\n+   |         |\n+   |         this tuple struct\n+\n+error[E0023]: this pattern has 2 fields, but the corresponding tuple struct has 0 fields\n+  --> $DIR/pat-tuple-overfield.rs:46:11\n+   |\n+LL | struct Z1();\n+   | ------------ tuple struct defined here\n+...\n+LL |         Z1(_, _) => {}\n+   |         --^^^^^^ expected 0 fields, found 2\n+   |         |\n+   |         this tuple struct\n+\n+error[E0023]: this pattern has 1 field, but the corresponding tuple variant has 0 fields\n+  --> $DIR/pat-tuple-overfield.rs:57:15\n+   |\n+LL |     Z1(),\n+   |     ---- tuple variant defined here\n+...\n+LL |         E1::Z1(_) => {}\n+   |         ------^^^ expected 0 fields, found 1\n+   |         |\n+   |         this tuple variant\n+\n+error[E0023]: this pattern has 2 fields, but the corresponding tuple variant has 0 fields\n+  --> $DIR/pat-tuple-overfield.rs:58:15\n+   |\n+LL |     Z1(),\n+   |     ---- tuple variant defined here\n+...\n+LL |         E1::Z1(_, _) => {}\n+   |         ------^^^^^^ expected 0 fields, found 2\n+   |         |\n+   |         this tuple variant\n+\n+error: aborting due to 17 previous errors\n \n-Some errors have detailed explanations: E0023, E0308.\n+Some errors have detailed explanations: E0023, E0308, E0530, E0532.\n For more information about an error, try `rustc --explain E0023`."}]}