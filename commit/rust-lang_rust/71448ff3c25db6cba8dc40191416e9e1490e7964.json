{"sha": "71448ff3c25db6cba8dc40191416e9e1490e7964", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxNDQ4ZmYzYzI1ZGI2Y2JhOGRjNDAxOTE0MTZlOWUxNDkwZTc5NjQ=", "commit": {"author": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-04-01T12:21:52Z"}, "committer": {"name": "Shotaro Yamada", "email": "sinkuu@sinkuu.xyz", "date": "2018-04-01T13:29:26Z"}, "message": "Return String instead of always returing Cow::Owned", "tree": {"sha": "c502df09e94e90a299589be457fb7f9db1c1db97", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c502df09e94e90a299589be457fb7f9db1c1db97"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/71448ff3c25db6cba8dc40191416e9e1490e7964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/71448ff3c25db6cba8dc40191416e9e1490e7964", "html_url": "https://github.com/rust-lang/rust/commit/71448ff3c25db6cba8dc40191416e9e1490e7964", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/71448ff3c25db6cba8dc40191416e9e1490e7964/comments", "author": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39e85281f33f40742041fd8e1d8ef1cd7fa760b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/39e85281f33f40742041fd8e1d8ef1cd7fa760b1", "html_url": "https://github.com/rust-lang/rust/commit/39e85281f33f40742041fd8e1d8ef1cd7fa760b1"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "db4f01fa6887178ea26496ea35f6c4cb5627347f", "filename": "src/missed_spans.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/71448ff3c25db6cba8dc40191416e9e1490e7964/src%2Fmissed_spans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/71448ff3c25db6cba8dc40191416e9e1490e7964/src%2Fmissed_spans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmissed_spans.rs?ref=71448ff3c25db6cba8dc40191416e9e1490e7964", "patch": "@@ -175,7 +175,7 @@ impl<'a> FmtVisitor<'a> {\n         let mut status = SnippetStatus::new(char_pos.line);\n \n         let snippet = &*match self.config.write_mode() {\n-            WriteMode::Coverage => replace_chars(old_snippet),\n+            WriteMode::Coverage => Cow::from(replace_chars(old_snippet)),\n             _ => Cow::from(old_snippet),\n         };\n \n@@ -320,11 +320,9 @@ impl<'a> FmtVisitor<'a> {\n     }\n }\n \n-fn replace_chars(string: &str) -> Cow<str> {\n-    Cow::from(\n-        string\n-            .chars()\n-            .map(|ch| if ch.is_whitespace() { ch } else { 'X' })\n-            .collect::<String>(),\n-    )\n+fn replace_chars(string: &str) -> String {\n+    string\n+        .chars()\n+        .map(|ch| if ch.is_whitespace() { ch } else { 'X' })\n+        .collect()\n }"}]}