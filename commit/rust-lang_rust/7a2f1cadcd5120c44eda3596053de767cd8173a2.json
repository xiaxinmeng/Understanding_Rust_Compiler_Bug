{"sha": "7a2f1cadcd5120c44eda3596053de767cd8173a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhMmYxY2FkY2Q1MTIwYzQ0ZWRhMzU5NjA1M2RlNzY3Y2Q4MTczYTI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-06T16:06:33Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-06T16:06:33Z"}, "message": "Auto merge of #1887 - hyd-dev:rustup, r=RalfJung\n\n`rustc_target::abi::LayoutOf` -> `rustc_middle::ty::layout::LayoutOf`\n\nThis should  <!---->fix<!----> rust-lang/rust#88671.", "tree": {"sha": "7b39fd111910b0324d2fabddeebdea9108d22c00", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b39fd111910b0324d2fabddeebdea9108d22c00"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a2f1cadcd5120c44eda3596053de767cd8173a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a2f1cadcd5120c44eda3596053de767cd8173a2", "html_url": "https://github.com/rust-lang/rust/commit/7a2f1cadcd5120c44eda3596053de767cd8173a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a2f1cadcd5120c44eda3596053de767cd8173a2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f1fca7512dc0cb79279de810687be64ca2b38e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f1fca7512dc0cb79279de810687be64ca2b38e6", "html_url": "https://github.com/rust-lang/rust/commit/4f1fca7512dc0cb79279de810687be64ca2b38e6"}, {"sha": "3fedc7b249fd5f9450b6c2d2df28a5b828166ac9", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fedc7b249fd5f9450b6c2d2df28a5b828166ac9", "html_url": "https://github.com/rust-lang/rust/commit/3fedc7b249fd5f9450b6c2d2df28a5b828166ac9"}], "stats": {"total": 46, "additions": 28, "deletions": 18}, "files": [{"sha": "33be6b9182b898bca20a780fb1d4df0503b05da7", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -1 +1 @@\n-6cfa773583bb5123e630668f5bfe466716225546\n+1c858ba5bf7bd06c1a970efbf77053c8380b3151"}, {"sha": "f6adbd48cd5c439e06ab8cc8b27af85cd45d02e3", "filename": "src/eval.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Feval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Feval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Feval.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -6,8 +6,11 @@ use std::ffi::OsStr;\n use log::info;\n \n use rustc_hir::def_id::DefId;\n-use rustc_middle::ty::{self, layout::LayoutCx, TyCtxt};\n-use rustc_target::abi::LayoutOf;\n+use rustc_middle::ty::{\n+    self,\n+    layout::{LayoutCx, LayoutOf},\n+    TyCtxt,\n+};\n use rustc_target::spec::abi::Abi;\n \n use crate::*;"}, {"sha": "081712dddc838b40617ec975b2e092dca0fe5d40", "filename": "src/helpers.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -7,9 +7,13 @@ use log::trace;\n \n use rustc_hir::def_id::{DefId, CRATE_DEF_INDEX};\n use rustc_middle::mir;\n-use rustc_middle::ty::{self, layout::TyAndLayout, List, TyCtxt};\n+use rustc_middle::ty::{\n+    self,\n+    layout::{LayoutOf, TyAndLayout},\n+    List, TyCtxt,\n+};\n use rustc_span::Symbol;\n-use rustc_target::abi::{Align, FieldsShape, LayoutOf, Size, Variants};\n+use rustc_target::abi::{Align, FieldsShape, Size, Variants};\n use rustc_target::spec::abi::Abi;\n \n use rand::RngCore;"}, {"sha": "fb39503b538589b95c6409cb8009221142a2c819", "filename": "src/machine.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fmachine.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fmachine.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmachine.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -16,13 +16,13 @@ use rustc_middle::{\n     mir,\n     ty::{\n         self,\n-        layout::{LayoutCx, LayoutError, TyAndLayout},\n+        layout::{LayoutCx, LayoutError, LayoutOf, TyAndLayout},\n         Instance, TyCtxt,\n     },\n };\n use rustc_span::def_id::DefId;\n use rustc_span::symbol::{sym, Symbol};\n-use rustc_target::abi::{LayoutOf, Size};\n+use rustc_target::abi::Size;\n use rustc_target::spec::abi::Abi;\n \n use crate::*;"}, {"sha": "eb25cfd9935fff7592ce5be953591e3ee8f67bb2", "filename": "src/shims/backtrace.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fbacktrace.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -1,6 +1,6 @@\n-use crate::rustc_target::abi::LayoutOf as _;\n use crate::*;\n use rustc_ast::ast::Mutability;\n+use rustc_middle::ty::layout::LayoutOf as _;\n use rustc_middle::ty::{self, TypeAndMut};\n use rustc_span::{BytePos, Symbol};\n use rustc_target::{abi::Size, spec::abi::Abi};"}, {"sha": "74c0b56e467bbe0acc07558f5a47926cc2754acf", "filename": "src/shims/env.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fenv.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -4,8 +4,9 @@ use std::ffi::{OsStr, OsString};\n use std::io::ErrorKind;\n \n use rustc_data_structures::fx::FxHashMap;\n+use rustc_middle::ty::layout::LayoutOf;\n use rustc_mir::interpret::Pointer;\n-use rustc_target::abi::{LayoutOf, Size};\n+use rustc_target::abi::Size;\n \n use crate::*;\n "}, {"sha": "f2f046a3ada138c1df5567c61e81a80d4479c2b1", "filename": "src/shims/intrinsics.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fintrinsics.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -3,9 +3,9 @@ use std::iter;\n use log::trace;\n \n use rustc_apfloat::{Float, Round};\n-use rustc_middle::ty::layout::IntegerExt;\n+use rustc_middle::ty::layout::{IntegerExt, LayoutOf};\n use rustc_middle::{mir, mir::BinOp, ty, ty::FloatTy};\n-use rustc_target::abi::{Align, Integer, LayoutOf};\n+use rustc_target::abi::{Align, Integer};\n \n use crate::*;\n use helpers::check_arg_count;"}, {"sha": "ede29d04d6bc9f4513e50a288a45bc684815b60f", "filename": "src/shims/os_str.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fos_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fos_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fos_str.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -9,7 +9,8 @@ use std::os::unix::ffi::{OsStrExt, OsStringExt};\n #[cfg(windows)]\n use std::os::windows::ffi::{OsStrExt, OsStringExt};\n \n-use rustc_target::abi::{Align, LayoutOf, Size};\n+use rustc_middle::ty::layout::LayoutOf;\n+use rustc_target::abi::{Align, Size};\n \n use crate::*;\n "}, {"sha": "6d417fd09671cf0c5967b06e51d9727532d9c7ca", "filename": "src/shims/posix/foreign_items.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Fforeign_items.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Fforeign_items.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Fforeign_items.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -1,8 +1,9 @@\n use log::trace;\n \n use rustc_middle::mir;\n+use rustc_middle::ty::layout::LayoutOf;\n use rustc_span::Symbol;\n-use rustc_target::abi::{Align, LayoutOf, Size};\n+use rustc_target::abi::{Align, Size};\n use rustc_target::spec::abi::Abi;\n \n use crate::*;"}, {"sha": "36c076037708d8922fd9e569ff9516dd8b2b2d96", "filename": "src/shims/posix/fs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Ffs.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -11,8 +11,8 @@ use std::time::SystemTime;\n use log::trace;\n \n use rustc_data_structures::fx::FxHashMap;\n-use rustc_middle::ty;\n-use rustc_target::abi::{Align, LayoutOf, Size};\n+use rustc_middle::ty::{self, layout::LayoutOf};\n+use rustc_target::abi::{Align, Size};\n \n use crate::*;\n use helpers::{check_arg_count, immty_from_int_checked, immty_from_uint_checked};"}, {"sha": "e64ef3b23c6f26d8554815582218630ea5e1b74d", "filename": "src/shims/posix/thread.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fshims%2Fposix%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fposix%2Fthread.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -1,7 +1,7 @@\n use std::convert::TryInto;\n \n use crate::*;\n-use rustc_target::abi::LayoutOf;\n+use rustc_middle::ty::layout::LayoutOf;\n use rustc_target::spec::abi::Abi;\n \n impl<'mir, 'tcx> EvalContextExt<'mir, 'tcx> for crate::MiriEvalContext<'mir, 'tcx> {}"}, {"sha": "65678b6f01fe11ff1e4c30f3007c7261b0e864ed", "filename": "src/stacked_borrows.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fstacked_borrows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a2f1cadcd5120c44eda3596053de767cd8173a2/src%2Fstacked_borrows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fstacked_borrows.rs?ref=7a2f1cadcd5120c44eda3596053de767cd8173a2", "patch": "@@ -9,8 +9,8 @@ use std::num::NonZeroU64;\n use rustc_data_structures::fx::{FxHashMap, FxHashSet};\n use rustc_hir::Mutability;\n use rustc_middle::mir::RetagKind;\n-use rustc_middle::ty;\n-use rustc_target::abi::{LayoutOf, Size};\n+use rustc_middle::ty::{self, layout::LayoutOf};\n+use rustc_target::abi::Size;\n \n use crate::*;\n "}]}