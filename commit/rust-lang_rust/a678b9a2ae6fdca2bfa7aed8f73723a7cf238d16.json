{"sha": "a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2NzhiOWEyYWU2ZmRjYTJiZmE3YWVkOGY3MzcyM2E3Y2YyMzhkMTY=", "commit": {"author": {"name": "Giles Cope", "email": "gilescope@gmail.com", "date": "2021-03-04T22:11:04Z"}, "committer": {"name": "Giles Cope", "email": "gilescope@gmail.com", "date": "2021-03-04T22:11:04Z"}, "message": "less uB in i8", "tree": {"sha": "69ff9f98b354d06c90b8e31bd0dc3c6fa38701f0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69ff9f98b354d06c90b8e31bd0dc3c6fa38701f0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEElfpt1fswGixBWxap34UWHa4P82sFAmBBWvgACgkQ34UWHa4P\n82uUjw//bJnL0hnvrS5dJq8aezoJcr7D6wd+tZ6zojj526MS9ELVqE41nJrkv6I+\nEDky3qO5ev2lpHKcBvshqZnvOhPQFPRo69WSkkxnFYxPENQ9mj41AArVreT89OUt\nFj05d4i/LbdGIXSmjbyMIDMAHH6tqrDBD0IgvoNLDjpcNcJw4NOYzhvr8i15LvNI\nJ6OLIBxUkhAg1qYv3E4HhjGGiJvXz6zFKxWYKtH7fGjvvUND6mW02F7mkWNhSBD2\n1a3i/gSXROQ24S4Fm3go4Z8OkPlPhbKDpeS/MgaSsgD74crnkX71yxOUwd5hzsDC\nxBlhMQYezvELT+pwZn9X3xhjD7oyhYPzJPpcFcAJcuF0vzRJRONE3M2mBLq9PpOt\nDDqDAhGqrIiY/Nh0K2upZNUK74PKO5SDrI9NF6fzzVfUsHoX71JfIwuWYDCv25EN\n6/S3b6rv3j1uSYE8BSolxCSLJNVWenem0VwaXYFTqaIP+xtaC+9Rt75dyMPXuZBX\nExyvfmnVLSsjrFFvXFneyVFvg0yNsG/vRrQN4zHYr/dM02yvpEt/bxosUC4p5O9N\nuDFG17IF3BRA5QBc8Jhp1bjUr7q8+N/3W31R+svCQiRcSNYauZyo/svAh72j73be\nxb3bOPQ71KATBA5kSSir5ZVEWkjQEjhddczjD6joBG2uYyaGOZw=\n=YcrW\n-----END PGP SIGNATURE-----", "payload": "tree 69ff9f98b354d06c90b8e31bd0dc3c6fa38701f0\nparent d07c43af3129c8e160bb62d98ebcb8b9cf6f3ccd\nauthor Giles Cope <gilescope@gmail.com> 1614895864 +0000\ncommitter Giles Cope <gilescope@gmail.com> 1614895864 +0000\n\nless uB in i8\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16", "html_url": "https://github.com/rust-lang/rust/commit/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16/comments", "author": {"login": "gilescope", "id": 803976, "node_id": "MDQ6VXNlcjgwMzk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/803976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilescope", "html_url": "https://github.com/gilescope", "followers_url": "https://api.github.com/users/gilescope/followers", "following_url": "https://api.github.com/users/gilescope/following{/other_user}", "gists_url": "https://api.github.com/users/gilescope/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilescope/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilescope/subscriptions", "organizations_url": "https://api.github.com/users/gilescope/orgs", "repos_url": "https://api.github.com/users/gilescope/repos", "events_url": "https://api.github.com/users/gilescope/events{/privacy}", "received_events_url": "https://api.github.com/users/gilescope/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gilescope", "id": 803976, "node_id": "MDQ6VXNlcjgwMzk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/803976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilescope", "html_url": "https://github.com/gilescope", "followers_url": "https://api.github.com/users/gilescope/followers", "following_url": "https://api.github.com/users/gilescope/following{/other_user}", "gists_url": "https://api.github.com/users/gilescope/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilescope/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilescope/subscriptions", "organizations_url": "https://api.github.com/users/gilescope/orgs", "repos_url": "https://api.github.com/users/gilescope/repos", "events_url": "https://api.github.com/users/gilescope/events{/privacy}", "received_events_url": "https://api.github.com/users/gilescope/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d07c43af3129c8e160bb62d98ebcb8b9cf6f3ccd", "url": "https://api.github.com/repos/rust-lang/rust/commits/d07c43af3129c8e160bb62d98ebcb8b9cf6f3ccd", "html_url": "https://github.com/rust-lang/rust/commit/d07c43af3129c8e160bb62d98ebcb8b9cf6f3ccd"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "e80f14eaca8c32273ecabf19fadc5042486de1f6", "filename": "library/alloc/src/string.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16/library%2Falloc%2Fsrc%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16/library%2Falloc%2Fsrc%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fstring.rs?ref=a678b9a2ae6fdca2bfa7aed8f73723a7cf238d16", "patch": "@@ -2254,14 +2254,18 @@ static DEC_DIGITS_LUT: &[u8; 200] = b\"0001020304050607080910111213141516171819\\\n impl ToString for i8 {\n     #[inline]\n     fn to_string(&self) -> String {\n-        let mut vec: Vec<u8> = if *self < 0 {\n+        let mut n = *self;\n+        let mut vec: Vec<u8> = if n < 0 {\n+            // convert the negative num to positive by summing 1 to it's 2 complement\n+            // ( -128u8.abs() would panic )\n+            n = (!n).wrapping_add(1);\n             let mut v = Vec::with_capacity(4);\n             v.push(b'-');\n             v\n         } else {\n             Vec::with_capacity(3)\n         };\n-        let mut n = self.abs();\n+        let mut n = n as u8;\n         if n >= 10 {\n             if n >= 100 {\n                 n -= 100;"}]}