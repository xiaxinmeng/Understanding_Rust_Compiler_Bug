{"sha": "244f9a142f0593ab5847163d1832e464e2524c4b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0NGY5YTE0MmYwNTkzYWI1ODQ3MTYzZDE4MzJlNDY0ZTI1MjRjNGI=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-12-02T14:58:32Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-12-02T14:58:32Z"}, "message": "Merge #250\n\n250: Improve the suggestion for test functions r=DJMcNab a=DJMcNab\n\nI haven't fully updated the previous commented out test - I don't know why it was commented out so some clarification would be welcome.\n\nCo-authored-by: Daniel McNab <36049421+djmcnab@users.noreply.github.com>\nCo-authored-by: DJMcNab <36049421+djmcnab@users.noreply.github.com>", "tree": {"sha": "5c6a892a1aba4f40823b95087eff82e7754b926f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c6a892a1aba4f40823b95087eff82e7754b926f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/244f9a142f0593ab5847163d1832e464e2524c4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/244f9a142f0593ab5847163d1832e464e2524c4b", "html_url": "https://github.com/rust-lang/rust/commit/244f9a142f0593ab5847163d1832e464e2524c4b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/244f9a142f0593ab5847163d1832e464e2524c4b/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "0bdf8deb77e9066baa42acb98c99e9fc54e90634", "url": "https://api.github.com/repos/rust-lang/rust/commits/0bdf8deb77e9066baa42acb98c99e9fc54e90634", "html_url": "https://github.com/rust-lang/rust/commit/0bdf8deb77e9066baa42acb98c99e9fc54e90634"}, {"sha": "224e0cee5a2bc5f3d5fe9ea2c9e11f2bfb5339fe", "url": "https://api.github.com/repos/rust-lang/rust/commits/224e0cee5a2bc5f3d5fe9ea2c9e11f2bfb5339fe", "html_url": "https://github.com/rust-lang/rust/commit/224e0cee5a2bc5f3d5fe9ea2c9e11f2bfb5339fe"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "124da486a8b1c4fdf197eab5d39560d5702f889e", "filename": "crates/ra_analysis/src/completion/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/244f9a142f0593ab5847163d1832e464e2524c4b/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/244f9a142f0593ab5847163d1832e464e2524c4b/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Fmod.rs?ref=244f9a142f0593ab5847163d1832e464e2524c4b", "patch": "@@ -427,15 +427,15 @@ mod tests {\n         // check_snippet_completion(r\"\n         //     <|>\n         //     \",\n-        //     r##\"[CompletionItem { label: \"tfn\", lookup: None, snippet: Some(\"#[test]\\nfn $1() {\\n    $0\\n}\") }]\"##,\n+        //     r##\"[CompletionItem { label: \"Test function\", lookup: None, snippet: Some(\"#[test]\\nfn test_${1:feature}() {\\n$0\\n}\"##,\n         // );\n         check_snippet_completion(r\"\n             #[cfg(test)]\n             mod tests {\n                 <|>\n             }\n             \",\n-            r##\"[CompletionItem { label: \"tfn\", lookup: None, snippet: Some(\"#[test]\\nfn $1() {\\n    $0\\n}\") },\n+            r##\"[CompletionItem { label: \"Test function\", lookup: Some(\"tfn\"), snippet: Some(\"#[test]\\nfn ${1:feature}() {\\n$0\\n}\") },\n                  CompletionItem { label: \"pub(crate)\", lookup: None, snippet: Some(\"pub(crate) $0\") }]\"##,\n         );\n     }"}, {"sha": "8ea7478a8deac1fb09f7a2aa88daece35e70e397", "filename": "crates/ra_analysis/src/completion/reference_completion.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/244f9a142f0593ab5847163d1832e464e2524c4b/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Freference_completion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/244f9a142f0593ab5847163d1832e464e2524c4b/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Freference_completion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fcompletion%2Freference_completion.rs?ref=244f9a142f0593ab5847163d1832e464e2524c4b", "patch": "@@ -177,9 +177,15 @@ fn complete_path(\n \n fn complete_mod_item_snippets(acc: &mut Vec<CompletionItem>) {\n     acc.push(CompletionItem {\n-        label: \"tfn\".to_string(),\n-        lookup: None,\n-        snippet: Some(\"#[test]\\nfn $1() {\\n    $0\\n}\".to_string()),\n+        label: \"Test function\".to_string(),\n+        lookup: Some(\"tfn\".to_string()),\n+        snippet: Some(\n+            \"#[test]\\n\\\n+             fn ${1:feature}() {\\n\\\n+             $0\\n\\\n+             }\"\n+            .to_string(),\n+        ),\n     });\n     acc.push(CompletionItem {\n         label: \"pub(crate)\".to_string(),"}]}