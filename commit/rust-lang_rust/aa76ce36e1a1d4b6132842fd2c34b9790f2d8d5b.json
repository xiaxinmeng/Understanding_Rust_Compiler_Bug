{"sha": "aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhNzZjZTM2ZTFhMWQ0YjYxMzI4NDJmZDJjMzRiOTc5MGYyZDhkNWI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-10-05T18:25:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-05T18:25:35Z"}, "message": "Merge #6142\n\n6142: Fix feature name r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "f61d400d5da6ec6076048f7954200e52da6cd57f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f61d400d5da6ec6076048f7954200e52da6cd57f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfe2UfCRBK7hj4Ov3rIwAAdHIIAAnPKeOrDqQj3p/dqCeflkCL\nXfR4xLXiFx/v8o/CWFq1YE624kZETacw9vtxy9b22DJgy2D3eKz8ekUB//gp9OlT\n0exQKDuz3/a1eWytHYJ/fPPG6rTqHGNfsBwTkzUPHrM4dMibrGg/7kSQ38t15ECC\nBc+YFl8/NDFWiwarai2bOaQa2HumsgiHRN2JAs+ARUOAszBkWvuBkP+vh1KSc/Xy\nmdQUWW46RVBB40aNqSNzMhCOHpt4UDDrk/2fmGg3jsffys0YKWD6wVPbeWXU1lMw\nb7OO6BZrUfR3B2aLBpXoBq/hBroS3zK6hYUIYYnslvjg1gNmqL7jU/3YKF18xnE=\n=6cOn\n-----END PGP SIGNATURE-----\n", "payload": "tree f61d400d5da6ec6076048f7954200e52da6cd57f\nparent e5f252ade72fee4776396122dc91a17ddc185a66\nparent bff812ddfe4a1b209e25727e837699b21fb51f0b\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1601922335 +0000\ncommitter GitHub <noreply@github.com> 1601922335 +0000\n\nMerge #6142\n\n6142: Fix feature name r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "html_url": "https://github.com/rust-lang/rust/commit/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5f252ade72fee4776396122dc91a17ddc185a66", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5f252ade72fee4776396122dc91a17ddc185a66", "html_url": "https://github.com/rust-lang/rust/commit/e5f252ade72fee4776396122dc91a17ddc185a66"}, {"sha": "bff812ddfe4a1b209e25727e837699b21fb51f0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/bff812ddfe4a1b209e25727e837699b21fb51f0b", "html_url": "https://github.com/rust-lang/rust/commit/bff812ddfe4a1b209e25727e837699b21fb51f0b"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "81c33bf3afcd130b6e234e120a59bb718e0ecb81", "filename": "crates/ide/src/completion/complete_postfix/format_like.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fcompletion%2Fcomplete_postfix%2Fformat_like.rs?ref=aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "patch": "@@ -1,4 +1,4 @@\n-// Feature: Postfix completion for `format`-like strings.\n+// Feature: Format String Completion.\n //\n // `\"Result {result} is {2 + 2}\"` is expanded to the `\"Result {} is {}\", result, 2 + 2`.\n //"}, {"sha": "341e67c733996bc3fa29843136c15d36252e355b", "filename": "xtask/src/codegen/gen_feature_docs.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fcodegen%2Fgen_feature_docs.rs?ref=aa76ce36e1a1d4b6132842fd2c34b9790f2d8d5b", "patch": "@@ -38,7 +38,9 @@ impl Feature {\n \n             for block in comment_blocks {\n                 let id = block.id;\n-                assert!(is_valid_feature_name(&id), \"invalid feature name: {:?}\", id);\n+                if let Err(msg) = is_valid_feature_name(&id) {\n+                    panic!(\"invalid feature name: {:?}:\\n  {}\", id, msg)\n+                }\n                 let doc = block.contents.join(\"\\n\");\n                 let location = Location::new(path.clone(), block.line);\n                 acc.push(Feature { id, location, doc })\n@@ -49,7 +51,7 @@ impl Feature {\n     }\n }\n \n-fn is_valid_feature_name(feature: &str) -> bool {\n+fn is_valid_feature_name(feature: &str) -> Result<(), String> {\n     'word: for word in feature.split_whitespace() {\n         for &short in [\"to\", \"and\"].iter() {\n             if word == short {\n@@ -58,14 +60,14 @@ fn is_valid_feature_name(feature: &str) -> bool {\n         }\n         for &short in [\"To\", \"And\"].iter() {\n             if word == short {\n-                return false;\n+                return Err(format!(\"Don't capitalize {:?}\", word));\n             }\n         }\n         if !word.starts_with(char::is_uppercase) {\n-            return false;\n+            return Err(format!(\"Capitalize {:?}\", word));\n         }\n     }\n-    true\n+    Ok(())\n }\n \n impl fmt::Display for Feature {"}]}