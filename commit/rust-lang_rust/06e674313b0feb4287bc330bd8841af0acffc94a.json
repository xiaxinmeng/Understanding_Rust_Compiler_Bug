{"sha": "06e674313b0feb4287bc330bd8841af0acffc94a", "node_id": "C_kwDOAAsO6NoAKDA2ZTY3NDMxM2IwZmViNDI4N2JjMzMwYmQ4ODQxYWYwYWNmZmM5NGE", "commit": {"author": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-03-12T02:11:04Z"}, "committer": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-03-18T18:29:13Z"}, "message": "Always enable MIR inlining when building std", "tree": {"sha": "01128eeffa3695d29bd27907b9db6fa74afeaf81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01128eeffa3695d29bd27907b9db6fa74afeaf81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/06e674313b0feb4287bc330bd8841af0acffc94a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/06e674313b0feb4287bc330bd8841af0acffc94a", "html_url": "https://github.com/rust-lang/rust/commit/06e674313b0feb4287bc330bd8841af0acffc94a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/06e674313b0feb4287bc330bd8841af0acffc94a/comments", "author": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a98ddb6de1723a30777c68983c74bcb45ec52580", "url": "https://api.github.com/repos/rust-lang/rust/commits/a98ddb6de1723a30777c68983c74bcb45ec52580", "html_url": "https://github.com/rust-lang/rust/commit/a98ddb6de1723a30777c68983c74bcb45ec52580"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "287e00c644fa47656dcee8d55ef3cffc02f257e0", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/06e674313b0feb4287bc330bd8841af0acffc94a/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06e674313b0feb4287bc330bd8841af0acffc94a/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=06e674313b0feb4287bc330bd8841af0acffc94a", "patch": "@@ -1933,6 +1933,12 @@ impl<'a> Builder<'a> {\n                 rustflags.arg(\"-Zvalidate-mir\");\n                 rustflags.arg(&format!(\"-Zmir-opt-level={}\", mir_opt_level));\n             }\n+            // Always enable inlining MIR when building the standard library.\n+            // Without this flag, MIR inlining is disabled when incremental compilation is enabled.\n+            // That causes some mir-opt tests which inline functions from the standard library to\n+            // break when incremental compilation is enabled. So this overrides the \"no inlining\n+            // during incremental builds\" heuristic for the standard library.\n+            rustflags.arg(\"-Zinline-mir\");\n         }\n \n         Cargo { command: cargo, rustflags, rustdocflags, allow_features }"}]}