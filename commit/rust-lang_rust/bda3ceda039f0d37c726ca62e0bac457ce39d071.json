{"sha": "bda3ceda039f0d37c726ca62e0bac457ce39d071", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkYTNjZWRhMDM5ZjBkMzdjNzI2Y2E2MmUwYmFjNDU3Y2UzOWQwNzE=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2014-08-28T17:56:55Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2014-08-28T17:56:55Z"}, "message": "Add note about string indexing.\n\nThanks @chris-morgan!", "tree": {"sha": "0b16541d1bc49d81a0c58288f0f51f78261f2ebb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b16541d1bc49d81a0c58288f0f51f78261f2ebb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bda3ceda039f0d37c726ca62e0bac457ce39d071", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bda3ceda039f0d37c726ca62e0bac457ce39d071", "html_url": "https://github.com/rust-lang/rust/commit/bda3ceda039f0d37c726ca62e0bac457ce39d071", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bda3ceda039f0d37c726ca62e0bac457ce39d071/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5165321e48c1fd8422803fb40693afab7939c8c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5165321e48c1fd8422803fb40693afab7939c8c", "html_url": "https://github.com/rust-lang/rust/commit/b5165321e48c1fd8422803fb40693afab7939c8c"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "bf762d13b780d81e9b433b2e424cc7dbd039f390", "filename": "src/doc/guide-strings.md", "status": "modified", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/bda3ceda039f0d37c726ca62e0bac457ce39d071/src%2Fdoc%2Fguide-strings.md", "raw_url": "https://github.com/rust-lang/rust/raw/bda3ceda039f0d37c726ca62e0bac457ce39d071/src%2Fdoc%2Fguide-strings.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide-strings.md?ref=bda3ceda039f0d37c726ca62e0bac457ce39d071", "patch": "@@ -121,6 +121,62 @@ fn compare(string: String) {\n Converting a `String` to a `&str` is cheap, but converting the `&str` to a\n `String` involves an allocation.\n \n+## Indexing strings\n+\n+You may be tempted to try to access a certain character of a `String`, like\n+this:\n+\n+```{rust,ignore}\n+let s = \"hello\".to_string();\n+\n+println!(\"{}\", s[0]);\n+```\n+\n+This does not compile. This is on purpose. In the world of UTF-8, direct\n+indexing is basically never what you want to do. The reason is that each\n+charater can be a variable number of bytes. This means that you have to iterate\n+through the characters anyway, which is a O(n) operation. \n+\n+To iterate over a string, use the `graphemes()` method on `&str`:\n+\n+```{rust}\n+let s = \"\u03b1\u1f30\u03b8\u03ae\u03c1\";\n+\n+for l in s.graphemes(true) {\n+    println!(\"{}\", l);\n+}\n+```\n+\n+This will print out each character in turn, as you'd expect: first \"\u03b1\", then\n+\"\u1f30\", etc. You can see that this is different than just the individual bytes.\n+Here's a version that prints out each byte:\n+\n+```{rust}\n+let s = \"\u03b1\u1f30\u03b8\u03ae\u03c1\";\n+\n+for l in s.as_bytes().iter() {\n+    println!(\"{}\", l);\n+}\n+```\n+\n+This will print:\n+\n+```{notrust,ignore}\n+206\n+177\n+225\n+188\n+176\n+206\n+184\n+206\n+174\n+207\n+129\n+```\n+\n+Many more bytes than graphemes!\n+\n # Other Documentation\n \n * [the `&str` API documentation](/std/str/index.html)"}]}