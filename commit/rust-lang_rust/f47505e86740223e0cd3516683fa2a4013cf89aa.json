{"sha": "f47505e86740223e0cd3516683fa2a4013cf89aa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY0NzUwNWU4Njc0MDIyM2UwY2QzNTE2NjgzZmEyYTQwMTNjZjg5YWE=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-11-24T16:45:05Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-11-29T17:19:43Z"}, "message": "Rename static_bitcast to const_bitcast", "tree": {"sha": "1c4c8c14a1d8f4f7a7061287ec7e78c40356d53a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c4c8c14a1d8f4f7a7061287ec7e78c40356d53a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f47505e86740223e0cd3516683fa2a4013cf89aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f47505e86740223e0cd3516683fa2a4013cf89aa", "html_url": "https://github.com/rust-lang/rust/commit/f47505e86740223e0cd3516683fa2a4013cf89aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f47505e86740223e0cd3516683fa2a4013cf89aa/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8da3c6c3266cb4b7673ca78c19dea64dcee8759", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8da3c6c3266cb4b7673ca78c19dea64dcee8759", "html_url": "https://github.com/rust-lang/rust/commit/e8da3c6c3266cb4b7673ca78c19dea64dcee8759"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "fd13421835c12e522a7556ef1acb3efef2f9d091", "filename": "src/librustc_codegen_llvm/common.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/f47505e86740223e0cd3516683fa2a4013cf89aa/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f47505e86740223e0cd3516683fa2a4013cf89aa/src%2Flibrustc_codegen_llvm%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fcommon.rs?ref=f47505e86740223e0cd3516683fa2a4013cf89aa", "patch": "@@ -312,7 +312,7 @@ impl ConstMethods<'tcx> for CodegenCx<'ll, 'tcx> {\n                 if layout.value == layout::Pointer {\n                     unsafe { llvm::LLVMConstIntToPtr(llval, llty) }\n                 } else {\n-                    self.static_bitcast(llval, llty)\n+                    self.const_bitcast(llval, llty)\n                 }\n             },\n             Scalar::Ptr(ptr) => {\n@@ -336,14 +336,14 @@ impl ConstMethods<'tcx> for CodegenCx<'ll, 'tcx> {\n                     None => bug!(\"missing allocation {:?}\", ptr.alloc_id),\n                 };\n                 let llval = unsafe { llvm::LLVMConstInBoundsGEP(\n-                    self.static_bitcast(base_addr, self.type_i8p()),\n+                    self.const_bitcast(base_addr, self.type_i8p()),\n                     &self.const_usize(ptr.offset.bytes()),\n                     1,\n                 ) };\n                 if layout.value != layout::Pointer {\n                     unsafe { llvm::LLVMConstPtrToInt(llval, llty) }\n                 } else {\n-                    self.static_bitcast(llval, llty)\n+                    self.const_bitcast(llval, llty)\n                 }\n             }\n         }\n@@ -359,11 +359,11 @@ impl ConstMethods<'tcx> for CodegenCx<'ll, 'tcx> {\n         let base_addr = self.static_addr_of(init, layout.align.abi, None);\n \n         let llval = unsafe { llvm::LLVMConstInBoundsGEP(\n-            self.static_bitcast(base_addr, self.type_i8p()),\n+            self.const_bitcast(base_addr, self.type_i8p()),\n             &self.const_usize(offset.bytes()),\n             1,\n         )};\n-        let llval = self.static_bitcast(llval, self.type_ptr_to(layout.llvm_type(self)));\n+        let llval = self.const_bitcast(llval, self.type_ptr_to(layout.llvm_type(self)));\n         PlaceRef::new_sized(llval, layout, alloc.align)\n     }\n "}, {"sha": "576a49a13ddb3eb204c2fd4783f1242484d539b3", "filename": "src/librustc_codegen_llvm/consts.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f47505e86740223e0cd3516683fa2a4013cf89aa/src%2Flibrustc_codegen_llvm%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f47505e86740223e0cd3516683fa2a4013cf89aa/src%2Flibrustc_codegen_llvm%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fconsts.rs?ref=f47505e86740223e0cd3516683fa2a4013cf89aa", "patch": "@@ -172,7 +172,7 @@ pub fn ptrcast(val: &'ll Value, ty: &'ll Type) -> &'ll Value {\n }\n \n impl CodegenCx<'ll, 'tcx> {\n-    crate fn static_bitcast(&self, val: &'ll Value, ty: &'ll Type) -> &'ll Value {\n+    crate fn const_bitcast(&self, val: &'ll Value, ty: &'ll Type) -> &'ll Value {\n         unsafe {\n             llvm::LLVMConstBitCast(val, ty)\n         }"}]}