{"sha": "0c085299344d9af4e9bfd892a15d746b116ebe00", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjMDg1Mjk5MzQ0ZDlhZjRlOWJmZDg5MmExNWQ3NDZiMTE2ZWJlMDA=", "commit": {"author": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2018-11-05T14:30:04Z"}, "committer": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2018-11-13T07:42:48Z"}, "message": "A few tweaks to iterations/collecting", "tree": {"sha": "8d3fe36c6f9c7b130a1414cdc0113f60039e125c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d3fe36c6f9c7b130a1414cdc0113f60039e125c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c085299344d9af4e9bfd892a15d746b116ebe00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c085299344d9af4e9bfd892a15d746b116ebe00", "html_url": "https://github.com/rust-lang/rust/commit/0c085299344d9af4e9bfd892a15d746b116ebe00", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c085299344d9af4e9bfd892a15d746b116ebe00/comments", "author": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4371c854f5c7f734563f61a666e0ae230024c17", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4371c854f5c7f734563f61a666e0ae230024c17", "html_url": "https://github.com/rust-lang/rust/commit/c4371c854f5c7f734563f61a666e0ae230024c17"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "650aa39114fad4566f5bb88b930479117ed9a8bf", "filename": "src/librustc/cfg/graphviz.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fcfg%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fcfg%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fcfg%2Fgraphviz.rs?ref=0c085299344d9af4e9bfd892a15d746b116ebe00", "patch": "@@ -106,8 +106,7 @@ impl<'a> dot::GraphWalk<'a> for &'a cfg::CFG {\n     type Node = Node<'a>;\n     type Edge = Edge<'a>;\n     fn nodes(&'a self) -> dot::Nodes<'a, Node<'a>> {\n-        let mut v = Vec::new();\n-        self.graph.each_node(|i, nd| { v.push((i, nd)); true });\n+        let v: Vec<_> = self.graph.enumerated_nodes().collect();\n         v.into()\n     }\n     fn edges(&'a self) -> dot::Edges<'a, Edge<'a>> {"}, {"sha": "4f94b427ec169e5d0ea7cfe2750fce1f700979ed", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=0c085299344d9af4e9bfd892a15d746b116ebe00", "patch": "@@ -1062,8 +1062,7 @@ impl<'a> LoweringContext<'a> {\n         attrs\n             .iter()\n             .map(|a| self.lower_attr(a))\n-            .collect::<Vec<_>>()\n-            .into()\n+            .collect()\n     }\n \n     fn lower_attr(&mut self, attr: &Attribute) -> Attribute {"}, {"sha": "7d3ae64f4fcd636d55cf17ab760a2feb440949be", "filename": "src/librustc/ty/query/on_disk_cache.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fty%2Fquery%2Fon_disk_cache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibrustc%2Fty%2Fquery%2Fon_disk_cache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fquery%2Fon_disk_cache.rs?ref=0c085299344d9af4e9bfd892a15d746b116ebe00", "patch": "@@ -281,7 +281,7 @@ impl<'sess> OnDiskCache<'sess> {\n                         // otherwise, abort\n                         break;\n                     }\n-                    interpret_alloc_index.reserve(new_n);\n+                    interpret_alloc_index.reserve(new_n - n);\n                     for idx in n..new_n {\n                         let id = encoder.interpret_allocs_inverse[idx];\n                         let pos = encoder.position() as u32;"}, {"sha": "5604729d2f8dc80819fda77d72c9888c1ca6faa3", "filename": "src/libserialize/hex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibserialize%2Fhex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibserialize%2Fhex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fhex.rs?ref=0c085299344d9af4e9bfd892a15d746b116ebe00", "patch": "@@ -146,7 +146,7 @@ impl FromHex for str {\n         }\n \n         match modulus {\n-            0 => Ok(b.into_iter().collect()),\n+            0 => Ok(b),\n             _ => Err(InvalidHexLength),\n         }\n     }"}, {"sha": "bfdb53a9d9e18cfa5ac61a28d0c6a64d82a93b3d", "filename": "src/libsyntax_ext/deriving/generic/mod.rs", "status": "modified", "additions": 8, "deletions": 10, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibsyntax_ext%2Fderiving%2Fgeneric%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c085299344d9af4e9bfd892a15d746b116ebe00/src%2Flibsyntax_ext%2Fderiving%2Fgeneric%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Fderiving%2Fgeneric%2Fmod.rs?ref=0c085299344d9af4e9bfd892a15d746b116ebe00", "patch": "@@ -1200,16 +1200,14 @@ impl<'a> MethodDef<'a> {\n         let sp = trait_.span;\n         let variants = &enum_def.variants;\n \n-        let self_arg_names = self_args.iter()\n-            .enumerate()\n-            .map(|(arg_count, _self_arg)| {\n-                if arg_count == 0 {\n-                    \"__self\".to_string()\n-                } else {\n+        let self_arg_names = iter::once(\"__self\".to_string()).chain(\n+            self_args.iter()\n+                .enumerate()\n+                .skip(1)\n+                .map(|(arg_count, _self_arg)|\n                     format!(\"__arg_{}\", arg_count)\n-                }\n-            })\n-            .collect::<Vec<String>>();\n+                )\n+            ).collect::<Vec<String>>();\n \n         let self_arg_idents = self_arg_names.iter()\n             .map(|name| cx.ident_of(&name[..]))\n@@ -1218,7 +1216,7 @@ impl<'a> MethodDef<'a> {\n         // The `vi_idents` will be bound, solely in the catch-all, to\n         // a series of let statements mapping each self_arg to an int\n         // value corresponding to its discriminant.\n-        let vi_idents: Vec<ast::Ident> = self_arg_names.iter()\n+        let vi_idents = self_arg_names.iter()\n             .map(|name| {\n                 let vi_suffix = format!(\"{}_vi\", &name[..]);\n                 cx.ident_of(&vi_suffix[..]).gensym()"}]}