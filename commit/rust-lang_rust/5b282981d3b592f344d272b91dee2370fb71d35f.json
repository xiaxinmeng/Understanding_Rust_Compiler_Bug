{"sha": "5b282981d3b592f344d272b91dee2370fb71d35f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMjgyOTgxZDNiNTkyZjM0NGQyNzJiOTFkZWUyMzcwZmI3MWQzNWY=", "commit": {"author": {"name": "Michael McConville", "email": "mmcco@mykolab.com", "date": "2015-12-17T05:52:18Z"}, "committer": {"name": "Michael McConville", "email": "mmcco@mykolab.com", "date": "2015-12-19T00:26:11Z"}, "message": "Simplify logic checking getentropy's return value", "tree": {"sha": "f2664a2955a13d7068ec9de7c82b3ed3c8e15902", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2664a2955a13d7068ec9de7c82b3ed3c8e15902"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b282981d3b592f344d272b91dee2370fb71d35f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b282981d3b592f344d272b91dee2370fb71d35f", "html_url": "https://github.com/rust-lang/rust/commit/5b282981d3b592f344d272b91dee2370fb71d35f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b282981d3b592f344d272b91dee2370fb71d35f/comments", "author": {"login": "mmcco", "id": 1668979, "node_id": "MDQ6VXNlcjE2Njg5Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1668979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmcco", "html_url": "https://github.com/mmcco", "followers_url": "https://api.github.com/users/mmcco/followers", "following_url": "https://api.github.com/users/mmcco/following{/other_user}", "gists_url": "https://api.github.com/users/mmcco/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmcco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmcco/subscriptions", "organizations_url": "https://api.github.com/users/mmcco/orgs", "repos_url": "https://api.github.com/users/mmcco/repos", "events_url": "https://api.github.com/users/mmcco/events{/privacy}", "received_events_url": "https://api.github.com/users/mmcco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mmcco", "id": 1668979, "node_id": "MDQ6VXNlcjE2Njg5Nzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1668979?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mmcco", "html_url": "https://github.com/mmcco", "followers_url": "https://api.github.com/users/mmcco/followers", "following_url": "https://api.github.com/users/mmcco/following{/other_user}", "gists_url": "https://api.github.com/users/mmcco/gists{/gist_id}", "starred_url": "https://api.github.com/users/mmcco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mmcco/subscriptions", "organizations_url": "https://api.github.com/users/mmcco/orgs", "repos_url": "https://api.github.com/users/mmcco/repos", "events_url": "https://api.github.com/users/mmcco/events{/privacy}", "received_events_url": "https://api.github.com/users/mmcco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3ee3a784bf4ff7157a84e16026f19c4bf059de47", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ee3a784bf4ff7157a84e16026f19c4bf059de47", "html_url": "https://github.com/rust-lang/rust/commit/3ee3a784bf4ff7157a84e16026f19c4bf059de47"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "86116383c4570986ca1e3bb499e6d37fd3989317", "filename": "src/libstd/rand/os.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5b282981d3b592f344d272b91dee2370fb71d35f/src%2Flibstd%2Frand%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b282981d3b592f344d272b91dee2370fb71d35f/src%2Flibstd%2Frand%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fos.rs?ref=5b282981d3b592f344d272b91dee2370fb71d35f", "patch": "@@ -229,13 +229,11 @@ mod imp {\n             unsafe { mem::transmute(v) }\n         }\n         fn fill_bytes(&mut self, v: &mut [u8]) {\n-            let mut ret: c_long;\n-\n             // getentropy(2) permits a maximum buffer size of 256 bytes\n             for s in v.chunks_mut(256) {\n-                unsafe {\n-                    ret = syscall(NR_GETENTROPY, s.as_mut_ptr(), s.len());\n-                }\n+                let ret = unsafe {\n+                    syscall(NR_GETENTROPY, s.as_mut_ptr(), s.len())\n+                };\n                 if ret == -1 {\n                     panic!(\"unexpected getentropy error: {}\", errno());\n                 }"}]}