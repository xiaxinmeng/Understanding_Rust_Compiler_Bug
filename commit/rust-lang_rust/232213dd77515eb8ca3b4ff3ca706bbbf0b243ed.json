{"sha": "232213dd77515eb8ca3b4ff3ca706bbbf0b243ed", "node_id": "C_kwDOAAsO6NoAKDIzMjIxM2RkNzc1MTVlYjhjYTNiNGZmM2NhNzA2YmJiZjBiMjQzZWQ", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-07T16:57:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-07T16:57:18Z"}, "message": "Rollup merge of #107764 - maurer:llvm-16, r=cuviper\n\nllvm-16: Use Triple.h from new header location.\n\nLLVM 16 has moved Triple.h from ADT and into TargetParser.\n\nLLVM [landed a commit](https://github.com/llvm/llvm-project/commit/62c7f035b4392c1933550eead6ddab35122720bc) this morning moving the header. This change should make rustc continue to build against LLVM main.", "tree": {"sha": "c6da9f4706ebd9aaf8456682c6b2d6aacc565405", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c6da9f4706ebd9aaf8456682c6b2d6aacc565405"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj4oLuCRBK7hj4Ov3rIwAA8W0IAGxEIxMPdQtJD6yCa3pM3atk\nqmjxdZyc70eUiACn2P0uYrI5t4KR9JvVcepfdIq6ucA9+oCuUd0yGYIuNOUkXdfM\ncVCHrhr/4KBBktHDno+qUAnmUj3DM8S0/WGwNL/YqikHyjmc2nyBKs68cl/d9m++\nnGu48UYHRAaM13Pt+VrcUmuUqnuMLezLj8qTkZsPwSES4XFPoEcKuMuglWS+pLu6\ng37r0whvQ/EdxX1oM/ee+RJoAuC2VP++UqeaS2ixG7E4vGDctZtKD1RxlnRoLYlT\nNpWpkBnHpp8Zkz6xiZwFwlCpIFSOifDfLcOUTKOODqkCOPwDOU8ycSvs2tvTqy0=\n=e19S\n-----END PGP SIGNATURE-----\n", "payload": "tree c6da9f4706ebd9aaf8456682c6b2d6aacc565405\nparent d044c1bde49f11f4a19bd9046786986c11935b22\nparent 147c51e17dfc6b22deb349297fc7d2bdad19cd4f\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1675789038 +0100\ncommitter GitHub <noreply@github.com> 1675789038 +0100\n\nRollup merge of #107764 - maurer:llvm-16, r=cuviper\n\nllvm-16: Use Triple.h from new header location.\n\nLLVM 16 has moved Triple.h from ADT and into TargetParser.\n\nLLVM [landed a commit](https://github.com/llvm/llvm-project/commit/62c7f035b4392c1933550eead6ddab35122720bc) this morning moving the header. This change should make rustc continue to build against LLVM main.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed", "html_url": "https://github.com/rust-lang/rust/commit/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d044c1bde49f11f4a19bd9046786986c11935b22", "url": "https://api.github.com/repos/rust-lang/rust/commits/d044c1bde49f11f4a19bd9046786986c11935b22", "html_url": "https://github.com/rust-lang/rust/commit/d044c1bde49f11f4a19bd9046786986c11935b22"}, {"sha": "147c51e17dfc6b22deb349297fc7d2bdad19cd4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/147c51e17dfc6b22deb349297fc7d2bdad19cd4f", "html_url": "https://github.com/rust-lang/rust/commit/147c51e17dfc6b22deb349297fc7d2bdad19cd4f"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "9146a3739b2b1b76dfe30a8dd68ec355debede20", "filename": "compiler/rustc_llvm/llvm-wrapper/LLVMWrapper.h", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed/compiler%2Frustc_llvm%2Fllvm-wrapper%2FLLVMWrapper.h", "raw_url": "https://github.com/rust-lang/rust/raw/232213dd77515eb8ca3b4ff3ca706bbbf0b243ed/compiler%2Frustc_llvm%2Fllvm-wrapper%2FLLVMWrapper.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FLLVMWrapper.h?ref=232213dd77515eb8ca3b4ff3ca706bbbf0b243ed", "patch": "@@ -4,7 +4,6 @@\n #include \"llvm/ADT/ArrayRef.h\"\n #include \"llvm/ADT/DenseSet.h\"\n #include \"llvm/ADT/SmallVector.h\"\n-#include \"llvm/ADT/Triple.h\"\n #include \"llvm/Analysis/Lint.h\"\n #include \"llvm/Analysis/Passes.h\"\n #include \"llvm/IR/IRBuilder.h\"\n@@ -44,6 +43,12 @@\n #include \"llvm/IR/IRPrintingPasses.h\"\n #include \"llvm/Linker/Linker.h\"\n \n+#if LLVM_VERSION_GE(16, 0)\n+#include \"llvm/TargetParser/Triple.h\"\n+#else\n+#include \"llvm/ADT/Triple.h\"\n+#endif\n+\n extern \"C\" void LLVMRustSetLastError(const char *);\n \n enum class LLVMRustResult { Success, Failure };"}]}