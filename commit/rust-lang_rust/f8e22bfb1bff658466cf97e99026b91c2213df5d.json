{"sha": "f8e22bfb1bff658466cf97e99026b91c2213df5d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY4ZTIyYmZiMWJmZjY1ODQ2NmNmOTdlOTkwMjZiOTFjMjIxM2RmNWQ=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-12-12T09:37:10Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-12-12T09:37:10Z"}, "message": "Update Cranelift", "tree": {"sha": "f85cbfe954a26aa6960f0d228a67dcf8bc4674ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f85cbfe954a26aa6960f0d228a67dcf8bc4674ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f8e22bfb1bff658466cf97e99026b91c2213df5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f8e22bfb1bff658466cf97e99026b91c2213df5d", "html_url": "https://github.com/rust-lang/rust/commit/f8e22bfb1bff658466cf97e99026b91c2213df5d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f8e22bfb1bff658466cf97e99026b91c2213df5d/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "994b91ac73016e2671138115ecd7fbbb31f13d28", "url": "https://api.github.com/repos/rust-lang/rust/commits/994b91ac73016e2671138115ecd7fbbb31f13d28", "html_url": "https://github.com/rust-lang/rust/commit/994b91ac73016e2671138115ecd7fbbb31f13d28"}], "stats": {"total": 72, "additions": 36, "deletions": 36}, "files": [{"sha": "0382835269d1fdef8cb38b6aeadd28282b885374", "filename": "Cargo.lock", "status": "modified", "additions": 28, "deletions": 28, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/f8e22bfb1bff658466cf97e99026b91c2213df5d/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/f8e22bfb1bff658466cf97e99026b91c2213df5d/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=f8e22bfb1bff658466cf97e99026b91c2213df5d", "patch": "@@ -50,15 +50,15 @@ checksum = \"baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd\"\n [[package]]\n name = \"cranelift-bforest\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"byteorder\",\n  \"cranelift-bforest\",\n@@ -76,7 +76,7 @@ dependencies = [\n [[package]]\n name = \"cranelift-codegen-meta\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"cranelift-codegen-shared\",\n  \"cranelift-entity\",\n@@ -85,17 +85,17 @@ dependencies = [\n [[package]]\n name = \"cranelift-codegen-shared\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n \n [[package]]\n name = \"cranelift-entity\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n \n [[package]]\n name = \"cranelift-frontend\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"log\",\n@@ -104,56 +104,56 @@ dependencies = [\n ]\n \n [[package]]\n-name = \"cranelift-module\"\n+name = \"cranelift-jit\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n  \"cranelift-entity\",\n+ \"cranelift-module\",\n+ \"cranelift-native\",\n+ \"errno\",\n+ \"libc\",\n  \"log\",\n- \"thiserror\",\n+ \"region\",\n+ \"target-lexicon\",\n+ \"winapi\",\n ]\n \n [[package]]\n-name = \"cranelift-native\"\n+name = \"cranelift-module\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n+ \"anyhow\",\n  \"cranelift-codegen\",\n- \"raw-cpuid\",\n- \"target-lexicon\",\n+ \"cranelift-entity\",\n+ \"log\",\n+ \"thiserror\",\n ]\n \n [[package]]\n-name = \"cranelift-object\"\n+name = \"cranelift-native\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n- \"anyhow\",\n  \"cranelift-codegen\",\n- \"cranelift-module\",\n- \"log\",\n- \"object\",\n+ \"raw-cpuid\",\n  \"target-lexicon\",\n ]\n \n [[package]]\n-name = \"cranelift-simplejit\"\n+name = \"cranelift-object\"\n version = \"0.68.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#bfd10512c10ef08d1969ab961e88dbbb41a3b201\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#8f7f8ee0b4c5007ace6de29b45505c360450b1bb\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n- \"cranelift-entity\",\n  \"cranelift-module\",\n- \"cranelift-native\",\n- \"errno\",\n- \"libc\",\n  \"log\",\n- \"region\",\n+ \"object\",\n  \"target-lexicon\",\n- \"winapi\",\n ]\n \n [[package]]\n@@ -326,9 +326,9 @@ dependencies = [\n  \"ar\",\n  \"cranelift-codegen\",\n  \"cranelift-frontend\",\n+ \"cranelift-jit\",\n  \"cranelift-module\",\n  \"cranelift-object\",\n- \"cranelift-simplejit\",\n  \"gimli\",\n  \"indexmap\",\n  \"libloading\","}, {"sha": "8e1933bb14e7c197fa8bb83050368c0187395c95", "filename": "Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f8e22bfb1bff658466cf97e99026b91c2213df5d/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/f8e22bfb1bff658466cf97e99026b91c2213df5d/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=f8e22bfb1bff658466cf97e99026b91c2213df5d", "patch": "@@ -12,7 +12,7 @@ crate-type = [\"dylib\"]\n cranelift-codegen = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\", features = [\"unwind\"] }\n cranelift-frontend = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\" }\n cranelift-module = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\" }\n-cranelift-simplejit = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\", optional = true }\n+cranelift-jit = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\", optional = true }\n cranelift-object = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\" }\n target-lexicon = \"0.11.0\"\n gimli = { version = \"0.23.0\", default-features = false, features = [\"write\"]}\n@@ -27,15 +27,15 @@ libloading = { version = \"0.6.0\", optional = true }\n #cranelift-codegen = { path = \"../wasmtime/cranelift/codegen\" }\n #cranelift-frontend = { path = \"../wasmtime/cranelift/frontend\" }\n #cranelift-module = { path = \"../wasmtime/cranelift/module\" }\n-#cranelift-simplejit = { path = \"../wasmtime/cranelift/simplejit\" }\n+#cranelift-jit = { path = \"../wasmtime/cranelift/jit\" }\n #cranelift-object = { path = \"../wasmtime/cranelift/object\" }\n \n #[patch.crates-io]\n #gimli = { path = \"../\" }\n \n [features]\n default = [\"jit\", \"inline_asm\"]\n-jit = [\"cranelift-simplejit\", \"libloading\"]\n+jit = [\"cranelift-jit\", \"libloading\"]\n inline_asm = []\n \n [profile.dev]"}, {"sha": "7a0d8907c5005713086db2c76ba4d12ab34d4a4f", "filename": "src/debuginfo/emit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdebuginfo%2Femit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdebuginfo%2Femit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdebuginfo%2Femit.rs?ref=f8e22bfb1bff658466cf97e99026b91c2213df5d", "patch": "@@ -76,7 +76,7 @@ impl WriterRelocate {\n     #[cfg(feature = \"jit\")]\n     pub(super) fn relocate_for_jit(\n         mut self,\n-        jit_module: &cranelift_simplejit::SimpleJITModule,\n+        jit_module: &cranelift_jit::JITModule,\n     ) -> Vec<u8> {\n         use std::convert::TryInto;\n "}, {"sha": "dc630fa5fd421afaade48a8f2c43bfb7e3bdad7b", "filename": "src/debuginfo/unwind.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdebuginfo%2Funwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdebuginfo%2Funwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdebuginfo%2Funwind.rs?ref=f8e22bfb1bff658466cf97e99026b91c2213df5d", "patch": "@@ -80,7 +80,7 @@ impl<'tcx> UnwindContext<'tcx> {\n     #[cfg(feature = \"jit\")]\n     pub(crate) unsafe fn register_jit(\n         self,\n-        jit_module: &cranelift_simplejit::SimpleJITModule,\n+        jit_module: &cranelift_jit::JITModule,\n     ) -> Option<UnwindRegistry> {\n         let mut eh_frame = EhFrame::from(super::emit::WriterRelocate::new(super::target_endian(\n             self.tcx,"}, {"sha": "05bcade353562670fdd5aa4317ee2daa2cae5672", "filename": "src/driver/jit.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdriver%2Fjit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8e22bfb1bff658466cf97e99026b91c2213df5d/src%2Fdriver%2Fjit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver%2Fjit.rs?ref=f8e22bfb1bff658466cf97e99026b91c2213df5d", "patch": "@@ -7,7 +7,7 @@ use std::os::raw::{c_char, c_int};\n use rustc_codegen_ssa::CrateInfo;\n use rustc_middle::mir::mono::MonoItem;\n \n-use cranelift_simplejit::{SimpleJITBuilder, SimpleJITModule};\n+use cranelift_jit::{JITBuilder, JITModule};\n \n use crate::prelude::*;\n \n@@ -36,12 +36,12 @@ pub(super) fn run_jit(tcx: TyCtxt<'_>) -> ! {\n \n     let imported_symbols = load_imported_symbols_for_jit(tcx);\n \n-    let mut jit_builder = SimpleJITBuilder::with_isa(\n+    let mut jit_builder = JITBuilder::with_isa(\n         crate::build_isa(tcx.sess, false),\n         cranelift_module::default_libcall_names(),\n     );\n     jit_builder.symbols(imported_symbols);\n-    let mut jit_module = SimpleJITModule::new(jit_builder);\n+    let mut jit_module = JITModule::new(jit_builder);\n     assert_eq!(pointer_ty(tcx), jit_module.target_config().pointer_type());\n \n     let sig = Signature {"}]}