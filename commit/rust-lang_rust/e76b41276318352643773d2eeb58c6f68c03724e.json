{"sha": "e76b41276318352643773d2eeb58c6f68c03724e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3NmI0MTI3NjMxODM1MjY0Mzc3M2QyZWViNThjNmY2OGMwMzcyNGU=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-03-31T03:34:37Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-03-31T03:34:37Z"}, "message": "Rollup merge of #23846 - rayglover:patch-rustdoc-stderr, r=alexcrichton\n\nCurrently if a rustdoc test panics then the fatal error message is not forwarded to the user. This change will have the test runner prefer forwarding anything on the stderr of the test process.", "tree": {"sha": "338cbfd8b8ae5e88e70b711fd3b75c76d06b7052", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/338cbfd8b8ae5e88e70b711fd3b75c76d06b7052"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e76b41276318352643773d2eeb58c6f68c03724e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e76b41276318352643773d2eeb58c6f68c03724e", "html_url": "https://github.com/rust-lang/rust/commit/e76b41276318352643773d2eeb58c6f68c03724e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e76b41276318352643773d2eeb58c6f68c03724e/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4da0d83d0996a6e008dc2dd85d9cf0d2026d437", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4da0d83d0996a6e008dc2dd85d9cf0d2026d437", "html_url": "https://github.com/rust-lang/rust/commit/a4da0d83d0996a6e008dc2dd85d9cf0d2026d437"}, {"sha": "5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "html_url": "https://github.com/rust-lang/rust/commit/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "babbe15b17df51ad1beeaa06f6540f6c2c951e74", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e76b41276318352643773d2eeb58c6f68c03724e/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e76b41276318352643773d2eeb58c6f68c03724e/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=e76b41276318352643773d2eeb58c6f68c03724e", "patch": "@@ -243,8 +243,9 @@ fn runtest(test: &str, cratename: &str, libs: SearchPaths,\n             if should_panic && out.status.success() {\n                 panic!(\"test executable succeeded when it should have failed\");\n             } else if !should_panic && !out.status.success() {\n-                panic!(\"test executable failed:\\n{:?}\",\n-                      str::from_utf8(&out.stdout));\n+                panic!(\"test executable failed:\\n{}\\n{}\",\n+                       str::from_utf8(&out.stdout).unwrap_or(\"\"),\n+                       str::from_utf8(&out.stderr).unwrap_or(\"\"));\n             }\n         }\n     }"}]}