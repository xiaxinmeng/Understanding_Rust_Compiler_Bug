{"sha": "4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "node_id": "C_kwDOAAsO6NoAKDRlNTkxODg0ZjNhY2M5NmIyZDNhNjJiOTI2NDEzMWQzYWNhNWMxYTc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-17T21:33:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-17T21:33:22Z"}, "message": "Rollup merge of #104532 - GuillaumeGomez:migrate-tooltip-css, r=notriddle\n\nMigrate tooltip style to CSS variables", "tree": {"sha": "00cd8032f764ce6d86d93c3e7c15a6f0887da520", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00cd8032f764ce6d86d93c3e7c15a6f0887da520"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjdqiiCRBK7hj4Ov3rIwAAjBAIAJ0toWPFhU2yU26vJPuoj/Lq\nC5AaIrJ+zkEfZ3bVeo4XCWyxAlZ/66tglhwHNQ0faauEiiPaHpquUzRRC8Rh+h4a\nY58fI+iez4qisiMCjB81DYzNaoIlYIvo4iM/csJSLzva7MhJkOINTnT+MmSzwdkQ\nDenKaCmv6pMTVUEc6st8pwhNDGyTlJQP7acC782I/9TKNhHUwnWAnuNslag8rYmx\nQi1/2wKXIoNkYFEWx0AKzJLVoIT14JM3FYhxjbiBZJxhdSnUlL53igPb/0XS1med\nGLwe00/0e/KlEChGdgcb4ZVFcCQ2umlwg9wykFuJ62gJu+d/PxFt3XRSLpLMIyw=\n=UB2t\n-----END PGP SIGNATURE-----\n", "payload": "tree 00cd8032f764ce6d86d93c3e7c15a6f0887da520\nparent 58292874e1287bd3c3fdb63924c0367128748a4d\nparent 11d0c97de9413e4954012d7fc9707375ae8199c4\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1668720802 +0100\ncommitter GitHub <noreply@github.com> 1668720802 +0100\n\nRollup merge of #104532 - GuillaumeGomez:migrate-tooltip-css, r=notriddle\n\nMigrate tooltip style to CSS variables\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "html_url": "https://github.com/rust-lang/rust/commit/4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58292874e1287bd3c3fdb63924c0367128748a4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/58292874e1287bd3c3fdb63924c0367128748a4d", "html_url": "https://github.com/rust-lang/rust/commit/58292874e1287bd3c3fdb63924c0367128748a4d"}, {"sha": "11d0c97de9413e4954012d7fc9707375ae8199c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/11d0c97de9413e4954012d7fc9707375ae8199c4", "html_url": "https://github.com/rust-lang/rust/commit/11d0c97de9413e4954012d7fc9707375ae8199c4"}], "stats": {"total": 122, "additions": 87, "deletions": 35}, "files": [{"sha": "5ec2fe47e0156bc0e44157089fe73295261d071a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "patch": "@@ -1159,6 +1159,8 @@ pre.rust .doccomment {\n \twidth: max-content;\n \ttop: -2px;\n \tz-index: 1;\n+\tbackground-color: var(--tooltip-background-color);\n+\tcolor: var(--tooltip-color);\n }\n \n .example-wrap .tooltip::before {\n@@ -1167,10 +1169,10 @@ pre.rust .doccomment {\n \ttop: 50%;\n \tleft: 16px;\n \tmargin-top: -5px;\n-\tborder-width: 5px;\n-\tborder-style: solid;\n \tdisplay: none;\n \tz-index: 1;\n+\tborder: 5px solid transparent;\n+\tborder-right-color: var(--tooltip-background-color);\n }\n \n .example-wrap.ignore .tooltip::after {"}, {"sha": "0e4dacb28f7cd0911b1855998bd4f49df402363f", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "patch": "@@ -65,6 +65,8 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--test-arrow-hover-background-color: rgba(57, 175, 215, 0.368);\n \t--target-background-color: rgba(255, 236, 164, 0.06);\n \t--target-border-color: rgba(255, 180, 76, 0.85);\n+\t--tooltip-background-color: #314559;\n+\t--tooltip-color: #c5c5c5;\n \t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -160,15 +162,6 @@ details.rustdoc-toggle > summary::before {\n \tcolor: #788797;\n }\n \n-.tooltip::after {\n-\tbackground-color: #314559;\n-\tcolor: #c5c5c5;\n-}\n-\n-.tooltip::before {\n-\tborder-color: transparent #314559 transparent transparent;\n-}\n-\n #titles > button.selected {\n \tbackground-color: #141920 !important;\n \tborder-bottom: 1px solid #ffb44c !important;"}, {"sha": "8e00591179f1f201e0dff4cf530f990151e4f440", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "patch": "@@ -60,6 +60,8 @@\n \t--test-arrow-hover-background-color: #4e8bca;\n \t--target-background-color: #494a3d;\n \t--target-border-color: #bb7410;\n+\t--tooltip-background-color: #000;\n+\t--tooltip-color: #fff;\n \t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)\n@@ -82,16 +84,6 @@ details.rustdoc-toggle > summary::before {\n \tfilter: invert(100%);\n }\n \n-.tooltip::after {\n-\tbackground-color: #000;\n-\tcolor: #fff;\n-\tborder-color: #000;\n-}\n-\n-.tooltip::before {\n-\tborder-color: transparent black transparent transparent;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #252525;\n \tborder-top-color: #252525;"}, {"sha": "e23e3682b166ec3c459d95b56550bdb13698410c", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 3, "deletions": 10, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "patch": "@@ -58,8 +58,10 @@\n \t--test-arrow-background-color: rgba(78, 139, 202, 0.2);\n \t--test-arrow-hover-color: #f5f5f5;\n \t--test-arrow-hover-background-color: #4e8bca;\n-\t--target-background-color: #fdFfd3;\n+\t--target-background-color: #fdffd3;\n \t--target-border-color: #ad7c37;\n+\t--tooltip-background-color: #fdffd3;\n+\t--tooltip-color: #fff;\n \t--rust-logo-filter: initial;\n \t/* match border-color; uses https://codepen.io/sosuke/pen/Pjoqqp */\n \t--crate-search-div-filter: invert(100%) sepia(0%) saturate(4223%) hue-rotate(289deg)\n@@ -75,15 +77,6 @@ body.source .example-wrap pre.rust a {\n \tbackground: #eee;\n }\n \n-.tooltip::after {\n-\tbackground-color: #000;\n-\tcolor: #fff;\n-}\n-\n-.tooltip::before {\n-\tborder-color: transparent black transparent transparent;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #e6e6e6;\n \tborder-top-color: #e6e6e6;"}, {"sha": "caa1ab8f31eb47c5b1115acecbbde50692287b78", "filename": "src/test/rustdoc-gui/codeblock-tooltip.goml", "status": "modified", "additions": 76, "deletions": 4, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "raw_url": "https://github.com/rust-lang/rust/raw/4e591884f3acc96b2d3a62b9264131d3aca5c1a7/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml?ref=4e591884f3acc96b2d3a62b9264131d3aca5c1a7", "patch": "@@ -4,7 +4,7 @@ show-text: true\n \n define-function: (\n     \"check-colors\",\n-    (theme),\n+    (theme, background, color, border),\n     [\n         // Setting the theme.\n         (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n@@ -30,6 +30,25 @@ define-function: (\n             \".docblock .example-wrap.compile_fail\",\n             {\"border-left\": \"2px solid rgb(255, 0, 0)\"},\n         )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.compile_fail .tooltip::after\",\n+            {\n+                \"content\": '\"This example deliberately fails to compile\"',\n+                \"text-align\": \"center\",\n+                \"padding\": \"5px 3px 3px\",\n+                \"background-color\": |background|,\n+                \"color\": |color|,\n+                \"border\": \"1px solid \" + |border|,\n+            },\n+        )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.compile_fail .tooltip::before\",\n+            {\n+                \"border-width\": \"5px\",\n+                \"border-style\": \"solid\",\n+                \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n+            },\n+        )),\n \n         // should_panic block\n         (\"assert-css\", (\n@@ -51,6 +70,25 @@ define-function: (\n             \".docblock .example-wrap.should_panic\",\n             {\"border-left\": \"2px solid rgb(255, 0, 0)\"},\n         )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.should_panic .tooltip::after\",\n+            {\n+                \"content\": '\"This example panics\"',\n+                \"text-align\": \"center\",\n+                \"padding\": \"5px 3px 3px\",\n+                \"background-color\": |background|,\n+                \"color\": |color|,\n+                \"border\": \"1px solid \" + |border|,\n+            },\n+        )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.should_panic .tooltip::before\",\n+            {\n+                \"border-width\": \"5px\",\n+                \"border-style\": \"solid\",\n+                \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n+            },\n+        )),\n \n         // ignore block\n         (\"assert-css\", (\n@@ -72,9 +110,43 @@ define-function: (\n             \".docblock .example-wrap.ignore\",\n             {\"border-left\": \"2px solid rgb(255, 142, 0)\"},\n         )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.ignore .tooltip::after\",\n+            {\n+                \"content\": '\"This example is not tested\"',\n+                \"text-align\": \"center\",\n+                \"padding\": \"5px 3px 3px\",\n+                \"background-color\": |background|,\n+                \"color\": |color|,\n+                \"border\": \"1px solid \" + |border|,\n+            },\n+        )),\n+        (\"assert-css\", (\n+            \".docblock .example-wrap.ignore .tooltip::before\",\n+            {\n+                \"border-width\": \"5px\",\n+                \"border-style\": \"solid\",\n+                \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n+            },\n+        )),\n     ],\n )\n \n-call-function: (\"check-colors\", (\"ayu\"))\n-call-function: (\"check-colors\", (\"dark\"))\n-call-function: (\"check-colors\", (\"light\"))\n+call-function: (\"check-colors\", {\n+    \"theme\": \"ayu\",\n+    \"background\": \"rgb(49, 69, 89)\",\n+    \"color\": \"rgb(197, 197, 197)\",\n+    \"border\": \"rgb(92, 103, 115)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"dark\",\n+    \"background\": \"rgb(0, 0, 0)\",\n+    \"color\": \"rgb(255, 255, 255)\",\n+    \"border\": \"rgb(224, 224, 224)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"light\",\n+    \"background\": \"rgb(253, 255, 211)\",\n+    \"color\": \"rgb(255, 255, 255)\",\n+    \"border\": \"rgb(224, 224, 224)\",\n+})"}]}