{"sha": "1015dd8860b625b4d1d5c9462145044d26654c73", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwMTVkZDg4NjBiNjI1YjRkMWQ1Yzk0NjIxNDUwNDRkMjY2NTRjNzM=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-08-27T15:24:10Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-08-27T15:24:10Z"}, "message": "Use String::with_capacity() instead of String::new()", "tree": {"sha": "89a02838b3fdb4c477bed7f3ebf91c30e60df11d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/89a02838b3fdb4c477bed7f3ebf91c30e60df11d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1015dd8860b625b4d1d5c9462145044d26654c73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1015dd8860b625b4d1d5c9462145044d26654c73", "html_url": "https://github.com/rust-lang/rust/commit/1015dd8860b625b4d1d5c9462145044d26654c73", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1015dd8860b625b4d1d5c9462145044d26654c73/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "25bf1741b27ad499800b2c7f7eb26a9d62c97629", "url": "https://api.github.com/repos/rust-lang/rust/commits/25bf1741b27ad499800b2c7f7eb26a9d62c97629", "html_url": "https://github.com/rust-lang/rust/commit/25bf1741b27ad499800b2c7f7eb26a9d62c97629"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "6f4fce6a2d70f4667bedd03304570d24225590e6", "filename": "src/items.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1015dd8860b625b4d1d5c9462145044d26654c73/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1015dd8860b625b4d1d5c9462145044d26654c73/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=1015dd8860b625b4d1d5c9462145044d26654c73", "patch": "@@ -66,7 +66,7 @@ impl Rewrite for ast::Local {\n \n         // String that is placed within the assignment pattern and expression.\n         let infix = {\n-            let mut infix = String::new();\n+            let mut infix = String::with_capacity(32);\n \n             if let Some(ref ty) = self.ty {\n                 let separator = type_annotation_separator(context.config);\n@@ -668,7 +668,7 @@ fn format_impl_ref_and_type(\n         _,\n     ) = item.node\n     {\n-        let mut result = String::new();\n+        let mut result = String::with_capacity(128);\n \n         result.push_str(&format_visibility(&item.vis));\n         result.push_str(&format_defaultness(defaultness));\n@@ -1265,7 +1265,7 @@ pub fn rewrite_type_alias(\n     vis: &ast::Visibility,\n     span: Span,\n ) -> Option<String> {\n-    let mut result = String::new();\n+    let mut result = String::with_capacity(128);\n \n     result.push_str(&format_visibility(vis));\n     result.push_str(\"type \");"}, {"sha": "f07dad4a6ba5e204825cf0dca5d55982b8539da1", "filename": "src/visitor.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1015dd8860b625b4d1d5c9462145044d26654c73/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1015dd8860b625b4d1d5c9462145044d26654c73/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=1015dd8860b625b4d1d5c9462145044d26654c73", "patch": "@@ -920,10 +920,10 @@ impl Rewrite for ast::Attribute {\n \n impl<'a> Rewrite for [ast::Attribute] {\n     fn rewrite(&self, context: &RewriteContext, shape: Shape) -> Option<String> {\n-        let mut result = String::new();\n         if self.is_empty() {\n-            return Some(result);\n+            return Some(String::new());\n         }\n+        let mut result = String::with_capacity(128);\n         let indent = shape.indent.to_string(context.config);\n \n         let mut derive_args = Vec::new();"}]}