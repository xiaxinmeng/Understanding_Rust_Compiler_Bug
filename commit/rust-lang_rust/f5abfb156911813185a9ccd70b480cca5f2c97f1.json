{"sha": "f5abfb156911813185a9ccd70b480cca5f2c97f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1YWJmYjE1NjkxMTgxMzE4NWE5Y2NkNzBiNDgwY2NhNWYyYzk3ZjE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-01-22T09:49:03Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-01-22T09:49:03Z"}, "message": "Auto merge of #68194 - jonas-schievink:fix-thumb-ci, r=alexcrichton\n\nFix CI for embedded ARM targets\n\nCloses https://github.com/rust-lang/rust/issues/67018\n\nIt would be better to move the `thumb-none-cortex-m` test into the `cargotest` suite, but it doesn't seem to support cross-compilation.", "tree": {"sha": "af8998137330d29c7029eddd974b2b163f9df9d6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af8998137330d29c7029eddd974b2b163f9df9d6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f5abfb156911813185a9ccd70b480cca5f2c97f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f5abfb156911813185a9ccd70b480cca5f2c97f1", "html_url": "https://github.com/rust-lang/rust/commit/f5abfb156911813185a9ccd70b480cca5f2c97f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f5abfb156911813185a9ccd70b480cca5f2c97f1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f688ac602d50129388bb2a5519942049096cbff", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f688ac602d50129388bb2a5519942049096cbff", "html_url": "https://github.com/rust-lang/rust/commit/2f688ac602d50129388bb2a5519942049096cbff"}, {"sha": "d022e01caa8cb6dd93aa15662417cf954c2c5795", "url": "https://api.github.com/repos/rust-lang/rust/commits/d022e01caa8cb6dd93aa15662417cf954c2c5795", "html_url": "https://github.com/rust-lang/rust/commit/d022e01caa8cb6dd93aa15662417cf954c2c5795"}], "stats": {"total": 251, "additions": 229, "deletions": 22}, "files": [{"sha": "36e51bcab6de25a440fbd0b321a9f2002665f673", "filename": "src/test/run-make/thumb-none-cortex-m/Makefile", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -10,10 +10,7 @@\n # - thumbv7em-none-eabihf (Bare Cortex-M4F, M7F, FPU, hardfloat)\n # - thumbv7m-none-eabi (Bare Cortex-M3)\n \n-# only-thumbv6m-none-eabi\n-# only-thumbv7em-none-eabi\n-# only-thumbv7em-none-eabihf\n-# only-thumbv7m-none-eabi\n+# only-thumb\n \n # For cargo setting\n RUSTC := $(RUSTC_ORIGINAL)\n@@ -27,7 +24,8 @@ CRATE := cortex-m\n CRATE_URL := https://github.com/rust-embedded/cortex-m\n CRATE_SHA1 := a448e9156e2cb1e556e5441fd65426952ef4b927 # 0.5.0\n \n-export RUSTFLAGS := --cap-lints=allow\n+# Don't make lints fatal, but they need to at least warn or they break Cargo's target info parsing.\n+export RUSTFLAGS := --cap-lints=warn\n \n all:\n \tenv"}, {"sha": "ab8b90e154eab8a67de7791caea0e4d7e06cfa72", "filename": "src/test/run-make/thumb-none-qemu/Makefile", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2FMakefile?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -1,7 +1,6 @@\n -include ../../run-make-fulldeps/tools.mk\n \n-# only-thumbv7m-none-eabi\n-# only-thumbv6m-none-eabi\n+# only-thumb\n \n # How to run this\n # $ ./x.py clean"}, {"sha": "8b30310e7d4329a666dea2dc113ff1ced0ce8f79", "filename": "src/test/run-make/thumb-none-qemu/example/.cargo/config", "status": "modified", "additions": 20, "deletions": 6, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2F.cargo%2Fconfig", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2F.cargo%2Fconfig", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2F.cargo%2Fconfig?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -1,12 +1,26 @@\n-[target.thumbv7m-none-eabi]\n-# uncomment this to make `cargo run` execute programs on QEMU\n+[target.thumbv6m-none-eabi]\n+# FIXME: Should be Cortex-M0, but Qemu used by CI is too old\n runner = \"qemu-system-arm -cpu cortex-m3 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n \n-[target.thumbv6m-none-eabi]\n-# uncomment this to make `cargo run` execute programs on QEMU\n-# For now, we use cortex-m3 instead of cortex-m0 which are not supported by QEMU\n+[target.thumbv7m-none-eabi]\n runner = \"qemu-system-arm -cpu cortex-m3 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n \n+[target.thumbv7em-none-eabi]\n+runner = \"qemu-system-arm -cpu cortex-m4 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n+\n+[target.thumbv7em-none-eabihf]\n+runner = \"qemu-system-arm -cpu cortex-m4 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n+\n+[target.thumbv8m.base-none-eabi]\n+# FIXME: Should be the Cortex-M23, bt Qemu does not currently support it\n+runner = \"qemu-system-arm -cpu cortex-m33 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n+\n+[target.thumbv8m.main-none-eabi]\n+runner = \"qemu-system-arm -cpu cortex-m33 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n+\n+[target.thumbv8m.main-none-eabihf]\n+runner = \"qemu-system-arm -cpu cortex-m33 -machine lm3s6965evb -nographic -semihosting-config enable=on,target=native -kernel\"\n+\n [target.'cfg(all(target_arch = \"arm\", target_os = \"none\"))']\n # uncomment ONE of these three option to make `cargo run` start a GDB session\n # which option to pick depends on your system\n@@ -28,4 +42,4 @@ rustflags = [\n   # \"-C\", \"linker=arm-none-eabi-gcc\",\n   # \"-C\", \"link-arg=-Wl,-Tlink.x\",\n   # \"-C\", \"link-arg=-nostartfiles\",\n-]\n\\ No newline at end of file\n+]"}, {"sha": "687b962a8b6fe652523f4349f5f3093cdd974677", "filename": "src/test/run-make/thumb-none-qemu/example/Cargo.lock", "status": "added", "additions": 199, "deletions": 0, "changes": 199, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.lock?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -0,0 +1,199 @@\n+# This file is automatically @generated by Cargo.\n+# It is not intended for manual editing.\n+[[package]]\n+name = \"aligned\"\n+version = \"0.3.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"as-slice 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"as-slice\"\n+version = \"0.1.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"generic-array 0.12.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"generic-array 0.13.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"stable_deref_trait 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"bare-metal\"\n+version = \"0.2.5\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"cortex-m\"\n+version = \"0.6.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"aligned 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"bare-metal 0.2.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"volatile-register 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"cortex-m-rt\"\n+version = \"0.6.11\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"cortex-m-rt-macros 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"r0 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"cortex-m-rt-macros\"\n+version = \"0.1.7\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 1.0.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"cortex-m-semihosting\"\n+version = \"0.3.5\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"cortex-m 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"example\"\n+version = \"0.1.0\"\n+dependencies = [\n+ \"cortex-m 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cortex-m-rt 0.6.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cortex-m-semihosting 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"panic-halt 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"generic-array\"\n+version = \"0.12.3\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"typenum 1.11.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"generic-array\"\n+version = \"0.13.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"typenum 1.11.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"panic-halt\"\n+version = \"0.2.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"proc-macro2\"\n+version = \"1.0.8\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"quote\"\n+version = \"1.0.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"r0\"\n+version = \"0.2.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"rustc_version\"\n+version = \"0.2.3\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"semver\"\n+version = \"0.9.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"semver-parser\"\n+version = \"0.7.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"stable_deref_trait\"\n+version = \"1.1.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"syn\"\n+version = \"1.0.14\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[[package]]\n+name = \"typenum\"\n+version = \"1.11.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"unicode-xid\"\n+version = \"0.2.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"vcell\"\n+version = \"0.1.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n+[[package]]\n+name = \"volatile-register\"\n+version = \"0.2.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"vcell 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n+[metadata]\n+\"checksum aligned 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"eb1ce8b3382016136ab1d31a1b5ce807144f8b7eb2d5f16b2108f0f07edceb94\"\n+\"checksum as-slice 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"be6b7e95ac49d753f19cab5a825dea99a1149a04e4e3230b33ae16e120954c04\"\n+\"checksum bare-metal 0.2.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5deb64efa5bd81e31fcd1938615a6d98c82eafcbcd787162b6f63b91d6bac5b3\"\n+\"checksum cortex-m 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2954942fbbdd49996704e6f048ce57567c3e1a4e2dc59b41ae9fde06a01fc763\"\n+\"checksum cortex-m-rt 0.6.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"33a716cd7d8627fae3892c2eede9249e50d2d79aedfb43ca28dad9a2b23876d9\"\n+\"checksum cortex-m-rt-macros 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"72b1073338d1e691b3b7aaf6bd61993e589ececce9242a02dfa5453e1b98918d\"\n+\"checksum cortex-m-semihosting 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"113ef0ecffee2b62b58f9380f4469099b30e9f9cbee2804771b4203ba1762cfa\"\n+\"checksum generic-array 0.12.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c68f0274ae0e023facc3c97b2e00f076be70e254bc851d972503b328db79b2ec\"\n+\"checksum generic-array 0.13.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0ed1e761351b56f54eb9dcd0cfaca9fd0daecf93918e1cfc01c8a3d26ee7adcd\"\n+\"checksum panic-halt 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"de96540e0ebde571dc55c73d60ef407c653844e6f9a1e2fdbd40c07b9252d812\"\n+\"checksum proc-macro2 1.0.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3acb317c6ff86a4e579dfa00fc5e6cca91ecbb4e7eb2df0468805b674eb88548\"\n+\"checksum quote 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"053a8c8bcc71fcce321828dc897a98ab9760bef03a4fc36693c231e5b3216cfe\"\n+\"checksum r0 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e2a38df5b15c8d5c7e8654189744d8e396bddc18ad48041a500ce52d6948941f\"\n+\"checksum rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n+\"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n+\"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n+\"checksum stable_deref_trait 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dba1a27d3efae4351c8051072d619e3ade2820635c3958d826bfea39d59b54c8\"\n+\"checksum syn 1.0.14 (registry+https://github.com/rust-lang/crates.io-index)\" = \"af6f3550d8dff9ef7dc34d384ac6f107e5d31c8f57d9f28e0081503f547ac8f5\"\n+\"checksum typenum 1.11.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6d2783fe2d6b8c1101136184eb41be8b1ad379e4657050b8aaff0c79ee7575f9\"\n+\"checksum unicode-xid 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"826e7639553986605ec5979c7dd957c7895e93eabed50ab2ffa7f6128a75097c\"\n+\"checksum vcell 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"876e32dcadfe563a4289e994f7cb391197f362b6315dc45e8ba4aa6f564a4b3c\"\n+\"checksum volatile-register 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0d67cb4616d99b940db1d6bd28844ff97108b498a6ca850e5b6191a532063286\""}, {"sha": "051d41bbae5498ae206be3ca0f150fb59d3ffa4d", "filename": "src/test/run-make/thumb-none-qemu/example/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2FCargo.toml?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -5,7 +5,7 @@ authors = [\"Hideki Sekine <sekineh@me.com>\"]\n edition = \"2018\"\n \n [dependencies]\n-cortex-m = \"0.5.4\"\n-cortex-m-rt = \"=0.5.4\"\n+cortex-m = \"0.6.2\"\n+cortex-m-rt = \"0.6.11\"\n panic-halt = \"0.2.0\"\n cortex-m-semihosting = \"0.3.1\""}, {"sha": "2abfde8e75f04075810f81d24778c8a2d69b7b14", "filename": "src/test/run-make/thumb-none-qemu/example/src/main.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-qemu%2Fexample%2Fsrc%2Fmain.rs?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -1,17 +1,13 @@\n-// #![feature(stdsimd)]\n #![no_main]\n #![no_std]\n use core::fmt::Write;\n use cortex_m::asm;\n use cortex_m_rt::entry;\n use cortex_m_semihosting as semihosting;\n \n-//FIXME: This imports the provided #[panic_handler].\n-#[allow(rust_2018_idioms)]\n-extern crate panic_halt;\n-\n-entry!(main);\n+use panic_halt as _;\n \n+#[entry]\n fn main() -> ! {\n     let x = 42;\n "}, {"sha": "1f0b42d1786c13e03ac9e1566f02d8ac2b849be7", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5abfb156911813185a9ccd70b480cca5f2c97f1/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=f5abfb156911813185a9ccd70b480cca5f2c97f1", "patch": "@@ -624,7 +624,8 @@ fn is_up_to_date(\n \n     // Check timestamps.\n     let mut inputs = inputs.clone();\n-    inputs.add_path(&testpaths.file);\n+    // Use `add_dir` to account for run-make tests, which use their individual directory\n+    inputs.add_dir(&testpaths.file);\n \n     for aux in &props.aux {\n         let path = testpaths.file.parent().unwrap().join(\"auxiliary\").join(aux);"}]}