{"sha": "f35747517052240277835b6b2dec553ba547ec00", "node_id": "C_kwDOAAsO6NoAKGYzNTc0NzUxNzA1MjI0MDI3NzgzNWI2YjJkZWM1NTNiYTU0N2VjMDA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-28T17:30:55Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-28T17:30:55Z"}, "message": "Auto merge of #110952 - ehuss:update-awscli, r=cuviper\n\nUpdate awscli\n\nThe Windows GitHub Actions image just updated to pip 23.1.1 which broke the PyYaml installer in the current AWS CLI mirror.  It now requires setuptools, wheel, and Cython to be installed manually.  This updates to include that, as well as updating the versions of all the packages. This also now uses python3 on macOS since python2 doesn't work with the newer versions.\n\nI have only tested that these install correctly, but not that they work correctly.\n\nPietro mentioned that we should just switch to aws cli 2, which I agree is probably the better solution. I'm posting this PR in case it helps unblock CI.", "tree": {"sha": "87621cbba05700114b3d523ecfd232261d8b3d65", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87621cbba05700114b3d523ecfd232261d8b3d65"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f35747517052240277835b6b2dec553ba547ec00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f35747517052240277835b6b2dec553ba547ec00", "html_url": "https://github.com/rust-lang/rust/commit/f35747517052240277835b6b2dec553ba547ec00", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f35747517052240277835b6b2dec553ba547ec00/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43a78029b4f4d92978b8fde0a677ea300b113c41", "url": "https://api.github.com/repos/rust-lang/rust/commits/43a78029b4f4d92978b8fde0a677ea300b113c41", "html_url": "https://github.com/rust-lang/rust/commit/43a78029b4f4d92978b8fde0a677ea300b113c41"}, {"sha": "dd6314f96cbe9057572dfd8b49e31e113eebe42f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd6314f96cbe9057572dfd8b49e31e113eebe42f", "html_url": "https://github.com/rust-lang/rust/commit/dd6314f96cbe9057572dfd8b49e31e113eebe42f"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "aa62407eaea7df5f0ad3dd051d51f721c41a10fd", "filename": "src/ci/scripts/install-awscli.sh", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f35747517052240277835b6b2dec553ba547ec00/src%2Fci%2Fscripts%2Finstall-awscli.sh", "raw_url": "https://github.com/rust-lang/rust/raw/f35747517052240277835b6b2dec553ba547ec00/src%2Fci%2Fscripts%2Finstall-awscli.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-awscli.sh?ref=f35747517052240277835b6b2dec553ba547ec00", "patch": "@@ -10,15 +10,14 @@\n #\n # Before compressing please make sure all the wheels end with `-none-any.whl`.\n # If that's not the case you'll need to remove the non-cross-platform ones and\n-# replace them with the .tar.gz downloaded from https://pypi.org. Also make\n-# sure it's possible to call this script with both Python 2 and Python 3.\n+# replace them with the .tar.gz downloaded from https://pypi.org.\n \n set -euo pipefail\n IFS=$'\\n\\t'\n \n source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n \n-MIRROR=\"${MIRRORS_BASE}/2019-07-27-awscli.tar\"\n+MIRROR=\"${MIRRORS_BASE}/2023-04-28-awscli.tar\"\n DEPS_DIR=\"/tmp/awscli-deps\"\n \n pip=\"pip\"\n@@ -29,6 +28,8 @@ if isLinux; then\n \n     sudo apt-get install -y python3-setuptools python3-wheel\n     ciCommandAddPath \"${HOME}/.local/bin\"\n+elif isMacOS; then\n+    pip=\"pip3\"\n fi\n \n mkdir -p \"${DEPS_DIR}\""}]}