{"sha": "df9fb9b159eeb0ed942f969adf9d69d6499118d5", "node_id": "C_kwDOAAsO6NoAKGRmOWZiOWIxNTllZWIwZWQ5NDJmOTY5YWRmOWQ2OWQ2NDk5MTE4ZDU", "commit": {"author": {"name": "Anatol Ulrich", "email": "anatol.ulrich@ferrous-systems.com", "date": "2021-10-27T15:25:37Z"}, "committer": {"name": "Anatol Ulrich", "email": "anatol.ulrich@ferrous-systems.com", "date": "2021-10-27T15:25:42Z"}, "message": "re-introduce `always!`", "tree": {"sha": "3c47af9af0d8414f3e429d1ed45f414f938faba0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c47af9af0d8414f3e429d1ed45f414f938faba0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/df9fb9b159eeb0ed942f969adf9d69d6499118d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/df9fb9b159eeb0ed942f969adf9d69d6499118d5", "html_url": "https://github.com/rust-lang/rust/commit/df9fb9b159eeb0ed942f969adf9d69d6499118d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/df9fb9b159eeb0ed942f969adf9d69d6499118d5/comments", "author": null, "committer": null, "parents": [{"sha": "28c73f8374295459cdf4cfdc97c1540753484d02", "url": "https://api.github.com/repos/rust-lang/rust/commits/28c73f8374295459cdf4cfdc97c1540753484d02", "html_url": "https://github.com/rust-lang/rust/commit/28c73f8374295459cdf4cfdc97c1540753484d02"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "270e06bc5fb02ddccc4bf0c126bb3f6cd899e3b4", "filename": "crates/ide/src/rename.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/df9fb9b159eeb0ed942f969adf9d69d6499118d5/crates%2Fide%2Fsrc%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df9fb9b159eeb0ed942f969adf9d69d6499118d5/crates%2Fide%2Fsrc%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Frename.rs?ref=df9fb9b159eeb0ed942f969adf9d69d6499118d5", "patch": "@@ -12,7 +12,7 @@ use ide_db::{\n     RootDatabase,\n };\n use itertools::Itertools;\n-use stdx::never;\n+use stdx::{always, never};\n use syntax::{ast, AstNode, SyntaxNode};\n \n use text_edit::TextEdit;\n@@ -41,13 +41,12 @@ pub(crate) fn prepare_rename(\n                 bail!(\"No references found at position\")\n             }\n             let frange = sema.original_range(name_like.syntax());\n-            if frange.range.contains_inclusive(position.offset)\n-                && frange.file_id == position.file_id\n-            {\n-                Ok(frange.range)\n-            } else {\n-                bail!(\"invalid text range\")\n-            }\n+\n+            always!(\n+                frange.range.contains_inclusive(position.offset)\n+                    && frange.file_id == position.file_id\n+            );\n+            Ok(frange.range)\n         })\n         .reduce(|acc, cur| match (acc, cur) {\n             // ensure all ranges are the same"}]}