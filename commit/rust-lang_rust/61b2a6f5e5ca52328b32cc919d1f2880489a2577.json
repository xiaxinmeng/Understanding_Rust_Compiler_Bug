{"sha": "61b2a6f5e5ca52328b32cc919d1f2880489a2577", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxYjJhNmY1ZTVjYTUyMzI4YjMyY2M5MTlkMWYyODgwNDg5YTI1Nzc=", "commit": {"author": {"name": "Bram van den Heuvel", "email": "bram@vandenheuvel.online", "date": "2020-09-24T14:49:02Z"}, "committer": {"name": "Bram van den Heuvel", "email": "bram@vandenheuvel.online", "date": "2020-09-24T17:10:01Z"}, "message": "Update chalk to 0.26.0", "tree": {"sha": "fab1aa3ac07470b34e71e5754b2e717363545185", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fab1aa3ac07470b34e71e5754b2e717363545185"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61b2a6f5e5ca52328b32cc919d1f2880489a2577", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61b2a6f5e5ca52328b32cc919d1f2880489a2577", "html_url": "https://github.com/rust-lang/rust/commit/61b2a6f5e5ca52328b32cc919d1f2880489a2577", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61b2a6f5e5ca52328b32cc919d1f2880489a2577/comments", "author": {"login": "vandenheuvel", "id": 20440137, "node_id": "MDQ6VXNlcjIwNDQwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/20440137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vandenheuvel", "html_url": "https://github.com/vandenheuvel", "followers_url": "https://api.github.com/users/vandenheuvel/followers", "following_url": "https://api.github.com/users/vandenheuvel/following{/other_user}", "gists_url": "https://api.github.com/users/vandenheuvel/gists{/gist_id}", "starred_url": "https://api.github.com/users/vandenheuvel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vandenheuvel/subscriptions", "organizations_url": "https://api.github.com/users/vandenheuvel/orgs", "repos_url": "https://api.github.com/users/vandenheuvel/repos", "events_url": "https://api.github.com/users/vandenheuvel/events{/privacy}", "received_events_url": "https://api.github.com/users/vandenheuvel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vandenheuvel", "id": 20440137, "node_id": "MDQ6VXNlcjIwNDQwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/20440137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vandenheuvel", "html_url": "https://github.com/vandenheuvel", "followers_url": "https://api.github.com/users/vandenheuvel/followers", "following_url": "https://api.github.com/users/vandenheuvel/following{/other_user}", "gists_url": "https://api.github.com/users/vandenheuvel/gists{/gist_id}", "starred_url": "https://api.github.com/users/vandenheuvel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vandenheuvel/subscriptions", "organizations_url": "https://api.github.com/users/vandenheuvel/orgs", "repos_url": "https://api.github.com/users/vandenheuvel/repos", "events_url": "https://api.github.com/users/vandenheuvel/events{/privacy}", "received_events_url": "https://api.github.com/users/vandenheuvel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed784023e50d47bb8b447ed3a01c254e43c39bb0", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed784023e50d47bb8b447ed3a01c254e43c39bb0", "html_url": "https://github.com/rust-lang/rust/commit/ed784023e50d47bb8b447ed3a01c254e43c39bb0"}], "stats": {"total": 53, "additions": 29, "deletions": 24}, "files": [{"sha": "fc20d70038ade542cf4a1a54a45df2fec48aadbf", "filename": "Cargo.lock", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/61b2a6f5e5ca52328b32cc919d1f2880489a2577/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/61b2a6f5e5ca52328b32cc919d1f2880489a2577/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=61b2a6f5e5ca52328b32cc919d1f2880489a2577", "patch": "@@ -427,9 +427,9 @@ dependencies = [\n \n [[package]]\n name = \"chalk-derive\"\n-version = \"0.25.0\"\n+version = \"0.26.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"624e14d3f029186e6ffd97081ffa082f98ddd5df20655b6f0e8efb83dd8ac8b4\"\n+checksum = \"72aade21de1aa12a31fc287ec9891915965b6d7caac1c5de5ea095b6b9bc4cc4\"\n dependencies = [\n  \"proc-macro2\",\n  \"quote\",\n@@ -439,9 +439,9 @@ dependencies = [\n \n [[package]]\n name = \"chalk-engine\"\n-version = \"0.25.0\"\n+version = \"0.26.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"fd172df00ff1de4789ed8971e1623afb10551041a9385d3b4e22fe6b1e8a0d1d\"\n+checksum = \"fcffc1240cc5f9c5d1d8028d35a293e193a647a71244d51d3d5b4295cbea0593\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-ir\",\n@@ -452,19 +452,19 @@ dependencies = [\n \n [[package]]\n name = \"chalk-ir\"\n-version = \"0.25.0\"\n+version = \"0.26.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"118c68eccdda5604af50bbef84c94550f3854f76989cb03c36ffd36cc2ffe958\"\n+checksum = \"6b856e69b664ca362a30c21f477fe10f59f74458978bc9bfd667820549bc7758\"\n dependencies = [\n  \"chalk-derive\",\n  \"lazy_static\",\n ]\n \n [[package]]\n name = \"chalk-solve\"\n-version = \"0.25.0\"\n+version = \"0.26.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"45b235a1f568b28707f117b2d30eabbee9cbcfccaa0d6e9697300400c8ca0996\"\n+checksum = \"abae2ca9cca3b0a2f33fe946a688881a8b17b8edc088fe3820cb770275e965ed\"\n dependencies = [\n  \"chalk-derive\",\n  \"chalk-ir\","}, {"sha": "026f810fd793a50b1bdb799e5b559e8cac00fda8", "filename": "compiler/rustc_middle/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_middle%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_middle%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2FCargo.toml?ref=61b2a6f5e5ca52328b32cc919d1f2880489a2577", "patch": "@@ -26,7 +26,7 @@ rustc_index = { path = \"../rustc_index\" }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_ast = { path = \"../rustc_ast\" }\n rustc_span = { path = \"../rustc_span\" }\n-chalk-ir = \"0.25.0\"\n+chalk-ir = \"0.26.0\"\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n measureme = \"0.7.1\"\n rustc_session = { path = \"../rustc_session\" }"}, {"sha": "cd718def79bfb89e3494e4fc8b593cf38679e44a", "filename": "compiler/rustc_traits/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2FCargo.toml?ref=61b2a6f5e5ca52328b32cc919d1f2880489a2577", "patch": "@@ -12,9 +12,9 @@ rustc_hir = { path = \"../rustc_hir\" }\n rustc_index = { path = \"../rustc_index\" }\n rustc_ast = { path = \"../rustc_ast\" }\n rustc_span = { path = \"../rustc_span\" }\n-chalk-ir = \"0.25.0\"\n-chalk-solve = \"0.25.0\"\n-chalk-engine = \"0.25.0\"\n+chalk-ir = \"0.26.0\"\n+chalk-solve = \"0.26.0\"\n+chalk-engine = \"0.26.0\"\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n rustc_infer = { path = \"../rustc_infer\" }\n rustc_trait_selection = { path = \"../rustc_trait_selection\" }"}, {"sha": "5804296540a7fb79ac484d237955a77d90bbfa41", "filename": "compiler/rustc_traits/src/chalk/db.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Fdb.rs?ref=61b2a6f5e5ca52328b32cc919d1f2880489a2577", "patch": "@@ -11,14 +11,14 @@ use rustc_middle::ty::subst::{InternalSubsts, Subst, SubstsRef};\n use rustc_middle::ty::{self, AssocItemContainer, AssocKind, TyCtxt, TypeFoldable};\n \n use rustc_hir::def_id::DefId;\n-use rustc_hir::Unsafety;\n \n use rustc_span::symbol::sym;\n \n use std::fmt;\n use std::sync::Arc;\n \n use crate::chalk::lowering::{self, LowerInto};\n+use rustc_hir::Unsafety;\n \n pub struct RustIrDatabase<'tcx> {\n     pub(crate) interner: RustInterner<'tcx>,\n@@ -247,12 +247,14 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n         };\n         Arc::new(chalk_solve::rust_ir::FnDefDatum {\n             id: fn_def_id,\n-            abi: sig.abi(),\n-            safety: match sig.unsafety() {\n-                Unsafety::Normal => chalk_ir::Safety::Safe,\n-                Unsafety::Unsafe => chalk_ir::Safety::Unsafe,\n+            sig: chalk_ir::FnSig {\n+                abi: sig.abi(),\n+                safety: match sig.unsafety() {\n+                    Unsafety::Normal => chalk_ir::Safety::Safe,\n+                    Unsafety::Unsafe => chalk_ir::Safety::Unsafe,\n+                },\n+                variadic: sig.c_variadic(),\n             },\n-            variadic: sig.c_variadic(),\n             binders: chalk_ir::Binders::new(binders, bound),\n         })\n     }"}, {"sha": "3a84efb880b4c3ee8b8acfd4e748534357d5059d", "filename": "compiler/rustc_traits/src/chalk/lowering.rs", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61b2a6f5e5ca52328b32cc919d1f2880489a2577/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_traits%2Fsrc%2Fchalk%2Flowering.rs?ref=61b2a6f5e5ca52328b32cc919d1f2880489a2577", "patch": "@@ -340,18 +340,20 @@ impl<'tcx> LowerInto<'tcx, chalk_ir::Ty<RustInterner<'tcx>>> for Ty<'tcx> {\n                     collect_bound_vars(interner, interner.tcx, &sig.inputs_and_output());\n                 TyData::Function(chalk_ir::FnPointer {\n                     num_binders: binders.len(interner),\n+                    sig: chalk_ir::FnSig {\n+                        abi: sig.abi(),\n+                        safety: match sig.unsafety() {\n+                            rustc_hir::Unsafety::Normal => chalk_ir::Safety::Safe,\n+                            rustc_hir::Unsafety::Unsafe => chalk_ir::Safety::Unsafe,\n+                        },\n+                        variadic: sig.c_variadic(),\n+                    },\n                     substitution: chalk_ir::Substitution::from_iter(\n                         interner,\n                         inputs_and_outputs.iter().map(|ty| {\n                             chalk_ir::GenericArgData::Ty(ty.lower_into(interner)).intern(interner)\n                         }),\n                     ),\n-                    abi: sig.abi(),\n-                    safety: match sig.unsafety() {\n-                        rustc_hir::Unsafety::Normal => chalk_ir::Safety::Safe,\n-                        rustc_hir::Unsafety::Unsafe => chalk_ir::Safety::Unsafe,\n-                    },\n-                    variadic: sig.c_variadic(),\n                 })\n                 .intern(interner)\n             }\n@@ -480,6 +482,7 @@ impl<'tcx> LowerInto<'tcx, Ty<'tcx>> for &chalk_ir::Ty<RustInterner<'tcx>> {\n                     substs: application_ty.substitution.lower_into(interner),\n                     item_def_id: assoc_ty.0,\n                 }),\n+                chalk_ir::TypeName::Foreign(def_id) => ty::Foreign(def_id.0),\n                 chalk_ir::TypeName::Error => unimplemented!(),\n             },\n             TyData::Placeholder(placeholder) => ty::Placeholder(ty::Placeholder {"}]}