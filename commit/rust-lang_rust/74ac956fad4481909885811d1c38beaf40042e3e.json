{"sha": "74ac956fad4481909885811d1c38beaf40042e3e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0YWM5NTZmYWQ0NDgxOTA5ODg1ODExZDFjMzhiZWFmNDAwNDJlM2U=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-12T20:46:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-12T20:46:38Z"}, "message": "Rollup merge of #61535 - ohadravid:test-generic-with-default-assiociated-type-re-rebalance-coherence, r=nikomatsakis\n\nCoherence test when a generic type param has a default value from an associated type\n\nA followup on #61400.\nBefore `re_rebalance_coherence`, this fails to compile (even though it should be accepted).\n`re_rebalance_coherence` had no direct test for this, and I wanted to (a) make sure it doesn't regress in the future and (b) get it on record that this is actually the intended behavior.", "tree": {"sha": "325fae9eccd20aabbcf26748489227863f2d2b1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/325fae9eccd20aabbcf26748489227863f2d2b1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/74ac956fad4481909885811d1c38beaf40042e3e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdKPGuCRBK7hj4Ov3rIwAAdHIIAI2OqdE5Pb7HGMPQwjyQ9i7j\nmTyUBxjiA7jDy1lqt2JHs1Q0wS42l83/kBX0Tb81xGs9J7RduSi/y/N5QlQDYoBV\nW9bXdDjak7bpc3XVLAvKPtEPf5Qas3421Aug3l3ylR5LIzVYfuOqvGw79estdCdy\ngN3Y6WHHKJ2R6efNY9dDFikCH90+3t91eHZPG5e8ZgfE1c+fE4uM6IYmxubN+1iq\nDQ/wlyYh2gys6b2NJdYSQ25zYI2nbOMzM+fpP526HaZgjDdfN6T8+5RKPCisaQtV\nQKs8hZmKW8T1xYrl8Nk7G4i+w6o6KD42uaL/jsl29jWrYLMrudfhoQwXzNCEr2U=\n=qztt\n-----END PGP SIGNATURE-----\n", "payload": "tree 325fae9eccd20aabbcf26748489227863f2d2b1f\nparent 71f9384e3bec467158a628e2d11e77ffada16a90\nparent 194814065c5c1763db3cff3ac8d7fc260d0631f5\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1562964398 +0200\ncommitter GitHub <noreply@github.com> 1562964398 +0200\n\nRollup merge of #61535 - ohadravid:test-generic-with-default-assiociated-type-re-rebalance-coherence, r=nikomatsakis\n\nCoherence test when a generic type param has a default value from an associated type\n\nA followup on #61400.\nBefore `re_rebalance_coherence`, this fails to compile (even though it should be accepted).\n`re_rebalance_coherence` had no direct test for this, and I wanted to (a) make sure it doesn't regress in the future and (b) get it on record that this is actually the intended behavior.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/74ac956fad4481909885811d1c38beaf40042e3e", "html_url": "https://github.com/rust-lang/rust/commit/74ac956fad4481909885811d1c38beaf40042e3e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/74ac956fad4481909885811d1c38beaf40042e3e/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71f9384e3bec467158a628e2d11e77ffada16a90", "url": "https://api.github.com/repos/rust-lang/rust/commits/71f9384e3bec467158a628e2d11e77ffada16a90", "html_url": "https://github.com/rust-lang/rust/commit/71f9384e3bec467158a628e2d11e77ffada16a90"}, {"sha": "194814065c5c1763db3cff3ac8d7fc260d0631f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/194814065c5c1763db3cff3ac8d7fc260d0631f5", "html_url": "https://github.com/rust-lang/rust/commit/194814065c5c1763db3cff3ac8d7fc260d0631f5"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "9a191bad8b0bf1a9ea91929b79b10dd9c29adff4", "filename": "src/test/run-pass/coherence/auxiliary/re_rebalance_coherence_lib.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/74ac956fad4481909885811d1c38beaf40042e3e/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/74ac956fad4481909885811d1c38beaf40042e3e/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcoherence%2Fauxiliary%2Fre_rebalance_coherence_lib.rs?ref=74ac956fad4481909885811d1c38beaf40042e3e", "patch": "@@ -20,3 +20,12 @@ pub struct BatchInsert<'a, T: 'a, Tab> {\n impl<'a, T:'a, Tab, DB> QueryFragment<DB> for BatchInsert<'a, T, Tab>\n where DB: SupportsDefaultKeyword + Backend,\n {}\n+\n+pub trait LibToOwned {\n+    type Owned;\n+}\n+\n+pub struct LibCow<T: LibToOwned, Owned = <T as LibToOwned>::Owned> {\n+    pub t: T,\n+    pub o: Owned,\n+}"}, {"sha": "4168b7a6146a918d87b0b5f78e601cf374512af9", "filename": "src/test/run-pass/coherence/re-rebalance-coherence-default-generic-associated-type.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/74ac956fad4481909885811d1c38beaf40042e3e/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/74ac956fad4481909885811d1c38beaf40042e3e/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcoherence%2Fre-rebalance-coherence-default-generic-associated-type.rs?ref=74ac956fad4481909885811d1c38beaf40042e3e", "patch": "@@ -0,0 +1,27 @@\n+// run-pass\n+// aux-build:re_rebalance_coherence_lib.rs\n+\n+#![allow(dead_code)]\n+#![feature(re_rebalance_coherence)]\n+// check that a generic type with a default value from an associated type can be used without\n+// specifying the value, and without invoking coherence errors.\n+\n+extern crate re_rebalance_coherence_lib as lib;\n+use lib::*;\n+\n+struct MyString {}\n+\n+impl LibToOwned for MyString {\n+    type Owned = String;\n+}\n+\n+impl PartialEq<MyString> for LibCow<MyString> {\n+    fn eq(&self, _other: &MyString) -> bool {\n+        // Test that the default type is used.\n+        let _s: &String = &self.o;\n+\n+        false\n+    }\n+}\n+\n+fn main() {}"}]}