{"sha": "69f963963ef3e1cc97a60d8c82ba834c6cedfa30", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5Zjk2Mzk2M2VmM2UxY2M5N2E2MGQ4YzgyYmE4MzRjNmNlZGZhMzA=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-08-21T23:49:36Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-08-21T23:50:47Z"}, "message": "cargotest: fix clippy warnings\n\nFixes clippy::redundant_static_lifetimes and clippy::toplevel_ref_arg\nI also replaced some .expect(\"\") calls with .unwrap()s since there was no message passed by the .expect() anyway.", "tree": {"sha": "d9a46861d9acfe44f9473724376e25e860d9bc3d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9a46861d9acfe44f9473724376e25e860d9bc3d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/69f963963ef3e1cc97a60d8c82ba834c6cedfa30", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/69f963963ef3e1cc97a60d8c82ba834c6cedfa30", "html_url": "https://github.com/rust-lang/rust/commit/69f963963ef3e1cc97a60d8c82ba834c6cedfa30", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/69f963963ef3e1cc97a60d8c82ba834c6cedfa30/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "de521cbb303c08febd9fa3755caccd4f3e491ea3", "url": "https://api.github.com/repos/rust-lang/rust/commits/de521cbb303c08febd9fa3755caccd4f3e491ea3", "html_url": "https://github.com/rust-lang/rust/commit/de521cbb303c08febd9fa3755caccd4f3e491ea3"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "b65163a3bc9f54fd3c60149b688e7eff8fea8666", "filename": "src/tools/cargotest/main.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/69f963963ef3e1cc97a60d8c82ba834c6cedfa30/src%2Ftools%2Fcargotest%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69f963963ef3e1cc97a60d8c82ba834c6cedfa30/src%2Ftools%2Fcargotest%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcargotest%2Fmain.rs?ref=69f963963ef3e1cc97a60d8c82ba834c6cedfa30", "patch": "@@ -11,7 +11,7 @@ struct Test {\n     packages: &'static [&'static str],\n }\n \n-const TEST_REPOS: &'static [Test] = &[\n+const TEST_REPOS: &[Test] = &[\n     Test {\n         name: \"iron\",\n         repo: \"https://github.com/iron/iron\",\n@@ -53,9 +53,9 @@ const TEST_REPOS: &'static [Test] = &[\n \n fn main() {\n     let args = env::args().collect::<Vec<_>>();\n-    let ref cargo = args[1];\n+    let cargo = &args[1];\n     let out_dir = Path::new(&args[2]);\n-    let ref cargo = Path::new(cargo);\n+    let cargo = &Path::new(cargo);\n \n     for test in TEST_REPOS.iter().rev() {\n         test_repo(cargo, out_dir, test);\n@@ -77,7 +77,7 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n     let out_dir = out_dir.join(test.name);\n \n     if !out_dir.join(\".git\").is_dir() {\n-        let status = Command::new(\"git\").arg(\"init\").arg(&out_dir).status().expect(\"\");\n+        let status = Command::new(\"git\").arg(\"init\").arg(&out_dir).status().unwrap();\n         assert!(status.success());\n     }\n \n@@ -92,7 +92,7 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n                 .arg(&format!(\"--depth={}\", depth))\n                 .current_dir(&out_dir)\n                 .status()\n-                .expect(\"\");\n+                .unwrap();\n             assert!(status.success());\n         }\n \n@@ -102,7 +102,7 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n             .arg(\"--hard\")\n             .current_dir(&out_dir)\n             .status()\n-            .expect(\"\");\n+            .unwrap();\n \n         if status.success() {\n             found = true;\n@@ -133,7 +133,7 @@ fn run_cargo_test(cargo_path: &Path, crate_path: &Path, packages: &[&str]) -> bo\n         .env(\"RUSTFLAGS\", \"--cap-lints warn\")\n         .current_dir(crate_path)\n         .status()\n-        .expect(\"\");\n+        .unwrap();\n \n     status.success()\n }"}]}