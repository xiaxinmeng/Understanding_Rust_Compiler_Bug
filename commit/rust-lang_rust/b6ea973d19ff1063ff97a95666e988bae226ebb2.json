{"sha": "b6ea973d19ff1063ff97a95666e988bae226ebb2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2ZWE5NzNkMTlmZjEwNjNmZjk3YTk1NjY2ZTk4OGJhZTIyNmViYjI=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-06-27T23:50:03Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-07-12T09:37:28Z"}, "message": "Factor out PairParts::infix", "tree": {"sha": "0f5cae82b4576b392ce546a5356d648887b42dcc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f5cae82b4576b392ce546a5356d648887b42dcc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6ea973d19ff1063ff97a95666e988bae226ebb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6ea973d19ff1063ff97a95666e988bae226ebb2", "html_url": "https://github.com/rust-lang/rust/commit/b6ea973d19ff1063ff97a95666e988bae226ebb2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6ea973d19ff1063ff97a95666e988bae226ebb2/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fba6b68bf2eee8c47da423a7e1204486eb77b489", "url": "https://api.github.com/repos/rust-lang/rust/commits/fba6b68bf2eee8c47da423a7e1204486eb77b489", "html_url": "https://github.com/rust-lang/rust/commit/fba6b68bf2eee8c47da423a7e1204486eb77b489"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "d9fa4717357b662e36ae7cdfc1c899e7e044c9b5", "filename": "src/expr.rs", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/b6ea973d19ff1063ff97a95666e988bae226ebb2/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6ea973d19ff1063ff97a95666e988bae226ebb2/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=b6ea973d19ff1063ff97a95666e988bae226ebb2", "patch": "@@ -92,7 +92,7 @@ pub fn format_expr(\n                 rewrite_pair(\n                     &**lhs,\n                     &**rhs,\n-                    PairParts::new(\"\", &format!(\" {} \", context.snippet(op.span)), \"\"),\n+                    PairParts::infix(&format!(\" {} \", context.snippet(op.span))),\n                     context,\n                     shape,\n                     context.config.binop_separator(),\n@@ -211,15 +211,15 @@ pub fn format_expr(\n         ast::ExprKind::Cast(ref expr, ref ty) => rewrite_pair(\n             &**expr,\n             &**ty,\n-            PairParts::new(\"\", \" as \", \"\"),\n+            PairParts::infix(\" as \"),\n             context,\n             shape,\n             SeparatorPlace::Front,\n         ),\n         ast::ExprKind::Type(ref expr, ref ty) => rewrite_pair(\n             &**expr,\n             &**ty,\n-            PairParts::new(\"\", \": \", \"\"),\n+            PairParts::infix(\": \"),\n             context,\n             shape,\n             SeparatorPlace::Back,\n@@ -288,7 +288,7 @@ pub fn format_expr(\n                     rewrite_pair(\n                         &*lhs,\n                         &*rhs,\n-                        PairParts::new(\"\", &sp_delim, \"\"),\n+                        PairParts::infix(&sp_delim),\n                         context,\n                         shape,\n                         context.config.binop_separator(),\n@@ -435,13 +435,24 @@ fn rewrite_simple_binaries(\n     None\n }\n \n+/// Sigils that decorate a binop pair.\n #[derive(new, Clone, Copy)]\n pub struct PairParts<'a> {\n     prefix: &'a str,\n     infix: &'a str,\n     suffix: &'a str,\n }\n \n+impl<'a> PairParts<'a> {\n+    pub fn infix(infix: &'a str) -> PairParts<'a> {\n+        PairParts {\n+            prefix: \"\",\n+            infix,\n+            suffix: \"\",\n+        }\n+    }\n+}\n+\n pub fn rewrite_pair<LHS, RHS>(\n     lhs: &LHS,\n     rhs: &RHS,"}, {"sha": "5e3cbfc31f3c2bfdf9e848912fa2cd82b81490b6", "filename": "src/patterns.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b6ea973d19ff1063ff97a95666e988bae226ebb2/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6ea973d19ff1063ff97a95666e988bae226ebb2/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=b6ea973d19ff1063ff97a95666e988bae226ebb2", "patch": "@@ -112,7 +112,7 @@ impl Rewrite for Pat {\n                 rewrite_pair(\n                     &**lhs,\n                     &**rhs,\n-                    PairParts::new(\"\", &infix, \"\"),\n+                    PairParts::infix(&infix),\n                     context,\n                     shape,\n                     SeparatorPlace::Front,"}]}