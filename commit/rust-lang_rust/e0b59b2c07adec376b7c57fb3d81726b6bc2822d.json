{"sha": "e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwYjU5YjJjMDdhZGVjMzc2YjdjNTdmYjNkODE3MjZiNmJjMjgyMmQ=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-06-18T22:20:45Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-18T22:20:45Z"}, "message": "Rollup merge of #72814 - RalfJung:mir-visir-terminator, r=oli-obk\n\nremove visit_terminator_kind from MIR visitor\n\nFor some reason, we had both `visit_terminator` and `visit_terminator_kind`. In contrast, for `Statement` we just have `visit_statement`. So this cleans things up by removing `visit_terminator_kind` and porting its users to `visit_terminator`.", "tree": {"sha": "65f28bf8eac6b295697f0975e098b220fd0327bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65f28bf8eac6b295697f0975e098b220fd0327bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe6+i9CRBK7hj4Ov3rIwAAdHIIAH/mwfAQajcE7AjUnnaYlrfu\n7foi0osozmkiryy0nUL/FlRT+U3rO9PF/seSfT0ROr4/xSxgFOp/xx5Lp/hOSPJG\nboDnf7bb2jjAr1+e30TtbtLjQB9SYFfmHiC7IuQT0Ua/sAmwv/3U29ul/QQZ3Z3R\nZQ8MMQpsjB6OEetUKQrdna9utXOZYXCuS2EWzSsxvQrepeDsnFde81n67RcwkD3E\n2U9lQB5jtO8SHLrqsTV/ejdKTegbmXZTdQFsPlUhJjxCOtjVoPghNsMyVb5tvFdb\nb1DURarM59/4BQIHfzSXAceW98gZxf30niUm3Qg+UReTEmCEEKTAsb+HA1ypBkA=\n=xsfz\n-----END PGP SIGNATURE-----\n", "payload": "tree 65f28bf8eac6b295697f0975e098b220fd0327bf\nparent 40fd2bdcfec7a30a2cce0d4a2cc08d09e64cabeb\nparent 827ccf77183c02dc7d362b64debe2bf1c6bfd5fa\nauthor Manish Goregaokar <manishsmail@gmail.com> 1592518845 -0700\ncommitter GitHub <noreply@github.com> 1592518845 -0700\n\nRollup merge of #72814 - RalfJung:mir-visir-terminator, r=oli-obk\n\nremove visit_terminator_kind from MIR visitor\n\nFor some reason, we had both `visit_terminator` and `visit_terminator_kind`. In contrast, for `Statement` we just have `visit_statement`. So this cleans things up by removing `visit_terminator_kind` and porting its users to `visit_terminator`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "html_url": "https://github.com/rust-lang/rust/commit/e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40fd2bdcfec7a30a2cce0d4a2cc08d09e64cabeb", "url": "https://api.github.com/repos/rust-lang/rust/commits/40fd2bdcfec7a30a2cce0d4a2cc08d09e64cabeb", "html_url": "https://github.com/rust-lang/rust/commit/40fd2bdcfec7a30a2cce0d4a2cc08d09e64cabeb"}, {"sha": "827ccf77183c02dc7d362b64debe2bf1c6bfd5fa", "url": "https://api.github.com/repos/rust-lang/rust/commits/827ccf77183c02dc7d362b64debe2bf1c6bfd5fa", "html_url": "https://github.com/rust-lang/rust/commit/827ccf77183c02dc7d362b64debe2bf1c6bfd5fa"}], "stats": {"total": 335, "additions": 156, "deletions": 179}, "files": [{"sha": "db935c2b3e2658a027ba7525da21a38e90146a44", "filename": "src/librustc_codegen_ssa/mir/analyze.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fmir%2Fanalyze.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -234,8 +234,8 @@ impl<'mir, 'a, 'tcx, Bx: BuilderMethods<'a, 'tcx>> Visitor<'tcx>\n         self.visit_rvalue(rvalue, location);\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mir::TerminatorKind<'tcx>, location: Location) {\n-        let check = match *kind {\n+    fn visit_terminator(&mut self, terminator: &mir::Terminator<'tcx>, location: Location) {\n+        let check = match terminator.kind {\n             mir::TerminatorKind::Call { func: mir::Operand::Constant(ref c), ref args, .. } => {\n                 match c.literal.ty.kind {\n                     ty::FnDef(did, _) => Some((did, args)),\n@@ -259,7 +259,7 @@ impl<'mir, 'a, 'tcx, Bx: BuilderMethods<'a, 'tcx>> Visitor<'tcx>\n             }\n         }\n \n-        self.super_terminator_kind(kind, location);\n+        self.super_terminator(terminator, location);\n     }\n \n     fn visit_place(&mut self, place: &mir::Place<'tcx>, context: PlaceContext, location: Location) {"}, {"sha": "c486d5c64baa27d3e120441825fd13c30f0256f5", "filename": "src/librustc_codegen_ssa/mir/block.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_codegen_ssa%2Fmir%2Fblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_codegen_ssa%2Fmir%2Fblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fmir%2Fblock.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -998,8 +998,8 @@ impl<'a, 'tcx, Bx: BuilderMethods<'a, 'tcx>> FunctionCx<'a, 'tcx, Bx> {\n                 bx.unreachable();\n             }\n \n-            mir::TerminatorKind::Drop { location, target, unwind } => {\n-                self.codegen_drop_terminator(helper, bx, location, target, unwind);\n+            mir::TerminatorKind::Drop { place, target, unwind } => {\n+                self.codegen_drop_terminator(helper, bx, place, target, unwind);\n             }\n \n             mir::TerminatorKind::Assert { ref cond, expected, ref msg, target, cleanup } => {"}, {"sha": "f281c1351766350f0d907a656c5d9ab3eed2cda7", "filename": "src/librustc_middle/mir/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fmir%2Fmod.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -1112,7 +1112,7 @@ pub enum TerminatorKind<'tcx> {\n     Unreachable,\n \n     /// Drop the `Place`.\n-    Drop { location: Place<'tcx>, target: BasicBlock, unwind: Option<BasicBlock> },\n+    Drop { place: Place<'tcx>, target: BasicBlock, unwind: Option<BasicBlock> },\n \n     /// Drop the `Place` and assign the new value over it. This ensures\n     /// that the assignment to `P` occurs *even if* the destructor for\n@@ -1141,7 +1141,7 @@ pub enum TerminatorKind<'tcx> {\n     /// }\n     /// ```\n     DropAndReplace {\n-        location: Place<'tcx>,\n+        place: Place<'tcx>,\n         value: Operand<'tcx>,\n         target: BasicBlock,\n         unwind: Option<BasicBlock>,\n@@ -1607,9 +1607,9 @@ impl<'tcx> TerminatorKind<'tcx> {\n             Abort => write!(fmt, \"abort\"),\n             Yield { value, resume_arg, .. } => write!(fmt, \"{:?} = yield({:?})\", resume_arg, value),\n             Unreachable => write!(fmt, \"unreachable\"),\n-            Drop { location, .. } => write!(fmt, \"drop({:?})\", location),\n-            DropAndReplace { location, value, .. } => {\n-                write!(fmt, \"replace({:?} <- {:?})\", location, value)\n+            Drop { place, .. } => write!(fmt, \"drop({:?})\", place),\n+            DropAndReplace { place, value, .. } => {\n+                write!(fmt, \"replace({:?} <- {:?})\", place, value)\n             }\n             Call { func, args, destination, .. } => {\n                 if let Some((destination, _)) = destination {"}, {"sha": "89f8f10449e2de05d26190f3b3b9a56da37ded3d", "filename": "src/librustc_middle/mir/type_foldable.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Ftype_foldable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Ftype_foldable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fmir%2Ftype_foldable.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -27,11 +27,11 @@ impl<'tcx> TypeFoldable<'tcx> for Terminator<'tcx> {\n                 values: values.clone(),\n                 targets: targets.clone(),\n             },\n-            Drop { ref location, target, unwind } => {\n-                Drop { location: location.fold_with(folder), target, unwind }\n+            Drop { ref place, target, unwind } => {\n+                Drop { place: place.fold_with(folder), target, unwind }\n             }\n-            DropAndReplace { ref location, ref value, target, unwind } => DropAndReplace {\n-                location: location.fold_with(folder),\n+            DropAndReplace { ref place, ref value, target, unwind } => DropAndReplace {\n+                place: place.fold_with(folder),\n                 value: value.fold_with(folder),\n                 target,\n                 unwind,\n@@ -97,9 +97,9 @@ impl<'tcx> TypeFoldable<'tcx> for Terminator<'tcx> {\n             SwitchInt { ref discr, switch_ty, .. } => {\n                 discr.visit_with(visitor) || switch_ty.visit_with(visitor)\n             }\n-            Drop { ref location, .. } => location.visit_with(visitor),\n-            DropAndReplace { ref location, ref value, .. } => {\n-                location.visit_with(visitor) || value.visit_with(visitor)\n+            Drop { ref place, .. } => place.visit_with(visitor),\n+            DropAndReplace { ref place, ref value, .. } => {\n+                place.visit_with(visitor) || value.visit_with(visitor)\n             }\n             Yield { ref value, .. } => value.visit_with(visitor),\n             Call { ref func, ref args, ref destination, .. } => {"}, {"sha": "2efc5f1dabedca48ffe6eeb95c2b02efcc8e0f8e", "filename": "src/librustc_middle/mir/visit.rs", "status": "modified", "additions": 22, "deletions": 34, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_middle%2Fmir%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fmir%2Fvisit.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -108,12 +108,6 @@ macro_rules! make_mir_visitor {\n                 self.super_terminator(terminator, location);\n             }\n \n-            fn visit_terminator_kind(&mut self,\n-                                     kind: & $($mutability)? TerminatorKind<'tcx>,\n-                                     location: Location) {\n-                self.super_terminator_kind(kind, location);\n-            }\n-\n             fn visit_assert_message(&mut self,\n                                     msg: & $($mutability)? AssertMessage<'tcx>,\n                                     location: Location) {\n@@ -417,12 +411,6 @@ macro_rules! make_mir_visitor {\n                 let Terminator { source_info, kind } = terminator;\n \n                 self.visit_source_info(source_info);\n-                self.visit_terminator_kind(kind, location);\n-            }\n-\n-            fn super_terminator_kind(&mut self,\n-                                     kind: & $($mutability)? TerminatorKind<'tcx>,\n-                                     source_location: Location) {\n                 match kind {\n                     TerminatorKind::Goto { .. } |\n                     TerminatorKind::Resume |\n@@ -440,7 +428,7 @@ macro_rules! make_mir_visitor {\n                         self.visit_local(\n                             & $($mutability)? local,\n                             PlaceContext::NonMutatingUse(NonMutatingUseContext::Move),\n-                            source_location,\n+                            location,\n                         );\n \n                         assert_eq!(\n@@ -456,34 +444,34 @@ macro_rules! make_mir_visitor {\n                         values: _,\n                         targets: _\n                     } => {\n-                        self.visit_operand(discr, source_location);\n-                        self.visit_ty(switch_ty, TyContext::Location(source_location));\n+                        self.visit_operand(discr, location);\n+                        self.visit_ty(switch_ty, TyContext::Location(location));\n                     }\n \n                     TerminatorKind::Drop {\n-                        location,\n+                        place,\n                         target: _,\n                         unwind: _,\n                     } => {\n                         self.visit_place(\n-                            location,\n+                            place,\n                             PlaceContext::MutatingUse(MutatingUseContext::Drop),\n-                            source_location\n+                            location\n                         );\n                     }\n \n                     TerminatorKind::DropAndReplace {\n-                        location,\n+                        place,\n                         value,\n                         target: _,\n                         unwind: _,\n                     } => {\n                         self.visit_place(\n-                            location,\n+                            place,\n                             PlaceContext::MutatingUse(MutatingUseContext::Drop),\n-                            source_location\n+                            location\n                         );\n-                        self.visit_operand(value, source_location);\n+                        self.visit_operand(value, location);\n                     }\n \n                     TerminatorKind::Call {\n@@ -494,15 +482,15 @@ macro_rules! make_mir_visitor {\n                         from_hir_call: _,\n                         fn_span: _\n                     } => {\n-                        self.visit_operand(func, source_location);\n+                        self.visit_operand(func, location);\n                         for arg in args {\n-                            self.visit_operand(arg, source_location);\n+                            self.visit_operand(arg, location);\n                         }\n                         if let Some((destination, _)) = destination {\n                             self.visit_place(\n                                 destination,\n                                 PlaceContext::MutatingUse(MutatingUseContext::Call),\n-                                source_location\n+                                location\n                             );\n                         }\n                     }\n@@ -514,8 +502,8 @@ macro_rules! make_mir_visitor {\n                         target: _,\n                         cleanup: _,\n                     } => {\n-                        self.visit_operand(cond, source_location);\n-                        self.visit_assert_message(msg, source_location);\n+                        self.visit_operand(cond, location);\n+                        self.visit_assert_message(msg, location);\n                     }\n \n                     TerminatorKind::Yield {\n@@ -524,11 +512,11 @@ macro_rules! make_mir_visitor {\n                         resume_arg,\n                         drop: _,\n                     } => {\n-                        self.visit_operand(value, source_location);\n+                        self.visit_operand(value, location);\n                         self.visit_place(\n                             resume_arg,\n                             PlaceContext::MutatingUse(MutatingUseContext::Yield),\n-                            source_location,\n+                            location,\n                         );\n                     }\n \n@@ -543,29 +531,29 @@ macro_rules! make_mir_visitor {\n                             match op {\n                                 InlineAsmOperand::In { value, .. }\n                                 | InlineAsmOperand::Const { value } => {\n-                                    self.visit_operand(value, source_location);\n+                                    self.visit_operand(value, location);\n                                 }\n                                 InlineAsmOperand::Out { place, .. } => {\n                                     if let Some(place) = place {\n                                         self.visit_place(\n                                             place,\n                                             PlaceContext::MutatingUse(MutatingUseContext::Store),\n-                                            source_location,\n+                                            location,\n                                         );\n                                     }\n                                 }\n                                 InlineAsmOperand::InOut { in_value, out_place, .. } => {\n-                                    self.visit_operand(in_value, source_location);\n+                                    self.visit_operand(in_value, location);\n                                     if let Some(out_place) = out_place {\n                                         self.visit_place(\n                                             out_place,\n                                             PlaceContext::MutatingUse(MutatingUseContext::Store),\n-                                            source_location,\n+                                            location,\n                                         );\n                                     }\n                                 }\n                                 InlineAsmOperand::SymFn { value } => {\n-                                    self.visit_constant(value, source_location);\n+                                    self.visit_constant(value, location);\n                                 }\n                                 InlineAsmOperand::SymStatic { def_id: _ } => {}\n                             }"}, {"sha": "fd8f17718e795b48f5bacc0e569eb8e8932bf9e2", "filename": "src/librustc_mir/borrow_check/invalidation.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Finvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Finvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Finvalidation.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -2,7 +2,7 @@ use rustc_data_structures::graph::dominators::Dominators;\n use rustc_middle::mir::visit::Visitor;\n use rustc_middle::mir::{BasicBlock, Body, Location, Place, Rvalue};\n use rustc_middle::mir::{BorrowKind, Mutability, Operand};\n-use rustc_middle::mir::{InlineAsmOperand, TerminatorKind};\n+use rustc_middle::mir::{InlineAsmOperand, Terminator, TerminatorKind};\n use rustc_middle::mir::{Statement, StatementKind};\n use rustc_middle::ty::TyCtxt;\n \n@@ -112,14 +112,14 @@ impl<'cx, 'tcx> Visitor<'tcx> for InvalidationGenerator<'cx, 'tcx> {\n         self.super_statement(statement, location);\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &TerminatorKind<'tcx>, location: Location) {\n+    fn visit_terminator(&mut self, terminator: &Terminator<'tcx>, location: Location) {\n         self.check_activations(location);\n \n-        match kind {\n+        match &terminator.kind {\n             TerminatorKind::SwitchInt { ref discr, switch_ty: _, values: _, targets: _ } => {\n                 self.consume_operand(location, discr);\n             }\n-            TerminatorKind::Drop { location: drop_place, target: _, unwind: _ } => {\n+            TerminatorKind::Drop { place: drop_place, target: _, unwind: _ } => {\n                 self.access_place(\n                     location,\n                     *drop_place,\n@@ -128,7 +128,7 @@ impl<'cx, 'tcx> Visitor<'tcx> for InvalidationGenerator<'cx, 'tcx> {\n                 );\n             }\n             TerminatorKind::DropAndReplace {\n-                location: drop_place,\n+                place: drop_place,\n                 value: ref new_value,\n                 target: _,\n                 unwind: _,\n@@ -222,7 +222,7 @@ impl<'cx, 'tcx> Visitor<'tcx> for InvalidationGenerator<'cx, 'tcx> {\n             }\n         }\n \n-        self.super_terminator_kind(kind, location);\n+        self.super_terminator(terminator, location);\n     }\n }\n "}, {"sha": "83691d439eb81c983dc1af5da94f01eb310ce4c2", "filename": "src/librustc_mir/borrow_check/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -663,7 +663,7 @@ impl<'cx, 'tcx> dataflow::ResultsVisitor<'cx, 'tcx> for MirBorrowckCtxt<'cx, 'tc\n             TerminatorKind::SwitchInt { ref discr, switch_ty: _, values: _, targets: _ } => {\n                 self.consume_operand(loc, (discr, span), flow_state);\n             }\n-            TerminatorKind::Drop { location: ref drop_place, target: _, unwind: _ } => {\n+            TerminatorKind::Drop { place: ref drop_place, target: _, unwind: _ } => {\n                 let tcx = self.infcx.tcx;\n \n                 // Compute the type with accurate region information.\n@@ -692,7 +692,7 @@ impl<'cx, 'tcx> dataflow::ResultsVisitor<'cx, 'tcx> for MirBorrowckCtxt<'cx, 'tc\n                 );\n             }\n             TerminatorKind::DropAndReplace {\n-                location: drop_place,\n+                place: drop_place,\n                 value: ref new_value,\n                 target: _,\n                 unwind: _,"}, {"sha": "0e35cafb9f3e928a7a29dd39a2c76161a24345cc", "filename": "src/librustc_mir/borrow_check/type_check/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Ftype_check%2Fmod.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -1558,8 +1558,8 @@ impl<'a, 'tcx> TypeChecker<'a, 'tcx> {\n                 // no checks needed for these\n             }\n \n-            TerminatorKind::DropAndReplace { ref location, ref value, target: _, unwind: _ } => {\n-                let place_ty = location.ty(body, tcx).ty;\n+            TerminatorKind::DropAndReplace { ref place, ref value, target: _, unwind: _ } => {\n+                let place_ty = place.ty(body, tcx).ty;\n                 let rv_ty = value.ty(body, tcx);\n \n                 let locations = term_location.to_locations();"}, {"sha": "e027056842db97d20cf69c0109df7def59377a78", "filename": "src/librustc_mir/borrow_check/used_muts.rs", "status": "modified", "additions": 13, "deletions": 7, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Fused_muts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fborrow_check%2Fused_muts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fused_muts.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -1,5 +1,7 @@\n use rustc_middle::mir::visit::{PlaceContext, Visitor};\n-use rustc_middle::mir::{Local, Location, Place, Statement, StatementKind, TerminatorKind};\n+use rustc_middle::mir::{\n+    Local, Location, Place, Statement, StatementKind, Terminator, TerminatorKind,\n+};\n \n use rustc_data_structures::fx::FxHashSet;\n \n@@ -62,20 +64,22 @@ impl GatherUsedMutsVisitor<'_, '_, '_> {\n }\n \n impl<'visit, 'cx, 'tcx> Visitor<'tcx> for GatherUsedMutsVisitor<'visit, 'cx, 'tcx> {\n-    fn visit_terminator_kind(&mut self, kind: &TerminatorKind<'tcx>, _location: Location) {\n-        debug!(\"visit_terminator_kind: kind={:?}\", kind);\n-        match &kind {\n+    fn visit_terminator(&mut self, terminator: &Terminator<'tcx>, location: Location) {\n+        debug!(\"visit_terminator: terminator={:?}\", terminator);\n+        match &terminator.kind {\n             TerminatorKind::Call { destination: Some((into, _)), .. } => {\n                 self.remove_never_initialized_mut_locals(*into);\n             }\n-            TerminatorKind::DropAndReplace { location, .. } => {\n-                self.remove_never_initialized_mut_locals(*location);\n+            TerminatorKind::DropAndReplace { place, .. } => {\n+                self.remove_never_initialized_mut_locals(*place);\n             }\n             _ => {}\n         }\n+\n+        self.super_terminator(terminator, location);\n     }\n \n-    fn visit_statement(&mut self, statement: &Statement<'tcx>, _location: Location) {\n+    fn visit_statement(&mut self, statement: &Statement<'tcx>, location: Location) {\n         if let StatementKind::Assign(box (into, _)) = &statement.kind {\n             debug!(\n                 \"visit_statement: statement={:?} local={:?} \\\n@@ -84,6 +88,8 @@ impl<'visit, 'cx, 'tcx> Visitor<'tcx> for GatherUsedMutsVisitor<'visit, 'cx, 'tc\n             );\n             self.remove_never_initialized_mut_locals(*into);\n         }\n+\n+        self.super_statement(statement, location);\n     }\n \n     fn visit_local(&mut self, local: &Local, place_context: PlaceContext, location: Location) {"}, {"sha": "4512ae96c0833f24d7af72180987e40b10d58fe0", "filename": "src/librustc_mir/dataflow/framework/direction.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fframework%2Fdirection.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fframework%2Fdirection.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fframework%2Fdirection.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -441,8 +441,8 @@ impl Direction for Forward {\n             Goto { target } => propagate(target, exit_state),\n \n             Assert { target, cleanup: unwind, expected: _, msg: _, cond: _ }\n-            | Drop { target, unwind, location: _ }\n-            | DropAndReplace { target, unwind, value: _, location: _ }\n+            | Drop { target, unwind, place: _ }\n+            | DropAndReplace { target, unwind, value: _, place: _ }\n             | FalseUnwind { real_target: target, unwind } => {\n                 if let Some(unwind) = unwind {\n                     if dead_unwinds.map_or(true, |dead| !dead.contains(bb)) {"}, {"sha": "70c916a089270dd108cbddfb72dfad01e478a591", "filename": "src/librustc_mir/dataflow/impls/borrowed_locals.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -189,8 +189,8 @@ where\n         self.super_terminator(terminator, location);\n \n         match terminator.kind {\n-            mir::TerminatorKind::Drop { location: dropped_place, .. }\n-            | mir::TerminatorKind::DropAndReplace { location: dropped_place, .. } => {\n+            mir::TerminatorKind::Drop { place: dropped_place, .. }\n+            | mir::TerminatorKind::DropAndReplace { place: dropped_place, .. } => {\n                 // See documentation for `unsound_ignore_borrow_on_drop` for an explanation.\n                 if !self.ignore_borrow_on_drop {\n                     self.trans.gen(dropped_place.local);"}, {"sha": "7c8aa1db71ff873f56ff15d916a1ff14e138b87b", "filename": "src/librustc_mir/dataflow/move_paths/builder.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fmove_paths%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fdataflow%2Fmove_paths%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmove_paths%2Fbuilder.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -387,13 +387,13 @@ impl<'b, 'a, 'tcx> Gatherer<'b, 'a, 'tcx> {\n                 self.gather_init(place.as_ref(), InitKind::Deep);\n             }\n \n-            TerminatorKind::Drop { location, target: _, unwind: _ } => {\n-                self.gather_move(location);\n+            TerminatorKind::Drop { place, target: _, unwind: _ } => {\n+                self.gather_move(place);\n             }\n-            TerminatorKind::DropAndReplace { location, ref value, .. } => {\n-                self.create_move_path(location);\n+            TerminatorKind::DropAndReplace { place, ref value, .. } => {\n+                self.create_move_path(place);\n                 self.gather_operand(value);\n-                self.gather_init(location.as_ref(), InitKind::Deep);\n+                self.gather_init(place.as_ref(), InitKind::Deep);\n             }\n             TerminatorKind::Call {\n                 ref func,"}, {"sha": "1d57fce39734e9119c93f8cf8a21030a00fca6d7", "filename": "src/librustc_mir/interpret/terminator.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Finterpret%2Fterminator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Finterpret%2Fterminator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fterminator.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -91,10 +91,10 @@ impl<'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> InterpCx<'mir, 'tcx, M> {\n                 }\n             }\n \n-            Drop { location, target, unwind } => {\n-                let place = self.eval_place(location)?;\n+            Drop { place, target, unwind } => {\n+                let place = self.eval_place(place)?;\n                 let ty = place.layout.ty;\n-                trace!(\"TerminatorKind::drop: {:?}, type {}\", location, ty);\n+                trace!(\"TerminatorKind::drop: {:?}, type {}\", place, ty);\n \n                 let instance = Instance::resolve_drop_in_place(*self.tcx, ty);\n                 self.drop_in_place(place, instance, target, unwind)?;"}, {"sha": "36f3947d8301711dabb4f7b99223193c9e474735", "filename": "src/librustc_mir/monomorphize/collector.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fcollector.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -624,19 +624,19 @@ impl<'a, 'tcx> MirVisitor<'tcx> for MirNeighborCollector<'a, 'tcx> {\n         self.super_const(constant);\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mir::TerminatorKind<'tcx>, location: Location) {\n-        debug!(\"visiting terminator {:?} @ {:?}\", kind, location);\n+    fn visit_terminator(&mut self, terminator: &mir::Terminator<'tcx>, location: Location) {\n+        debug!(\"visiting terminator {:?} @ {:?}\", terminator, location);\n \n         let tcx = self.tcx;\n-        match *kind {\n+        match terminator.kind {\n             mir::TerminatorKind::Call { ref func, .. } => {\n                 let callee_ty = func.ty(self.body, tcx);\n                 let callee_ty = self.monomorphize(callee_ty);\n                 visit_fn_use(self.tcx, callee_ty, true, &mut self.output);\n             }\n-            mir::TerminatorKind::Drop { ref location, .. }\n-            | mir::TerminatorKind::DropAndReplace { ref location, .. } => {\n-                let ty = location.ty(self.body, self.tcx).ty;\n+            mir::TerminatorKind::Drop { ref place, .. }\n+            | mir::TerminatorKind::DropAndReplace { ref place, .. } => {\n+                let ty = place.ty(self.body, self.tcx).ty;\n                 let ty = self.monomorphize(ty);\n                 visit_drop_use(self.tcx, ty, true, self.output);\n             }\n@@ -671,7 +671,7 @@ impl<'a, 'tcx> MirVisitor<'tcx> for MirNeighborCollector<'a, 'tcx> {\n             | mir::TerminatorKind::FalseUnwind { .. } => bug!(),\n         }\n \n-        self.super_terminator_kind(kind, location);\n+        self.super_terminator(terminator, location);\n     }\n \n     fn visit_local("}, {"sha": "71fff851531414be7586b3e03cd2fea759685203", "filename": "src/librustc_mir/shim.rs", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fshim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Fshim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fshim.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -582,7 +582,7 @@ impl CloneShimBuilder<'tcx> {\n         self.block(\n             vec![],\n             TerminatorKind::Drop {\n-                location: self.tcx.mk_place_index(dest, beg),\n+                place: self.tcx.mk_place_index(dest, beg),\n                 target: BasicBlock::new(8),\n                 unwind: None,\n             },\n@@ -634,7 +634,7 @@ impl CloneShimBuilder<'tcx> {\n                 self.block(\n                     vec![],\n                     TerminatorKind::Drop {\n-                        location: previous_field,\n+                        place: previous_field,\n                         target: previous_cleanup,\n                         unwind: None,\n                     },\n@@ -799,11 +799,7 @@ fn build_call_shim<'tcx>(\n         block(\n             &mut blocks,\n             vec![],\n-            TerminatorKind::Drop {\n-                location: rcvr_place(),\n-                target: BasicBlock::new(2),\n-                unwind: None,\n-            },\n+            TerminatorKind::Drop { place: rcvr_place(), target: BasicBlock::new(2), unwind: None },\n             false,\n         );\n     }\n@@ -814,11 +810,7 @@ fn build_call_shim<'tcx>(\n         block(\n             &mut blocks,\n             vec![],\n-            TerminatorKind::Drop {\n-                location: rcvr_place(),\n-                target: BasicBlock::new(4),\n-                unwind: None,\n-            },\n+            TerminatorKind::Drop { place: rcvr_place(), target: BasicBlock::new(4), unwind: None },\n             true,\n         );\n "}, {"sha": "a02d0f655600d9db337171f54348b88e702083dd", "filename": "src/librustc_mir/transform/add_moves_for_packed_drops.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fadd_moves_for_packed_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fadd_moves_for_packed_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fadd_moves_for_packed_drops.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -64,8 +64,8 @@ fn add_moves_for_packed_drops_patch<'tcx>(\n         let terminator = data.terminator();\n \n         match terminator.kind {\n-            TerminatorKind::Drop { location, .. }\n-                if util::is_disaligned(tcx, body, param_env, location) =>\n+            TerminatorKind::Drop { place, .. }\n+                if util::is_disaligned(tcx, body, param_env, place) =>\n             {\n                 add_move_for_packed_drop(tcx, body, &mut patch, terminator, loc, data.is_cleanup);\n             }\n@@ -88,13 +88,13 @@ fn add_move_for_packed_drop<'tcx>(\n     is_cleanup: bool,\n ) {\n     debug!(\"add_move_for_packed_drop({:?} @ {:?})\", terminator, loc);\n-    let (location, target, unwind) = match terminator.kind {\n-        TerminatorKind::Drop { ref location, target, unwind } => (location, target, unwind),\n+    let (place, target, unwind) = match terminator.kind {\n+        TerminatorKind::Drop { ref place, target, unwind } => (place, target, unwind),\n         _ => unreachable!(),\n     };\n \n     let source_info = terminator.source_info;\n-    let ty = location.ty(body, tcx).ty;\n+    let ty = place.ty(body, tcx).ty;\n     let temp = patch.new_temp(ty, terminator.source_info.span);\n \n     let storage_dead_block = patch.new_block(BasicBlockData {\n@@ -104,9 +104,9 @@ fn add_move_for_packed_drop<'tcx>(\n     });\n \n     patch.add_statement(loc, StatementKind::StorageLive(temp));\n-    patch.add_assign(loc, Place::from(temp), Rvalue::Use(Operand::Move(*location)));\n+    patch.add_assign(loc, Place::from(temp), Rvalue::Use(Operand::Move(*place)));\n     patch.patch_terminator(\n         loc.block,\n-        TerminatorKind::Drop { location: Place::from(temp), target: storage_dead_block, unwind },\n+        TerminatorKind::Drop { place: Place::from(temp), target: storage_dead_block, unwind },\n     );\n }"}, {"sha": "124606fb423e61c164aee58662215ad4128a2fee", "filename": "src/librustc_mir/transform/check_consts/post_drop_elaboration.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fpost_drop_elaboration.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fpost_drop_elaboration.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fpost_drop_elaboration.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -78,7 +78,7 @@ impl Visitor<'tcx> for CheckLiveDrops<'mir, 'tcx> {\n         trace!(\"visit_terminator: terminator={:?} location={:?}\", terminator, location);\n \n         match &terminator.kind {\n-            mir::TerminatorKind::Drop { location: dropped_place, .. } => {\n+            mir::TerminatorKind::Drop { place: dropped_place, .. } => {\n                 let dropped_ty = dropped_place.ty(self.body, self.tcx).ty;\n                 if !NeedsDrop::in_any_value_of_ty(self.ccx, dropped_ty) {\n                     return;"}, {"sha": "b8104292aab23cf47c8d76181b352ce8abb08c29", "filename": "src/librustc_mir/transform/check_consts/resolver.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fresolver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fresolver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fresolver.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -121,25 +121,25 @@ where\n         self.super_assign(place, rvalue, location);\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mir::TerminatorKind<'tcx>, location: Location) {\n+    fn visit_terminator(&mut self, terminator: &mir::Terminator<'tcx>, location: Location) {\n         // The effect of assignment to the return place in `TerminatorKind::Call` is not applied\n         // here; that occurs in `apply_call_return_effect`.\n \n-        if let mir::TerminatorKind::DropAndReplace { value, location: dest, .. } = kind {\n+        if let mir::TerminatorKind::DropAndReplace { value, place, .. } = &terminator.kind {\n             let qualif = qualifs::in_operand::<Q, _>(\n                 self.ccx,\n                 &mut |l| self.qualifs_per_local.contains(l),\n                 value,\n             );\n \n-            if !dest.is_indirect() {\n-                self.assign_qualif_direct(dest, qualif);\n+            if !place.is_indirect() {\n+                self.assign_qualif_direct(place, qualif);\n             }\n         }\n \n         // We need to assign qualifs to the dropped location before visiting the operand that\n         // replaces it since qualifs can be cleared on move.\n-        self.super_terminator_kind(kind, location);\n+        self.super_terminator(terminator, location);\n     }\n }\n "}, {"sha": "35a8df62cb83a967620c92d4fa1482dfddfd9bcb", "filename": "src/librustc_mir/transform/check_consts/validation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fcheck_consts%2Fvalidation.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -560,8 +560,8 @@ impl Visitor<'tcx> for Validator<'mir, 'tcx> {\n \n             // Forbid all `Drop` terminators unless the place being dropped is a local with no\n             // projections that cannot be `NeedsDrop`.\n-            TerminatorKind::Drop { location: dropped_place, .. }\n-            | TerminatorKind::DropAndReplace { location: dropped_place, .. } => {\n+            TerminatorKind::Drop { place: dropped_place, .. }\n+            | TerminatorKind::DropAndReplace { place: dropped_place, .. } => {\n                 // If we are checking live drops after drop-elaboration, don't emit duplicate\n                 // errors here.\n                 if super::post_drop_elaboration::checking_enabled(self.tcx) {"}, {"sha": "1704d8baabdc8c24a617498e5e7c938be844fbca", "filename": "src/librustc_mir/transform/elaborate_drops.rs", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Felaborate_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Felaborate_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Felaborate_drops.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -85,15 +85,15 @@ fn find_dead_unwinds<'tcx>(\n         .iterate_to_fixpoint()\n         .into_results_cursor(body);\n     for (bb, bb_data) in body.basic_blocks().iter_enumerated() {\n-        let location = match bb_data.terminator().kind {\n-            TerminatorKind::Drop { ref location, unwind: Some(_), .. }\n-            | TerminatorKind::DropAndReplace { ref location, unwind: Some(_), .. } => location,\n+        let place = match bb_data.terminator().kind {\n+            TerminatorKind::Drop { ref place, unwind: Some(_), .. }\n+            | TerminatorKind::DropAndReplace { ref place, unwind: Some(_), .. } => place,\n             _ => continue,\n         };\n \n         debug!(\"find_dead_unwinds @ {:?}: {:?}\", bb, bb_data);\n \n-        let path = match env.move_data.rev_lookup.find(location.as_ref()) {\n+        let path = match env.move_data.rev_lookup.find(place.as_ref()) {\n             LookupResult::Exact(e) => e,\n             LookupResult::Parent(..) => {\n                 debug!(\"find_dead_unwinds: has parent; skipping\");\n@@ -105,7 +105,7 @@ fn find_dead_unwinds<'tcx>(\n         debug!(\n             \"find_dead_unwinds @ {:?}: path({:?})={:?}; init_data={:?}\",\n             bb,\n-            location,\n+            place,\n             path,\n             flow_inits.get()\n         );\n@@ -294,16 +294,16 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n     fn collect_drop_flags(&mut self) {\n         for (bb, data) in self.body.basic_blocks().iter_enumerated() {\n             let terminator = data.terminator();\n-            let location = match terminator.kind {\n-                TerminatorKind::Drop { ref location, .. }\n-                | TerminatorKind::DropAndReplace { ref location, .. } => location,\n+            let place = match terminator.kind {\n+                TerminatorKind::Drop { ref place, .. }\n+                | TerminatorKind::DropAndReplace { ref place, .. } => place,\n                 _ => continue,\n             };\n \n             self.init_data.seek_before(self.body.terminator_loc(bb));\n \n-            let path = self.move_data().rev_lookup.find(location.as_ref());\n-            debug!(\"collect_drop_flags: {:?}, place {:?} ({:?})\", bb, location, path);\n+            let path = self.move_data().rev_lookup.find(place.as_ref());\n+            debug!(\"collect_drop_flags: {:?}, place {:?} ({:?})\", bb, place, path);\n \n             let path = match path {\n                 LookupResult::Exact(e) => e,\n@@ -315,7 +315,7 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n                             terminator.source_info.span,\n                             \"drop of untracked, uninitialized value {:?}, place {:?} ({:?})\",\n                             bb,\n-                            location,\n+                            place,\n                             path\n                         );\n                     }\n@@ -328,7 +328,7 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n                 debug!(\n                     \"collect_drop_flags: collecting {:?} from {:?}@{:?} - {:?}\",\n                     child,\n-                    location,\n+                    place,\n                     path,\n                     (maybe_live, maybe_dead)\n                 );\n@@ -346,13 +346,13 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n \n             let resume_block = self.patch.resume_block();\n             match terminator.kind {\n-                TerminatorKind::Drop { location, target, unwind } => {\n+                TerminatorKind::Drop { place, target, unwind } => {\n                     self.init_data.seek_before(loc);\n-                    match self.move_data().rev_lookup.find(location.as_ref()) {\n+                    match self.move_data().rev_lookup.find(place.as_ref()) {\n                         LookupResult::Exact(path) => elaborate_drop(\n                             &mut Elaborator { ctxt: self },\n                             terminator.source_info,\n-                            location,\n+                            place,\n                             path,\n                             target,\n                             if data.is_cleanup {\n@@ -371,10 +371,10 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n                         }\n                     }\n                 }\n-                TerminatorKind::DropAndReplace { location, ref value, target, unwind } => {\n+                TerminatorKind::DropAndReplace { place, ref value, target, unwind } => {\n                     assert!(!data.is_cleanup);\n \n-                    self.elaborate_replace(loc, location, value, target, unwind);\n+                    self.elaborate_replace(loc, place, value, target, unwind);\n                 }\n                 _ => continue,\n             }\n@@ -396,7 +396,7 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n     fn elaborate_replace(\n         &mut self,\n         loc: Location,\n-        location: Place<'tcx>,\n+        place: Place<'tcx>,\n         value: &Operand<'tcx>,\n         target: BasicBlock,\n         unwind: Option<BasicBlock>,\n@@ -407,7 +407,7 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n         assert!(!data.is_cleanup, \"DropAndReplace in unwind path not supported\");\n \n         let assign = Statement {\n-            kind: StatementKind::Assign(box (location, Rvalue::Use(value.clone()))),\n+            kind: StatementKind::Assign(box (place, Rvalue::Use(value.clone()))),\n             source_info: terminator.source_info,\n         };\n \n@@ -427,14 +427,14 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n             is_cleanup: false,\n         });\n \n-        match self.move_data().rev_lookup.find(location.as_ref()) {\n+        match self.move_data().rev_lookup.find(place.as_ref()) {\n             LookupResult::Exact(path) => {\n                 debug!(\"elaborate_drop_and_replace({:?}) - tracked {:?}\", terminator, path);\n                 self.init_data.seek_before(loc);\n                 elaborate_drop(\n                     &mut Elaborator { ctxt: self },\n                     terminator.source_info,\n-                    location,\n+                    place,\n                     path,\n                     target,\n                     Unwind::To(unwind),\n@@ -459,7 +459,7 @@ impl<'b, 'tcx> ElaborateDropsCtxt<'b, 'tcx> {\n                 debug!(\"elaborate_drop_and_replace({:?}) - untracked {:?}\", terminator, parent);\n                 self.patch.patch_terminator(\n                     bb,\n-                    TerminatorKind::Drop { location, target, unwind: Some(unwind) },\n+                    TerminatorKind::Drop { place, target, unwind: Some(unwind) },\n                 );\n             }\n         }"}, {"sha": "c8702eeae1d5b15ebb1bcfc632cd2d2f36d7aa88", "filename": "src/librustc_mir/transform/generator.rs", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -93,13 +93,13 @@ impl<'tcx> MutVisitor<'tcx> for RenameLocalVisitor<'tcx> {\n         }\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mut TerminatorKind<'tcx>, location: Location) {\n-        match kind {\n+    fn visit_terminator(&mut self, terminator: &mut Terminator<'tcx>, location: Location) {\n+        match terminator.kind {\n             TerminatorKind::Return => {\n                 // Do not replace the implicit `_0` access here, as that's not possible. The\n                 // transform already handles `return` correctly.\n             }\n-            _ => self.super_terminator_kind(kind, location),\n+            _ => self.super_terminator(terminator, location),\n         }\n     }\n }\n@@ -835,8 +835,8 @@ fn elaborate_generator_drops<'tcx>(tcx: TyCtxt<'tcx>, def_id: DefId, body: &mut\n \n     for (block, block_data) in body.basic_blocks().iter_enumerated() {\n         let (target, unwind, source_info) = match block_data.terminator() {\n-            Terminator { source_info, kind: TerminatorKind::Drop { location, target, unwind } } => {\n-                if let Some(local) = location.as_local() {\n+            Terminator { source_info, kind: TerminatorKind::Drop { place, target, unwind } } => {\n+                if let Some(local) = place.as_local() {\n                     if local == SELF_ARG {\n                         (target, unwind, source_info)\n                     } else {\n@@ -1102,11 +1102,8 @@ fn create_generator_resume_function<'tcx>(\n fn insert_clean_drop(body: &mut Body<'_>) -> BasicBlock {\n     let return_block = insert_term_block(body, TerminatorKind::Return);\n \n-    let term = TerminatorKind::Drop {\n-        location: Place::from(SELF_ARG),\n-        target: return_block,\n-        unwind: None,\n-    };\n+    let term =\n+        TerminatorKind::Drop { place: Place::from(SELF_ARG), target: return_block, unwind: None };\n     let source_info = SourceInfo::outermost(body.span);\n \n     // Create a block to destroy an unresumed generators. This can only destroy upvars."}, {"sha": "db909494aed6b53f6c103158cb20c1ef24f37c0a", "filename": "src/librustc_mir/transform/inline.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Finline.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -319,13 +319,13 @@ impl Inliner<'tcx> {\n             let term = blk.terminator();\n             let mut is_drop = false;\n             match term.kind {\n-                TerminatorKind::Drop { ref location, target, unwind }\n-                | TerminatorKind::DropAndReplace { ref location, target, unwind, .. } => {\n+                TerminatorKind::Drop { ref place, target, unwind }\n+                | TerminatorKind::DropAndReplace { ref place, target, unwind, .. } => {\n                     is_drop = true;\n                     work_list.push(target);\n-                    // If the location doesn't actually need dropping, treat it like\n+                    // If the place doesn't actually need dropping, treat it like\n                     // a regular goto.\n-                    let ty = location.ty(callee_body, tcx).subst(tcx, callsite.substs).ty;\n+                    let ty = place.ty(callee_body, tcx).subst(tcx, callsite.substs).ty;\n                     if ty.needs_drop(tcx, param_env) {\n                         cost += CALL_PENALTY;\n                         if let Some(unwind) = unwind {\n@@ -731,14 +731,14 @@ impl<'a, 'tcx> MutVisitor<'tcx> for Integrator<'a, 'tcx> {\n         }\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mut TerminatorKind<'tcx>, loc: Location) {\n+    fn visit_terminator(&mut self, terminator: &mut Terminator<'tcx>, loc: Location) {\n         // Don't try to modify the implicit `_0` access on return (`return` terminators are\n         // replaced down below anyways).\n-        if !matches!(kind, TerminatorKind::Return) {\n-            self.super_terminator_kind(kind, loc);\n+        if !matches!(terminator.kind, TerminatorKind::Return) {\n+            self.super_terminator(terminator, loc);\n         }\n \n-        match *kind {\n+        match terminator.kind {\n             TerminatorKind::GeneratorDrop | TerminatorKind::Yield { .. } => bug!(),\n             TerminatorKind::Goto { ref mut target } => {\n                 *target = self.update_target(*target);\n@@ -782,11 +782,11 @@ impl<'a, 'tcx> MutVisitor<'tcx> for Integrator<'a, 'tcx> {\n                 }\n             }\n             TerminatorKind::Return => {\n-                *kind = TerminatorKind::Goto { target: self.return_block };\n+                terminator.kind = TerminatorKind::Goto { target: self.return_block };\n             }\n             TerminatorKind::Resume => {\n                 if let Some(tgt) = self.cleanup_block {\n-                    *kind = TerminatorKind::Goto { target: tgt }\n+                    terminator.kind = TerminatorKind::Goto { target: tgt }\n                 }\n             }\n             TerminatorKind::Abort => {}"}, {"sha": "1d83733e4cd306bc88868a32f6195286df53327d", "filename": "src/librustc_mir/transform/no_landing_pads.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fno_landing_pads.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fno_landing_pads.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fno_landing_pads.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -34,10 +34,10 @@ impl<'tcx> MutVisitor<'tcx> for NoLandingPads<'tcx> {\n         self.tcx\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &mut TerminatorKind<'tcx>, location: Location) {\n-        if let Some(unwind) = kind.unwind_mut() {\n+    fn visit_terminator(&mut self, terminator: &mut Terminator<'tcx>, location: Location) {\n+        if let Some(unwind) = terminator.kind.unwind_mut() {\n             unwind.take();\n         }\n-        self.super_terminator_kind(kind, location);\n+        self.super_terminator(terminator, location);\n     }\n }"}, {"sha": "330f6c1640ff493ecd0b9ce443982a6ae22943f7", "filename": "src/librustc_mir/transform/promote_consts.rs", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -147,7 +147,6 @@ struct Collector<'a, 'tcx> {\n     ccx: &'a ConstCx<'a, 'tcx>,\n     temps: IndexVec<Local, TempState>,\n     candidates: Vec<Candidate>,\n-    span: Span,\n }\n \n impl<'tcx> Visitor<'tcx> for Collector<'_, 'tcx> {\n@@ -216,10 +215,10 @@ impl<'tcx> Visitor<'tcx> for Collector<'_, 'tcx> {\n         }\n     }\n \n-    fn visit_terminator_kind(&mut self, kind: &TerminatorKind<'tcx>, location: Location) {\n-        self.super_terminator_kind(kind, location);\n+    fn visit_terminator(&mut self, terminator: &Terminator<'tcx>, location: Location) {\n+        self.super_terminator(terminator, location);\n \n-        match *kind {\n+        match terminator.kind {\n             TerminatorKind::Call { ref func, .. } => {\n                 if let ty::FnDef(def_id, _) = func.ty(self.ccx.body, self.ccx.tcx).kind {\n                     let fn_sig = self.ccx.tcx.fn_sig(def_id);\n@@ -254,10 +253,6 @@ impl<'tcx> Visitor<'tcx> for Collector<'_, 'tcx> {\n             _ => {}\n         }\n     }\n-\n-    fn visit_source_info(&mut self, source_info: &SourceInfo) {\n-        self.span = source_info.span;\n-    }\n }\n \n pub fn collect_temps_and_candidates(\n@@ -267,7 +262,6 @@ pub fn collect_temps_and_candidates(\n     let mut collector = Collector {\n         temps: IndexVec::from_elem(TempState::Undefined, &ccx.body.local_decls),\n         candidates: vec![],\n-        span: ccx.body.span,\n         ccx,\n     };\n     for (bb, data) in rpo {\n@@ -1192,7 +1186,7 @@ pub fn promote_candidates<'tcx>(\n             _ => true,\n         });\n         let terminator = block.terminator_mut();\n-        if let TerminatorKind::Drop { location: place, target, .. } = &terminator.kind {\n+        if let TerminatorKind::Drop { place, target, .. } = &terminator.kind {\n             if let Some(index) = place.as_local() {\n                 if promoted(index) {\n                     terminator.kind = TerminatorKind::Goto { target: *target };"}, {"sha": "caf6c7715a9e1caa3cc717c266e1a1a670cc5b87", "filename": "src/librustc_mir/transform/qualify_min_const_fn.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -349,9 +349,9 @@ fn check_terminator(\n         | TerminatorKind::Resume\n         | TerminatorKind::Unreachable => Ok(()),\n \n-        TerminatorKind::Drop { location, .. } => check_place(tcx, *location, span, def_id, body),\n-        TerminatorKind::DropAndReplace { location, value, .. } => {\n-            check_place(tcx, *location, span, def_id, body)?;\n+        TerminatorKind::Drop { place, .. } => check_place(tcx, *place, span, def_id, body),\n+        TerminatorKind::DropAndReplace { place, value, .. } => {\n+            check_place(tcx, *place, span, def_id, body)?;\n             check_operand(tcx, value, span, def_id, body)\n         }\n "}, {"sha": "5f55a812a4e0dc2cdfbc63c0022b17ff1627dd17", "filename": "src/librustc_mir/util/elaborate_drops.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Futil%2Felaborate_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir%2Futil%2Felaborate_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Futil%2Felaborate_drops.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -238,7 +238,7 @@ where\n                 self.elaborator.patch().patch_terminator(\n                     bb,\n                     TerminatorKind::Drop {\n-                        location: self.place,\n+                        place: self.place,\n                         target: self.succ,\n                         unwind: self.unwind.into_option(),\n                     },\n@@ -723,7 +723,7 @@ where\n         self.elaborator.patch().patch_terminator(\n             drop_block,\n             TerminatorKind::Drop {\n-                location: tcx.mk_place_deref(ptr),\n+                place: tcx.mk_place_deref(ptr),\n                 target: loop_block,\n                 unwind: unwind.into_option(),\n             },\n@@ -1000,7 +1000,7 @@ where\n \n     fn drop_block(&mut self, target: BasicBlock, unwind: Unwind) -> BasicBlock {\n         let block =\n-            TerminatorKind::Drop { location: self.place, target, unwind: unwind.into_option() };\n+            TerminatorKind::Drop { place: self.place, target, unwind: unwind.into_option() };\n         self.new_block(unwind, block)\n     }\n "}, {"sha": "b8df27094471ffcc87b4aa02cc39c026d8e5e400", "filename": "src/librustc_mir_build/build/scope.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir_build%2Fbuild%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0b59b2c07adec376b7c57fb3d81726b6bc2822d/src%2Flibrustc_mir_build%2Fbuild%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir_build%2Fbuild%2Fscope.rs?ref=e0b59b2c07adec376b7c57fb3d81726b6bc2822d", "patch": "@@ -1037,7 +1037,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n         &mut self,\n         block: BasicBlock,\n         span: Span,\n-        location: Place<'tcx>,\n+        place: Place<'tcx>,\n         value: Operand<'tcx>,\n     ) -> BlockAnd<()> {\n         let source_info = self.source_info(span);\n@@ -1047,7 +1047,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n             block,\n             source_info,\n             TerminatorKind::DropAndReplace {\n-                location,\n+                place,\n                 value,\n                 target: next_target,\n                 unwind: Some(diverge_target),\n@@ -1158,7 +1158,7 @@ fn build_scope_drops<'tcx>(\n                     block,\n                     source_info,\n                     TerminatorKind::Drop {\n-                        location: local.into(),\n+                        place: local.into(),\n                         target: next,\n                         unwind: Some(unwind_to),\n                     },\n@@ -1272,7 +1272,7 @@ fn build_diverge_scope<'tcx>(\n                         block,\n                         source_info(drop_data.span),\n                         TerminatorKind::Drop {\n-                            location: drop_data.local.into(),\n+                            place: drop_data.local.into(),\n                             target,\n                             unwind: None,\n                         },"}]}