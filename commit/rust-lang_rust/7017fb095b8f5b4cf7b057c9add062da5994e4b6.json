{"sha": "7017fb095b8f5b4cf7b057c9add062da5994e4b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwMTdmYjA5NWI4ZjViNGNmN2IwNTdjOWFkZDA2MmRhNTk5NGU0YjY=", "commit": {"author": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2014-10-27T16:24:10Z"}, "committer": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2014-10-28T21:14:05Z"}, "message": "rephrase some comments according to remarks in the PR", "tree": {"sha": "b2ecf94080ad77f80724430a17e2ec57b1495405", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2ecf94080ad77f80724430a17e2ec57b1495405"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7017fb095b8f5b4cf7b057c9add062da5994e4b6", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7017fb095b8f5b4cf7b057c9add062da5994e4b6", "html_url": "https://github.com/rust-lang/rust/commit/7017fb095b8f5b4cf7b057c9add062da5994e4b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7017fb095b8f5b4cf7b057c9add062da5994e4b6/comments", "author": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c6a4cc98be6e8091054e84bd095fcb0d5e0e8e7", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c6a4cc98be6e8091054e84bd095fcb0d5e0e8e7", "html_url": "https://github.com/rust-lang/rust/commit/7c6a4cc98be6e8091054e84bd095fcb0d5e0e8e7"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "5ce1b2fc40d0464709888cee39636cd450d99453", "filename": "src/test/bench/shootout-reverse-complement.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7017fb095b8f5b4cf7b057c9add062da5994e4b6/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7017fb095b8f5b4cf7b057c9add062da5994e4b6/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs?ref=7017fb095b8f5b4cf7b057c9add062da5994e4b6", "patch": "@@ -62,7 +62,6 @@ impl Tables {\n         }\n         let mut table16 = [0, ..1 << 16];\n         for (i, v) in table16.iter_mut().enumerate() {\n-            // assume little endian\n             *v = table8[i & 255] as u16 << 8 |\n                  table8[i >> 8]  as u16;\n         }\n@@ -104,9 +103,10 @@ impl Tables {\n \n /// Reads all remaining bytes from the stream.\n fn read_to_end<R: Reader>(r: &mut R) -> IoResult<Vec<u8>> {\n-    // FIXME: this method is a temporary workaround for jemalloc on\n-    // linux.  Replace it with Reader::read_to_end() once the jemalloc\n-    // issue has been fixed.\n+    // As reading the input stream in memory is a bottleneck, we tune\n+    // Reader::read_to_end() with a fast growing policy to limit\n+    // recopies.  If MREMAP_RETAIN is implemented in the linux kernel\n+    // and jemalloc use it, this trick will become useless.\n     const CHUNK: uint = 64 * 1024;\n \n     let mut vec = Vec::with_capacity(CHUNK);"}]}