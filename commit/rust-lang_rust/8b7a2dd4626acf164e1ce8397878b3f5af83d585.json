{"sha": "8b7a2dd4626acf164e1ce8397878b3f5af83d585", "node_id": "C_kwDOAAsO6NoAKDhiN2EyZGQ0NjI2YWNmMTY0ZTFjZTgzOTc4NzhiM2Y1YWY4M2Q1ODU", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-10-18T12:49:25Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-10-18T13:06:38Z"}, "message": "* Remove left margin on items declaration at the top of their documentation page\n* Rename \"type-decl\" into \"item-decl\" to reflect the change of usage", "tree": {"sha": "c9a0a7ca67bdd780b0c118dcab7811df92b0d5fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9a0a7ca67bdd780b0c118dcab7811df92b0d5fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b7a2dd4626acf164e1ce8397878b3f5af83d585", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b7a2dd4626acf164e1ce8397878b3f5af83d585", "html_url": "https://github.com/rust-lang/rust/commit/8b7a2dd4626acf164e1ce8397878b3f5af83d585", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b7a2dd4626acf164e1ce8397878b3f5af83d585/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a757817c352801de8b0593728f8aee21e23cd53", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a757817c352801de8b0593728f8aee21e23cd53", "html_url": "https://github.com/rust-lang/rust/commit/9a757817c352801de8b0593728f8aee21e23cd53"}], "stats": {"total": 343, "additions": 190, "deletions": 153}, "files": [{"sha": "58cd1018c316fa986dcc6c9db45be634459c146e", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 153, "deletions": 122, "changes": 275, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -482,24 +482,26 @@ fn item_function(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, f: &clean::\n         + name.as_str().len()\n         + generics_len;\n \n-    wrap_item(w, \"fn\", |w| {\n-        render_attributes_in_pre(w, it, \"\");\n-        w.reserve(header_len);\n-        write!(\n-            w,\n-            \"{vis}{constness}{asyncness}{unsafety}{abi}fn \\\n-             {name}{generics}{decl}{notable_traits}{where_clause}\",\n-            vis = vis,\n-            constness = constness,\n-            asyncness = asyncness,\n-            unsafety = unsafety,\n-            abi = abi,\n-            name = name,\n-            generics = f.generics.print(cx),\n-            where_clause = print_where_clause(&f.generics, cx, 0, true),\n-            decl = f.decl.full_print(header_len, 0, f.header.asyncness, cx),\n-            notable_traits = notable_traits_decl(&f.decl, cx),\n-        );\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"fn\", |w| {\n+            render_attributes_in_pre(w, it, \"\");\n+            w.reserve(header_len);\n+            write!(\n+                w,\n+                \"{vis}{constness}{asyncness}{unsafety}{abi}fn \\\n+                 {name}{generics}{decl}{notable_traits}{where_clause}\",\n+                vis = vis,\n+                constness = constness,\n+                asyncness = asyncness,\n+                unsafety = unsafety,\n+                abi = abi,\n+                name = name,\n+                generics = f.generics.print(cx),\n+                where_clause = print_where_clause(&f.generics, cx, 0, true),\n+                decl = f.decl.full_print(header_len, 0, f.header.asyncness, cx),\n+                notable_traits = notable_traits_decl(&f.decl, cx),\n+            );\n+        });\n     });\n     document(w, cx, it, None, HeadingOffset::H2)\n }\n@@ -844,16 +846,18 @@ fn item_trait(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, t: &clean::Tra\n }\n \n fn item_trait_alias(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, t: &clean::TraitAlias) {\n-    wrap_item(w, \"trait-alias\", |w| {\n-        render_attributes_in_pre(w, it, \"\");\n-        write!(\n-            w,\n-            \"trait {}{}{} = {};\",\n-            it.name.as_ref().unwrap(),\n-            t.generics.print(cx),\n-            print_where_clause(&t.generics, cx, 0, true),\n-            bounds(&t.bounds, true, cx)\n-        );\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"trait-alias\", |w| {\n+            render_attributes_in_pre(w, it, \"\");\n+            write!(\n+                w,\n+                \"trait {}{}{} = {};\",\n+                it.name.as_ref().unwrap(),\n+                t.generics.print(cx),\n+                print_where_clause(&t.generics, cx, 0, true),\n+                bounds(&t.bounds, true, cx)\n+            );\n+        });\n     });\n \n     document(w, cx, it, None, HeadingOffset::H2);\n@@ -866,16 +870,18 @@ fn item_trait_alias(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, t: &clea\n }\n \n fn item_opaque_ty(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, t: &clean::OpaqueTy) {\n-    wrap_item(w, \"opaque\", |w| {\n-        render_attributes_in_pre(w, it, \"\");\n-        write!(\n-            w,\n-            \"type {}{}{where_clause} = impl {bounds};\",\n-            it.name.as_ref().unwrap(),\n-            t.generics.print(cx),\n-            where_clause = print_where_clause(&t.generics, cx, 0, true),\n-            bounds = bounds(&t.bounds, false, cx),\n-        );\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"opaque\", |w| {\n+            render_attributes_in_pre(w, it, \"\");\n+            write!(\n+                w,\n+                \"type {}{}{where_clause} = impl {bounds};\",\n+                it.name.as_ref().unwrap(),\n+                t.generics.print(cx),\n+                where_clause = print_where_clause(&t.generics, cx, 0, true),\n+                bounds = bounds(&t.bounds, false, cx),\n+            );\n+        });\n     });\n \n     document(w, cx, it, None, HeadingOffset::H2);\n@@ -894,20 +900,37 @@ fn item_typedef(\n     t: &clean::Typedef,\n     is_associated: bool,\n ) {\n-    wrap_item(w, \"typedef\", |w| {\n-        render_attributes_in_pre(w, it, \"\");\n-        if !is_associated {\n-            write!(w, \"{}\", it.visibility.print_with_space(it.def_id, cx));\n-        }\n-        write!(\n-            w,\n-            \"type {}{}{where_clause} = {type_};\",\n-            it.name.as_ref().unwrap(),\n-            t.generics.print(cx),\n-            where_clause = print_where_clause(&t.generics, cx, 0, true),\n-            type_ = t.type_.print(cx),\n-        );\n-    });\n+    fn write_content(\n+        w: &mut Buffer,\n+        cx: &Context<'_>,\n+        it: &clean::Item,\n+        t: &clean::Typedef,\n+        is_associated: bool,\n+    ) {\n+        wrap_item(w, \"typedef\", |w| {\n+            render_attributes_in_pre(w, it, \"\");\n+            if !is_associated {\n+                write!(w, \"{}\", it.visibility.print_with_space(it.def_id, cx));\n+            }\n+            write!(\n+                w,\n+                \"type {}{}{where_clause} = {type_};\",\n+                it.name.as_ref().unwrap(),\n+                t.generics.print(cx),\n+                where_clause = print_where_clause(&t.generics, cx, 0, true),\n+                type_ = t.type_.print(cx),\n+            );\n+        });\n+    }\n+\n+    // If this is an associated typedef, we don't want to wrap it into a docblock.\n+    if is_associated {\n+        write_content(w, cx, it, t, is_associated);\n+    } else {\n+        wrap_into_docblock(w, |w| {\n+            write_content(w, cx, it, t, is_associated);\n+        });\n+    }\n \n     document(w, cx, it, None, HeadingOffset::H2);\n \n@@ -1142,32 +1165,34 @@ fn item_macro(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, t: &clean::Mac\n }\n \n fn item_proc_macro(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, m: &clean::ProcMacro) {\n-    let name = it.name.as_ref().expect(\"proc-macros always have names\");\n-    match m.kind {\n-        MacroKind::Bang => {\n-            wrap_item(w, \"macro\", |w| {\n-                write!(w, \"{}!() {{ /* proc-macro */ }}\", name);\n-            });\n-        }\n-        MacroKind::Attr => {\n-            wrap_item(w, \"attr\", |w| {\n-                write!(w, \"#[{}]\", name);\n-            });\n-        }\n-        MacroKind::Derive => {\n-            wrap_item(w, \"derive\", |w| {\n-                write!(w, \"#[derive({})]\", name);\n-                if !m.helpers.is_empty() {\n-                    w.push_str(\"\\n{\\n\");\n-                    w.push_str(\"    // Attributes available to this derive:\\n\");\n-                    for attr in &m.helpers {\n-                        writeln!(w, \"    #[{}]\", attr);\n+    wrap_into_docblock(w, |w| {\n+        let name = it.name.as_ref().expect(\"proc-macros always have names\");\n+        match m.kind {\n+            MacroKind::Bang => {\n+                wrap_item(w, \"macro\", |w| {\n+                    write!(w, \"{}!() {{ /* proc-macro */ }}\", name);\n+                });\n+            }\n+            MacroKind::Attr => {\n+                wrap_item(w, \"attr\", |w| {\n+                    write!(w, \"#[{}]\", name);\n+                });\n+            }\n+            MacroKind::Derive => {\n+                wrap_item(w, \"derive\", |w| {\n+                    write!(w, \"#[derive({})]\", name);\n+                    if !m.helpers.is_empty() {\n+                        w.push_str(\"\\n{\\n\");\n+                        w.push_str(\"    // Attributes available to this derive:\\n\");\n+                        for attr in &m.helpers {\n+                            writeln!(w, \"    #[{}]\", attr);\n+                        }\n+                        w.push_str(\"}\\n\");\n                     }\n-                    w.push_str(\"}\\n\");\n-                }\n-            });\n+                });\n+            }\n         }\n-    }\n+    });\n     document(w, cx, it, None, HeadingOffset::H2)\n }\n \n@@ -1177,38 +1202,40 @@ fn item_primitive(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item) {\n }\n \n fn item_constant(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, c: &clean::Constant) {\n-    wrap_item(w, \"const\", |w| {\n-        render_attributes_in_code(w, it);\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"const\", |w| {\n+            render_attributes_in_code(w, it);\n \n-        write!(\n-            w,\n-            \"{vis}const {name}: {typ}\",\n-            vis = it.visibility.print_with_space(it.def_id, cx),\n-            name = it.name.as_ref().unwrap(),\n-            typ = c.type_.print(cx),\n-        );\n+            write!(\n+                w,\n+                \"{vis}const {name}: {typ}\",\n+                vis = it.visibility.print_with_space(it.def_id, cx),\n+                name = it.name.as_ref().unwrap(),\n+                typ = c.type_.print(cx),\n+            );\n \n-        let value = c.value(cx.tcx());\n-        let is_literal = c.is_literal(cx.tcx());\n-        let expr = c.expr(cx.tcx());\n-        if value.is_some() || is_literal {\n-            write!(w, \" = {expr};\", expr = Escape(&expr));\n-        } else {\n-            w.write_str(\";\");\n-        }\n+            let value = c.value(cx.tcx());\n+            let is_literal = c.is_literal(cx.tcx());\n+            let expr = c.expr(cx.tcx());\n+            if value.is_some() || is_literal {\n+                write!(w, \" = {expr};\", expr = Escape(&expr));\n+            } else {\n+                w.write_str(\";\");\n+            }\n \n-        if !is_literal {\n-            if let Some(value) = &value {\n-                let value_lowercase = value.to_lowercase();\n-                let expr_lowercase = expr.to_lowercase();\n+            if !is_literal {\n+                if let Some(value) = &value {\n+                    let value_lowercase = value.to_lowercase();\n+                    let expr_lowercase = expr.to_lowercase();\n \n-                if value_lowercase != expr_lowercase\n-                    && value_lowercase.trim_end_matches(\"i32\") != expr_lowercase\n-                {\n-                    write!(w, \" // {value}\", value = Escape(value));\n+                    if value_lowercase != expr_lowercase\n+                        && value_lowercase.trim_end_matches(\"i32\") != expr_lowercase\n+                    {\n+                        write!(w, \" // {value}\", value = Escape(value));\n+                    }\n                 }\n             }\n-        }\n+        });\n     });\n \n     document(w, cx, it, None, HeadingOffset::H2)\n@@ -1268,30 +1295,34 @@ fn item_struct(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, s: &clean::St\n }\n \n fn item_static(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, s: &clean::Static) {\n-    wrap_item(w, \"static\", |w| {\n-        render_attributes_in_code(w, it);\n-        write!(\n-            w,\n-            \"{vis}static {mutability}{name}: {typ}\",\n-            vis = it.visibility.print_with_space(it.def_id, cx),\n-            mutability = s.mutability.print_with_space(),\n-            name = it.name.as_ref().unwrap(),\n-            typ = s.type_.print(cx)\n-        );\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"static\", |w| {\n+            render_attributes_in_code(w, it);\n+            write!(\n+                w,\n+                \"{vis}static {mutability}{name}: {typ}\",\n+                vis = it.visibility.print_with_space(it.def_id, cx),\n+                mutability = s.mutability.print_with_space(),\n+                name = it.name.as_ref().unwrap(),\n+                typ = s.type_.print(cx)\n+            );\n+        });\n     });\n     document(w, cx, it, None, HeadingOffset::H2)\n }\n \n fn item_foreign_type(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item) {\n-    wrap_item(w, \"foreigntype\", |w| {\n-        w.write_str(\"extern {\\n\");\n-        render_attributes_in_code(w, it);\n-        write!(\n-            w,\n-            \"    {}type {};\\n}}\",\n-            it.visibility.print_with_space(it.def_id, cx),\n-            it.name.as_ref().unwrap(),\n-        );\n+    wrap_into_docblock(w, |w| {\n+        wrap_item(w, \"foreigntype\", |w| {\n+            w.write_str(\"extern {\\n\");\n+            render_attributes_in_code(w, it);\n+            write!(\n+                w,\n+                \"    {}type {};\\n}}\",\n+                it.visibility.print_with_space(it.def_id, cx),\n+                it.name.as_ref().unwrap(),\n+            );\n+        });\n     });\n \n     document(w, cx, it, None, HeadingOffset::H2);\n@@ -1374,7 +1405,7 @@ fn wrap_into_docblock<F>(w: &mut Buffer, f: F)\n where\n     F: FnOnce(&mut Buffer),\n {\n-    w.write_str(\"<div class=\\\"docblock type-decl\\\">\");\n+    w.write_str(\"<div class=\\\"docblock item-decl\\\">\");\n     f(w);\n     w.write_str(\"</div>\")\n }"}, {"sha": "e178d8748bb33202f25cc9f3f3b5ec4a650e75d9", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -253,7 +253,10 @@ code, pre, a.test-arrow, .code-header {\n pre {\n \tpadding: 14px;\n }\n-.type-decl pre {\n+.docblock.item-decl {\n+\tmargin-left: 0;\n+}\n+.item-decl pre {\n \toverflow-x: auto;\n }\n "}, {"sha": "ccb1a707032bb1c0198ea9b177863cd8caa76313", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -220,7 +220,7 @@ body.source .example-wrap pre.rust a {\n \tbackground: #333;\n }\n \n-.docblock:not(.type-decl) a:not(.srclink):not(.test-arrow),\n+.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n .docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n #help a {\n \tcolor: #39AFD7;"}, {"sha": "93801af46ecc5d3e267fb72ef68defc9b061f4ad", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -181,7 +181,7 @@ body.source .example-wrap pre.rust a {\n \tbackground: #333;\n }\n \n-.docblock:not(.type-decl) a:not(.srclink):not(.test-arrow),\n+.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n .docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n #help a {\n \tcolor: #D2991D;"}, {"sha": "fba8231caac31188420629851af0a03176b03768", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -176,7 +176,7 @@ body.source .example-wrap pre.rust a {\n \tbackground: #eee;\n }\n \n-.docblock:not(.type-decl) a:not(.srclink):not(.test-arrow),\n+.docblock:not(.item-decl) a:not(.srclink):not(.test-arrow),\n .docblock-short a:not(.srclink):not(.test-arrow), .item-info a,\n #help a {\n \tcolor: #3873AD;"}, {"sha": "239e51a91293fafcf152bc83c26f9cb8a3867126", "filename": "src/test/rustdoc-gui/basic.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Fbasic.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Fbasic.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fbasic.goml?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -1,4 +1,4 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n assert: (\"#functions\")\n goto: ./struct.Foo.html\n-assert: (\"div.type-decl\")\n+assert: (\"div.item-decl\")"}, {"sha": "0459fd4b9c353644158378331ed6ab8765b0f090", "filename": "src/test/rustdoc-gui/font-weight.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ffont-weight.goml?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -1,6 +1,6 @@\n goto: file://|DOC_PATH|/lib2/struct.Foo.html\n // This test checks that the font weight is correctly applied.\n-assert-css: (\"//*[@class='docblock type-decl']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n+assert-css: (\"//*[@class='docblock item-decl']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n assert-css: (\"//*[@class='structfield small-section-header']//a[text()='Alias']\", {\"font-weight\": \"400\"})\n assert-css: (\"#method\\.a_method > .code-header\", {\"font-weight\": \"600\"})\n assert-css: (\"#associatedtype\\.X > .code-header\", {\"font-weight\": \"600\"})\n@@ -16,7 +16,7 @@ goto: file://|DOC_PATH|/lib2/trait.Trait.html\n \n // This is a complex selector, so here's how it works:\n //\n-// * //*[@class='docblock type-decl'] \u2014 selects element of any tag with classes docblock and type-decl\n+// * //*[@class='docblock item-decl'] \u2014 selects element of any tag with classes docblock and item-decl\n // * /pre[@class='rust trait'] \u2014 selects immediate child with tag pre and classes rust and trait\n // * /code \u2014 selects immediate child with tag code\n // * /a[@class='constant'] \u2014 selects immediate child with tag a and class constant\n@@ -25,8 +25,8 @@ goto: file://|DOC_PATH|/lib2/trait.Trait.html\n //\n // This uses '/parent::*' as a proxy for the style of the text node.\n // We can't just select the '<a>' because intermediate tags could be added.\n-assert-count: (\"//*[@class='docblock type-decl']/pre[@class='rust trait']/code/a[@class='constant']//text()/parent::*\", 1)\n-assert-css: (\"//*[@class='docblock type-decl']/pre[@class='rust trait']/code/a[@class='constant']//text()/parent::*\", {\"font-weight\": \"400\"})\n+assert-count: (\"//*[@class='docblock item-decl']/pre[@class='rust trait']/code/a[@class='constant']//text()/parent::*\", 1)\n+assert-css: (\"//*[@class='docblock item-decl']/pre[@class='rust trait']/code/a[@class='constant']//text()/parent::*\", {\"font-weight\": \"400\"})\n \n assert-count: (\".methods .type\", 1)\n assert-css: (\".methods .type\", {\"font-weight\": \"600\"})"}, {"sha": "ab38b28ebfc1fbb94db9a68f1eaa1e8aea82db1e", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -5,4 +5,4 @@ size: (1100, 800)\n // Logically, the <body> scroll width should be the width of the window.\n assert-property: (\"body\", {\"scrollWidth\": \"1100\"})\n // However, since there is overflow in the type declaration, its scroll width is bigger.\n-assert-property: (\".type-decl pre\", {\"scrollWidth\": \"1324\"})\n+assert-property: (\".item-decl pre\", {\"scrollWidth\": \"1324\"})"}, {"sha": "1c7f4b7241893b8f705862a7064586db1a55c875", "filename": "src/test/rustdoc/attributes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Fattributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Fattributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fattributes.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -8,6 +8,6 @@ pub extern \"C\" fn f() {}\n #[export_name = \"bar\"]\n pub extern \"C\" fn g() {}\n \n-// @has foo/struct.Repr.html '//*[@class=\"docblock type-decl\"]' '#[repr(C, align(8))]'\n+// @has foo/struct.Repr.html '//*[@class=\"docblock item-decl\"]' '#[repr(C, align(8))]'\n #[repr(C, align(8))]\n pub struct Repr;"}, {"sha": "509457f6c9649610b4200fb4cf69886ac0a7bed8", "filename": "src/test/rustdoc/reexports-priv.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Freexports-priv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Freexports-priv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Freexports-priv.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -5,25 +5,25 @@\n \n extern crate reexports;\n \n-// @has 'foo/macro.addr_of.html' '//*[@class=\"docblock type-decl\"]' 'pub macro addr_of($place : expr) {'\n+// @has 'foo/macro.addr_of.html' '//*[@class=\"docblock item-decl\"]' 'pub macro addr_of($place : expr) {'\n pub use reexports::addr_of;\n-// @has 'foo/macro.addr_of_crate.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) macro addr_of_crate($place : expr) {'\n+// @has 'foo/macro.addr_of_crate.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) macro addr_of_crate($place : expr) {'\n pub(crate) use reexports::addr_of_crate;\n-// @has 'foo/macro.addr_of_self.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) macro addr_of_self($place : expr) {'\n+// @has 'foo/macro.addr_of_self.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) macro addr_of_self($place : expr) {'\n pub(self) use reexports::addr_of_self;\n \n-// @has 'foo/struct.Foo.html' '//*[@class=\"docblock type-decl\"]' 'pub struct Foo;'\n+// @has 'foo/struct.Foo.html' '//*[@class=\"docblock item-decl\"]' 'pub struct Foo;'\n pub use reexports::Foo;\n-// @has 'foo/struct.FooCrate.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) struct FooCrate;'\n+// @has 'foo/struct.FooCrate.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) struct FooCrate;'\n pub(crate) use reexports::FooCrate;\n-// @has 'foo/struct.FooSelf.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) struct FooSelf;'\n+// @has 'foo/struct.FooSelf.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) struct FooSelf;'\n pub(self) use reexports::FooSelf;\n \n-// @has 'foo/enum.Bar.html' '//*[@class=\"docblock type-decl\"]' 'pub enum Bar {'\n+// @has 'foo/enum.Bar.html' '//*[@class=\"docblock item-decl\"]' 'pub enum Bar {'\n pub use reexports::Bar;\n-// @has 'foo/enum.BarCrate.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) enum BarCrate {'\n+// @has 'foo/enum.BarCrate.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) enum BarCrate {'\n pub(crate) use reexports::BarCrate;\n-// @has 'foo/enum.BarSelf.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) enum BarSelf {'\n+// @has 'foo/enum.BarSelf.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) enum BarSelf {'\n pub(self) use reexports::BarSelf;\n \n // @has 'foo/fn.foo.html' '//*[@class=\"rust fn\"]' 'pub fn foo()'\n@@ -40,11 +40,11 @@ pub(crate) use reexports::TypeCrate;\n // @has 'foo/type.TypeSelf.html' '//*[@class=\"rust typedef\"]' 'pub(crate) type TypeSelf ='\n pub(self) use reexports::TypeSelf;\n \n-// @has 'foo/union.Union.html' '//*[@class=\"docblock type-decl\"]' 'pub union Union {'\n+// @has 'foo/union.Union.html' '//*[@class=\"docblock item-decl\"]' 'pub union Union {'\n pub use reexports::Union;\n-// @has 'foo/union.UnionCrate.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) union UnionCrate {'\n+// @has 'foo/union.UnionCrate.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) union UnionCrate {'\n pub(crate) use reexports::UnionCrate;\n-// @has 'foo/union.UnionSelf.html' '//*[@class=\"docblock type-decl\"]' 'pub(crate) union UnionSelf {'\n+// @has 'foo/union.UnionSelf.html' '//*[@class=\"docblock item-decl\"]' 'pub(crate) union UnionSelf {'\n pub(self) use reexports::UnionSelf;\n \n pub mod foo {"}, {"sha": "c308d0c2f05cf49db8f5fc2be4026ffa9a29b74b", "filename": "src/test/rustdoc/reexports.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Freexports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Freexports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Freexports.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -4,21 +4,21 @@\n \n extern crate reexports;\n \n-// @has 'foo/macro.addr_of.html' '//*[@class=\"docblock type-decl\"]' 'pub macro addr_of($place : expr) {'\n+// @has 'foo/macro.addr_of.html' '//*[@class=\"docblock item-decl\"]' 'pub macro addr_of($place : expr) {'\n pub use reexports::addr_of;\n // @!has 'foo/macro.addr_of_crate.html'\n pub(crate) use reexports::addr_of_crate;\n // @!has 'foo/macro.addr_of_self.html'\n pub(self) use reexports::addr_of_self;\n \n-// @has 'foo/struct.Foo.html' '//*[@class=\"docblock type-decl\"]' 'pub struct Foo;'\n+// @has 'foo/struct.Foo.html' '//*[@class=\"docblock item-decl\"]' 'pub struct Foo;'\n pub use reexports::Foo;\n // @!has 'foo/struct.FooCrate.html'\n pub(crate) use reexports::FooCrate;\n // @!has 'foo/struct.FooSelf.html'\n pub(self) use reexports::FooSelf;\n \n-// @has 'foo/enum.Bar.html' '//*[@class=\"docblock type-decl\"]' 'pub enum Bar {'\n+// @has 'foo/enum.Bar.html' '//*[@class=\"docblock item-decl\"]' 'pub enum Bar {'\n pub use reexports::Bar;\n // @!has 'foo/enum.BarCrate.html'\n pub(crate) use reexports::BarCrate;\n@@ -39,7 +39,7 @@ pub(crate) use reexports::TypeCrate;\n // @!has 'foo/type.TypeSelf.html'\n pub(self) use reexports::TypeSelf;\n \n-// @has 'foo/union.Union.html' '//*[@class=\"docblock type-decl\"]' 'pub union Union {'\n+// @has 'foo/union.Union.html' '//*[@class=\"docblock item-decl\"]' 'pub union Union {'\n pub use reexports::Union;\n // @!has 'foo/union.UnionCrate.html'\n pub(crate) use reexports::UnionCrate;"}, {"sha": "937646987dd4f2c5532bd4e562ef67d3fbac1347", "filename": "src/test/rustdoc/toggle-item-contents.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -55,7 +55,7 @@ pub union Union {\n \n // @has 'toggle_item_contents/struct.PrivStruct.html'\n // @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 0\n-// @has - '//div[@class=\"docblock type-decl\"]' 'fields omitted'\n+// @has - '//div[@class=\"docblock item-decl\"]' 'fields omitted'\n pub struct PrivStruct {\n     a: usize,\n     b: usize,"}, {"sha": "c9fccf5a77cde6d31986f42812bc12a05a8165bb", "filename": "src/test/rustdoc/trait_alias.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Ftrait_alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7a2dd4626acf164e1ce8397878b3f5af83d585/src%2Ftest%2Frustdoc%2Ftrait_alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftrait_alias.rs?ref=8b7a2dd4626acf164e1ce8397878b3f5af83d585", "patch": "@@ -13,11 +13,14 @@ use std::fmt::Debug;\n // @has foo/index.html '//a[@class=\"traitalias\"]' 'Alias2'\n // @has foo/index.html '//a[@class=\"traitalias\"]' 'Foo'\n \n-// @has foo/traitalias.CopyAlias.html '//section[@id=\"main\"]/pre' 'trait CopyAlias = Copy;'\n+// @has foo/traitalias.CopyAlias.html\n+// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait CopyAlias = Copy;'\n pub trait CopyAlias = Copy;\n-// @has foo/traitalias.Alias2.html '//section[@id=\"main\"]/pre' 'trait Alias2 = Copy + Debug;'\n+// @has foo/traitalias.Alias2.html\n+// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Alias2 = Copy + Debug;'\n pub trait Alias2 = Copy + Debug;\n-// @has foo/traitalias.Foo.html '//section[@id=\"main\"]/pre' 'trait Foo<T> = Into<T> + Debug;'\n+// @has foo/traitalias.Foo.html\n+// @has - '//section[@id=\"main\"]/div[@class=\"docblock item-decl\"]/pre' 'trait Foo<T> = Into<T> + Debug;'\n pub trait Foo<T> = Into<T> + Debug;\n // @has foo/fn.bar.html '//a[@href=\"traitalias.Alias2.html\"]' 'Alias2'\n pub fn bar<T>() where T: Alias2 {}"}]}