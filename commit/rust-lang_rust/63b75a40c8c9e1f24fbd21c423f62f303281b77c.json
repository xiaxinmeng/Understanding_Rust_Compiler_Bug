{"sha": "63b75a40c8c9e1f24fbd21c423f62f303281b77c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzYjc1YTQwYzhjOWUxZjI0ZmJkMjFjNDIzZjYyZjMwMzI4MWI3N2M=", "commit": {"author": {"name": "George Fraser", "email": "george@fivetran.com", "date": "2020-05-10T18:26:19Z"}, "committer": {"name": "George Fraser", "email": "george@fivetran.com", "date": "2020-05-10T20:11:14Z"}, "message": "Color `for` as a regular keyword when it's part of impl _ for _", "tree": {"sha": "bef6f11c4190be0f0bfd27365630d701ea51bc55", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bef6f11c4190be0f0bfd27365630d701ea51bc55"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63b75a40c8c9e1f24fbd21c423f62f303281b77c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63b75a40c8c9e1f24fbd21c423f62f303281b77c", "html_url": "https://github.com/rust-lang/rust/commit/63b75a40c8c9e1f24fbd21c423f62f303281b77c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63b75a40c8c9e1f24fbd21c423f62f303281b77c/comments", "author": {"login": "georgewfraser", "id": 1369240, "node_id": "MDQ6VXNlcjEzNjkyNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1369240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgewfraser", "html_url": "https://github.com/georgewfraser", "followers_url": "https://api.github.com/users/georgewfraser/followers", "following_url": "https://api.github.com/users/georgewfraser/following{/other_user}", "gists_url": "https://api.github.com/users/georgewfraser/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgewfraser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgewfraser/subscriptions", "organizations_url": "https://api.github.com/users/georgewfraser/orgs", "repos_url": "https://api.github.com/users/georgewfraser/repos", "events_url": "https://api.github.com/users/georgewfraser/events{/privacy}", "received_events_url": "https://api.github.com/users/georgewfraser/received_events", "type": "User", "site_admin": false}, "committer": {"login": "georgewfraser", "id": 1369240, "node_id": "MDQ6VXNlcjEzNjkyNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1369240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgewfraser", "html_url": "https://github.com/georgewfraser", "followers_url": "https://api.github.com/users/georgewfraser/followers", "following_url": "https://api.github.com/users/georgewfraser/following{/other_user}", "gists_url": "https://api.github.com/users/georgewfraser/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgewfraser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgewfraser/subscriptions", "organizations_url": "https://api.github.com/users/georgewfraser/orgs", "repos_url": "https://api.github.com/users/georgewfraser/repos", "events_url": "https://api.github.com/users/georgewfraser/events{/privacy}", "received_events_url": "https://api.github.com/users/georgewfraser/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f1c73633eb3e5d8a2df3a72dc772087cfb18be4", "url": "https://api.github.com/repos/rust-lang/rust/commits/3f1c73633eb3e5d8a2df3a72dc772087cfb18be4", "html_url": "https://github.com/rust-lang/rust/commit/3f1c73633eb3e5d8a2df3a72dc772087cfb18be4"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "635fe5cf9ddf54fc7d11ace1fca787cdfd56b341", "filename": "crates/ra_ide/src/snapshots/highlighting.html", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html?ref=63b75a40c8c9e1f24fbd21c423f62f303281b77c", "patch": "@@ -33,6 +33,16 @@\n     <span class=\"keyword\">pub</span> <span class=\"field declaration\">y</span>: <span class=\"builtin_type\">i32</span>,\n }\n \n+<span class=\"keyword\">trait</span> <span class=\"trait declaration\">Bar</span> {\n+    <span class=\"keyword\">fn</span> <span class=\"function declaration\">bar</span>(&<span class=\"keyword\">self</span>) -&gt; <span class=\"builtin_type\">i32</span>;\n+}\n+\n+<span class=\"keyword\">impl</span> <span class=\"trait\">Bar</span> <span class=\"keyword\">for</span> <span class=\"struct\">Foo</span> {\n+    <span class=\"keyword\">fn</span> <span class=\"function declaration\">bar</span>(&<span class=\"keyword\">self</span>) -&gt; <span class=\"builtin_type\">i32</span> {\n+        <span class=\"keyword\">self</span>.<span class=\"field\">x</span>\n+    }\n+}\n+\n <span class=\"keyword\">static</span> <span class=\"keyword\">mut</span> <span class=\"static declaration mutable\">STATIC_MUT</span>: <span class=\"builtin_type\">i32</span> = <span class=\"numeric_literal\">0</span>;\n \n <span class=\"keyword\">fn</span> <span class=\"function declaration\">foo</span>&lt;<span class=\"lifetime declaration\">'a</span>, <span class=\"type_param declaration\">T</span>&gt;() -&gt; <span class=\"type_param\">T</span> {"}, {"sha": "be57eeb0abeab6eade3d82657cf876328e4bb563", "filename": "crates/ra_ide/src/syntax_highlighting.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs?ref=63b75a40c8c9e1f24fbd21c423f62f303281b77c", "patch": "@@ -403,13 +403,13 @@ fn highlight_element(\n                 T![break]\n                 | T![continue]\n                 | T![else]\n-                | T![for]\n                 | T![if]\n                 | T![loop]\n                 | T![match]\n                 | T![return]\n                 | T![while]\n                 | T![in] => h | HighlightModifier::ControlFlow,\n+                T![for] if !is_child_of_impl(element) => h | HighlightModifier::ControlFlow,\n                 T![unsafe] => h | HighlightModifier::Unsafe,\n                 _ => h,\n             }\n@@ -433,6 +433,13 @@ fn highlight_element(\n     }\n }\n \n+fn is_child_of_impl(element: SyntaxElement) -> bool {\n+    match element.parent() {\n+        Some(e) => e.kind() == IMPL_DEF,\n+        _ => false,\n+    }\n+}\n+\n fn highlight_name(db: &RootDatabase, def: Definition) -> Highlight {\n     match def {\n         Definition::Macro(_) => HighlightTag::Macro,"}, {"sha": "eb43a23da6821ad34a5dc734b79f8eff510df82b", "filename": "crates/ra_ide/src/syntax_highlighting/tests.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63b75a40c8c9e1f24fbd21c423f62f303281b77c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs?ref=63b75a40c8c9e1f24fbd21c423f62f303281b77c", "patch": "@@ -17,6 +17,16 @@ struct Foo {\n     pub y: i32,\n }\n \n+trait Bar {\n+    fn bar(&self) -> i32;\n+}\n+\n+impl Bar for Foo {\n+    fn bar(&self) -> i32 {\n+        self.x\n+    }\n+}\n+\n static mut STATIC_MUT: i32 = 0;\n \n fn foo<'a, T>() -> T {"}]}