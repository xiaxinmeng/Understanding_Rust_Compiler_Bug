{"sha": "8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxMTkwMTc3NDY5NTlmN2VjYjNiYTkzYzZjMzJhN2Q2ZDlkYWZjNDA=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T05:33:57Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T05:33:57Z"}, "message": "Continue evaluating after finding incorrect .. in pattern", "tree": {"sha": "5cffe809873c2d9b25f5e6e5c7db00c07063bd6e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5cffe809873c2d9b25f5e6e5c7db00c07063bd6e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "html_url": "https://github.com/rust-lang/rust/commit/8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "975f8b5e32cfcd368a245169dd3d3cc536b0cc28", "url": "https://api.github.com/repos/rust-lang/rust/commits/975f8b5e32cfcd368a245169dd3d3cc536b0cc28", "html_url": "https://github.com/rust-lang/rust/commit/975f8b5e32cfcd368a245169dd3d3cc536b0cc28"}], "stats": {"total": 53, "additions": 42, "deletions": 11}, "files": [{"sha": "6228598ab61da9c3f37841ba96dda27921d464e1", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "patch": "@@ -3814,8 +3814,12 @@ impl<'a> Parser<'a> {\n                     ddpos = Some(fields.len());\n                 } else {\n                     // Emit a friendly error, ignore `..` and continue parsing\n-                    self.span_err(self.prev_span,\n-                                  \"`..` can only be used once per tuple or tuple struct pattern\");\n+                    self.struct_span_err(\n+                        self.prev_span,\n+                        \"`..` can only be used once per tuple or tuple struct pattern\",\n+                    )\n+                        .span_label(self.prev_span, \"can only be used once per pattern\")\n+                        .emit();\n                 }\n             } else if !self.check(&token::CloseDelim(token::Paren)) {\n                 fields.push(self.parse_pat(None)?);\n@@ -3831,7 +3835,10 @@ impl<'a> Parser<'a> {\n \n         if ddpos == Some(fields.len()) && trailing_comma {\n             // `..` needs to be followed by `)` or `, pat`, `..,)` is disallowed.\n-            self.span_err(self.prev_span, \"trailing comma is not permitted after `..`\");\n+            let msg = \"trailing comma is not permitted after `..`\";\n+            self.struct_span_err(self.prev_span, msg)\n+                .span_label(self.prev_span, msg)\n+                .emit();\n         }\n \n         Ok((fields, ddpos, trailing_comma))"}, {"sha": "574cb6045dc9a42cc169d01551a24f4509c89d4f", "filename": "src/test/ui/parser/pat-tuple-2.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.rs?ref=8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "patch": "@@ -1,5 +1,7 @@\n fn main() {\n     match 0 {\n-        (pat, ..,) => {} //~ ERROR trailing comma is not permitted after `..`\n+        (pat, ..,) => {}\n+        //~^ ERROR trailing comma is not permitted after `..`\n+        //~| ERROR mismatched types\n     }\n }"}, {"sha": "178be83d9bf7355d41388d92fc569fbc66926021", "filename": "src/test/ui/parser/pat-tuple-2.stderr", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-2.stderr?ref=8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "patch": "@@ -1,8 +1,18 @@\n error: trailing comma is not permitted after `..`\n   --> $DIR/pat-tuple-2.rs:3:17\n    |\n-LL |         (pat, ..,) => {} //~ ERROR trailing comma is not permitted after `..`\n-   |                 ^\n+LL |         (pat, ..,) => {}\n+   |                 ^ trailing comma is not permitted after `..`\n \n-error: aborting due to previous error\n+error[E0308]: mismatched types\n+  --> $DIR/pat-tuple-2.rs:3:9\n+   |\n+LL |         (pat, ..,) => {}\n+   |         ^^^^^^^^^^ expected integer, found tuple\n+   |\n+   = note: expected type `{integer}`\n+              found type `(_,)`\n+\n+error: aborting due to 2 previous errors\n \n+For more information about this error, try `rustc --explain E0308`."}, {"sha": "33edb0007e7c1b13031660ecad34aaad7e9e4306", "filename": "src/test/ui/parser/pat-tuple-3.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.rs?ref=8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "patch": "@@ -1,5 +1,7 @@\n fn main() {\n     match 0 {\n-        (.., pat, ..) => {} //~ ERROR `..` can only be used once per tuple or tuple struct pattern\n+        (.., pat, ..) => {}\n+        //~^ ERROR `..` can only be used once per tuple or tuple struct pattern\n+        //~| ERROR mismatched types\n     }\n }"}, {"sha": "fcb657393b8f2ddddabca20cc36be407c088e606", "filename": "src/test/ui/parser/pat-tuple-3.stderr", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8119017746959f7ecb3ba93c6c32a7d6d9dafc40/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fpat-tuple-3.stderr?ref=8119017746959f7ecb3ba93c6c32a7d6d9dafc40", "patch": "@@ -1,8 +1,18 @@\n error: `..` can only be used once per tuple or tuple struct pattern\n   --> $DIR/pat-tuple-3.rs:3:19\n    |\n-LL |         (.., pat, ..) => {} //~ ERROR `..` can only be used once per tuple or tuple struct pattern\n-   |                   ^^\n+LL |         (.., pat, ..) => {}\n+   |                   ^^ can only be used once per pattern\n \n-error: aborting due to previous error\n+error[E0308]: mismatched types\n+  --> $DIR/pat-tuple-3.rs:3:9\n+   |\n+LL |         (.., pat, ..) => {}\n+   |         ^^^^^^^^^^^^^ expected integer, found tuple\n+   |\n+   = note: expected type `{integer}`\n+              found type `(_,)`\n+\n+error: aborting due to 2 previous errors\n \n+For more information about this error, try `rustc --explain E0308`."}]}