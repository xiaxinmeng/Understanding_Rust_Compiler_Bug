{"sha": "c9956a65b49f9cf2b1a691f2b88d61ada753d271", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5OTU2YTY1YjQ5ZjljZjJiMWE2OTFmMmI4OGQ2MWFkYTc1M2QyNzE=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-02-11T03:22:30Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-02-11T03:22:30Z"}, "message": "Teach ty and typeck about pat_lit.", "tree": {"sha": "fa2df240ae6abb678f2ceee8cca14e49a8dc86b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa2df240ae6abb678f2ceee8cca14e49a8dc86b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9956a65b49f9cf2b1a691f2b88d61ada753d271", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9956a65b49f9cf2b1a691f2b88d61ada753d271", "html_url": "https://github.com/rust-lang/rust/commit/c9956a65b49f9cf2b1a691f2b88d61ada753d271", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9956a65b49f9cf2b1a691f2b88d61ada753d271/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f951b52e91c5c0487ad4d3a5454b193f15146d6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/f951b52e91c5c0487ad4d3a5454b193f15146d6a", "html_url": "https://github.com/rust-lang/rust/commit/f951b52e91c5c0487ad4d3a5454b193f15146d6a"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "2bb65fe05dead9ff23c70416039cb462827c50e8", "filename": "src/comp/middle/ty.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c9956a65b49f9cf2b1a691f2b88d61ada753d271/src%2Fcomp%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9956a65b49f9cf2b1a691f2b88d61ada753d271/src%2Fcomp%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fty.rs?ref=c9956a65b49f9cf2b1a691f2b88d61ada753d271", "patch": "@@ -656,6 +656,7 @@ fn block_ty(&ast.block b) -> @t {\n fn pat_ty(@ast.pat pat) -> @t {\n     alt (pat.node) {\n         case (ast.pat_wild(?ann))           { ret ann_to_type(ann); }\n+        case (ast.pat_lit(_, ?ann))         { ret ann_to_type(ann); }\n         case (ast.pat_bind(_, _, ?ann))     { ret ann_to_type(ann); }\n         case (ast.pat_tag(_, _, _, ?ann))   { ret ann_to_type(ann); }\n     }"}, {"sha": "9745343631e7b56a5eb8412d9b9496fdd89dc171", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c9956a65b49f9cf2b1a691f2b88d61ada753d271/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9956a65b49f9cf2b1a691f2b88d61ada753d271/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=c9956a65b49f9cf2b1a691f2b88d61ada753d271", "patch": "@@ -807,6 +807,10 @@ fn demand_pat(&@fn_ctxt fcx, @ty.t expected, @ast.pat pat) -> @ast.pat {\n             auto t = demand(fcx, pat.span, expected, ann_to_type(ann));\n             p_1 = ast.pat_wild(ast.ann_type(t));\n         }\n+        case (ast.pat_lit(?lit, ?ann)) {\n+            auto t = demand(fcx, pat.span, expected, ann_to_type(ann));\n+            p_1 = ast.pat_lit(lit, ast.ann_type(t));\n+        }\n         case (ast.pat_bind(?id, ?did, ?ann)) {\n             auto t = demand(fcx, pat.span, expected, ann_to_type(ann));\n             fcx.locals.insert(did, t);\n@@ -1093,6 +1097,9 @@ fn check_pat(&@fn_ctxt fcx, @ast.pat pat) -> @ast.pat {\n         case (ast.pat_wild(_)) {\n             new_pat = ast.pat_wild(ast.ann_type(next_ty_var(fcx.ccx)));\n         }\n+        case (ast.pat_lit(?lt, _)) {\n+            new_pat = ast.pat_lit(lt, ast.ann_type(check_lit(lt)));\n+        }\n         case (ast.pat_bind(?id, ?def_id, _)) {\n             auto ann = ast.ann_type(next_ty_var(fcx.ccx));\n             new_pat = ast.pat_bind(id, def_id, ann);"}]}