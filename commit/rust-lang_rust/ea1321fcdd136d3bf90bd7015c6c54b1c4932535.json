{"sha": "ea1321fcdd136d3bf90bd7015c6c54b1c4932535", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhMTMyMWZjZGQxMzZkM2JmOTBiZDcwMTVjNmM1NGIxYzQ5MzI1MzU=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-21T23:16:15Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-21T23:16:15Z"}, "message": "Minor distcheck fixes", "tree": {"sha": "219a56751ffd7563e3db4fa9c381d08eb7406268", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/219a56751ffd7563e3db4fa9c381d08eb7406268"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea1321fcdd136d3bf90bd7015c6c54b1c4932535", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea1321fcdd136d3bf90bd7015c6c54b1c4932535", "html_url": "https://github.com/rust-lang/rust/commit/ea1321fcdd136d3bf90bd7015c6c54b1c4932535", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea1321fcdd136d3bf90bd7015c6c54b1c4932535/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ed7c02111d46f4c73f6d936993708692f947f85", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ed7c02111d46f4c73f6d936993708692f947f85", "html_url": "https://github.com/rust-lang/rust/commit/7ed7c02111d46f4c73f6d936993708692f947f85"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "20f2dbc2dc0787dbeef2bd3c371aff6b7aa61587", "filename": "Makefile.in", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ea1321fcdd136d3bf90bd7015c6c54b1c4932535/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/ea1321fcdd136d3bf90bd7015c6c54b1c4932535/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=ea1321fcdd136d3bf90bd7015c6c54b1c4932535", "patch": "@@ -301,6 +301,7 @@ RUNTIME_HDR := rt/globals.h \\\n                rt/util/hash_map.h \\\n                rt/sync/sync.h \\\n                rt/sync/timer.h \\\n+               rt/sync/lock_and_signal.h \\\n                rt/sync/lock_free_queue.h \\\n                rt/rust_srv.h \\\n                rt/rust_kernel.h \\\n@@ -944,14 +945,16 @@ PKG_FILES :=\\\n       $(RUNTIME_CS) $(RUNTIME_HDR)             \\\n       $(LLVMEXT_CS) $(LLVMEXT_HDR)             \\\n       $(PKG_3RDPARTY))                         \\\n+    $(GENERATED)                               \\\n+    $(S)src/boot/fe/lexer.ml                   \\\n     $(COMPILER_INPUTS)                         \\\n     $(STDLIB_INPUTS)                           \\\n     $(ALL_TEST_INPUTS)                         \\\n     $(GENERATED)\n \n dist: $(PKG_TAR)\n \n-$(PKG_TAR):\n+$(PKG_TAR): $(GENERATED)\n \t@$(call E, making dist dir)\n \t$(Q)rm -Rf dist\n \t$(Q)mkdir -p dist/$(PKG_DIR)\n@@ -960,9 +963,12 @@ $(PKG_TAR):\n \t$(Q)rm -Rf dist\n \n distcheck: $(PKG_TAR)\n-\t$(Q)tar -c $(PKG_FILES) | tar -x -C dist/$(PKG_DIR)\n+\t$(Q)rm -Rf dist\n+\t$(Q)mkdir -p dist\n+\t@$(call E, unpacking $(PKG_TAR) in dist/$(PKG_DIR))\n+\t$(Q)cd dist && tar -xzf ../$(PKG_TAR)\n \t@$(call E, configuring in dist/$(PKG_DIR)-build)\n-\t$(Q)mkdir -p dist/build\n+\t$(Q)mkdir -p dist/$(PKG_DIR)-build\n \t$(Q)cd dist/$(PKG_DIR)-build && ../$(PKG_DIR)/configure\n \t@$(call E, making 'check' in dist/$(PKG_DIR)-build)\n \t$(Q)make -C dist/$(PKG_DIR)-build check\n@@ -984,7 +990,7 @@ distcheck: $(PKG_TAR)\n tidy:\n \t@$(call E, check: formatting)\n \t$(Q)python $(S)src/etc/tidy.py \\\n-      $(filter-out $(GENERATED) \\\n+      $(filter-out $(GENERATED) $(addprefix $(S)src/, $(GENERATED)) \\\n         $(addprefix $(S)src/, $(LLVMEXT_CS) $(LLVMEXT_HDR) $(PKG_3RDPARTY)) \\\n         $(S)src/etc/%, $(PKG_FILES))\n "}]}