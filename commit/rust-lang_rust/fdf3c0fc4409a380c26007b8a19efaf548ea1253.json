{"sha": "fdf3c0fc4409a380c26007b8a19efaf548ea1253", "node_id": "C_kwDOAAsO6NoAKGZkZjNjMGZjNDQwOWEzODBjMjYwMDdiOGExOWVmYWY1NDhlYTEyNTM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-09-19T15:55:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-19T15:55:20Z"}, "message": "Rollup merge of #101966 - crlf0710:emoji_unittest, r=Mark-Simulacrum\n\nAdd unit test for identifier Unicode emoji diagnostics\n\nSeems current diagnostics has some support for emoji usages, however it seems outdated and incomplete. This adds a simple unit test to showcase the status quo.", "tree": {"sha": "8894a2f159bf2b9e34afeb83cd50fe3977909c1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8894a2f159bf2b9e34afeb83cd50fe3977909c1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fdf3c0fc4409a380c26007b8a19efaf548ea1253", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjKJDoCRBK7hj4Ov3rIwAALe0IADOIVIERO3mVi3ud37i+tMwh\n7IHsFWwKvAMGCVFPksPBSq0xF5og/qF3mOyGhLJ+EQ13QaUPDMvI+ZUulKIMV7nL\nGdhc5oImIb2SEAQda/V9MYVgo6GaKTkVlr1kGiaXTewXkZ0v2JIbFMTwwN1JnnQb\noiMg6F4S6EoxAz8z/v+DnaUFrpmX5aT7EuZFXCkQIqZB0H94A0M++hEkSKZbpVKk\niAXmBoe4WcpsDSikY8NvXq55rYhXNwkmL/+sp9qvXgxaaBp6//+vaWlQ85OTvSpN\nBKf8nq6M7YhorwKEpDpX794a6R+ASs0TCe/+SNYimkTWzjlfcd5OBqZhndW+vCM=\n=u4oa\n-----END PGP SIGNATURE-----\n", "payload": "tree 8894a2f159bf2b9e34afeb83cd50fe3977909c1f\nparent 9f073b0de072732546d916dde1141a8b225ac4df\nparent d381d8e98259f7b5bc82c9d78088b506fc72a3df\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1663602920 +0200\ncommitter GitHub <noreply@github.com> 1663602920 +0200\n\nRollup merge of #101966 - crlf0710:emoji_unittest, r=Mark-Simulacrum\n\nAdd unit test for identifier Unicode emoji diagnostics\n\nSeems current diagnostics has some support for emoji usages, however it seems outdated and incomplete. This adds a simple unit test to showcase the status quo.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fdf3c0fc4409a380c26007b8a19efaf548ea1253", "html_url": "https://github.com/rust-lang/rust/commit/fdf3c0fc4409a380c26007b8a19efaf548ea1253", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fdf3c0fc4409a380c26007b8a19efaf548ea1253/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f073b0de072732546d916dde1141a8b225ac4df", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f073b0de072732546d916dde1141a8b225ac4df", "html_url": "https://github.com/rust-lang/rust/commit/9f073b0de072732546d916dde1141a8b225ac4df"}, {"sha": "d381d8e98259f7b5bc82c9d78088b506fc72a3df", "url": "https://api.github.com/repos/rust-lang/rust/commits/d381d8e98259f7b5bc82c9d78088b506fc72a3df", "html_url": "https://github.com/rust-lang/rust/commit/d381d8e98259f7b5bc82c9d78088b506fc72a3df"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "91b5929c0fea66565a50ecbb52f201d4e53758ba", "filename": "src/test/ui/lexer/lex-emoji-identifiers.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/fdf3c0fc4409a380c26007b8a19efaf548ea1253/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdf3c0fc4409a380c26007b8a19efaf548ea1253/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.rs?ref=fdf3c0fc4409a380c26007b8a19efaf548ea1253", "patch": "@@ -0,0 +1,17 @@\n+fn invalid_emoji_usages() {\n+    let arrow\u2194\ufe0f = \"basic emoji\"; //~ ERROR: identifiers cannot contain emoji\n+    // FIXME\n+    let planet\ud83e\ude90 = \"basic emoji\"; //~ ERROR: unknown start of token\n+    // FIXME\n+    let wireless\ud83d\udedc = \"basic emoji\"; //~ ERROR: unknown start of token\n+    // FIXME\n+    let key1\ufe0f\u20e3 = \"keycap sequence\"; //~ ERROR: unknown start of token\n+                                    //~^ WARN: identifier contains uncommon Unicode codepoints\n+    let flag\ud83c\uddfa\ud83c\uddf3 = \"flag sequence\"; //~ ERROR: identifiers cannot contain emoji\n+    let wales\ud83c\udff4 = \"tag sequence\"; //~ ERROR: identifiers cannot contain emoji\n+    let folded\ud83d\ude4f\ud83c\udfff = \"modifier sequence\"; //~ ERROR: identifiers cannot contain emoji\n+}\n+\n+fn main() {\n+    invalid_emoji_usages();\n+}"}, {"sha": "6237c5d0236d2d215c1a59b5b9fc8de10384fc99", "filename": "src/test/ui/lexer/lex-emoji-identifiers.stderr", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/fdf3c0fc4409a380c26007b8a19efaf548ea1253/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fdf3c0fc4409a380c26007b8a19efaf548ea1253/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flexer%2Flex-emoji-identifiers.stderr?ref=fdf3c0fc4409a380c26007b8a19efaf548ea1253", "patch": "@@ -0,0 +1,52 @@\n+error: unknown start of token: \\u{1fa90}\n+  --> $DIR/lex-emoji-identifiers.rs:4:15\n+   |\n+LL |     let planet\ud83e\ude90 = \"basic emoji\";\n+   |               ^^\n+\n+error: unknown start of token: \\u{1f6dc}\n+  --> $DIR/lex-emoji-identifiers.rs:6:17\n+   |\n+LL |     let wireless\ud83d\udedc = \"basic emoji\";\n+   |                 ^^\n+\n+error: unknown start of token: \\u{20e3}\n+  --> $DIR/lex-emoji-identifiers.rs:8:14\n+   |\n+LL |     let key1\ufe0f\u20e3 = \"keycap sequence\";\n+   |             ^\n+\n+error: identifiers cannot contain emoji: `arrow\u2194\ufe0f`\n+  --> $DIR/lex-emoji-identifiers.rs:2:9\n+   |\n+LL |     let arrow\u2194\ufe0f = \"basic emoji\";\n+   |         ^^^^^^\n+\n+error: identifiers cannot contain emoji: `flag\ud83c\uddfa\ud83c\uddf3`\n+  --> $DIR/lex-emoji-identifiers.rs:10:9\n+   |\n+LL |     let flag\ud83c\uddfa\ud83c\uddf3 = \"flag sequence\";\n+   |         ^^^^^^\n+\n+error: identifiers cannot contain emoji: `wales\ud83c\udff4`\n+  --> $DIR/lex-emoji-identifiers.rs:11:9\n+   |\n+LL |     let wales\ud83c\udff4 = \"tag sequence\";\n+   |         ^^^^^^^\n+\n+error: identifiers cannot contain emoji: `folded\ud83d\ude4f\ud83c\udfff`\n+  --> $DIR/lex-emoji-identifiers.rs:12:9\n+   |\n+LL |     let folded\ud83d\ude4f\ud83c\udfff = \"modifier sequence\";\n+   |         ^^^^^^^^^^\n+\n+warning: identifier contains uncommon Unicode codepoints\n+  --> $DIR/lex-emoji-identifiers.rs:8:9\n+   |\n+LL |     let key1\ufe0f\u20e3 = \"keycap sequence\";\n+   |         ^^^^\n+   |\n+   = note: `#[warn(uncommon_codepoints)]` on by default\n+\n+error: aborting due to 7 previous errors; 1 warning emitted\n+"}]}