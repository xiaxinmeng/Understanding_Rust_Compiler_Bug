{"sha": "d5cb474f5761fd80b5d7ab7d43671dfbd534acce", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1Y2I0NzRmNTc2MWZkODBiNWQ3YWI3ZDQzNjcxZGZiZDUzNGFjY2U=", "commit": {"author": {"name": "Tommy Ip", "email": "hkmp7tommy@gmail.com", "date": "2017-11-06T14:20:15Z"}, "committer": {"name": "Tommy Ip", "email": "hkmp7tommy@gmail.com", "date": "2017-11-06T16:28:30Z"}, "message": "Add tests for new format! error message", "tree": {"sha": "e659390f4fbbd0ee3d863d66485e6d97ff3811fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e659390f4fbbd0ee3d863d66485e6d97ff3811fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5cb474f5761fd80b5d7ab7d43671dfbd534acce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5cb474f5761fd80b5d7ab7d43671dfbd534acce", "html_url": "https://github.com/rust-lang/rust/commit/d5cb474f5761fd80b5d7ab7d43671dfbd534acce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5cb474f5761fd80b5d7ab7d43671dfbd534acce/comments", "author": {"login": "tommyip", "id": 18504232, "node_id": "MDQ6VXNlcjE4NTA0MjMy", "avatar_url": "https://avatars.githubusercontent.com/u/18504232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tommyip", "html_url": "https://github.com/tommyip", "followers_url": "https://api.github.com/users/tommyip/followers", "following_url": "https://api.github.com/users/tommyip/following{/other_user}", "gists_url": "https://api.github.com/users/tommyip/gists{/gist_id}", "starred_url": "https://api.github.com/users/tommyip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tommyip/subscriptions", "organizations_url": "https://api.github.com/users/tommyip/orgs", "repos_url": "https://api.github.com/users/tommyip/repos", "events_url": "https://api.github.com/users/tommyip/events{/privacy}", "received_events_url": "https://api.github.com/users/tommyip/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tommyip", "id": 18504232, "node_id": "MDQ6VXNlcjE4NTA0MjMy", "avatar_url": "https://avatars.githubusercontent.com/u/18504232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tommyip", "html_url": "https://github.com/tommyip", "followers_url": "https://api.github.com/users/tommyip/followers", "following_url": "https://api.github.com/users/tommyip/following{/other_user}", "gists_url": "https://api.github.com/users/tommyip/gists{/gist_id}", "starred_url": "https://api.github.com/users/tommyip/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tommyip/subscriptions", "organizations_url": "https://api.github.com/users/tommyip/orgs", "repos_url": "https://api.github.com/users/tommyip/repos", "events_url": "https://api.github.com/users/tommyip/events{/privacy}", "received_events_url": "https://api.github.com/users/tommyip/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82d5ea4b12d8543c6c8f871881fbbefbf5e63dc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/82d5ea4b12d8543c6c8f871881fbbefbf5e63dc2", "html_url": "https://github.com/rust-lang/rust/commit/82d5ea4b12d8543c6c8f871881fbbefbf5e63dc2"}], "stats": {"total": 49, "additions": 26, "deletions": 23}, "files": [{"sha": "336a0d825cb1214a87f2bf5fb3691139c304d7b1", "filename": "src/test/compile-fail/ifmt-bad-arg.rs", "status": "modified", "additions": 26, "deletions": 23, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/d5cb474f5761fd80b5d7ab7d43671dfbd534acce/src%2Ftest%2Fcompile-fail%2Fifmt-bad-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5cb474f5761fd80b5d7ab7d43671dfbd534acce/src%2Ftest%2Fcompile-fail%2Fifmt-bad-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fifmt-bad-arg.rs?ref=d5cb474f5761fd80b5d7ab7d43671dfbd534acce", "patch": "@@ -11,36 +11,39 @@\n fn main() {\n     // bad arguments to the format! call\n \n-    format!(\"{}\");            //~ ERROR: invalid reference to argument\n+    // bad number of arguments, see #44954 (originally #15780)\n \n-    format!(\"{1}\", 1);        //~ ERROR: invalid reference to argument `1`\n-                            //~^ ERROR: argument never used\n-    format!(\"{foo}\");         //~ ERROR: no argument named `foo`\n+    format!(\"{}\");\n+    //~^ ERROR: 1 positional argument in format string, but no arguments were given\n \n-    format!(\"\", 1, 2);                 //~ ERROR: multiple unused formatting arguments\n-    format!(\"{}\", 1, 2);               //~ ERROR: argument never used\n-    format!(\"{1}\", 1, 2);              //~ ERROR: argument never used\n-    format!(\"{}\", 1, foo=2);           //~ ERROR: named argument never used\n-    format!(\"{foo}\", 1, foo=2);        //~ ERROR: argument never used\n-    format!(\"\", foo=2);                //~ ERROR: named argument never used\n+    format!(\"{1}\", 1);\n+    //~^ ERROR: 1 positional argument in format string, but there is only 1 argument\n+    //~^^ ERROR: argument never used\n \n-    format!(\"{foo}\", foo=1, foo=2);    //~ ERROR: duplicate argument\n-    format!(\"\", foo=1, 2);             //~ ERROR: positional arguments cannot follow\n-\n-    // bad number of arguments, see #15780\n-\n-    format!(\"{0}\");\n-    //~^ ERROR invalid reference to argument `0` (no arguments given)\n+    format!(\"{} {}\");\n+    //~^ ERROR: 2 positional arguments in format string, but no arguments were given\n \n     format!(\"{0} {1}\", 1);\n-    //~^ ERROR invalid reference to argument `1` (there is 1 argument)\n+    //~^ ERROR: 2 positional arguments in format string, but there is only 1 argument\n \n     format!(\"{0} {1} {2}\", 1, 2);\n-    //~^ ERROR invalid reference to argument `2` (there are 2 arguments)\n-\n-    format!(\"{0} {1}\");\n-    //~^ ERROR invalid reference to argument `0` (no arguments given)\n-    //~^^ ERROR invalid reference to argument `1` (no arguments given)\n+    //~^ ERROR: 3 positional arguments in format string, but there are only 2 arguments\n+\n+    format!(\"{} {value} {} {}\", 1, value=2);\n+    //~^ ERROR: invalid reference to positional argument 2 (there are only 2 arguments)\n+    format!(\"{name} {value} {} {} {} {} {} {}\", 0, name=1, value=2);\n+    //~^ ERROR: invalid reference to positional arguments 3, 4 and 5 (there are only 3 arguments)\n+\n+    format!(\"{foo}\");                //~ ERROR: no argument named `foo`\n+    format!(\"\", 1, 2);               //~ ERROR: multiple unused formatting arguments\n+    format!(\"{}\", 1, 2);             //~ ERROR: argument never used\n+    format!(\"{1}\", 1, 2);            //~ ERROR: argument never used\n+    format!(\"{}\", 1, foo=2);         //~ ERROR: named argument never used\n+    format!(\"{foo}\", 1, foo=2);      //~ ERROR: argument never used\n+    format!(\"\", foo=2);              //~ ERROR: named argument never used\n+\n+    format!(\"{foo}\", foo=1, foo=2);  //~ ERROR: duplicate argument\n+    format!(\"\", foo=1, 2);           //~ ERROR: positional arguments cannot follow\n \n     // bad named arguments, #35082\n "}]}