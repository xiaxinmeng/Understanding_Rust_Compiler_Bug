{"sha": "362aa9a317127014a81c8f414ef8b26aee6acfc0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2MmFhOWEzMTcxMjcwMTRhODFjOGY0MTRlZjhiMjZhZWU2YWNmYzA=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-03-08T13:22:08Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-03-12T11:02:49Z"}, "message": "Default llvm.clean-rebuild to false", "tree": {"sha": "831282527a5271ada0cfa6fc51657cdfa55e75ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/831282527a5271ada0cfa6fc51657cdfa55e75ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/362aa9a317127014a81c8f414ef8b26aee6acfc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/362aa9a317127014a81c8f414ef8b26aee6acfc0", "html_url": "https://github.com/rust-lang/rust/commit/362aa9a317127014a81c8f414ef8b26aee6acfc0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/362aa9a317127014a81c8f414ef8b26aee6acfc0/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b8b3b2b0339bbae4aad139c5dad4b46410cd784", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b8b3b2b0339bbae4aad139c5dad4b46410cd784", "html_url": "https://github.com/rust-lang/rust/commit/9b8b3b2b0339bbae4aad139c5dad4b46410cd784"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "35b376d5f27b8c498d3691e720c9d3dcde558f45", "filename": "configure", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/362aa9a317127014a81c8f414ef8b26aee6acfc0/configure", "raw_url": "https://github.com/rust-lang/rust/raw/362aa9a317127014a81c8f414ef8b26aee6acfc0/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=362aa9a317127014a81c8f414ef8b26aee6acfc0", "patch": "@@ -437,6 +437,7 @@ opt local-rust 0 \"use an installed rustc rather than downloading a snapshot\"\n opt local-rebuild 0 \"assume local-rust matches the current version, for rebuilds; implies local-rust, and is implied if local-rust already matches the current version\"\n opt llvm-static-stdcpp 0 \"statically link to libstdc++ for LLVM\"\n opt llvm-link-shared 0 \"prefer shared linking to LLVM (llvm-config --link-shared)\"\n+opt llvm-clean-rebuild 0 \"delete LLVM build directory on rebuild\"\n opt rpath 1 \"build rpaths into rustc itself\"\n opt stage0-landing-pads 1 \"enable landing pads during bootstrap with stage0\"\n # This is used by the automation to produce single-target nightlies"}, {"sha": "dcd49c51e3a99b026da705ebd963714e31b6ea5a", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=362aa9a317127014a81c8f414ef8b26aee6acfc0", "patch": "@@ -243,7 +243,6 @@ impl Config {\n     pub fn parse(build: &str, file: Option<PathBuf>) -> Config {\n         let mut config = Config::default();\n         config.llvm_optimize = true;\n-        config.llvm_clean_rebuild = true;\n         config.use_jemalloc = true;\n         config.backtrace = true;\n         config.rust_optimize = true;\n@@ -443,6 +442,7 @@ impl Config {\n                 (\"LLVM_VERSION_CHECK\", self.llvm_version_check),\n                 (\"LLVM_STATIC_STDCPP\", self.llvm_static_stdcpp),\n                 (\"LLVM_LINK_SHARED\", self.llvm_link_shared),\n+                (\"LLVM_CLEAN_REBUILD\", self.llvm_clean_rebuild),\n                 (\"OPTIMIZE\", self.rust_optimize),\n                 (\"DEBUG_ASSERTIONS\", self.rust_debug_assertions),\n                 (\"DEBUGINFO\", self.rust_debuginfo),"}, {"sha": "5a00e90f370b5f78bfc0183981c524683a98c7c4", "filename": "src/bootstrap/config.toml.example", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fbootstrap%2Fconfig.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fbootstrap%2Fconfig.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.toml.example?ref=362aa9a317127014a81c8f414ef8b26aee6acfc0", "patch": "@@ -62,11 +62,9 @@\n #link-jobs = 0\n \n # Delete LLVM build directory on LLVM rebuild.\n-# This option's default (`true`) is optimized for CI needs, and CI wants to\n-# perform clean full builds only (possibly accelerated by (s)ccache).\n-# You may want to override this option for local builds to enable partial LLVM\n-# rebuilds.\n-#clean-rebuild = true\n+# This option defaults to `false` for local development, but CI may want to\n+# always perform clean full builds (possibly accelerated by (s)ccache).\n+#clean-rebuild = false\n \n # =============================================================================\n # General build configuration options"}, {"sha": "19bea9ced064289478dfc5cd05b2d9ed7104012e", "filename": "src/ci/run.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/362aa9a317127014a81c8f414ef8b26aee6acfc0/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=362aa9a317127014a81c8f414ef8b26aee6acfc0", "patch": "@@ -28,6 +28,7 @@ RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-quiet-tests\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-manage-submodules\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-locked-deps\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-cargo-openssl-static\"\n+RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-llvm-clean-rebuild\"\n \n if [ \"$DIST_SRC\" = \"\" ]; then\n   RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-dist-src\""}]}