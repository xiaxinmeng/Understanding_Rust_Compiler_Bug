{"sha": "f6a5b29d197ba3f64007e51b948b427232173f2f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2YTViMjlkMTk3YmEzZjY0MDA3ZTUxYjk0OGI0MjcyMzIxNzNmMmY=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-09-14T19:36:58Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-09-14T19:36:58Z"}, "message": "resolve: Tweak some expected/found wording", "tree": {"sha": "dd5f93cfedc2dfb90f423f9833ed061731e08976", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd5f93cfedc2dfb90f423f9833ed061731e08976"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f6a5b29d197ba3f64007e51b948b427232173f2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f6a5b29d197ba3f64007e51b948b427232173f2f", "html_url": "https://github.com/rust-lang/rust/commit/f6a5b29d197ba3f64007e51b948b427232173f2f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f6a5b29d197ba3f64007e51b948b427232173f2f/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca3766e2e58f462a20922e42c821a37eaf0e13db", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca3766e2e58f462a20922e42c821a37eaf0e13db", "html_url": "https://github.com/rust-lang/rust/commit/ca3766e2e58f462a20922e42c821a37eaf0e13db"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "9096d14645100614e82c173f5dc67e6b6e8a192f", "filename": "src/librustc_resolve/macros.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Flibrustc_resolve%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Flibrustc_resolve%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fmacros.rs?ref=f6a5b29d197ba3f64007e51b948b427232173f2f", "patch": "@@ -237,7 +237,8 @@ impl<'a> base::Resolver for Resolver<'a> {\n                 if let Res::Def(..) = res {\n                     self.session.span_err(\n                         span,\n-                        \"expected an inert attribute, found an attribute macro\"\n+                        &format!(\"expected an inert attribute, found {} {}\",\n+                                 res.article(), res.descr()),\n                     );\n                     return Ok(InvocationRes::Single(self.dummy_ext(kind)));\n                 }\n@@ -322,7 +323,7 @@ impl<'a> Resolver<'a> {\n         self.check_stability_and_deprecation(&ext, path);\n \n         Ok(if ext.macro_kind() != kind {\n-            let expected = if kind == MacroKind::Attr { \"attribute\" } else  { kind.descr() };\n+            let expected = if kind == MacroKind::Attr { \"attribute\" } else { kind.descr() };\n             let msg = format!(\"expected {}, found {} `{}`\", expected, res.descr(), path);\n             self.session.struct_span_err(path.span, &msg)\n                         .span_label(path.span, format!(\"not {} {}\", kind.article(), expected))"}, {"sha": "6fa5f01ffd926c58a1efb69944c124bd8e3b2957", "filename": "src/test/ui/issues/issue-49934-errors.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.rs?ref=f6a5b29d197ba3f64007e51b948b427232173f2f", "patch": "@@ -1,10 +1,10 @@\n fn foo<#[derive(Debug)] T>() {\n //~^ ERROR `derive` may only be applied to structs, enums and unions\n-//~| ERROR expected an inert attribute, found an attribute macro\n+//~| ERROR expected an inert attribute, found a derive macro\n     match 0 {\n         #[derive(Debug)]\n         //~^ ERROR `derive` may only be applied to structs, enums and unions\n-        //~| ERROR expected an inert attribute, found an attribute macro\n+        //~| ERROR expected an inert attribute, found a derive macro\n         _ => (),\n     }\n }"}, {"sha": "8778d88d0ebec5185c8fcaacf806098b3cd6e500", "filename": "src/test/ui/issues/issue-49934-errors.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f6a5b29d197ba3f64007e51b948b427232173f2f/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-49934-errors.stderr?ref=f6a5b29d197ba3f64007e51b948b427232173f2f", "patch": "@@ -4,7 +4,7 @@ error: `derive` may only be applied to structs, enums and unions\n LL | fn foo<#[derive(Debug)] T>() {\n    |        ^^^^^^^^^^^^^^^^\n \n-error: expected an inert attribute, found an attribute macro\n+error: expected an inert attribute, found a derive macro\n   --> $DIR/issue-49934-errors.rs:1:17\n    |\n LL | fn foo<#[derive(Debug)] T>() {\n@@ -16,7 +16,7 @@ error: `derive` may only be applied to structs, enums and unions\n LL |         #[derive(Debug)]\n    |         ^^^^^^^^^^^^^^^^\n \n-error: expected an inert attribute, found an attribute macro\n+error: expected an inert attribute, found a derive macro\n   --> $DIR/issue-49934-errors.rs:5:18\n    |\n LL |         #[derive(Debug)]"}]}