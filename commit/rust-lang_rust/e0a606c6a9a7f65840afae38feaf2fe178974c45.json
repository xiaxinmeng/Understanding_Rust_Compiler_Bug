{"sha": "e0a606c6a9a7f65840afae38feaf2fe178974c45", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwYTYwNmM2YTlhN2Y2NTg0MGFmYWUzOGZlYWYyZmUxNzg5NzRjNDU=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-03T00:56:45Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-24T18:36:50Z"}, "message": "Add test for #34721", "tree": {"sha": "f1622f010e90683486e57b6f773c21bb5400327b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1622f010e90683486e57b6f773c21bb5400327b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0a606c6a9a7f65840afae38feaf2fe178974c45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0a606c6a9a7f65840afae38feaf2fe178974c45", "html_url": "https://github.com/rust-lang/rust/commit/e0a606c6a9a7f65840afae38feaf2fe178974c45", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0a606c6a9a7f65840afae38feaf2fe178974c45/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e9c8d7369ce2901d327ed2c1849417886ba7a86", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e9c8d7369ce2901d327ed2c1849417886ba7a86", "html_url": "https://github.com/rust-lang/rust/commit/5e9c8d7369ce2901d327ed2c1849417886ba7a86"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "226c21446b1ed5022795e7c8445e6cf09a4d2d75", "filename": "src/test/ui/issues/issue-34721.rs", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/e0a606c6a9a7f65840afae38feaf2fe178974c45/src%2Ftest%2Fui%2Fissues%2Fissue-34721.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0a606c6a9a7f65840afae38feaf2fe178974c45/src%2Ftest%2Fui%2Fissues%2Fissue-34721.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34721.rs?ref=e0a606c6a9a7f65840afae38feaf2fe178974c45", "patch": "@@ -0,0 +1,34 @@\n+#![feature(nll)]\n+\n+pub trait Foo {\n+    fn zero(self) -> Self;\n+}\n+\n+impl Foo for u32 {\n+    fn zero(self) -> u32 { 0u32 }\n+}\n+\n+pub mod bar {\n+    pub use Foo;\n+    pub fn bar<T: Foo>(x: T) -> T {\n+      x.zero()\n+    }\n+}\n+\n+mod baz {\n+    use bar;\n+    use Foo;\n+    pub fn baz<T: Foo>(x: T) -> T {\n+        if 0 == 1 {\n+            bar::bar(x.zero())\n+        } else {\n+            x.zero()\n+        };\n+        x.zero()\n+        //~^ ERROR use of moved value\n+    }\n+}\n+\n+fn main() {\n+    let _ = baz::baz(0u32);\n+}"}, {"sha": "b4e274b1c7019fee84eb2677e53faa7579b3c59e", "filename": "src/test/ui/issues/issue-34721.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/e0a606c6a9a7f65840afae38feaf2fe178974c45/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e0a606c6a9a7f65840afae38feaf2fe178974c45/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-34721.stderr?ref=e0a606c6a9a7f65840afae38feaf2fe178974c45", "patch": "@@ -0,0 +1,18 @@\n+error[E0382]: use of moved value: `x`\n+  --> $DIR/issue-34721.rs:27:9\n+   |\n+LL |     pub fn baz<T: Foo>(x: T) -> T {\n+   |                        - move occurs because `x` has type `T`, which does not implement the `Copy` trait\n+LL |         if 0 == 1 {\n+LL |             bar::bar(x.zero())\n+   |                      - value moved here\n+LL |         } else {\n+LL |             x.zero()\n+   |             - value moved here\n+LL |         };\n+LL |         x.zero()\n+   |         ^ value used here after move\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0382`."}]}