{"sha": "c5114549d74f6092517af6ea630ec5a26317ae93", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM1MTE0NTQ5ZDc0ZjYwOTI1MTdhZjZlYTYzMGVjNWEyNjMxN2FlOTM=", "commit": {"author": {"name": "Ding Xiang Fei", "email": "dingxiangfei2009@protonmail.ch", "date": "2020-07-31T10:04:13Z"}, "committer": {"name": "Ding Xiang Fei", "email": "dingxiangfei2009@protonmail.ch", "date": "2020-07-31T10:04:13Z"}, "message": "Add the proper tests", "tree": {"sha": "652d443946ed8a1f54fa341f146579dc16059212", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/652d443946ed8a1f54fa341f146579dc16059212"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c5114549d74f6092517af6ea630ec5a26317ae93", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE0u8S3YU336XkLsQOPNdIZH7vY1kFAl8j7KcACgkQPNdIZH7v\nY1mhkw//eo4JOzsyAtgVXJuaA0jcgK/Ii1Gt6RBZQim4+Yb5fXm2NUazCulxOSTe\n5tefDmFTPumXpO87q3yX6zhdus7FBU8MNwnC9tSnoSarZZELkF7VVGgKtE7zPoEF\nSYcnBevHeirkSHVPCBCxV+83toYpFATkCKKw028MIGQjcWmwBRblwSIoWeBXVw3K\nagIUbNwgp1YCznrQT5iLduS5sp2wLonWXZOcPvqZ4ZtD5mcq1fO0CnqcX5o/6RIM\nlgwcKzAfFHUMslNfGvUO5IwrMzAO2XZtIdADXCEl5kLxBqc7dHZARAmWY+y9839V\n2wNBddwa0gSAfKxQyifjw/rB3UNU5TXTulazubfNr3GGDyyiTo9TDT6+wrL1Swsa\ncbWmRrJVYnLoxjxW0YR9AB4oq5U6ZKZxXW5zVQ+Tux9AWMkeaJOIaeGyuFAbG4BF\nHwZjv7LRxjqVD+TC0yGnGvMG7J7TWVz0WYbX8fGQrTvB55hl1U3xSMvrI37ITuVP\nZ5ZznXtCEkZQ5A0ypdoEtQOkydtGt4gRtin6M2YU4ZoU/iuMbjK38qBJqfBZr8NS\nWgwuNFiT1v5ibfioMOmEr2wsuijRE+dgEL+4XLzbBUpErUaRXXh8lhMo1fofOP7X\nEPxWkPgQSJc6WfFkc7dxNk8IGOV4jS7lnCNKLqVHrZpCW7mp0ao=\n=YRdW\n-----END PGP SIGNATURE-----", "payload": "tree 652d443946ed8a1f54fa341f146579dc16059212\nparent 4631579b000b006ed3eba7d3f80bbfece02579bc\nauthor Ding Xiang Fei <dingxiangfei2009@protonmail.ch> 1596189853 +0800\ncommitter Ding Xiang Fei <dingxiangfei2009@protonmail.ch> 1596189853 +0800\n\nAdd the proper tests\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c5114549d74f6092517af6ea630ec5a26317ae93", "html_url": "https://github.com/rust-lang/rust/commit/c5114549d74f6092517af6ea630ec5a26317ae93", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c5114549d74f6092517af6ea630ec5a26317ae93/comments", "author": {"login": "dingxiangfei2009", "id": 6884440, "node_id": "MDQ6VXNlcjY4ODQ0NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6884440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingxiangfei2009", "html_url": "https://github.com/dingxiangfei2009", "followers_url": "https://api.github.com/users/dingxiangfei2009/followers", "following_url": "https://api.github.com/users/dingxiangfei2009/following{/other_user}", "gists_url": "https://api.github.com/users/dingxiangfei2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingxiangfei2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingxiangfei2009/subscriptions", "organizations_url": "https://api.github.com/users/dingxiangfei2009/orgs", "repos_url": "https://api.github.com/users/dingxiangfei2009/repos", "events_url": "https://api.github.com/users/dingxiangfei2009/events{/privacy}", "received_events_url": "https://api.github.com/users/dingxiangfei2009/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dingxiangfei2009", "id": 6884440, "node_id": "MDQ6VXNlcjY4ODQ0NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6884440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingxiangfei2009", "html_url": "https://github.com/dingxiangfei2009", "followers_url": "https://api.github.com/users/dingxiangfei2009/followers", "following_url": "https://api.github.com/users/dingxiangfei2009/following{/other_user}", "gists_url": "https://api.github.com/users/dingxiangfei2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingxiangfei2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingxiangfei2009/subscriptions", "organizations_url": "https://api.github.com/users/dingxiangfei2009/orgs", "repos_url": "https://api.github.com/users/dingxiangfei2009/repos", "events_url": "https://api.github.com/users/dingxiangfei2009/events{/privacy}", "received_events_url": "https://api.github.com/users/dingxiangfei2009/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4631579b000b006ed3eba7d3f80bbfece02579bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/4631579b000b006ed3eba7d3f80bbfece02579bc", "html_url": "https://github.com/rust-lang/rust/commit/4631579b000b006ed3eba7d3f80bbfece02579bc"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "bd8910bdb3f3f9af69c5b60cc87b023f28f53561", "filename": "src/test/ui/statics/static-promotion.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c5114549d74f6092517af6ea630ec5a26317ae93/src%2Ftest%2Fui%2Fstatics%2Fstatic-promotion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c5114549d74f6092517af6ea630ec5a26317ae93/src%2Ftest%2Fui%2Fstatics%2Fstatic-promotion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatics%2Fstatic-promotion.rs?ref=c5114549d74f6092517af6ea630ec5a26317ae93", "patch": "@@ -12,12 +12,23 @@ struct A<T: 'static>(&'static T);\n struct B<T: 'static + ?Sized> {\n     x: &'static T,\n }\n+static STR: &'static [u8] = b\"hi\";\n static C: A<B<B<[u8]>>> = {\n     A(&B {\n-        x: &B { x: b\"hi\" as &[u8] },\n+        x: &B { x: STR },\n     })\n };\n \n+pub struct Slice(&'static [i32]);\n+\n+static CONTENT: i32 = 42;\n+pub static CONTENT_MAP: Slice = Slice(&[CONTENT]);\n+\n+pub static FOO: (i32, i32) = (42, 43);\n+pub static CONTENT_MAP2: Slice = Slice(&[FOO.0]);\n+\n fn main() {\n     assert_eq!(b\"hi\", C.0.x.x);\n+    assert_eq!(&[42], CONTENT_MAP.0);\n+    assert_eq!(&[42], CONTENT_MAP2.0);\n }"}]}