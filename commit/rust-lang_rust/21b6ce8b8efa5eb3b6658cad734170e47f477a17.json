{"sha": "21b6ce8b8efa5eb3b6658cad734170e47f477a17", "node_id": "C_kwDOAAsO6NoAKDIxYjZjZThiOGVmYTVlYjNiNjY1OGNhZDczNDE3MGU0N2Y0NzdhMTc", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-05-17T14:02:07Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-05-17T14:02:07Z"}, "message": "Bump extension version", "tree": {"sha": "473eef7a81fa79f0044478cf01fd008fe4c26acd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/473eef7a81fa79f0044478cf01fd008fe4c26acd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/21b6ce8b8efa5eb3b6658cad734170e47f477a17", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/21b6ce8b8efa5eb3b6658cad734170e47f477a17", "html_url": "https://github.com/rust-lang/rust/commit/21b6ce8b8efa5eb3b6658cad734170e47f477a17", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/21b6ce8b8efa5eb3b6658cad734170e47f477a17/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5c442eee107ba3830b3c589090d158d63555976", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5c442eee107ba3830b3c589090d158d63555976", "html_url": "https://github.com/rust-lang/rust/commit/c5c442eee107ba3830b3c589090d158d63555976"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "04006d74345bc608b3f745d873aceba4cbb94987", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/21b6ce8b8efa5eb3b6658cad734170e47f477a17/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/21b6ce8b8efa5eb3b6658cad734170e47f477a17/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=21b6ce8b8efa5eb3b6658cad734170e47f477a17", "patch": "@@ -4,7 +4,7 @@\n     \"description\": \"Rust language support for Visual Studio Code\",\n     \"private\": true,\n     \"icon\": \"icon.png\",\n-    \"version\": \"0.4.0-dev\",\n+    \"version\": \"0.5.0-dev\",\n     \"releaseTag\": null,\n     \"publisher\": \"rust-lang\",\n     \"repository\": {"}, {"sha": "2ea452377eed5bcbd5680394c8bc2ca05e5be37e", "filename": "xtask/src/dist.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/21b6ce8b8efa5eb3b6658cad734170e47f477a17/xtask%2Fsrc%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21b6ce8b8efa5eb3b6658cad734170e47f477a17/xtask%2Fsrc%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fdist.rs?ref=21b6ce8b8efa5eb3b6658cad734170e47f477a17", "patch": "@@ -10,6 +10,10 @@ use xshell::{cmd, Shell};\n \n use crate::{date_iso, flags, project_root};\n \n+const VERSION_STABLE: &str = \"0.3\";\n+const VERSION_NIGHTLY: &str = \"0.4\";\n+const VERSION_DEV: &str = \"0.5\"; // keep this one in sync with `package.json`\n+\n impl flags::Dist {\n     pub(crate) fn run(self, sh: &Shell) -> anyhow::Result<()> {\n         let stable = sh.var(\"GITHUB_REF\").unwrap_or_default().as_str() == \"refs/heads/release\";\n@@ -25,10 +29,10 @@ impl flags::Dist {\n \n         if let Some(patch_version) = self.client_patch_version {\n             let version = if stable {\n-                format!(\"0.2.{}\", patch_version)\n+                format!(\"{}.{}\", VERSION_STABLE, patch_version)\n             } else {\n                 // A hack to make VS Code prefer nightly over stable.\n-                format!(\"0.3.{}\", patch_version)\n+                format!(\"{}.{}\", VERSION_NIGHTLY, patch_version)\n             };\n             let release_tag = if stable { date_iso(sh)? } else { \"nightly\".to_string() };\n             dist_client(sh, &version, &release_tag, &target)?;\n@@ -54,7 +58,10 @@ fn dist_client(\n \n     let mut patch = Patch::new(sh, \"./package.json\")?;\n     patch\n-        .replace(r#\"\"version\": \"0.4.0-dev\"\"#, &format!(r#\"\"version\": \"{}\"\"#, version))\n+        .replace(\n+            &format!(r#\"\"version\": \"{}.0-dev\"\"#, VERSION_DEV),\n+            &format!(r#\"\"version\": \"{}\"\"#, version),\n+        )\n         .replace(r#\"\"releaseTag\": null\"#, &format!(r#\"\"releaseTag\": \"{}\"\"#, release_tag))\n         .replace(r#\"\"$generated-start\": {},\"#, \"\")\n         .replace(\",\\n                \\\"$generated-end\\\": {}\", \"\")"}]}