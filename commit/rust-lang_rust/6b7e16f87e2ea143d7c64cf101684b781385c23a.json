{"sha": "6b7e16f87e2ea143d7c64cf101684b781385c23a", "node_id": "C_kwDOAAsO6NoAKDZiN2UxNmY4N2UyZWExNDNkN2M2NGNmMTAxNjg0Yjc4MTM4NWMyM2E", "commit": {"author": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2022-09-30T21:45:53Z"}, "committer": {"name": "Antoni Boucher", "email": "bouanto@zoho.com", "date": "2022-10-01T16:31:39Z"}, "message": "Add more debugging options", "tree": {"sha": "9f219493e9e21e32f9fd7d6b56ac8e2e64237a9a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f219493e9e21e32f9fd7d6b56ac8e2e64237a9a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b7e16f87e2ea143d7c64cf101684b781385c23a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b7e16f87e2ea143d7c64cf101684b781385c23a", "html_url": "https://github.com/rust-lang/rust/commit/6b7e16f87e2ea143d7c64cf101684b781385c23a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b7e16f87e2ea143d7c64cf101684b781385c23a/comments", "author": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed570f6678dbb9994dee0fd42b1432d86dbcc1a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed570f6678dbb9994dee0fd42b1432d86dbcc1a2", "html_url": "https://github.com/rust-lang/rust/commit/ed570f6678dbb9994dee0fd42b1432d86dbcc1a2"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "5f54ac4ebc69a63c5e372f3b23f73e0587f04901", "filename": "src/back/write.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6b7e16f87e2ea143d7c64cf101684b781385c23a/src%2Fback%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b7e16f87e2ea143d7c64cf101684b781385c23a/src%2Fback%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fback%2Fwrite.rs?ref=6b7e16f87e2ea143d7c64cf101684b781385c23a", "patch": "@@ -57,6 +57,7 @@ pub(crate) unsafe fn codegen(cgcx: &CodegenContext<GccCodegenBackend>, _diag_han\n                 if env::var(\"CG_GCCJIT_DUMP_TO_FILE\").as_deref() == Ok(\"1\") {\n                     let _ = fs::create_dir(\"/tmp/gccjit_dumps\");\n                     let path = &format!(\"/tmp/gccjit_dumps/{}.c\", module.name);\n+                    context.set_debug_info(true);\n                     context.dump_to_file(path, true);\n                 }\n                 context.compile_to_file(OutputKind::ObjectFile, obj_out.to_str().expect(\"path to str\"));"}, {"sha": "b60382496c2a528ae18e816e5c86b962a1ed4def", "filename": "src/base.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6b7e16f87e2ea143d7c64cf101684b781385c23a/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b7e16f87e2ea143d7c64cf101684b781385c23a/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=6b7e16f87e2ea143d7c64cf101684b781385c23a", "patch": "@@ -126,6 +126,9 @@ pub fn compile_codegen_unit<'tcx>(tcx: TyCtxt<'tcx>, cgu_name: Symbol, supports_\n             context.add_command_line_option(\"-fdata-sections\");\n         }\n \n+        if env::var(\"CG_GCCJIT_DUMP_TREE_ALL\").as_deref() == Ok(\"1\") {\n+            context.add_command_line_option(\"-fdump-tree-all\");\n+        }\n         if env::var(\"CG_GCCJIT_DUMP_CODE\").as_deref() == Ok(\"1\") {\n             context.set_dump_code_on_compile(true);\n         }"}]}