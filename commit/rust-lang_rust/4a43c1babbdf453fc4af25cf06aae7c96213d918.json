{"sha": "4a43c1babbdf453fc4af25cf06aae7c96213d918", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhNDNjMWJhYmJkZjQ1M2ZjNGFmMjVjZjA2YWFlN2M5NjIxM2Q5MTg=", "commit": {"author": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2013-05-06T15:32:34Z"}, "committer": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2013-05-06T15:33:54Z"}, "message": "testsuite: tests for deriving changes and additions", "tree": {"sha": "7179974e151a23d70944ebaf92283c4b09ec58b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7179974e151a23d70944ebaf92283c4b09ec58b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a43c1babbdf453fc4af25cf06aae7c96213d918", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a43c1babbdf453fc4af25cf06aae7c96213d918", "html_url": "https://github.com/rust-lang/rust/commit/4a43c1babbdf453fc4af25cf06aae7c96213d918", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a43c1babbdf453fc4af25cf06aae7c96213d918/comments", "author": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e1d6c2c8011f466d2a524231e5386df0b5ed841", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e1d6c2c8011f466d2a524231e5386df0b5ed841", "html_url": "https://github.com/rust-lang/rust/commit/5e1d6c2c8011f466d2a524231e5386df0b5ed841"}], "stats": {"total": 147, "additions": 147, "deletions": 0}, "files": [{"sha": "290dc02dcdb28ee578c4f8a2217c6a9c9a87ceec", "filename": "src/test/run-pass/deriving-rand.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-rand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-rand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-rand.rs?ref=4a43c1babbdf453fc4af25cf06aae7c96213d918", "patch": "@@ -0,0 +1,38 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[deriving(Rand)]\n+struct A;\n+\n+#[deriving(Rand)]\n+struct B(int, int);\n+\n+#[deriving(Rand)]\n+struct C {\n+    x: f64,\n+    y: (u8, u8)\n+}\n+\n+#[deriving(Rand)]\n+enum D {\n+    D0,\n+    D1(uint),\n+    D2 { x: (), y: () }\n+}\n+\n+fn main() {\n+    // check there's no segfaults\n+    for 20.times {\n+        rand::random::<A>();\n+        rand::random::<B>();\n+        rand::random::<C>();\n+        rand::random::<D>();\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "b0b03d8419b8c68d1240b25c381c43cbccee268a", "filename": "src/test/run-pass/deriving-self-lifetime-totalord-totaleq.rs", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime-totalord-totaleq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime-totalord-totaleq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime-totalord-totaleq.rs?ref=4a43c1babbdf453fc4af25cf06aae7c96213d918", "patch": "@@ -0,0 +1,32 @@\n+// xfail-test FIXME #6257\n+\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+use core::cmp::{Less,Equal,Greater};\n+\n+#[deriving(TotalEq,TotalOrd)]\n+struct A<'self> {\n+    x: &'self int\n+}\n+\n+fn main() {\n+    let a = A { x: &1 }, b = A { x: &2 };\n+\n+    assert!(a.equals(&a));\n+    assert!(b.equals(&b));\n+\n+\n+    assert_eq!(a.cmp(&a), Equal);\n+    assert_eq!(b.cmp(&b), Equal);\n+\n+    assert_eq!(a.cmp(&b), Less);\n+    assert_eq!(b.cmp(&a), Greater);\n+}"}, {"sha": "549a9b398a219a93e5e70dab4fcd37049534cfaf", "filename": "src/test/run-pass/deriving-self-lifetime.rs", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-self-lifetime.rs?ref=4a43c1babbdf453fc4af25cf06aae7c96213d918", "patch": "@@ -0,0 +1,33 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[deriving(Eq,Ord)]\n+struct A<'self> {\n+    x: &'self int\n+}\n+\n+fn main() {\n+    let a = A { x: &1 }, b = A { x: &2 };\n+\n+    assert_eq!(a, a);\n+    assert_eq!(b, b);\n+\n+\n+    assert!(a < b);\n+    assert!(b > a);\n+\n+    assert!(a <= b);\n+    assert!(a <= a);\n+    assert!(b <= b);\n+\n+    assert!(b >= a);\n+    assert!(b >= b);\n+    assert!(a >= a);\n+}"}, {"sha": "10f6bcbeff767bb6cdbe55cfd44fee4bbbd98095", "filename": "src/test/run-pass/deriving-to-str.rs", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-to-str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a43c1babbdf453fc4af25cf06aae7c96213d918/src%2Ftest%2Frun-pass%2Fderiving-to-str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fderiving-to-str.rs?ref=4a43c1babbdf453fc4af25cf06aae7c96213d918", "patch": "@@ -0,0 +1,44 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[deriving(Rand,ToStr)]\n+struct A;\n+\n+#[deriving(Rand,ToStr)]\n+struct B(int, int);\n+\n+#[deriving(Rand,ToStr)]\n+struct C {\n+    x: f64,\n+    y: (u8, u8)\n+}\n+\n+#[deriving(Rand,ToStr)]\n+enum D {\n+    D0,\n+    D1(uint),\n+    D2 { x: (), y: () }\n+}\n+\n+fn main() {\n+    macro_rules! t(\n+        ($ty:ty) => {{\n+            let x =rand::random::<$ty>();\n+            assert_eq!(x.to_str(), fmt!(\"%?\", x));\n+        }}\n+    );\n+\n+    for 20.times {\n+        t!(A);\n+        t!(B);\n+        t!(C);\n+        t!(D);\n+    }\n+}\n\\ No newline at end of file"}]}