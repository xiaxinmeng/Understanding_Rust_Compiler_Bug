{"sha": "8e3b89140e621c5f7450bd5a023fbad65fedfa3c", "node_id": "C_kwDOAAsO6NoAKDhlM2I4OTE0MGU2MjFjNWY3NDUwYmQ1YTAyM2ZiYWQ2NWZlZGZhM2M", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-10-20T09:34:40Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-10-20T09:35:12Z"}, "message": "Add GUI tests for collapse/expand actions", "tree": {"sha": "3720ea4d60e0273bc52fa531a837159c43cf41ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3720ea4d60e0273bc52fa531a837159c43cf41ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e3b89140e621c5f7450bd5a023fbad65fedfa3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e3b89140e621c5f7450bd5a023fbad65fedfa3c", "html_url": "https://github.com/rust-lang/rust/commit/8e3b89140e621c5f7450bd5a023fbad65fedfa3c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e3b89140e621c5f7450bd5a023fbad65fedfa3c/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d3c37b1dfa62f8de2690e09c8e31ac8fbbd0dd2e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d3c37b1dfa62f8de2690e09c8e31ac8fbbd0dd2e", "html_url": "https://github.com/rust-lang/rust/commit/d3c37b1dfa62f8de2690e09c8e31ac8fbbd0dd2e"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "9068680d640c18ea111b95a011d901570bc9c998", "filename": "src/test/rustdoc-gui/shortcuts.goml", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/8e3b89140e621c5f7450bd5a023fbad65fedfa3c/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8e3b89140e621c5f7450bd5a023fbad65fedfa3c/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml?ref=8e3b89140e621c5f7450bd5a023fbad65fedfa3c", "patch": "@@ -11,3 +11,21 @@ press-key: \"?\"\n assert-css: (\"#help-button .popover\", {\"display\": \"block\"})\n press-key: \"Escape\"\n assert-css: (\"#help-button .popover\", {\"display\": \"none\"})\n+// Checking doc collapse and expand.\n+// It should be displaying a \"-\":\n+assert-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+press-key: \"-\"\n+wait-for-text: (\"#toggle-all-docs\", \"[+]\")\n+assert-attribute: (\"#toggle-all-docs\", {\"class\": \"will-expand\"})\n+// Pressing it again shouldn't do anything.\n+press-key: \"-\"\n+assert-text: (\"#toggle-all-docs\", \"[+]\")\n+assert-attribute: (\"#toggle-all-docs\", {\"class\": \"will-expand\"})\n+// Expanding now.\n+press-key: \"+\"\n+wait-for-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+assert-attribute: (\"#toggle-all-docs\", {\"class\": \"\"})\n+// Pressing it again shouldn't do anything.\n+press-key: \"+\"\n+assert-text: (\"#toggle-all-docs\", \"[\\u2212]\")\n+assert-attribute: (\"#toggle-all-docs\", {\"class\": \"\"})"}]}