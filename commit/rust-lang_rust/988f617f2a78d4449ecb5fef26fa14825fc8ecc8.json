{"sha": "988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4OGY2MTdmMmE3OGQ0NDQ5ZWNiNWZlZjI2ZmExNDgyNWZjOGVjYzg=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-07-27T10:52:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-27T10:52:47Z"}, "message": "Rollup merge of #87446 - devnexen:macos_update, r=dtolnay\n\nmacos current_exe using directly libc instead.", "tree": {"sha": "2d536e2e4413d90dc63efa8ba45f1e96583a469b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2d536e2e4413d90dc63efa8ba45f1e96583a469b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg/+V/CRBK7hj4Ov3rIwAAMOMIAAhvC/3L4fR/P/2I+kWmNpnq\nxIXK5zG+7up5y+C4kzT/8Qjy1TDP/Y7oBXWfEWRUn0sYhwk8aquBFhOERZ4Jbsv7\nVFDNsBEFhPTFmTspyQ/nS2nLRuCPodErEsD8miQR7SRpO7u2IrZNfizWcmYBC7mJ\nXUrxEokilU1Yn9QFekCpuBpLgBtvJ7pvOsMgDmnBeWv/ZCDjCFaXqlaF7kyrOmG0\n2hoT37PKRtlnCozIVLeGTpZKXLEoVeStMIUT6qXs8+6vagNtp8hbXYiE0CtUulrs\nmkiT9aEUm/sLHom54CW29K/12RT42XhcQjJehWLqeHBJ5YmR/6Qx2Bq+se2rdc4=\n=NTxm\n-----END PGP SIGNATURE-----\n", "payload": "tree 2d536e2e4413d90dc63efa8ba45f1e96583a469b\nparent d25439481cd442dec4991f5bd0082c8b71004889\nparent 5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0\nauthor Yuki Okushi <jtitor@2k36.org> 1627383167 +0900\ncommitter GitHub <noreply@github.com> 1627383167 +0900\n\nRollup merge of #87446 - devnexen:macos_update, r=dtolnay\n\nmacos current_exe using directly libc instead.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "html_url": "https://github.com/rust-lang/rust/commit/988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d25439481cd442dec4991f5bd0082c8b71004889", "url": "https://api.github.com/repos/rust-lang/rust/commits/d25439481cd442dec4991f5bd0082c8b71004889", "html_url": "https://github.com/rust-lang/rust/commit/d25439481cd442dec4991f5bd0082c8b71004889"}, {"sha": "5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "url": "https://api.github.com/repos/rust-lang/rust/commits/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0", "html_url": "https://github.com/rust-lang/rust/commit/5407b42cd87c3f42e46e9ed9cfeb5a8a390d2bc0"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "673e609fa6f4802bbcc5ef5f8df559de8a21d534", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "patch": "@@ -1880,9 +1880,9 @@ checksum = \"830d08ce1d1d941e6b30645f1a0eb5643013d835ce3779a5fc208261dbe10f55\"\n \n [[package]]\n name = \"libc\"\n-version = \"0.2.93\"\n+version = \"0.2.98\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9385f66bf6105b241aa65a61cb923ef20efc665cb9f9bb50ac2f0c4b7f378d41\"\n+checksum = \"320cfe77175da3a483efed4bc0adc1968ca050b098ce4f2f1c13a56626128790\"\n dependencies = [\n  \"rustc-std-workspace-core\",\n ]"}, {"sha": "8494563bcd977b902b93d03b011a64c68de2dd79", "filename": "library/std/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/library%2Fstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/library%2Fstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2FCargo.toml?ref=988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "patch": "@@ -16,7 +16,7 @@ cfg-if = { version = \"0.1.8\", features = ['rustc-dep-of-std'] }\n panic_unwind = { path = \"../panic_unwind\", optional = true }\n panic_abort = { path = \"../panic_abort\" }\n core = { path = \"../core\" }\n-libc = { version = \"0.2.93\", default-features = false, features = ['rustc-dep-of-std'] }\n+libc = { version = \"0.2.98\", default-features = false, features = ['rustc-dep-of-std'] }\n compiler_builtins = { version = \"0.1.44\" }\n profiler_builtins = { path = \"../profiler_builtins\", optional = true }\n unwind = { path = \"../unwind\" }"}, {"sha": "cc0802ed709cb6c87ef8edd8380f2f29cc029946", "filename": "library/std/src/sys/unix/os.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/988f617f2a78d4449ecb5fef26fa14825fc8ecc8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fos.rs?ref=988f617f2a78d4449ecb5fef26fa14825fc8ecc8", "patch": "@@ -350,17 +350,14 @@ pub fn current_exe() -> io::Result<PathBuf> {\n \n #[cfg(any(target_os = \"macos\", target_os = \"ios\"))]\n pub fn current_exe() -> io::Result<PathBuf> {\n-    extern \"C\" {\n-        fn _NSGetExecutablePath(buf: *mut libc::c_char, bufsize: *mut u32) -> libc::c_int;\n-    }\n     unsafe {\n         let mut sz: u32 = 0;\n-        _NSGetExecutablePath(ptr::null_mut(), &mut sz);\n+        libc::_NSGetExecutablePath(ptr::null_mut(), &mut sz);\n         if sz == 0 {\n             return Err(io::Error::last_os_error());\n         }\n         let mut v: Vec<u8> = Vec::with_capacity(sz as usize);\n-        let err = _NSGetExecutablePath(v.as_mut_ptr() as *mut i8, &mut sz);\n+        let err = libc::_NSGetExecutablePath(v.as_mut_ptr() as *mut i8, &mut sz);\n         if err != 0 {\n             return Err(io::Error::last_os_error());\n         }"}]}