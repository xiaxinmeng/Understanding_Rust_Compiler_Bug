{"sha": "60ba253753732080c90e97d2d34f43b71856a7c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwYmEyNTM3NTM3MzIwODBjOTBlOTdkMmQzNGY0M2I3MTg1NmE3YzQ=", "commit": {"author": {"name": "Ryan Cumming", "email": "etaoins@gmail.com", "date": "2019-06-29T20:56:46Z"}, "committer": {"name": "Ryan Cumming", "email": "etaoins@gmail.com", "date": "2019-06-29T21:12:42Z"}, "message": "Run VS Code tests on CI\n\nThis is actually much faster than I expected; it takes about 13 seconds\nto download VS Code and run the unit tests. This means the VS Code tests\nare still significantly faster than the Rust ones.\n\nIf this ends up being unreliable we can always remove it later or move\nit to a separate optional job.\n\nWe also need to ignore the `.vscode-test` directory when running\n`prettier` or it will get upset about some temporary JSON files VS Code\ncreates.", "tree": {"sha": "e1153f2fb7ce9a35ee9e13cb420beff298af6e43", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1153f2fb7ce9a35ee9e13cb420beff298af6e43"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/60ba253753732080c90e97d2d34f43b71856a7c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/60ba253753732080c90e97d2d34f43b71856a7c4", "html_url": "https://github.com/rust-lang/rust/commit/60ba253753732080c90e97d2d34f43b71856a7c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/60ba253753732080c90e97d2d34f43b71856a7c4/comments", "author": {"login": "etaoins", "id": 687534, "node_id": "MDQ6VXNlcjY4NzUzNA==", "avatar_url": "https://avatars.githubusercontent.com/u/687534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/etaoins", "html_url": "https://github.com/etaoins", "followers_url": "https://api.github.com/users/etaoins/followers", "following_url": "https://api.github.com/users/etaoins/following{/other_user}", "gists_url": "https://api.github.com/users/etaoins/gists{/gist_id}", "starred_url": "https://api.github.com/users/etaoins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/etaoins/subscriptions", "organizations_url": "https://api.github.com/users/etaoins/orgs", "repos_url": "https://api.github.com/users/etaoins/repos", "events_url": "https://api.github.com/users/etaoins/events{/privacy}", "received_events_url": "https://api.github.com/users/etaoins/received_events", "type": "User", "site_admin": false}, "committer": {"login": "etaoins", "id": 687534, "node_id": "MDQ6VXNlcjY4NzUzNA==", "avatar_url": "https://avatars.githubusercontent.com/u/687534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/etaoins", "html_url": "https://github.com/etaoins", "followers_url": "https://api.github.com/users/etaoins/followers", "following_url": "https://api.github.com/users/etaoins/following{/other_user}", "gists_url": "https://api.github.com/users/etaoins/gists{/gist_id}", "starred_url": "https://api.github.com/users/etaoins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/etaoins/subscriptions", "organizations_url": "https://api.github.com/users/etaoins/orgs", "repos_url": "https://api.github.com/users/etaoins/repos", "events_url": "https://api.github.com/users/etaoins/events{/privacy}", "received_events_url": "https://api.github.com/users/etaoins/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "27df89f47d5f0a6e8e62d517d98dda854efabc34", "url": "https://api.github.com/repos/rust-lang/rust/commits/27df89f47d5f0a6e8e62d517d98dda854efabc34", "html_url": "https://github.com/rust-lang/rust/commit/27df89f47d5f0a6e8e62d517d98dda854efabc34"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "e5960ebca4ee12b70e7dc4cac1744e3fb1f07045", "filename": ".travis.yml", "status": "modified", "additions": 18, "deletions": 5, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/60ba253753732080c90e97d2d34f43b71856a7c4/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/60ba253753732080c90e97d2d34f43b71856a7c4/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=60ba253753732080c90e97d2d34f43b71856a7c4", "patch": "@@ -6,7 +6,8 @@ before_cache:\n \n matrix:\n     include:\n-        - os: linux\n+        - name: \"Rust Tests\"\n+          os: linux\n           dist: xenial\n           language: rust\n           rust: stable\n@@ -18,7 +19,8 @@ matrix:\n           env:\n               - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n \n-        - os: linux\n+        - name: \"Rust Docs\"\n+          os: linux\n           if: branch = master AND type = push\n           before_script:\n               - DEPLOY_DOCS=1\n@@ -29,11 +31,22 @@ matrix:\n           env:\n               - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n \n-        - language: node_js\n+        - name: \"VS Code Tests\"\n+          os: linux\n+          language: node_js\n+          dist: xenial\n           node_js: node\n-          before_script: false\n+          services:\n+            - xvfb\n+          before_install: cd editors/code\n+          install:\n+            - npm install\n+            - npm run vscode:prepublish\n           script:\n-              - cd editors/code && npm ci && npm run travis\n+            - npm ci\n+            - npm run travis\n+          env:\n+            - CXX=\"g++-4.9\", CC=\"gcc-4.9\"\n \n branches:\n     only:"}, {"sha": "3798f2d1f4789b49d03402ce4d26a4a3feeef0cc", "filename": "editors/code/.prettierignore", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/60ba253753732080c90e97d2d34f43b71856a7c4/editors%2Fcode%2F.prettierignore", "raw_url": "https://github.com/rust-lang/rust/raw/60ba253753732080c90e97d2d34f43b71856a7c4/editors%2Fcode%2F.prettierignore", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2F.prettierignore?ref=60ba253753732080c90e97d2d34f43b71856a7c4", "patch": "@@ -0,0 +1,2 @@\n+node_modules/\n+.vscode-test/"}, {"sha": "52972031d1fe99d9d4ac3613dc6393c9bf42c7b9", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/60ba253753732080c90e97d2d34f43b71856a7c4/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/60ba253753732080c90e97d2d34f43b71856a7c4/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=60ba253753732080c90e97d2d34f43b71856a7c4", "patch": "@@ -25,7 +25,7 @@\n         \"lint\": \"tslint --project .\",\n         \"test\": \"node node_modules/vscode/bin/test\",\n         \"prettier\": \"prettier **/*.{json,ts}\",\n-        \"travis\": \"npm run compile && npm run lint && npm run prettier -- --list-different\"\n+        \"travis\": \"npm run compile && npm run test && npm run lint && npm run prettier -- --list-different\"\n     },\n     \"prettier\": {\n         \"tabWidth\": 4,"}]}