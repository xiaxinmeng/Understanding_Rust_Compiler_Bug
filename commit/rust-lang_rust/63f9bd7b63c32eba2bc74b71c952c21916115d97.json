{"sha": "63f9bd7b63c32eba2bc74b71c952c21916115d97", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzZjliZDdiNjNjMzJlYmEyYmM3NGI3MWM5NTJjMjE5MTYxMTVkOTc=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-07-02T23:12:10Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-07-02T23:12:10Z"}, "message": "Trace mark and sever steps in GC.", "tree": {"sha": "94ff4374aa8ff7634e5a4d0b1f37bff0f8553770", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/94ff4374aa8ff7634e5a4d0b1f37bff0f8553770"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63f9bd7b63c32eba2bc74b71c952c21916115d97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63f9bd7b63c32eba2bc74b71c952c21916115d97", "html_url": "https://github.com/rust-lang/rust/commit/63f9bd7b63c32eba2bc74b71c952c21916115d97", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63f9bd7b63c32eba2bc74b71c952c21916115d97/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1d3e9697ada3e745eae0f18a586f51eb9d19ff5", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1d3e9697ada3e745eae0f18a586f51eb9d19ff5", "html_url": "https://github.com/rust-lang/rust/commit/b1d3e9697ada3e745eae0f18a586f51eb9d19ff5"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "0d9c281bfd4caa359b15ff3de2b0b449ef951e19", "filename": "src/boot/me/trans.ml", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/63f9bd7b63c32eba2bc74b71c952c21916115d97/src%2Fboot%2Fme%2Ftrans.ml", "raw_url": "https://github.com/rust-lang/rust/raw/63f9bd7b63c32eba2bc74b71c952c21916115d97/src%2Fboot%2Fme%2Ftrans.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Fme%2Ftrans.ml?ref=63f9bd7b63c32eba2bc74b71c952c21916115d97", "patch": "@@ -1640,7 +1640,9 @@ let trans_visitor\n     let inner _ (args:Il.cell) =\n       let ty_params = deref (get_element_ptr args 0) in\n       let cell = get_element_ptr args 1 in\n-        sever_ty ty_params (deref cell) ty curr_iso\n+        note_gc_step ty \"in sever-glue, severing\";\n+        sever_ty ty_params (deref cell) ty curr_iso;\n+        note_gc_step ty \"in sever-glue complete\";\n     in\n     let ty_params_ptr = ty_params_covering ty in\n     let fty = mk_simple_ty_fn [| ty_params_ptr; alias_slot ty |] in\n@@ -1655,7 +1657,9 @@ let trans_visitor\n     let inner _ (args:Il.cell) =\n       let ty_params = deref (get_element_ptr args 0) in\n       let cell = get_element_ptr args 1 in\n-        mark_ty ty_params (deref cell) ty curr_iso\n+        note_gc_step ty \"in mark-glue, marking\";\n+        mark_ty ty_params (deref cell) ty curr_iso;\n+        note_gc_step ty \"mark-glue complete\";\n     in\n     let ty_params_ptr = ty_params_covering ty in\n     let fty = mk_simple_ty_fn [| ty_params_ptr; alias_slot ty |] in"}]}