{"sha": "063d5e9d8bdf9f0b26817265ca90e246bb20e379", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA2M2Q1ZTlkOGJkZjlmMGIyNjgxNzI2NWNhOTBlMjQ2YmIyMGUzNzk=", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2020-09-27T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2020-09-27T21:55:53Z"}, "message": "liveness: Test interaction with automatically_derived attribute", "tree": {"sha": "37560ca69ad0d788d71092cd194106b2ac3c64de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37560ca69ad0d788d71092cd194106b2ac3c64de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/063d5e9d8bdf9f0b26817265ca90e246bb20e379", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/063d5e9d8bdf9f0b26817265ca90e246bb20e379", "html_url": "https://github.com/rust-lang/rust/commit/063d5e9d8bdf9f0b26817265ca90e246bb20e379", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/063d5e9d8bdf9f0b26817265ca90e246bb20e379/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "33dde94d33f4200f1931d3ad0a28d798f807f27c", "url": "https://api.github.com/repos/rust-lang/rust/commits/33dde94d33f4200f1931d3ad0a28d798f807f27c", "html_url": "https://github.com/rust-lang/rust/commit/33dde94d33f4200f1931d3ad0a28d798f807f27c"}], "stats": {"total": 53, "additions": 53, "deletions": 0}, "files": [{"sha": "66d0b7090ffb59830a18b11174d8752788c57a60", "filename": "src/test/ui/liveness/liveness-derive.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/063d5e9d8bdf9f0b26817265ca90e246bb20e379/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/063d5e9d8bdf9f0b26817265ca90e246bb20e379/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.rs?ref=063d5e9d8bdf9f0b26817265ca90e246bb20e379", "patch": "@@ -0,0 +1,38 @@\n+// Test for interaction between #[automatically_derived] attribute used by\n+// built-in derives and lints generated by liveness pass.\n+//\n+// edition:2018\n+// check-pass\n+#![warn(unused)]\n+\n+pub trait T: Sized {\n+    const N: usize;\n+    fn t(&self) -> Self;\n+}\n+\n+impl T for u32 {\n+    const N: usize = {\n+        let a = 0; // FIXME should warn about unused variable\n+        4\n+    };\n+\n+    fn t(&self) -> Self {\n+        let b = 16; //~ WARN unused variable: `b`\n+        0\n+    }\n+}\n+\n+#[automatically_derived]\n+impl T for i32 {\n+    const N: usize = {\n+        let c = 0;\n+        4\n+    };\n+\n+    fn t(&self) -> Self {\n+        let d = 17;\n+        0\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "d4f45a0a31341e619dc3048abb0cc4204d4de5b8", "filename": "src/test/ui/liveness/liveness-derive.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/063d5e9d8bdf9f0b26817265ca90e246bb20e379/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/063d5e9d8bdf9f0b26817265ca90e246bb20e379/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fliveness%2Fliveness-derive.stderr?ref=063d5e9d8bdf9f0b26817265ca90e246bb20e379", "patch": "@@ -0,0 +1,15 @@\n+warning: unused variable: `b`\n+  --> $DIR/liveness-derive.rs:20:13\n+   |\n+LL |         let b = 16;\n+   |             ^ help: if this is intentional, prefix it with an underscore: `_b`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/liveness-derive.rs:6:9\n+   |\n+LL | #![warn(unused)]\n+   |         ^^^^^^\n+   = note: `#[warn(unused_variables)]` implied by `#[warn(unused)]`\n+\n+warning: 1 warning emitted\n+"}]}