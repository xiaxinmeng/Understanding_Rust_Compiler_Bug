{"sha": "503b073d3fc47ae9409e9b8430a3caba597b435c", "node_id": "C_kwDOAAsO6NoAKDUwM2IwNzNkM2ZjNDdhZTk0MDllOWI4NDMwYTNjYWJhNTk3YjQzNWM", "commit": {"author": {"name": "fee1-dead", "email": "ent3rm4n@gmail.com", "date": "2022-09-26T05:09:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-26T05:09:43Z"}, "message": "Rollup merge of #102267 - jyn514:smaller-build-script, r=Mark-Simulacrum\n\nDon't set RUSTC in the bootstrap build script\n\nWe no longer use this for anything since https://github.com/rust-lang/rust/pull/98483/files#diff-7eddc76f1be9eca2599a9ae58c65ffe247fbdff9b02ef687439894cab9afe749L781. Remove it, so that we spuriously rebuild bootstrap fewer times on Windows (where PATH changes often).\n\nHelps with https://github.com/rust-lang/rust/issues/92369. cc https://github.com/rust-lang/rust/pull/102266\n\nr? ``@Mark-Simulacrum``", "tree": {"sha": "98a582606410226ccb03dcdc59d3ff7437dc5aa3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98a582606410226ccb03dcdc59d3ff7437dc5aa3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/503b073d3fc47ae9409e9b8430a3caba597b435c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjMTQXCRBK7hj4Ov3rIwAALjAIAGzBPKM88yEeAos3B1924UHL\nZbM0EsXiVyiDEjvR27X97vbxfm95AbfUhbrMFV66Nv0Z4pHBdUMkmRjMUGy85Hv6\neiGTLQdyvVIprbmvYJEOVsPFFiCqbLONYalPAYfhe0YNUJuwUV0OieIT0MmxRlqX\nmQABjZdFjJ9cU6Kgtn+4fXUYV4b+5rHDiulEC7CqTV3k/28n9vwH4pQ1pLASUqT3\n0wFUC4PdwBUN3ZF3k2A4p7Scvu/o6sYC2Bp4Uau19QAMyQJj8+aNmrR9FKtNV9De\nSIH11Gv7MiEHvuHS1g752WZlb8AVVG/+KpkQx2ZfLX4pvhzhKojmY0lZuEPyxwQ=\n=bJ2u\n-----END PGP SIGNATURE-----\n", "payload": "tree 98a582606410226ccb03dcdc59d3ff7437dc5aa3\nparent 804c2c1ed9382bd3a9ea08591b43f9dbe8d9d492\nparent 41ac87dd38e47fef2de46045ea9c1cb2eba93a8a\nauthor fee1-dead <ent3rm4n@gmail.com> 1664168983 +0800\ncommitter GitHub <noreply@github.com> 1664168983 +0800\n\nRollup merge of #102267 - jyn514:smaller-build-script, r=Mark-Simulacrum\n\nDon't set RUSTC in the bootstrap build script\n\nWe no longer use this for anything since https://github.com/rust-lang/rust/pull/98483/files#diff-7eddc76f1be9eca2599a9ae58c65ffe247fbdff9b02ef687439894cab9afe749L781. Remove it, so that we spuriously rebuild bootstrap fewer times on Windows (where PATH changes often).\n\nHelps with https://github.com/rust-lang/rust/issues/92369. cc https://github.com/rust-lang/rust/pull/102266\n\nr? ``@Mark-Simulacrum``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/503b073d3fc47ae9409e9b8430a3caba597b435c", "html_url": "https://github.com/rust-lang/rust/commit/503b073d3fc47ae9409e9b8430a3caba597b435c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/503b073d3fc47ae9409e9b8430a3caba597b435c/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "804c2c1ed9382bd3a9ea08591b43f9dbe8d9d492", "url": "https://api.github.com/repos/rust-lang/rust/commits/804c2c1ed9382bd3a9ea08591b43f9dbe8d9d492", "html_url": "https://github.com/rust-lang/rust/commit/804c2c1ed9382bd3a9ea08591b43f9dbe8d9d492"}, {"sha": "41ac87dd38e47fef2de46045ea9c1cb2eba93a8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/41ac87dd38e47fef2de46045ea9c1cb2eba93a8a", "html_url": "https://github.com/rust-lang/rust/commit/41ac87dd38e47fef2de46045ea9c1cb2eba93a8a"}], "stats": {"total": 36, "additions": 0, "deletions": 36}, "files": [{"sha": "cd1f418028c62c97e55bec1d05abb5797f02dc4f", "filename": "src/bootstrap/build.rs", "status": "modified", "additions": 0, "deletions": 36, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/503b073d3fc47ae9409e9b8430a3caba597b435c/src%2Fbootstrap%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/503b073d3fc47ae9409e9b8430a3caba597b435c/src%2Fbootstrap%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild.rs?ref=503b073d3fc47ae9409e9b8430a3caba597b435c", "patch": "@@ -1,43 +1,7 @@\n-use env::consts::{EXE_EXTENSION, EXE_SUFFIX};\n use std::env;\n-use std::ffi::OsString;\n-use std::path::PathBuf;\n-\n-/// Given an executable called `name`, return the filename for the\n-/// executable for a particular target.\n-pub fn exe(name: &PathBuf) -> PathBuf {\n-    if EXE_EXTENSION != \"\" && name.extension() != Some(EXE_EXTENSION.as_ref()) {\n-        let mut name: OsString = name.clone().into();\n-        name.push(EXE_SUFFIX);\n-        name.into()\n-    } else {\n-        name.clone()\n-    }\n-}\n \n fn main() {\n     let host = env::var(\"HOST\").unwrap();\n     println!(\"cargo:rerun-if-changed=build.rs\");\n-    println!(\"cargo:rerun-if-env-changed=RUSTC\");\n     println!(\"cargo:rustc-env=BUILD_TRIPLE={}\", host);\n-\n-    // This may not be a canonicalized path.\n-    let mut rustc = PathBuf::from(env::var_os(\"RUSTC\").unwrap());\n-\n-    if rustc.is_relative() {\n-        println!(\"cargo:rerun-if-env-changed=PATH\");\n-        for dir in env::split_paths(&env::var_os(\"PATH\").unwrap_or_default()) {\n-            let absolute = dir.join(&exe(&rustc));\n-            if absolute.exists() {\n-                rustc = absolute;\n-                break;\n-            }\n-        }\n-    }\n-    assert!(rustc.is_absolute());\n-\n-    // FIXME: if the path is not utf-8, this is going to break. Unfortunately\n-    // Cargo doesn't have a way for us to specify non-utf-8 paths easily, so\n-    // we'll need to invent some encoding scheme if this becomes a problem.\n-    println!(\"cargo:rustc-env=RUSTC={}\", rustc.to_str().unwrap());\n }"}]}