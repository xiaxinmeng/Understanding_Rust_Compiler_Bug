{"sha": "79b7a9efa9ab8601a2609d621de45bf0e4b30ce1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5YjdhOWVmYTlhYjg2MDFhMjYwOWQ2MjFkZTQ1YmYwZTRiMzBjZTE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-21T00:54:16Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-21T00:54:16Z"}, "message": "Auto merge of #29916 - Manishearth:diag-401, r=steveklabnik\n\nNone", "tree": {"sha": "be51b399e85290fa75fedbbe9ce93297b0a04be1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be51b399e85290fa75fedbbe9ce93297b0a04be1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1", "html_url": "https://github.com/rust-lang/rust/commit/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "731c0ce4c9fce4b689841be477841595be686ce9", "url": "https://api.github.com/repos/rust-lang/rust/commits/731c0ce4c9fce4b689841be477841595be686ce9", "html_url": "https://github.com/rust-lang/rust/commit/731c0ce4c9fce4b689841be477841595be686ce9"}, {"sha": "c23cbae0cbd2618b56477425343d87f93cbd9194", "url": "https://api.github.com/repos/rust-lang/rust/commits/c23cbae0cbd2618b56477425343d87f93cbd9194", "html_url": "https://github.com/rust-lang/rust/commit/c23cbae0cbd2618b56477425343d87f93cbd9194"}], "stats": {"total": 72, "additions": 71, "deletions": 1}, "files": [{"sha": "85fb5d9ccf9e5c1f554c7597dc22569811867091", "filename": "src/librustc_resolve/diagnostics.rs", "status": "modified", "additions": 71, "deletions": 1, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1/src%2Flibrustc_resolve%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79b7a9efa9ab8601a2609d621de45bf0e4b30ce1/src%2Flibrustc_resolve%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fdiagnostics.rs?ref=79b7a9efa9ab8601a2609d621de45bf0e4b30ce1", "patch": "@@ -273,6 +273,77 @@ on this topic:\n https://doc.rust-lang.org/reference.html#use-declarations\n \"##,\n \n+E0401: r##\"\n+Inner functions do not inherit type parameters from the functions they are\n+embedded in. For example, this will not compile:\n+\n+```\n+fn foo<T>(x: T) {\n+    fn bar(y: T) { // T is defined in the \"outer\" function\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+Functions inside functions are basically just like top-level functions, except\n+that they can only be called from the function they are in.\n+\n+There are a couple of solutions for this.\n+\n+You can use a closure:\n+\n+```\n+fn foo<T>(x: T) {\n+    let bar = |y: T| { // explicit type annotation may not be necessary\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+or copy over the parameters:\n+\n+```\n+fn foo<T>(x: T) {\n+    fn bar<T>(y: T) {\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+Be sure to copy over any bounds as well:\n+\n+```\n+fn foo<T: Copy>(x: T) {\n+    fn bar<T: Copy>(y: T) {\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+This may require additional type hints in the function body.\n+\n+In case the function is in an `impl`, defining a private helper function might\n+be easier:\n+\n+```\n+impl<T> Foo<T> {\n+    pub fn foo(&self, x: T) {\n+        self.bar(x);\n+    }\n+    fn bar(&self, y: T) {\n+        // ..\n+    }\n+}\n+```\n+\n+For default impls in traits, the private helper solution won't work, however\n+closures or copying the parameters should still work.\n+\"##,\n+\n E0403: r##\"\n Some type parameters have the same name. Example of erroneous code:\n \n@@ -909,7 +980,6 @@ register_diagnostics! {\n     E0254, // import conflicts with imported crate in this module\n     E0257,\n     E0258,\n-    E0401, // can't use type parameters from outer function\n     E0402, // cannot use an outer type parameter in this context\n     E0406, // undeclared associated type\n     E0408, // variable from pattern #1 is not bound in pattern #"}]}