{"sha": "5a753b39c77a82d354aadd4dc9683dab476f59d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhNzUzYjM5Yzc3YTgyZDM1NGFhZGQ0ZGM5NjgzZGFiNDc2ZjU5ZDk=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-01-21T22:16:33Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-01-21T22:16:33Z"}, "message": "Merge #590\n\n590: Use insta for ty tests r=matklad a=flodiebold\n\n\n\nCo-authored-by: Florian Diebold <flodiebold@gmail.com>", "tree": {"sha": "618a40c72526213a7b255e3836f35339dc5e0dc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/618a40c72526213a7b255e3836f35339dc5e0dc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5a753b39c77a82d354aadd4dc9683dab476f59d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5a753b39c77a82d354aadd4dc9683dab476f59d9", "html_url": "https://github.com/rust-lang/rust/commit/5a753b39c77a82d354aadd4dc9683dab476f59d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5a753b39c77a82d354aadd4dc9683dab476f59d9/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "79720549beb3050692ace15ee97785da60972fd9", "url": "https://api.github.com/repos/rust-lang/rust/commits/79720549beb3050692ace15ee97785da60972fd9", "html_url": "https://github.com/rust-lang/rust/commit/79720549beb3050692ace15ee97785da60972fd9"}, {"sha": "a2521106163d3aaeeecfb28cae42d6aba99bba3f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2521106163d3aaeeecfb28cae42d6aba99bba3f", "html_url": "https://github.com/rust-lang/rust/commit/a2521106163d3aaeeecfb28cae42d6aba99bba3f"}], "stats": {"total": 214, "additions": 159, "deletions": 55}, "files": [{"sha": "5689cecb483803a8ded1d57b1857335d087dc6a4", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -718,6 +718,7 @@ dependencies = [\n  \"arrayvec 0.4.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ena 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"flexi_logger 0.10.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"insta 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"join_to_string 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "3d5dddc6a09a33ad486d282cdd52b578186319f0", "filename": "crates/ra_hir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2FCargo.toml?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -19,3 +19,4 @@ test_utils = { path = \"../test_utils\" }\n \n [dev-dependencies]\n flexi_logger = \"0.10.0\"\n+insta = \"0.1.4\""}, {"sha": "eeb3061d371e4f7d961dae68c5829075a019f452", "filename": "crates/ra_hir/src/ty/snapshots/tests__bug_484.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_484.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_484.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_484.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,5 +1,10 @@\n+Created: 2019-01-21T21:48:20.662863951+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [11; 37) '{    l... {}; }': ()\n [20; 21) 'x': ()\n [24; 34) 'if true {}': ()\n [27; 31) 'true': bool\n [32; 34) '{}': ()\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/bug_484.txt"}, {"sha": "073009bbce2e16bf5f77377b13b0c4c6fb29ee6a", "filename": "crates/ra_hir/src/ty/snapshots/tests__bug_585.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_585.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_585.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__bug_585.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662863969+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [11; 89) '{     ...   } }': ()\n [17; 21) 'X {}': [unknown]\n [27; 87) 'match ...     }': ()\n@@ -6,3 +10,4 @@\n [56; 58) '()': ()\n [68; 74) 'A::Y()': [unknown]\n [78; 80) '()': ()\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/bug_585.txt"}, {"sha": "fb261f1c0f2d6a257f1c99fdf7b93dee506eca58", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_adt_pattern.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_adt_pattern.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_adt_pattern.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_adt_pattern.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662935249+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [68; 262) '{     ...  d; }': ()\n [78; 79) 'e': E\n [82; 95) 'E::A { x: 3 }': E\n@@ -20,3 +24,4 @@\n [237; 248) 'E::A { .. }': E\n [251; 252) 'e': E\n [258; 259) 'd': &E\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/adt_pattern.txt"}, {"sha": "2fc613e26f35263f4293cd4bb8ef40ad7bfd8078", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_array.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_array.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_array.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_array.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662961921+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [9; 10) 'x': &str\n [18; 19) 'y': isize\n [28; 293) '{     ... []; }': ()\n@@ -50,3 +54,4 @@\n [260; 263) '\"b\"': &str\n [275; 276) 'x': [u8]\n [288; 290) '[]': [u8]\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/array.txt"}, {"sha": "12f0d8c907e66247cbb15c46a0dbc5475a10d5fa", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_backwards.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_backwards.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_backwards.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_backwards.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662902243+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [14; 15) 'x': u32\n [22; 24) '{}': ()\n [78; 231) '{     ...t &c }': &mut &f64\n@@ -18,3 +22,4 @@\n [222; 229) '&mut &c': &mut &f64\n [227; 229) '&c': &f64\n [228; 229) 'c': f64\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/backwards.txt"}, {"sha": "eba8126e92a1fbfddb3f12e0a18cd0f70b41a32b", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_basics.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_basics.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_basics.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_basics.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662874226+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [9; 10) 'a': u32\n [17; 18) 'b': isize\n [27; 28) 'c': !\n@@ -11,3 +15,4 @@\n [88; 94) '1isize': isize\n [100; 106) '\"test\"': &str\n [112; 118) '1.0f32': f32\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/basics.txt"}, {"sha": "3b750ec450ee49448baf47a88662cda674cf896c", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_binary_op.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_binary_op.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_binary_op.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_binary_op.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.662972146+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [6; 7) 'x': bool\n [22; 34) '{     0i32 }': i32\n [28; 32) '0i32': i32\n@@ -44,3 +48,4 @@\n [341; 344) 'ten': usize\n [341; 348) 'ten < 3': bool\n [347; 348) '3': usize\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/binary_op.txt"}, {"sha": "8018ff025d542dd811dd33b9e6e3c477d5b43c88", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_enum.snap", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_enum.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_enum.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_enum.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -0,0 +1,9 @@\n+Created: 2019-01-21T21:48:20.662949719+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n+[48; 82) '{   E:...:V2; }': ()\n+[52; 70) 'E::V1 ...d: 1 }': E\n+[67; 68) '1': u32\n+[74; 79) 'E::V2': E\n+"}, {"sha": "1943ef079ccf219d8196be0e219bb7d83e29afb1", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_field_autoderef.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_field_autoderef.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_field_autoderef.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_field_autoderef.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.671554939+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [44; 45) 'a': A\n [50; 213) '{     ...5.b; }': ()\n [60; 62) 'a1': A\n@@ -41,3 +45,4 @@\n [256; 260) 'a1.b': B\n [266; 268) 'a2': *mut A\n [266; 270) 'a2.b': B\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/field_autoderef.txt"}, {"sha": "386acc0b3be3f7832543631cff9c846187651ce8", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_function_generics.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_function_generics.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_function_generics.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_function_generics.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.669112954+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [10; 11) 't': [unknown]\n [21; 26) '{ t }': [unknown]\n [23; 24) 't': [unknown]\n@@ -12,3 +16,4 @@\n [90; 92) 'id': fn(T) -> T\n [90; 95) 'id(1)': T\n [93; 94) '1': T\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/function_generics.txt"}, {"sha": "7a64e4f95a15d312176c1c950df114cce8a8b044", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_generic_chain.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generic_chain.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generic_chain.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generic_chain.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.672467086+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [53; 57) 'self': A<[unknown]>\n [65; 87) '{     ...     }': [unknown]\n [75; 79) 'self': A<[unknown]>\n@@ -27,3 +31,4 @@\n [244; 245) 'z': T\n [254; 255) 'b': A<T>\n [254; 259) 'b.x()': i128\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/generic_chain.txt"}, {"sha": "ae38ec2fbd1425ebec97103b5a5bd9ca5c6d38a1", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_generics_in_patterns.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generics_in_patterns.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generics_in_patterns.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_generics_in_patterns.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.683908196+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [79; 81) 'a1': A<u32>\n [91; 92) 'o': Option<u64>\n [107; 244) '{     ...  }; }': ()\n@@ -15,3 +19,4 @@\n [217; 218) 't': u64\n [228; 229) '_': Option<u64>\n [233; 234) '1': u64\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/generics_in_patterns.txt"}, {"sha": "298dac585c8c57602ff9466265b7b3f04dbf6c1b", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_inherent_method.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_inherent_method.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_inherent_method.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_inherent_method.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.670255659+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [32; 36) 'self': A\n [38; 39) 'x': u32\n [53; 55) '{}': ()\n@@ -16,3 +20,4 @@\n [187; 188) 'a': A\n [187; 195) 'a.bar(1)': i64\n [193; 194) '1': u64\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/inherent_method.txt"}, {"sha": "aa4e4cc63e4dbaef0a1c8a8b9aee5617f815de37", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_let.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_let.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_let.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_let.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,7 +1,12 @@\n+Created: 2019-01-21T21:48:20.666406651+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [11; 71) '{     ...= b; }': ()\n [21; 22) 'a': isize\n [25; 31) '1isize': isize\n [41; 42) 'b': usize\n [52; 53) '1': usize\n [63; 64) 'c': usize\n [67; 68) 'b': usize\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/let.txt"}, {"sha": "00c7e639efbb807270c83a3e0f3fa482ea0066f9", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_literals.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_literals.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_literals.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_literals.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.666200994+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [11; 201) '{     ...o\"#; }': ()\n [17; 21) '5i32': i32\n [27; 34) '\"hello\"': &str\n@@ -10,3 +14,4 @@\n [104; 108) 'true': bool\n [114; 182) 'r#\"   ...    \"#': &str\n [188; 198) 'br#\"yolo\"#': &[u8]\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/literals.txt"}, {"sha": "0924cdc804c1c12bb956c995930d788b6552f927", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_paths.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_paths.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_paths.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_paths.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.671399345+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [15; 20) '{ 1 }': u32\n [17; 18) '1': u32\n [48; 53) '{ 1 }': u32\n@@ -7,3 +11,4 @@\n [73; 76) 'a()': u32\n [82; 86) 'b::c': fn() -> u32\n [82; 88) 'b::c()': u32\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/paths.txt"}, {"sha": "b22b71765afb5d79a49243c456d410e465c6f3c8", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_pattern.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_pattern.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_pattern.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_pattern.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.677661229+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [9; 10) 'x': &i32\n [18; 369) '{     ...o_x; }': ()\n [28; 29) 'y': &i32\n@@ -45,3 +49,4 @@\n [339; 340) 'x': &i32\n [350; 351) 'k': &mut &i32\n [354; 366) 'mut_ref_to_x': &mut &i32\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/pattern.txt"}, {"sha": "fc5bfe6776467ebf1cbef6dc9c28cb9391340fe7", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_refs.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_refs.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_refs.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_refs.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.674183006+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [9; 10) 'a': &u32\n [18; 19) 'b': &mut u32\n [31; 32) 'c': *const u32\n@@ -21,3 +25,4 @@\n [138; 139) 'd': *mut u32\n [145; 147) '*d': u32\n [146; 147) 'd': *mut u32\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/refs_and_ptrs.txt"}, {"sha": "76cb62055384f116dc2932aee9eb02ddf4635172", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_self.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_self.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_self.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_self.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,6 +1,11 @@\n+Created: 2019-01-21T21:50:17.870325361+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [34; 38) 'self': &S\n [40; 61) '{     ...     }': ()\n [50; 54) 'self': &S\n [75; 79) 'self': &S\n [88; 109) '{     ...     }': ()\n [98; 102) 'self': &S\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/self.txt"}, {"sha": "0c94d68377cc5c4d8c727d3754dd5e26481e49c7", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_struct.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.677495622+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [72; 154) '{     ...a.c; }': ()\n [82; 83) 'c': [unknown]\n [86; 87) 'C': [unknown]\n@@ -14,3 +18,4 @@\n [139; 142) 'a.b': B\n [148; 149) 'a': A\n [148; 151) 'a.c': C\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/struct.txt"}, {"sha": "7cf947d4d3d2066e7bd0bb6b5ee09756cd0ef043", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_struct_generics.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct_generics.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct_generics.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_struct_generics.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.678274444+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [36; 38) 'a1': A<u32>\n [48; 49) 'i': i32\n [56; 147) '{     ...3.x; }': ()\n@@ -13,3 +17,4 @@\n [131; 132) '1': i128\n [140; 142) 'a3': A<i128>\n [140; 144) 'a3.x': i128\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/struct_generics.txt"}, {"sha": "8626441458c754a74a035d0b7c2b9a8ee620d00d", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_tuple.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_tuple.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_tuple.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_tuple.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.676903109+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [9; 10) 'x': &str\n [18; 19) 'y': isize\n [28; 170) '{     ...d\"); }': ()\n@@ -25,3 +29,4 @@\n [159; 167) '(e, \"d\")': ((i32, &str), &str)\n [160; 161) 'e': (i32, &str)\n [163; 166) '\"d\"': &str\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/tuple.txt"}, {"sha": "8906bb9c00bb1f9c74796501cb4ab602a18e69d1", "filename": "crates/ra_hir/src/ty/snapshots/tests__infer_unary_op.snap", "status": "renamed", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_unary_op.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_unary_op.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__infer_unary_op.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,3 +1,7 @@\n+Created: 2019-01-21T21:48:20.676213204+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n [27; 28) 'x': SomeType\n [40; 197) '{     ...lo\"; }': ()\n [50; 51) 'b': bool\n@@ -26,3 +30,4 @@\n [179; 180) 'x': SomeType\n [186; 194) '-\"hello\"': [unknown]\n [187; 194) '\"hello\"': &str\n+", "previous_filename": "crates/ra_hir/src/ty/tests/data/unary_op.txt"}, {"sha": "024fbf929b2342f33459f484e337f19a2f4cfce6", "filename": "crates/ra_hir/src/ty/snapshots/tests__no_panic_on_field_of_enum.snap", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__no_panic_on_field_of_enum.snap", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__no_panic_on_field_of_enum.snap", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Fsnapshots%2Ftests__no_panic_on_field_of_enum.snap?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -0,0 +1,9 @@\n+Created: 2019-01-21T21:48:20.676654355+00:00\n+Creator: insta@0.1.4\n+Source: crates/ra_hir/src/ty/tests.rs\n+\n+[20; 21) 'x': X\n+[26; 47) '{     ...eld; }': ()\n+[32; 33) 'x': X\n+[32; 44) 'x.some_field': [unknown]\n+"}, {"sha": "9bf1fd3b23ba1837d0477b91e51f1966ab11e51e", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 29, "deletions": 47, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a753b39c77a82d354aadd4dc9683dab476f59d9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=5a753b39c77a82d354aadd4dc9683dab476f59d9", "patch": "@@ -1,26 +1,22 @@\n use std::sync::Arc;\n use std::fmt::Write;\n-use std::path::{PathBuf, Path};\n-use std::fs;\n \n use ra_db::{SyntaxDatabase, salsa::Database};\n use ra_syntax::ast::{self, AstNode};\n-use test_utils::{project_dir, assert_eq_text, read_text};\n \n use crate::{\n     source_binder,\n     mock::MockDatabase,\n };\n \n // These tests compare the inference results for all expressions in a file\n-// against snapshots of the expected results. If you change something and these\n-// tests fail expectedly, you can update the comparison files by deleting them\n-// and running the tests again. Similarly, to add a new test, just write the\n-// test here in the same pattern and it will automatically write the snapshot.\n+// against snapshots of the expected results using insta. Run the tests with\n+// INSTA_UPDATE=1 to update the snapshots.\n \n #[test]\n fn infer_basics() {\n     check_inference(\n+        \"infer_basics\",\n         r#\"\n fn test(a: u32, b: isize, c: !, d: &str) {\n     a;\n@@ -32,27 +28,27 @@ fn test(a: u32, b: isize, c: !, d: &str) {\n     \"test\";\n     1.0f32;\n }\"#,\n-        \"basics.txt\",\n     );\n }\n \n #[test]\n fn infer_let() {\n     check_inference(\n+        \"infer_let\",\n         r#\"\n fn test() {\n     let a = 1isize;\n     let b: usize = 1;\n     let c = b;\n }\n }\"#,\n-        \"let.txt\",\n     );\n }\n \n #[test]\n fn infer_paths() {\n     check_inference(\n+        \"infer_paths\",\n         r#\"\n fn a() -> u32 { 1 }\n \n@@ -65,13 +61,13 @@ fn test() {\n     b::c();\n }\n }\"#,\n-        \"paths.txt\",\n     );\n }\n \n #[test]\n fn infer_struct() {\n     check_inference(\n+        \"infer_struct\",\n         r#\"\n struct A {\n     b: B,\n@@ -88,13 +84,13 @@ fn test() {\n     a.c;\n }\n \"#,\n-        \"struct.txt\",\n     );\n }\n \n #[test]\n fn infer_enum() {\n     check_inference(\n+        \"infer_enum\",\n         r#\"\n enum E {\n   V1 { field: u32 },\n@@ -104,13 +100,13 @@ fn test() {\n   E::V1 { field: 1 };\n   E::V2;\n }\"#,\n-        \"enum.txt\",\n     );\n }\n \n #[test]\n fn infer_refs() {\n     check_inference(\n+        \"infer_refs\",\n         r#\"\n fn test(a: &u32, b: &mut u32, c: *const u32, d: *mut u32) {\n     a;\n@@ -126,13 +122,13 @@ fn test(a: &u32, b: &mut u32, c: *const u32, d: *mut u32) {\n     *d;\n }\n \"#,\n-        \"refs_and_ptrs.txt\",\n     );\n }\n \n #[test]\n fn infer_literals() {\n     check_inference(\n+        \"infer_literals\",\n         r##\"\n fn test() {\n     5i32;\n@@ -152,13 +148,13 @@ fn test() {\n     br#\"yolo\"#;\n }\n \"##,\n-        \"literals.txt\",\n     );\n }\n \n #[test]\n fn infer_unary_op() {\n     check_inference(\n+        \"infer_unary_op\",\n         r#\"\n enum SomeType {}\n \n@@ -175,13 +171,13 @@ fn test(x: SomeType) {\n     -\"hello\";\n }\n \"#,\n-        \"unary_op.txt\",\n     );\n }\n \n #[test]\n fn infer_backwards() {\n     check_inference(\n+        \"infer_backwards\",\n         r#\"\n fn takes_u32(x: u32) {}\n \n@@ -196,13 +192,13 @@ fn test() -> &mut &f64 {\n     &mut &c\n }\n \"#,\n-        \"backwards.txt\",\n     );\n }\n \n #[test]\n fn infer_self() {\n     check_inference(\n+        \"infer_self\",\n         r#\"\n struct S;\n \n@@ -215,13 +211,13 @@ impl S {\n     }\n }\n \"#,\n-        \"self.txt\",\n     );\n }\n \n #[test]\n fn infer_binary_op() {\n     check_inference(\n+        \"infer_binary_op\",\n         r#\"\n fn f(x: bool) -> i32 {\n     0i32\n@@ -242,13 +238,13 @@ fn test() -> bool {\n     ten < 3\n }\n \"#,\n-        \"binary_op.txt\",\n     );\n }\n \n #[test]\n fn infer_field_autoderef() {\n     check_inference(\n+        \"infer_field_autoderef\",\n         r#\"\n struct A {\n     b: B,\n@@ -273,25 +269,25 @@ fn test2(a1: *const A, a2: *mut A) {\n     a2.b;\n }\n \"#,\n-        \"field_autoderef.txt\",\n     );\n }\n \n #[test]\n-fn infer_bug_484() {\n+fn bug_484() {\n     check_inference(\n+        \"bug_484\",\n         r#\"\n fn test() {\n    let x = if true {};\n }\n \"#,\n-        \"bug_484.txt\",\n     );\n }\n \n #[test]\n fn infer_inherent_method() {\n     check_inference(\n+        \"infer_inherent_method\",\n         r#\"\n struct A;\n \n@@ -311,13 +307,13 @@ fn test(a: A) {\n     a.bar(1);\n }\n \"#,\n-        \"inherent_method.txt\",\n     );\n }\n \n #[test]\n fn infer_tuple() {\n     check_inference(\n+        \"infer_tuple\",\n         r#\"\n fn test(x: &str, y: isize) {\n     let a: (u32, &str) = (1, \"a\");\n@@ -328,13 +324,13 @@ fn test(x: &str, y: isize) {\n     let f = (e, \"d\");\n }\n \"#,\n-        \"tuple.txt\",\n     );\n }\n \n #[test]\n fn infer_array() {\n     check_inference(\n+        \"infer_array\",\n         r#\"\n fn test(x: &str, y: isize) {\n     let a = [x];\n@@ -354,13 +350,13 @@ fn test(x: &str, y: isize) {\n     let x: [u8; 0] = [];\n }\n \"#,\n-        \"array.txt\",\n     );\n }\n \n #[test]\n fn infer_pattern() {\n     check_inference(\n+        \"infer_pattern\",\n         r#\"\n fn test(x: &i32) {\n     let y = x;\n@@ -384,13 +380,13 @@ fn test(x: &i32) {\n     let k = mut_ref_to_x;\n }\n \"#,\n-        \"pattern.txt\",\n     );\n }\n \n #[test]\n fn infer_adt_pattern() {\n     check_inference(\n+        \"infer_adt_pattern\",\n         r#\"\n enum E {\n     A { x: usize },\n@@ -414,13 +410,13 @@ fn test() {\n     d;\n }\n \"#,\n-        \"adt_pattern.txt\",\n     );\n }\n \n #[test]\n fn infer_struct_generics() {\n     check_inference(\n+        \"infer_struct_generics\",\n         r#\"\n struct A<T> {\n     x: T,\n@@ -434,13 +430,13 @@ fn test(a1: A<u32>, i: i32) {\n     a3.x;\n }\n \"#,\n-        \"struct_generics.txt\",\n     );\n }\n \n #[test]\n fn infer_generics_in_patterns() {\n     check_inference(\n+        \"infer_generics_in_patterns\",\n         r#\"\n struct A<T> {\n     x: T,\n@@ -460,13 +456,13 @@ fn test(a1: A<u32>, o: Option<u64>) {\n     };\n }\n \"#,\n-        \"generics_in_patterns.txt\",\n     );\n }\n \n #[test]\n fn infer_function_generics() {\n     check_inference(\n+        \"infer_function_generics\",\n         r#\"\n fn id<T>(t: T) -> T { t }\n \n@@ -476,13 +472,13 @@ fn test() {\n     let x: u64 = id(1);\n }\n \"#,\n-        \"function_generics.txt\",\n     );\n }\n \n #[test]\n fn infer_generic_chain() {\n     check_inference(\n+        \"infer_generic_chain\",\n         r#\"\n struct A<T> {\n     x: T,\n@@ -503,27 +499,27 @@ fn test() -> i128 {\n      b.x()\n }\n \"#,\n-        \"generic_chain.txt\",\n     );\n }\n \n #[test]\n fn no_panic_on_field_of_enum() {\n     check_inference(\n+        \"no_panic_on_field_of_enum\",\n         r#\"\n enum X {}\n \n fn test(x: X) {\n     x.some_field;\n }\n \"#,\n-        \"no_panic_on_field_of_enum.txt\",\n     );\n }\n \n #[test]\n fn bug_585() {\n     check_inference(\n+        \"bug_585\",\n         r#\"\n fn test() {\n     X {};\n@@ -533,7 +529,6 @@ fn test() {\n     }\n }\n \"#,\n-        \"bug_585.txt\",\n     );\n }\n \n@@ -581,19 +576,10 @@ fn infer(content: &str) -> String {\n     acc\n }\n \n-fn check_inference(content: &str, data_file: impl AsRef<Path>) {\n-    let data_file_path = test_data_dir().join(data_file);\n+fn check_inference(name: &str, content: &str) {\n     let result = infer(content);\n \n-    if !data_file_path.exists() {\n-        println!(\"File with expected result doesn't exist, creating...\\n\");\n-        println!(\"{}\\n{}\", content, result);\n-        fs::write(&data_file_path, &result).unwrap();\n-        panic!(\"File {:?} with expected result was created\", data_file_path);\n-    }\n-\n-    let expected = read_text(&data_file_path);\n-    assert_eq_text!(&expected, &result);\n+    insta::assert_snapshot_matches!(&name, &result);\n }\n \n fn ellipsize(mut text: String, max_len: usize) -> String {\n@@ -614,10 +600,6 @@ fn ellipsize(mut text: String, max_len: usize) -> String {\n     text\n }\n \n-fn test_data_dir() -> PathBuf {\n-    project_dir().join(\"crates/ra_hir/src/ty/tests/data\")\n-}\n-\n #[test]\n fn typing_whitespace_inside_a_function_should_not_invalidate_types() {\n     let (mut db, pos) = MockDatabase::with_position("}, {"sha": "481eb0bc72127d55250492f504f567bde2ca6173", "filename": "crates/ra_hir/src/ty/tests/data/enum.txt", "status": "removed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79720549beb3050692ace15ee97785da60972fd9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fenum.txt", "raw_url": "https://github.com/rust-lang/rust/raw/79720549beb3050692ace15ee97785da60972fd9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fenum.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fenum.txt?ref=79720549beb3050692ace15ee97785da60972fd9", "patch": "@@ -1,4 +0,0 @@\n-[48; 82) '{   E:...:V2; }': ()\n-[52; 70) 'E::V1 ...d: 1 }': E\n-[67; 68) '1': u32\n-[74; 79) 'E::V2': E"}, {"sha": "4dca0b7f441abb94ac9d474405971b6c75d46861", "filename": "crates/ra_hir/src/ty/tests/data/no_panic_on_field_of_enum.txt", "status": "removed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79720549beb3050692ace15ee97785da60972fd9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fno_panic_on_field_of_enum.txt", "raw_url": "https://github.com/rust-lang/rust/raw/79720549beb3050692ace15ee97785da60972fd9/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fno_panic_on_field_of_enum.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests%2Fdata%2Fno_panic_on_field_of_enum.txt?ref=79720549beb3050692ace15ee97785da60972fd9", "patch": "@@ -1,4 +0,0 @@\n-[20; 21) 'x': X\n-[26; 47) '{     ...eld; }': ()\n-[32; 33) 'x': X\n-[32; 44) 'x.some_field': [unknown]"}]}