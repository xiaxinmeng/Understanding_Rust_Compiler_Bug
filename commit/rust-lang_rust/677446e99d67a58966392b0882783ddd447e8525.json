{"sha": "677446e99d67a58966392b0882783ddd447e8525", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3NzQ0NmU5OWQ2N2E1ODk2NjM5MmIwODgyNzgzZGRkNDQ3ZTg1MjU=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T04:46:09Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T04:46:09Z"}, "message": "Merge fn_empty_single_line and impl_empty_single_line into empty_item_single_line", "tree": {"sha": "1b86b2d635bdda9762f8b0d4cb4401fe2d551eac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1b86b2d635bdda9762f8b0d4cb4401fe2d551eac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/677446e99d67a58966392b0882783ddd447e8525", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/677446e99d67a58966392b0882783ddd447e8525", "html_url": "https://github.com/rust-lang/rust/commit/677446e99d67a58966392b0882783ddd447e8525", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/677446e99d67a58966392b0882783ddd447e8525/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a332558348cda0c5f0e2a1647b8e8be38553784", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a332558348cda0c5f0e2a1647b8e8be38553784", "html_url": "https://github.com/rust-lang/rust/commit/9a332558348cda0c5f0e2a1647b8e8be38553784"}], "stats": {"total": 168, "additions": 71, "deletions": 97}, "files": [{"sha": "f155abe63cacf686f8271f5c4f66915cfdf4030f", "filename": "Configurations.md", "status": "modified", "additions": 8, "deletions": 26, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -874,10 +874,9 @@ struct Dolor<T>\n ```\n \n \n+## `empty_item_single_line`\n \n-## `fn_empty_single_line`\n-\n-Put empty-body functions on a single line\n+Put empty-body functions and impls on a single line\n \n - **Default value**: `true`\n - **Possible values**: `true`, `false`\n@@ -886,16 +885,21 @@ Put empty-body functions on a single line\n \n ```rust\n fn lorem() {}\n+\n+impl Lorem {}\n ```\n \n #### `false`:\n \n ```rust\n fn lorem() {\n }\n+\n+impl Lorem {\n+}\n ```\n \n-See also [`control_brace_style`](#control_brace_style).\n+See also [`brace_style`](#brace_style), [`control_brace_style`](#control_brace_style).\n \n \n ## `fn_single_line`\n@@ -1004,28 +1008,6 @@ fn lorem() -> usize {\n \n See also: [`tab_spaces`](#tab_spaces).\n \n-## `impl_empty_single_line`\n-\n-Put empty-body implementations on a single line\n-\n-- **Default value**: `true`\n-- **Possible values**: `true`, `false`\n-\n-#### `true` (default):\n-\n-```rust\n-impl Lorem {}\n-```\n-\n-#### `false`:\n-\n-```rust\n-impl Lorem {\n-}\n-```\n-\n-See also [`brace_style`](#brace_style).\n-\n \n ## `imports_indent`\n "}, {"sha": "1a32b4a9c6c210a2a8a166d92d42ac0a2264ef3b", "filename": "src/config.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -599,10 +599,10 @@ create_config! {\n     normalize_comments: bool, false, true, \"Convert /* */ comments to // comments where possible\";\n \n     // Single line expressions and items.\n+    empty_item_single_line: bool, true, false,\n+        \"Put empty-body functions and impls on a single line\";\n     struct_lit_single_line: bool, true, false,\n         \"Put small struct literals on a single line\";\n-    impl_empty_single_line: bool, true, false, \"Put empty-body implementations on a single line\";\n-    fn_empty_single_line: bool, true, false, \"Put empty-body functions on a single line\";\n     fn_single_line: bool, false, false, \"Put single-expression functions on a single line\";\n     where_single_line: bool, false, false, \"To force single line where layout\";\n "}, {"sha": "c9552cb131587549103464270e5e1969f51b708a", "filename": "src/items.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -366,7 +366,7 @@ impl<'a> FmtVisitor<'a> {\n \n         let codemap = self.get_context().codemap;\n \n-        if self.config.fn_empty_single_line() && is_empty_block(block, codemap)\n+        if self.config.empty_item_single_line() && is_empty_block(block, codemap)\n             && self.block_indent.width() + fn_str.len() + 2 <= self.config.max_width()\n         {\n             return Some(format!(\"{}{{}}\", fn_str));\n@@ -705,7 +705,7 @@ fn is_impl_single_line(\n     let open_pos = snippet.find_uncommented(\"{\")? + 1;\n \n     Some(\n-        context.config.impl_empty_single_line() && items.is_empty() && !result.contains('\\n')\n+        context.config.empty_item_single_line() && items.is_empty() && !result.contains('\\n')\n             && result.len() + where_clause_str.len() <= context.config.max_width()\n             && !contains_comment(&snippet[open_pos..]),\n     )"}, {"sha": "8fa74f288023d4fe2c54178658c4de4c080e68ef", "filename": "tests/source/configs-empty_item_single_line-false.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/tests%2Fsource%2Fconfigs-empty_item_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/tests%2Fsource%2Fconfigs-empty_item_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-empty_item_single_line-false.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-empty_item_single_line: false\n+// Empty impl on single line\n+\n+impl Lorem {\n+\n+}\n+\n+impl Ipsum {\n+\n+}\n+\n+fn lorem() {\n+}\n+\n+fn lorem() {\n+\n+}"}, {"sha": "02e703d19048cad10ba39256ef02346aa88df04b", "filename": "tests/source/configs-empty_item_single_line-true.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/tests%2Fsource%2Fconfigs-empty_item_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/tests%2Fsource%2Fconfigs-empty_item_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-empty_item_single_line-true.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -0,0 +1,17 @@\n+// rustfmt-empty_item_single_line: true\n+// Empty impl on single line\n+\n+impl Lorem {\n+\n+}\n+\n+impl Ipsum {\n+\n+}\n+\n+fn lorem() {\n+}\n+\n+fn lorem() {\n+\n+}"}, {"sha": "86a279b5869dcda93d7748d72cd16e6bbdc545be", "filename": "tests/source/configs-fn_empty_single_line-false.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-fn_empty_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-fn_empty_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-fn_empty_single_line-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,9 +0,0 @@\n-// rustfmt-fn_empty_single_line: false\n-// Empty function on single line\n-\n-fn lorem() {\n-}\n-\n-fn lorem() {\n-\n-}"}, {"sha": "2603efd07548a911f1c3d249c951e8e533e1af31", "filename": "tests/source/configs-fn_empty_single_line-true.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-fn_empty_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-fn_empty_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-fn_empty_single_line-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,9 +0,0 @@\n-// rustfmt-fn_empty_single_line: true\n-// Empty function on single line\n-\n-fn lorem() {\n-}\n-\n-fn lorem() {\n-\n-}"}, {"sha": "bdd114e544a640b0cfe30d91937f75d552d4f46b", "filename": "tests/source/configs-impl_empty_single_line-false.rs", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-impl_empty_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-impl_empty_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-impl_empty_single_line-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,10 +0,0 @@\n-// rustfmt-impl_empty_single_line: false\n-// Empty impl on single line\n-\n-impl Lorem {\n-\n-}\n-\n-impl Ipsum {\n-\n-}"}, {"sha": "3b1f84f5cd05dfc0907587e34a4a1ef67583282a", "filename": "tests/source/configs-impl_empty_single_line-true.rs", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-impl_empty_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-impl_empty_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-impl_empty_single_line-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,10 +0,0 @@\n-// rustfmt-impl_empty_single_line: true\n-// Empty impl on single line\n-\n-impl Lorem {\n-\n-}\n-\n-impl Ipsum {\n-\n-}"}, {"sha": "b7886df2aa8e15650ddb77e1925c2ea247c2a0fc", "filename": "tests/target/configs-empty_item_single_line-false.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/tests%2Ftarget%2Fconfigs-empty_item_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/tests%2Ftarget%2Fconfigs-empty_item_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-empty_item_single_line-false.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -0,0 +1,15 @@\n+// rustfmt-empty_item_single_line: false\n+// Empty impl on single line\n+\n+impl Lorem {\n+}\n+\n+impl Ipsum {\n+}\n+\n+fn lorem() {\n+}\n+\n+fn lorem() {\n+\n+}"}, {"sha": "0755485fea95fb53ba9954e70a4b81c98b098dd7", "filename": "tests/target/configs-empty_item_single_line-true.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/677446e99d67a58966392b0882783ddd447e8525/tests%2Ftarget%2Fconfigs-empty_item_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/677446e99d67a58966392b0882783ddd447e8525/tests%2Ftarget%2Fconfigs-empty_item_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-empty_item_single_line-true.rs?ref=677446e99d67a58966392b0882783ddd447e8525", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-empty_item_single_line: true\n+// Empty impl on single line\n+\n+impl Lorem {}\n+\n+impl Ipsum {}\n+\n+fn lorem() {}\n+\n+fn lorem() {}"}, {"sha": "86a279b5869dcda93d7748d72cd16e6bbdc545be", "filename": "tests/target/configs-fn_empty_single_line-false.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-fn_empty_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-fn_empty_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-fn_empty_single_line-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,9 +0,0 @@\n-// rustfmt-fn_empty_single_line: false\n-// Empty function on single line\n-\n-fn lorem() {\n-}\n-\n-fn lorem() {\n-\n-}"}, {"sha": "a54cd5e6f3fd1fafcb699d1361cc46782ca86a16", "filename": "tests/target/configs-fn_empty_single_line-true.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-fn_empty_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-fn_empty_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-fn_empty_single_line-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,6 +0,0 @@\n-// rustfmt-fn_empty_single_line: true\n-// Empty function on single line\n-\n-fn lorem() {}\n-\n-fn lorem() {}"}, {"sha": "c8f97efec0a7f23208ea701a06ad75b1e018aa48", "filename": "tests/target/configs-impl_empty_single_line-false.rs", "status": "removed", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-impl_empty_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-impl_empty_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-impl_empty_single_line-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,8 +0,0 @@\n-// rustfmt-impl_empty_single_line: false\n-// Empty impl on single line\n-\n-impl Lorem {\n-}\n-\n-impl Ipsum {\n-}"}, {"sha": "9a485d2d877270604b458ee78207137bbd76a1df", "filename": "tests/target/configs-impl_empty_single_line-true.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-impl_empty_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-impl_empty_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-impl_empty_single_line-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,6 +0,0 @@\n-// rustfmt-impl_empty_single_line: true\n-// Empty impl on single line\n-\n-impl Lorem {}\n-\n-impl Ipsum {}"}]}