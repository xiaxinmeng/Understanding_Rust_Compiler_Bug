{"sha": "0201cb8e49769e198f1317a7bd694a881225606d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyMDFjYjhlNDk3NjllMTk4ZjEzMTdhN2JkNjk0YTg4MTIyNTYwNmQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-28T01:32:10Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-30T04:43:06Z"}, "message": "Add tests for #27282, #31287 as hard errors.", "tree": {"sha": "3179b02b3b425048e72b6fff0f6ac143aca53b78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3179b02b3b425048e72b6fff0f6ac143aca53b78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0201cb8e49769e198f1317a7bd694a881225606d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0201cb8e49769e198f1317a7bd694a881225606d", "html_url": "https://github.com/rust-lang/rust/commit/0201cb8e49769e198f1317a7bd694a881225606d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0201cb8e49769e198f1317a7bd694a881225606d/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a421e51266940a5d7ebb791cb60639abbb75cc24", "url": "https://api.github.com/repos/rust-lang/rust/commits/a421e51266940a5d7ebb791cb60639abbb75cc24", "html_url": "https://github.com/rust-lang/rust/commit/a421e51266940a5d7ebb791cb60639abbb75cc24"}], "stats": {"total": 50, "additions": 50, "deletions": 0}, "files": [{"sha": "395c7d214d0ce03b356b6b36b59472ab71e49df6", "filename": "src/test/ui/borrowck/issue-27282-mutation-in-guard.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.rs?ref=0201cb8e49769e198f1317a7bd694a881225606d", "patch": "@@ -0,0 +1,13 @@\n+fn main() {\n+    match Some(&4) {\n+        None => {},\n+        ref mut foo\n+            if {\n+                (|| { let bar = foo; bar.take() })();\n+                //~^ ERROR cannot move out of `foo` in pattern guard\n+                false\n+            } => {},\n+        Some(ref _s) => println!(\"Note this arm is bogus; the `Some` became `None` in the guard.\"),\n+        _ => println!(\"Here is some supposedly unreachable code.\"),\n+    }\n+}"}, {"sha": "ea7df7d5a7b617eb1c6d5ffbed12f7ba266a2c14", "filename": "src/test/ui/borrowck/issue-27282-mutation-in-guard.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-27282-mutation-in-guard.stderr?ref=0201cb8e49769e198f1317a7bd694a881225606d", "patch": "@@ -0,0 +1,15 @@\n+error[E0507]: cannot move out of `foo` in pattern guard\n+  --> $DIR/issue-27282-mutation-in-guard.rs:6:18\n+   |\n+LL |                 (|| { let bar = foo; bar.take() })();\n+   |                  ^^             ---\n+   |                  |              |\n+   |                  |              move occurs because `foo` has type `&mut std::option::Option<&i32>`, which does not implement the `Copy` trait\n+   |                  |              move occurs due to use in closure\n+   |                  move out of `foo` occurs here\n+   |\n+   = note: variables bound in patterns cannot be moved from until after the end of the pattern guard\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0507`."}, {"sha": "07125b98a1f7d10ad744d63da681b0cdd2738a9a", "filename": "src/test/ui/borrowck/issue-31287-drop-in-guard.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.rs?ref=0201cb8e49769e198f1317a7bd694a881225606d", "patch": "@@ -0,0 +1,8 @@\n+fn main() {\n+    let a = Some(\"...\".to_owned());\n+    let b = match a {\n+        Some(_) if { drop(a); false } => None,\n+        x => x, //~ ERROR use of moved value: `a`\n+    };\n+    println!(\"{:?}\", b);\n+}"}, {"sha": "85c83ec4d70edaee34d33f8a1adac69ea62a7dbe", "filename": "src/test/ui/borrowck/issue-31287-drop-in-guard.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0201cb8e49769e198f1317a7bd694a881225606d/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-31287-drop-in-guard.stderr?ref=0201cb8e49769e198f1317a7bd694a881225606d", "patch": "@@ -0,0 +1,14 @@\n+error[E0382]: use of moved value: `a`\n+  --> $DIR/issue-31287-drop-in-guard.rs:5:9\n+   |\n+LL |     let a = Some(\"...\".to_owned());\n+   |         - move occurs because `a` has type `std::option::Option<std::string::String>`, which does not implement the `Copy` trait\n+LL |     let b = match a {\n+LL |         Some(_) if { drop(a); false } => None,\n+   |                           - value moved here\n+LL |         x => x,\n+   |         ^ value used here after move\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0382`."}]}