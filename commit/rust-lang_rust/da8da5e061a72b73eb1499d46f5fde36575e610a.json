{"sha": "da8da5e061a72b73eb1499d46f5fde36575e610a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhOGRhNWUwNjFhNzJiNzNlYjE0OTlkNDZmNWZkZTM2NTc1ZTYxMGE=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-02-07T13:28:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-02-07T13:28:40Z"}, "message": "Rollup merge of #58150 - GuillaumeGomez:dont-apply-impl-collapse-rules-to-trait-impls, r=Manishearth\n\nDon't apply impl block collapse rules to trait impls\n\nFixes #58147.\n\nr? @QuietMisdreavus", "tree": {"sha": "cdeba796114e90a4ea28642dcafe1b6be4f1675e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cdeba796114e90a4ea28642dcafe1b6be4f1675e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da8da5e061a72b73eb1499d46f5fde36575e610a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcXDKICRBK7hj4Ov3rIwAAdHIIAIqKBD/0oYCtoYVZo/UJqGNX\nqJgTNIhRlh6bFNEGfWHU3hFzAF/GMpZyLvulXwdnh5XEgZAStX1iW59aSDuBB5TX\n8gtZt/6qHWz5i3ptTD2FsuaTzJKgxQjrxDGxPxOJ9SQ/l5Th4VgZmElCGAJq1FqU\nRWCm1tiHW1nCn6HJAe/pueQw0tPfzSsf0DO4KCcbn3WMUMFzvIgEGzvOmRSGCm+L\nF5/EfEPeCdymHY+ZEuEQZLzgfLW78qJ9EF+79bvmsACRP+LBNIFe+DFDT2IJ+URy\nFbSBizB7zb7rGK6KDWAkjzU0KQePa80c/VRFoRoEkWmGPt9VyTmWOQ9ww6IkYbQ=\n=fvml\n-----END PGP SIGNATURE-----\n", "payload": "tree cdeba796114e90a4ea28642dcafe1b6be4f1675e\nparent 064b787fc9c5074077d20d50387b91d12fc1e277\nparent 729e37da4dd68adbd42d3a91791d01b170be38e5\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1549546120 +0100\ncommitter GitHub <noreply@github.com> 1549546120 +0100\n\nRollup merge of #58150 - GuillaumeGomez:dont-apply-impl-collapse-rules-to-trait-impls, r=Manishearth\n\nDon't apply impl block collapse rules to trait impls\n\nFixes #58147.\n\nr? @QuietMisdreavus\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da8da5e061a72b73eb1499d46f5fde36575e610a", "html_url": "https://github.com/rust-lang/rust/commit/da8da5e061a72b73eb1499d46f5fde36575e610a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da8da5e061a72b73eb1499d46f5fde36575e610a/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "064b787fc9c5074077d20d50387b91d12fc1e277", "url": "https://api.github.com/repos/rust-lang/rust/commits/064b787fc9c5074077d20d50387b91d12fc1e277", "html_url": "https://github.com/rust-lang/rust/commit/064b787fc9c5074077d20d50387b91d12fc1e277"}, {"sha": "729e37da4dd68adbd42d3a91791d01b170be38e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/729e37da4dd68adbd42d3a91791d01b170be38e5", "html_url": "https://github.com/rust-lang/rust/commit/729e37da4dd68adbd42d3a91791d01b170be38e5"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "d6c05de0df6f2039988acecd7b28a88cd519dd27", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/da8da5e061a72b73eb1499d46f5fde36575e610a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/da8da5e061a72b73eb1499d46f5fde36575e610a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=da8da5e061a72b73eb1499d46f5fde36575e610a", "patch": "@@ -1935,9 +1935,9 @@ if (!DOMTokenList.prototype.remove) {\n             };\n         }\n \n-        function implHider(addOrRemove) {\n+        function implHider(addOrRemove, fullHide) {\n             return function(n) {\n-                var is_method = hasClass(n, \"method\");\n+                var is_method = hasClass(n, \"method\") || fullHide;\n                 if (is_method || hasClass(n, \"type\")) {\n                     if (is_method === true) {\n                         if (addOrRemove) {\n@@ -1991,7 +1991,7 @@ if (!DOMTokenList.prototype.remove) {\n                 }\n             }\n         } else {\n-            // we are collapsing the impl block\n+            // we are collapsing the impl block(s).\n \n             var parentElem = toggle.parentNode;\n             relatedDoc = parentElem;\n@@ -2006,7 +2006,7 @@ if (!DOMTokenList.prototype.remove) {\n                 return;\n             }\n \n-            // Hide all functions, but not associated types/consts\n+            // Hide all functions, but not associated types/consts.\n \n             if (mode === \"toggle\") {\n                 if (hasClass(relatedDoc, \"fns-now-collapsed\") ||\n@@ -2017,16 +2017,17 @@ if (!DOMTokenList.prototype.remove) {\n                 }\n             }\n \n+            var dontApplyBlockRule = toggle.parentNode.parentNode.id !== \"main\";\n             if (action === \"show\") {\n                 removeClass(relatedDoc, \"fns-now-collapsed\");\n                 removeClass(docblock, \"hidden-by-usual-hider\");\n-                onEachLazy(toggle.childNodes, adjustToggle(false));\n-                onEachLazy(relatedDoc.childNodes, implHider(false));\n+                onEachLazy(toggle.childNodes, adjustToggle(false, dontApplyBlockRule));\n+                onEachLazy(relatedDoc.childNodes, implHider(false, dontApplyBlockRule));\n             } else if (action === \"hide\") {\n                 addClass(relatedDoc, \"fns-now-collapsed\");\n                 addClass(docblock, \"hidden-by-usual-hider\");\n-                onEachLazy(toggle.childNodes, adjustToggle(true));\n-                onEachLazy(relatedDoc.childNodes, implHider(true));\n+                onEachLazy(toggle.childNodes, adjustToggle(true, dontApplyBlockRule);\n+                onEachLazy(relatedDoc.childNodes, implHider(true, dontApplyBlockRule));\n             }\n         }\n     }"}]}