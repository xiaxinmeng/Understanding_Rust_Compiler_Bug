{"sha": "39c6804b92aa202369e402525cee329556bc1db0", "node_id": "C_kwDOAAsO6NoAKDM5YzY4MDRiOTJhYTIwMjM2OWU0MDI1MjVjZWUzMjk1NTZiYzFkYjA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-19T21:21:17Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-19T21:21:17Z"}, "message": "Auto merge of #106704 - ecnelises:big_archive, r=bjorn3\n\nSupport AIX-style archive type\n\nReading facility of AIX big archive has been supported by `object` since 0.30.0.\n\nWriting facility of AIX big archive has already been supported by `ar_archive_writer`, but we need to bump the version to support the new archive type enum.", "tree": {"sha": "444aa2df0043444225f7e2b7b5c25cd6397359e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/444aa2df0043444225f7e2b7b5c25cd6397359e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/39c6804b92aa202369e402525cee329556bc1db0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/39c6804b92aa202369e402525cee329556bc1db0", "html_url": "https://github.com/rust-lang/rust/commit/39c6804b92aa202369e402525cee329556bc1db0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/39c6804b92aa202369e402525cee329556bc1db0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c51cf7e7ffd4ca1b7159657a76e1d4fbab18276", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c51cf7e7ffd4ca1b7159657a76e1d4fbab18276", "html_url": "https://github.com/rust-lang/rust/commit/9c51cf7e7ffd4ca1b7159657a76e1d4fbab18276"}, {"sha": "7c8c9cf47015b2776760ccc496554ba0a1ede5e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c8c9cf47015b2776760ccc496554ba0a1ede5e3", "html_url": "https://github.com/rust-lang/rust/commit/7c8c9cf47015b2776760ccc496554ba0a1ede5e3"}], "stats": {"total": 89, "additions": 49, "deletions": 40}, "files": [{"sha": "3f2dab5e63503d4344b95ace72fbfa3b1655a96a", "filename": "Cargo.lock", "status": "modified", "additions": 31, "deletions": 34, "changes": 65, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -4,12 +4,12 @@ version = 3\n \n [[package]]\n name = \"addr2line\"\n-version = \"0.17.0\"\n+version = \"0.19.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b9ecd88a8c8378ca913a680cd98f0f13ac67383d35993f86c90a70e3f137816b\"\n+checksum = \"a76fd60b23679b7d19bd066031410fb7e458ccc5e958eb5c325888ce4baedc97\"\n dependencies = [\n  \"compiler_builtins\",\n- \"gimli\",\n+ \"gimli 0.27.2\",\n  \"rustc-std-workspace-alloc\",\n  \"rustc-std-workspace-core\",\n ]\n@@ -149,7 +149,7 @@ version = \"0.1.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"b0639441fd17a3197d1cbca8dc8768cc172a63b64b4bb6c372e8f41ed0acc9bb\"\n dependencies = [\n- \"object 0.30.1\",\n+ \"object\",\n ]\n \n [[package]]\n@@ -215,16 +215,16 @@ checksum = \"d468802bab17cbc0cc575e9b053f41e72aa36bfa6b7f55e3529ffa43161b97fa\"\n \n [[package]]\n name = \"backtrace\"\n-version = \"0.3.66\"\n+version = \"0.3.67\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cab84319d616cfb654d03394f38ab7e6f0919e181b1b57e1fd15e7fb4077d9a7\"\n+checksum = \"233d376d6d185f2a3093e58f283f60f880315b6c60075b01f36b3b85154564ca\"\n dependencies = [\n  \"addr2line\",\n  \"cc\",\n  \"cfg-if\",\n  \"libc\",\n  \"miniz_oxide\",\n- \"object 0.29.0\",\n+ \"object\",\n  \"rustc-demangle\",\n ]\n \n@@ -1187,13 +1187,11 @@ checksum = \"37ab347416e802de484e4d03c7316c48f1ecb56574dfd4a46a80f173ce1de04d\"\n \n [[package]]\n name = \"flate2\"\n-version = \"1.0.23\"\n+version = \"1.0.25\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b39522e96686d38f4bc984b9198e3a0613264abaebaff2c5c918bfa6b6da09af\"\n+checksum = \"a8a2db397cb1c8772f31494cb8917e48cd1e64f0fa7efac59fbd741a0a8ce841\"\n dependencies = [\n- \"cfg-if\",\n  \"crc32fast\",\n- \"libc\",\n  \"miniz_oxide\",\n ]\n \n@@ -1409,12 +1407,20 @@ version = \"0.26.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"22030e2c5a68ec659fde1e949a745124b48e6fa8b045b7ed5bd1fe4ccc5c4e5d\"\n dependencies = [\n- \"compiler_builtins\",\n  \"fallible-iterator\",\n  \"indexmap\",\n+ \"stable_deref_trait\",\n+]\n+\n+[[package]]\n+name = \"gimli\"\n+version = \"0.27.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ad0a93d233ebf96623465aad4046a8d3aa4da22d4f4beba5388838c8a434bbb4\"\n+dependencies = [\n+ \"compiler_builtins\",\n  \"rustc-std-workspace-alloc\",\n  \"rustc-std-workspace-core\",\n- \"stable_deref_trait\",\n ]\n \n [[package]]\n@@ -1869,9 +1875,9 @@ checksum = \"7fc7aa29613bd6a620df431842069224d8bc9011086b1db4c0e0cd47fa03ec9a\"\n \n [[package]]\n name = \"libz-sys\"\n-version = \"1.1.3\"\n+version = \"1.1.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"de5435b8549c16d423ed0c03dbaafe57cf6c3344744f1242520d59c9d8ecec66\"\n+checksum = \"9702761c3935f8cc2f101793272e202c72b99da8f4224a19ddcf1279a6450bbf\"\n dependencies = [\n  \"cc\",\n  \"libc\",\n@@ -2098,9 +2104,9 @@ checksum = \"68354c5c6bd36d73ff3feceb05efa59b6acb7626617f4962be322a825e61f79a\"\n \n [[package]]\n name = \"miniz_oxide\"\n-version = \"0.5.3\"\n+version = \"0.6.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6f5c75688da582b8ffc1f1799e9db273f32133c49e048f614d22ec3256773ccc\"\n+checksum = \"b275950c28b37e794e8c55d88aeb5e139d0ce23fdbbeda68f8d7174abdf9e8fa\"\n dependencies = [\n  \"adler\",\n  \"compiler_builtins\",\n@@ -2200,29 +2206,20 @@ dependencies = [\n  \"libc\",\n ]\n \n-[[package]]\n-name = \"object\"\n-version = \"0.29.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"21158b2c33aa6d4561f1c0a6ea283ca92bc54802a93b263e910746d679a7eb53\"\n-dependencies = [\n- \"compiler_builtins\",\n- \"memchr\",\n- \"rustc-std-workspace-alloc\",\n- \"rustc-std-workspace-core\",\n-]\n-\n [[package]]\n name = \"object\"\n version = \"0.30.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"8d864c91689fdc196779b98dba0aceac6118594c2df6ee5d943eb6a8df4d107a\"\n dependencies = [\n+ \"compiler_builtins\",\n  \"crc32fast\",\n  \"flate2\",\n  \"hashbrown 0.13.1\",\n  \"indexmap\",\n  \"memchr\",\n+ \"rustc-std-workspace-alloc\",\n+ \"rustc-std-workspace-core\",\n ]\n \n [[package]]\n@@ -3073,7 +3070,7 @@ dependencies = [\n  \"cstr\",\n  \"libc\",\n  \"measureme\",\n- \"object 0.30.1\",\n+ \"object\",\n  \"rustc-demangle\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n@@ -3110,7 +3107,7 @@ dependencies = [\n  \"itertools\",\n  \"jobserver\",\n  \"libc\",\n- \"object 0.30.1\",\n+ \"object\",\n  \"pathdiff\",\n  \"regex\",\n  \"rustc_arena\",\n@@ -4498,7 +4495,7 @@ dependencies = [\n  \"hermit-abi 0.3.0\",\n  \"libc\",\n  \"miniz_oxide\",\n- \"object 0.29.0\",\n+ \"object\",\n  \"panic_abort\",\n  \"panic_unwind\",\n  \"profiler_builtins\",\n@@ -4766,9 +4763,9 @@ version = \"0.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"da8fbf660a019b6bf11ea95762041464aa9099cc293b6a66d77cea5107619671\"\n dependencies = [\n- \"gimli\",\n+ \"gimli 0.26.2\",\n  \"hashbrown 0.12.3\",\n- \"object 0.30.1\",\n+ \"object\",\n  \"tracing\",\n ]\n "}, {"sha": "c95148013eb7479111166c8af4ba5d7a5cb3833d", "filename": "compiler/rustc_codegen_llvm/src/llvm/ffi.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -552,6 +552,7 @@ pub enum ArchiveKind {\n     K_BSD,\n     K_DARWIN,\n     K_COFF,\n+    K_AIXBIG,\n }\n \n // LLVMRustThinLTOData"}, {"sha": "4f5cc575da6e5617ccaa135529721f8b1913c9c4", "filename": "compiler/rustc_codegen_llvm/src/llvm/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fmod.rs?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -137,6 +137,7 @@ impl FromStr for ArchiveKind {\n             \"bsd\" => Ok(ArchiveKind::K_BSD),\n             \"darwin\" => Ok(ArchiveKind::K_DARWIN),\n             \"coff\" => Ok(ArchiveKind::K_COFF),\n+            \"aix_big\" => Ok(ArchiveKind::K_AIXBIG),\n             _ => Err(()),\n         }\n     }"}, {"sha": "bd1ac6b7badb3d71eb47a47ac1cbed72be00e374", "filename": "compiler/rustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2FCargo.toml?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -7,7 +7,7 @@ edition = \"2021\"\n test = false\n \n [dependencies]\n-ar_archive_writer = \"0.1.1\"\n+ar_archive_writer = \"0.1.3\"\n bitflags = \"1.2.1\"\n cc = \"1.0.69\"\n itertools = \"0.10.1\""}, {"sha": "1c464b3eca4979697c3b177e72933de3a2a25d46", "filename": "compiler/rustc_codegen_ssa/src/back/archive.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Farchive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Farchive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Farchive.rs?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -233,6 +233,7 @@ impl<'a> ArArchiveBuilder<'a> {\n             \"bsd\" => ArchiveKind::Bsd,\n             \"darwin\" => ArchiveKind::Darwin,\n             \"coff\" => ArchiveKind::Coff,\n+            \"aix_big\" => ArchiveKind::AixBig,\n             kind => {\n                 self.sess.emit_fatal(UnknownArchiveKind { kind });\n             }"}, {"sha": "35d6b9ed7a44f86ac297b4568abf36d978a50d05", "filename": "compiler/rustc_llvm/llvm-wrapper/ArchiveWrapper.cpp", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_llvm%2Fllvm-wrapper%2FArchiveWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/compiler%2Frustc_llvm%2Fllvm-wrapper%2FArchiveWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FArchiveWrapper.cpp?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -39,6 +39,7 @@ enum class LLVMRustArchiveKind {\n   BSD,\n   DARWIN,\n   COFF,\n+  AIX_BIG,\n };\n \n static Archive::Kind fromRust(LLVMRustArchiveKind Kind) {\n@@ -51,6 +52,8 @@ static Archive::Kind fromRust(LLVMRustArchiveKind Kind) {\n     return Archive::K_DARWIN;\n   case LLVMRustArchiveKind::COFF:\n     return Archive::K_COFF;\n+  case LLVMRustArchiveKind::AIX_BIG:\n+    return Archive::K_AIXBIG;\n   default:\n     report_fatal_error(\"Bad ArchiveKind.\");\n   }"}, {"sha": "8ad84ca5ad88ade697637387e7cb4d7c3cf4bde8", "filename": "library/backtrace", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fbacktrace?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -1 +1 @@\n-Subproject commit 07872f28cd8a65c3c7428811548dc85f1f2fb05b\n+Subproject commit 8ad84ca5ad88ade697637387e7cb4d7c3cf4bde8"}, {"sha": "f2fda64a1ee72f7e31e5c723ada4abf1800a1976", "filename": "library/std/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/library%2Fstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/library%2Fstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2FCargo.toml?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -23,11 +23,11 @@ hashbrown = { version = \"0.12\", default-features = false, features = ['rustc-dep\n std_detect = { path = \"../stdarch/crates/std_detect\", default-features = false, features = ['rustc-dep-of-std'] }\n \n # Dependencies of the `backtrace` crate\n-addr2line = { version = \"0.17.0\", optional = true, default-features = false }\n+addr2line = { version = \"0.19.0\", optional = true, default-features = false }\n rustc-demangle = { version = \"0.1.21\", features = ['rustc-dep-of-std'] }\n-miniz_oxide = { version = \"0.5.0\", optional = true, default-features = false }\n+miniz_oxide = { version = \"0.6.0\", optional = true, default-features = false }\n [dependencies.object]\n-version = \"0.29.0\"\n+version = \"0.30.0\"\n optional = true\n default-features = false\n features = ['read_core', 'elf', 'macho', 'pe', 'unaligned', 'archive']"}, {"sha": "63f12a912824e8189b8bbabc40b0d559bc6aa90c", "filename": "tests/ui/suggestions/issue-71394-no-from-impl.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.rs?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -1,3 +1,8 @@\n+// ignore-wasm\n+// ignore-msvc\n+// ignore-emscripten\n+// ignore-uwp\n+\n fn main() {\n     let data: &[u8] = &[0; 10];\n     let _: &[i8] = data.into();"}, {"sha": "5c36a385a4671189f03bb709299f8d3fd1742799", "filename": "tests/ui/suggestions/issue-71394-no-from-impl.stderr", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/39c6804b92aa202369e402525cee329556bc1db0/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/39c6804b92aa202369e402525cee329556bc1db0/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuggestions%2Fissue-71394-no-from-impl.stderr?ref=39c6804b92aa202369e402525cee329556bc1db0", "patch": "@@ -1,10 +1,11 @@\n error[E0277]: the trait bound `&[i8]: From<&[u8]>` is not satisfied\n-  --> $DIR/issue-71394-no-from-impl.rs:3:25\n+  --> $DIR/issue-71394-no-from-impl.rs:8:25\n    |\n LL |     let _: &[i8] = data.into();\n    |                         ^^^^ the trait `From<&[u8]>` is not implemented for `&[i8]`\n    |\n    = help: the following other types implement trait `From<T>`:\n+             <&'input [u8] as From<gimli::read::endian_slice::EndianSlice<'input, Endian>>>\n              <[T; LANES] as From<Simd<T, LANES>>>\n              <[bool; LANES] as From<Mask<T, LANES>>>\n    = note: required for `&[u8]` to implement `Into<&[i8]>`"}]}