{"sha": "5970e9c117ebf0b3056536553dee046fa05b6c9d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5NzBlOWMxMTdlYmYwYjMwNTY1MzY1NTNkZWUwNDZmYTA1YjZjOWQ=", "commit": {"author": {"name": "Matt Brubeck", "email": "mbrubeck@limpet.net", "date": "2011-11-02T20:34:23Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-02T22:35:10Z"}, "message": "Add vec::permute to the standard library (#1013)", "tree": {"sha": "1f8ffc242029b704b3e629e228c6a8d6867262c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f8ffc242029b704b3e629e228c6a8d6867262c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5970e9c117ebf0b3056536553dee046fa05b6c9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5970e9c117ebf0b3056536553dee046fa05b6c9d", "html_url": "https://github.com/rust-lang/rust/commit/5970e9c117ebf0b3056536553dee046fa05b6c9d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5970e9c117ebf0b3056536553dee046fa05b6c9d/comments", "author": {"login": "mbrubeck", "id": 5920, "node_id": "MDQ6VXNlcjU5MjA=", "avatar_url": "https://avatars.githubusercontent.com/u/5920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbrubeck", "html_url": "https://github.com/mbrubeck", "followers_url": "https://api.github.com/users/mbrubeck/followers", "following_url": "https://api.github.com/users/mbrubeck/following{/other_user}", "gists_url": "https://api.github.com/users/mbrubeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbrubeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbrubeck/subscriptions", "organizations_url": "https://api.github.com/users/mbrubeck/orgs", "repos_url": "https://api.github.com/users/mbrubeck/repos", "events_url": "https://api.github.com/users/mbrubeck/events{/privacy}", "received_events_url": "https://api.github.com/users/mbrubeck/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "558ca9b4a81b801d0957a734bd20f73ca00cede1", "url": "https://api.github.com/repos/rust-lang/rust/commits/558ca9b4a81b801d0957a734bd20f73ca00cede1", "html_url": "https://github.com/rust-lang/rust/commit/558ca9b4a81b801d0957a734bd20f73ca00cede1"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "5fbbb72d9f04f2deb83272fd24dbb394f9e3274c", "filename": "src/lib/vec.rs", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/5970e9c117ebf0b3056536553dee046fa05b6c9d/src%2Flib%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5970e9c117ebf0b3056536553dee046fa05b6c9d/src%2Flib%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fvec.rs?ref=5970e9c117ebf0b3056536553dee046fa05b6c9d", "patch": "@@ -734,6 +734,31 @@ fn riter2<T>(v: [mutable? T], f: block(uint, T)) {\n     };\n }\n \n+/*\n+Function: permute\n+\n+Iterate over all permutations of vector `v`.  Permutations are produced in\n+lexicographic order with respect to the order of elements in `v` (so if `v`\n+is sorted then the permutations are lexicographically sorted).\n+\n+The total number of permutations produced is `len(v)!`.  If `v` contains\n+repeated elements, then some permutations are repeated.\n+*/\n+fn permute<T>(v: [mutable? T], put: block([T])) {\n+  let ln = len(v);\n+  if ln == 0u {\n+    put([]);\n+  } else {\n+    let i = 0u;\n+    while i < ln {\n+      let elt = v[i];\n+      let rest = slice(v, 0u, i) + slice(v, i+1u, ln);\n+      permute(rest) {|permutation| put([elt] + permutation)}\n+      i += 1u;\n+    }\n+  }\n+}\n+\n /*\n Function: to_ptr\n "}, {"sha": "9b29d5d197715ff17e323ba89ea2ce604310e328", "filename": "src/test/stdtest/vec.rs", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/5970e9c117ebf0b3056536553dee046fa05b6c9d/src%2Ftest%2Fstdtest%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5970e9c117ebf0b3056536553dee046fa05b6c9d/src%2Ftest%2Fstdtest%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Fvec.rs?ref=5970e9c117ebf0b3056536553dee046fa05b6c9d", "patch": "@@ -366,6 +366,27 @@ fn riter2() {\n     assert i == 3;\n }\n \n+#[test]\n+fn test_permute() {\n+  let results: [[int]];\n+\n+  results = [];\n+  permute([]) {|v| results += [v]; }\n+  assert results == [[]];\n+\n+  results = [];\n+  permute([7]) {|v| results += [v]; }\n+  assert results == [[7]];\n+\n+  results = [];\n+  permute([1,1]) {|v| results += [v]; }\n+  assert results == [[1,1],[1,1]];\n+\n+  results = [];\n+  permute([5,2,0]) {|v| results += [v]; }\n+  assert results == [[5,2,0],[5,0,2],[2,5,0],[2,0,5],[0,5,2],[0,2,5]];\n+}\n+\n #[test]\n fn test_any_and_all() {\n     assert (vec::any(is_three, [1u, 2u, 3u]));"}]}