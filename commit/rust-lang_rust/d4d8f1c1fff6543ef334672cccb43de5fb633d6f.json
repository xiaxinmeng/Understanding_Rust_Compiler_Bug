{"sha": "d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "node_id": "C_kwDOAAsO6NoAKGQ0ZDhmMWMxZmZmNjU0M2VmMzM0NjcyY2NjYjQzZGU1ZmI2MzNkNmY", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-06-06T14:00:40Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-06-06T14:00:40Z"}, "message": "Sync from rust e6d4725c76f3b526c74454bc51afdf6daf133506", "tree": {"sha": "55c3beea913dce9594a684edcc5f707ad5f1ed5e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55c3beea913dce9594a684edcc5f707ad5f1ed5e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "html_url": "https://github.com/rust-lang/rust/commit/d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4d8f1c1fff6543ef334672cccb43de5fb633d6f/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c09ef968782c8ada9aa5427605b1b7925ac60d32", "url": "https://api.github.com/repos/rust-lang/rust/commits/c09ef968782c8ada9aa5427605b1b7925ac60d32", "html_url": "https://github.com/rust-lang/rust/commit/c09ef968782c8ada9aa5427605b1b7925ac60d32"}, {"sha": "4ecd45a5889153f5844c142e404bf5398b24dfec", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ecd45a5889153f5844c142e404bf5398b24dfec", "html_url": "https://github.com/rust-lang/rust/commit/4ecd45a5889153f5844c142e404bf5398b24dfec"}], "stats": {"total": 21, "additions": 5, "deletions": 16}, "files": [{"sha": "a694bb26afb95cfc7b1807cfbce7cfc73e4d9dab", "filename": "src/common.rs", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/d4d8f1c1fff6543ef334672cccb43de5fb633d6f/src%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4d8f1c1fff6543ef334672cccb43de5fb633d6f/src%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcommon.rs?ref=d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "patch": "@@ -6,6 +6,7 @@ use rustc_index::IndexVec;\n use rustc_middle::ty::layout::{\n     FnAbiError, FnAbiOfHelpers, FnAbiRequest, LayoutError, LayoutOfHelpers,\n };\n+use rustc_span::source_map::Spanned;\n use rustc_span::SourceFile;\n use rustc_target::abi::call::FnAbi;\n use rustc_target::abi::{Integer, Primitive};\n@@ -495,25 +496,16 @@ impl<'tcx> FnAbiOfHelpers<'tcx> for RevealAllLayoutCx<'tcx> {\n         fn_abi_request: FnAbiRequest<'tcx>,\n     ) -> ! {\n         if let FnAbiError::Layout(LayoutError::SizeOverflow(_)) = err {\n-            self.0.sess.span_fatal(span, err.to_string())\n+            self.0.sess.emit_fatal(Spanned { span, node: err })\n         } else {\n             match fn_abi_request {\n                 FnAbiRequest::OfFnPtr { sig, extra_args } => {\n-                    span_bug!(\n-                        span,\n-                        \"`fn_abi_of_fn_ptr({}, {:?})` failed: {}\",\n-                        sig,\n-                        extra_args,\n-                        err\n-                    );\n+                    span_bug!(span, \"`fn_abi_of_fn_ptr({sig}, {extra_args:?})` failed: {err:?}\");\n                 }\n                 FnAbiRequest::OfInstance { instance, extra_args } => {\n                     span_bug!(\n                         span,\n-                        \"`fn_abi_of_instance({}, {:?})` failed: {}\",\n-                        instance,\n-                        extra_args,\n-                        err\n+                        \"`fn_abi_of_instance({instance}, {extra_args:?})` failed: {err:?}\"\n                     );\n                 }\n             }"}, {"sha": "1e83c30bd677a2eb6dfc9a6097d7ea1ee07b0cba", "filename": "src/intrinsics/mod.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d4d8f1c1fff6543ef334672cccb43de5fb633d6f/src%2Fintrinsics%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4d8f1c1fff6543ef334672cccb43de5fb633d6f/src%2Fintrinsics%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsics%2Fmod.rs?ref=d4d8f1c1fff6543ef334672cccb43de5fb633d6f", "patch": "@@ -475,9 +475,7 @@ fn codegen_regular_intrinsic_call<'tcx>(\n         sym::unchecked_add\n         | sym::unchecked_sub\n         | sym::unchecked_mul\n-        | sym::unchecked_div\n         | sym::exact_div\n-        | sym::unchecked_rem\n         | sym::unchecked_shl\n         | sym::unchecked_shr => {\n             intrinsic_args!(fx, args => (x, y); intrinsic);\n@@ -487,8 +485,7 @@ fn codegen_regular_intrinsic_call<'tcx>(\n                 sym::unchecked_add => BinOp::Add,\n                 sym::unchecked_sub => BinOp::Sub,\n                 sym::unchecked_mul => BinOp::Mul,\n-                sym::unchecked_div | sym::exact_div => BinOp::Div,\n-                sym::unchecked_rem => BinOp::Rem,\n+                sym::exact_div => BinOp::Div,\n                 sym::unchecked_shl => BinOp::Shl,\n                 sym::unchecked_shr => BinOp::Shr,\n                 _ => unreachable!(),"}]}