{"sha": "0849084d0664d1e50b7b4b086f6d221a054f5b46", "node_id": "C_kwDOAAsO6NoAKDA4NDkwODRkMDY2NGQxZTUwYjdiNGIwODZmNmQyMjFhMDU0ZjViNDY", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-27T11:22:14Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-28T07:53:14Z"}, "message": "cleanup global imports a bit", "tree": {"sha": "05d41bad6e72ada9fd81cc266102f6ff2615da44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/05d41bad6e72ada9fd81cc266102f6ff2615da44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0849084d0664d1e50b7b4b086f6d221a054f5b46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0849084d0664d1e50b7b4b086f6d221a054f5b46", "html_url": "https://github.com/rust-lang/rust/commit/0849084d0664d1e50b7b4b086f6d221a054f5b46", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0849084d0664d1e50b7b4b086f6d221a054f5b46/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0d104d5f756b5e6a1fafc6f89cca746b1cb5e07", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0d104d5f756b5e6a1fafc6f89cca746b1cb5e07", "html_url": "https://github.com/rust-lang/rust/commit/a0d104d5f756b5e6a1fafc6f89cca746b1cb5e07"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "a759a81b7730476fc32ad3d92f9ad842a7ff8740", "filename": "src/tools/miri/src/lib.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Flib.rs?ref=0849084d0664d1e50b7b4b086f6d221a054f5b46", "patch": "@@ -90,8 +90,7 @@ pub use crate::concurrency::{\n     init_once::{EvalContextExt as _, InitOnceId},\n     sync::{CondvarId, EvalContextExt as _, MutexId, RwLockId, SyncId},\n     thread::{\n-        EvalContextExt as _, SchedulingAction, StackEmptyCallback, ThreadId, ThreadManager,\n-        ThreadState, Time,\n+        EvalContextExt as _, SchedulingAction, StackEmptyCallback, ThreadId, ThreadManager, Time,\n     },\n };\n pub use crate::diagnostics::{\n@@ -110,7 +109,7 @@ pub use crate::mono_hash_map::MonoHashMap;\n pub use crate::operator::EvalContextExt as _;\n pub use crate::range_map::RangeMap;\n pub use crate::stacked_borrows::{\n-    CallId, EvalContextExt as _, Item, Permission, RetagFields, SbTag, Stack, Stacks,\n+    CallId, EvalContextExt as _, Item, Permission, RetagFields, SbTag,\n };\n pub use crate::tag_gc::{EvalContextExt as _, VisitTags};\n "}, {"sha": "4d3444bc39cdd97a839f0f9fcf6eb727a8dd4352", "filename": "src/tools/miri/src/machine.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Fmachine.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Fmachine.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Fmachine.rs?ref=0849084d0664d1e50b7b4b086f6d221a054f5b46", "patch": "@@ -908,7 +908,13 @@ impl<'mir, 'tcx> Machine<'mir, 'tcx> for MiriMachine<'mir, 'tcx> {\n \n         let alloc = alloc.into_owned();\n         let stacks = ecx.machine.stacked_borrows.as_ref().map(|stacked_borrows| {\n-            Stacks::new_allocation(id, alloc.size(), stacked_borrows, kind, &ecx.machine)\n+            stacked_borrows::Stacks::new_allocation(\n+                id,\n+                alloc.size(),\n+                stacked_borrows,\n+                kind,\n+                &ecx.machine,\n+            )\n         });\n         let race_alloc = ecx.machine.data_race.as_ref().map(|data_race| {\n             data_race::AllocExtra::new_allocation("}, {"sha": "023f6005419a603310a4fb44327b3d98c4b61903", "filename": "src/tools/miri/src/stacked_borrows/diagnostics.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Fstacked_borrows%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0849084d0664d1e50b7b4b086f6d221a054f5b46/src%2Ftools%2Fmiri%2Fsrc%2Fstacked_borrows%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Fstacked_borrows%2Fdiagnostics.rs?ref=0849084d0664d1e50b7b4b086f6d221a054f5b46", "patch": "@@ -5,7 +5,9 @@ use rustc_middle::mir::interpret::{alloc_range, AllocId, AllocRange};\n use rustc_span::{Span, SpanData};\n use rustc_target::abi::Size;\n \n-use crate::stacked_borrows::{err_sb_ub, AccessKind, GlobalStateInner, Permission, ProtectorKind};\n+use crate::stacked_borrows::{\n+    err_sb_ub, AccessKind, GlobalStateInner, Permission, ProtectorKind, Stack,\n+};\n use crate::*;\n \n use rustc_middle::mir::interpret::InterpError;"}]}