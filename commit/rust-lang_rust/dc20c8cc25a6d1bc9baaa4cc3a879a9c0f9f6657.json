{"sha": "dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjMjBjOGNjMjVhNmQxYmM5YmFhYTRjYzNhODc5YTljMGY5ZjY2NTc=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2019-01-30T12:27:12Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2019-01-30T15:21:43Z"}, "message": "bootstrap: Expose LLVM_USE_LINKER cmake option to config.toml.", "tree": {"sha": "87d735a84a4d3003d5e9d87d51ecc2ac154fd550", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87d735a84a4d3003d5e9d87d51ecc2ac154fd550"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "html_url": "https://github.com/rust-lang/rust/commit/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f534ffbdb9bb9897ea6a1f7290e5e6fb4d86f02", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f534ffbdb9bb9897ea6a1f7290e5e6fb4d86f02", "html_url": "https://github.com/rust-lang/rust/commit/4f534ffbdb9bb9897ea6a1f7290e5e6fb4d86f02"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "548aa691633dba80aa13df7480f54e6cb3818b30", "filename": "config.toml.example", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "patch": "@@ -96,6 +96,10 @@\n # that your host compiler ships with libc++.\n #use-libcxx = true\n \n+# The value specified here will be passed as `-DLLVM_USE_LINKER` to CMake.\n+#use-linker = \"lld\"\n+\n+\n # =============================================================================\n # General build configuration options\n # ============================================================================="}, {"sha": "2871db2c9a2d124829ffdec2ac57fdba067926a2", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "patch": "@@ -77,6 +77,7 @@ pub struct Config {\n     pub llvm_experimental_targets: String,\n     pub llvm_link_jobs: Option<u32>,\n     pub llvm_version_suffix: Option<String>,\n+    pub llvm_use_linker: Option<String>,\n \n     pub lld_enabled: bool,\n     pub lldb_enabled: bool,\n@@ -255,6 +256,7 @@ struct Llvm {\n     version_suffix: Option<String>,\n     clang_cl: Option<String>,\n     use_libcxx: Option<bool>,\n+    use_linker: Option<String>,\n }\n \n #[derive(Deserialize, Default, Clone)]\n@@ -517,6 +519,7 @@ impl Config {\n             config.llvm_version_suffix = llvm.version_suffix.clone();\n             config.llvm_clang_cl = llvm.clang_cl.clone();\n             set(&mut config.llvm_use_libcxx, llvm.use_libcxx);\n+            config.llvm_use_linker = llvm.use_linker.clone();\n         }\n \n         if let Some(ref rust) = toml.rust {"}, {"sha": "e4325179f63a5a7ad4a7af47771ed95101976a5d", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=dc20c8cc25a6d1bc9baaa4cc3a879a9c0f9f6657", "patch": "@@ -231,6 +231,10 @@ impl Step for Llvm {\n             cfg.define(\"LLVM_VERSION_SUFFIX\", suffix);\n         }\n \n+        if let Some(ref linker) = builder.config.llvm_use_linker {\n+            cfg.define(\"LLVM_USE_LINKER\", linker);\n+        }\n+\n         if let Some(ref python) = builder.config.python {\n             cfg.define(\"PYTHON_EXECUTABLE\", python);\n         }"}]}