{"sha": "7412e6976ec6a582bdec141509f96dfb1d0bcf76", "node_id": "C_kwDOAAsO6NoAKDc0MTJlNjk3NmVjNmE1ODJiZGVjMTQxNTA5Zjk2ZGZiMWQwYmNmNzY", "commit": {"author": {"name": "Ken Matsui", "email": "26405363+ken-matsui@users.noreply.github.com", "date": "2022-02-22T21:06:09Z"}, "committer": {"name": "Ken Matsui", "email": "26405363+ken-matsui@users.noreply.github.com", "date": "2022-02-22T21:06:09Z"}, "message": "Use the precise namespace for `Reverse`", "tree": {"sha": "f99b7c7d88e5c7fdd1cdf41f9cb70c25cd1fd938", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f99b7c7d88e5c7fdd1cdf41f9cb70c25cd1fd938"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7412e6976ec6a582bdec141509f96dfb1d0bcf76", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEENhGM023oMzS0St3kEDNgsymO5DMFAmIVUEEACgkQEDNgsymO\n5DOmIw/+M7Sbt01mYe92y0kroU7wpnypqPDd6J6QQbJatWahNJNrCFc1mCxlm8SU\nuII7RUm28vb2EANvQmJU8vUOuADasrENpAMJpV55QHKNTlGfFrKJQOxJ9fDLXySN\nP+NuSLHfliVRO9ERUiDRrV3bCuz9+J4/BVDHcLtWeAJzREfrzmU+Lv7sEzLWkSUZ\nnk425lWZYIWNPbXV31P9vmZTKoppe5bKdkr+DvWPBU+DPiIdakTF4vnx2knnCwo0\n3BDQpxaG2gj2bMBAHHzueBeCYQD+Pk6SyklTB6KXW4dlCmTWkU8vcDYVhnRi3fmV\nCeDTH4lggM2jV68OCHq93mOq0I3masQwvNDRUHVwxJdaZfpcmb0jr30nKV81+gkE\n3fiR+znQfjJrcROL1y5QqGRppkJtk2pTzDVejGfrKnAFIE/4OhvL9xPL4O0TX6Vl\ngDOYg97T1w91HJG6GLXwbcUJb8Pxr6GxPHJKDKv8Nx2DQaiERsplePrTEeKI7USS\nTCA4W/fP/h7yWtk5yQnFwa9f+4w668foG/RzESN2Gsdy0UYW8Pnl92JFvGXQ+XHK\n0c+VjiIpnUO9UrhCjyJa0JSr/oVFTTJpIEQ7K/i8svfqRQhZWWndP2AU0fGVS4JQ\nidkA2YwCozJjjvaz3QrE2pGlmhDQrjD4PhW3lBd6RPLfZ7FsYZA=\n=bXsF\n-----END PGP SIGNATURE-----", "payload": "tree f99b7c7d88e5c7fdd1cdf41f9cb70c25cd1fd938\nparent 9e605ef80f05fbaec22677e633971096675f2650\nauthor Ken Matsui <26405363+ken-matsui@users.noreply.github.com> 1645563969 +0900\ncommitter Ken Matsui <26405363+ken-matsui@users.noreply.github.com> 1645563969 +0900\n\nUse the precise namespace for `Reverse`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7412e6976ec6a582bdec141509f96dfb1d0bcf76", "html_url": "https://github.com/rust-lang/rust/commit/7412e6976ec6a582bdec141509f96dfb1d0bcf76", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7412e6976ec6a582bdec141509f96dfb1d0bcf76/comments", "author": {"login": "ken-matsui", "id": 26405363, "node_id": "MDQ6VXNlcjI2NDA1MzYz", "avatar_url": "https://avatars.githubusercontent.com/u/26405363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ken-matsui", "html_url": "https://github.com/ken-matsui", "followers_url": "https://api.github.com/users/ken-matsui/followers", "following_url": "https://api.github.com/users/ken-matsui/following{/other_user}", "gists_url": "https://api.github.com/users/ken-matsui/gists{/gist_id}", "starred_url": "https://api.github.com/users/ken-matsui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ken-matsui/subscriptions", "organizations_url": "https://api.github.com/users/ken-matsui/orgs", "repos_url": "https://api.github.com/users/ken-matsui/repos", "events_url": "https://api.github.com/users/ken-matsui/events{/privacy}", "received_events_url": "https://api.github.com/users/ken-matsui/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ken-matsui", "id": 26405363, "node_id": "MDQ6VXNlcjI2NDA1MzYz", "avatar_url": "https://avatars.githubusercontent.com/u/26405363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ken-matsui", "html_url": "https://github.com/ken-matsui", "followers_url": "https://api.github.com/users/ken-matsui/followers", "following_url": "https://api.github.com/users/ken-matsui/following{/other_user}", "gists_url": "https://api.github.com/users/ken-matsui/gists{/gist_id}", "starred_url": "https://api.github.com/users/ken-matsui/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ken-matsui/subscriptions", "organizations_url": "https://api.github.com/users/ken-matsui/orgs", "repos_url": "https://api.github.com/users/ken-matsui/repos", "events_url": "https://api.github.com/users/ken-matsui/events{/privacy}", "received_events_url": "https://api.github.com/users/ken-matsui/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e605ef80f05fbaec22677e633971096675f2650", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e605ef80f05fbaec22677e633971096675f2650", "html_url": "https://github.com/rust-lang/rust/commit/9e605ef80f05fbaec22677e633971096675f2650"}], "stats": {"total": 46, "additions": 21, "deletions": 25}, "files": [{"sha": "075b5e43cc742ea867ea69b0efbad830dad9b3ae", "filename": "clippy_lints/src/unnecessary_sort_by.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7412e6976ec6a582bdec141509f96dfb1d0bcf76/clippy_lints%2Fsrc%2Funnecessary_sort_by.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7412e6976ec6a582bdec141509f96dfb1d0bcf76/clippy_lints%2Fsrc%2Funnecessary_sort_by.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funnecessary_sort_by.rs?ref=7412e6976ec6a582bdec141509f96dfb1d0bcf76", "patch": "@@ -239,7 +239,7 @@ impl LateLintPass<'_> for UnnecessarySortBy {\n                     if trigger.unstable { \"_unstable\" } else { \"\" },\n                     trigger.closure_arg,\n                     if trigger.reverse {\n-                        format!(\"Reverse({})\", trigger.closure_body)\n+                        format!(\"std::cmp::Reverse({})\", trigger.closure_body)\n                     } else {\n                         trigger.closure_body.to_string()\n                     },"}, {"sha": "21e2da474a8200e05710d508bc52974586262fb7", "filename": "tests/ui/unnecessary_sort_by.fixed", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_sort_by.fixed?ref=7412e6976ec6a582bdec141509f96dfb1d0bcf76", "patch": "@@ -3,7 +3,6 @@\n #![allow(clippy::stable_sort_primitive)]\n \n use std::cell::Ref;\n-use std::cmp::Reverse;\n \n fn unnecessary_sort_by() {\n     fn id(x: isize) -> isize {\n@@ -18,8 +17,8 @@ fn unnecessary_sort_by() {\n     vec.sort_unstable_by_key(|a| id(-a));\n     // Reverse examples\n     vec.sort_by(|a, b| b.cmp(a)); // not linted to avoid suggesting `Reverse(b)` which would borrow\n-    vec.sort_by_key(|b| Reverse((b + 5).abs()));\n-    vec.sort_unstable_by_key(|b| Reverse(id(-b)));\n+    vec.sort_by_key(|b| std::cmp::Reverse((b + 5).abs()));\n+    vec.sort_unstable_by_key(|b| std::cmp::Reverse(id(-b)));\n     // Negative examples (shouldn't be changed)\n     let c = &7;\n     vec.sort_by(|a, b| (b - a).cmp(&(a - b)));\n@@ -76,7 +75,6 @@ mod issue_5754 {\n \n // The closure parameter is not dereferenced anymore, so non-Copy types can be linted\n mod issue_6001 {\n-    use super::*;\n     struct Test(String);\n \n     impl Test {\n@@ -93,8 +91,8 @@ mod issue_6001 {\n         args.sort_by_key(|a| a.name());\n         args.sort_unstable_by_key(|a| a.name());\n         // Reverse\n-        args.sort_by_key(|b| Reverse(b.name()));\n-        args.sort_unstable_by_key(|b| Reverse(b.name()));\n+        args.sort_by_key(|b| std::cmp::Reverse(b.name()));\n+        args.sort_unstable_by_key(|b| std::cmp::Reverse(b.name()));\n     }\n }\n "}, {"sha": "3365bf6e119e2463528822bb0f25438e485ea58f", "filename": "tests/ui/unnecessary_sort_by.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_sort_by.rs?ref=7412e6976ec6a582bdec141509f96dfb1d0bcf76", "patch": "@@ -3,7 +3,6 @@\n #![allow(clippy::stable_sort_primitive)]\n \n use std::cell::Ref;\n-use std::cmp::Reverse;\n \n fn unnecessary_sort_by() {\n     fn id(x: isize) -> isize {\n@@ -76,7 +75,6 @@ mod issue_5754 {\n \n // The closure parameter is not dereferenced anymore, so non-Copy types can be linted\n mod issue_6001 {\n-    use super::*;\n     struct Test(String);\n \n     impl Test {"}, {"sha": "89da5e7ea8b9bf475bb0a36ee45f29602404888e", "filename": "tests/ui/unnecessary_sort_by.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7412e6976ec6a582bdec141509f96dfb1d0bcf76/tests%2Fui%2Funnecessary_sort_by.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_sort_by.stderr?ref=7412e6976ec6a582bdec141509f96dfb1d0bcf76", "patch": "@@ -1,76 +1,76 @@\n error: use Vec::sort here instead\n-  --> $DIR/unnecessary_sort_by.rs:15:5\n+  --> $DIR/unnecessary_sort_by.rs:14:5\n    |\n LL |     vec.sort_by(|a, b| a.cmp(b));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort()`\n    |\n    = note: `-D clippy::unnecessary-sort-by` implied by `-D warnings`\n \n error: use Vec::sort here instead\n-  --> $DIR/unnecessary_sort_by.rs:16:5\n+  --> $DIR/unnecessary_sort_by.rs:15:5\n    |\n LL |     vec.sort_unstable_by(|a, b| a.cmp(b));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_unstable()`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:17:5\n+  --> $DIR/unnecessary_sort_by.rs:16:5\n    |\n LL |     vec.sort_by(|a, b| (a + 5).abs().cmp(&(b + 5).abs()));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_by_key(|a| (a + 5).abs())`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:18:5\n+  --> $DIR/unnecessary_sort_by.rs:17:5\n    |\n LL |     vec.sort_unstable_by(|a, b| id(-a).cmp(&id(-b)));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_unstable_by_key(|a| id(-a))`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:21:5\n+  --> $DIR/unnecessary_sort_by.rs:20:5\n    |\n LL |     vec.sort_by(|a, b| (b + 5).abs().cmp(&(a + 5).abs()));\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_by_key(|b| Reverse((b + 5).abs()))`\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_by_key(|b| std::cmp::Reverse((b + 5).abs()))`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:22:5\n+  --> $DIR/unnecessary_sort_by.rs:21:5\n    |\n LL |     vec.sort_unstable_by(|a, b| id(-b).cmp(&id(-a)));\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_unstable_by_key(|b| Reverse(id(-b)))`\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_unstable_by_key(|b| std::cmp::Reverse(id(-b)))`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:32:5\n+  --> $DIR/unnecessary_sort_by.rs:31:5\n    |\n LL |     vec.sort_by(|a, b| (***a).abs().cmp(&(***b).abs()));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_by_key(|a| (***a).abs())`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:33:5\n+  --> $DIR/unnecessary_sort_by.rs:32:5\n    |\n LL |     vec.sort_unstable_by(|a, b| (***a).abs().cmp(&(***b).abs()));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `vec.sort_unstable_by_key(|a| (***a).abs())`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:93:9\n+  --> $DIR/unnecessary_sort_by.rs:91:9\n    |\n LL |         args.sort_by(|a, b| a.name().cmp(&b.name()));\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_by_key(|a| a.name())`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:94:9\n+  --> $DIR/unnecessary_sort_by.rs:92:9\n    |\n LL |         args.sort_unstable_by(|a, b| a.name().cmp(&b.name()));\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_unstable_by_key(|a| a.name())`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:96:9\n+  --> $DIR/unnecessary_sort_by.rs:94:9\n    |\n LL |         args.sort_by(|a, b| b.name().cmp(&a.name()));\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_by_key(|b| Reverse(b.name()))`\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_by_key(|b| std::cmp::Reverse(b.name()))`\n \n error: use Vec::sort_by_key here instead\n-  --> $DIR/unnecessary_sort_by.rs:97:9\n+  --> $DIR/unnecessary_sort_by.rs:95:9\n    |\n LL |         args.sort_unstable_by(|a, b| b.name().cmp(&a.name()));\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_unstable_by_key(|b| Reverse(b.name()))`\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `args.sort_unstable_by_key(|b| std::cmp::Reverse(b.name()))`\n \n error: aborting due to 12 previous errors\n "}]}