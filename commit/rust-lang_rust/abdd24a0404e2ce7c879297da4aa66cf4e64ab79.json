{"sha": "abdd24a0404e2ce7c879297da4aa66cf4e64ab79", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiZGQyNGEwNDA0ZTJjZTdjODc5Mjk3ZGE0YWE2NmNmNGU2NGFiNzk=", "commit": {"author": {"name": "Manuel Drehwald", "email": "git@manuel.drehwald.info", "date": "2021-06-26T17:30:09Z"}, "committer": {"name": "Manuel Drehwald", "email": "git@manuel.drehwald.info", "date": "2021-06-26T17:30:09Z"}, "message": "Remove dropping of loaded plugins and better debug info", "tree": {"sha": "9f9a2683cbd5f95d35c0bf00683f0f7c2675acf6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f9a2683cbd5f95d35c0bf00683f0f7c2675acf6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/abdd24a0404e2ce7c879297da4aa66cf4e64ab79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/abdd24a0404e2ce7c879297da4aa66cf4e64ab79", "html_url": "https://github.com/rust-lang/rust/commit/abdd24a0404e2ce7c879297da4aa66cf4e64ab79", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/abdd24a0404e2ce7c879297da4aa66cf4e64ab79/comments", "author": {"login": "ZuseZ4", "id": 25483084, "node_id": "MDQ6VXNlcjI1NDgzMDg0", "avatar_url": "https://avatars.githubusercontent.com/u/25483084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZuseZ4", "html_url": "https://github.com/ZuseZ4", "followers_url": "https://api.github.com/users/ZuseZ4/followers", "following_url": "https://api.github.com/users/ZuseZ4/following{/other_user}", "gists_url": "https://api.github.com/users/ZuseZ4/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZuseZ4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZuseZ4/subscriptions", "organizations_url": "https://api.github.com/users/ZuseZ4/orgs", "repos_url": "https://api.github.com/users/ZuseZ4/repos", "events_url": "https://api.github.com/users/ZuseZ4/events{/privacy}", "received_events_url": "https://api.github.com/users/ZuseZ4/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ZuseZ4", "id": 25483084, "node_id": "MDQ6VXNlcjI1NDgzMDg0", "avatar_url": "https://avatars.githubusercontent.com/u/25483084?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZuseZ4", "html_url": "https://github.com/ZuseZ4", "followers_url": "https://api.github.com/users/ZuseZ4/followers", "following_url": "https://api.github.com/users/ZuseZ4/following{/other_user}", "gists_url": "https://api.github.com/users/ZuseZ4/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZuseZ4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZuseZ4/subscriptions", "organizations_url": "https://api.github.com/users/ZuseZ4/orgs", "repos_url": "https://api.github.com/users/ZuseZ4/repos", "events_url": "https://api.github.com/users/ZuseZ4/events{/privacy}", "received_events_url": "https://api.github.com/users/ZuseZ4/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f454aab3d6951aefbdec39fd99b473cfc0579acc", "url": "https://api.github.com/repos/rust-lang/rust/commits/f454aab3d6951aefbdec39fd99b473cfc0579acc", "html_url": "https://github.com/rust-lang/rust/commit/f454aab3d6951aefbdec39fd99b473cfc0579acc"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "cb9c6269b66bbbb37882343ded402d3141665ae3", "filename": "compiler/rustc_codegen_llvm/src/llvm_util.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/abdd24a0404e2ce7c879297da4aa66cf4e64ab79/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abdd24a0404e2ce7c879297da4aa66cf4e64ab79/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs?ref=abdd24a0404e2ce7c879297da4aa66cf4e64ab79", "patch": "@@ -12,6 +12,7 @@ use rustc_target::spec::{MergeFunctions, PanicStrategy};\n use std::ffi::{CStr, CString};\n use tracing::debug;\n \n+use std::mem;\n use std::path::Path;\n use std::ptr;\n use std::slice;\n@@ -136,9 +137,10 @@ unsafe fn configure_llvm(sess: &Session) {\n         let path = Path::new(plugin);\n         let res = DynamicLibrary::open(path);\n         match res {\n-            Ok(_) => debug!(\"configure_llvm: {}\", plugin),\n+            Ok(_) => debug!(\"LLVM plugin loaded succesfully {} ({})\", path.display(), plugin),\n             Err(e) => bug!(\"couldn't load plugin: {}\", e),\n         }\n+        mem::forget(res);\n     }\n \n     rustc_llvm::initialize_available_targets();"}]}